["<s>", "Set", "<", "String", ">", "getMemberAnnotations", "(", ")", "{", "return", "Collections", ".", "emptySet", "(", ")", ";", "}", "</s>"]
["<s>", "boolean", "isPresent", "(", "Element", "element", ")", "{", "return", "Mirrors", ".", "findAnnotationMirror", "(", "element", ",", "getAnnotationName", "(", ")", ")", ".", "isPresent", "(", ")", ";", "}", "</s>"]
["<s>", "boolean", "hasAnyMemberAnnotation", "(", "ExecutableElement", "element", ")", "{", "return", "getMemberAnnotations", "(", ")", ".", "stream", "(", ")", ".", "map", "(", "name", "-", ">", "Mirrors", ".", "findAnnotationMirror", "(", "element", ",", "name", ")", ")", ".", "anyMatch", "(", "Optional", ":", ":", "isPresent", ")", ";", "}", "</s>"]
["<s>", "public", "static", "ImmutableAddress", ".", "Builder", "builder", "(", ")", "{", "return", "ImmutableAddress", ".", "builder", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Value", ".", "Default", "@", "Column", "(", "unique", "=", "true", ")", "public", "UUID", "getUUID", "(", ")", "{", "return", "UUID", ".", "randomUUID", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "ImmutablePhone", ".", "Builder", "builder", "(", ")", "{", "return", "ImmutablePhone", ".", "builder", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "generateBuilder", "(", "TypeSpec", ".", "Builder", "builder", ",", "EntityDescriptor", "entity", ",", "String", "fieldName", ")", "{", "final", "String", "packageName", "=", "entity", ".", "typeName", "(", ")", ".", "packageName", "(", ")", ";", "if", "(", "entity", ".", "builderFactoryMethod", "(", ")", ".", "isPresent", "(", ")", ")", "{", "String", "returnType", "=", "entity", ".", "builderFactoryMethod", "(", ")", ".", "get", "(", ")", ".", "getReturnType", "(", ")", ".", "toString", "(", ")", ";", "TypeName", "fieldType", "=", "ClassName", ".", "get", "(", "packageName", ",", "returnType", ")", ";", "TypeName", "factoryType", "=", "TypeName", ".", "get", "(", "entity", ".", "element", "(", ")", ".", "asType", "(", ")", ")", ";", "String", "methodName", "=", "entity", ".", "builderFactoryMethod", "(", ")", ".", "map", "(", "method", "-", ">", "method", ".", "getSimpleName", "(", ")", ".", "toString", "(", ")", ")", ".", "orElse", "(", "\"", "\"", ")", ";", "builder", ".", "addField", "(", "initializeBuilder", "(", "fieldName", ",", "fieldType", ",", "factoryType", ",", "methodName", ")", ")", ";", "}", "else", "if", "(", "ImmutableAnnotationKind", ".", "IMMUTABLE", ".", "isPresent", "(", "entity", ".", "element", "(", ")", ")", ")", "{", "String", "simpleName", "=", "\"", "<STR_LIT>", "\"", "+", "entity", ".", "element", "(", ")", ".", "getSimpleName", "(", ")", ".", "toString", "(", ")", ";", "TypeName", "fieldType", "=", "ClassName", ".", "get", "(", "packageName", ",", "simpleName", "+", "\"", "<STR_LIT>", "\"", ")", ";", "TypeName", "factoryType", "=", "ClassName", ".", "get", "(", "packageName", ",", "simpleName", ")", ";", "builder", ".", "addField", "(", "initializeBuilder", "(", "fieldName", ",", "fieldType", ",", "factoryType", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "else", "if", "(", "entity", ".", "builderType", "(", ")", ".", "isPresent", "(", ")", ")", "{", "String", "name", "=", "entity", ".", "builderType", "(", ")", ".", "get", "(", ")", ".", "toString", "(", ")", ";", "TypeName", "builderName", ";", "if", "(", "name", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "builderName", "=", "ClassName", ".", "get", "(", "packageName", ",", "name", ".", "substring", "(", "\"", "<STR_LIT>", "\"", ".", "length", "(", ")", ")", ")", ";", "}", "else", "{", "builderName", "=", "TypeName", ".", "get", "(", "entity", ".", "builderType", "(", ")", ".", "get", "(", ")", ")", ";", "}", "builder", ".", "addField", "(", "initializeBuilder", "(", "fieldName", ",", "builderName", ",", "builderName", ",", "null", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "FieldSpec", "initializeBuilder", "(", "String", "fieldName", ",", "TypeName", "fieldType", ",", "TypeName", "builderType", ",", "String", "methodName", ")", "{", "FieldSpec", ".", "Builder", "builder", "=", "FieldSpec", ".", "builder", "(", "fieldType", ",", "fieldName", ",", "Modifier", ".", "PROTECTED", ")", ";", "if", "(", "methodName", "!", "=", "null", ")", "{", "builder", ".", "initializer", "(", "\"", "<STR_LIT>", "\"", ",", "builderType", ",", "methodName", ")", ";", "}", "else", "{", "builder", ".", "initializer", "(", "\"", "<STR_LIT>", "\"", ",", "builderType", ")", ";", "}", "return", "builder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "<", "T", ">", "MemoizedSupplier", "<", "T", ">", "memoized", "(", "Supplier", "<", "T", ">", "supplier", ")", "{", "return", "new", "MemoizedSupplier", "<", ">", "(", "supplier", ")", ";", "}", "</s>"]
["<s>", "private", "EntityElement", "computeType", "(", "Map", "<", "TypeElement", ",", "EntityElement", ">", "map", ",", "TypeElement", "element", ")", "{", "return", "map", ".", "computeIfAbsent", "(", "element", ",", "key", "-", ">", "new", "EntityElementDelegate", "(", "new", "EntityType", "(", "processingEnv", ",", "key", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "resetConnection", "(", ")", "{", "if", "(", "supportsTransaction", ")", "{", "try", "{", "connection", ".", "setAutoCommit", "(", "true", ")", ";", "if", "(", "previousIsolationLevel", "!", "=", "-", "1", ")", "{", "connection", ".", "setTransactionIsolation", "(", "previousIsolationLevel", ")", ";", "}", "}", "catch", "(", "SQLException", "ignored", ")", "{", "}", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testQueryFunctionNow", "(", ")", "{", "Person", "person", "=", "randomPerson", "(", ")", ";", "Calendar", "calendar", "=", "Calendar", ".", "getInstance", "(", ")", ";", "calendar", ".", "add", "(", "Calendar", ".", "DATE", ",", "1", ")", ";", "person", ".", "setBirthday", "(", "calendar", ".", "getTime", "(", ")", ")", ";", "data", ".", "insert", "(", "person", ")", ";", "try", "(", "Result", "<", "Person", ">", "query", "=", "data", ".", "select", "(", "Person", ".", "class", ")", ".", "where", "(", "Person", ".", "BIRTHDAY", ".", "gt", "(", "Now", ".", "now", "(", "Date", ".", "class", ")", ")", ")", ".", "get", "(", ")", ")", "{", "assertEquals", "(", "1", ",", "query", ".", "toList", "(", ")", ".", "size", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testQueryFunctionRandom", "(", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:10>", ";", "i", "+", "+", ")", "{", "Person", "person", "=", "randomPerson", "(", ")", ";", "data", ".", "insert", "(", "person", ")", ";", "}", "try", "(", "Result", "<", "Person", ">", "query", "=", "data", ".", "select", "(", "Person", ".", "class", ")", ".", "orderBy", "(", "new", "Random", "(", ")", ")", ".", "get", "(", ")", ")", "{", "assertEquals", "(", "<NUM_LIT:10>", ",", "query", ".", "toList", "(", ")", ".", "size", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Name", "getFunctionName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "boolean", "isConstant", "(", ")", "{", "return", "isConstant", ";", "}", "</s>"]
["<s>", "TypeName", "guessAnyTypeName", "(", "String", "packageName", ",", "TypeMirror", "mirror", ")", "{", "String", "name", "=", "mirror", ".", "toString", "(", ")", ";", "if", "(", "name", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "return", "ClassName", ".", "get", "(", "packageName", ",", "name", ".", "substring", "(", "\"", "<STR_LIT>", "\"", ".", "length", "(", ")", ")", ")", ";", "}", "else", "{", "return", "TypeName", ".", "get", "(", "mirror", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testInsertIntoSelectQuery", "(", ")", "{", "Group", "group", "=", "new", "Group", "(", ")", ";", "group", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "group", ".", "setDescription", "(", "\"", "<STR_LIT>", "\"", ")", ";", "data", ".", "insert", "(", "group", ")", ";", "int", "count", "=", "data", ".", "insert", "(", "Person", ".", "class", ",", "Person", ".", "NAME", ",", "Person", ".", "DESCRIPTION", ")", ".", "query", "(", "data", ".", "select", "(", "Group", ".", "NAME", ",", "Group", ".", "DESCRIPTION", ")", ")", ".", "get", "(", ")", ".", "first", "(", ")", ".", "count", "(", ")", ";", "assertEquals", "(", "1", ",", "count", ")", ";", "Person", "p", "=", "data", ".", "select", "(", "Person", ".", "class", ")", ".", "get", "(", ")", ".", "first", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "p", ".", "getName", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "p", ".", "getDescription", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "InsertType", "insertType", "(", ")", "{", "return", "insertType", ";", "}", "</s>"]
["<s>", "public", "QueryElement", "<", "?", ">", "subQuery", "(", ")", "{", "return", "subQuery", ";", "}", "</s>"]
["<s>", "public", "InsertInto", "<", "E", ">", "insertColumns", "(", "Expression", "[", "]", "expressions", ")", "{", "if", "(", "updates", "=", "=", "null", ")", "{", "updates", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "}", "for", "(", "Expression", "expression", ":", "expressions", ")", "{", "updates", ".", "put", "(", "expression", ",", "null", ")", ";", "}", "insertType", "=", "InsertType", ".", "SELECT", ";", "return", "this", ";", "}", "</s>"]
["<s>", "Set", "<", "Expression", "<", "?", ">", ">", "keyExpressions", "(", "Class", "<", "?", "extends", "T", ">", "type", ")", "{", "Type", "<", "?", ">", "entityType", "=", "context", ".", "getModel", "(", ")", ".", "typeOf", "(", "type", ")", ";", "Set", "<", "Expression", "<", "?", ">", ">", "keySelection", "=", "new", "LinkedHashSet", "<", ">", "(", ")", ";", "for", "(", "Attribute", "<", "?", ",", "?", ">", "attribute", ":", "entityType", ".", "getKeyAttributes", "(", ")", ")", "{", "keySelection", ".", "add", "(", "(", "Expression", "<", "?", ">", ")", "attribute", ")", ";", "}", "return", "keySelection", ";", "}", "</s>"]
["<s>", "static", "StatementExecutionException", "closing", "(", "Statement", "statement", ",", "Throwable", "cause", ",", "String", "sql", ")", "{", "StatementExecutionException", "e", "=", "new", "StatementExecutionException", "(", "cause", ",", "sql", ")", ";", "if", "(", "statement", "!", "=", "null", ")", "{", "Connection", "connection", "=", "null", ";", "try", "{", "connection", "=", "statement", ".", "getConnection", "(", ")", ";", "}", "catch", "(", "SQLException", "suppressed", ")", "{", "if", "(", "useSuppressed", ")", "{", "e", ".", "addSuppressed", "(", "suppressed", ")", ";", "}", "}", "e", ".", "closeSuppressed", "(", "statement", ")", ";", "e", ".", "closeSuppressed", "(", "connection", ")", ";", "}", "return", "e", ";", "}", "</s>"]
["<s>", "private", "void", "closeSuppressed", "(", "AutoCloseable", "closeable", ")", "{", "if", "(", "closeable", "!", "=", "null", ")", "{", "try", "{", "closeable", ".", "close", "(", ")", ";", "}", "catch", "(", "Exception", "suppressed", ")", "{", "if", "(", "useSuppressed", ")", "{", "addSuppressed", "(", "suppressed", ")", ";", "}", "else", "{", "suppressed", ".", "printStackTrace", "(", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testInsertManyToManySelfReferencing", "(", ")", "{", "Person", "person", "=", "randomPerson", "(", ")", ";", "data", ".", "insert", "(", "person", ")", ";", "List", "<", "Person", ">", "added", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:10>", ";", "i", "+", "+", ")", "{", "Person", "p", "=", "randomPerson", "(", ")", ";", "person", ".", "getFriends", "(", ")", ".", "add", "(", "p", ")", ";", "added", ".", "add", "(", "p", ")", ";", "}", "data", ".", "update", "(", "person", ")", ";", "assertTrue", "(", "added", ".", "containsAll", "(", "person", ".", "getFriends", "(", ")", ")", ")", ";", "int", "count", "=", "data", ".", "count", "(", "Person", ".", "class", ")", ".", "get", "(", ")", ".", "value", "(", ")", ";", "assertEquals", "(", "<NUM_LIT:11>", ",", "count", ")", ";", "}", "</s>"]
["<s>", "void", "appendJoin", "(", "QueryBuilder", "qb", ",", "String", "table", ")", "{", "String", "key", "=", "table", ".", "replaceAll", "(", "\"", "<STR_LIT:\\\">", "\"", ",", "\"", "\"", ")", ";", "if", "(", "aliases", ".", "containsKey", "(", "key", ")", ")", "{", "aliases", ".", "remove", "(", "key", ")", ";", "}", "String", "alias", "=", "alias", "(", "key", ")", ";", "qb", ".", "tableName", "(", "table", ")", ".", "value", "(", "alias", ")", ";", "}", "</s>"]
["<s>", "static", "boolean", "matchesSetter", "(", "String", "prefix", ",", "String", "name", ")", "{", "return", "name", ".", "startsWith", "(", "prefix", ")", "&", "&", "name", ".", "length", "(", ")", ">", "prefix", ".", "length", "(", ")", "&", "&", "Character", ".", "isUpperCase", "(", "name", ".", "charAt", "(", "prefix", ".", "length", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "RowExpression", "of", "(", "Collection", "<", "?", "extends", "Expression", "<", "?", ">", ">", "expressions", ")", "{", "return", "new", "RowExpression", "(", "expressions", ")", ";", "}", "</s>"]
["<s>", "public", "Collection", "<", "?", "extends", "Expression", "<", "?", ">", ">", "getExpressions", "(", ")", "{", "return", "expressions", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDeleteOneToManyResult", "(", ")", "{", "Person", "person", "=", "randomPerson", "(", ")", ";", "data", ".", "insert", "(", "person", ")", ";", "Phone", "phone1", "=", "randomPhone", "(", ")", ";", "Phone", "phone2", "=", "randomPhone", "(", ")", ";", "phone1", ".", "setOwner", "(", "person", ")", ";", "phone2", ".", "setOwner", "(", "person", ")", ";", "data", ".", "insert", "(", "phone1", ")", ";", "data", ".", "insert", "(", "phone2", ")", ";", "data", ".", "refresh", "(", "person", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "person", ".", "getPhoneNumbers", "(", ")", ".", "toList", "(", ")", ".", "size", "(", ")", ")", ";", "data", ".", "delete", "(", "person", ".", "getPhoneNumbers", "(", ")", ")", ";", "Phone", "cached", "=", "data", ".", "findByKey", "(", "Phone", ".", "class", ",", "phone1", ".", "getId", "(", ")", ")", ";", "assertNull", "(", "cached", ")", ";", "}", "</s>"]
["<s>", "private", "String", "removePrefix", "(", "String", "name", ")", "{", "String", "[", "]", "prefixes", "=", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ";", "for", "(", "String", "prefix", ":", "prefixes", ")", "{", "if", "(", "name", ".", "startsWith", "(", "prefix", ")", "&", "&", "name", ".", "length", "(", ")", ">", "prefix", ".", "length", "(", ")", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", "name", ".", "substring", "(", "prefix", ".", "length", "(", ")", ")", ")", ";", "sb", ".", "setCharAt", "(", "0", ",", "Character", ".", "toLowerCase", "(", "sb", ".", "charAt", "(", "0", ")", ")", ")", ";", "return", "sb", ".", "toString", "(", ")", ";", "}", "}", "return", "name", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEmbedSerialize", "(", ")", "{", "LocationEntity", "t1", "=", "new", "LocationEntity", "(", ")", ";", "t1", ".", "setId", "(", "1", ")", ";", "data", ".", "insert", "(", "t1", ")", ";", "ObjectMapper", "mapper", "=", "new", "EntityMapper", "(", "Models", ".", "MODEL3", ",", "data", ")", ";", "StringWriter", "writer", "=", "new", "StringWriter", "(", ")", ";", "try", "{", "mapper", ".", "writeValue", "(", "writer", ",", "t1", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "String", "value", "=", "writer", ".", "toString", "(", ")", ";", "System", ".", "out", ".", "println", "(", "value", ")", ";", "try", "{", "LocationEntity", "location", "=", "mapper", ".", "readValue", "(", "value", ",", "LocationEntity", ".", "class", ")", ";", "assertSame", "(", "t1", ",", "location", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSingleQueryWhereNot", "(", ")", "{", "final", "String", "name", "=", "\"", "<STR_LIT:Name>", "\"", ";", "final", "String", "email", "=", "\"", "<STR_LIT>", "\"", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:10>", ";", "i", "+", "+", ")", "{", "Person", "person", "=", "randomPerson", "(", ")", ";", "switch", "(", "i", ")", "{", "case", "0", ":", "person", ".", "setName", "(", "name", ")", ";", "break", ";", "case", "1", ":", "person", ".", "setEmail", "(", "email", ")", ";", "break", ";", "}", "data", ".", "insert", "(", "person", ")", ";", "}", "try", "(", "Result", "<", "Person", ">", "query", "=", "data", ".", "select", "(", "Person", ".", "class", ")", ".", "where", "(", "not", "(", "Person", ".", "NAME", ".", "equal", "(", "name", ")", ".", "or", "(", "Person", ".", "EMAIL", ".", "equal", "(", "email", ")", ")", ")", ")", ".", "get", "(", ")", ")", "{", "assertEquals", "(", "<NUM_LIT:8>", ",", "query", ".", "toList", "(", ")", ".", "size", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "<", "Q", ">", "Q", "not", "(", "AndOr", "<", "Q", ">", "subject", ")", "{", "return", "subject", ".", "not", "(", ")", ";", "}", "</s>"]
["<s>", "public", "AttributeBuilder", "<", "T", ",", "V", ">", "setReadOnly", "(", "boolean", "readOnly", ")", "{", "this", ".", "isReadOnly", "=", "readOnly", ";", "return", "this", ";", "}", "</s>"]
["<s>", "private", "void", "upgrade", "(", "Connection", "connection", ",", "SchemaModifier", "schema", ")", "{", "schema", ".", "createTables", "(", "connection", ",", "mode", ",", "false", ")", ";", "Function", "<", "String", ",", "String", ">", "columnTransformer", "=", "configuration", ".", "getColumnTransformer", "(", ")", ";", "Function", "<", "String", ",", "String", ">", "tableTransformer", "=", "configuration", ".", "getTableTransformer", "(", ")", ";", "List", "<", "Attribute", ">", "missingAttributes", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "for", "(", "Type", "<", "?", ">", "type", ":", "configuration", ".", "getModel", "(", ")", ".", "getTypes", "(", ")", ")", "{", "if", "(", "type", ".", "isView", "(", ")", ")", "{", "continue", ";", "}", "String", "tableName", "=", "type", ".", "getName", "(", ")", ";", "if", "(", "tableTransformer", "!", "=", "null", ")", "{", "tableName", "=", "tableTransformer", ".", "apply", "(", "tableName", ")", ";", "}", "Cursor", "cursor", "=", "queryFunction", ".", "apply", "(", "\"", "<STR_LIT>", "\"", "+", "tableName", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "Map", "<", "String", ",", "Attribute", ">", "map", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "for", "(", "Attribute", "attribute", ":", "type", ".", "getAttributes", "(", ")", ")", "{", "if", "(", "attribute", ".", "isAssociation", "(", ")", "&", "&", "!", "attribute", ".", "isForeignKey", "(", ")", ")", "{", "continue", ";", "}", "if", "(", "columnTransformer", "=", "=", "null", ")", "{", "map", ".", "put", "(", "attribute", ".", "getName", "(", ")", ",", "attribute", ")", ";", "}", "else", "{", "map", ".", "put", "(", "columnTransformer", ".", "apply", "(", "attribute", ".", "getName", "(", ")", ")", ",", "attribute", ")", ";", "}", "}", "if", "(", "cursor", ".", "getCount", "(", ")", ">", "0", ")", "{", "int", "nameIndex", "=", "cursor", ".", "getColumnIndex", "(", "\"", "<STR_LIT>", "\"", ")", ";", "while", "(", "cursor", ".", "moveToNext", "(", ")", ")", "{", "String", "name", "=", "cursor", ".", "getString", "(", "nameIndex", ")", ";", "map", ".", "remove", "(", "name", ")", ";", "}", "}", "cursor", ".", "close", "(", ")", ";", "missingAttributes", ".", "addAll", "(", "map", ".", "values", "(", ")", ")", ";", "}", "Collections", ".", "sort", "(", "missingAttributes", ",", "new", "Comparator", "<", "Attribute", ">", "(", ")", "{", "@", "Override", "public", "int", "compare", "(", "Attribute", "lhs", ",", "Attribute", "rhs", ")", "{", "if", "(", "lhs", ".", "isForeignKey", "(", ")", "&", "&", "rhs", ".", "isForeignKey", "(", ")", ")", "{", "return", "0", ";", "}", "if", "(", "lhs", ".", "isForeignKey", "(", ")", ")", "{", "return", "1", ";", "}", "return", "-", "1", ";", "}", "}", ")", ";", "for", "(", "Attribute", "<", "?", ",", "?", ">", "attribute", ":", "missingAttributes", ")", "{", "schema", ".", "addColumn", "(", "connection", ",", "attribute", ")", ";", "}", "schema", ".", "createIndexes", "(", "connection", ",", "mode", ")", ";", "}", "</s>"]
["<s>", "public", "void", "createTables", "(", "Connection", "connection", ",", "TableCreationMode", "mode", ",", "boolean", "createIndexes", ")", "{", "ArrayList", "<", "Type", "<", "?", ">", ">", "sorted", "=", "sortTypes", "(", ")", ";", "try", "(", "Statement", "statement", "=", "connection", ".", "createStatement", "(", ")", ")", "{", "if", "(", "mode", "=", "=", "TableCreationMode", ".", "DROP_CREATE", ")", "{", "executeDropStatements", "(", "statement", ")", ";", "}", "for", "(", "Type", "<", "?", ">", "type", ":", "sorted", ")", "{", "String", "sql", "=", "tableCreateStatement", "(", "type", ",", "mode", ")", ";", "statementListeners", ".", "beforeExecuteUpdate", "(", "statement", ",", "sql", ",", "null", ")", ";", "statement", ".", "execute", "(", "sql", ")", ";", "statementListeners", ".", "afterExecuteUpdate", "(", "statement", ",", "0", ")", ";", "}", "if", "(", "createIndexes", ")", "{", "for", "(", "Type", "<", "?", ">", "type", ":", "sorted", ")", "{", "createIndexes", "(", "connection", ",", "mode", ",", "type", ")", ";", "}", "}", "}", "catch", "(", "SQLException", "e", ")", "{", "throw", "new", "TableModificationException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "createIndexes", "(", "Connection", "connection", ",", "TableCreationMode", "mode", ")", "{", "ArrayList", "<", "Type", "<", "?", ">", ">", "sorted", "=", "sortTypes", "(", ")", ";", "for", "(", "Type", "<", "?", ">", "type", ":", "sorted", ")", "{", "createIndexes", "(", "connection", ",", "mode", ",", "type", ")", ";", "}", "}", "</s>"]
["<s>", "public", "<", "T", ">", "void", "addColumn", "(", "Connection", "connection", ",", "Attribute", "<", "T", ",", "?", ">", "attribute", ")", "{", "Type", "<", "T", ">", "type", "=", "attribute", ".", "getDeclaringType", "(", ")", ";", "QueryBuilder", "qb", "=", "createQueryBuilder", "(", ")", ";", "qb", ".", "keyword", "(", "ALTER", ",", "TABLE", ")", ".", "tableName", "(", "type", ".", "getName", "(", ")", ")", ";", "if", "(", "attribute", ".", "isForeignKey", "(", ")", ")", "{", "if", "(", "platform", ".", "supportsAddingConstraint", "(", ")", ")", "{", "qb", ".", "keyword", "(", "ADD", ",", "COLUMN", ")", ";", "createColumn", "(", "qb", ",", "attribute", ")", ";", "executeSql", "(", "connection", ",", "qb", ")", ";", "qb", "=", "createQueryBuilder", "(", ")", ";", "qb", ".", "keyword", "(", "ALTER", ",", "TABLE", ")", ".", "tableName", "(", "type", ".", "getName", "(", ")", ")", ".", "keyword", "(", "ADD", ")", ";", "createForeignKeyColumn", "(", "qb", ",", "attribute", ",", "false", ",", "false", ")", ";", "}", "else", "{", "qb", "=", "createQueryBuilder", "(", ")", ";", "qb", ".", "keyword", "(", "ALTER", ",", "TABLE", ")", ".", "tableName", "(", "type", ".", "getName", "(", ")", ")", ".", "keyword", "(", "ADD", ")", ";", "createForeignKeyColumn", "(", "qb", ",", "attribute", ",", "false", ",", "true", ")", ";", "}", "}", "else", "{", "qb", ".", "keyword", "(", "ADD", ",", "COLUMN", ")", ";", "createColumn", "(", "qb", ",", "attribute", ")", ";", "}", "executeSql", "(", "connection", ",", "qb", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testConvertToPersisted", "(", ")", "{", "Map", "<", "FROM", ",", "TO", ">", "testCases", "=", "getTestCases", "(", ")", ";", "for", "(", "FROM", "from", ":", "testCases", ".", "keySet", "(", ")", ")", "{", "TO", "expectedConvertedValue", "=", "testCases", ".", "get", "(", "from", ")", ";", "TO", "convertedValue", "=", "getConverter", "(", ")", ".", "convertToPersisted", "(", "from", ")", ";", "assertEquals", "(", "expectedConvertedValue", ",", "convertedValue", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testConvertToMapped", "(", ")", "{", "Map", "<", "TO", ",", "FROM", ">", "testCases", "=", "new", "HashMap", "<", ">", "(", ")", ";", "for", "(", "Map", ".", "Entry", "<", "FROM", ",", "TO", ">", "entry", ":", "getTestCases", "(", ")", ".", "entrySet", "(", ")", ")", "{", "testCases", ".", "put", "(", "entry", ".", "getValue", "(", ")", ",", "entry", ".", "getKey", "(", ")", ")", ";", "}", "org", ".", "junit", ".", "Assert", ".", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "testCases", ".", "size", "(", ")", "=", "=", "getTestCases", "(", ")", ".", "size", "(", ")", ")", ";", "for", "(", "TO", "from", ":", "testCases", ".", "keySet", "(", ")", ")", "{", "FROM", "expectedConvertedValue", "=", "testCases", ".", "get", "(", "from", ")", ";", "FROM", "convertedValue", "=", "getConverter", "(", ")", ".", "convertToMapped", "(", "null", ",", "from", ")", ";", "assertEquals", "(", "expectedConvertedValue", ",", "convertedValue", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "void", "assertEquals", "(", "Object", "obj1", ",", "Object", "obj2", ")", "{", "org", ".", "junit", ".", "Assert", ".", "assertEquals", "(", "obj1", ",", "obj2", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testInsertSelectNullKeyReference", "(", ")", "{", "Person", "person", "=", "randomPerson", "(", ")", ";", "data", ".", "insert", "(", "person", ")", ";", "assertNull", "(", "person", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "data", ".", "select", "(", "Person", ".", "class", ")", ".", "get", "(", ")", ".", "first", "(", ")", ".", "getAddress", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testQueryUnionJoinOnSameEntities", "(", ")", "{", "Group", "group", "=", "new", "Group", "(", ")", ";", "group", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "data", ".", "insert", "(", "group", ")", ";", "Person", "person1", "=", "randomPerson", "(", ")", ";", "person1", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "person1", ".", "getGroups", "(", ")", ".", "add", "(", "group", ")", ";", "data", ".", "insert", "(", "person1", ")", ";", "Person", "person2", "=", "randomPerson", "(", ")", ";", "person2", ".", "getGroups", "(", ")", ".", "add", "(", "group", ")", ";", "person2", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "data", ".", "insert", "(", "person2", ")", ";", "List", "<", "Tuple", ">", "result", "=", "data", ".", "select", "(", "Person", ".", "NAME", ".", "as", "(", "\"", "<STR_LIT:Name>", "\"", ")", ",", "Group", ".", "NAME", ".", "as", "(", "\"", "<STR_LIT:Name>", "\"", ")", ")", ".", "where", "(", "Person", ".", "ID", ".", "eq", "(", "person1", ".", "getId", "(", ")", ")", ")", ".", "union", "(", ")", ".", "select", "(", "Person", ".", "NAME", ".", "as", "(", "\"", "<STR_LIT:Name>", "\"", ")", ",", "Group", ".", "NAME", ".", "as", "(", "\"", "<STR_LIT:Name>", "\"", ")", ")", ".", "where", "(", "Person", ".", "ID", ".", "eq", "(", "person2", ".", "getId", "(", ")", ")", ")", ".", "orderBy", "(", "Person", ".", "NAME", ".", "as", "(", "\"", "<STR_LIT:Name>", "\"", ")", ")", ".", "get", "(", ")", ".", "toList", "(", ")", ";", "System", ".", "err", ".", "println", "(", "result", ".", "size", "(", ")", ")", ";", "System", ".", "err", ".", "println", "(", "result", ".", "size", "(", ")", "=", "=", "<NUM_LIT:2>", ")", ";", "assertTrue", "(", "result", ".", "size", "(", ")", "=", "=", "<NUM_LIT:2>", ")", ";", "assertTrue", "(", "result", ".", "get", "(", "0", ")", ".", "get", "(", "\"", "<STR_LIT:Name>", "\"", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "result", ".", "get", "(", "0", ")", ".", "get", "(", "\"", "<STR_LIT:Name>", "\"", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "result", ".", "get", "(", "1", ")", ".", "get", "(", "\"", "<STR_LIT:Name>", "\"", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "result", ".", "get", "(", "1", ")", ".", "get", "(", "\"", "<STR_LIT:Name>", "\"", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "void", "remove", "(", "String", "table", ")", "{", "String", "key", "=", "table", ".", "replaceAll", "(", "\"", "<STR_LIT:\\\">", "\"", ",", "\"", "\"", ")", ";", "if", "(", "appended", ".", "contains", "(", "key", ")", ")", "{", "aliases", ".", "remove", "(", "key", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "ResultSetIterator", "<", "E", ">", "getIterator", "(", ")", "{", "return", "iterator", ";", "}", "</s>"]
["<s>", "protected", "int", "getItemViewType", "(", "E", "item", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRunInTransactionFromBlocking", "(", ")", "{", "final", "BlockingEntityStore", "<", "Persistable", ">", "blocking", "=", "data", ".", "toBlocking", "(", ")", ";", "Completable", ".", "fromCallable", "(", "new", "Callable", "<", "Object", ">", "(", ")", "{", "@", "Override", "public", "Object", "call", "(", ")", "throws", "Exception", "{", "blocking", ".", "runInTransaction", "(", "new", "Callable", "<", "Object", ">", "(", ")", "{", "@", "Override", "public", "Object", "call", "(", ")", "throws", "Exception", "{", "final", "Person", "person", "=", "randomPerson", "(", ")", ";", "blocking", ".", "insert", "(", "person", ")", ";", "blocking", ".", "update", "(", "person", ")", ";", "return", "null", ";", "}", "}", ")", ";", "return", "null", ";", "}", "}", ")", ".", "subscribe", "(", ")", ";", "assertEquals", "(", "1", ",", "data", ".", "count", "(", "Person", ".", "class", ")", ".", "get", "(", ")", ".", "value", "(", ")", ".", "intValue", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "phone1", "=", "new", "Phone", "(", ")", ";", "phone2", "=", "new", "Phone", "(", ")", ";", "person", "=", "new", "Person", "(", ")", ";", "person", ".", "getPhoneNumbersList", "(", ")", ".", "add", "(", "phone1", ")", ";", "person", ".", "getPhoneNumbersList", "(", ")", ".", "add", "(", "phone2", ")", ";", "assertTrue", "(", "person", ".", "getPhoneNumbersList", "(", ")", "instanceof", "ObservableList", ")", ";", "observableList", "=", "(", "ObservableList", ")", "person", ".", "getPhoneNumbersList", "(", ")", ";", "assertTrue", "(", "observableList", ".", "observer", "(", ")", "instanceof", "CollectionChanges", ")", ";", "collectionChanges", "=", "(", "CollectionChanges", ")", "observableList", ".", "observer", "(", ")", ";", "collectionChanges", ".", "clear", "(", ")", ";", "assertTrue", "(", "collectionChanges", ".", "addedElements", "(", ")", ".", "isEmpty", "(", ")", ")", ";", "assertTrue", "(", "collectionChanges", ".", "removedElements", "(", ")", ".", "isEmpty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAddingElementThatWasPreviouslyRemoved", "(", ")", "{", "Phone", "phone", "=", "new", "Phone", "(", ")", ";", "observableList", ".", "remove", "(", "phone1", ")", ";", "assertTrue", "(", "collectionChanges", ".", "removedElements", "(", ")", ".", "contains", "(", "phone1", ")", ")", ";", "observableList", ".", "add", "(", "phone1", ")", ";", "assertTrue", "(", "collectionChanges", ".", "addedElements", "(", ")", ".", "isEmpty", "(", ")", ")", ";", "assertTrue", "(", "collectionChanges", ".", "removedElements", "(", ")", ".", "isEmpty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRemovingElementThatWasPreviouslyAdded", "(", ")", "{", "Phone", "phone", "=", "new", "Phone", "(", ")", ";", "observableList", ".", "add", "(", "phone", ")", ";", "assertTrue", "(", "collectionChanges", ".", "addedElements", "(", ")", ".", "contains", "(", "phone", ")", ")", ";", "observableList", ".", "remove", "(", "phone", ")", ";", "assertTrue", "(", "collectionChanges", ".", "addedElements", "(", ")", ".", "isEmpty", "(", ")", ")", ";", "assertTrue", "(", "collectionChanges", ".", "removedElements", "(", ")", ".", "isEmpty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "CheckReturnValue", "public", "<", "R", ">", "Single", "<", "R", ">", "runInTransaction", "(", "final", "Function", "<", "BlockingEntityStore", "<", "T", ">", ",", "R", ">", "function", ")", "{", "return", "Single", ".", "fromCallable", "(", "new", "Callable", "<", "R", ">", "(", ")", "{", "@", "Override", "public", "R", "call", "(", ")", "throws", "Exception", "{", "return", "function", ".", "apply", "(", "toBlocking", "(", ")", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Parameterized", ".", "Parameters", "public", "static", "<", "T", "extends", "Collection", "<", "Phone", ">", "&", "ObservableCollection", "<", "Phone", ">", ">", "Collection", "<", "T", ">", "observableCollections", "(", ")", "{", "Person", "person", "=", "new", "Person", "(", ")", ";", "List", "<", "Phone", ">", "observableList", "=", "person", ".", "getPhoneNumbersList", "(", ")", ";", "assertTrue", "(", "observableList", "instanceof", "ObservableList", ")", ";", "Set", "<", "Phone", ">", "observableSet", "=", "person", ".", "getPhoneNumbersSet", "(", ")", ";", "assertTrue", "(", "observableSet", "instanceof", "ObservableSet", ")", ";", "return", "Arrays", ".", "asList", "(", "(", "T", ")", "observableList", ",", "(", "T", ")", "observableSet", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "observableCollection", ".", "clear", "(", ")", ";", "phone1", "=", "new", "Phone", "(", ")", ";", "phone1", ".", "setPhoneNumber", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "phone2", "=", "new", "Phone", "(", ")", ";", "phone2", ".", "setPhoneNumber", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "observableCollection", ".", "add", "(", "phone1", ")", ";", "observableCollection", ".", "add", "(", "phone2", ")", ";", "assertTrue", "(", "observableCollection", ".", "observer", "(", ")", "instanceof", "CollectionChanges", ")", ";", "collectionChanges", "=", "(", "CollectionChanges", ")", "observableCollection", ".", "observer", "(", ")", ";", "collectionChanges", ".", "clear", "(", ")", ";", "assertTrue", "(", "collectionChanges", ".", "addedElements", "(", ")", ".", "isEmpty", "(", ")", ")", ";", "assertTrue", "(", "collectionChanges", ".", "removedElements", "(", ")", ".", "isEmpty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testClear", "(", ")", "{", "Phone", "phone3", "=", "new", "Phone", "(", ")", ";", "phone3", ".", "setPhoneNumber", "(", "\"", "<STR_LIT:3>", "\"", ")", ";", "observableCollection", ".", "add", "(", "phone3", ")", ";", "observableCollection", ".", "clear", "(", ")", ";", "assertTrue", "(", "collectionChanges", ".", "addedElements", "(", ")", ".", "isEmpty", "(", ")", ")", ";", "assertTrue", "(", "collectionChanges", ".", "removedElements", "(", ")", ".", "size", "(", ")", "=", "=", "<NUM_LIT:2>", ")", ";", "assertTrue", "(", "collectionChanges", ".", "removedElements", "(", ")", ".", "contains", "(", "phone1", ")", ")", ";", "assertTrue", "(", "collectionChanges", ".", "removedElements", "(", ")", ".", "contains", "(", "phone2", ")", ")", ";", "assertFalse", "(", "collectionChanges", ".", "removedElements", "(", ")", ".", "contains", "(", "phone3", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRemoveUsingIterator", "(", ")", "{", "Iterator", "iterator", "=", "observableCollection", ".", "iterator", "(", ")", ";", "while", "(", "iterator", ".", "hasNext", "(", ")", ")", "{", "iterator", ".", "next", "(", ")", ";", "iterator", ".", "remove", "(", ")", ";", "}", "assertTrue", "(", "collectionChanges", ".", "addedElements", "(", ")", ".", "isEmpty", "(", ")", ")", ";", "assertTrue", "(", "collectionChanges", ".", "removedElements", "(", ")", ".", "size", "(", ")", "=", "=", "<NUM_LIT:2>", ")", ";", "assertTrue", "(", "collectionChanges", ".", "removedElements", "(", ")", ".", "contains", "(", "phone1", ")", ")", ";", "assertTrue", "(", "collectionChanges", ".", "removedElements", "(", ")", ".", "contains", "(", "phone2", ")", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "void", "addColumn", "(", "Connection", "connection", ",", "Attribute", "<", "T", ",", "?", ">", "attribute", ",", "boolean", "inlineUnique", ")", "{", "Type", "<", "T", ">", "type", "=", "attribute", ".", "getDeclaringType", "(", ")", ";", "QueryBuilder", "qb", "=", "createQueryBuilder", "(", ")", ";", "qb", ".", "keyword", "(", "ALTER", ",", "TABLE", ")", ".", "tableName", "(", "type", ".", "getName", "(", ")", ")", ";", "if", "(", "attribute", ".", "isForeignKey", "(", ")", ")", "{", "if", "(", "platform", ".", "supportsAddingConstraint", "(", ")", ")", "{", "qb", ".", "keyword", "(", "ADD", ",", "COLUMN", ")", ";", "createColumn", "(", "qb", ",", "attribute", ")", ";", "executeSql", "(", "connection", ",", "qb", ")", ";", "qb", "=", "createQueryBuilder", "(", ")", ";", "qb", ".", "keyword", "(", "ALTER", ",", "TABLE", ")", ".", "tableName", "(", "type", ".", "getName", "(", ")", ")", ".", "keyword", "(", "ADD", ")", ";", "createForeignKeyColumn", "(", "qb", ",", "attribute", ",", "false", ",", "false", ")", ";", "}", "else", "{", "qb", "=", "createQueryBuilder", "(", ")", ";", "qb", ".", "keyword", "(", "ALTER", ",", "TABLE", ")", ".", "tableName", "(", "type", ".", "getName", "(", ")", ")", ".", "keyword", "(", "ADD", ")", ";", "createForeignKeyColumn", "(", "qb", ",", "attribute", ",", "false", ",", "true", ")", ";", "}", "}", "else", "{", "qb", ".", "keyword", "(", "ADD", ",", "COLUMN", ")", ";", "createColumn", "(", "qb", ",", "attribute", ",", "inlineUnique", ")", ";", "}", "executeSql", "(", "connection", ",", "qb", ")", ";", "}", "</s>"]
["<s>", "private", "void", "createColumn", "(", "QueryBuilder", "qb", ",", "Attribute", "<", "?", ",", "?", ">", "attribute", ",", "boolean", "inlineUnique", ")", "{", "qb", ".", "attribute", "(", "attribute", ")", ";", "FieldType", "fieldType", "=", "mapping", ".", "mapAttribute", "(", "attribute", ")", ";", "GeneratedColumnDefinition", "generatedColumnDefinition", "=", "platform", ".", "generatedColumnDefinition", "(", ")", ";", "if", "(", "!", "(", "attribute", ".", "isGenerated", "(", ")", "&", "&", "generatedColumnDefinition", ".", "skipTypeIdentifier", "(", ")", ")", ")", "{", "Object", "identifier", "=", "fieldType", ".", "getIdentifier", "(", ")", ";", "Converter", "converter", "=", "attribute", ".", "getConverter", "(", ")", ";", "if", "(", "converter", "=", "=", "null", "&", "&", "mapping", "instanceof", "GenericMapping", ")", "{", "GenericMapping", "genericMapping", "=", "(", "GenericMapping", ")", "mapping", ";", "converter", "=", "genericMapping", ".", "converterForType", "(", "attribute", ".", "getClassType", "(", ")", ")", ";", "}", "boolean", "hasLength", "=", "fieldType", ".", "hasLength", "(", ")", "|", "|", "(", "converter", "!", "=", "null", "&", "&", "converter", ".", "getPersistedSize", "(", ")", "!", "=", "null", ")", ";", "if", "(", "attribute", ".", "getDefinition", "(", ")", "!", "=", "null", "&", "&", "attribute", ".", "getDefinition", "(", ")", ".", "length", "(", ")", ">", "0", ")", "{", "qb", ".", "append", "(", "attribute", ".", "getDefinition", "(", ")", ")", ";", "}", "else", "if", "(", "hasLength", ")", "{", "Integer", "length", "=", "attribute", ".", "getLength", "(", ")", ";", "if", "(", "length", "=", "=", "null", "&", "&", "converter", "!", "=", "null", ")", "{", "length", "=", "converter", ".", "getPersistedSize", "(", ")", ";", "}", "if", "(", "length", "=", "=", "null", ")", "{", "length", "=", "fieldType", ".", "getDefaultLength", "(", ")", ";", "}", "if", "(", "length", "=", "=", "null", ")", "{", "length", "=", "<NUM_LIT:255>", ";", "}", "qb", ".", "append", "(", "identifier", ")", ".", "openParenthesis", "(", ")", ".", "append", "(", "length", ")", ".", "closeParenthesis", "(", ")", ";", "}", "else", "{", "qb", ".", "append", "(", "identifier", ")", ";", "}", "qb", ".", "space", "(", ")", ";", "}", "String", "suffix", "=", "fieldType", ".", "getIdentifierSuffix", "(", ")", ";", "if", "(", "suffix", "!", "=", "null", ")", "{", "qb", ".", "append", "(", "suffix", ")", ".", "space", "(", ")", ";", "}", "if", "(", "attribute", ".", "isKey", "(", ")", "&", "&", "!", "attribute", ".", "isForeignKey", "(", ")", ")", "{", "if", "(", "attribute", ".", "isGenerated", "(", ")", "&", "&", "!", "generatedColumnDefinition", ".", "postFixPrimaryKey", "(", ")", ")", "{", "generatedColumnDefinition", ".", "appendGeneratedSequence", "(", "qb", ",", "attribute", ")", ";", "qb", ".", "space", "(", ")", ";", "}", "if", "(", "attribute", ".", "getDeclaringType", "(", ")", ".", "getKeyAttributes", "(", ")", ".", "size", "(", ")", "=", "=", "1", ")", "{", "qb", ".", "keyword", "(", "PRIMARY", ",", "KEY", ")", ";", "}", "if", "(", "attribute", ".", "isGenerated", "(", ")", "&", "&", "generatedColumnDefinition", ".", "postFixPrimaryKey", "(", ")", ")", "{", "generatedColumnDefinition", ".", "appendGeneratedSequence", "(", "qb", ",", "attribute", ")", ";", "qb", ".", "space", "(", ")", ";", "}", "}", "else", "if", "(", "attribute", ".", "isGenerated", "(", ")", ")", "{", "generatedColumnDefinition", ".", "appendGeneratedSequence", "(", "qb", ",", "attribute", ")", ";", "qb", ".", "space", "(", ")", ";", "}", "if", "(", "attribute", ".", "getCollate", "(", ")", "!", "=", "null", "&", "&", "attribute", ".", "getCollate", "(", ")", ".", "length", "(", ")", ">", "0", ")", "{", "qb", ".", "keyword", "(", "COLLATE", ")", ";", "qb", ".", "append", "(", "attribute", ".", "getCollate", "(", ")", ")", ";", "qb", ".", "space", "(", ")", ";", "}", "if", "(", "attribute", ".", "getDefaultValue", "(", ")", "!", "=", "null", "&", "&", "attribute", ".", "getDefaultValue", "(", ")", ".", "length", "(", ")", ">", "0", ")", "{", "qb", ".", "keyword", "(", "DEFAULT", ")", ";", "qb", ".", "append", "(", "attribute", ".", "getDefaultValue", "(", ")", ")", ";", "qb", ".", "space", "(", ")", ";", "}", "if", "(", "!", "attribute", ".", "isNullable", "(", ")", ")", "{", "qb", ".", "keyword", "(", "NOT", ",", "NULL", ")", ";", "}", "if", "(", "inlineUnique", "&", "&", "attribute", ".", "isUnique", "(", ")", ")", "{", "qb", ".", "keyword", "(", "UNIQUE", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "createIndex", "(", "Connection", "connection", ",", "Attribute", "<", "?", ",", "?", ">", "attribute", ",", "TableCreationMode", "mode", ")", "{", "QueryBuilder", "qb", "=", "createQueryBuilder", "(", ")", ";", "String", "name", "=", "attribute", ".", "getName", "(", ")", "+", "\"", "<STR_LIT>", "\"", ";", "createIndex", "(", "qb", ",", "name", ",", "Collections", ".", "singleton", "(", "attribute", ")", ",", "attribute", ".", "getDeclaringType", "(", ")", ",", "mode", ")", ";", "executeSql", "(", "connection", ",", "qb", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testInsertDefaultValue", "(", ")", "{", "Person", "person", "=", "randomPerson", "(", ")", ";", "data", ".", "insert", "(", "person", ")", ";", "assertTrue", "(", "person", ".", "getId", "(", ")", ">", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "person", ".", "getDescription", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "Predicate", "<", "Attribute", "<", "E", ",", "?", ">", ">", "filterDefaultValues", "(", "final", "EntityProxy", "<", "E", ">", "proxy", ")", "{", "if", "(", "hasDefaultValues", ")", "{", "return", "new", "Predicate", "<", "Attribute", "<", "E", ",", "?", ">", ">", "(", ")", "{", "@", "Override", "public", "boolean", "test", "(", "Attribute", "<", "E", ",", "?", ">", "value", ")", "{", "if", "(", "value", ".", "getDefaultValue", "(", ")", "!", "=", "null", "&", "&", "proxy", ".", "getState", "(", "value", ")", "!", "=", "PropertyState", ".", "MODIFIED", ")", "{", "return", "false", ";", "}", "return", "true", ";", "}", "}", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "private", "Modifier", "[", "]", "generatedMemberModifiers", "(", "Modifier", ".", ".", ".", "modifiers", ")", "{", "Modifier", "visibility", "=", "null", ";", "switch", "(", "entity", ".", "propertyVisibility", "(", ")", ")", "{", "case", "PUBLIC", ":", "visibility", "=", "Modifier", ".", "PUBLIC", ";", "break", ";", "case", "PRIVATE", ":", "if", "(", "entity", ".", "isEmbedded", "(", ")", ")", "{", "visibility", "=", "Modifier", ".", "PROTECTED", ";", "}", "else", "{", "visibility", "=", "Modifier", ".", "PRIVATE", ";", "}", "break", ";", "case", "PACKAGE", ":", "break", ";", "}", "ArrayList", "<", "Modifier", ">", "list", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "if", "(", "visibility", "!", "=", "null", ")", "{", "list", ".", "add", "(", "visibility", ")", ";", "}", "Collections", ".", "addAll", "(", "list", ",", "modifiers", ")", ";", "return", "list", ".", "toArray", "(", "new", "Modifier", "[", "list", ".", "size", "(", ")", "]", ")", ";", "}", "</s>"]
["<s>", "public", "void", "dropTable", "(", "Type", "<", "?", ">", "type", ")", "{", "try", "(", "Connection", "connection", "=", "getConnection", "(", ")", ";", "Statement", "statement", "=", "connection", ".", "createStatement", "(", ")", ")", "{", "executeDropStatements", "(", "statement", ",", "Collections", ".", "<", "Type", "<", "?", ">", ">", "singletonList", "(", "type", ")", ")", ";", "}", "catch", "(", "SQLException", "e", ")", "{", "throw", "new", "TableModificationException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "PersistenceException", ".", "class", ")", "public", "void", "testInsertWithoutCascadeActionSave", "(", ")", "{", "Child", "child", "=", "new", "Child", "(", ")", ";", "child", ".", "setId", "(", "1", ")", ";", "Parent", "parent", "=", "new", "Parent", "(", ")", ";", "parent", ".", "setChild", "(", "child", ")", ";", "data", ".", "insert", "(", "parent", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "StatementExecutionException", ".", "class", ")", "public", "void", "testInsertNoCascade_OneToOne_NonExistingChild", "(", ")", "{", "ChildOneToOneNoCascade", "child", "=", "new", "ChildOneToOneNoCascade", "(", ")", ";", "ParentNoCascade", "parent", "=", "new", "ParentNoCascade", "(", ")", ";", "parent", ".", "setId", "(", "1", ")", ";", "parent", ".", "setOneToOne", "(", "child", ")", ";", "data", ".", "insert", "(", "parent", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testInsertNoCascade_OneToOne_ExistingChild", "(", ")", "{", "ChildOneToOneNoCascade", "child", "=", "new", "ChildOneToOneNoCascade", "(", ")", ";", "child", ".", "setId", "(", "1", ")", ";", "child", ".", "setAttribute", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "data", ".", "insert", "(", "child", ")", ";", "ParentNoCascade", "parent", "=", "new", "ParentNoCascade", "(", ")", ";", "parent", ".", "setId", "(", "1", ")", ";", "parent", ".", "setOneToOne", "(", "child", ")", ";", "data", ".", "insert", "(", "parent", ")", ";", "ParentNoCascade", "parentGot", "=", "data", ".", "findByKey", "(", "ParentNoCascade", ".", "class", ",", "<NUM_LIT>", ")", ";", "assertEquals", "(", "child", ",", "parentGot", ".", "getOneToOne", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "StatementExecutionException", ".", "class", ")", "public", "void", "testInsertNoCascade_ManyToOne_NonExistingchild", "(", ")", "{", "ChildManyToOneNoCascade", "child", "=", "new", "ChildManyToOneNoCascade", "(", ")", ";", "child", ".", "setId", "(", "1", ")", ";", "child", ".", "setAttribute", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "ParentNoCascade", "parent", "=", "new", "ParentNoCascade", "(", ")", ";", "parent", ".", "setId", "(", "1", ")", ";", "parent", ".", "setManyToOne", "(", "child", ")", ";", "data", ".", "insert", "(", "parent", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testInsertNoCascade_ManyToOne_ExistingChild", "(", ")", "{", "ChildManyToOneNoCascade", "child", "=", "new", "ChildManyToOneNoCascade", "(", ")", ";", "child", ".", "setId", "(", "1", ")", ";", "child", ".", "setAttribute", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "data", ".", "insert", "(", "child", ")", ";", "ParentNoCascade", "parent", "=", "new", "ParentNoCascade", "(", ")", ";", "parent", ".", "setId", "(", "1", ")", ";", "parent", ".", "setManyToOne", "(", "child", ")", ";", "data", ".", "insert", "(", "parent", ")", ";", "ParentNoCascade", "parentGot", "=", "data", ".", "findByKey", "(", "ParentNoCascade", ".", "class", ",", "<NUM_LIT>", ")", ";", "assertEquals", "(", "child", ",", "parentGot", ".", "getManyToOne", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "RowCountException", ".", "class", ")", "public", "void", "testInsertNoCascade_OneToMany_NonExistingChild", "(", ")", "{", "ChildOneToManyNoCascade", "child", "=", "new", "ChildOneToManyNoCascade", "(", ")", ";", "child", ".", "setId", "(", "1", ")", ";", "child", ".", "setAttribute", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "ParentNoCascade", "parent", "=", "new", "ParentNoCascade", "(", ")", ";", "parent", ".", "setId", "(", "1", ")", ";", "parent", ".", "getOneToMany", "(", ")", ".", "add", "(", "child", ")", ";", "data", ".", "insert", "(", "parent", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testInsertNoCascade_OneToMany_ExistingChild", "(", ")", "{", "ChildOneToManyNoCascade", "child", "=", "new", "ChildOneToManyNoCascade", "(", ")", ";", "child", ".", "setId", "(", "1", ")", ";", "child", ".", "setAttribute", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "data", ".", "insert", "(", "child", ")", ";", "ParentNoCascade", "parent", "=", "new", "ParentNoCascade", "(", ")", ";", "parent", ".", "setId", "(", "1", ")", ";", "parent", ".", "getOneToMany", "(", ")", ".", "add", "(", "child", ")", ";", "data", ".", "insert", "(", "parent", ")", ";", "ParentNoCascade", "parentGot", "=", "data", ".", "findByKey", "(", "ParentNoCascade", ".", "class", ",", "<NUM_LIT>", ")", ";", "assertTrue", "(", "parentGot", ".", "getOneToMany", "(", ")", ".", "size", "(", ")", "=", "=", "1", ")", ";", "assertEquals", "(", "child", ",", "parentGot", ".", "getOneToMany", "(", ")", ".", "get", "(", "0", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "StatementExecutionException", ".", "class", ")", "public", "void", "testInsertNoCascade_ManyToMany_NonExistingChild", "(", ")", "{", "ChildManyToManyNoCascade", "child", "=", "new", "ChildManyToManyNoCascade", "(", ")", ";", "child", ".", "setId", "(", "1", ")", ";", "child", ".", "setAttribute", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "ParentNoCascade", "parent", "=", "new", "ParentNoCascade", "(", ")", ";", "parent", ".", "setId", "(", "1", ")", ";", "parent", ".", "getManyToMany", "(", ")", ".", "add", "(", "child", ")", ";", "data", ".", "insert", "(", "parent", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testInsertNoCascade_ManyToMany_ExistingChild", "(", ")", "{", "ChildManyToManyNoCascade", "child", "=", "new", "ChildManyToManyNoCascade", "(", ")", ";", "child", ".", "setId", "(", "1", ")", ";", "child", ".", "setAttribute", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "data", ".", "insert", "(", "child", ")", ";", "ParentNoCascade", "parent", "=", "new", "ParentNoCascade", "(", ")", ";", "parent", ".", "setId", "(", "1", ")", ";", "parent", ".", "getManyToMany", "(", ")", ".", "add", "(", "child", ")", ";", "data", ".", "insert", "(", "parent", ")", ";", "ParentNoCascade", "parentGot", "=", "data", ".", "findByKey", "(", "ParentNoCascade", ".", "class", ",", "<NUM_LIT>", ")", ";", "assertTrue", "(", "parentGot", ".", "getManyToMany", "(", ")", ".", "size", "(", ")", "=", "=", "1", ")", ";", "assertEquals", "(", "child", ",", "parentGot", ".", "getManyToMany", "(", ")", ".", "get", "(", "0", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDeleteNoCascade_OneToOne", "(", ")", "{", "ChildOneToOneNoCascade", "child", "=", "new", "ChildOneToOneNoCascade", "(", ")", ";", "child", ".", "setId", "(", "<NUM_LIT>", ")", ";", "child", ".", "setAttribute", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "ParentNoCascade", "parent", "=", "new", "ParentNoCascade", "(", ")", ";", "parent", ".", "setId", "(", "<NUM_LIT>", ")", ";", "parent", ".", "setOneToOne", "(", "child", ")", ";", "data", ".", "insert", "(", "child", ")", ";", "data", ".", "insert", "(", "parent", ")", ";", "data", ".", "delete", "(", "parent", ")", ";", "ChildOneToOneNoCascade", "childGot", "=", "data", ".", "findByKey", "(", "ChildOneToOneNoCascade", ".", "class", ",", "<NUM_LIT>", ")", ";", "assertNotNull", "(", "childGot", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDeleteNoCascade_ManyToOne", "(", ")", "{", "ChildManyToOneNoCascade", "child", "=", "new", "ChildManyToOneNoCascade", "(", ")", ";", "child", ".", "setId", "(", "<NUM_LIT>", ")", ";", "child", ".", "setAttribute", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "ParentNoCascade", "parent", "=", "new", "ParentNoCascade", "(", ")", ";", "parent", ".", "setId", "(", "<NUM_LIT>", ")", ";", "parent", ".", "setManyToOne", "(", "child", ")", ";", "data", ".", "insert", "(", "child", ")", ";", "data", ".", "insert", "(", "parent", ")", ";", "data", ".", "delete", "(", "parent", ")", ";", "ChildManyToOneNoCascade", "childGot", "=", "data", ".", "findByKey", "(", "ChildManyToOneNoCascade", ".", "class", ",", "<NUM_LIT>", ")", ";", "assertNotNull", "(", "childGot", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDeleteNoCascade_OneToMany", "(", ")", "{", "ChildOneToManyNoCascade", "child1", "=", "new", "ChildOneToManyNoCascade", "(", ")", ";", "child1", ".", "setId", "(", "1", ")", ";", "child1", ".", "setAttribute", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "ChildOneToManyNoCascade", "child2", "=", "new", "ChildOneToManyNoCascade", "(", ")", ";", "child2", ".", "setId", "(", "<NUM_LIT:2>", ")", ";", "child2", ".", "setAttribute", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "ParentNoCascade", "parent", "=", "new", "ParentNoCascade", "(", ")", ";", "parent", ".", "setId", "(", "1", ")", ";", "parent", ".", "getOneToMany", "(", ")", ".", "add", "(", "child1", ")", ";", "parent", ".", "getOneToMany", "(", ")", ".", "add", "(", "child2", ")", ";", "data", ".", "insert", "(", "child1", ")", ";", "data", ".", "insert", "(", "child2", ")", ";", "data", ".", "insert", "(", "parent", ")", ";", "data", ".", "delete", "(", "parent", ")", ";", "ChildOneToManyNoCascade", "child1Got", "=", "data", ".", "findByKey", "(", "ChildOneToManyNoCascade", ".", "class", ",", "1", ")", ";", "assertNotNull", "(", "child1Got", ")", ";", "assertNull", "(", "child1Got", ".", "getParent", "(", ")", ")", ";", "ChildOneToManyNoCascade", "child2Got", "=", "data", ".", "findByKey", "(", "ChildOneToManyNoCascade", ".", "class", ",", "<NUM_LIT:2>", ")", ";", "assertNotNull", "(", "child2Got", ")", ";", "assertNull", "(", "child2Got", ".", "getParent", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDeleteNoCascade_ManyToMany", "(", ")", "{", "ChildManyToManyNoCascade", "child1", "=", "new", "ChildManyToManyNoCascade", "(", ")", ";", "child1", ".", "setId", "(", "1", ")", ";", "child1", ".", "setAttribute", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "ChildManyToManyNoCascade", "child2", "=", "new", "ChildManyToManyNoCascade", "(", ")", ";", "child2", ".", "setId", "(", "<NUM_LIT:2>", ")", ";", "child2", ".", "setAttribute", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "ParentNoCascade", "parent", "=", "new", "ParentNoCascade", "(", ")", ";", "parent", ".", "setId", "(", "1", ")", ";", "parent", ".", "getManyToMany", "(", ")", ".", "add", "(", "child1", ")", ";", "parent", ".", "getManyToMany", "(", ")", ".", "add", "(", "child2", ")", ";", "data", ".", "insert", "(", "child1", ")", ";", "data", ".", "insert", "(", "child2", ")", ";", "data", ".", "insert", "(", "parent", ")", ";", "data", ".", "delete", "(", "parent", ")", ";", "ChildManyToManyNoCascade", "child1Got", "=", "data", ".", "findByKey", "(", "ChildManyToManyNoCascade", ".", "class", ",", "1", ")", ";", "assertNotNull", "(", "child1Got", ")", ";", "ChildManyToManyNoCascade", "child2Got", "=", "data", ".", "findByKey", "(", "ChildManyToManyNoCascade", ".", "class", ",", "<NUM_LIT:2>", ")", ";", "assertNotNull", "(", "child2Got", ")", ";", "}", "</s>"]
["<s>", "private", "String", "getIndexDefaultName", "(", "Attribute", "<", "?", ",", "?", ">", "attribute", ")", "{", "return", "attribute", ".", "getDeclaringType", "(", ")", ".", "getName", "(", ")", "+", "\"", "<STR_LIT:_>", "\"", "+", "attribute", ".", "getName", "(", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "protected", "CloseableIterator", "<", "E", ">", "createIterator", "(", ")", "{", "return", "createIterator", "(", "0", ",", "Integer", ".", "MAX_VALUE", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testQueryEqualsIgnoreCase", "(", ")", "{", "Person", "person", "=", "randomPerson", "(", ")", ";", "person", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "data", ".", "insert", "(", "person", ")", ";", "Person", "a", "=", "data", ".", "select", "(", "Person", ".", "class", ")", ".", "where", "(", "Person", ".", "NAME", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "get", "(", ")", ".", "first", "(", ")", ";", "assertSame", "(", "a", ",", "person", ")", ";", "}", "</s>"]
["<s>", "public", "StringAttribute", "<", "T", ",", "V", ">", "buildString", "(", ")", "{", "return", "new", "ImmutableStringAttribute", "<", ">", "(", "this", ")", ";", "}", "</s>"]
["<s>", "public", "NumericAttribute", "<", "T", ",", "V", ">", "buildNumeric", "(", ")", "{", "return", "new", "ImmutableNumericAttribute", "<", ">", "(", "this", ")", ";", "}", "</s>"]
["<s>", "public", "static", "NamedNumericExpression", "<", "Double", ">", "ofDouble", "(", "String", "name", ")", "{", "return", "new", "NamedNumericExpression", "<", ">", "(", "name", ",", "Double", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "static", "NamedNumericExpression", "<", "Float", ">", "ofFloat", "(", "String", "name", ")", "{", "return", "new", "NamedNumericExpression", "<", ">", "(", "name", ",", "Float", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "static", "NamedNumericExpression", "<", "Long", ">", "ofLong", "(", "String", "name", ")", "{", "return", "new", "NamedNumericExpression", "<", ">", "(", "name", ",", "Long", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Nonnull", "public", "Class", "<", "?", ">", "getEntityClass", "(", ")", "{", "return", "entityClass", ";", "}", "</s>"]
["<s>", "@", "Bean", "public", "ObjectMapper", "objectMapper", "(", "@", "Autowired", "EntityDataStore", "entityDataStore", ")", "{", "return", "new", "EntityMapper", "(", "Models", ".", "DEFAULT", ",", "entityDataStore", ")", ";", "}", "</s>"]
["<s>", "@", "Bean", "public", "EntityDataStore", "<", "Persistable", ">", "provideDataStore", "(", ")", "{", "ConnectionProvider", "connectionProvider", "=", "new", "ConnectionProvider", "(", ")", "{", "@", "Override", "public", "Connection", "getConnection", "(", ")", "throws", "SQLException", "{", "return", "DriverManager", ".", "getConnection", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "}", "}", ";", "io", ".", "requery", ".", "sql", ".", "Configuration", "configuration", "=", "new", "ConfigurationBuilder", "(", "connectionProvider", ",", "Models", ".", "DEFAULT", ")", ".", "useDefaultLogging", "(", ")", ".", "setEntityCache", "(", "new", "WeakEntityCache", "(", ")", ")", ".", "setWriteExecutor", "(", "Executors", ".", "newSingleThreadExecutor", "(", ")", ")", ".", "build", "(", ")", ";", "SchemaModifier", "tables", "=", "new", "SchemaModifier", "(", "configuration", ")", ";", "tables", ".", "createTables", "(", "TableCreationMode", ".", "DROP_CREATE", ")", ";", "return", "new", "EntityDataStore", "<", ">", "(", "configuration", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "[", "]", "args", ")", "{", "SpringApplication", ".", "run", "(", "ExampleSpringbootApplication", ".", "class", ",", "args", ")", ";", "}", "</s>"]
["<s>", "@", "PostMapping", "@", "ResponseStatus", "(", "HttpStatus", ".", "CREATED", ")", "public", "User", "register", "(", "@", "RequestBody", "UserEntity", "user", ")", "{", "return", "userRepository", ".", "save", "(", "user", ")", ";", "}", "</s>"]
["<s>", "@", "GetMapping", "public", "User", "get", "(", "@", "RequestParam", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", "{", "return", "userRepository", ".", "findById", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getFirstName", "(", ")", "{", "return", "firstName", ";", "}", "</s>"]
["<s>", "public", "void", "setFirstName", "(", "String", "firstName", ")", "{", "this", ".", "firstName", "=", "firstName", ";", "}", "</s>"]
["<s>", "public", "String", "getLastName", "(", ")", "{", "return", "lastName", ";", "}", "</s>"]
["<s>", "public", "void", "setLastName", "(", "String", "lastName", ")", "{", "this", ".", "lastName", "=", "lastName", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "mockMvc", "=", "MockMvcBuilders", ".", "webAppContextSetup", "(", "this", ".", "wac", ")", ".", "build", "(", ")", ";", "objectMapper", "=", "new", "ObjectMapper", "(", ")", ";", "testUser", "=", "new", "User", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "testUser", ".", "setId", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createUser", "(", ")", "throws", "Exception", "{", "String", "userJson", "=", "objectMapper", ".", "writeValueAsString", "(", "testUser", ")", ";", "postUserAndExpectSame", "(", "userJson", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "findUserById", "(", ")", "throws", "Exception", "{", "String", "userJson", "=", "objectMapper", ".", "writeValueAsString", "(", "testUser", ")", ";", "mockMvc", ".", "perform", "(", "post", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contentType", "(", "MediaType", ".", "APPLICATION_JSON_UTF8", ")", ".", "content", "(", "userJson", ")", ")", ";", "mockMvc", ".", "perform", "(", "get", "(", "\"", "<STR_LIT>", "\"", "+", "1", ")", ".", "contentType", "(", "MediaType", ".", "APPLICATION_JSON_UTF8", ")", ".", "content", "(", "userJson", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "updateUser", "(", ")", "throws", "Exception", "{", "String", "userJson", "=", "objectMapper", ".", "writeValueAsString", "(", "testUser", ")", ";", "postUserAndExpectSame", "(", "userJson", ")", ";", "testUser", ".", "setFirstName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "userJson", "=", "objectMapper", ".", "writeValueAsString", "(", "testUser", ")", ";", "postUserAndExpectSame", "(", "userJson", ")", ";", "}", "</s>"]
["<s>", "private", "void", "postUserAndExpectSame", "(", "String", "userJson", ")", "throws", "Exception", "{", "mockMvc", ".", "perform", "(", "post", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contentType", "(", "MediaType", ".", "APPLICATION_JSON_UTF8", ")", ".", "content", "(", "userJson", ")", ")", ".", "andExpect", "(", "status", "(", ")", ".", "isCreated", "(", ")", ")", ".", "andExpect", "(", "content", "(", ")", ".", "json", "(", "userJson", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkForInvalidSetter", "(", "ElementValidator", "validator", ")", "{", "if", "(", "!", "element", "(", ")", ".", "getKind", "(", ")", ".", "isField", "(", ")", ")", "{", "for", "(", "ExecutableElement", "element", ":", "ElementFilter", ".", "methodsIn", "(", "entity", ".", "element", "(", ")", ".", "getEnclosedElements", "(", ")", ")", ")", "{", "List", "<", "?", "extends", "VariableElement", ">", "parameters", "=", "element", ".", "getParameters", "(", ")", ";", "if", "(", "parameters", ".", "size", "(", ")", "=", "=", "1", ")", "{", "String", "property", "=", "Names", ".", "removeMethodPrefixes", "(", "element", ".", "getSimpleName", "(", ")", ".", "toString", "(", ")", ")", ";", "if", "(", "property", ".", "toLowerCase", "(", "Locale", ".", "ROOT", ")", ".", "equalsIgnoreCase", "(", "name", "(", ")", ")", ")", "{", "validator", ".", "error", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "fieldName", "(", ")", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "}", "}", "</s>"]
