["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "underlying", ".", "authenticate", "(", "anyString", "(", ")", ")", ")", ".", "thenReturn", "(", "Optional", ".", "of", "(", "new", "PrincipalImpl", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "cachesTheFirstReturnedPrincipal", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cached", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "<", "Principal", ">", "of", "(", "new", "PrincipalImpl", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "cached", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "<", "Principal", ">", "of", "(", "new", "PrincipalImpl", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "verify", "(", "underlying", ",", "times", "(", "1", ")", ")", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "respectsTheCacheConfiguration", "(", ")", "throws", "Exception", "{", "cached", ".", "authenticate", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "cached", ".", "authenticate", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "cached", ".", "authenticate", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "final", "InOrder", "inOrder", "=", "inOrder", "(", "underlying", ")", ";", "inOrder", ".", "verify", "(", "underlying", ",", "times", "(", "1", ")", ")", ".", "authenticate", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "inOrder", ".", "verify", "(", "underlying", ",", "times", "(", "1", ")", ")", ".", "authenticate", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "inOrder", ".", "verify", "(", "underlying", ",", "times", "(", "1", ")", ")", ".", "authenticate", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidatesSingleCredentials", "(", ")", "throws", "Exception", "{", "cached", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "cached", ".", "invalidate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "cached", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "verify", "(", "underlying", ",", "times", "(", "<NUM_LIT:2>", ")", ")", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidatesSetsOfCredentials", "(", ")", "throws", "Exception", "{", "cached", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "cached", ".", "invalidateAll", "(", "ImmutableSet", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "cached", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "verify", "(", "underlying", ",", "times", "(", "<NUM_LIT:2>", ")", ")", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidatesCredentialsMatchingGivenPredicate", "(", ")", "throws", "Exception", "{", "cached", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "cached", ".", "invalidateAll", "(", "\"", "<STR_LIT>", "\"", ":", ":", "equals", ")", ";", "cached", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "verify", "(", "underlying", ",", "times", "(", "<NUM_LIT:2>", ")", ")", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidatesAllCredentials", "(", ")", "throws", "Exception", "{", "cached", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "cached", ".", "invalidateAll", "(", ")", ";", "cached", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "verify", "(", "underlying", ",", "times", "(", "<NUM_LIT:2>", ")", ")", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "calculatesTheSizeOfTheCache", "(", ")", "throws", "Exception", "{", "cached", ".", "authenticate", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "assertThat", "(", "cached", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "calculatesCacheStats", "(", ")", "throws", "Exception", "{", "cached", ".", "authenticate", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "assertThat", "(", "cached", ".", "stats", "(", ")", ".", "loadCount", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "assertThat", "(", "cached", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldNotCacheAbsentPrincipals", "(", ")", "throws", "Exception", "{", "when", "(", "underlying", ".", "authenticate", "(", "anyString", "(", ")", ")", ")", ".", "thenReturn", "(", "Optional", ".", "empty", "(", ")", ")", ";", "assertThat", "(", "cached", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "empty", "(", ")", ")", ";", "verify", "(", "underlying", ")", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "cached", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldPropagateAuthenticationException", "(", ")", "throws", "AuthenticationException", "{", "final", "AuthenticationException", "e", "=", "new", "AuthenticationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "underlying", ".", "authenticate", "(", "anyString", "(", ")", ")", ")", ".", "thenThrow", "(", "e", ")", ";", "expected", ".", "expect", "(", "CoreMatchers", ".", "sameInstance", "(", "e", ")", ")", ";", "cached", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldPropagateRuntimeException", "(", ")", "throws", "AuthenticationException", "{", "final", "RuntimeException", "e", "=", "new", "NullPointerException", "(", ")", ";", "when", "(", "underlying", ".", "authenticate", "(", "anyString", "(", ")", ")", ")", ".", "thenThrow", "(", "e", ")", ";", "expected", ".", "expect", "(", "CoreMatchers", ".", "sameInstance", "(", "e", ")", ")", ";", "cached", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isSecureShouldStayTheSame", "(", ")", "throws", "Exception", "{", "ContainerRequestContext", "requestContext", "=", "new", "FakeSecureRequestContext", "(", ")", ";", "new", "SimpleAuthFilter", "(", ")", ".", "filter", "(", "requestContext", ")", ";", "assertTrue", "(", "requestContext", ".", "getSecurityContext", "(", ")", ".", "isSecure", "(", ")", ")", ";", "}", "</s>"]
["<s>", "SimpleAuthFilter", "(", ")", "{", "authenticator", "=", "credentials", "-", ">", "Optional", ".", "of", "(", "new", "NullPrincipal", "(", ")", ")", ";", "authorizer", "=", "new", "PermitAllAuthorizer", "<", ">", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "ContainerRequestContext", "requestContext", ")", "throws", "IOException", "{", "authenticate", "(", "requestContext", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "FakeSecureRequestContext", "(", ")", "{", "securityContext", "=", "mock", "(", "SecurityContext", ".", "class", ")", ";", "when", "(", "securityContext", ".", "isSecure", "(", ")", ")", ".", "thenReturn", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "SecurityContext", "getSecurityContext", "(", ")", "{", "return", "securityContext", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setSecurityContext", "(", "SecurityContext", "context", ")", "{", "this", ".", "securityContext", "=", "context", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "getProperty", "(", "String", "name", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Collection", "<", "String", ">", "getPropertyNames", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setProperty", "(", "String", "name", ",", "Object", "object", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "removeProperty", "(", "String", "name", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "UriInfo", "getUriInfo", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setRequestUri", "(", "URI", "requestUri", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setRequestUri", "(", "URI", "baseUri", ",", "URI", "requestUri", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Request", "getRequest", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getMethod", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setMethod", "(", "String", "method", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "MultivaluedMap", "<", "String", ",", "String", ">", "getHeaders", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getHeaderString", "(", "String", "name", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Date", "getDate", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Locale", "getLanguage", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getLength", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "MediaType", "getMediaType", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "List", "<", "MediaType", ">", "getAcceptableMediaTypes", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "List", "<", "Locale", ">", "getAcceptableLanguages", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Map", "<", "String", ",", "Cookie", ">", "getCookies", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "hasEntity", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "getEntityStream", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setEntityStream", "(", "InputStream", "input", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "abortWith", "(", "Response", "response", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "public", "AbstractAuthResourceConfig", "(", ")", "{", "super", "(", "true", ",", "new", "MetricRegistry", "(", ")", ")", ";", "register", "(", "getAuthDynamicFeature", "(", "getAuthFilter", "(", ")", ")", ")", ";", "register", "(", "getAuthBinder", "(", ")", ")", ";", "register", "(", "RolesAllowedDynamicFeature", ".", "class", ")", ";", "}", "</s>"]
["<s>", "protected", "Class", "<", "?", "extends", "Principal", ">", "getPrincipalClass", "(", ")", "{", "return", "Principal", ".", "class", ";", "}", "</s>"]
["<s>", "protected", "AbstractBinder", "getAuthBinder", "(", ")", "{", "return", "new", "AuthValueFactoryProvider", ".", "Binder", "<", ">", "(", "getPrincipalClass", "(", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "DynamicFeature", "getAuthDynamicFeature", "(", "ContainerRequestFilter", "authFilter", ")", "{", "return", "new", "AuthDynamicFeature", "(", "authFilter", ")", ";", "}", "</s>"]
["<s>", "protected", "abstract", "ContainerRequestFilter", "getAuthFilter", "(", ")", ";", "</s>"]
["<s>", "@", "Override", "protected", "DeploymentContext", "configureDeployment", "(", ")", "{", "forceSet", "(", "TestProperties", ".", "CONTAINER_PORT", ",", "\"", "<STR_LIT:0>", "\"", ")", ";", "return", "ServletDeploymentContext", ".", "builder", "(", "new", "BasicAuthResourceConfigWithAuthorizationFilter", "(", ")", ")", ".", "initParam", "(", "ServletProperties", ".", "JAXRS_APPLICATION_CLASS", ",", "BasicAuthResourceConfigWithAuthorizationFilter", ".", "class", ".", "getName", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "BasicAuthResourceConfigWithAuthorizationFilter", "(", ")", "{", "register", "(", "AuthResource", ".", "class", ")", ";", "register", "(", "DummyAuthorizationFilter", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", "extends", "Principal", ">", "getPrincipalClass", "(", ")", "{", "return", "Principal", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "ContainerRequestFilter", "getAuthFilter", "(", ")", "{", "return", "new", "DummyAuthenticationFilter", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "AbstractBinder", "getAuthBinder", "(", ")", "{", "return", "new", "AuthValueFactoryProvider", ".", "Binder", "<", ">", "(", "getPrincipalClass", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DynamicFeature", "getAuthDynamicFeature", "(", "ContainerRequestFilter", "authFilter", ")", "{", "return", "new", "AuthDynamicFeature", "(", "authFilter", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "authenticationFilterShouldExecuteInAuthenticationPhaseForImplicitPermitall", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "authenticationFilterShouldExecuteInAuthenticationPhaseForOptionalPrincipal", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "ContainerRequestContext", "requestContext", ")", "throws", "IOException", "{", "requestContext", ".", "setSecurityContext", "(", "new", "SecurityContext", "(", ")", "{", "@", "Override", "public", "Principal", "getUserPrincipal", "(", ")", "{", "return", "new", "NullPrincipal", "(", ")", ";", "}", "@", "Override", "public", "boolean", "isUserInRole", "(", "String", "s", ")", "{", "return", "false", ";", "}", "@", "Override", "public", "boolean", "isSecure", "(", ")", "{", "return", "true", ";", "}", "@", "Override", "public", "String", "getAuthenticationScheme", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Principal", "getUserPrincipal", "(", ")", "{", "return", "new", "NullPrincipal", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isUserInRole", "(", "String", "s", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isSecure", "(", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getAuthenticationScheme", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "ContainerRequestContext", "request", ")", "throws", "IOException", "{", "if", "(", "request", ".", "getSecurityContext", "(", ")", ".", "getUserPrincipal", "(", ")", "!", "=", "null", ")", "{", "request", ".", "abortWith", "(", "Response", ".", "ok", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ")", ";", "}", "else", "{", "request", ".", "abortWith", "(", "Response", ".", "status", "(", "Response", ".", "Status", ".", "FORBIDDEN", ")", ".", "build", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "TestContainerFactory", "getTestContainerFactory", "(", ")", "throws", "TestContainerException", "{", "return", "new", "GrizzlyWebTestContainerFactory", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "abstract", "DropwizardResourceConfig", "getDropwizardResourceConfig", "(", ")", ";", "</s>"]
["<s>", "protected", "abstract", "Class", "<", "T", ">", "getDropwizardResourceConfigClass", "(", ")", ";", "</s>"]
["<s>", "protected", "abstract", "String", "getPrefix", "(", ")", ";", "</s>"]
["<s>", "protected", "abstract", "String", "getOrdinaryGuyValidToken", "(", ")", ";", "</s>"]
["<s>", "protected", "abstract", "String", "getGoodGuyValidToken", "(", ")", ";", "</s>"]
["<s>", "protected", "abstract", "String", "getBadGuyToken", "(", ")", ";", "</s>"]
["<s>", "@", "Override", "protected", "DeploymentContext", "configureDeployment", "(", ")", "{", "forceSet", "(", "TestProperties", ".", "CONTAINER_PORT", ",", "\"", "<STR_LIT:0>", "\"", ")", ";", "return", "ServletDeploymentContext", ".", "builder", "(", "getDropwizardResourceConfig", "(", ")", ")", ".", "initParam", "(", "ServletProperties", ".", "JAXRS_APPLICATION_CLASS", ",", "getDropwizardResourceConfigClass", "(", ")", ".", "getName", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "respondsToMissingCredentialsWith401", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "WWW_AUTHENTICATE", ")", ")", ".", "containsOnly", "(", "getPrefix", "(", ")", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resourceWithoutAuth200", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resourceWithAuthenticationWithoutAuthorizationWithCorrectCredentials200", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "getPrefix", "(", ")", "+", "\"", "\"", "+", "getOrdinaryGuyValidToken", "(", ")", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "'", "\"", "+", "ORDINARY_USER", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resourceWithAuthenticationWithoutAuthorizationNoCredentials401", "(", ")", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "WWW_AUTHENTICATE", ")", ")", ".", "containsOnly", "(", "getPrefix", "(", ")", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resourceWithValidOptionalAuthentication200", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "getPrefix", "(", ")", "+", "\"", "\"", "+", "getOrdinaryGuyValidToken", "(", ")", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resourceWithInvalidOptionalAuthentication200", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "getPrefix", "(", ")", "+", "\"", "\"", "+", "getBadGuyToken", "(", ")", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resourceWithoutOptionalAuthentication200", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resourceWithAuthorizationPrincipalIsNotAuthorized403", "(", ")", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "getPrefix", "(", ")", "+", "\"", "\"", "+", "getOrdinaryGuyValidToken", "(", ")", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resourceWithDenyAllAndNoAuth401", "(", ")", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resourceWithDenyAllAndAuth403", "(", ")", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "getPrefix", "(", ")", "+", "\"", "\"", "+", "getGoodGuyValidToken", "(", ")", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "transformsCredentialsToPrincipals", "(", ")", "throws", "Exception", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "getPrefix", "(", ")", "+", "\"", "\"", "+", "getGoodGuyValidToken", "(", ")", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "'", "\"", "+", "ADMIN_USER", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "transformsCredentialsToPrincipalsWhenAuthAnnotationExistsWithoutMethodAnnotation", "(", ")", "throws", "Exception", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "getPrefix", "(", ")", "+", "\"", "\"", "+", "getGoodGuyValidToken", "(", ")", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "'", "\"", "+", "ADMIN_USER", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "respondsToNonBasicCredentialsWith401", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "WWW_AUTHENTICATE", ")", ")", ".", "containsOnly", "(", "getPrefix", "(", ")", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "respondsToExceptionsWith500", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "getPrefix", "(", ")", "+", "\"", "\"", "+", "getBadGuyToken", "(", ")", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "underlying", ".", "authorize", "(", "any", "(", ")", ",", "anyString", "(", ")", ")", ")", ".", "thenReturn", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "cachesTheFirstReturnedPrincipal", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ")", ".", "isTrue", "(", ")", ";", "verify", "(", "underlying", ",", "times", "(", "1", ")", ")", ".", "authorize", "(", "principal", ",", "role", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "respectsTheCacheConfiguration", "(", ")", "throws", "Exception", "{", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ";", "cached", ".", "authorize", "(", "principal2", ",", "role", ")", ";", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ";", "final", "InOrder", "inOrder", "=", "inOrder", "(", "underlying", ")", ";", "inOrder", ".", "verify", "(", "underlying", ",", "times", "(", "1", ")", ")", ".", "authorize", "(", "principal", ",", "role", ")", ";", "inOrder", ".", "verify", "(", "underlying", ",", "times", "(", "1", ")", ")", ".", "authorize", "(", "principal2", ",", "role", ")", ";", "inOrder", ".", "verify", "(", "underlying", ",", "times", "(", "1", ")", ")", ".", "authorize", "(", "principal", ",", "role", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidatesPrincipalAndRole", "(", ")", "throws", "Exception", "{", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ";", "cached", ".", "invalidate", "(", "principal", ",", "role", ")", ";", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ";", "verify", "(", "underlying", ",", "times", "(", "<NUM_LIT:2>", ")", ")", ".", "authorize", "(", "principal", ",", "role", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidatesSinglePrincipal", "(", ")", "throws", "Exception", "{", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ";", "cached", ".", "invalidate", "(", "principal", ")", ";", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ";", "verify", "(", "underlying", ",", "times", "(", "<NUM_LIT:2>", ")", ")", ".", "authorize", "(", "principal", ",", "role", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidatesSetsofPrincipals", "(", ")", "throws", "Exception", "{", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ";", "cached", ".", "authorize", "(", "principal2", ",", "role", ")", ";", "cached", ".", "invalidateAll", "(", "ImmutableSet", ".", "of", "(", "principal", ",", "principal2", ")", ")", ";", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ";", "cached", ".", "authorize", "(", "principal2", ",", "role", ")", ";", "verify", "(", "underlying", ",", "times", "(", "<NUM_LIT:2>", ")", ")", ".", "authorize", "(", "principal", ",", "role", ")", ";", "verify", "(", "underlying", ",", "times", "(", "<NUM_LIT:2>", ")", ")", ".", "authorize", "(", "principal2", ",", "role", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidatesPrincipalsMatchingGivenPredicate", "(", ")", "throws", "Exception", "{", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ";", "cached", ".", "invalidateAll", "(", "principal", ":", ":", "equals", ")", ";", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ";", "verify", "(", "underlying", ",", "times", "(", "<NUM_LIT:2>", ")", ")", ".", "authorize", "(", "principal", ",", "role", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidatesAllPrincipals", "(", ")", "throws", "Exception", "{", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ";", "cached", ".", "authorize", "(", "principal2", ",", "role", ")", ";", "cached", ".", "invalidateAll", "(", ")", ";", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ";", "cached", ".", "authorize", "(", "principal2", ",", "role", ")", ";", "verify", "(", "underlying", ",", "times", "(", "<NUM_LIT:2>", ")", ")", ".", "authorize", "(", "principal", ",", "role", ")", ";", "verify", "(", "underlying", ",", "times", "(", "<NUM_LIT:2>", ")", ")", ".", "authorize", "(", "principal2", ",", "role", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "calculatesTheSizeOfTheCache", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cached", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ";", "assertThat", "(", "cached", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "cached", ".", "invalidateAll", "(", ")", ";", "assertThat", "(", "cached", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "calculatesCacheStats", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cached", ".", "stats", "(", ")", ".", "loadCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ";", "assertThat", "(", "cached", ".", "stats", "(", ")", ".", "loadCount", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "assertThat", "(", "cached", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldPropagateRuntimeException", "(", ")", "throws", "AuthenticationException", "{", "final", "RuntimeException", "e", "=", "new", "NullPointerException", "(", ")", ";", "when", "(", "underlying", ".", "authorize", "(", "principal", ",", "role", ")", ")", ".", "thenThrow", "(", "e", ")", ";", "assertThatNullPointerException", "(", ")", ".", "isThrownBy", "(", "(", ")", "-", ">", "cached", ".", "authorize", "(", "principal", ",", "role", ")", ")", ".", "isSameAs", "(", "e", ")", ";", "}", "</s>"]
["<s>", "@", "RolesAllowed", "(", "{", "\"", "<STR_LIT>", "\"", "}", ")", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "show", "(", "@", "Auth", "Principal", "principal", ")", "{", "return", "\"", "'", "\"", "+", "principal", ".", "getName", "(", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "PermitAll", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "showForEveryUser", "(", "@", "Auth", "Principal", "principal", ")", "{", "return", "\"", "'", "\"", "+", "principal", ".", "getName", "(", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "PermitAll", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "checkOptionalAuth", "(", "@", "Auth", "Optional", "<", "Principal", ">", "principalOpt", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "(", "principalOpt", ".", "isPresent", "(", ")", "?", "\"", "\"", ":", "\"", "<STR_LIT>", "\"", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "implicitPermitAllAuthorization", "(", "@", "Auth", "Principal", "principal", ")", "{", "return", "\"", "'", "\"", "+", "principal", ".", "getName", "(", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "hello", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "DenyAll", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "denied", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "principalEntityWithoutAuth", "(", "@", "Auth", "JsonPrincipal", "principal", ")", "{", "assertThat", "(", "principal", ")", ".", "isNotNull", "(", ")", ";", "return", "principal", ".", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "principalEntityWithoutAuth", "(", "@", "Auth", "NullPrincipal", "principal", ")", "{", "assertThat", "(", "principal", ")", ".", "isNotNull", "(", ")", ";", "return", "principal", ".", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "checkOptionalAuth", "(", "@", "Auth", "Optional", "<", "NullPrincipal", ">", "principalOpt", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "(", "(", "principalOpt", ".", "isPresent", "(", ")", ")", "?", "\"", "\"", ":", "\"", "<STR_LIT>", "\"", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "principalEntityWithoutAuth", "(", "JsonPrincipal", "principal", ")", "{", "assertThat", "(", "principal", ")", ".", "isNotNull", "(", ")", ";", "return", "principal", ".", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "annotatedPrincipalEntityWithoutAuth", "(", "@", "DummyAnnotation", "JsonPrincipal", "principal", ")", "{", "assertThat", "(", "principal", ")", ".", "isNotNull", "(", ")", ";", "return", "principal", ".", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "principalEntityWithoutAuth", "(", "JsonPrincipal", "principal", ")", "{", "assertThat", "(", "principal", ")", ".", "isNotNull", "(", ")", ";", "return", "principal", ".", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "principalEntityWithoutAuth", "(", "NullPrincipal", "principal", ")", "{", "assertThat", "(", "principal", ")", ".", "isNotNull", "(", ")", ";", "return", "principal", ".", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "annotatedPrincipalEntityWithoutAuth", "(", "@", "DummyAnnotation", "JsonPrincipal", "principal", ")", "{", "assertThat", "(", "principal", ")", ".", "isNotNull", "(", ")", ";", "return", "principal", ".", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "annotatedPrincipalEntityWithoutAuth", "(", "@", "DummyAnnotation", "NullPrincipal", "principal", ")", "{", "assertThat", "(", "principal", ")", ".", "isNotNull", "(", ")", ";", "return", "principal", ".", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DeploymentContext", "configureDeployment", "(", ")", "{", "forceSet", "(", "TestProperties", ".", "CONTAINER_PORT", ",", "\"", "<STR_LIT:0>", "\"", ")", ";", "return", "ServletDeploymentContext", ".", "builder", "(", "new", "NoAuthPolymorphicPrincipalInjectedResourceConfig", "(", ")", ")", ".", "initParam", "(", "ServletProperties", ".", "JAXRS_APPLICATION_CLASS", ",", "NoAuthPolymorphicPrincipalInjectedResourceConfig", ".", "class", ".", "getName", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "NoAuthPolymorphicPrincipalInjectedResourceConfig", "(", ")", "{", "register", "(", "NoAuthPolymorphicPrincipalEntityResource", ".", "class", ")", ";", "packages", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", "extends", "Principal", ">", "getPrincipalClass", "(", ")", "{", "throw", "new", "AssertionError", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "ContainerRequestFilter", "getAuthFilter", "(", ")", "{", "return", "requestContext", "-", ">", "{", "throw", "new", "AssertionError", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "AbstractBinder", "getAuthBinder", "(", ")", "{", "return", "new", "PolymorphicAuthValueFactoryProvider", ".", "Binder", "<", ">", "(", "ImmutableSet", ".", "of", "(", "JsonPrincipal", ".", "class", ",", "NullPrincipal", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DynamicFeature", "getAuthDynamicFeature", "(", "ContainerRequestFilter", "authFilter", ")", "{", "return", "new", "PolymorphicAuthDynamicFeature", "(", "ImmutableMap", ".", "of", "(", "JsonPrincipal", ".", "class", ",", "getAuthFilter", "(", ")", ",", "NullPrincipal", ".", "class", ",", "getAuthFilter", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "jsonPrincipalEntityResourceWithoutAuth200", "(", ")", "{", "String", "principalName", "=", "\"", "<STR_LIT>", "\"", ";", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "post", "(", "Entity", ".", "entity", "(", "new", "JsonPrincipal", "(", "principalName", ")", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "principalName", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "nullPrincipalEntityResourceWithoutAuth200", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "post", "(", "Entity", ".", "entity", "(", "new", "NullPrincipal", "(", ")", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "annotatedJsonPrincipalEntityResourceWithoutAuth200", "(", ")", "{", "String", "principalName", "=", "\"", "<STR_LIT>", "\"", ";", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "post", "(", "Entity", ".", "entity", "(", "new", "JsonPrincipal", "(", "principalName", ")", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "principalName", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "annotatedNullPrincipalEntityResourceWithoutAuth200", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "post", "(", "Entity", ".", "entity", "(", "new", "NullPrincipal", "(", ")", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "NullPrincipal", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "JsonCreator", "public", "JsonPrincipal", "(", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ")", "{", "super", "(", "name", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DeploymentContext", "configureDeployment", "(", ")", "{", "forceSet", "(", "TestProperties", ".", "CONTAINER_PORT", ",", "\"", "<STR_LIT:0>", "\"", ")", ";", "return", "ServletDeploymentContext", ".", "builder", "(", "new", "PolymorphicPrincipalInjectedResourceConfig", "(", ")", ")", ".", "initParam", "(", "ServletProperties", ".", "JAXRS_APPLICATION_CLASS", ",", "PolymorphicPrincipalInjectedResourceConfig", ".", "class", ".", "getName", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "PolymorphicPrincipalInjectedResourceConfig", "(", ")", "{", "register", "(", "PolymorphicPrincipalEntityResource", ".", "class", ")", ";", "packages", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", "extends", "Principal", ">", "getPrincipalClass", "(", ")", "{", "throw", "new", "AssertionError", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "ContainerRequestFilter", "getAuthFilter", "(", ")", "{", "return", "requestContext", "-", ">", "{", "throw", "new", "AssertionError", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "AbstractBinder", "getAuthBinder", "(", ")", "{", "return", "new", "PolymorphicAuthValueFactoryProvider", ".", "Binder", "<", ">", "(", "ImmutableSet", ".", "of", "(", "JsonPrincipal", ".", "class", ",", "NullPrincipal", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DynamicFeature", "getAuthDynamicFeature", "(", "ContainerRequestFilter", "authFilter", ")", "{", "final", "Authenticator", "<", "BasicCredentials", ",", "JsonPrincipal", ">", "jsonAuthenticator", "=", "credentials", "-", ">", "{", "if", "(", "credentials", ".", "getUsername", "(", ")", ".", "equals", "(", "JSON_USERNAME", ")", ")", "{", "return", "Optional", ".", "of", "(", "new", "JsonPrincipal", "(", "credentials", ".", "getUsername", "(", ")", ")", ")", ";", "}", "else", "{", "return", "Optional", ".", "empty", "(", ")", ";", "}", "}", ";", "final", "Authenticator", "<", "BasicCredentials", ",", "NullPrincipal", ">", "nullAuthenticator", "=", "credentials", "-", ">", "{", "if", "(", "credentials", ".", "getUsername", "(", ")", ".", "equals", "(", "NULL_USERNAME", ")", ")", "{", "return", "Optional", ".", "of", "(", "new", "NullPrincipal", "(", ")", ")", ";", "}", "else", "{", "return", "Optional", ".", "empty", "(", ")", ";", "}", "}", ";", "final", "BasicCredentialAuthFilter", "jsonAuthFilter", "=", "new", "BasicCredentialAuthFilter", ".", "Builder", "<", "JsonPrincipal", ">", "(", ")", ".", "setAuthenticator", "(", "jsonAuthenticator", ")", ".", "buildAuthFilter", "(", ")", ";", "final", "BasicCredentialAuthFilter", "nullAuthFilter", "=", "new", "BasicCredentialAuthFilter", ".", "Builder", "<", "NullPrincipal", ">", "(", ")", ".", "setAuthenticator", "(", "nullAuthenticator", ")", ".", "buildAuthFilter", "(", ")", ";", "return", "new", "PolymorphicAuthDynamicFeature", "<", "Principal", ">", "(", "ImmutableMap", ".", "of", "(", "JsonPrincipal", ".", "class", ",", "jsonAuthFilter", ",", "NullPrincipal", ".", "class", ",", "nullAuthFilter", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "jsonPrincipalEntityResourceAuth200", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", "+", "JSON_USERNAME_ENCODED_TOKEN", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "JSON_USERNAME", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "jsonPrincipalEntityResourceNoAuth401", "(", ")", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "nullPrincipalEntityResourceAuth200", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", "+", "NULL_USERNAME_ENCODED_TOKEN", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "nullPrincipalEntityResourceNoAuth401", "(", ")", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resourceWithValidOptionalAuthentication200", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", "+", "NULL_USERNAME_ENCODED_TOKEN", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resourceWithInvalidOptionalAuthentication200", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resourceWithoutOptionalAuthentication200", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resourceWithDifferentOptionalAuthentication200", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", "+", "JSON_USERNAME_ENCODED_TOKEN", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DeploymentContext", "configureDeployment", "(", ")", "{", "forceSet", "(", "TestProperties", ".", "CONTAINER_PORT", ",", "\"", "<STR_LIT:0>", "\"", ")", ";", "return", "ServletDeploymentContext", ".", "builder", "(", "new", "NoAuthPrincipalInjectedResourceConfig", "(", ")", ")", ".", "initParam", "(", "ServletProperties", ".", "JAXRS_APPLICATION_CLASS", ",", "NoAuthPrincipalInjectedResourceConfig", ".", "class", ".", "getName", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "NoAuthPrincipalInjectedResourceConfig", "(", ")", "{", "register", "(", "NoAuthPrincipalEntityResource", ".", "class", ")", ";", "packages", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", "extends", "Principal", ">", "getPrincipalClass", "(", ")", "{", "return", "JsonPrincipal", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "ContainerRequestFilter", "getAuthFilter", "(", ")", "{", "return", "requestContext", "-", ">", "{", "throw", "new", "AssertionError", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "AbstractBinder", "getAuthBinder", "(", ")", "{", "return", "new", "AuthValueFactoryProvider", ".", "Binder", "<", ">", "(", "getPrincipalClass", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DynamicFeature", "getAuthDynamicFeature", "(", "ContainerRequestFilter", "authFilter", ")", "{", "return", "new", "AuthDynamicFeature", "(", "authFilter", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "principalEntityResourceWithoutAuth200", "(", ")", "{", "String", "principalName", "=", "\"", "<STR_LIT>", "\"", ";", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "post", "(", "Entity", ".", "entity", "(", "new", "JsonPrincipal", "(", "principalName", ")", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "principalName", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "annotatedPrincipalEntityResourceWithoutAuth200", "(", ")", "{", "String", "principalName", "=", "\"", "<STR_LIT>", "\"", ";", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "post", "(", "Entity", ".", "entity", "(", "new", "JsonPrincipal", "(", "principalName", ")", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "principalName", ")", ";", "}", "</s>"]
["<s>", "public", "OAuthTestResourceConfig", "(", ")", "{", "register", "(", "AuthResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "AuthFilter", "getAuthFilter", "(", ")", "{", "return", "new", "OAuthCredentialAuthFilter", ".", "Builder", "<", ">", "(", ")", ".", "setAuthenticator", "(", "AuthUtil", ".", "getMultiplyUsersOAuthAuthenticator", "(", "ImmutableList", ".", "of", "(", "ADMIN_USER", ",", "ORDINARY_USER", ")", ")", ")", ".", "setAuthorizer", "(", "AuthUtil", ".", "getTestAuthorizer", "(", "ADMIN_USER", ",", "ADMIN_ROLE", ")", ")", ".", "setPrefix", "(", "CUSTOM_PREFIX", ")", ".", "buildAuthFilter", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DropwizardResourceConfig", "getDropwizardResourceConfig", "(", ")", "{", "return", "new", "OAuthProviderTest", ".", "OAuthTestResourceConfig", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "OAuthTestResourceConfig", ">", "getDropwizardResourceConfigClass", "(", ")", "{", "return", "OAuthTestResourceConfig", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getPrefix", "(", ")", "{", "return", "CUSTOM_PREFIX", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getOrdinaryGuyValidToken", "(", ")", "{", "return", "ORDINARY_USER", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getGoodGuyValidToken", "(", ")", "{", "return", "ADMIN_USER", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getBadGuyToken", "(", ")", "{", "return", "BADGUY_USER", ";", "}", "</s>"]
["<s>", "public", "OAuthTestResourceConfig", "(", ")", "{", "register", "(", "AuthResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "AuthFilter", "getAuthFilter", "(", ")", "{", "return", "new", "OAuthCredentialAuthFilter", ".", "Builder", "<", ">", "(", ")", ".", "setAuthenticator", "(", "AuthUtil", ".", "getMultiplyUsersOAuthAuthenticator", "(", "ImmutableList", ".", "of", "(", "ADMIN_USER", ",", "ORDINARY_USER", ")", ")", ")", ".", "setAuthorizer", "(", "AuthUtil", ".", "getTestAuthorizer", "(", "ADMIN_USER", ",", "ADMIN_ROLE", ")", ")", ".", "setPrefix", "(", "BEARER_PREFIX", ")", ".", "buildAuthFilter", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "checksQueryStringAccessTokenIfAuthorizationHeaderMissing", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "OAuthCredentialAuthFilter", ".", "OAUTH_ACCESS_TOKEN_PARAM", ",", "getOrdinaryGuyValidToken", "(", ")", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "'", "\"", "+", "ORDINARY_USER", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DropwizardResourceConfig", "getDropwizardResourceConfig", "(", ")", "{", "return", "new", "OAuthTestResourceConfig", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "OAuthTestResourceConfig", ">", "getDropwizardResourceConfigClass", "(", ")", "{", "return", "OAuthTestResourceConfig", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getPrefix", "(", ")", "{", "return", "BEARER_PREFIX", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getOrdinaryGuyValidToken", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getGoodGuyValidToken", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getBadGuyToken", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "public", "static", "Authenticator", "<", "BasicCredentials", ",", "Principal", ">", "getBasicAuthenticator", "(", "final", "List", "<", "String", ">", "validUsers", ")", "{", "return", "credentials", "-", ">", "{", "if", "(", "validUsers", ".", "contains", "(", "credentials", ".", "getUsername", "(", ")", ")", "&", "&", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "credentials", ".", "getPassword", "(", ")", ")", ")", "{", "return", "Optional", ".", "of", "(", "new", "PrincipalImpl", "(", "credentials", ".", "getUsername", "(", ")", ")", ")", ";", "}", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "credentials", ".", "getUsername", "(", ")", ")", ")", "{", "throw", "new", "AuthenticationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "Optional", ".", "empty", "(", ")", ";", "}", ";", "}", "</s>"]
["<s>", "public", "static", "Authenticator", "<", "String", ",", "Principal", ">", "getSingleUserOAuthAuthenticator", "(", "final", "String", "presented", ",", "final", "String", "returned", ")", "{", "return", "user", "-", ">", "{", "if", "(", "presented", ".", "equals", "(", "user", ")", ")", "{", "return", "Optional", ".", "of", "(", "new", "PrincipalImpl", "(", "returned", ")", ")", ";", "}", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "user", ")", ")", "{", "throw", "new", "AuthenticationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "Optional", ".", "empty", "(", ")", ";", "}", ";", "}", "</s>"]
["<s>", "public", "static", "Authenticator", "<", "String", ",", "Principal", ">", "getMultiplyUsersOAuthAuthenticator", "(", "final", "List", "<", "String", ">", "validUsers", ")", "{", "return", "credentials", "-", ">", "{", "if", "(", "validUsers", ".", "contains", "(", "credentials", ")", ")", "{", "return", "Optional", ".", "of", "(", "new", "PrincipalImpl", "(", "credentials", ")", ")", ";", "}", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "credentials", ")", ")", "{", "throw", "new", "AuthenticationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "Optional", ".", "empty", "(", ")", ";", "}", ";", "}", "</s>"]
["<s>", "public", "static", "Authorizer", "<", "Principal", ">", "getTestAuthorizer", "(", "final", "String", "validUser", ",", "final", "String", "validRole", ")", "{", "return", "(", "principal", ",", "role", ")", "-", ">", "principal", "!", "=", "null", "&", "&", "validUser", ".", "equals", "(", "principal", ".", "getName", "(", ")", ")", "&", "&", "validRole", ".", "equals", "(", "role", ")", ";", "}", "</s>"]
["<s>", "public", "BasicAuthTestResourceConfig", "(", ")", "{", "register", "(", "AuthResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "ContainerRequestFilter", "getAuthFilter", "(", ")", "{", "BasicCredentialAuthFilter", ".", "Builder", "<", "Principal", ">", "builder", "=", "new", "BasicCredentialAuthFilter", ".", "Builder", "<", ">", "(", ")", ";", "builder", ".", "setAuthorizer", "(", "AuthUtil", ".", "getTestAuthorizer", "(", "ADMIN_USER", ",", "ADMIN_ROLE", ")", ")", ";", "builder", ".", "setAuthenticator", "(", "AuthUtil", ".", "getBasicAuthenticator", "(", "ImmutableList", ".", "of", "(", "ADMIN_USER", ",", "ORDINARY_USER", ")", ")", ")", ";", "return", "builder", ".", "buildAuthFilter", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DropwizardResourceConfig", "getDropwizardResourceConfig", "(", ")", "{", "return", "new", "BasicAuthTestResourceConfig", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "BasicAuthTestResourceConfig", ">", "getDropwizardResourceConfigClass", "(", ")", "{", "return", "BasicAuthTestResourceConfig", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getPrefix", "(", ")", "{", "return", "BASIC_PREFIX", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getOrdinaryGuyValidToken", "(", ")", "{", "return", "ORDINARY_USER_ENCODED_TOKEN", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getGoodGuyValidToken", "(", ")", "{", "return", "GOOD_USER_ENCODED_TOKEN", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getBadGuyToken", "(", ")", "{", "return", "BAD_USER_ENCODED_TOKEN", ";", "}", "</s>"]
["<s>", "public", "BasicAuthTestResourceConfig", "(", ")", "{", "register", "(", "AuthResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "ContainerRequestFilter", "getAuthFilter", "(", ")", "{", "BasicCredentialAuthFilter", ".", "Builder", "<", "Principal", ">", "builder", "=", "new", "BasicCredentialAuthFilter", ".", "Builder", "<", ">", "(", ")", ";", "builder", ".", "setAuthorizer", "(", "AuthUtil", ".", "getTestAuthorizer", "(", "ADMIN_USER", ",", "ADMIN_ROLE", ")", ")", ";", "builder", ".", "setAuthenticator", "(", "AuthUtil", ".", "getBasicAuthenticator", "(", "ImmutableList", ".", "of", "(", "ADMIN_USER", ",", "ORDINARY_USER", ")", ")", ")", ";", "builder", ".", "setPrefix", "(", "CUSTOM_PREFIX", ")", ";", "return", "builder", ".", "buildAuthFilter", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DropwizardResourceConfig", "getDropwizardResourceConfig", "(", ")", "{", "return", "new", "BasicAuthTestResourceConfig", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "BasicCustomAuthProviderTest", ".", "BasicAuthTestResourceConfig", ">", "getDropwizardResourceConfigClass", "(", ")", "{", "return", "BasicAuthTestResourceConfig", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getPrefix", "(", ")", "{", "return", "CUSTOM_PREFIX", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getOrdinaryGuyValidToken", "(", ")", "{", "return", "ORDINARY_USER_ENCODED_TOKEN", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getGoodGuyValidToken", "(", ")", "{", "return", "GOOD_USER_ENCODED_TOKEN", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getBadGuyToken", "(", ")", "{", "return", "BAD_USER_ENCODED_TOKEN", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAUsername", "(", ")", "throws", "Exception", "{", "assertThat", "(", "credentials", ".", "getUsername", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAPassword", "(", ")", "throws", "Exception", "{", "assertThat", "(", "credentials", ".", "getPassword", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "public", "void", "hasAWorkingEqualsMethod", "(", ")", "throws", "Exception", "{", "assertThat", "(", "credentials", ")", ".", "isEqualTo", "(", "credentials", ")", ";", "assertThat", "(", "credentials", ")", ".", "isEqualTo", "(", "new", "BasicCredentials", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "credentials", ")", ".", "isNotEqualTo", "(", "null", ")", ";", "assertThat", "(", "credentials", ")", ".", "isNotEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "credentials", ")", ".", "isNotEqualTo", "(", "new", "BasicCredentials", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "credentials", ")", ".", "isNotEqualTo", "(", "new", "BasicCredentials", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAWorkingHashCode", "(", ")", "throws", "Exception", "{", "assertThat", "(", "credentials", ".", "hashCode", "(", ")", ")", ".", "isEqualTo", "(", "new", "BasicCredentials", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "hashCode", "(", ")", ")", ";", "assertThat", "(", "credentials", ".", "hashCode", "(", ")", ")", ".", "isNotEqualTo", "(", "new", "BasicCredentials", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "hashCode", "(", ")", ")", ";", "assertThat", "(", "credentials", ".", "hashCode", "(", ")", ")", ".", "isNotEqualTo", "(", "new", "BasicCredentials", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ".", "hashCode", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isHumanReadable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "credentials", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "ChainedAuthTestResourceConfig", "(", ")", "{", "super", "(", "true", ",", "new", "MetricRegistry", "(", ")", ")", ";", "final", "Authorizer", "<", "Principal", ">", "authorizer", "=", "AuthUtil", ".", "getTestAuthorizer", "(", "ADMIN_USER", ",", "ADMIN_ROLE", ")", ";", "final", "AuthFilter", "<", "BasicCredentials", ",", "Principal", ">", "basicAuthFilter", "=", "new", "BasicCredentialAuthFilter", ".", "Builder", "<", ">", "(", ")", ".", "setAuthenticator", "(", "AuthUtil", ".", "getBasicAuthenticator", "(", "ImmutableList", ".", "of", "(", "ADMIN_USER", ",", "ORDINARY_USER", ")", ")", ")", ".", "setAuthorizer", "(", "authorizer", ")", ".", "buildAuthFilter", "(", ")", ";", "final", "AuthFilter", "<", "String", ",", "Principal", ">", "oAuthFilter", "=", "new", "OAuthCredentialAuthFilter", ".", "Builder", "<", ">", "(", ")", ".", "setAuthenticator", "(", "AuthUtil", ".", "getSingleUserOAuthAuthenticator", "(", "BEARER_USER", ",", "ADMIN_USER", ")", ")", ".", "setPrefix", "(", "BEARER_PREFIX", ")", ".", "setAuthorizer", "(", "authorizer", ")", ".", "buildAuthFilter", "(", ")", ";", "register", "(", "new", "AuthValueFactoryProvider", ".", "Binder", "(", "Principal", ".", "class", ")", ")", ";", "register", "(", "new", "AuthDynamicFeature", "(", "new", "ChainedAuthFilter", "<", ">", "(", "buildHandlerList", "(", "basicAuthFilter", ",", "oAuthFilter", ")", ")", ")", ")", ";", "register", "(", "RolesAllowedDynamicFeature", ".", "class", ")", ";", "register", "(", "AuthResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "List", "<", "AuthFilter", ">", "buildHandlerList", "(", "AuthFilter", "<", "BasicCredentials", ",", "Principal", ">", "basicAuthFilter", ",", "AuthFilter", "<", "String", ",", "Principal", ">", "oAuthFilter", ")", "{", "return", "ImmutableList", ".", "of", "(", "basicAuthFilter", ",", "oAuthFilter", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "transformsBearerCredentialsToPrincipals", "(", ")", "throws", "Exception", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "BEARER_PREFIX", "+", "\"", "\"", "+", "BEARER_USER", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "'", "\"", "+", "ADMIN_USER", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DropwizardResourceConfig", "getDropwizardResourceConfig", "(", ")", "{", "return", "new", "ChainedAuthTestResourceConfig", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "ChainedAuthTestResourceConfig", ">", "getDropwizardResourceConfigClass", "(", ")", "{", "return", "ChainedAuthTestResourceConfig", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getPrefix", "(", ")", "{", "return", "BASIC_PREFIX", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getOrdinaryGuyValidToken", "(", ")", "{", "return", "ORDINARY_USER_ENCODED_TOKEN", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getGoodGuyValidToken", "(", ")", "{", "return", "GOOD_USER_ENCODED_TOKEN", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getBadGuyToken", "(", ")", "{", "return", "BAD_USER_ENCODED_TOKEN", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Optional", "<", "Principal", ">", "provide", "(", ")", "{", "return", "Optional", ".", "ofNullable", "(", "getContainerRequest", "(", ")", ".", "getSecurityContext", "(", ")", ".", "getUserPrincipal", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "CachingAuthenticator", "(", "final", "MetricRegistry", "metricRegistry", ",", "final", "Authenticator", "<", "C", ",", "P", ">", "authenticator", ",", "final", "CacheBuilderSpec", "cacheSpec", ")", "{", "this", "(", "metricRegistry", ",", "authenticator", ",", "CacheBuilder", ".", "from", "(", "cacheSpec", ")", ")", ";", "}", "</s>"]
["<s>", "public", "CachingAuthenticator", "(", "final", "MetricRegistry", "metricRegistry", ",", "final", "Authenticator", "<", "C", ",", "P", ">", "authenticator", ",", "final", "CacheBuilder", "<", "Object", ",", "Object", ">", "builder", ")", "{", "this", ".", "cacheMisses", "=", "metricRegistry", ".", "meter", "(", "name", "(", "authenticator", ".", "getClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "this", ".", "gets", "=", "metricRegistry", ".", "timer", "(", "name", "(", "authenticator", ".", "getClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "this", ".", "cache", "=", "builder", ".", "recordStats", "(", ")", ".", "build", "(", "new", "CacheLoader", "<", "C", ",", "Optional", "<", "P", ">", ">", "(", ")", "{", "@", "Override", "public", "Optional", "<", "P", ">", "load", "(", "C", "key", ")", "throws", "Exception", "{", "cacheMisses", ".", "mark", "(", ")", ";", "final", "Optional", "<", "P", ">", "optPrincipal", "=", "authenticator", ".", "authenticate", "(", "key", ")", ";", "if", "(", "!", "optPrincipal", ".", "isPresent", "(", ")", ")", "{", "throw", "new", "InvalidCredentialsException", "(", ")", ";", "}", "return", "optPrincipal", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Optional", "<", "P", ">", "load", "(", "C", "key", ")", "throws", "Exception", "{", "cacheMisses", ".", "mark", "(", ")", ";", "final", "Optional", "<", "P", ">", "optPrincipal", "=", "authenticator", ".", "authenticate", "(", "key", ")", ";", "if", "(", "!", "optPrincipal", ".", "isPresent", "(", ")", ")", "{", "throw", "new", "InvalidCredentialsException", "(", ")", ";", "}", "return", "optPrincipal", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Optional", "<", "P", ">", "authenticate", "(", "C", "credentials", ")", "throws", "AuthenticationException", "{", "final", "Timer", ".", "Context", "context", "=", "gets", ".", "time", "(", ")", ";", "try", "{", "return", "cache", ".", "get", "(", "credentials", ")", ";", "}", "catch", "(", "ExecutionException", "e", ")", "{", "final", "Throwable", "cause", "=", "e", ".", "getCause", "(", ")", ";", "if", "(", "cause", "instanceof", "InvalidCredentialsException", ")", "{", "return", "Optional", ".", "empty", "(", ")", ";", "}", "Throwables", ".", "propagateIfPossible", "(", "cause", ",", "AuthenticationException", ".", "class", ")", ";", "throw", "new", "AuthenticationException", "(", "cause", ")", ";", "}", "catch", "(", "UncheckedExecutionException", "e", ")", "{", "Throwables", ".", "throwIfUnchecked", "(", "e", ".", "getCause", "(", ")", ")", ";", "throw", "e", ";", "}", "finally", "{", "context", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "invalidate", "(", "C", "credentials", ")", "{", "cache", ".", "invalidate", "(", "credentials", ")", ";", "}", "</s>"]
["<s>", "public", "void", "invalidateAll", "(", "Iterable", "<", "C", ">", "credentials", ")", "{", "cache", ".", "invalidateAll", "(", "credentials", ")", ";", "}", "</s>"]
["<s>", "public", "void", "invalidateAll", "(", "Predicate", "<", "?", "super", "C", ">", "predicate", ")", "{", "cache", ".", "invalidateAll", "(", "Sets", ".", "filter", "(", "cache", ".", "asMap", "(", ")", ".", "keySet", "(", ")", ",", "predicate", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "invalidateAll", "(", ")", "{", "cache", ".", "invalidateAll", "(", ")", ";", "}", "</s>"]
["<s>", "public", "long", "size", "(", ")", "{", "return", "cache", ".", "size", "(", ")", ";", "}", "</s>"]
["<s>", "public", "CacheStats", "stats", "(", ")", "{", "return", "cache", ".", "stats", "(", ")", ";", "}", "</s>"]
["<s>", "public", "PolymorphicAuthDynamicFeature", "(", "ImmutableMap", "<", "Class", "<", "?", "extends", "T", ">", ",", "ContainerRequestFilter", ">", "authFilterMap", ")", "{", "this", ".", "authFilterMap", "=", "authFilterMap", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "ResourceInfo", "resourceInfo", ",", "FeatureContext", "context", ")", "{", "final", "AnnotatedMethod", "am", "=", "new", "AnnotatedMethod", "(", "resourceInfo", ".", "getResourceMethod", "(", ")", ")", ";", "final", "Annotation", "[", "]", "[", "]", "parameterAnnotations", "=", "am", ".", "getParameterAnnotations", "(", ")", ";", "final", "Class", "<", "?", ">", "[", "]", "parameterTypes", "=", "am", ".", "getParameterTypes", "(", ")", ";", "final", "Type", "[", "]", "parameterGenericTypes", "=", "am", ".", "getGenericParameterTypes", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "parameterAnnotations", ".", "length", ";", "i", "+", "+", ")", "{", "final", "Class", "<", "?", ">", "type", "=", "parameterTypes", "[", "i", "]", ";", "final", "Type", "paramType", "=", "type", "=", "=", "Optional", ".", "class", "?", "(", "(", "ParameterizedType", ")", "parameterGenericTypes", "[", "i", "]", ")", ".", "getActualTypeArguments", "(", ")", "[", "0", "]", ":", "type", ";", "for", "(", "final", "Annotation", "annotation", ":", "parameterAnnotations", "[", "i", "]", ")", "{", "if", "(", "annotation", "instanceof", "Auth", "&", "&", "authFilterMap", ".", "containsKey", "(", "paramType", ")", ")", "{", "if", "(", "type", "=", "=", "Optional", ".", "class", ")", "{", "final", "ContainerRequestFilter", "filter", "=", "authFilterMap", ".", "get", "(", "paramType", ")", ";", "context", ".", "register", "(", "new", "WebApplicationExceptionCatchingFilter", "(", "filter", ")", ")", ";", "return", ";", "}", "else", "{", "context", ".", "register", "(", "authFilterMap", ".", "get", "(", "type", ")", ")", ";", "return", ";", "}", "}", "}", "}", "}", "</s>"]
["<s>", "@", "Inject", "public", "AuthValueFactoryProvider", "(", "MultivaluedParameterExtractorProvider", "mpep", ",", "ServiceLocator", "injector", ",", "PrincipalClassProvider", "<", "T", ">", "principalClassProvider", ")", "{", "super", "(", "mpep", ",", "injector", ",", "Parameter", ".", "Source", ".", "UNKNOWN", ")", ";", "this", ".", "principalClass", "=", "principalClassProvider", ".", "clazz", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "AbstractContainerRequestValueFactory", "<", "?", ">", "createValueFactory", "(", "Parameter", "parameter", ")", "{", "if", "(", "!", "parameter", ".", "isAnnotationPresent", "(", "Auth", ".", "class", ")", ")", "{", "return", "null", ";", "}", "else", "if", "(", "principalClass", ".", "equals", "(", "parameter", ".", "getRawType", "(", ")", ")", ")", "{", "return", "new", "PrincipalContainerRequestValueFactory", "(", ")", ";", "}", "else", "{", "final", "boolean", "isOptionalPrincipal", "=", "parameter", ".", "getRawType", "(", ")", "=", "=", "Optional", ".", "class", "&", "&", "ParameterizedType", ".", "class", ".", "isAssignableFrom", "(", "parameter", ".", "getType", "(", ")", ".", "getClass", "(", ")", ")", "&", "&", "principalClass", "=", "=", "(", "(", "ParameterizedType", ")", "parameter", ".", "getType", "(", ")", ")", ".", "getActualTypeArguments", "(", ")", "[", "0", "]", ";", "return", "isOptionalPrincipal", "?", "new", "OptionalPrincipalContainerRequestValueFactory", "(", ")", ":", "null", ";", "}", "}", "</s>"]
["<s>", "AuthInjectionResolver", "(", ")", "{", "super", "(", "AuthValueFactoryProvider", ".", "class", ")", ";", "}", "</s>"]
["<s>", "PrincipalClassProvider", "(", "Class", "<", "T", ">", "clazz", ")", "{", "this", ".", "clazz", "=", "clazz", ";", "}", "</s>"]
["<s>", "public", "Binder", "(", "Class", "<", "T", ">", "principalClass", ")", "{", "this", ".", "principalClass", "=", "principalClass", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "configure", "(", ")", "{", "bind", "(", "new", "PrincipalClassProvider", "<", ">", "(", "principalClass", ")", ")", ".", "to", "(", "PrincipalClassProvider", ".", "class", ")", ";", "bind", "(", "AuthValueFactoryProvider", ".", "class", ")", ".", "to", "(", "ValueFactoryProvider", ".", "class", ")", ".", "in", "(", "Singleton", ".", "class", ")", ";", "bind", "(", "AuthInjectionResolver", ".", "class", ")", ".", "to", "(", "new", "TypeLiteral", "<", "InjectionResolver", "<", "Auth", ">", ">", "(", ")", "{", "}", ")", ".", "in", "(", "Singleton", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "PrincipalImpl", "(", "String", "name", ")", "{", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "o", ")", "{", "if", "(", "this", "=", "=", "o", ")", "{", "return", "true", ";", "}", "if", "(", "o", "=", "=", "null", "|", "|", "getClass", "(", ")", "!", "=", "o", ".", "getClass", "(", ")", ")", "{", "return", "false", ";", "}", "final", "PrincipalImpl", "principal", "=", "(", "PrincipalImpl", ")", "o", ";", "return", "Objects", ".", "equals", "(", "this", ".", "name", ",", "principal", ".", "name", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "Objects", ".", "hashCode", "(", "name", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "MoreObjects", ".", "toStringHelper", "(", "this", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "name", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "boolean", "authorize", "(", "P", "principal", ",", "String", "role", ")", ";", "</s>"]
["<s>", "@", "Inject", "public", "PolymorphicAuthValueFactoryProvider", "(", "MultivaluedParameterExtractorProvider", "mpep", ",", "ServiceLocator", "injector", ",", "PrincipalClassSetProvider", "<", "T", ">", "principalClassSetProvider", ")", "{", "super", "(", "mpep", ",", "injector", ",", "Parameter", ".", "Source", ".", "UNKNOWN", ")", ";", "this", ".", "principalClassSet", "=", "principalClassSetProvider", ".", "clazzSet", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "AbstractContainerRequestValueFactory", "<", "?", ">", "createValueFactory", "(", "Parameter", "parameter", ")", "{", "if", "(", "!", "parameter", ".", "isAnnotationPresent", "(", "Auth", ".", "class", ")", ")", "{", "return", "null", ";", "}", "else", "if", "(", "principalClassSet", ".", "contains", "(", "parameter", ".", "getRawType", "(", ")", ")", ")", "{", "return", "new", "PrincipalContainerRequestValueFactory", "(", ")", ";", "}", "else", "{", "final", "boolean", "isOptionalPrincipal", "=", "parameter", ".", "getRawType", "(", ")", "=", "=", "Optional", ".", "class", "&", "&", "ParameterizedType", ".", "class", ".", "isAssignableFrom", "(", "parameter", ".", "getType", "(", ")", ".", "getClass", "(", ")", ")", "&", "&", "principalClassSet", ".", "contains", "(", "(", "(", "ParameterizedType", ")", "parameter", ".", "getType", "(", ")", ")", ".", "getActualTypeArguments", "(", ")", "[", "0", "]", ")", ";", "return", "isOptionalPrincipal", "?", "new", "OptionalPrincipalContainerRequestValueFactory", "(", ")", ":", "null", ";", "}", "}", "</s>"]
["<s>", "public", "AuthInjectionResolver", "(", ")", "{", "super", "(", "PolymorphicAuthValueFactoryProvider", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "PrincipalClassSetProvider", "(", "Set", "<", "Class", "<", "?", "extends", "T", ">", ">", "clazzSet", ")", "{", "this", ".", "clazzSet", "=", "clazzSet", ";", "}", "</s>"]
["<s>", "public", "Binder", "(", "Set", "<", "Class", "<", "?", "extends", "T", ">", ">", "principalClassSet", ")", "{", "this", ".", "principalClassSet", "=", "principalClassSet", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "configure", "(", ")", "{", "bind", "(", "new", "PrincipalClassSetProvider", "<", ">", "(", "principalClassSet", ")", ")", ".", "to", "(", "PrincipalClassSetProvider", ".", "class", ")", ";", "bind", "(", "PolymorphicAuthValueFactoryProvider", ".", "class", ")", ".", "to", "(", "ValueFactoryProvider", ".", "class", ")", ".", "in", "(", "Singleton", ".", "class", ")", ";", "bind", "(", "AuthInjectionResolver", ".", "class", ")", ".", "to", "(", "new", "TypeLiteral", "<", "InjectionResolver", "<", "Auth", ">", ">", "(", ")", "{", "}", ")", ".", "in", "(", "Singleton", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "WebApplicationExceptionCatchingFilter", "(", "ContainerRequestFilter", "underlying", ")", "{", "Preconditions", ".", "checkNotNull", "(", "underlying", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "underlying", "=", "underlying", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "ContainerRequestContext", "requestContext", ")", "throws", "IOException", "{", "try", "{", "underlying", ".", "filter", "(", "requestContext", ")", ";", "}", "catch", "(", "WebApplicationException", "err", ")", "{", "}", "}", "</s>"]
["<s>", "public", "CachingAuthorizer", "(", "final", "MetricRegistry", "metricRegistry", ",", "final", "Authorizer", "<", "P", ">", "authorizer", ",", "final", "CacheBuilderSpec", "cacheSpec", ")", "{", "this", "(", "metricRegistry", ",", "authorizer", ",", "CacheBuilder", ".", "from", "(", "cacheSpec", ")", ")", ";", "}", "</s>"]
["<s>", "public", "CachingAuthorizer", "(", "final", "MetricRegistry", "metricRegistry", ",", "final", "Authorizer", "<", "P", ">", "authorizer", ",", "final", "CacheBuilder", "<", "Object", ",", "Object", ">", "builder", ")", "{", "this", ".", "underlying", "=", "authorizer", ";", "this", ".", "cacheMisses", "=", "metricRegistry", ".", "meter", "(", "name", "(", "authorizer", ".", "getClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "this", ".", "getsTimer", "=", "metricRegistry", ".", "timer", "(", "name", "(", "authorizer", ".", "getClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "this", ".", "cache", "=", "builder", ".", "recordStats", "(", ")", ".", "build", "(", "new", "CacheLoader", "<", "ImmutablePair", "<", "P", ",", "String", ">", ",", "Boolean", ">", "(", ")", "{", "@", "Override", "public", "Boolean", "load", "(", "ImmutablePair", "<", "P", ",", "String", ">", "key", ")", "throws", "Exception", "{", "cacheMisses", ".", "mark", "(", ")", ";", "return", "underlying", ".", "authorize", "(", "key", ".", "left", ",", "key", ".", "right", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Boolean", "load", "(", "ImmutablePair", "<", "P", ",", "String", ">", "key", ")", "throws", "Exception", "{", "cacheMisses", ".", "mark", "(", ")", ";", "return", "underlying", ".", "authorize", "(", "key", ".", "left", ",", "key", ".", "right", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "authorize", "(", "P", "principal", ",", "String", "role", ")", "{", "final", "Timer", ".", "Context", "context", "=", "getsTimer", ".", "time", "(", ")", ";", "try", "{", "final", "ImmutablePair", "<", "P", ",", "String", ">", "cacheKey", "=", "ImmutablePair", ".", "of", "(", "principal", ",", "role", ")", ";", "return", "cache", ".", "getUnchecked", "(", "cacheKey", ")", ";", "}", "catch", "(", "UncheckedExecutionException", "e", ")", "{", "Throwables", ".", "throwIfUnchecked", "(", "e", ".", "getCause", "(", ")", ")", ";", "throw", "e", ";", "}", "finally", "{", "context", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "invalidate", "(", "P", "principal", ",", "String", "role", ")", "{", "cache", ".", "invalidate", "(", "ImmutablePair", ".", "of", "(", "principal", ",", "role", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "invalidate", "(", "P", "principal", ")", "{", "final", "Predicate", "<", "ImmutablePair", "<", "P", ",", "String", ">", ">", "predicate", "=", "cacheKey", "-", ">", "cacheKey", ".", "getLeft", "(", ")", ".", "equals", "(", "principal", ")", ";", "cache", ".", "invalidateAll", "(", "Sets", ".", "filter", "(", "cache", ".", "asMap", "(", ")", ".", "keySet", "(", ")", ",", "predicate", ":", ":", "test", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "invalidateAll", "(", "Iterable", "<", "P", ">", "principals", ")", "{", "final", "Predicate", "<", "ImmutablePair", "<", "P", ",", "String", ">", ">", "predicate", "=", "cacheKey", "-", ">", "Iterables", ".", "contains", "(", "principals", ",", "cacheKey", ".", "getLeft", "(", ")", ")", ";", "cache", ".", "invalidateAll", "(", "Sets", ".", "filter", "(", "cache", ".", "asMap", "(", ")", ".", "keySet", "(", ")", ",", "predicate", ":", ":", "test", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "invalidateAll", "(", "Predicate", "<", "?", "super", "P", ">", "predicate", ")", "{", "final", "Predicate", "<", "ImmutablePair", "<", "P", ",", "String", ">", ">", "nestedPredicate", "=", "cacheKey", "-", ">", "predicate", ".", "test", "(", "cacheKey", ".", "getLeft", "(", ")", ")", ";", "cache", ".", "invalidateAll", "(", "Sets", ".", "filter", "(", "cache", ".", "asMap", "(", ")", ".", "keySet", "(", ")", ",", "nestedPredicate", ":", ":", "test", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "invalidateAll", "(", ")", "{", "cache", ".", "invalidateAll", "(", ")", ";", "}", "</s>"]
["<s>", "public", "long", "size", "(", ")", "{", "return", "cache", ".", "size", "(", ")", ";", "}", "</s>"]
["<s>", "public", "CacheStats", "stats", "(", ")", "{", "return", "cache", ".", "stats", "(", ")", ";", "}", "</s>"]
["<s>", "Response", "buildResponse", "(", "String", "prefix", ",", "String", "realm", ")", ";", "</s>"]
["<s>", "Optional", "<", "P", ">", "authenticate", "(", "C", "credentials", ")", "throws", "AuthenticationException", ";", "</s>"]
["<s>", "public", "AuthDynamicFeature", "(", "ContainerRequestFilter", "authFilter", ")", "{", "this", ".", "authFilter", "=", "authFilter", ";", "this", ".", "authFilterClass", "=", "null", ";", "}", "</s>"]
["<s>", "public", "AuthDynamicFeature", "(", "Class", "<", "?", "extends", "ContainerRequestFilter", ">", "authFilterClass", ")", "{", "this", ".", "authFilter", "=", "null", ";", "this", ".", "authFilterClass", "=", "authFilterClass", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "ResourceInfo", "resourceInfo", ",", "FeatureContext", "context", ")", "{", "final", "AnnotatedMethod", "am", "=", "new", "AnnotatedMethod", "(", "resourceInfo", ".", "getResourceMethod", "(", ")", ")", ";", "final", "Annotation", "[", "]", "[", "]", "parameterAnnotations", "=", "am", ".", "getParameterAnnotations", "(", ")", ";", "final", "Class", "<", "?", ">", "[", "]", "parameterTypes", "=", "am", ".", "getParameterTypes", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "parameterAnnotations", ".", "length", ";", "i", "+", "+", ")", "{", "for", "(", "final", "Annotation", "annotation", ":", "parameterAnnotations", "[", "i", "]", ")", "{", "if", "(", "annotation", "instanceof", "Auth", ")", "{", "if", "(", "parameterTypes", "[", "i", "]", ".", "equals", "(", "Optional", ".", "class", ")", "&", "&", "authFilter", "!", "=", "null", ")", "{", "context", ".", "register", "(", "new", "WebApplicationExceptionCatchingFilter", "(", "authFilter", ")", ")", ";", "return", ";", "}", "else", "{", "registerAuthFilter", "(", "context", ")", ";", "return", ";", "}", "}", "}", "}", "final", "boolean", "annotationOnClass", "=", "(", "resourceInfo", ".", "getResourceClass", "(", ")", ".", "getAnnotation", "(", "RolesAllowed", ".", "class", ")", "!", "=", "null", ")", "|", "|", "(", "resourceInfo", ".", "getResourceClass", "(", ")", ".", "getAnnotation", "(", "PermitAll", ".", "class", ")", "!", "=", "null", ")", ";", "final", "boolean", "annotationOnMethod", "=", "am", ".", "isAnnotationPresent", "(", "RolesAllowed", ".", "class", ")", "|", "|", "am", ".", "isAnnotationPresent", "(", "DenyAll", ".", "class", ")", "|", "|", "am", ".", "isAnnotationPresent", "(", "PermitAll", ".", "class", ")", ";", "if", "(", "annotationOnClass", "|", "|", "annotationOnMethod", ")", "{", "registerAuthFilter", "(", "context", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "registerAuthFilter", "(", "FeatureContext", "context", ")", "{", "if", "(", "authFilter", "!", "=", "null", ")", "{", "context", ".", "register", "(", "authFilter", ")", ";", "}", "else", "if", "(", "authFilterClass", "!", "=", "null", ")", "{", "context", ".", "register", "(", "authFilterClass", ")", ";", "}", "}", "</s>"]
["<s>", "public", "AuthenticationException", "(", "String", "message", ")", "{", "super", "(", "message", ")", ";", "}", "</s>"]
["<s>", "public", "AuthenticationException", "(", "String", "message", ",", "Throwable", "cause", ")", "{", "super", "(", "message", ",", "cause", ")", ";", "}", "</s>"]
["<s>", "public", "AuthenticationException", "(", "Throwable", "cause", ")", "{", "super", "(", "cause", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Principal", "provide", "(", ")", "{", "final", "Principal", "principal", "=", "getContainerRequest", "(", ")", ".", "getSecurityContext", "(", ")", ".", "getUserPrincipal", "(", ")", ";", "if", "(", "principal", "=", "=", "null", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "principal", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "buildResponse", "(", "String", "prefix", ",", "String", "realm", ")", "{", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "UNAUTHORIZED", ")", ".", "header", "(", "HttpHeaders", ".", "WWW_AUTHENTICATE", ",", "String", ".", "format", "(", "CHALLENGE_FORMAT", ",", "prefix", ",", "realm", ")", ")", ".", "type", "(", "MediaType", ".", "TEXT_PLAIN_TYPE", ")", ".", "entity", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "authorize", "(", "P", "principal", ",", "String", "role", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "public", "AuthFilterBuilder", "<", "C", ",", "P", ",", "T", ">", "setRealm", "(", "String", "realm", ")", "{", "this", ".", "realm", "=", "realm", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AuthFilterBuilder", "<", "C", ",", "P", ",", "T", ">", "setPrefix", "(", "String", "prefix", ")", "{", "this", ".", "prefix", "=", "prefix", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AuthFilterBuilder", "<", "C", ",", "P", ",", "T", ">", "setAuthorizer", "(", "Authorizer", "<", "P", ">", "authorizer", ")", "{", "this", ".", "authorizer", "=", "authorizer", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AuthFilterBuilder", "<", "C", ",", "P", ",", "T", ">", "setAuthenticator", "(", "Authenticator", "<", "C", ",", "P", ">", "authenticator", ")", "{", "this", ".", "authenticator", "=", "authenticator", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AuthFilterBuilder", "<", "C", ",", "P", ",", "T", ">", "setUnauthorizedHandler", "(", "UnauthorizedHandler", "unauthorizedHandler", ")", "{", "this", ".", "unauthorizedHandler", "=", "unauthorizedHandler", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "T", "buildAuthFilter", "(", ")", "{", "Preconditions", ".", "checkNotNull", "(", "realm", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Preconditions", ".", "checkNotNull", "(", "prefix", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Preconditions", ".", "checkNotNull", "(", "authenticator", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Preconditions", ".", "checkNotNull", "(", "authorizer", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Preconditions", ".", "checkNotNull", "(", "unauthorizedHandler", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "T", "authFilter", "=", "newInstance", "(", ")", ";", "authFilter", ".", "authorizer", "=", "authorizer", ";", "authFilter", ".", "authenticator", "=", "authenticator", ";", "authFilter", ".", "prefix", "=", "prefix", ";", "authFilter", ".", "realm", "=", "realm", ";", "authFilter", ".", "unauthorizedHandler", "=", "unauthorizedHandler", ";", "return", "authFilter", ";", "}", "</s>"]
["<s>", "protected", "abstract", "T", "newInstance", "(", ")", ";", "</s>"]
["<s>", "protected", "boolean", "authenticate", "(", "ContainerRequestContext", "requestContext", ",", "@", "Nullable", "C", "credentials", ",", "String", "scheme", ")", "{", "try", "{", "if", "(", "credentials", "=", "=", "null", ")", "{", "return", "false", ";", "}", "final", "Optional", "<", "P", ">", "principal", "=", "authenticator", ".", "authenticate", "(", "credentials", ")", ";", "if", "(", "!", "principal", ".", "isPresent", "(", ")", ")", "{", "return", "false", ";", "}", "final", "SecurityContext", "securityContext", "=", "requestContext", ".", "getSecurityContext", "(", ")", ";", "final", "boolean", "secure", "=", "securityContext", "!", "=", "null", "&", "&", "securityContext", ".", "isSecure", "(", ")", ";", "requestContext", ".", "setSecurityContext", "(", "new", "SecurityContext", "(", ")", "{", "@", "Override", "public", "Principal", "getUserPrincipal", "(", ")", "{", "return", "principal", ".", "get", "(", ")", ";", "}", "@", "Override", "public", "boolean", "isUserInRole", "(", "String", "role", ")", "{", "return", "authorizer", ".", "authorize", "(", "principal", ".", "get", "(", ")", ",", "role", ")", ";", "}", "@", "Override", "public", "boolean", "isSecure", "(", ")", "{", "return", "secure", ";", "}", "@", "Override", "public", "String", "getAuthenticationScheme", "(", ")", "{", "return", "scheme", ";", "}", "}", ")", ";", "return", "true", ";", "}", "catch", "(", "AuthenticationException", "e", ")", "{", "logger", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "throw", "new", "InternalServerErrorException", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "Principal", "getUserPrincipal", "(", ")", "{", "return", "principal", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isUserInRole", "(", "String", "role", ")", "{", "return", "authorizer", ".", "authorize", "(", "principal", ".", "get", "(", ")", ",", "role", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isSecure", "(", ")", "{", "return", "secure", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getAuthenticationScheme", "(", ")", "{", "return", "scheme", ";", "}", "</s>"]
["<s>", "private", "OAuthCredentialAuthFilter", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "final", "ContainerRequestContext", "requestContext", ")", "throws", "IOException", "{", "String", "credentials", "=", "getCredentials", "(", "requestContext", ".", "getHeaders", "(", ")", ".", "getFirst", "(", "HttpHeaders", ".", "AUTHORIZATION", ")", ")", ";", "if", "(", "credentials", "=", "=", "null", ")", "{", "credentials", "=", "requestContext", ".", "getUriInfo", "(", ")", ".", "getQueryParameters", "(", ")", ".", "getFirst", "(", "OAUTH_ACCESS_TOKEN_PARAM", ")", ";", "}", "if", "(", "!", "authenticate", "(", "requestContext", ",", "credentials", ",", "SecurityContext", ".", "BASIC_AUTH", ")", ")", "{", "throw", "new", "WebApplicationException", "(", "unauthorizedHandler", ".", "buildResponse", "(", "prefix", ",", "realm", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Nullable", "private", "String", "getCredentials", "(", "String", "header", ")", "{", "if", "(", "header", "=", "=", "null", ")", "{", "return", "null", ";", "}", "final", "int", "space", "=", "header", ".", "indexOf", "(", "<CHAR_LIT>", ")", ";", "if", "(", "space", "<", "=", "0", ")", "{", "return", "null", ";", "}", "final", "String", "method", "=", "header", ".", "substring", "(", "0", ",", "space", ")", ";", "if", "(", "!", "prefix", ".", "equalsIgnoreCase", "(", "method", ")", ")", "{", "return", "null", ";", "}", "return", "header", ".", "substring", "(", "space", "+", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "OAuthCredentialAuthFilter", "<", "P", ">", "newInstance", "(", ")", "{", "return", "new", "OAuthCredentialAuthFilter", "<", ">", "(", ")", ";", "}", "</s>"]
["<s>", "private", "BasicCredentialAuthFilter", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "ContainerRequestContext", "requestContext", ")", "throws", "IOException", "{", "final", "BasicCredentials", "credentials", "=", "getCredentials", "(", "requestContext", ".", "getHeaders", "(", ")", ".", "getFirst", "(", "HttpHeaders", ".", "AUTHORIZATION", ")", ")", ";", "if", "(", "!", "authenticate", "(", "requestContext", ",", "credentials", ",", "SecurityContext", ".", "BASIC_AUTH", ")", ")", "{", "throw", "new", "WebApplicationException", "(", "unauthorizedHandler", ".", "buildResponse", "(", "prefix", ",", "realm", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Nullable", "private", "BasicCredentials", "getCredentials", "(", "String", "header", ")", "{", "if", "(", "header", "=", "=", "null", ")", "{", "return", "null", ";", "}", "final", "int", "space", "=", "header", ".", "indexOf", "(", "<CHAR_LIT>", ")", ";", "if", "(", "space", "<", "=", "0", ")", "{", "return", "null", ";", "}", "final", "String", "method", "=", "header", ".", "substring", "(", "0", ",", "space", ")", ";", "if", "(", "!", "prefix", ".", "equalsIgnoreCase", "(", "method", ")", ")", "{", "return", "null", ";", "}", "final", "String", "decoded", ";", "try", "{", "decoded", "=", "new", "String", "(", "BaseEncoding", ".", "base64", "(", ")", ".", "decode", "(", "header", ".", "substring", "(", "space", "+", "1", ")", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ";", "}", "catch", "(", "IllegalArgumentException", "e", ")", "{", "logger", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "return", "null", ";", "}", "final", "int", "i", "=", "decoded", ".", "indexOf", "(", "<CHAR_LIT::>", ")", ";", "if", "(", "i", "<", "=", "0", ")", "{", "return", "null", ";", "}", "final", "String", "username", "=", "decoded", ".", "substring", "(", "0", ",", "i", ")", ";", "final", "String", "password", "=", "decoded", ".", "substring", "(", "i", "+", "1", ")", ";", "return", "new", "BasicCredentials", "(", "username", ",", "password", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "BasicCredentialAuthFilter", "<", "P", ">", "newInstance", "(", ")", "{", "return", "new", "BasicCredentialAuthFilter", "<", ">", "(", ")", ";", "}", "</s>"]
["<s>", "public", "BasicCredentials", "(", "String", "username", ",", "String", "password", ")", "{", "this", ".", "username", "=", "requireNonNull", "(", "username", ")", ";", "this", ".", "password", "=", "requireNonNull", "(", "password", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getUsername", "(", ")", "{", "return", "username", ";", "}", "</s>"]
["<s>", "public", "String", "getPassword", "(", ")", "{", "return", "password", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "Objects", ".", "hash", "(", "username", ",", "password", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "this", "=", "=", "obj", ")", "{", "return", "true", ";", "}", "if", "(", "obj", "=", "=", "null", "|", "|", "getClass", "(", ")", "!", "=", "obj", ".", "getClass", "(", ")", ")", "{", "return", "false", ";", "}", "final", "BasicCredentials", "other", "=", "(", "BasicCredentials", ")", "obj", ";", "return", "Objects", ".", "equals", "(", "this", ".", "username", ",", "other", ".", "username", ")", "&", "&", "Objects", ".", "equals", "(", "this", ".", "password", ",", "other", ".", "password", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "MoreObjects", ".", "toStringHelper", "(", "this", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "username", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ChainedAuthFilter", "(", "List", "<", "AuthFilter", ">", "handlers", ")", "{", "this", ".", "handlers", "=", "handlers", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "ContainerRequestContext", "containerRequestContext", ")", "throws", "IOException", "{", "WebApplicationException", "firstException", "=", "null", ";", "for", "(", "AuthFilter", "authFilter", ":", "handlers", ")", "{", "final", "SecurityContext", "securityContext", "=", "containerRequestContext", ".", "getSecurityContext", "(", ")", ";", "try", "{", "authFilter", ".", "filter", "(", "containerRequestContext", ")", ";", "if", "(", "securityContext", "!", "=", "containerRequestContext", ".", "getSecurityContext", "(", ")", ")", "{", "return", ";", "}", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "if", "(", "firstException", "=", "=", "null", ")", "{", "firstException", "=", "e", ";", "}", "}", "}", "throw", "firstException", ";", "}", "</s>"]
["<s>", "@", "JsonCreator", "public", "static", "EnumWithCreator", "fromString", "(", "String", "value", ")", "{", "return", "EnumWithCreator", ".", "TEST", ";", "}", "</s>"]
["<s>", "CurrencyCode", "(", "String", "name", ")", "{", "this", ".", "description", "=", "name", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "description", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "mapper", ".", "registerModule", "(", "new", "FuzzyEnumModule", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapsUpperCaseEnums", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "TimeUnit", ".", "class", ")", ")", ".", "isEqualTo", "(", "TimeUnit", ".", "SECONDS", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapsLowerCaseEnums", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "TimeUnit", ".", "class", ")", ")", ".", "isEqualTo", "(", "TimeUnit", ".", "MILLISECONDS", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapsPaddedEnums", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "TimeUnit", ".", "class", ")", ")", ".", "isEqualTo", "(", "TimeUnit", ".", "MINUTES", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapsSpacedEnums", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "TimeUnit", ".", "class", ")", ")", ".", "isEqualTo", "(", "TimeUnit", ".", "MILLISECONDS", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapsDashedEnums", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "ClientInfoStatus", ".", "class", ")", ")", ".", "isEqualTo", "(", "ClientInfoStatus", ".", "REASON_UNKNOWN", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapsDottedEnums", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "ClientInfoStatus", ".", "class", ")", ")", ".", "isEqualTo", "(", "ClientInfoStatus", ".", "REASON_UNKNOWN", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapsWhenEnumHasCreator", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "EnumWithCreator", ".", "class", ")", ")", ".", "isEqualTo", "(", "EnumWithCreator", ".", "TEST", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "failsOnIncorrectValue", "(", ")", "throws", "Exception", "{", "try", "{", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "TimeUnit", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "JsonMappingException", ".", "class", ")", ";", "}", "catch", "(", "JsonMappingException", "e", ")", "{", "assertThat", "(", "e", ".", "getOriginalMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapsToLowerCaseEnums", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "EnumWithLowercase", ".", "class", ")", ")", ".", "isEqualTo", "(", "EnumWithLowercase", ".", "lower_case_enum", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapsMixedCaseEnums", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "EnumWithLowercase", ".", "class", ")", ")", ".", "isEqualTo", "(", "EnumWithLowercase", ".", "mixedCaseEnum", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "readsEnumsUsingToString", "(", ")", "throws", "Exception", "{", "final", "ObjectMapper", "toStringEnumsMapper", "=", "mapper", ".", "copy", "(", ")", ".", "configure", "(", "DeserializationFeature", ".", "READ_ENUMS_USING_TO_STRING", ",", "true", ")", ";", "assertThat", "(", "toStringEnumsMapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "CurrencyCode", ".", "class", ")", ")", ".", "isEqualTo", "(", "CurrencyCode", ".", "GBP", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "readsEnumsUsingToStringWithDeserializationFeatureOff", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "CurrencyCode", ".", "class", ")", ")", ".", "isEqualTo", "(", "CurrencyCode", ".", "GBP", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "CurrencyCode", ".", "class", ")", ")", ".", "isEqualTo", "(", "CurrencyCode", ".", "AUD", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "CurrencyCode", ".", "class", ")", ")", ".", "isEqualTo", "(", "CurrencyCode", ".", "CAD", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "CurrencyCode", ".", "class", ")", ")", ".", "isEqualTo", "(", "CurrencyCode", ".", "BLA", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEnumWithJsonPropertyRename", "(", ")", "throws", "Exception", "{", "final", "String", "json", "=", "mapper", ".", "writeValueAsString", "(", "new", "EnumWithPropertyAnno", "[", "]", "{", "EnumWithPropertyAnno", ".", "B", ",", "EnumWithPropertyAnno", ".", "A", ",", "EnumWithPropertyAnno", ".", "FORGOT_PASSWORD", "}", ")", ";", "assertThat", "(", "json", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:[>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:]>", "\"", ")", ";", "final", "EnumWithPropertyAnno", "[", "]", "result", "=", "mapper", ".", "readValue", "(", "json", ",", "EnumWithPropertyAnno", "[", "]", ".", "class", ")", ";", "assertThat", "(", "result", ")", ".", "isNotNull", "(", ")", ".", "hasSize", "(", "<NUM_LIT:3>", ")", ";", "assertThat", "(", "result", "[", "0", "]", ")", ".", "isEqualTo", "(", "EnumWithPropertyAnno", ".", "B", ")", ";", "assertThat", "(", "result", "[", "1", "]", ")", ".", "isEqualTo", "(", "EnumWithPropertyAnno", ".", "A", ")", ";", "assertThat", "(", "result", "[", "<NUM_LIT:2>", "]", ")", ".", "isEqualTo", "(", "EnumWithPropertyAnno", ".", "FORGOT_PASSWORD", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "mapper", ".", "registerModule", "(", "new", "GuavaModule", "(", ")", ")", ";", "mapper", ".", "registerModule", "(", "new", "GuavaExtrasModule", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canDeserializeAHostAndPort", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "HostAndPort", ".", "class", ")", ")", ".", "isEqualTo", "(", "HostAndPort", ".", "fromParts", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canDeserializeCacheBuilderSpecs", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "CacheBuilderSpec", ".", "class", ")", ")", ".", "isEqualTo", "(", "CacheBuilderSpec", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canSerializeCacheBuilderSpecs", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "CacheBuilderSpec", ".", "disableCaching", "(", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canDeserializeAbsentOptions", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT>", "\"", ",", "Optional", ".", "class", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "absent", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canDeserializePresentOptions", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Optional", ".", "class", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "mapper", ".", "registerModule", "(", "new", "ParameterNamesModule", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "deserializePersonWithoutAnnotations", "(", ")", "throws", "IOException", "{", "final", "ObjectReader", "reader", "=", "mapper", ".", "readerFor", "(", "Person", ".", "class", ")", ";", "final", "Person", "person", "=", "reader", ".", "readValue", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "person", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "person", ".", "getSurname", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "serializePersonWithoutAnnotations", "(", ")", "throws", "IOException", "{", "final", "ObjectWriter", "reader", "=", "mapper", ".", "writerFor", "(", "Person", ".", "class", ")", ";", "final", "String", "person", "=", "reader", ".", "writeValueAsString", "(", "new", "Person", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "person", ")", ".", "contains", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "objectMapperUsesGivenCustomJsonFactory", "(", ")", "{", "JsonFactory", "factory", "=", "Mockito", ".", "mock", "(", "JsonFactory", ".", "class", ")", ";", "ObjectMapper", "mapper", "=", "Jackson", ".", "newObjectMapper", "(", "factory", ")", ";", "assertThat", "(", "mapper", ".", "getFactory", "(", ")", ")", ".", "isSameAs", "(", "factory", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "objectMapperCanHandleNullInsteadOfCustomJsonFactory", "(", ")", "{", "ObjectMapper", "mapper", "=", "Jackson", ".", "newObjectMapper", "(", "null", ")", ";", "assertThat", "(", "mapper", ".", "getFactory", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "objectMapperCanDeserializeJdk7Types", "(", ")", "throws", "IOException", "{", "final", "LogMetadata", "metadata", "=", "Jackson", ".", "newObjectMapper", "(", ")", ".", "readValue", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ",", "LogMetadata", ".", "class", ")", ";", "assertThat", "(", "metadata", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "metadata", ".", "path", ")", ".", "isEqualTo", "(", "Paths", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "objectMapperSerializesNullValues", "(", ")", "throws", "IOException", "{", "final", "ObjectMapper", "mapper", "=", "Jackson", ".", "newObjectMapper", "(", ")", ";", "final", "Issue1627", "pojo", "=", "new", "Issue1627", "(", "null", ",", "null", ")", ";", "final", "String", "json", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "pojo", ")", ")", ".", "isEqualTo", "(", "json", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "private", "RegularExample", "(", ")", "{", "}", "</s>"]
["<s>", "public", "RegularExample", "(", "String", "firstName", ")", "{", "this", ".", "firstName", "=", "firstName", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "private", "SnakeCaseExample", "(", ")", "{", "}", "</s>"]
["<s>", "public", "SnakeCaseExample", "(", "String", "firstName", ")", "{", "this", ".", "firstName", "=", "firstName", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "mapper", ".", "setPropertyNamingStrategy", "(", "strategy", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "serializesRegularProperties", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "new", "RegularExample", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT:Name>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "serializesSnakeCaseProperties", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "new", "SnakeCaseExample", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "deserializesRegularProperties", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT:Name>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ",", "RegularExample", ".", "class", ")", ".", "firstName", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "deserializesSnakeCaseProperties", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ",", "SnakeCaseExample", ".", "class", ")", ".", "firstName", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "mapper", ".", "setSubtypeResolver", "(", "resolver", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "discoversSubtypes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ",", "ExampleSPI", ".", "class", ")", ")", ".", "isInstanceOf", "(", "ImplA", ".", "class", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ",", "ExampleSPI", ".", "class", ")", ")", ".", "isInstanceOf", "(", "ImplB", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "Person", "(", "String", "name", ",", "String", "surname", ")", "{", "this", ".", "name", "=", "name", ";", "this", ".", "surname", "=", "surname", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "String", "getSurname", "(", ")", "{", "return", "surname", ";", "}", "</s>"]
["<s>", "public", "Issue1627", "(", "@", "Nullable", "String", "string", ",", "@", "Nullable", "UUID", "uuid", ")", "{", "this", ".", "string", "=", "string", ";", "this", ".", "uuid", "=", "uuid", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getString", "(", ")", "{", "return", "this", ".", "string", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "UUID", "getUuid", "(", ")", "{", "return", "this", ".", "uuid", ";", "}", "</s>"]
["<s>", "public", "DiscoverableSubtypeResolver", "(", ")", "{", "this", "(", "Discoverable", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "DiscoverableSubtypeResolver", "(", "Class", "<", "?", ">", "rootKlass", ")", "{", "final", "ImmutableList", ".", "Builder", "<", "Class", "<", "?", ">", ">", "subtypes", "=", "ImmutableList", ".", "builder", "(", ")", ";", "for", "(", "Class", "<", "?", ">", "klass", ":", "discoverServices", "(", "rootKlass", ")", ")", "{", "for", "(", "Class", "<", "?", ">", "subtype", ":", "discoverServices", "(", "klass", ")", ")", "{", "subtypes", ".", "add", "(", "subtype", ")", ";", "registerSubtypes", "(", "subtype", ")", ";", "}", "}", "this", ".", "discoveredSubtypes", "=", "subtypes", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ImmutableList", "<", "Class", "<", "?", ">", ">", "getDiscoveredSubtypes", "(", ")", "{", "return", "discoveredSubtypes", ";", "}", "</s>"]
["<s>", "protected", "ClassLoader", "getClassLoader", "(", ")", "{", "return", "this", ".", "getClass", "(", ")", ".", "getClassLoader", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "List", "<", "Class", "<", "?", ">", ">", "discoverServices", "(", "Class", "<", "?", ">", "klass", ")", "{", "final", "List", "<", "Class", "<", "?", ">", ">", "serviceClasses", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "try", "{", "final", "Enumeration", "<", "URL", ">", "resources", "=", "getClassLoader", "(", ")", ".", "getResources", "(", "\"", "<STR_LIT>", "\"", "+", "klass", ".", "getName", "(", ")", ")", ";", "while", "(", "resources", ".", "hasMoreElements", "(", ")", ")", "{", "final", "URL", "url", "=", "resources", ".", "nextElement", "(", ")", ";", "try", "(", "InputStream", "input", "=", "url", ".", "openStream", "(", ")", ";", "InputStreamReader", "streamReader", "=", "new", "InputStreamReader", "(", "input", ",", "StandardCharsets", ".", "UTF_8", ")", ";", "BufferedReader", "reader", "=", "new", "BufferedReader", "(", "streamReader", ")", ")", "{", "String", "line", ";", "while", "(", "(", "line", "=", "reader", ".", "readLine", "(", ")", ")", "!", "=", "null", ")", "{", "final", "Class", "<", "?", ">", "loadedClass", "=", "loadClass", "(", "line", ")", ";", "if", "(", "loadedClass", "!", "=", "null", ")", "{", "serviceClasses", ".", "add", "(", "loadedClass", ")", ";", "}", "}", "}", "}", "}", "catch", "(", "IOException", "e", ")", "{", "LOGGER", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ",", "klass", ".", "getName", "(", ")", ",", "e", ")", ";", "}", "return", "serviceClasses", ";", "}", "</s>"]
["<s>", "@", "Nullable", "private", "Class", "<", "?", ">", "loadClass", "(", "String", "line", ")", "{", "try", "{", "return", "getClassLoader", "(", ")", ".", "loadClass", "(", "line", ".", "trim", "(", ")", ")", ";", "}", "catch", "(", "ClassNotFoundException", "e", ")", "{", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "line", ")", ";", "return", "null", ";", "}", "}", "</s>"]
["<s>", "private", "Jackson", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "ObjectMapper", "newObjectMapper", "(", ")", "{", "final", "ObjectMapper", "mapper", "=", "new", "ObjectMapper", "(", ")", ";", "return", "configure", "(", "mapper", ")", ";", "}", "</s>"]
["<s>", "public", "static", "ObjectMapper", "newObjectMapper", "(", "@", "Nullable", "JsonFactory", "jsonFactory", ")", "{", "final", "ObjectMapper", "mapper", "=", "new", "ObjectMapper", "(", "jsonFactory", ")", ";", "return", "configure", "(", "mapper", ")", ";", "}", "</s>"]
["<s>", "public", "static", "ObjectMapper", "newMinimalObjectMapper", "(", ")", "{", "return", "new", "ObjectMapper", "(", ")", ".", "registerModule", "(", "new", "GuavaModule", "(", ")", ")", ".", "setSubtypeResolver", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "ObjectMapper", "configure", "(", "ObjectMapper", "mapper", ")", "{", "mapper", ".", "registerModule", "(", "new", "GuavaModule", "(", ")", ")", ";", "mapper", ".", "registerModule", "(", "new", "GuavaExtrasModule", "(", ")", ")", ";", "mapper", ".", "registerModule", "(", "new", "JodaModule", "(", ")", ")", ";", "mapper", ".", "registerModule", "(", "new", "AfterburnerModule", "(", ")", ")", ";", "mapper", ".", "registerModule", "(", "new", "FuzzyEnumModule", "(", ")", ")", ";", "mapper", ".", "registerModule", "(", "new", "ParameterNamesModule", "(", ")", ")", ";", "mapper", ".", "registerModule", "(", "new", "Jdk8Module", "(", ")", ")", ";", "mapper", ".", "registerModule", "(", "new", "JavaTimeModule", "(", ")", ")", ";", "mapper", ".", "setPropertyNamingStrategy", "(", "new", "AnnotationSensitivePropertyNamingStrategy", "(", ")", ")", ";", "mapper", ".", "setSubtypeResolver", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ")", ";", "return", "mapper", ";", "}", "</s>"]
["<s>", "public", "AnnotationSensitivePropertyNamingStrategy", "(", ")", "{", "super", "(", ")", ";", "this", ".", "snakeCase", "=", "new", "SnakeCaseStrategy", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "nameForConstructorParameter", "(", "MapperConfig", "<", "?", ">", "config", ",", "AnnotatedParameter", "ctorParam", ",", "String", "defaultName", ")", "{", "if", "(", "ctorParam", ".", "getDeclaringClass", "(", ")", ".", "isAnnotationPresent", "(", "JsonSnakeCase", ".", "class", ")", ")", "{", "return", "snakeCase", ".", "nameForConstructorParameter", "(", "config", ",", "ctorParam", ",", "defaultName", ")", ";", "}", "return", "super", ".", "nameForConstructorParameter", "(", "config", ",", "ctorParam", ",", "defaultName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "nameForField", "(", "MapperConfig", "<", "?", ">", "config", ",", "AnnotatedField", "field", ",", "String", "defaultName", ")", "{", "if", "(", "field", ".", "getDeclaringClass", "(", ")", ".", "isAnnotationPresent", "(", "JsonSnakeCase", ".", "class", ")", ")", "{", "return", "snakeCase", ".", "nameForField", "(", "config", ",", "field", ",", "defaultName", ")", ";", "}", "return", "super", ".", "nameForField", "(", "config", ",", "field", ",", "defaultName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "nameForGetterMethod", "(", "MapperConfig", "<", "?", ">", "config", ",", "AnnotatedMethod", "method", ",", "String", "defaultName", ")", "{", "if", "(", "method", ".", "getDeclaringClass", "(", ")", ".", "isAnnotationPresent", "(", "JsonSnakeCase", ".", "class", ")", ")", "{", "return", "snakeCase", ".", "nameForGetterMethod", "(", "config", ",", "method", ",", "defaultName", ")", ";", "}", "return", "super", ".", "nameForGetterMethod", "(", "config", ",", "method", ",", "defaultName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "nameForSetterMethod", "(", "MapperConfig", "<", "?", ">", "config", ",", "AnnotatedMethod", "method", ",", "String", "defaultName", ")", "{", "if", "(", "method", ".", "getDeclaringClass", "(", ")", ".", "isAnnotationPresent", "(", "JsonSnakeCase", ".", "class", ")", ")", "{", "return", "snakeCase", ".", "nameForSetterMethod", "(", "config", ",", "method", ",", "defaultName", ")", ";", "}", "return", "super", ".", "nameForSetterMethod", "(", "config", ",", "method", ",", "defaultName", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "protected", "PermissiveEnumDeserializer", "(", "Class", "<", "Enum", "<", "?", ">", ">", "clazz", ")", "{", "super", "(", "clazz", ")", ";", "this", ".", "constants", "=", "(", "(", "Class", "<", "Enum", "<", "?", ">", ">", ")", "handledType", "(", ")", ")", ".", "getEnumConstants", "(", ")", ";", "this", ".", "acceptedValues", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "for", "(", "Enum", "<", "?", ">", "constant", ":", "constants", ")", "{", "acceptedValues", ".", "add", "(", "constant", ".", "name", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "Enum", "<", "?", ">", "deserialize", "(", "JsonParser", "jp", ",", "DeserializationContext", "ctxt", ")", "throws", "IOException", "{", "Enum", "<", "?", ">", "constant", "=", "Enums", ".", "fromStringFuzzy", "(", "jp", ".", "getText", "(", ")", ",", "constants", ")", ";", "if", "(", "constant", "!", "=", "null", ")", "{", "return", "constant", ";", "}", "throw", "ctxt", ".", "weirdStringException", "(", "jp", ".", "getText", "(", ")", ",", "handledType", "(", ")", ",", "jp", ".", "getText", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "acceptedValues", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Nullable", "public", "JsonDeserializer", "<", "?", ">", "findEnumDeserializer", "(", "Class", "<", "?", ">", "type", ",", "DeserializationConfig", "config", ",", "BeanDescription", "desc", ")", "throws", "JsonMappingException", "{", "if", "(", "config", ".", "hasDeserializationFeatures", "(", "DeserializationFeature", ".", "READ_ENUMS_USING_TO_STRING", ".", "getMask", "(", ")", ")", ")", "{", "return", "null", ";", "}", "final", "Collection", "<", "AnnotatedMethod", ">", "factoryMethods", "=", "desc", ".", "getFactoryMethods", "(", ")", ";", "if", "(", "factoryMethods", "!", "=", "null", ")", "{", "for", "(", "AnnotatedMethod", "am", ":", "factoryMethods", ")", "{", "if", "(", "am", ".", "hasAnnotation", "(", "JsonCreator", ".", "class", ")", ")", "{", "return", "null", ";", "}", "}", "}", "for", "(", "Field", "field", ":", "type", ".", "getFields", "(", ")", ")", "{", "for", "(", "Annotation", "annotation", ":", "field", ".", "getAnnotations", "(", ")", ")", "{", "final", "String", "packageName", "=", "annotation", ".", "annotationType", "(", ")", ".", "getPackage", "(", ")", ".", "getName", "(", ")", ";", "if", "(", "packageName", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "return", "null", ";", "}", "}", "}", "return", "new", "PermissiveEnumDeserializer", "(", "(", "Class", "<", "Enum", "<", "?", ">", ">", ")", "type", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getModuleName", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Version", "version", "(", ")", "{", "return", "Version", ".", "unknownVersion", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setupModule", "(", "final", "SetupContext", "context", ")", "{", "context", ".", "addDeserializers", "(", "new", "PermissiveEnumDeserializers", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "CacheBuilderSpec", "deserialize", "(", "JsonParser", "jp", ",", "DeserializationContext", "ctxt", ")", "throws", "IOException", "{", "final", "String", "text", "=", "jp", ".", "getText", "(", ")", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "text", ")", "|", "|", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "text", ")", ")", "{", "return", "CacheBuilderSpec", ".", "disableCaching", "(", ")", ";", "}", "return", "CacheBuilderSpec", ".", "parse", "(", "text", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "serialize", "(", "CacheBuilderSpec", "value", ",", "JsonGenerator", "gen", ",", "SerializerProvider", "serializers", ")", "throws", "IOException", "{", "gen", ".", "writeString", "(", "value", ".", "toParsableString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "JsonDeserializer", "<", "?", ">", "findBeanDeserializer", "(", "JavaType", "type", ",", "DeserializationConfig", "config", ",", "BeanDescription", "beanDesc", ")", "throws", "JsonMappingException", "{", "if", "(", "CacheBuilderSpec", ".", "class", ".", "isAssignableFrom", "(", "type", ".", "getRawClass", "(", ")", ")", ")", "{", "return", "new", "CacheBuilderSpecDeserializer", "(", ")", ";", "}", "return", "super", ".", "findBeanDeserializer", "(", "type", ",", "config", ",", "beanDesc", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "JsonSerializer", "<", "?", ">", "findSerializer", "(", "SerializationConfig", "config", ",", "JavaType", "type", ",", "BeanDescription", "beanDesc", ")", "{", "if", "(", "CacheBuilderSpec", ".", "class", ".", "isAssignableFrom", "(", "type", ".", "getRawClass", "(", ")", ")", ")", "{", "return", "new", "CacheBuilderSpecSerializer", "(", ")", ";", "}", "return", "super", ".", "findSerializer", "(", "config", ",", "type", ",", "beanDesc", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getModuleName", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Version", "version", "(", ")", "{", "return", "Version", ".", "unknownVersion", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setupModule", "(", "SetupContext", "context", ")", "{", "context", ".", "addDeserializers", "(", "new", "GuavaExtrasDeserializers", "(", ")", ")", ";", "context", ".", "addSerializers", "(", "new", "GuavaExtrasSerializers", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "objectMapper", ".", "getSubtypeResolver", "(", ")", ".", "registerSubtypes", "(", "AccessJsonLayoutBaseFactory", ".", "class", ",", "EventJsonLayoutBaseFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "private", "<", "T", "extends", "DeferredProcessingAware", ">", "ConsoleAppenderFactory", "<", "T", ">", "getAppenderFactory", "(", "String", "s", ")", "throws", "Exception", "{", "return", "yamlFactory", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "s", ")", ".", "toURI", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDeserializeJson", "(", ")", "throws", "Exception", "{", "ConsoleAppenderFactory", "<", "ILoggingEvent", ">", "appenderFactory", "=", "getAppenderFactory", "(", "\"", "<STR_LIT>", "\"", ")", ";", "DiscoverableLayoutFactory", "layout", "=", "requireNonNull", "(", "appenderFactory", ".", "getLayout", "(", ")", ")", ";", "assertThat", "(", "layout", ")", ".", "isInstanceOf", "(", "EventJsonLayoutBaseFactory", ".", "class", ")", ";", "EventJsonLayoutBaseFactory", "factory", "=", "(", "EventJsonLayoutBaseFactory", ")", "layout", ";", "assertThat", "(", "factory", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "factory", ".", "getTimestampFormat", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "factory", ".", "isPrettyPrint", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "factory", ".", "isAppendLineSeparator", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "factory", ".", "getIncludes", "(", ")", ")", ".", "contains", "(", "EventAttribute", ".", "LEVEL", ",", "EventAttribute", ".", "MDC", ",", "EventAttribute", ".", "MESSAGE", ",", "EventAttribute", ".", "LOGGER_NAME", ",", "EventAttribute", ".", "EXCEPTION", ",", "EventAttribute", ".", "TIMESTAMP", ")", ";", "assertThat", "(", "factory", ".", "getCustomFieldNames", "(", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "factory", ".", "getAdditionalFields", "(", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "factory", ".", "getIncludesMdcKeys", "(", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDeserializeAccessJson", "(", ")", "throws", "Exception", "{", "ConsoleAppenderFactory", "<", "IAccessEvent", ">", "appenderFactory", "=", "getAppenderFactory", "(", "\"", "<STR_LIT>", "\"", ")", ";", "DiscoverableLayoutFactory", "layout", "=", "requireNonNull", "(", "appenderFactory", ".", "getLayout", "(", ")", ")", ";", "assertThat", "(", "layout", ")", ".", "isInstanceOf", "(", "AccessJsonLayoutBaseFactory", ".", "class", ")", ";", "AccessJsonLayoutBaseFactory", "factory", "=", "(", "AccessJsonLayoutBaseFactory", ")", "layout", ";", "assertThat", "(", "factory", ".", "getTimestampFormat", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "factory", ".", "isPrettyPrint", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "factory", ".", "isAppendLineSeparator", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "factory", ".", "getIncludes", "(", ")", ")", ".", "contains", "(", "AccessAttribute", ".", "TIMESTAMP", ",", "AccessAttribute", ".", "REMOTE_USER", ",", "AccessAttribute", ".", "STATUS_CODE", ",", "AccessAttribute", ".", "METHOD", ",", "AccessAttribute", ".", "REQUEST_URL", ",", "AccessAttribute", ".", "REMOTE_HOST", ",", "AccessAttribute", ".", "REQUEST_PARAMETERS", ",", "AccessAttribute", ".", "REQUEST_CONTENT", ",", "AccessAttribute", ".", "TIMESTAMP", ",", "AccessAttribute", ".", "USER_AGENT", ")", ";", "assertThat", "(", "factory", ".", "getResponseHeaders", "(", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "factory", ".", "getRequestHeaders", "(", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "factory", ".", "getCustomFieldNames", "(", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "factory", ".", "getAdditionalFields", "(", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLogJsonToConsole", "(", ")", "throws", "Exception", "{", "ConsoleAppenderFactory", "<", "ILoggingEvent", ">", "consoleAppenderFactory", "=", "getAppenderFactory", "(", "\"", "<STR_LIT>", "\"", ")", ";", "DefaultLoggingFactory", "defaultLoggingFactory", "=", "new", "DefaultLoggingFactory", "(", ")", ";", "defaultLoggingFactory", ".", "setAppenders", "(", "ImmutableList", ".", "of", "(", "consoleAppenderFactory", ")", ")", ";", "PrintStream", "old", "=", "System", ".", "out", ";", "ByteArrayOutputStream", "redirectedStream", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "try", "{", "System", ".", "setOut", "(", "new", "PrintStream", "(", "redirectedStream", ")", ")", ";", "defaultLoggingFactory", ".", "configure", "(", "new", "MetricRegistry", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ".", "info", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Thread", ".", "sleep", "(", "<NUM_LIT:100>", ")", ";", "JsonNode", "jsonNode", "=", "objectMapper", ".", "readTree", "(", "redirectedStream", ".", "toString", "(", ")", ")", ";", "assertThat", "(", "jsonNode", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "jsonNode", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "isTextual", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "jsonNode", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "jsonNode", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "jsonNode", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "finally", "{", "System", ".", "setOut", "(", "old", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLogAccessJsonToConsole", "(", ")", "throws", "Exception", "{", "ConsoleAppenderFactory", "<", "IAccessEvent", ">", "consoleAppenderFactory", "=", "getAppenderFactory", "(", "\"", "<STR_LIT>", "\"", ")", ";", "consoleAppenderFactory", ".", "setTarget", "(", "ConsoleAppenderFactory", ".", "ConsoleStream", ".", "STDERR", ")", ";", "final", "LogbackAccessRequestLogFactory", "requestLogHandler", "=", "new", "LogbackAccessRequestLogFactory", "(", ")", ";", "requestLogHandler", ".", "setAppenders", "(", "ImmutableList", ".", "of", "(", "consoleAppenderFactory", ")", ")", ";", "PrintStream", "old", "=", "System", ".", "err", ";", "ByteArrayOutputStream", "redirectedStream", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "try", "{", "System", ".", "setErr", "(", "new", "PrintStream", "(", "redirectedStream", ")", ")", ";", "RequestLog", "requestLog", "=", "requestLogHandler", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Request", "request", "=", "mock", "(", "Request", ".", "class", ")", ";", "when", "(", "request", ".", "getRemoteAddr", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "request", ".", "getTimeStamp", "(", ")", ")", ".", "thenReturn", "(", "TimeUnit", ".", "SECONDS", ".", "toMillis", "(", "<NUM_LIT>", ")", ")", ";", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "when", "(", "request", ".", "getRequestURI", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "request", ".", "getProtocol", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "request", ".", "getParameterNames", "(", ")", ")", ".", "thenReturn", "(", "Collections", ".", "enumeration", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "when", "(", "request", ".", "getParameterValues", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", "}", ")", ";", "when", "(", "request", ".", "getParameterValues", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", "}", ")", ";", "when", "(", "request", ".", "getAttributeNames", "(", ")", ")", ".", "thenReturn", "(", "Collections", ".", "enumeration", "(", "ImmutableList", ".", "of", "(", ")", ")", ")", ";", "when", "(", "request", ".", "getHeaderNames", "(", ")", ")", ".", "thenReturn", "(", "Collections", ".", "enumeration", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "when", "(", "request", ".", "getHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "request", ".", "getHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Response", "response", "=", "mock", "(", "Response", ".", "class", ")", ";", "when", "(", "response", ".", "getStatus", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "when", "(", "response", ".", "getContentCount", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "HttpFields", "httpFields", "=", "new", "HttpFields", "(", ")", ";", "httpFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "httpFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "response", ".", "getHttpFields", "(", ")", ")", ".", "thenReturn", "(", "httpFields", ")", ";", "when", "(", "response", ".", "getHeaderNames", "(", ")", ")", ".", "thenReturn", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "when", "(", "response", ".", "getHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "response", ".", "getHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "requestLog", ".", "log", "(", "request", ",", "response", ")", ";", "Thread", ".", "sleep", "(", "<NUM_LIT:100>", ")", ";", "JsonNode", "jsonNode", "=", "objectMapper", ".", "readTree", "(", "redirectedStream", ".", "toString", "(", ")", ")", ";", "assertThat", "(", "jsonNode", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "jsonNode", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "isNumber", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "jsonNode", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "isNumber", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "jsonNode", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "jsonNode", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asInt", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "jsonNode", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "assertThat", "(", "jsonNode", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "jsonNode", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "jsonNode", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "jsonNode", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asInt", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "finally", "{", "System", ".", "setErr", "(", "old", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "when", "(", "event", ".", "getTimeStamp", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "when", "(", "event", ".", "getLevel", "(", ")", ")", ".", "thenReturn", "(", "Level", ".", "INFO", ")", ";", "when", "(", "event", ".", "getThreadName", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "event", ".", "getMDCPropertyMap", "(", ")", ")", ".", "thenReturn", "(", "mdc", ")", ";", "when", "(", "event", ".", "getLoggerName", "(", ")", ")", ".", "thenReturn", "(", "logger", ")", ";", "when", "(", "event", ".", "getFormattedMessage", "(", ")", ")", ".", "thenReturn", "(", "message", ")", ";", "when", "(", "event", ".", "getLoggerContextVO", "(", ")", ")", ".", "thenReturn", "(", "new", "LoggerContextVO", "(", "\"", "<STR_LIT>", "\"", ",", "ImmutableMap", ".", "of", "(", ")", ",", "0", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProducesDefaultMap", "(", ")", "{", "Map", "<", "String", ",", "Object", ">", "map", "=", "eventJsonLayout", ".", "toJsonMap", "(", "event", ")", ";", "assertThat", "(", "map", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "logger", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "message", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "mdc", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLogsAnException", "(", ")", "{", "when", "(", "event", ".", "getThrowableProxy", "(", ")", ")", ".", "thenReturn", "(", "new", "ThrowableProxyVO", "(", ")", ")", ";", "when", "(", "throwableProxyConverter", ".", "convert", "(", "event", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "eventJsonLayout", ".", "toJsonMap", "(", "event", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "logger", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "message", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "mdc", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDisableTimestamp", "(", ")", "{", "includes", ".", "remove", "(", "EventAttribute", ".", "TIMESTAMP", ")", ";", "eventJsonLayout", ".", "setIncludes", "(", "includes", ")", ";", "assertThat", "(", "eventJsonLayout", ".", "toJsonMap", "(", "event", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "logger", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "message", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "mdc", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLogVersion", "(", ")", "{", "eventJsonLayout", ".", "setJsonProtocolVersion", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "eventJsonLayout", ".", "toJsonMap", "(", "event", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "logger", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "message", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "mdc", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testReplaceFieldName", "(", ")", "{", "Map", "<", "String", ",", "Object", ">", "map", "=", "new", "EventJsonLayout", "(", "jsonFormatter", ",", "timestampFormatter", ",", "throwableProxyConverter", ",", "includes", ",", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "ImmutableMap", ".", "of", "(", ")", ",", "ImmutableSet", ".", "of", "(", ")", ")", ".", "toJsonMap", "(", "event", ")", ";", "assertThat", "(", "map", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "logger", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "message", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "mdc", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAddNewField", "(", ")", "{", "Map", "<", "String", ",", "Object", ">", "map", "=", "new", "EventJsonLayout", "(", "jsonFormatter", ",", "timestampFormatter", ",", "throwableProxyConverter", ",", "includes", ",", "ImmutableMap", ".", "of", "(", ")", ",", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT:Name>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "ImmutableSet", ".", "of", "(", ")", ")", ".", "toJsonMap", "(", "event", ")", ";", "assertThat", "(", "map", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "logger", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "message", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "mdc", ")", ",", "entry", "(", "\"", "<STR_LIT:Name>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFilterMdc", "(", ")", "{", "Map", "<", "String", ",", "Object", ">", "map", "=", "new", "EventJsonLayout", "(", "jsonFormatter", ",", "timestampFormatter", ",", "throwableProxyConverter", ",", "includes", ",", "ImmutableMap", ".", "of", "(", ")", ",", "ImmutableMap", ".", "of", "(", ")", ",", "ImmutableSet", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "toJsonMap", "(", "event", ")", ";", "assertThat", "(", "map", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "logger", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "message", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testStartThrowableConverter", "(", ")", "{", "eventJsonLayout", ".", "start", "(", ")", ";", "verify", "(", "throwableProxyConverter", ")", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testStopThrowableConverter", "(", ")", "{", "eventJsonLayout", ".", "stop", "(", ")", ";", "verify", "(", "throwableProxyConverter", ")", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testIncludeStringValue", "(", ")", "{", "assertThat", "(", "mapBuilder", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "message", ")", ".", "build", "(", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "message", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDoNotIncludeStringValue", "(", ")", "{", "assertThat", "(", "mapBuilder", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "message", ")", ".", "build", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDoNotIncludeNullStringValue", "(", ")", "{", "String", "value", "=", "null", ";", "assertThat", "(", "mapBuilder", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "value", ")", ".", "build", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testIncludeNumberValue", "(", ")", "{", "assertThat", "(", "mapBuilder", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "<NUM_LIT>", ")", ".", "build", "(", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testIncludeMapValue", "(", ")", "{", "assertThat", "(", "mapBuilder", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "build", "(", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDoNotIncludeEmptyMapValue", "(", ")", "{", "assertThat", "(", "mapBuilder", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "ImmutableMap", ".", "of", "(", ")", ")", ".", "build", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDoNotIncludeNullNumberValue", "(", ")", "{", "Double", "value", "=", "null", ";", "assertThat", "(", "mapBuilder", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "value", ")", ".", "build", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testIncludeFormattedTimestamp", "(", ")", "{", "assertThat", "(", "mapBuilder", ".", "addTimestamp", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "<NUM_LIT>", ")", ".", "build", "(", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testIncludeNotFormattedTimestamp", "(", ")", "{", "assertThat", "(", "new", "MapBuilder", "(", "new", "TimestampFormatter", "(", "null", ",", "ZoneId", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "ImmutableMap", ".", "of", "(", ")", ",", "ImmutableMap", ".", "of", "(", ")", ",", "size", ")", ".", "addTimestamp", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "<NUM_LIT>", ")", ".", "build", "(", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testReplaceStringFieldName", "(", ")", "{", "assertThat", "(", "new", "MapBuilder", "(", "timestampFormatter", ",", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "ImmutableMap", ".", "of", "(", ")", ",", "size", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "message", ")", ".", "build", "(", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "message", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testReplaceNumberFieldName", "(", ")", "{", "assertThat", "(", "new", "MapBuilder", "(", "timestampFormatter", ",", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "ImmutableMap", ".", "of", "(", ")", ",", "size", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "<NUM_LIT>", ")", ".", "build", "(", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAddAdditionalField", "(", ")", "{", "assertThat", "(", "new", "MapBuilder", "(", "timestampFormatter", ",", "ImmutableMap", ".", "of", "(", ")", ",", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "size", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "message", ")", ".", "build", "(", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "message", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFormatTimestampAsString", "(", ")", "{", "TimestampFormatter", "timestampFormatter", "=", "new", "TimestampFormatter", "(", "\"", "<STR_LIT>", "\"", ",", "ZoneId", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "timestampFormatter", ".", "format", "(", "timestamp", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFormatTimestampFromPredefinedFormat", "(", ")", "{", "TimestampFormatter", "timestampFormatter", "=", "new", "TimestampFormatter", "(", "\"", "<STR_LIT>", "\"", ",", "ZoneId", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "timestampFormatter", ".", "format", "(", "timestamp", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDoNotFormatTimestamp", "(", ")", "{", "TimestampFormatter", "timestampFormatter", "=", "new", "TimestampFormatter", "(", "null", ",", "ZoneId", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "timestampFormatter", ".", "format", "(", "timestamp", ")", ")", ".", "isEqualTo", "(", "timestamp", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "when", "(", "event", ".", "getTimeStamp", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "when", "(", "event", ".", "getContentLength", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "when", "(", "event", ".", "getLocalPort", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "when", "(", "event", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "when", "(", "event", ".", "getProtocol", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "event", ".", "getRequestContent", "(", ")", ")", ".", "thenReturn", "(", "\"", "\"", ")", ";", "when", "(", "event", ".", "getRemoteAddr", "(", ")", ")", ".", "thenReturn", "(", "remoteAddress", ")", ";", "when", "(", "event", ".", "getRemoteUser", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "event", ".", "getRequestHeaderMap", "(", ")", ")", ".", "thenReturn", "(", "requestHeaders", ")", ";", "when", "(", "event", ".", "getRequestParameterMap", "(", ")", ")", ".", "thenReturn", "(", "ImmutableMap", ".", "of", "(", ")", ")", ";", "when", "(", "event", ".", "getElapsedTime", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "when", "(", "event", ".", "getRequestURI", "(", ")", ")", ".", "thenReturn", "(", "uri", ")", ";", "when", "(", "event", ".", "getRequestURL", "(", ")", ")", ".", "thenReturn", "(", "url", ")", ";", "when", "(", "event", ".", "getRemoteHost", "(", ")", ")", ".", "thenReturn", "(", "remoteHost", ")", ";", "when", "(", "event", ".", "getResponseContent", "(", ")", ")", ".", "thenReturn", "(", "responseContent", ")", ";", "when", "(", "event", ".", "getResponseHeaderMap", "(", ")", ")", ".", "thenReturn", "(", "responseHeaders", ")", ";", "when", "(", "event", ".", "getServerName", "(", ")", ")", ".", "thenReturn", "(", "serverName", ")", ";", "when", "(", "event", ".", "getStatusCode", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "when", "(", "event", ".", "getRequestHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "userAgent", ")", ";", "accessJsonLayout", ".", "setIncludes", "(", "includes", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProducesDefaultJsonMap", "(", ")", "{", "assertThat", "(", "accessJsonLayout", ".", "toJsonMap", "(", "event", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:GET>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "userAgent", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "remoteAddress", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDisableRemoteAddress", "(", ")", "{", "includes", ".", "remove", "(", "AccessAttribute", ".", "REMOTE_ADDRESS", ")", ";", "accessJsonLayout", ".", "setIncludes", "(", "includes", ")", ";", "assertThat", "(", "accessJsonLayout", ".", "toJsonMap", "(", "event", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:GET>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "userAgent", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDisableTimestamp", "(", ")", "{", "includes", ".", "remove", "(", "AccessAttribute", ".", "TIMESTAMP", ")", ";", "accessJsonLayout", ".", "setIncludes", "(", "includes", ")", ";", "assertThat", "(", "accessJsonLayout", ".", "toJsonMap", "(", "event", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:GET>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "userAgent", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "remoteAddress", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEnableSpecificResponseHeader", "(", ")", "{", "accessJsonLayout", ".", "setResponseHeaders", "(", "ImmutableSet", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "accessJsonLayout", ".", "toJsonMap", "(", "event", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:GET>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "userAgent", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "remoteAddress", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEnableSpecificRequestHeader", "(", ")", "{", "accessJsonLayout", ".", "setRequestHeaders", "(", "ImmutableSet", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "accessJsonLayout", ".", "toJsonMap", "(", "event", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:GET>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "userAgent", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "remoteAddress", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "userAgent", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEnableEverything", "(", ")", "{", "accessJsonLayout", ".", "setIncludes", "(", "EnumSet", ".", "allOf", "(", "AccessAttribute", ".", "class", ")", ")", ";", "accessJsonLayout", ".", "setRequestHeaders", "(", "ImmutableSet", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "accessJsonLayout", ".", "setResponseHeaders", "(", "ImmutableSet", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:Content-Type>", "\"", ")", ")", ";", "assertThat", "(", "accessJsonLayout", ".", "toJsonMap", "(", "event", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:GET>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "userAgent", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "remoteAddress", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "responseHeaders", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "responseContent", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "requestHeaders", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "remoteHost", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "url", ")", ",", "entry", "(", "\"", "<STR_LIT:Name>", "\"", ",", "serverName", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAddAdditionalFields", "(", ")", "{", "accessJsonLayout", "=", "new", "AccessJsonLayout", "(", "jsonFormatter", ",", "timestampFormatter", ",", "includes", ",", "ImmutableMap", ".", "of", "(", ")", ",", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT:Name>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "accessJsonLayout", ".", "toJsonMap", "(", "event", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:GET>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "userAgent", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "remoteAddress", ")", ",", "entry", "(", "\"", "<STR_LIT:Name>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCustomFieldNames", "(", ")", "{", "accessJsonLayout", "=", "new", "AccessJsonLayout", "(", "jsonFormatter", ",", "timestampFormatter", ",", "includes", ",", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "ImmutableMap", ".", "of", "(", ")", ")", ";", "assertThat", "(", "accessJsonLayout", ".", "toJsonMap", "(", "event", ")", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:GET>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "userAgent", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "remoteAddress", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProducesCorrectJson", "(", ")", "throws", "Exception", "{", "JsonNode", "json", "=", "objectMapper", ".", "readTree", "(", "accessJsonLayout", ".", "doLayout", "(", "event", ")", ")", ";", "assertThat", "(", "json", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "json", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "timestamp", ")", ";", "assertThat", "(", "json", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "json", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "assertThat", "(", "json", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "uri", ")", ";", "assertThat", "(", "json", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "json", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asInt", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "json", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asInt", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:100>", ")", ";", "assertThat", "(", "json", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asInt", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "json", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "userAgent", ")", ";", "assertThat", "(", "json", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "remoteAddress", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNoPrettyPrintNoLineSeparator", "(", ")", "{", "JsonFormatter", "formatter", "=", "new", "JsonFormatter", "(", "objectMapper", ",", "false", ",", "false", ")", ";", "assertThat", "(", "formatter", ".", "toJson", "(", "map", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNoPrettyPrintWithLineSeparator", "(", ")", "{", "JsonFormatter", "formatter", "=", "new", "JsonFormatter", "(", "objectMapper", ",", "false", ",", "true", ")", ";", "assertThat", "(", "formatter", ".", "toJson", "(", "map", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPrettyPrintWithLineSeparator", "(", ")", "{", "JsonFormatter", "formatter", "=", "new", "JsonFormatter", "(", "objectMapper", ",", "true", ",", "true", ")", ";", "assertThat", "(", "formatter", ".", "toJson", "(", "map", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPrettyPrintNoLineSeparator", "(", ")", "{", "JsonFormatter", "formatter", "=", "new", "JsonFormatter", "(", "objectMapper", ",", "true", ",", "false", ")", ";", "assertThat", "(", "formatter", ".", "toJson", "(", "map", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:}>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "EnumSet", "<", "EventAttribute", ">", "getIncludes", "(", ")", "{", "return", "includes", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setIncludes", "(", "EnumSet", "<", "EventAttribute", ">", "includes", ")", "{", "this", ".", "includes", "=", "includes", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Set", "<", "String", ">", "getIncludesMdcKeys", "(", ")", "{", "return", "includesMdcKeys", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setIncludesMdcKeys", "(", "Set", "<", "String", ">", "includesMdcKeys", ")", "{", "this", ".", "includesMdcKeys", "=", "includesMdcKeys", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "LayoutBase", "<", "ILoggingEvent", ">", "build", "(", "LoggerContext", "context", ",", "TimeZone", "timeZone", ")", "{", "final", "EventJsonLayout", "jsonLayout", "=", "new", "EventJsonLayout", "(", "createDropwizardJsonFormatter", "(", ")", ",", "createTimestampFormatter", "(", "timeZone", ")", ",", "createThrowableProxyConverter", "(", ")", ",", "includes", ",", "getCustomFieldNames", "(", ")", ",", "getAdditionalFields", "(", ")", ",", "includesMdcKeys", ")", ";", "jsonLayout", ".", "setContext", "(", "context", ")", ";", "return", "jsonLayout", ";", "}", "</s>"]
["<s>", "protected", "ThrowableHandlingConverter", "createThrowableProxyConverter", "(", ")", "{", "return", "new", "RootCauseFirstThrowableProxyConverter", "(", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getTimestampFormat", "(", ")", "{", "return", "timestampFormat", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTimestampFormat", "(", "String", "timestampFormat", ")", "{", "this", ".", "timestampFormat", "=", "timestampFormat", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isPrettyPrint", "(", ")", "{", "return", "prettyPrint", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setPrettyPrint", "(", "boolean", "prettyPrint", ")", "{", "this", ".", "prettyPrint", "=", "prettyPrint", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isAppendLineSeparator", "(", ")", "{", "return", "appendLineSeparator", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAppendLineSeparator", "(", "boolean", "appendLineSeparator", ")", "{", "this", ".", "appendLineSeparator", "=", "appendLineSeparator", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Map", "<", "String", ",", "String", ">", "getCustomFieldNames", "(", ")", "{", "return", "customFieldNames", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setCustomFieldNames", "(", "Map", "<", "String", ",", "String", ">", "customFieldNames", ")", "{", "this", ".", "customFieldNames", "=", "customFieldNames", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Map", "<", "String", ",", "Object", ">", "getAdditionalFields", "(", ")", "{", "return", "additionalFields", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAdditionalFields", "(", "Map", "<", "String", ",", "Object", ">", "additionalFields", ")", "{", "this", ".", "additionalFields", "=", "additionalFields", ";", "}", "</s>"]
["<s>", "protected", "JsonFormatter", "createDropwizardJsonFormatter", "(", ")", "{", "return", "new", "JsonFormatter", "(", "Jackson", ".", "newObjectMapper", "(", ")", ",", "isPrettyPrint", "(", ")", ",", "isAppendLineSeparator", "(", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "TimestampFormatter", "createTimestampFormatter", "(", "TimeZone", "timeZone", ")", "{", "return", "new", "TimestampFormatter", "(", "getTimestampFormat", "(", ")", ",", "timeZone", ".", "toZoneId", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Set", "<", "String", ">", "getResponseHeaders", "(", ")", "{", "return", "responseHeaders", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setResponseHeaders", "(", "Set", "<", "String", ">", "responseHeaders", ")", "{", "this", ".", "responseHeaders", "=", "responseHeaders", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Set", "<", "String", ">", "getRequestHeaders", "(", ")", "{", "return", "requestHeaders", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setRequestHeaders", "(", "Set", "<", "String", ">", "requestHeaders", ")", "{", "this", ".", "requestHeaders", "=", "requestHeaders", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "EnumSet", "<", "AccessAttribute", ">", "getIncludes", "(", ")", "{", "return", "includes", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setIncludes", "(", "EnumSet", "<", "AccessAttribute", ">", "includes", ")", "{", "this", ".", "includes", "=", "includes", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "LayoutBase", "<", "IAccessEvent", ">", "build", "(", "LoggerContext", "context", ",", "TimeZone", "timeZone", ")", "{", "final", "AccessJsonLayout", "jsonLayout", "=", "new", "AccessJsonLayout", "(", "createDropwizardJsonFormatter", "(", ")", ",", "createTimestampFormatter", "(", "timeZone", ")", ",", "includes", ",", "getCustomFieldNames", "(", ")", ",", "getAdditionalFields", "(", ")", ")", ";", "jsonLayout", ".", "setContext", "(", "context", ")", ";", "jsonLayout", ".", "setRequestHeaders", "(", "requestHeaders", ")", ";", "jsonLayout", ".", "setResponseHeaders", "(", "responseHeaders", ")", ";", "return", "jsonLayout", ";", "}", "</s>"]
["<s>", "protected", "AbstractJsonLayout", "(", "JsonFormatter", "jsonFormatter", ")", "{", "this", ".", "jsonFormatter", "=", "jsonFormatter", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "String", "doLayout", "(", "E", "event", ")", "{", "return", "jsonFormatter", ".", "toJson", "(", "toJsonMap", "(", "event", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "abstract", "Map", "<", "String", ",", "Object", ">", "toJsonMap", "(", "E", "event", ")", ";", "</s>"]
["<s>", "public", "EventJsonLayout", "(", "JsonFormatter", "jsonFormatter", ",", "TimestampFormatter", "timestampFormatter", ",", "ThrowableHandlingConverter", "throwableProxyConverter", ",", "Set", "<", "EventAttribute", ">", "includes", ",", "Map", "<", "String", ",", "String", ">", "customFieldNames", ",", "Map", "<", "String", ",", "Object", ">", "additionalFields", ",", "Set", "<", "String", ">", "includesMdcKeys", ")", "{", "super", "(", "jsonFormatter", ")", ";", "this", ".", "timestampFormatter", "=", "timestampFormatter", ";", "this", ".", "additionalFields", "=", "ImmutableMap", ".", "copyOf", "(", "additionalFields", ")", ";", "this", ".", "customFieldNames", "=", "ImmutableMap", ".", "copyOf", "(", "customFieldNames", ")", ";", "this", ".", "throwableProxyConverter", "=", "throwableProxyConverter", ";", "this", ".", "includes", "=", "ImmutableSet", ".", "copyOf", "(", "includes", ")", ";", "this", ".", "includesMdcKeys", "=", "ImmutableSet", ".", "copyOf", "(", "includesMdcKeys", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "start", "(", ")", "{", "throwableProxyConverter", ".", "start", "(", ")", ";", "super", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "stop", "(", ")", "{", "super", ".", "stop", "(", ")", ";", "throwableProxyConverter", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Map", "<", "String", ",", "Object", ">", "toJsonMap", "(", "ILoggingEvent", "event", ")", "{", "return", "new", "MapBuilder", "(", "timestampFormatter", ",", "customFieldNames", ",", "additionalFields", ",", "<NUM_LIT:16>", ")", ".", "addTimestamp", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "EventAttribute", ".", "TIMESTAMP", ")", ",", "event", ".", "getTimeStamp", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "EventAttribute", ".", "LEVEL", ")", ",", "String", ".", "valueOf", "(", "event", ".", "getLevel", "(", ")", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "EventAttribute", ".", "THREAD_NAME", ")", ",", "event", ".", "getThreadName", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "EventAttribute", ".", "MDC", ")", ",", "filterMdc", "(", "event", ".", "getMDCPropertyMap", "(", ")", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "EventAttribute", ".", "LOGGER_NAME", ")", ",", "event", ".", "getLoggerName", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "EventAttribute", ".", "MESSAGE", ")", ",", "event", ".", "getFormattedMessage", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "EventAttribute", ".", "CONTEXT_NAME", ")", ",", "event", ".", "getLoggerContextVO", "(", ")", ".", "getName", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "jsonProtocolVersion", "!", "=", "null", ",", "jsonProtocolVersion", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "EventAttribute", ".", "EXCEPTION", ")", "&", "&", "event", ".", "getThrowableProxy", "(", ")", "!", "=", "null", ",", "throwableProxyConverter", ".", "convert", "(", "event", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Map", "<", "String", ",", "String", ">", "filterMdc", "(", "Map", "<", "String", ",", "String", ">", "mdcPropertyMap", ")", "{", "if", "(", "includesMdcKeys", ".", "isEmpty", "(", ")", ")", "{", "return", "mdcPropertyMap", ";", "}", "return", "mdcPropertyMap", ".", "entrySet", "(", ")", ".", "stream", "(", ")", ".", "filter", "(", "e", "-", ">", "includesMdcKeys", ".", "contains", "(", "e", ".", "getKey", "(", ")", ")", ")", ".", "collect", "(", "Collectors", ".", "toMap", "(", "Map", ".", "Entry", ":", ":", "getKey", ",", "Map", ".", "Entry", ":", ":", "getValue", ")", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "isIncluded", "(", "EventAttribute", "exception", ")", "{", "return", "includes", ".", "contains", "(", "exception", ")", ";", "}", "</s>"]
["<s>", "public", "ImmutableSet", "<", "EventAttribute", ">", "getIncludes", "(", ")", "{", "return", "includes", ";", "}", "</s>"]
["<s>", "public", "void", "setIncludes", "(", "Set", "<", "EventAttribute", ">", "includes", ")", "{", "this", ".", "includes", "=", "Sets", ".", "immutableEnumSet", "(", "includes", ")", ";", "}", "</s>"]
["<s>", "@", "Nullable", "public", "String", "getJsonProtocolVersion", "(", ")", "{", "return", "jsonProtocolVersion", ";", "}", "</s>"]
["<s>", "public", "void", "setJsonProtocolVersion", "(", "@", "Nullable", "String", "jsonProtocolVersion", ")", "{", "this", ".", "jsonProtocolVersion", "=", "jsonProtocolVersion", ";", "}", "</s>"]
["<s>", "public", "ImmutableSet", "<", "String", ">", "getIncludesMdcKeys", "(", ")", "{", "return", "includesMdcKeys", ";", "}", "</s>"]
["<s>", "public", "void", "setIncludesMdcKeys", "(", "Set", "<", "String", ">", "includesMdcKeys", ")", "{", "this", ".", "includesMdcKeys", "=", "ImmutableSet", ".", "copyOf", "(", "includesMdcKeys", ")", ";", "}", "</s>"]
["<s>", "public", "AccessJsonLayout", "(", "JsonFormatter", "jsonFormatter", ",", "TimestampFormatter", "timestampFormatter", ",", "Set", "<", "AccessAttribute", ">", "includes", ",", "Map", "<", "String", ",", "String", ">", "customFieldNames", ",", "Map", "<", "String", ",", "Object", ">", "additionalFields", ")", "{", "super", "(", "jsonFormatter", ")", ";", "this", ".", "timestampFormatter", "=", "timestampFormatter", ";", "this", ".", "additionalFields", "=", "ImmutableMap", ".", "copyOf", "(", "additionalFields", ")", ";", "this", ".", "customFieldNames", "=", "ImmutableMap", ".", "copyOf", "(", "customFieldNames", ")", ";", "this", ".", "includes", "=", "Sets", ".", "immutableEnumSet", "(", "includes", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Map", "<", "String", ",", "Object", ">", "toJsonMap", "(", "IAccessEvent", "event", ")", "{", "return", "new", "MapBuilder", "(", "timestampFormatter", ",", "customFieldNames", ",", "additionalFields", ",", "<NUM_LIT:20>", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "LOCAL_PORT", ")", ",", "event", ".", "getLocalPort", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "CONTENT_LENGTH", ")", ",", "event", ".", "getContentLength", "(", ")", ")", ".", "addTimestamp", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "TIMESTAMP", ")", ",", "event", ".", "getTimeStamp", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "METHOD", ")", ",", "event", ".", "getMethod", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "PROTOCOL", ")", ",", "event", ".", "getProtocol", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "REQUEST_CONTENT", ")", ",", "event", ".", "getRequestContent", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "REMOTE_ADDRESS", ")", ",", "event", ".", "getRemoteAddr", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "REMOTE_USER", ")", ",", "event", ".", "getRemoteUser", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "!", "requestHeaders", ".", "isEmpty", "(", ")", ",", "filterHeaders", "(", "event", ".", "getRequestHeaderMap", "(", ")", ",", "requestHeaders", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "REQUEST_PARAMETERS", ")", ",", "event", ".", "getRequestParameterMap", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "REQUEST_TIME", ")", ",", "event", ".", "getElapsedTime", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "REQUEST_URI", ")", ",", "event", ".", "getRequestURI", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "REQUEST_URL", ")", ",", "event", ".", "getRequestURL", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "REMOTE_HOST", ")", ",", "event", ".", "getRemoteHost", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "RESPONSE_CONTENT", ")", ",", "event", ".", "getResponseContent", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "!", "responseHeaders", ".", "isEmpty", "(", ")", ",", "filterHeaders", "(", "event", ".", "getResponseHeaderMap", "(", ")", ",", "responseHeaders", ")", ")", ".", "add", "(", "\"", "<STR_LIT:Name>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "SERVER_NAME", ")", ",", "event", ".", "getServerName", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "STATUS_CODE", ")", ",", "event", ".", "getStatusCode", "(", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "isIncluded", "(", "AccessAttribute", ".", "USER_AGENT", ")", ",", "event", ".", "getRequestHeader", "(", "HttpHeaders", ".", "USER_AGENT", ")", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "jsonProtocolVersion", "!", "=", "null", ",", "jsonProtocolVersion", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "isIncluded", "(", "AccessAttribute", "userAgent", ")", "{", "return", "includes", ".", "contains", "(", "userAgent", ")", ";", "}", "</s>"]
["<s>", "private", "Map", "<", "String", ",", "String", ">", "filterHeaders", "(", "Map", "<", "String", ",", "String", ">", "headers", ",", "Set", "<", "String", ">", "filteredHeaderNames", ")", "{", "if", "(", "filteredHeaderNames", ".", "isEmpty", "(", ")", ")", "{", "return", "ImmutableMap", ".", "of", "(", ")", ";", "}", "return", "headers", ".", "entrySet", "(", ")", ".", "stream", "(", ")", ".", "filter", "(", "e", "-", ">", "filteredHeaderNames", ".", "contains", "(", "e", ".", "getKey", "(", ")", ")", ")", ".", "collect", "(", "Collectors", ".", "toMap", "(", "Map", ".", "Entry", ":", ":", "getKey", ",", "Map", ".", "Entry", ":", ":", "getValue", ")", ")", ";", "}", "</s>"]
["<s>", "public", "ImmutableSet", "<", "AccessAttribute", ">", "getIncludes", "(", ")", "{", "return", "includes", ";", "}", "</s>"]
["<s>", "public", "void", "setIncludes", "(", "Set", "<", "AccessAttribute", ">", "includes", ")", "{", "this", ".", "includes", "=", "Sets", ".", "immutableEnumSet", "(", "includes", ")", ";", "}", "</s>"]
["<s>", "@", "Nullable", "public", "String", "getJsonProtocolVersion", "(", ")", "{", "return", "jsonProtocolVersion", ";", "}", "</s>"]
["<s>", "public", "void", "setJsonProtocolVersion", "(", "@", "Nullable", "String", "jsonProtocolVersion", ")", "{", "this", ".", "jsonProtocolVersion", "=", "jsonProtocolVersion", ";", "}", "</s>"]
["<s>", "public", "ImmutableSet", "<", "String", ">", "getRequestHeaders", "(", ")", "{", "return", "requestHeaders", ";", "}", "</s>"]
["<s>", "public", "void", "setRequestHeaders", "(", "Set", "<", "String", ">", "requestHeaders", ")", "{", "this", ".", "requestHeaders", "=", "ImmutableSortedSet", ".", "copyOf", "(", "String", ":", ":", "compareToIgnoreCase", ",", "requestHeaders", ")", ";", "}", "</s>"]
["<s>", "public", "ImmutableSet", "<", "String", ">", "getResponseHeaders", "(", ")", "{", "return", "responseHeaders", ";", "}", "</s>"]
["<s>", "public", "void", "setResponseHeaders", "(", "Set", "<", "String", ">", "responseHeaders", ")", "{", "this", ".", "responseHeaders", "=", "ImmutableSortedSet", ".", "copyOf", "(", "String", ":", ":", "compareToIgnoreCase", ",", "responseHeaders", ")", ";", "}", "</s>"]
["<s>", "public", "TimestampFormatter", "(", "@", "Nullable", "String", "timestampFormat", ",", "ZoneId", "zoneId", ")", "{", "if", "(", "timestampFormat", "!", "=", "null", ")", "{", "dateTimeFormatter", "=", "Optional", ".", "ofNullable", "(", "FORMATTERS", ".", "get", "(", "timestampFormat", ")", ")", ".", "orElseGet", "(", "(", ")", "-", ">", "DateTimeFormatter", ".", "ofPattern", "(", "timestampFormat", ")", ")", ".", "withZone", "(", "zoneId", ")", ";", "}", "else", "{", "dateTimeFormatter", "=", "null", ";", "}", "}", "</s>"]
["<s>", "public", "Object", "format", "(", "long", "timestamp", ")", "{", "return", "dateTimeFormatter", "=", "=", "null", "?", "timestamp", ":", "dateTimeFormatter", ".", "format", "(", "Instant", ".", "ofEpochMilli", "(", "timestamp", ")", ")", ";", "}", "</s>"]
["<s>", "public", "JsonFormatter", "(", "ObjectMapper", "objectMapper", ",", "boolean", "prettyPrint", ",", "boolean", "doesAppendLineSeparator", ",", "int", "bufferSize", ")", "{", "this", ".", "objectMapper", "=", "prettyPrint", "?", "objectMapper", ".", "enable", "(", "SerializationFeature", ".", "INDENT_OUTPUT", ")", ":", "objectMapper", ";", "this", ".", "doesAppendLineSeparator", "=", "doesAppendLineSeparator", ";", "this", ".", "bufferSize", "=", "bufferSize", ";", "}", "</s>"]
["<s>", "public", "JsonFormatter", "(", "ObjectMapper", "objectMapper", ",", "boolean", "prettyPrint", ",", "boolean", "doesAppendLineSeparator", ")", "{", "this", "(", "objectMapper", ",", "prettyPrint", ",", "doesAppendLineSeparator", ",", "DEFAULT_BUFFER_SIZE", ")", ";", "}", "</s>"]
["<s>", "@", "Nullable", "public", "String", "toJson", "(", "Map", "<", "String", ",", "Object", ">", "map", ")", "{", "if", "(", "map", "=", "=", "null", "|", "|", "map", ".", "isEmpty", "(", ")", ")", "{", "return", "null", ";", "}", "final", "StringWriter", "writer", "=", "new", "StringWriter", "(", "bufferSize", ")", ";", "try", "{", "objectMapper", ".", "writeValue", "(", "writer", ",", "map", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "if", "(", "doesAppendLineSeparator", ")", "{", "writer", ".", "append", "(", "CoreConstants", ".", "LINE_SEPARATOR", ")", ";", "}", "return", "writer", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "MapBuilder", "(", "TimestampFormatter", "timestampFormatter", ",", "Map", "<", "String", ",", "String", ">", "customFieldNames", ",", "Map", "<", "String", ",", "Object", ">", "additionalFields", ",", "int", "expectedSize", ")", "{", "this", ".", "timestampFormatter", "=", "timestampFormatter", ";", "this", ".", "customFieldNames", "=", "checkNotNull", "(", "customFieldNames", ")", ";", "this", ".", "additionalFields", "=", "checkNotNull", "(", "additionalFields", ")", ";", "this", ".", "map", "=", "Maps", ".", "newHashMapWithExpectedSize", "(", "expectedSize", ")", ";", "}", "</s>"]
["<s>", "public", "MapBuilder", "add", "(", "String", "fieldName", ",", "boolean", "include", ",", "@", "Nullable", "String", "value", ")", "{", "if", "(", "include", "&", "&", "value", "!", "=", "null", ")", "{", "map", ".", "put", "(", "getFieldName", "(", "fieldName", ")", ",", "value", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "MapBuilder", "add", "(", "String", "fieldName", ",", "boolean", "include", ",", "@", "Nullable", "Number", "number", ")", "{", "if", "(", "include", "&", "&", "number", "!", "=", "null", ")", "{", "map", ".", "put", "(", "getFieldName", "(", "fieldName", ")", ",", "number", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "MapBuilder", "add", "(", "String", "fieldName", ",", "boolean", "include", ",", "@", "Nullable", "Map", "<", "String", ",", "?", ">", "mapValue", ")", "{", "if", "(", "include", "&", "&", "mapValue", "!", "=", "null", "&", "&", "!", "mapValue", ".", "isEmpty", "(", ")", ")", "{", "map", ".", "put", "(", "getFieldName", "(", "fieldName", ")", ",", "mapValue", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "MapBuilder", "addTimestamp", "(", "String", "fieldName", ",", "boolean", "include", ",", "long", "timestamp", ")", "{", "if", "(", "include", "&", "&", "timestamp", ">", "0", ")", "{", "map", ".", "put", "(", "getFieldName", "(", "fieldName", ")", ",", "timestampFormatter", ".", "format", "(", "timestamp", ")", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "private", "String", "getFieldName", "(", "String", "fieldName", ")", "{", "return", "customFieldNames", ".", "getOrDefault", "(", "fieldName", ",", "fieldName", ")", ";", "}", "</s>"]
["<s>", "public", "Map", "<", "String", ",", "Object", ">", "build", "(", ")", "{", "map", ".", "putAll", "(", "additionalFields", ")", ";", "return", "map", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "ss", "=", "new", "ServerSocket", "(", "0", ")", ";", "thread", "=", "new", "Thread", "(", "(", ")", "-", ">", "{", "while", "(", "!", "Thread", ".", "currentThread", "(", ")", ".", "isInterrupted", "(", ")", ")", "{", "try", "(", "Socket", "socket", "=", "ss", ".", "accept", "(", ")", ")", "{", "byte", "[", "]", "buffer", "=", "new", "byte", "[", "<NUM_LIT>", "]", ";", "int", "read", "=", "socket", ".", "getInputStream", "(", ")", ".", "read", "(", "buffer", ")", ";", "if", "(", "read", ">", "0", ")", "{", "assertThat", "(", "new", "String", "(", "buffer", ",", "0", ",", "read", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "latch", ".", "countDown", "(", ")", ";", "}", "}", "catch", "(", "IOException", "e", ")", "{", "break", ";", "}", "}", "}", ")", ";", "thread", ".", "start", "(", ")", ";", "resilentSocketOutputStream", "=", "new", "ResilentSocketOutputStream", "(", "\"", "<STR_LIT>", "\"", ",", "ss", ".", "getLocalPort", "(", ")", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "SocketFactory", ".", "getDefault", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "ss", ".", "close", "(", ")", ";", "thread", ".", "interrupt", "(", ")", ";", "resilentSocketOutputStream", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCreatesCleanOutputStream", "(", ")", "throws", "Exception", "{", "assertThat", "(", "resilentSocketOutputStream", ".", "presumedClean", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "resilentSocketOutputStream", ".", "os", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testThrowsExceptionIfCantCreateOutputStream", "(", ")", "throws", "Exception", "{", "assertThatIllegalStateException", "(", ")", ".", "isThrownBy", "(", "(", ")", "-", ">", "new", "ResilentSocketOutputStream", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ",", "<NUM_LIT:100>", ",", "<NUM_LIT>", ",", "SocketFactory", ".", "getDefault", "(", ")", ")", ")", ".", "withMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testWriteMessage", "(", ")", "throws", "Exception", "{", "resilentSocketOutputStream", ".", "write", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "resilentSocketOutputStream", ".", "flush", "(", ")", ";", "latch", ".", "await", "(", "<NUM_LIT:5>", ",", "TimeUnit", ".", "SECONDS", ")", ";", "assertThat", "(", "latch", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetDescription", "(", ")", "{", "assertThat", "(", "resilentSocketOutputStream", ".", "getDescription", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "ss", ".", "getLocalPort", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canBeDeserialized", "(", ")", "throws", "Exception", "{", "LoggingFactory", "externalRequestLogFactory", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "LoggingFactory", ".", "class", ",", "BaseValidator", ".", "newValidator", "(", ")", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "assertThat", "(", "externalRequestLogFactory", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "externalRequestLogFactory", ")", ".", "isInstanceOf", "(", "ExternalLoggingFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "ExternalLoggingFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "private", "static", "File", "loadResource", "(", ")", "throws", "URISyntaxException", "{", "return", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "objectMapper", ".", "registerSubtypes", "(", "TestLayoutFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLoadAppenderWithCustomLayout", "(", ")", "throws", "Exception", "{", "final", "ConsoleAppenderFactory", "<", "ILoggingEvent", ">", "appender", "=", "factory", ".", "build", "(", "loadResource", "(", ")", ")", ";", "assertThat", "(", "appender", ".", "getLayout", "(", ")", ")", ".", "isNotNull", "(", ")", ".", "isInstanceOf", "(", "TestLayoutFactory", ".", "class", ")", ";", "TestLayoutFactory", "layoutFactory", "=", "(", "TestLayoutFactory", ")", "appender", ".", "getLayout", "(", ")", ";", "assertThat", "(", "layoutFactory", ")", ".", "isNotNull", "(", ")", ".", "extracting", "(", "TestLayoutFactory", ":", ":", "isIncludeSeparator", ")", ".", "contains", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testBuildAppenderWithCustomLayout", "(", ")", "throws", "Exception", "{", "AsyncAppender", "appender", "=", "(", "AsyncAppender", ")", "factory", ".", "build", "(", "loadResource", "(", ")", ")", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "ConsoleAppender", "consoleAppender", "=", "(", "ConsoleAppender", ")", "appender", ".", "getAppender", "(", "\"", "<STR_LIT>", "\"", ")", ";", "LayoutWrappingEncoder", "encoder", "=", "(", "LayoutWrappingEncoder", ")", "consoleAppender", ".", "getEncoder", "(", ")", ";", "assertThat", "(", "encoder", ".", "getLayout", "(", ")", ")", ".", "isInstanceOf", "(", "TestLayoutFactory", ".", "TestLayout", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Nullable", "private", "Exception", "getException", "(", ")", "{", "try", "{", "throwOuterWrapper", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "return", "e", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "private", "static", "void", "throwRoot", "(", ")", "throws", "SocketTimeoutException", "{", "throw", "new", "SocketTimeoutException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "void", "throwInnerWrapper", "(", ")", "throws", "IOException", "{", "try", "{", "throwRoot", "(", ")", ";", "}", "catch", "(", "SocketTimeoutException", "ste", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ",", "ste", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "throwOuterWrapper", "(", ")", "{", "try", "{", "throwInnerWrapper", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "{", "converter", ".", "setOptionList", "(", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "converter", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "prefixesExceptionsWithExclamationMarks", "(", ")", "{", "final", "List", "<", "String", ">", "stackTrace", "=", "Splitter", ".", "on", "(", "System", ".", "lineSeparator", "(", ")", ")", ".", "omitEmptyStrings", "(", ")", ".", "splitToList", "(", "converter", ".", "throwableProxyToString", "(", "proxy", ")", ")", ";", "assertThat", "(", "stackTrace", ")", ".", "isNotEmpty", "(", ")", ";", "for", "(", "String", "line", ":", "stackTrace", ")", "{", "assertThat", "(", "line", ")", ".", "startsWith", "(", "\"", "<STR_LIT:!>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "placesRootCauseIsFirst", "(", ")", "{", "assertThat", "(", "converter", ".", "throwableProxyToString", "(", "proxy", ")", ")", ".", "matches", "(", "Pattern", ".", "compile", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "Pattern", ".", "DOTALL", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "objectMapper", ".", "getSubtypeResolver", "(", ")", ".", "registerSubtypes", "(", "ConsoleAppenderFactory", ".", "class", ",", "FileAppenderFactory", ".", "class", ",", "SyslogAppenderFactory", ".", "class", ")", ";", "config", "=", "factory", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasADefaultLevel", "(", ")", "throws", "Exception", "{", "assertThat", "(", "config", ".", "getLevel", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canParseNewLoggerFormat", "(", ")", "throws", "Exception", "{", "final", "DefaultLoggingFactory", "config", "=", "factory", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "assertThat", "(", "config", ".", "getLoggers", "(", ")", ")", ".", "contains", "(", "MapEntry", ".", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "new", "TextNode", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "final", "JsonNode", "newApp", "=", "config", ".", "getLoggers", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "newApp", ")", ".", "isNotNull", "(", ")", ";", "final", "LoggerConfiguration", "newAppConfiguration", "=", "objectMapper", ".", "treeToValue", "(", "newApp", ",", "LoggerConfiguration", ".", "class", ")", ";", "assertThat", "(", "newAppConfiguration", ".", "getLevel", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "newAppConfiguration", ".", "getAppenders", "(", ")", ")", ".", "hasSize", "(", "1", ")", ";", "final", "AppenderFactory", "<", "ILoggingEvent", ">", "appenderFactory", "=", "newAppConfiguration", ".", "getAppenders", "(", ")", ".", "get", "(", "0", ")", ";", "assertThat", "(", "appenderFactory", ")", ".", "isInstanceOf", "(", "FileAppenderFactory", ".", "class", ")", ";", "final", "FileAppenderFactory", "<", "ILoggingEvent", ">", "fileAppenderFactory", "=", "(", "FileAppenderFactory", "<", "ILoggingEvent", ">", ")", "appenderFactory", ";", "assertThat", "(", "fileAppenderFactory", ".", "getCurrentLogFilename", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "fileAppenderFactory", ".", "getArchivedLogFilenamePattern", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "fileAppenderFactory", ".", "getArchivedFileCount", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:5>", ")", ";", "assertThat", "(", "fileAppenderFactory", ".", "getBufferSize", "(", ")", ".", "toKilobytes", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "final", "ImmutableList", "<", "FilterFactory", "<", "ILoggingEvent", ">", ">", "filterFactories", "=", "fileAppenderFactory", ".", "getFilterFactories", "(", ")", ";", "assertThat", "(", "filterFactories", ")", ".", "hasSize", "(", "<NUM_LIT:2>", ")", ";", "assertThat", "(", "filterFactories", ".", "get", "(", "0", ")", ")", ".", "isExactlyInstanceOf", "(", "TestFilterFactory", ".", "class", ")", ";", "assertThat", "(", "filterFactories", ".", "get", "(", "1", ")", ")", ".", "isExactlyInstanceOf", "(", "SecondTestFilterFactory", ".", "class", ")", ";", "final", "JsonNode", "legacyApp", "=", "config", ".", "getLoggers", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "legacyApp", ")", ".", "isNotNull", "(", ")", ";", "final", "LoggerConfiguration", "legacyAppConfiguration", "=", "objectMapper", ".", "treeToValue", "(", "legacyApp", ",", "LoggerConfiguration", ".", "class", ")", ";", "assertThat", "(", "legacyAppConfiguration", ".", "getLevel", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "legacyAppConfiguration", ".", "getAppenders", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testConfigure", "(", ")", "throws", "Exception", "{", "final", "File", "newAppLog", "=", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "File", "newAppNotAdditiveLog", "=", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "File", "defaultLog", "=", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "StrSubstitutor", "substitutor", "=", "new", "StrSubstitutor", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "StringUtils", ".", "removeEnd", "(", "newAppLog", ".", "getAbsolutePath", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ",", "\"", "<STR_LIT>", "\"", ",", "StringUtils", ".", "removeEnd", "(", "newAppNotAdditiveLog", ".", "getAbsolutePath", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ",", "\"", "<STR_LIT>", "\"", ",", "StringUtils", ".", "removeEnd", "(", "defaultLog", ".", "getAbsolutePath", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "final", "String", "configPath", "=", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getFile", "(", ")", ";", "final", "DefaultLoggingFactory", "config", "=", "factory", ".", "build", "(", "new", "SubstitutingSourceProvider", "(", "new", "FileConfigurationSourceProvider", "(", ")", ",", "substitutor", ")", ",", "configPath", ")", ";", "config", ".", "configure", "(", "new", "MetricRegistry", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ".", "debug", "(", "\"", "<STR_LIT>", "\"", ")", ";", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ".", "info", "(", "\"", "<STR_LIT>", "\"", ")", ";", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ".", "debug", "(", "\"", "<STR_LIT>", "\"", ")", ";", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ".", "info", "(", "\"", "<STR_LIT>", "\"", ")", ";", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ".", "debug", "(", "\"", "<STR_LIT>", "\"", ")", ";", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ".", "info", "(", "\"", "<STR_LIT>", "\"", ")", ";", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ".", "debug", "(", "\"", "<STR_LIT>", "\"", ")", ";", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ".", "info", "(", "\"", "<STR_LIT>", "\"", ")", ";", "config", ".", "stop", "(", ")", ";", "assertThat", "(", "Files", ".", "readAllLines", "(", "defaultLog", ".", "toPath", "(", ")", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "Files", ".", "readAllLines", "(", "newAppLog", ".", "toPath", "(", ")", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "Files", ".", "readAllLines", "(", "newAppNotAdditiveLog", ".", "toPath", "(", ")", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testResetAppenders", "(", ")", "throws", "Exception", "{", "final", "String", "configPath", "=", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getFile", "(", ")", ";", "final", "DefaultLoggingFactory", "config", "=", "factory", ".", "build", "(", "new", "FileConfigurationSourceProvider", "(", ")", ",", "configPath", ")", ";", "config", ".", "configure", "(", "new", "MetricRegistry", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "config", ".", "reset", "(", ")", ";", "final", "Logger", "logger", "=", "(", "Logger", ")", "LoggerFactory", ".", "getLogger", "(", "Logger", ".", "ROOT_LOGGER_NAME", ")", ";", "final", "List", "<", "Appender", "<", "ILoggingEvent", ">", ">", "appenders", "=", "ImmutableList", ".", "copyOf", "(", "logger", ".", "iteratorForAppenders", "(", ")", ")", ";", "assertThat", "(", "appenders", ")", ".", "hasAtLeastOneElementOfType", "(", "ConsoleAppender", ".", "class", ")", ";", "assertThat", "(", "appenders", ")", ".", "as", "(", "\"", "<STR_LIT>", "\"", ")", ".", "allMatch", "(", "(", "Appender", "<", "?", ">", "a", ")", "-", ">", "a", ".", "getContext", "(", ")", "!", "=", "null", ")", ";", "assertThat", "(", "appenders", ")", ".", "as", "(", "\"", "<STR_LIT>", "\"", ")", ".", "allMatch", "(", "LifeCycle", ":", ":", "isStarted", ")", ";", "assertThat", "(", "appenders", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testToStringIsImplented", "(", ")", "{", "assertThat", "(", "config", ".", "toString", "(", ")", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "datagramSocket", "=", "new", "DatagramSocket", "(", "UDP_PORT", ")", ";", "thread", "=", "new", "Thread", "(", "(", ")", "-", ">", "{", "byte", "[", "]", "buffer", "=", "new", "byte", "[", "<NUM_LIT>", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "messagesCount", ";", "i", "+", "+", ")", "{", "try", "{", "DatagramPacket", "datagramPacket", "=", "new", "DatagramPacket", "(", "buffer", ",", "buffer", ".", "length", ")", ";", "datagramSocket", ".", "receive", "(", "datagramPacket", ")", ";", "assertThat", "(", "new", "String", "(", "buffer", ",", "0", ",", "datagramPacket", ".", "getLength", "(", ")", ")", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", "+", "i", ")", ";", "countDownLatch", ".", "countDown", "(", ")", ";", "}", "catch", "(", "SocketException", "e", ")", "{", "break", ";", "}", "catch", "(", "IOException", "e", ")", "{", "e", ".", "printStackTrace", "(", ")", ";", "}", "}", "}", ")", ";", "thread", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "thread", ".", "interrupt", "(", ")", ";", "datagramSocket", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSendLogsByTcp", "(", ")", "throws", "Exception", "{", "ObjectMapper", "objectMapper", "=", "Jackson", ".", "newObjectMapper", "(", ")", ";", "objectMapper", ".", "getSubtypeResolver", "(", ")", ".", "registerSubtypes", "(", "UdpSocketAppenderFactory", ".", "class", ")", ";", "DefaultLoggingFactory", "loggingFactory", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "DefaultLoggingFactory", ".", "class", ",", "BaseValidator", ".", "newValidator", "(", ")", ",", "objectMapper", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "loggingFactory", ".", "configure", "(", "new", "MetricRegistry", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Logger", "logger", "=", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:100>", ";", "i", "+", "+", ")", "{", "logger", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "i", ")", ";", "}", "countDownLatch", ".", "await", "(", "<NUM_LIT:5>", ",", "TimeUnit", ".", "SECONDS", ")", ";", "assertThat", "(", "countDownLatch", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "loggingFactory", ".", "reset", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Filter", "<", "ILoggingEvent", ">", "build", "(", ")", "{", "return", "new", "Filter", "<", "ILoggingEvent", ">", "(", ")", "{", "@", "Override", "public", "FilterReply", "decide", "(", "ILoggingEvent", "event", ")", "{", "return", "FilterReply", ".", "NEUTRAL", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "FilterReply", "decide", "(", "ILoggingEvent", "event", ")", "{", "return", "FilterReply", ".", "NEUTRAL", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "ConsoleAppenderFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "includesCallerData", "(", ")", "{", "ConsoleAppenderFactory", "<", "ILoggingEvent", ">", "consoleAppenderFactory", "=", "new", "ConsoleAppenderFactory", "<", ">", "(", ")", ";", "AsyncAppender", "asyncAppender", "=", "(", "AsyncAppender", ")", "consoleAppenderFactory", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "asyncAppender", ".", "isIncludeCallerData", "(", ")", ")", ".", "isFalse", "(", ")", ";", "consoleAppenderFactory", ".", "setIncludeCallerData", "(", "true", ")", ";", "asyncAppender", "=", "(", "AsyncAppender", ")", "consoleAppenderFactory", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "asyncAppender", ".", "isIncludeCallerData", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "appenderContextIsSet", "(", ")", "throws", "Exception", "{", "final", "Logger", "root", "=", "(", "Logger", ")", "LoggerFactory", ".", "getLogger", "(", "org", ".", "slf4j", ".", "Logger", ".", "ROOT_LOGGER_NAME", ")", ";", "final", "ConsoleAppenderFactory", "<", "ILoggingEvent", ">", "appenderFactory", "=", "new", "ConsoleAppenderFactory", "<", ">", "(", ")", ";", "final", "Appender", "<", "ILoggingEvent", ">", "appender", "=", "appenderFactory", ".", "build", "(", "root", ".", "getLoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "appender", ".", "getContext", "(", ")", ")", ".", "isEqualTo", "(", "root", ".", "getLoggerContext", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "appenderNameIsSet", "(", ")", "throws", "Exception", "{", "final", "Logger", "root", "=", "(", "Logger", ")", "LoggerFactory", ".", "getLogger", "(", "org", ".", "slf4j", ".", "Logger", ".", "ROOT_LOGGER_NAME", ")", ";", "final", "ConsoleAppenderFactory", "<", "ILoggingEvent", ">", "appenderFactory", "=", "new", "ConsoleAppenderFactory", "<", ">", "(", ")", ";", "final", "Appender", "<", "ILoggingEvent", ">", "appender", "=", "appenderFactory", ".", "build", "(", "root", ".", "getLoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "appender", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isNeverBlock", "(", ")", "throws", "Exception", "{", "ConsoleAppenderFactory", "<", "ILoggingEvent", ">", "consoleAppenderFactory", "=", "new", "ConsoleAppenderFactory", "<", ">", "(", ")", ";", "consoleAppenderFactory", ".", "setNeverBlock", "(", "true", ")", ";", "AsyncAppender", "asyncAppender", "=", "(", "AsyncAppender", ")", "consoleAppenderFactory", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "asyncAppender", ".", "isNeverBlock", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isNotNeverBlock", "(", ")", "throws", "Exception", "{", "ConsoleAppenderFactory", "<", "ILoggingEvent", ">", "consoleAppenderFactory", "=", "new", "ConsoleAppenderFactory", "<", ">", "(", ")", ";", "consoleAppenderFactory", ".", "setNeverBlock", "(", "false", ")", ";", "AsyncAppender", "asyncAppender", "=", "(", "AsyncAppender", ")", "consoleAppenderFactory", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "asyncAppender", ".", "isNeverBlock", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultIsNotNeverBlock", "(", ")", "throws", "Exception", "{", "ConsoleAppenderFactory", "<", "ILoggingEvent", ">", "consoleAppenderFactory", "=", "new", "ConsoleAppenderFactory", "<", ">", "(", ")", ";", "AsyncAppender", "asyncAppender", "=", "(", "AsyncAppender", ")", "consoleAppenderFactory", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "asyncAppender", ".", "isNeverBlock", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "SyslogAppenderFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultIncludesAppName", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "SyslogAppenderFactory", "(", ")", ".", "getLogFormat", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultIncludesPid", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "SyslogAppenderFactory", "(", ")", ".", "getLogFormat", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "patternIncludesAppNameAndPid", "(", ")", "throws", "Exception", "{", "final", "AsyncAppender", "wrapper", "=", "(", "AsyncAppender", ")", "new", "SyslogAppenderFactory", "(", ")", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "(", "(", "SyslogAppender", ")", "wrapper", ".", "getAppender", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "getSuffixPattern", "(", ")", ")", ".", "matches", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:[>", "<STR_LIT:\\\\>", "<STR_LIT:+>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "stackTracePatternCanBeSet", "(", ")", "throws", "Exception", "{", "final", "SyslogAppenderFactory", "syslogAppenderFactory", "=", "new", "SyslogAppenderFactory", "(", ")", ";", "syslogAppenderFactory", ".", "setStackTracePrefix", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "AsyncAppender", "wrapper", "=", "(", "AsyncAppender", ")", "syslogAppenderFactory", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "(", "(", "SyslogAppender", ")", "wrapper", ".", "getAppender", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "getStackTracePattern", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "appenderContextIsSet", "(", ")", "throws", "Exception", "{", "final", "Logger", "root", "=", "(", "Logger", ")", "LoggerFactory", ".", "getLogger", "(", "org", ".", "slf4j", ".", "Logger", ".", "ROOT_LOGGER_NAME", ")", ";", "final", "SyslogAppenderFactory", "appenderFactory", "=", "new", "SyslogAppenderFactory", "(", ")", ";", "final", "Appender", "<", "ILoggingEvent", ">", "appender", "=", "appenderFactory", ".", "build", "(", "root", ".", "getLoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "appender", ".", "getContext", "(", ")", ")", ".", "isEqualTo", "(", "root", ".", "getLoggerContext", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "appenderNameIsSet", "(", ")", "throws", "Exception", "{", "final", "Logger", "root", "=", "(", "Logger", ")", "LoggerFactory", ".", "getLogger", "(", "org", ".", "slf4j", ".", "Logger", ".", "ROOT_LOGGER_NAME", ")", ";", "final", "SyslogAppenderFactory", "appenderFactory", "=", "new", "SyslogAppenderFactory", "(", ")", ";", "final", "Appender", "<", "ILoggingEvent", ">", "appender", "=", "appenderFactory", ".", "build", "(", "root", ".", "getLoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "appender", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "output", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "factory", "=", "new", "DefaultLoggingFactory", "(", "new", "LoggerContext", "(", ")", ",", "new", "PrintStream", "(", "output", ")", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "factory", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "configureLoggingFactoryWithFileAppender", "(", "File", "file", ")", "{", "factory", ".", "setAppenders", "(", "singletonList", "(", "newFileAppenderFactory", "(", "file", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "AppenderFactory", "<", "ILoggingEvent", ">", "newFileAppenderFactory", "(", "File", "file", ")", "{", "FileAppenderFactory", "<", "ILoggingEvent", ">", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "<", ">", "(", ")", ";", "fileAppenderFactory", ".", "setCurrentLogFilename", "(", "file", ".", "toString", "(", ")", "+", "File", ".", "separator", "+", "\"", "<STR_LIT>", "\"", ")", ";", "fileAppenderFactory", ".", "setArchive", "(", "false", ")", ";", "return", "fileAppenderFactory", ";", "}", "</s>"]
["<s>", "private", "String", "configureAndGetOutputWrittenToErrorStream", "(", ")", "throws", "UnsupportedEncodingException", "{", "factory", ".", "configure", "(", "new", "MetricRegistry", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "output", ".", "toString", "(", "StandardCharsets", ".", "UTF_8", ".", "name", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testWhenUsingDefaultConstructor_SystemErrIsSet", "(", ")", "throws", "Exception", "{", "PrintStream", "configurationErrorsStream", "=", "new", "DefaultLoggingFactory", "(", ")", ".", "getConfigurationErrorsStream", "(", ")", ";", "assertThat", "(", "configurationErrorsStream", ")", ".", "isSameAs", "(", "System", ".", "err", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testWhenUsingDefaultConstructor_StaticILoggerFactoryIsSet", "(", ")", "throws", "Exception", "{", "LoggerContext", "loggerContext", "=", "new", "DefaultLoggingFactory", "(", ")", ".", "getLoggerContext", "(", ")", ";", "assertThat", "(", "loggerContext", ")", ".", "isSameAs", "(", "LoggerFactory", ".", "getILoggerFactory", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testWhenFileAppenderDoesNotHaveWritePermissionToFolder_PrintsErrorMessageToConsole", "(", ")", "throws", "Exception", "{", "File", "folderWithoutWritePermission", "=", "tempDir", ".", "newFolder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assumeTrue", "(", "folderWithoutWritePermission", ".", "setWritable", "(", "false", ")", ")", ";", "configureLoggingFactoryWithFileAppender", "(", "folderWithoutWritePermission", ")", ";", "assertThat", "(", "folderWithoutWritePermission", ".", "canWrite", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "configureAndGetOutputWrittenToErrorStream", "(", ")", ")", ".", "contains", "(", "folderWithoutWritePermission", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testWhenSettingUpLoggingWithValidConfiguration_NoErrorMessageIsPrintedToConsole", "(", ")", "throws", "Exception", "{", "File", "folderWithWritePermission", "=", "tempDir", ".", "newFolder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "configureLoggingFactoryWithFileAppender", "(", "folderWithWritePermission", ")", ";", "assertThat", "(", "folderWithWritePermission", ".", "canWrite", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "configureAndGetOutputWrittenToErrorStream", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLogbackStatusPrinterPrintStreamIsRestoredToSystemOut", "(", ")", "throws", "Exception", "{", "Field", "field", "=", "StatusPrinter", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "field", ".", "setAccessible", "(", "true", ")", ";", "PrintStream", "out", "=", "(", "PrintStream", ")", "field", ".", "get", "(", "null", ")", ";", "assertThat", "(", "out", ")", ".", "isSameAs", "(", "System", ".", "out", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "FileAppenderFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "includesCallerData", "(", ")", "{", "FileAppenderFactory", "<", "ILoggingEvent", ">", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "<", ">", "(", ")", ";", "fileAppenderFactory", ".", "setArchive", "(", "false", ")", ";", "AsyncAppender", "asyncAppender", "=", "(", "AsyncAppender", ")", "fileAppenderFactory", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "asyncAppender", ".", "isIncludeCallerData", "(", ")", ")", ".", "isFalse", "(", ")", ";", "fileAppenderFactory", ".", "setIncludeCallerData", "(", "true", ")", ";", "asyncAppender", "=", "(", "AsyncAppender", ")", "fileAppenderFactory", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "asyncAppender", ".", "isIncludeCallerData", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isRolling", "(", ")", "throws", "Exception", "{", "FileAppenderFactory", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "<", "ILoggingEvent", ">", "(", ")", "{", "@", "Override", "public", "FileAppender", "<", "ILoggingEvent", ">", "buildAppender", "(", "LoggerContext", "context", ")", "{", "return", "super", ".", "buildAppender", "(", "context", ")", ";", "}", "}", ";", "fileAppenderFactory", ".", "setCurrentLogFilename", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "fileAppenderFactory", ".", "setArchive", "(", "true", ")", ";", "fileAppenderFactory", ".", "setArchivedLogFilenamePattern", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "assertThat", "(", "fileAppenderFactory", ".", "buildAppender", "(", "new", "LoggerContext", "(", ")", ")", ")", ".", "isInstanceOf", "(", "RollingFileAppender", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "FileAppender", "<", "ILoggingEvent", ">", "buildAppender", "(", "LoggerContext", "context", ")", "{", "return", "super", ".", "buildAppender", "(", "context", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasArchivedLogFilenamePattern", "(", ")", "throws", "Exception", "{", "FileAppenderFactory", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "(", ")", ";", "fileAppenderFactory", ".", "setCurrentLogFilename", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "ImmutableList", "<", "String", ">", "errors", "=", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "fileAppenderFactory", ")", ")", ";", "assertThat", "(", "errors", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "fileAppenderFactory", ".", "setArchive", "(", "false", ")", ";", "errors", "=", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "fileAppenderFactory", ")", ")", ";", "assertThat", "(", "errors", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isValidForInfiniteRolledFiles", "(", ")", "throws", "Exception", "{", "FileAppenderFactory", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "(", ")", ";", "fileAppenderFactory", ".", "setCurrentLogFilename", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "fileAppenderFactory", ".", "setArchivedFileCount", "(", "0", ")", ";", "fileAppenderFactory", ".", "setArchivedLogFilenamePattern", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "ImmutableList", "<", "String", ">", "errors", "=", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "fileAppenderFactory", ")", ")", ";", "assertThat", "(", "errors", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "fileAppenderFactory", ".", "buildAppender", "(", "new", "LoggerContext", "(", ")", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isValidForMaxFileSize", "(", ")", "throws", "Exception", "{", "FileAppenderFactory", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "(", ")", ";", "fileAppenderFactory", ".", "setCurrentLogFilename", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "fileAppenderFactory", ".", "setMaxFileSize", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "fileAppenderFactory", ".", "setArchivedLogFilenamePattern", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "ImmutableList", "<", "String", ">", "errors", "=", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "fileAppenderFactory", ")", ")", ";", "assertThat", "(", "errors", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "fileAppenderFactory", ".", "setArchivedLogFilenamePattern", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "errors", "=", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "fileAppenderFactory", ")", ")", ";", "assertThat", "(", "errors", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasMaxFileSizeValidation", "(", ")", "throws", "Exception", "{", "FileAppenderFactory", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "(", ")", ";", "fileAppenderFactory", ".", "setCurrentLogFilename", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "fileAppenderFactory", ".", "setArchivedLogFilenamePattern", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "ImmutableList", "<", "String", ">", "errors", "=", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "fileAppenderFactory", ")", ")", ";", "assertThat", "(", "errors", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "fileAppenderFactory", ".", "setMaxFileSize", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "errors", "=", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "fileAppenderFactory", ")", ")", ";", "assertThat", "(", "errors", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCurrentFileNameErrorWhenArchiveIsNotEnabled", "(", ")", "throws", "Exception", "{", "FileAppenderFactory", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "(", ")", ";", "fileAppenderFactory", ".", "setArchive", "(", "false", ")", ";", "ImmutableList", "<", "String", ">", "errors", "=", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "fileAppenderFactory", ")", ")", ";", "assertThat", "(", "errors", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "fileAppenderFactory", ".", "setCurrentLogFilename", "(", "\"", "<STR_LIT>", "\"", ")", ";", "errors", "=", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "fileAppenderFactory", ")", ")", ";", "assertThat", "(", "errors", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCurrentFileNameCanBeNullWhenArchiveIsEnabled", "(", ")", "throws", "Exception", "{", "FileAppenderFactory", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "(", ")", ";", "fileAppenderFactory", ".", "setArchive", "(", "true", ")", ";", "fileAppenderFactory", ".", "setArchivedLogFilenamePattern", "(", "\"", "<STR_LIT>", "\"", ")", ";", "fileAppenderFactory", ".", "setCurrentLogFilename", "(", "null", ")", ";", "ImmutableList", "<", "String", ">", "errors", "=", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "fileAppenderFactory", ")", ")", ";", "assertThat", "(", "errors", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCurrentLogFileNameIsEmptyAndAppenderUsesArchivedNameInstead", "(", ")", "throws", "Exception", "{", "final", "FileAppenderFactory", "<", "ILoggingEvent", ">", "appenderFactory", "=", "new", "FileAppenderFactory", "<", ">", "(", ")", ";", "appenderFactory", ".", "setArchivedLogFilenamePattern", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "final", "FileAppender", "<", "ILoggingEvent", ">", "rollingAppender", "=", "appenderFactory", ".", "buildAppender", "(", "new", "LoggerContext", "(", ")", ")", ";", "final", "String", "file", "=", "rollingAppender", ".", "getFile", "(", ")", ";", "assertThat", "(", "new", "File", "(", "file", ")", ")", ".", "hasName", "(", "\"", "<STR_LIT>", "\"", "+", "LocalDateTime", ".", "now", "(", ")", ".", "format", "(", "DateTimeFormatter", ".", "ofPattern", "(", "\"", "<STR_LIT>", "\"", ")", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasMaxFileSize", "(", ")", "throws", "Exception", "{", "FileAppenderFactory", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "(", ")", ";", "fileAppenderFactory", ".", "setCurrentLogFilename", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "fileAppenderFactory", ".", "setArchive", "(", "true", ")", ";", "fileAppenderFactory", ".", "setMaxFileSize", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "fileAppenderFactory", ".", "setArchivedLogFilenamePattern", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "RollingFileAppender", "<", "ILoggingEvent", ">", "appender", "=", "(", "RollingFileAppender", "<", "ILoggingEvent", ">", ")", "fileAppenderFactory", ".", "buildAppender", "(", "new", "LoggerContext", "(", ")", ")", ";", "assertThat", "(", "appender", ".", "getTriggeringPolicy", "(", ")", ")", ".", "isInstanceOf", "(", "SizeAndTimeBasedRollingPolicy", ".", "class", ")", ";", "final", "Field", "maxFileSizeField", "=", "SizeAndTimeBasedRollingPolicy", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "maxFileSizeField", ".", "setAccessible", "(", "true", ")", ";", "final", "FileSize", "maxFileSize", "=", "(", "FileSize", ")", "maxFileSizeField", ".", "get", "(", "appender", ".", "getRollingPolicy", "(", ")", ")", ";", "assertThat", "(", "maxFileSize", ".", "getSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasMaxFileSizeFixedWindow", "(", ")", "throws", "Exception", "{", "FileAppenderFactory", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "(", ")", ";", "fileAppenderFactory", ".", "setCurrentLogFilename", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "fileAppenderFactory", ".", "setArchive", "(", "true", ")", ";", "fileAppenderFactory", ".", "setMaxFileSize", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "fileAppenderFactory", ".", "setArchivedLogFilenamePattern", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "RollingFileAppender", "<", "ILoggingEvent", ">", "appender", "=", "(", "RollingFileAppender", "<", "ILoggingEvent", ">", ")", "fileAppenderFactory", ".", "buildAppender", "(", "new", "LoggerContext", "(", ")", ")", ";", "assertThat", "(", "appender", ".", "getRollingPolicy", "(", ")", ")", ".", "isInstanceOf", "(", "FixedWindowRollingPolicy", ".", "class", ")", ";", "assertThat", "(", "appender", ".", "getRollingPolicy", "(", ")", ".", "isStarted", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "appender", ".", "getTriggeringPolicy", "(", ")", ")", ".", "isInstanceOf", "(", "SizeBasedTriggeringPolicy", ".", "class", ")", ";", "assertThat", "(", "appender", ".", "getTriggeringPolicy", "(", ")", ".", "isStarted", "(", ")", ")", ".", "isTrue", "(", ")", ";", "final", "Field", "maxFileSizeField", "=", "SizeBasedTriggeringPolicy", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "maxFileSizeField", ".", "setAccessible", "(", "true", ")", ";", "final", "FileSize", "maxFileSize", "=", "(", "FileSize", ")", "maxFileSizeField", ".", "get", "(", "appender", ".", "getTriggeringPolicy", "(", ")", ")", ";", "assertThat", "(", "maxFileSize", ".", "getSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "appenderContextIsSet", "(", ")", "throws", "Exception", "{", "final", "Logger", "root", "=", "(", "Logger", ")", "LoggerFactory", ".", "getLogger", "(", "org", ".", "slf4j", ".", "Logger", ".", "ROOT_LOGGER_NAME", ")", ";", "final", "FileAppenderFactory", "<", "ILoggingEvent", ">", "appenderFactory", "=", "new", "FileAppenderFactory", "<", ">", "(", ")", ";", "appenderFactory", ".", "setArchivedLogFilenamePattern", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "final", "Appender", "<", "ILoggingEvent", ">", "appender", "=", "appenderFactory", ".", "build", "(", "root", ".", "getLoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "appender", ".", "getContext", "(", ")", ")", ".", "isEqualTo", "(", "root", ".", "getLoggerContext", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "appenderNameIsSet", "(", ")", "throws", "Exception", "{", "final", "Logger", "root", "=", "(", "Logger", ")", "LoggerFactory", ".", "getLogger", "(", "org", ".", "slf4j", ".", "Logger", ".", "ROOT_LOGGER_NAME", ")", ";", "final", "FileAppenderFactory", "<", "ILoggingEvent", ">", "appenderFactory", "=", "new", "FileAppenderFactory", "<", ">", "(", ")", ";", "appenderFactory", ".", "setArchivedLogFilenamePattern", "(", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "final", "Appender", "<", "ILoggingEvent", ">", "appender", "=", "appenderFactory", ".", "build", "(", "root", ".", "getLoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "appender", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isNeverBlock", "(", ")", "throws", "Exception", "{", "FileAppenderFactory", "<", "ILoggingEvent", ">", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "<", ">", "(", ")", ";", "fileAppenderFactory", ".", "setArchive", "(", "false", ")", ";", "fileAppenderFactory", ".", "setNeverBlock", "(", "true", ")", ";", "AsyncAppender", "asyncAppender", "=", "(", "AsyncAppender", ")", "fileAppenderFactory", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "asyncAppender", ".", "isNeverBlock", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isNotNeverBlock", "(", ")", "throws", "Exception", "{", "FileAppenderFactory", "<", "ILoggingEvent", ">", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "<", ">", "(", ")", ";", "fileAppenderFactory", ".", "setArchive", "(", "false", ")", ";", "fileAppenderFactory", ".", "setNeverBlock", "(", "false", ")", ";", "AsyncAppender", "asyncAppender", "=", "(", "AsyncAppender", ")", "fileAppenderFactory", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "asyncAppender", ".", "isNeverBlock", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultIsNotNeverBlock", "(", ")", "throws", "Exception", "{", "FileAppenderFactory", "<", "ILoggingEvent", ">", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "<", ">", "(", ")", ";", "fileAppenderFactory", ".", "setArchive", "(", "false", ")", ";", "AsyncAppender", "asyncAppender", "=", "(", "AsyncAppender", ")", "fileAppenderFactory", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "assertThat", "(", "asyncAppender", ".", "isNeverBlock", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "overrideBufferSize", "(", ")", "throws", "NoSuchFieldException", ",", "IllegalAccessException", "{", "FileAppenderFactory", "<", "ILoggingEvent", ">", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "<", ">", "(", ")", ";", "fileAppenderFactory", ".", "setArchive", "(", "false", ")", ";", "fileAppenderFactory", ".", "setBufferSize", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT>", ")", ")", ";", "AsyncAppender", "asyncAppender", "=", "(", "AsyncAppender", ")", "fileAppenderFactory", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "final", "Appender", "<", "ILoggingEvent", ">", "fileAppender", "=", "asyncAppender", ".", "getAppender", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "fileAppender", ")", ".", "isInstanceOf", "(", "FileAppender", ".", "class", ")", ";", "final", "Field", "bufferSizeField", "=", "FileAppender", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "bufferSizeField", ".", "setAccessible", "(", "true", ")", ";", "FileSize", "bufferSizeFromAppender", "=", "(", "FileSize", ")", "bufferSizeField", ".", "get", "(", "fileAppender", ")", ";", "assertThat", "(", "bufferSizeFromAppender", ".", "getSize", "(", ")", ")", ".", "isEqualTo", "(", "fileAppenderFactory", ".", "getBufferSize", "(", ")", ".", "toBytes", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isImmediateFlushed", "(", ")", "throws", "Exception", "{", "FileAppenderFactory", "<", "ILoggingEvent", ">", "fileAppenderFactory", "=", "new", "FileAppenderFactory", "<", ">", "(", ")", ";", "fileAppenderFactory", ".", "setArchive", "(", "false", ")", ";", "Field", "isImmediateFlushField", "=", "OutputStreamAppender", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "isImmediateFlushField", ".", "setAccessible", "(", "true", ")", ";", "fileAppenderFactory", ".", "setImmediateFlush", "(", "false", ")", ";", "AsyncAppender", "asyncAppender", "=", "(", "AsyncAppender", ")", "fileAppenderFactory", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "Appender", "<", "ILoggingEvent", ">", "fileAppender", "=", "asyncAppender", ".", "getAppender", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "(", "Boolean", ")", "isImmediateFlushField", ".", "get", "(", "fileAppender", ")", ")", ".", "isEqualTo", "(", "fileAppenderFactory", ".", "isImmediateFlush", "(", ")", ")", ";", "fileAppenderFactory", ".", "setImmediateFlush", "(", "true", ")", ";", "asyncAppender", "=", "(", "AsyncAppender", ")", "fileAppenderFactory", ".", "build", "(", "new", "LoggerContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "new", "DropwizardLayoutFactory", "(", ")", ",", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ",", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ")", ";", "fileAppender", "=", "asyncAppender", ".", "getAppender", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "(", "Boolean", ")", "isImmediateFlushField", ".", "get", "(", "fileAppender", ")", ")", ".", "isEqualTo", "(", "fileAppenderFactory", ".", "isImmediateFlush", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "objectMapper", ".", "getSubtypeResolver", "(", ")", ".", "registerSubtypes", "(", "TcpSocketAppenderFactory", ".", "class", ")", ";", "ss", "=", "new", "ServerSocket", "(", "TCP_PORT", ")", ";", "thread", "=", "new", "Thread", "(", "(", ")", "-", ">", "{", "while", "(", "!", "Thread", ".", "currentThread", "(", ")", ".", "isInterrupted", "(", ")", ")", "{", "Socket", "socket", ";", "try", "{", "socket", "=", "ss", ".", "accept", "(", ")", ";", "}", "catch", "(", "SocketException", "e", ")", "{", "break", ";", "}", "catch", "(", "IOException", "e", ")", "{", "e", ".", "printStackTrace", "(", ")", ";", "continue", ";", "}", "new", "Thread", "(", "(", ")", "-", ">", "readAndVerifyData", "(", "socket", ")", ")", ".", "start", "(", ")", ";", "}", "}", ")", ";", "thread", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "readAndVerifyData", "(", "Socket", "socket", ")", "{", "try", "(", "Socket", "s", "=", "socket", ";", "BufferedReader", "reader", "=", "new", "BufferedReader", "(", "new", "InputStreamReader", "(", "s", ".", "getInputStream", "(", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "messageCount", ";", "i", "+", "+", ")", "{", "String", "line", "=", "reader", ".", "readLine", "(", ")", ";", "if", "(", "line", "=", "=", "null", ")", "{", "break", ";", "}", "assertThat", "(", "line", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", "+", "i", ")", ";", "latch", ".", "countDown", "(", ")", ";", "}", "}", "catch", "(", "IOException", "e", ")", "{", "e", ".", "printStackTrace", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "thread", ".", "interrupt", "(", ")", ";", "ss", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "File", "resourcePath", "(", "String", "path", ")", "throws", "URISyntaxException", "{", "return", "new", "File", "(", "Resources", ".", "getResource", "(", "path", ")", ".", "toURI", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testParseConfig", "(", ")", "throws", "Exception", "{", "DefaultLoggingFactory", "loggingFactory", "=", "yamlConfigurationFactory", ".", "build", "(", "resourcePath", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "loggingFactory", ".", "getAppenders", "(", ")", ")", ".", "hasSize", "(", "1", ")", ";", "TcpSocketAppenderFactory", "<", "ILoggingEvent", ">", "tcpAppenderFactory", "=", "(", "TcpSocketAppenderFactory", "<", "ILoggingEvent", ">", ")", "loggingFactory", ".", "getAppenders", "(", ")", ".", "get", "(", "0", ")", ";", "assertThat", "(", "tcpAppenderFactory", ".", "getHost", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "tcpAppenderFactory", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "tcpAppenderFactory", ".", "getConnectionTimeout", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:100>", ")", ")", ";", "assertThat", "(", "tcpAppenderFactory", ".", "getSendBufferSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "tcpAppenderFactory", ".", "isImmediateFlush", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testTestTcpLogging", "(", ")", "throws", "Exception", "{", "DefaultLoggingFactory", "loggingFactory", "=", "yamlConfigurationFactory", ".", "build", "(", "resourcePath", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "loggingFactory", ".", "configure", "(", "new", "MetricRegistry", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Logger", "logger", "=", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "messageCount", ";", "i", "+", "+", ")", "{", "logger", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "i", ")", ";", "}", "latch", ".", "await", "(", "<NUM_LIT:5>", ",", "TimeUnit", ".", "SECONDS", ")", ";", "assertThat", "(", "latch", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "loggingFactory", ".", "reset", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testBufferingTcpLogging", "(", ")", "throws", "Exception", "{", "DefaultLoggingFactory", "loggingFactory", "=", "yamlConfigurationFactory", ".", "build", "(", "resourcePath", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "loggingFactory", ".", "configure", "(", "new", "MetricRegistry", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Logger", "logger", "=", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "messageCount", ";", "i", "+", "+", ")", "{", "logger", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "i", ")", ";", "}", "loggingFactory", ".", "reset", "(", ")", ";", "latch", ".", "await", "(", "<NUM_LIT:5>", ",", "TimeUnit", ".", "SECONDS", ")", ";", "assertThat", "(", "latch", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "{", "converter", ".", "setOptionList", "(", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "converter", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "prefixesExceptionsWithExclamationMarks", "(", ")", "throws", "Exception", "{", "assertThat", "(", "converter", ".", "throwableProxyToString", "(", "proxy", ")", ")", ".", "startsWith", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "prefixesThrowables", "(", ")", "throws", "Exception", "{", "assertThat", "(", "layout", ".", "getDefaultConverterMap", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "PrefixedThrowableProxyConverter", ".", "class", ".", "getName", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "prefixesExtendedThrowables", "(", ")", "throws", "Exception", "{", "assertThat", "(", "layout", ".", "getDefaultConverterMap", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "PrefixedExtendedThrowableProxyConverter", ".", "class", ".", "getName", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAContext", "(", ")", "throws", "Exception", "{", "assertThat", "(", "layout", ".", "getContext", "(", ")", ")", ".", "isEqualTo", "(", "context", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAPatternWithATimeZoneAndExtendedThrowables", "(", ")", "throws", "Exception", "{", "assertThat", "(", "layout", ".", "getPattern", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "{", "converter", ".", "setOptionList", "(", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "converter", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "prefixesExceptionsWithExclamationMarks", "(", ")", "throws", "Exception", "{", "assertThat", "(", "converter", ".", "throwableProxyToString", "(", "proxy", ")", ")", ".", "startsWith", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Filter", "<", "ILoggingEvent", ">", "build", "(", ")", "{", "return", "new", "Filter", "<", "ILoggingEvent", ">", "(", ")", "{", "@", "Override", "public", "FilterReply", "decide", "(", "ILoggingEvent", "event", ")", "{", "return", "FilterReply", ".", "NEUTRAL", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "FilterReply", "decide", "(", "ILoggingEvent", "event", ")", "{", "return", "FilterReply", ".", "NEUTRAL", ";", "}", "</s>"]
["<s>", "private", "static", "File", "loadResource", "(", "String", "resourceName", ")", "throws", "URISyntaxException", "{", "return", "new", "File", "(", "Resources", ".", "getResource", "(", "resourceName", ")", ".", "toURI", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLoadAppenderWithTimeZoneInFullFormat", "(", ")", "throws", "Exception", "{", "final", "ConsoleAppenderFactory", "appender", "=", "factory", ".", "build", "(", "loadResource", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "appender", ".", "getTimeZone", "(", ")", ".", "getID", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLoadAppenderWithTimeZoneInCustomFormat", "(", ")", "throws", "Exception", "{", "final", "ConsoleAppenderFactory", "appender", "=", "factory", ".", "build", "(", "loadResource", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "appender", ".", "getTimeZone", "(", ")", ".", "getID", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLoadAppenderWithNoTimeZone", "(", ")", "throws", "Exception", "{", "final", "ConsoleAppenderFactory", "appender", "=", "factory", ".", "build", "(", "loadResource", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "appender", ".", "getTimeZone", "(", ")", ".", "getID", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLoadAppenderWithUtcTimeZone", "(", ")", "throws", "Exception", "{", "final", "ConsoleAppenderFactory", "appender", "=", "factory", ".", "build", "(", "loadResource", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "appender", ".", "getTimeZone", "(", ")", ".", "getID", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLoadAppenderWithWrongTimeZone", "(", ")", "throws", "Exception", "{", "final", "ConsoleAppenderFactory", "appender", "=", "factory", ".", "build", "(", "loadResource", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "appender", ".", "getTimeZone", "(", ")", ".", "getID", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:GMT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLoadAppenderWithSystemTimeZone", "(", ")", "throws", "Exception", "{", "final", "ConsoleAppenderFactory", "appender", "=", "factory", ".", "build", "(", "loadResource", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "appender", ".", "getTimeZone", "(", ")", ")", ".", "isEqualTo", "(", "TimeZone", ".", "getDefault", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "LayoutBase", "<", "ILoggingEvent", ">", "build", "(", "LoggerContext", "context", ",", "TimeZone", "timeZone", ")", "{", "return", "new", "TestLayout", "(", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isIncludeSeparator", "(", ")", "{", "return", "includeSeparator", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setIncludeSeparator", "(", "boolean", "includeSeparator", ")", "{", "this", ".", "includeSeparator", "=", "includeSeparator", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "doLayout", "(", "ILoggingEvent", "event", ")", "{", "return", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "datagramSocket", "=", "new", "DatagramSocket", "(", ")", ";", "thread", "=", "new", "Thread", "(", "(", ")", "-", ">", "{", "byte", "[", "]", "buffer", "=", "new", "byte", "[", "<NUM_LIT>", "]", ";", "while", "(", "!", "Thread", ".", "currentThread", "(", ")", ".", "isInterrupted", "(", ")", ")", "{", "DatagramPacket", "datagramPacket", "=", "new", "DatagramPacket", "(", "buffer", ",", "buffer", ".", "length", ")", ";", "try", "{", "datagramSocket", ".", "receive", "(", "datagramPacket", ")", ";", "assertThat", "(", "new", "String", "(", "buffer", ",", "0", ",", "datagramPacket", ".", "getLength", "(", ")", ",", "UTF_8", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "countDownLatch", ".", "countDown", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "break", ";", "}", "}", "}", ")", ";", "thread", ".", "start", "(", ")", ";", "udpStreamAppender", "=", "new", "DropwizardUdpSocketAppender", "<", ">", "(", "\"", "<STR_LIT>", "\"", ",", "datagramSocket", ".", "getLocalPort", "(", ")", ")", ";", "udpStreamAppender", ".", "setContext", "(", "Mockito", ".", "mock", "(", "Context", ".", "class", ")", ")", ";", "udpStreamAppender", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "datagramSocket", ".", "close", "(", ")", ";", "thread", ".", "interrupt", "(", ")", ";", "udpStreamAppender", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSendMessage", "(", ")", "throws", "Exception", "{", "udpStreamAppender", ".", "getOutputStream", "(", ")", ".", "write", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "countDownLatch", ".", "await", "(", "<NUM_LIT:5>", ",", "TimeUnit", ".", "SECONDS", ")", ";", "assertThat", "(", "countDownLatch", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "</s>"]
["<s>", "public", "ResilentSocketOutputStream", "(", "String", "host", ",", "int", "port", ",", "int", "connectionTimeoutMs", ",", "int", "sendBufferSize", ",", "SocketFactory", "socketFactory", ")", "{", "this", ".", "host", "=", "host", ";", "this", ".", "port", "=", "port", ";", "this", ".", "connectionTimeoutMs", "=", "connectionTimeoutMs", ";", "this", ".", "sendBufferSize", "=", "sendBufferSize", ";", "this", ".", "socketFactory", "=", "socketFactory", ";", "try", "{", "this", ".", "os", "=", "openNewOutputStream", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", "+", "host", "+", "\"", "<STR_LIT::>", "\"", "+", "port", ",", "e", ")", ";", "}", "this", ".", "presumedClean", "=", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "String", "getDescription", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "host", "+", "\"", "<STR_LIT::>", "\"", "+", "port", "+", "\"", "<STR_LIT:]>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "OutputStream", "openNewOutputStream", "(", ")", "throws", "IOException", "{", "final", "Socket", "socket", "=", "socketFactory", ".", "createSocket", "(", ")", ";", "socket", ".", "setKeepAlive", "(", "true", ")", ";", "socket", ".", "connect", "(", "new", "InetSocketAddress", "(", "InetAddress", ".", "getByName", "(", "host", ")", ",", "port", ")", ",", "connectionTimeoutMs", ")", ";", "return", "new", "BufferedOutputStream", "(", "socket", ".", "getOutputStream", "(", ")", ",", "sendBufferSize", ")", ";", "}", "</s>"]
["<s>", "ConsoleStream", "(", "String", "value", ")", "{", "this", ".", "value", "=", "value", ";", "}", "</s>"]
["<s>", "public", "String", "get", "(", ")", "{", "return", "value", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "ConsoleStream", "getTarget", "(", ")", "{", "return", "target", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTarget", "(", "ConsoleStream", "target", ")", "{", "this", ".", "target", "=", "target", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Appender", "<", "E", ">", "build", "(", "LoggerContext", "context", ",", "String", "applicationName", ",", "LayoutFactory", "<", "E", ">", "layoutFactory", ",", "LevelFilterFactory", "<", "E", ">", "levelFilterFactory", ",", "AsyncAppenderFactory", "<", "E", ">", "asyncAppenderFactory", ")", "{", "final", "ConsoleAppender", "<", "E", ">", "appender", "=", "new", "ConsoleAppender", "<", ">", "(", ")", ";", "appender", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "appender", ".", "setContext", "(", "context", ")", ";", "appender", ".", "setTarget", "(", "target", ".", "get", "(", ")", ")", ";", "final", "LayoutWrappingEncoder", "<", "E", ">", "layoutEncoder", "=", "new", "LayoutWrappingEncoder", "<", ">", "(", ")", ";", "layoutEncoder", ".", "setLayout", "(", "buildLayout", "(", "context", ",", "layoutFactory", ")", ")", ";", "appender", ".", "setEncoder", "(", "layoutEncoder", ")", ";", "appender", ".", "addFilter", "(", "levelFilterFactory", ".", "build", "(", "threshold", ")", ")", ";", "getFilterFactories", "(", ")", ".", "forEach", "(", "f", "-", ">", "appender", ".", "addFilter", "(", "f", ".", "build", "(", ")", ")", ")", ";", "appender", ".", "start", "(", ")", ";", "return", "wrapAsync", "(", "appender", ",", "asyncAppenderFactory", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "throwableProxyToString", "(", "IThrowableProxy", "tp", ")", "{", "final", "String", "prefixed", "=", "PATTERN", ".", "matcher", "(", "super", ".", "throwableProxyToString", "(", "tp", ")", ")", ".", "replaceAll", "(", "PREFIX", ")", ";", "return", "CAUSING_PATTERN", ".", "matcher", "(", "prefixed", ")", ".", "replaceAll", "(", "CAUSING", ")", ";", "}", "</s>"]
["<s>", "private", "LoggingUtil", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "LoggerContext", "getLoggerContext", "(", ")", "{", "final", "long", "startTime", "=", "System", ".", "nanoTime", "(", ")", ";", "while", "(", "true", ")", "{", "final", "ILoggerFactory", "iLoggerFactory", "=", "LoggerFactory", ".", "getILoggerFactory", "(", ")", ";", "if", "(", "iLoggerFactory", "instanceof", "LoggerContext", ")", "{", "return", "(", "LoggerContext", ")", "iLoggerFactory", ";", "}", "if", "(", "(", "System", ".", "nanoTime", "(", ")", "-", "startTime", ")", ">", "LOGGER_CONTEXT_AWAITING_TIMEOUT", ".", "toNanoseconds", "(", ")", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "try", "{", "Thread", ".", "sleep", "(", "LOGGER_CONTEXT_AWAITING_SLEEP_TIME", ".", "toMilliseconds", "(", ")", ")", ";", "}", "catch", "(", "InterruptedException", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "e", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "void", "hijackJDKLogging", "(", ")", "{", "JUL_HIJACKING_LOCK", ".", "lock", "(", ")", ";", "try", "{", "if", "(", "!", "julHijacked", ")", "{", "SLF4JBridgeHandler", ".", "removeHandlersForRootLogger", "(", ")", ";", "SLF4JBridgeHandler", ".", "install", "(", ")", ";", "julHijacked", "=", "true", ";", "}", "}", "finally", "{", "JUL_HIJACKING_LOCK", ".", "unlock", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "extraData", "(", "StringBuilder", "builder", ",", "StackTraceElementProxy", "step", ")", "{", "if", "(", "step", "!", "=", "null", ")", "{", "ThrowableProxyUtil", ".", "subjoinPackagingData", "(", "builder", ",", "step", ")", ";", "}", "}", "</s>"]
["<s>", "void", "configure", "(", "MetricRegistry", "metricRegistry", ",", "String", "name", ")", ";", "</s>"]
["<s>", "void", "stop", "(", ")", ";", "</s>"]
["<s>", "void", "reset", "(", ")", ";", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getQueueSize", "(", ")", "{", "return", "queueSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setQueueSize", "(", "int", "queueSize", ")", "{", "this", ".", "queueSize", "=", "queueSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getDiscardingThreshold", "(", ")", "{", "return", "discardingThreshold", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setDiscardingThreshold", "(", "int", "discardingThreshold", ")", "{", "this", ".", "discardingThreshold", "=", "discardingThreshold", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getThreshold", "(", ")", "{", "return", "threshold", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setThreshold", "(", "String", "threshold", ")", "{", "this", ".", "threshold", "=", "DefaultLoggingFactory", ".", "toLevel", "(", "threshold", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getLogFormat", "(", ")", "{", "return", "logFormat", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setLogFormat", "(", "String", "logFormat", ")", "{", "this", ".", "logFormat", "=", "logFormat", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "TimeZone", "getTimeZone", "(", ")", "{", "return", "timeZone", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTimeZone", "(", "String", "zoneId", ")", "{", "this", ".", "timeZone", "=", "nullToEmpty", "(", "zoneId", ")", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", "?", "TimeZone", ".", "getDefault", "(", ")", ":", "TimeZone", ".", "getTimeZone", "(", "zoneId", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTimeZone", "(", "TimeZone", "timeZone", ")", "{", "this", ".", "timeZone", "=", "timeZone", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isIncludeCallerData", "(", ")", "{", "return", "includeCallerData", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setIncludeCallerData", "(", "boolean", "includeCallerData", ")", "{", "this", ".", "includeCallerData", "=", "includeCallerData", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "ImmutableList", "<", "FilterFactory", "<", "E", ">", ">", "getFilterFactories", "(", ")", "{", "return", "filterFactories", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setFilterFactories", "(", "List", "<", "FilterFactory", "<", "E", ">", ">", "appenders", ")", "{", "this", ".", "filterFactories", "=", "ImmutableList", ".", "copyOf", "(", "appenders", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setNeverBlock", "(", "boolean", "neverBlock", ")", "{", "this", ".", "neverBlock", "=", "neverBlock", ";", "}", "</s>"]
["<s>", "@", "Nullable", "public", "DiscoverableLayoutFactory", "getLayout", "(", ")", "{", "return", "layout", ";", "}", "</s>"]
["<s>", "public", "void", "setLayout", "(", "@", "Nullable", "DiscoverableLayoutFactory", "layout", ")", "{", "this", ".", "layout", "=", "layout", ";", "}", "</s>"]
["<s>", "protected", "Appender", "<", "E", ">", "wrapAsync", "(", "Appender", "<", "E", ">", "appender", ",", "AsyncAppenderFactory", "<", "E", ">", "asyncAppenderFactory", ")", "{", "return", "wrapAsync", "(", "appender", ",", "asyncAppenderFactory", ",", "appender", ".", "getContext", "(", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "Appender", "<", "E", ">", "wrapAsync", "(", "Appender", "<", "E", ">", "appender", ",", "AsyncAppenderFactory", "<", "E", ">", "asyncAppenderFactory", ",", "Context", "context", ")", "{", "final", "AsyncAppenderBase", "<", "E", ">", "asyncAppender", "=", "asyncAppenderFactory", ".", "build", "(", ")", ";", "if", "(", "asyncAppender", "instanceof", "AsyncAppender", ")", "{", "(", "(", "AsyncAppender", ")", "asyncAppender", ")", ".", "setIncludeCallerData", "(", "includeCallerData", ")", ";", "}", "asyncAppender", ".", "setQueueSize", "(", "queueSize", ")", ";", "asyncAppender", ".", "setDiscardingThreshold", "(", "discardingThreshold", ")", ";", "asyncAppender", ".", "setContext", "(", "context", ")", ";", "asyncAppender", ".", "setName", "(", "\"", "<STR_LIT:->", "\"", "+", "appender", ".", "getName", "(", ")", ")", ";", "asyncAppender", ".", "addAppender", "(", "appender", ")", ";", "asyncAppender", ".", "setNeverBlock", "(", "neverBlock", ")", ";", "asyncAppender", ".", "start", "(", ")", ";", "return", "asyncAppender", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "protected", "LayoutBase", "<", "E", ">", "buildLayout", "(", "LoggerContext", "context", ",", "LayoutFactory", "<", "E", ">", "defaultLayoutFactory", ")", "{", "final", "LayoutBase", "<", "E", ">", "layoutBase", ";", "if", "(", "layout", "=", "=", "null", ")", "{", "final", "PatternLayoutBase", "<", "E", ">", "patternLayoutBase", "=", "defaultLayoutFactory", ".", "build", "(", "context", ",", "timeZone", ")", ";", "if", "(", "!", "Strings", ".", "isNullOrEmpty", "(", "logFormat", ")", ")", "{", "patternLayoutBase", ".", "setPattern", "(", "logFormat", ")", ";", "}", "layoutBase", "=", "patternLayoutBase", ";", "}", "else", "{", "layoutBase", "=", "layout", ".", "build", "(", "context", ",", "timeZone", ")", ";", "}", "layoutBase", ".", "start", "(", ")", ";", "return", "layoutBase", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "MetricRegistry", "metricRegistry", ",", "String", "name", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "stop", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "reset", "(", ")", "{", "}", "</s>"]
["<s>", "Appender", "<", "E", ">", "build", "(", "LoggerContext", "context", ",", "String", "applicationName", ",", "LayoutFactory", "<", "E", ">", "layoutFactory", ",", "LevelFilterFactory", "<", "E", ">", "levelFilterFactory", ",", "AsyncAppenderFactory", "<", "E", ">", "asyncAppenderFactory", ")", ";", "</s>"]
["<s>", "private", "BootstrapLogging", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "void", "bootstrap", "(", ")", "{", "bootstrap", "(", "Level", ".", "WARN", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "bootstrap", "(", "Level", "level", ")", "{", "bootstrap", "(", "level", ",", "DropwizardLayout", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "bootstrap", "(", "Level", "level", ",", "DiscoverableLayoutFactory", "<", "ILoggingEvent", ">", "layoutFactory", ")", "{", "LoggingUtil", ".", "hijackJDKLogging", "(", ")", ";", "BOOTSTRAPPING_LOCK", ".", "lock", "(", ")", ";", "try", "{", "if", "(", "bootstrapped", ")", "{", "return", ";", "}", "final", "Logger", "root", "=", "LoggingUtil", ".", "getLoggerContext", "(", ")", ".", "getLogger", "(", "org", ".", "slf4j", ".", "Logger", ".", "ROOT_LOGGER_NAME", ")", ";", "root", ".", "detachAndStopAllAppenders", "(", ")", ";", "final", "Layout", "<", "ILoggingEvent", ">", "layout", "=", "layoutFactory", ".", "build", "(", "root", ".", "getLoggerContext", "(", ")", ",", "TimeZone", ".", "getDefault", "(", ")", ")", ";", "layout", ".", "start", "(", ")", ";", "final", "ThresholdFilter", "filter", "=", "new", "ThresholdFilter", "(", ")", ";", "filter", ".", "setLevel", "(", "level", ".", "toString", "(", ")", ")", ";", "filter", ".", "start", "(", ")", ";", "final", "ConsoleAppender", "<", "ILoggingEvent", ">", "appender", "=", "new", "ConsoleAppender", "<", ">", "(", ")", ";", "appender", ".", "addFilter", "(", "filter", ")", ";", "appender", ".", "setContext", "(", "root", ".", "getLoggerContext", "(", ")", ")", ";", "final", "LayoutWrappingEncoder", "<", "ILoggingEvent", ">", "layoutEncoder", "=", "new", "LayoutWrappingEncoder", "<", ">", "(", ")", ";", "layoutEncoder", ".", "setLayout", "(", "layout", ")", ";", "appender", ".", "setEncoder", "(", "layoutEncoder", ")", ";", "appender", ".", "start", "(", ")", ";", "root", ".", "addAppender", "(", "appender", ")", ";", "bootstrapped", "=", "true", ";", "}", "finally", "{", "BOOTSTRAPPING_LOCK", ".", "unlock", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "DefaultLoggingFactory", "(", ")", "{", "this", "(", "LoggingUtil", ".", "getLoggerContext", "(", ")", ",", "System", ".", "err", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "DefaultLoggingFactory", "(", "LoggerContext", "loggerContext", ",", "PrintStream", "configurationErrorsStream", ")", "{", "this", ".", "loggerContext", "=", "requireNonNull", "(", "loggerContext", ")", ";", "this", ".", "configurationErrorsStream", "=", "requireNonNull", "(", "configurationErrorsStream", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "LoggerContext", "getLoggerContext", "(", ")", "{", "return", "loggerContext", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "PrintStream", "getConfigurationErrorsStream", "(", ")", "{", "return", "configurationErrorsStream", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getLevel", "(", ")", "{", "return", "level", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setLevel", "(", "String", "level", ")", "{", "this", ".", "level", "=", "level", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "ImmutableMap", "<", "String", ",", "JsonNode", ">", "getLoggers", "(", ")", "{", "return", "loggers", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setLoggers", "(", "Map", "<", "String", ",", "JsonNode", ">", "loggers", ")", "{", "this", ".", "loggers", "=", "ImmutableMap", ".", "copyOf", "(", "loggers", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "ImmutableList", "<", "AppenderFactory", "<", "ILoggingEvent", ">", ">", "getAppenders", "(", ")", "{", "return", "appenders", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAppenders", "(", "List", "<", "AppenderFactory", "<", "ILoggingEvent", ">", ">", "appenders", ")", "{", "this", ".", "appenders", "=", "ImmutableList", ".", "copyOf", "(", "appenders", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "MetricRegistry", "metricRegistry", ",", "String", "name", ")", "{", "LoggingUtil", ".", "hijackJDKLogging", "(", ")", ";", "CHANGE_LOGGER_CONTEXT_LOCK", ".", "lock", "(", ")", ";", "final", "Logger", "root", ";", "try", "{", "root", "=", "configureLoggers", "(", "name", ")", ";", "}", "finally", "{", "CHANGE_LOGGER_CONTEXT_LOCK", ".", "unlock", "(", ")", ";", "}", "final", "LevelFilterFactory", "<", "ILoggingEvent", ">", "levelFilterFactory", "=", "new", "ThresholdLevelFilterFactory", "(", ")", ";", "final", "AsyncAppenderFactory", "<", "ILoggingEvent", ">", "asyncAppenderFactory", "=", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ";", "final", "LayoutFactory", "<", "ILoggingEvent", ">", "layoutFactory", "=", "new", "DropwizardLayoutFactory", "(", ")", ";", "for", "(", "AppenderFactory", "<", "ILoggingEvent", ">", "output", ":", "appenders", ")", "{", "root", ".", "addAppender", "(", "output", ".", "build", "(", "loggerContext", ",", "name", ",", "layoutFactory", ",", "levelFilterFactory", ",", "asyncAppenderFactory", ")", ")", ";", "}", "StatusPrinter", ".", "setPrintStream", "(", "configurationErrorsStream", ")", ";", "try", "{", "StatusPrinter", ".", "printIfErrorsOccured", "(", "loggerContext", ")", ";", "}", "finally", "{", "StatusPrinter", ".", "setPrintStream", "(", "System", ".", "out", ")", ";", "}", "final", "MBeanServer", "server", "=", "ManagementFactory", ".", "getPlatformMBeanServer", "(", ")", ";", "MBEAN_REGISTRATION_LOCK", ".", "lock", "(", ")", ";", "try", "{", "final", "ObjectName", "objectName", "=", "new", "ObjectName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "!", "server", ".", "isRegistered", "(", "objectName", ")", ")", "{", "server", ".", "registerMBean", "(", "new", "JMXConfigurator", "(", "loggerContext", ",", "server", ",", "objectName", ")", ",", "objectName", ")", ";", "}", "}", "catch", "(", "MalformedObjectNameException", "|", "InstanceAlreadyExistsException", "|", "NotCompliantMBeanException", "|", "MBeanRegistrationException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "finally", "{", "MBEAN_REGISTRATION_LOCK", ".", "unlock", "(", ")", ";", "}", "configureInstrumentation", "(", "root", ",", "metricRegistry", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "stop", "(", ")", "{", "CHANGE_LOGGER_CONTEXT_LOCK", ".", "lock", "(", ")", ";", "try", "{", "final", "Logger", "logger", "=", "loggerContext", ".", "getLogger", "(", "org", ".", "slf4j", ".", "Logger", ".", "ROOT_LOGGER_NAME", ")", ";", "final", "ArrayList", "<", "Appender", "<", "ILoggingEvent", ">", ">", "appenders", "=", "Lists", ".", "newArrayList", "(", "logger", ".", "iteratorForAppenders", "(", ")", ")", ";", "for", "(", "Appender", "<", "ILoggingEvent", ">", "appender", ":", "appenders", ")", "{", "if", "(", "appender", "instanceof", "AsyncAppender", ")", "{", "flushAppender", "(", "(", "AsyncAppender", ")", "appender", ")", ";", "}", "}", "}", "catch", "(", "InterruptedException", "ignored", ")", "{", "Thread", ".", "currentThread", "(", ")", ".", "interrupt", "(", ")", ";", "}", "finally", "{", "CHANGE_LOGGER_CONTEXT_LOCK", ".", "unlock", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "reset", "(", ")", "{", "CHANGE_LOGGER_CONTEXT_LOCK", ".", "lock", "(", ")", ";", "try", "{", "loggerContext", ".", "stop", "(", ")", ";", "final", "Logger", "logger", "=", "loggerContext", ".", "getLogger", "(", "org", ".", "slf4j", ".", "Logger", ".", "ROOT_LOGGER_NAME", ")", ";", "logger", ".", "detachAndStopAllAppenders", "(", ")", ";", "final", "DropwizardLayout", "formatter", "=", "new", "DropwizardLayout", "(", "loggerContext", ",", "TimeZone", ".", "getDefault", "(", ")", ")", ";", "formatter", ".", "start", "(", ")", ";", "final", "LayoutWrappingEncoder", "<", "ILoggingEvent", ">", "layoutEncoder", "=", "new", "LayoutWrappingEncoder", "<", ">", "(", ")", ";", "layoutEncoder", ".", "setLayout", "(", "formatter", ")", ";", "final", "ConsoleAppender", "<", "ILoggingEvent", ">", "consoleAppender", "=", "new", "ConsoleAppender", "<", ">", "(", ")", ";", "consoleAppender", ".", "addFilter", "(", "new", "ThresholdLevelFilterFactory", "(", ")", ".", "build", "(", "Level", ".", "INFO", ")", ")", ";", "consoleAppender", ".", "setEncoder", "(", "layoutEncoder", ")", ";", "consoleAppender", ".", "setContext", "(", "loggerContext", ")", ";", "consoleAppender", ".", "start", "(", ")", ";", "logger", ".", "addAppender", "(", "consoleAppender", ")", ";", "loggerContext", ".", "start", "(", ")", ";", "}", "finally", "{", "CHANGE_LOGGER_CONTEXT_LOCK", ".", "unlock", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "flushAppender", "(", "AsyncAppender", "appender", ")", "throws", "InterruptedException", "{", "int", "timeWaiting", "=", "0", ";", "while", "(", "timeWaiting", "<", "appender", ".", "getMaxFlushTime", "(", ")", "&", "&", "appender", ".", "getNumberOfElementsInQueue", "(", ")", ">", "0", ")", "{", "Thread", ".", "sleep", "(", "<NUM_LIT:100>", ")", ";", "timeWaiting", "+", "=", "<NUM_LIT:100>", ";", "}", "if", "(", "appender", ".", "getNumberOfElementsInQueue", "(", ")", ">", "0", ")", "{", "appender", ".", "addWarn", "(", "appender", ".", "getNumberOfElementsInQueue", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "configureInstrumentation", "(", "Logger", "root", ",", "MetricRegistry", "metricRegistry", ")", "{", "final", "InstrumentedAppender", "appender", "=", "new", "InstrumentedAppender", "(", "metricRegistry", ")", ";", "appender", ".", "setContext", "(", "loggerContext", ")", ";", "appender", ".", "start", "(", ")", ";", "root", ".", "addAppender", "(", "appender", ")", ";", "}", "</s>"]
["<s>", "private", "Logger", "configureLoggers", "(", "String", "name", ")", "{", "final", "Logger", "root", "=", "loggerContext", ".", "getLogger", "(", "org", ".", "slf4j", ".", "Logger", ".", "ROOT_LOGGER_NAME", ")", ";", "loggerContext", ".", "reset", "(", ")", ";", "final", "LevelChangePropagator", "propagator", "=", "new", "LevelChangePropagator", "(", ")", ";", "propagator", ".", "setContext", "(", "loggerContext", ")", ";", "propagator", ".", "setResetJUL", "(", "true", ")", ";", "loggerContext", ".", "addListener", "(", "propagator", ")", ";", "root", ".", "setLevel", "(", "toLevel", "(", "level", ")", ")", ";", "final", "LevelFilterFactory", "<", "ILoggingEvent", ">", "levelFilterFactory", "=", "new", "ThresholdLevelFilterFactory", "(", ")", ";", "final", "AsyncAppenderFactory", "<", "ILoggingEvent", ">", "asyncAppenderFactory", "=", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ";", "final", "LayoutFactory", "<", "ILoggingEvent", ">", "layoutFactory", "=", "new", "DropwizardLayoutFactory", "(", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "JsonNode", ">", "entry", ":", "loggers", ".", "entrySet", "(", ")", ")", "{", "final", "Logger", "logger", "=", "loggerContext", ".", "getLogger", "(", "entry", ".", "getKey", "(", ")", ")", ";", "final", "JsonNode", "jsonNode", "=", "entry", ".", "getValue", "(", ")", ";", "if", "(", "jsonNode", ".", "isTextual", "(", ")", ")", "{", "logger", ".", "setLevel", "(", "Level", ".", "valueOf", "(", "jsonNode", ".", "asText", "(", ")", ")", ")", ";", "}", "else", "if", "(", "jsonNode", ".", "isObject", "(", ")", ")", "{", "final", "LoggerConfiguration", "configuration", ";", "try", "{", "configuration", "=", "Jackson", ".", "newObjectMapper", "(", ")", ".", "treeToValue", "(", "jsonNode", ",", "LoggerConfiguration", ".", "class", ")", ";", "}", "catch", "(", "JsonProcessingException", "e", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "entry", ".", "getKey", "(", ")", "+", "\"", "'", "\"", ",", "e", ")", ";", "}", "logger", ".", "setLevel", "(", "toLevel", "(", "configuration", ".", "getLevel", "(", ")", ")", ")", ";", "logger", ".", "setAdditive", "(", "configuration", ".", "isAdditive", "(", ")", ")", ";", "for", "(", "AppenderFactory", "<", "ILoggingEvent", ">", "appender", ":", "configuration", ".", "getAppenders", "(", ")", ")", "{", "logger", ".", "addAppender", "(", "appender", ".", "build", "(", "loggerContext", ",", "name", ",", "layoutFactory", ",", "levelFilterFactory", ",", "asyncAppenderFactory", ")", ")", ";", "}", "}", "else", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "entry", ".", "getKey", "(", ")", "+", "\"", "'", "\"", ")", ";", "}", "}", "return", "root", ";", "}", "</s>"]
["<s>", "static", "Level", "toLevel", "(", "@", "Nullable", "String", "text", ")", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "text", ")", ")", "{", "return", "Level", ".", "OFF", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "text", ")", ")", "{", "return", "Level", ".", "ALL", ";", "}", "return", "Level", ".", "toLevel", "(", "text", ",", "Level", ".", "INFO", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "MoreObjects", ".", "toStringHelper", "(", "this", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "level", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "loggers", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "appenders", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getHost", "(", ")", "{", "return", "host", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setHost", "(", "String", "host", ")", "{", "this", ".", "host", "=", "host", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getPort", "(", ")", "{", "return", "port", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setPort", "(", "int", "port", ")", "{", "this", ".", "port", "=", "port", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getConnectionTimeout", "(", ")", "{", "return", "connectionTimeout", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setConnectionTimeout", "(", "Duration", "connectionTimeout", ")", "{", "this", ".", "connectionTimeout", "=", "connectionTimeout", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isImmediateFlush", "(", ")", "{", "return", "immediateFlush", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setImmediateFlush", "(", "boolean", "immediateFlush", ")", "{", "this", ".", "immediateFlush", "=", "immediateFlush", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Size", "getSendBufferSize", "(", ")", "{", "return", "sendBufferSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setSendBufferSize", "(", "Size", "sendBufferSize", ")", "{", "this", ".", "sendBufferSize", "=", "sendBufferSize", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Appender", "<", "E", ">", "build", "(", "LoggerContext", "context", ",", "String", "applicationName", ",", "LayoutFactory", "<", "E", ">", "layoutFactory", ",", "LevelFilterFactory", "<", "E", ">", "levelFilterFactory", ",", "AsyncAppenderFactory", "<", "E", ">", "asyncAppenderFactory", ")", "{", "final", "DropwizardSocketAppender", "<", "E", ">", "appender", "=", "new", "DropwizardSocketAppender", "<", ">", "(", "host", ",", "port", ",", "(", "int", ")", "connectionTimeout", ".", "toMilliseconds", "(", ")", ",", "(", "int", ")", "sendBufferSize", ".", "toBytes", "(", ")", ",", "socketFactory", "(", ")", ")", ";", "appender", ".", "setContext", "(", "context", ")", ";", "appender", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "appender", ".", "setImmediateFlush", "(", "immediateFlush", ")", ";", "final", "LayoutWrappingEncoder", "<", "E", ">", "layoutEncoder", "=", "new", "LayoutWrappingEncoder", "<", ">", "(", ")", ";", "layoutEncoder", ".", "setLayout", "(", "buildLayout", "(", "context", ",", "layoutFactory", ")", ")", ";", "appender", ".", "setEncoder", "(", "layoutEncoder", ")", ";", "appender", ".", "addFilter", "(", "levelFilterFactory", ".", "build", "(", "threshold", ")", ")", ";", "getFilterFactories", "(", ")", ".", "forEach", "(", "f", "-", ">", "appender", ".", "addFilter", "(", "f", ".", "build", "(", ")", ")", ")", ";", "appender", ".", "start", "(", ")", ";", "return", "wrapAsync", "(", "appender", ",", "asyncAppenderFactory", ")", ";", "}", "</s>"]
["<s>", "protected", "SocketFactory", "socketFactory", "(", ")", "{", "return", "SocketFactory", ".", "getDefault", "(", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getHost", "(", ")", "{", "return", "host", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setHost", "(", "String", "host", ")", "{", "this", ".", "host", "=", "host", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getPort", "(", ")", "{", "return", "port", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setPort", "(", "int", "port", ")", "{", "this", ".", "port", "=", "port", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Appender", "<", "E", ">", "build", "(", "LoggerContext", "context", ",", "String", "applicationName", ",", "LayoutFactory", "<", "E", ">", "layoutFactory", ",", "LevelFilterFactory", "<", "E", ">", "levelFilterFactory", ",", "AsyncAppenderFactory", "<", "E", ">", "asyncAppenderFactory", ")", "{", "final", "DropwizardUdpSocketAppender", "<", "E", ">", "appender", "=", "new", "DropwizardUdpSocketAppender", "<", ">", "(", "host", ",", "port", ")", ";", "appender", ".", "setContext", "(", "context", ")", ";", "appender", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "LayoutWrappingEncoder", "<", "E", ">", "layoutEncoder", "=", "new", "LayoutWrappingEncoder", "<", ">", "(", ")", ";", "layoutEncoder", ".", "setLayout", "(", "buildLayout", "(", "context", ",", "layoutFactory", ")", ")", ";", "appender", ".", "setEncoder", "(", "layoutEncoder", ")", ";", "appender", ".", "addFilter", "(", "levelFilterFactory", ".", "build", "(", "threshold", ")", ")", ";", "getFilterFactories", "(", ")", ".", "forEach", "(", "f", "-", ">", "appender", ".", "addFilter", "(", "f", ".", "build", "(", ")", ")", ")", ";", "appender", ".", "start", "(", ")", ";", "return", "wrapAsync", "(", "appender", ",", "asyncAppenderFactory", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardLayout", "(", "LoggerContext", "context", ",", "TimeZone", "timeZone", ")", "{", "super", "(", ")", ";", "setOutputPatternAsHeader", "(", "false", ")", ";", "getDefaultConverterMap", "(", ")", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "PrefixedThrowableProxyConverter", ".", "class", ".", "getName", "(", ")", ")", ";", "getDefaultConverterMap", "(", ")", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "PrefixedExtendedThrowableProxyConverter", ".", "class", ".", "getName", "(", ")", ")", ";", "getDefaultConverterMap", "(", ")", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "PrefixedRootCauseFirstThrowableProxyConverter", ".", "class", ".", "getName", "(", ")", ")", ";", "setPattern", "(", "\"", "<STR_LIT>", "\"", "+", "timeZone", ".", "getID", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "setContext", "(", "context", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "JsonProperty", "public", "String", "getLogFormat", "(", ")", "{", "return", "logFormat", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "JsonProperty", "public", "void", "setLogFormat", "(", "String", "logFormat", ")", "{", "this", ".", "logFormat", "=", "logFormat", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getHost", "(", ")", "{", "return", "host", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setHost", "(", "String", "host", ")", "{", "this", ".", "host", "=", "host", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Facility", "getFacility", "(", ")", "{", "return", "facility", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setFacility", "(", "Facility", "facility", ")", "{", "this", ".", "facility", "=", "facility", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getPort", "(", ")", "{", "return", "port", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setPort", "(", "int", "port", ")", "{", "this", ".", "port", "=", "port", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getIncludeStackTrace", "(", ")", "{", "return", "includeStackTrace", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setIncludeStackTrace", "(", "boolean", "includeStackTrace", ")", "{", "this", ".", "includeStackTrace", "=", "includeStackTrace", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getStackTracePrefix", "(", ")", "{", "return", "stackTracePrefix", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setStackTracePrefix", "(", "String", "stackTracePrefix", ")", "{", "this", ".", "stackTracePrefix", "=", "stackTracePrefix", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Appender", "<", "ILoggingEvent", ">", "build", "(", "LoggerContext", "context", ",", "String", "applicationName", ",", "LayoutFactory", "<", "ILoggingEvent", ">", "layoutFactory", ",", "LevelFilterFactory", "<", "ILoggingEvent", ">", "levelFilterFactory", ",", "AsyncAppenderFactory", "<", "ILoggingEvent", ">", "asyncAppenderFactory", ")", "{", "final", "SyslogAppender", "appender", "=", "new", "SyslogAppender", "(", ")", ";", "appender", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "appender", ".", "setContext", "(", "context", ")", ";", "appender", ".", "setSuffixPattern", "(", "logFormat", ".", "replaceAll", "(", "LOG_TOKEN_PID", ",", "pid", ")", ".", "replaceAll", "(", "LOG_TOKEN_NAME", ",", "Matcher", ".", "quoteReplacement", "(", "applicationName", ")", ")", ")", ";", "appender", ".", "setSyslogHost", "(", "host", ")", ";", "appender", ".", "setPort", "(", "port", ")", ";", "appender", ".", "setFacility", "(", "facility", ".", "toString", "(", ")", ".", "toLowerCase", "(", "Locale", ".", "ENGLISH", ")", ")", ";", "appender", ".", "setThrowableExcluded", "(", "!", "includeStackTrace", ")", ";", "appender", ".", "setStackTracePattern", "(", "stackTracePrefix", ")", ";", "appender", ".", "addFilter", "(", "levelFilterFactory", ".", "build", "(", "threshold", ")", ")", ";", "getFilterFactories", "(", ")", ".", "forEach", "(", "f", "-", ">", "appender", ".", "addFilter", "(", "f", ".", "build", "(", ")", ")", ")", ";", "appender", ".", "start", "(", ")", ";", "return", "wrapAsync", "(", "appender", ",", "asyncAppenderFactory", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isAdditive", "(", ")", "{", "return", "additive", ";", "}", "</s>"]
["<s>", "public", "void", "setAdditive", "(", "boolean", "additive", ")", "{", "this", ".", "additive", "=", "additive", ";", "}", "</s>"]
["<s>", "public", "String", "getLevel", "(", ")", "{", "return", "level", ";", "}", "</s>"]
["<s>", "public", "void", "setLevel", "(", "String", "level", ")", "{", "this", ".", "level", "=", "level", ";", "}", "</s>"]
["<s>", "public", "ImmutableList", "<", "AppenderFactory", "<", "ILoggingEvent", ">", ">", "getAppenders", "(", ")", "{", "return", "appenders", ";", "}", "</s>"]
["<s>", "public", "void", "setAppenders", "(", "List", "<", "AppenderFactory", "<", "ILoggingEvent", ">", ">", "appenders", ")", "{", "this", ".", "appenders", "=", "ImmutableList", ".", "copyOf", "(", "appenders", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "throwableProxyToString", "(", "IThrowableProxy", "tp", ")", "{", "return", "PATTERN", ".", "matcher", "(", "super", ".", "throwableProxyToString", "(", "tp", ")", ")", ".", "replaceAll", "(", "PREFIX", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getCurrentLogFilename", "(", ")", "{", "return", "currentLogFilename", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setCurrentLogFilename", "(", "@", "Nullable", "String", "currentLogFilename", ")", "{", "this", ".", "currentLogFilename", "=", "currentLogFilename", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isArchive", "(", ")", "{", "return", "archive", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setArchive", "(", "boolean", "archive", ")", "{", "this", ".", "archive", "=", "archive", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getArchivedLogFilenamePattern", "(", ")", "{", "return", "archivedLogFilenamePattern", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setArchivedLogFilenamePattern", "(", "String", "archivedLogFilenamePattern", ")", "{", "this", ".", "archivedLogFilenamePattern", "=", "archivedLogFilenamePattern", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getArchivedFileCount", "(", ")", "{", "return", "archivedFileCount", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setArchivedFileCount", "(", "int", "archivedFileCount", ")", "{", "this", ".", "archivedFileCount", "=", "archivedFileCount", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Size", "getMaxFileSize", "(", ")", "{", "return", "maxFileSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxFileSize", "(", "Size", "maxFileSize", ")", "{", "this", ".", "maxFileSize", "=", "maxFileSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Size", "getBufferSize", "(", ")", "{", "return", "bufferSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setBufferSize", "(", "Size", "bufferSize", ")", "{", "this", ".", "bufferSize", "=", "bufferSize", ";", "}", "</s>"]
["<s>", "public", "boolean", "isImmediateFlush", "(", ")", "{", "return", "immediateFlush", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setImmediateFlush", "(", "boolean", "immediateFlush", ")", "{", "this", ".", "immediateFlush", "=", "immediateFlush", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isValidArchiveConfiguration", "(", ")", "{", "return", "!", "archive", "|", "|", "(", "archivedLogFilenamePattern", "!", "=", "null", ")", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isValidForMaxFileSizeSetting", "(", ")", "{", "return", "!", "archive", "|", "|", "maxFileSize", "=", "=", "null", "|", "|", "(", "archivedLogFilenamePattern", "!", "=", "null", "&", "&", "archivedLogFilenamePattern", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isMaxFileSizeSettingSpecified", "(", ")", "{", "return", "!", "archive", "|", "|", "!", "(", "archivedLogFilenamePattern", "!", "=", "null", "&", "&", "archivedLogFilenamePattern", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "|", "|", "maxFileSize", "!", "=", "null", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isValidFileConfiguration", "(", ")", "{", "return", "archive", "|", "|", "currentLogFilename", "!", "=", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Appender", "<", "E", ">", "build", "(", "LoggerContext", "context", ",", "String", "applicationName", ",", "LayoutFactory", "<", "E", ">", "layoutFactory", ",", "LevelFilterFactory", "<", "E", ">", "levelFilterFactory", ",", "AsyncAppenderFactory", "<", "E", ">", "asyncAppenderFactory", ")", "{", "final", "FileAppender", "<", "E", ">", "appender", "=", "buildAppender", "(", "context", ")", ";", "appender", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "appender", ".", "setAppend", "(", "true", ")", ";", "appender", ".", "setContext", "(", "context", ")", ";", "final", "LayoutWrappingEncoder", "<", "E", ">", "layoutEncoder", "=", "new", "LayoutWrappingEncoder", "<", ">", "(", ")", ";", "layoutEncoder", ".", "setLayout", "(", "buildLayout", "(", "context", ",", "layoutFactory", ")", ")", ";", "appender", ".", "setEncoder", "(", "layoutEncoder", ")", ";", "appender", ".", "setImmediateFlush", "(", "immediateFlush", ")", ";", "appender", ".", "setPrudent", "(", "false", ")", ";", "appender", ".", "addFilter", "(", "levelFilterFactory", ".", "build", "(", "threshold", ")", ")", ";", "getFilterFactories", "(", ")", ".", "forEach", "(", "f", "-", ">", "appender", ".", "addFilter", "(", "f", ".", "build", "(", ")", ")", ")", ";", "appender", ".", "start", "(", ")", ";", "return", "wrapAsync", "(", "appender", ",", "asyncAppenderFactory", ")", ";", "}", "</s>"]
["<s>", "protected", "FileAppender", "<", "E", ">", "buildAppender", "(", "LoggerContext", "context", ")", "{", "if", "(", "archive", ")", "{", "final", "RollingFileAppender", "<", "E", ">", "appender", "=", "new", "RollingFileAppender", "<", ">", "(", ")", ";", "appender", ".", "setContext", "(", "context", ")", ";", "appender", ".", "setFile", "(", "currentLogFilename", ")", ";", "appender", ".", "setBufferSize", "(", "new", "FileSize", "(", "bufferSize", ".", "toBytes", "(", ")", ")", ")", ";", "if", "(", "maxFileSize", "!", "=", "null", "&", "&", "!", "requireNonNull", "(", "archivedLogFilenamePattern", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "final", "FixedWindowRollingPolicy", "rollingPolicy", "=", "new", "FixedWindowRollingPolicy", "(", ")", ";", "rollingPolicy", ".", "setContext", "(", "context", ")", ";", "rollingPolicy", ".", "setMaxIndex", "(", "getArchivedFileCount", "(", ")", ")", ";", "rollingPolicy", ".", "setFileNamePattern", "(", "getArchivedLogFilenamePattern", "(", ")", ")", ";", "rollingPolicy", ".", "setParent", "(", "appender", ")", ";", "rollingPolicy", ".", "start", "(", ")", ";", "appender", ".", "setRollingPolicy", "(", "rollingPolicy", ")", ";", "final", "SizeBasedTriggeringPolicy", "<", "E", ">", "triggeringPolicy", "=", "new", "SizeBasedTriggeringPolicy", "<", ">", "(", ")", ";", "triggeringPolicy", ".", "setMaxFileSize", "(", "new", "FileSize", "(", "maxFileSize", ".", "toBytes", "(", ")", ")", ")", ";", "triggeringPolicy", ".", "setContext", "(", "context", ")", ";", "triggeringPolicy", ".", "start", "(", ")", ";", "appender", ".", "setTriggeringPolicy", "(", "triggeringPolicy", ")", ";", "return", "appender", ";", "}", "else", "{", "final", "TimeBasedRollingPolicy", "<", "E", ">", "rollingPolicy", ";", "if", "(", "maxFileSize", "=", "=", "null", ")", "{", "rollingPolicy", "=", "new", "TimeBasedRollingPolicy", "<", ">", "(", ")", ";", "final", "TimeBasedFileNamingAndTriggeringPolicy", "<", "E", ">", "triggeringPolicy", "=", "new", "DefaultTimeBasedFileNamingAndTriggeringPolicy", "<", ">", "(", ")", ";", "triggeringPolicy", ".", "setContext", "(", "context", ")", ";", "triggeringPolicy", ".", "setTimeBasedRollingPolicy", "(", "rollingPolicy", ")", ";", "appender", ".", "setTriggeringPolicy", "(", "triggeringPolicy", ")", ";", "}", "else", "{", "final", "SizeAndTimeBasedRollingPolicy", "<", "E", ">", "sizeAndTimeBasedRollingPolicy", "=", "new", "SizeAndTimeBasedRollingPolicy", "<", ">", "(", ")", ";", "sizeAndTimeBasedRollingPolicy", ".", "setMaxFileSize", "(", "new", "FileSize", "(", "maxFileSize", ".", "toBytes", "(", ")", ")", ")", ";", "rollingPolicy", "=", "sizeAndTimeBasedRollingPolicy", ";", "}", "rollingPolicy", ".", "setContext", "(", "context", ")", ";", "rollingPolicy", ".", "setFileNamePattern", "(", "archivedLogFilenamePattern", ")", ";", "rollingPolicy", ".", "setMaxHistory", "(", "archivedFileCount", ")", ";", "appender", ".", "setRollingPolicy", "(", "rollingPolicy", ")", ";", "rollingPolicy", ".", "setParent", "(", "appender", ")", ";", "rollingPolicy", ".", "start", "(", ")", ";", "return", "appender", ";", "}", "}", "final", "FileAppender", "<", "E", ">", "appender", "=", "new", "FileAppender", "<", ">", "(", ")", ";", "appender", ".", "setContext", "(", "context", ")", ";", "appender", ".", "setFile", "(", "currentLogFilename", ")", ";", "appender", ".", "setBufferSize", "(", "new", "FileSize", "(", "bufferSize", ".", "toBytes", "(", ")", ")", ")", ";", "return", "appender", ";", "}", "</s>"]
["<s>", "PatternLayoutBase", "<", "E", ">", "build", "(", "LoggerContext", "context", ",", "TimeZone", "timeZone", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "PatternLayoutBase", "<", "ILoggingEvent", ">", "build", "(", "LoggerContext", "context", ",", "TimeZone", "timeZone", ")", "{", "return", "new", "DropwizardLayout", "(", "context", ",", "timeZone", ")", ";", "}", "</s>"]
["<s>", "LayoutBase", "<", "E", ">", "build", "(", "LoggerContext", "context", ",", "TimeZone", "timeZone", ")", ";", "</s>"]
["<s>", "AsyncAppenderBase", "<", "E", ">", "build", "(", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "AsyncAppenderBase", "<", "ILoggingEvent", ">", "build", "(", ")", "{", "return", "new", "AsyncAppender", "(", ")", ";", "}", "</s>"]
["<s>", "Filter", "<", "E", ">", "build", "(", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "Filter", "<", "ILoggingEvent", ">", "build", "(", "Level", "threshold", ")", "{", "final", "ThresholdFilter", "filter", "=", "new", "ThresholdFilter", "(", ")", ";", "filter", ".", "setLevel", "(", "threshold", ".", "toString", "(", ")", ")", ";", "filter", ".", "start", "(", ")", ";", "return", "filter", ";", "}", "</s>"]
["<s>", "Filter", "<", "E", ">", "build", "(", "Level", "threshold", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "Filter", "<", "E", ">", "build", "(", "Level", "threshold", ")", "{", "return", "new", "Filter", "<", "E", ">", "(", ")", "{", "@", "Override", "public", "FilterReply", "decide", "(", "E", "event", ")", "{", "return", "FilterReply", ".", "NEUTRAL", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "FilterReply", "decide", "(", "E", "event", ")", "{", "return", "FilterReply", ".", "NEUTRAL", ";", "}", "</s>"]
["<s>", "public", "DropwizardUdpSocketAppender", "(", "String", "host", ",", "int", "port", ")", "{", "this", ".", "host", "=", "host", ";", "this", ".", "port", "=", "port", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "start", "(", ")", "{", "setOutputStream", "(", "datagramSocketOutputStream", "(", "host", ",", "port", ")", ")", ";", "super", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "OutputStream", "datagramSocketOutputStream", "(", "String", "host", ",", "int", "port", ")", "{", "final", "DatagramSocket", "datagramSocket", ";", "try", "{", "datagramSocket", "=", "new", "DatagramSocket", "(", ")", ";", "}", "catch", "(", "SocketException", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "return", "new", "OutputStream", "(", ")", "{", "@", "Override", "public", "void", "write", "(", "int", "b", ")", "throws", "IOException", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "@", "Override", "public", "void", "write", "(", "byte", "[", "]", "b", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "datagramSocket", ".", "send", "(", "new", "DatagramPacket", "(", "b", ",", "off", ",", "len", ",", "InetAddress", ".", "getByName", "(", "host", ")", ",", "port", ")", ")", ";", "}", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "datagramSocket", ".", "close", "(", ")", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "write", "(", "int", "b", ")", "throws", "IOException", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "write", "(", "byte", "[", "]", "b", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "datagramSocket", ".", "send", "(", "new", "DatagramPacket", "(", "b", ",", "off", ",", "len", ",", "InetAddress", ".", "getByName", "(", "host", ")", ",", "port", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "datagramSocket", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardSocketAppender", "(", "String", "host", ",", "int", "port", ",", "int", "connectionTimeoutMs", ",", "int", "sendBufferSize", ",", "SocketFactory", "socketFactory", ")", "{", "this", ".", "host", "=", "host", ";", "this", ".", "port", "=", "port", ";", "this", ".", "connectionTimeoutMs", "=", "connectionTimeoutMs", ";", "this", ".", "sendBufferSize", "=", "sendBufferSize", ";", "this", ".", "socketFactory", "=", "socketFactory", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "start", "(", ")", "{", "setOutputStream", "(", "socketOutputStream", "(", ")", ")", ";", "super", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "OutputStream", "socketOutputStream", "(", ")", "{", "final", "ResilentSocketOutputStream", "outputStream", "=", "new", "ResilentSocketOutputStream", "(", "host", ",", "port", ",", "connectionTimeoutMs", ",", "sendBufferSize", ",", "socketFactory", ")", ";", "outputStream", ".", "setContext", "(", "context", ")", ";", "return", "outputStream", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canBeDeserialized", "(", ")", "throws", "Exception", "{", "RequestLogFactory", "externalRequestLogFactory", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "RequestLogFactory", ".", "class", ",", "BaseValidator", ".", "newValidator", "(", ")", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "assertThat", "(", "externalRequestLogFactory", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "externalRequestLogFactory", ")", ".", "isInstanceOf", "(", "ExternalRequestLogFactory", ".", "class", ")", ";", "assertThat", "(", "externalRequestLogFactory", ".", "isEnabled", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "ExternalRequestLogFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "channelState", ".", "isInitial", "(", ")", ")", ".", "thenReturn", "(", "true", ")", ";", "when", "(", "request", ".", "getRemoteAddr", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "request", ".", "getTimeStamp", "(", ")", ")", ".", "thenReturn", "(", "TimeUnit", ".", "SECONDS", ".", "toMillis", "(", "<NUM_LIT>", ")", ")", ";", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "when", "(", "request", ".", "getRequestURI", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "request", ".", "getProtocol", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "request", ".", "getHttpChannelState", "(", ")", ")", ".", "thenReturn", "(", "channelState", ")", ";", "when", "(", "response", ".", "getStatus", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "when", "(", "response", ".", "getContentCount", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "requestLog", ".", "addAppender", "(", "appender", ")", ";", "requestLog", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "requestLog", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "logsRequestsToTheAppender", "(", ")", "{", "final", "IAccessEvent", "event", "=", "logAndCapture", "(", ")", ";", "assertThat", "(", "event", ".", "getRemoteAddr", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "event", ".", "getMethod", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "assertThat", "(", "event", ".", "getRequestURI", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "event", ".", "getProtocol", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "event", ".", "getStatusCode", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "event", ".", "getContentLength", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "private", "IAccessEvent", "logAndCapture", "(", ")", "{", "requestLog", ".", "log", "(", "request", ",", "response", ")", ";", "final", "ArgumentCaptor", "<", "IAccessEvent", ">", "captor", "=", "ArgumentCaptor", ".", "forClass", "(", "IAccessEvent", ".", "class", ")", ";", "verify", "(", "appender", ",", "timeout", "(", "<NUM_LIT:1000>", ")", ")", ".", "doAppend", "(", "captor", ".", "capture", "(", ")", ")", ";", "return", "captor", ".", "getValue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "final", "ObjectMapper", "objectMapper", "=", "Jackson", ".", "newObjectMapper", "(", ")", ";", "objectMapper", ".", "getSubtypeResolver", "(", ")", ".", "registerSubtypes", "(", "ConsoleAppenderFactory", ".", "class", ",", "FileAppenderFactory", ".", "class", ",", "SyslogAppenderFactory", ".", "class", ")", ";", "this", ".", "logbackAccessRequestLogFactory", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "LogbackAccessRequestLogFactory", ".", "class", ",", "BaseValidator", ".", "newValidator", "(", ")", ",", "objectMapper", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "fileAppenderFactoryIsSet", "(", ")", "{", "assertThat", "(", "logbackAccessRequestLogFactory", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "logbackAccessRequestLogFactory", ".", "getAppenders", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "logbackAccessRequestLogFactory", ".", "getAppenders", "(", ")", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "assertThat", "(", "logbackAccessRequestLogFactory", ".", "getAppenders", "(", ")", ".", "get", "(", "0", ")", ")", ".", "isInstanceOf", "(", "FileAppenderFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "LogbackAccessRequestLogFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "accessEvent", "=", "new", "AccessEvent", "(", "httpServletRequest", ",", "Mockito", ".", "mock", "(", "HttpServletResponse", ".", "class", ")", ",", "Mockito", ".", "mock", "(", "ServerAdapter", ".", "class", ")", ")", ";", "safeRequestParameterConverter", ".", "setOptionList", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "safeRequestParameterConverter", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "safeRequestParameterConverter", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testConvertOneParameter", "(", ")", "throws", "Exception", "{", "Mockito", ".", "when", "(", "httpServletRequest", ".", "getParameterValues", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", "}", ")", ";", "final", "Vector", "<", "String", ">", "parameterNames", "=", "new", "Vector", "<", ">", "(", ")", ";", "parameterNames", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Mockito", ".", "when", "(", "httpServletRequest", ".", "getParameterNames", "(", ")", ")", ".", "thenReturn", "(", "parameterNames", ".", "elements", "(", ")", ")", ";", "accessEvent", ".", "buildRequestParameterMap", "(", ")", ";", "Mockito", ".", "reset", "(", "httpServletRequest", ")", ";", "String", "value", "=", "safeRequestParameterConverter", ".", "convert", "(", "accessEvent", ")", ";", "assertThat", "(", "value", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testConvertSeveralParameters", "(", ")", "throws", "Exception", "{", "Mockito", ".", "when", "(", "httpServletRequest", ".", "getParameterValues", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ";", "final", "Vector", "<", "String", ">", "parameterNames", "=", "new", "Vector", "<", ">", "(", ")", ";", "parameterNames", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Mockito", ".", "when", "(", "httpServletRequest", ".", "getParameterNames", "(", ")", ")", ".", "thenReturn", "(", "parameterNames", ".", "elements", "(", ")", ")", ";", "accessEvent", ".", "buildRequestParameterMap", "(", ")", ";", "Mockito", ".", "reset", "(", "httpServletRequest", ")", ";", "final", "String", "value", "=", "safeRequestParameterConverter", ".", "convert", "(", "accessEvent", ")", ";", "assertThat", "(", "value", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetUnknownParameter", "(", ")", "{", "final", "String", "value", "=", "safeRequestParameterConverter", ".", "convert", "(", "accessEvent", ")", ";", "assertThat", "(", "value", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:->", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "outputPatternAsHeaderIsFalse", "(", ")", "{", "assertThat", "(", "layout", ".", "isOutputPatternAsHeader", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAContext", "(", ")", "throws", "Exception", "{", "assertThat", "(", "layout", ".", "getContext", "(", ")", ")", ".", "isEqualTo", "(", "context", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAPatternWithATimeZone", "(", ")", "throws", "Exception", "{", "assertThat", "(", "layout", ".", "getPattern", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "final", "ObjectMapper", "objectMapper", "=", "Jackson", ".", "newObjectMapper", "(", ")", ";", "objectMapper", ".", "getSubtypeResolver", "(", ")", ".", "registerSubtypes", "(", "ConsoleAppenderFactory", ".", "class", ",", "FileAppenderFactory", ".", "class", ",", "SyslogAppenderFactory", ".", "class", ")", ";", "this", ".", "requestLog", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "RequestLogFactory", ".", "class", ",", "BaseValidator", ".", "newValidator", "(", ")", ",", "objectMapper", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDeserialized", "(", ")", "{", "LogbackClassicRequestLogFactory", "classicRequestLogFactory", "=", "(", "LogbackClassicRequestLogFactory", ")", "requestLog", ";", "assertThat", "(", "classicRequestLogFactory", ".", "getTimeZone", "(", ")", ")", ".", "isEqualTo", "(", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "classicRequestLogFactory", ".", "getAppenders", "(", ")", ")", ".", "hasSize", "(", "<NUM_LIT:3>", ")", ".", "extractingResultOf", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "ConsoleAppenderFactory", ".", "class", ",", "FileAppenderFactory", ".", "class", ",", "SyslogAppenderFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testBuild", "(", ")", "{", "final", "RequestLog", "requestLog", "=", "this", ".", "requestLog", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "requestLog", ")", ".", "isInstanceOf", "(", "DropwizardSlf4jRequestLog", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "LogbackClassicRequestLogFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "channelState", ".", "isInitial", "(", ")", ")", ".", "thenReturn", "(", "true", ")", ";", "when", "(", "request", ".", "getRemoteAddr", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "request", ".", "getTimeStamp", "(", ")", ")", ".", "thenReturn", "(", "TimeUnit", ".", "SECONDS", ".", "toMillis", "(", "<NUM_LIT>", ")", ")", ";", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "when", "(", "request", ".", "getHttpURI", "(", ")", ")", ".", "thenReturn", "(", "new", "HttpURI", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "when", "(", "request", ".", "getProtocol", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "request", ".", "getHttpChannelState", "(", ")", ")", ".", "thenReturn", "(", "channelState", ")", ";", "when", "(", "request", ".", "getTimeStamp", "(", ")", ")", ".", "thenReturn", "(", "TimeUnit", ".", "SECONDS", ".", "toMillis", "(", "<NUM_LIT>", ")", ")", ";", "when", "(", "response", ".", "getCommittedMetaData", "(", ")", ".", "getStatus", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "when", "(", "response", ".", "getHttpChannel", "(", ")", ".", "getBytesWritten", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "appenders", ".", "addAppender", "(", "appender", ")", ";", "slf4jRequestLog", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "slf4jRequestLog", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "logsRequestsToTheAppenders", "(", ")", "throws", "Exception", "{", "final", "ILoggingEvent", "event", "=", "logAndCapture", "(", ")", ";", "assertThat", "(", "event", ".", "getFormattedMessage", "(", ")", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "event", ".", "getLevel", "(", ")", ")", ".", "isEqualTo", "(", "Level", ".", "INFO", ")", ";", "}", "</s>"]
["<s>", "private", "ILoggingEvent", "logAndCapture", "(", ")", "{", "slf4jRequestLog", ".", "log", "(", "request", ",", "response", ")", ";", "final", "ArgumentCaptor", "<", "ILoggingEvent", ">", "captor", "=", "ArgumentCaptor", ".", "forClass", "(", "ILoggingEvent", ".", "class", ")", ";", "verify", "(", "appender", ",", "timeout", "(", "<NUM_LIT:1000>", ")", ")", ".", "doAppend", "(", "captor", ".", "capture", "(", ")", ")", ";", "return", "captor", ".", "getValue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setEnabled", "(", "boolean", "enabled", ")", "{", "this", ".", "enabled", "=", "enabled", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "JsonProperty", "public", "boolean", "isEnabled", "(", ")", "{", "return", "enabled", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "RequestLog", "build", "(", "String", "name", ")", "{", "return", "new", "Slf4jRequestLog", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", ")", "{", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "ImmutableList", "<", "AppenderFactory", "<", "IAccessEvent", ">", ">", "getAppenders", "(", ")", "{", "return", "appenders", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAppenders", "(", "ImmutableList", "<", "AppenderFactory", "<", "IAccessEvent", ">", ">", "appenders", ")", "{", "this", ".", "appenders", "=", "appenders", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "@", "Override", "public", "boolean", "isEnabled", "(", ")", "{", "return", "!", "appenders", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "RequestLog", "build", "(", "String", "name", ")", "{", "final", "Logger", "logger", "=", "(", "Logger", ")", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ";", "logger", ".", "setAdditive", "(", "false", ")", ";", "final", "LoggerContext", "context", "=", "logger", ".", "getLoggerContext", "(", ")", ";", "final", "LogbackAccessRequestLog", "requestLog", "=", "new", "LogbackAccessRequestLog", "(", ")", ";", "final", "LevelFilterFactory", "<", "IAccessEvent", ">", "levelFilterFactory", "=", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ";", "final", "AsyncAppenderFactory", "<", "IAccessEvent", ">", "asyncAppenderFactory", "=", "new", "AsyncAccessEventAppenderFactory", "(", ")", ";", "final", "LayoutFactory", "<", "IAccessEvent", ">", "layoutFactory", "=", "new", "LogbackAccessRequestLayoutFactory", "(", ")", ";", "for", "(", "AppenderFactory", "<", "IAccessEvent", ">", "output", ":", "appenders", ")", "{", "requestLog", ".", "addAppender", "(", "output", ".", "build", "(", "context", ",", "name", ",", "layoutFactory", ",", "levelFilterFactory", ",", "asyncAppenderFactory", ")", ")", ";", "}", "return", "requestLog", ";", "}", "</s>"]
["<s>", "boolean", "isEnabled", "(", ")", ";", "</s>"]
["<s>", "T", "build", "(", "String", "name", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "PatternLayoutBase", "<", "IAccessEvent", ">", "build", "(", "LoggerContext", "context", ",", "TimeZone", "timeZone", ")", "{", "return", "new", "LogbackAccessRequestLayout", "(", "context", ",", "timeZone", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "start", "(", ")", "{", "key", "=", "getFirstOption", "(", ")", ";", "if", "(", "OptionHelper", ".", "isEmpty", "(", "key", ")", ")", "{", "addWarn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "super", ".", "start", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "convert", "(", "IAccessEvent", "accessEvent", ")", "{", "if", "(", "!", "isStarted", "(", ")", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "final", "String", "[", "]", "paramArray", "=", "accessEvent", ".", "getRequestParameterMap", "(", ")", ".", "get", "(", "key", ")", ";", "if", "(", "paramArray", "=", "=", "null", "|", "|", "paramArray", ".", "length", "=", "=", "0", ")", "{", "return", "\"", "<STR_LIT:->", "\"", ";", "}", "else", "if", "(", "paramArray", ".", "length", "=", "=", "1", ")", "{", "return", "paramArray", "[", "0", "]", ";", "}", "else", "{", "return", "Arrays", ".", "toString", "(", "paramArray", ")", ";", "}", "}", "</s>"]
["<s>", "public", "LogbackAccessRequestLayout", "(", "Context", "context", ",", "TimeZone", "timeZone", ")", "{", "setOutputPatternAsHeader", "(", "false", ")", ";", "setPattern", "(", "\"", "<STR_LIT>", "\"", "+", "timeZone", ".", "getID", "(", ")", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "setContext", "(", "context", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncAppenderBase", "<", "IAccessEvent", ">", "build", "(", ")", "{", "return", "new", "AsyncAppenderBase", "<", "IAccessEvent", ">", "(", ")", "{", "@", "Override", "protected", "void", "preprocess", "(", "IAccessEvent", "event", ")", "{", "event", ".", "prepareForDeferredProcessing", "(", ")", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "preprocess", "(", "IAccessEvent", "event", ")", "{", "event", ".", "prepareForDeferredProcessing", "(", ")", ";", "}", "</s>"]
["<s>", "DropwizardSlf4jRequestLog", "(", "AppenderAttachableImpl", "<", "ILoggingEvent", ">", "appenders", ",", "TimeZone", "timeZone", ")", "{", "this", ".", "appenders", "=", "appenders", ";", "setLogLatency", "(", "true", ")", ";", "setLogTimeZone", "(", "timeZone", ")", ";", "setExtended", "(", "true", ")", ";", "setPreferProxiedForAddress", "(", "true", ")", ";", "try", "{", "start", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "boolean", "isEnabled", "(", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "write", "(", "String", "entry", ")", "throws", "IOException", "{", "final", "LoggingEvent", "event", "=", "new", "LoggingEvent", "(", ")", ";", "event", ".", "setLevel", "(", "Level", ".", "INFO", ")", ";", "event", ".", "setLoggerName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "event", ".", "setMessage", "(", "entry", ")", ";", "event", ".", "setTimeStamp", "(", "System", ".", "currentTimeMillis", "(", ")", ")", ";", "appenders", ".", "appendLoopOnAppenders", "(", "event", ")", ";", "}", "</s>"]
["<s>", "void", "setLogTimeZone", "(", "TimeZone", "tz", ")", "{", "setLogTimeZone", "(", "tz", ".", "getID", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "doStop", "(", ")", "throws", "Exception", "{", "appenders", ".", "detachAndStopAllAppenders", "(", ")", ";", "super", ".", "doStop", "(", ")", ";", "}", "</s>"]
["<s>", "private", "RequestLogLayout", "(", "Context", "context", ")", "{", "super", "(", ")", ";", "setContext", "(", "context", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "doLayout", "(", "ILoggingEvent", "event", ")", "{", "return", "event", ".", "getFormattedMessage", "(", ")", "+", "CoreConstants", ".", "LINE_SEPARATOR", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Map", "<", "String", ",", "String", ">", "getDefaultConverterMap", "(", ")", "{", "return", "ImmutableMap", ".", "of", "(", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "ImmutableList", "<", "AppenderFactory", "<", "ILoggingEvent", ">", ">", "getAppenders", "(", ")", "{", "return", "appenders", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAppenders", "(", "ImmutableList", "<", "AppenderFactory", "<", "ILoggingEvent", ">", ">", "appenders", ")", "{", "this", ".", "appenders", "=", "appenders", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "TimeZone", "getTimeZone", "(", ")", "{", "return", "timeZone", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTimeZone", "(", "TimeZone", "timeZone", ")", "{", "this", ".", "timeZone", "=", "timeZone", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "@", "Override", "public", "boolean", "isEnabled", "(", ")", "{", "return", "!", "appenders", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "RequestLog", "build", "(", "String", "name", ")", "{", "final", "Logger", "logger", "=", "(", "Logger", ")", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ";", "logger", ".", "setAdditive", "(", "false", ")", ";", "final", "LoggerContext", "context", "=", "logger", ".", "getLoggerContext", "(", ")", ";", "final", "LevelFilterFactory", "<", "ILoggingEvent", ">", "levelFilterFactory", "=", "new", "NullLevelFilterFactory", "<", ">", "(", ")", ";", "final", "AsyncAppenderFactory", "<", "ILoggingEvent", ">", "asyncAppenderFactory", "=", "new", "AsyncLoggingEventAppenderFactory", "(", ")", ";", "final", "LayoutFactory", "<", "ILoggingEvent", ">", "layoutFactory", "=", "(", "c", ",", "tz", ")", "-", ">", "new", "RequestLogLayout", "(", "c", ")", ";", "final", "AppenderAttachableImpl", "<", "ILoggingEvent", ">", "attachable", "=", "new", "AppenderAttachableImpl", "<", ">", "(", ")", ";", "for", "(", "AppenderFactory", "<", "ILoggingEvent", ">", "appender", ":", "appenders", ")", "{", "attachable", ".", "addAppender", "(", "appender", ".", "build", "(", "context", ",", "name", ",", "layoutFactory", ",", "levelFilterFactory", ",", "asyncAppenderFactory", ")", ")", ";", "}", "return", "new", "DropwizardSlf4jRequestLog", "(", "attachable", ",", "timeZone", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "startsAndStopsAllHandlers", "(", ")", "throws", "Exception", "{", "handler1", ".", "setServer", "(", "mock", "(", "Server", ".", "class", ")", ")", ";", "handler2", ".", "setServer", "(", "mock", "(", "Server", ".", "class", ")", ")", ";", "handler", ".", "start", "(", ")", ";", "try", "{", "assertThat", "(", "handler1", ".", "isStarted", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "handler2", ".", "isStarted", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "finally", "{", "handler", ".", "stop", "(", ")", ";", "}", "assertThat", "(", "handler1", ".", "isStopped", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "handler2", ".", "isStopped", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "public", "void", "routesRequestsToTheConnectorSpecificHandler", "(", ")", "throws", "Exception", "{", "final", "HttpChannel", "channel", "=", "mock", "(", "HttpChannel", ".", "class", ")", ";", "when", "(", "channel", ".", "getConnector", "(", ")", ")", ".", "thenReturn", "(", "connector1", ")", ";", "final", "Request", "baseRequest", "=", "mock", "(", "Request", ".", "class", ")", ";", "when", "(", "baseRequest", ".", "getHttpChannel", "(", ")", ")", ".", "thenReturn", "(", "channel", ")", ";", "final", "HttpServletRequest", "request", "=", "mock", "(", "HttpServletRequest", ".", "class", ")", ";", "final", "HttpServletResponse", "response", "=", "mock", "(", "HttpServletResponse", ".", "class", ")", ";", "handler", ".", "handle", "(", "\"", "<STR_LIT>", "\"", ",", "baseRequest", ",", "request", ",", "response", ")", ";", "verify", "(", "handler1", ")", ".", "handle", "(", "\"", "<STR_LIT>", "\"", ",", "baseRequest", ",", "request", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "withSessionHandler", "(", ")", "throws", "Exception", "{", "final", "ContextHandler", "handler1", "=", "new", "ContextHandler", "(", ")", ";", "final", "ServletContextHandler", "handler2", "=", "new", "ServletContextHandler", "(", ")", ";", "final", "SessionHandler", "childHandler1", "=", "new", "SessionHandler", "(", ")", ";", "handler2", ".", "setSessionHandler", "(", "childHandler1", ")", ";", "final", "RoutingHandler", "handler", "=", "new", "RoutingHandler", "(", "ImmutableMap", ".", "of", "(", "connector1", ",", "handler1", ",", "connector2", ",", "handler2", ")", ")", ";", "new", "Server", "(", ")", ".", "setHandler", "(", "handler", ")", ";", "handler", ".", "start", "(", ")", ";", "try", "{", "assertThat", "(", "getSessionHandlers", "(", "handler", ")", ")", ".", "containsOnly", "(", "childHandler1", ")", ";", "}", "finally", "{", "handler", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "withoutSessionHandler", "(", ")", "throws", "Exception", "{", "new", "Server", "(", ")", ".", "setHandler", "(", "handler", ")", ";", "handler", ".", "start", "(", ")", ";", "try", "{", "assertThat", "(", "getSessionHandlers", "(", "handler", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "finally", "{", "handler", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "Set", "<", "SessionHandler", ">", "getSessionHandlers", "(", "final", "RoutingHandler", "routingHandler", ")", "{", "return", "Arrays", ".", "stream", "(", "routingHandler", ".", "getServer", "(", ")", ".", "getChildHandlersByClass", "(", "ContextHandler", ".", "class", ")", ")", ".", "map", "(", "handler", "-", ">", "(", "(", "ContextHandler", ")", "handler", ")", ".", "getChildHandlerByClass", "(", "SessionHandler", ".", "class", ")", ")", ".", "filter", "(", "Objects", ":", ":", "nonNull", ")", ".", "collect", "(", "Collectors", ".", "toSet", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "HttpsConnectorFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testParsingConfiguration", "(", ")", "throws", "Exception", "{", "HttpsConnectorFactory", "https", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "HttpsConnectorFactory", ".", "class", ",", "validator", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "assertThat", "(", "https", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "https", ".", "getKeyStorePath", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "https", ".", "getKeyStorePassword", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "https", ".", "getKeyStoreType", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "https", ".", "getTrustStorePath", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "https", ".", "getTrustStorePassword", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "https", ".", "getTrustStoreType", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "https", ".", "getTrustStoreProvider", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "https", ".", "getKeyManagerPassword", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "https", ".", "getNeedClientAuth", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "https", ".", "getWantClientAuth", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "https", ".", "getCertAlias", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "https", ".", "getCrlPath", "(", ")", ")", ".", "isEqualTo", "(", "new", "File", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "https", ".", "getEnableCRLDP", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "https", ".", "getEnableOCSP", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "https", ".", "getMaxCertPathLength", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:3>", ")", ";", "assertThat", "(", "https", ".", "getOcspResponderUrl", "(", ")", ")", ".", "isEqualTo", "(", "new", "URI", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "https", ".", "getJceProvider", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "https", ".", "getValidatePeers", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "https", ".", "getValidatePeers", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "https", ".", "getSupportedProtocols", "(", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "https", ".", "getExcludedProtocols", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "https", ".", "getSupportedCipherSuites", "(", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "https", ".", "getExcludedCipherSuites", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "https", ".", "getAllowRenegotiation", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "https", ".", "getEndpointIdentificationAlgorithm", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSupportedProtocols", "(", ")", "{", "List", "<", "String", ">", "supportedProtocols", "=", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "HttpsConnectorFactory", "factory", "=", "new", "HttpsConnectorFactory", "(", ")", ";", "factory", ".", "setKeyStorePassword", "(", "\"", "<STR_LIT>", "\"", ")", ";", "factory", ".", "setSupportedProtocols", "(", "supportedProtocols", ")", ";", "SslContextFactory", "sslContextFactory", "=", "factory", ".", "configureSslContextFactory", "(", "new", "SslContextFactory", "(", ")", ")", ";", "assertThat", "(", "ImmutableList", ".", "copyOf", "(", "sslContextFactory", ".", "getIncludeProtocols", "(", ")", ")", ")", ".", "isEqualTo", "(", "supportedProtocols", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testExcludedProtocols", "(", ")", "{", "List", "<", "String", ">", "excludedProtocols", "=", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "HttpsConnectorFactory", "factory", "=", "new", "HttpsConnectorFactory", "(", ")", ";", "factory", ".", "setKeyStorePassword", "(", "\"", "<STR_LIT>", "\"", ")", ";", "factory", ".", "setExcludedProtocols", "(", "excludedProtocols", ")", ";", "SslContextFactory", "sslContextFactory", "=", "factory", ".", "configureSslContextFactory", "(", "new", "SslContextFactory", "(", ")", ")", ";", "assertThat", "(", "ImmutableList", ".", "copyOf", "(", "sslContextFactory", ".", "getExcludeProtocols", "(", ")", ")", ")", ".", "isEqualTo", "(", "excludedProtocols", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "nonWindowsKeyStoreValidation", "(", ")", "throws", "Exception", "{", "HttpsConnectorFactory", "factory", "=", "new", "HttpsConnectorFactory", "(", ")", ";", "Collection", "<", "String", ">", "properties", "=", "getViolationProperties", "(", "validator", ".", "validate", "(", "factory", ")", ")", ";", "assertThat", "(", "properties", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "true", ")", ";", "assertThat", "(", "properties", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "windowsKeyStoreValidation", "(", ")", "throws", "Exception", "{", "HttpsConnectorFactory", "factory", "=", "new", "HttpsConnectorFactory", "(", ")", ";", "factory", ".", "setKeyStoreType", "(", "WINDOWS_MY_KEYSTORE_NAME", ")", ";", "Collection", "<", "String", ">", "properties", "=", "getViolationProperties", "(", "validator", ".", "validate", "(", "factory", ")", ")", ";", "assertThat", "(", "properties", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "false", ")", ";", "assertThat", "(", "properties", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canBuildContextFactoryWhenWindowsKeyStoreAvailable", "(", ")", "throws", "Exception", "{", "assumeTrue", "(", "canAccessWindowsKeyStore", "(", ")", ")", ";", "final", "HttpsConnectorFactory", "factory", "=", "new", "HttpsConnectorFactory", "(", ")", ";", "factory", ".", "setKeyStoreType", "(", "WINDOWS_MY_KEYSTORE_NAME", ")", ";", "assertNotNull", "(", "factory", ".", "configureSslContextFactory", "(", "new", "SslContextFactory", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalStateException", ".", "class", ")", "public", "void", "windowsKeyStoreUnavailableThrowsException", "(", ")", "throws", "Exception", "{", "assumeFalse", "(", "canAccessWindowsKeyStore", "(", ")", ")", ";", "final", "HttpsConnectorFactory", "factory", "=", "new", "HttpsConnectorFactory", "(", ")", ";", "factory", ".", "setKeyStoreType", "(", "WINDOWS_MY_KEYSTORE_NAME", ")", ";", "factory", ".", "configureSslContextFactory", "(", "new", "SslContextFactory", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testBuild", "(", ")", "throws", "Exception", "{", "final", "HttpsConnectorFactory", "https", "=", "new", "HttpsConnectorFactory", "(", ")", ";", "https", ".", "setBindHost", "(", "\"", "<STR_LIT:127.0.0.1>", "\"", ")", ";", "https", ".", "setPort", "(", "<NUM_LIT>", ")", ";", "https", ".", "setKeyStorePath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "https", ".", "setKeyStoreType", "(", "\"", "<STR_LIT>", "\"", ")", ";", "https", ".", "setKeyStorePassword", "(", "\"", "<STR_LIT>", "\"", ")", ";", "https", ".", "setKeyStoreProvider", "(", "\"", "<STR_LIT>", "\"", ")", ";", "https", ".", "setTrustStorePath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "https", ".", "setTrustStoreType", "(", "\"", "<STR_LIT>", "\"", ")", ";", "https", ".", "setTrustStorePassword", "(", "\"", "<STR_LIT>", "\"", ")", ";", "https", ".", "setTrustStoreProvider", "(", "\"", "<STR_LIT>", "\"", ")", ";", "https", ".", "setKeyManagerPassword", "(", "\"", "<STR_LIT>", "\"", ")", ";", "https", ".", "setNeedClientAuth", "(", "true", ")", ";", "https", ".", "setWantClientAuth", "(", "true", ")", ";", "https", ".", "setCertAlias", "(", "\"", "<STR_LIT>", "\"", ")", ";", "https", ".", "setCrlPath", "(", "new", "File", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "https", ".", "setEnableCRLDP", "(", "true", ")", ";", "https", ".", "setEnableOCSP", "(", "true", ")", ";", "https", ".", "setMaxCertPathLength", "(", "<NUM_LIT:4>", ")", ";", "https", ".", "setOcspResponderUrl", "(", "new", "URI", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "https", ".", "setJceProvider", "(", "\"", "<STR_LIT>", "\"", ")", ";", "https", ".", "setAllowRenegotiation", "(", "false", ")", ";", "https", ".", "setEndpointIdentificationAlgorithm", "(", "\"", "<STR_LIT>", "\"", ")", ";", "https", ".", "setValidateCerts", "(", "true", ")", ";", "https", ".", "setValidatePeers", "(", "true", ")", ";", "https", ".", "setSupportedProtocols", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "https", ".", "setSupportedCipherSuites", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "Server", "server", "=", "new", "Server", "(", ")", ";", "final", "MetricRegistry", "metrics", "=", "new", "MetricRegistry", "(", ")", ";", "final", "ThreadPool", "threadPool", "=", "new", "QueuedThreadPool", "(", ")", ";", "final", "Connector", "connector", "=", "https", ".", "build", "(", "server", ",", "metrics", ",", "\"", "<STR_LIT>", "\"", ",", "threadPool", ")", ";", "assertThat", "(", "connector", ")", ".", "isInstanceOf", "(", "ServerConnector", ".", "class", ")", ";", "final", "ServerConnector", "serverConnector", "=", "(", "ServerConnector", ")", "connector", ";", "assertThat", "(", "serverConnector", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "serverConnector", ".", "getHost", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:127.0.0.1>", "\"", ")", ";", "assertThat", "(", "serverConnector", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "serverConnector", ".", "getServer", "(", ")", ")", ".", "isSameAs", "(", "server", ")", ";", "assertThat", "(", "serverConnector", ".", "getScheduler", "(", ")", ")", ".", "isInstanceOf", "(", "ScheduledExecutorScheduler", ".", "class", ")", ";", "assertThat", "(", "serverConnector", ".", "getExecutor", "(", ")", ")", ".", "isSameAs", "(", "threadPool", ")", ";", "final", "Jetty93InstrumentedConnectionFactory", "jetty93SslConnectionFacttory", "=", "(", "Jetty93InstrumentedConnectionFactory", ")", "serverConnector", ".", "getConnectionFactory", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "jetty93SslConnectionFacttory", ")", ".", "isInstanceOf", "(", "Jetty93InstrumentedConnectionFactory", ".", "class", ")", ";", "assertThat", "(", "jetty93SslConnectionFacttory", ".", "getTimer", "(", ")", ")", ".", "isSameAs", "(", "metrics", ".", "timer", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "SslContextFactory", "sslContextFactory", "=", "(", "(", "SslConnectionFactory", ")", "jetty93SslConnectionFacttory", ".", "getConnectionFactory", "(", ")", ")", ".", "getSslContextFactory", "(", ")", ";", "assertThat", "(", "getField", "(", "SslContextFactory", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "sslContextFactory", ")", ")", ".", "isEqualTo", "(", "Resource", ".", "newResource", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "sslContextFactory", ".", "getKeyStoreType", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "getField", "(", "SslContextFactory", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "sslContextFactory", ")", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "sslContextFactory", ".", "getKeyStoreProvider", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "getField", "(", "SslContextFactory", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "sslContextFactory", ")", ")", ".", "isEqualTo", "(", "Resource", ".", "newResource", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "sslContextFactory", ".", "getKeyStoreType", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "getField", "(", "SslContextFactory", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "sslContextFactory", ")", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "sslContextFactory", ".", "getKeyStoreProvider", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "getField", "(", "SslContextFactory", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "sslContextFactory", ")", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "sslContextFactory", ".", "getNeedClientAuth", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "sslContextFactory", ".", "getWantClientAuth", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "sslContextFactory", ".", "getCertAlias", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "sslContextFactory", ".", "getCrlPath", "(", ")", ")", ".", "isEqualTo", "(", "new", "File", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getAbsolutePath", "(", ")", ")", ";", "assertThat", "(", "sslContextFactory", ".", "isEnableCRLDP", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "sslContextFactory", ".", "isEnableOCSP", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "sslContextFactory", ".", "getMaxCertPathLength", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:4>", ")", ";", "assertThat", "(", "sslContextFactory", ".", "getOcspResponderURL", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "sslContextFactory", ".", "getProvider", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "sslContextFactory", ".", "isRenegotiationAllowed", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "getField", "(", "SslContextFactory", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "sslContextFactory", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "sslContextFactory", ".", "isValidateCerts", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "sslContextFactory", ".", "isValidatePeerCerts", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "sslContextFactory", ".", "getIncludeProtocols", "(", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "sslContextFactory", ".", "getIncludeCipherSuites", "(", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ConnectionFactory", "httpConnectionFactory", "=", "serverConnector", ".", "getConnectionFactory", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "httpConnectionFactory", ")", ".", "isInstanceOf", "(", "HttpConnectionFactory", ".", "class", ")", ";", "final", "HttpConfiguration", "httpConfiguration", "=", "(", "(", "HttpConnectionFactory", ")", "httpConnectionFactory", ")", ".", "getHttpConfiguration", "(", ")", ";", "assertThat", "(", "httpConfiguration", ".", "getSecureScheme", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "httpConfiguration", ".", "getSecurePort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "httpConfiguration", ".", "getCustomizers", "(", ")", ")", ".", "hasAtLeastOneElementOfType", "(", "SecureRequestCustomizer", ".", "class", ")", ";", "connector", ".", "stop", "(", ")", ";", "server", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "canAccessWindowsKeyStore", "(", ")", "{", "if", "(", "SystemUtils", ".", "IS_OS_WINDOWS", ")", "{", "try", "{", "KeyStore", ".", "getInstance", "(", "WINDOWS_MY_KEYSTORE_NAME", ")", ";", "return", "true", ";", "}", "catch", "(", "KeyStoreException", "e", ")", "{", "return", "false", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "private", "<", "T", ">", "Collection", "<", "String", ">", "getViolationProperties", "(", "Set", "<", "ConstraintViolation", "<", "T", ">", ">", "violations", ")", "{", "return", "Collections2", ".", "transform", "(", "violations", ",", "input", "-", ">", "input", ".", "getPropertyPath", "(", ")", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "this", ".", "handler", "=", "new", "ContextRoutingHandler", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT:/>", "\"", ",", "handler1", ",", "\"", "<STR_LIT>", "\"", ",", "handler2", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "routesToTheBestPrefixMatch", "(", ")", "throws", "Exception", "{", "when", "(", "baseRequest", ".", "getRequestURI", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "handler", ".", "handle", "(", "\"", "<STR_LIT>", "\"", ",", "baseRequest", ",", "request", ",", "response", ")", ";", "verify", "(", "handler1", ")", ".", "handle", "(", "\"", "<STR_LIT>", "\"", ",", "baseRequest", ",", "request", ",", "response", ")", ";", "verify", "(", "handler2", ",", "never", "(", ")", ")", ".", "handle", "(", "\"", "<STR_LIT>", "\"", ",", "baseRequest", ",", "request", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "routesToTheLongestPrefixMatch", "(", ")", "throws", "Exception", "{", "when", "(", "baseRequest", ".", "getRequestURI", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "handler", ".", "handle", "(", "\"", "<STR_LIT>", "\"", ",", "baseRequest", ",", "request", ",", "response", ")", ";", "verify", "(", "handler1", ",", "never", "(", ")", ")", ".", "handle", "(", "\"", "<STR_LIT>", "\"", ",", "baseRequest", ",", "request", ",", "response", ")", ";", "verify", "(", "handler2", ")", ".", "handle", "(", "\"", "<STR_LIT>", "\"", ",", "baseRequest", ",", "request", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "passesHandlingNonMatchingRequests", "(", ")", "throws", "Exception", "{", "when", "(", "baseRequest", ".", "getRequestURI", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "handler", ".", "handle", "(", "\"", "<STR_LIT>", "\"", ",", "baseRequest", ",", "request", ",", "response", ")", ";", "verify", "(", "handler1", ",", "never", "(", ")", ")", ".", "handle", "(", "\"", "<STR_LIT>", "\"", ",", "baseRequest", ",", "request", ",", "response", ")", ";", "verify", "(", "handler2", ",", "never", "(", ")", ")", ".", "handle", "(", "\"", "<STR_LIT>", "\"", ",", "baseRequest", ",", "request", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "startsAndStopsAllHandlers", "(", ")", "throws", "Exception", "{", "handler", ".", "start", "(", ")", ";", "handler", ".", "stop", "(", ")", ";", "final", "InOrder", "inOrder", "=", "inOrder", "(", "handler1", ",", "handler2", ")", ";", "inOrder", ".", "verify", "(", "handler1", ")", ".", "start", "(", ")", ";", "inOrder", ".", "verify", "(", "handler2", ")", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "objectMapper", ".", "getSubtypeResolver", "(", ")", ".", "registerSubtypes", "(", "ConsoleAppenderFactory", ".", "class", ",", "FileAppenderFactory", ".", "class", ",", "SyslogAppenderFactory", ".", "class", ",", "HttpConnectorFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "HttpConnectorFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testParseMinimalConfiguration", "(", ")", "throws", "Exception", "{", "HttpConnectorFactory", "http", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "HttpConnectorFactory", ".", "class", ",", "validator", ",", "objectMapper", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "assertThat", "(", "http", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "http", ".", "getBindHost", "(", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "http", ".", "isInheritChannel", "(", ")", ")", ".", "isEqualTo", "(", "false", ")", ";", "assertThat", "(", "http", ".", "getHeaderCacheSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "bytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "http", ".", "getOutputBufferSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:32>", ")", ")", ";", "assertThat", "(", "http", ".", "getMaxRequestHeaderSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:8>", ")", ")", ";", "assertThat", "(", "http", ".", "getMaxResponseHeaderSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:8>", ")", ")", ";", "assertThat", "(", "http", ".", "getInputBufferSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:8>", ")", ")", ";", "assertThat", "(", "http", ".", "getIdleTimeout", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:30>", ")", ")", ";", "assertThat", "(", "http", ".", "getMinBufferPoolSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "bytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "http", ".", "getBufferPoolIncrement", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "bytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "http", ".", "getMaxBufferPoolSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "http", ".", "getMinRequestDataRate", "(", ")", ")", ".", "isEqualTo", "(", "0", "L", ")", ";", "assertThat", "(", "http", ".", "getAcceptorThreads", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "http", ".", "getSelectorThreads", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "http", ".", "getAcceptQueueSize", "(", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "http", ".", "isReuseAddress", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "http", ".", "getSoLingerTime", "(", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "http", ".", "isUseServerHeader", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "http", ".", "isUseDateHeader", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "http", ".", "isUseForwardedHeaders", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "http", ".", "getBlockingTimeout", "(", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "http", ".", "getHttpCompliance", "(", ")", ")", ".", "isEqualTo", "(", "HttpCompliance", ".", "RFC7230", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testParseFullConfiguration", "(", ")", "throws", "Exception", "{", "HttpConnectorFactory", "http", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "HttpConnectorFactory", ".", "class", ",", "validator", ",", "objectMapper", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "assertThat", "(", "http", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "http", ".", "getBindHost", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:127.0.0.1>", "\"", ")", ";", "assertThat", "(", "http", ".", "isInheritChannel", "(", ")", ")", ".", "isEqualTo", "(", "true", ")", ";", "assertThat", "(", "http", ".", "getHeaderCacheSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "bytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "http", ".", "getOutputBufferSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "http", ".", "getMaxRequestHeaderSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:4>", ")", ")", ";", "assertThat", "(", "http", ".", "getMaxResponseHeaderSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:4>", ")", ")", ";", "assertThat", "(", "http", ".", "getInputBufferSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:4>", ")", ")", ";", "assertThat", "(", "http", ".", "getIdleTimeout", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:10>", ")", ")", ";", "assertThat", "(", "http", ".", "getMinBufferPoolSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "bytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "http", ".", "getBufferPoolIncrement", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "bytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "http", ".", "getMaxBufferPoolSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:32>", ")", ")", ";", "assertThat", "(", "http", ".", "getMinRequestDataRate", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "http", ".", "getAcceptorThreads", "(", ")", ")", ".", "contains", "(", "1", ")", ";", "assertThat", "(", "http", ".", "getSelectorThreads", "(", ")", ")", ".", "contains", "(", "<NUM_LIT:4>", ")", ";", "assertThat", "(", "http", ".", "getAcceptQueueSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "http", ".", "isReuseAddress", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "http", ".", "getSoLingerTime", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:30>", ")", ")", ";", "assertThat", "(", "http", ".", "isUseServerHeader", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "http", ".", "isUseDateHeader", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "http", ".", "isUseForwardedHeaders", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "http", ".", "getBlockingTimeout", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:30>", ")", ")", ";", "assertThat", "(", "http", ".", "getHttpCompliance", "(", ")", ")", ".", "isEqualTo", "(", "HttpCompliance", ".", "RFC2616", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testBuildConnector", "(", ")", "throws", "Exception", "{", "HttpConnectorFactory", "http", "=", "new", "HttpConnectorFactory", "(", ")", ";", "http", ".", "setBindHost", "(", "\"", "<STR_LIT:127.0.0.1>", "\"", ")", ";", "http", ".", "setAcceptorThreads", "(", "Optional", ".", "of", "(", "1", ")", ")", ";", "http", ".", "setSelectorThreads", "(", "Optional", ".", "of", "(", "<NUM_LIT:2>", ")", ")", ";", "http", ".", "setAcceptQueueSize", "(", "<NUM_LIT>", ")", ";", "http", ".", "setSoLingerTime", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:30>", ")", ")", ";", "http", ".", "setBlockingTimeout", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "http", ".", "setMinRequestDataRate", "(", "<NUM_LIT>", ")", ";", "Server", "server", "=", "new", "Server", "(", ")", ";", "MetricRegistry", "metrics", "=", "new", "MetricRegistry", "(", ")", ";", "ThreadPool", "threadPool", "=", "new", "QueuedThreadPool", "(", ")", ";", "ServerConnector", "connector", "=", "(", "ServerConnector", ")", "http", ".", "build", "(", "server", ",", "metrics", ",", "\"", "<STR_LIT>", "\"", ",", "threadPool", ")", ";", "assertThat", "(", "connector", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "connector", ".", "getHost", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:127.0.0.1>", "\"", ")", ";", "assertThat", "(", "connector", ".", "getAcceptQueueSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "connector", ".", "getReuseAddress", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "connector", ".", "getSoLingerTime", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "connector", ".", "getIdleTimeout", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "connector", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "connector", ".", "getServer", "(", ")", ")", ".", "isSameAs", "(", "server", ")", ";", "assertThat", "(", "connector", ".", "getScheduler", "(", ")", ")", ".", "isInstanceOf", "(", "ScheduledExecutorScheduler", ".", "class", ")", ";", "assertThat", "(", "connector", ".", "getExecutor", "(", ")", ")", ".", "isSameAs", "(", "threadPool", ")", ";", "ByteBufferPool", "byteBufferPool", "=", "connector", ".", "getByteBufferPool", "(", ")", ";", "assertThat", "(", "byteBufferPool", ")", ".", "isInstanceOf", "(", "ArrayByteBufferPool", ".", "class", ")", ";", "assertThat", "(", "getField", "(", "ArrayByteBufferPool", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "byteBufferPool", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "getField", "(", "ArrayByteBufferPool", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "byteBufferPool", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "(", "(", "Object", "[", "]", ")", "getField", "(", "ArrayByteBufferPool", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "byteBufferPool", ")", ")", ".", "length", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "connector", ".", "getAcceptors", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "assertThat", "(", "connector", ".", "getSelectorManager", "(", ")", ".", "getSelectorCount", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:2>", ")", ";", "Jetty93InstrumentedConnectionFactory", "connectionFactory", "=", "(", "Jetty93InstrumentedConnectionFactory", ")", "connector", ".", "getConnectionFactory", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "connectionFactory", ")", ".", "isInstanceOf", "(", "Jetty93InstrumentedConnectionFactory", ".", "class", ")", ";", "assertThat", "(", "connectionFactory", ".", "getTimer", "(", ")", ")", ".", "isSameAs", "(", "metrics", ".", "timer", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "HttpConnectionFactory", "httpConnectionFactory", "=", "(", "HttpConnectionFactory", ")", "connectionFactory", ".", "getConnectionFactory", "(", ")", ";", "assertThat", "(", "httpConnectionFactory", ".", "getInputBufferSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "httpConnectionFactory", ".", "getHttpCompliance", "(", ")", ")", ".", "isEqualByComparingTo", "(", "HttpCompliance", ".", "RFC7230", ")", ";", "HttpConfiguration", "httpConfiguration", "=", "httpConnectionFactory", ".", "getHttpConfiguration", "(", ")", ";", "assertThat", "(", "httpConfiguration", ".", "getHeaderCacheSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "httpConfiguration", ".", "getOutputBufferSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "httpConfiguration", ".", "getRequestHeaderSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "httpConfiguration", ".", "getResponseHeaderSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "httpConfiguration", ".", "getSendDateHeader", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "httpConfiguration", ".", "getSendServerVersion", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "httpConfiguration", ".", "getCustomizers", "(", ")", ")", ".", "hasAtLeastOneElementOfType", "(", "ForwardedRequestCustomizer", ".", "class", ")", ";", "assertThat", "(", "httpConfiguration", ".", "getBlockingTimeout", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "httpConfiguration", ".", "getMinRequestDataRate", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "connector", ".", "stop", "(", ")", ";", "server", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultAcceptQueueSize", "(", ")", "throws", "Exception", "{", "HttpConnectorFactory", "http", "=", "new", "HttpConnectorFactory", "(", ")", ";", "http", ".", "setBindHost", "(", "\"", "<STR_LIT:127.0.0.1>", "\"", ")", ";", "http", ".", "setAcceptorThreads", "(", "Optional", ".", "of", "(", "1", ")", ")", ";", "http", ".", "setSelectorThreads", "(", "Optional", ".", "of", "(", "<NUM_LIT:2>", ")", ")", ";", "http", ".", "setSoLingerTime", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:30>", ")", ")", ";", "Server", "server", "=", "new", "Server", "(", ")", ";", "MetricRegistry", "metrics", "=", "new", "MetricRegistry", "(", ")", ";", "ThreadPool", "threadPool", "=", "new", "QueuedThreadPool", "(", ")", ";", "ServerConnector", "connector", "=", "(", "ServerConnector", ")", "http", ".", "build", "(", "server", ",", "metrics", ",", "\"", "<STR_LIT>", "\"", ",", "threadPool", ")", ";", "assertThat", "(", "connector", ".", "getAcceptQueueSize", "(", ")", ")", ".", "isEqualTo", "(", "NetUtil", ".", "getTcpBacklog", "(", ")", ")", ";", "connector", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultsToSessionsBeingDisabled", "(", ")", "throws", "Exception", "{", "assertThat", "(", "handler", ".", "isSessionsEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultsToSecurityBeingDisabled", "(", ")", "throws", "Exception", "{", "assertThat", "(", "handler", ".", "isSecurityEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canEnableSessionManagement", "(", ")", "throws", "Exception", "{", "handler", ".", "setSessionsEnabled", "(", "true", ")", ";", "assertThat", "(", "handler", ".", "isSessionsEnabled", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "handler", ".", "isSecurityEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canDisableSessionManagement", "(", ")", "throws", "Exception", "{", "handler", ".", "setSessionsEnabled", "(", "true", ")", ";", "handler", ".", "setSessionsEnabled", "(", "false", ")", ";", "assertThat", "(", "handler", ".", "isSessionsEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "handler", ".", "isSecurityEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canEnableSecurity", "(", ")", "throws", "Exception", "{", "handler", ".", "setSecurityEnabled", "(", "true", ")", ";", "assertThat", "(", "handler", ".", "isSessionsEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "handler", ".", "isSecurityEnabled", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canDisableSecurity", "(", ")", "throws", "Exception", "{", "handler", ".", "setSecurityEnabled", "(", "true", ")", ";", "handler", ".", "setSecurityEnabled", "(", "false", ")", ";", "assertThat", "(", "handler", ".", "isSessionsEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "handler", ".", "isSecurityEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultTcpBacklogForWindows", "(", ")", "{", "assumeThat", "(", "System", ".", "getProperty", "(", "OS_NAME_PROPERTY", ")", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assumeThat", "(", "isTcpBacklogSettingReadable", "(", ")", ",", "is", "(", "false", ")", ")", ";", "assertEquals", "(", "NetUtil", ".", "DEFAULT_TCP_BACKLOG_WINDOWS", ",", "NetUtil", ".", "getTcpBacklog", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNonWindowsDefaultTcpBacklog", "(", ")", "{", "assumeThat", "(", "System", ".", "getProperty", "(", "OS_NAME_PROPERTY", ")", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assumeThat", "(", "isTcpBacklogSettingReadable", "(", ")", ",", "is", "(", "false", ")", ")", ";", "assertEquals", "(", "NetUtil", ".", "DEFAULT_TCP_BACKLOG_LINUX", ",", "NetUtil", ".", "getTcpBacklog", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNonWindowsSpecifiedTcpBacklog", "(", ")", "{", "assumeThat", "(", "System", ".", "getProperty", "(", "OS_NAME_PROPERTY", ")", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assumeThat", "(", "isTcpBacklogSettingReadable", "(", ")", ",", "is", "(", "false", ")", ")", ";", "assertEquals", "(", "<NUM_LIT:100>", ",", "NetUtil", ".", "getTcpBacklog", "(", "<NUM_LIT:100>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testOsSetting", "(", ")", "{", "assumeThat", "(", "System", ".", "getProperty", "(", "OS_NAME_PROPERTY", ")", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assumeThat", "(", "isTcpBacklogSettingReadable", "(", ")", ",", "is", "(", "true", ")", ")", ";", "assertNotEquals", "(", "-", "1", ",", "NetUtil", ".", "getTcpBacklog", "(", "-", "1", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAllLocalIps", "(", ")", "throws", "Exception", "{", "NetUtil", ".", "setLocalIpFilter", "(", "(", "nif", ",", "adr", ")", "-", ">", "(", "adr", "!", "=", "null", ")", "&", "&", "!", "adr", ".", "isLoopbackAddress", "(", ")", "&", "&", "(", "nif", ".", "isPointToPoint", "(", ")", "|", "|", "!", "adr", ".", "isLinkLocalAddress", "(", ")", ")", ")", ";", "final", "Collection", "<", "InetAddress", ">", "addresses", "=", "NetUtil", ".", "getAllLocalIPs", "(", ")", ";", "assertThat", "(", "addresses", ".", "size", "(", ")", ")", ".", "isGreaterThan", "(", "0", ")", ";", "assertThat", "(", "addresses", ")", ".", "doesNotContain", "(", "InetAddress", ".", "getLoopbackAddress", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLocalIpsWithLocalFilter", "(", ")", "throws", "Exception", "{", "NetUtil", ".", "setLocalIpFilter", "(", "(", "inf", ",", "adr", ")", "-", ">", "adr", "!", "=", "null", ")", ";", "final", "Collection", "<", "InetAddress", ">", "addresses", "=", "NetUtil", ".", "getAllLocalIPs", "(", ")", ";", "assertThat", "(", "addresses", ".", "size", "(", ")", ")", ".", "isGreaterThan", "(", "0", ")", ";", "assertThat", "(", "addresses", ")", ".", "contains", "(", "InetAddress", ".", "getLoopbackAddress", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isTcpBacklogSettingReadable", "(", ")", "{", "return", "AccessController", ".", "doPrivileged", "(", "(", "PrivilegedAction", "<", "Boolean", ">", ")", "(", ")", "-", ">", "{", "try", "{", "File", "f", "=", "new", "File", "(", "NetUtil", ".", "TCP_BACKLOG_SETTING_LOCATION", ")", ";", "return", "f", ".", "exists", "(", ")", "&", "&", "f", ".", "canRead", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "return", "false", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAServlet", "(", ")", "throws", "Exception", "{", "assertThat", "(", "holder", ".", "getServlet", "(", ")", ")", ".", "isEqualTo", "(", "servlet", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "servicesRequests", "(", ")", "throws", "Exception", "{", "holder", ".", "handle", "(", "baseRequest", ",", "request", ",", "response", ")", ";", "verify", "(", "servlet", ")", ".", "service", "(", "request", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "temporarilyDisablesAsyncRequestsIfDisabled", "(", ")", "throws", "Exception", "{", "holder", ".", "setAsyncSupported", "(", "false", ")", ";", "holder", ".", "handle", "(", "baseRequest", ",", "request", ",", "response", ")", ";", "final", "InOrder", "inOrder", "=", "inOrder", "(", "baseRequest", ",", "servlet", ")", ";", "inOrder", ".", "verify", "(", "baseRequest", ")", ".", "setAsyncSupported", "(", "false", ",", "null", ")", ";", "inOrder", ".", "verify", "(", "servlet", ")", ".", "service", "(", "request", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isEagerlyInitialized", "(", ")", "throws", "Exception", "{", "assertThat", "(", "holder", ".", "getInitOrder", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "this", ".", "gzip", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "GzipHandlerFactory", ".", "class", ",", "BaseValidator", ".", "newValidator", "(", ")", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canBeEnabled", "(", ")", "throws", "Exception", "{", "assertThat", "(", "gzip", ".", "isEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAMinimumEntitySize", "(", ")", "throws", "Exception", "{", "assertThat", "(", "gzip", ".", "getMinimumEntitySize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:12>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasABufferSize", "(", ")", "throws", "Exception", "{", "assertThat", "(", "gzip", ".", "getBufferSize", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:32>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasExcludedUserAgentPatterns", "(", ")", "throws", "Exception", "{", "assertThat", "(", "gzip", ".", "getExcludedUserAgentPatterns", "(", ")", ")", ".", "isEqualTo", "(", "ImmutableSet", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasCompressedMimeTypes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "gzip", ".", "getCompressedMimeTypes", "(", ")", ")", ".", "isEqualTo", "(", "ImmutableSet", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testBuild", "(", ")", "{", "final", "BiDiGzipHandler", "handler", "=", "gzip", ".", "build", "(", "null", ")", ";", "assertThat", "(", "handler", ".", "getMinGzipSize", "(", ")", ")", ".", "isEqualTo", "(", "(", "int", ")", "gzip", ".", "getMinimumEntitySize", "(", ")", ".", "toBytes", "(", ")", ")", ";", "assertThat", "(", "handler", ".", "getExcludedAgentPatterns", "(", ")", ")", ".", "hasSize", "(", "1", ")", ";", "assertThat", "(", "handler", ".", "getExcludedAgentPatterns", "(", ")", "[", "0", "]", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "handler", ".", "getIncludedMimeTypes", "(", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "handler", ".", "getIncludedMethods", "(", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT:GET>", "\"", ",", "\"", "<STR_LIT:POST>", "\"", ")", ";", "assertThat", "(", "handler", ".", "getCompressionLevel", "(", ")", ")", ".", "isEqualTo", "(", "Deflater", ".", "DEFAULT_COMPRESSION", ")", ";", "assertThat", "(", "handler", ".", "isInflateNoWrap", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testBuildDefault", "(", ")", "throws", "Exception", "{", "final", "BiDiGzipHandler", "handler", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "GzipHandlerFactory", ".", "class", ",", "BaseValidator", ".", "newValidator", "(", ")", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ".", "build", "(", "null", ")", ";", "assertThat", "(", "handler", ".", "getMinGzipSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "handler", ".", "getExcludedAgentPatterns", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "handler", ".", "getIncludedMimeTypes", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "handler", ".", "getIncludedMethods", "(", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "assertThat", "(", "handler", ".", "getCompressionLevel", "(", ")", ")", ".", "isEqualTo", "(", "Deflater", ".", "DEFAULT_COMPRESSION", ")", ";", "assertThat", "(", "handler", ".", "isInflateNoWrap", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "request", ".", "setHeader", "(", "HttpHeaders", ".", "HOST", ",", "\"", "<STR_LIT>", "\"", ")", ";", "request", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "request", ".", "setURI", "(", "\"", "<STR_LIT>", "\"", ")", ";", "gzipHandler", ".", "setExcludedAgentPatterns", "(", ")", ";", "gzipHandler", ".", "addIncludedMethods", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "servletTester", ".", "addServlet", "(", "BannerServlet", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "servletTester", ".", "getContext", "(", ")", ".", "setGzipHandler", "(", "gzipHandler", ")", ";", "servletTester", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "servletTester", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCompressResponse", "(", ")", "throws", "Exception", "{", "request", ".", "setMethod", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "ACCEPT_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ";", "HttpTester", ".", "Response", "response", "=", "HttpTester", ".", "parseResponse", "(", "servletTester", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeader", ".", "CONTENT_ENCODING", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeader", ".", "VARY", ")", ")", ".", "isEqualTo", "(", "HttpHeaders", ".", "ACCEPT_ENCODING", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeader", ".", "CONTENT_TYPE", ")", ")", ".", "isEqualToIgnoringCase", "(", "PLAIN_TEXT_UTF_8", ")", ";", "try", "(", "GZIPInputStream", "is", "=", "new", "GZIPInputStream", "(", "new", "ByteArrayInputStream", "(", "response", ".", "getContentBytes", "(", ")", ")", ")", ")", "{", "assertThat", "(", "ByteStreams", ".", "toByteArray", "(", "is", ")", ")", ".", "isEqualTo", "(", "Resources", ".", "toByteArray", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDecompressRequest", "(", ")", "throws", "Exception", "{", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "try", "(", "GZIPOutputStream", "gz", "=", "new", "GZIPOutputStream", "(", "baos", ")", ")", "{", "Resources", ".", "copy", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ",", "gz", ")", ";", "}", "setRequestPostGzipPlainText", "(", "baos", ".", "toByteArray", "(", ")", ")", ";", "HttpTester", ".", "Response", "response", "=", "HttpTester", ".", "parseResponse", "(", "servletTester", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDecompressBadRequest", "(", ")", "throws", "Exception", "{", "setRequestPostGzipPlainText", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "\"", "<STR_LIT:UTF-8>", "\"", ")", ")", ";", "testBadRequest", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDecompressDeflateRequestGzipIncompatible", "(", ")", "throws", "Exception", "{", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "try", "(", "DeflaterOutputStream", "deflate", "=", "new", "DeflaterOutputStream", "(", "baos", ")", ")", "{", "Resources", ".", "copy", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ",", "deflate", ")", ";", "}", "setRequestPostDeflatePlainText", "(", "baos", ".", "toByteArray", "(", ")", ")", ";", "gzipHandler", ".", "setInflateNoWrap", "(", "false", ")", ";", "HttpTester", ".", "Response", "response", "=", "HttpTester", ".", "parseResponse", "(", "servletTester", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDecompressDeflateRequestGzipCompatible", "(", ")", "throws", "Exception", "{", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "try", "(", "DeflaterOutputStream", "deflate", "=", "new", "DeflaterOutputStream", "(", "baos", ",", "new", "Deflater", "(", "-", "1", ",", "true", ")", ")", ")", "{", "Resources", ".", "copy", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ",", "deflate", ")", ";", "}", "setRequestPostDeflatePlainText", "(", "baos", ".", "toByteArray", "(", ")", ")", ";", "HttpTester", ".", "Response", "response", "=", "HttpTester", ".", "parseResponse", "(", "servletTester", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDecompressDeflateBadRequest", "(", ")", "throws", "Exception", "{", "setRequestPostDeflatePlainText", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "\"", "<STR_LIT:UTF-8>", "\"", ")", ")", ";", "testBadRequest", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "void", "testBadRequest", "(", "String", "responseContains", ")", "throws", "Exception", "{", "HttpTester", ".", "Response", "response", "=", "HttpTester", ".", "parseResponse", "(", "servletTester", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "contains", "(", "responseContains", ")", ";", "}", "</s>"]
["<s>", "private", "void", "setRequestPostPlainText", "(", "byte", "[", "]", "content", ")", "{", "request", ".", "setMethod", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "CONTENT_TYPE", ",", "PLAIN_TEXT_UTF_8", ")", ";", "request", ".", "setContent", "(", "content", ")", ";", "}", "</s>"]
["<s>", "private", "void", "setRequestPostDeflatePlainText", "(", "byte", "[", "]", "content", ")", "{", "setRequestPostPlainText", "(", "content", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "void", "setRequestPostGzipPlainText", "(", "byte", "[", "]", "content", ")", "{", "setRequestPostPlainText", "(", "content", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "doGet", "(", "HttpServletRequest", "req", ",", "HttpServletResponse", "resp", ")", "throws", "ServletException", ",", "IOException", "{", "resp", ".", "setCharacterEncoding", "(", "StandardCharsets", ".", "UTF_8", ".", "toString", "(", ")", ")", ";", "resp", ".", "setContentType", "(", "PLAIN_TEXT_UTF_8", ")", ";", "Resources", ".", "asCharSource", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ".", "copyTo", "(", "resp", ".", "getWriter", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "doPost", "(", "HttpServletRequest", "req", ",", "HttpServletResponse", "resp", ")", "throws", "ServletException", ",", "IOException", "{", "assertThat", "(", "req", ".", "getHeader", "(", "HttpHeaders", ".", "CONTENT_TYPE", ")", ")", ".", "isEqualToIgnoringCase", "(", "PLAIN_TEXT_UTF_8", ")", ";", "assertThat", "(", "req", ".", "getHeader", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "req", ".", "getHeader", "(", "HttpHeaders", ".", "CONTENT_LENGTH", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "req", ".", "getContentLength", "(", ")", ")", ".", "isEqualTo", "(", "-", "1", ")", ";", "assertThat", "(", "req", ".", "getContentLengthLong", "(", ")", ")", ".", "isEqualTo", "(", "-", "<NUM_LIT>", ")", ";", "assertThat", "(", "CharStreams", ".", "toString", "(", "req", ".", "getReader", "(", ")", ")", ")", ".", "isEqualTo", "(", "Resources", ".", "toString", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "resp", ".", "setContentType", "(", "PLAIN_TEXT_UTF_8", ")", ";", "resp", ".", "getWriter", "(", ")", ".", "write", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testReadBytes", "(", ")", "throws", "Exception", "{", "byte", "[", "]", "buffer", "=", "new", "byte", "[", "<NUM_LIT>", "]", ";", "doReturn", "(", "buffer", ".", "length", ")", ".", "when", "(", "delegate", ")", ".", "read", "(", "Mockito", ".", "any", "(", "byte", "[", "]", ".", "class", ")", ",", "anyInt", "(", ")", ",", "anyInt", "(", ")", ")", ";", "assertEquals", "(", "buffer", ".", "length", ",", "in", ".", "read", "(", "buffer", ",", "0", ",", "buffer", ".", "length", ")", ")", ";", "verify", "(", "delegate", ")", ".", "read", "(", "buffer", ",", "0", ",", "buffer", ".", "length", ")", ";", "verifyNoMoreInteractions", "(", "delegate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testReadByte", "(", ")", "throws", "Exception", "{", "doReturn", "(", "<NUM_LIT>", ")", ".", "when", "(", "delegate", ")", ".", "read", "(", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "in", ".", "read", "(", ")", ")", ";", "verify", "(", "delegate", ")", ".", "read", "(", ")", ";", "verifyNoMoreInteractions", "(", "delegate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSkip", "(", ")", "throws", "Exception", "{", "doReturn", "(", "<NUM_LIT>", ")", ".", "when", "(", "delegate", ")", ".", "skip", "(", "<NUM_LIT>", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "in", ".", "skip", "(", "<NUM_LIT>", ")", ")", ";", "verify", "(", "delegate", ")", ".", "skip", "(", "<NUM_LIT>", ")", ";", "verifyNoMoreInteractions", "(", "delegate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAvailable", "(", ")", "throws", "Exception", "{", "doReturn", "(", "<NUM_LIT>", ")", ".", "when", "(", "delegate", ")", ".", "available", "(", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "in", ".", "available", "(", ")", ")", ";", "verify", "(", "delegate", ")", ".", "available", "(", ")", ";", "verifyNoMoreInteractions", "(", "delegate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testClose", "(", ")", "throws", "Exception", "{", "in", ".", "close", "(", ")", ";", "verify", "(", "delegate", ")", ".", "close", "(", ")", ";", "verifyNoMoreInteractions", "(", "delegate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testMark", "(", ")", "{", "in", ".", "mark", "(", "<NUM_LIT>", ")", ";", "verify", "(", "delegate", ")", ".", "mark", "(", "<NUM_LIT>", ")", ";", "verifyNoMoreInteractions", "(", "delegate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testMarkSupported", "(", ")", "{", "doReturn", "(", "true", ")", ".", "when", "(", "delegate", ")", ".", "markSupported", "(", ")", ";", "assertTrue", "(", "in", ".", "markSupported", "(", ")", ")", ";", "verify", "(", "delegate", ")", ".", "markSupported", "(", ")", ";", "verifyNoMoreInteractions", "(", "delegate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testReset", "(", ")", "throws", "Exception", "{", "doNothing", "(", ")", ".", "when", "(", "delegate", ")", ".", "reset", "(", ")", ";", "in", ".", "reset", "(", ")", ";", "verify", "(", "delegate", ")", ".", "reset", "(", ")", ";", "verifyNoMoreInteractions", "(", "delegate", ")", ";", "}", "</s>"]
["<s>", "@", "Parameterized", ".", "Parameters", "(", "name", "=", "\"", "<STR_LIT>", "\"", ")", "public", "static", "Collection", "<", "Object", "[", "]", ">", "parameters", "(", ")", "{", "return", "Arrays", ".", "asList", "(", "new", "Object", "[", "]", "[", "]", "{", "{", "new", "EOFException", "(", ")", ",", "BadMessageException", ".", "class", "}", ",", "{", "new", "ZipException", "(", ")", ",", "BadMessageException", ".", "class", "}", ",", "{", "new", "IOException", "(", ")", ",", "IOException", ".", "class", "}", ",", "}", ")", ";", "}", "</s>"]
["<s>", "public", "ExceptionTest", "(", "Exception", "t", ",", "Class", "<", "?", "extends", "Exception", ">", "expected", ")", "{", "this", ".", "t", "=", "t", ";", "this", ".", "expected", "=", "expected", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testReadBytes", "(", ")", "throws", "Exception", "{", "doThrow", "(", "t", ")", ".", "when", "(", "delegate", ")", ".", "read", "(", "Mockito", ".", "any", "(", "byte", "[", "]", ".", "class", ")", ",", "anyInt", "(", ")", ",", "anyInt", "(", ")", ")", ";", "byte", "[", "]", "buffer", "=", "new", "byte", "[", "<NUM_LIT:20>", "]", ";", "try", "{", "in", ".", "read", "(", "buffer", ",", "<NUM_LIT:4>", ",", "<NUM_LIT:16>", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "assertThat", "(", "e", ")", ".", "isInstanceOf", "(", "expected", ")", ";", "verify", "(", "delegate", ")", ".", "read", "(", "same", "(", "buffer", ")", ",", "eq", "(", "<NUM_LIT:4>", ")", ",", "eq", "(", "<NUM_LIT:16>", ")", ")", ";", "verifyNoMoreInteractions", "(", "delegate", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testReadByte", "(", ")", "throws", "Exception", "{", "doThrow", "(", "t", ")", ".", "when", "(", "delegate", ")", ".", "read", "(", ")", ";", "try", "{", "in", ".", "read", "(", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "assertThat", "(", "e", ")", ".", "isInstanceOf", "(", "expected", ")", ";", "verify", "(", "delegate", ")", ".", "read", "(", ")", ";", "verifyNoMoreInteractions", "(", "delegate", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSkip", "(", ")", "throws", "Exception", "{", "doThrow", "(", "t", ")", ".", "when", "(", "delegate", ")", ".", "skip", "(", "anyLong", "(", ")", ")", ";", "try", "{", "in", ".", "skip", "(", "<NUM_LIT>", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "assertThat", "(", "e", ")", ".", "isInstanceOf", "(", "expected", ")", ";", "verify", "(", "delegate", ")", ".", "skip", "(", "<NUM_LIT>", ")", ";", "verifyNoMoreInteractions", "(", "delegate", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAvailable", "(", ")", "throws", "Exception", "{", "doThrow", "(", "t", ")", ".", "when", "(", "delegate", ")", ".", "available", "(", ")", ";", "try", "{", "in", ".", "available", "(", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "assertThat", "(", "e", ")", ".", "isInstanceOf", "(", "expected", ")", ";", "verify", "(", "delegate", ")", ".", "available", "(", ")", ";", "verifyNoMoreInteractions", "(", "delegate", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testClose", "(", ")", "throws", "Exception", "{", "doThrow", "(", "t", ")", ".", "when", "(", "delegate", ")", ".", "close", "(", ")", ";", "try", "{", "in", ".", "close", "(", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "assertThat", "(", "e", ")", ".", "isInstanceOf", "(", "expected", ")", ";", "verify", "(", "delegate", ")", ".", "close", "(", ")", ";", "verifyNoMoreInteractions", "(", "delegate", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testReset", "(", ")", "throws", "Exception", "{", "doThrow", "(", "t", ")", ".", "when", "(", "delegate", ")", ".", "reset", "(", ")", ";", "try", "{", "in", ".", "reset", "(", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "assertThat", "(", "e", ")", ".", "isInstanceOf", "(", "expected", ")", ";", "verify", "(", "delegate", ")", ".", "reset", "(", ")", ";", "verifyNoMoreInteractions", "(", "delegate", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLoadConfiguration", "(", ")", "throws", "Exception", "{", "final", "ServerPushFilterFactory", "serverPush", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "ServerPushFilterFactory", ".", "class", ",", "BaseValidator", ".", "newValidator", "(", ")", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "assertThat", "(", "serverPush", ".", "isEnabled", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "serverPush", ".", "getAssociatePeriod", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:5>", ")", ")", ";", "assertThat", "(", "serverPush", ".", "getMaxAssociations", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:8>", ")", ";", "assertThat", "(", "serverPush", ".", "getRefererHosts", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "serverPush", ".", "getRefererPorts", "(", ")", ")", ".", "contains", "(", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultConfiguration", "(", ")", "{", "final", "ServerPushFilterFactory", "serverPush", "=", "new", "ServerPushFilterFactory", "(", ")", ";", "assertThat", "(", "serverPush", ".", "isEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "serverPush", ".", "getAssociatePeriod", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:4>", ")", ")", ";", "assertThat", "(", "serverPush", ".", "getMaxAssociations", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:16>", ")", ";", "assertThat", "(", "serverPush", ".", "getRefererHosts", "(", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "serverPush", ".", "getRefererPorts", "(", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDontAddFilterByDefault", "(", ")", "{", "final", "ServerPushFilterFactory", "serverPush", "=", "new", "ServerPushFilterFactory", "(", ")", ";", "ServletContextHandler", "servletContextHandler", "=", "mock", "(", "ServletContextHandler", ".", "class", ")", ";", "serverPush", ".", "addFilter", "(", "servletContextHandler", ")", ";", "verify", "(", "servletContextHandler", ",", "never", "(", ")", ")", ".", "addFilter", "(", "PushCacheFilter", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "EnumSet", ".", "of", "(", "DispatcherType", ".", "REQUEST", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAddFilter", "(", ")", "{", "final", "ServerPushFilterFactory", "serverPush", "=", "new", "ServerPushFilterFactory", "(", ")", ";", "serverPush", ".", "setRefererHosts", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "serverPush", ".", "setRefererPorts", "(", "ImmutableList", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ")", ";", "serverPush", ".", "setEnabled", "(", "true", ")", ";", "ServletContextHandler", "servletContextHandler", "=", "mock", "(", "ServletContextHandler", ".", "class", ")", ";", "serverPush", ".", "addFilter", "(", "servletContextHandler", ")", ";", "verify", "(", "servletContextHandler", ")", ".", "setInitParameter", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "verify", "(", "servletContextHandler", ")", ".", "setInitParameter", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "verify", "(", "servletContextHandler", ")", ".", "setInitParameter", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "verify", "(", "servletContextHandler", ")", ".", "setInitParameter", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "verify", "(", "servletContextHandler", ")", ".", "addFilter", "(", "PushCacheFilter", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "EnumSet", ".", "of", "(", "DispatcherType", ".", "REQUEST", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRefererHostsAndPortsAreNotSet", "(", ")", "{", "final", "ServerPushFilterFactory", "serverPush", "=", "new", "ServerPushFilterFactory", "(", ")", ";", "serverPush", ".", "setEnabled", "(", "true", ")", ";", "ServletContextHandler", "servletContextHandler", "=", "mock", "(", "ServletContextHandler", ".", "class", ")", ";", "serverPush", ".", "addFilter", "(", "servletContextHandler", ")", ";", "verify", "(", "servletContextHandler", ",", "never", "(", ")", ")", ".", "setInitParameter", "(", "eq", "(", "\"", "<STR_LIT>", "\"", ")", ",", "anyString", "(", ")", ")", ";", "verify", "(", "servletContextHandler", ",", "never", "(", ")", ")", ".", "setInitParameter", "(", "eq", "(", "\"", "<STR_LIT>", "\"", ")", ",", "anyString", "(", ")", ")", ";", "verify", "(", "servletContextHandler", ")", ".", "addFilter", "(", "PushCacheFilter", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "EnumSet", ".", "of", "(", "DispatcherType", ".", "REQUEST", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "handler", ".", "getServletHandler", "(", ")", ")", ".", "thenReturn", "(", "servletHandler", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addsServletInstances", "(", ")", "throws", "Exception", "{", "final", "Servlet", "servlet", "=", "mock", "(", "Servlet", ".", "class", ")", ";", "final", "ServletRegistration", ".", "Dynamic", "builder", "=", "environment", ".", "addServlet", "(", "\"", "<STR_LIT>", "\"", ",", "servlet", ")", ";", "assertThat", "(", "builder", ")", ".", "isNotNull", "(", ")", ";", "final", "ArgumentCaptor", "<", "ServletHolder", ">", "holder", "=", "ArgumentCaptor", ".", "forClass", "(", "ServletHolder", ".", "class", ")", ";", "verify", "(", "servletHandler", ")", ".", "addServlet", "(", "holder", ".", "capture", "(", ")", ")", ";", "assertThat", "(", "holder", ".", "getValue", "(", ")", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "holder", ".", "getValue", "(", ")", ".", "getServlet", "(", ")", ")", ".", "isEqualTo", "(", "servlet", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addsServletClasses", "(", ")", "throws", "Exception", "{", "final", "ServletRegistration", ".", "Dynamic", "builder", "=", "environment", ".", "addServlet", "(", "\"", "<STR_LIT>", "\"", ",", "GenericServlet", ".", "class", ")", ";", "assertThat", "(", "builder", ")", ".", "isNotNull", "(", ")", ";", "final", "ArgumentCaptor", "<", "ServletHolder", ">", "holder", "=", "ArgumentCaptor", ".", "forClass", "(", "ServletHolder", ".", "class", ")", ";", "verify", "(", "servletHandler", ")", ".", "addServlet", "(", "holder", ".", "capture", "(", ")", ")", ";", "assertThat", "(", "holder", ".", "getValue", "(", ")", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "holder", ".", "getValue", "(", ")", ".", "getHeldClass", "(", ")", ".", "equals", "(", "GenericServlet", ".", "class", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addsFilterInstances", "(", ")", "throws", "Exception", "{", "final", "Filter", "filter", "=", "mock", "(", "Filter", ".", "class", ")", ";", "final", "FilterRegistration", ".", "Dynamic", "builder", "=", "environment", ".", "addFilter", "(", "\"", "<STR_LIT>", "\"", ",", "filter", ")", ";", "assertThat", "(", "builder", ")", ".", "isNotNull", "(", ")", ";", "final", "ArgumentCaptor", "<", "FilterHolder", ">", "holder", "=", "ArgumentCaptor", ".", "forClass", "(", "FilterHolder", ".", "class", ")", ";", "verify", "(", "servletHandler", ")", ".", "addFilter", "(", "holder", ".", "capture", "(", ")", ")", ";", "assertThat", "(", "holder", ".", "getValue", "(", ")", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "holder", ".", "getValue", "(", ")", ".", "getFilter", "(", ")", ")", ".", "isEqualTo", "(", "filter", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addsFilterClasses", "(", ")", "throws", "Exception", "{", "final", "FilterRegistration", ".", "Dynamic", "builder", "=", "environment", ".", "addFilter", "(", "\"", "<STR_LIT>", "\"", ",", "WelcomeFilter", ".", "class", ")", ";", "assertThat", "(", "builder", ")", ".", "isNotNull", "(", ")", ";", "final", "ArgumentCaptor", "<", "FilterHolder", ">", "holder", "=", "ArgumentCaptor", ".", "forClass", "(", "FilterHolder", ".", "class", ")", ";", "verify", "(", "servletHandler", ")", ".", "addFilter", "(", "holder", ".", "capture", "(", ")", ")", ";", "assertThat", "(", "holder", ".", "getValue", "(", ")", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "holder", ".", "getValue", "(", ")", ".", "getHeldClass", "(", ")", ".", "equals", "(", "WelcomeFilter", ".", "class", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addsServletListeners", "(", ")", "throws", "Exception", "{", "final", "ServletContextListener", "listener", "=", "mock", "(", "ServletContextListener", ".", "class", ")", ";", "environment", ".", "addServletListeners", "(", "listener", ")", ";", "verify", "(", "handler", ")", ".", "addEventListener", "(", "listener", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addsProtectedTargets", "(", ")", "throws", "Exception", "{", "environment", ".", "setProtectedTargets", "(", "\"", "<STR_LIT>", "\"", ")", ";", "verify", "(", "handler", ")", ".", "setProtectedTargets", "(", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsBaseResource", "(", ")", "throws", "Exception", "{", "final", "Resource", "testResource", "=", "Resource", ".", "newResource", "(", "tempDir", ".", "newFolder", "(", ")", ")", ";", "environment", ".", "setBaseResource", "(", "testResource", ")", ";", "verify", "(", "handler", ")", ".", "setBaseResource", "(", "testResource", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsBaseResourceList", "(", ")", "throws", "Exception", "{", "Resource", "wooResource", "=", "Resource", ".", "newResource", "(", "tempDir", ".", "newFolder", "(", ")", ")", ";", "Resource", "fooResource", "=", "Resource", ".", "newResource", "(", "tempDir", ".", "newFolder", "(", ")", ")", ";", "final", "Resource", "[", "]", "testResources", "=", "new", "Resource", "[", "]", "{", "wooResource", ",", "fooResource", "}", ";", "environment", ".", "setBaseResource", "(", "testResources", ")", ";", "ArgumentCaptor", "<", "Resource", ">", "captor", "=", "ArgumentCaptor", ".", "forClass", "(", "Resource", ".", "class", ")", ";", "verify", "(", "handler", ")", ".", "setBaseResource", "(", "captor", ".", "capture", "(", ")", ")", ";", "Resource", "actualResource", "=", "captor", ".", "getValue", "(", ")", ";", "assertThat", "(", "actualResource", ")", ".", "isInstanceOf", "(", "ResourceCollection", ".", "class", ")", ";", "ResourceCollection", "actualResourceCollection", "=", "(", "ResourceCollection", ")", "actualResource", ";", "assertThat", "(", "actualResourceCollection", ".", "getResources", "(", ")", ")", ".", "contains", "(", "wooResource", ",", "fooResource", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsResourceBase", "(", ")", "throws", "Exception", "{", "environment", ".", "setResourceBase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "verify", "(", "handler", ")", ".", "setResourceBase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsBaseResourceStringList", "(", ")", "throws", "Exception", "{", "String", "wooResource", "=", "tempDir", ".", "newFolder", "(", ")", ".", "getAbsolutePath", "(", ")", ";", "String", "fooResource", "=", "tempDir", ".", "newFolder", "(", ")", ".", "getAbsolutePath", "(", ")", ";", "final", "String", "[", "]", "testResources", "=", "new", "String", "[", "]", "{", "wooResource", ",", "fooResource", "}", ";", "environment", ".", "setBaseResource", "(", "testResources", ")", ";", "ArgumentCaptor", "<", "Resource", ">", "captor", "=", "ArgumentCaptor", ".", "forClass", "(", "Resource", ".", "class", ")", ";", "verify", "(", "handler", ")", ".", "setBaseResource", "(", "captor", ".", "capture", "(", ")", ")", ";", "Resource", "actualResource", "=", "captor", ".", "getValue", "(", ")", ";", "assertThat", "(", "actualResource", ")", ".", "isInstanceOf", "(", "ResourceCollection", ".", "class", ")", ";", "ResourceCollection", "actualResourceCollection", "=", "(", "ResourceCollection", ")", "actualResource", ";", "assertThat", "(", "actualResourceCollection", ".", "getResources", "(", ")", ")", ".", "contains", "(", "Resource", ".", "newResource", "(", "wooResource", ")", ",", "Resource", ".", "newResource", "(", "fooResource", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsInitParams", "(", ")", "throws", "Exception", "{", "environment", ".", "setInitParameter", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "verify", "(", "handler", ")", ".", "setInitParameter", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsSessionHandlers", "(", ")", "throws", "Exception", "{", "final", "SessionHandler", "sessionHandler", "=", "mock", "(", "SessionHandler", ".", "class", ")", ";", "environment", ".", "setSessionHandler", "(", "sessionHandler", ")", ";", "verify", "(", "handler", ")", ".", "setSessionHandler", "(", "sessionHandler", ")", ";", "verify", "(", "handler", ")", ".", "setSessionsEnabled", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsSecurityHandlers", "(", ")", "throws", "Exception", "{", "final", "SecurityHandler", "securityHandler", "=", "mock", "(", "SecurityHandler", ".", "class", ")", ";", "environment", ".", "setSecurityHandler", "(", "securityHandler", ")", ";", "verify", "(", "handler", ")", ".", "setSecurityHandler", "(", "securityHandler", ")", ";", "verify", "(", "handler", ")", ".", "setSecurityEnabled", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addsMimeMapping", "(", ")", "{", "final", "MimeTypes", "mimeTypes", "=", "mock", "(", "MimeTypes", ".", "class", ")", ";", "when", "(", "handler", ".", "getMimeTypes", "(", ")", ")", ".", "thenReturn", "(", "mimeTypes", ")", ";", "environment", ".", "addMimeMapping", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "verify", "(", "mimeTypes", ")", ".", "addMimeMapping", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isInflateNoWrap", "(", ")", "{", "return", "inflateNoWrap", ";", "}", "</s>"]
["<s>", "public", "void", "setInflateNoWrap", "(", "boolean", "inflateNoWrap", ")", "{", "this", ".", "inflateNoWrap", "=", "inflateNoWrap", ";", "}", "</s>"]
["<s>", "public", "BiDiGzipHandler", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "setInputBufferSize", "(", "int", "inputBufferSize", ")", "{", "this", ".", "inputBufferSize", "=", "inputBufferSize", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "handle", "(", "String", "target", ",", "Request", "baseRequest", ",", "HttpServletRequest", "request", ",", "HttpServletResponse", "response", ")", "throws", "IOException", ",", "ServletException", "{", "final", "String", "encoding", "=", "request", ".", "getHeader", "(", "HttpHeader", ".", "CONTENT_ENCODING", ".", "asString", "(", ")", ")", ";", "if", "(", "GZIP", ".", "equalsIgnoreCase", "(", "encoding", ")", ")", "{", "super", ".", "handle", "(", "target", ",", "baseRequest", ",", "wrapGzippedRequest", "(", "removeContentHeaders", "(", "request", ")", ")", ",", "response", ")", ";", "}", "else", "if", "(", "DEFLATE", ".", "equalsIgnoreCase", "(", "encoding", ")", ")", "{", "super", ".", "handle", "(", "target", ",", "baseRequest", ",", "wrapDeflatedRequest", "(", "removeContentHeaders", "(", "request", ")", ")", ",", "response", ")", ";", "}", "else", "{", "super", ".", "handle", "(", "target", ",", "baseRequest", ",", "request", ",", "response", ")", ";", "}", "}", "</s>"]
["<s>", "private", "Inflater", "buildInflater", "(", ")", "{", "final", "Inflater", "inflater", "=", "localInflater", ".", "get", "(", ")", ";", "if", "(", "inflater", "!", "=", "null", ")", "{", "localInflater", ".", "set", "(", "null", ")", ";", "inflater", ".", "reset", "(", ")", ";", "return", "inflater", ";", "}", "else", "{", "return", "new", "Inflater", "(", "inflateNoWrap", ")", ";", "}", "}", "</s>"]
["<s>", "private", "WrappedServletRequest", "wrapDeflatedRequest", "(", "HttpServletRequest", "request", ")", "throws", "IOException", "{", "final", "Inflater", "inflater", "=", "buildInflater", "(", ")", ";", "try", "{", "final", "InflaterInputStream", "input", "=", "new", "InflaterInputStream", "(", "request", ".", "getInputStream", "(", ")", ",", "inflater", ",", "inputBufferSize", ")", "{", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "super", ".", "close", "(", ")", ";", "localInflater", ".", "set", "(", "inflater", ")", ";", "}", "}", ";", "return", "new", "WrappedServletRequest", "(", "request", ",", "new", "ZipExceptionHandlingInputStream", "(", "input", ",", "DEFLATE", ")", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "ZipExceptionHandlingInputStream", ".", "handleException", "(", "DEFLATE", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "super", ".", "close", "(", ")", ";", "localInflater", ".", "set", "(", "inflater", ")", ";", "}", "</s>"]
["<s>", "private", "WrappedServletRequest", "wrapGzippedRequest", "(", "HttpServletRequest", "request", ")", "throws", "IOException", "{", "try", "{", "final", "GZIPInputStream", "input", "=", "new", "GZIPInputStream", "(", "request", ".", "getInputStream", "(", ")", ",", "inputBufferSize", ")", ";", "return", "new", "WrappedServletRequest", "(", "request", ",", "new", "ZipExceptionHandlingInputStream", "(", "input", ",", "GZIP", ")", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "ZipExceptionHandlingInputStream", ".", "handleException", "(", "GZIP", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "HttpServletRequest", "removeContentHeaders", "(", "final", "HttpServletRequest", "request", ")", "{", "return", "new", "RemoveHttpHeadersWrapper", "(", "request", ",", "ImmutableSortedSet", ".", "orderedBy", "(", "String", ":", ":", "compareToIgnoreCase", ")", ".", "add", "(", "HttpHeader", ".", "CONTENT_ENCODING", ".", "asString", "(", ")", ")", ".", "add", "(", "HttpHeader", ".", "CONTENT_LENGTH", ".", "asString", "(", ")", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "WrappedServletRequest", "(", "HttpServletRequest", "request", ",", "InputStream", "inputStream", ")", "throws", "IOException", "{", "super", "(", "request", ")", ";", "this", ".", "input", "=", "new", "WrappedServletInputStream", "(", "inputStream", ")", ";", "this", ".", "reader", "=", "new", "BufferedReader", "(", "new", "InputStreamReader", "(", "input", ",", "getCharset", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "Charset", "getCharset", "(", ")", "{", "final", "String", "encoding", "=", "getCharacterEncoding", "(", ")", ";", "if", "(", "encoding", "=", "=", "null", "|", "|", "!", "Charset", ".", "isSupported", "(", "encoding", ")", ")", "{", "return", "StandardCharsets", ".", "ISO_8859_1", ";", "}", "return", "Charset", ".", "forName", "(", "encoding", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ServletInputStream", "getInputStream", "(", ")", "throws", "IOException", "{", "return", "input", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "BufferedReader", "getReader", "(", ")", "throws", "IOException", "{", "return", "reader", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getContentLength", "(", ")", "{", "return", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getContentLengthLong", "(", ")", "{", "return", "-", "<NUM_LIT>", ";", "}", "</s>"]
["<s>", "private", "WrappedServletInputStream", "(", "InputStream", "input", ")", "{", "this", ".", "input", "=", "input", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "input", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", "byte", "[", "]", "b", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "return", "input", ".", "read", "(", "b", ",", "off", ",", "len", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "available", "(", ")", "throws", "IOException", "{", "return", "input", ".", "available", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "mark", "(", "int", "readlimit", ")", "{", "input", ".", "mark", "(", "readlimit", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "markSupported", "(", ")", "{", "return", "input", ".", "markSupported", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", ")", "throws", "IOException", "{", "return", "input", ".", "read", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "reset", "(", ")", "throws", "IOException", "{", "input", ".", "reset", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "skip", "(", "long", "n", ")", "throws", "IOException", "{", "return", "input", ".", "skip", "(", "n", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", "byte", "[", "]", "b", ")", "throws", "IOException", "{", "return", "input", ".", "read", "(", "b", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isFinished", "(", ")", "{", "try", "{", "return", "input", ".", "available", "(", ")", "=", "=", "0", ";", "}", "catch", "(", "IOException", "ignored", ")", "{", "}", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isReady", "(", ")", "{", "try", "{", "return", "input", ".", "available", "(", ")", ">", "0", ";", "}", "catch", "(", "IOException", "ignored", ")", "{", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setReadListener", "(", "ReadListener", "readListener", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "RemoveHttpHeadersWrapper", "(", "final", "HttpServletRequest", "request", ",", "final", "ImmutableSortedSet", "<", "String", ">", "headerNames", ")", "{", "super", "(", "request", ")", ";", "this", ".", "headerNames", "=", "headerNames", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getIntHeader", "(", "final", "String", "name", ")", "{", "if", "(", "headerNames", ".", "contains", "(", "name", ")", ")", "{", "return", "-", "1", ";", "}", "else", "{", "return", "super", ".", "getIntHeader", "(", "name", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "Enumeration", "<", "String", ">", "getHeaders", "(", "final", "String", "name", ")", "{", "if", "(", "headerNames", ".", "contains", "(", "name", ")", ")", "{", "return", "Collections", ".", "emptyEnumeration", "(", ")", ";", "}", "else", "{", "return", "super", ".", "getHeaders", "(", "name", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "String", "getHeader", "(", "final", "String", "name", ")", "{", "if", "(", "headerNames", ".", "contains", "(", "name", ")", ")", "{", "return", "null", ";", "}", "else", "{", "return", "super", ".", "getHeader", "(", "name", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getDateHeader", "(", "final", "String", "name", ")", "{", "if", "(", "headerNames", ".", "contains", "(", "name", ")", ")", "{", "return", "-", "<NUM_LIT>", ";", "}", "else", "{", "return", "super", ".", "getDateHeader", "(", "name", ")", ";", "}", "}", "</s>"]
["<s>", "ZipExceptionHandlingInputStream", "(", "InputStream", "in", ",", "String", "format", ")", "{", "this", ".", "delegate", "=", "in", ";", "this", ".", "format", "=", "format", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", "byte", "[", "]", "b", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "try", "{", "return", "delegate", ".", "read", "(", "b", ",", "off", ",", "len", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "handleException", "(", "format", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", ")", "throws", "IOException", "{", "try", "{", "return", "delegate", ".", "read", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "handleException", "(", "format", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "skip", "(", "long", "n", ")", "throws", "IOException", "{", "try", "{", "return", "delegate", ".", "skip", "(", "n", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "handleException", "(", "format", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "available", "(", ")", "throws", "IOException", "{", "try", "{", "return", "delegate", ".", "available", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "handleException", "(", "format", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "try", "{", "delegate", ".", "close", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "handleException", "(", "format", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "synchronized", "void", "mark", "(", "int", "readlimit", ")", "{", "delegate", ".", "mark", "(", "readlimit", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "markSupported", "(", ")", "{", "return", "delegate", ".", "markSupported", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "reset", "(", ")", "throws", "IOException", "{", "try", "{", "delegate", ".", "reset", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "handleException", "(", "format", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "static", "BadMessageException", "handleException", "(", "String", "format", ",", "IOException", "e", ")", "throws", "IOException", "{", "if", "(", "e", "instanceof", "ZipException", ")", "{", "return", "buildBadDataException", "(", "format", ",", "e", ")", ";", "}", "else", "if", "(", "e", "instanceof", "EOFException", ")", "{", "return", "buildPrematureEofException", "(", "format", ",", "e", ")", ";", "}", "else", "{", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "private", "static", "BadMessageException", "buildBadDataException", "(", "String", "format", ",", "Throwable", "cause", ")", "{", "return", "new", "BadMessageException", "(", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", "+", "format", "+", "\"", "<STR_LIT>", "\"", ",", "cause", ")", ";", "}", "</s>"]
["<s>", "private", "static", "BadMessageException", "buildPrematureEofException", "(", "String", "format", ",", "Throwable", "cause", ")", "{", "return", "new", "BadMessageException", "(", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", "+", "format", "+", "\"", "<STR_LIT>", "\"", ",", "cause", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getAllowRenegotiation", "(", ")", "{", "return", "allowRenegotiation", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAllowRenegotiation", "(", "boolean", "allowRenegotiation", ")", "{", "this", ".", "allowRenegotiation", "=", "allowRenegotiation", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getEndpointIdentificationAlgorithm", "(", ")", "{", "return", "endpointIdentificationAlgorithm", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setEndpointIdentificationAlgorithm", "(", "String", "endpointIdentificationAlgorithm", ")", "{", "this", ".", "endpointIdentificationAlgorithm", "=", "endpointIdentificationAlgorithm", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getKeyStorePath", "(", ")", "{", "return", "keyStorePath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setKeyStorePath", "(", "String", "keyStorePath", ")", "{", "this", ".", "keyStorePath", "=", "keyStorePath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getKeyStorePassword", "(", ")", "{", "return", "keyStorePassword", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setKeyStorePassword", "(", "String", "keyStorePassword", ")", "{", "this", ".", "keyStorePassword", "=", "keyStorePassword", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getKeyStoreType", "(", ")", "{", "return", "keyStoreType", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setKeyStoreType", "(", "String", "keyStoreType", ")", "{", "this", ".", "keyStoreType", "=", "keyStoreType", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getKeyStoreProvider", "(", ")", "{", "return", "keyStoreProvider", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setKeyStoreProvider", "(", "String", "keyStoreProvider", ")", "{", "this", ".", "keyStoreProvider", "=", "keyStoreProvider", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getTrustStoreType", "(", ")", "{", "return", "trustStoreType", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTrustStoreType", "(", "String", "trustStoreType", ")", "{", "this", ".", "trustStoreType", "=", "trustStoreType", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getTrustStoreProvider", "(", ")", "{", "return", "trustStoreProvider", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTrustStoreProvider", "(", "String", "trustStoreProvider", ")", "{", "this", ".", "trustStoreProvider", "=", "trustStoreProvider", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getKeyManagerPassword", "(", ")", "{", "return", "keyManagerPassword", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setKeyManagerPassword", "(", "String", "keyManagerPassword", ")", "{", "this", ".", "keyManagerPassword", "=", "keyManagerPassword", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getTrustStorePath", "(", ")", "{", "return", "trustStorePath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTrustStorePath", "(", "String", "trustStorePath", ")", "{", "this", ".", "trustStorePath", "=", "trustStorePath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getTrustStorePassword", "(", ")", "{", "return", "trustStorePassword", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTrustStorePassword", "(", "@", "Nullable", "String", "trustStorePassword", ")", "{", "this", ".", "trustStorePassword", "=", "trustStorePassword", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Boolean", "getNeedClientAuth", "(", ")", "{", "return", "needClientAuth", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setNeedClientAuth", "(", "Boolean", "needClientAuth", ")", "{", "this", ".", "needClientAuth", "=", "needClientAuth", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Boolean", "getWantClientAuth", "(", ")", "{", "return", "wantClientAuth", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setWantClientAuth", "(", "Boolean", "wantClientAuth", ")", "{", "this", ".", "wantClientAuth", "=", "wantClientAuth", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getCertAlias", "(", ")", "{", "return", "certAlias", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setCertAlias", "(", "String", "certAlias", ")", "{", "this", ".", "certAlias", "=", "certAlias", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "File", "getCrlPath", "(", ")", "{", "return", "crlPath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setCrlPath", "(", "File", "crlPath", ")", "{", "this", ".", "crlPath", "=", "crlPath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Boolean", "getEnableCRLDP", "(", ")", "{", "return", "enableCRLDP", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setEnableCRLDP", "(", "Boolean", "enableCRLDP", ")", "{", "this", ".", "enableCRLDP", "=", "enableCRLDP", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Boolean", "getEnableOCSP", "(", ")", "{", "return", "enableOCSP", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setEnableOCSP", "(", "Boolean", "enableOCSP", ")", "{", "this", ".", "enableOCSP", "=", "enableOCSP", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Integer", "getMaxCertPathLength", "(", ")", "{", "return", "maxCertPathLength", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxCertPathLength", "(", "Integer", "maxCertPathLength", ")", "{", "this", ".", "maxCertPathLength", "=", "maxCertPathLength", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "URI", "getOcspResponderUrl", "(", ")", "{", "return", "ocspResponderUrl", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setOcspResponderUrl", "(", "URI", "ocspResponderUrl", ")", "{", "this", ".", "ocspResponderUrl", "=", "ocspResponderUrl", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getJceProvider", "(", ")", "{", "return", "jceProvider", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setJceProvider", "(", "String", "jceProvider", ")", "{", "this", ".", "jceProvider", "=", "jceProvider", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getValidatePeers", "(", ")", "{", "return", "validatePeers", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setValidatePeers", "(", "boolean", "validatePeers", ")", "{", "this", ".", "validatePeers", "=", "validatePeers", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "List", "<", "String", ">", "getSupportedProtocols", "(", ")", "{", "return", "supportedProtocols", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setSupportedProtocols", "(", "List", "<", "String", ">", "supportedProtocols", ")", "{", "this", ".", "supportedProtocols", "=", "supportedProtocols", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "List", "<", "String", ">", "getExcludedProtocols", "(", ")", "{", "return", "excludedProtocols", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setExcludedProtocols", "(", "List", "<", "String", ">", "excludedProtocols", ")", "{", "this", ".", "excludedProtocols", "=", "excludedProtocols", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "List", "<", "String", ">", "getSupportedCipherSuites", "(", ")", "{", "return", "supportedCipherSuites", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "List", "<", "String", ">", "getExcludedCipherSuites", "(", ")", "{", "return", "excludedCipherSuites", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setExcludedCipherSuites", "(", "List", "<", "String", ">", "excludedCipherSuites", ")", "{", "this", ".", "excludedCipherSuites", "=", "excludedCipherSuites", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setSupportedCipherSuites", "(", "List", "<", "String", ">", "supportedCipherSuites", ")", "{", "this", ".", "supportedCipherSuites", "=", "supportedCipherSuites", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isValidateCerts", "(", ")", "{", "return", "validateCerts", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setValidateCerts", "(", "boolean", "validateCerts", ")", "{", "this", ".", "validateCerts", "=", "validateCerts", ";", "}", "</s>"]
["<s>", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isValidKeyStorePath", "(", ")", "{", "return", "keyStoreType", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", "|", "|", "keyStorePath", "!", "=", "null", ";", "}", "</s>"]
["<s>", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isValidKeyStorePassword", "(", ")", "{", "return", "keyStoreType", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", "|", "|", "!", "Strings", ".", "isNullOrEmpty", "(", "keyStorePassword", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Connector", "build", "(", "Server", "server", ",", "MetricRegistry", "metrics", ",", "String", "name", ",", "@", "Nullable", "ThreadPool", "threadPool", ")", "{", "final", "HttpConfiguration", "httpConfig", "=", "buildHttpConfiguration", "(", ")", ";", "final", "HttpConnectionFactory", "httpConnectionFactory", "=", "buildHttpConnectionFactory", "(", "httpConfig", ")", ";", "final", "SslContextFactory", "sslContextFactory", "=", "configureSslContextFactory", "(", "new", "SslContextFactory", "(", ")", ")", ";", "sslContextFactory", ".", "addLifeCycleListener", "(", "logSslInfoOnStart", "(", "sslContextFactory", ")", ")", ";", "server", ".", "addBean", "(", "sslContextFactory", ")", ";", "server", ".", "addBean", "(", "new", "SslReload", "(", "sslContextFactory", ",", "this", ":", ":", "configureSslContextFactory", ")", ")", ";", "final", "SslConnectionFactory", "sslConnectionFactory", "=", "new", "SslConnectionFactory", "(", "sslContextFactory", ",", "HttpVersion", ".", "HTTP_1_1", ".", "toString", "(", ")", ")", ";", "final", "Scheduler", "scheduler", "=", "new", "ScheduledExecutorScheduler", "(", ")", ";", "final", "ByteBufferPool", "bufferPool", "=", "buildBufferPool", "(", ")", ";", "return", "buildConnector", "(", "server", ",", "scheduler", ",", "bufferPool", ",", "name", ",", "threadPool", ",", "new", "Jetty93InstrumentedConnectionFactory", "(", "sslConnectionFactory", ",", "metrics", ".", "timer", "(", "httpConnections", "(", ")", ")", ")", ",", "httpConnectionFactory", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "HttpConfiguration", "buildHttpConfiguration", "(", ")", "{", "final", "HttpConfiguration", "config", "=", "super", ".", "buildHttpConfiguration", "(", ")", ";", "config", ".", "setSecureScheme", "(", "\"", "<STR_LIT>", "\"", ")", ";", "config", ".", "setSecurePort", "(", "getPort", "(", ")", ")", ";", "config", ".", "addCustomizer", "(", "new", "SecureRequestCustomizer", "(", ")", ")", ";", "return", "config", ";", "}", "</s>"]
["<s>", "protected", "AbstractLifeCycle", ".", "AbstractLifeCycleListener", "logSslInfoOnStart", "(", "final", "SslContextFactory", "sslContextFactory", ")", "{", "return", "new", "AbstractLifeCycle", ".", "AbstractLifeCycleListener", "(", ")", "{", "@", "Override", "public", "void", "lifeCycleStarted", "(", "LifeCycle", "event", ")", "{", "logSupportedParameters", "(", "sslContextFactory", ".", "getSslContext", "(", ")", ")", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "lifeCycleStarted", "(", "LifeCycle", "event", ")", "{", "logSupportedParameters", "(", "sslContextFactory", ".", "getSslContext", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "logSupportedParameters", "(", "SSLContext", "context", ")", "{", "if", "(", "LOGGED", ".", "compareAndSet", "(", "false", ",", "true", ")", ")", "{", "final", "String", "[", "]", "protocols", "=", "context", ".", "getSupportedSSLParameters", "(", ")", ".", "getProtocols", "(", ")", ";", "final", "SSLSocketFactory", "factory", "=", "context", ".", "getSocketFactory", "(", ")", ";", "final", "String", "[", "]", "cipherSuites", "=", "factory", ".", "getSupportedCipherSuites", "(", ")", ";", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "toString", "(", "protocols", ")", ")", ";", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "toString", "(", "cipherSuites", ")", ")", ";", "if", "(", "getSupportedProtocols", "(", ")", "!", "=", "null", ")", "{", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "getSupportedProtocols", "(", ")", ")", ";", "}", "if", "(", "getExcludedProtocols", "(", ")", "!", "=", "null", ")", "{", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "getExcludedProtocols", "(", ")", ")", ";", "}", "if", "(", "getSupportedCipherSuites", "(", ")", "!", "=", "null", ")", "{", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "getSupportedCipherSuites", "(", ")", ")", ";", "}", "if", "(", "getExcludedCipherSuites", "(", ")", "!", "=", "null", ")", "{", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "getExcludedCipherSuites", "(", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "protected", "SslContextFactory", "configureSslContextFactory", "(", "SslContextFactory", "factory", ")", "{", "if", "(", "keyStorePath", "!", "=", "null", ")", "{", "factory", ".", "setKeyStorePath", "(", "keyStorePath", ")", ";", "}", "final", "String", "keyStoreType", "=", "getKeyStoreType", "(", ")", ";", "if", "(", "keyStoreType", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "try", "{", "final", "KeyStore", "keyStore", "=", "KeyStore", ".", "getInstance", "(", "keyStoreType", ")", ";", "keyStore", ".", "load", "(", "null", ",", "null", ")", ";", "factory", ".", "setKeyStore", "(", "keyStore", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "else", "{", "factory", ".", "setKeyStoreType", "(", "keyStoreType", ")", ";", "factory", ".", "setKeyStorePassword", "(", "keyStorePassword", ")", ";", "}", "if", "(", "keyStoreProvider", "!", "=", "null", ")", "{", "factory", ".", "setKeyStoreProvider", "(", "keyStoreProvider", ")", ";", "}", "final", "String", "trustStoreType", "=", "getTrustStoreType", "(", ")", ";", "if", "(", "trustStoreType", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "try", "{", "final", "KeyStore", "keyStore", "=", "KeyStore", ".", "getInstance", "(", "trustStoreType", ")", ";", "keyStore", ".", "load", "(", "null", ",", "null", ")", ";", "factory", ".", "setTrustStore", "(", "keyStore", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "else", "{", "if", "(", "trustStorePath", "!", "=", "null", ")", "{", "factory", ".", "setTrustStorePath", "(", "trustStorePath", ")", ";", "}", "if", "(", "trustStorePassword", "!", "=", "null", ")", "{", "factory", ".", "setTrustStorePassword", "(", "trustStorePassword", ")", ";", "}", "factory", ".", "setTrustStoreType", "(", "trustStoreType", ")", ";", "}", "if", "(", "trustStoreProvider", "!", "=", "null", ")", "{", "factory", ".", "setTrustStoreProvider", "(", "trustStoreProvider", ")", ";", "}", "if", "(", "keyManagerPassword", "!", "=", "null", ")", "{", "factory", ".", "setKeyManagerPassword", "(", "keyManagerPassword", ")", ";", "}", "if", "(", "needClientAuth", "!", "=", "null", ")", "{", "factory", ".", "setNeedClientAuth", "(", "needClientAuth", ")", ";", "}", "if", "(", "wantClientAuth", "!", "=", "null", ")", "{", "factory", ".", "setWantClientAuth", "(", "wantClientAuth", ")", ";", "}", "if", "(", "certAlias", "!", "=", "null", ")", "{", "factory", ".", "setCertAlias", "(", "certAlias", ")", ";", "}", "if", "(", "crlPath", "!", "=", "null", ")", "{", "factory", ".", "setCrlPath", "(", "crlPath", ".", "getAbsolutePath", "(", ")", ")", ";", "}", "if", "(", "enableCRLDP", "!", "=", "null", ")", "{", "factory", ".", "setEnableCRLDP", "(", "enableCRLDP", ")", ";", "}", "if", "(", "enableOCSP", "!", "=", "null", ")", "{", "factory", ".", "setEnableOCSP", "(", "enableOCSP", ")", ";", "}", "if", "(", "maxCertPathLength", "!", "=", "null", ")", "{", "factory", ".", "setMaxCertPathLength", "(", "maxCertPathLength", ")", ";", "}", "if", "(", "ocspResponderUrl", "!", "=", "null", ")", "{", "factory", ".", "setOcspResponderURL", "(", "ocspResponderUrl", ".", "toASCIIString", "(", ")", ")", ";", "}", "if", "(", "jceProvider", "!", "=", "null", ")", "{", "factory", ".", "setProvider", "(", "jceProvider", ")", ";", "}", "factory", ".", "setRenegotiationAllowed", "(", "allowRenegotiation", ")", ";", "factory", ".", "setEndpointIdentificationAlgorithm", "(", "endpointIdentificationAlgorithm", ")", ";", "factory", ".", "setValidateCerts", "(", "validateCerts", ")", ";", "factory", ".", "setValidatePeerCerts", "(", "validatePeers", ")", ";", "if", "(", "supportedProtocols", "!", "=", "null", ")", "{", "factory", ".", "setIncludeProtocols", "(", "Iterables", ".", "toArray", "(", "supportedProtocols", ",", "String", ".", "class", ")", ")", ";", "}", "if", "(", "excludedProtocols", "!", "=", "null", ")", "{", "factory", ".", "setExcludeProtocols", "(", "Iterables", ".", "toArray", "(", "excludedProtocols", ",", "String", ".", "class", ")", ")", ";", "}", "if", "(", "supportedCipherSuites", "!", "=", "null", ")", "{", "factory", ".", "setIncludeCipherSuites", "(", "Iterables", ".", "toArray", "(", "supportedCipherSuites", ",", "String", ".", "class", ")", ")", ";", "}", "if", "(", "excludedCipherSuites", "!", "=", "null", ")", "{", "factory", ".", "setExcludeCipherSuites", "(", "Iterables", ".", "toArray", "(", "excludedCipherSuites", ",", "String", ".", "class", ")", ")", ";", "}", "return", "factory", ";", "}", "</s>"]
["<s>", "public", "ContextRoutingHandler", "(", "Map", "<", "String", ",", "?", "extends", "Handler", ">", "handlers", ")", "{", "this", ".", "handlers", "=", "new", "ArrayTernaryTrie", "<", ">", "(", "false", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "?", "extends", "Handler", ">", "entry", ":", "handlers", ".", "entrySet", "(", ")", ")", "{", "if", "(", "!", "this", ".", "handlers", ".", "put", "(", "entry", ".", "getKey", "(", ")", ",", "entry", ".", "getValue", "(", ")", ")", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "addBean", "(", "entry", ".", "getValue", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "handle", "(", "String", "target", ",", "Request", "baseRequest", ",", "HttpServletRequest", "request", ",", "HttpServletResponse", "response", ")", "throws", "IOException", ",", "ServletException", "{", "final", "Handler", "handler", "=", "handlers", ".", "getBest", "(", "baseRequest", ".", "getRequestURI", "(", ")", ")", ";", "if", "(", "handler", "!", "=", "null", ")", "{", "handler", ".", "handle", "(", "target", ",", "baseRequest", ",", "request", ",", "response", ")", ";", "}", "}", "</s>"]
["<s>", "public", "SslReload", "(", "SslContextFactory", "factory", ",", "Consumer", "<", "SslContextFactory", ">", "configurer", ")", "{", "this", ".", "factory", "=", "factory", ";", "this", ".", "configurer", "=", "configurer", ";", "}", "</s>"]
["<s>", "public", "void", "reload", "(", ")", "throws", "Exception", "{", "getFactory", "(", ")", ".", "reload", "(", "configurer", ")", ";", "}", "</s>"]
["<s>", "public", "void", "reload", "(", "SslContextFactory", "factory", ")", "throws", "Exception", "{", "factory", ".", "reload", "(", "configurer", ")", ";", "}", "</s>"]
["<s>", "public", "SslContextFactory", "getFactory", "(", ")", "{", "return", "factory", ";", "}", "</s>"]
["<s>", "public", "Jetty93InstrumentedConnectionFactory", "(", "ConnectionFactory", "connectionFactory", ",", "Timer", "timer", ")", "{", "this", ".", "connectionFactory", "=", "connectionFactory", ";", "this", ".", "timer", "=", "timer", ";", "addBean", "(", "connectionFactory", ")", ";", "}", "</s>"]
["<s>", "public", "ConnectionFactory", "getConnectionFactory", "(", ")", "{", "return", "connectionFactory", ";", "}", "</s>"]
["<s>", "public", "Timer", "getTimer", "(", ")", "{", "return", "timer", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getProtocol", "(", ")", "{", "return", "connectionFactory", ".", "getProtocol", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "List", "<", "String", ">", "getProtocols", "(", ")", "{", "return", "connectionFactory", ".", "getProtocols", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Connection", "newConnection", "(", "Connector", "connector", ",", "EndPoint", "endPoint", ")", "{", "final", "Connection", "connection", "=", "connectionFactory", ".", "newConnection", "(", "connector", ",", "endPoint", ")", ";", "connection", ".", "addListener", "(", "new", "Connection", ".", "Listener", "(", ")", "{", "@", "Nullable", "private", "Timer", ".", "Context", "context", ";", "@", "Override", "public", "void", "onOpened", "(", "Connection", "connection", ")", "{", "this", ".", "context", "=", "timer", ".", "time", "(", ")", ";", "}", "@", "Override", "public", "void", "onClosed", "(", "Connection", "connection", ")", "{", "requireNonNull", "(", "context", ")", ".", "stop", "(", ")", ";", "}", "}", ")", ";", "return", "connection", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onOpened", "(", "Connection", "connection", ")", "{", "this", ".", "context", "=", "timer", ".", "time", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onClosed", "(", "Connection", "connection", ")", "{", "requireNonNull", "(", "context", ")", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isEnabled", "(", ")", "{", "return", "enabled", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setEnabled", "(", "boolean", "enabled", ")", "{", "this", ".", "enabled", "=", "enabled", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getAssociatePeriod", "(", ")", "{", "return", "associatePeriod", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAssociatePeriod", "(", "Duration", "associatePeriod", ")", "{", "this", ".", "associatePeriod", "=", "associatePeriod", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getMaxAssociations", "(", ")", "{", "return", "maxAssociations", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxAssociations", "(", "int", "maxAssociations", ")", "{", "this", ".", "maxAssociations", "=", "maxAssociations", ";", "}", "</s>"]
["<s>", "@", "Nullable", "@", "JsonProperty", "public", "List", "<", "String", ">", "getRefererHosts", "(", ")", "{", "return", "refererHosts", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setRefererHosts", "(", "@", "Nullable", "List", "<", "String", ">", "refererHosts", ")", "{", "this", ".", "refererHosts", "=", "refererHosts", ";", "}", "</s>"]
["<s>", "@", "Nullable", "@", "JsonProperty", "public", "List", "<", "Integer", ">", "getRefererPorts", "(", ")", "{", "return", "refererPorts", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setRefererPorts", "(", "@", "Nullable", "List", "<", "Integer", ">", "refererPorts", ")", "{", "this", ".", "refererPorts", "=", "refererPorts", ";", "}", "</s>"]
["<s>", "public", "void", "addFilter", "(", "ServletContextHandler", "handler", ")", "{", "if", "(", "!", "enabled", ")", "{", "return", ";", "}", "handler", ".", "setInitParameter", "(", "\"", "<STR_LIT>", "\"", ",", "String", ".", "valueOf", "(", "associatePeriod", ".", "toMilliseconds", "(", ")", ")", ")", ";", "handler", ".", "setInitParameter", "(", "\"", "<STR_LIT>", "\"", ",", "String", ".", "valueOf", "(", "maxAssociations", ")", ")", ";", "if", "(", "refererHosts", "!", "=", "null", ")", "{", "handler", ".", "setInitParameter", "(", "\"", "<STR_LIT>", "\"", ",", "COMMA_JOINER", ".", "join", "(", "refererHosts", ")", ")", ";", "}", "if", "(", "refererPorts", "!", "=", "null", ")", "{", "handler", ".", "setInitParameter", "(", "\"", "<STR_LIT>", "\"", ",", "COMMA_JOINER", ".", "join", "(", "refererPorts", ")", ")", ";", "}", "handler", ".", "addFilter", "(", "PushCacheFilter", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "EnumSet", ".", "of", "(", "DispatcherType", ".", "REQUEST", ")", ")", ";", "}", "</s>"]
["<s>", "private", "Entry", "(", "Connector", "connector", ",", "Handler", "handler", ")", "{", "this", ".", "connector", "=", "connector", ";", "this", ".", "handler", "=", "handler", ";", "}", "</s>"]
["<s>", "public", "RoutingHandler", "(", "Map", "<", "Connector", ",", "Handler", ">", "handlers", ")", "{", "this", ".", "entries", "=", "new", "Entry", "[", "handlers", ".", "size", "(", ")", "]", ";", "int", "i", "=", "0", ";", "for", "(", "Map", ".", "Entry", "<", "Connector", ",", "Handler", ">", "entry", ":", "handlers", ".", "entrySet", "(", ")", ")", "{", "this", ".", "entries", "[", "i", "+", "+", "]", "=", "new", "Entry", "(", "entry", ".", "getKey", "(", ")", ",", "entry", ".", "getValue", "(", ")", ")", ";", "addBean", "(", "entry", ".", "getValue", "(", ")", ")", ";", "}", "setHandlers", "(", "handlers", ".", "values", "(", ")", ".", "toArray", "(", "new", "Handler", "[", "handlers", ".", "size", "(", ")", "]", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "handle", "(", "String", "target", ",", "Request", "baseRequest", ",", "HttpServletRequest", "request", ",", "HttpServletResponse", "response", ")", "throws", "IOException", ",", "ServletException", "{", "final", "Connector", "connector", "=", "baseRequest", ".", "getHttpChannel", "(", ")", ".", "getConnector", "(", ")", ";", "for", "(", "Entry", "entry", ":", "entries", ")", "{", "if", "(", "entry", ".", "connector", "=", "=", "connector", ")", "{", "entry", ".", "handler", ".", "handle", "(", "target", ",", "baseRequest", ",", "request", ",", "response", ")", ";", "return", ";", "}", "}", "}", "</s>"]
["<s>", "public", "boolean", "use", "(", "NetworkInterface", "networkInterface", ",", "InetAddress", "address", ")", "throws", "SocketException", ";", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isEnabled", "(", ")", "{", "return", "enabled", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setEnabled", "(", "boolean", "enabled", ")", "{", "this", ".", "enabled", "=", "enabled", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Size", "getMinimumEntitySize", "(", ")", "{", "return", "minimumEntitySize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMinimumEntitySize", "(", "Size", "size", ")", "{", "this", ".", "minimumEntitySize", "=", "requireNonNull", "(", "size", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Size", "getBufferSize", "(", ")", "{", "return", "bufferSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setBufferSize", "(", "Size", "size", ")", "{", "this", ".", "bufferSize", "=", "requireNonNull", "(", "size", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Set", "<", "String", ">", "getCompressedMimeTypes", "(", ")", "{", "return", "compressedMimeTypes", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setCompressedMimeTypes", "(", "Set", "<", "String", ">", "mimeTypes", ")", "{", "this", ".", "compressedMimeTypes", "=", "mimeTypes", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getDeflateCompressionLevel", "(", ")", "{", "return", "deflateCompressionLevel", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setDeflateCompressionLevel", "(", "int", "level", ")", "{", "this", ".", "deflateCompressionLevel", "=", "level", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isGzipCompatibleInflation", "(", ")", "{", "return", "gzipCompatibleInflation", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setGzipCompatibleInflation", "(", "boolean", "gzipCompatibleInflation", ")", "{", "this", ".", "gzipCompatibleInflation", "=", "gzipCompatibleInflation", ";", "}", "</s>"]
["<s>", "public", "Set", "<", "String", ">", "getExcludedUserAgentPatterns", "(", ")", "{", "return", "excludedUserAgentPatterns", ";", "}", "</s>"]
["<s>", "public", "void", "setExcludedUserAgentPatterns", "(", "Set", "<", "String", ">", "excludedUserAgentPatterns", ")", "{", "this", ".", "excludedUserAgentPatterns", "=", "excludedUserAgentPatterns", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Set", "<", "String", ">", "getIncludedMethods", "(", ")", "{", "return", "includedMethods", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setIncludedMethods", "(", "Set", "<", "String", ">", "methods", ")", "{", "this", ".", "includedMethods", "=", "methods", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isSyncFlush", "(", ")", "{", "return", "syncFlush", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setSyncFlush", "(", "boolean", "syncFlush", ")", "{", "this", ".", "syncFlush", "=", "syncFlush", ";", "}", "</s>"]
["<s>", "public", "BiDiGzipHandler", "build", "(", "@", "Nullable", "Handler", "handler", ")", "{", "final", "BiDiGzipHandler", "gzipHandler", "=", "new", "BiDiGzipHandler", "(", ")", ";", "gzipHandler", ".", "setHandler", "(", "handler", ")", ";", "gzipHandler", ".", "setMinGzipSize", "(", "(", "int", ")", "minimumEntitySize", ".", "toBytes", "(", ")", ")", ";", "gzipHandler", ".", "setInputBufferSize", "(", "(", "int", ")", "bufferSize", ".", "toBytes", "(", ")", ")", ";", "gzipHandler", ".", "setCompressionLevel", "(", "deflateCompressionLevel", ")", ";", "gzipHandler", ".", "setSyncFlush", "(", "syncFlush", ")", ";", "if", "(", "compressedMimeTypes", "!", "=", "null", ")", "{", "gzipHandler", ".", "setIncludedMimeTypes", "(", "Iterables", ".", "toArray", "(", "compressedMimeTypes", ",", "String", ".", "class", ")", ")", ";", "}", "if", "(", "includedMethods", "!", "=", "null", ")", "{", "gzipHandler", ".", "setIncludedMethods", "(", "Iterables", ".", "toArray", "(", "includedMethods", ",", "String", ".", "class", ")", ")", ";", "}", "gzipHandler", ".", "setExcludedAgentPatterns", "(", "Iterables", ".", "toArray", "(", "excludedUserAgentPatterns", ",", "String", ".", "class", ")", ")", ";", "gzipHandler", ".", "setInflateNoWrap", "(", "gzipCompatibleInflation", ")", ";", "return", "gzipHandler", ";", "}", "</s>"]
["<s>", "public", "boolean", "isSecurityEnabled", "(", ")", "{", "return", "(", "this", ".", "_options", "&", "SECURITY", ")", "!", "=", "0", ";", "}", "</s>"]
["<s>", "public", "void", "setSecurityEnabled", "(", "boolean", "enabled", ")", "{", "if", "(", "enabled", ")", "{", "this", ".", "_options", "|", "=", "SECURITY", ";", "}", "else", "{", "this", ".", "_options", "&", "=", "~", "SECURITY", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "isSessionsEnabled", "(", ")", "{", "return", "(", "this", ".", "_options", "&", "SESSIONS", ")", "!", "=", "0", ";", "}", "</s>"]
["<s>", "public", "void", "setSessionsEnabled", "(", "boolean", "enabled", ")", "{", "if", "(", "enabled", ")", "{", "this", ".", "_options", "|", "=", "SESSIONS", ";", "}", "else", "{", "this", ".", "_options", "&", "=", "~", "SESSIONS", ";", "}", "}", "</s>"]
["<s>", "public", "static", "ConnectorFactory", "application", "(", ")", "{", "final", "HttpConnectorFactory", "factory", "=", "new", "HttpConnectorFactory", "(", ")", ";", "factory", ".", "port", "=", "<NUM_LIT>", ";", "return", "factory", ";", "}", "</s>"]
["<s>", "public", "static", "ConnectorFactory", "admin", "(", ")", "{", "final", "HttpConnectorFactory", "factory", "=", "new", "HttpConnectorFactory", "(", ")", ";", "factory", ".", "port", "=", "<NUM_LIT>", ";", "return", "factory", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getPort", "(", ")", "{", "return", "port", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setPort", "(", "int", "port", ")", "{", "this", ".", "port", "=", "port", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getBindHost", "(", ")", "{", "return", "bindHost", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setBindHost", "(", "String", "bindHost", ")", "{", "this", ".", "bindHost", "=", "bindHost", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isInheritChannel", "(", ")", "{", "return", "inheritChannel", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setInheritChannel", "(", "boolean", "inheritChannel", ")", "{", "this", ".", "inheritChannel", "=", "inheritChannel", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Size", "getHeaderCacheSize", "(", ")", "{", "return", "headerCacheSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setHeaderCacheSize", "(", "Size", "headerCacheSize", ")", "{", "this", ".", "headerCacheSize", "=", "headerCacheSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Size", "getOutputBufferSize", "(", ")", "{", "return", "outputBufferSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setOutputBufferSize", "(", "Size", "outputBufferSize", ")", "{", "this", ".", "outputBufferSize", "=", "outputBufferSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Size", "getMaxRequestHeaderSize", "(", ")", "{", "return", "maxRequestHeaderSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxRequestHeaderSize", "(", "Size", "maxRequestHeaderSize", ")", "{", "this", ".", "maxRequestHeaderSize", "=", "maxRequestHeaderSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Size", "getMaxResponseHeaderSize", "(", ")", "{", "return", "maxResponseHeaderSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxResponseHeaderSize", "(", "Size", "maxResponseHeaderSize", ")", "{", "this", ".", "maxResponseHeaderSize", "=", "maxResponseHeaderSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Size", "getInputBufferSize", "(", ")", "{", "return", "inputBufferSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setInputBufferSize", "(", "Size", "inputBufferSize", ")", "{", "this", ".", "inputBufferSize", "=", "inputBufferSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getIdleTimeout", "(", ")", "{", "return", "idleTimeout", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setIdleTimeout", "(", "Duration", "idleTimeout", ")", "{", "this", ".", "idleTimeout", "=", "idleTimeout", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Duration", "getBlockingTimeout", "(", ")", "{", "return", "blockingTimeout", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setBlockingTimeout", "(", "Duration", "blockingTimeout", ")", "{", "this", ".", "blockingTimeout", "=", "blockingTimeout", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Size", "getMinBufferPoolSize", "(", ")", "{", "return", "minBufferPoolSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMinBufferPoolSize", "(", "Size", "minBufferPoolSize", ")", "{", "this", ".", "minBufferPoolSize", "=", "minBufferPoolSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Size", "getBufferPoolIncrement", "(", ")", "{", "return", "bufferPoolIncrement", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setBufferPoolIncrement", "(", "Size", "bufferPoolIncrement", ")", "{", "this", ".", "bufferPoolIncrement", "=", "bufferPoolIncrement", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Size", "getMaxBufferPoolSize", "(", ")", "{", "return", "maxBufferPoolSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxBufferPoolSize", "(", "Size", "maxBufferPoolSize", ")", "{", "this", ".", "maxBufferPoolSize", "=", "maxBufferPoolSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "long", "getMinRequestDataRate", "(", ")", "{", "return", "minRequestDataRate", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMinRequestDataRate", "(", "long", "minRequestDataRate", ")", "{", "this", ".", "minRequestDataRate", "=", "minRequestDataRate", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Optional", "<", "Integer", ">", "getAcceptorThreads", "(", ")", "{", "return", "acceptorThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAcceptorThreads", "(", "Optional", "<", "Integer", ">", "acceptorThreads", ")", "{", "this", ".", "acceptorThreads", "=", "acceptorThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Optional", "<", "Integer", ">", "getSelectorThreads", "(", ")", "{", "return", "selectorThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setSelectorThreads", "(", "Optional", "<", "Integer", ">", "selectorThreads", ")", "{", "this", ".", "selectorThreads", "=", "selectorThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Integer", "getAcceptQueueSize", "(", ")", "{", "return", "acceptQueueSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAcceptQueueSize", "(", "Integer", "acceptQueueSize", ")", "{", "this", ".", "acceptQueueSize", "=", "acceptQueueSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isReuseAddress", "(", ")", "{", "return", "reuseAddress", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setReuseAddress", "(", "boolean", "reuseAddress", ")", "{", "this", ".", "reuseAddress", "=", "reuseAddress", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Duration", "getSoLingerTime", "(", ")", "{", "return", "soLingerTime", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setSoLingerTime", "(", "Duration", "soLingerTime", ")", "{", "this", ".", "soLingerTime", "=", "soLingerTime", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isUseServerHeader", "(", ")", "{", "return", "useServerHeader", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setUseServerHeader", "(", "boolean", "useServerHeader", ")", "{", "this", ".", "useServerHeader", "=", "useServerHeader", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isUseDateHeader", "(", ")", "{", "return", "useDateHeader", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setUseDateHeader", "(", "boolean", "useDateHeader", ")", "{", "this", ".", "useDateHeader", "=", "useDateHeader", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isUseForwardedHeaders", "(", ")", "{", "return", "useForwardedHeaders", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setUseForwardedHeaders", "(", "boolean", "useForwardedHeaders", ")", "{", "this", ".", "useForwardedHeaders", "=", "useForwardedHeaders", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "HttpCompliance", "getHttpCompliance", "(", ")", "{", "return", "httpCompliance", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setHttpCompliance", "(", "HttpCompliance", "httpCompliance", ")", "{", "this", ".", "httpCompliance", "=", "httpCompliance", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Connector", "build", "(", "Server", "server", ",", "MetricRegistry", "metrics", ",", "String", "name", ",", "@", "Nullable", "ThreadPool", "threadPool", ")", "{", "final", "HttpConfiguration", "httpConfig", "=", "buildHttpConfiguration", "(", ")", ";", "final", "HttpConnectionFactory", "httpConnectionFactory", "=", "buildHttpConnectionFactory", "(", "httpConfig", ")", ";", "final", "Scheduler", "scheduler", "=", "new", "ScheduledExecutorScheduler", "(", ")", ";", "final", "ByteBufferPool", "bufferPool", "=", "buildBufferPool", "(", ")", ";", "return", "buildConnector", "(", "server", ",", "scheduler", ",", "bufferPool", ",", "name", ",", "threadPool", ",", "new", "Jetty93InstrumentedConnectionFactory", "(", "httpConnectionFactory", ",", "metrics", ".", "timer", "(", "httpConnections", "(", ")", ")", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "String", "httpConnections", "(", ")", "{", "return", "name", "(", "HttpConnectionFactory", ".", "class", ",", "bindHost", ",", "Integer", ".", "toString", "(", "port", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "protected", "ServerConnector", "buildConnector", "(", "Server", "server", ",", "Scheduler", "scheduler", ",", "ByteBufferPool", "bufferPool", ",", "String", "name", ",", "@", "Nullable", "ThreadPool", "threadPool", ",", "ConnectionFactory", ".", ".", ".", "factories", ")", "{", "final", "ServerConnector", "connector", "=", "new", "ServerConnector", "(", "server", ",", "threadPool", ",", "scheduler", ",", "bufferPool", ",", "acceptorThreads", ".", "orElse", "(", "-", "1", ")", ",", "selectorThreads", ".", "orElse", "(", "-", "1", ")", ",", "factories", ")", ";", "connector", ".", "setPort", "(", "port", ")", ";", "connector", ".", "setHost", "(", "bindHost", ")", ";", "connector", ".", "setInheritChannel", "(", "inheritChannel", ")", ";", "if", "(", "acceptQueueSize", "!", "=", "null", ")", "{", "connector", ".", "setAcceptQueueSize", "(", "acceptQueueSize", ")", ";", "}", "else", "{", "connector", ".", "setAcceptQueueSize", "(", "NetUtil", ".", "getTcpBacklog", "(", ")", ")", ";", "}", "connector", ".", "setReuseAddress", "(", "reuseAddress", ")", ";", "if", "(", "soLingerTime", "!", "=", "null", ")", "{", "connector", ".", "setSoLingerTime", "(", "(", "int", ")", "soLingerTime", ".", "toMilliseconds", "(", ")", ")", ";", "}", "connector", ".", "setIdleTimeout", "(", "idleTimeout", ".", "toMilliseconds", "(", ")", ")", ";", "connector", ".", "setName", "(", "name", ")", ";", "return", "connector", ";", "}", "</s>"]
["<s>", "protected", "HttpConnectionFactory", "buildHttpConnectionFactory", "(", "HttpConfiguration", "httpConfig", ")", "{", "final", "HttpConnectionFactory", "httpConnectionFactory", "=", "new", "HttpConnectionFactory", "(", "httpConfig", ",", "httpCompliance", ")", ";", "httpConnectionFactory", ".", "setInputBufferSize", "(", "(", "int", ")", "inputBufferSize", ".", "toBytes", "(", ")", ")", ";", "return", "httpConnectionFactory", ";", "}", "</s>"]
["<s>", "protected", "HttpConfiguration", "buildHttpConfiguration", "(", ")", "{", "final", "HttpConfiguration", "httpConfig", "=", "new", "HttpConfiguration", "(", ")", ";", "httpConfig", ".", "setHeaderCacheSize", "(", "(", "int", ")", "headerCacheSize", ".", "toBytes", "(", ")", ")", ";", "httpConfig", ".", "setOutputBufferSize", "(", "(", "int", ")", "outputBufferSize", ".", "toBytes", "(", ")", ")", ";", "httpConfig", ".", "setRequestHeaderSize", "(", "(", "int", ")", "maxRequestHeaderSize", ".", "toBytes", "(", ")", ")", ";", "httpConfig", ".", "setResponseHeaderSize", "(", "(", "int", ")", "maxResponseHeaderSize", ".", "toBytes", "(", ")", ")", ";", "httpConfig", ".", "setSendDateHeader", "(", "useDateHeader", ")", ";", "httpConfig", ".", "setSendServerVersion", "(", "useServerHeader", ")", ";", "httpConfig", ".", "setMinRequestDataRate", "(", "minRequestDataRate", ")", ";", "if", "(", "useForwardedHeaders", ")", "{", "httpConfig", ".", "addCustomizer", "(", "new", "ForwardedRequestCustomizer", "(", ")", ")", ";", "}", "if", "(", "blockingTimeout", "!", "=", "null", ")", "{", "httpConfig", ".", "setBlockingTimeout", "(", "blockingTimeout", ".", "toMilliseconds", "(", ")", ")", ";", "}", "return", "httpConfig", ";", "}", "</s>"]
["<s>", "protected", "ByteBufferPool", "buildBufferPool", "(", ")", "{", "return", "new", "ArrayByteBufferPool", "(", "(", "int", ")", "minBufferPoolSize", ".", "toBytes", "(", ")", ",", "(", "int", ")", "bufferPoolIncrement", ".", "toBytes", "(", ")", ",", "(", "int", ")", "maxBufferPoolSize", ".", "toBytes", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "NonblockingServletHolder", "(", "Servlet", "servlet", ")", "{", "super", "(", "servlet", ")", ";", "setInitOrder", "(", "1", ")", ";", "this", ".", "servlet", "=", "servlet", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "o", ")", "{", "return", "super", ".", "equals", "(", "o", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "super", ".", "hashCode", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "synchronized", "Servlet", "getServlet", "(", ")", "throws", "ServletException", "{", "return", "servlet", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "handle", "(", "Request", "baseRequest", ",", "ServletRequest", "request", ",", "ServletResponse", "response", ")", "throws", "ServletException", ",", "IOException", "{", "final", "boolean", "asyncSupported", "=", "baseRequest", ".", "isAsyncSupported", "(", ")", ";", "if", "(", "!", "isAsyncSupported", "(", ")", ")", "{", "baseRequest", ".", "setAsyncSupported", "(", "false", ",", "null", ")", ";", "}", "try", "{", "servlet", ".", "service", "(", "request", ",", "response", ")", ";", "}", "finally", "{", "baseRequest", ".", "setAsyncSupported", "(", "asyncSupported", ",", "null", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "int", "getTcpBacklog", "(", ")", "{", "return", "getTcpBacklog", "(", "getDefaultTcpBacklog", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "int", "getTcpBacklog", "(", "int", "tcpBacklog", ")", "{", "return", "AccessController", ".", "doPrivileged", "(", "(", "PrivilegedAction", "<", "Integer", ">", ")", "(", ")", "-", ">", "{", "try", "{", "return", "Integer", ".", "parseInt", "(", "new", "String", "(", "Files", ".", "readAllBytes", "(", "Paths", ".", "get", "(", "TCP_BACKLOG_SETTING_LOCATION", ")", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ".", "trim", "(", ")", ")", ";", "}", "catch", "(", "SecurityException", "|", "IOException", "|", "NumberFormatException", "|", "NullPointerException", "e", ")", "{", "return", "tcpBacklog", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isWindows", "(", ")", "{", "final", "boolean", "windows", "=", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "toLowerCase", "(", "Locale", ".", "US", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "windows", ";", "}", "</s>"]
["<s>", "public", "static", "int", "getDefaultTcpBacklog", "(", ")", "{", "return", "isWindows", "(", ")", "?", "DEFAULT_TCP_BACKLOG_WINDOWS", ":", "DEFAULT_TCP_BACKLOG_LINUX", ";", "}", "</s>"]
["<s>", "public", "static", "void", "setLocalIpFilter", "(", "LocalIpFilter", "newLocalIpFilter", ")", "{", "requireNonNull", "(", "newLocalIpFilter", ")", ";", "LOCAL_IP_FILTER", ".", "set", "(", "newLocalIpFilter", ")", ";", "}", "</s>"]
["<s>", "public", "static", "LocalIpFilter", "getLocalIpFilter", "(", ")", "{", "return", "requireNonNull", "(", "LOCAL_IP_FILTER", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Collection", "<", "InetAddress", ">", "getAllLocalIPs", "(", ")", "throws", "SocketException", "{", "final", "List", "<", "InetAddress", ">", "listAdr", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "final", "Enumeration", "<", "NetworkInterface", ">", "nifs", "=", "NetworkInterface", ".", "getNetworkInterfaces", "(", ")", ";", "if", "(", "nifs", "=", "=", "null", ")", "{", "return", "listAdr", ";", "}", "while", "(", "nifs", ".", "hasMoreElements", "(", ")", ")", "{", "final", "NetworkInterface", "nif", "=", "nifs", ".", "nextElement", "(", ")", ";", "final", "Enumeration", "<", "InetAddress", ">", "adrs", "=", "nif", ".", "getInetAddresses", "(", ")", ";", "while", "(", "adrs", ".", "hasMoreElements", "(", ")", ")", "{", "final", "InetAddress", "adr", "=", "adrs", ".", "nextElement", "(", ")", ";", "if", "(", "getLocalIpFilter", "(", ")", ".", "use", "(", "nif", ",", "adr", ")", ")", "{", "listAdr", ".", "add", "(", "adr", ")", ";", "}", "}", "}", "return", "listAdr", ";", "}", "</s>"]
["<s>", "Connector", "build", "(", "Server", "server", ",", "MetricRegistry", "metrics", ",", "String", "name", ",", "@", "Nullable", "ThreadPool", "threadPool", ")", ";", "</s>"]
["<s>", "public", "ServletEnvironment", "(", "MutableServletContextHandler", "handler", ")", "{", "this", ".", "handler", "=", "handler", ";", "}", "</s>"]
["<s>", "public", "ServletRegistration", ".", "Dynamic", "addServlet", "(", "String", "name", ",", "Servlet", "servlet", ")", "{", "final", "ServletHolder", "holder", "=", "new", "NonblockingServletHolder", "(", "requireNonNull", "(", "servlet", ")", ")", ";", "holder", ".", "setName", "(", "name", ")", ";", "handler", ".", "getServletHandler", "(", ")", ".", "addServlet", "(", "holder", ")", ";", "final", "ServletRegistration", ".", "Dynamic", "registration", "=", "holder", ".", "getRegistration", "(", ")", ";", "checkDuplicateRegistration", "(", "name", ",", "servlets", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "registration", ";", "}", "</s>"]
["<s>", "public", "ServletRegistration", ".", "Dynamic", "addServlet", "(", "String", "name", ",", "Class", "<", "?", "extends", "Servlet", ">", "klass", ")", "{", "final", "ServletHolder", "holder", "=", "new", "ServletHolder", "(", "requireNonNull", "(", "klass", ")", ")", ";", "holder", ".", "setName", "(", "name", ")", ";", "handler", ".", "getServletHandler", "(", ")", ".", "addServlet", "(", "holder", ")", ";", "final", "ServletRegistration", ".", "Dynamic", "registration", "=", "holder", ".", "getRegistration", "(", ")", ";", "checkDuplicateRegistration", "(", "name", ",", "servlets", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "registration", ";", "}", "</s>"]
["<s>", "public", "FilterRegistration", ".", "Dynamic", "addFilter", "(", "String", "name", ",", "Filter", "filter", ")", "{", "return", "addFilter", "(", "name", ",", "new", "FilterHolder", "(", "requireNonNull", "(", "filter", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "FilterRegistration", ".", "Dynamic", "addFilter", "(", "String", "name", ",", "Class", "<", "?", "extends", "Filter", ">", "klass", ")", "{", "return", "addFilter", "(", "name", ",", "new", "FilterHolder", "(", "requireNonNull", "(", "klass", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "FilterRegistration", ".", "Dynamic", "addFilter", "(", "String", "name", ",", "FilterHolder", "holder", ")", "{", "holder", ".", "setName", "(", "name", ")", ";", "handler", ".", "getServletHandler", "(", ")", ".", "addFilter", "(", "holder", ")", ";", "final", "FilterRegistration", ".", "Dynamic", "registration", "=", "holder", ".", "getRegistration", "(", ")", ";", "checkDuplicateRegistration", "(", "name", ",", "filters", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "registration", ";", "}", "</s>"]
["<s>", "public", "void", "addServletListeners", "(", "EventListener", ".", ".", ".", "listeners", ")", "{", "for", "(", "EventListener", "listener", ":", "listeners", ")", "{", "handler", ".", "addEventListener", "(", "listener", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "setProtectedTargets", "(", "String", ".", ".", ".", "targets", ")", "{", "handler", ".", "setProtectedTargets", "(", "Arrays", ".", "copyOf", "(", "targets", ",", "targets", ".", "length", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setBaseResource", "(", "Resource", "baseResource", ")", "{", "handler", ".", "setBaseResource", "(", "baseResource", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setBaseResource", "(", "Resource", ".", ".", ".", "baseResources", ")", "{", "handler", ".", "setBaseResource", "(", "new", "ResourceCollection", "(", "baseResources", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setBaseResource", "(", "String", ".", ".", ".", "resources", ")", "{", "handler", ".", "setBaseResource", "(", "new", "ResourceCollection", "(", "resources", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setResourceBase", "(", "String", "resourceBase", ")", "{", "handler", ".", "setResourceBase", "(", "resourceBase", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setInitParameter", "(", "String", "name", ",", "String", "value", ")", "{", "handler", ".", "setInitParameter", "(", "name", ",", "value", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setSessionHandler", "(", "SessionHandler", "sessionHandler", ")", "{", "handler", ".", "setSessionsEnabled", "(", "sessionHandler", "!", "=", "null", ")", ";", "handler", ".", "setSessionHandler", "(", "sessionHandler", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setSecurityHandler", "(", "SecurityHandler", "securityHandler", ")", "{", "handler", ".", "setSecurityEnabled", "(", "securityHandler", "!", "=", "null", ")", ";", "handler", ".", "setSecurityHandler", "(", "securityHandler", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addMimeMapping", "(", "String", "extension", ",", "String", "type", ")", "{", "handler", ".", "getMimeTypes", "(", ")", ".", "addMimeMapping", "(", "extension", ",", "type", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkDuplicateRegistration", "(", "String", "name", ",", "Set", "<", "String", ">", "items", ",", "String", "type", ")", "{", "if", "(", "!", "items", ".", "add", "(", "name", ")", ")", "{", "LOGGER", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ",", "type", ",", "name", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFullConfiguration", "(", ")", "throws", "Exception", "{", "DataSourceFactory", "ds", "=", "getDataSourceFactory", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getDriverClass", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getUser", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getUrl", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getPassword", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getProperties", "(", ")", ")", ".", "containsEntry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:UTF-8>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getMaxWaitForConnection", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "ds", ".", "getValidationQuery", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getMinSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:8>", ")", ";", "assertThat", "(", "ds", ".", "getInitialSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:15>", ")", ";", "assertThat", "(", "ds", ".", "getMaxSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:32>", ")", ";", "assertThat", "(", "ds", ".", "getCheckConnectionWhileIdle", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "ds", ".", "getEvictionInterval", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:10>", ")", ")", ";", "assertThat", "(", "ds", ".", "getMinIdleTime", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "ds", ".", "getValidationInterval", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "ds", ".", "isAutoCommentsEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "ds", ".", "getReadOnlyByDefault", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "ds", ".", "isRemoveAbandoned", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "ds", ".", "getRemoveAbandonedTimeout", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "ds", ".", "getAbandonWhenPercentageFull", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "ds", ".", "isAlternateUsernamesAllowed", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "ds", ".", "getCommitOnReturn", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "ds", ".", "getRollbackOnReturn", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "ds", ".", "getAutoCommitByDefault", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "ds", ".", "getDefaultCatalog", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getDefaultTransactionIsolation", "(", ")", ")", ".", "isEqualTo", "(", "DataSourceFactory", ".", "TransactionIsolation", ".", "READ_COMMITTED", ")", ";", "assertThat", "(", "ds", ".", "getUseFairQueue", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "ds", ".", "getInitializationQuery", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getLogAbandonedConnections", "(", ")", ")", ".", "isEqualTo", "(", "true", ")", ";", "assertThat", "(", "ds", ".", "getLogValidationErrors", "(", ")", ")", ".", "isEqualTo", "(", "true", ")", ";", "assertThat", "(", "ds", ".", "getMaxConnectionAge", "(", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "of", "(", "Duration", ".", "hours", "(", "1", ")", ")", ")", ";", "assertThat", "(", "ds", ".", "getCheckConnectionOnBorrow", "(", ")", ")", ".", "isEqualTo", "(", "true", ")", ";", "assertThat", "(", "ds", ".", "getCheckConnectionOnConnect", "(", ")", ")", ".", "isEqualTo", "(", "false", ")", ";", "assertThat", "(", "ds", ".", "getCheckConnectionOnReturn", "(", ")", ")", ".", "isEqualTo", "(", "true", ")", ";", "assertThat", "(", "ds", ".", "getValidationQueryTimeout", "(", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "of", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:3>", ")", ")", ")", ";", "assertThat", "(", "ds", ".", "getValidatorClassName", "(", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "ds", ".", "getJdbcInterceptors", "(", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testMinimalConfiguration", "(", ")", "throws", "Exception", "{", "DataSourceFactory", "ds", "=", "getDataSourceFactory", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getDriverClass", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getUser", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getUrl", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getPassword", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getProperties", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "ds", ".", "getMaxWaitForConnection", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:30>", ")", ")", ";", "assertThat", "(", "ds", ".", "getValidationQuery", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getMinSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:10>", ")", ";", "assertThat", "(", "ds", ".", "getInitialSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:10>", ")", ";", "assertThat", "(", "ds", ".", "getMaxSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:100>", ")", ";", "assertThat", "(", "ds", ".", "getCheckConnectionWhileIdle", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "ds", ".", "getEvictionInterval", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:5>", ")", ")", ";", "assertThat", "(", "ds", ".", "getMinIdleTime", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "ds", ".", "getValidationInterval", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:30>", ")", ")", ";", "assertThat", "(", "ds", ".", "isAutoCommentsEnabled", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "ds", ".", "getReadOnlyByDefault", "(", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "ds", ".", "isRemoveAbandoned", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "ds", ".", "getRemoveAbandonedTimeout", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "ds", ".", "getAbandonWhenPercentageFull", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "ds", ".", "isAlternateUsernamesAllowed", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "ds", ".", "getCommitOnReturn", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "ds", ".", "getRollbackOnReturn", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "ds", ".", "getAutoCommitByDefault", "(", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "ds", ".", "getDefaultCatalog", "(", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "ds", ".", "getDefaultTransactionIsolation", "(", ")", ")", ".", "isEqualTo", "(", "DataSourceFactory", ".", "TransactionIsolation", ".", "DEFAULT", ")", ";", "assertThat", "(", "ds", ".", "getUseFairQueue", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "ds", ".", "getInitializationQuery", "(", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "ds", ".", "getLogAbandonedConnections", "(", ")", ")", ".", "isEqualTo", "(", "false", ")", ";", "assertThat", "(", "ds", ".", "getLogValidationErrors", "(", ")", ")", ".", "isEqualTo", "(", "false", ")", ";", "assertThat", "(", "ds", ".", "getMaxConnectionAge", "(", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "empty", "(", ")", ")", ";", "assertThat", "(", "ds", ".", "getCheckConnectionOnBorrow", "(", ")", ")", ".", "isEqualTo", "(", "false", ")", ";", "assertThat", "(", "ds", ".", "getCheckConnectionOnConnect", "(", ")", ")", ".", "isEqualTo", "(", "true", ")", ";", "assertThat", "(", "ds", ".", "getCheckConnectionOnReturn", "(", ")", ")", ".", "isEqualTo", "(", "false", ")", ";", "assertThat", "(", "ds", ".", "getValidationQueryTimeout", "(", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "empty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testInlineUserPasswordConfiguration", "(", ")", "throws", "Exception", "{", "DataSourceFactory", "ds", "=", "getDataSourceFactory", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getDriverClass", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getUrl", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getUser", "(", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "ds", ".", "getPassword", "(", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testInitialSizeZeroIsAllowed", "(", ")", "throws", "Exception", "{", "DataSourceFactory", "ds", "=", "getDataSourceFactory", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ds", ".", "getInitialSize", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "</s>"]
["<s>", "private", "DataSourceFactory", "getDataSourceFactory", "(", "String", "resourceName", ")", "throws", "Exception", "{", "return", "new", "YamlConfigurationFactory", "<", ">", "(", "DataSourceFactory", ".", "class", ",", "Validators", ".", "newValidator", "(", ")", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "resourceName", ")", ".", "toURI", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "testCheck", "(", ")", "throws", "InterruptedException", ",", "ExecutionException", ",", "TimeoutException", "{", "final", "ExecutorService", "executorService", "=", "mock", "(", "ExecutorService", ".", "class", ")", ";", "final", "Duration", "duration", "=", "mock", "(", "Duration", ".", "class", ")", ";", "when", "(", "duration", ".", "getQuantity", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "when", "(", "duration", ".", "getUnit", "(", ")", ")", ".", "thenReturn", "(", "TimeUnit", ".", "SECONDS", ")", ";", "final", "Callable", "<", "HealthCheck", ".", "Result", ">", "callable", "=", "mock", "(", "Callable", ".", "class", ")", ";", "final", "Future", "<", "HealthCheck", ".", "Result", ">", "future", "=", "mock", "(", "Future", ".", "class", ")", ";", "when", "(", "executorService", ".", "submit", "(", "callable", ")", ")", ".", "thenReturn", "(", "future", ")", ";", "new", "TimeBoundHealthCheck", "(", "executorService", ",", "duration", ")", ".", "check", "(", "callable", ")", ";", "verify", "(", "executorService", ",", "times", "(", "1", ")", ")", ".", "submit", "(", "callable", ")", ";", "verify", "(", "future", ",", "times", "(", "1", ")", ")", ".", "get", "(", "duration", ".", "getQuantity", "(", ")", ",", "duration", ".", "getUnit", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasNoParentLogger", "(", ")", "throws", "Exception", "{", "try", "{", "dataSource", ".", "getParentLogger", "(", ")", ";", "failBecauseExceptionWasNotThrown", "(", "SQLFeatureNotSupportedException", ".", "class", ")", ";", "}", "catch", "(", "SQLFeatureNotSupportedException", "e", ")", "{", "assertThat", "(", "(", "Object", ")", "e", ")", ".", "isInstanceOf", "(", "SQLFeatureNotSupportedException", ".", "class", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "validate", "(", "Connection", "connection", ",", "int", "validateAction", ")", "{", "loaded", "=", "true", ";", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "factory", "=", "new", "DataSourceFactory", "(", ")", ";", "factory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "factory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "factory", ".", "setValidationQuery", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "if", "(", "null", "!", "=", "dataSource", ")", "{", "dataSource", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "ManagedDataSource", "dataSource", "(", ")", "throws", "Exception", "{", "dataSource", "=", "factory", ".", "build", "(", "metricRegistry", ",", "\"", "<STR_LIT>", "\"", ")", ";", "dataSource", ".", "start", "(", ")", ";", "return", "dataSource", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testInitialSizeIsZero", "(", ")", "throws", "Exception", "{", "factory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "factory", ".", "setInitialSize", "(", "0", ")", ";", "ManagedDataSource", "dataSource", "=", "factory", ".", "build", "(", "metricRegistry", ",", "\"", "<STR_LIT>", "\"", ")", ";", "dataSource", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "buildsAConnectionPoolToTheDatabase", "(", ")", "throws", "Exception", "{", "try", "(", "Connection", "connection", "=", "dataSource", "(", ")", ".", "getConnection", "(", ")", ")", "{", "try", "(", "PreparedStatement", "statement", "=", "connection", ".", "prepareStatement", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "try", "(", "ResultSet", "set", "=", "statement", ".", "executeQuery", "(", ")", ")", "{", "while", "(", "set", ".", "next", "(", ")", ")", "{", "assertThat", "(", "set", ".", "getInt", "(", "1", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "}", "}", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNoValidationQueryTimeout", "(", ")", "throws", "Exception", "{", "try", "(", "Connection", "connection", "=", "dataSource", "(", ")", ".", "getConnection", "(", ")", ")", "{", "try", "(", "PreparedStatement", "statement", "=", "connection", ".", "prepareStatement", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "assertThat", "(", "statement", ".", "getQueryTimeout", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testValidationQueryTimeoutIsSet", "(", ")", "throws", "Exception", "{", "factory", ".", "setValidationQueryTimeout", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:3>", ")", ")", ";", "try", "(", "Connection", "connection", "=", "dataSource", "(", ")", ".", "getConnection", "(", ")", ")", "{", "try", "(", "PreparedStatement", "statement", "=", "connection", ".", "prepareStatement", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "assertThat", "(", "statement", ".", "getQueryTimeout", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:3>", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "SQLException", ".", "class", ")", "public", "void", "invalidJDBCDriverClassThrowsSQLException", "(", ")", "throws", "SQLException", "{", "final", "DataSourceFactory", "factory", "=", "new", "DataSourceFactory", "(", ")", ";", "factory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "factory", ".", "build", "(", "metricRegistry", ",", "\"", "<STR_LIT>", "\"", ")", ".", "getConnection", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCustomValidator", "(", ")", "throws", "Exception", "{", "factory", ".", "setValidatorClassName", "(", "Optional", ".", "of", "(", "CustomConnectionValidator", ".", "class", ".", "getName", "(", ")", ")", ")", ";", "try", "(", "Connection", "connection", "=", "dataSource", "(", ")", ".", "getConnection", "(", ")", ")", "{", "try", "(", "PreparedStatement", "statement", "=", "connection", ".", "prepareStatement", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "try", "(", "ResultSet", "rs", "=", "statement", ".", "executeQuery", "(", ")", ")", "{", "assertThat", "(", "rs", ".", "next", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "rs", ".", "getInt", "(", "1", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "}", "}", "assertThat", "(", "CustomConnectionValidator", ".", "loaded", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testJdbcInterceptors", "(", ")", "throws", "Exception", "{", "factory", ".", "setJdbcInterceptors", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "ManagedPooledDataSource", "source", "=", "(", "ManagedPooledDataSource", ")", "dataSource", "(", ")", ";", "assertThat", "(", "source", ".", "getPoolProperties", "(", ")", ".", "getJdbcInterceptorsAsArray", "(", ")", ")", ".", "extracting", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "StatementFinalizer", ".", "class", ",", "ConnectionState", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createDefaultFactory", "(", ")", "throws", "Exception", "{", "final", "DataSourceFactory", "factory", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "DataSourceFactory", ".", "class", ",", "BaseValidator", ".", "newValidator", "(", ")", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "ResourceConfigurationSourceProvider", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "factory", ".", "getDriverClass", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "factory", ".", "getUser", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "factory", ".", "getPassword", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "factory", ".", "getUrl", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "factory", ".", "getValidationQuery", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "factory", ".", "getValidationQueryTimeout", "(", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "empty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "TimeBoundHealthCheck", "(", "ExecutorService", "executorService", ",", "Duration", "duration", ")", "{", "this", ".", "executorService", "=", "executorService", ";", "this", ".", "duration", "=", "duration", ";", "}", "</s>"]
["<s>", "public", "HealthCheck", ".", "Result", "check", "(", "Callable", "<", "HealthCheck", ".", "Result", ">", "c", ")", "{", "HealthCheck", ".", "Result", "result", ";", "try", "{", "result", "=", "executorService", ".", "submit", "(", "c", ")", ".", "get", "(", "duration", ".", "getQuantity", "(", ")", ",", "duration", ".", "getUnit", "(", ")", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "result", "=", "HealthCheck", ".", "Result", ".", "unhealthy", "(", "\"", "<STR_LIT>", "\"", ",", "duration", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "public", "ManagedPooledDataSource", "(", "PoolConfiguration", "config", ",", "MetricRegistry", "metricRegistry", ")", "{", "super", "(", "config", ")", ";", "this", ".", "metricRegistry", "=", "metricRegistry", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Logger", "getParentLogger", "(", ")", "throws", "SQLFeatureNotSupportedException", "{", "throw", "new", "SQLFeatureNotSupportedException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "start", "(", ")", "throws", "Exception", "{", "final", "ConnectionPool", "connectionPool", "=", "createPool", "(", ")", ";", "metricRegistry", ".", "register", "(", "name", "(", "getClass", "(", ")", ",", "connectionPool", ".", "getName", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ",", "(", "Gauge", "<", "Integer", ">", ")", "connectionPool", ":", ":", "getActive", ")", ";", "metricRegistry", ".", "register", "(", "name", "(", "getClass", "(", ")", ",", "connectionPool", ".", "getName", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ",", "(", "Gauge", "<", "Integer", ">", ")", "connectionPool", ":", ":", "getIdle", ")", ";", "metricRegistry", ".", "register", "(", "name", "(", "getClass", "(", ")", ",", "connectionPool", ".", "getName", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ",", "(", "Gauge", "<", "Integer", ">", ")", "connectionPool", ":", ":", "getWaitCount", ")", ";", "metricRegistry", ".", "register", "(", "name", "(", "getClass", "(", ")", ",", "connectionPool", ".", "getName", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ",", "(", "Gauge", "<", "Integer", ">", ")", "connectionPool", ":", ":", "getSize", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "stop", "(", ")", "throws", "Exception", "{", "close", "(", ")", ";", "}", "</s>"]
["<s>", "TransactionIsolation", "(", "int", "value", ")", "{", "this", ".", "value", "=", "value", ";", "}", "</s>"]
["<s>", "public", "int", "get", "(", ")", "{", "return", "value", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Override", "public", "boolean", "isAutoCommentsEnabled", "(", ")", "{", "return", "autoCommentsEnabled", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAutoCommentsEnabled", "(", "boolean", "autoCommentsEnabled", ")", "{", "this", ".", "autoCommentsEnabled", "=", "autoCommentsEnabled", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Override", "public", "String", "getDriverClass", "(", ")", "{", "return", "driverClass", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setDriverClass", "(", "String", "driverClass", ")", "{", "this", ".", "driverClass", "=", "driverClass", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getUser", "(", ")", "{", "return", "user", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setUser", "(", "String", "user", ")", "{", "this", ".", "user", "=", "user", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getPassword", "(", ")", "{", "return", "password", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setPassword", "(", "String", "password", ")", "{", "this", ".", "password", "=", "password", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Override", "public", "String", "getUrl", "(", ")", "{", "return", "url", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setUrl", "(", "String", "url", ")", "{", "this", ".", "url", "=", "url", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Override", "public", "Map", "<", "String", ",", "String", ">", "getProperties", "(", ")", "{", "return", "properties", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setProperties", "(", "Map", "<", "String", ",", "String", ">", "properties", ")", "{", "this", ".", "properties", "=", "properties", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getMaxWaitForConnection", "(", ")", "{", "return", "maxWaitForConnection", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxWaitForConnection", "(", "Duration", "maxWaitForConnection", ")", "{", "this", ".", "maxWaitForConnection", "=", "maxWaitForConnection", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "JsonProperty", "public", "String", "getValidationQuery", "(", ")", "{", "return", "validationQuery", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Deprecated", "@", "JsonIgnore", "public", "String", "getHealthCheckValidationQuery", "(", ")", "{", "return", "getValidationQuery", "(", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setValidationQuery", "(", "String", "validationQuery", ")", "{", "this", ".", "validationQuery", "=", "validationQuery", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getMinSize", "(", ")", "{", "return", "minSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMinSize", "(", "int", "minSize", ")", "{", "this", ".", "minSize", "=", "minSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getMaxSize", "(", ")", "{", "return", "maxSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxSize", "(", "int", "maxSize", ")", "{", "this", ".", "maxSize", "=", "maxSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getCheckConnectionWhileIdle", "(", ")", "{", "return", "checkConnectionWhileIdle", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setCheckConnectionWhileIdle", "(", "boolean", "checkConnectionWhileIdle", ")", "{", "this", ".", "checkConnectionWhileIdle", "=", "checkConnectionWhileIdle", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "@", "JsonProperty", "public", "boolean", "isDefaultReadOnly", "(", ")", "{", "return", "Boolean", ".", "TRUE", ".", "equals", "(", "readOnlyByDefault", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "@", "JsonProperty", "public", "void", "setDefaultReadOnly", "(", "boolean", "defaultReadOnly", ")", "{", "readOnlyByDefault", "=", "defaultReadOnly", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isMinSizeLessThanMaxSize", "(", ")", "{", "return", "minSize", "<", "=", "maxSize", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isInitialSizeLessThanMaxSize", "(", ")", "{", "return", "initialSize", "<", "=", "maxSize", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isInitialSizeGreaterThanMinSize", "(", ")", "{", "return", "minSize", "<", "=", "initialSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getAbandonWhenPercentageFull", "(", ")", "{", "return", "abandonWhenPercentageFull", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAbandonWhenPercentageFull", "(", "int", "percentage", ")", "{", "this", ".", "abandonWhenPercentageFull", "=", "percentage", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isAlternateUsernamesAllowed", "(", ")", "{", "return", "alternateUsernamesAllowed", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAlternateUsernamesAllowed", "(", "boolean", "allow", ")", "{", "this", ".", "alternateUsernamesAllowed", "=", "allow", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getCommitOnReturn", "(", ")", "{", "return", "commitOnReturn", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getRollbackOnReturn", "(", ")", "{", "return", "rollbackOnReturn", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setCommitOnReturn", "(", "boolean", "commitOnReturn", ")", "{", "this", ".", "commitOnReturn", "=", "commitOnReturn", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setRollbackOnReturn", "(", "boolean", "rollbackOnReturn", ")", "{", "this", ".", "rollbackOnReturn", "=", "rollbackOnReturn", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Boolean", "getAutoCommitByDefault", "(", ")", "{", "return", "autoCommitByDefault", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAutoCommitByDefault", "(", "Boolean", "autoCommit", ")", "{", "this", ".", "autoCommitByDefault", "=", "autoCommit", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getDefaultCatalog", "(", ")", "{", "return", "defaultCatalog", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setDefaultCatalog", "(", "String", "defaultCatalog", ")", "{", "this", ".", "defaultCatalog", "=", "defaultCatalog", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Boolean", "getReadOnlyByDefault", "(", ")", "{", "return", "readOnlyByDefault", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setReadOnlyByDefault", "(", "Boolean", "readOnlyByDefault", ")", "{", "this", ".", "readOnlyByDefault", "=", "readOnlyByDefault", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "TransactionIsolation", "getDefaultTransactionIsolation", "(", ")", "{", "return", "defaultTransactionIsolation", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setDefaultTransactionIsolation", "(", "TransactionIsolation", "isolation", ")", "{", "this", ".", "defaultTransactionIsolation", "=", "isolation", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getUseFairQueue", "(", ")", "{", "return", "useFairQueue", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setUseFairQueue", "(", "boolean", "fair", ")", "{", "this", ".", "useFairQueue", "=", "fair", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getInitialSize", "(", ")", "{", "return", "initialSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setInitialSize", "(", "int", "initialSize", ")", "{", "this", ".", "initialSize", "=", "initialSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getInitializationQuery", "(", ")", "{", "return", "initializationQuery", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setInitializationQuery", "(", "String", "query", ")", "{", "this", ".", "initializationQuery", "=", "query", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getLogAbandonedConnections", "(", ")", "{", "return", "logAbandonedConnections", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setLogAbandonedConnections", "(", "boolean", "log", ")", "{", "this", ".", "logAbandonedConnections", "=", "log", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getLogValidationErrors", "(", ")", "{", "return", "logValidationErrors", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setLogValidationErrors", "(", "boolean", "log", ")", "{", "this", ".", "logValidationErrors", "=", "log", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Optional", "<", "Duration", ">", "getMaxConnectionAge", "(", ")", "{", "return", "Optional", ".", "ofNullable", "(", "maxConnectionAge", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxConnectionAge", "(", "Duration", "age", ")", "{", "this", ".", "maxConnectionAge", "=", "age", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getMinIdleTime", "(", ")", "{", "return", "minIdleTime", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMinIdleTime", "(", "Duration", "time", ")", "{", "this", ".", "minIdleTime", "=", "time", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getCheckConnectionOnBorrow", "(", ")", "{", "return", "checkConnectionOnBorrow", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setCheckConnectionOnBorrow", "(", "boolean", "checkConnectionOnBorrow", ")", "{", "this", ".", "checkConnectionOnBorrow", "=", "checkConnectionOnBorrow", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getCheckConnectionOnConnect", "(", ")", "{", "return", "checkConnectionOnConnect", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setCheckConnectionOnConnect", "(", "boolean", "checkConnectionOnConnect", ")", "{", "this", ".", "checkConnectionOnConnect", "=", "checkConnectionOnConnect", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getCheckConnectionOnReturn", "(", ")", "{", "return", "checkConnectionOnReturn", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setCheckConnectionOnReturn", "(", "boolean", "checkConnectionOnReturn", ")", "{", "this", ".", "checkConnectionOnReturn", "=", "checkConnectionOnReturn", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getEvictionInterval", "(", ")", "{", "return", "evictionInterval", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setEvictionInterval", "(", "Duration", "interval", ")", "{", "this", ".", "evictionInterval", "=", "interval", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getValidationInterval", "(", ")", "{", "return", "validationInterval", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setValidationInterval", "(", "Duration", "validationInterval", ")", "{", "this", ".", "validationInterval", "=", "validationInterval", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "JsonProperty", "public", "Optional", "<", "Duration", ">", "getValidationQueryTimeout", "(", ")", "{", "return", "Optional", ".", "ofNullable", "(", "validationQueryTimeout", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Optional", "<", "String", ">", "getValidatorClassName", "(", ")", "{", "return", "validatorClassName", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setValidatorClassName", "(", "Optional", "<", "String", ">", "validatorClassName", ")", "{", "this", ".", "validatorClassName", "=", "validatorClassName", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Deprecated", "@", "JsonIgnore", "public", "Optional", "<", "Duration", ">", "getHealthCheckValidationTimeout", "(", ")", "{", "return", "getValidationQueryTimeout", "(", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setValidationQueryTimeout", "(", "Duration", "validationQueryTimeout", ")", "{", "this", ".", "validationQueryTimeout", "=", "validationQueryTimeout", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isRemoveAbandoned", "(", ")", "{", "return", "removeAbandoned", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setRemoveAbandoned", "(", "boolean", "removeAbandoned", ")", "{", "this", ".", "removeAbandoned", "=", "removeAbandoned", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getRemoveAbandonedTimeout", "(", ")", "{", "return", "removeAbandonedTimeout", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setRemoveAbandonedTimeout", "(", "Duration", "removeAbandonedTimeout", ")", "{", "this", ".", "removeAbandonedTimeout", "=", "Objects", ".", "requireNonNull", "(", "removeAbandonedTimeout", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Optional", "<", "String", ">", "getJdbcInterceptors", "(", ")", "{", "return", "jdbcInterceptors", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setJdbcInterceptors", "(", "Optional", "<", "String", ">", "jdbcInterceptors", ")", "{", "this", ".", "jdbcInterceptors", "=", "jdbcInterceptors", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "asSingleConnectionPool", "(", ")", "{", "minSize", "=", "1", ";", "maxSize", "=", "1", ";", "initialSize", "=", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ManagedDataSource", "build", "(", "MetricRegistry", "metricRegistry", ",", "String", "name", ")", "{", "final", "Properties", "properties", "=", "new", "Properties", "(", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "String", ">", "property", ":", "this", ".", "properties", ".", "entrySet", "(", ")", ")", "{", "properties", ".", "setProperty", "(", "property", ".", "getKey", "(", ")", ",", "property", ".", "getValue", "(", ")", ")", ";", "}", "final", "PoolProperties", "poolConfig", "=", "new", "PoolProperties", "(", ")", ";", "poolConfig", ".", "setAbandonWhenPercentageFull", "(", "abandonWhenPercentageFull", ")", ";", "poolConfig", ".", "setAlternateUsernameAllowed", "(", "alternateUsernamesAllowed", ")", ";", "poolConfig", ".", "setCommitOnReturn", "(", "commitOnReturn", ")", ";", "poolConfig", ".", "setRollbackOnReturn", "(", "rollbackOnReturn", ")", ";", "poolConfig", ".", "setDbProperties", "(", "properties", ")", ";", "poolConfig", ".", "setDefaultAutoCommit", "(", "autoCommitByDefault", ")", ";", "poolConfig", ".", "setDefaultCatalog", "(", "defaultCatalog", ")", ";", "poolConfig", ".", "setDefaultReadOnly", "(", "readOnlyByDefault", ")", ";", "poolConfig", ".", "setDefaultTransactionIsolation", "(", "defaultTransactionIsolation", ".", "get", "(", ")", ")", ";", "poolConfig", ".", "setDriverClassName", "(", "driverClass", ")", ";", "poolConfig", ".", "setFairQueue", "(", "useFairQueue", ")", ";", "poolConfig", ".", "setInitialSize", "(", "initialSize", ")", ";", "poolConfig", ".", "setInitSQL", "(", "initializationQuery", ")", ";", "poolConfig", ".", "setLogAbandoned", "(", "logAbandonedConnections", ")", ";", "poolConfig", ".", "setLogValidationErrors", "(", "logValidationErrors", ")", ";", "poolConfig", ".", "setMaxActive", "(", "maxSize", ")", ";", "poolConfig", ".", "setMaxIdle", "(", "maxSize", ")", ";", "poolConfig", ".", "setMinIdle", "(", "minSize", ")", ";", "if", "(", "getMaxConnectionAge", "(", ")", ".", "isPresent", "(", ")", ")", "{", "poolConfig", ".", "setMaxAge", "(", "getMaxConnectionAge", "(", ")", ".", "get", "(", ")", ".", "toMilliseconds", "(", ")", ")", ";", "}", "poolConfig", ".", "setMaxWait", "(", "(", "int", ")", "maxWaitForConnection", ".", "toMilliseconds", "(", ")", ")", ";", "poolConfig", ".", "setMinEvictableIdleTimeMillis", "(", "(", "int", ")", "minIdleTime", ".", "toMilliseconds", "(", ")", ")", ";", "poolConfig", ".", "setName", "(", "name", ")", ";", "poolConfig", ".", "setUrl", "(", "url", ")", ";", "poolConfig", ".", "setUsername", "(", "user", ")", ";", "poolConfig", ".", "setPassword", "(", "user", "!", "=", "null", "&", "&", "password", "=", "=", "null", "?", "\"", "\"", ":", "password", ")", ";", "poolConfig", ".", "setRemoveAbandoned", "(", "removeAbandoned", ")", ";", "poolConfig", ".", "setRemoveAbandonedTimeout", "(", "Ints", ".", "saturatedCast", "(", "removeAbandonedTimeout", ".", "toSeconds", "(", ")", ")", ")", ";", "poolConfig", ".", "setTestWhileIdle", "(", "checkConnectionWhileIdle", ")", ";", "poolConfig", ".", "setValidationQuery", "(", "validationQuery", ")", ";", "poolConfig", ".", "setTestOnBorrow", "(", "checkConnectionOnBorrow", ")", ";", "poolConfig", ".", "setTestOnConnect", "(", "checkConnectionOnConnect", ")", ";", "poolConfig", ".", "setTestOnReturn", "(", "checkConnectionOnReturn", ")", ";", "poolConfig", ".", "setTimeBetweenEvictionRunsMillis", "(", "(", "int", ")", "evictionInterval", ".", "toMilliseconds", "(", ")", ")", ";", "poolConfig", ".", "setValidationInterval", "(", "validationInterval", ".", "toMilliseconds", "(", ")", ")", ";", "if", "(", "getValidationQueryTimeout", "(", ")", ".", "isPresent", "(", ")", ")", "{", "poolConfig", ".", "setValidationQueryTimeout", "(", "(", "int", ")", "getValidationQueryTimeout", "(", ")", ".", "get", "(", ")", ".", "toSeconds", "(", ")", ")", ";", "}", "validatorClassName", ".", "ifPresent", "(", "poolConfig", ":", ":", "setValidatorClassName", ")", ";", "jdbcInterceptors", ".", "ifPresent", "(", "poolConfig", ":", ":", "setJdbcInterceptors", ")", ";", "return", "new", "ManagedPooledDataSource", "(", "poolConfig", ",", "metricRegistry", ")", ";", "}", "</s>"]
["<s>", "boolean", "isAutoCommentsEnabled", "(", ")", ";", "</s>"]
["<s>", "Map", "<", "String", ",", "String", ">", "getProperties", "(", ")", ";", "</s>"]
["<s>", "Optional", "<", "Duration", ">", "getValidationQueryTimeout", "(", ")", ";", "</s>"]
["<s>", "@", "Deprecated", "Optional", "<", "Duration", ">", "getHealthCheckValidationTimeout", "(", ")", ";", "</s>"]
["<s>", "String", "getValidationQuery", "(", ")", ";", "</s>"]
["<s>", "@", "Deprecated", "String", "getHealthCheckValidationQuery", "(", ")", ";", "</s>"]
["<s>", "String", "getDriverClass", "(", ")", ";", "</s>"]
["<s>", "String", "getUrl", "(", ")", ";", "</s>"]
["<s>", "void", "asSingleConnectionPool", "(", ")", ";", "</s>"]
["<s>", "ManagedDataSource", "build", "(", "MetricRegistry", "metricRegistry", ",", "String", "name", ")", ";", "</s>"]
["<s>", "PooledDataSourceFactory", "getDataSourceFactory", "(", "T", "configuration", ")", ";", "</s>"]
["<s>", "@", "Setup", "public", "void", "setUp", "(", ")", "{", "dropwizardResourceConfig", ".", "register", "(", "DistributionResource", ".", "class", ")", ";", "dropwizardResourceConfig", ".", "register", "(", "AssetResource", ".", "class", ")", ";", "dropwizardResourceConfig", ".", "register", "(", "ClustersResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Benchmark", "public", "String", "getEndpointsInfo", "(", ")", "{", "return", "dropwizardResourceConfig", ".", "getEndpointsInfo", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "[", "]", "args", ")", "throws", "Exception", "{", "new", "Runner", "(", "new", "OptionsBuilder", "(", ")", ".", "include", "(", "DropwizardResourceConfigBenchmark", ".", "class", ".", "getSimpleName", "(", ")", ")", ".", "forks", "(", "1", ")", ".", "warmupIterations", "(", "<NUM_LIT:10>", ")", ".", "measurementIterations", "(", "<NUM_LIT:5>", ")", ".", "build", "(", ")", ")", ".", "run", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "public", "String", "insert", "(", "String", "asset", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "get", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "id", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getDetails", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "id", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "List", "<", "String", ">", "getAll", "(", ")", "{", "return", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "DELETE", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "delete", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "id", ")", "{", "}", "</s>"]
["<s>", "@", "PUT", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "update", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "id", ",", "String", "asset", ")", "{", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "start", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "assetId", ",", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "code", ")", "{", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "complete", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "assetId", ",", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "code", ")", "{", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "abort", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "assetId", ",", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "code", ")", "{", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "delete", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "assetId", ",", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "code", ")", "{", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getStatus", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "assetId", ",", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "code", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "POST", "public", "String", "insert", "(", "String", "cluster", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "get", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "code", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "List", "<", "String", ">", "getAll", "(", ")", "{", "return", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "DELETE", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "delete", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "code", ")", "{", "}", "</s>"]
["<s>", "public", "String", "paramFunc", "(", "@", "HeaderParam", "(", "\"", "<STR_LIT>", "\"", ")", "@", "NotEmpty", "String", "secretSauce", ")", "{", "return", "secretSauce", ";", "}", "</s>"]
["<s>", "public", "String", "objectFunc", "(", "@", "Valid", "Foo", "foo", ")", "{", "return", "foo", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Setup", "public", "void", "prepare", "(", ")", "{", "final", "Validator", "validator", "=", "Validators", ".", "newValidator", "(", ")", ";", "final", "ExecutableValidator", "execValidator", "=", "validator", ".", "forExecutables", "(", ")", ";", "final", "Set", "<", "ConstraintViolation", "<", "ConstraintViolationBenchmark", ".", "Resource", ">", ">", "paramViolations", "=", "execValidator", ".", "validateParameters", "(", "new", "Resource", "(", ")", ",", "getAccessibleMethod", "(", "ConstraintViolationBenchmark", ".", "Resource", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ",", "new", "Object", "[", "]", "{", "\"", "\"", "}", ")", ";", "paramViolation", "=", "paramViolations", ".", "iterator", "(", ")", ".", "next", "(", ")", ";", "final", "Set", "<", "ConstraintViolation", "<", "ConstraintViolationBenchmark", ".", "Resource", ">", ">", "objViolations", "=", "execValidator", ".", "validateParameters", "(", "new", "Resource", "(", ")", ",", "getAccessibleMethod", "(", "ConstraintViolationBenchmark", ".", "Resource", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "Foo", ".", "class", ")", ",", "new", "Object", "[", "]", "{", "new", "Foo", "(", ")", "}", ")", ";", "objViolation", "=", "objViolations", ".", "iterator", "(", ")", ".", "next", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Benchmark", "public", "String", "paramViolation", "(", ")", "{", "return", "ConstraintMessage", ".", "getMessage", "(", "paramViolation", ",", "invocable", ")", ";", "}", "</s>"]
["<s>", "@", "Benchmark", "public", "String", "objViolation", "(", ")", "{", "return", "ConstraintMessage", ".", "getMessage", "(", "objViolation", ",", "invocable", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "[", "]", "args", ")", "throws", "Exception", "{", "new", "Runner", "(", "new", "OptionsBuilder", "(", ")", ".", "include", "(", "ConstraintViolationBenchmark", ".", "class", ".", "getSimpleName", "(", ")", ")", ".", "forks", "(", "1", ")", ".", "warmupIterations", "(", "<NUM_LIT:5>", ")", ".", "measurementIterations", "(", "<NUM_LIT:5>", ")", ".", "build", "(", ")", ")", ".", "run", "(", ")", ";", "}", "</s>"]
["<s>", "@", "ValidationMethod", "public", "boolean", "isValid1", "(", "String", "param1", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "ValidationMethod", "public", "boolean", "isValid2", "(", "String", "param1", ",", "int", "param2", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT:1>", "\"", ")", "public", "boolean", "isInvalid1", "(", "String", "param1", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT:2>", "\"", ")", "public", "boolean", "isInvalid2", "(", "String", "param1", ",", "int", "param2", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "SelfValidation", "public", "void", "validateValid1", "(", "ViolationCollector", "collector", ")", "{", "}", "</s>"]
["<s>", "@", "SelfValidation", "public", "void", "validateValid2", "(", "ViolationCollector", "collector", ")", "{", "}", "</s>"]
["<s>", "@", "SelfValidation", "public", "void", "validateInvalid1", "(", "ViolationCollector", "collector", ")", "{", "collector", ".", "addViolation", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "SelfValidation", "public", "void", "validateInvalid2", "(", "ViolationCollector", "collector", ")", "{", "collector", ".", "addViolation", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Setup", "public", "void", "prepare", "(", ")", "{", "validator", "=", "Validators", ".", "newValidator", "(", ")", ";", "validationMethodUser", "=", "new", "ValidationMethodUser", "(", ")", ";", "selfValidatingMethodUser", "=", "new", "SelfValidatingMethodUser", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Benchmark", "public", "void", "validationMethod", "(", ")", "{", "validator", ".", "validate", "(", "validationMethodUser", ")", ";", "}", "</s>"]
["<s>", "@", "Benchmark", "public", "void", "selfValidating", "(", ")", "{", "validator", ".", "validate", "(", "selfValidatingMethodUser", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "[", "]", "args", ")", "throws", "Exception", "{", "new", "Runner", "(", "new", "OptionsBuilder", "(", ")", ".", "include", "(", "SelfValidatingBenchmark", ".", "class", ".", "getSimpleName", "(", ")", ")", ".", "forks", "(", "1", ")", ".", "warmupIterations", "(", "<NUM_LIT:5>", ")", ".", "measurementIterations", "(", "<NUM_LIT:8>", ")", ".", "build", "(", ")", ")", ".", "run", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Benchmark", "public", "Duration", "parseDuration", "(", ")", "{", "return", "Duration", ".", "parse", "(", "duration", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "[", "]", "args", ")", "throws", "Exception", "{", "new", "Runner", "(", "new", "OptionsBuilder", "(", ")", ".", "include", "(", "DurationBenchmark", ".", "class", ".", "getSimpleName", "(", ")", ")", ".", "forks", "(", "1", ")", ".", "warmupIterations", "(", "<NUM_LIT:5>", ")", ".", "measurementIterations", "(", "<NUM_LIT:5>", ")", ".", "build", "(", ")", ")", ".", "run", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Benchmark", "public", "Size", "parseSize", "(", ")", "{", "return", "Size", ".", "parse", "(", "size", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "[", "]", "args", ")", "throws", "Exception", "{", "new", "Runner", "(", "new", "OptionsBuilder", "(", ")", ".", "include", "(", "SizeBenchmark", ".", "class", ".", "getSimpleName", "(", ")", ")", ".", "forks", "(", "1", ")", ".", "warmupIterations", "(", "<NUM_LIT:5>", ")", ".", "measurementIterations", "(", "<NUM_LIT:5>", ")", ".", "build", "(", ")", ")", ".", "run", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRun", "(", ")", "throws", "Exception", "{", "final", "Environment", "environment", "=", "new", "Environment", "(", "\"", "<STR_LIT>", "\"", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "BaseValidator", ".", "newValidator", "(", ")", ",", "new", "MetricRegistry", "(", ")", ",", "getClass", "(", ")", ".", "getClassLoader", "(", ")", ")", ";", "new", "MultiPartBundle", "(", ")", ".", "run", "(", "environment", ")", ";", "assertThat", "(", "environment", ".", "jersey", "(", ")", ".", "getResourceConfig", "(", ")", ".", "getClasses", "(", ")", ")", ".", "contains", "(", "MultiPartFeature", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "Bootstrap", "<", "?", ">", "bootstrap", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Environment", "environment", ")", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "MultiPartFeature", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "environment", ".", "healthChecks", "(", ")", ")", ".", "thenReturn", "(", "healthChecks", ")", ";", "when", "(", "environment", ".", "lifecycle", "(", ")", ")", ".", "thenReturn", "(", "lifecycleEnvironment", ")", ";", "when", "(", "environment", ".", "metrics", "(", ")", ")", ".", "thenReturn", "(", "metricRegistry", ")", ";", "when", "(", "environment", ".", "getHealthCheckExecutorService", "(", ")", ")", ".", "thenReturn", "(", "Executors", ".", "newSingleThreadExecutor", "(", ")", ")", ";", "this", ".", "dbi", "=", "factory", ".", "build", "(", "environment", ",", "hsqlConfig", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ArgumentCaptor", "<", "Managed", ">", "managedCaptor", "=", "ArgumentCaptor", ".", "forClass", "(", "Managed", ".", "class", ")", ";", "verify", "(", "lifecycleEnvironment", ")", ".", "manage", "(", "managedCaptor", ".", "capture", "(", ")", ")", ";", "managed", ".", "addAll", "(", "managedCaptor", ".", "getAllValues", "(", ")", ")", ";", "for", "(", "Managed", "obj", ":", "managed", ")", "{", "obj", ".", "start", "(", ")", ";", "}", "try", "(", "Handle", "handle", "=", "dbi", ".", "open", "(", ")", ")", "{", "handle", ".", "createCall", "(", "\"", "<STR_LIT>", "\"", ")", ".", "invoke", "(", ")", ";", "handle", ".", "createCall", "(", "\"", "<STR_LIT>", "\"", ")", ".", "invoke", "(", ")", ";", "handle", ".", "createStatement", "(", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "0", ",", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "1", ",", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:30>", ")", ".", "bind", "(", "<NUM_LIT:3>", ",", "new", "Timestamp", "(", "<NUM_LIT>", ")", ")", ".", "execute", "(", ")", ";", "handle", ".", "createStatement", "(", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "0", ",", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "1", ",", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:32>", ")", ".", "bind", "(", "<NUM_LIT:3>", ",", "new", "Timestamp", "(", "<NUM_LIT>", ")", ")", ".", "execute", "(", ")", ";", "handle", ".", "createStatement", "(", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "0", ",", "\"", "<STR_LIT>", "\"", ")", ".", "bindNull", "(", "1", ",", "Types", ".", "VARCHAR", ")", ".", "bind", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ".", "bind", "(", "<NUM_LIT:3>", ",", "new", "Timestamp", "(", "<NUM_LIT>", ")", ")", ".", "execute", "(", ")", ";", "handle", ".", "createStatement", "(", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "0", ",", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "1", ",", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ".", "bindNull", "(", "<NUM_LIT:3>", ",", "Types", ".", "TIMESTAMP", ")", ".", "execute", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "for", "(", "Managed", "obj", ":", "managed", ")", "{", "obj", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createsAValidDBI", "(", ")", "throws", "Exception", "{", "final", "Handle", "handle", "=", "dbi", ".", "open", "(", ")", ";", "final", "Query", "<", "String", ">", "names", "=", "handle", ".", "createQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "0", ",", "<NUM_LIT>", ")", ".", "map", "(", "StringColumnMapper", ".", "INSTANCE", ")", ";", "assertThat", "(", "names", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "managesTheDatabaseWithTheEnvironment", "(", ")", "throws", "Exception", "{", "verify", "(", "lifecycleEnvironment", ")", ".", "manage", "(", "any", "(", "ManagedDataSource", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sqlObjectsCanAcceptOptionalParams", "(", ")", "throws", "Exception", "{", "final", "GuavaPersonDAO", "dao", "=", "dbi", ".", "open", "(", "GuavaPersonDAO", ".", "class", ")", ";", "assertThat", "(", "dao", ".", "findByName", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sqlObjectsCanReturnImmutableLists", "(", ")", "throws", "Exception", "{", "final", "GuavaPersonDAO", "dao", "=", "dbi", ".", "open", "(", "GuavaPersonDAO", ".", "class", ")", ";", "assertThat", "(", "dao", ".", "findAllNames", "(", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sqlObjectsCanReturnImmutableSets", "(", ")", "throws", "Exception", "{", "final", "GuavaPersonDAO", "dao", "=", "dbi", ".", "open", "(", "GuavaPersonDAO", ".", "class", ")", ";", "assertThat", "(", "dao", ".", "findAllUniqueNames", "(", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sqlObjectsCanReturnOptional", "(", ")", "throws", "Exception", "{", "final", "GuavaPersonDAO", "dao", "=", "dbi", ".", "open", "(", "GuavaPersonDAO", ".", "class", ")", ";", "final", "Optional", "<", "String", ">", "found", "=", "dao", ".", "findByEmail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "found", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "found", ".", "isPresent", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "found", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Optional", "<", "String", ">", "missing", "=", "dao", ".", "findByEmail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "missing", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "missing", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "missing", ".", "orNull", "(", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sqlObjectsCanReturnJodaDateTime", "(", ")", "throws", "Exception", "{", "final", "GuavaPersonDAO", "dao", "=", "dbi", ".", "open", "(", "GuavaPersonDAO", ".", "class", ")", ";", "final", "DateTime", "found", "=", "dao", ".", "getLatestCreatedAt", "(", "new", "DateTime", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "found", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "found", ".", "getMillis", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "found", ")", ".", "isEqualTo", "(", "new", "DateTime", "(", "<NUM_LIT>", ")", ")", ";", "final", "DateTime", "notFound", "=", "dao", ".", "getCreatedAtByEmail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "notFound", ")", ".", "isNull", "(", ")", ";", "final", "Optional", "<", "DateTime", ">", "absentDateTime", "=", "dao", ".", "getCreatedAtByName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "absentDateTime", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "absentDateTime", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "final", "Optional", "<", "DateTime", ">", "presentDateTime", "=", "dao", ".", "getCreatedAtByName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "presentDateTime", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "presentDateTime", ".", "isPresent", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "String", "findByName", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "name", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "ImmutableList", "<", "String", ">", "findAllNames", "(", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "ImmutableSet", "<", "String", ">", "findAllUniqueNames", "(", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "(", "String", ".", "class", ")", "Optional", "<", "String", ">", "findByEmail", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "email", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "DateTime", "getLatestCreatedAt", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "DateTime", "from", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "(", "DateTime", ".", "class", ")", "Optional", "<", "DateTime", ">", "getCreatedAtByName", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "DateTime", "getCreatedAtByEmail", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "email", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "testItTimesOutProperly", "(", ")", "throws", "Exception", "{", "String", "validationQuery", "=", "\"", "<STR_LIT>", "\"", ";", "DBI", "dbi", "=", "mock", "(", "DBI", ".", "class", ")", ";", "Handle", "handle", "=", "mock", "(", "Handle", ".", "class", ")", ";", "when", "(", "dbi", ".", "open", "(", ")", ")", ".", "thenReturn", "(", "handle", ")", ";", "Mockito", ".", "doAnswer", "(", "invocation", "-", ">", "{", "try", "{", "TimeUnit", ".", "SECONDS", ".", "sleep", "(", "<NUM_LIT:10>", ")", ";", "}", "catch", "(", "Exception", "ignored", ")", "{", "}", "return", "null", ";", "}", ")", ".", "when", "(", "handle", ")", ".", "execute", "(", "validationQuery", ")", ";", "ExecutorService", "executorService", "=", "Executors", ".", "newSingleThreadExecutor", "(", ")", ";", "DBIHealthCheck", "dbiHealthCheck", "=", "new", "DBIHealthCheck", "(", "executorService", ",", "Duration", ".", "milliseconds", "(", "<NUM_LIT:5>", ")", ",", "dbi", ",", "validationQuery", ")", ";", "HealthCheck", ".", "Result", "result", "=", "dbiHealthCheck", ".", "check", "(", ")", ";", "executorService", ".", "shutdown", "(", ")", ";", "assertThat", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "is", "(", "result", ".", "isHealthy", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "environment", ".", "healthChecks", "(", ")", ")", ".", "thenReturn", "(", "healthChecks", ")", ";", "when", "(", "environment", ".", "lifecycle", "(", ")", ")", ".", "thenReturn", "(", "lifecycleEnvironment", ")", ";", "when", "(", "environment", ".", "metrics", "(", ")", ")", ".", "thenReturn", "(", "metricRegistry", ")", ";", "when", "(", "environment", ".", "getHealthCheckExecutorService", "(", ")", ")", ".", "thenReturn", "(", "Executors", ".", "newSingleThreadExecutor", "(", ")", ")", ";", "this", ".", "dbi", "=", "factory", ".", "build", "(", "environment", ",", "hsqlConfig", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ArgumentCaptor", "<", "Managed", ">", "managedCaptor", "=", "ArgumentCaptor", ".", "forClass", "(", "Managed", ".", "class", ")", ";", "verify", "(", "lifecycleEnvironment", ")", ".", "manage", "(", "managedCaptor", ".", "capture", "(", ")", ")", ";", "managed", ".", "addAll", "(", "managedCaptor", ".", "getAllValues", "(", ")", ")", ";", "for", "(", "Managed", "obj", ":", "managed", ")", "{", "obj", ".", "start", "(", ")", ";", "}", "try", "(", "Handle", "handle", "=", "dbi", ".", "open", "(", ")", ")", "{", "handle", ".", "createCall", "(", "\"", "<STR_LIT>", "\"", ")", ".", "invoke", "(", ")", ";", "handle", ".", "createCall", "(", "\"", "<STR_LIT>", "\"", ")", ".", "invoke", "(", ")", ";", "handle", ".", "createStatement", "(", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "0", ",", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "1", ",", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:30>", ")", ".", "bind", "(", "<NUM_LIT:3>", ",", "new", "Timestamp", "(", "<NUM_LIT>", ")", ")", ".", "execute", "(", ")", ";", "handle", ".", "createStatement", "(", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "0", ",", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "1", ",", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:32>", ")", ".", "bind", "(", "<NUM_LIT:3>", ",", "new", "Timestamp", "(", "<NUM_LIT>", ")", ")", ".", "execute", "(", ")", ";", "handle", ".", "createStatement", "(", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "0", ",", "\"", "<STR_LIT>", "\"", ")", ".", "bindNull", "(", "1", ",", "Types", ".", "VARCHAR", ")", ".", "bind", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ".", "bind", "(", "<NUM_LIT:3>", ",", "new", "Timestamp", "(", "<NUM_LIT>", ")", ")", ".", "execute", "(", ")", ";", "handle", ".", "createStatement", "(", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "0", ",", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "1", ",", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ".", "bindNull", "(", "<NUM_LIT:3>", ",", "Types", ".", "TIMESTAMP", ")", ".", "execute", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "for", "(", "Managed", "obj", ":", "managed", ")", "{", "obj", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createsAValidDBI", "(", ")", "throws", "Exception", "{", "final", "Handle", "handle", "=", "dbi", ".", "open", "(", ")", ";", "final", "Query", "<", "String", ">", "names", "=", "handle", ".", "createQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "0", ",", "<NUM_LIT>", ")", ".", "map", "(", "StringColumnMapper", ".", "INSTANCE", ")", ";", "assertThat", "(", "names", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "managesTheDatabaseWithTheEnvironment", "(", ")", "throws", "Exception", "{", "verify", "(", "lifecycleEnvironment", ")", ".", "manage", "(", "any", "(", "ManagedDataSource", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sqlObjectsCanAcceptOptionalParams", "(", ")", "throws", "Exception", "{", "final", "PersonDAO", "dao", "=", "dbi", ".", "open", "(", "PersonDAO", ".", "class", ")", ";", "assertThat", "(", "dao", ".", "findByName", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sqlObjectsCanReturnImmutableLists", "(", ")", "throws", "Exception", "{", "final", "PersonDAO", "dao", "=", "dbi", ".", "open", "(", "PersonDAO", ".", "class", ")", ";", "assertThat", "(", "dao", ".", "findAllNames", "(", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sqlObjectsCanReturnImmutableSets", "(", ")", "throws", "Exception", "{", "final", "PersonDAO", "dao", "=", "dbi", ".", "open", "(", "PersonDAO", ".", "class", ")", ";", "assertThat", "(", "dao", ".", "findAllUniqueNames", "(", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sqlObjectsCanReturnOptional", "(", ")", "throws", "Exception", "{", "final", "PersonDAO", "dao", "=", "dbi", ".", "open", "(", "PersonDAO", ".", "class", ")", ";", "final", "Optional", "<", "String", ">", "found", "=", "dao", ".", "findByEmail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "found", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "found", ".", "isPresent", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "found", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Optional", "<", "String", ">", "missing", "=", "dao", ".", "findByEmail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "missing", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "missing", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "missing", ".", "orElse", "(", "null", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sqlObjectsCanReturnJodaDateTime", "(", ")", "throws", "Exception", "{", "final", "PersonDAO", "dao", "=", "dbi", ".", "open", "(", "PersonDAO", ".", "class", ")", ";", "final", "DateTime", "found", "=", "dao", ".", "getLatestCreatedAt", "(", "new", "DateTime", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "found", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "found", ".", "getMillis", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "found", ")", ".", "isEqualTo", "(", "new", "DateTime", "(", "<NUM_LIT>", ")", ")", ";", "final", "DateTime", "notFound", "=", "dao", ".", "getCreatedAtByEmail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "notFound", ")", ".", "isNull", "(", ")", ";", "final", "Optional", "<", "DateTime", ">", "absentDateTime", "=", "dao", ".", "getCreatedAtByName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "absentDateTime", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "absentDateTime", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "final", "Optional", "<", "DateTime", ">", "presentDateTime", "=", "dao", ".", "getCreatedAtByName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "presentDateTime", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "presentDateTime", ".", "isPresent", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultConfiguration", "(", ")", "{", "final", "DBI", "dbi", "=", "mock", "(", "DBI", ".", "class", ")", ";", "final", "PooledDataSourceFactory", "configuration", "=", "mock", "(", "PooledDataSourceFactory", ".", "class", ")", ";", "final", "Deque", "<", "Class", "<", "?", ">", ">", "af", "=", "new", "LinkedList", "<", ">", "(", ")", ";", "final", "Deque", "<", "Class", "<", "?", ">", ">", "cm", "=", "new", "LinkedList", "<", ">", "(", ")", ";", "final", "Deque", "<", "Class", "<", "?", ">", ">", "cf", "=", "new", "LinkedList", "<", ">", "(", ")", ";", "Mockito", ".", "doAnswer", "(", "invocation", "-", ">", "{", "final", "ArgumentFactory", "<", "?", ">", "x", "=", "invocation", ".", "getArgument", "(", "0", ")", ";", "af", ".", "addLast", "(", "x", ".", "getClass", "(", ")", ")", ";", "return", "null", ";", "}", ")", ".", "when", "(", "dbi", ")", ".", "registerArgumentFactory", "(", "Mockito", ".", "isA", "(", "ArgumentFactory", ".", "class", ")", ")", ";", "Mockito", ".", "doAnswer", "(", "invocation", "-", ">", "{", "final", "ResultColumnMapper", "<", "?", ">", "x", "=", "invocation", ".", "getArgument", "(", "0", ")", ";", "cm", ".", "addLast", "(", "x", ".", "getClass", "(", ")", ")", ";", "return", "null", ";", "}", ")", ".", "when", "(", "dbi", ")", ".", "registerColumnMapper", "(", "Mockito", ".", "isA", "(", "ResultColumnMapper", ".", "class", ")", ")", ";", "Mockito", ".", "doAnswer", "(", "invocation", "-", ">", "{", "final", "ContainerFactory", "<", "?", ">", "x", "=", "invocation", ".", "getArgument", "(", "0", ")", ";", "cf", ".", "addLast", "(", "x", ".", "getClass", "(", ")", ")", ";", "return", "null", ";", "}", ")", ".", "when", "(", "dbi", ")", ".", "registerContainerFactory", "(", "Mockito", ".", "isA", "(", "ContainerFactory", ".", "class", ")", ")", ";", "when", "(", "configuration", ".", "getDriverClass", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "DBIFactory", "test", "=", "new", "DBIFactory", "(", ")", ";", "test", ".", "configure", "(", "dbi", ",", "configuration", ")", ";", "assertFalse", "(", "cm", ".", "isEmpty", "(", ")", ")", ";", "assertFalse", "(", "cf", ".", "isEmpty", "(", ")", ")", ";", "assertFalse", "(", "af", ".", "isEmpty", "(", ")", ")", ";", "assertEquals", "(", "GuavaOptionalArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OptionalArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OptionalDoubleArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OptionalIntArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OptionalLongArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "JodaDateTimeArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "LocalDateArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "LocalDateTimeArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "InstantArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OffsetDateTimeArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "ZonedDateTimeArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "GuavaOptionalJodaTimeArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "GuavaOptionalLocalDateArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "GuavaOptionalLocalDateTimeArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "GuavaOptionalInstantArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "GuavaOptionalOffsetTimeArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "GuavaOptionalZonedTimeArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OptionalJodaTimeArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OptionalLocalDateArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OptionalLocalDateTimeArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OptionalInstantArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OptionalOffsetDateTimeArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OptionalZonedDateTimeArgumentFactory", ".", "class", ",", "af", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OptionalDoubleMapper", ".", "class", ",", "cm", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OptionalIntMapper", ".", "class", ",", "cm", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OptionalLongMapper", ".", "class", ",", "cm", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "JodaDateTimeMapper", ".", "class", ",", "cm", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "LocalDateMapper", ".", "class", ",", "cm", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "LocalDateTimeMapper", ".", "class", ",", "cm", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "InstantMapper", ".", "class", ",", "cm", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OffsetDateTimeMapper", ".", "class", ",", "cm", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "ZonedDateTimeMapper", ".", "class", ",", "cm", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "ImmutableListContainerFactory", ".", "class", ",", "cf", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "ImmutableSetContainerFactory", ".", "class", ",", "cf", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "GuavaOptionalContainerFactory", ".", "class", ",", "cf", ".", "removeFirst", "(", ")", ")", ";", "assertEquals", "(", "OptionalContainerFactory", ".", "class", ",", "cf", ".", "removeFirst", "(", ")", ")", ";", "assertTrue", "(", "cm", ".", "isEmpty", "(", ")", ")", ";", "assertTrue", "(", "cf", ".", "isEmpty", "(", ")", ")", ";", "assertTrue", "(", "af", ".", "isEmpty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "String", "findByName", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "name", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "ImmutableList", "<", "String", ">", "findAllNames", "(", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "ImmutableSet", "<", "String", ">", "findAllUniqueNames", "(", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "(", "String", ".", "class", ")", "Optional", "<", "String", ">", "findByEmail", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "email", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "DateTime", "getLatestCreatedAt", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "DateTime", "from", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "(", "DateTime", ".", "class", ")", "Optional", "<", "DateTime", ">", "getCreatedAtByName", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "DateTime", "getCreatedAtByEmail", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "email", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "testLogException", "(", ")", "throws", "Exception", "{", "Logger", "logger", "=", "mock", "(", "Logger", ".", "class", ")", ";", "LoggingSQLExceptionMapper", "sqlExceptionMapper", "=", "new", "LoggingSQLExceptionMapper", "(", ")", ";", "LoggingSQLExceptionMapper", ".", "setLogger", "(", "logger", ")", ";", "RuntimeException", "runtimeException", "=", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "SQLException", "sqlException", "=", "new", "SQLException", "(", "\"", "<STR_LIT>", "\"", ",", "runtimeException", ")", ";", "sqlExceptionMapper", ".", "logException", "(", "<NUM_LIT>", ",", "sqlException", ")", ";", "verify", "(", "logger", ")", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "sqlException", ")", ";", "verify", "(", "logger", ")", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "runtimeException", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "logger", "=", "mock", "(", "Logger", ".", "class", ")", ";", "dbiExceptionMapper", "=", "new", "LoggingDBIExceptionMapper", "(", ")", ";", "LoggingDBIExceptionMapper", ".", "setLogger", "(", "logger", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSqlExceptionIsCause", "(", ")", "throws", "Exception", "{", "StatementContext", "statementContext", "=", "mock", "(", "StatementContext", ".", "class", ")", ";", "RuntimeException", "runtimeException", "=", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "SQLException", "sqlException", "=", "new", "SQLException", "(", "\"", "<STR_LIT>", "\"", ",", "runtimeException", ")", ";", "DBIException", "dbiException", "=", "new", "NoResultsException", "(", "\"", "<STR_LIT>", "\"", ",", "sqlException", ",", "statementContext", ")", ";", "dbiExceptionMapper", ".", "logException", "(", "<NUM_LIT>", ",", "dbiException", ")", ";", "verify", "(", "logger", ")", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "sqlException", ")", ";", "verify", "(", "logger", ")", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "runtimeException", ")", ";", "verify", "(", "logger", ",", "never", "(", ")", ")", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "dbiException", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPlainDBIException", "(", ")", "throws", "Exception", "{", "DBIException", "dbiException", "=", "new", "TransactionFailedException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dbiExceptionMapper", ".", "logException", "(", "<NUM_LIT>", ",", "dbiException", ")", ";", "verify", "(", "logger", ")", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "dbiException", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TaskDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "final", "LocalDateTime", "startDate", "=", "LocalDateTime", ".", "now", "(", ")", ";", "final", "LocalDateTime", "endDate", "=", "startDate", ".", "plusDays", "(", "<NUM_LIT>", ")", ";", "dao", ".", "insert", "(", "1", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "startDate", ",", "Optional", ".", "of", "(", "endDate", ")", ",", "Optional", ".", "empty", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "1", ")", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "endDate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "LocalDateTime", ".", "now", "(", ")", ",", "Optional", ".", "empty", "(", ")", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "assignee", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "LocalDateTime", "startDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "LocalDateTime", ">", "endDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "comments", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "Optional", "<", "LocalDateTime", ">", "findEndDateById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TaskDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "final", "LocalDateTime", "startDate", "=", "LocalDateTime", ".", "now", "(", ")", ";", "final", "LocalDateTime", "endDate", "=", "startDate", ".", "plusDays", "(", "<NUM_LIT>", ")", ";", "dao", ".", "insert", "(", "1", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "startDate", ",", "Optional", ".", "of", "(", "endDate", ")", ",", "Optional", ".", "absent", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "1", ")", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "endDate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "LocalDateTime", ".", "now", "(", ")", ",", "Optional", ".", "absent", "(", ")", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "assignee", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "LocalDateTime", "startDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "LocalDateTime", ">", "endDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "comments", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "Optional", "<", "LocalDateTime", ">", "findEndDateById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TaskDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "final", "DateTime", "startDate", "=", "DateTime", ".", "now", "(", ")", ";", "final", "DateTime", "endDate", "=", "startDate", ".", "plusDays", "(", "1", ")", ";", "dao", ".", "insert", "(", "1", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "startDate", ",", "Optional", ".", "of", "(", "endDate", ")", ",", "Optional", ".", "absent", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "1", ")", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "endDate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "DateTime", ".", "now", "(", ")", ",", "Optional", ".", "absent", "(", ")", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "assignee", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "DateTime", "startDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "DateTime", ">", "endDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "comments", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "Optional", "<", "DateTime", ">", "findEndDateById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TaskDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "final", "ZonedDateTime", "startDate", "=", "ZonedDateTime", ".", "now", "(", ")", ";", "final", "ZonedDateTime", "endDate", "=", "startDate", ".", "plusDays", "(", "<NUM_LIT>", ")", ";", "dao", ".", "insert", "(", "1", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "startDate", ",", "Optional", ".", "of", "(", "endDate", ")", ",", "Optional", ".", "absent", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "1", ")", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "endDate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "ZonedDateTime", ".", "now", "(", ")", ",", "Optional", ".", "absent", "(", ")", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "assignee", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "ZonedDateTime", "startDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "ZonedDateTime", ">", "endDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "comments", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "Optional", "<", "ZonedDateTime", ">", "findEndDateById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TaskDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "final", "ZonedDateTime", "startDate", "=", "ZonedDateTime", ".", "now", "(", ")", ";", "final", "ZonedDateTime", "endDate", "=", "startDate", ".", "plusDays", "(", "<NUM_LIT>", ")", ";", "dao", ".", "insert", "(", "1", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "startDate", ",", "Optional", ".", "of", "(", "endDate", ")", ",", "Optional", ".", "empty", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "1", ")", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "endDate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "ZonedDateTime", ".", "now", "(", ")", ",", "Optional", ".", "empty", "(", ")", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "assignee", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "ZonedDateTime", "startDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "ZonedDateTime", ">", "endDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "comments", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "Optional", "<", "ZonedDateTime", ">", "findEndDateById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "public", "DatabaseInTimeZone", "(", "TemporaryFolder", "temporaryFolder", ",", "TimeZone", "timeZone", ")", "{", "this", ".", "temporaryFolder", "=", "temporaryFolder", ";", "this", ".", "timeZone", "=", "timeZone", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "before", "(", ")", "throws", "Throwable", "{", "String", "java", "=", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", "+", "File", ".", "separator", "+", "\"", "<STR_LIT>", "\"", "+", "File", ".", "separator", "+", "\"", "<STR_LIT>", "\"", ";", "File", "h2jar", "=", "new", "File", "(", "Server", ".", "class", ".", "getProtectionDomain", "(", ")", ".", "getCodeSource", "(", ")", ".", "getLocation", "(", ")", ".", "toURI", "(", ")", ")", ";", "String", "vmArguments", "=", "\"", "<STR_LIT>", "\"", "+", "timeZone", ".", "getID", "(", ")", ";", "ProcessBuilder", "pb", "=", "new", "ProcessBuilder", "(", "java", ",", "vmArguments", ",", "\"", "<STR_LIT>", "\"", ",", "h2jar", ".", "getAbsolutePath", "(", ")", ",", "Server", ".", "class", ".", "getName", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "temporaryFolder", ".", "newFolder", "(", ")", ".", "getAbsolutePath", "(", ")", ")", ";", "process", "=", "pb", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "after", "(", ")", "{", "try", "{", "Server", ".", "shutdownTcpServer", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ",", "true", ",", "false", ")", ";", "boolean", "exited", "=", "waitFor", "(", "process", ",", "1", ",", "TimeUnit", ".", "SECONDS", ")", ";", "if", "(", "!", "exited", ")", "{", "process", ".", "destroy", "(", ")", ";", "}", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "boolean", "waitFor", "(", "Process", "process", ",", "long", "timeout", ",", "TimeUnit", "unit", ")", "throws", "InterruptedException", "{", "long", "startTime", "=", "System", ".", "nanoTime", "(", ")", ";", "while", "(", "true", ")", "{", "try", "{", "process", ".", "exitValue", "(", ")", ";", "return", "true", ";", "}", "catch", "(", "IllegalThreadStateException", "ex", ")", "{", "Thread", ".", "sleep", "(", "<NUM_LIT:100>", ")", ";", "}", "if", "(", "System", ".", "nanoTime", "(", ")", "-", "startTime", ">", "unit", ".", "toNanos", "(", "timeout", ")", ")", "{", "return", "false", ";", "}", "}", "}", "</s>"]
["<s>", "public", "DBIClient", "(", "TimeZone", "dbTimeZone", ")", "{", "this", ".", "dbTimeZone", "=", "dbTimeZone", ";", "}", "</s>"]
["<s>", "public", "DBI", "getDbi", "(", ")", "{", "return", "requireNonNull", "(", "dbi", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "before", "(", ")", "throws", "Throwable", "{", "final", "Environment", "environment", "=", "new", "Environment", "(", "\"", "<STR_LIT>", "\"", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "Validators", ".", "newValidator", "(", ")", ",", "new", "MetricRegistry", "(", ")", ",", "getClass", "(", ")", ".", "getClassLoader", "(", ")", ")", ";", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUser", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setPassword", "(", "\"", "\"", ")", ";", "final", "DBIFactory", "dbiFactory", "=", "new", "DBIFactory", "(", ")", "{", "@", "Override", "protected", "Optional", "<", "TimeZone", ">", "databaseTimeZone", "(", ")", "{", "return", "Optional", ".", "of", "(", "dbTimeZone", ")", ";", "}", "}", ";", "dbi", "=", "dbiFactory", ".", "build", "(", "environment", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "managedObjects", "=", "environment", ".", "lifecycle", "(", ")", ".", "getManagedObjects", "(", ")", ";", "for", "(", "LifeCycle", "managedObject", ":", "managedObjects", ")", "{", "managedObject", ".", "start", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "Optional", "<", "TimeZone", ">", "databaseTimeZone", "(", ")", "{", "return", "Optional", ".", "of", "(", "dbTimeZone", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "after", "(", ")", "{", "try", "{", "for", "(", "LifeCycle", "managedObject", ":", "managedObjects", ")", "{", "managedObject", ".", "stop", "(", ")", ";", "}", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TaskDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "final", "OffsetDateTime", "startDate", "=", "OffsetDateTime", ".", "now", "(", ")", ";", "final", "OffsetDateTime", "endDate", "=", "startDate", ".", "plusDays", "(", "<NUM_LIT>", ")", ";", "dao", ".", "insert", "(", "1", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "startDate", ",", "Optional", ".", "of", "(", "endDate", ")", ",", "Optional", ".", "absent", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "1", ")", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "endDate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "OffsetDateTime", ".", "now", "(", ")", ",", "Optional", ".", "absent", "(", ")", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "assignee", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "OffsetDateTime", "startDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "OffsetDateTime", ">", "endDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "comments", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "Optional", "<", "OffsetDateTime", ">", "findEndDateById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TaskDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "final", "OffsetDateTime", "startDate", "=", "OffsetDateTime", ".", "now", "(", ")", ";", "final", "OffsetDateTime", "endDate", "=", "startDate", ".", "plusDays", "(", "<NUM_LIT>", ")", ";", "dao", ".", "insert", "(", "1", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "startDate", ",", "Optional", ".", "of", "(", "endDate", ")", ",", "Optional", ".", "empty", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "1", ")", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "endDate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "OffsetDateTime", ".", "now", "(", ")", ",", "Optional", ".", "empty", "(", ")", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "assignee", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "OffsetDateTime", "startDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "OffsetDateTime", ">", "endDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "comments", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "Optional", "<", "OffsetDateTime", ">", "findEndDateById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "private", "static", "TimeZone", "getRandomTimeZone", "(", ")", "{", "String", "[", "]", "ids", "=", "TimeZone", ".", "getAvailableIDs", "(", ")", ";", "return", "TimeZone", ".", "getTimeZone", "(", "ids", "[", "new", "Random", "(", ")", ".", "nextInt", "(", "ids", ".", "length", ")", "]", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "handle", "=", "dbiClient", ".", "getDbi", "(", ")", ".", "open", "(", ")", ";", "handle", ".", "execute", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "flightDao", "=", "handle", ".", "attach", "(", "FlightDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "handle", ".", "execute", "(", "\"", "<STR_LIT>", "\"", ")", ";", "handle", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testInsertTimestamp", "(", ")", "{", "final", "DateTime", "departureTime", "=", "ISO_FMT", ".", "parseDateTime", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "DateTime", "arrivalTime", "=", "ISO_FMT", ".", "parseDateTime", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "int", "result", "=", "flightDao", ".", "insert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "departureTime", ",", "arrivalTime", ")", ";", "assertThat", "(", "result", ")", ".", "isGreaterThan", "(", "0", ")", ";", "final", "Integer", "serverDepartureHour", "=", "(", "Integer", ")", "handle", ".", "select", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "0", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Integer", "serverArrivalHour", "=", "(", "Integer", ")", "handle", ".", "select", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "0", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "serverDepartureHour", ")", ".", "isEqualTo", "(", "departureTime", ".", "withZone", "(", "dbTimeZone", ")", ".", "getHourOfDay", "(", ")", ")", ";", "assertThat", "(", "serverArrivalHour", ")", ".", "isEqualTo", "(", "arrivalTime", ".", "withZone", "(", "dbTimeZone", ")", ".", "getHourOfDay", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testReadTimestamp", "(", ")", "{", "int", "result", "=", "handle", ".", "insert", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "result", ")", ".", "isGreaterThan", "(", "0", ")", ";", "final", "DateTime", "departureTime", "=", "flightDao", ".", "getDepartureTime", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "DateTime", "arrivalTime", "=", "flightDao", ".", "getArrivalTime", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "departureTime", ")", ".", "isEqualTo", "(", "ISO_FMT", ".", "parseDateTime", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "arrivalTime", ")", ".", "isEqualTo", "(", "ISO_FMT", ".", "parseDateTime", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "int", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "flightId", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "departureAirport", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "arrivalAirport", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "DateTime", "departureTime", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "DateTime", "arrivalTime", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "DateTime", "getArrivalTime", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "flightId", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "DateTime", "getDepartureTime", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "flightId", ")", ";", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TaskDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "final", "LocalDate", "startDate", "=", "LocalDate", ".", "now", "(", ")", ";", "final", "LocalDate", "endDate", "=", "startDate", ".", "plusDays", "(", "<NUM_LIT>", ")", ";", "dao", ".", "insert", "(", "1", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "startDate", ",", "Optional", ".", "of", "(", "endDate", ")", ",", "Optional", ".", "absent", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "1", ")", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "endDate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "LocalDate", ".", "now", "(", ")", ",", "Optional", ".", "absent", "(", ")", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "assignee", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "LocalDate", "startDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "LocalDate", ">", "endDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "comments", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "Optional", "<", "LocalDate", ">", "findEndDateById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TaskDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "final", "Instant", "startDate", "=", "Instant", ".", "now", "(", ")", ";", "final", "Instant", "endDate", "=", "startDate", ".", "plus", "(", "<NUM_LIT>", ",", "ChronoUnit", ".", "DAYS", ")", ";", "dao", ".", "insert", "(", "1", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "startDate", ",", "Optional", ".", "of", "(", "endDate", ")", ",", "Optional", ".", "empty", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "1", ")", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "endDate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Instant", ".", "now", "(", ")", ",", "Optional", ".", "empty", "(", ")", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "assignee", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Instant", "startDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "Instant", ">", "endDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "comments", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "Optional", "<", "Instant", ">", "findEndDateById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TaskDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "final", "DateTime", "startDate", "=", "DateTime", ".", "now", "(", ")", ";", "final", "DateTime", "endDate", "=", "startDate", ".", "plusDays", "(", "1", ")", ";", "dao", ".", "insert", "(", "1", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "startDate", ",", "Optional", ".", "of", "(", "endDate", ")", ",", "Optional", ".", "empty", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "1", ")", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "endDate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "DateTime", ".", "now", "(", ")", ",", "Optional", ".", "empty", "(", ")", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "assignee", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "DateTime", "startDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "DateTime", ">", "endDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "comments", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "Optional", "<", "DateTime", ">", "findEndDateById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TaskDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "final", "LocalDate", "startDate", "=", "LocalDate", ".", "now", "(", ")", ";", "final", "LocalDate", "endDate", "=", "startDate", ".", "plusDays", "(", "<NUM_LIT>", ")", ";", "dao", ".", "insert", "(", "1", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "startDate", ",", "Optional", ".", "of", "(", "endDate", ")", ",", "Optional", ".", "empty", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "1", ")", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "endDate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "LocalDate", ".", "now", "(", ")", ",", "Optional", ".", "empty", "(", ")", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "assignee", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "LocalDate", "startDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "LocalDate", ">", "endDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "comments", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "Optional", "<", "LocalDate", ">", "findEndDateById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TaskDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "final", "Instant", "startDate", "=", "Instant", ".", "now", "(", ")", ";", "final", "Instant", "endDate", "=", "startDate", ".", "plus", "(", "<NUM_LIT>", ",", "ChronoUnit", ".", "DAYS", ")", ";", "dao", ".", "insert", "(", "1", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "startDate", ",", "Optional", ".", "of", "(", "endDate", ")", ",", "Optional", ".", "absent", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "1", ")", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "endDate", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Instant", ".", "now", "(", ")", ",", "Optional", ".", "absent", "(", ")", ",", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "findEndDateById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "assignee", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Instant", "startDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "Instant", ">", "endDate", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "comments", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SingleValueResult", "Optional", "<", "Instant", ">", "findEndDateById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "UUID", ".", "randomUUID", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TestDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "for", "(", "LifeCycle", "managedObject", ":", "env", ".", "lifecycle", "(", ")", ".", "getManagedObjects", "(", ")", ")", "{", "managedObject", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "dao", ".", "insert", "(", "1", ",", "OptionalLong", ".", "of", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "dao", ".", "findOptionalLongById", "(", "1", ")", ".", "getAsLong", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "OptionalLong", ".", "empty", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findOptionalLongById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalLong", "optional", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalLong", "findOptionalLongById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "apply", "(", ")", "throws", "Exception", "{", "ZonedDateTime", "zonedDateTime", "=", "ZonedDateTime", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ZonedDateTime", "expected", "=", "zonedDateTime", ".", "withZoneSameInstant", "(", "ZoneId", ".", "systemDefault", "(", ")", ")", ";", "new", "InstantArgument", "(", "zonedDateTime", ".", "toInstant", "(", ")", ",", "Optional", ".", "empty", "(", ")", ")", ".", "apply", "(", "1", ",", "statement", ",", "context", ")", ";", "Mockito", ".", "verify", "(", "statement", ")", ".", "setTimestamp", "(", "1", ",", "Timestamp", ".", "from", "(", "expected", ".", "toInstant", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "apply_ValueIsNull", "(", ")", "throws", "Exception", "{", "new", "InstantArgument", "(", "null", ",", "Optional", ".", "empty", "(", ")", ")", ".", "apply", "(", "1", ",", "statement", ",", "context", ")", ";", "Mockito", ".", "verify", "(", "statement", ")", ".", "setNull", "(", "1", ",", "Types", ".", "TIMESTAMP", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "applyCalendar", "(", ")", "throws", "Exception", "{", "final", "ZoneId", "systemDefault", "=", "ZoneId", ".", "systemDefault", "(", ")", ";", "final", "ZonedDateTime", "zonedDateTime", "=", "ZonedDateTime", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ZonedDateTime", "expected", "=", "zonedDateTime", ".", "withZoneSameInstant", "(", "systemDefault", ")", ";", "final", "Calendar", "calendar", "=", "new", "GregorianCalendar", "(", "TimeZone", ".", "getTimeZone", "(", "systemDefault", ")", ")", ";", "new", "InstantArgument", "(", "zonedDateTime", ".", "toInstant", "(", ")", ",", "Optional", ".", "of", "(", "calendar", ")", ")", ".", "apply", "(", "1", ",", "statement", ",", "context", ")", ";", "Mockito", ".", "verify", "(", "statement", ")", ".", "setTimestamp", "(", "1", ",", "Timestamp", ".", "from", "(", "expected", ".", "toInstant", "(", ")", ")", ",", "calendar", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByName", "(", ")", "throws", "Exception", "{", "final", "Instant", "now", "=", "OffsetDateTime", ".", "now", "(", ")", ".", "toInstant", "(", ")", ";", "when", "(", "resultSet", ".", "getTimestamp", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "Timestamp", ".", "from", "(", "now", ")", ")", ";", "OffsetDateTime", "actual", "=", "new", "OffsetDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "\"", "<STR_LIT>", "\"", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isEqualTo", "(", "OffsetDateTime", ".", "ofInstant", "(", "now", ",", "ZoneId", ".", "systemDefault", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByName_TimestampIsNull", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "OffsetDateTime", "actual", "=", "new", "OffsetDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "\"", "<STR_LIT>", "\"", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByIndex", "(", ")", "throws", "Exception", "{", "final", "Instant", "now", "=", "OffsetDateTime", ".", "now", "(", ")", ".", "toInstant", "(", ")", ";", "when", "(", "resultSet", ".", "getTimestamp", "(", "1", ")", ")", ".", "thenReturn", "(", "Timestamp", ".", "from", "(", "now", ")", ")", ";", "OffsetDateTime", "actual", "=", "new", "OffsetDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "1", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isEqualTo", "(", "OffsetDateTime", ".", "ofInstant", "(", "now", ",", "ZoneId", ".", "systemDefault", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByIndex_TimestampIsNull", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "1", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "OffsetDateTime", "actual", "=", "new", "OffsetDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "1", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "apply", "(", ")", "throws", "Exception", "{", "final", "Instant", "now", "=", "OffsetDateTime", ".", "now", "(", ")", ".", "toInstant", "(", ")", ";", "final", "OffsetDateTime", "dateTime", "=", "OffsetDateTime", ".", "ofInstant", "(", "now", ",", "ZoneId", ".", "systemDefault", "(", ")", ")", ";", "new", "OffsetDateTimeArgument", "(", "dateTime", ",", "Optional", ".", "empty", "(", ")", ")", ".", "apply", "(", "1", ",", "statement", ",", "context", ")", ";", "Mockito", ".", "verify", "(", "statement", ")", ".", "setTimestamp", "(", "1", ",", "Timestamp", ".", "from", "(", "now", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "apply_ValueIsNull", "(", ")", "throws", "Exception", "{", "new", "OffsetDateTimeArgument", "(", "null", ",", "Optional", ".", "empty", "(", ")", ")", ".", "apply", "(", "1", ",", "statement", ",", "context", ")", ";", "Mockito", ".", "verify", "(", "statement", ")", ".", "setNull", "(", "1", ",", "Types", ".", "TIMESTAMP", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "UUID", ".", "randomUUID", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TestDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "for", "(", "LifeCycle", "managedObject", ":", "env", ".", "lifecycle", "(", ")", ".", "getManagedObjects", "(", ")", ")", "{", "managedObject", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "dao", ".", "insert", "(", "1", ",", "OptionalDouble", ".", "of", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "dao", ".", "findOptionalDoubleById", "(", "1", ")", ".", "getAsDouble", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "OptionalDouble", ".", "empty", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findOptionalDoubleById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalDouble", "optional", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalDouble", "findOptionalDoubleById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "@", "Before", "public", "void", "setupTests", "(", ")", "throws", "IOException", "{", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "UUID", ".", "randomUUID", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "final", "DBI", "dbi", "=", "new", "DBIFactory", "(", ")", ".", "build", "(", "env", ",", "dataSourceFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "(", "Handle", "h", "=", "dbi", ".", "open", "(", ")", ")", "{", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "dao", "=", "dbi", ".", "onDemand", "(", "TestDao", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "for", "(", "LifeCycle", "managedObject", ":", "env", ".", "lifecycle", "(", ")", ".", "getManagedObjects", "(", ")", ")", "{", "managedObject", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPresent", "(", ")", "{", "dao", ".", "insert", "(", "1", ",", "OptionalInt", ".", "of", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "dao", ".", "findOptionalIntById", "(", "1", ")", ".", "getAsInt", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAbsent", "(", ")", "{", "dao", ".", "insert", "(", "<NUM_LIT:2>", ",", "OptionalInt", ".", "empty", "(", ")", ")", ";", "assertThat", "(", "dao", ".", "findOptionalIntById", "(", "<NUM_LIT:2>", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SqlUpdate", "(", "\"", "<STR_LIT>", "\"", ")", "void", "insert", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalInt", "optional", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalInt", "findOptionalIntById", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByName", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "Timestamp", ".", "valueOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "ZonedDateTime", "actual", "=", "new", "ZonedDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "\"", "<STR_LIT>", "\"", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isEqualTo", "(", "ZonedDateTime", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT:12>", ",", "<NUM_LIT:3>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:15>", ",", "<NUM_LIT:30>", ",", "<NUM_LIT>", ",", "ZoneId", ".", "systemDefault", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByName_TimestampIsNull", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "ZonedDateTime", "actual", "=", "new", "ZonedDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "\"", "<STR_LIT>", "\"", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByIndex", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "1", ")", ")", ".", "thenReturn", "(", "Timestamp", ".", "valueOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "ZonedDateTime", "actual", "=", "new", "ZonedDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "1", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isEqualTo", "(", "ZonedDateTime", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT:12>", ",", "<NUM_LIT:3>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:15>", ",", "<NUM_LIT:30>", ",", "<NUM_LIT>", ",", "ZoneId", ".", "systemDefault", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByIndex_TimestampIsNull", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "1", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "ZonedDateTime", "actual", "=", "new", "ZonedDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "1", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "apply", "(", ")", "throws", "Exception", "{", "ZonedDateTime", "dateTime", "=", "ZonedDateTime", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT:12>", ",", "<NUM_LIT:3>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:15>", ",", "<NUM_LIT:30>", ",", "<NUM_LIT>", ",", "ZoneId", ".", "systemDefault", "(", ")", ")", ";", "new", "ZonedDateTimeArgument", "(", "dateTime", ",", "Optional", ".", "empty", "(", ")", ")", ".", "apply", "(", "1", ",", "statement", ",", "context", ")", ";", "Mockito", ".", "verify", "(", "statement", ")", ".", "setTimestamp", "(", "1", ",", "Timestamp", ".", "valueOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "apply_ValueIsNull", "(", ")", "throws", "Exception", "{", "new", "ZonedDateTimeArgument", "(", "null", ",", "Optional", ".", "empty", "(", ")", ")", ".", "apply", "(", "1", ",", "statement", ",", "context", ")", ";", "Mockito", ".", "verify", "(", "statement", ")", ".", "setNull", "(", "1", ",", "Types", ".", "TIMESTAMP", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByName", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "Timestamp", ".", "valueOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "LocalDate", "actual", "=", "new", "LocalDateMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "\"", "<STR_LIT>", "\"", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isEqualTo", "(", "LocalDate", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByName_TimestampIsNull", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "LocalDate", "actual", "=", "new", "LocalDateMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "\"", "<STR_LIT>", "\"", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByIndex", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "1", ")", ")", ".", "thenReturn", "(", "Timestamp", ".", "valueOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "LocalDate", "actual", "=", "new", "LocalDateMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "1", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isEqualTo", "(", "LocalDate", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByIndex_TimestampIsNull", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "1", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "LocalDate", "actual", "=", "new", "LocalDateMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "1", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "apply", "(", ")", "throws", "Exception", "{", "DateTime", "dateTime", "=", "DateTime", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "new", "JodaDateTimeArgument", "(", "dateTime", ",", "Optional", ".", "empty", "(", ")", ")", ".", "apply", "(", "1", ",", "statement", ",", "context", ")", ";", "Mockito", ".", "verify", "(", "statement", ")", ".", "setTimestamp", "(", "1", ",", "Timestamp", ".", "valueOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "apply_ValueIsNull", "(", ")", "throws", "Exception", "{", "new", "JodaDateTimeArgument", "(", "null", ",", "Optional", ".", "empty", "(", ")", ")", ".", "apply", "(", "1", ",", "statement", ",", "context", ")", ";", "Mockito", ".", "verify", "(", "statement", ")", ".", "setNull", "(", "1", ",", "Types", ".", "TIMESTAMP", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "apply", "(", ")", "throws", "Exception", "{", "LocalDateTime", "localDateTime", "=", "LocalDateTime", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "new", "LocalDateTimeArgument", "(", "localDateTime", ")", ".", "apply", "(", "1", ",", "statement", ",", "context", ")", ";", "Mockito", ".", "verify", "(", "statement", ")", ".", "setTimestamp", "(", "1", ",", "Timestamp", ".", "valueOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "apply_ValueIsNull", "(", ")", "throws", "Exception", "{", "new", "LocalDateTimeArgument", "(", "null", ")", ".", "apply", "(", "1", ",", "statement", ",", "context", ")", ";", "Mockito", ".", "verify", "(", "statement", ")", ".", "setNull", "(", "1", ",", "Types", ".", "TIMESTAMP", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByName", "(", ")", "throws", "Exception", "{", "ZonedDateTime", "expected", "=", "ZonedDateTime", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ZonedDateTime", "stored", "=", "expected", ".", "withZoneSameInstant", "(", "ZoneId", ".", "systemDefault", "(", ")", ")", ";", "when", "(", "resultSet", ".", "getTimestamp", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "Timestamp", ".", "from", "(", "stored", ".", "toInstant", "(", ")", ")", ")", ";", "Instant", "actual", "=", "new", "InstantMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "\"", "<STR_LIT>", "\"", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isEqualTo", "(", "expected", ".", "toInstant", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByName_TimestampIsNull", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "Instant", "actual", "=", "new", "InstantMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "\"", "<STR_LIT>", "\"", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByIndex", "(", ")", "throws", "Exception", "{", "ZonedDateTime", "expected", "=", "ZonedDateTime", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ZonedDateTime", "stored", "=", "expected", ".", "withZoneSameInstant", "(", "ZoneId", ".", "systemDefault", "(", ")", ")", ";", "when", "(", "resultSet", ".", "getTimestamp", "(", "1", ")", ")", ".", "thenReturn", "(", "Timestamp", ".", "from", "(", "stored", ".", "toInstant", "(", ")", ")", ")", ";", "Instant", "actual", "=", "new", "InstantMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "1", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isEqualTo", "(", "expected", ".", "toInstant", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByIndex_TimestampIsNull", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "1", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "Instant", "actual", "=", "new", "InstantMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "1", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "apply", "(", ")", "throws", "Exception", "{", "LocalDate", "localDate", "=", "LocalDate", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "new", "LocalDateArgument", "(", "localDate", ")", ".", "apply", "(", "1", ",", "statement", ",", "context", ")", ";", "Mockito", ".", "verify", "(", "statement", ")", ".", "setTimestamp", "(", "1", ",", "Timestamp", ".", "valueOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "apply_ValueIsNull", "(", ")", "throws", "Exception", "{", "new", "LocalDateArgument", "(", "null", ")", ".", "apply", "(", "1", ",", "statement", ",", "context", ")", ";", "Mockito", ".", "verify", "(", "statement", ")", ".", "setNull", "(", "1", ",", "Types", ".", "TIMESTAMP", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByName", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "Timestamp", ".", "valueOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "LocalDateTime", "actual", "=", "new", "LocalDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "\"", "<STR_LIT>", "\"", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isEqualTo", "(", "LocalDateTime", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByName_TimestampIsNull", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "LocalDateTime", "actual", "=", "new", "LocalDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "\"", "<STR_LIT>", "\"", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByIndex", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "1", ")", ")", ".", "thenReturn", "(", "Timestamp", ".", "valueOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "LocalDateTime", "actual", "=", "new", "LocalDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "1", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isEqualTo", "(", "LocalDateTime", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByIndex_TimestampIsNull", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "1", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "LocalDateTime", "actual", "=", "new", "LocalDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "1", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByName", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "Timestamp", ".", "valueOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "DateTime", "actual", "=", "new", "JodaDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "\"", "<STR_LIT>", "\"", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isEqualTo", "(", "DateTime", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByName_TimestampIsNull", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "DateTime", "actual", "=", "new", "JodaDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "\"", "<STR_LIT>", "\"", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByIndex", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "1", ")", ")", ".", "thenReturn", "(", "Timestamp", ".", "valueOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "DateTime", "actual", "=", "new", "JodaDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "1", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isEqualTo", "(", "DateTime", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapColumnByIndex_TimestampIsNull", "(", ")", "throws", "Exception", "{", "when", "(", "resultSet", ".", "getTimestamp", "(", "1", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "DateTime", "actual", "=", "new", "JodaDateTimeMapper", "(", ")", ".", "mapColumn", "(", "resultSet", ",", "1", ",", "ctx", ")", ";", "assertThat", "(", "actual", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "test", "(", ")", "{", "Environment", "environment", "=", "mock", "(", "Environment", ".", "class", ")", ";", "JerseyEnvironment", "jerseyEnvironment", "=", "mock", "(", "JerseyEnvironment", ".", "class", ")", ";", "when", "(", "environment", ".", "jersey", "(", ")", ")", ".", "thenReturn", "(", "jerseyEnvironment", ")", ";", "new", "DBIExceptionsBundle", "(", ")", ".", "run", "(", "environment", ")", ";", "verify", "(", "jerseyEnvironment", ",", "times", "(", "1", ")", ")", ".", "register", "(", "isA", "(", "LoggingSQLExceptionMapper", ".", "class", ")", ")", ";", "verify", "(", "jerseyEnvironment", ",", "times", "(", "1", ")", ")", ".", "register", "(", "isA", "(", "LoggingDBIExceptionMapper", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "type", ")", "{", "return", "ImmutableList", ".", "class", ".", "isAssignableFrom", "(", "type", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContainerBuilder", "<", "ImmutableList", "<", "?", ">", ">", "newContainerBuilderFor", "(", "Class", "<", "?", ">", "type", ")", "{", "return", "new", "ImmutableListContainerBuilder", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContainerBuilder", "<", "ImmutableList", "<", "?", ">", ">", "add", "(", "Object", "it", ")", "{", "builder", ".", "add", "(", "it", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ImmutableList", "<", "?", ">", "build", "(", ")", "{", "return", "builder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "DBIHealthCheck", "(", "ExecutorService", "executorService", ",", "Duration", "duration", ",", "DBI", "dbi", ",", "String", "validationQuery", ")", "{", "this", ".", "dbi", "=", "dbi", ";", "this", ".", "validationQuery", "=", "validationQuery", ";", "this", ".", "timeBoundHealthCheck", "=", "new", "TimeBoundHealthCheck", "(", "executorService", ",", "duration", ")", ";", "}", "</s>"]
["<s>", "public", "DBIHealthCheck", "(", "DBI", "dbi", ",", "String", "validationQuery", ")", "{", "this", "(", "MoreExecutors", ".", "newDirectExecutorService", "(", ")", ",", "Duration", ".", "seconds", "(", "0", ")", ",", "dbi", ",", "validationQuery", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Result", "check", "(", ")", "throws", "Exception", "{", "return", "timeBoundHealthCheck", ".", "check", "(", "(", ")", "-", ">", "{", "try", "(", "Handle", "handle", "=", "dbi", ".", "open", "(", ")", ")", "{", "handle", ".", "execute", "(", "validationQuery", ")", ";", "return", "Result", ".", "healthy", "(", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "private", "SanerNamingStrategy", "(", ")", "{", "super", "(", "NameStrategies", ".", "CHECK_EMPTY", ",", "NameStrategies", ".", "CONTEXT_CLASS", ",", "NameStrategies", ".", "CONTEXT_NAME", ",", "NameStrategies", ".", "SQL_OBJECT", ",", "statementContext", "-", ">", "RAW_SQL", ")", ";", "}", "</s>"]
["<s>", "protected", "Optional", "<", "TimeZone", ">", "databaseTimeZone", "(", ")", "{", "return", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "DBI", "build", "(", "Environment", "environment", ",", "PooledDataSourceFactory", "configuration", ",", "String", "name", ")", "{", "final", "ManagedDataSource", "dataSource", "=", "configuration", ".", "build", "(", "environment", ".", "metrics", "(", ")", ",", "name", ")", ";", "return", "build", "(", "environment", ",", "configuration", ",", "dataSource", ",", "name", ")", ";", "}", "</s>"]
["<s>", "public", "DBI", "build", "(", "Environment", "environment", ",", "PooledDataSourceFactory", "configuration", ",", "ManagedDataSource", "dataSource", ",", "String", "name", ")", "{", "final", "DBI", "dbi", "=", "this", ".", "newInstance", "(", "dataSource", ")", ";", "environment", ".", "lifecycle", "(", ")", ".", "manage", "(", "dataSource", ")", ";", "final", "String", "validationQuery", "=", "configuration", ".", "getValidationQuery", "(", ")", ";", "environment", ".", "healthChecks", "(", ")", ".", "register", "(", "name", ",", "new", "DBIHealthCheck", "(", "environment", ".", "getHealthCheckExecutorService", "(", ")", ",", "configuration", ".", "getValidationQueryTimeout", "(", ")", ".", "orElseGet", "(", "(", ")", "-", ">", "Duration", ".", "seconds", "(", "<NUM_LIT:5>", ")", ")", ",", "dbi", ",", "validationQuery", ")", ")", ";", "dbi", ".", "setSQLLog", "(", "new", "LogbackLog", "(", "LOGGER", ",", "Level", ".", "TRACE", ")", ")", ";", "dbi", ".", "setTimingCollector", "(", "new", "InstrumentedTimingCollector", "(", "environment", ".", "metrics", "(", ")", ",", "new", "SanerNamingStrategy", "(", ")", ")", ")", ";", "if", "(", "configuration", ".", "isAutoCommentsEnabled", "(", ")", ")", "{", "dbi", ".", "setStatementRewriter", "(", "new", "NamePrependingStatementRewriter", "(", "new", "ColonPrefixNamedParamStatementRewriter", "(", ")", ")", ")", ";", "}", "this", ".", "configure", "(", "dbi", ",", "configuration", ")", ";", "return", "dbi", ";", "}", "</s>"]
["<s>", "protected", "DBI", "newInstance", "(", "final", "ManagedDataSource", "dataSource", ")", "{", "return", "new", "DBI", "(", "dataSource", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "configure", "(", "final", "DBI", "dbi", ",", "final", "PooledDataSourceFactory", "configuration", ")", "{", "final", "String", "driverClazz", "=", "configuration", ".", "getDriverClass", "(", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "GuavaOptionalArgumentFactory", "(", "driverClazz", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "OptionalArgumentFactory", "(", "driverClazz", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "OptionalDoubleArgumentFactory", "(", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "OptionalIntArgumentFactory", "(", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "OptionalLongArgumentFactory", "(", ")", ")", ";", "dbi", ".", "registerColumnMapper", "(", "new", "OptionalDoubleMapper", "(", ")", ")", ";", "dbi", ".", "registerColumnMapper", "(", "new", "OptionalIntMapper", "(", ")", ")", ";", "dbi", ".", "registerColumnMapper", "(", "new", "OptionalLongMapper", "(", ")", ")", ";", "dbi", ".", "registerContainerFactory", "(", "new", "ImmutableListContainerFactory", "(", ")", ")", ";", "dbi", ".", "registerContainerFactory", "(", "new", "ImmutableSetContainerFactory", "(", ")", ")", ";", "dbi", ".", "registerContainerFactory", "(", "new", "GuavaOptionalContainerFactory", "(", ")", ")", ";", "dbi", ".", "registerContainerFactory", "(", "new", "OptionalContainerFactory", "(", ")", ")", ";", "final", "Optional", "<", "TimeZone", ">", "timeZone", "=", "databaseTimeZone", "(", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "JodaDateTimeArgumentFactory", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "LocalDateArgumentFactory", "(", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "LocalDateTimeArgumentFactory", "(", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "InstantArgumentFactory", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "OffsetDateTimeArgumentFactory", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "ZonedDateTimeArgumentFactory", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "GuavaOptionalJodaTimeArgumentFactory", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "GuavaOptionalLocalDateArgumentFactory", "(", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "GuavaOptionalLocalDateTimeArgumentFactory", "(", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "GuavaOptionalInstantArgumentFactory", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "GuavaOptionalOffsetTimeArgumentFactory", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "GuavaOptionalZonedTimeArgumentFactory", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "OptionalJodaTimeArgumentFactory", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "OptionalLocalDateArgumentFactory", "(", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "OptionalLocalDateTimeArgumentFactory", "(", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "OptionalInstantArgumentFactory", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "OptionalOffsetDateTimeArgumentFactory", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerArgumentFactory", "(", "new", "OptionalZonedDateTimeArgumentFactory", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerColumnMapper", "(", "new", "JodaDateTimeMapper", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerColumnMapper", "(", "new", "LocalDateMapper", "(", ")", ")", ";", "dbi", ".", "registerColumnMapper", "(", "new", "LocalDateTimeMapper", "(", ")", ")", ";", "dbi", ".", "registerColumnMapper", "(", "new", "InstantMapper", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerColumnMapper", "(", "new", "OffsetDateTimeMapper", "(", "timeZone", ")", ")", ";", "dbi", ".", "registerColumnMapper", "(", "new", "ZonedDateTimeMapper", "(", "timeZone", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "type", ")", "{", "return", "Optional", ".", "class", ".", "isAssignableFrom", "(", "type", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContainerBuilder", "<", "Optional", "<", "?", ">", ">", "newContainerBuilderFor", "(", "Class", "<", "?", ">", "type", ")", "{", "return", "new", "OptionalContainerBuilder", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContainerBuilder", "<", "Optional", "<", "?", ">", ">", "add", "(", "Object", "it", ")", "{", "optional", "=", "Optional", ".", "ofNullable", "(", "it", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Optional", "<", "?", ">", "build", "(", ")", "{", "return", "optional", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "type", ")", "{", "return", "ImmutableSet", ".", "class", ".", "isAssignableFrom", "(", "type", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContainerBuilder", "<", "ImmutableSet", "<", "?", ">", ">", "newContainerBuilderFor", "(", "Class", "<", "?", ">", "type", ")", "{", "return", "new", "ImmutableSetContainerBuilder", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContainerBuilder", "<", "ImmutableSet", "<", "?", ">", ">", "add", "(", "Object", "it", ")", "{", "builder", ".", "add", "(", "it", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ImmutableSet", "<", "?", ">", "build", "(", ")", "{", "return", "builder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "type", ")", "{", "return", "Optional", ".", "class", ".", "isAssignableFrom", "(", "type", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContainerBuilder", "<", "Optional", "<", "?", ">", ">", "newContainerBuilderFor", "(", "Class", "<", "?", ">", "type", ")", "{", "return", "new", "OptionalContainerBuilder", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContainerBuilder", "<", "Optional", "<", "?", ">", ">", "add", "(", "Object", "it", ")", "{", "optional", "=", "Optional", ".", "fromNullable", "(", "it", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Optional", "<", "?", ">", "build", "(", ")", "{", "return", "optional", ";", "}", "</s>"]
["<s>", "public", "NamePrependingStatementRewriter", "(", "StatementRewriter", "rewriter", ")", "{", "this", ".", "rewriter", "=", "rewriter", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "RewrittenStatement", "rewrite", "(", "String", "sql", ",", "Binding", "params", ",", "StatementContext", "ctx", ")", "{", "if", "(", "(", "ctx", ".", "getSqlObjectType", "(", ")", "!", "=", "null", ")", "&", "&", "(", "ctx", ".", "getSqlObjectMethod", "(", ")", "!", "=", "null", ")", ")", "{", "final", "StringBuilder", "query", "=", "new", "StringBuilder", "(", "sql", ".", "length", "(", ")", "+", "<NUM_LIT:100>", ")", ";", "query", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "String", "className", "=", "ctx", ".", "getSqlObjectType", "(", ")", ".", "getSimpleName", "(", ")", ";", "if", "(", "!", "className", ".", "isEmpty", "(", ")", ")", "{", "query", ".", "append", "(", "className", ")", ".", "append", "(", "<CHAR_LIT:.>", ")", ";", "}", "query", ".", "append", "(", "ctx", ".", "getSqlObjectMethod", "(", ")", ".", "getName", "(", ")", ")", ";", "query", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "query", ".", "append", "(", "sql", ")", ";", "return", "rewriter", ".", "rewrite", "(", "query", ".", "toString", "(", ")", ",", "params", ",", "ctx", ")", ";", "}", "return", "rewriter", ".", "rewrite", "(", "sql", ",", "params", ",", "ctx", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "logException", "(", "long", "id", ",", "DBIException", "exception", ")", "{", "final", "Throwable", "cause", "=", "exception", ".", "getCause", "(", ")", ";", "if", "(", "cause", "instanceof", "SQLException", ")", "{", "for", "(", "Throwable", "throwable", ":", "(", "SQLException", ")", "cause", ")", "{", "logger", ".", "error", "(", "formatLogMessage", "(", "id", ",", "throwable", ")", ",", "throwable", ")", ";", "}", "}", "else", "{", "logger", ".", "error", "(", "formatLogMessage", "(", "id", ",", "exception", ")", ",", "exception", ")", ";", "}", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "static", "synchronized", "void", "setLogger", "(", "Logger", "newLogger", ")", "{", "logger", "=", "newLogger", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "logException", "(", "long", "id", ",", "SQLException", "exception", ")", "{", "final", "String", "message", "=", "formatLogMessage", "(", "id", ",", "exception", ")", ";", "for", "(", "Throwable", "throwable", ":", "exception", ")", "{", "logger", ".", "error", "(", "message", ",", "throwable", ")", ";", "}", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "static", "synchronized", "void", "setLogger", "(", "Logger", "newLogger", ")", "{", "logger", "=", "newLogger", ";", "}", "</s>"]
["<s>", "public", "OffsetDateTimeArgumentFactory", "(", ")", "{", "calendar", "=", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "OffsetDateTimeArgumentFactory", "(", "Optional", "<", "TimeZone", ">", "timeZone", ")", "{", "calendar", "=", "timeZone", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "final", "Class", "<", "?", ">", "expectedType", ",", "final", "Object", "value", ",", "final", "StatementContext", "ctx", ")", "{", "return", "value", "instanceof", "OffsetDateTime", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "final", "Class", "<", "?", ">", "expectedType", ",", "final", "OffsetDateTime", "value", ",", "final", "StatementContext", "ctx", ")", "{", "return", "new", "OffsetDateTimeArgument", "(", "value", ",", "calendar", ")", ";", "}", "</s>"]
["<s>", "ZonedDateTimeArgument", "(", "@", "Nullable", "final", "ZonedDateTime", "value", ",", "final", "Optional", "<", "Calendar", ">", "calendar", ")", "{", "this", ".", "value", "=", "value", ";", "this", ".", "calendar", "=", "calendar", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "final", "int", "position", ",", "final", "PreparedStatement", "statement", ",", "final", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "if", "(", "value", "!", "=", "null", ")", "{", "if", "(", "calendar", ".", "isPresent", "(", ")", ")", "{", "final", "Calendar", "calendarClone", "=", "(", "Calendar", ")", "calendar", ".", "get", "(", ")", ".", "clone", "(", ")", ";", "statement", ".", "setTimestamp", "(", "position", ",", "Timestamp", ".", "from", "(", "value", ".", "toInstant", "(", ")", ")", ",", "calendarClone", ")", ";", "}", "else", "{", "statement", ".", "setTimestamp", "(", "position", ",", "Timestamp", ".", "from", "(", "value", ".", "toInstant", "(", ")", ")", ")", ";", "}", "}", "else", "{", "statement", ".", "setNull", "(", "position", ",", "Types", ".", "TIMESTAMP", ")", ";", "}", "}", "</s>"]
["<s>", "LocalDateTimeArgument", "(", "@", "Nullable", "final", "LocalDateTime", "value", ")", "{", "this", ".", "value", "=", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "final", "int", "position", ",", "final", "PreparedStatement", "statement", ",", "final", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "if", "(", "value", "!", "=", "null", ")", "{", "statement", ".", "setTimestamp", "(", "position", ",", "Timestamp", ".", "valueOf", "(", "value", ")", ")", ";", "}", "else", "{", "statement", ".", "setNull", "(", "position", ",", "Types", ".", "TIMESTAMP", ")", ";", "}", "}", "</s>"]
["<s>", "private", "DefaultOptionalArgument", "(", "OptionalInt", "value", ")", "{", "this", ".", "value", "=", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "int", "position", ",", "PreparedStatement", "statement", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "if", "(", "value", ".", "isPresent", "(", ")", ")", "{", "statement", ".", "setInt", "(", "position", ",", "value", ".", "getAsInt", "(", ")", ")", ";", "}", "else", "{", "statement", ".", "setNull", "(", "position", ",", "Types", ".", "INTEGER", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "return", "value", "instanceof", "OptionalInt", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "OptionalInt", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "DefaultOptionalArgument", "(", "value", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "OptionalDouble", "mapColumn", "(", "ResultSet", "r", ",", "int", "columnNumber", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "double", "value", "=", "r", ".", "getDouble", "(", "columnNumber", ")", ";", "return", "r", ".", "wasNull", "(", ")", "?", "OptionalDouble", ".", "empty", "(", ")", ":", "OptionalDouble", ".", "of", "(", "value", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "OptionalDouble", "mapColumn", "(", "ResultSet", "r", ",", "String", "columnLabel", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "double", "value", "=", "r", ".", "getDouble", "(", "columnLabel", ")", ";", "return", "r", ".", "wasNull", "(", ")", "?", "OptionalDouble", ".", "empty", "(", ")", ":", "OptionalDouble", ".", "of", "(", "value", ")", ";", "}", "</s>"]
["<s>", "public", "OptionalOffsetDateTimeArgumentFactory", "(", ")", "{", "calendar", "=", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "OptionalOffsetDateTimeArgumentFactory", "(", "Optional", "<", "TimeZone", ">", "timeZone", ")", "{", "calendar", "=", "timeZone", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "if", "(", "value", "instanceof", "Optional", ")", "{", "final", "Optional", "<", "?", ">", "optionalValue", "=", "(", "Optional", "<", "?", ">", ")", "value", ";", "return", "optionalValue", ".", "isPresent", "(", ")", "&", "&", "optionalValue", ".", "get", "(", ")", "instanceof", "OffsetDateTime", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Optional", "<", "OffsetDateTime", ">", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "OffsetDateTimeArgument", "(", "value", ".", "get", "(", ")", ",", "calendar", ")", ";", "}", "</s>"]
["<s>", "private", "DefaultOptionalArgument", "(", "OptionalLong", "value", ")", "{", "this", ".", "value", "=", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "int", "position", ",", "PreparedStatement", "statement", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "if", "(", "value", ".", "isPresent", "(", ")", ")", "{", "statement", ".", "setLong", "(", "position", ",", "value", ".", "getAsLong", "(", ")", ")", ";", "}", "else", "{", "statement", ".", "setNull", "(", "position", ",", "Types", ".", "BIGINT", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "return", "value", "instanceof", "OptionalLong", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "OptionalLong", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "DefaultOptionalArgument", "(", "value", ")", ";", "}", "</s>"]
["<s>", "public", "InstantArgumentFactory", "(", ")", "{", "this", "(", "Optional", ".", "empty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "InstantArgumentFactory", "(", "final", "Optional", "<", "TimeZone", ">", "tz", ")", "{", "this", ".", "calendar", "=", "tz", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "return", "value", "instanceof", "Instant", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Instant", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "InstantArgument", "(", "value", ",", "calendar", ")", ";", "}", "</s>"]
["<s>", "JodaDateTimeArgument", "(", "@", "Nullable", "final", "DateTime", "value", ",", "final", "Optional", "<", "Calendar", ">", "calendar", ")", "{", "this", ".", "value", "=", "value", ";", "this", ".", "calendar", "=", "calendar", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "final", "int", "position", ",", "final", "PreparedStatement", "statement", ",", "final", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "if", "(", "value", "!", "=", "null", ")", "{", "if", "(", "calendar", ".", "isPresent", "(", ")", ")", "{", "final", "Calendar", "calendarClone", "=", "(", "Calendar", ")", "calendar", ".", "get", "(", ")", ".", "clone", "(", ")", ";", "statement", ".", "setTimestamp", "(", "position", ",", "new", "Timestamp", "(", "value", ".", "getMillis", "(", ")", ")", ",", "calendarClone", ")", ";", "}", "else", "{", "statement", ".", "setTimestamp", "(", "position", ",", "new", "Timestamp", "(", "value", ".", "getMillis", "(", ")", ")", ")", ";", "}", "}", "else", "{", "statement", ".", "setNull", "(", "position", ",", "Types", ".", "TIMESTAMP", ")", ";", "}", "}", "</s>"]
["<s>", "public", "OptionalInstantArgumentFactory", "(", ")", "{", "calendar", "=", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "OptionalInstantArgumentFactory", "(", "Optional", "<", "TimeZone", ">", "timeZone", ")", "{", "calendar", "=", "timeZone", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "if", "(", "value", "instanceof", "Optional", ")", "{", "final", "Optional", "<", "?", ">", "optionalValue", "=", "(", "Optional", "<", "?", ">", ")", "value", ";", "return", "optionalValue", ".", "isPresent", "(", ")", "&", "&", "optionalValue", ".", "get", "(", ")", "instanceof", "Instant", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Optional", "<", "Instant", ">", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "InstantArgument", "(", "value", ".", "get", "(", ")", ",", "calendar", ")", ";", "}", "</s>"]
["<s>", "public", "OptionalZonedDateTimeArgumentFactory", "(", ")", "{", "calendar", "=", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "OptionalZonedDateTimeArgumentFactory", "(", "Optional", "<", "TimeZone", ">", "timeZone", ")", "{", "calendar", "=", "timeZone", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "if", "(", "value", "instanceof", "Optional", ")", "{", "final", "Optional", "<", "?", ">", "optionalValue", "=", "(", "Optional", "<", "?", ">", ")", "value", ";", "return", "optionalValue", ".", "isPresent", "(", ")", "&", "&", "optionalValue", ".", "get", "(", ")", "instanceof", "ZonedDateTime", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Optional", "<", "ZonedDateTime", ">", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "ZonedDateTimeArgument", "(", "value", ".", "get", "(", ")", ",", "calendar", ")", ";", "}", "</s>"]
["<s>", "protected", "InstantArgument", "(", "@", "Nullable", "final", "Instant", "instant", ",", "final", "Optional", "<", "Calendar", ">", "calendar", ")", "{", "this", ".", "instant", "=", "instant", ";", "this", ".", "calendar", "=", "calendar", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "int", "position", ",", "PreparedStatement", "statement", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "if", "(", "instant", "!", "=", "null", ")", "{", "if", "(", "calendar", ".", "isPresent", "(", ")", ")", "{", "final", "Calendar", "calendarClone", "=", "(", "Calendar", ")", "calendar", ".", "get", "(", ")", ".", "clone", "(", ")", ";", "statement", ".", "setTimestamp", "(", "position", ",", "Timestamp", ".", "from", "(", "instant", ")", ",", "calendarClone", ")", ";", "}", "else", "{", "statement", ".", "setTimestamp", "(", "position", ",", "Timestamp", ".", "from", "(", "instant", ")", ")", ";", "}", "}", "else", "{", "statement", ".", "setNull", "(", "position", ",", "Types", ".", "TIMESTAMP", ")", ";", "}", "}", "</s>"]
["<s>", "public", "ZonedDateTimeArgumentFactory", "(", ")", "{", "calendar", "=", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ZonedDateTimeArgumentFactory", "(", "Optional", "<", "TimeZone", ">", "timeZone", ")", "{", "calendar", "=", "timeZone", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "final", "Class", "<", "?", ">", "expectedType", ",", "final", "Object", "value", ",", "final", "StatementContext", "ctx", ")", "{", "return", "value", "instanceof", "ZonedDateTime", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "final", "Class", "<", "?", ">", "expectedType", ",", "final", "ZonedDateTime", "value", ",", "final", "StatementContext", "ctx", ")", "{", "return", "new", "ZonedDateTimeArgument", "(", "value", ",", "calendar", ")", ";", "}", "</s>"]
["<s>", "public", "GuavaOptionalInstantArgumentFactory", "(", ")", "{", "calendar", "=", "java", ".", "util", ".", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "GuavaOptionalInstantArgumentFactory", "(", "java", ".", "util", ".", "Optional", "<", "TimeZone", ">", "timeZone", ")", "{", "calendar", "=", "timeZone", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "if", "(", "value", "instanceof", "Optional", ")", "{", "final", "Optional", "<", "?", ">", "optionalValue", "=", "(", "Optional", "<", "?", ">", ")", "value", ";", "return", "optionalValue", ".", "isPresent", "(", ")", "&", "&", "optionalValue", ".", "get", "(", ")", "instanceof", "Instant", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Optional", "<", "Instant", ">", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "InstantArgument", "(", "value", ".", "get", "(", ")", ",", "calendar", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "OptionalLong", "mapColumn", "(", "ResultSet", "r", ",", "int", "columnNumber", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "long", "value", "=", "r", ".", "getLong", "(", "columnNumber", ")", ";", "return", "r", ".", "wasNull", "(", ")", "?", "OptionalLong", ".", "empty", "(", ")", ":", "OptionalLong", ".", "of", "(", "value", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "OptionalLong", "mapColumn", "(", "ResultSet", "r", ",", "String", "columnLabel", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "long", "value", "=", "r", ".", "getLong", "(", "columnLabel", ")", ";", "return", "r", ".", "wasNull", "(", ")", "?", "OptionalLong", ".", "empty", "(", ")", ":", "OptionalLong", ".", "of", "(", "value", ")", ";", "}", "</s>"]
["<s>", "public", "JodaDateTimeMapper", "(", ")", "{", "calendar", "=", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "JodaDateTimeMapper", "(", "Optional", "<", "TimeZone", ">", "timeZone", ")", "{", "calendar", "=", "timeZone", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "private", "Calendar", "cloneCalendar", "(", ")", "{", "return", "(", "Calendar", ")", "calendar", ".", "get", "(", ")", ".", "clone", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "DateTime", "mapColumn", "(", "ResultSet", "r", ",", "int", "columnNumber", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "Timestamp", "timestamp", "=", "calendar", ".", "isPresent", "(", ")", "?", "r", ".", "getTimestamp", "(", "columnNumber", ",", "cloneCalendar", "(", ")", ")", ":", "r", ".", "getTimestamp", "(", "columnNumber", ")", ";", "if", "(", "timestamp", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "new", "DateTime", "(", "timestamp", ".", "getTime", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "DateTime", "mapColumn", "(", "ResultSet", "r", ",", "String", "columnLabel", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "Timestamp", "timestamp", "=", "calendar", ".", "isPresent", "(", ")", "?", "r", ".", "getTimestamp", "(", "columnLabel", ",", "cloneCalendar", "(", ")", ")", ":", "r", ".", "getTimestamp", "(", "columnLabel", ")", ";", "if", "(", "timestamp", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "new", "DateTime", "(", "timestamp", ".", "getTime", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "OptionalInt", "mapColumn", "(", "ResultSet", "r", ",", "int", "columnNumber", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "int", "value", "=", "r", ".", "getInt", "(", "columnNumber", ")", ";", "return", "r", ".", "wasNull", "(", ")", "?", "OptionalInt", ".", "empty", "(", ")", ":", "OptionalInt", ".", "of", "(", "value", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "OptionalInt", "mapColumn", "(", "ResultSet", "r", ",", "String", "columnLabel", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "int", "value", "=", "r", ".", "getInt", "(", "columnLabel", ")", ";", "return", "r", ".", "wasNull", "(", ")", "?", "OptionalInt", ".", "empty", "(", ")", ":", "OptionalInt", ".", "of", "(", "value", ")", ";", "}", "</s>"]
["<s>", "private", "DefaultOptionalArgument", "(", "Optional", "<", "?", ">", "value", ")", "{", "this", ".", "value", "=", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "int", "position", ",", "PreparedStatement", "statement", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "if", "(", "value", ".", "isPresent", "(", ")", ")", "{", "statement", ".", "setObject", "(", "position", ",", "value", ".", "get", "(", ")", ")", ";", "}", "else", "{", "statement", ".", "setNull", "(", "position", ",", "Types", ".", "OTHER", ")", ";", "}", "}", "</s>"]
["<s>", "private", "MsSqlOptionalArgument", "(", "Optional", "<", "?", ">", "value", ")", "{", "this", ".", "value", "=", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "int", "position", ",", "PreparedStatement", "statement", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "statement", ".", "setObject", "(", "position", ",", "value", ".", "orNull", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "GuavaOptionalArgumentFactory", "(", "String", "jdbcDriver", ")", "{", "this", ".", "jdbcDriver", "=", "jdbcDriver", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "return", "value", "instanceof", "Optional", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Optional", "<", "Object", ">", "value", ",", "StatementContext", "ctx", ")", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "jdbcDriver", ")", ")", "{", "return", "new", "MsSqlOptionalArgument", "(", "value", ")", ";", "}", "return", "new", "DefaultOptionalArgument", "(", "value", ")", ";", "}", "</s>"]
["<s>", "public", "GuavaOptionalOffsetTimeArgumentFactory", "(", ")", "{", "calendar", "=", "java", ".", "util", ".", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "GuavaOptionalOffsetTimeArgumentFactory", "(", "java", ".", "util", ".", "Optional", "<", "TimeZone", ">", "timeZone", ")", "{", "calendar", "=", "timeZone", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "if", "(", "value", "instanceof", "Optional", ")", "{", "final", "Optional", "<", "?", ">", "optionalValue", "=", "(", "Optional", "<", "?", ">", ")", "value", ";", "return", "optionalValue", ".", "isPresent", "(", ")", "&", "&", "optionalValue", ".", "get", "(", ")", "instanceof", "OffsetDateTime", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Optional", "<", "OffsetDateTime", ">", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "OffsetDateTimeArgument", "(", "value", ".", "get", "(", ")", ",", "calendar", ")", ";", "}", "</s>"]
["<s>", "private", "DefaultOptionalArgument", "(", "OptionalDouble", "value", ")", "{", "this", ".", "value", "=", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "int", "position", ",", "PreparedStatement", "statement", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "if", "(", "value", ".", "isPresent", "(", ")", ")", "{", "statement", ".", "setDouble", "(", "position", ",", "value", ".", "getAsDouble", "(", ")", ")", ";", "}", "else", "{", "statement", ".", "setNull", "(", "position", ",", "Types", ".", "DOUBLE", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "return", "value", "instanceof", "OptionalDouble", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "OptionalDouble", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "DefaultOptionalArgument", "(", "value", ")", ";", "}", "</s>"]
["<s>", "public", "OffsetDateTimeMapper", "(", ")", "{", "calendar", "=", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "OffsetDateTimeMapper", "(", "Optional", "<", "TimeZone", ">", "timeZone", ")", "{", "calendar", "=", "timeZone", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "private", "Calendar", "cloneCalendar", "(", ")", "{", "return", "(", "Calendar", ")", "calendar", ".", "get", "(", ")", ".", "clone", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "OffsetDateTime", "mapColumn", "(", "ResultSet", "r", ",", "int", "columnNumber", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "Timestamp", "timestamp", "=", "calendar", ".", "isPresent", "(", ")", "?", "r", ".", "getTimestamp", "(", "columnNumber", ",", "cloneCalendar", "(", ")", ")", ":", "r", ".", "getTimestamp", "(", "columnNumber", ")", ";", "return", "convertToOffsetDateTime", "(", "timestamp", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "OffsetDateTime", "mapColumn", "(", "ResultSet", "r", ",", "String", "columnLabel", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "Timestamp", "timestamp", "=", "calendar", ".", "isPresent", "(", ")", "?", "r", ".", "getTimestamp", "(", "columnLabel", ",", "cloneCalendar", "(", ")", ")", ":", "r", ".", "getTimestamp", "(", "columnLabel", ")", ";", "return", "convertToOffsetDateTime", "(", "timestamp", ")", ";", "}", "</s>"]
["<s>", "@", "Nullable", "private", "OffsetDateTime", "convertToOffsetDateTime", "(", "Timestamp", "timestamp", ")", "{", "if", "(", "timestamp", "=", "=", "null", ")", "{", "return", "null", ";", "}", "final", "Optional", "<", "ZoneId", ">", "zoneId", "=", "calendar", ".", "flatMap", "(", "c", "-", ">", "Optional", ".", "of", "(", "c", ".", "getTimeZone", "(", ")", ".", "toZoneId", "(", ")", ")", ")", ";", "return", "OffsetDateTime", ".", "ofInstant", "(", "Instant", ".", "ofEpochSecond", "(", "timestamp", ".", "getTime", "(", ")", "/", "<NUM_LIT:1000>", ",", "timestamp", ".", "getNanos", "(", ")", ")", ",", "zoneId", ".", "orElse", "(", "ZoneId", ".", "systemDefault", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "ZonedDateTimeMapper", "(", ")", "{", "calendar", "=", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ZonedDateTimeMapper", "(", "Optional", "<", "TimeZone", ">", "timeZone", ")", "{", "calendar", "=", "timeZone", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "private", "Calendar", "cloneCalendar", "(", ")", "{", "return", "(", "Calendar", ")", "calendar", ".", "get", "(", ")", ".", "clone", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "ZonedDateTime", "mapColumn", "(", "ResultSet", "r", ",", "int", "columnNumber", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "Timestamp", "timestamp", "=", "calendar", ".", "isPresent", "(", ")", "?", "r", ".", "getTimestamp", "(", "columnNumber", ",", "cloneCalendar", "(", ")", ")", ":", "r", ".", "getTimestamp", "(", "columnNumber", ")", ";", "return", "convertToZonedDateTime", "(", "timestamp", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "ZonedDateTime", "mapColumn", "(", "ResultSet", "r", ",", "String", "columnLabel", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "Timestamp", "timestamp", "=", "calendar", ".", "isPresent", "(", ")", "?", "r", ".", "getTimestamp", "(", "columnLabel", ",", "cloneCalendar", "(", ")", ")", ":", "r", ".", "getTimestamp", "(", "columnLabel", ")", ";", "return", "convertToZonedDateTime", "(", "timestamp", ")", ";", "}", "</s>"]
["<s>", "@", "Nullable", "private", "ZonedDateTime", "convertToZonedDateTime", "(", "Timestamp", "timestamp", ")", "{", "if", "(", "timestamp", "=", "=", "null", ")", "{", "return", "null", ";", "}", "final", "Optional", "<", "ZoneId", ">", "zoneId", "=", "calendar", ".", "flatMap", "(", "c", "-", ">", "Optional", ".", "of", "(", "c", ".", "getTimeZone", "(", ")", ".", "toZoneId", "(", ")", ")", ")", ";", "return", "ZonedDateTime", ".", "ofInstant", "(", "Instant", ".", "ofEpochSecond", "(", "timestamp", ".", "getTime", "(", ")", "/", "<NUM_LIT:1000>", ",", "timestamp", ".", "getNanos", "(", ")", ")", ",", "zoneId", ".", "orElse", "(", "ZoneId", ".", "systemDefault", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "LocalDateArgument", "(", "@", "Nullable", "LocalDate", "value", ")", "{", "this", ".", "value", "=", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "int", "position", ",", "PreparedStatement", "statement", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "if", "(", "value", "!", "=", "null", ")", "{", "statement", ".", "setTimestamp", "(", "position", ",", "Timestamp", ".", "valueOf", "(", "value", ".", "atStartOfDay", "(", ")", ")", ")", ";", "}", "else", "{", "statement", ".", "setNull", "(", "position", ",", "Types", ".", "TIMESTAMP", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "if", "(", "value", "instanceof", "Optional", ")", "{", "final", "Optional", "<", "?", ">", "optionalValue", "=", "(", "Optional", "<", "?", ">", ")", "value", ";", "return", "optionalValue", ".", "isPresent", "(", ")", "&", "&", "optionalValue", ".", "get", "(", ")", "instanceof", "LocalDate", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Optional", "<", "LocalDate", ">", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "LocalDateArgument", "(", "value", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "LocalDate", "mapColumn", "(", "ResultSet", "r", ",", "String", "columnLabel", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "Timestamp", "timestamp", "=", "r", ".", "getTimestamp", "(", "columnLabel", ")", ";", "if", "(", "timestamp", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "timestamp", ".", "toLocalDateTime", "(", ")", ".", "toLocalDate", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "LocalDate", "mapColumn", "(", "ResultSet", "r", ",", "int", "columnNumber", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "Timestamp", "timestamp", "=", "r", ".", "getTimestamp", "(", "columnNumber", ")", ";", "if", "(", "timestamp", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "timestamp", ".", "toLocalDateTime", "(", ")", ".", "toLocalDate", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "LocalDateTime", "mapColumn", "(", "ResultSet", "r", ",", "String", "columnLabel", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "Timestamp", "timestamp", "=", "r", ".", "getTimestamp", "(", "columnLabel", ")", ";", "if", "(", "timestamp", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "timestamp", ".", "toLocalDateTime", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "LocalDateTime", "mapColumn", "(", "ResultSet", "r", ",", "int", "columnNumber", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "Timestamp", "timestamp", "=", "r", ".", "getTimestamp", "(", "columnNumber", ")", ";", "if", "(", "timestamp", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "timestamp", ".", "toLocalDateTime", "(", ")", ";", "}", "</s>"]
["<s>", "public", "GuavaOptionalZonedTimeArgumentFactory", "(", ")", "{", "calendar", "=", "java", ".", "util", ".", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "GuavaOptionalZonedTimeArgumentFactory", "(", "java", ".", "util", ".", "Optional", "<", "TimeZone", ">", "timeZone", ")", "{", "calendar", "=", "timeZone", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "if", "(", "value", "instanceof", "Optional", ")", "{", "final", "Optional", "<", "?", ">", "optionalValue", "=", "(", "Optional", "<", "?", ">", ")", "value", ";", "return", "optionalValue", ".", "isPresent", "(", ")", "&", "&", "optionalValue", ".", "get", "(", ")", "instanceof", "ZonedDateTime", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Optional", "<", "ZonedDateTime", ">", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "ZonedDateTimeArgument", "(", "value", ".", "get", "(", ")", ",", "calendar", ")", ";", "}", "</s>"]
["<s>", "private", "DefaultOptionalArgument", "(", "Optional", "<", "?", ">", "value", ",", "int", "nullType", ")", "{", "this", ".", "value", "=", "value", ";", "this", ".", "nullType", "=", "nullType", ";", "}", "</s>"]
["<s>", "private", "DefaultOptionalArgument", "(", "Optional", "<", "?", ">", "value", ")", "{", "this", "(", "value", ",", "Types", ".", "OTHER", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "int", "position", ",", "PreparedStatement", "statement", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "if", "(", "value", ".", "isPresent", "(", ")", ")", "{", "statement", ".", "setObject", "(", "position", ",", "value", ".", "get", "(", ")", ")", ";", "}", "else", "{", "statement", ".", "setNull", "(", "position", ",", "nullType", ")", ";", "}", "}", "</s>"]
["<s>", "private", "MsSqlOptionalArgument", "(", "Optional", "<", "?", ">", "value", ")", "{", "this", ".", "value", "=", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "int", "position", ",", "PreparedStatement", "statement", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "statement", ".", "setObject", "(", "position", ",", "value", ".", "orElse", "(", "null", ")", ")", ";", "}", "</s>"]
["<s>", "public", "OptionalArgumentFactory", "(", "String", "jdbcDriver", ")", "{", "this", ".", "jdbcDriver", "=", "jdbcDriver", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "return", "value", "instanceof", "Optional", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Optional", "<", "Object", ">", "value", ",", "StatementContext", "ctx", ")", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "jdbcDriver", ")", ")", "{", "return", "new", "MsSqlOptionalArgument", "(", "value", ")", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "jdbcDriver", ")", ")", "{", "return", "new", "DefaultOptionalArgument", "(", "value", ",", "Types", ".", "NULL", ")", ";", "}", "return", "new", "DefaultOptionalArgument", "(", "value", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "return", "value", "instanceof", "LocalDate", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "LocalDate", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "LocalDateArgument", "(", "value", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "if", "(", "value", "instanceof", "Optional", ")", "{", "final", "Optional", "<", "?", ">", "optionalValue", "=", "(", "Optional", "<", "?", ">", ")", "value", ";", "return", "optionalValue", ".", "isPresent", "(", ")", "&", "&", "optionalValue", ".", "get", "(", ")", "instanceof", "LocalDateTime", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Optional", "<", "LocalDateTime", ">", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "LocalDateTimeArgument", "(", "value", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "if", "(", "value", "instanceof", "Optional", ")", "{", "final", "Optional", "<", "?", ">", "optionalValue", "=", "(", "Optional", "<", "?", ">", ")", "value", ";", "return", "optionalValue", ".", "isPresent", "(", ")", "&", "&", "optionalValue", ".", "get", "(", ")", "instanceof", "LocalDate", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Optional", "<", "LocalDate", ">", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "LocalDateArgument", "(", "value", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "InstantMapper", "(", ")", "{", "this", "(", "Optional", ".", "empty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "InstantMapper", "(", "final", "Optional", "<", "TimeZone", ">", "tz", ")", "{", "this", ".", "calendar", "=", "tz", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "Instant", "mapColumn", "(", "ResultSet", "r", ",", "int", "columnNumber", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "Timestamp", "timestamp", "=", "calendar", ".", "isPresent", "(", ")", "?", "r", ".", "getTimestamp", "(", "columnNumber", ",", "cloneCalendar", "(", ")", ")", ":", "r", ".", "getTimestamp", "(", "columnNumber", ")", ";", "return", "timestamp", "=", "=", "null", "?", "null", ":", "timestamp", ".", "toInstant", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "Instant", "mapColumn", "(", "ResultSet", "r", ",", "String", "columnLabel", ",", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "final", "Timestamp", "timestamp", "=", "calendar", ".", "isPresent", "(", ")", "?", "r", ".", "getTimestamp", "(", "columnLabel", ",", "cloneCalendar", "(", ")", ")", ":", "r", ".", "getTimestamp", "(", "columnLabel", ")", ";", "return", "timestamp", "=", "=", "null", "?", "null", ":", "timestamp", ".", "toInstant", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Calendar", "cloneCalendar", "(", ")", "{", "return", "(", "Calendar", ")", "calendar", ".", "get", "(", ")", ".", "clone", "(", ")", ";", "}", "</s>"]
["<s>", "public", "JodaDateTimeArgumentFactory", "(", ")", "{", "calendar", "=", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "JodaDateTimeArgumentFactory", "(", "Optional", "<", "TimeZone", ">", "timeZone", ")", "{", "calendar", "=", "timeZone", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "final", "Class", "<", "?", ">", "expectedType", ",", "final", "Object", "value", ",", "final", "StatementContext", "ctx", ")", "{", "return", "value", "instanceof", "DateTime", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "final", "Class", "<", "?", ">", "expectedType", ",", "final", "DateTime", "value", ",", "final", "StatementContext", "ctx", ")", "{", "return", "new", "JodaDateTimeArgument", "(", "value", ",", "calendar", ")", ";", "}", "</s>"]
["<s>", "public", "OptionalJodaTimeArgumentFactory", "(", ")", "{", "calendar", "=", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "OptionalJodaTimeArgumentFactory", "(", "Optional", "<", "TimeZone", ">", "timeZone", ")", "{", "calendar", "=", "timeZone", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "if", "(", "value", "instanceof", "Optional", ")", "{", "final", "Optional", "<", "?", ">", "optionalValue", "=", "(", "Optional", "<", "?", ">", ")", "value", ";", "return", "optionalValue", ".", "isPresent", "(", ")", "&", "&", "optionalValue", ".", "get", "(", ")", "instanceof", "DateTime", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Optional", "<", "DateTime", ">", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "JodaDateTimeArgument", "(", "value", ".", "get", "(", ")", ",", "calendar", ")", ";", "}", "</s>"]
["<s>", "public", "GuavaOptionalJodaTimeArgumentFactory", "(", ")", "{", "calendar", "=", "java", ".", "util", ".", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "GuavaOptionalJodaTimeArgumentFactory", "(", "java", ".", "util", ".", "Optional", "<", "TimeZone", ">", "timeZone", ")", "{", "calendar", "=", "timeZone", ".", "map", "(", "GregorianCalendar", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "if", "(", "value", "instanceof", "Optional", ")", "{", "final", "Optional", "<", "?", ">", "optionalValue", "=", "(", "Optional", "<", "?", ">", ")", "value", ";", "return", "optionalValue", ".", "isPresent", "(", ")", "&", "&", "optionalValue", ".", "get", "(", ")", "instanceof", "DateTime", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Optional", "<", "DateTime", ">", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "JodaDateTimeArgument", "(", "value", ".", "get", "(", ")", ",", "calendar", ")", ";", "}", "</s>"]
["<s>", "OffsetDateTimeArgument", "(", "@", "Nullable", "final", "OffsetDateTime", "value", ",", "final", "Optional", "<", "Calendar", ">", "calendar", ")", "{", "this", ".", "value", "=", "value", ";", "this", ".", "calendar", "=", "calendar", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "final", "int", "position", ",", "final", "PreparedStatement", "statement", ",", "final", "StatementContext", "ctx", ")", "throws", "SQLException", "{", "if", "(", "value", "!", "=", "null", ")", "{", "if", "(", "calendar", ".", "isPresent", "(", ")", ")", "{", "final", "Calendar", "calendarClone", "=", "(", "Calendar", ")", "calendar", ".", "get", "(", ")", ".", "clone", "(", ")", ";", "statement", ".", "setTimestamp", "(", "position", ",", "Timestamp", ".", "from", "(", "value", ".", "toInstant", "(", ")", ")", ",", "calendarClone", ")", ";", "}", "else", "{", "statement", ".", "setTimestamp", "(", "position", ",", "Timestamp", ".", "from", "(", "value", ".", "toInstant", "(", ")", ")", ")", ";", "}", "}", "else", "{", "statement", ".", "setNull", "(", "position", ",", "Types", ".", "TIMESTAMP", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "Class", "<", "?", ">", "expectedType", ",", "Object", "value", ",", "StatementContext", "ctx", ")", "{", "if", "(", "value", "instanceof", "Optional", ")", "{", "final", "Optional", "<", "?", ">", "optionalValue", "=", "(", "Optional", "<", "?", ">", ")", "value", ";", "return", "optionalValue", ".", "isPresent", "(", ")", "&", "&", "optionalValue", ".", "get", "(", ")", "instanceof", "LocalDateTime", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "Class", "<", "?", ">", "expectedType", ",", "Optional", "<", "LocalDateTime", ">", "value", ",", "StatementContext", "ctx", ")", "{", "return", "new", "LocalDateTimeArgument", "(", "value", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "accepts", "(", "final", "Class", "<", "?", ">", "expectedType", ",", "final", "Object", "value", ",", "final", "StatementContext", "ctx", ")", "{", "return", "value", "instanceof", "LocalDateTime", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Argument", "build", "(", "final", "Class", "<", "?", ">", "expectedType", ",", "final", "LocalDateTime", "value", ",", "final", "StatementContext", "ctx", ")", "{", "return", "new", "LocalDateTimeArgument", "(", "value", ")", ";", "}", "</s>"]
["<s>", "public", "LogbackLog", "(", ")", "{", "this", "(", "(", "Logger", ")", "LoggerFactory", ".", "getLogger", "(", "DBI", ".", "class", ".", "getPackage", "(", ")", ".", "getName", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "LogbackLog", "(", "Logger", "log", ")", "{", "this", "(", "log", ",", "Level", ".", "DEBUG", ")", ";", "}", "</s>"]
["<s>", "public", "LogbackLog", "(", "Logger", "log", ",", "Level", "level", ")", "{", "this", ".", "log", "=", "log", ";", "this", ".", "level", "=", "level", ";", "this", ".", "fqcn", "=", "LogbackLog", ".", "class", ".", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "final", "boolean", "isEnabled", "(", ")", "{", "return", "log", ".", "isEnabledFor", "(", "level", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "final", "void", "log", "(", "String", "msg", ")", "{", "log", ".", "log", "(", "null", ",", "fqcn", ",", "Level", ".", "toLocationAwareLoggerInteger", "(", "level", ")", ",", "msg", ",", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "Bootstrap", "<", "?", ">", "bootstrap", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Environment", "environment", ")", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "LoggingSQLExceptionMapper", "(", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "LoggingDBIExceptionMapper", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "assumeThat", "(", "Locale", ".", "getDefault", "(", ")", ".", "getLanguage", "(", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "acceptsNonPrivilegedPorts", "(", ")", "throws", "Exception", "{", "example", ".", "port", "=", "<NUM_LIT>", ";", "assertThat", "(", "validator", ".", "validate", "(", "example", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "acceptsDynamicPorts", "(", ")", "throws", "Exception", "{", "example", ".", "port", "=", "0", ";", "assertThat", "(", "validator", ".", "validate", "(", "example", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rejectsNegativePorts", "(", ")", "throws", "Exception", "{", "example", ".", "port", "=", "-", "1", ";", "assertThat", "(", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "example", ")", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "allowsForCustomMinimumPorts", "(", ")", "throws", "Exception", "{", "example", ".", "otherPort", "=", "<NUM_LIT>", ";", "assertThat", "(", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "example", ")", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "allowsForCustomMaximumPorts", "(", ")", "throws", "Exception", "{", "example", ".", "otherPort", "=", "<NUM_LIT>", ";", "assertThat", "(", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "example", ")", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rejectsInvalidPortsInList", "(", ")", "{", "example", ".", "ports", "=", "ImmutableList", ".", "of", "(", "-", "1", ")", ";", "assertThat", "(", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "example", ")", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setTooBig", "(", "Size", "tooBig", ")", "{", "this", ".", "tooBig", "=", "tooBig", ";", "}", "</s>"]
["<s>", "public", "void", "setTooSmall", "(", "Size", "tooSmall", ")", "{", "this", ".", "tooSmall", "=", "tooSmall", ";", "}", "</s>"]
["<s>", "public", "void", "setOutOfRange", "(", "Size", "outOfRange", ")", "{", "this", ".", "outOfRange", "=", "outOfRange", ";", "}", "</s>"]
["<s>", "public", "void", "setMaxSize", "(", "List", "<", "Size", ">", "maxSize", ")", "{", "this", ".", "maxSize", "=", "maxSize", ";", "}", "</s>"]
["<s>", "public", "void", "setMinSize", "(", "List", "<", "Size", ">", "minSize", ")", "{", "this", ".", "minSize", "=", "minSize", ";", "}", "</s>"]
["<s>", "public", "void", "setRangeSize", "(", "List", "<", "Size", ">", "rangeSize", ")", "{", "this", ".", "rangeSize", "=", "rangeSize", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsASetOfErrorsForAnObject", "(", ")", "throws", "Exception", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "Locale", ".", "getDefault", "(", ")", ".", "getLanguage", "(", ")", ")", ")", "{", "assertThat", "(", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "new", "Example", "(", ")", ")", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsAnEmptySetForAValidObject", "(", ")", "throws", "Exception", "{", "final", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "setTooBig", "(", "Size", ".", "bytes", "(", "<NUM_LIT:10>", ")", ")", ";", "example", ".", "setTooSmall", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:10>", ")", ")", ";", "example", ".", "setOutOfRange", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT>", ")", ")", ";", "example", ".", "setMaxSize", "(", "ImmutableList", ".", "of", "(", "Size", ".", "bytes", "(", "<NUM_LIT:10>", ")", ")", ")", ";", "example", ".", "setMinSize", "(", "ImmutableList", ".", "of", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:10>", ")", ")", ")", ";", "example", ".", "setRangeSize", "(", "ImmutableList", ".", "of", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT>", ")", ")", ")", ";", "assertThat", "(", "validator", ".", "validate", "(", "example", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isOK", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isFalse", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isTrue", "(", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "complainsAboutMethodsWhichReturnFalse", "(", ")", "throws", "Exception", "{", "final", "ImmutableList", "<", "String", ">", "errors", "=", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "new", "Example", "(", ")", ")", ")", ";", "assertThat", "(", "errors", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setName", "(", "String", "name", ")", "{", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "public", "void", "setTooBig", "(", "Duration", "tooBig", ")", "{", "this", ".", "tooBig", "=", "tooBig", ";", "}", "</s>"]
["<s>", "public", "void", "setTooBigExclusive", "(", "Duration", "tooBigExclusive", ")", "{", "this", ".", "tooBigExclusive", "=", "tooBigExclusive", ";", "}", "</s>"]
["<s>", "public", "void", "setTooSmall", "(", "Duration", "tooSmall", ")", "{", "this", ".", "tooSmall", "=", "tooSmall", ";", "}", "</s>"]
["<s>", "public", "void", "setTooSmallExclusive", "(", "Duration", "tooSmallExclusive", ")", "{", "this", ".", "tooSmallExclusive", "=", "tooSmallExclusive", ";", "}", "</s>"]
["<s>", "public", "void", "setOutOfRange", "(", "Duration", "outOfRange", ")", "{", "this", ".", "outOfRange", "=", "outOfRange", ";", "}", "</s>"]
["<s>", "public", "void", "setMaxDurs", "(", "List", "<", "Duration", ">", "maxDurs", ")", "{", "this", ".", "maxDurs", "=", "maxDurs", ";", "}", "</s>"]
["<s>", "public", "void", "setMinDurs", "(", "List", "<", "Duration", ">", "minDurs", ")", "{", "this", ".", "minDurs", "=", "minDurs", ";", "}", "</s>"]
["<s>", "public", "void", "setRangeDurs", "(", "List", "<", "Duration", ">", "rangeDurs", ")", "{", "this", ".", "rangeDurs", "=", "rangeDurs", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsASetOfErrorsForAnObject", "(", ")", "throws", "Exception", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "Locale", ".", "getDefault", "(", ")", ".", "getLanguage", "(", ")", ")", ")", "{", "final", "ImmutableList", "<", "String", ">", "errors", "=", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "new", "Example", "(", ")", ")", ")", ";", "assertThat", "(", "errors", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsAnEmptySetForAValidObject", "(", ")", "throws", "Exception", "{", "final", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "setTooBig", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:10>", ")", ")", ";", "example", ".", "setTooBigExclusive", "(", "Duration", ".", "seconds", "(", "<NUM_LIT>", ")", ")", ";", "example", ".", "setTooSmall", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:100>", ")", ")", ";", "example", ".", "setTooSmallExclusive", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:31>", ")", ")", ";", "example", ".", "setOutOfRange", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:15>", ")", ")", ";", "example", ".", "setMaxDurs", "(", "ImmutableList", ".", "of", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:10>", ")", ")", ")", ";", "example", ".", "setMinDurs", "(", "ImmutableList", ".", "of", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:100>", ")", ")", ")", ";", "example", ".", "setRangeDurs", "(", "ImmutableList", ".", "of", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:15>", ")", ")", ")", ";", "assertThat", "(", "validator", ".", "validate", "(", "example", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "allowsExactElements", "(", ")", "throws", "Exception", "{", "assertThat", "(", "format", "(", "validator", ".", "validate", "(", "new", "Example", "(", ")", ")", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotAllowOtherElements", "(", ")", "throws", "Exception", "{", "assumeTrue", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "Locale", ".", "getDefault", "(", ")", ".", "getLanguage", "(", ")", ")", ")", ";", "final", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "basic", "=", "\"", "<STR_LIT>", "\"", ";", "assertThat", "(", "format", "(", "validator", ".", "validate", "(", "example", ")", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotAllowBadElementsInList", "(", ")", "{", "final", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "basicList", "=", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "format", "(", "validator", ".", "validate", "(", "example", ")", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "optionallyIgnoresCase", "(", ")", "throws", "Exception", "{", "final", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "caseInsensitive", "=", "\"", "<STR_LIT>", "\"", ";", "assertThat", "(", "format", "(", "validator", ".", "validate", "(", "example", ")", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "optionallyIgnoresWhitespace", "(", ")", "throws", "Exception", "{", "final", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "whitespaceInsensitive", "=", "\"", "<STR_LIT>", "\"", ";", "assertThat", "(", "format", "(", "validator", ".", "validate", "(", "example", ")", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SelfValidation", "public", "void", "validateFail", "(", "ViolationCollector", "col", ")", "{", "col", ".", "addViolation", "(", "FAILED", ")", ";", "}", "</s>"]
["<s>", "@", "SelfValidation", "public", "void", "validateFail", "(", "ViolationCollector", "col", ")", "{", "col", ".", "getContext", "(", ")", ".", "buildConstraintViolationWithTemplate", "(", "FAILED", ")", ".", "addConstraintViolation", "(", ")", ";", "col", ".", "setViolationOccurred", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SelfValidation", "public", "void", "validateCorrect", "(", "ViolationCollector", "col", ")", "{", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SelfValidation", "public", "void", "validateCorrect", "(", "ViolationCollector", "col", ")", "{", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SelfValidation", "public", "void", "validateFailAdditionalParameters", "(", "ViolationCollector", "col", ",", "int", "a", ")", "{", "col", ".", "addViolation", "(", "FAILED", ")", ";", "}", "</s>"]
["<s>", "@", "SelfValidation", "public", "boolean", "validateFailReturn", "(", "ViolationCollector", "col", ")", "{", "col", ".", "addViolation", "(", "FAILED", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "@", "SelfValidation", "private", "void", "validateFailPrivate", "(", "ViolationCollector", "col", ")", "{", "col", ".", "addViolation", "(", "FAILED", ")", ";", "}", "</s>"]
["<s>", "@", "SelfValidation", "public", "void", "validateFail1", "(", "ViolationCollector", "col", ")", "{", "col", ".", "addViolation", "(", "FAILED", "+", "\"", "<STR_LIT:1>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "SelfValidation", "public", "void", "validateFail2", "(", "ViolationCollector", "col", ")", "{", "col", ".", "addViolation", "(", "FAILED", "+", "\"", "<STR_LIT:2>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "SelfValidation", "public", "void", "validateFail3", "(", "ViolationCollector", "col", ")", "{", "col", ".", "addViolation", "(", "FAILED", "+", "\"", "<STR_LIT:3>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "SelfValidation", "public", "void", "validateCorrect", "(", "ViolationCollector", "col", ")", "{", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "failingExample", "(", ")", "throws", "Exception", "{", "assertThat", "(", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "new", "FailingExample", "(", ")", ")", ")", ")", ".", "containsOnly", "(", "\"", "\"", "+", "FAILED", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "correctExample", "(", ")", "throws", "Exception", "{", "assertThat", "(", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "new", "CorrectExample", "(", ")", ")", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "multipleTestingOfSameClass", "(", ")", "throws", "Exception", "{", "assertThat", "(", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "new", "CorrectExample", "(", ")", ")", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "new", "CorrectExample", "(", ")", ")", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDirectContextUsage", "(", ")", "throws", "Exception", "{", "assertThat", "(", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "new", "DirectContextExample", "(", ")", ")", ")", ")", ".", "containsOnly", "(", "\"", "\"", "+", "FAILED", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "complexExample", "(", ")", "throws", "Exception", "{", "assertThat", "(", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "new", "ComplexExample", "(", ")", ")", ")", ")", ".", "containsOnly", "(", "\"", "\"", "+", "FAILED", "+", "\"", "<STR_LIT:1>", "\"", ",", "\"", "\"", "+", "FAILED", "+", "\"", "<STR_LIT:2>", "\"", ",", "\"", "\"", "+", "FAILED", "+", "\"", "<STR_LIT:3>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidExample", "(", ")", "throws", "Exception", "{", "assertThat", "(", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "new", "InvalidExample", "(", ")", ")", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "giveWarningIfNoValidationMethods", "(", ")", "throws", "Exception", "{", "assertThat", "(", "ConstraintViolations", ".", "format", "(", "validator", ".", "validate", "(", "new", "NoValidations", "(", ")", ")", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SelfValidation", "public", "void", "validateCorrect", "(", "ViolationCollector", "col", ")", "{", "}", "</s>"]
["<s>", "@", "SelfValidation", "public", "void", "validateFailAdditionalParameters", "(", "ViolationCollector", "col", ",", "int", "a", ")", "{", "}", "</s>"]
["<s>", "@", "SelfValidation", "public", "boolean", "validateFailReturn", "(", "ViolationCollector", "col", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "SelfValidation", "private", "void", "validateFailPrivate", "(", "ViolationCollector", "col", ")", "{", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "correctMethod", "(", ")", "throws", "Exception", "{", "assertThat", "(", "selfValidatingValidator", ".", "isCorrectMethod", "(", "InvalidExample", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ",", "ViolationCollector", ".", "class", ")", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "voidIsNotAccepted", "(", ")", "throws", "Exception", "{", "assertThat", "(", "selfValidatingValidator", ".", "isCorrectMethod", "(", "InvalidExample", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ",", "ViolationCollector", ".", "class", ")", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "privateIsNotAccepted", "(", ")", "throws", "Exception", "{", "assertThat", "(", "selfValidatingValidator", ".", "isCorrectMethod", "(", "InvalidExample", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ",", "ViolationCollector", ".", "class", ")", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "additionalParametersAreNotAccepted", "(", ")", "throws", "Exception", "{", "assertThat", "(", "selfValidatingValidator", ".", "isCorrectMethod", "(", "InvalidExample", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ",", "ViolationCollector", ".", "class", ",", "int", ".", "class", ")", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "succeedsWhenAbsent", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "failsWhenFailingConstraint", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "three", "=", "OptionalDouble", ".", "of", "(", "<NUM_LIT:2>", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "succeedsWhenConstraintsMet", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "three", "=", "OptionalDouble", ".", "of", "(", "<NUM_LIT:10>", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notNullFailsWhenAbsent", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "notNull", "=", "OptionalDouble", ".", "empty", "(", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "succeedsWhenAbsent", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "failsWhenFailingConstraint", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "three", "=", "OptionalLong", ".", "of", "(", "<NUM_LIT:2>", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "succeedsWhenConstraintsMet", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "three", "=", "OptionalLong", ".", "of", "(", "<NUM_LIT:10>", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notNullFailsWhenAbsent", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "notNull", "=", "OptionalLong", ".", "empty", "(", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "succeedsWhenAbsent", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "failsWhenFailingConstraint", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "three", "=", "Optional", ".", "of", "(", "<NUM_LIT:2>", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "succeedsWhenConstraintsMet", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "three", "=", "Optional", ".", "of", "(", "<NUM_LIT:10>", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notNullFailsWhenAbsent", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "notNull", "=", "Optional", ".", "empty", "(", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "succeedsWhenAbsent", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "failsWhenFailingConstraint", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "three", "=", "Optional", ".", "of", "(", "<NUM_LIT:2>", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "succeedsWhenConstraintsMet", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "three", "=", "Optional", ".", "of", "(", "<NUM_LIT:10>", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notNullFailsWhenAbsent", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "notNull", "=", "Optional", ".", "absent", "(", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "succeedsWhenAbsent", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "failsWhenFailingConstraint", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "three", "=", "OptionalInt", ".", "of", "(", "<NUM_LIT:2>", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "succeedsWhenConstraintsMet", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "three", "=", "OptionalInt", ".", "of", "(", "<NUM_LIT:10>", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notNullFailsWhenAbsent", "(", ")", "{", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "notNull", "=", "OptionalInt", ".", "empty", "(", ")", ";", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "violations", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "PortRange", "constraintAnnotation", ")", "{", "this", ".", "min", "=", "constraintAnnotation", ".", "min", "(", ")", ";", "this", ".", "max", "=", "constraintAnnotation", ".", "max", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isValid", "(", "Integer", "value", ",", "ConstraintValidatorContext", "context", ")", "{", "return", "value", "=", "=", "0", "|", "|", "(", "value", ">", "=", "min", "&", "&", "value", "<", "=", "max", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "OneOf", "constraintAnnotation", ")", "{", "this", ".", "values", "=", "constraintAnnotation", ".", "value", "(", ")", ";", "this", ".", "caseInsensitive", "=", "constraintAnnotation", ".", "ignoreCase", "(", ")", ";", "this", ".", "ignoreWhitespace", "=", "constraintAnnotation", ".", "ignoreWhitespace", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isValid", "(", "Object", "value", ",", "ConstraintValidatorContext", "context", ")", "{", "if", "(", "value", "=", "=", "null", ")", "{", "return", "true", ";", "}", "final", "String", "v", "=", "ignoreWhitespace", "?", "value", ".", "toString", "(", ")", ".", "trim", "(", ")", ":", "value", ".", "toString", "(", ")", ";", "if", "(", "caseInsensitive", ")", "{", "for", "(", "String", "s", ":", "values", ")", "{", "if", "(", "s", ".", "equalsIgnoreCase", "(", "v", ")", ")", "{", "return", "true", ";", "}", "}", "}", "else", "{", "for", "(", "String", "s", ":", "values", ")", "{", "if", "(", "s", ".", "equals", "(", "v", ")", ")", "{", "return", "true", ";", "}", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "MinSize", "constraintAnnotation", ")", "{", "this", ".", "minQty", "=", "constraintAnnotation", ".", "value", "(", ")", ";", "this", ".", "minUnit", "=", "constraintAnnotation", ".", "unit", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isValid", "(", "Size", "value", ",", "ConstraintValidatorContext", "context", ")", "{", "return", "(", "value", "=", "=", "null", ")", "|", "|", "(", "value", ".", "toBytes", "(", ")", ">", "=", "minUnit", ".", "toBytes", "(", "minQty", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "ValidationMethod", "constraintAnnotation", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isValid", "(", "Boolean", "value", ",", "ConstraintValidatorContext", "context", ")", "{", "return", "(", "value", "=", "=", "null", ")", "|", "|", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "MinDuration", "constraintAnnotation", ")", "{", "this", ".", "minQty", "=", "constraintAnnotation", ".", "value", "(", ")", ";", "this", ".", "minUnit", "=", "constraintAnnotation", ".", "unit", "(", ")", ";", "this", ".", "inclusive", "=", "constraintAnnotation", ".", "inclusive", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isValid", "(", "Duration", "value", ",", "ConstraintValidatorContext", "context", ")", "{", "if", "(", "value", "=", "=", "null", ")", "{", "return", "true", ";", "}", "long", "valueNanos", "=", "value", ".", "toNanoseconds", "(", ")", ";", "long", "annotationNanos", "=", "minUnit", ".", "toNanos", "(", "minQty", ")", ";", "if", "(", "inclusive", ")", "{", "return", "valueNanos", ">", "=", "annotationNanos", ";", "}", "else", "{", "return", "valueNanos", ">", "annotationNanos", ";", "}", "}", "</s>"]
["<s>", "private", "ConstraintViolations", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "<", "T", ">", "String", "format", "(", "ConstraintViolation", "<", "T", ">", "v", ")", "{", "if", "(", "v", ".", "getConstraintDescriptor", "(", ")", ".", "getAnnotation", "(", ")", "instanceof", "ValidationMethod", ")", "{", "return", "v", ".", "getMessage", "(", ")", ";", "}", "else", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "v", ".", "getPropertyPath", "(", ")", ",", "v", ".", "getMessage", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "<", "T", ">", "ImmutableList", "<", "String", ">", "format", "(", "Set", "<", "ConstraintViolation", "<", "T", ">", ">", "violations", ")", "{", "final", "Set", "<", "String", ">", "errors", "=", "new", "HashSet", "<", ">", "(", ")", ";", "for", "(", "ConstraintViolation", "<", "?", ">", "v", ":", "violations", ")", "{", "errors", ".", "add", "(", "format", "(", "v", ")", ")", ";", "}", "return", "ImmutableList", ".", "copyOf", "(", "Ordering", ".", "natural", "(", ")", ".", "sortedCopy", "(", "errors", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "ImmutableList", "<", "String", ">", "formatUntyped", "(", "Set", "<", "ConstraintViolation", "<", "?", ">", ">", "violations", ")", "{", "final", "Set", "<", "String", ">", "errors", "=", "new", "HashSet", "<", ">", "(", ")", ";", "for", "(", "ConstraintViolation", "<", "?", ">", "v", ":", "violations", ")", "{", "errors", ".", "add", "(", "format", "(", "v", ")", ")", ";", "}", "return", "ImmutableList", ".", "copyOf", "(", "Ordering", ".", "natural", "(", ")", ".", "sortedCopy", "(", "errors", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "<", "T", ">", "ImmutableSet", "<", "ConstraintViolation", "<", "?", ">", ">", "copyOf", "(", "Set", "<", "ConstraintViolation", "<", "T", ">", ">", "violations", ")", "{", "final", "ImmutableSet", ".", "Builder", "<", "ConstraintViolation", "<", "?", ">", ">", "builder", "=", "ImmutableSet", ".", "builder", "(", ")", ";", "for", "(", "ConstraintViolation", "<", "T", ">", "violation", ":", "violations", ")", "{", "builder", ".", "add", "(", "violation", ")", ";", "}", "return", "builder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "MaxDuration", "constraintAnnotation", ")", "{", "this", ".", "maxQty", "=", "constraintAnnotation", ".", "value", "(", ")", ";", "this", ".", "maxUnit", "=", "constraintAnnotation", ".", "unit", "(", ")", ";", "this", ".", "inclusive", "=", "constraintAnnotation", ".", "inclusive", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isValid", "(", "Duration", "value", ",", "ConstraintValidatorContext", "context", ")", "{", "if", "(", "value", "=", "=", "null", ")", "{", "return", "true", ";", "}", "long", "valueNanos", "=", "value", ".", "toNanoseconds", "(", ")", ";", "long", "annotationNanos", "=", "maxUnit", ".", "toNanos", "(", "maxQty", ")", ";", "if", "(", "inclusive", ")", "{", "return", "valueNanos", "<", "=", "annotationNanos", ";", "}", "else", "{", "return", "valueNanos", "<", "annotationNanos", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "MaxSize", "constraintAnnotation", ")", "{", "this", ".", "maxQty", "=", "constraintAnnotation", ".", "value", "(", ")", ";", "this", ".", "maxUnit", "=", "constraintAnnotation", ".", "unit", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isValid", "(", "Size", "value", ",", "ConstraintValidatorContext", "context", ")", "{", "return", "(", "value", "=", "=", "null", ")", "|", "|", "(", "value", ".", "toBytes", "(", ")", "<", "=", "maxUnit", ".", "toBytes", "(", "maxQty", ")", ")", ";", "}", "</s>"]
["<s>", "private", "BaseValidator", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "Validator", "newValidator", "(", ")", "{", "return", "newConfiguration", "(", ")", ".", "buildValidatorFactory", "(", ")", ".", "getValidator", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "HibernateValidatorConfiguration", "newConfiguration", "(", ")", "{", "return", "Validation", ".", "byProvider", "(", "HibernateValidator", ".", "class", ")", ".", "configure", "(", ")", ".", "addValidatedValueHandler", "(", "new", "GuavaOptionalValidatedValueUnwrapper", "(", ")", ")", ".", "addValidatedValueHandler", "(", "new", "OptionalDoubleValidatedValueUnwrapper", "(", ")", ")", ".", "addValidatedValueHandler", "(", "new", "OptionalIntValidatedValueUnwrapper", "(", ")", ")", ".", "addValidatedValueHandler", "(", "new", "OptionalLongValidatedValueUnwrapper", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "SelfValidating", "constraintAnnotation", ")", "{", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "{", "\"", "<STR_LIT>", "\"", "}", ")", "@", "Override", "public", "boolean", "isValid", "(", "Object", "value", ",", "ConstraintValidatorContext", "context", ")", "{", "final", "ViolationCollector", "collector", "=", "new", "ViolationCollector", "(", "context", ")", ";", "context", ".", "disableDefaultConstraintViolation", "(", ")", ";", "for", "(", "ValidationCaller", "caller", ":", "methodMap", ".", "computeIfAbsent", "(", "value", ".", "getClass", "(", ")", ",", "this", ":", ":", "findMethods", ")", ")", "{", "caller", ".", "setValidationObject", "(", "value", ")", ";", "caller", ".", "call", "(", "collector", ")", ";", "}", "return", "!", "collector", ".", "hasViolationOccurred", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "private", "List", "<", "ValidationCaller", "<", "?", ">", ">", "findMethods", "(", "Class", "<", "?", ">", "annotated", ")", "{", "final", "ClassPool", "cp", ";", "final", "CtClass", "callerSuperclass", ";", "final", "CtClass", "[", "]", "callingParameters", ";", "try", "{", "cp", "=", "ClassPool", ".", "getDefault", "(", ")", ";", "callerSuperclass", "=", "cp", ".", "get", "(", "ValidationCaller", ".", "class", ".", "getName", "(", ")", ")", ";", "callingParameters", "=", "new", "CtClass", "[", "]", "{", "cp", ".", "get", "(", "ViolationCollector", ".", "class", ".", "getName", "(", ")", ")", "}", ";", "}", "catch", "(", "NotFoundException", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "final", "List", "<", "ValidationCaller", "<", "?", ">", ">", "callers", "=", "Arrays", ".", "stream", "(", "annotated", ".", "getDeclaredMethods", "(", ")", ")", ".", "filter", "(", "m", "-", ">", "m", ".", "isAnnotationPresent", "(", "SelfValidation", ".", "class", ")", ")", ".", "filter", "(", "this", ":", ":", "isCorrectMethod", ")", ".", "map", "(", "m", "-", ">", "{", "try", "{", "CtClass", "cc", "=", "cp", ".", "makeClass", "(", "\"", "<STR_LIT>", "\"", "+", "COUNTER", ".", "getAndIncrement", "(", ")", ")", ";", "cc", ".", "setSuperclass", "(", "callerSuperclass", ")", ";", "CtMethod", "cm", "=", "new", "CtMethod", "(", "CtClass", ".", "voidType", ",", "\"", "<STR_LIT>", "\"", ",", "callingParameters", ",", "cc", ")", ";", "cc", ".", "addMethod", "(", "cm", ")", ";", "cm", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", "+", "annotated", ".", "getName", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "m", ".", "getName", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "cc", ".", "setModifiers", "(", "Modifier", ".", "PUBLIC", ")", ";", "return", "(", "ValidationCaller", "<", "?", ">", ")", "cc", ".", "toClass", "(", ")", ".", "getConstructor", "(", ")", ".", "newInstance", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", "+", "m", ",", "e", ")", ";", "}", "}", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "if", "(", "callers", ".", "isEmpty", "(", ")", ")", "{", "log", ".", "error", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "annotated", ")", ";", "}", "return", "callers", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "boolean", "isCorrectMethod", "(", "Method", "m", ")", "{", "if", "(", "!", "void", ".", "class", ".", "equals", "(", "m", ".", "getReturnType", "(", ")", ")", ")", "{", "log", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "m", ")", ";", "return", "false", ";", "}", "else", "if", "(", "m", ".", "getParameterTypes", "(", ")", ".", "length", "!", "=", "1", "|", "|", "!", "m", ".", "getParameterTypes", "(", ")", "[", "0", "]", ".", "equals", "(", "ViolationCollector", ".", "class", ")", ")", "{", "log", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "m", ",", "ViolationCollector", ".", "class", ")", ";", "return", "false", ";", "}", "else", "if", "(", "!", "Modifier", ".", "isPublic", "(", "m", ".", "getModifiers", "(", ")", ")", ")", "{", "log", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "m", ")", ";", "return", "false", ";", "}", "return", "true", ";", "}", "</s>"]
["<s>", "public", "ViolationCollector", "(", "ConstraintValidatorContext", "context", ")", "{", "this", ".", "context", "=", "context", ";", "}", "</s>"]
["<s>", "public", "void", "addViolation", "(", "String", "msg", ")", "{", "violationOccurred", "=", "true", ";", "context", ".", "buildConstraintViolationWithTemplate", "(", "msg", ")", ".", "addConstraintViolation", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ConstraintValidatorContext", "getContext", "(", ")", "{", "return", "context", ";", "}", "</s>"]
["<s>", "public", "boolean", "hasViolationOccurred", "(", ")", "{", "return", "violationOccurred", ";", "}", "</s>"]
["<s>", "public", "void", "setViolationOccurred", "(", "boolean", "violationOccurred", ")", "{", "this", ".", "violationOccurred", "=", "violationOccurred", ";", "}", "</s>"]
["<s>", "public", "void", "setValidationObject", "(", "T", "obj", ")", "{", "this", ".", "validationObject", "=", "obj", ";", "}", "</s>"]
["<s>", "@", "Nullable", "public", "T", "getValidationObject", "(", ")", "{", "return", "validationObject", ";", "}", "</s>"]
["<s>", "public", "abstract", "void", "call", "(", "ViolationCollector", "vc", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "Object", "handleValidatedValue", "(", "final", "Optional", "<", "?", ">", "optional", ")", "{", "return", "optional", ".", "orNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Type", "getValidatedValueType", "(", "final", "Type", "type", ")", "{", "final", "ResolvedType", "resolvedType", "=", "resolver", ".", "resolve", "(", "type", ")", ";", "return", "resolvedType", ".", "typeParametersFor", "(", "Optional", ".", "class", ")", ".", "get", "(", "0", ")", ".", "getErasedType", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "Object", "handleValidatedValue", "(", "final", "OptionalInt", "optional", ")", "{", "return", "optional", ".", "isPresent", "(", ")", "?", "optional", ".", "getAsInt", "(", ")", ":", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Type", "getValidatedValueType", "(", "final", "Type", "type", ")", "{", "return", "Integer", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "Object", "handleValidatedValue", "(", "final", "OptionalDouble", "optional", ")", "{", "return", "optional", ".", "isPresent", "(", ")", "?", "optional", ".", "getAsDouble", "(", ")", ":", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Type", "getValidatedValueType", "(", "final", "Type", "type", ")", "{", "return", "Double", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "Object", "handleValidatedValue", "(", "final", "OptionalLong", "optional", ")", "{", "return", "optional", ".", "isPresent", "(", ")", "?", "optional", ".", "getAsLong", "(", ")", ":", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Type", "getValidatedValueType", "(", "final", "Type", "type", ")", "{", "return", "Long", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "environment", ".", "servlets", "(", ")", ")", ".", "thenReturn", "(", "servletEnvironment", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasADefaultPath", "(", ")", "throws", "Exception", "{", "runBundle", "(", "new", "AssetsBundle", "(", ")", ")", ";", "assertThat", "(", "servletPath", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "servlet", ".", "getIndexFile", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "servlet", ".", "getResourceURL", "(", ")", ")", ".", "isEqualTo", "(", "normalize", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "servlet", ".", "getUriPath", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canHaveCustomPaths", "(", ")", "throws", "Exception", "{", "runBundle", "(", "new", "AssetsBundle", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "servletPath", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "servlet", ".", "getIndexFile", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "servlet", ".", "getResourceURL", "(", ")", ")", ".", "isEqualTo", "(", "normalize", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "servlet", ".", "getUriPath", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canHaveDifferentUriAndResourcePaths", "(", ")", "throws", "Exception", "{", "runBundle", "(", "new", "AssetsBundle", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "servletPath", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "servlet", ".", "getIndexFile", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "servlet", ".", "getResourceURL", "(", ")", ")", ".", "isEqualTo", "(", "normalize", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "servlet", ".", "getUriPath", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canSupportDiffrentAssetsBundleName", "(", ")", "throws", "Exception", "{", "runBundle", "(", "new", "AssetsBundle", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "servletPath", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "servlet", ".", "getIndexFile", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "servlet", ".", "getResourceURL", "(", ")", ")", ".", "isEqualTo", "(", "normalize", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "servlet", ".", "getUriPath", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "runBundle", "(", "new", "AssetsBundle", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "servletPath", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "servlet", ".", "getIndexFile", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "servlet", ".", "getResourceURL", "(", ")", ")", ".", "isEqualTo", "(", "normalize", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "servlet", ".", "getUriPath", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canHaveDifferentUriAndResourcePathsAndIndexFilename", "(", ")", "throws", "Exception", "{", "runBundle", "(", "new", "AssetsBundle", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "servletPath", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "servlet", ".", "getIndexFile", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "servlet", ".", "getResourceURL", "(", ")", ")", ".", "isEqualTo", "(", "normalize", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "servlet", ".", "getUriPath", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "URL", "normalize", "(", "String", "path", ")", "{", "return", "ResourceURL", ".", "appendTrailingSlash", "(", "Resources", ".", "getResource", "(", "path", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "runBundle", "(", "AssetsBundle", "bundle", ")", "{", "runBundle", "(", "bundle", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "void", "runBundle", "(", "AssetsBundle", "bundle", ",", "String", "assetName", ")", "{", "final", "ServletRegistration", ".", "Dynamic", "registration", "=", "mock", "(", "ServletRegistration", ".", "Dynamic", ".", "class", ")", ";", "when", "(", "servletEnvironment", ".", "addServlet", "(", "anyString", "(", ")", ",", "any", "(", "AssetServlet", ".", "class", ")", ")", ")", ".", "thenReturn", "(", "registration", ")", ";", "bundle", ".", "run", "(", "environment", ")", ";", "final", "ArgumentCaptor", "<", "AssetServlet", ">", "servletCaptor", "=", "ArgumentCaptor", ".", "forClass", "(", "AssetServlet", ".", "class", ")", ";", "final", "ArgumentCaptor", "<", "String", ">", "pathCaptor", "=", "ArgumentCaptor", ".", "forClass", "(", "String", ".", "class", ")", ";", "verify", "(", "servletEnvironment", ")", ".", "addServlet", "(", "eq", "(", "assetName", ")", ",", "servletCaptor", ".", "capture", "(", ")", ")", ";", "verify", "(", "registration", ")", ".", "addMapping", "(", "pathCaptor", ".", "capture", "(", ")", ")", ";", "this", ".", "servlet", "=", "servletCaptor", ".", "getValue", "(", ")", ";", "this", ".", "servletPath", "=", "pathCaptor", ".", "getValue", "(", ")", ";", "}", "</s>"]
["<s>", "public", "AssetsBundle", "(", ")", "{", "this", "(", "DEFAULT_PATH", ",", "DEFAULT_PATH", ",", "DEFAULT_INDEX_FILE", ",", "DEFAULT_ASSETS_NAME", ")", ";", "}", "</s>"]
["<s>", "public", "AssetsBundle", "(", "String", "path", ")", "{", "this", "(", "path", ",", "path", ",", "DEFAULT_INDEX_FILE", ",", "DEFAULT_ASSETS_NAME", ")", ";", "}", "</s>"]
["<s>", "public", "AssetsBundle", "(", "String", "resourcePath", ",", "String", "uriPath", ")", "{", "this", "(", "resourcePath", ",", "uriPath", ",", "DEFAULT_INDEX_FILE", ",", "DEFAULT_ASSETS_NAME", ")", ";", "}", "</s>"]
["<s>", "public", "AssetsBundle", "(", "String", "resourcePath", ",", "String", "uriPath", ",", "String", "indexFile", ")", "{", "this", "(", "resourcePath", ",", "uriPath", ",", "indexFile", ",", "DEFAULT_ASSETS_NAME", ")", ";", "}", "</s>"]
["<s>", "public", "AssetsBundle", "(", "String", "resourcePath", ",", "String", "uriPath", ",", "String", "indexFile", ",", "String", "assetsName", ")", "{", "checkArgument", "(", "resourcePath", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ",", "\"", "<STR_LIT>", "\"", ",", "resourcePath", ")", ";", "checkArgument", "(", "!", "\"", "<STR_LIT:/>", "\"", ".", "equals", "(", "resourcePath", ")", ",", "\"", "<STR_LIT>", "\"", ",", "resourcePath", ")", ";", "this", ".", "resourcePath", "=", "resourcePath", ".", "endsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", "?", "resourcePath", ":", "(", "resourcePath", "+", "<CHAR_LIT:/>", ")", ";", "this", ".", "uriPath", "=", "uriPath", ".", "endsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", "?", "uriPath", ":", "(", "uriPath", "+", "<CHAR_LIT:/>", ")", ";", "this", ".", "indexFile", "=", "indexFile", ";", "this", ".", "assetsName", "=", "assetsName", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "Bootstrap", "<", "?", ">", "bootstrap", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Environment", "environment", ")", "{", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "assetsName", ",", "uriPath", "+", "<CHAR_LIT>", ")", ";", "environment", ".", "servlets", "(", ")", ".", "addServlet", "(", "assetsName", ",", "createServlet", "(", ")", ")", ".", "addMapping", "(", "uriPath", "+", "<CHAR_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getResourcePath", "(", ")", "{", "return", "resourcePath", ";", "}", "</s>"]
["<s>", "public", "String", "getUriPath", "(", ")", "{", "return", "uriPath", ";", "}", "</s>"]
["<s>", "public", "String", "getIndexFile", "(", ")", "{", "return", "indexFile", ";", "}", "</s>"]
["<s>", "protected", "AssetServlet", "createServlet", "(", ")", "{", "return", "new", "AssetServlet", "(", "resourcePath", ",", "uriPath", ",", "indexFile", ",", "StandardCharsets", ".", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAnHttpConfiguration", "(", ")", "throws", "Exception", "{", "assertThat", "(", "configuration", ".", "getServerFactory", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasALoggingConfiguration", "(", ")", "throws", "Exception", "{", "assertThat", "(", "configuration", ".", "getLoggingFactory", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "ensureConfigSerializable", "(", ")", "throws", "Exception", "{", "final", "ObjectMapper", "mapper", "=", "Jackson", ".", "newObjectMapper", "(", ")", ";", "Class", "<", "?", ">", "[", "]", "dummyArray", "=", "{", "}", ";", "mapper", ".", "getSubtypeResolver", "(", ")", ".", "registerSubtypes", "(", "StreamSupport", ".", "stream", "(", "ServiceLoader", ".", "load", "(", "AppenderFactory", ".", "class", ")", ".", "spliterator", "(", ")", ",", "false", ")", ".", "map", "(", "Object", ":", ":", "getClass", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ".", "toArray", "(", "dummyArray", ")", ")", ";", "mapper", ".", "getSubtypeResolver", "(", ")", ".", "registerSubtypes", "(", "StreamSupport", ".", "stream", "(", "ServiceLoader", ".", "load", "(", "ConnectorFactory", ".", "class", ")", ".", "spliterator", "(", ")", ",", "false", ")", ".", "map", "(", "Object", ":", ":", "getClass", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ".", "toArray", "(", "dummyArray", ")", ")", ";", "final", "String", "json", "=", "mapper", ".", "writeValueAsString", "(", "configuration", ")", ";", "assertThat", "(", "json", ")", ".", "isNotNull", "(", ")", ";", "final", "Configuration", "cfg", "=", "mapper", ".", "readValue", "(", "json", ",", "Configuration", ".", "class", ")", ";", "assertThat", "(", "cfg", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "FakeConfiguration", "configuration", ",", "Environment", "environment", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onFatalError", "(", ")", "{", "fatalError", "=", "true", ";", "}", "</s>"]
["<s>", "private", "WrapperApplication", "(", "Application", "<", "C", ">", "application", ")", "{", "this", ".", "application", "=", "application", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "Bootstrap", "<", "C", ">", "bootstrap", ")", "{", "this", ".", "application", ".", "initialize", "(", "bootstrap", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "C", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "this", ".", "application", ".", "run", "(", "configuration", ",", "environment", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAReferenceToItsTypeParameter", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "FakeApplication", "(", ")", ".", "getConfigurationClass", "(", ")", ")", ".", "isSameAs", "(", "FakeConfiguration", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canDetermineConfiguration", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "PoserApplication", "(", ")", ".", "getConfigurationClass", "(", ")", ")", ".", "isSameAs", "(", "FakeConfiguration", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canDetermineWrappedConfiguration", "(", ")", "throws", "Exception", "{", "final", "PoserApplication", "application", "=", "new", "PoserApplication", "(", ")", ";", "assertThat", "(", "new", "WrapperApplication", "<", ">", "(", "application", ")", ".", "getConfigurationClass", "(", ")", ")", ".", "isSameAs", "(", "FakeConfiguration", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "exitWithFatalErrorWhenCommandFails", "(", ")", "throws", "Exception", "{", "final", "File", "configFile", "=", "File", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "final", "FakeApplication", "application", "=", "new", "FakeApplication", "(", ")", ";", "application", ".", "run", "(", "\"", "<STR_LIT>", "\"", ",", "configFile", ".", "getAbsolutePath", "(", ")", ")", ";", "assertThat", "(", "application", ".", "fatalError", ")", ".", "isTrue", "(", ")", ";", "}", "finally", "{", "configFile", ".", "delete", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "objectMapper", ".", "getSubtypeResolver", "(", ")", ".", "registerSubtypes", "(", "ConsoleAppenderFactory", ".", "class", ",", "FileAppenderFactory", ".", "class", ",", "SyslogAppenderFactory", ".", "class", ",", "HttpConnectorFactory", ".", "class", ")", ";", "http", "=", "(", "SimpleServerFactory", ")", "new", "YamlConfigurationFactory", "<", ">", "(", "ServerFactory", ".", "class", ",", "validator", ",", "objectMapper", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testOverrideDefaultExceptionMapper", "(", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "TestValidationResource", "(", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "MyJerseyExceptionMapper", "(", ")", ")", ";", "final", "Server", "server", "=", "http", ".", "build", "(", "environment", ")", ";", "server", ".", "start", "(", ")", ";", "final", "int", "port", "=", "(", "(", "AbstractNetworkConnector", ")", "server", ".", "getConnectors", "(", ")", "[", "0", "]", ")", ".", "getLocalPort", "(", ")", ";", "assertThat", "(", "httpRequest", "(", "\"", "<STR_LIT:GET>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "port", "+", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:!>", "\"", ")", ";", "server", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "JerseyViolationException", "e", ")", "{", "return", "Response", ".", "ok", "(", "\"", "<STR_LIT:!>", "\"", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "String", "get", "(", "@", "NotEmpty", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "foo", ")", "{", "return", "foo", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addsATaskServlet", "(", ")", "throws", "Exception", "{", "final", "Task", "task", "=", "new", "Task", "(", "\"", "<STR_LIT>", "\"", ")", "{", "@", "Override", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "}", "}", ";", "env", ".", "addTask", "(", "task", ")", ";", "handler", ".", "setServer", "(", "new", "Server", "(", ")", ")", ";", "handler", ".", "start", "(", ")", ";", "final", "ServletRegistration", "registration", "=", "handler", ".", "getServletHandler", "(", ")", ".", "getServletContext", "(", ")", ".", "getServletRegistration", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "registration", ".", "getMappings", "(", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "bootstrap", "=", "new", "Bootstrap", "<", ">", "(", "application", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAnApplication", "(", ")", "throws", "Exception", "{", "assertThat", "(", "bootstrap", ".", "getApplication", "(", ")", ")", ".", "isEqualTo", "(", "application", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAnObjectMapper", "(", ")", "throws", "Exception", "{", "assertThat", "(", "bootstrap", ".", "getObjectMapper", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasHealthCheckRegistry", "(", ")", "{", "assertThat", "(", "bootstrap", ".", "getHealthCheckRegistry", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultsToUsingFilesForConfiguration", "(", ")", "throws", "Exception", "{", "assertThat", "(", "bootstrap", ".", "getConfigurationSourceProvider", "(", ")", ")", ".", "isInstanceOfAny", "(", "FileConfigurationSourceProvider", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultsToUsingTheDefaultClassLoader", "(", ")", "throws", "Exception", "{", "assertThat", "(", "bootstrap", ".", "getClassLoader", "(", ")", ")", ".", "isEqualTo", "(", "Thread", ".", "currentThread", "(", ")", ".", "getContextClassLoader", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "comesWithJvmInstrumentation", "(", ")", "throws", "Exception", "{", "bootstrap", ".", "registerMetrics", "(", ")", ";", "assertThat", "(", "bootstrap", ".", "getMetricRegistry", "(", ")", ".", "getNames", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultsToDefaultConfigurationFactoryFactory", "(", ")", "throws", "Exception", "{", "assertThat", "(", "bootstrap", ".", "getConfigurationFactoryFactory", "(", ")", ")", ".", "isInstanceOf", "(", "DefaultConfigurationFactoryFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "bringsYourOwnMetricRegistry", "(", ")", "{", "final", "MetricRegistry", "newRegistry", "=", "new", "MetricRegistry", "(", ")", "{", "@", "Override", "public", "Histogram", "histogram", "(", "String", "name", ")", "{", "Histogram", "existed", "=", "(", "Histogram", ")", "getMetrics", "(", ")", ".", "get", "(", "name", ")", ";", "return", "existed", "!", "=", "null", "?", "existed", ":", "new", "Histogram", "(", "new", "UniformReservoir", "(", ")", ")", ";", "}", "}", ";", "bootstrap", ".", "setMetricRegistry", "(", "newRegistry", ")", ";", "bootstrap", ".", "registerMetrics", "(", ")", ";", "assertThat", "(", "newRegistry", ".", "getNames", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Histogram", "histogram", "(", "String", "name", ")", "{", "Histogram", "existed", "=", "(", "Histogram", ")", "getMetrics", "(", ")", ".", "get", "(", "name", ")", ";", "return", "existed", "!", "=", "null", "?", "existed", ":", "new", "Histogram", "(", "new", "UniformReservoir", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultsToDefaultValidatorFactory", "(", ")", "throws", "Exception", "{", "assertThat", "(", "bootstrap", ".", "getValidatorFactory", "(", ")", ")", ".", "isInstanceOf", "(", "ValidatorFactoryImpl", ".", "class", ")", ";", "ValidatorFactoryImpl", "validatorFactory", "=", "(", "ValidatorFactoryImpl", ")", "bootstrap", ".", "getValidatorFactory", "(", ")", ";", "assertThat", "(", "validatorFactory", ".", "getValidatedValueHandlers", "(", ")", ")", ".", "extractingResultOf", "(", "\"", "<STR_LIT>", "\"", ")", ".", "containsSubsequence", "(", "GuavaOptionalValidatedValueUnwrapper", ".", "class", ",", "OptionalDoubleValidatedValueUnwrapper", ".", "class", ",", "OptionalIntValidatedValueUnwrapper", ".", "class", ",", "OptionalLongValidatedValueUnwrapper", ".", "class", ",", "NonEmptyStringParamUnwrapper", ".", "class", ",", "ParamValidatorUnwrapper", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canUseCustomValidatorFactory", "(", ")", "throws", "Exception", "{", "ValidatorFactory", "factory", "=", "Validation", ".", "byProvider", "(", "HibernateValidator", ".", "class", ")", ".", "configure", "(", ")", ".", "buildValidatorFactory", "(", ")", ";", "bootstrap", ".", "setValidatorFactory", "(", "factory", ")", ";", "assertThat", "(", "bootstrap", ".", "getValidatorFactory", "(", ")", ")", ".", "isSameAs", "(", "factory", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canUseCustomObjectMapper", "(", ")", "{", "final", "ObjectMapper", "minimalObjectMapper", "=", "Jackson", ".", "newMinimalObjectMapper", "(", ")", ";", "bootstrap", ".", "setObjectMapper", "(", "minimalObjectMapper", ")", ";", "assertThat", "(", "bootstrap", ".", "getObjectMapper", "(", ")", ")", ".", "isSameAs", "(", "minimalObjectMapper", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canUseCustomHealthCheckRegistry", "(", ")", "{", "final", "HealthCheckRegistry", "healthCheckRegistry", "=", "new", "HealthCheckRegistry", "(", ")", ";", "bootstrap", ".", "setHealthCheckRegistry", "(", "healthCheckRegistry", ")", ";", "assertThat", "(", "bootstrap", ".", "getHealthCheckRegistry", "(", ")", ")", ".", "isSameAs", "(", "healthCheckRegistry", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "objectMapper", ".", "getSubtypeResolver", "(", ")", ".", "registerSubtypes", "(", "ConsoleAppenderFactory", ".", "class", ",", "FileAppenderFactory", ".", "class", ",", "SyslogAppenderFactory", ".", "class", ",", "HttpConnectorFactory", ".", "class", ")", ";", "http", "=", "(", "SimpleServerFactory", ")", "new", "YamlConfigurationFactory", "<", ">", "(", "ServerFactory", ".", "class", ",", "validator", ",", "objectMapper", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "SimpleServerFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetAdminContext", "(", ")", "{", "assertThat", "(", "http", ".", "getAdminContextPath", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetApplicationContext", "(", ")", "{", "assertThat", "(", "http", ".", "getApplicationContextPath", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetPort", "(", ")", "{", "final", "HttpConnectorFactory", "connector", "=", "(", "HttpConnectorFactory", ")", "http", ".", "getConnector", "(", ")", ";", "assertThat", "(", "connector", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testBuild", "(", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "TestResource", "(", ")", ")", ";", "environment", ".", "admin", "(", ")", ".", "addTask", "(", "new", "TestTask", "(", ")", ")", ";", "final", "Server", "server", "=", "http", ".", "build", "(", "environment", ")", ";", "server", ".", "start", "(", ")", ";", "final", "int", "port", "=", "(", "(", "AbstractNetworkConnector", ")", "server", ".", "getConnectors", "(", ")", "[", "0", "]", ")", ".", "getLocalPort", "(", ")", ";", "assertThat", "(", "httpRequest", "(", "\"", "<STR_LIT:GET>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "port", "+", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "assertThat", "(", "httpRequest", "(", "\"", "<STR_LIT:POST>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "port", "+", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testConfiguredEnvironment", "(", ")", "{", "http", ".", "configure", "(", "environment", ")", ";", "assertEquals", "(", "http", ".", "getAdminContextPath", "(", ")", ",", "environment", ".", "getAdminContext", "(", ")", ".", "getContextPath", "(", ")", ")", ";", "assertEquals", "(", "http", ".", "getApplicationContextPath", "(", ")", ",", "environment", ".", "getApplicationContext", "(", ")", ".", "getContextPath", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "httpRequest", "(", "String", "requestMethod", ",", "String", "url", ")", "throws", "Exception", "{", "final", "HttpURLConnection", "connection", "=", "(", "HttpURLConnection", ")", "new", "URL", "(", "url", ")", ".", "openConnection", "(", ")", ";", "connection", ".", "setRequestMethod", "(", "requestMethod", ")", ";", "connection", ".", "connect", "(", ")", ";", "try", "(", "InputStream", "inputStream", "=", "connection", ".", "getInputStream", "(", ")", ")", "{", "return", "CharStreams", ".", "toString", "(", "new", "InputStreamReader", "(", "inputStream", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "GET", "public", "String", "get", "(", ")", "throws", "Exception", "{", "return", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ";", "}", "</s>"]
["<s>", "public", "TestTask", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "final", "String", "name", "=", "parameters", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "iterator", "(", ")", ".", "next", "(", ")", ";", "output", ".", "print", "(", "\"", "<STR_LIT>", "\"", "+", "name", "+", "\"", "<STR_LIT:!>", "\"", ")", ";", "output", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "before", "(", ")", "{", "when", "(", "environment", ".", "jersey", "(", ")", ")", ".", "thenReturn", "(", "jerseyEnvironment", ")", ";", "when", "(", "environment", ".", "getApplicationContext", "(", ")", ")", ".", "thenReturn", "(", "new", "MutableServletContextHandler", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesYamlDefinedPattern", "(", ")", "{", "serverFactory", ".", "setJerseyRootPath", "(", "YAML_SET_PATTERN", ")", ";", "jerseyEnvironment", ".", "setUrlPattern", "(", "RUN_SET_PATTERN", ")", ";", "serverFactory", ".", "build", "(", "environment", ")", ";", "assertThat", "(", "jerseyEnvironment", ".", "getUrlPattern", "(", ")", ")", ".", "isEqualTo", "(", "YAML_SET_PATTERN", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesRunDefinedPatternWhenNoYaml", "(", ")", "{", "jerseyEnvironment", ".", "setUrlPattern", "(", "RUN_SET_PATTERN", ")", ";", "serverFactory", ".", "build", "(", "environment", ")", ";", "assertThat", "(", "jerseyEnvironment", ".", "getUrlPattern", "(", ")", ")", ".", "isEqualTo", "(", "RUN_SET_PATTERN", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesDefaultPatternWhenNoneSet", "(", ")", "{", "serverFactory", ".", "build", "(", "environment", ")", ";", "assertThat", "(", "jerseyEnvironment", ".", "getUrlPattern", "(", ")", ")", ".", "isEqualTo", "(", "DEFAULT_PATTERN", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Server", "build", "(", "Environment", "environment", ")", "{", "ThreadPool", "threadPool", "=", "createThreadPool", "(", "environment", ".", "metrics", "(", ")", ")", ";", "Server", "server", "=", "buildServer", "(", "environment", ".", "lifecycle", "(", ")", ",", "threadPool", ")", ";", "createAppServlet", "(", "server", ",", "environment", ".", "jersey", "(", ")", ",", "environment", ".", "getObjectMapper", "(", ")", ",", "environment", ".", "getValidator", "(", ")", ",", "environment", ".", "getApplicationContext", "(", ")", ",", "environment", ".", "getJerseyServletContainer", "(", ")", ",", "environment", ".", "metrics", "(", ")", ")", ";", "return", "server", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Environment", "environment", ")", "{", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "final", "ObjectMapper", "objectMapper", "=", "Jackson", ".", "newObjectMapper", "(", ")", ";", "objectMapper", ".", "getSubtypeResolver", "(", ")", ".", "registerSubtypes", "(", "ConsoleAppenderFactory", ".", "class", ",", "FileAppenderFactory", ".", "class", ",", "SyslogAppenderFactory", ".", "class", ",", "HttpConnectorFactory", ".", "class", ")", ";", "http", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "DefaultServerFactory", ".", "class", ",", "BaseValidator", ".", "newValidator", "(", ")", ",", "objectMapper", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "loadsGzipConfig", "(", ")", "throws", "Exception", "{", "assertThat", "(", "http", ".", "getGzipFilterFactory", "(", ")", ".", "isEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "loadsServerPushConfig", "(", ")", "throws", "Exception", "{", "final", "ServerPushFilterFactory", "serverPush", "=", "http", ".", "getServerPush", "(", ")", ";", "assertThat", "(", "serverPush", ".", "isEnabled", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "serverPush", ".", "getRefererHosts", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "serverPush", ".", "getRefererPorts", "(", ")", ")", ".", "contains", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAMaximumNumberOfThreads", "(", ")", "throws", "Exception", "{", "assertThat", "(", "http", ".", "getMaxThreads", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAMinimumNumberOfThreads", "(", ")", "throws", "Exception", "{", "assertThat", "(", "http", ".", "getMinThreads", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasApplicationContextPath", "(", ")", "throws", "Exception", "{", "assertThat", "(", "http", ".", "getApplicationContextPath", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAdminContextPath", "(", ")", "throws", "Exception", "{", "assertThat", "(", "http", ".", "getAdminContextPath", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "DefaultServerFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "registersDefaultExceptionMappers", "(", ")", "throws", "Exception", "{", "assertThat", "(", "http", ".", "getRegisterDefaultExceptionMappers", "(", ")", ")", ".", "isTrue", "(", ")", ";", "http", ".", "build", "(", "environment", ")", ";", "assertThat", "(", "environment", ".", "jersey", "(", ")", ".", "getResourceConfig", "(", ")", ".", "getSingletons", "(", ")", ")", ".", "filteredOn", "(", "x", "-", ">", "x", "instanceof", "ExceptionMapperBinder", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotDefaultExceptionMappers", "(", ")", "throws", "Exception", "{", "http", ".", "setRegisterDefaultExceptionMappers", "(", "false", ")", ";", "assertThat", "(", "http", ".", "getRegisterDefaultExceptionMappers", "(", ")", ")", ".", "isFalse", "(", ")", ";", "Environment", "environment", "=", "new", "Environment", "(", "\"", "<STR_LIT>", "\"", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "Validators", ".", "newValidator", "(", ")", ",", "new", "MetricRegistry", "(", ")", ",", "ClassLoader", ".", "getSystemClassLoader", "(", ")", ")", ";", "http", ".", "build", "(", "environment", ")", ";", "assertThat", "(", "environment", ".", "jersey", "(", ")", ".", "getResourceConfig", "(", ")", ".", "getSingletons", "(", ")", ")", ".", "filteredOn", "(", "x", "-", ">", "x", "instanceof", "ExceptionMapperBinder", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultsDetailedJsonProcessingExceptionToFalse", "(", ")", "throws", "Exception", "{", "http", ".", "build", "(", "environment", ")", ";", "assertThat", "(", "environment", ".", "jersey", "(", ")", ".", "getResourceConfig", "(", ")", ".", "getSingletons", "(", ")", ")", ".", "filteredOn", "(", "x", "-", ">", "x", "instanceof", "ExceptionMapperBinder", ")", ".", "hasOnlyOneElementSatisfying", "(", "x", "-", ">", "assertThat", "(", "(", "(", "ExceptionMapperBinder", ")", "x", ")", ".", "isShowDetails", "(", ")", ")", ".", "isFalse", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotDefaultDetailedJsonProcessingExceptionToFalse", "(", ")", "throws", "Exception", "{", "http", ".", "setDetailedJsonProcessingExceptionMapper", "(", "true", ")", ";", "http", ".", "build", "(", "environment", ")", ";", "assertThat", "(", "environment", ".", "jersey", "(", ")", ".", "getResourceConfig", "(", ")", ".", "getSingletons", "(", ")", ")", ".", "filteredOn", "(", "x", "-", ">", "x", "instanceof", "ExceptionMapperBinder", ")", ".", "hasOnlyOneElementSatisfying", "(", "x", "-", ">", "assertThat", "(", "(", "(", "ExceptionMapperBinder", ")", "x", ")", ".", "isShowDetails", "(", ")", ")", ".", "isTrue", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGracefulShutdown", "(", ")", "throws", "Exception", "{", "CountDownLatch", "requestReceived", "=", "new", "CountDownLatch", "(", "1", ")", ";", "CountDownLatch", "shutdownInvoked", "=", "new", "CountDownLatch", "(", "1", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "TestResource", "(", "requestReceived", ",", "shutdownInvoked", ")", ")", ";", "final", "ScheduledExecutorService", "executor", "=", "Executors", ".", "newScheduledThreadPool", "(", "<NUM_LIT:3>", ")", ";", "http", ".", "configure", "(", "environment", ")", ";", "final", "Server", "server", "=", "http", ".", "build", "(", "environment", ")", ";", "(", "(", "AbstractNetworkConnector", ")", "server", ".", "getConnectors", "(", ")", "[", "0", "]", ")", ".", "setPort", "(", "0", ")", ";", "(", "(", "AbstractNetworkConnector", ")", "server", ".", "getConnectors", "(", ")", "[", "1", "]", ")", ".", "setPort", "(", "0", ")", ";", "ScheduledFuture", "<", "Void", ">", "cleanup", "=", "executor", ".", "schedule", "(", "(", ")", "-", ">", "{", "if", "(", "!", "server", ".", "isStopped", "(", ")", ")", "{", "server", ".", "stop", "(", ")", ";", "}", "executor", ".", "shutdownNow", "(", ")", ";", "return", "null", ";", "}", ",", "<NUM_LIT:5>", ",", "TimeUnit", ".", "SECONDS", ")", ";", "server", ".", "start", "(", ")", ";", "final", "int", "port", "=", "(", "(", "AbstractNetworkConnector", ")", "server", ".", "getConnectors", "(", ")", "[", "0", "]", ")", ".", "getLocalPort", "(", ")", ";", "Future", "<", "String", ">", "futureResult", "=", "executor", ".", "submit", "(", "(", ")", "-", ">", "{", "URL", "url", "=", "new", "URL", "(", "\"", "<STR_LIT>", "\"", "+", "port", "+", "\"", "<STR_LIT>", "\"", ")", ";", "URLConnection", "connection", "=", "url", ".", "openConnection", "(", ")", ";", "connection", ".", "connect", "(", ")", ";", "return", "CharStreams", ".", "toString", "(", "new", "InputStreamReader", "(", "connection", ".", "getInputStream", "(", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", ")", ";", "requestReceived", ".", "await", "(", "<NUM_LIT:10>", ",", "TimeUnit", ".", "SECONDS", ")", ";", "Future", "<", "Void", ">", "serverStopped", "=", "executor", ".", "submit", "(", "(", ")", "-", ">", "{", "server", ".", "stop", "(", ")", ";", "return", "null", ";", "}", ")", ";", "Connector", "[", "]", "connectors", "=", "server", ".", "getConnectors", "(", ")", ";", "assertThat", "(", "connectors", ")", ".", "isNotEmpty", "(", ")", ";", "assertThat", "(", "connectors", "[", "0", "]", ")", ".", "isInstanceOf", "(", "NetworkConnector", ".", "class", ")", ";", "NetworkConnector", "connector", "=", "(", "NetworkConnector", ")", "connectors", "[", "0", "]", ";", "while", "(", "true", ")", "{", "if", "(", "!", "connector", ".", "isOpen", "(", ")", ")", "{", "shutdownInvoked", ".", "countDown", "(", ")", ";", "break", ";", "}", "Thread", ".", "sleep", "(", "<NUM_LIT:5>", ")", ";", "}", "String", "result", "=", "futureResult", ".", "get", "(", ")", ";", "assertThat", "(", "result", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "serverStopped", ".", "get", "(", ")", ";", "cleanup", ".", "cancel", "(", "false", ")", ";", "executor", ".", "shutdownNow", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testConfiguredEnvironment", "(", ")", "{", "http", ".", "configure", "(", "environment", ")", ";", "assertEquals", "(", "http", ".", "getAdminContextPath", "(", ")", ",", "environment", ".", "getAdminContext", "(", ")", ".", "getContextPath", "(", ")", ")", ";", "assertEquals", "(", "http", ".", "getApplicationContextPath", "(", ")", ",", "environment", ".", "getApplicationContext", "(", ")", ".", "getContextPath", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "TestResource", "(", "CountDownLatch", "requestReceived", ",", "CountDownLatch", "shutdownInvoked", ")", "{", "this", ".", "requestReceived", "=", "requestReceived", ";", "this", ".", "shutdownInvoked", "=", "shutdownInvoked", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "String", "get", "(", ")", "throws", "Exception", "{", "requestReceived", ".", "countDown", "(", ")", ";", "shutdownInvoked", ".", "await", "(", ")", ";", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "protected", "TestCommand", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "choices", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Bootstrap", "<", "?", ">", "bootstrap", ",", "Namespace", "namespace", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "final", "JarLocation", "location", "=", "mock", "(", "JarLocation", ".", "class", ")", ";", "final", "Bootstrap", "<", "Configuration", ">", "bootstrap", "=", "new", "Bootstrap", "<", ">", "(", "app", ")", ";", "when", "(", "location", ".", "toString", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "location", ".", "getVersion", "(", ")", ")", ".", "thenReturn", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "bootstrap", ".", "addCommand", "(", "command", ")", ";", "cli", "=", "new", "Cli", "(", "location", ",", "bootstrap", ",", "stdOut", ",", "stdErr", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "listHelpOnceOnArgumentOmission", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "doStop", "(", ")", "throws", "Exception", "{", "super", ".", "doStop", "(", ")", ";", "if", "(", "ServerCommandTest", ".", "this", ".", "throwException", ")", "{", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "throw", "new", "NullPointerException", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "serverFactory", ".", "build", "(", "environment", ")", ")", ".", "thenReturn", "(", "server", ")", ";", "when", "(", "configuration", ".", "getServerFactory", "(", ")", ")", ".", "thenReturn", "(", "serverFactory", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "server", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAName", "(", ")", "throws", "Exception", "{", "assertThat", "(", "command", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasADescription", "(", ")", "throws", "Exception", "{", "assertThat", "(", "command", ".", "getDescription", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasTheApplicationsConfigurationClass", "(", ")", "throws", "Exception", "{", "assertThat", "(", "command", ".", "getConfigurationClass", "(", ")", ")", ".", "isEqualTo", "(", "application", ".", "getConfigurationClass", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "buildsAndRunsAConfiguredServer", "(", ")", "throws", "Exception", "{", "command", ".", "run", "(", "environment", ",", "namespace", ",", "configuration", ")", ";", "assertThat", "(", "server", ".", "isStarted", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "stopsAServerIfThereIsAnErrorStartingIt", "(", ")", "throws", "Exception", "{", "this", ".", "throwException", "=", "true", ";", "server", ".", "addBean", "(", "new", "AbstractLifeCycle", "(", ")", "{", "@", "Override", "protected", "void", "doStart", "(", ")", "throws", "Exception", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", ")", ";", "try", "{", "command", ".", "run", "(", "environment", ",", "namespace", ",", "configuration", ")", ";", "failBecauseExceptionWasNotThrown", "(", "IOException", ".", "class", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "assertThat", "(", "server", ".", "isStarted", "(", ")", ")", ".", "isFalse", "(", ")", ";", "this", ".", "throwException", "=", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "doStart", "(", ")", "throws", "Exception", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAName", "(", ")", "throws", "Exception", "{", "assertThat", "(", "command", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasADescription", "(", ")", "throws", "Exception", "{", "assertThat", "(", "command", ".", "getDescription", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotInteractWithAnything", "(", ")", "throws", "Exception", "{", "command", ".", "run", "(", "bootstrap", ",", "namespace", ",", "configuration", ")", ";", "verifyZeroInteractions", "(", "bootstrap", ",", "namespace", ",", "configuration", ")", ";", "}", "</s>"]
["<s>", "protected", "TestCommand", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "run", "(", "Bootstrap", "<", "Configuration", ">", "bootstrap", ",", "Namespace", "namespace", ",", "Configuration", "configuration", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Test", "public", "void", "canUseCustomConfigurationFactory", "(", ")", "throws", "Exception", "{", "ConfigurationFactory", "<", "Configuration", ">", "factory", "=", "Mockito", ".", "mock", "(", "ConfigurationFactory", ".", "class", ")", ";", "when", "(", "factory", ".", "build", "(", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "bootstrap", ".", "setConfigurationFactoryFactory", "(", "(", "klass", ",", "validator", ",", "objectMapper", ",", "propertyPrefix", ")", "-", ">", "factory", ")", ";", "command", ".", "run", "(", "bootstrap", ",", "namespace", ")", ";", "Mockito", ".", "verify", "(", "factory", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "public", "BadAppException", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "printStackTrace", "(", "PrintWriter", "writer", ")", "{", "writer", ".", "println", "(", "BAD_APP_EXCEPTION_STACK_TRACE", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getMessage", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "protected", "CustomCommand", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Bootstrap", "<", "?", ">", "bootstrap", ",", "Namespace", "namespace", ")", "throws", "Exception", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onError", "(", "Cli", "cli", ",", "Namespace", "namespace", ",", "Throwable", "e", ")", "{", "if", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "super", ".", "onError", "(", "cli", ",", "namespace", ",", "e", ")", ";", "}", "else", "{", "cli", ".", "getStdOut", "(", ")", ".", "println", "(", "e", ".", "getMessage", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "BeforeClass", "public", "static", "void", "init", "(", ")", "{", "Locale", ".", "setDefault", "(", "Locale", ".", "ENGLISH", ")", ";", "}", "</s>"]
["<s>", "@", "AfterClass", "public", "static", "void", "shutdown", "(", ")", "{", "Locale", ".", "setDefault", "(", "DEFAULT_LOCALE", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "location", ".", "toString", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "location", ".", "getVersion", "(", ")", ")", ".", "thenReturn", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "bootstrap", ".", "addCommand", "(", "command", ")", ";", "bootstrap", ".", "addCommand", "(", "new", "CustomCommand", "(", ")", ")", ";", "doNothing", "(", ")", ".", "when", "(", "command", ")", ".", "run", "(", "any", "(", "Bootstrap", ".", "class", ")", ",", "any", "(", "Namespace", ".", "class", ")", ",", "any", "(", "Configuration", ".", "class", ")", ")", ";", "this", ".", "cli", "=", "new", "Cli", "(", "location", ",", "bootstrap", ",", "stdOut", ",", "stdErr", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesShortVersionCommands", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesLongVersionCommands", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesMissingVersions", "(", ")", "throws", "Exception", "{", "when", "(", "location", ".", "getVersion", "(", ")", ")", ".", "thenReturn", "(", "Optional", ".", "empty", "(", ")", ")", ";", "final", "Cli", "newCli", "=", "new", "Cli", "(", "location", ",", "bootstrap", ",", "stdOut", ",", "stdErr", ")", ";", "assertThat", "(", "newCli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesZeroArgumentsAsHelpCommand", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cli", ".", "run", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesShortHelpCommands", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesLongHelpCommands", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "handlesShortHelpSubcommands", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "verify", "(", "command", ",", "never", "(", ")", ")", ".", "run", "(", "any", "(", "Bootstrap", ".", "class", ")", ",", "any", "(", "Namespace", ".", "class", ")", ",", "any", "(", "Configuration", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "handlesLongHelpSubcommands", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "verify", "(", "command", ",", "never", "(", ")", ")", ".", "run", "(", "any", "(", "Bootstrap", ".", "class", ")", ",", "any", "(", "Namespace", ".", "class", ")", ",", "any", "(", "Configuration", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rejectsBadCommandFlags", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rejectsBadSubcommandFlags", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rejectsBadSubcommands", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "runsCommands", "(", ")", "throws", "Exception", "{", "assertThat", "(", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "verify", "(", "command", ")", ".", "run", "(", "eq", "(", "bootstrap", ")", ",", "any", "(", "Namespace", ".", "class", ")", ",", "any", "(", "Configuration", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "unhandledExceptionsMessagesArePrintedForCheck", "(", ")", "throws", "Exception", "{", "doThrow", "(", "new", "BadAppException", "(", ")", ")", ".", "when", "(", "command", ")", ".", "run", "(", "any", "(", "Bootstrap", ".", "class", ")", ",", "any", "(", "Namespace", ".", "class", ")", ",", "any", "(", "Configuration", ".", "class", ")", ")", ";", "assertThat", "(", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "unhandledExceptionsCustomCommand", "(", ")", "throws", "Exception", "{", "doThrow", "(", "new", "BadAppException", "(", ")", ")", ".", "when", "(", "command", ")", ".", "run", "(", "any", "(", "Bootstrap", ".", "class", ")", ",", "any", "(", "Namespace", ".", "class", ")", ",", "any", "(", "Configuration", ".", "class", ")", ")", ";", "assertThat", "(", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "unhandledExceptionsCustomCommandDebug", "(", ")", "throws", "Exception", "{", "doThrow", "(", "new", "BadAppException", "(", ")", ")", ".", "when", "(", "command", ")", ".", "run", "(", "any", "(", "Bootstrap", ".", "class", ")", ",", "any", "(", "Namespace", ".", "class", ")", ",", "any", "(", "Configuration", ".", "class", ")", ")", ";", "assertThat", "(", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "stdOut", ".", "toString", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "stdErr", ".", "toString", "(", ")", ")", ".", "startsWith", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "ApiCommand", "(", "final", "Application", "<", "Configuration", ">", "application", ")", "{", "super", "(", "application", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "final", "Bootstrap", "<", "Configuration", ">", "bootstrap", ")", "{", "bootstrap", ".", "addCommand", "(", "new", "ApiCommand", "(", "this", ")", ")", ";", "super", ".", "initialize", "(", "bootstrap", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "serverFactory", ".", "build", "(", "environment", ")", ")", ".", "thenReturn", "(", "server", ")", ";", "when", "(", "configuration", ".", "getServerFactory", "(", ")", ")", ".", "thenReturn", "(", "serverFactory", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "server", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAName", "(", ")", "throws", "Exception", "{", "assertThat", "(", "command", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasADescription", "(", ")", "throws", "Exception", "{", "assertThat", "(", "command", ".", "getDescription", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "buildsAndRunsAConfiguredServer", "(", ")", "throws", "Exception", "{", "command", ".", "run", "(", "environment", ",", "namespace", ",", "configuration", ")", ";", "assertThat", "(", "server", ".", "isStarted", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesDefaultConfigPath", "(", ")", "throws", "Exception", "{", "class", "SingletonConfigurationFactory", "implements", "ConfigurationFactory", "{", "@", "Override", "public", "Object", "build", "(", "final", "ConfigurationSourceProvider", "provider", ",", "final", "String", "path", ")", "throws", "IOException", ",", "ConfigurationException", "{", "return", "configuration", ";", "}", "@", "Override", "public", "Object", "build", "(", ")", "throws", "IOException", ",", "ConfigurationException", "{", "throw", "new", "AssertionError", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "when", "(", "configuration", ".", "getLoggingFactory", "(", ")", ")", ".", "thenReturn", "(", "mock", "(", "LoggingFactory", ".", "class", ")", ")", ";", "final", "Bootstrap", "<", "Configuration", ">", "bootstrap", "=", "new", "Bootstrap", "<", ">", "(", "application", ")", ";", "bootstrap", ".", "setConfigurationFactoryFactory", "(", "(", "klass", ",", "validator", ",", "objectMapper", ",", "propertyPrefix", ")", "-", ">", "new", "SingletonConfigurationFactory", "(", ")", ")", ";", "bootstrap", ".", "addCommand", "(", "new", "ConfiguredCommand", "<", "Configuration", ">", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", "{", "@", "Override", "protected", "void", "run", "(", "final", "Bootstrap", "<", "Configuration", ">", "bootstrap", ",", "final", "Namespace", "namespace", ",", "final", "Configuration", "configuration", ")", "throws", "Exception", "{", "assertThat", "(", "namespace", ".", "getString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotEmpty", "(", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "@", "Override", "protected", "Argument", "addFileArgument", "(", "final", "Subparser", "subparser", ")", "{", "return", "super", ".", "addFileArgument", "(", "subparser", ")", ".", "setDefault", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", ")", ";", "final", "JarLocation", "location", "=", "mock", "(", "JarLocation", ".", "class", ")", ";", "when", "(", "location", ".", "toString", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "location", ".", "getVersion", "(", ")", ")", ".", "thenReturn", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Cli", "cli", "=", "new", "Cli", "(", "location", ",", "bootstrap", ",", "System", ".", "out", ",", "System", ".", "err", ")", ";", "cli", ".", "run", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "build", "(", "final", "ConfigurationSourceProvider", "provider", ",", "final", "String", "path", ")", "throws", "IOException", ",", "ConfigurationException", "{", "return", "configuration", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "build", "(", ")", "throws", "IOException", ",", "ConfigurationException", "{", "throw", "new", "AssertionError", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "run", "(", "final", "Bootstrap", "<", "Configuration", ">", "bootstrap", ",", "final", "Namespace", "namespace", ",", "final", "Configuration", "configuration", ")", "throws", "Exception", "{", "assertThat", "(", "namespace", ".", "getString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotEmpty", "(", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Argument", "addFileArgument", "(", "final", "Subparser", "subparser", ")", "{", "return", "super", ".", "addFileArgument", "(", "subparser", ")", ".", "setDefault", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "protected", "Application", "(", ")", "{", "bootstrapLogging", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "Level", "bootstrapLogLevel", "(", ")", "{", "return", "Level", ".", "WARN", ";", "}", "</s>"]
["<s>", "protected", "void", "bootstrapLogging", "(", ")", "{", "BootstrapLogging", ".", "bootstrap", "(", "bootstrapLogLevel", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Class", "<", "T", ">", "getConfigurationClass", "(", ")", "{", "return", "Generics", ".", "getTypeParameter", "(", "getClass", "(", ")", ",", "Configuration", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "initialize", "(", "Bootstrap", "<", "T", ">", "bootstrap", ")", "{", "}", "</s>"]
["<s>", "public", "abstract", "void", "run", "(", "T", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", ";", "</s>"]
["<s>", "public", "void", "run", "(", "String", ".", ".", ".", "arguments", ")", "throws", "Exception", "{", "final", "Bootstrap", "<", "T", ">", "bootstrap", "=", "new", "Bootstrap", "<", ">", "(", "this", ")", ";", "addDefaultCommands", "(", "bootstrap", ")", ";", "initialize", "(", "bootstrap", ")", ";", "bootstrap", ".", "registerMetrics", "(", ")", ";", "final", "Cli", "cli", "=", "new", "Cli", "(", "new", "JarLocation", "(", "getClass", "(", ")", ")", ",", "bootstrap", ",", "System", ".", "out", ",", "System", ".", "err", ")", ";", "if", "(", "!", "cli", ".", "run", "(", "arguments", ")", ")", "{", "onFatalError", "(", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "void", "addDefaultCommands", "(", "Bootstrap", "<", "T", ">", "bootstrap", ")", "{", "bootstrap", ".", "addCommand", "(", "new", "ServerCommand", "<", ">", "(", "this", ")", ")", ";", "bootstrap", ".", "addCommand", "(", "new", "CheckCommand", "<", ">", "(", "this", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "onFatalError", "(", ")", "{", "System", ".", "exit", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "ServerFactory", "getServerFactory", "(", ")", "{", "return", "server", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "setServerFactory", "(", "ServerFactory", "factory", ")", "{", "this", ".", "server", "=", "factory", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "synchronized", "LoggingFactory", "getLoggingFactory", "(", ")", "{", "if", "(", "logging", "=", "=", "null", ")", "{", "logging", "=", "new", "DefaultLoggingFactory", "(", ")", ";", "}", "return", "logging", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "synchronized", "void", "setLoggingFactory", "(", "LoggingFactory", "factory", ")", "{", "this", ".", "logging", "=", "factory", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "MetricsFactory", "getMetricsFactory", "(", ")", "{", "return", "metrics", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "setMetricsFactory", "(", "MetricsFactory", "metrics", ")", "{", "this", ".", "metrics", "=", "metrics", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "MoreObjects", ".", "toStringHelper", "(", "this", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "server", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "logging", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "metrics", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "void", "initialize", "(", "Bootstrap", "<", "?", ">", "bootstrap", ")", ";", "</s>"]
["<s>", "void", "run", "(", "Environment", "environment", ")", ";", "</s>"]
["<s>", "void", "run", "(", "T", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", ";", "</s>"]
["<s>", "void", "initialize", "(", "Bootstrap", "<", "?", ">", "bootstrap", ")", ";", "</s>"]
["<s>", "public", "Bootstrap", "(", "Application", "<", "T", ">", "application", ")", "{", "this", ".", "application", "=", "application", ";", "this", ".", "objectMapper", "=", "Jackson", ".", "newObjectMapper", "(", ")", ";", "this", ".", "bundles", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "this", ".", "configuredBundles", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "this", ".", "commands", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "this", ".", "validatorFactory", "=", "Validators", ".", "newValidatorFactory", "(", ")", ";", "this", ".", "metricRegistry", "=", "new", "MetricRegistry", "(", ")", ";", "this", ".", "configurationSourceProvider", "=", "new", "FileConfigurationSourceProvider", "(", ")", ";", "this", ".", "classLoader", "=", "Thread", ".", "currentThread", "(", ")", ".", "getContextClassLoader", "(", ")", ";", "this", ".", "configurationFactoryFactory", "=", "new", "DefaultConfigurationFactoryFactory", "<", ">", "(", ")", ";", "this", ".", "healthCheckRegistry", "=", "new", "HealthCheckRegistry", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "registerMetrics", "(", ")", "{", "if", "(", "metricsAreRegistered", ")", "{", "return", ";", "}", "getMetricRegistry", "(", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "new", "JvmAttributeGaugeSet", "(", ")", ")", ";", "getMetricRegistry", "(", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "new", "BufferPoolMetricSet", "(", "ManagementFactory", ".", "getPlatformMBeanServer", "(", ")", ")", ")", ";", "getMetricRegistry", "(", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "new", "ClassLoadingGaugeSet", "(", ")", ")", ";", "getMetricRegistry", "(", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "new", "FileDescriptorRatioGauge", "(", ")", ")", ";", "getMetricRegistry", "(", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "new", "GarbageCollectorMetricSet", "(", ")", ")", ";", "getMetricRegistry", "(", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "new", "MemoryUsageGaugeSet", "(", ")", ")", ";", "getMetricRegistry", "(", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "new", "ThreadStatesGaugeSet", "(", ")", ")", ";", "JmxReporter", ".", "forRegistry", "(", "metricRegistry", ")", ".", "build", "(", ")", ".", "start", "(", ")", ";", "metricsAreRegistered", "=", "true", ";", "}", "</s>"]
["<s>", "public", "Application", "<", "T", ">", "getApplication", "(", ")", "{", "return", "application", ";", "}", "</s>"]
["<s>", "public", "ConfigurationSourceProvider", "getConfigurationSourceProvider", "(", ")", "{", "return", "configurationSourceProvider", ";", "}", "</s>"]
["<s>", "public", "void", "setConfigurationSourceProvider", "(", "ConfigurationSourceProvider", "provider", ")", "{", "this", ".", "configurationSourceProvider", "=", "requireNonNull", "(", "provider", ")", ";", "}", "</s>"]
["<s>", "public", "ClassLoader", "getClassLoader", "(", ")", "{", "return", "classLoader", ";", "}", "</s>"]
["<s>", "public", "void", "setClassLoader", "(", "ClassLoader", "classLoader", ")", "{", "this", ".", "classLoader", "=", "classLoader", ";", "}", "</s>"]
["<s>", "public", "void", "addBundle", "(", "Bundle", "bundle", ")", "{", "bundle", ".", "initialize", "(", "this", ")", ";", "bundles", ".", "add", "(", "bundle", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addBundle", "(", "ConfiguredBundle", "<", "?", "super", "T", ">", "bundle", ")", "{", "bundle", ".", "initialize", "(", "this", ")", ";", "configuredBundles", ".", "add", "(", "bundle", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addCommand", "(", "Command", "command", ")", "{", "commands", ".", "add", "(", "command", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addCommand", "(", "ConfiguredCommand", "<", "T", ">", "command", ")", "{", "commands", ".", "add", "(", "command", ")", ";", "}", "</s>"]
["<s>", "public", "ObjectMapper", "getObjectMapper", "(", ")", "{", "return", "objectMapper", ";", "}", "</s>"]
["<s>", "public", "void", "setObjectMapper", "(", "ObjectMapper", "objectMapper", ")", "{", "this", ".", "objectMapper", "=", "objectMapper", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", "T", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "for", "(", "Bundle", "bundle", ":", "bundles", ")", "{", "bundle", ".", "run", "(", "environment", ")", ";", "}", "for", "(", "ConfiguredBundle", "<", "?", "super", "T", ">", "bundle", ":", "configuredBundles", ")", "{", "bundle", ".", "run", "(", "configuration", ",", "environment", ")", ";", "}", "}", "</s>"]
["<s>", "public", "ImmutableList", "<", "Command", ">", "getCommands", "(", ")", "{", "return", "ImmutableList", ".", "copyOf", "(", "commands", ")", ";", "}", "</s>"]
["<s>", "public", "MetricRegistry", "getMetricRegistry", "(", ")", "{", "return", "metricRegistry", ";", "}", "</s>"]
["<s>", "public", "void", "setMetricRegistry", "(", "MetricRegistry", "metricRegistry", ")", "{", "this", ".", "metricRegistry", "=", "metricRegistry", ";", "}", "</s>"]
["<s>", "public", "ValidatorFactory", "getValidatorFactory", "(", ")", "{", "return", "validatorFactory", ";", "}", "</s>"]
["<s>", "public", "void", "setValidatorFactory", "(", "ValidatorFactory", "validatorFactory", ")", "{", "this", ".", "validatorFactory", "=", "validatorFactory", ";", "}", "</s>"]
["<s>", "public", "ConfigurationFactoryFactory", "<", "T", ">", "getConfigurationFactoryFactory", "(", ")", "{", "return", "configurationFactoryFactory", ";", "}", "</s>"]
["<s>", "public", "void", "setConfigurationFactoryFactory", "(", "ConfigurationFactoryFactory", "<", "T", ">", "configurationFactoryFactory", ")", "{", "this", ".", "configurationFactoryFactory", "=", "configurationFactoryFactory", ";", "}", "</s>"]
["<s>", "public", "HealthCheckRegistry", "getHealthCheckRegistry", "(", ")", "{", "return", "healthCheckRegistry", ";", "}", "</s>"]
["<s>", "public", "void", "setHealthCheckRegistry", "(", "HealthCheckRegistry", "healthCheckRegistry", ")", "{", "this", ".", "healthCheckRegistry", "=", "healthCheckRegistry", ";", "}", "</s>"]
["<s>", "public", "Environment", "(", "String", "name", ",", "ObjectMapper", "objectMapper", ",", "Validator", "validator", ",", "MetricRegistry", "metricRegistry", ",", "@", "Nullable", "ClassLoader", "classLoader", ",", "HealthCheckRegistry", "healthCheckRegistry", ")", "{", "this", ".", "name", "=", "name", ";", "this", ".", "objectMapper", "=", "objectMapper", ";", "this", ".", "metricRegistry", "=", "metricRegistry", ";", "this", ".", "healthCheckRegistry", "=", "healthCheckRegistry", ";", "this", ".", "validator", "=", "validator", ";", "this", ".", "servletContext", "=", "new", "MutableServletContextHandler", "(", ")", ";", "servletContext", ".", "setClassLoader", "(", "classLoader", ")", ";", "this", ".", "servletEnvironment", "=", "new", "ServletEnvironment", "(", "servletContext", ")", ";", "this", ".", "adminContext", "=", "new", "MutableServletContextHandler", "(", ")", ";", "adminContext", ".", "setClassLoader", "(", "classLoader", ")", ";", "this", ".", "adminEnvironment", "=", "new", "AdminEnvironment", "(", "adminContext", ",", "healthCheckRegistry", ",", "metricRegistry", ")", ";", "this", ".", "lifecycleEnvironment", "=", "new", "LifecycleEnvironment", "(", ")", ";", "final", "DropwizardResourceConfig", "jerseyConfig", "=", "new", "DropwizardResourceConfig", "(", "metricRegistry", ")", ";", "jerseyConfig", ".", "setContextPath", "(", "servletContext", ".", "getContextPath", "(", ")", ")", ";", "this", ".", "jerseyServletContainer", "=", "new", "JerseyContainerHolder", "(", "new", "JerseyServletContainer", "(", "jerseyConfig", ")", ")", ";", "this", ".", "jerseyEnvironment", "=", "new", "JerseyEnvironment", "(", "jerseyServletContainer", ",", "jerseyConfig", ")", ";", "this", ".", "healthCheckExecutorService", "=", "this", ".", "lifecycle", "(", ")", ".", "executorService", "(", "\"", "<STR_LIT>", "\"", ")", ".", "workQueue", "(", "new", "ArrayBlockingQueue", "<", ">", "(", "1", ")", ")", ".", "minThreads", "(", "1", ")", ".", "maxThreads", "(", "<NUM_LIT:4>", ")", ".", "threadFactory", "(", "new", "ThreadFactoryBuilder", "(", ")", ".", "setDaemon", "(", "true", ")", ".", "build", "(", ")", ")", ".", "rejectedExecutionHandler", "(", "new", "ThreadPoolExecutor", ".", "CallerRunsPolicy", "(", ")", ")", ".", "build", "(", ")", ";", "try", "{", "SharedMetricRegistries", ".", "getDefault", "(", ")", ";", "}", "catch", "(", "IllegalStateException", "e", ")", "{", "SharedMetricRegistries", ".", "setDefault", "(", "\"", "<STR_LIT>", "\"", ",", "metricRegistry", ")", ";", "}", "try", "{", "SharedHealthCheckRegistries", ".", "getDefault", "(", ")", ";", "}", "catch", "(", "IllegalStateException", "e", ")", "{", "SharedHealthCheckRegistries", ".", "setDefault", "(", "\"", "<STR_LIT>", "\"", ",", "healthCheckRegistry", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Environment", "(", "String", "name", ",", "ObjectMapper", "objectMapper", ",", "Validator", "validator", ",", "MetricRegistry", "metricRegistry", ",", "@", "Nullable", "ClassLoader", "classLoader", ")", "{", "this", "(", "name", ",", "objectMapper", ",", "validator", ",", "metricRegistry", ",", "classLoader", ",", "new", "HealthCheckRegistry", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "JerseyEnvironment", "jersey", "(", ")", "{", "return", "jerseyEnvironment", ";", "}", "</s>"]
["<s>", "public", "ExecutorService", "getHealthCheckExecutorService", "(", ")", "{", "return", "healthCheckExecutorService", ";", "}", "</s>"]
["<s>", "public", "AdminEnvironment", "admin", "(", ")", "{", "return", "adminEnvironment", ";", "}", "</s>"]
["<s>", "public", "LifecycleEnvironment", "lifecycle", "(", ")", "{", "return", "lifecycleEnvironment", ";", "}", "</s>"]
["<s>", "public", "ServletEnvironment", "servlets", "(", ")", "{", "return", "servletEnvironment", ";", "}", "</s>"]
["<s>", "public", "ObjectMapper", "getObjectMapper", "(", ")", "{", "return", "objectMapper", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "Validator", "getValidator", "(", ")", "{", "return", "validator", ";", "}", "</s>"]
["<s>", "public", "void", "setValidator", "(", "Validator", "validator", ")", "{", "this", ".", "validator", "=", "requireNonNull", "(", "validator", ")", ";", "}", "</s>"]
["<s>", "public", "MetricRegistry", "metrics", "(", ")", "{", "return", "metricRegistry", ";", "}", "</s>"]
["<s>", "public", "HealthCheckRegistry", "healthChecks", "(", ")", "{", "return", "healthCheckRegistry", ";", "}", "</s>"]
["<s>", "public", "MutableServletContextHandler", "getApplicationContext", "(", ")", "{", "return", "servletContext", ";", "}", "</s>"]
["<s>", "@", "Nullable", "public", "Servlet", "getJerseyServletContainer", "(", ")", "{", "return", "jerseyServletContainer", ".", "getContainer", "(", ")", ";", "}", "</s>"]
["<s>", "public", "MutableServletContextHandler", "getAdminContext", "(", ")", "{", "return", "adminContext", ";", "}", "</s>"]
["<s>", "public", "ExceptionMapperBinder", "(", "boolean", "showDetails", ")", "{", "this", ".", "showDetails", "=", "showDetails", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "configure", "(", ")", "{", "bind", "(", "new", "LoggingExceptionMapper", "<", "Throwable", ">", "(", ")", "{", "}", ")", ".", "to", "(", "ExceptionMapper", ".", "class", ")", ";", "bind", "(", "new", "JerseyViolationExceptionMapper", "(", ")", ")", ".", "to", "(", "ExceptionMapper", ".", "class", ")", ";", "bind", "(", "new", "JsonProcessingExceptionMapper", "(", "isShowDetails", "(", ")", ")", ")", ".", "to", "(", "ExceptionMapper", ".", "class", ")", ";", "bind", "(", "new", "EarlyEofExceptionMapper", "(", ")", ")", ".", "to", "(", "ExceptionMapper", ".", "class", ")", ";", "bind", "(", "new", "EmptyOptionalExceptionMapper", "(", ")", ")", ".", "to", "(", "ExceptionMapper", ".", "class", ")", ";", "bind", "(", "new", "IllegalStateExceptionMapper", "(", ")", ")", ".", "to", "(", "ExceptionMapper", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isShowDetails", "(", ")", "{", "return", "showDetails", ";", "}", "</s>"]
["<s>", "public", "AdminEnvironment", "(", "MutableServletContextHandler", "handler", ",", "HealthCheckRegistry", "healthChecks", ",", "MetricRegistry", "metricRegistry", ")", "{", "super", "(", "handler", ")", ";", "this", ".", "healthChecks", "=", "healthChecks", ";", "this", ".", "healthChecks", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "new", "ThreadDeadlockHealthCheck", "(", ")", ")", ";", "this", ".", "tasks", "=", "new", "TaskServlet", "(", "metricRegistry", ")", ";", "tasks", ".", "add", "(", "new", "GarbageCollectionTask", "(", ")", ")", ";", "tasks", ".", "add", "(", "new", "LogConfigurationTask", "(", ")", ")", ";", "addServlet", "(", "\"", "<STR_LIT>", "\"", ",", "tasks", ")", ".", "addMapping", "(", "\"", "<STR_LIT>", "\"", ")", ";", "handler", ".", "addLifeCycleListener", "(", "new", "AbstractLifeCycle", ".", "AbstractLifeCycleListener", "(", ")", "{", "@", "Override", "public", "void", "lifeCycleStarting", "(", "LifeCycle", "event", ")", "{", "logTasks", "(", ")", ";", "logHealthChecks", "(", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "lifeCycleStarting", "(", "LifeCycle", "event", ")", "{", "logTasks", "(", ")", ";", "logHealthChecks", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addTask", "(", "Task", "task", ")", "{", "tasks", ".", "add", "(", "requireNonNull", "(", "task", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "logTasks", "(", ")", "{", "final", "StringBuilder", "stringBuilder", "=", "new", "StringBuilder", "(", "<NUM_LIT>", ")", ".", "append", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "for", "(", "Task", "task", ":", "tasks", ".", "getTasks", "(", ")", ")", "{", "final", "String", "taskClassName", "=", "firstNonNull", "(", "task", ".", "getClass", "(", ")", ".", "getCanonicalName", "(", ")", ",", "task", ".", "getClass", "(", ")", ".", "getName", "(", ")", ")", ";", "stringBuilder", ".", "append", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:POST>", "\"", ",", "task", ".", "getName", "(", ")", ",", "taskClassName", ")", ")", ";", "}", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "stringBuilder", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "logHealthChecks", "(", ")", "{", "if", "(", "healthChecks", ".", "getNames", "(", ")", ".", "size", "(", ")", "<", "=", "1", ")", "{", "LOGGER", ".", "warn", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "LOGGER", ".", "debug", "(", "\"", "<STR_LIT>", "\"", ",", "healthChecks", ".", "getNames", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isThreadPoolSizedCorrectly", "(", ")", "{", "return", "minThreads", "<", "=", "maxThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "synchronized", "RequestLogFactory", "getRequestLogFactory", "(", ")", "{", "if", "(", "requestLog", "=", "=", "null", ")", "{", "requestLog", "=", "new", "LogbackAccessRequestLogFactory", "(", ")", ";", "}", "return", "requestLog", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "synchronized", "void", "setRequestLogFactory", "(", "RequestLogFactory", "requestLog", ")", "{", "this", ".", "requestLog", "=", "requestLog", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "GzipHandlerFactory", "getGzipFilterFactory", "(", ")", "{", "return", "gzip", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "setGzipFilterFactory", "(", "GzipHandlerFactory", "gzip", ")", "{", "this", ".", "gzip", "=", "gzip", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "ServerPushFilterFactory", "getServerPush", "(", ")", "{", "return", "serverPush", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "setServerPush", "(", "ServerPushFilterFactory", "serverPush", ")", "{", "this", ".", "serverPush", "=", "serverPush", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getMaxThreads", "(", ")", "{", "return", "maxThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxThreads", "(", "int", "count", ")", "{", "this", ".", "maxThreads", "=", "count", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getMinThreads", "(", ")", "{", "return", "minThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMinThreads", "(", "int", "count", ")", "{", "this", ".", "minThreads", "=", "count", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getMaxQueuedRequests", "(", ")", "{", "return", "maxQueuedRequests", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxQueuedRequests", "(", "int", "maxQueuedRequests", ")", "{", "this", ".", "maxQueuedRequests", "=", "maxQueuedRequests", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getIdleThreadTimeout", "(", ")", "{", "return", "idleThreadTimeout", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setIdleThreadTimeout", "(", "Duration", "idleThreadTimeout", ")", "{", "this", ".", "idleThreadTimeout", "=", "idleThreadTimeout", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Integer", "getNofileSoftLimit", "(", ")", "{", "return", "nofileSoftLimit", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setNofileSoftLimit", "(", "Integer", "nofileSoftLimit", ")", "{", "this", ".", "nofileSoftLimit", "=", "nofileSoftLimit", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Integer", "getNofileHardLimit", "(", ")", "{", "return", "nofileHardLimit", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setNofileHardLimit", "(", "Integer", "nofileHardLimit", ")", "{", "this", ".", "nofileHardLimit", "=", "nofileHardLimit", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Integer", "getGid", "(", ")", "{", "return", "gid", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setGid", "(", "Integer", "gid", ")", "{", "this", ".", "gid", "=", "gid", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Integer", "getUid", "(", ")", "{", "return", "uid", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setUid", "(", "Integer", "uid", ")", "{", "this", ".", "uid", "=", "uid", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getUser", "(", ")", "{", "return", "user", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setUser", "(", "String", "user", ")", "{", "this", ".", "user", "=", "user", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getGroup", "(", ")", "{", "return", "group", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setGroup", "(", "String", "group", ")", "{", "this", ".", "group", "=", "group", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getUmask", "(", ")", "{", "return", "umask", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setUmask", "(", "String", "umask", ")", "{", "this", ".", "umask", "=", "umask", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Boolean", "getStartsAsRoot", "(", ")", "{", "return", "startsAsRoot", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setStartsAsRoot", "(", "Boolean", "startsAsRoot", ")", "{", "this", ".", "startsAsRoot", "=", "startsAsRoot", ";", "}", "</s>"]
["<s>", "public", "Boolean", "getRegisterDefaultExceptionMappers", "(", ")", "{", "return", "registerDefaultExceptionMappers", ";", "}", "</s>"]
["<s>", "public", "void", "setRegisterDefaultExceptionMappers", "(", "Boolean", "registerDefaultExceptionMappers", ")", "{", "this", ".", "registerDefaultExceptionMappers", "=", "registerDefaultExceptionMappers", ";", "}", "</s>"]
["<s>", "public", "Boolean", "getDetailedJsonProcessingExceptionMapper", "(", ")", "{", "return", "detailedJsonProcessingExceptionMapper", ";", "}", "</s>"]
["<s>", "public", "void", "setDetailedJsonProcessingExceptionMapper", "(", "Boolean", "detailedJsonProcessingExceptionMapper", ")", "{", "this", ".", "detailedJsonProcessingExceptionMapper", "=", "detailedJsonProcessingExceptionMapper", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getShutdownGracePeriod", "(", ")", "{", "return", "shutdownGracePeriod", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setShutdownGracePeriod", "(", "Duration", "shutdownGracePeriod", ")", "{", "this", ".", "shutdownGracePeriod", "=", "shutdownGracePeriod", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Set", "<", "String", ">", "getAllowedMethods", "(", ")", "{", "return", "allowedMethods", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAllowedMethods", "(", "Set", "<", "String", ">", "allowedMethods", ")", "{", "this", ".", "allowedMethods", "=", "allowedMethods", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Optional", "<", "String", ">", "getJerseyRootPath", "(", ")", "{", "return", "jerseyRootPath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "setJerseyRootPath", "(", "String", "jerseyRootPath", ")", "{", "this", ".", "jerseyRootPath", "=", "Optional", ".", "ofNullable", "(", "jerseyRootPath", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getEnableThreadNameFilter", "(", ")", "{", "return", "enableThreadNameFilter", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setEnableThreadNameFilter", "(", "boolean", "enableThreadNameFilter", ")", "{", "this", ".", "enableThreadNameFilter", "=", "enableThreadNameFilter", ";", "}", "</s>"]
["<s>", "protected", "Handler", "createAdminServlet", "(", "Server", "server", ",", "MutableServletContextHandler", "handler", ",", "MetricRegistry", "metrics", ",", "HealthCheckRegistry", "healthChecks", ")", "{", "configureSessionsAndSecurity", "(", "handler", ",", "server", ")", ";", "handler", ".", "setServer", "(", "server", ")", ";", "handler", ".", "getServletContext", "(", ")", ".", "setAttribute", "(", "MetricsServlet", ".", "METRICS_REGISTRY", ",", "metrics", ")", ";", "handler", ".", "getServletContext", "(", ")", ".", "setAttribute", "(", "HealthCheckServlet", ".", "HEALTH_CHECK_REGISTRY", ",", "healthChecks", ")", ";", "handler", ".", "addServlet", "(", "new", "NonblockingServletHolder", "(", "new", "AdminServlet", "(", ")", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "handler", ".", "addFilter", "(", "AllowedMethodsFilter", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "EnumSet", ".", "of", "(", "DispatcherType", ".", "REQUEST", ")", ")", ".", "setInitParameter", "(", "AllowedMethodsFilter", ".", "ALLOWED_METHODS_PARAM", ",", "Joiner", ".", "on", "(", "<CHAR_LIT:U+002C>", ")", ".", "join", "(", "allowedMethods", ")", ")", ";", "return", "handler", ";", "}", "</s>"]
["<s>", "private", "void", "configureSessionsAndSecurity", "(", "MutableServletContextHandler", "handler", ",", "Server", "server", ")", "{", "handler", ".", "setServer", "(", "server", ")", ";", "if", "(", "handler", ".", "isSecurityEnabled", "(", ")", ")", "{", "handler", ".", "getSecurityHandler", "(", ")", ".", "setServer", "(", "server", ")", ";", "}", "if", "(", "handler", ".", "isSessionsEnabled", "(", ")", ")", "{", "handler", ".", "getSessionHandler", "(", ")", ".", "setServer", "(", "server", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "Handler", "createAppServlet", "(", "Server", "server", ",", "JerseyEnvironment", "jersey", ",", "ObjectMapper", "objectMapper", ",", "Validator", "validator", ",", "MutableServletContextHandler", "handler", ",", "@", "Nullable", "Servlet", "jerseyContainer", ",", "MetricRegistry", "metricRegistry", ")", "{", "configureSessionsAndSecurity", "(", "handler", ",", "server", ")", ";", "handler", ".", "addFilter", "(", "AllowedMethodsFilter", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "EnumSet", ".", "of", "(", "DispatcherType", ".", "REQUEST", ")", ")", ".", "setInitParameter", "(", "AllowedMethodsFilter", ".", "ALLOWED_METHODS_PARAM", ",", "Joiner", ".", "on", "(", "<CHAR_LIT:U+002C>", ")", ".", "join", "(", "allowedMethods", ")", ")", ";", "if", "(", "enableThreadNameFilter", ")", "{", "handler", ".", "addFilter", "(", "ThreadNameFilter", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "EnumSet", ".", "of", "(", "DispatcherType", ".", "REQUEST", ")", ")", ";", "}", "serverPush", ".", "addFilter", "(", "handler", ")", ";", "if", "(", "jerseyContainer", "!", "=", "null", ")", "{", "jerseyRootPath", ".", "ifPresent", "(", "jersey", ":", ":", "setUrlPattern", ")", ";", "jersey", ".", "register", "(", "new", "JacksonBinder", "(", "objectMapper", ")", ")", ";", "jersey", ".", "register", "(", "new", "HibernateValidationFeature", "(", "validator", ")", ")", ";", "if", "(", "registerDefaultExceptionMappers", "=", "=", "null", "|", "|", "registerDefaultExceptionMappers", ")", "{", "jersey", ".", "register", "(", "new", "ExceptionMapperBinder", "(", "detailedJsonProcessingExceptionMapper", ")", ")", ";", "}", "handler", ".", "addServlet", "(", "new", "NonblockingServletHolder", "(", "jerseyContainer", ")", ",", "jersey", ".", "getUrlPattern", "(", ")", ")", ";", "}", "final", "InstrumentedHandler", "instrumented", "=", "new", "InstrumentedHandler", "(", "metricRegistry", ")", ";", "instrumented", ".", "setServer", "(", "server", ")", ";", "instrumented", ".", "setHandler", "(", "handler", ")", ";", "return", "instrumented", ";", "}", "</s>"]
["<s>", "protected", "ThreadPool", "createThreadPool", "(", "MetricRegistry", "metricRegistry", ")", "{", "final", "BlockingQueue", "<", "Runnable", ">", "queue", "=", "new", "BlockingArrayQueue", "<", ">", "(", "minThreads", ",", "maxThreads", ",", "maxQueuedRequests", ")", ";", "final", "InstrumentedQueuedThreadPool", "threadPool", "=", "new", "InstrumentedQueuedThreadPool", "(", "metricRegistry", ",", "maxThreads", ",", "minThreads", ",", "(", "int", ")", "idleThreadTimeout", ".", "toMilliseconds", "(", ")", ",", "queue", ")", ";", "threadPool", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "threadPool", ";", "}", "</s>"]
["<s>", "protected", "Server", "buildServer", "(", "LifecycleEnvironment", "lifecycle", ",", "ThreadPool", "threadPool", ")", "{", "final", "Server", "server", "=", "new", "Server", "(", "threadPool", ")", ";", "server", ".", "addLifeCycleListener", "(", "buildSetUIDListener", "(", ")", ")", ";", "lifecycle", ".", "attach", "(", "server", ")", ";", "final", "ErrorHandler", "errorHandler", "=", "new", "ErrorHandler", "(", ")", ";", "errorHandler", ".", "setServer", "(", "server", ")", ";", "errorHandler", ".", "setShowStacks", "(", "false", ")", ";", "server", ".", "addBean", "(", "errorHandler", ")", ";", "server", ".", "setStopAtShutdown", "(", "true", ")", ";", "server", ".", "setStopTimeout", "(", "shutdownGracePeriod", ".", "toMilliseconds", "(", ")", ")", ";", "return", "server", ";", "}", "</s>"]
["<s>", "protected", "SetUIDListener", "buildSetUIDListener", "(", ")", "{", "final", "SetUIDListener", "listener", "=", "new", "SetUIDListener", "(", ")", ";", "if", "(", "startsAsRoot", "!", "=", "null", ")", "{", "listener", ".", "setStartServerAsPrivileged", "(", "startsAsRoot", ")", ";", "}", "if", "(", "gid", "!", "=", "null", ")", "{", "listener", ".", "setGid", "(", "gid", ")", ";", "}", "if", "(", "uid", "!", "=", "null", ")", "{", "listener", ".", "setUid", "(", "uid", ")", ";", "}", "if", "(", "user", "!", "=", "null", ")", "{", "listener", ".", "setUsername", "(", "user", ")", ";", "}", "if", "(", "group", "!", "=", "null", ")", "{", "listener", ".", "setGroupname", "(", "group", ")", ";", "}", "if", "(", "nofileHardLimit", "!", "=", "null", "|", "|", "nofileSoftLimit", "!", "=", "null", ")", "{", "final", "RLimit", "rlimit", "=", "new", "RLimit", "(", ")", ";", "if", "(", "nofileHardLimit", "!", "=", "null", ")", "{", "rlimit", ".", "setHard", "(", "nofileHardLimit", ")", ";", "}", "if", "(", "nofileSoftLimit", "!", "=", "null", ")", "{", "rlimit", ".", "setSoft", "(", "nofileSoftLimit", ")", ";", "}", "listener", ".", "setRLimitNoFiles", "(", "rlimit", ")", ";", "}", "if", "(", "umask", "!", "=", "null", ")", "{", "listener", ".", "setUmaskOctal", "(", "umask", ")", ";", "}", "return", "listener", ";", "}", "</s>"]
["<s>", "protected", "Handler", "addRequestLog", "(", "Server", "server", ",", "Handler", "handler", ",", "String", "name", ")", "{", "if", "(", "getRequestLogFactory", "(", ")", ".", "isEnabled", "(", ")", ")", "{", "final", "RequestLogHandler", "requestLogHandler", "=", "new", "RequestLogHandler", "(", ")", ";", "requestLogHandler", ".", "setRequestLog", "(", "getRequestLogFactory", "(", ")", ".", "build", "(", "name", ")", ")", ";", "server", ".", "addBean", "(", "requestLogHandler", ".", "getRequestLog", "(", ")", ",", "true", ")", ";", "requestLogHandler", ".", "setHandler", "(", "handler", ")", ";", "return", "requestLogHandler", ";", "}", "return", "handler", ";", "}", "</s>"]
["<s>", "protected", "Handler", "addStatsHandler", "(", "Handler", "handler", ")", "{", "final", "StatisticsHandler", "statisticsHandler", "=", "new", "StatisticsHandler", "(", ")", ";", "statisticsHandler", ".", "setHandler", "(", "handler", ")", ";", "return", "statisticsHandler", ";", "}", "</s>"]
["<s>", "protected", "Handler", "buildGzipHandler", "(", "Handler", "handler", ")", "{", "return", "gzip", ".", "isEnabled", "(", ")", "?", "gzip", ".", "build", "(", "handler", ")", ":", "handler", ";", "}", "</s>"]
["<s>", "protected", "void", "printBanner", "(", "String", "name", ")", "{", "try", "{", "final", "String", "banner", "=", "WINDOWS_NEWLINE", ".", "matcher", "(", "Resources", ".", "toString", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ".", "replaceAll", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ".", "replace", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ",", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "LOGGER", ".", "info", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ")", ",", "name", ",", "banner", ")", ";", "}", "catch", "(", "IllegalArgumentException", "|", "IOException", "ignored", ")", "{", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "name", ")", ";", "}", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "List", "<", "ConnectorFactory", ">", "getApplicationConnectors", "(", ")", "{", "return", "applicationConnectors", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setApplicationConnectors", "(", "List", "<", "ConnectorFactory", ">", "connectors", ")", "{", "this", ".", "applicationConnectors", "=", "connectors", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "List", "<", "ConnectorFactory", ">", "getAdminConnectors", "(", ")", "{", "return", "adminConnectors", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAdminConnectors", "(", "List", "<", "ConnectorFactory", ">", "connectors", ")", "{", "this", ".", "adminConnectors", "=", "connectors", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getAdminMaxThreads", "(", ")", "{", "return", "adminMaxThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAdminMaxThreads", "(", "int", "adminMaxThreads", ")", "{", "this", ".", "adminMaxThreads", "=", "adminMaxThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getAdminMinThreads", "(", ")", "{", "return", "adminMinThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAdminMinThreads", "(", "int", "adminMinThreads", ")", "{", "this", ".", "adminMinThreads", "=", "adminMinThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getApplicationContextPath", "(", ")", "{", "return", "applicationContextPath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setApplicationContextPath", "(", "final", "String", "applicationContextPath", ")", "{", "this", ".", "applicationContextPath", "=", "applicationContextPath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getAdminContextPath", "(", ")", "{", "return", "adminContextPath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAdminContextPath", "(", "final", "String", "adminContextPath", ")", "{", "this", ".", "adminContextPath", "=", "adminContextPath", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Server", "build", "(", "Environment", "environment", ")", "{", "printBanner", "(", "environment", ".", "getName", "(", ")", ")", ";", "final", "ThreadPool", "threadPool", "=", "createThreadPool", "(", "environment", ".", "metrics", "(", ")", ")", ";", "final", "Server", "server", "=", "buildServer", "(", "environment", ".", "lifecycle", "(", ")", ",", "threadPool", ")", ";", "final", "Handler", "applicationHandler", "=", "createAppServlet", "(", "server", ",", "environment", ".", "jersey", "(", ")", ",", "environment", ".", "getObjectMapper", "(", ")", ",", "environment", ".", "getValidator", "(", ")", ",", "environment", ".", "getApplicationContext", "(", ")", ",", "environment", ".", "getJerseyServletContainer", "(", ")", ",", "environment", ".", "metrics", "(", ")", ")", ";", "final", "Handler", "adminHandler", "=", "createAdminServlet", "(", "server", ",", "environment", ".", "getAdminContext", "(", ")", ",", "environment", ".", "metrics", "(", ")", ",", "environment", ".", "healthChecks", "(", ")", ")", ";", "final", "RoutingHandler", "routingHandler", "=", "buildRoutingHandler", "(", "environment", ".", "metrics", "(", ")", ",", "server", ",", "applicationHandler", ",", "adminHandler", ")", ";", "final", "Handler", "gzipHandler", "=", "buildGzipHandler", "(", "routingHandler", ")", ";", "server", ".", "setHandler", "(", "addStatsHandler", "(", "addRequestLog", "(", "server", ",", "gzipHandler", ",", "environment", ".", "getName", "(", ")", ")", ")", ")", ";", "return", "server", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Environment", "environment", ")", "{", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "applicationContextPath", ")", ";", "environment", ".", "getApplicationContext", "(", ")", ".", "setContextPath", "(", "applicationContextPath", ")", ";", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "adminContextPath", ")", ";", "environment", ".", "getAdminContext", "(", ")", ".", "setContextPath", "(", "adminContextPath", ")", ";", "}", "</s>"]
["<s>", "private", "RoutingHandler", "buildRoutingHandler", "(", "MetricRegistry", "metricRegistry", ",", "Server", "server", ",", "Handler", "applicationHandler", ",", "Handler", "adminHandler", ")", "{", "final", "List", "<", "Connector", ">", "appConnectors", "=", "buildAppConnectors", "(", "metricRegistry", ",", "server", ")", ";", "final", "List", "<", "Connector", ">", "adConnectors", "=", "buildAdminConnectors", "(", "metricRegistry", ",", "server", ")", ";", "final", "Map", "<", "Connector", ",", "Handler", ">", "handlers", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "for", "(", "Connector", "connector", ":", "appConnectors", ")", "{", "server", ".", "addConnector", "(", "connector", ")", ";", "handlers", ".", "put", "(", "connector", ",", "applicationHandler", ")", ";", "}", "for", "(", "Connector", "connector", ":", "adConnectors", ")", "{", "server", ".", "addConnector", "(", "connector", ")", ";", "handlers", ".", "put", "(", "connector", ",", "adminHandler", ")", ";", "}", "return", "new", "RoutingHandler", "(", "handlers", ")", ";", "}", "</s>"]
["<s>", "private", "List", "<", "Connector", ">", "buildAdminConnectors", "(", "MetricRegistry", "metricRegistry", ",", "Server", "server", ")", "{", "final", "QueuedThreadPool", "threadPool", "=", "new", "InstrumentedQueuedThreadPool", "(", "metricRegistry", ",", "adminMaxThreads", ",", "adminMinThreads", ")", ";", "threadPool", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "addBean", "(", "threadPool", ")", ";", "final", "List", "<", "Connector", ">", "connectors", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "for", "(", "ConnectorFactory", "factory", ":", "adminConnectors", ")", "{", "final", "Connector", "connector", "=", "factory", ".", "build", "(", "server", ",", "metricRegistry", ",", "\"", "<STR_LIT>", "\"", ",", "threadPool", ")", ";", "if", "(", "connector", "instanceof", "ContainerLifeCycle", ")", "{", "(", "(", "ContainerLifeCycle", ")", "connector", ")", ".", "unmanage", "(", "threadPool", ")", ";", "}", "connectors", ".", "add", "(", "connector", ")", ";", "}", "return", "connectors", ";", "}", "</s>"]
["<s>", "private", "List", "<", "Connector", ">", "buildAppConnectors", "(", "MetricRegistry", "metricRegistry", ",", "Server", "server", ")", "{", "final", "List", "<", "Connector", ">", "connectors", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "for", "(", "ConnectorFactory", "factory", ":", "applicationConnectors", ")", "{", "connectors", ".", "add", "(", "factory", ".", "build", "(", "server", ",", "metricRegistry", ",", "\"", "<STR_LIT>", "\"", ",", "null", ")", ")", ";", "}", "return", "connectors", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "MoreObjects", ".", "toStringHelper", "(", "this", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "applicationConnectors", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "adminConnectors", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "adminMaxThreads", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "adminMinThreads", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "applicationContextPath", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "adminContextPath", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "Server", "build", "(", "Environment", "environment", ")", ";", "</s>"]
["<s>", "void", "configure", "(", "Environment", "environment", ")", ";", "</s>"]
["<s>", "@", "JsonProperty", "public", "ConnectorFactory", "getConnector", "(", ")", "{", "return", "connector", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setConnector", "(", "ConnectorFactory", "factory", ")", "{", "this", ".", "connector", "=", "factory", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getApplicationContextPath", "(", ")", "{", "return", "applicationContextPath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setApplicationContextPath", "(", "String", "contextPath", ")", "{", "this", ".", "applicationContextPath", "=", "contextPath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getAdminContextPath", "(", ")", "{", "return", "adminContextPath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAdminContextPath", "(", "String", "contextPath", ")", "{", "this", ".", "adminContextPath", "=", "contextPath", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Server", "build", "(", "Environment", "environment", ")", "{", "configure", "(", "environment", ")", ";", "printBanner", "(", "environment", ".", "getName", "(", ")", ")", ";", "final", "ThreadPool", "threadPool", "=", "createThreadPool", "(", "environment", ".", "metrics", "(", ")", ")", ";", "final", "Server", "server", "=", "buildServer", "(", "environment", ".", "lifecycle", "(", ")", ",", "threadPool", ")", ";", "final", "Handler", "applicationHandler", "=", "createAppServlet", "(", "server", ",", "environment", ".", "jersey", "(", ")", ",", "environment", ".", "getObjectMapper", "(", ")", ",", "environment", ".", "getValidator", "(", ")", ",", "environment", ".", "getApplicationContext", "(", ")", ",", "environment", ".", "getJerseyServletContainer", "(", ")", ",", "environment", ".", "metrics", "(", ")", ")", ";", "final", "Handler", "adminHandler", "=", "createAdminServlet", "(", "server", ",", "environment", ".", "getAdminContext", "(", ")", ",", "environment", ".", "metrics", "(", ")", ",", "environment", ".", "healthChecks", "(", ")", ")", ";", "final", "Connector", "conn", "=", "connector", ".", "build", "(", "server", ",", "environment", ".", "metrics", "(", ")", ",", "environment", ".", "getName", "(", ")", ",", "null", ")", ";", "server", ".", "addConnector", "(", "conn", ")", ";", "final", "ContextRoutingHandler", "routingHandler", "=", "new", "ContextRoutingHandler", "(", "ImmutableMap", ".", "of", "(", "applicationContextPath", ",", "applicationHandler", ",", "adminContextPath", ",", "adminHandler", ")", ")", ";", "final", "Handler", "gzipHandler", "=", "buildGzipHandler", "(", "routingHandler", ")", ";", "server", ".", "setHandler", "(", "addStatsHandler", "(", "addRequestLog", "(", "server", ",", "gzipHandler", ",", "environment", ".", "getName", "(", ")", ")", ")", ")", ";", "return", "server", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Environment", "environment", ")", "{", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "applicationContextPath", ")", ";", "environment", ".", "getApplicationContext", "(", ")", ".", "setContextPath", "(", "applicationContextPath", ")", ";", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "adminContextPath", ")", ";", "environment", ".", "getAdminContext", "(", ")", ".", "setContextPath", "(", "adminContextPath", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "Bootstrap", "<", "?", ">", "bootstrap", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Environment", "environment", ")", "{", "environment", ".", "getApplicationContext", "(", ")", ".", "addLifeCycleListener", "(", "new", "AbstractLifeCycle", ".", "AbstractLifeCycleListener", "(", ")", "{", "@", "Override", "public", "void", "lifeCycleStarted", "(", "LifeCycle", "event", ")", "{", "final", "ImmutableSet", "<", "SslReload", ">", "reloaders", "=", "ImmutableSet", ".", "<", "SslReload", ">", "builder", "(", ")", ".", "addAll", "(", "getReloaders", "(", "environment", ".", "getApplicationContext", "(", ")", ")", ")", ".", "addAll", "(", "getReloaders", "(", "environment", ".", "getAdminContext", "(", ")", ")", ")", ".", "build", "(", ")", ";", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "reloaders", ".", "size", "(", ")", ")", ";", "reloadTask", ".", "setReloaders", "(", "reloaders", ")", ";", "}", "}", ")", ";", "environment", ".", "admin", "(", ")", ".", "addTask", "(", "reloadTask", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "lifeCycleStarted", "(", "LifeCycle", "event", ")", "{", "final", "ImmutableSet", "<", "SslReload", ">", "reloaders", "=", "ImmutableSet", ".", "<", "SslReload", ">", "builder", "(", ")", ".", "addAll", "(", "getReloaders", "(", "environment", ".", "getApplicationContext", "(", ")", ")", ")", ".", "addAll", "(", "getReloaders", "(", "environment", ".", "getAdminContext", "(", ")", ")", ")", ".", "build", "(", ")", ";", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "reloaders", ".", "size", "(", ")", ")", ";", "reloadTask", ".", "setReloaders", "(", "reloaders", ")", ";", "}", "</s>"]
["<s>", "private", "Collection", "<", "SslReload", ">", "getReloaders", "(", "MutableServletContextHandler", "handler", ")", "{", "return", "handler", ".", "getServer", "(", ")", ".", "getBeans", "(", "SslReload", ".", "class", ")", ";", "}", "</s>"]
["<s>", "protected", "SslReloadTask", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "for", "(", "SslReload", "reloader", ":", "getReloaders", "(", ")", ")", "{", "reloader", ".", "reload", "(", "new", "SslContextFactory", "(", ")", ")", ";", "}", "for", "(", "SslReload", "reloader", ":", "getReloaders", "(", ")", ")", "{", "reloader", ".", "reload", "(", ")", ";", "}", "output", ".", "write", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "Collection", "<", "SslReload", ">", "getReloaders", "(", ")", "{", "return", "reloader", ";", "}", "</s>"]
["<s>", "public", "void", "setReloaders", "(", "Collection", "<", "SslReload", ">", "reloader", ")", "{", "this", ".", "reloader", "=", "reloader", ";", "}", "</s>"]
["<s>", "protected", "ConfiguredCommand", "(", "String", "name", ",", "String", "description", ")", "{", "super", "(", "name", ",", "description", ")", ";", "this", ".", "asynchronous", "=", "false", ";", "}", "</s>"]
["<s>", "protected", "Class", "<", "T", ">", "getConfigurationClass", "(", ")", "{", "return", "Generics", ".", "getTypeParameter", "(", "getClass", "(", ")", ",", "Configuration", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "addFileArgument", "(", "subparser", ")", ";", "}", "</s>"]
["<s>", "protected", "Argument", "addFileArgument", "(", "Subparser", "subparser", ")", "{", "return", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "nargs", "(", "\"", "<STR_LIT:?>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "run", "(", "Bootstrap", "<", "?", ">", "wildcardBootstrap", ",", "Namespace", "namespace", ")", "throws", "Exception", "{", "final", "Bootstrap", "<", "T", ">", "bootstrap", "=", "(", "Bootstrap", "<", "T", ">", ")", "wildcardBootstrap", ";", "configuration", "=", "parseConfiguration", "(", "bootstrap", ".", "getConfigurationFactoryFactory", "(", ")", ",", "bootstrap", ".", "getConfigurationSourceProvider", "(", ")", ",", "bootstrap", ".", "getValidatorFactory", "(", ")", ".", "getValidator", "(", ")", ",", "namespace", ".", "getString", "(", "\"", "<STR_LIT>", "\"", ")", ",", "getConfigurationClass", "(", ")", ",", "bootstrap", ".", "getObjectMapper", "(", ")", ")", ";", "try", "{", "if", "(", "configuration", "!", "=", "null", ")", "{", "configuration", ".", "getLoggingFactory", "(", ")", ".", "configure", "(", "bootstrap", ".", "getMetricRegistry", "(", ")", ",", "bootstrap", ".", "getApplication", "(", ")", ".", "getName", "(", ")", ")", ";", "}", "run", "(", "bootstrap", ",", "namespace", ",", "configuration", ")", ";", "}", "finally", "{", "if", "(", "!", "asynchronous", ")", "{", "cleanup", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "protected", "void", "cleanupAsynchronously", "(", ")", "{", "this", ".", "asynchronous", "=", "true", ";", "}", "</s>"]
["<s>", "protected", "void", "cleanup", "(", ")", "{", "if", "(", "configuration", "!", "=", "null", ")", "{", "configuration", ".", "getLoggingFactory", "(", ")", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "abstract", "void", "run", "(", "Bootstrap", "<", "T", ">", "bootstrap", ",", "Namespace", "namespace", ",", "T", "configuration", ")", "throws", "Exception", ";", "</s>"]
["<s>", "private", "T", "parseConfiguration", "(", "ConfigurationFactoryFactory", "<", "T", ">", "configurationFactoryFactory", ",", "ConfigurationSourceProvider", "provider", ",", "Validator", "validator", ",", "String", "path", ",", "Class", "<", "T", ">", "klass", ",", "ObjectMapper", "objectMapper", ")", "throws", "IOException", ",", "ConfigurationException", "{", "final", "ConfigurationFactory", "<", "T", ">", "configurationFactory", "=", "configurationFactoryFactory", ".", "create", "(", "klass", ",", "validator", ",", "objectMapper", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "path", "!", "=", "null", ")", "{", "return", "configurationFactory", ".", "build", "(", "provider", ",", "path", ")", ";", "}", "return", "configurationFactory", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "Command", "(", "String", "name", ",", "String", "description", ")", "{", "this", ".", "name", "=", "name", ";", "this", ".", "description", "=", "description", ";", "}", "</s>"]
["<s>", "public", "final", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "final", "String", "getDescription", "(", ")", "{", "return", "description", ";", "}", "</s>"]
["<s>", "public", "abstract", "void", "configure", "(", "Subparser", "subparser", ")", ";", "</s>"]
["<s>", "public", "abstract", "void", "run", "(", "Bootstrap", "<", "?", ">", "bootstrap", ",", "Namespace", "namespace", ")", "throws", "Exception", ";", "</s>"]
["<s>", "public", "void", "onError", "(", "Cli", "cli", ",", "Namespace", "namespace", ",", "Throwable", "e", ")", "{", "e", ".", "printStackTrace", "(", "cli", ".", "getStdErr", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "ServerCommand", "(", "Application", "<", "T", ">", "application", ")", "{", "this", "(", "application", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "protected", "ServerCommand", "(", "final", "Application", "<", "T", ">", "application", ",", "final", "String", "name", ",", "final", "String", "description", ")", "{", "super", "(", "application", ",", "name", ",", "description", ")", ";", "this", ".", "configurationClass", "=", "application", ".", "getConfigurationClass", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "T", ">", "getConfigurationClass", "(", ")", "{", "return", "configurationClass", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "run", "(", "Environment", "environment", ",", "Namespace", "namespace", ",", "T", "configuration", ")", "throws", "Exception", "{", "final", "Server", "server", "=", "configuration", ".", "getServerFactory", "(", ")", ".", "build", "(", "environment", ")", ";", "try", "{", "server", ".", "addLifeCycleListener", "(", "new", "LifeCycleListener", "(", ")", ")", ";", "cleanupAsynchronously", "(", ")", ";", "server", ".", "start", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "LOGGER", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "try", "{", "server", ".", "stop", "(", ")", ";", "}", "catch", "(", "Exception", "e1", ")", "{", "LOGGER", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ",", "e1", ")", ";", "}", "try", "{", "cleanup", "(", ")", ";", "}", "catch", "(", "Exception", "e2", ")", "{", "LOGGER", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ",", "e2", ")", ";", "}", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "lifeCycleStopped", "(", "LifeCycle", "event", ")", "{", "cleanup", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Cli", "(", "JarLocation", "location", ",", "Bootstrap", "<", "?", ">", "bootstrap", ",", "OutputStream", "stdOut", ",", "OutputStream", "stdErr", ")", "{", "this", ".", "stdOut", "=", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "stdOut", ",", "StandardCharsets", ".", "UTF_8", ")", ",", "true", ")", ";", "this", ".", "stdErr", "=", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "stdErr", ",", "StandardCharsets", ".", "UTF_8", ")", ",", "true", ")", ";", "this", ".", "commands", "=", "new", "TreeMap", "<", ">", "(", ")", ";", "this", ".", "parser", "=", "buildParser", "(", "location", ")", ";", "this", ".", "bootstrap", "=", "bootstrap", ";", "for", "(", "Command", "command", ":", "bootstrap", ".", "getCommands", "(", ")", ")", "{", "addCommand", "(", "command", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "run", "(", "String", ".", ".", ".", "arguments", ")", "throws", "Exception", "{", "try", "{", "if", "(", "isFlag", "(", "HELP", ",", "arguments", ")", ")", "{", "parser", ".", "printHelp", "(", "stdOut", ")", ";", "}", "else", "if", "(", "isFlag", "(", "VERSION", ",", "arguments", ")", ")", "{", "parser", ".", "printVersion", "(", "stdOut", ")", ";", "}", "else", "{", "final", "Namespace", "namespace", "=", "parser", ".", "parseArgs", "(", "arguments", ")", ";", "final", "Command", "command", "=", "requireNonNull", "(", "commands", ".", "get", "(", "namespace", ".", "getString", "(", "COMMAND_NAME_ATTR", ")", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "command", ".", "run", "(", "bootstrap", ",", "namespace", ")", ";", "}", "catch", "(", "Throwable", "e", ")", "{", "command", ".", "onError", "(", "this", ",", "namespace", ",", "e", ")", ";", "return", "false", ";", "}", "}", "return", "true", ";", "}", "catch", "(", "HelpScreenException", "ignored", ")", "{", "return", "true", ";", "}", "catch", "(", "ArgumentParserException", "e", ")", "{", "stdErr", ".", "println", "(", "e", ".", "getMessage", "(", ")", ")", ";", "e", ".", "getParser", "(", ")", ".", "printHelp", "(", "stdErr", ")", ";", "return", "false", ";", "}", "}", "</s>"]
["<s>", "private", "static", "boolean", "isFlag", "(", "String", "[", "]", "[", "]", "flags", ",", "String", "[", "]", "arguments", ")", "{", "for", "(", "String", "[", "]", "cmd", ":", "flags", ")", "{", "if", "(", "Arrays", ".", "equals", "(", "arguments", ",", "cmd", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "private", "ArgumentParser", "buildParser", "(", "JarLocation", "location", ")", "{", "final", "String", "usage", "=", "\"", "<STR_LIT>", "\"", "+", "location", ";", "final", "ArgumentParser", "p", "=", "ArgumentParsers", ".", "newArgumentParser", "(", "usage", ",", "false", ")", ";", "p", ".", "version", "(", "location", ".", "getVersion", "(", ")", ".", "orElse", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "addHelp", "(", "p", ")", ";", "p", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "help", "(", ")", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "p", ";", "}", "</s>"]
["<s>", "private", "void", "addHelp", "(", "ArgumentParser", "p", ")", "{", "p", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "new", "SafeHelpAction", "(", "stdOut", ")", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setDefault", "(", "Arguments", ".", "SUPPRESS", ")", ";", "}", "</s>"]
["<s>", "private", "void", "addCommand", "(", "Command", "command", ")", "{", "commands", ".", "put", "(", "command", ".", "getName", "(", ")", ",", "command", ")", ";", "parser", ".", "addSubparsers", "(", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Subparser", "subparser", "=", "parser", ".", "addSubparsers", "(", ")", ".", "addParser", "(", "command", ".", "getName", "(", ")", ",", "false", ")", ";", "command", ".", "configure", "(", "subparser", ")", ";", "addHelp", "(", "subparser", ")", ";", "subparser", ".", "description", "(", "command", ".", "getDescription", "(", ")", ")", ".", "setDefault", "(", "COMMAND_NAME_ATTR", ",", "command", ".", "getName", "(", ")", ")", ".", "defaultHelp", "(", "true", ")", ";", "}", "</s>"]
["<s>", "public", "PrintWriter", "getStdOut", "(", ")", "{", "return", "stdOut", ";", "}", "</s>"]
["<s>", "public", "PrintWriter", "getStdErr", "(", ")", "{", "return", "stdErr", ";", "}", "</s>"]
["<s>", "SafeHelpAction", "(", "PrintWriter", "out", ")", "{", "this", ".", "out", "=", "out", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "ArgumentParser", "parser", ",", "Argument", "arg", ",", "Map", "<", "String", ",", "Object", ">", "attrs", ",", "String", "flag", ",", "Object", "value", ")", "throws", "ArgumentParserException", "{", "parser", ".", "printHelp", "(", "out", ")", ";", "throw", "new", "HelpScreenException", "(", "parser", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "consumeArgument", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onAttach", "(", "Argument", "arg", ")", "{", "}", "</s>"]
["<s>", "public", "CheckCommand", "(", "Application", "<", "T", ">", "application", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "configurationClass", "=", "application", ".", "getConfigurationClass", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "T", ">", "getConfigurationClass", "(", ")", "{", "return", "configurationClass", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "run", "(", "Bootstrap", "<", "T", ">", "bootstrap", ",", "Namespace", "namespace", ",", "T", "configuration", ")", "throws", "Exception", "{", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onError", "(", "Cli", "cli", ",", "Namespace", "namespace", ",", "Throwable", "e", ")", "{", "cli", ".", "getStdErr", "(", ")", ".", "println", "(", "e", ".", "getMessage", "(", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "EnvironmentCommand", "(", "Application", "<", "T", ">", "application", ",", "String", "name", ",", "String", "description", ")", "{", "super", "(", "name", ",", "description", ")", ";", "this", ".", "application", "=", "application", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "run", "(", "Bootstrap", "<", "T", ">", "bootstrap", ",", "Namespace", "namespace", ",", "T", "configuration", ")", "throws", "Exception", "{", "final", "Environment", "environment", "=", "new", "Environment", "(", "bootstrap", ".", "getApplication", "(", ")", ".", "getName", "(", ")", ",", "bootstrap", ".", "getObjectMapper", "(", ")", ",", "bootstrap", ".", "getValidatorFactory", "(", ")", ".", "getValidator", "(", ")", ",", "bootstrap", ".", "getMetricRegistry", "(", ")", ",", "bootstrap", ".", "getClassLoader", "(", ")", ",", "bootstrap", ".", "getHealthCheckRegistry", "(", ")", ")", ";", "configuration", ".", "getMetricsFactory", "(", ")", ".", "configure", "(", "environment", ".", "lifecycle", "(", ")", ",", "bootstrap", ".", "getMetricRegistry", "(", ")", ")", ";", "configuration", ".", "getServerFactory", "(", ")", ".", "configure", "(", "environment", ")", ";", "bootstrap", ".", "run", "(", "configuration", ",", "environment", ")", ";", "application", ".", "run", "(", "configuration", ",", "environment", ")", ";", "run", "(", "environment", ",", "namespace", ",", "configuration", ")", ";", "}", "</s>"]
["<s>", "protected", "abstract", "void", "run", "(", "Environment", "environment", ",", "Namespace", "namespace", ",", "T", "configuration", ")", "throws", "Exception", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "testBasicJerseyClient", "(", ")", "throws", "Exception", "{", "final", "JerseyClientConfiguration", "configuration", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "JerseyClientConfiguration", ".", "class", ",", "Validators", ".", "newValidator", "(", ")", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "assertThat", "(", "configuration", ".", "getMinThreads", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:8>", ")", ";", "assertThat", "(", "configuration", ".", "getMaxThreads", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "configuration", ".", "getWorkQueueSize", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:16>", ")", ";", "assertThat", "(", "configuration", ".", "isGzipEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "configuration", ".", "isGzipEnabledForRequests", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "configuration", ".", "isChunkedEncodingEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "public", "CustomBuilder", "(", "MetricRegistry", "metricRegistry", ")", "{", "super", "(", "metricRegistry", ")", ";", "customized", "=", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "org", ".", "apache", ".", "http", ".", "impl", ".", "client", ".", "HttpClientBuilder", "customizeBuilder", "(", "org", ".", "apache", ".", "http", ".", "impl", ".", "client", ".", "HttpClientBuilder", "builder", ")", "{", "customized", "=", "true", ";", "return", "builder", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilderTest", "(", ")", "throws", "ClassNotFoundException", "{", "this", ".", "httpClientBuilderClass", "=", "Class", ".", "forName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "httpClientClass", "=", "Class", ".", "forName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "final", "MetricRegistry", "metricRegistry", "=", "new", "MetricRegistry", "(", ")", ";", "configuration", "=", "new", "HttpClientConfiguration", "(", ")", ";", "builder", "=", "new", "HttpClientBuilder", "(", "metricRegistry", ")", ";", "connectionManager", "=", "spy", "(", "new", "InstrumentedHttpClientConnectionManager", "(", "metricRegistry", ",", "registry", ")", ")", ";", "apacheBuilder", "=", "org", ".", "apache", ".", "http", ".", "impl", ".", "client", ".", "HttpClientBuilder", ".", "create", "(", ")", ";", "initMocks", "(", "this", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "validate", "(", ")", "{", "validateMockitoUsage", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsTheMaximumConnectionPoolSize", "(", ")", "throws", "Exception", "{", "configuration", ".", "setMaxConnections", "(", "<NUM_LIT>", ")", ";", "final", "ConfiguredCloseableHttpClient", "client", "=", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "builder", ".", "configureConnectionManager", "(", "connectionManager", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "client", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "isSameAs", "(", "connectionManager", ")", ";", "verify", "(", "connectionManager", ")", ".", "setMaxTotal", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsTheMaximumRoutePoolSize", "(", ")", "throws", "Exception", "{", "configuration", ".", "setMaxConnectionsPerRoute", "(", "<NUM_LIT>", ")", ";", "final", "ConfiguredCloseableHttpClient", "client", "=", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "builder", ".", "configureConnectionManager", "(", "connectionManager", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "client", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "isSameAs", "(", "connectionManager", ")", ";", "verify", "(", "connectionManager", ")", ".", "setDefaultMaxPerRoute", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsTheUserAgent", "(", ")", "throws", "Exception", "{", "configuration", ".", "setUserAgent", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canUseACustomDnsResolver", "(", ")", "throws", "Exception", "{", "final", "DnsResolver", "resolver", "=", "mock", "(", "DnsResolver", ".", "class", ")", ";", "final", "InstrumentedHttpClientConnectionManager", "manager", "=", "builder", ".", "using", "(", "resolver", ")", ".", "createConnectionManager", "(", "registry", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Field", "connectionOperatorField", "=", "FieldUtils", ".", "getField", "(", "PoolingHttpClientConnectionManager", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "final", "Object", "connectOperator", "=", "connectionOperatorField", ".", "get", "(", "manager", ")", ";", "final", "Field", "dnsResolverField", "=", "FieldUtils", ".", "getField", "(", "connectOperator", ".", "getClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "assertThat", "(", "dnsResolverField", ".", "get", "(", "connectOperator", ")", ")", ".", "isEqualTo", "(", "resolver", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesASystemDnsResolverByDefault", "(", ")", "throws", "Exception", "{", "final", "InstrumentedHttpClientConnectionManager", "manager", "=", "builder", ".", "createConnectionManager", "(", "registry", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Field", "connectionOperatorField", "=", "FieldUtils", ".", "getField", "(", "PoolingHttpClientConnectionManager", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "final", "Object", "connectOperator", "=", "connectionOperatorField", ".", "get", "(", "manager", ")", ";", "final", "Field", "dnsResolverField", "=", "FieldUtils", ".", "getField", "(", "connectOperator", ".", "getClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "assertThat", "(", "dnsResolverField", ".", "get", "(", "connectOperator", ")", ")", ".", "isInstanceOf", "(", "SystemDefaultDnsResolver", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canUseACustomHostnameVerifierWhenTlsConfigurationNotSpecified", "(", ")", "throws", "Exception", "{", "final", "HostnameVerifier", "customVerifier", "=", "(", "s", ",", "sslSession", ")", "-", ">", "false", ";", "final", "Registry", "<", "ConnectionSocketFactory", ">", "configuredRegistry", ";", "configuredRegistry", "=", "builder", ".", "using", "(", "customVerifier", ")", ".", "createConfiguredRegistry", "(", ")", ";", "assertThat", "(", "configuredRegistry", ")", ".", "isNotNull", "(", ")", ";", "final", "SSLConnectionSocketFactory", "socketFactory", "=", "(", "SSLConnectionSocketFactory", ")", "configuredRegistry", ".", "lookup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "socketFactory", ")", ".", "isNotNull", "(", ")", ";", "final", "Field", "hostnameVerifierField", "=", "FieldUtils", ".", "getField", "(", "SSLConnectionSocketFactory", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "assertThat", "(", "hostnameVerifierField", ".", "get", "(", "socketFactory", ")", ")", ".", "isSameAs", "(", "customVerifier", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canUseACustomHostnameVerifierWhenTlsConfigurationSpecified", "(", ")", "throws", "Exception", "{", "final", "TlsConfiguration", "tlsConfiguration", "=", "new", "TlsConfiguration", "(", ")", ";", "tlsConfiguration", ".", "setVerifyHostname", "(", "true", ")", ";", "configuration", ".", "setTlsConfiguration", "(", "tlsConfiguration", ")", ";", "final", "HostnameVerifier", "customVerifier", "=", "(", "s", ",", "sslSession", ")", "-", ">", "false", ";", "final", "Registry", "<", "ConnectionSocketFactory", ">", "configuredRegistry", ";", "configuredRegistry", "=", "builder", ".", "using", "(", "configuration", ")", ".", "using", "(", "customVerifier", ")", ".", "createConfiguredRegistry", "(", ")", ";", "assertThat", "(", "configuredRegistry", ")", ".", "isNotNull", "(", ")", ";", "final", "SSLConnectionSocketFactory", "socketFactory", "=", "(", "SSLConnectionSocketFactory", ")", "configuredRegistry", ".", "lookup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "socketFactory", ")", ".", "isNotNull", "(", ")", ";", "final", "Field", "hostnameVerifierField", "=", "FieldUtils", ".", "getField", "(", "SSLConnectionSocketFactory", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "assertThat", "(", "hostnameVerifierField", ".", "get", "(", "socketFactory", ")", ")", ".", "isSameAs", "(", "customVerifier", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canUseASystemHostnameVerifierByDefaultWhenTlsConfigurationNotSpecified", "(", ")", "throws", "Exception", "{", "final", "Registry", "<", "ConnectionSocketFactory", ">", "configuredRegistry", ";", "configuredRegistry", "=", "builder", ".", "createConfiguredRegistry", "(", ")", ";", "assertThat", "(", "configuredRegistry", ")", ".", "isNotNull", "(", ")", ";", "final", "SSLConnectionSocketFactory", "socketFactory", "=", "(", "SSLConnectionSocketFactory", ")", "configuredRegistry", ".", "lookup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "socketFactory", ")", ".", "isNotNull", "(", ")", ";", "final", "Field", "hostnameVerifierField", "=", "FieldUtils", ".", "getField", "(", "SSLConnectionSocketFactory", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "assertThat", "(", "hostnameVerifierField", ".", "get", "(", "socketFactory", ")", ")", ".", "isInstanceOf", "(", "HostnameVerifier", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canUseASystemHostnameVerifierByDefaultWhenTlsConfigurationSpecified", "(", ")", "throws", "Exception", "{", "final", "TlsConfiguration", "tlsConfiguration", "=", "new", "TlsConfiguration", "(", ")", ";", "tlsConfiguration", ".", "setVerifyHostname", "(", "true", ")", ";", "configuration", ".", "setTlsConfiguration", "(", "tlsConfiguration", ")", ";", "final", "Registry", "<", "ConnectionSocketFactory", ">", "configuredRegistry", ";", "configuredRegistry", "=", "builder", ".", "using", "(", "configuration", ")", ".", "createConfiguredRegistry", "(", ")", ";", "assertThat", "(", "configuredRegistry", ")", ".", "isNotNull", "(", ")", ";", "final", "SSLConnectionSocketFactory", "socketFactory", "=", "(", "SSLConnectionSocketFactory", ")", "configuredRegistry", ".", "lookup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "socketFactory", ")", ".", "isNotNull", "(", ")", ";", "final", "Field", "hostnameVerifierField", "=", "FieldUtils", ".", "getField", "(", "SSLConnectionSocketFactory", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "assertThat", "(", "hostnameVerifierField", ".", "get", "(", "socketFactory", ")", ")", ".", "isInstanceOf", "(", "HostnameVerifier", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createClientCanPassCustomVerifierToApacheBuilder", "(", ")", "throws", "Exception", "{", "final", "HostnameVerifier", "customVerifier", "=", "(", "s", ",", "sslSession", ")", "-", ">", "false", ";", "assertThat", "(", "builder", ".", "using", "(", "customVerifier", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "final", "Field", "hostnameVerifierField", "=", "FieldUtils", ".", "getField", "(", "org", ".", "apache", ".", "http", ".", "impl", ".", "client", ".", "HttpClientBuilder", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "assertThat", "(", "hostnameVerifierField", ".", "get", "(", "apacheBuilder", ")", ")", ".", "isSameAs", "(", "customVerifier", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotReuseConnectionsIfKeepAliveIsZero", "(", ")", "throws", "Exception", "{", "configuration", ".", "setKeepAlive", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "isInstanceOf", "(", "NoConnectionReuseStrategy", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "reusesConnectionsIfKeepAliveIsNonZero", "(", ")", "throws", "Exception", "{", "configuration", ".", "setKeepAlive", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "isInstanceOf", "(", "DefaultConnectionReuseStrategy", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesKeepAliveForPersistentConnections", "(", ")", "throws", "Exception", "{", "configuration", ".", "setKeepAlive", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "final", "DefaultConnectionKeepAliveStrategy", "strategy", "=", "(", "DefaultConnectionKeepAliveStrategy", ")", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ";", "final", "HttpContext", "context", "=", "mock", "(", "HttpContext", ".", "class", ")", ";", "final", "HttpResponse", "response", "=", "mock", "(", "HttpResponse", ".", "class", ")", ";", "when", "(", "response", ".", "headerIterator", "(", "HTTP", ".", "CONN_KEEP_ALIVE", ")", ")", ".", "thenReturn", "(", "mock", "(", "HeaderIterator", ".", "class", ")", ")", ";", "assertThat", "(", "strategy", ".", "getKeepAliveDuration", "(", "response", ",", "context", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:1000>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesDefaultForNonPersistentConnections", "(", ")", "throws", "Exception", "{", "configuration", ".", "setKeepAlive", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "final", "Field", "field", "=", "FieldUtils", ".", "getField", "(", "httpClientBuilderClass", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "final", "DefaultConnectionKeepAliveStrategy", "strategy", "=", "(", "DefaultConnectionKeepAliveStrategy", ")", "field", ".", "get", "(", "apacheBuilder", ")", ";", "final", "HttpContext", "context", "=", "mock", "(", "HttpContext", ".", "class", ")", ";", "final", "HttpResponse", "response", "=", "mock", "(", "HttpResponse", ".", "class", ")", ";", "final", "HeaderIterator", "iterator", "=", "new", "BasicListHeaderIterator", "(", "ImmutableList", ".", "of", "(", "new", "BasicHeader", "(", "HttpHeaders", ".", "CONNECTION", ",", "\"", "<STR_LIT>", "\"", ")", ")", ",", "HttpHeaders", ".", "CONNECTION", ")", ";", "when", "(", "response", ".", "headerIterator", "(", "HTTP", ".", "CONN_KEEP_ALIVE", ")", ")", ".", "thenReturn", "(", "iterator", ")", ";", "assertThat", "(", "strategy", ".", "getKeepAliveDuration", "(", "response", ",", "context", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "ignoresCookiesByDefault", "(", ")", "throws", "Exception", "{", "assertThat", "(", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "(", "(", "RequestConfig", ")", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "getCookieSpec", "(", ")", ")", ".", "isEqualTo", "(", "CookieSpecs", ".", "IGNORE_COOKIES", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesBestMatchCookiePolicyIfCookiesAreEnabled", "(", ")", "throws", "Exception", "{", "configuration", ".", "setCookiesEnabled", "(", "true", ")", ";", "assertThat", "(", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "(", "(", "RequestConfig", ")", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "getCookieSpec", "(", ")", ")", ".", "isEqualTo", "(", "CookieSpecs", ".", "DEFAULT", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsTheSocketTimeout", "(", ")", "throws", "Exception", "{", "configuration", ".", "setTimeout", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "(", "(", "RequestConfig", ")", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "getSocketTimeout", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsTheConnectTimeout", "(", ")", "throws", "Exception", "{", "configuration", ".", "setConnectionTimeout", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "(", "(", "RequestConfig", ")", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "getConnectTimeout", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsTheConnectionRequestTimeout", "(", ")", "throws", "Exception", "{", "configuration", ".", "setConnectionRequestTimeout", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "(", "(", "RequestConfig", ")", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "getConnectionRequestTimeout", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "disablesNaglesAlgorithm", "(", ")", "throws", "Exception", "{", "assertThat", "(", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "(", "(", "SocketConfig", ")", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "isTcpNoDelay", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "disablesStaleConnectionCheck", "(", ")", "throws", "Exception", "{", "assertThat", "(", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "(", "(", "RequestConfig", ")", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "isStaleConnectionCheckEnabled", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesTheDefaultRoutePlanner", "(", ")", "throws", "Exception", "{", "final", "CloseableHttpClient", "httpClient", "=", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ".", "getClient", "(", ")", ";", "assertThat", "(", "httpClient", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "spyHttpClientField", "(", "\"", "<STR_LIT>", "\"", ",", "httpClient", ")", ")", ".", "isInstanceOf", "(", "DefaultRoutePlanner", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesACustomRoutePlanner", "(", ")", "throws", "Exception", "{", "final", "HttpRoutePlanner", "routePlanner", "=", "new", "SystemDefaultRoutePlanner", "(", "new", "ProxySelector", "(", ")", "{", "@", "Override", "public", "List", "<", "Proxy", ">", "select", "(", "URI", "uri", ")", "{", "return", "ImmutableList", ".", "of", "(", "new", "Proxy", "(", "Proxy", ".", "Type", ".", "HTTP", ",", "new", "InetSocketAddress", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ")", ")", ";", "}", "@", "Override", "public", "void", "connectFailed", "(", "URI", "uri", ",", "SocketAddress", "sa", ",", "IOException", "ioe", ")", "{", "}", "}", ")", ";", "final", "CloseableHttpClient", "httpClient", "=", "builder", ".", "using", "(", "configuration", ")", ".", "using", "(", "routePlanner", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ".", "getClient", "(", ")", ";", "assertThat", "(", "httpClient", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "isSameAs", "(", "routePlanner", ")", ";", "assertThat", "(", "spyHttpClientField", "(", "\"", "<STR_LIT>", "\"", ",", "httpClient", ")", ")", ".", "isSameAs", "(", "routePlanner", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "List", "<", "Proxy", ">", "select", "(", "URI", "uri", ")", "{", "return", "ImmutableList", ".", "of", "(", "new", "Proxy", "(", "Proxy", ".", "Type", ".", "HTTP", ",", "new", "InetSocketAddress", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "connectFailed", "(", "URI", "uri", ",", "SocketAddress", "sa", ",", "IOException", "ioe", ")", "{", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesACustomHttpRequestRetryHandler", "(", ")", "throws", "Exception", "{", "final", "HttpRequestRetryHandler", "customHandler", "=", "(", "exception", ",", "executionCount", ",", "context", ")", "-", ">", "false", ";", "configuration", ".", "setRetries", "(", "1", ")", ";", "assertThat", "(", "builder", ".", "using", "(", "configuration", ")", ".", "using", "(", "customHandler", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "isSameAs", "(", "customHandler", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesCredentialsProvider", "(", ")", "throws", "Exception", "{", "final", "CredentialsProvider", "credentialsProvider", "=", "new", "CredentialsProvider", "(", ")", "{", "@", "Override", "public", "void", "setCredentials", "(", "AuthScope", "authscope", ",", "Credentials", "credentials", ")", "{", "}", "@", "Override", "@", "Nullable", "public", "Credentials", "getCredentials", "(", "AuthScope", "authscope", ")", "{", "return", "null", ";", "}", "@", "Override", "public", "void", "clear", "(", ")", "{", "}", "}", ";", "assertThat", "(", "builder", ".", "using", "(", "configuration", ")", ".", "using", "(", "credentialsProvider", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "isSameAs", "(", "credentialsProvider", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setCredentials", "(", "AuthScope", "authscope", ",", "Credentials", "credentials", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "Credentials", "getCredentials", "(", "AuthScope", "authscope", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "clear", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesProxy", "(", ")", "throws", "Exception", "{", "HttpClientConfiguration", "config", "=", "new", "HttpClientConfiguration", "(", ")", ";", "ProxyConfiguration", "proxy", "=", "new", "ProxyConfiguration", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ";", "config", ".", "setProxyConfiguration", "(", "proxy", ")", ";", "checkProxy", "(", "config", ",", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesProxyWithoutPort", "(", ")", "throws", "Exception", "{", "HttpClientConfiguration", "config", "=", "new", "HttpClientConfiguration", "(", ")", ";", "ProxyConfiguration", "proxy", "=", "new", "ProxyConfiguration", "(", "\"", "<STR_LIT>", "\"", ")", ";", "config", ".", "setProxyConfiguration", "(", "proxy", ")", ";", "checkProxy", "(", "config", ",", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesProxyWithBasicAuth", "(", ")", "throws", "Exception", "{", "HttpClientConfiguration", "config", "=", "new", "HttpClientConfiguration", "(", ")", ";", "AuthConfiguration", "auth", "=", "new", "AuthConfiguration", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ProxyConfiguration", "proxy", "=", "new", "ProxyConfiguration", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ",", "auth", ")", ";", "config", ".", "setProxyConfiguration", "(", "proxy", ")", ";", "CloseableHttpClient", "httpClient", "=", "checkProxy", "(", "config", ",", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "CredentialsProvider", "credentialsProvider", "=", "(", "CredentialsProvider", ")", "FieldUtils", ".", "getField", "(", "httpClient", ".", "getClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "httpClient", ")", ";", "assertThat", "(", "credentialsProvider", ".", "getCredentials", "(", "new", "AuthScope", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "new", "UsernamePasswordCredentials", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesProxyWithNtlmAuth", "(", ")", "throws", "Exception", "{", "HttpClientConfiguration", "config", "=", "new", "HttpClientConfiguration", "(", ")", ";", "AuthConfiguration", "auth", "=", "new", "AuthConfiguration", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ProxyConfiguration", "proxy", "=", "new", "ProxyConfiguration", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ",", "auth", ")", ";", "config", ".", "setProxyConfiguration", "(", "proxy", ")", ";", "CloseableHttpClient", "httpClient", "=", "checkProxy", "(", "config", ",", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "CredentialsProvider", "credentialsProvider", "=", "(", "CredentialsProvider", ")", "FieldUtils", ".", "getField", "(", "httpClient", ".", "getClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "httpClient", ")", ";", "AuthScope", "authScope", "=", "new", "AuthScope", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Credentials", "credentials", "=", "new", "NTCredentials", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "credentialsProvider", ".", "getCredentials", "(", "authScope", ")", ")", ".", "isEqualTo", "(", "credentials", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesProxyWithNonProxyHosts", "(", ")", "throws", "Exception", "{", "HttpClientConfiguration", "config", "=", "new", "HttpClientConfiguration", "(", ")", ";", "ProxyConfiguration", "proxy", "=", "new", "ProxyConfiguration", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ";", "proxy", ".", "setNonProxyHosts", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "config", ".", "setProxyConfiguration", "(", "proxy", ")", ";", "checkProxy", "(", "config", ",", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "null", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesProxyWithNonProxyHostsAndTargetDoesNotMatch", "(", ")", "throws", "Exception", "{", "HttpClientConfiguration", "config", "=", "new", "HttpClientConfiguration", "(", ")", ";", "ProxyConfiguration", "proxy", "=", "new", "ProxyConfiguration", "(", "\"", "<STR_LIT>", "\"", ")", ";", "proxy", ".", "setNonProxyHosts", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "config", ".", "setProxyConfiguration", "(", "proxy", ")", ";", "checkProxy", "(", "config", ",", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesNoProxy", "(", ")", "throws", "Exception", "{", "checkProxy", "(", "new", "HttpClientConfiguration", "(", ")", ",", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ",", "null", ")", ";", "}", "</s>"]
["<s>", "private", "CloseableHttpClient", "checkProxy", "(", "HttpClientConfiguration", "config", ",", "HttpHost", "target", ",", "@", "Nullable", "HttpHost", "expectedProxy", ")", "throws", "Exception", "{", "CloseableHttpClient", "httpClient", "=", "builder", ".", "using", "(", "config", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "HttpRoutePlanner", "routePlanner", "=", "(", "HttpRoutePlanner", ")", "FieldUtils", ".", "getField", "(", "httpClient", ".", "getClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "httpClient", ")", ";", "HttpRoute", "route", "=", "routePlanner", ".", "determineRoute", "(", "target", ",", "new", "HttpGet", "(", "target", ".", "toURI", "(", ")", ")", ",", "new", "BasicHttpContext", "(", ")", ")", ";", "assertThat", "(", "route", ".", "getProxyHost", "(", ")", ")", ".", "isEqualTo", "(", "expectedProxy", ")", ";", "assertThat", "(", "route", ".", "getTargetHost", "(", ")", ")", ".", "isEqualTo", "(", "target", ")", ";", "assertThat", "(", "route", ".", "getHopCount", "(", ")", ")", ".", "isEqualTo", "(", "expectedProxy", "!", "=", "null", "?", "<NUM_LIT:2>", ":", "1", ")", ";", "return", "httpClient", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setValidateAfterInactivityPeriodFromConfiguration", "(", ")", "throws", "Exception", "{", "int", "validateAfterInactivityPeriod", "=", "<NUM_LIT>", ";", "configuration", ".", "setValidateAfterInactivityPeriod", "(", "Duration", ".", "milliseconds", "(", "validateAfterInactivityPeriod", ")", ")", ";", "final", "ConfiguredCloseableHttpClient", "client", "=", "builder", ".", "using", "(", "configuration", ")", ".", "createClient", "(", "apacheBuilder", ",", "builder", ".", "configureConnectionManager", "(", "connectionManager", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "client", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "isSameAs", "(", "connectionManager", ")", ";", "verify", "(", "connectionManager", ")", ".", "setValidateAfterInactivity", "(", "validateAfterInactivityPeriod", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesACustomHttpClientMetricNameStrategy", "(", ")", "throws", "Exception", "{", "assertThat", "(", "builder", ".", "using", "(", "HttpClientMetricNameStrategies", ".", "HOST_AND_METHOD", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "FieldUtils", ".", "getField", "(", "InstrumentedHttpRequestExecutor", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ")", ".", "isSameAs", "(", "HttpClientMetricNameStrategies", ".", "HOST_AND_METHOD", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesMethodOnlyHttpClientMetricNameStrategyByDefault", "(", ")", "throws", "Exception", "{", "assertThat", "(", "builder", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "FieldUtils", ".", "getField", "(", "InstrumentedHttpRequestExecutor", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ")", ".", "isSameAs", "(", "HttpClientMetricNameStrategies", ".", "METHOD_ONLY", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "exposedConfigIsTheSameAsInternalToTheWrappedHttpClient", "(", ")", "throws", "Exception", "{", "ConfiguredCloseableHttpClient", "client", "=", "builder", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "client", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "spyHttpClientField", "(", "\"", "<STR_LIT>", "\"", ",", "client", ".", "getClient", "(", ")", ")", ")", ".", "isEqualTo", "(", "client", ".", "getDefaultRequestConfig", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "disablesContentCompression", "(", ")", "throws", "Exception", "{", "ConfiguredCloseableHttpClient", "client", "=", "builder", ".", "disableContentCompression", "(", "true", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "client", ")", ".", "isNotNull", "(", ")", ";", "final", "Boolean", "contentCompressionDisabled", "=", "(", "Boolean", ")", "FieldUtils", ".", "getField", "(", "httpClientBuilderClass", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "apacheBuilder", ")", ";", "assertThat", "(", "contentCompressionDisabled", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "managedByEnvironment", "(", ")", "throws", "Exception", "{", "final", "Environment", "environment", "=", "mock", "(", "Environment", ".", "class", ")", ";", "when", "(", "environment", ".", "getName", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "environment", ".", "metrics", "(", ")", ")", ".", "thenReturn", "(", "new", "MetricRegistry", "(", ")", ")", ";", "final", "LifecycleEnvironment", "lifecycle", "=", "mock", "(", "LifecycleEnvironment", ".", "class", ")", ";", "when", "(", "environment", ".", "lifecycle", "(", ")", ")", ".", "thenReturn", "(", "lifecycle", ")", ";", "final", "CloseableHttpClient", "httpClient", "=", "mock", "(", "CloseableHttpClient", ".", "class", ")", ";", "HttpClientBuilder", "httpClientBuilder", "=", "spy", "(", "new", "HttpClientBuilder", "(", "environment", ")", ")", ";", "when", "(", "httpClientBuilder", ".", "buildWithDefaultRequestConfiguration", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "new", "ConfiguredCloseableHttpClient", "(", "httpClient", ",", "RequestConfig", ".", "DEFAULT", ")", ")", ";", "assertThat", "(", "httpClientBuilder", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isSameAs", "(", "httpClient", ")", ";", "final", "ArgumentCaptor", "<", "Managed", ">", "argumentCaptor", "=", "ArgumentCaptor", ".", "forClass", "(", "Managed", ".", "class", ")", ";", "verify", "(", "lifecycle", ")", ".", "manage", "(", "argumentCaptor", ".", "capture", "(", ")", ")", ";", "final", "Managed", "managed", "=", "argumentCaptor", ".", "getValue", "(", ")", ";", "managed", ".", "stop", "(", ")", ";", "verify", "(", "httpClient", ")", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesACustomRedirectStrategy", "(", ")", "throws", "Exception", "{", "RedirectStrategy", "neverFollowRedirectStrategy", "=", "new", "RedirectStrategy", "(", ")", "{", "@", "Override", "public", "boolean", "isRedirected", "(", "HttpRequest", "httpRequest", ",", "HttpResponse", "httpResponse", ",", "HttpContext", "httpContext", ")", "throws", "ProtocolException", "{", "return", "false", ";", "}", "@", "Override", "@", "Nullable", "public", "HttpUriRequest", "getRedirect", "(", "HttpRequest", "httpRequest", ",", "HttpResponse", "httpResponse", ",", "HttpContext", "httpContext", ")", "throws", "ProtocolException", "{", "return", "null", ";", "}", "}", ";", "ConfiguredCloseableHttpClient", "client", "=", "builder", ".", "using", "(", "neverFollowRedirectStrategy", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "client", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "spyHttpClientBuilderField", "(", "\"", "<STR_LIT>", "\"", ",", "apacheBuilder", ")", ")", ".", "isSameAs", "(", "neverFollowRedirectStrategy", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isRedirected", "(", "HttpRequest", "httpRequest", ",", "HttpResponse", "httpResponse", ",", "HttpContext", "httpContext", ")", "throws", "ProtocolException", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "HttpUriRequest", "getRedirect", "(", "HttpRequest", "httpRequest", ",", "HttpResponse", "httpResponse", ",", "HttpContext", "httpContext", ")", "throws", "ProtocolException", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesDefaultHeaders", "(", ")", "throws", "Exception", "{", "final", "ConfiguredCloseableHttpClient", "client", "=", "builder", ".", "using", "(", "ImmutableList", ".", "of", "(", "new", "BasicHeader", "(", "HttpHeaders", ".", "ACCEPT_LANGUAGE", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "client", ")", ".", "isNotNull", "(", ")", ";", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "?", "extends", "Header", ">", "defaultHeaders", "=", "(", "List", "<", "?", "extends", "Header", ">", ")", "FieldUtils", ".", "getField", "(", "httpClientBuilderClass", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "apacheBuilder", ")", ";", "assertThat", "(", "defaultHeaders", ")", ".", "hasSize", "(", "1", ")", ";", "final", "Header", "header", "=", "defaultHeaders", ".", "get", "(", "0", ")", ";", "assertThat", "(", "header", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "HttpHeaders", ".", "ACCEPT_LANGUAGE", ")", ";", "assertThat", "(", "header", ".", "getValue", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesHttpProcessor", "(", ")", "throws", "Exception", "{", "HttpProcessor", "httpProcessor", "=", "mock", "(", "HttpProcessor", ".", "class", ")", ";", "final", "ConfiguredCloseableHttpClient", "client", "=", "builder", ".", "using", "(", "httpProcessor", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "client", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "FieldUtils", ".", "getField", "(", "httpClientBuilderClass", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "apacheBuilder", ")", ")", ".", "isSameAs", "(", "httpProcessor", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesServiceUnavailableRetryStrategy", "(", ")", "throws", "Exception", "{", "ServiceUnavailableRetryStrategy", "serviceUnavailableRetryStrategy", "=", "mock", "(", "ServiceUnavailableRetryStrategy", ".", "class", ")", ";", "final", "ConfiguredCloseableHttpClient", "client", "=", "builder", ".", "using", "(", "serviceUnavailableRetryStrategy", ")", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "client", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "FieldUtils", ".", "getField", "(", "httpClientBuilderClass", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "get", "(", "apacheBuilder", ")", ")", ".", "isSameAs", "(", "serviceUnavailableRetryStrategy", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "allowsCustomBuilderConfiguration", "(", ")", "throws", "Exception", "{", "CustomBuilder", "builder", "=", "new", "CustomBuilder", "(", "new", "MetricRegistry", "(", ")", ")", ";", "assertThat", "(", "builder", ".", "customized", ")", ".", "isFalse", "(", ")", ";", "ConfiguredCloseableHttpClient", "client", "=", "builder", ".", "createClient", "(", "apacheBuilder", ",", "connectionManager", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "builder", ".", "customized", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configureCredentialReturnsNTCredentialsForNTLMConfig", "(", ")", "throws", "Exception", "{", "AuthConfiguration", "ntlmConfig", "=", "new", "AuthConfiguration", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Credentials", "credentials", "=", "builder", ".", "configureCredentials", "(", "ntlmConfig", ")", ";", "assertThat", "(", "credentials", ")", ".", "isInstanceOf", "(", "NTCredentials", ".", "class", ")", ";", "assertThat", "(", "credentials", ".", "getPassword", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "credentials", ".", "getUserPrincipal", "(", ")", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configureCredentialReturnsNTCredentialsForBasicConfig", "(", ")", "throws", "Exception", "{", "AuthConfiguration", "ntlmConfig", "=", "new", "AuthConfiguration", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Credentials", "credentials", "=", "builder", ".", "configureCredentials", "(", "ntlmConfig", ")", ";", "assertThat", "(", "credentials", ")", ".", "isInstanceOf", "(", "UsernamePasswordCredentials", ".", "class", ")", ";", "assertThat", "(", "credentials", ".", "getPassword", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "credentials", ".", "getUserPrincipal", "(", ")", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "Object", "spyHttpClientBuilderField", "(", "final", "String", "fieldName", ",", "final", "Object", "obj", ")", "throws", "Exception", "{", "final", "Field", "field", "=", "FieldUtils", ".", "getField", "(", "httpClientBuilderClass", ",", "fieldName", ",", "true", ")", ";", "return", "field", ".", "get", "(", "obj", ")", ";", "}", "</s>"]
["<s>", "private", "Object", "spyHttpClientField", "(", "final", "String", "fieldName", ",", "final", "Object", "obj", ")", "throws", "Exception", "{", "final", "Field", "field", "=", "FieldUtils", ".", "getField", "(", "httpClientClass", ",", "fieldName", ",", "true", ")", ";", "return", "field", ".", "get", "(", "obj", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "configuredClient", "=", "new", "ConfiguredCloseableHttpClient", "(", "closeableHttpClientMock", ",", "defaultRequestConfigMock", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getDefaultRequestConfig_returns_config_provided_at_construction", "(", ")", "{", "assertThat", "(", "configuredClient", ".", "getDefaultRequestConfig", "(", ")", ")", ".", "isEqualTo", "(", "defaultRequestConfigMock", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getClient_returns_config_provided_at_construction", "(", ")", "{", "assertThat", "(", "configuredClient", ".", "getClient", "(", ")", ")", ".", "isEqualTo", "(", "closeableHttpClientMock", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "environment", ".", "lifecycle", "(", ")", ")", ".", "thenReturn", "(", "lifecycleEnvironment", ")", ";", "when", "(", "environment", ".", "getObjectMapper", "(", ")", ")", ".", "thenReturn", "(", "objectMapper", ")", ";", "when", "(", "environment", ".", "getValidator", "(", ")", ")", ".", "thenReturn", "(", "validator", ")", ";", "builder", ".", "setApacheHttpClientBuilder", "(", "apacheHttpClientBuilder", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "executorService", ".", "shutdown", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsAnExceptionWithoutAnEnvironmentOrAThreadPoolAndObjectMapper", "(", ")", "throws", "Exception", "{", "try", "{", "builder", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "failBecauseExceptionWasNotThrown", "(", "IllegalStateException", ".", "class", ")", ";", "}", "catch", "(", "IllegalStateException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsAnExceptionWithoutAnEnvironmentAndOnlyObjectMapper", "(", ")", "throws", "Exception", "{", "try", "{", "builder", ".", "using", "(", "objectMapper", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "failBecauseExceptionWasNotThrown", "(", "IllegalStateException", ".", "class", ")", ";", "}", "catch", "(", "IllegalStateException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsAnExceptionWithoutAnEnvironmentAndOnlyAThreadPool", "(", ")", "throws", "Exception", "{", "try", "{", "builder", ".", "using", "(", "executorService", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "failBecauseExceptionWasNotThrown", "(", "IllegalStateException", ".", "class", ")", ";", "}", "catch", "(", "IllegalStateException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "includesJerseyProperties", "(", ")", "throws", "Exception", "{", "final", "Client", "client", "=", "builder", ".", "withProperty", "(", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "using", "(", "executorService", ",", "objectMapper", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "client", ".", "getConfiguration", "(", ")", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Boolean", ".", "TRUE", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "includesJerseyProviderSingletons", "(", ")", "throws", "Exception", "{", "final", "FakeMessageBodyReader", "provider", "=", "new", "FakeMessageBodyReader", "(", ")", ";", "final", "Client", "client", "=", "builder", ".", "withProvider", "(", "provider", ")", ".", "using", "(", "executorService", ",", "objectMapper", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "client", ".", "getConfiguration", "(", ")", ".", "isRegistered", "(", "provider", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "includesJerseyProviderClasses", "(", ")", "throws", "Exception", "{", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "final", "Client", "client", "=", "builder", ".", "withProvider", "(", "FakeMessageBodyReader", ".", "class", ")", ".", "using", "(", "executorService", ",", "objectMapper", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "client", ".", "getConfiguration", "(", ")", ".", "isRegistered", "(", "FakeMessageBodyReader", ".", "class", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createsAnRxEnabledClient", "(", ")", "throws", "Exception", "{", "final", "RxClient", "<", "RxCompletionStageInvoker", ">", "client", "=", "builder", ".", "using", "(", "executorService", ",", "objectMapper", ")", ".", "buildRx", "(", "\"", "<STR_LIT>", "\"", ",", "RxCompletionStageInvoker", ".", "class", ")", ";", "for", "(", "Object", "o", ":", "client", ".", "getConfiguration", "(", ")", ".", "getInstances", "(", ")", ")", "{", "if", "(", "o", "instanceof", "DropwizardExecutorProvider", ")", "{", "final", "DropwizardExecutorProvider", "provider", "=", "(", "DropwizardExecutorProvider", ")", "o", ";", "assertThat", "(", "provider", ".", "getExecutorService", "(", ")", ")", ".", "isSameAs", "(", "executorService", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesTheGivenThreadPool", "(", ")", "throws", "Exception", "{", "final", "Client", "client", "=", "builder", ".", "using", "(", "executorService", ",", "objectMapper", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "Object", "o", ":", "client", ".", "getConfiguration", "(", ")", ".", "getInstances", "(", ")", ")", "{", "if", "(", "o", "instanceof", "DropwizardExecutorProvider", ")", "{", "final", "DropwizardExecutorProvider", "provider", "=", "(", "DropwizardExecutorProvider", ")", "o", ";", "assertThat", "(", "provider", ".", "getExecutorService", "(", ")", ")", ".", "isSameAs", "(", "executorService", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesTheGivenThreadPoolAndEnvironmentsObjectMapper", "(", ")", "throws", "Exception", "{", "final", "Client", "client", "=", "builder", ".", "using", "(", "environment", ")", ".", "using", "(", "executorService", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "Object", "o", ":", "client", ".", "getConfiguration", "(", ")", ".", "getInstances", "(", ")", ")", "{", "if", "(", "o", "instanceof", "DropwizardExecutorProvider", ")", "{", "final", "DropwizardExecutorProvider", "provider", "=", "(", "DropwizardExecutorProvider", ")", "o", ";", "assertThat", "(", "provider", ".", "getExecutorService", "(", ")", ")", ".", "isSameAs", "(", "executorService", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addBidirectionalGzipSupportIfEnabled", "(", ")", "throws", "Exception", "{", "final", "JerseyClientConfiguration", "configuration", "=", "new", "JerseyClientConfiguration", "(", ")", ";", "configuration", ".", "setGzipEnabled", "(", "true", ")", ";", "final", "Client", "client", "=", "builder", ".", "using", "(", "configuration", ")", ".", "using", "(", "executorService", ",", "objectMapper", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "Iterables", ".", "filter", "(", "client", ".", "getConfiguration", "(", ")", ".", "getInstances", "(", ")", ",", "GZipDecoder", ".", "class", ")", ".", "iterator", "(", ")", ".", "hasNext", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "Iterables", ".", "filter", "(", "client", ".", "getConfiguration", "(", ")", ".", "getInstances", "(", ")", ",", "ConfiguredGZipEncoder", ".", "class", ")", ".", "iterator", "(", ")", ".", "hasNext", "(", ")", ")", ".", "isTrue", "(", ")", ";", "verify", "(", "apacheHttpClientBuilder", ",", "never", "(", ")", ")", ".", "disableContentCompression", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "disablesGzipSupportIfDisabled", "(", ")", "throws", "Exception", "{", "final", "JerseyClientConfiguration", "configuration", "=", "new", "JerseyClientConfiguration", "(", ")", ";", "configuration", ".", "setGzipEnabled", "(", "false", ")", ";", "final", "Client", "client", "=", "builder", ".", "using", "(", "configuration", ")", ".", "using", "(", "executorService", ",", "objectMapper", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "Iterables", ".", "filter", "(", "client", ".", "getConfiguration", "(", ")", ".", "getInstances", "(", ")", ",", "GZipDecoder", ".", "class", ")", ".", "iterator", "(", ")", ".", "hasNext", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "Iterables", ".", "filter", "(", "client", ".", "getConfiguration", "(", ")", ".", "getInstances", "(", ")", ",", "ConfiguredGZipEncoder", ".", "class", ")", ".", "iterator", "(", ")", ".", "hasNext", "(", ")", ")", ".", "isFalse", "(", ")", ";", "verify", "(", "apacheHttpClientBuilder", ")", ".", "disableContentCompression", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "public", "void", "usesAnExecutorServiceFromTheEnvironment", "(", ")", "throws", "Exception", "{", "final", "JerseyClientConfiguration", "configuration", "=", "new", "JerseyClientConfiguration", "(", ")", ";", "configuration", ".", "setMinThreads", "(", "<NUM_LIT:7>", ")", ";", "configuration", ".", "setMaxThreads", "(", "<NUM_LIT>", ")", ";", "configuration", ".", "setWorkQueueSize", "(", "<NUM_LIT:16>", ")", ";", "final", "ExecutorServiceBuilder", "executorServiceBuilderMock", "=", "mock", "(", "ExecutorServiceBuilder", ".", "class", ")", ";", "when", "(", "lifecycleEnvironment", ".", "executorService", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "executorServiceBuilderMock", ")", ";", "when", "(", "executorServiceBuilderMock", ".", "minThreads", "(", "<NUM_LIT:7>", ")", ")", ".", "thenReturn", "(", "executorServiceBuilderMock", ")", ";", "when", "(", "executorServiceBuilderMock", ".", "maxThreads", "(", "<NUM_LIT>", ")", ")", ".", "thenReturn", "(", "executorServiceBuilderMock", ")", ";", "final", "ArgumentCaptor", "<", "ArrayBlockingQueue", ">", "arrayBlockingQueueCaptor", "=", "ArgumentCaptor", ".", "forClass", "(", "ArrayBlockingQueue", ".", "class", ")", ";", "when", "(", "executorServiceBuilderMock", ".", "workQueue", "(", "arrayBlockingQueueCaptor", ".", "capture", "(", ")", ")", ")", ".", "thenReturn", "(", "executorServiceBuilderMock", ")", ";", "when", "(", "executorServiceBuilderMock", ".", "build", "(", ")", ")", ".", "thenReturn", "(", "mock", "(", "ExecutorService", ".", "class", ")", ")", ";", "builder", ".", "using", "(", "configuration", ")", ".", "using", "(", "environment", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "arrayBlockingQueueCaptor", ".", "getValue", "(", ")", ".", "remainingCapacity", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:16>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesACustomHttpClientMetricNameStrategy", "(", ")", "{", "final", "HttpClientMetricNameStrategy", "customStrategy", "=", "HttpClientMetricNameStrategies", ".", "HOST_AND_METHOD", ";", "builder", ".", "using", "(", "customStrategy", ")", ";", "verify", "(", "apacheHttpClientBuilder", ")", ".", "using", "(", "customStrategy", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesACustomHttpRequestRetryHandler", "(", ")", "{", "final", "DefaultHttpRequestRetryHandler", "customRetryHandler", "=", "new", "DefaultHttpRequestRetryHandler", "(", "<NUM_LIT:2>", ",", "true", ")", ";", "builder", ".", "using", "(", "customRetryHandler", ")", ";", "verify", "(", "apacheHttpClientBuilder", ")", ".", "using", "(", "customRetryHandler", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesACustomDnsResolver", "(", ")", "{", "final", "DnsResolver", "customDnsResolver", "=", "new", "SystemDefaultDnsResolver", "(", ")", ";", "builder", ".", "using", "(", "customDnsResolver", ")", ";", "verify", "(", "apacheHttpClientBuilder", ")", ".", "using", "(", "customDnsResolver", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesACustomHostnameVerifier", "(", ")", "{", "final", "HostnameVerifier", "customHostnameVerifier", "=", "new", "NoopHostnameVerifier", "(", ")", ";", "builder", ".", "using", "(", "customHostnameVerifier", ")", ";", "verify", "(", "apacheHttpClientBuilder", ")", ".", "using", "(", "customHostnameVerifier", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesACustomServiceUnavailableRetryStrategy", "(", ")", "{", "final", "ServiceUnavailableRetryStrategy", "customServiceUnavailableRetryStrategy", "=", "mock", "(", "ServiceUnavailableRetryStrategy", ".", "class", ")", ";", "builder", ".", "using", "(", "customServiceUnavailableRetryStrategy", ")", ";", "verify", "(", "apacheHttpClientBuilder", ")", ".", "using", "(", "customServiceUnavailableRetryStrategy", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesACustomConnectionFactoryRegistry", "(", ")", "throws", "Exception", "{", "final", "SSLContext", "ctx", "=", "SSLContext", ".", "getInstance", "(", "SSLConnectionSocketFactory", ".", "TLS", ")", ";", "ctx", ".", "init", "(", "null", ",", "new", "TrustManager", "[", "]", "{", "new", "X509TrustManager", "(", ")", "{", "@", "Override", "public", "void", "checkClientTrusted", "(", "X509Certificate", "[", "]", "xcs", ",", "String", "string", ")", "throws", "CertificateException", "{", "}", "@", "Override", "public", "void", "checkServerTrusted", "(", "X509Certificate", "[", "]", "xcs", ",", "String", "string", ")", "throws", "CertificateException", "{", "}", "@", "Override", "@", "Nullable", "public", "X509Certificate", "[", "]", "getAcceptedIssuers", "(", ")", "{", "return", "null", ";", "}", "}", "}", ",", "null", ")", ";", "final", "Registry", "<", "ConnectionSocketFactory", ">", "customRegistry", "=", "RegistryBuilder", ".", "<", "ConnectionSocketFactory", ">", "create", "(", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "PlainConnectionSocketFactory", ".", "getSocketFactory", "(", ")", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "new", "SSLConnectionSocketFactory", "(", "ctx", ",", "new", "NoopHostnameVerifier", "(", ")", ")", ")", ".", "build", "(", ")", ";", "builder", ".", "using", "(", "customRegistry", ")", ";", "verify", "(", "apacheHttpClientBuilder", ")", ".", "using", "(", "customRegistry", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "checkClientTrusted", "(", "X509Certificate", "[", "]", "xcs", ",", "String", "string", ")", "throws", "CertificateException", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "checkServerTrusted", "(", "X509Certificate", "[", "]", "xcs", ",", "String", "string", ")", "throws", "CertificateException", "{", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "X509Certificate", "[", "]", "getAcceptedIssuers", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesACustomEnvironmentName", "(", ")", "{", "final", "String", "userAgent", "=", "\"", "<STR_LIT>", "\"", ";", "builder", ".", "name", "(", "userAgent", ")", ";", "verify", "(", "apacheHttpClientBuilder", ")", ".", "name", "(", "userAgent", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesACustomHttpRoutePlanner", "(", ")", "{", "final", "HttpRoutePlanner", "customHttpRoutePlanner", "=", "new", "SystemDefaultRoutePlanner", "(", "new", "ProxySelector", "(", ")", "{", "@", "Override", "public", "List", "<", "Proxy", ">", "select", "(", "URI", "uri", ")", "{", "return", "ImmutableList", ".", "of", "(", "new", "Proxy", "(", "Proxy", ".", "Type", ".", "HTTP", ",", "new", "InetSocketAddress", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ")", ")", ";", "}", "@", "Override", "public", "void", "connectFailed", "(", "URI", "uri", ",", "SocketAddress", "sa", ",", "IOException", "ioe", ")", "{", "}", "}", ")", ";", "builder", ".", "using", "(", "customHttpRoutePlanner", ")", ";", "verify", "(", "apacheHttpClientBuilder", ")", ".", "using", "(", "customHttpRoutePlanner", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "List", "<", "Proxy", ">", "select", "(", "URI", "uri", ")", "{", "return", "ImmutableList", ".", "of", "(", "new", "Proxy", "(", "Proxy", ".", "Type", ".", "HTTP", ",", "new", "InetSocketAddress", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "connectFailed", "(", "URI", "uri", ",", "SocketAddress", "sa", ",", "IOException", "ioe", ")", "{", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesACustomCredentialsProvider", "(", ")", "{", "CredentialsProvider", "customCredentialsProvider", "=", "new", "SystemDefaultCredentialsProvider", "(", ")", ";", "builder", ".", "using", "(", "customCredentialsProvider", ")", ";", "verify", "(", "apacheHttpClientBuilder", ")", ".", "using", "(", "customCredentialsProvider", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "apacheConnectorCanOverridden", "(", ")", "{", "assertThat", "(", "new", "JerseyClientBuilder", "(", "new", "MetricRegistry", "(", ")", ")", "{", "@", "Override", "protected", "DropwizardApacheConnector", "createDropwizardApacheConnector", "(", "ConfiguredCloseableHttpClient", "configuredClient", ")", "{", "return", "new", "DropwizardApacheConnector", "(", "configuredClient", ".", "getClient", "(", ")", ",", "configuredClient", ".", "getDefaultRequestConfig", "(", ")", ",", "true", ")", "{", "@", "Override", "protected", "HttpEntity", "getHttpEntity", "(", "ClientRequest", "jerseyRequest", ")", "{", "return", "new", "GzipCompressingEntity", "(", "new", "ByteArrayEntity", "(", "(", "byte", "[", "]", ")", "jerseyRequest", ".", "getEntity", "(", ")", ")", ")", ";", "}", "}", ";", "}", "}", ".", "using", "(", "environment", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DropwizardApacheConnector", "createDropwizardApacheConnector", "(", "ConfiguredCloseableHttpClient", "configuredClient", ")", "{", "return", "new", "DropwizardApacheConnector", "(", "configuredClient", ".", "getClient", "(", ")", ",", "configuredClient", ".", "getDefaultRequestConfig", "(", ")", ",", "true", ")", "{", "@", "Override", "protected", "HttpEntity", "getHttpEntity", "(", "ClientRequest", "jerseyRequest", ")", "{", "return", "new", "GzipCompressingEntity", "(", "new", "ByteArrayEntity", "(", "(", "byte", "[", "]", ")", "jerseyRequest", ".", "getEntity", "(", ")", ")", ")", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "HttpEntity", "getHttpEntity", "(", "ClientRequest", "jerseyRequest", ")", "{", "return", "new", "GzipCompressingEntity", "(", "new", "ByteArrayEntity", "(", "(", "byte", "[", "]", ")", "jerseyRequest", ".", "getEntity", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isReadable", "(", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "JerseyClientBuilderTest", ".", "class", ".", "isAssignableFrom", "(", "type", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "JerseyClientBuilderTest", "readFrom", "(", "Class", "<", "JerseyClientBuilderTest", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ",", "MultivaluedMap", "<", "String", ",", "String", ">", "httpHeaders", ",", "InputStream", "entityStream", ")", "throws", "IOException", ",", "WebApplicationException", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "throws", "Exception", "{", "httpServer", "=", "HttpServer", ".", "create", "(", "new", "InetSocketAddress", "(", "0", ")", ",", "0", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "httpServer", ".", "stop", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testChunkedGzipPost", "(", ")", "throws", "Exception", "{", "httpServer", ".", "createContext", "(", "\"", "<STR_LIT>", "\"", ",", "httpExchange", "-", ">", "{", "try", "{", "Headers", "requestHeaders", "=", "httpExchange", ".", "getRequestHeaders", "(", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "TRANSFER_ENCODING", ")", ")", ".", "containsExactly", "(", "CHUNKED", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "CONTENT_LENGTH", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ")", ")", ".", "containsExactly", "(", "GZIP", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "ACCEPT_ENCODING", ")", ")", ".", "containsExactly", "(", "GZIP_DEFLATE", ")", ";", "checkBody", "(", "httpExchange", ",", "true", ")", ";", "postResponse", "(", "httpExchange", ")", ";", "}", "finally", "{", "httpExchange", ".", "close", "(", ")", ";", "}", "}", ")", ";", "httpServer", ".", "start", "(", ")", ";", "postRequest", "(", "new", "JerseyClientConfiguration", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testBufferedGzipPost", "(", ")", "{", "httpServer", ".", "createContext", "(", "\"", "<STR_LIT>", "\"", ",", "httpExchange", "-", ">", "{", "try", "{", "Headers", "requestHeaders", "=", "httpExchange", ".", "getRequestHeaders", "(", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "CONTENT_LENGTH", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "TRANSFER_ENCODING", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ")", ")", ".", "containsExactly", "(", "GZIP", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "ACCEPT_ENCODING", ")", ")", ".", "containsExactly", "(", "GZIP_DEFLATE", ")", ";", "checkBody", "(", "httpExchange", ",", "true", ")", ";", "postResponse", "(", "httpExchange", ")", ";", "}", "finally", "{", "httpExchange", ".", "close", "(", ")", ";", "}", "}", ")", ";", "httpServer", ".", "start", "(", ")", ";", "JerseyClientConfiguration", "configuration", "=", "new", "JerseyClientConfiguration", "(", ")", ";", "configuration", ".", "setChunkedEncodingEnabled", "(", "false", ")", ";", "postRequest", "(", "configuration", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testChunkedPost", "(", ")", "throws", "Exception", "{", "httpServer", ".", "createContext", "(", "\"", "<STR_LIT>", "\"", ",", "httpExchange", "-", ">", "{", "try", "{", "Headers", "requestHeaders", "=", "httpExchange", ".", "getRequestHeaders", "(", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "TRANSFER_ENCODING", ")", ")", ".", "containsExactly", "(", "CHUNKED", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "CONTENT_LENGTH", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "ACCEPT_ENCODING", ")", ")", ".", "containsExactly", "(", "GZIP_DEFLATE", ")", ";", "checkBody", "(", "httpExchange", ",", "false", ")", ";", "postResponse", "(", "httpExchange", ")", ";", "}", "finally", "{", "httpExchange", ".", "close", "(", ")", ";", "}", "}", ")", ";", "httpServer", ".", "start", "(", ")", ";", "JerseyClientConfiguration", "configuration", "=", "new", "JerseyClientConfiguration", "(", ")", ";", "configuration", ".", "setGzipEnabledForRequests", "(", "false", ")", ";", "postRequest", "(", "configuration", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testChunkedPostWithoutGzip", "(", ")", "throws", "Exception", "{", "httpServer", ".", "createContext", "(", "\"", "<STR_LIT>", "\"", ",", "httpExchange", "-", ">", "{", "try", "{", "Headers", "requestHeaders", "=", "httpExchange", ".", "getRequestHeaders", "(", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "TRANSFER_ENCODING", ")", ")", ".", "containsExactly", "(", "CHUNKED", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "CONTENT_LENGTH", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "ACCEPT_ENCODING", ")", ")", ".", "isNull", "(", ")", ";", "checkBody", "(", "httpExchange", ",", "false", ")", ";", "httpExchange", ".", "getResponseHeaders", "(", ")", ".", "add", "(", "HttpHeaders", ".", "CONTENT_TYPE", ",", "APPLICATION_JSON", ")", ";", "httpExchange", ".", "sendResponseHeaders", "(", "<NUM_LIT>", ",", "0", ")", ";", "httpExchange", ".", "getResponseBody", "(", ")", ".", "write", "(", "JSON_TOKEN", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "httpExchange", ".", "getResponseBody", "(", ")", ".", "close", "(", ")", ";", "}", "finally", "{", "httpExchange", ".", "close", "(", ")", ";", "}", "}", ")", ";", "httpServer", ".", "start", "(", ")", ";", "JerseyClientConfiguration", "configuration", "=", "new", "JerseyClientConfiguration", "(", ")", ";", "configuration", ".", "setGzipEnabled", "(", "false", ")", ";", "configuration", ".", "setGzipEnabledForRequests", "(", "false", ")", ";", "postRequest", "(", "configuration", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRetryHandler", "(", ")", "throws", "Exception", "{", "httpServer", ".", "createContext", "(", "\"", "<STR_LIT>", "\"", ",", "httpExchange", "-", ">", "{", "try", "{", "Headers", "requestHeaders", "=", "httpExchange", ".", "getRequestHeaders", "(", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "TRANSFER_ENCODING", ")", ")", ".", "containsExactly", "(", "CHUNKED", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "CONTENT_LENGTH", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "requestHeaders", ".", "get", "(", "HttpHeaders", ".", "ACCEPT_ENCODING", ")", ")", ".", "isNull", "(", ")", ";", "checkBody", "(", "httpExchange", ",", "false", ")", ";", "httpExchange", ".", "getResponseHeaders", "(", ")", ".", "add", "(", "HttpHeaders", ".", "CONTENT_TYPE", ",", "APPLICATION_JSON", ")", ";", "httpExchange", ".", "sendResponseHeaders", "(", "<NUM_LIT>", ",", "0", ")", ";", "httpExchange", ".", "getResponseBody", "(", ")", ".", "write", "(", "JSON_TOKEN", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "httpExchange", ".", "getResponseBody", "(", ")", ".", "close", "(", ")", ";", "}", "finally", "{", "httpExchange", ".", "close", "(", ")", ";", "}", "}", ")", ";", "httpServer", ".", "start", "(", ")", ";", "JerseyClientConfiguration", "configuration", "=", "new", "JerseyClientConfiguration", "(", ")", ";", "configuration", ".", "setGzipEnabled", "(", "false", ")", ";", "configuration", ".", "setGzipEnabledForRequests", "(", "false", ")", ";", "postRequest", "(", "configuration", ")", ";", "}", "</s>"]
["<s>", "private", "void", "postRequest", "(", "JerseyClientConfiguration", "configuration", ")", "{", "ExecutorService", "executor", "=", "Executors", ".", "newSingleThreadExecutor", "(", ")", ";", "Client", "jersey", "=", "new", "JerseyClientBuilder", "(", "new", "MetricRegistry", "(", ")", ")", ".", "using", "(", "executor", ",", "JSON_MAPPER", ")", ".", "using", "(", "configuration", ")", ".", "using", "(", "new", "HttpRequestRetryHandler", "(", ")", "{", "@", "Override", "public", "boolean", "retryRequest", "(", "IOException", "e", ",", "int", "i", ",", "HttpContext", "httpContext", ")", "{", "return", "false", ";", "}", "}", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Response", "response", "=", "jersey", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "httpServer", ".", "getAddress", "(", ")", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "buildPost", "(", "Entity", ".", "entity", "(", "new", "Person", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "APPLICATION_JSON", ")", ")", ".", "invoke", "(", ")", ";", "assertThat", "(", "response", ".", "getHeaderString", "(", "HttpHeaders", ".", "CONTENT_TYPE", ")", ")", ".", "isEqualTo", "(", "APPLICATION_JSON", ")", ";", "assertThat", "(", "response", ".", "getHeaderString", "(", "TRANSFER_ENCODING", ")", ")", ".", "isEqualTo", "(", "CHUNKED", ")", ";", "Credentials", "credentials", "=", "response", ".", "readEntity", "(", "Credentials", ".", "class", ")", ";", "assertThat", "(", "credentials", ".", "id", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "credentials", ".", "token", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "executor", ".", "shutdown", "(", ")", ";", "jersey", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "retryRequest", "(", "IOException", "e", ",", "int", "i", ",", "HttpContext", "httpContext", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "private", "void", "postResponse", "(", "HttpExchange", "httpExchange", ")", "throws", "IOException", "{", "httpExchange", ".", "getResponseHeaders", "(", ")", ".", "add", "(", "HttpHeaders", ".", "CONTENT_TYPE", ",", "APPLICATION_JSON", ")", ";", "httpExchange", ".", "getResponseHeaders", "(", ")", ".", "add", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ",", "GZIP", ")", ";", "httpExchange", ".", "sendResponseHeaders", "(", "<NUM_LIT>", ",", "0", ")", ";", "GZIPOutputStream", "gzipStream", "=", "new", "GZIPOutputStream", "(", "httpExchange", ".", "getResponseBody", "(", ")", ")", ";", "gzipStream", ".", "write", "(", "JSON_TOKEN", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "gzipStream", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkBody", "(", "HttpExchange", "httpExchange", ",", "boolean", "gzip", ")", "throws", "IOException", "{", "assertThat", "(", "httpExchange", ".", "getRequestHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "CONTENT_TYPE", ")", ")", ".", "containsExactly", "(", "APPLICATION_JSON", ")", ";", "InputStream", "requestBody", "=", "gzip", "?", "new", "GZIPInputStream", "(", "httpExchange", ".", "getRequestBody", "(", ")", ")", ":", "httpExchange", ".", "getRequestBody", "(", ")", ";", "String", "body", "=", "CharStreams", ".", "toString", "(", "new", "InputStreamReader", "(", "requestBody", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "assertThat", "(", "JSON_MAPPER", ".", "readTree", "(", "body", ")", ")", ".", "isEqualTo", "(", "JSON_MAPPER", ".", "createObjectNode", "(", ")", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGet", "(", ")", "{", "httpServer", ".", "createContext", "(", "\"", "<STR_LIT>", "\"", ",", "httpExchange", "-", ">", "{", "try", "{", "assertThat", "(", "httpExchange", ".", "getRequestURI", "(", ")", ".", "getQuery", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "httpExchange", ".", "getResponseHeaders", "(", ")", ".", "add", "(", "HttpHeaders", ".", "CONTENT_TYPE", ",", "APPLICATION_JSON", ")", ";", "httpExchange", ".", "sendResponseHeaders", "(", "<NUM_LIT>", ",", "0", ")", ";", "httpExchange", ".", "getResponseBody", "(", ")", ".", "write", "(", "JSON_MAPPER", ".", "createObjectNode", "(", ")", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "finally", "{", "httpExchange", ".", "close", "(", ")", ";", "}", "}", ")", ";", "httpServer", ".", "start", "(", ")", ";", "ExecutorService", "executor", "=", "Executors", ".", "newSingleThreadExecutor", "(", ")", ";", "Client", "jersey", "=", "new", "JerseyClientBuilder", "(", "new", "MetricRegistry", "(", ")", ")", ".", "using", "(", "executor", ",", "JSON_MAPPER", ")", ".", "using", "(", "new", "JerseyClientConfiguration", "(", ")", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Response", "response", "=", "jersey", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "httpServer", ".", "getAddress", "(", ")", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "buildGet", "(", ")", ".", "invoke", "(", ")", ";", "assertThat", "(", "response", ".", "getHeaderString", "(", "HttpHeaders", ".", "CONTENT_TYPE", ")", ")", ".", "isEqualTo", "(", "APPLICATION_JSON", ")", ";", "assertThat", "(", "response", ".", "getHeaderString", "(", "TRANSFER_ENCODING", ")", ")", ".", "isEqualTo", "(", "CHUNKED", ")", ";", "Person", "person", "=", "response", ".", "readEntity", "(", "Person", ".", "class", ")", ";", "assertThat", "(", "person", ".", "email", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "person", ".", "name", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "executor", ".", "shutdown", "(", ")", ";", "jersey", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSetUserAgent", "(", ")", "{", "httpServer", ".", "createContext", "(", "\"", "<STR_LIT>", "\"", ",", "httpExchange", "-", ">", "{", "try", "{", "assertThat", "(", "httpExchange", ".", "getRequestHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "USER_AGENT", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "httpExchange", ".", "sendResponseHeaders", "(", "<NUM_LIT>", ",", "0", ")", ";", "httpExchange", ".", "getResponseBody", "(", ")", ".", "write", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "finally", "{", "httpExchange", ".", "close", "(", ")", ";", "}", "}", ")", ";", "httpServer", ".", "start", "(", ")", ";", "JerseyClientConfiguration", "configuration", "=", "new", "JerseyClientConfiguration", "(", ")", ";", "configuration", ".", "setUserAgent", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "ExecutorService", "executor", "=", "Executors", ".", "newSingleThreadExecutor", "(", ")", ";", "Client", "jersey", "=", "new", "JerseyClientBuilder", "(", "new", "MetricRegistry", "(", ")", ")", ".", "using", "(", "executor", ",", "JSON_MAPPER", ")", ".", "using", "(", "configuration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "text", "=", "jersey", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "httpServer", ".", "getAddress", "(", ")", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "buildGet", "(", ")", ".", "invoke", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ";", "assertThat", "(", "text", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "executor", ".", "shutdown", "(", ")", ";", "jersey", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFilterOnAWebTarget", "(", ")", "{", "httpServer", ".", "createContext", "(", "\"", "<STR_LIT>", "\"", ",", "httpExchange", "-", ">", "{", "try", "{", "httpExchange", ".", "getResponseHeaders", "(", ")", ".", "add", "(", "HttpHeaders", ".", "CONTENT_TYPE", ",", "TEXT_PLAIN", ")", ";", "httpExchange", ".", "sendResponseHeaders", "(", "<NUM_LIT>", ",", "0", ")", ";", "httpExchange", ".", "getResponseBody", "(", ")", ".", "write", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "finally", "{", "httpExchange", ".", "close", "(", ")", ";", "}", "}", ")", ";", "httpServer", ".", "start", "(", ")", ";", "ExecutorService", "executor", "=", "Executors", ".", "newSingleThreadExecutor", "(", ")", ";", "Client", "jersey", "=", "new", "JerseyClientBuilder", "(", "new", "MetricRegistry", "(", ")", ")", ".", "using", "(", "executor", ",", "JSON_MAPPER", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "uri", "=", "\"", "<STR_LIT>", "\"", "+", "httpServer", ".", "getAddress", "(", ")", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ";", "WebTarget", "target", "=", "jersey", ".", "target", "(", "uri", ")", ";", "target", ".", "register", "(", "new", "LoggingFeature", "(", ")", ")", ";", "String", "firstResponse", "=", "target", ".", "request", "(", ")", ".", "buildGet", "(", ")", ".", "invoke", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ";", "assertThat", "(", "firstResponse", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "secondResponse", "=", "jersey", ".", "target", "(", "uri", ")", ".", "request", "(", ")", ".", "buildGet", "(", ")", ".", "invoke", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ";", "assertThat", "(", "secondResponse", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "executor", ".", "shutdown", "(", ")", ";", "jersey", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAsyncWithCustomized", "(", ")", "throws", "Exception", "{", "httpServer", ".", "createContext", "(", "\"", "<STR_LIT>", "\"", ",", "httpExchange", "-", ">", "{", "try", "{", "httpExchange", ".", "getResponseHeaders", "(", ")", ".", "add", "(", "HttpHeaders", ".", "CONTENT_TYPE", ",", "TEXT_PLAIN", ")", ";", "byte", "[", "]", "body", "=", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ";", "httpExchange", ".", "sendResponseHeaders", "(", "<NUM_LIT>", ",", "body", ".", "length", ")", ";", "httpExchange", ".", "getResponseBody", "(", ")", ".", "write", "(", "body", ")", ";", "}", "finally", "{", "httpExchange", ".", "close", "(", ")", ";", "}", "}", ")", ";", "httpServer", ".", "start", "(", ")", ";", "ExecutorService", "executor", "=", "Executors", ".", "newSingleThreadExecutor", "(", ")", ";", "Client", "jersey", "=", "new", "JerseyClientBuilder", "(", "new", "MetricRegistry", "(", ")", ")", ".", "using", "(", "executor", ",", "JSON_MAPPER", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "uri", "=", "\"", "<STR_LIT>", "\"", "+", "httpServer", ".", "getAddress", "(", ")", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ";", "CountDownLatch", "countDownLatch", "=", "new", "CountDownLatch", "(", "<NUM_LIT>", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT>", ";", "i", "+", "+", ")", "{", "jersey", ".", "target", "(", "uri", ")", ".", "register", "(", "HttpAuthenticationFeature", ".", "basic", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "request", "(", ")", ".", "async", "(", ")", ".", "get", "(", "new", "InvocationCallback", "<", "String", ">", "(", ")", "{", "@", "Override", "public", "void", "completed", "(", "String", "s", ")", "{", "assertThat", "(", "s", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "countDownLatch", ".", "countDown", "(", ")", ";", "}", "@", "Override", "public", "void", "failed", "(", "Throwable", "t", ")", "{", "t", ".", "printStackTrace", "(", ")", ";", "}", "}", ")", ";", "}", "countDownLatch", ".", "await", "(", "<NUM_LIT:5>", ",", "TimeUnit", ".", "SECONDS", ")", ";", "assertThat", "(", "countDownLatch", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "executor", ".", "shutdown", "(", ")", ";", "jersey", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "completed", "(", "String", "s", ")", "{", "assertThat", "(", "s", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "countDownLatch", ".", "countDown", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "failed", "(", "Throwable", "t", ")", "{", "t", ".", "printStackTrace", "(", ")", ";", "}", "</s>"]
["<s>", "Person", "(", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "String", "email", ",", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ")", "{", "this", ".", "email", "=", "email", ";", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "Credentials", "(", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "long", "id", ",", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "String", "token", ")", "{", "this", ".", "id", "=", "id", ";", "this", ".", "token", "=", "token", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "throws", "Exception", "{", "JerseyClientConfiguration", "clientConfiguration", "=", "new", "JerseyClientConfiguration", "(", ")", ";", "clientConfiguration", ".", "setConnectionTimeout", "(", "Duration", ".", "milliseconds", "(", "SLEEP_TIME_IN_MILLIS", "/", "<NUM_LIT:2>", ")", ")", ";", "clientConfiguration", ".", "setTimeout", "(", "Duration", ".", "milliseconds", "(", "DEFAULT_CONNECT_TIMEOUT_IN_MILLIS", ")", ")", ";", "environment", "=", "new", "Environment", "(", "\"", "<STR_LIT>", "\"", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "Validators", ".", "newValidator", "(", ")", ",", "new", "MetricRegistry", "(", ")", ",", "getClass", "(", ")", ".", "getClassLoader", "(", ")", ")", ";", "client", "=", "(", "JerseyClient", ")", "new", "JerseyClientBuilder", "(", "environment", ")", ".", "using", "(", "clientConfiguration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "LifeCycle", "lifeCycle", ":", "environment", ".", "lifecycle", "(", ")", ".", "getManagedObjects", "(", ")", ")", "{", "lifeCycle", ".", "start", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "for", "(", "LifeCycle", "lifeCycle", ":", "environment", ".", "lifecycle", "(", ")", ".", "getManagedObjects", "(", ")", ")", "{", "lifeCycle", ".", "stop", "(", ")", ";", "}", "assertThat", "(", "client", ".", "isClosed", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "when_no_read_timeout_override_then_client_request_times_out", "(", ")", "{", "thrown", ".", "expect", "(", "ProcessingException", ".", "class", ")", ";", "thrown", ".", "expectCause", "(", "any", "(", "SocketTimeoutException", ".", "class", ")", ")", ";", "client", ".", "target", "(", "testUri", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "when_read_timeout_override_created_then_client_requests_completes_successfully", "(", ")", "{", "client", ".", "target", "(", "testUri", "+", "\"", "<STR_LIT>", "\"", ")", ".", "property", "(", "ClientProperties", ".", "READ_TIMEOUT", ",", "SLEEP_TIME_IN_MILLIS", "*", "<NUM_LIT:2>", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "Ignore", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "connect_timeout_override_changes_how_long_it_takes_for_a_connection_to_timeout", "(", ")", "{", "WebTarget", "target", "=", "client", ".", "target", "(", "NON_ROUTABLE_ADDRESS", ")", ";", "try", "{", "target", ".", "request", "(", ")", ".", "get", "(", "Response", ".", "class", ")", ";", "}", "catch", "(", "ProcessingException", "e", ")", "{", "if", "(", "e", ".", "getCause", "(", ")", "instanceof", "HttpHostConnectException", ")", "{", "return", ";", "}", "}", "assertThatConnectionTimeoutFor", "(", "target", ")", ".", "isLessThan", "(", "DEFAULT_CONNECT_TIMEOUT_IN_MILLIS", "+", "ERROR_MARGIN_IN_MILLIS", ")", ";", "final", "int", "newTimeout", "=", "DEFAULT_CONNECT_TIMEOUT_IN_MILLIS", "+", "INCREASE_IN_MILLIS", "+", "ERROR_MARGIN_IN_MILLIS", ";", "final", "WebTarget", "newTarget", "=", "target", ".", "property", "(", "ClientProperties", ".", "CONNECT_TIMEOUT", ",", "newTimeout", ")", ";", "assertThatConnectionTimeoutFor", "(", "newTarget", ")", ".", "isGreaterThan", "(", "newTimeout", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "when_no_override_then_redirected_request_successfully_redirected", "(", ")", "{", "assertThat", "(", "client", ".", "target", "(", "testUri", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "when_configuration_overridden_to_disallow_redirects_temporary_redirect_status_returned", "(", ")", "{", "assertThat", "(", "client", ".", "target", "(", "testUri", "+", "\"", "<STR_LIT>", "\"", ")", ".", "property", "(", "ClientProperties", ".", "FOLLOW_REDIRECTS", ",", "false", ")", ".", "request", "(", ")", ".", "get", "(", "Response", ".", "class", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "HttpStatus", ".", "SC_TEMPORARY_REDIRECT", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "when_jersey_client_runtime_is_garbage_collected_apache_client_is_not_closed", "(", ")", "{", "for", "(", "int", "j", "=", "0", ";", "j", "<", "<NUM_LIT:5>", ";", "j", "+", "+", ")", "{", "System", ".", "gc", "(", ")", ";", "final", "String", "response", "=", "client", ".", "target", "(", "testUri", "+", "\"", "<STR_LIT>", "\"", ")", ".", "property", "(", "ClientProperties", ".", "READ_TIMEOUT", ",", "SLEEP_TIME_IN_MILLIS", "*", "<NUM_LIT:2>", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "multiple_headers_with_the_same_name_are_processed_successfully", "(", ")", "throws", "Exception", "{", "final", "CloseableHttpClient", "client", "=", "mock", "(", "CloseableHttpClient", ".", "class", ")", ";", "final", "DropwizardApacheConnector", "dropwizardApacheConnector", "=", "new", "DropwizardApacheConnector", "(", "client", ",", "null", ",", "false", ")", ";", "final", "Header", "[", "]", "apacheHeaders", "=", "{", "new", "BasicHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ",", "new", "BasicHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ")", "}", ";", "final", "CloseableHttpResponse", "apacheResponse", "=", "mock", "(", "CloseableHttpResponse", ".", "class", ")", ";", "when", "(", "apacheResponse", ".", "getStatusLine", "(", ")", ")", ".", "thenReturn", "(", "new", "BasicStatusLine", "(", "new", "ProtocolVersion", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "1", ")", ",", "<NUM_LIT>", ",", "\"", "<STR_LIT:OK>", "\"", ")", ")", ";", "when", "(", "apacheResponse", ".", "getAllHeaders", "(", ")", ")", ".", "thenReturn", "(", "apacheHeaders", ")", ";", "when", "(", "client", ".", "execute", "(", "Mockito", ".", "any", "(", ")", ")", ")", ".", "thenReturn", "(", "apacheResponse", ")", ";", "final", "ClientRequest", "jerseyRequest", "=", "mock", "(", "ClientRequest", ".", "class", ")", ";", "when", "(", "jerseyRequest", ".", "getUri", "(", ")", ")", ".", "thenReturn", "(", "URI", ".", "create", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "when", "(", "jerseyRequest", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "when", "(", "jerseyRequest", ".", "getHeaders", "(", ")", ")", ".", "thenReturn", "(", "new", "MultivaluedHashMap", "<", ">", "(", ")", ")", ";", "final", "ClientResponse", "jerseyResponse", "=", "dropwizardApacheConnector", ".", "apply", "(", "jerseyRequest", ")", ";", "assertThat", "(", "jerseyResponse", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "apacheResponse", ".", "getStatusLine", "(", ")", ".", "getStatusCode", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getWithSleep", "(", ")", "throws", "InterruptedException", "{", "TimeUnit", ".", "MILLISECONDS", ".", "sleep", "(", "SLEEP_TIME_IN_MILLIS", ")", ";", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Response", "getWithRedirect", "(", ")", "{", "return", "Response", ".", "temporaryRedirect", "(", "URI", ".", "create", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "redirectedGet", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "[", "]", "args", ")", "throws", "Exception", "{", "new", "TestApplication", "(", ")", ".", "run", "(", "args", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "TestResource", ".", "class", ")", ";", "environment", ".", "healthChecks", "(", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "new", "HealthCheck", "(", ")", "{", "@", "Override", "protected", "Result", "check", "(", ")", "throws", "Exception", "{", "return", "Result", ".", "healthy", "(", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Result", "check", "(", ")", "throws", "Exception", "{", "return", "Result", ".", "healthy", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "AbstractLongAssert", "<", "?", ">", "assertThatConnectionTimeoutFor", "(", "WebTarget", "webTarget", ")", "{", "final", "long", "startTime", "=", "System", ".", "nanoTime", "(", ")", ";", "try", "{", "webTarget", ".", "request", "(", ")", ".", "get", "(", "Response", ".", "class", ")", ";", "}", "catch", "(", "ProcessingException", "e", ")", "{", "final", "long", "endTime", "=", "System", ".", "nanoTime", "(", ")", ";", "assertThat", "(", "e", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "e", ".", "getCause", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "e", ".", "getCause", "(", ")", ")", ".", "isInstanceOfAny", "(", "ConnectTimeoutException", ".", "class", ",", "NoRouteToHostException", ".", "class", ")", ";", "return", "assertThat", "(", "TimeUnit", ".", "MILLISECONDS", ".", "convert", "(", "endTime", "-", "startTime", ",", "TimeUnit", ".", "NANOSECONDS", ")", ")", ";", "}", "throw", "new", "AssertionError", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "{", "clientConfiguration", "=", "new", "JerseyClientConfiguration", "(", ")", ";", "clientConfiguration", ".", "setConnectionTimeout", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT>", ")", ")", ";", "clientConfiguration", ".", "setTimeout", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT>", ")", ")", ";", "clientBuilder", "=", "new", "JerseyClientBuilder", "(", "new", "MetricRegistry", "(", ")", ")", ".", "using", "(", "clientConfiguration", ")", ".", "using", "(", "Executors", ".", "newSingleThreadExecutor", "(", ")", ",", "Jackson", ".", "newObjectMapper", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "clientIsSetRequestIsNotSet", "(", ")", "{", "clientConfiguration", ".", "setUserAgent", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "clientBuilder", ".", "using", "(", "clientConfiguration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ".", "target", "(", "testUri", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "clientIsNotSetRequestIsSet", "(", ")", "{", "assertThat", "(", "clientBuilder", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ".", "target", "(", "testUri", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "clientIsNotSetRequestIsNotSet", "(", ")", "{", "assertThat", "(", "clientBuilder", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ".", "target", "(", "testUri", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "clientIsSetRequestIsSet", "(", ")", "{", "clientConfiguration", ".", "setUserAgent", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "clientBuilder", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ".", "target", "(", "testUri", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getReturnUserAgentHeader", "(", "@", "HeaderParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "userAgentHeader", ")", "{", "return", "userAgentHeader", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "[", "]", "args", ")", "throws", "Exception", "{", "new", "TestApplication", "(", ")", ".", "run", "(", "args", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "TestResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "Response", "respondOk", "(", ")", "{", "return", "Response", ".", "ok", "(", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "[", "]", "args", ")", "throws", "Exception", "{", "new", "TlsTestApplication", "(", ")", ".", "run", "(", "args", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "TestResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "tlsConfiguration", "=", "new", "TlsConfiguration", "(", ")", ";", "tlsConfiguration", ".", "setTrustStorePath", "(", "new", "File", "(", "ResourceHelpers", ".", "resourceFilePath", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "tlsConfiguration", ".", "setTrustStorePassword", "(", "\"", "<STR_LIT>", "\"", ")", ";", "jerseyClientConfiguration", "=", "new", "JerseyClientConfiguration", "(", ")", ";", "jerseyClientConfiguration", ".", "setTlsConfiguration", "(", "tlsConfiguration", ")", ";", "jerseyClientConfiguration", ".", "setConnectionTimeout", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT>", ")", ")", ";", "jerseyClientConfiguration", ".", "setTimeout", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configOnlyConstructorShouldSetNullCustomVerifier", "(", ")", "throws", "Exception", "{", "final", "DropwizardSSLConnectionSocketFactory", "socketFactory", ";", "socketFactory", "=", "new", "DropwizardSSLConnectionSocketFactory", "(", "tlsConfiguration", ")", ";", "final", "Field", "verifierField", "=", "FieldUtils", ".", "getField", "(", "DropwizardSSLConnectionSocketFactory", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "assertThat", "(", "verifierField", ".", "get", "(", "socketFactory", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturn200IfServerCertInTruststore", "(", ")", "throws", "Exception", "{", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Response", "response", "=", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getLocalPort", "(", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldErrorIfServerCertNotFoundInTruststore", "(", ")", "throws", "Exception", "{", "tlsConfiguration", ".", "setTrustStorePath", "(", "new", "File", "(", "ResourceHelpers", ".", "resourceFilePath", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThatThrownBy", "(", "(", ")", "-", ">", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getLocalPort", "(", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", ")", ")", ".", "isInstanceOf", "(", "ProcessingException", ".", "class", ")", ".", "hasCauseInstanceOf", "(", "SSLHandshakeException", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldNotErrorIfServerCertSelfSignedAndSelfSignedCertsAllowed", "(", ")", "throws", "Exception", "{", "tlsConfiguration", ".", "setTrustSelfSignedCertificates", "(", "true", ")", ";", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Response", "response", "=", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getTestSupport", "(", ")", ".", "getPort", "(", "1", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldErrorIfServerCertSelfSignedAndSelfSignedCertsNotAllowed", "(", ")", "throws", "Exception", "{", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThatThrownBy", "(", "(", ")", "-", ">", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getPort", "(", "1", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", "ClientResponse", ".", "class", ")", ")", ".", "isInstanceOf", "(", "ProcessingException", ".", "class", ")", ".", "hasCauseInstanceOf", "(", "SSLHandshakeException", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturn200IfAbleToClientAuth", "(", ")", "throws", "Exception", "{", "tlsConfiguration", ".", "setKeyStorePath", "(", "new", "File", "(", "ResourceHelpers", ".", "resourceFilePath", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "tlsConfiguration", ".", "setKeyStorePassword", "(", "\"", "<STR_LIT>", "\"", ")", ";", "tlsConfiguration", ".", "setKeyStoreType", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Response", "response", "=", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getPort", "(", "<NUM_LIT:2>", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldErrorIfClientAuthFails", "(", ")", "throws", "Exception", "{", "tlsConfiguration", ".", "setKeyStorePath", "(", "new", "File", "(", "ResourceHelpers", ".", "resourceFilePath", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "tlsConfiguration", ".", "setKeyStorePassword", "(", "\"", "<STR_LIT>", "\"", ")", ";", "tlsConfiguration", ".", "setKeyStoreType", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Throwable", "exn", "=", "catchThrowable", "(", "(", ")", "-", ">", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getPort", "(", "<NUM_LIT:2>", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", ")", ")", ";", "assertThat", "(", "exn", ")", ".", "isInstanceOf", "(", "ProcessingException", ".", "class", ")", ";", "assertThat", "(", "exn", ".", "getCause", "(", ")", ")", ".", "isInstanceOfAny", "(", "SocketException", ".", "class", ",", "SSLHandshakeException", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturn200IfAbleToClientAuthSpecifyingCertAliasForGoodCert", "(", ")", "throws", "Exception", "{", "tlsConfiguration", ".", "setKeyStorePath", "(", "new", "File", "(", "ResourceHelpers", ".", "resourceFilePath", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "tlsConfiguration", ".", "setKeyStorePassword", "(", "\"", "<STR_LIT>", "\"", ")", ";", "tlsConfiguration", ".", "setKeyStoreType", "(", "\"", "<STR_LIT>", "\"", ")", ";", "tlsConfiguration", ".", "setCertAlias", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Response", "response", "=", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getPort", "(", "<NUM_LIT:2>", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldErrorIfTryToClientAuthSpecifyingCertAliasForBadCert", "(", ")", "throws", "Exception", "{", "tlsConfiguration", ".", "setKeyStorePath", "(", "new", "File", "(", "ResourceHelpers", ".", "resourceFilePath", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "tlsConfiguration", ".", "setKeyStorePassword", "(", "\"", "<STR_LIT>", "\"", ")", ";", "tlsConfiguration", ".", "setKeyStoreType", "(", "\"", "<STR_LIT>", "\"", ")", ";", "tlsConfiguration", ".", "setCertAlias", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Throwable", "exn", "=", "catchThrowable", "(", "(", ")", "-", ">", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getPort", "(", "<NUM_LIT:2>", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", ")", ")", ";", "assertThat", "(", "exn", ")", ".", "isInstanceOf", "(", "ProcessingException", ".", "class", ")", ";", "assertThat", "(", "exn", ".", "getCause", "(", ")", ")", ".", "isInstanceOfAny", "(", "SocketException", ".", "class", ",", "SSLHandshakeException", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldErrorIfTryToClientAuthSpecifyingUnknownCertAlias", "(", ")", "throws", "Exception", "{", "tlsConfiguration", ".", "setKeyStorePath", "(", "new", "File", "(", "ResourceHelpers", ".", "resourceFilePath", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "tlsConfiguration", ".", "setKeyStorePassword", "(", "\"", "<STR_LIT>", "\"", ")", ";", "tlsConfiguration", ".", "setKeyStoreType", "(", "\"", "<STR_LIT>", "\"", ")", ";", "tlsConfiguration", ".", "setCertAlias", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Throwable", "exn", "=", "catchThrowable", "(", "(", ")", "-", ">", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getPort", "(", "<NUM_LIT:2>", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", ")", ")", ";", "assertThat", "(", "exn", ")", ".", "isInstanceOf", "(", "ProcessingException", ".", "class", ")", ";", "assertThat", "(", "exn", ".", "getCause", "(", ")", ")", ".", "isInstanceOfAny", "(", "SocketException", ".", "class", ",", "SSLHandshakeException", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldErrorIfHostnameVerificationOnAndServerHostnameDoesntMatch", "(", ")", "throws", "Exception", "{", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Throwable", "exn", "=", "catchThrowable", "(", "(", ")", "-", ">", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getPort", "(", "<NUM_LIT:3>", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", ")", ")", ";", "assertThat", "(", "exn", ")", ".", "hasCauseExactlyInstanceOf", "(", "SSLPeerUnverifiedException", ".", "class", ")", ";", "assertThat", "(", "exn", ".", "getCause", "(", ")", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldErrorIfHostnameVerificationOnAndServerHostnameMatchesAndFailVerifierSpecified", "(", ")", "throws", "Exception", "{", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "using", "(", "new", "FailVerifier", "(", ")", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Throwable", "exn", "=", "catchThrowable", "(", "(", ")", "-", ">", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getLocalPort", "(", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", ")", ")", ";", "assertThat", "(", "exn", ")", ".", "hasCauseExactlyInstanceOf", "(", "SSLPeerUnverifiedException", ".", "class", ")", ";", "assertThat", "(", "exn", ".", "getCause", "(", ")", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldBeOkIfHostnameVerificationOnAndServerHostnameDoesntMatchAndNoopVerifierSpecified", "(", ")", "throws", "Exception", "{", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "using", "(", "new", "NoopHostnameVerifier", "(", ")", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Response", "response", "=", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getPort", "(", "<NUM_LIT:3>", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldBeOkIfHostnameVerificationOffAndServerHostnameDoesntMatch", "(", ")", "throws", "Exception", "{", "tlsConfiguration", ".", "setVerifyHostname", "(", "false", ")", ";", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Response", "response", "=", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getPort", "(", "<NUM_LIT:3>", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldBeOkIfHostnameVerificationOffAndServerHostnameMatchesAndFailVerfierSpecified", "(", ")", "throws", "Exception", "{", "tlsConfiguration", ".", "setVerifyHostname", "(", "false", ")", ";", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "using", "(", "new", "FailVerifier", "(", ")", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Response", "response", "=", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getLocalPort", "(", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldRejectNonSupportedProtocols", "(", ")", "throws", "Exception", "{", "tlsConfiguration", ".", "setSupportedProtocols", "(", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "TLS_APP_RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "jerseyClientConfiguration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThatThrownBy", "(", "(", ")", "-", ">", "client", ".", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "TLS_APP_RULE", ".", "getPort", "(", "<NUM_LIT:4>", ")", ")", ")", ".", "request", "(", ")", ".", "get", "(", ")", ")", ".", "isInstanceOf", "(", "ProcessingException", ".", "class", ")", ".", "hasRootCauseInstanceOf", "(", "SSLException", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "verify", "(", "String", "arg0", ",", "SSLSession", "arg1", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProxyListIsNotSet", "(", ")", "{", "assertThat", "(", "new", "NonProxyListProxyRoutePlanner", "(", "proxy", ",", "null", ")", ".", "getNonProxyHostPatterns", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHostNotInBlackList", "(", ")", "throws", "Exception", "{", "assertThat", "(", "routePlanner", ".", "determineProxy", "(", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ")", ",", "httpRequest", ",", "httpContext", ")", ")", ".", "isEqualTo", "(", "proxy", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPlainHostIsMatched", "(", ")", "throws", "Exception", "{", "assertThat", "(", "routePlanner", ".", "determineProxy", "(", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ")", ",", "httpRequest", ",", "httpContext", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHostWithStartWildcardIsMatched", "(", ")", "throws", "Exception", "{", "assertThat", "(", "routePlanner", ".", "determineProxy", "(", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ")", ",", "httpRequest", ",", "httpContext", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHostWithEndWildcardIsMatched", "(", ")", "throws", "Exception", "{", "assertThat", "(", "routePlanner", ".", "determineProxy", "(", "new", "HttpHost", "(", "\"", "<STR_LIT>", "\"", ")", ",", "httpRequest", ",", "httpContext", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "load", "(", "String", "configLocation", ")", "throws", "Exception", "{", "configuration", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "HttpClientConfiguration", ".", "class", ",", "Validators", ".", "newValidator", "(", ")", ",", "objectMapper", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "configLocation", ")", ".", "toURI", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNoProxy", "(", ")", "throws", "Exception", "{", "load", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "configuration", ".", "getProxyConfiguration", "(", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFullConfigBasicProxy", "(", ")", "throws", "Exception", "{", "load", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ProxyConfiguration", "proxy", "=", "requireNonNull", "(", "configuration", ".", "getProxyConfiguration", "(", ")", ")", ";", "assertThat", "(", "proxy", ".", "getHost", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "proxy", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "proxy", ".", "getScheme", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "AuthConfiguration", "auth", "=", "requireNonNull", "(", "proxy", ".", "getAuth", "(", ")", ")", ";", "assertThat", "(", "auth", ".", "getUsername", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "auth", ".", "getPassword", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "List", "<", "String", ">", "nonProxyHosts", "=", "proxy", ".", "getNonProxyHosts", "(", ")", ";", "assertThat", "(", "nonProxyHosts", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFullConfigNtlmProxy", "(", ")", "throws", "Exception", "{", "load", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ProxyConfiguration", "proxy", "=", "requireNonNull", "(", "configuration", ".", "getProxyConfiguration", "(", ")", ")", ";", "assertThat", "(", "proxy", ".", "getHost", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "proxy", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "proxy", ".", "getScheme", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "AuthConfiguration", "auth", "=", "requireNonNull", "(", "proxy", ".", "getAuth", "(", ")", ")", ";", "assertThat", "(", "auth", ".", "getUsername", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "auth", ".", "getPassword", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "auth", ".", "getAuthScheme", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "auth", ".", "getRealm", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "auth", ".", "getHostname", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "auth", ".", "getDomain", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "auth", ".", "getCredentialType", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "List", "<", "String", ">", "nonProxyHosts", "=", "proxy", ".", "getNonProxyHosts", "(", ")", ";", "assertThat", "(", "nonProxyHosts", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNoScheme", "(", ")", "throws", "Exception", "{", "load", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ProxyConfiguration", "proxy", "=", "requireNonNull", "(", "configuration", ".", "getProxyConfiguration", "(", ")", ")", ";", "assertThat", "(", "proxy", ".", "getHost", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "proxy", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "proxy", ".", "getScheme", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNoAuth", "(", ")", "throws", "Exception", "{", "load", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ProxyConfiguration", "proxy", "=", "requireNonNull", "(", "configuration", ".", "getProxyConfiguration", "(", ")", ")", ";", "assertThat", "(", "proxy", ".", "getHost", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "proxy", ".", "getAuth", "(", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNoPort", "(", ")", "throws", "Exception", "{", "load", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ProxyConfiguration", "proxy", "=", "requireNonNull", "(", "configuration", ".", "getProxyConfiguration", "(", ")", ")", ";", "assertThat", "(", "proxy", ".", "getHost", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "proxy", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "-", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNoNonProxy", "(", ")", "throws", "Exception", "{", "load", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ProxyConfiguration", "proxy", "=", "requireNonNull", "(", "configuration", ".", "getProxyConfiguration", "(", ")", ")", ";", "assertThat", "(", "proxy", ".", "getNonProxyHosts", "(", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "ConfigurationValidationException", ".", "class", ")", "public", "void", "testNoHost", "(", ")", "throws", "Exception", "{", "load", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "ConfigurationValidationException", ".", "class", ")", "public", "void", "testBadPort", "(", ")", "throws", "Exception", "{", "load", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "ConfigurationParsingException", ".", "class", ")", "public", "void", "testBadScheme", "(", ")", "throws", "Exception", "{", "load", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "ConfigurationValidationException", ".", "class", ")", "public", "void", "testBadAuthUsername", "(", ")", "throws", "Exception", "{", "load", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "ConfigurationValidationException", ".", "class", ")", "public", "void", "testBadPassword", "(", ")", "throws", "Exception", "{", "load", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "ConfigurationValidationException", ".", "class", ")", "public", "void", "testBadAuthScheme", "(", ")", "throws", "Exception", "{", "load", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "ConfigurationValidationException", ".", "class", ")", "public", "void", "testBadCredentialType", "(", ")", "throws", "Exception", "{", "load", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "DropwizardExecutorProvider", "(", "ExecutorService", "executor", ")", "{", "this", ".", "executor", "=", "executor", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ExecutorService", "getExecutorService", "(", ")", "{", "return", "this", ".", "executor", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "dispose", "(", "ExecutorService", "executorService", ")", "{", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "(", "MetricRegistry", "metricRegistry", ")", "{", "this", ".", "metricRegistry", "=", "metricRegistry", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "(", "Environment", "environment", ")", "{", "this", "(", "environment", ".", "metrics", "(", ")", ")", ";", "name", "(", "environment", ".", "getName", "(", ")", ")", ";", "this", ".", "environment", "=", "environment", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "name", "(", "String", "environmentName", ")", "{", "this", ".", "environmentName", "=", "environmentName", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "using", "(", "HttpClientConfiguration", "configuration", ")", "{", "this", ".", "configuration", "=", "configuration", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "using", "(", "DnsResolver", "resolver", ")", "{", "this", ".", "resolver", "=", "resolver", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "using", "(", "HostnameVerifier", "verifier", ")", "{", "this", ".", "verifier", "=", "verifier", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "using", "(", "HttpRequestRetryHandler", "httpRequestRetryHandler", ")", "{", "this", ".", "httpRequestRetryHandler", "=", "httpRequestRetryHandler", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "using", "(", "Registry", "<", "ConnectionSocketFactory", ">", "registry", ")", "{", "this", ".", "registry", "=", "registry", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "using", "(", "HttpRoutePlanner", "routePlanner", ")", "{", "this", ".", "routePlanner", "=", "routePlanner", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "using", "(", "CredentialsProvider", "credentialsProvider", ")", "{", "this", ".", "credentialsProvider", "=", "credentialsProvider", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "using", "(", "HttpClientMetricNameStrategy", "metricNameStrategy", ")", "{", "this", ".", "metricNameStrategy", "=", "metricNameStrategy", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "using", "(", "RedirectStrategy", "redirectStrategy", ")", "{", "this", ".", "redirectStrategy", "=", "redirectStrategy", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "using", "(", "List", "<", "?", "extends", "Header", ">", "defaultHeaders", ")", "{", "this", ".", "defaultHeaders", "=", "defaultHeaders", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "using", "(", "HttpProcessor", "httpProcessor", ")", "{", "this", ".", "httpProcessor", "=", "httpProcessor", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "using", "(", "ServiceUnavailableRetryStrategy", "serviceUnavailableRetryStrategy", ")", "{", "this", ".", "serviceUnavailableRetryStrategy", "=", "serviceUnavailableRetryStrategy", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "HttpClientBuilder", "disableContentCompression", "(", "boolean", "disableContentCompression", ")", "{", "this", ".", "disableContentCompression", "=", "disableContentCompression", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "CloseableHttpClient", "build", "(", "String", "name", ")", "{", "final", "CloseableHttpClient", "client", "=", "buildWithDefaultRequestConfiguration", "(", "name", ")", ".", "getClient", "(", ")", ";", "if", "(", "environment", "!", "=", "null", ")", "{", "environment", ".", "lifecycle", "(", ")", ".", "manage", "(", "new", "Managed", "(", ")", "{", "@", "Override", "public", "void", "start", "(", ")", "throws", "Exception", "{", "}", "@", "Override", "public", "void", "stop", "(", ")", "throws", "Exception", "{", "client", ".", "close", "(", ")", ";", "}", "}", ")", ";", "}", "return", "client", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "start", "(", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "stop", "(", ")", "throws", "Exception", "{", "client", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "ConfiguredCloseableHttpClient", "buildWithDefaultRequestConfiguration", "(", "String", "name", ")", "{", "return", "createClient", "(", "org", ".", "apache", ".", "http", ".", "impl", ".", "client", ".", "HttpClientBuilder", ".", "create", "(", ")", ",", "createConnectionManager", "(", "createConfiguredRegistry", "(", ")", ",", "name", ")", ",", "name", ")", ";", "}", "</s>"]
["<s>", "protected", "org", ".", "apache", ".", "http", ".", "impl", ".", "client", ".", "HttpClientBuilder", "customizeBuilder", "(", "org", ".", "apache", ".", "http", ".", "impl", ".", "client", ".", "HttpClientBuilder", "builder", ")", "{", "return", "builder", ";", "}", "</s>"]
["<s>", "protected", "ConfiguredCloseableHttpClient", "createClient", "(", "final", "org", ".", "apache", ".", "http", ".", "impl", ".", "client", ".", "HttpClientBuilder", "builder", ",", "final", "InstrumentedHttpClientConnectionManager", "manager", ",", "final", "String", "name", ")", "{", "final", "String", "cookiePolicy", "=", "configuration", ".", "isCookiesEnabled", "(", ")", "?", "CookieSpecs", ".", "DEFAULT", ":", "CookieSpecs", ".", "IGNORE_COOKIES", ";", "final", "Integer", "timeout", "=", "(", "int", ")", "configuration", ".", "getTimeout", "(", ")", ".", "toMilliseconds", "(", ")", ";", "final", "Integer", "connectionTimeout", "=", "(", "int", ")", "configuration", ".", "getConnectionTimeout", "(", ")", ".", "toMilliseconds", "(", ")", ";", "final", "Integer", "connectionRequestTimeout", "=", "(", "int", ")", "configuration", ".", "getConnectionRequestTimeout", "(", ")", ".", "toMilliseconds", "(", ")", ";", "final", "long", "keepAlive", "=", "configuration", ".", "getKeepAlive", "(", ")", ".", "toMilliseconds", "(", ")", ";", "final", "ConnectionReuseStrategy", "reuseStrategy", "=", "keepAlive", "=", "=", "0", "?", "new", "NoConnectionReuseStrategy", "(", ")", ":", "new", "DefaultConnectionReuseStrategy", "(", ")", ";", "final", "HttpRequestRetryHandler", "retryHandler", "=", "configuration", ".", "getRetries", "(", ")", "=", "=", "0", "?", "NO_RETRIES", ":", "(", "httpRequestRetryHandler", "=", "=", "null", "?", "new", "DefaultHttpRequestRetryHandler", "(", "configuration", ".", "getRetries", "(", ")", ",", "false", ")", ":", "httpRequestRetryHandler", ")", ";", "final", "RequestConfig", "requestConfig", "=", "RequestConfig", ".", "custom", "(", ")", ".", "setCookieSpec", "(", "cookiePolicy", ")", ".", "setSocketTimeout", "(", "timeout", ")", ".", "setConnectTimeout", "(", "connectionTimeout", ")", ".", "setConnectionRequestTimeout", "(", "connectionRequestTimeout", ")", ".", "build", "(", ")", ";", "final", "SocketConfig", "socketConfig", "=", "SocketConfig", ".", "custom", "(", ")", ".", "setTcpNoDelay", "(", "true", ")", ".", "setSoTimeout", "(", "timeout", ")", ".", "build", "(", ")", ";", "customizeBuilder", "(", "builder", ")", ".", "setRequestExecutor", "(", "new", "InstrumentedHttpRequestExecutor", "(", "metricRegistry", ",", "metricNameStrategy", ",", "name", ")", ")", ".", "setConnectionManager", "(", "manager", ")", ".", "setDefaultRequestConfig", "(", "requestConfig", ")", ".", "setDefaultSocketConfig", "(", "socketConfig", ")", ".", "setConnectionReuseStrategy", "(", "reuseStrategy", ")", ".", "setRetryHandler", "(", "retryHandler", ")", ".", "setUserAgent", "(", "createUserAgent", "(", "name", ")", ")", ";", "if", "(", "keepAlive", "!", "=", "0", ")", "{", "builder", ".", "setKeepAliveStrategy", "(", "new", "DefaultConnectionKeepAliveStrategy", "(", ")", "{", "@", "Override", "public", "long", "getKeepAliveDuration", "(", "HttpResponse", "response", ",", "HttpContext", "context", ")", "{", "final", "long", "duration", "=", "super", ".", "getKeepAliveDuration", "(", "response", ",", "context", ")", ";", "return", "(", "duration", "=", "=", "-", "1", ")", "?", "keepAlive", ":", "duration", ";", "}", "}", ")", ";", "}", "final", "ProxyConfiguration", "proxy", "=", "configuration", ".", "getProxyConfiguration", "(", ")", ";", "if", "(", "proxy", "!", "=", "null", ")", "{", "final", "HttpHost", "httpHost", "=", "new", "HttpHost", "(", "proxy", ".", "getHost", "(", ")", ",", "proxy", ".", "getPort", "(", ")", ",", "proxy", ".", "getScheme", "(", ")", ")", ";", "builder", ".", "setRoutePlanner", "(", "new", "NonProxyListProxyRoutePlanner", "(", "httpHost", ",", "proxy", ".", "getNonProxyHosts", "(", ")", ")", ")", ";", "final", "AuthConfiguration", "auth", "=", "proxy", ".", "getAuth", "(", ")", ";", "if", "(", "auth", "!", "=", "null", ")", "{", "if", "(", "credentialsProvider", "=", "=", "null", ")", "{", "credentialsProvider", "=", "new", "BasicCredentialsProvider", "(", ")", ";", "}", "AuthScope", "authScope", "=", "new", "AuthScope", "(", "httpHost", ",", "auth", ".", "getRealm", "(", ")", ",", "auth", ".", "getAuthScheme", "(", ")", ")", ";", "Credentials", "credentials", "=", "configureCredentials", "(", "auth", ")", ";", "credentialsProvider", ".", "setCredentials", "(", "authScope", ",", "credentials", ")", ";", "}", "}", "if", "(", "credentialsProvider", "!", "=", "null", ")", "{", "builder", ".", "setDefaultCredentialsProvider", "(", "credentialsProvider", ")", ";", "}", "if", "(", "routePlanner", "!", "=", "null", ")", "{", "builder", ".", "setRoutePlanner", "(", "routePlanner", ")", ";", "}", "if", "(", "disableContentCompression", ")", "{", "builder", ".", "disableContentCompression", "(", ")", ";", "}", "if", "(", "redirectStrategy", "!", "=", "null", ")", "{", "builder", ".", "setRedirectStrategy", "(", "redirectStrategy", ")", ";", "}", "if", "(", "defaultHeaders", "!", "=", "null", ")", "{", "builder", ".", "setDefaultHeaders", "(", "defaultHeaders", ")", ";", "}", "if", "(", "verifier", "!", "=", "null", ")", "{", "builder", ".", "setSSLHostnameVerifier", "(", "verifier", ")", ";", "}", "if", "(", "httpProcessor", "!", "=", "null", ")", "{", "builder", ".", "setHttpProcessor", "(", "httpProcessor", ")", ";", "}", "if", "(", "serviceUnavailableRetryStrategy", "!", "=", "null", ")", "{", "builder", ".", "setServiceUnavailableRetryStrategy", "(", "serviceUnavailableRetryStrategy", ")", ";", "}", "return", "new", "ConfiguredCloseableHttpClient", "(", "builder", ".", "build", "(", ")", ",", "requestConfig", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getKeepAliveDuration", "(", "HttpResponse", "response", ",", "HttpContext", "context", ")", "{", "final", "long", "duration", "=", "super", ".", "getKeepAliveDuration", "(", "response", ",", "context", ")", ";", "return", "(", "duration", "=", "=", "-", "1", ")", "?", "keepAlive", ":", "duration", ";", "}", "</s>"]
["<s>", "protected", "String", "createUserAgent", "(", "String", "name", ")", "{", "final", "String", "defaultUserAgent", "=", "environmentName", "=", "=", "null", "?", "name", ":", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "environmentName", ",", "name", ")", ";", "return", "configuration", ".", "getUserAgent", "(", ")", ".", "orElse", "(", "defaultUserAgent", ")", ";", "}", "</s>"]
["<s>", "protected", "InstrumentedHttpClientConnectionManager", "createConnectionManager", "(", "Registry", "<", "ConnectionSocketFactory", ">", "registry", ",", "String", "name", ")", "{", "final", "Duration", "ttl", "=", "configuration", ".", "getTimeToLive", "(", ")", ";", "final", "InstrumentedHttpClientConnectionManager", "manager", "=", "new", "InstrumentedHttpClientConnectionManager", "(", "metricRegistry", ",", "registry", ",", "null", ",", "null", ",", "resolver", ",", "ttl", ".", "getQuantity", "(", ")", ",", "ttl", ".", "getUnit", "(", ")", ",", "name", ")", ";", "return", "configureConnectionManager", "(", "manager", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "Registry", "<", "ConnectionSocketFactory", ">", "createConfiguredRegistry", "(", ")", "{", "if", "(", "registry", "!", "=", "null", ")", "{", "return", "registry", ";", "}", "TlsConfiguration", "tlsConfiguration", "=", "configuration", ".", "getTlsConfiguration", "(", ")", ";", "if", "(", "tlsConfiguration", "=", "=", "null", "&", "&", "verifier", "!", "=", "null", ")", "{", "tlsConfiguration", "=", "new", "TlsConfiguration", "(", ")", ";", "}", "final", "SSLConnectionSocketFactory", "sslConnectionSocketFactory", ";", "if", "(", "tlsConfiguration", "=", "=", "null", ")", "{", "sslConnectionSocketFactory", "=", "SSLConnectionSocketFactory", ".", "getSocketFactory", "(", ")", ";", "}", "else", "{", "sslConnectionSocketFactory", "=", "new", "DropwizardSSLConnectionSocketFactory", "(", "tlsConfiguration", ",", "verifier", ")", ".", "getSocketFactory", "(", ")", ";", "}", "return", "RegistryBuilder", ".", "<", "ConnectionSocketFactory", ">", "create", "(", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "PlainConnectionSocketFactory", ".", "getSocketFactory", "(", ")", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "sslConnectionSocketFactory", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "protected", "InstrumentedHttpClientConnectionManager", "configureConnectionManager", "(", "InstrumentedHttpClientConnectionManager", "connectionManager", ")", "{", "connectionManager", ".", "setDefaultMaxPerRoute", "(", "configuration", ".", "getMaxConnectionsPerRoute", "(", ")", ")", ";", "connectionManager", ".", "setMaxTotal", "(", "configuration", ".", "getMaxConnections", "(", ")", ")", ";", "connectionManager", ".", "setValidateAfterInactivity", "(", "(", "int", ")", "configuration", ".", "getValidateAfterInactivityPeriod", "(", ")", ".", "toMilliseconds", "(", ")", ")", ";", "return", "connectionManager", ";", "}", "</s>"]
["<s>", "protected", "Credentials", "configureCredentials", "(", "AuthConfiguration", "auth", ")", "{", "if", "(", "null", "!", "=", "auth", ".", "getCredentialType", "(", ")", "&", "&", "auth", ".", "getCredentialType", "(", ")", ".", "equalsIgnoreCase", "(", "AuthConfiguration", ".", "NT_CREDS", ")", ")", "{", "return", "new", "NTCredentials", "(", "auth", ".", "getUsername", "(", ")", ",", "auth", ".", "getPassword", "(", ")", ",", "auth", ".", "getHostname", "(", ")", ",", "auth", ".", "getDomain", "(", ")", ")", ";", "}", "else", "{", "return", "new", "UsernamePasswordCredentials", "(", "auth", ".", "getUsername", "(", ")", ",", "auth", ".", "getPassword", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getMinThreads", "(", ")", "{", "return", "minThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMinThreads", "(", "int", "minThreads", ")", "{", "this", ".", "minThreads", "=", "minThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getMaxThreads", "(", ")", "{", "return", "maxThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxThreads", "(", "int", "maxThreads", ")", "{", "this", ".", "maxThreads", "=", "maxThreads", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isGzipEnabled", "(", ")", "{", "return", "gzipEnabled", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setGzipEnabled", "(", "boolean", "enabled", ")", "{", "this", ".", "gzipEnabled", "=", "enabled", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isGzipEnabledForRequests", "(", ")", "{", "return", "gzipEnabledForRequests", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setGzipEnabledForRequests", "(", "boolean", "enabled", ")", "{", "this", ".", "gzipEnabledForRequests", "=", "enabled", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isChunkedEncodingEnabled", "(", ")", "{", "return", "chunkedEncodingEnabled", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setChunkedEncodingEnabled", "(", "final", "boolean", "chunkedEncodingEnabled", ")", "{", "this", ".", "chunkedEncodingEnabled", "=", "chunkedEncodingEnabled", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getWorkQueueSize", "(", ")", "{", "return", "workQueueSize", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setWorkQueueSize", "(", "int", "workQueueSize", ")", "{", "this", ".", "workQueueSize", "=", "workQueueSize", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isThreadPoolSizedCorrectly", "(", ")", "{", "return", "minThreads", "<", "=", "maxThreads", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isCompressionConfigurationValid", "(", ")", "{", "return", "!", "gzipEnabledForRequests", "|", "|", "gzipEnabled", ";", "}", "</s>"]
["<s>", "public", "DropwizardSSLConnectionSocketFactory", "(", "TlsConfiguration", "configuration", ")", "{", "this", "(", "configuration", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardSSLConnectionSocketFactory", "(", "TlsConfiguration", "configuration", ",", "@", "Nullable", "HostnameVerifier", "verifier", ")", "{", "this", ".", "configuration", "=", "configuration", ";", "this", ".", "verifier", "=", "verifier", ";", "}", "</s>"]
["<s>", "public", "SSLConnectionSocketFactory", "getSocketFactory", "(", ")", "throws", "SSLInitializationException", "{", "return", "new", "SSLConnectionSocketFactory", "(", "buildSslContext", "(", ")", ",", "getSupportedProtocols", "(", ")", ",", "getSupportedCiphers", "(", ")", ",", "chooseHostnameVerifier", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Nullable", "private", "String", "[", "]", "getSupportedCiphers", "(", ")", "{", "final", "List", "<", "String", ">", "supportedCiphers", "=", "configuration", ".", "getSupportedCiphers", "(", ")", ";", "if", "(", "supportedCiphers", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "supportedCiphers", ".", "toArray", "(", "new", "String", "[", "supportedCiphers", ".", "size", "(", ")", "]", ")", ";", "}", "</s>"]
["<s>", "@", "Nullable", "private", "String", "[", "]", "getSupportedProtocols", "(", ")", "{", "final", "List", "<", "String", ">", "supportedProtocols", "=", "configuration", ".", "getSupportedProtocols", "(", ")", ";", "if", "(", "supportedProtocols", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "supportedProtocols", ".", "toArray", "(", "new", "String", "[", "supportedProtocols", ".", "size", "(", ")", "]", ")", ";", "}", "</s>"]
["<s>", "private", "HostnameVerifier", "chooseHostnameVerifier", "(", ")", "{", "if", "(", "configuration", ".", "isVerifyHostname", "(", ")", ")", "{", "return", "verifier", "!", "=", "null", "?", "verifier", ":", "SSLConnectionSocketFactory", ".", "getDefaultHostnameVerifier", "(", ")", ";", "}", "else", "{", "return", "new", "NoopHostnameVerifier", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "SSLContext", "buildSslContext", "(", ")", "throws", "SSLInitializationException", "{", "final", "SSLContext", "sslContext", ";", "try", "{", "final", "SSLContextBuilder", "sslContextBuilder", "=", "new", "SSLContextBuilder", "(", ")", ";", "sslContextBuilder", ".", "useProtocol", "(", "configuration", ".", "getProtocol", "(", ")", ")", ";", "loadKeyMaterial", "(", "sslContextBuilder", ")", ";", "loadTrustMaterial", "(", "sslContextBuilder", ")", ";", "sslContext", "=", "sslContextBuilder", ".", "build", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "SSLInitializationException", "(", "e", ".", "getMessage", "(", ")", ",", "e", ")", ";", "}", "return", "sslContext", ";", "}", "</s>"]
["<s>", "@", "Nullable", "private", "PrivateKeyStrategy", "choosePrivateKeyStrategy", "(", ")", "{", "PrivateKeyStrategy", "privateKeyStrategy", "=", "null", ";", "if", "(", "configuration", ".", "getCertAlias", "(", ")", "!", "=", "null", ")", "{", "privateKeyStrategy", "=", "(", "aliases", ",", "socket", ")", "-", ">", "configuration", ".", "getCertAlias", "(", ")", ";", "}", "return", "privateKeyStrategy", ";", "}", "</s>"]
["<s>", "private", "void", "loadKeyMaterial", "(", "SSLContextBuilder", "sslContextBuilder", ")", "throws", "Exception", "{", "if", "(", "configuration", ".", "getKeyStorePath", "(", ")", "!", "=", "null", ")", "{", "final", "KeyStore", "keystore", "=", "loadKeyStore", "(", "configuration", ".", "getKeyStoreType", "(", ")", ",", "configuration", ".", "getKeyStorePath", "(", ")", ",", "requireNonNull", "(", "configuration", ".", "getKeyStorePassword", "(", ")", ")", ")", ";", "sslContextBuilder", ".", "loadKeyMaterial", "(", "keystore", ",", "requireNonNull", "(", "configuration", ".", "getKeyStorePassword", "(", ")", ")", ".", "toCharArray", "(", ")", ",", "choosePrivateKeyStrategy", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "loadTrustMaterial", "(", "SSLContextBuilder", "sslContextBuilder", ")", "throws", "Exception", "{", "KeyStore", "trustStore", "=", "null", ";", "if", "(", "configuration", ".", "getTrustStorePath", "(", ")", "!", "=", "null", ")", "{", "trustStore", "=", "loadKeyStore", "(", "configuration", ".", "getTrustStoreType", "(", ")", ",", "configuration", ".", "getTrustStorePath", "(", ")", ",", "requireNonNull", "(", "configuration", ".", "getTrustStorePassword", "(", ")", ")", ")", ";", "}", "TrustStrategy", "trustStrategy", "=", "null", ";", "if", "(", "configuration", ".", "isTrustSelfSignedCertificates", "(", ")", ")", "{", "trustStrategy", "=", "new", "TrustSelfSignedStrategy", "(", ")", ";", "}", "sslContextBuilder", ".", "loadTrustMaterial", "(", "trustStore", ",", "trustStrategy", ")", ";", "}", "</s>"]
["<s>", "private", "static", "KeyStore", "loadKeyStore", "(", "String", "type", ",", "File", "path", ",", "String", "password", ")", "throws", "Exception", "{", "final", "KeyStore", "keyStore", "=", "KeyStore", ".", "getInstance", "(", "type", ")", ";", "try", "(", "InputStream", "inputStream", "=", "new", "FileInputStream", "(", "path", ")", ")", "{", "keyStore", ".", "load", "(", "inputStream", ",", "password", ".", "toCharArray", "(", ")", ")", ";", "}", "return", "keyStore", ";", "}", "</s>"]
["<s>", "public", "Duration", "getKeepAlive", "(", ")", "{", "return", "keepAlive", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setKeepAlive", "(", "Duration", "keepAlive", ")", "{", "this", ".", "keepAlive", "=", "keepAlive", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getMaxConnectionsPerRoute", "(", ")", "{", "return", "maxConnectionsPerRoute", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxConnectionsPerRoute", "(", "int", "maxConnectionsPerRoute", ")", "{", "this", ".", "maxConnectionsPerRoute", "=", "maxConnectionsPerRoute", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getTimeout", "(", ")", "{", "return", "timeout", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getConnectionTimeout", "(", ")", "{", "return", "connectionTimeout", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getTimeToLive", "(", ")", "{", "return", "timeToLive", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isCookiesEnabled", "(", ")", "{", "return", "cookiesEnabled", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTimeout", "(", "Duration", "duration", ")", "{", "this", ".", "timeout", "=", "duration", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setConnectionTimeout", "(", "Duration", "duration", ")", "{", "this", ".", "connectionTimeout", "=", "duration", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getConnectionRequestTimeout", "(", ")", "{", "return", "connectionRequestTimeout", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setConnectionRequestTimeout", "(", "Duration", "connectionRequestTimeout", ")", "{", "this", ".", "connectionRequestTimeout", "=", "connectionRequestTimeout", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTimeToLive", "(", "Duration", "timeToLive", ")", "{", "this", ".", "timeToLive", "=", "timeToLive", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setCookiesEnabled", "(", "boolean", "enabled", ")", "{", "this", ".", "cookiesEnabled", "=", "enabled", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getMaxConnections", "(", ")", "{", "return", "maxConnections", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxConnections", "(", "int", "maxConnections", ")", "{", "this", ".", "maxConnections", "=", "maxConnections", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getRetries", "(", ")", "{", "return", "retries", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setRetries", "(", "int", "retries", ")", "{", "this", ".", "retries", "=", "retries", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Optional", "<", "String", ">", "getUserAgent", "(", ")", "{", "return", "userAgent", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setUserAgent", "(", "Optional", "<", "String", ">", "userAgent", ")", "{", "this", ".", "userAgent", "=", "userAgent", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Nullable", "public", "ProxyConfiguration", "getProxyConfiguration", "(", ")", "{", "return", "proxyConfiguration", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "setProxyConfiguration", "(", "ProxyConfiguration", "proxyConfiguration", ")", "{", "this", ".", "proxyConfiguration", "=", "proxyConfiguration", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getValidateAfterInactivityPeriod", "(", ")", "{", "return", "validateAfterInactivityPeriod", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setValidateAfterInactivityPeriod", "(", "Duration", "validateAfterInactivityPeriod", ")", "{", "this", ".", "validateAfterInactivityPeriod", "=", "validateAfterInactivityPeriod", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Nullable", "public", "TlsConfiguration", "getTlsConfiguration", "(", ")", "{", "return", "tlsConfiguration", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "setTlsConfiguration", "(", "TlsConfiguration", "tlsConfiguration", ")", "{", "this", ".", "tlsConfiguration", "=", "tlsConfiguration", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "(", "Environment", "environment", ")", "{", "this", ".", "apacheHttpClientBuilder", "=", "new", "HttpClientBuilder", "(", "environment", ")", ";", "this", ".", "environment", "=", "environment", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "(", "MetricRegistry", "metricRegistry", ")", "{", "this", ".", "apacheHttpClientBuilder", "=", "new", "HttpClientBuilder", "(", "metricRegistry", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "public", "void", "setApacheHttpClientBuilder", "(", "HttpClientBuilder", "apacheHttpClientBuilder", ")", "{", "this", ".", "apacheHttpClientBuilder", "=", "apacheHttpClientBuilder", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "withProvider", "(", "Object", "provider", ")", "{", "singletons", ".", "add", "(", "requireNonNull", "(", "provider", ")", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "withProvider", "(", "Class", "<", "?", ">", "klass", ")", "{", "providers", ".", "add", "(", "requireNonNull", "(", "klass", ")", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "withProperty", "(", "String", "propertyName", ",", "Object", "propertyValue", ")", "{", "properties", ".", "put", "(", "propertyName", ",", "propertyValue", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "JerseyClientConfiguration", "configuration", ")", "{", "this", ".", "configuration", "=", "configuration", ";", "apacheHttpClientBuilder", ".", "using", "(", "configuration", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "Environment", "environment", ")", "{", "this", ".", "environment", "=", "environment", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "Validator", "validator", ")", "{", "this", ".", "validator", "=", "validator", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "ExecutorService", "executorService", ",", "ObjectMapper", "objectMapper", ")", "{", "this", ".", "executorService", "=", "executorService", ";", "this", ".", "objectMapper", "=", "objectMapper", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "ExecutorService", "executorService", ")", "{", "this", ".", "executorService", "=", "executorService", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "ObjectMapper", "objectMapper", ")", "{", "this", ".", "objectMapper", "=", "objectMapper", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "ConnectorProvider", "connectorProvider", ")", "{", "this", ".", "connectorProvider", "=", "connectorProvider", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "HttpRequestRetryHandler", "httpRequestRetryHandler", ")", "{", "apacheHttpClientBuilder", ".", "using", "(", "httpRequestRetryHandler", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "DnsResolver", "resolver", ")", "{", "apacheHttpClientBuilder", ".", "using", "(", "resolver", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "HostnameVerifier", "verifier", ")", "{", "apacheHttpClientBuilder", ".", "using", "(", "verifier", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "Registry", "<", "ConnectionSocketFactory", ">", "registry", ")", "{", "apacheHttpClientBuilder", ".", "using", "(", "registry", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "HttpClientMetricNameStrategy", "metricNameStrategy", ")", "{", "apacheHttpClientBuilder", ".", "using", "(", "metricNameStrategy", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "name", "(", "String", "environmentName", ")", "{", "apacheHttpClientBuilder", ".", "name", "(", "environmentName", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "HttpRoutePlanner", "routePlanner", ")", "{", "apacheHttpClientBuilder", ".", "using", "(", "routePlanner", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "CredentialsProvider", "credentialsProvider", ")", "{", "apacheHttpClientBuilder", ".", "using", "(", "credentialsProvider", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JerseyClientBuilder", "using", "(", "ServiceUnavailableRetryStrategy", "serviceUnavailableRetryStrategy", ")", "{", "apacheHttpClientBuilder", ".", "using", "(", "serviceUnavailableRetryStrategy", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "<", "RX", "extends", "RxInvoker", ">", "RxClient", "<", "RX", ">", "buildRx", "(", "String", "name", ",", "Class", "<", "RX", ">", "invokerType", ")", "{", "return", "Rx", ".", "from", "(", "build", "(", "name", ")", ",", "invokerType", ",", "executorService", ")", ";", "}", "</s>"]
["<s>", "public", "Client", "build", "(", "String", "name", ")", "{", "if", "(", "(", "environment", "=", "=", "null", ")", "&", "&", "(", "(", "executorService", "=", "=", "null", ")", "|", "|", "(", "objectMapper", "=", "=", "null", ")", ")", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "executorService", "=", "=", "null", ")", "{", "executorService", "=", "requireNonNull", "(", "environment", ")", ".", "lifecycle", "(", ")", ".", "executorService", "(", "\"", "<STR_LIT>", "\"", "+", "name", "+", "\"", "<STR_LIT>", "\"", ")", ".", "minThreads", "(", "configuration", ".", "getMinThreads", "(", ")", ")", ".", "maxThreads", "(", "configuration", ".", "getMaxThreads", "(", ")", ")", ".", "workQueue", "(", "new", "ArrayBlockingQueue", "<", ">", "(", "configuration", ".", "getWorkQueueSize", "(", ")", ")", ")", ".", "build", "(", ")", ";", "}", "if", "(", "objectMapper", "=", "=", "null", ")", "{", "objectMapper", "=", "requireNonNull", "(", "environment", ")", ".", "getObjectMapper", "(", ")", ";", "}", "if", "(", "environment", "!", "=", "null", ")", "{", "validator", "=", "environment", ".", "getValidator", "(", ")", ";", "}", "return", "build", "(", "name", ",", "executorService", ",", "objectMapper", ",", "validator", ")", ";", "}", "</s>"]
["<s>", "private", "Client", "build", "(", "String", "name", ",", "ExecutorService", "threadPool", ",", "ObjectMapper", "objectMapper", ",", "Validator", "validator", ")", "{", "if", "(", "!", "configuration", ".", "isGzipEnabled", "(", ")", ")", "{", "apacheHttpClientBuilder", ".", "disableContentCompression", "(", "true", ")", ";", "}", "final", "Client", "client", "=", "ClientBuilder", ".", "newClient", "(", "buildConfig", "(", "name", ",", "threadPool", ",", "objectMapper", ",", "validator", ")", ")", ";", "client", ".", "register", "(", "new", "JerseyIgnoreRequestUserAgentHeaderFilter", "(", ")", ")", ";", "if", "(", "environment", "!", "=", "null", ")", "{", "environment", ".", "lifecycle", "(", ")", ".", "manage", "(", "new", "Managed", "(", ")", "{", "@", "Override", "public", "void", "start", "(", ")", "throws", "Exception", "{", "}", "@", "Override", "public", "void", "stop", "(", ")", "throws", "Exception", "{", "client", ".", "close", "(", ")", ";", "}", "}", ")", ";", "}", "if", "(", "configuration", ".", "isGzipEnabled", "(", ")", ")", "{", "client", ".", "register", "(", "new", "GZipDecoder", "(", ")", ")", ";", "client", ".", "register", "(", "new", "ConfiguredGZipEncoder", "(", "configuration", ".", "isGzipEnabledForRequests", "(", ")", ")", ")", ";", "}", "return", "client", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "start", "(", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "stop", "(", ")", "throws", "Exception", "{", "client", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Configuration", "buildConfig", "(", "final", "String", "name", ",", "final", "ExecutorService", "threadPool", ",", "final", "ObjectMapper", "objectMapper", ",", "final", "Validator", "validator", ")", "{", "final", "ClientConfig", "config", "=", "new", "ClientConfig", "(", ")", ";", "for", "(", "Object", "singleton", ":", "this", ".", "singletons", ")", "{", "config", ".", "register", "(", "singleton", ")", ";", "}", "for", "(", "Class", "<", "?", ">", "provider", ":", "this", ".", "providers", ")", "{", "config", ".", "register", "(", "provider", ")", ";", "}", "config", ".", "register", "(", "new", "JacksonBinder", "(", "objectMapper", ")", ")", ";", "config", ".", "register", "(", "new", "HibernateValidationFeature", "(", "validator", ")", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "Object", ">", "property", ":", "this", ".", "properties", ".", "entrySet", "(", ")", ")", "{", "config", ".", "property", "(", "property", ".", "getKey", "(", ")", ",", "property", ".", "getValue", "(", ")", ")", ";", "}", "config", ".", "register", "(", "new", "DropwizardExecutorProvider", "(", "threadPool", ")", ")", ";", "if", "(", "connectorProvider", "=", "=", "null", ")", "{", "final", "ConfiguredCloseableHttpClient", "apacheHttpClient", "=", "apacheHttpClientBuilder", ".", "buildWithDefaultRequestConfiguration", "(", "name", ")", ";", "connectorProvider", "=", "(", "client", ",", "runtimeConfig", ")", "-", ">", "createDropwizardApacheConnector", "(", "apacheHttpClient", ")", ";", "}", "config", ".", "connectorProvider", "(", "connectorProvider", ")", ";", "return", "config", ";", "}", "</s>"]
["<s>", "protected", "DropwizardApacheConnector", "createDropwizardApacheConnector", "(", "ConfiguredCloseableHttpClient", "configuredClient", ")", "{", "return", "new", "DropwizardApacheConnector", "(", "configuredClient", ".", "getClient", "(", ")", ",", "configuredClient", ".", "getDefaultRequestConfig", "(", ")", ",", "configuration", ".", "isChunkedEncodingEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "ConfiguredCloseableHttpClient", "(", "CloseableHttpClient", "closeableHttpClient", ",", "RequestConfig", "defaultRequestConfig", ")", "{", "this", ".", "closeableHttpClient", "=", "closeableHttpClient", ";", "this", ".", "defaultRequestConfig", "=", "defaultRequestConfig", ";", "}", "</s>"]
["<s>", "public", "RequestConfig", "getDefaultRequestConfig", "(", ")", "{", "return", "defaultRequestConfig", ";", "}", "</s>"]
["<s>", "public", "CloseableHttpClient", "getClient", "(", ")", "{", "return", "closeableHttpClient", ";", "}", "</s>"]
["<s>", "public", "DropwizardApacheConnector", "(", "CloseableHttpClient", "client", ",", "@", "Nullable", "RequestConfig", "defaultRequestConfig", ",", "boolean", "chunkedEncodingEnabled", ")", "{", "this", ".", "client", "=", "client", ";", "this", ".", "defaultRequestConfig", "=", "defaultRequestConfig", ";", "this", ".", "chunkedEncodingEnabled", "=", "chunkedEncodingEnabled", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ClientResponse", "apply", "(", "ClientRequest", "jerseyRequest", ")", "{", "try", "{", "final", "HttpUriRequest", "apacheRequest", "=", "buildApacheRequest", "(", "jerseyRequest", ")", ";", "final", "CloseableHttpResponse", "apacheResponse", "=", "client", ".", "execute", "(", "apacheRequest", ")", ";", "final", "StatusLine", "statusLine", "=", "apacheResponse", ".", "getStatusLine", "(", ")", ";", "final", "Response", ".", "StatusType", "status", "=", "Statuses", ".", "from", "(", "statusLine", ".", "getStatusCode", "(", ")", ",", "firstNonNull", "(", "statusLine", ".", "getReasonPhrase", "(", ")", ",", "\"", "\"", ")", ")", ";", "final", "ClientResponse", "jerseyResponse", "=", "new", "ClientResponse", "(", "status", ",", "jerseyRequest", ")", ";", "for", "(", "Header", "header", ":", "apacheResponse", ".", "getAllHeaders", "(", ")", ")", "{", "final", "List", "<", "String", ">", "headerValues", "=", "jerseyResponse", ".", "getHeaders", "(", ")", ".", "get", "(", "header", ".", "getName", "(", ")", ")", ";", "if", "(", "headerValues", "=", "=", "null", ")", "{", "jerseyResponse", ".", "getHeaders", "(", ")", ".", "put", "(", "header", ".", "getName", "(", ")", ",", "Lists", ".", "newArrayList", "(", "header", ".", "getValue", "(", ")", ")", ")", ";", "}", "else", "{", "headerValues", ".", "add", "(", "header", ".", "getValue", "(", ")", ")", ";", "}", "}", "final", "HttpEntity", "httpEntity", "=", "apacheResponse", ".", "getEntity", "(", ")", ";", "jerseyResponse", ".", "setEntityStream", "(", "httpEntity", "!", "=", "null", "?", "httpEntity", ".", "getContent", "(", ")", ":", "new", "ByteArrayInputStream", "(", "new", "byte", "[", "0", "]", ")", ")", ";", "return", "jerseyResponse", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "ProcessingException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "HttpUriRequest", "buildApacheRequest", "(", "ClientRequest", "jerseyRequest", ")", "{", "final", "RequestBuilder", "builder", "=", "RequestBuilder", ".", "create", "(", "jerseyRequest", ".", "getMethod", "(", ")", ")", ".", "setUri", "(", "jerseyRequest", ".", "getUri", "(", ")", ")", ".", "setEntity", "(", "getHttpEntity", "(", "jerseyRequest", ")", ")", ";", "for", "(", "String", "headerName", ":", "jerseyRequest", ".", "getHeaders", "(", ")", ".", "keySet", "(", ")", ")", "{", "builder", ".", "addHeader", "(", "headerName", ",", "jerseyRequest", ".", "getHeaderString", "(", "headerName", ")", ")", ";", "}", "final", "Optional", "<", "RequestConfig", ">", "requestConfig", "=", "addJerseyRequestConfig", "(", "jerseyRequest", ")", ";", "requestConfig", ".", "ifPresent", "(", "builder", ":", ":", "setConfig", ")", ";", "return", "builder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Optional", "<", "RequestConfig", ">", "addJerseyRequestConfig", "(", "ClientRequest", "clientRequest", ")", "{", "final", "Integer", "timeout", "=", "clientRequest", ".", "resolveProperty", "(", "ClientProperties", ".", "READ_TIMEOUT", ",", "Integer", ".", "class", ")", ";", "final", "Integer", "connectTimeout", "=", "clientRequest", ".", "resolveProperty", "(", "ClientProperties", ".", "CONNECT_TIMEOUT", ",", "Integer", ".", "class", ")", ";", "final", "Boolean", "followRedirects", "=", "clientRequest", ".", "resolveProperty", "(", "ClientProperties", ".", "FOLLOW_REDIRECTS", ",", "Boolean", ".", "class", ")", ";", "if", "(", "timeout", "!", "=", "null", "|", "|", "connectTimeout", "!", "=", "null", "|", "|", "followRedirects", "!", "=", "null", ")", "{", "final", "RequestConfig", ".", "Builder", "requestConfig", "=", "RequestConfig", ".", "copy", "(", "defaultRequestConfig", ")", ";", "if", "(", "timeout", "!", "=", "null", ")", "{", "requestConfig", ".", "setSocketTimeout", "(", "timeout", ")", ";", "}", "if", "(", "connectTimeout", "!", "=", "null", ")", "{", "requestConfig", ".", "setConnectTimeout", "(", "connectTimeout", ")", ";", "}", "if", "(", "followRedirects", "!", "=", "null", ")", "{", "requestConfig", ".", "setRedirectsEnabled", "(", "followRedirects", ")", ";", "}", "return", "Optional", ".", "of", "(", "requestConfig", ".", "build", "(", ")", ")", ";", "}", "return", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Nullable", "protected", "HttpEntity", "getHttpEntity", "(", "ClientRequest", "jerseyRequest", ")", "{", "if", "(", "jerseyRequest", ".", "getEntity", "(", ")", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "chunkedEncodingEnabled", "?", "new", "JerseyRequestHttpEntity", "(", "jerseyRequest", ")", ":", "new", "BufferedJerseyRequestHttpEntity", "(", "jerseyRequest", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Future", "<", "?", ">", "apply", "(", "final", "ClientRequest", "request", ",", "final", "AsyncConnectorCallback", "callback", ")", "{", "return", "MoreExecutors", ".", "newDirectExecutorService", "(", ")", ".", "submit", "(", "(", ")", "-", ">", "{", "try", "{", "callback", ".", "response", "(", "apply", "(", "request", ")", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "callback", ".", "failure", "(", "e", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getName", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "APACHE_HTTP_CLIENT_VERSION", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "{", "}", "</s>"]
["<s>", "private", "JerseyRequestHttpEntity", "(", "ClientRequest", "clientRequest", ")", "{", "this", ".", "clientRequest", "=", "clientRequest", ";", "setChunked", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getContentLength", "(", ")", "{", "return", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "getContent", "(", ")", "throws", "IOException", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "writeTo", "(", "final", "OutputStream", "outputStream", ")", "throws", "IOException", "{", "clientRequest", ".", "setStreamProvider", "(", "contentLength", "-", ">", "outputStream", ")", ";", "clientRequest", ".", "writeEntity", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isStreaming", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "private", "BufferedJerseyRequestHttpEntity", "(", "ClientRequest", "clientRequest", ")", "{", "final", "ByteArrayOutputStream", "stream", "=", "new", "ByteArrayOutputStream", "(", "BUFFER_INITIAL_SIZE", ")", ";", "clientRequest", ".", "setStreamProvider", "(", "contentLength", "-", ">", "stream", ")", ";", "try", "{", "clientRequest", ".", "writeEntity", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "ProcessingException", "(", "LocalizationMessages", ".", "ERROR_BUFFERING_ENTITY", "(", ")", ",", "e", ")", ";", "}", "buffer", "=", "stream", ".", "toByteArray", "(", ")", ";", "setChunked", "(", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getContentLength", "(", ")", "{", "return", "buffer", ".", "length", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "getContent", "(", ")", "throws", "IOException", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "writeTo", "(", "OutputStream", "outstream", ")", "throws", "IOException", "{", "outstream", ".", "write", "(", "buffer", ")", ";", "outstream", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isStreaming", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "ClientRequestContext", "requestContext", ")", "throws", "IOException", "{", "(", "(", "ClientRequest", ")", "requestContext", ")", ".", "ignoreUserAgent", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTrustSelfSignedCertificates", "(", "boolean", "trustSelfSignedCertificates", ")", "{", "this", ".", "trustSelfSignedCertificates", "=", "trustSelfSignedCertificates", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isTrustSelfSignedCertificates", "(", ")", "{", "return", "trustSelfSignedCertificates", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "File", "getKeyStorePath", "(", ")", "{", "return", "keyStorePath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setKeyStorePath", "(", "File", "keyStorePath", ")", "{", "this", ".", "keyStorePath", "=", "keyStorePath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getKeyStorePassword", "(", ")", "{", "return", "keyStorePassword", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setKeyStorePassword", "(", "String", "keyStorePassword", ")", "{", "this", ".", "keyStorePassword", "=", "keyStorePassword", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getKeyStoreType", "(", ")", "{", "return", "keyStoreType", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setKeyStoreType", "(", "String", "keyStoreType", ")", "{", "this", ".", "keyStoreType", "=", "keyStoreType", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getTrustStoreType", "(", ")", "{", "return", "trustStoreType", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTrustStoreType", "(", "String", "trustStoreType", ")", "{", "this", ".", "trustStoreType", "=", "trustStoreType", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "File", "getTrustStorePath", "(", ")", "{", "return", "trustStorePath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTrustStorePath", "(", "File", "trustStorePath", ")", "{", "this", ".", "trustStorePath", "=", "trustStorePath", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getTrustStorePassword", "(", ")", "{", "return", "trustStorePassword", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTrustStorePassword", "(", "String", "trustStorePassword", ")", "{", "this", ".", "trustStorePassword", "=", "trustStorePassword", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "isVerifyHostname", "(", ")", "{", "return", "verifyHostname", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setVerifyHostname", "(", "boolean", "verifyHostname", ")", "{", "this", ".", "verifyHostname", "=", "verifyHostname", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getProtocol", "(", ")", "{", "return", "protocol", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setProtocol", "(", "String", "protocol", ")", "{", "this", ".", "protocol", "=", "protocol", ";", "}", "</s>"]
["<s>", "@", "Nullable", "@", "JsonProperty", "public", "List", "<", "String", ">", "getSupportedCiphers", "(", ")", "{", "return", "supportedCiphers", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setSupportedCiphers", "(", "@", "Nullable", "List", "<", "String", ">", "supportedCiphers", ")", "{", "this", ".", "supportedCiphers", "=", "supportedCiphers", ";", "}", "</s>"]
["<s>", "@", "Nullable", "@", "JsonProperty", "public", "List", "<", "String", ">", "getSupportedProtocols", "(", ")", "{", "return", "supportedProtocols", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setSupportedProtocols", "(", "@", "Nullable", "List", "<", "String", ">", "supportedProtocols", ")", "{", "this", ".", "supportedProtocols", "=", "supportedProtocols", ";", "}", "</s>"]
["<s>", "@", "Nullable", "@", "JsonProperty", "public", "String", "getCertAlias", "(", ")", "{", "return", "certAlias", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setCertAlias", "(", "@", "Nullable", "String", "certAlias", ")", "{", "this", ".", "certAlias", "=", "certAlias", ";", "}", "</s>"]
["<s>", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isValidKeyStorePassword", "(", ")", "{", "return", "keyStorePath", "=", "=", "null", "|", "|", "keyStoreType", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", "|", "|", "!", "Strings", ".", "isNullOrEmpty", "(", "keyStorePassword", ")", ";", "}", "</s>"]
["<s>", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isValidTrustStorePassword", "(", ")", "{", "return", "trustStorePath", "=", "=", "null", "|", "|", "trustStoreType", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", "|", "|", "!", "Strings", ".", "isNullOrEmpty", "(", "trustStorePassword", ")", ";", "}", "</s>"]
["<s>", "public", "AuthConfiguration", "(", ")", "{", "}", "</s>"]
["<s>", "public", "AuthConfiguration", "(", "String", "username", ",", "String", "password", ")", "{", "this", ".", "username", "=", "username", ";", "this", ".", "password", "=", "password", ";", "}", "</s>"]
["<s>", "public", "AuthConfiguration", "(", "String", "username", ",", "String", "password", ",", "String", "authScheme", ",", "String", "realm", ",", "String", "hostname", ",", "String", "domain", ",", "String", "credentialType", ")", "{", "this", ".", "username", "=", "username", ";", "this", ".", "password", "=", "password", ";", "this", ".", "authScheme", "=", "authScheme", ";", "this", ".", "realm", "=", "realm", ";", "this", ".", "hostname", "=", "hostname", ";", "this", ".", "domain", "=", "domain", ";", "this", ".", "credentialType", "=", "credentialType", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getUsername", "(", ")", "{", "return", "username", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setUsername", "(", "String", "username", ")", "{", "this", ".", "username", "=", "username", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getPassword", "(", ")", "{", "return", "password", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setPassword", "(", "String", "password", ")", "{", "this", ".", "password", "=", "password", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getAuthScheme", "(", ")", "{", "return", "authScheme", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setAuthScheme", "(", "String", "authScheme", ")", "{", "this", ".", "authScheme", "=", "authScheme", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getRealm", "(", ")", "{", "return", "realm", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setRealm", "(", "String", "realm", ")", "{", "this", ".", "realm", "=", "realm", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getHostname", "(", ")", "{", "return", "hostname", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setHostname", "(", "String", "hostname", ")", "{", "this", ".", "hostname", "=", "hostname", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getDomain", "(", ")", "{", "return", "domain", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setDomain", "(", "String", "domain", ")", "{", "this", ".", "domain", "=", "domain", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getCredentialType", "(", ")", "{", "return", "credentialType", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setCredentialType", "(", "String", "credentialType", ")", "{", "this", ".", "credentialType", "=", "credentialType", ";", "}", "</s>"]
["<s>", "public", "ProxyConfiguration", "(", ")", "{", "}", "</s>"]
["<s>", "public", "ProxyConfiguration", "(", "@", "NotNull", "String", "host", ")", "{", "this", ".", "host", "=", "host", ";", "}", "</s>"]
["<s>", "public", "ProxyConfiguration", "(", "@", "NotNull", "String", "host", ",", "int", "port", ")", "{", "this", "(", "host", ")", ";", "this", ".", "port", "=", "port", ";", "}", "</s>"]
["<s>", "public", "ProxyConfiguration", "(", "@", "NotNull", "String", "host", ",", "int", "port", ",", "String", "scheme", ",", "AuthConfiguration", "auth", ")", "{", "this", "(", "host", ",", "port", ")", ";", "this", ".", "scheme", "=", "scheme", ";", "this", ".", "auth", "=", "auth", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getHost", "(", ")", "{", "return", "host", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setHost", "(", "String", "host", ")", "{", "this", ".", "host", "=", "host", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Integer", "getPort", "(", ")", "{", "return", "port", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setPort", "(", "Integer", "port", ")", "{", "this", ".", "port", "=", "port", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getScheme", "(", ")", "{", "return", "scheme", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setScheme", "(", "String", "scheme", ")", "{", "this", ".", "scheme", "=", "scheme", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "List", "<", "String", ">", "getNonProxyHosts", "(", ")", "{", "return", "nonProxyHosts", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setNonProxyHosts", "(", "List", "<", "String", ">", "nonProxyHosts", ")", "{", "this", ".", "nonProxyHosts", "=", "nonProxyHosts", ";", "}", "</s>"]
["<s>", "@", "Nullable", "public", "AuthConfiguration", "getAuth", "(", ")", "{", "return", "auth", ";", "}", "</s>"]
["<s>", "public", "void", "setAuth", "(", "AuthConfiguration", "auth", ")", "{", "this", ".", "auth", "=", "auth", ";", "}", "</s>"]
["<s>", "public", "NonProxyListProxyRoutePlanner", "(", "HttpHost", "proxy", ",", "@", "Nullable", "List", "<", "String", ">", "nonProxyHosts", ")", "{", "super", "(", "proxy", ",", "null", ")", ";", "nonProxyHostPatterns", "=", "getNonProxyHostPatterns", "(", "nonProxyHosts", ")", ";", "}", "</s>"]
["<s>", "public", "NonProxyListProxyRoutePlanner", "(", "HttpHost", "proxy", ",", "SchemePortResolver", "schemePortResolver", ",", "@", "Nullable", "List", "<", "String", ">", "nonProxyHosts", ")", "{", "super", "(", "proxy", ",", "schemePortResolver", ")", ";", "this", ".", "nonProxyHostPatterns", "=", "getNonProxyHostPatterns", "(", "nonProxyHosts", ")", ";", "}", "</s>"]
["<s>", "private", "List", "<", "Pattern", ">", "getNonProxyHostPatterns", "(", "@", "Nullable", "List", "<", "String", ">", "nonProxyHosts", ")", "{", "if", "(", "nonProxyHosts", "=", "=", "null", ")", "{", "return", "ImmutableList", ".", "of", "(", ")", ";", "}", "final", "ImmutableList", ".", "Builder", "<", "Pattern", ">", "patterns", "=", "ImmutableList", ".", "builder", "(", ")", ";", "for", "(", "String", "nonProxyHost", ":", "nonProxyHosts", ")", "{", "patterns", ".", "add", "(", "Pattern", ".", "compile", "(", "WILDCARD", ".", "matcher", "(", "nonProxyHost", ")", ".", "replaceAll", "(", "REGEX_WILDCARD", ")", ")", ")", ";", "}", "return", "patterns", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "protected", "List", "<", "Pattern", ">", "getNonProxyHostPatterns", "(", ")", "{", "return", "nonProxyHostPatterns", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "protected", "HttpHost", "determineProxy", "(", "HttpHost", "target", ",", "HttpRequest", "request", ",", "HttpContext", "context", ")", "throws", "HttpException", "{", "for", "(", "Pattern", "nonProxyHostPattern", ":", "nonProxyHostPatterns", ")", "{", "if", "(", "nonProxyHostPattern", ".", "matcher", "(", "target", ".", "getHostName", "(", ")", ")", ".", "matches", "(", ")", ")", "{", "return", "null", ";", "}", "}", "return", "super", ".", "determineProxy", "(", "target", ",", "request", ",", "context", ")", ";", "}", "</s>"]
["<s>", "public", "RelativeView", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "protected", "ErrorView", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "BadView", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "AbsoluteView", "showAbsolute", "(", ")", "{", "return", "new", "AbsoluteView", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "RelativeView", "showRelative", "(", ")", "{", "return", "new", "RelativeView", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "BadView", "showBad", "(", ")", "{", "return", "new", "BadView", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "ErrorView", "showError", "(", ")", "{", "return", "new", "ErrorView", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "forceSet", "(", "TestProperties", ".", "CONTAINER_PORT", ",", "\"", "<STR_LIT:0>", "\"", ")", ";", "ResourceConfig", "config", "=", "new", "ResourceConfig", "(", ")", ";", "final", "ViewRenderer", "renderer", "=", "new", "MustacheViewRenderer", "(", ")", ";", "renderer", ".", "configure", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "config", ".", "register", "(", "new", "ViewMessageBodyWriter", "(", "new", "MetricRegistry", "(", ")", ",", "ImmutableList", ".", "of", "(", "renderer", ")", ")", ")", ";", "config", ".", "register", "(", "new", "ViewRenderExceptionMapper", "(", ")", ")", ";", "config", ".", "register", "(", "new", "ExampleResource", "(", ")", ")", ";", "return", "config", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rendersViewsWithAbsoluteTemplatePaths", "(", ")", "throws", "Exception", "{", "final", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rendersViewsWithRelativeTemplatePaths", "(", ")", "throws", "Exception", "{", "final", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA500ForViewsWithBadTemplatePaths", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ViewRenderExceptionMapper", ".", "TEMPLATE_ERROR_MSG", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA500ForViewsThatCantCompile", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ViewRenderExceptionMapper", ".", "TEMPLATE_ERROR_MSG", ")", ";", "}", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "AbsoluteView", "showAbsolute", "(", ")", "{", "return", "new", "AbsoluteView", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "RelativeView", "showRelative", "(", ")", "{", "return", "new", "RelativeView", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "BadView", "showBad", "(", ")", "{", "return", "new", "BadView", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "ErrorView", "showError", "(", ")", "{", "return", "new", "ErrorView", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "forceSet", "(", "TestProperties", ".", "CONTAINER_PORT", ",", "\"", "<STR_LIT:0>", "\"", ")", ";", "ResourceConfig", "config", "=", "new", "ResourceConfig", "(", ")", ";", "final", "ViewRenderer", "renderer", "=", "new", "MustacheViewRenderer", "(", ")", ";", "config", ".", "register", "(", "new", "ViewMessageBodyWriter", "(", "new", "MetricRegistry", "(", ")", ",", "ImmutableList", ".", "of", "(", "renderer", ")", ")", ")", ";", "config", ".", "register", "(", "new", "ViewRenderExceptionMapper", "(", ")", ")", ";", "config", ".", "register", "(", "new", "ExampleResource", "(", ")", ")", ";", "return", "config", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rendersViewsWithAbsoluteTemplatePaths", "(", ")", "throws", "Exception", "{", "final", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rendersViewsWithRelativeTemplatePaths", "(", ")", "throws", "Exception", "{", "final", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA500ForViewsWithBadTemplatePaths", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ViewRenderExceptionMapper", ".", "TEMPLATE_ERROR_MSG", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA500ForViewsThatCantCompile", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ViewRenderExceptionMapper", ".", "TEMPLATE_ERROR_MSG", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "cacheByDefault", "(", ")", "{", "MustacheViewRenderer", "mustacheViewRenderer", "=", "new", "MustacheViewRenderer", "(", ")", ";", "mustacheViewRenderer", ".", "configure", "(", "ImmutableMap", ".", "of", "(", ")", ")", ";", "assertThat", "(", "mustacheViewRenderer", ".", "isUseCache", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canDisableCache", "(", ")", "{", "MustacheViewRenderer", "mustacheViewRenderer", "=", "new", "MustacheViewRenderer", "(", ")", ";", "mustacheViewRenderer", ".", "configure", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "mustacheViewRenderer", ".", "isUseCache", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "public", "AbsoluteView", "(", "String", "name", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "MustacheViewRenderer", "(", ")", "{", "this", ".", "factories", "=", "CacheBuilder", ".", "newBuilder", "(", ")", ".", "build", "(", "new", "CacheLoader", "<", "Class", "<", "?", "extends", "View", ">", ",", "MustacheFactory", ">", "(", ")", "{", "@", "Override", "public", "MustacheFactory", "load", "(", "Class", "<", "?", "extends", "View", ">", "key", ")", "throws", "Exception", "{", "return", "createNewMustacheFactory", "(", "key", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "MustacheFactory", "load", "(", "Class", "<", "?", "extends", "View", ">", "key", ")", "throws", "Exception", "{", "return", "createNewMustacheFactory", "(", "key", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isRenderable", "(", "View", "view", ")", "{", "return", "FILE_PATTERN", ".", "matcher", "(", "view", ".", "getTemplateName", "(", ")", ")", ".", "find", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "render", "(", "View", "view", ",", "Locale", "locale", ",", "OutputStream", "output", ")", "throws", "IOException", "{", "try", "{", "final", "MustacheFactory", "mustacheFactory", "=", "useCache", "?", "factories", ".", "get", "(", "view", ".", "getClass", "(", ")", ")", ":", "createNewMustacheFactory", "(", "view", ".", "getClass", "(", ")", ")", ";", "final", "Mustache", "template", "=", "mustacheFactory", ".", "compile", "(", "view", ".", "getTemplateName", "(", ")", ")", ";", "final", "Charset", "charset", "=", "view", ".", "getCharset", "(", ")", ".", "orElse", "(", "StandardCharsets", ".", "UTF_8", ")", ";", "try", "(", "OutputStreamWriter", "writer", "=", "new", "OutputStreamWriter", "(", "output", ",", "charset", ")", ")", "{", "template", ".", "execute", "(", "writer", ",", "view", ")", ";", "}", "}", "catch", "(", "Throwable", "e", ")", "{", "throw", "new", "ViewRenderException", "(", "\"", "<STR_LIT>", "\"", "+", "view", ".", "getTemplateName", "(", ")", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Map", "<", "String", ",", "String", ">", "options", ")", "{", "useCache", "=", "Optional", ".", "ofNullable", "(", "options", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "map", "(", "Boolean", ":", ":", "parseBoolean", ")", ".", "orElse", "(", "true", ")", ";", "fileRoot", "=", "Optional", ".", "ofNullable", "(", "options", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "map", "(", "File", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "boolean", "isUseCache", "(", ")", "{", "return", "useCache", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getConfigurationKey", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "private", "MustacheFactory", "createNewMustacheFactory", "(", "Class", "<", "?", "extends", "View", ">", "key", ")", "{", "return", "new", "DefaultMustacheFactory", "(", "fileRoot", ".", "isPresent", "(", ")", "?", "new", "FileSystemResolver", "(", "fileRoot", ".", "get", "(", ")", ")", ":", "new", "PerClassMustacheResolver", "(", "key", ")", ")", ";", "}", "</s>"]
["<s>", "PerClassMustacheResolver", "(", "Class", "<", "?", "extends", "View", ">", "klass", ")", "{", "this", ".", "klass", "=", "klass", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "Reader", "getReader", "(", "String", "resourceName", ")", "{", "final", "InputStream", "is", "=", "klass", ".", "getResourceAsStream", "(", "resourceName", ")", ";", "if", "(", "is", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "new", "BufferedReader", "(", "new", "InputStreamReader", "(", "is", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "forceSet", "(", "TestProperties", ".", "CONTAINER_PORT", ",", "\"", "<STR_LIT:0>", "\"", ")", ";", "final", "ViewRenderer", "renderer", "=", "new", "FreemarkerViewRenderer", "(", ")", ";", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "new", "ViewMessageBodyWriter", "(", "new", "MetricRegistry", "(", ")", ",", "ImmutableList", ".", "of", "(", "renderer", ")", ")", ")", ".", "register", "(", "new", "InfoMessageBodyWriter", "(", ")", ")", ".", "register", "(", "new", "ExampleResource", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testJsonContentType", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "request", "(", ")", ".", "accept", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHtmlContentType", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "request", "(", ")", ".", "accept", "(", "MediaType", ".", "TEXT_HTML_TYPE", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testOnlyJsonContentType", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "accept", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testOnlyHtmlContentType", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "accept", "(", "MediaType", ".", "TEXT_HTML_TYPE", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Produces", "(", "{", "MediaType", ".", "APPLICATION_JSON", ",", "MediaType", ".", "TEXT_HTML", "}", ")", "public", "Response", "getInfoCombined", "(", ")", "{", "final", "Info", "info", "=", "new", "Info", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "Response", ".", "ok", "(", "info", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Produces", "(", "MediaType", ".", "APPLICATION_JSON", ")", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Response", "getInfoJson", "(", ")", "{", "final", "Info", "info", "=", "new", "Info", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "Response", ".", "ok", "(", "info", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Produces", "(", "MediaType", ".", "TEXT_HTML", ")", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Response", "getInfoHtml", "(", ")", "{", "final", "Info", "info", "=", "new", "Info", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "Response", ".", "ok", "(", "info", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Info", "(", "String", "title", ",", "String", "content", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "title", "=", "title", ";", "this", ".", "content", "=", "content", ";", "}", "</s>"]
["<s>", "public", "String", "getTitle", "(", ")", "{", "return", "title", ";", "}", "</s>"]
["<s>", "public", "String", "getContent", "(", ")", "{", "return", "content", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isWriteable", "(", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "Info", ".", "class", ".", "isAssignableFrom", "(", "type", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getSize", "(", "Info", "info", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "writeTo", "(", "Info", "info", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ",", "MultivaluedMap", "<", "String", ",", "Object", ">", "httpHeaders", ",", "OutputStream", "entityStream", ")", "throws", "IOException", ",", "WebApplicationException", "{", "Jackson", ".", "newObjectMapper", "(", ")", ".", "writeValue", "(", "entityStream", ",", "info", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "AbsoluteView", "showAbsolute", "(", ")", "{", "return", "new", "AbsoluteView", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "RelativeView", "showRelative", "(", ")", "{", "return", "new", "RelativeView", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "BadView", "showBad", "(", ")", "{", "return", "new", "BadView", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "ErrorView", "showError", "(", ")", "{", "return", "new", "ErrorView", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "AutoEscapingView", "showUserInputSafely", "(", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "userInput", ")", "{", "return", "new", "AutoEscapingView", "(", "userInput", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "ResourceConfig", "config", "=", "new", "ResourceConfig", "(", ")", ";", "final", "ViewRenderer", "renderer", "=", "new", "FreemarkerViewRenderer", "(", ")", ";", "config", ".", "register", "(", "new", "ViewMessageBodyWriter", "(", "new", "MetricRegistry", "(", ")", ",", "ImmutableList", ".", "of", "(", "renderer", ")", ")", ")", ";", "config", ".", "register", "(", "new", "ExampleResource", "(", ")", ")", ";", "config", ".", "register", "(", "new", "ViewRenderExceptionMapper", "(", ")", ")", ";", "return", "config", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rendersViewsWithAbsoluteTemplatePaths", "(", ")", "throws", "Exception", "{", "final", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rendersViewsWithRelativeTemplatePaths", "(", ")", "throws", "Exception", "{", "final", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA500ForViewsWithBadTemplatePaths", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ViewRenderExceptionMapper", ".", "TEMPLATE_ERROR_MSG", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA500ForViewsThatCantCompile", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ViewRenderExceptionMapper", ".", "TEMPLATE_ERROR_MSG", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rendersViewsUsingUnsafeInputWithAutoEscapingEnabled", "(", ")", "throws", "Exception", "{", "final", "String", "unsafe", "=", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "new", "Form", "(", "\"", "<STR_LIT>", "\"", ",", "unsafe", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "Response", ".", "Status", ".", "OK", ".", "getStatusCode", "(", ")", ")", ";", "assertThat", "(", "response", ".", "getHeaderString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualToIgnoringCase", "(", "MediaType", ".", "TEXT_HTML", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "doesNotContain", "(", "unsafe", ")", ";", "}", "</s>"]
["<s>", "public", "RelativeView", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "protected", "ErrorView", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "BadView", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "protected", "AutoEscapingView", "(", "String", "content", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "content", "=", "content", ";", "}", "</s>"]
["<s>", "public", "String", "getContent", "(", ")", "{", "return", "content", ";", "}", "</s>"]
["<s>", "public", "AbsoluteView", "(", "String", "name", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Configuration", "load", "(", "Class", "<", "?", ">", "key", ")", "throws", "Exception", "{", "final", "Configuration", "configuration", "=", "new", "Configuration", "(", "FREEMARKER_VERSION", ")", ";", "configuration", ".", "setObjectWrapper", "(", "new", "DefaultObjectWrapperBuilder", "(", "FREEMARKER_VERSION", ")", ".", "build", "(", ")", ")", ";", "configuration", ".", "loadBuiltInEncodingMap", "(", ")", ";", "configuration", ".", "setDefaultEncoding", "(", "StandardCharsets", ".", "UTF_8", ".", "name", "(", ")", ")", ";", "configuration", ".", "setClassForTemplateLoading", "(", "key", ",", "\"", "<STR_LIT:/>", "\"", ")", ";", "configuration", ".", "setOutputFormat", "(", "HTMLOutputFormat", ".", "INSTANCE", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "String", ">", "entry", ":", "baseConfig", ".", "entrySet", "(", ")", ")", "{", "configuration", ".", "setSetting", "(", "entry", ".", "getKey", "(", ")", ",", "entry", ".", "getValue", "(", ")", ")", ";", "}", "return", "configuration", ";", "}", "</s>"]
["<s>", "void", "setBaseConfig", "(", "Map", "<", "String", ",", "String", ">", "baseConfig", ")", "{", "this", ".", "baseConfig", "=", "baseConfig", ";", "}", "</s>"]
["<s>", "public", "FreemarkerViewRenderer", "(", ")", "{", "this", ".", "loader", "=", "new", "TemplateLoader", "(", ")", ";", "this", ".", "configurationCache", "=", "CacheBuilder", ".", "newBuilder", "(", ")", ".", "concurrencyLevel", "(", "<NUM_LIT>", ")", ".", "build", "(", "loader", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isRenderable", "(", "View", "view", ")", "{", "return", "FILE_PATTERN", ".", "matcher", "(", "view", ".", "getTemplateName", "(", ")", ")", ".", "find", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "render", "(", "View", "view", ",", "Locale", "locale", ",", "OutputStream", "output", ")", "throws", "IOException", "{", "try", "{", "final", "Configuration", "configuration", "=", "configurationCache", ".", "getUnchecked", "(", "view", ".", "getClass", "(", ")", ")", ";", "final", "Charset", "charset", "=", "view", ".", "getCharset", "(", ")", ".", "orElseGet", "(", "(", ")", "-", ">", "Charset", ".", "forName", "(", "configuration", ".", "getEncoding", "(", "locale", ")", ")", ")", ";", "final", "Template", "template", "=", "configuration", ".", "getTemplate", "(", "view", ".", "getTemplateName", "(", ")", ",", "locale", ",", "charset", ".", "name", "(", ")", ")", ";", "template", ".", "process", "(", "view", ",", "new", "OutputStreamWriter", "(", "output", ",", "template", ".", "getEncoding", "(", ")", ")", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "ViewRenderException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Map", "<", "String", ",", "String", ">", "baseConfig", ")", "{", "this", ".", "loader", ".", "setBaseConfig", "(", "baseConfig", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getConfigurationKey", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "convertsToTerabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ".", "toTerabytes", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "convertsToGigabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ".", "toGigabytes", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "convertsToMegabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:2>", ")", ".", "toMegabytes", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "convertsToKilobytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:2>", ")", ".", "toKilobytes", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "convertsToBytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ".", "toBytes", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesTerabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesGigabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesMegabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesKilobytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesBytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "bytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "bytes", "(", "<NUM_LIT:2>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parseSizeWithWhiteSpaces", "(", ")", "{", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parseCaseInsensitive", "(", ")", "{", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parseSingleLetterSuffix", "(", ")", "{", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "unableParseWrongSizeCount", "(", ")", "{", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "unableParseWrongSizeUnit", "(", ")", "{", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "unableParseWrongSizeFormat", "(", ")", "{", "Size", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isHumanReadable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:3>", ")", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAQuantity", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:3>", ")", ".", "getQuantity", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:3>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAUnit", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:3>", ")", ".", "getUnit", "(", ")", ")", ".", "isEqualTo", "(", "SizeUnit", ".", "GIGABYTES", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isComparable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "bytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "bytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "bytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "bytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "bytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ".", "compareTo", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "0", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "bytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "bytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "kilobytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "megabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "gigabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "bytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "kilobytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "megabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "gigabytes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Size", ".", "terabytes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Size", ".", "terabytes", "(", "-", "1", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "serializesCorrectlyWithJackson", "(", ")", "throws", "IOException", "{", "final", "ObjectMapper", "mapper", "=", "new", "ObjectMapper", "(", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "bytes", "(", "0", "L", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "bytes", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "bytes", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "kilobytes", "(", "0", "L", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "megabytes", "(", "0", "L", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "megabytes", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "megabytes", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "gigabytes", "(", "0", "L", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "terabytes", "(", "0", "L", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "terabytes", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Size", ".", "terabytes", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "deserializesCorrectlyWithJackson", "(", ")", "throws", "IOException", "{", "final", "ObjectMapper", "mapper", "=", "new", "ObjectMapper", "(", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "bytes", "(", "0", "L", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "bytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "bytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "0", "L", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "megabytes", "(", "0", "L", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "megabytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "megabytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "gigabytes", "(", "0", "L", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "gigabytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "terabytes", "(", "0", "L", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "terabytes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Size", ".", "class", ")", ")", ".", "isEqualTo", "(", "Size", ".", "terabytes", "(", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "verifyComparableContract", "(", ")", "{", "final", "Size", "kb", "=", "Size", ".", "kilobytes", "(", "<NUM_LIT>", ")", ";", "final", "Size", "bytes", "=", "Size", ".", "bytes", "(", "kb", ".", "toBytes", "(", ")", ")", ";", "assertThat", "(", "bytes", ".", "compareTo", "(", "kb", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "kb", ".", "compareTo", "(", "bytes", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "bytes", ".", "equals", "(", "kb", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "kb", ".", "equals", "(", "bytes", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "convertsDays", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ".", "toDays", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:2>", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ".", "toHours", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "convertsHours", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ".", "toMinutes", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "convertsMinutes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:3>", ")", ".", "toSeconds", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "convertsSeconds", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ".", "toMilliseconds", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "convertsMilliseconds", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ".", "toMicroseconds", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "convertsMicroseconds", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ".", "toNanoseconds", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "convertsNanoseconds", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ".", "toNanoseconds", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesDays", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesHours", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesMinutes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesSeconds", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesMilliseconds", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesMicroseconds", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesNanoseconds", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parseDurationWithWhiteSpaces", "(", ")", "{", "assertThat", "(", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:5>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "unableParseWrongDurationCount", "(", ")", "{", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "unableParseWrongDurationTimeUnit", "(", ")", "{", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "unableParseWrongDurationFormat", "(", ")", "{", "Duration", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isHumanReadable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:3>", ")", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAQuantity", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:12>", ")", ".", "getQuantity", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:12>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAUnit", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ".", "getUnit", "(", ")", ")", ".", "isEqualTo", "(", "TimeUnit", ".", "MICROSECONDS", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isComparable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "hours", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "days", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "hours", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "days", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "hours", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "days", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "hours", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "days", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "hours", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "days", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "hours", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "days", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "hours", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ".", "compareTo", "(", "Duration", ".", "days", "(", "0", ")", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "0", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "0", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "<NUM_LIT:2>", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "<NUM_LIT:2>", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "hours", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ".", "isLessThan", "(", "Duration", ".", "days", "(", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "nanoseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "microseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "milliseconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "minutes", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "hours", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "nanoseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "microseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "milliseconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "seconds", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "minutes", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "hours", "(", "-", "1", ")", ")", ";", "assertThat", "(", "Duration", ".", "days", "(", "1", ")", ")", ".", "isGreaterThan", "(", "Duration", ".", "days", "(", "-", "1", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "serializesCorrectlyWithJackson", "(", ")", "throws", "IOException", "{", "final", "ObjectMapper", "mapper", "=", "new", "ObjectMapper", "(", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "nanoseconds", "(", "0", "L", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "microseconds", "(", "0", "L", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "milliseconds", "(", "0", "L", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "seconds", "(", "0", "L", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "seconds", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "seconds", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "minutes", "(", "0", "L", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "minutes", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "minutes", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "hours", "(", "0", "L", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "hours", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "hours", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "days", "(", "0", "L", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "days", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "mapper", ".", "writeValueAsString", "(", "Duration", ".", "days", "(", "<NUM_LIT>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "deserializesCorrectlyWithJackson", "(", ")", "throws", "IOException", "{", "final", "ObjectMapper", "mapper", "=", "new", "ObjectMapper", "(", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "nanoseconds", "(", "0", "L", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "nanoseconds", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "microseconds", "(", "0", "L", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "microseconds", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "milliseconds", "(", "0", "L", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "milliseconds", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "0", "L", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "minutes", "(", "0", "L", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "minutes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "minutes", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "hours", "(", "0", "L", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "hours", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "hours", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "days", "(", "0", "L", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "days", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "mapper", ".", "readValue", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Duration", ".", "class", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "days", "(", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Parameters", "(", "name", "=", "\"", "<STR_LIT>", "\"", ")", "public", "static", "Collection", "<", "Object", "[", "]", ">", "data", "(", ")", "{", "return", "Arrays", ".", "asList", "(", "new", "Object", "[", "]", "[", "]", "{", "{", "Object", ".", "class", ",", "Object", ".", "class", ",", "Object", ".", "class", ",", "Object", ".", "class", ",", "IllegalStateException", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "Object", ".", "class", ".", "getName", "(", ")", "}", ",", "{", "null", ",", "null", ",", "null", ",", "null", ",", "NullPointerException", ".", "class", ",", "null", "}", ",", "{", "IntegerList", ".", "class", ",", "Integer", ".", "class", ",", "Number", ".", "class", ",", "Integer", ".", "class", ",", "null", ",", "null", "}", ",", "{", "IntegerList", ".", "class", ",", "Integer", ".", "class", ",", "Integer", ".", "class", ",", "Integer", ".", "class", ",", "null", ",", "null", "}", ",", "{", "NumberList", ".", "class", ",", "Number", ".", "class", ",", "Number", ".", "class", ",", "Number", ".", "class", ",", "null", ",", "null", "}", ",", "{", "IntegerValueMap", ".", "class", ",", "Object", ".", "class", ",", "Number", ".", "class", ",", "Integer", ".", "class", ",", "null", ",", "null", "}", ",", "{", "ListOfStringSets", ".", "class", ",", "Set", ".", "class", ",", "Set", ".", "class", ",", "Set", ".", "class", ",", "null", ",", "null", "}", ",", "}", ")", ";", "}", "</s>"]
["<s>", "public", "GenericsTest", "(", "Class", "<", "?", ">", "klass", ",", "Class", "<", "?", ">", "typeParameter", ",", "Class", "<", "?", "super", "T", ">", "bound", ",", "Class", "<", "?", ">", "boundTypeParameter", ",", "Class", "<", "?", "extends", "Exception", ">", "expectedException", ",", "String", "expectedMessage", ")", "{", "this", ".", "klass", "=", "klass", ";", "this", ".", "typeParameter", "=", "typeParameter", ";", "this", ".", "bound", "=", "bound", ";", "this", ".", "boundTypeParameter", "=", "boundTypeParameter", ";", "if", "(", "expectedException", "!", "=", "null", ")", "{", "thrown", ".", "expect", "(", "expectedException", ")", ";", "if", "(", "expectedMessage", "!", "=", "null", ")", "thrown", ".", "expectMessage", "(", "expectedMessage", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testTypeParameter", "(", ")", "{", "assertThat", "(", "Generics", ".", "getTypeParameter", "(", "klass", ")", ")", ".", "isEqualTo", "(", "typeParameter", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testBoundTypeParameter", "(", ")", "{", "assertThat", "(", "Generics", ".", "getTypeParameter", "(", "klass", ",", "bound", ")", ")", ".", "isEqualTo", "(", "boundTypeParameter", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFromGuavaOptional", "(", ")", "throws", "Exception", "{", "assertFalse", "(", "Optionals", ".", "fromGuavaOptional", "(", "com", ".", "google", ".", "common", ".", "base", ".", "Optional", ".", "absent", "(", ")", ")", ".", "isPresent", "(", ")", ")", ";", "assertTrue", "(", "Optionals", ".", "fromGuavaOptional", "(", "com", ".", "google", ".", "common", ".", "base", ".", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isPresent", "(", ")", ")", ";", "assertEquals", "(", "java", ".", "util", ".", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Optionals", ".", "fromGuavaOptional", "(", "com", ".", "google", ".", "common", ".", "base", ".", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testToGuavaOptional", "(", ")", "throws", "Exception", "{", "assertFalse", "(", "Optionals", ".", "toGuavaOptional", "(", "java", ".", "util", ".", "Optional", ".", "empty", "(", ")", ")", ".", "isPresent", "(", ")", ")", ";", "assertTrue", "(", "Optionals", ".", "toGuavaOptional", "(", "java", ".", "util", ".", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isPresent", "(", ")", ")", ";", "assertEquals", "(", "com", ".", "google", ".", "common", ".", "base", ".", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Optionals", ".", "toGuavaOptional", "(", "java", ".", "util", ".", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "public", "static", "VideoFormat", "fromString", "(", "String", "s", ")", "{", "return", "valueOf", "(", "CharMatcher", ".", "anyOf", "(", "\"", "<STR_LIT:[]>", "\"", ")", ".", "removeFrom", "(", "s", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Parameterized", ".", "Parameters", "(", "name", "=", "\"", "<STR_LIT>", "\"", ")", "public", "static", "Iterable", "<", "Object", "[", "]", ">", "data", "(", ")", "{", "return", "ImmutableList", ".", "copyOf", "(", "new", "Object", "[", "]", "[", "]", "{", "{", "\"", "<STR_LIT>", "\"", ",", "VideoFormat", ".", "OGG", "}", ",", "{", "\"", "<STR_LIT>", "\"", ",", "VideoFormat", ".", "OGG", "}", ",", "{", "\"", "<STR_LIT>", "\"", ",", "VideoFormat", ".", "FFMPEG", "}", ",", "{", "\"", "<STR_LIT>", "\"", ",", "VideoFormat", ".", "FFMPEG", "}", ",", "{", "\"", "<STR_LIT>", "\"", ",", "VideoFormat", ".", "MPEG_DASH", "}", ",", "{", "\"", "<STR_LIT>", "\"", ",", "VideoFormat", ".", "H_264", "}", ",", "{", "\"", "<STR_LIT>", "\"", ",", "VideoFormat", ".", "HDMOV", "}", ",", "{", "\"", "<STR_LIT>", "\"", ",", "null", "}", ",", "{", "\"", "<STR_LIT>", "\"", ",", "null", "}", ",", "}", ")", ";", "}", "</s>"]
["<s>", "public", "EnumsTest", "(", "String", "text", ",", "VideoFormat", "result", ")", "{", "this", ".", "sourceText", "=", "text", ";", "this", ".", "guessedFormat", "=", "result", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canGuess", "(", ")", "{", "assertThat", "(", "Enums", ".", "fromStringFuzzy", "(", "sourceText", ",", "VideoFormat", ".", "values", "(", ")", ")", ")", ".", "isEqualTo", "(", "guessedFormat", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneByteInBytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "BYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "BYTES", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "assertThat", "(", "SizeUnit", ".", "BYTES", ".", "toBytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneByteInKilobytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "KILOBYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "BYTES", ")", ")", ".", "isZero", "(", ")", ";", "assertThat", "(", "SizeUnit", ".", "BYTES", ".", "toKilobytes", "(", "1", ")", ")", ".", "isZero", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneByteInMegabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "MEGABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "BYTES", ")", ")", ".", "isZero", "(", ")", ";", "assertThat", "(", "SizeUnit", ".", "BYTES", ".", "toMegabytes", "(", "1", ")", ")", ".", "isZero", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneByteInGigabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "GIGABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "BYTES", ")", ")", ".", "isZero", "(", ")", ";", "assertThat", "(", "SizeUnit", ".", "BYTES", ".", "toGigabytes", "(", "1", ")", ")", ".", "isZero", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneByteInTerabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "TERABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "BYTES", ")", ")", ".", "isZero", "(", ")", ";", "assertThat", "(", "SizeUnit", ".", "BYTES", ".", "toTerabytes", "(", "1", ")", ")", ".", "isZero", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneKilobyteInBytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "BYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "KILOBYTES", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "SizeUnit", ".", "KILOBYTES", ".", "toBytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneKilobyteInKilobytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "KILOBYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "KILOBYTES", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "assertThat", "(", "SizeUnit", ".", "KILOBYTES", ".", "toKilobytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneKilobyteInMegabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "MEGABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "KILOBYTES", ")", ")", ".", "isZero", "(", ")", ";", "assertThat", "(", "SizeUnit", ".", "KILOBYTES", ".", "toMegabytes", "(", "1", ")", ")", ".", "isZero", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneKilobyteInGigabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "GIGABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "KILOBYTES", ")", ")", ".", "isZero", "(", ")", ";", "assertThat", "(", "SizeUnit", ".", "KILOBYTES", ".", "toGigabytes", "(", "1", ")", ")", ".", "isZero", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneKilobyteInTerabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "TERABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "KILOBYTES", ")", ")", ".", "isZero", "(", ")", ";", "assertThat", "(", "SizeUnit", ".", "KILOBYTES", ".", "toTerabytes", "(", "1", ")", ")", ".", "isZero", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneMegabyteInBytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "BYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "MEGABYTES", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "SizeUnit", ".", "MEGABYTES", ".", "toBytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneMegabyteInKilobytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "KILOBYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "MEGABYTES", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "SizeUnit", ".", "MEGABYTES", ".", "toKilobytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneMegabyteInMegabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "MEGABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "MEGABYTES", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "assertThat", "(", "SizeUnit", ".", "MEGABYTES", ".", "toMegabytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneMegabyteInGigabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "GIGABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "MEGABYTES", ")", ")", ".", "isZero", "(", ")", ";", "assertThat", "(", "SizeUnit", ".", "MEGABYTES", ".", "toGigabytes", "(", "1", ")", ")", ".", "isZero", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneMegabyteInTerabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "TERABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "MEGABYTES", ")", ")", ".", "isZero", "(", ")", ";", "assertThat", "(", "SizeUnit", ".", "MEGABYTES", ".", "toTerabytes", "(", "1", ")", ")", ".", "isZero", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneGigabyteInBytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "BYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "GIGABYTES", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "SizeUnit", ".", "GIGABYTES", ".", "toBytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneGigabyteInKilobytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "KILOBYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "GIGABYTES", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "SizeUnit", ".", "GIGABYTES", ".", "toKilobytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneGigabyteInMegabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "MEGABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "GIGABYTES", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "SizeUnit", ".", "GIGABYTES", ".", "toMegabytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneGigabyteInGigabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "GIGABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "GIGABYTES", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "SizeUnit", ".", "GIGABYTES", ".", "toGigabytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneGigabyteInTerabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "TERABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "GIGABYTES", ")", ")", ".", "isZero", "(", ")", ";", "assertThat", "(", "SizeUnit", ".", "GIGABYTES", ".", "toTerabytes", "(", "1", ")", ")", ".", "isZero", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneTerabyteInBytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "BYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "TERABYTES", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "SizeUnit", ".", "TERABYTES", ".", "toBytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneTerabyteInKilobytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "KILOBYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "TERABYTES", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "SizeUnit", ".", "TERABYTES", ".", "toKilobytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneTerabyteInMegabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "MEGABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "TERABYTES", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "SizeUnit", ".", "TERABYTES", ".", "toMegabytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneTerabyteInGigabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "GIGABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "TERABYTES", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "SizeUnit", ".", "TERABYTES", ".", "toGigabytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "oneTerabyteInTerabytes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "SizeUnit", ".", "TERABYTES", ".", "convert", "(", "1", ",", "SizeUnit", ".", "TERABYTES", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "assertThat", "(", "SizeUnit", ".", "TERABYTES", ".", "toTerabytes", "(", "1", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isHumanReadable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "JarLocation", "(", "JarLocationTest", ".", "class", ")", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAVersion", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "JarLocation", "(", "JarLocationTest", ".", "class", ")", ".", "getVersion", "(", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "empty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Size", "bytes", "(", "long", "count", ")", "{", "return", "new", "Size", "(", "count", ",", "SizeUnit", ".", "BYTES", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Size", "kilobytes", "(", "long", "count", ")", "{", "return", "new", "Size", "(", "count", ",", "SizeUnit", ".", "KILOBYTES", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Size", "megabytes", "(", "long", "count", ")", "{", "return", "new", "Size", "(", "count", ",", "SizeUnit", ".", "MEGABYTES", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Size", "gigabytes", "(", "long", "count", ")", "{", "return", "new", "Size", "(", "count", ",", "SizeUnit", ".", "GIGABYTES", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Size", "terabytes", "(", "long", "count", ")", "{", "return", "new", "Size", "(", "count", ",", "SizeUnit", ".", "TERABYTES", ")", ";", "}", "</s>"]
["<s>", "@", "JsonCreator", "public", "static", "Size", "parse", "(", "String", "size", ")", "{", "final", "Matcher", "matcher", "=", "SIZE_PATTERN", ".", "matcher", "(", "size", ")", ";", "checkArgument", "(", "matcher", ".", "matches", "(", ")", ",", "\"", "<STR_LIT>", "\"", "+", "size", ")", ";", "final", "long", "count", "=", "Long", ".", "parseLong", "(", "matcher", ".", "group", "(", "1", ")", ")", ";", "final", "SizeUnit", "unit", "=", "SUFFIXES", ".", "get", "(", "matcher", ".", "group", "(", "<NUM_LIT:2>", ")", ")", ";", "if", "(", "unit", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "size", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "new", "Size", "(", "count", ",", "unit", ")", ";", "}", "</s>"]
["<s>", "private", "Size", "(", "long", "count", ",", "SizeUnit", "unit", ")", "{", "this", ".", "count", "=", "count", ";", "this", ".", "unit", "=", "requireNonNull", "(", "unit", ")", ";", "}", "</s>"]
["<s>", "public", "long", "getQuantity", "(", ")", "{", "return", "count", ";", "}", "</s>"]
["<s>", "public", "SizeUnit", "getUnit", "(", ")", "{", "return", "unit", ";", "}", "</s>"]
["<s>", "public", "long", "toBytes", "(", ")", "{", "return", "SizeUnit", ".", "BYTES", ".", "convert", "(", "count", ",", "unit", ")", ";", "}", "</s>"]
["<s>", "public", "long", "toKilobytes", "(", ")", "{", "return", "SizeUnit", ".", "KILOBYTES", ".", "convert", "(", "count", ",", "unit", ")", ";", "}", "</s>"]
["<s>", "public", "long", "toMegabytes", "(", ")", "{", "return", "SizeUnit", ".", "MEGABYTES", ".", "convert", "(", "count", ",", "unit", ")", ";", "}", "</s>"]
["<s>", "public", "long", "toGigabytes", "(", ")", "{", "return", "SizeUnit", ".", "GIGABYTES", ".", "convert", "(", "count", ",", "unit", ")", ";", "}", "</s>"]
["<s>", "public", "long", "toTerabytes", "(", ")", "{", "return", "SizeUnit", ".", "TERABYTES", ".", "convert", "(", "count", ",", "unit", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "this", "=", "=", "obj", ")", "{", "return", "true", ";", "}", "if", "(", "(", "obj", "=", "=", "null", ")", "|", "|", "(", "getClass", "(", ")", "!", "=", "obj", ".", "getClass", "(", ")", ")", ")", "{", "return", "false", ";", "}", "final", "Size", "size", "=", "(", "Size", ")", "obj", ";", "return", "this", ".", "compareTo", "(", "size", ")", "=", "=", "0", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "(", "<NUM_LIT:31>", "*", "(", "int", ")", "(", "count", "^", "(", "count", ">", ">", ">", "<NUM_LIT:32>", ")", ")", ")", "+", "unit", ".", "hashCode", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "JsonValue", "public", "String", "toString", "(", ")", "{", "String", "units", "=", "unit", ".", "toString", "(", ")", ".", "toLowerCase", "(", "Locale", ".", "ENGLISH", ")", ";", "if", "(", "count", "=", "=", "1", ")", "{", "units", "=", "units", ".", "substring", "(", "0", ",", "units", ".", "length", "(", ")", "-", "1", ")", ";", "}", "return", "Long", ".", "toString", "(", "count", ")", "+", "<CHAR_LIT>", "+", "units", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "compareTo", "(", "Size", "other", ")", "{", "if", "(", "unit", "=", "=", "other", ".", "unit", ")", "{", "return", "Long", ".", "compare", "(", "count", ",", "other", ".", "count", ")", ";", "}", "return", "Long", ".", "compare", "(", "toBytes", "(", ")", ",", "other", ".", "toBytes", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Nullable", "public", "static", "Enum", "<", "?", ">", "fromStringFuzzy", "(", "String", "value", ",", "Enum", "<", "?", ">", "[", "]", "constants", ")", "{", "final", "String", "text", "=", "CharMatcher", ".", "whitespace", "(", ")", ".", "removeFrom", "(", "value", ")", ".", "replace", "(", "<CHAR_LIT:->", ",", "<CHAR_LIT:_>", ")", ".", "replace", "(", "<CHAR_LIT:.>", ",", "<CHAR_LIT:_>", ")", ";", "for", "(", "Enum", "<", "?", ">", "constant", ":", "constants", ")", "{", "if", "(", "constant", ".", "name", "(", ")", ".", "equalsIgnoreCase", "(", "text", ")", ")", "{", "return", "constant", ";", "}", "}", "for", "(", "Enum", "<", "?", ">", "constant", ":", "constants", ")", "{", "if", "(", "constant", ".", "toString", "(", ")", ".", "equalsIgnoreCase", "(", "value", ")", ")", "{", "return", "constant", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "private", "Generics", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "Class", "<", "?", ">", "getTypeParameter", "(", "Class", "<", "?", ">", "klass", ")", "{", "return", "getTypeParameter", "(", "klass", ",", "Object", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "static", "<", "T", ">", "Class", "<", "T", ">", "getTypeParameter", "(", "Class", "<", "?", ">", "klass", ",", "Class", "<", "?", "super", "T", ">", "bound", ")", "{", "Type", "t", "=", "requireNonNull", "(", "klass", ")", ";", "while", "(", "t", "instanceof", "Class", "<", "?", ">", ")", "{", "t", "=", "(", "(", "Class", "<", "?", ">", ")", "t", ")", ".", "getGenericSuperclass", "(", ")", ";", "}", "if", "(", "t", "instanceof", "ParameterizedType", ")", "{", "for", "(", "Type", "param", ":", "(", "(", "ParameterizedType", ")", "t", ")", ".", "getActualTypeArguments", "(", ")", ")", "{", "if", "(", "param", "instanceof", "Class", "<", "?", ">", ")", "{", "final", "Class", "<", "T", ">", "cls", "=", "determineClass", "(", "bound", ",", "param", ")", ";", "if", "(", "cls", "!", "=", "null", ")", "{", "return", "cls", ";", "}", "}", "else", "if", "(", "param", "instanceof", "TypeVariable", ")", "{", "for", "(", "Type", "paramBound", ":", "(", "(", "TypeVariable", "<", "?", ">", ")", "param", ")", ".", "getBounds", "(", ")", ")", "{", "if", "(", "paramBound", "instanceof", "Class", "<", "?", ">", ")", "{", "final", "Class", "<", "T", ">", "cls", "=", "determineClass", "(", "bound", ",", "paramBound", ")", ";", "if", "(", "cls", "!", "=", "null", ")", "{", "return", "cls", ";", "}", "}", "}", "}", "else", "if", "(", "param", "instanceof", "ParameterizedType", ")", "{", "final", "Type", "rawType", "=", "(", "(", "ParameterizedType", ")", "param", ")", ".", "getRawType", "(", ")", ";", "if", "(", "rawType", "instanceof", "Class", "<", "?", ">", ")", "{", "final", "Class", "<", "T", ">", "cls", "=", "determineClass", "(", "bound", ",", "rawType", ")", ";", "if", "(", "cls", "!", "=", "null", ")", "{", "return", "cls", ";", "}", "}", "}", "}", "}", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", "+", "klass", ".", "getName", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Nullable", "private", "static", "<", "T", ">", "Class", "<", "T", ">", "determineClass", "(", "Class", "<", "?", "super", "T", ">", "bound", ",", "Type", "candidate", ")", "{", "if", "(", "candidate", "instanceof", "Class", "<", "?", ">", ")", "{", "final", "Class", "<", "?", ">", "cls", "=", "(", "Class", "<", "?", ">", ")", "candidate", ";", "if", "(", "bound", ".", "isAssignableFrom", "(", "cls", ")", ")", "{", "return", "(", "Class", "<", "T", ">", ")", "cls", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "static", "<", "T", ">", "Optional", "<", "T", ">", "fromGuavaOptional", "(", "final", "com", ".", "google", ".", "common", ".", "base", ".", "Optional", "<", "T", ">", "guavaOptional", ")", "{", "return", "Optional", ".", "ofNullable", "(", "guavaOptional", ".", "orNull", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "<", "T", ">", "com", ".", "google", ".", "common", ".", "base", ".", "Optional", "<", "T", ">", "toGuavaOptional", "(", "final", "Optional", "<", "T", ">", "optional", ")", "{", "return", "com", ".", "google", ".", "common", ".", "base", ".", "Optional", ".", "fromNullable", "(", "optional", ".", "orElse", "(", "null", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Duration", "nanoseconds", "(", "long", "count", ")", "{", "return", "new", "Duration", "(", "count", ",", "TimeUnit", ".", "NANOSECONDS", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Duration", "microseconds", "(", "long", "count", ")", "{", "return", "new", "Duration", "(", "count", ",", "TimeUnit", ".", "MICROSECONDS", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Duration", "milliseconds", "(", "long", "count", ")", "{", "return", "new", "Duration", "(", "count", ",", "TimeUnit", ".", "MILLISECONDS", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Duration", "seconds", "(", "long", "count", ")", "{", "return", "new", "Duration", "(", "count", ",", "TimeUnit", ".", "SECONDS", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Duration", "minutes", "(", "long", "count", ")", "{", "return", "new", "Duration", "(", "count", ",", "TimeUnit", ".", "MINUTES", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Duration", "hours", "(", "long", "count", ")", "{", "return", "new", "Duration", "(", "count", ",", "TimeUnit", ".", "HOURS", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Duration", "days", "(", "long", "count", ")", "{", "return", "new", "Duration", "(", "count", ",", "TimeUnit", ".", "DAYS", ")", ";", "}", "</s>"]
["<s>", "@", "JsonCreator", "public", "static", "Duration", "parse", "(", "String", "duration", ")", "{", "final", "Matcher", "matcher", "=", "DURATION_PATTERN", ".", "matcher", "(", "duration", ")", ";", "checkArgument", "(", "matcher", ".", "matches", "(", ")", ",", "\"", "<STR_LIT>", "\"", "+", "duration", ")", ";", "final", "long", "count", "=", "Long", ".", "parseLong", "(", "matcher", ".", "group", "(", "1", ")", ")", ";", "final", "TimeUnit", "unit", "=", "SUFFIXES", ".", "get", "(", "matcher", ".", "group", "(", "<NUM_LIT:2>", ")", ")", ";", "if", "(", "unit", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "duration", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "new", "Duration", "(", "count", ",", "unit", ")", ";", "}", "</s>"]
["<s>", "private", "Duration", "(", "long", "count", ",", "TimeUnit", "unit", ")", "{", "this", ".", "count", "=", "count", ";", "this", ".", "unit", "=", "requireNonNull", "(", "unit", ")", ";", "}", "</s>"]
["<s>", "public", "long", "getQuantity", "(", ")", "{", "return", "count", ";", "}", "</s>"]
["<s>", "public", "TimeUnit", "getUnit", "(", ")", "{", "return", "unit", ";", "}", "</s>"]
["<s>", "public", "long", "toNanoseconds", "(", ")", "{", "return", "TimeUnit", ".", "NANOSECONDS", ".", "convert", "(", "count", ",", "unit", ")", ";", "}", "</s>"]
["<s>", "public", "long", "toMicroseconds", "(", ")", "{", "return", "TimeUnit", ".", "MICROSECONDS", ".", "convert", "(", "count", ",", "unit", ")", ";", "}", "</s>"]
["<s>", "public", "long", "toMilliseconds", "(", ")", "{", "return", "TimeUnit", ".", "MILLISECONDS", ".", "convert", "(", "count", ",", "unit", ")", ";", "}", "</s>"]
["<s>", "public", "long", "toSeconds", "(", ")", "{", "return", "TimeUnit", ".", "SECONDS", ".", "convert", "(", "count", ",", "unit", ")", ";", "}", "</s>"]
["<s>", "public", "long", "toMinutes", "(", ")", "{", "return", "TimeUnit", ".", "MINUTES", ".", "convert", "(", "count", ",", "unit", ")", ";", "}", "</s>"]
["<s>", "public", "long", "toHours", "(", ")", "{", "return", "TimeUnit", ".", "HOURS", ".", "convert", "(", "count", ",", "unit", ")", ";", "}", "</s>"]
["<s>", "public", "long", "toDays", "(", ")", "{", "return", "TimeUnit", ".", "DAYS", ".", "convert", "(", "count", ",", "unit", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "this", "=", "=", "obj", ")", "{", "return", "true", ";", "}", "if", "(", "(", "obj", "=", "=", "null", ")", "|", "|", "(", "getClass", "(", ")", "!", "=", "obj", ".", "getClass", "(", ")", ")", ")", "{", "return", "false", ";", "}", "final", "Duration", "duration", "=", "(", "Duration", ")", "obj", ";", "return", "(", "count", "=", "=", "duration", ".", "count", ")", "&", "&", "(", "unit", "=", "=", "duration", ".", "unit", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "(", "<NUM_LIT:31>", "*", "(", "int", ")", "(", "count", "^", "(", "count", ">", ">", ">", "<NUM_LIT:32>", ")", ")", ")", "+", "unit", ".", "hashCode", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "JsonValue", "public", "String", "toString", "(", ")", "{", "String", "units", "=", "unit", ".", "toString", "(", ")", ".", "toLowerCase", "(", "Locale", ".", "ENGLISH", ")", ";", "if", "(", "count", "=", "=", "1", ")", "{", "units", "=", "units", ".", "substring", "(", "0", ",", "units", ".", "length", "(", ")", "-", "1", ")", ";", "}", "return", "Long", ".", "toString", "(", "count", ")", "+", "<CHAR_LIT>", "+", "units", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "compareTo", "(", "Duration", "other", ")", "{", "if", "(", "unit", "=", "=", "other", ".", "unit", ")", "{", "return", "Long", ".", "compare", "(", "count", ",", "other", ".", "count", ")", ";", "}", "return", "Long", ".", "compare", "(", "toNanoseconds", "(", ")", ",", "other", ".", "toNanoseconds", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "JarLocation", "(", "Class", "<", "?", ">", "klass", ")", "{", "this", ".", "klass", "=", "klass", ";", "}", "</s>"]
["<s>", "public", "Optional", "<", "String", ">", "getVersion", "(", ")", "{", "return", "Optional", ".", "ofNullable", "(", "klass", ".", "getPackage", "(", ")", ")", ".", "map", "(", "Package", ":", ":", "getImplementationVersion", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "final", "URL", "location", "=", "klass", ".", "getProtectionDomain", "(", ")", ".", "getCodeSource", "(", ")", ".", "getLocation", "(", ")", ";", "try", "{", "final", "String", "jar", "=", "new", "File", "(", "location", ".", "toURI", "(", ")", ")", ".", "getName", "(", ")", ";", "if", "(", "jar", ".", "endsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "return", "jar", ";", "}", "return", "\"", "<STR_LIT>", "\"", ";", "}", "catch", "(", "Exception", "ignored", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "}", "</s>"]
["<s>", "SizeUnit", "(", "long", "bits", ")", "{", "this", ".", "bits", "=", "bits", ";", "}", "</s>"]
["<s>", "public", "long", "convert", "(", "long", "size", ",", "SizeUnit", "unit", ")", "{", "return", "(", "size", "*", "unit", ".", "bits", ")", "/", "bits", ";", "}", "</s>"]
["<s>", "public", "long", "toBytes", "(", "long", "l", ")", "{", "return", "BYTES", ".", "convert", "(", "l", ",", "this", ")", ";", "}", "</s>"]
["<s>", "public", "long", "toKilobytes", "(", "long", "l", ")", "{", "return", "KILOBYTES", ".", "convert", "(", "l", ",", "this", ")", ";", "}", "</s>"]
["<s>", "public", "long", "toMegabytes", "(", "long", "l", ")", "{", "return", "MEGABYTES", ".", "convert", "(", "l", ",", "this", ")", ";", "}", "</s>"]
["<s>", "public", "long", "toGigabytes", "(", "long", "l", ")", "{", "return", "GIGABYTES", ".", "convert", "(", "l", ",", "this", ")", ";", "}", "</s>"]
["<s>", "public", "long", "toTerabytes", "(", "long", "l", ")", "{", "return", "TERABYTES", ".", "convert", "(", "l", ",", "this", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "readsTheFileAsAString", "(", ")", "{", "assertThat", "(", "fixture", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "throwsIllegalStateExceptionWhenFileDoesNotExist", "(", ")", "{", "fixture", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "BeforeClass", "public", "static", "void", "setUp", "(", ")", "{", "TEST_SUPPORT", ".", "before", "(", ")", ";", "}", "</s>"]
["<s>", "@", "AfterClass", "public", "static", "void", "tearDown", "(", ")", "{", "TEST_SUPPORT", ".", "after", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canGetExpectedResourceOverHttp", "(", ")", "{", "final", "String", "content", "=", "ClientBuilder", ".", "newClient", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "TEST_SUPPORT", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "content", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsConfiguration", "(", ")", "{", "final", "TestConfiguration", "config", "=", "TEST_SUPPORT", ".", "getConfiguration", "(", ")", ";", "assertThat", "(", "config", ".", "getMessage", "(", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsApplication", "(", ")", "{", "final", "TestApplication", "application", "=", "TEST_SUPPORT", ".", "getApplication", "(", ")", ";", "assertNotNull", "(", "application", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsEnvironment", "(", ")", "{", "final", "Environment", "environment", "=", "TEST_SUPPORT", ".", "getEnvironment", "(", ")", ";", "assertThat", "(", "environment", ".", "getName", "(", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canPerformAdminTask", "(", ")", "{", "final", "String", "response", "=", "ClientBuilder", ".", "newClient", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "TEST_SUPPORT", ".", "getAdminPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "\"", ",", "MediaType", ".", "TEXT_PLAIN", ")", ",", "String", ".", "class", ")", ";", "assertThat", "(", "response", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canPerformAdminTaskWithPostBody", "(", ")", "{", "final", "String", "response", "=", "ClientBuilder", ".", "newClient", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "TEST_SUPPORT", ".", "getAdminPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT>", "\"", ",", "MediaType", ".", "TEXT_PLAIN", ")", ",", "String", ".", "class", ")", ";", "assertThat", "(", "response", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "TestConfiguration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "TestResource", "(", "configuration", ".", "getMessage", "(", ")", ")", ")", ";", "environment", ".", "admin", "(", ")", ".", "addTask", "(", "new", "HelloTask", "(", ")", ")", ";", "environment", ".", "admin", "(", ")", ".", "addTask", "(", "new", "EchoTask", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "TestResource", "(", "String", "message", ")", "{", "this", ".", "message", "=", "message", ";", "}", "</s>"]
["<s>", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "GET", "public", "String", "test", "(", ")", "{", "return", "message", ";", "}", "</s>"]
["<s>", "public", "String", "getMessage", "(", ")", "{", "return", "message", ";", "}", "</s>"]
["<s>", "public", "HelloTask", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "ImmutableCollection", "<", "String", ">", "names", "=", "parameters", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "name", "=", "!", "names", ".", "isEmpty", "(", ")", "?", "names", ".", "asList", "(", ")", ".", "get", "(", "0", ")", ":", "\"", "<STR_LIT>", "\"", ";", "output", ".", "print", "(", "\"", "<STR_LIT>", "\"", "+", "name", ")", ";", "output", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "EchoTask", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "String", "body", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "output", ".", "print", "(", "body", ")", ";", "output", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "PersonResource", "(", "PeopleStore", "store", ")", "{", "this", ".", "store", "=", "store", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Timed", "public", "Person", "getPerson", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ")", "{", "return", "store", ".", "fetchPerson", "(", "name", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Timed", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "ImmutableList", "<", "Person", ">", "getPersonList", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ")", "{", "return", "ImmutableList", ".", "of", "(", "getPerson", "(", "name", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Timed", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Person", "getPersonWithIndex", "(", "@", "Min", "(", "0", ")", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "IntParam", "index", ",", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ")", "{", "return", "getPersonList", "(", "name", ")", ".", "get", "(", "index", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Person", "exceptional", "(", "Map", "<", "String", ",", "String", ">", "mapper", ")", "throws", "Exception", "{", "throw", "new", "Exception", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Person", "eofException", "(", ")", "throws", "Exception", "{", "throw", "new", "EofException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "validationGroupsException", "(", "@", "Valid", "@", "Validated", "(", "Partial1", ".", "class", ")", "@", "BeanParam", "BeanParameter", "params", ",", "@", "Valid", "@", "Validated", "(", "Default", ".", "class", ")", "byte", "[", "]", "entity", ")", "{", "return", "requireNonNull", "(", "params", ".", "age", ")", ".", "toString", "(", ")", "+", "entity", ".", "length", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "TestConfiguration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "TestResource", "(", "configuration", ".", "getMessage", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultVaryHeader", "(", ")", "{", "final", "Response", "clientResponse", "=", "RULE", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "RULE", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "ACCEPT_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", ")", ";", "assertThat", "(", "clientResponse", ".", "getHeaders", "(", ")", ".", "get", "(", "VARY", ")", ")", ".", "isEqualTo", "(", "Collections", ".", "singletonList", "(", "(", "Object", ")", "ACCEPT_ENCODING", ")", ")", ";", "assertThat", "(", "clientResponse", ".", "getHeaders", "(", ")", ".", "get", "(", "CONTENT_ENCODING", ")", ")", ".", "isEqualTo", "(", "Collections", ".", "singletonList", "(", "(", "Object", ")", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "TestConfiguration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "TestResource", "(", "configuration", ".", "getMessage", "(", ")", ")", ")", ";", "environment", ".", "admin", "(", ")", ".", "addTask", "(", "new", "HelloTask", "(", ")", ")", ";", "environment", ".", "admin", "(", ")", ".", "addTask", "(", "new", "EchoTask", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "TestResource", "(", "String", "message", ")", "{", "this", ".", "message", "=", "message", ";", "}", "</s>"]
["<s>", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "GET", "public", "String", "test", "(", ")", "{", "return", "message", ";", "}", "</s>"]
["<s>", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "GET", "@", "Produces", "(", "MediaType", ".", "APPLICATION_JSON", ")", "public", "MessageView", "messageView", "(", ")", "{", "return", "new", "MessageView", "(", "Optional", ".", "of", "(", "message", ")", ")", ";", "}", "</s>"]
["<s>", "public", "HelloTask", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "ImmutableCollection", "<", "String", ">", "names", "=", "parameters", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "name", "=", "!", "names", ".", "isEmpty", "(", ")", "?", "names", ".", "asList", "(", ")", ".", "get", "(", "0", ")", ":", "\"", "<STR_LIT>", "\"", ";", "output", ".", "print", "(", "\"", "<STR_LIT>", "\"", "+", "name", ")", ";", "output", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "EchoTask", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "String", "body", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "output", ".", "print", "(", "body", ")", ";", "output", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "@", "JsonCreator", "public", "MessageView", "(", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "message", ")", "{", "this", ".", "message", "=", "message", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Optional", "<", "String", ">", "getMessage", "(", ")", "{", "return", "message", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "WebApplicationException", "e", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "{", "reset", "(", "PEOPLE_STORE", ")", ";", "when", "(", "PEOPLE_STORE", ".", "fetchPerson", "(", "eq", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "thenReturn", "(", "person", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetPerson", "(", ")", "{", "assertThat", "(", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Person", ".", "class", ")", ")", ".", "isEqualTo", "(", "person", ")", ";", "verify", "(", "PEOPLE_STORE", ")", ".", "fetchPerson", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetImmutableListOfPersons", "(", ")", "{", "assertThat", "(", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "new", "GenericType", "<", "ImmutableList", "<", "Person", ">", ">", "(", ")", "{", "}", ")", ")", ".", "isEqualTo", "(", "ImmutableList", ".", "of", "(", "person", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetPersonWithQueryParam", "(", ")", "{", "assertThat", "(", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "0", ")", ".", "request", "(", ")", ".", "get", "(", "Person", ".", "class", ")", ")", ".", "isEqualTo", "(", "person", ")", ";", "verify", "(", "PEOPLE_STORE", ")", ".", "fetchPerson", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultConstraintViolation", "(", ")", "{", "assertThat", "(", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "-", "1", ")", ".", "request", "(", ")", ".", "get", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultJsonProcessingMapper", "(", ")", "{", "assertThat", "(", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultExceptionMapper", "(", ")", "{", "assertThat", "(", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{}>", "\"", ")", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "startsWith", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultEofExceptionMapper", "(", ")", "{", "assertThat", "(", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ".", "getStatusCode", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testValidationGroupsException", "(", ")", "{", "final", "Response", "resp", "=", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{}>", "\"", ")", ")", ";", "assertThat", "(", "resp", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "Response", ".", "Status", ".", "INTERNAL_SERVER_ERROR", ".", "getStatusCode", "(", ")", ")", ";", "assertThat", "(", "resp", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCustomClientConfiguration", "(", ")", "{", "assertThat", "(", "RESOURCES", ".", "client", "(", ")", ".", "getConfiguration", "(", ")", ".", "isRegistered", "(", "DummyExceptionMapper", ".", "class", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Person", "(", ")", "{", "}", "</s>"]
["<s>", "public", "Person", "(", "String", "name", ",", "String", "email", ")", "{", "this", ".", "name", "=", "name", ";", "this", ".", "email", "=", "email", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "void", "setName", "(", "String", "name", ")", "{", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "public", "String", "getEmail", "(", ")", "{", "return", "email", ";", "}", "</s>"]
["<s>", "public", "void", "setEmail", "(", "String", "email", ")", "{", "this", ".", "email", "=", "email", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "Objects", ".", "hash", "(", "name", ",", "email", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "this", "=", "=", "obj", ")", "{", "return", "true", ";", "}", "if", "(", "obj", "=", "=", "null", "|", "|", "getClass", "(", ")", "!", "=", "obj", ".", "getClass", "(", ")", ")", "{", "return", "false", ";", "}", "final", "Person", "other", "=", "(", "Person", ")", "obj", ";", "return", "Objects", ".", "equals", "(", "this", ".", "name", ",", "other", ".", "name", ")", "&", "&", "Objects", ".", "equals", "(", "this", ".", "email", ",", "other", ".", "email", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "MoreObjects", ".", "toStringHelper", "(", "this", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "name", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "email", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "Person", "fetchPerson", "(", "String", "name", ")", ";", "</s>"]
["<s>", "public", "TestConfiguration", "(", ")", "{", "}", "</s>"]
["<s>", "public", "TestConfiguration", "(", "String", "message", ",", "String", "extra", ")", "{", "this", ".", "message", "=", "message", ";", "this", ".", "extra", "=", "extra", ";", "}", "</s>"]
["<s>", "public", "String", "getMessage", "(", ")", "{", "return", "message", ";", "}", "</s>"]
["<s>", "public", "String", "getExtra", "(", ")", "{", "return", "extra", ";", "}", "</s>"]
["<s>", "public", "TestResource", "(", ")", "{", "this", "(", "DEFAULT_MESSAGE", ")", ";", "}", "</s>"]
["<s>", "public", "TestResource", "(", "String", "message", ")", "{", "this", ".", "message", "=", "message", ";", "}", "</s>"]
["<s>", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "GET", "public", "String", "test", "(", ")", "{", "return", "message", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testResource", "(", ")", "{", "assertThat", "(", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testExceptionMapper", "(", ")", "{", "final", "Response", "resp", "=", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "\"", ")", ")", ";", "assertThat", "(", "resp", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "resp", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "RuntimeException", "exception", ")", "{", "return", "Response", ".", "serverError", "(", ")", ".", "type", "(", "MediaType", ".", "TEXT_PLAIN_TYPE", ")", ".", "entity", "(", "exception", ".", "getMessage", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "TestEntity", "(", ")", "{", "}", "</s>"]
["<s>", "public", "TestEntity", "(", "@", "Nullable", "String", "description", ")", "{", "this", ".", "description", "=", "description", ";", "}", "</s>"]
["<s>", "public", "long", "getId", "(", ")", "{", "return", "id", ";", "}", "</s>"]
["<s>", "public", "String", "getDescription", "(", ")", "{", "return", "requireNonNull", "(", "description", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setDescription", "(", "final", "String", "description", ")", "{", "this", ".", "description", "=", "description", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Timed", "public", "String", "getUriPath", "(", "@", "Context", "UriInfo", "uriInfo", ")", "{", "return", "uriInfo", ".", "getPath", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "public", "String", "getThis", "(", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultConstraintViolation", "(", ")", "{", "assertThat", "(", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "-", "1", ")", ".", "request", "(", ")", ".", "get", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultJsonProcessingMapper", "(", ")", "{", "assertThat", "(", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultExceptionMapper", "(", ")", "{", "assertThat", "(", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{}>", "\"", ")", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultEofExceptionMapper", "(", ")", "{", "assertThat", "(", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "JerseyViolationException", "exception", ")", "{", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ".", "type", "(", "MediaType", ".", "TEXT_PLAIN", ")", ".", "entity", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isMappable", "(", "Throwable", "throwable", ")", "{", "return", "!", "(", "throwable", "instanceof", "JerseyViolationException", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "Throwable", "exception", ")", "{", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ".", "type", "(", "MediaType", ".", "TEXT_PLAIN", ")", ".", "entity", "(", "\"", "<STR_LIT>", "\"", "+", "Strings", ".", "nullToEmpty", "(", "exception", ".", "getMessage", "(", ")", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "test2", "(", ")", "throws", "Exception", "{", "dropwizardAppRule", ".", "before", "(", ")", ";", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNull", "(", ")", ";", "dropwizardAppRule", ".", "after", "(", ")", ";", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "dropwizardAppRule", ".", "before", "(", ")", ";", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dropwizardAppRule", ".", "after", "(", ")", ";", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "System", ".", "clearProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "explicitConfigCreatesSessionFactory", "(", ")", "{", "assertThat", "(", "database", ".", "getSessionFactory", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "final", "Session", "currentSession", "=", "database", ".", "getSessionFactory", "(", ")", ".", "getCurrentSession", "(", ")", ";", "currentSession", ".", "saveOrUpdate", "(", "new", "TestEntity", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testReentrantRuleStartsApplicationOnlyOnce", "(", ")", "throws", "Throwable", "{", "DropwizardAppRule", "<", "TestConfiguration", ">", "dropwizardAppRule", "=", "new", "DropwizardAppRule", "<", ">", "(", "testSupport", ")", ";", "RuleChain", ".", "outerRule", "(", "dropwizardAppRule", ")", ".", "around", "(", "dropwizardAppRule", ")", ".", "apply", "(", "statement", ",", "description", ")", ".", "evaluate", "(", ")", ";", "InOrder", "inOrder", "=", "inOrder", "(", "testSupport", ",", "statement", ",", "description", ")", ";", "inOrder", ".", "verify", "(", "testSupport", ",", "times", "(", "1", ")", ")", ".", "before", "(", ")", ";", "inOrder", ".", "verify", "(", "statement", ")", ".", "evaluate", "(", ")", ";", "inOrder", ".", "verify", "(", "testSupport", ",", "times", "(", "1", ")", ")", ".", "after", "(", ")", ";", "inOrder", ".", "verifyNoMoreInteractions", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canGetExpectedResourceOverHttp", "(", ")", "{", "final", "String", "content", "=", "ClientBuilder", ".", "newClient", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "RULE", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "content", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsConfiguration", "(", ")", "{", "final", "TestConfiguration", "config", "=", "RULE", ".", "getConfiguration", "(", ")", ";", "assertThat", "(", "config", ".", "getMessage", "(", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsApplication", "(", ")", "{", "final", "DropwizardTestApplication", "application", "=", "RULE", ".", "getApplication", "(", ")", ";", "assertNotNull", "(", "application", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsEnvironment", "(", ")", "{", "final", "Environment", "environment", "=", "RULE", ".", "getEnvironment", "(", ")", ";", "assertThat", "(", "environment", ".", "getName", "(", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canPerformAdminTask", "(", ")", "{", "final", "String", "response", "=", "RULE", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "RULE", ".", "getAdminPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "\"", ",", "MediaType", ".", "TEXT_PLAIN", ")", ",", "String", ".", "class", ")", ";", "assertThat", "(", "response", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canPerformAdminTaskWithPostBody", "(", ")", "{", "final", "String", "response", "=", "RULE", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "RULE", ".", "getAdminPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT>", "\"", ",", "MediaType", ".", "TEXT_PLAIN", ")", ",", "String", ".", "class", ")", ";", "assertThat", "(", "response", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "clientUsesJacksonMapperFromEnvironment", "(", ")", "{", "Assertions", ".", "assertThat", "(", "RULE", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "RULE", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "DropwizardTestApplication", ".", "MessageView", ".", "class", ")", ".", "getMessage", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "runWithoutConfigFile", "(", ")", "{", "Map", "<", "String", ",", "String", ">", "response", "=", "RULE", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "RULE", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "new", "GenericType", "<", "Map", "<", "String", ",", "String", ">", ">", "(", ")", "{", "}", ")", ";", "assertThat", "(", "response", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "TestResource", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "Response", "get", "(", ")", "{", "return", "Response", ".", "ok", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "ruleCreatedSessionFactory", "(", ")", "{", "final", "SessionFactory", "sessionFactory", "=", "daoTestRule", ".", "getSessionFactory", "(", ")", ";", "assertThat", "(", "sessionFactory", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "ruleCanOpenTransaction", "(", ")", "{", "final", "Long", "id", "=", "daoTestRule", ".", "inTransaction", "(", "(", ")", "-", ">", "persist", "(", "new", "TestEntity", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "getId", "(", ")", ")", ";", "assertThat", "(", "id", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "ruleCanRoundtrip", "(", ")", "{", "final", "Long", "id", "=", "daoTestRule", ".", "inTransaction", "(", "(", ")", "-", ">", "persist", "(", "new", "TestEntity", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "getId", "(", ")", ")", ";", "final", "TestEntity", "testEntity", "=", "get", "(", "id", ")", ";", "assertThat", "(", "testEntity", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "testEntity", ".", "getDescription", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "ConstraintViolationException", ".", "class", ")", "public", "void", "transactionThrowsExceptionAsExpected", "(", ")", "{", "daoTestRule", ".", "inTransaction", "(", "(", ")", "-", ">", "persist", "(", "new", "TestEntity", "(", "null", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rollsBackTransaction", "(", ")", "{", "final", "TestEntity", "testEntity", "=", "new", "TestEntity", "(", "\"", "<STR_LIT>", "\"", ")", ";", "daoTestRule", ".", "inTransaction", "(", "(", ")", "-", ">", "persist", "(", "testEntity", ")", ")", ";", "testEntity", ".", "setDescription", "(", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "daoTestRule", ".", "inTransaction", "(", "(", ")", "-", ">", "{", "persist", "(", "testEntity", ")", ";", "persist", "(", "new", "TestEntity", "(", "null", ")", ")", ";", "}", ")", ";", "failBecauseExceptionWasNotThrown", "(", "ConstraintViolationException", ".", "class", ")", ";", "}", "catch", "(", "ConstraintViolationException", "ignoredException", ")", "{", "final", "TestEntity", "sameTestEntity", "=", "get", "(", "testEntity", ".", "getId", "(", ")", ")", ";", "assertThat", "(", "sameTestEntity", ".", "getDescription", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "private", "TestEntity", "persist", "(", "TestEntity", "testEntity", ")", "{", "final", "Session", "currentSession", "=", "daoTestRule", ".", "getSessionFactory", "(", ")", ".", "getCurrentSession", "(", ")", ";", "currentSession", ".", "saveOrUpdate", "(", "testEntity", ")", ";", "return", "testEntity", ";", "}", "</s>"]
["<s>", "private", "TestEntity", "get", "(", "Serializable", "id", ")", "{", "final", "Session", "currentSession", "=", "daoTestRule", ".", "getSessionFactory", "(", ")", ".", "getCurrentSession", "(", ")", ";", "final", "TestEntity", "testEntity", "=", "currentSession", ".", "get", "(", "TestEntity", ".", "class", ",", "id", ")", ";", "currentSession", ".", "refresh", "(", "testEntity", ")", ";", "return", "testEntity", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "runWithExplicitConfig", "(", ")", "{", "Map", "<", "String", ",", "String", ">", "response", "=", "RULE", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "RULE", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "new", "GenericType", "<", "Map", "<", "String", ",", "String", ">", ">", "(", ")", "{", "}", ")", ";", "assertThat", "(", "response", ")", ".", "containsOnly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "TestConfiguration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "TestResource", "(", "configuration", ".", "getMessage", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "TestResource", "(", "String", "m", ")", "{", "message", "=", "m", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "Response", "get", "(", ")", "{", "return", "Response", ".", "ok", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "message", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "supportsConfigAttributeOverrides", "(", ")", "{", "final", "String", "content", "=", "RULE", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "RULE", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "content", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "supportsSuppliedConfigAttributeOverrides", "(", ")", "throws", "Exception", "{", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "timeout", "=", "<NUM_LIT>", ")", "public", "void", "shouldGetStringBodyFromDropWizard", "(", ")", "throws", "IOException", "{", "final", "URL", "url", "=", "new", "URL", "(", "RULE_WITH_INSTANCE", ".", "baseUri", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "\"", "<STR_LIT>", "\"", ")", ".", "isEqualTo", "(", "Resources", ".", "toString", "(", "url", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "timeout", "=", "<NUM_LIT>", ")", "public", "void", "shouldGetDefaultStringBodyFromDropWizard", "(", ")", "throws", "IOException", "{", "final", "URL", "url", "=", "new", "URL", "(", "RULE_WITH_CLASS", ".", "baseUri", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "Resources", ".", "toString", "(", "url", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ".", "isEqualTo", "(", "TestResource", ".", "DEFAULT_MESSAGE", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldGetStringBodyFromDropWizard", "(", ")", "throws", "IOException", "{", "final", "URL", "url", "=", "new", "URL", "(", "EXTENSION_WITH_INSTANCE", ".", "baseUri", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "\"", "<STR_LIT>", "\"", ")", ".", "isEqualTo", "(", "Resources", ".", "toString", "(", "url", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldGetDefaultStringBodyFromDropWizard", "(", ")", "throws", "IOException", "{", "final", "URL", "url", "=", "new", "URL", "(", "EXTENSION_WITH_CLASS", ".", "baseUri", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "Resources", ".", "toString", "(", "url", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ".", "isEqualTo", "(", "TestResource", ".", "DEFAULT_MESSAGE", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "explicitConfigCreatesSessionFactory", "(", ")", "{", "assertThat", "(", "database", ".", "getSessionFactory", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "final", "Session", "currentSession", "=", "database", ".", "getSessionFactory", "(", ")", ".", "getCurrentSession", "(", ")", ";", "currentSession", ".", "saveOrUpdate", "(", "new", "TestEntity", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultVaryHeader", "(", ")", "{", "final", "Response", "clientResponse", "=", "extension", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "extension", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "ACCEPT_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", ")", ";", "assertThat", "(", "clientResponse", ".", "getHeaders", "(", ")", ".", "get", "(", "VARY", ")", ")", ".", "isEqualTo", "(", "Collections", ".", "singletonList", "(", "(", "Object", ")", "ACCEPT_ENCODING", ")", ")", ";", "assertThat", "(", "clientResponse", ".", "getHeaders", "(", ")", ".", "get", "(", "CONTENT_ENCODING", ")", ")", ".", "isEqualTo", "(", "Collections", ".", "singletonList", "(", "(", "Object", ")", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "runWithoutConfigFile", "(", ")", "{", "Map", "<", "?", ",", "?", ">", "response", "=", "EXTENSION", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "EXTENSION", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Map", ".", "class", ")", ";", "Assertions", ".", "assertEquals", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "TestResource", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "Response", "get", "(", ")", "{", "return", "Response", ".", "ok", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canGetExpectedResourceOverHttp", "(", ")", "{", "final", "String", "content", "=", "ClientBuilder", ".", "newClient", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "EXTENSION", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "content", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsConfiguration", "(", ")", "{", "final", "TestConfiguration", "config", "=", "EXTENSION", ".", "getConfiguration", "(", ")", ";", "assertThat", "(", "config", ".", "getMessage", "(", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsApplication", "(", ")", "{", "final", "DropwizardTestApplication", "application", "=", "EXTENSION", ".", "getApplication", "(", ")", ";", "Assertions", ".", "assertNotNull", "(", "application", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsEnvironment", "(", ")", "{", "final", "Environment", "environment", "=", "EXTENSION", ".", "getEnvironment", "(", ")", ";", "assertThat", "(", "environment", ".", "getName", "(", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canPerformAdminTask", "(", ")", "{", "final", "String", "response", "=", "EXTENSION", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "EXTENSION", ".", "getAdminPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "\"", ",", "MediaType", ".", "TEXT_PLAIN", ")", ",", "String", ".", "class", ")", ";", "assertThat", "(", "response", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canPerformAdminTaskWithPostBody", "(", ")", "{", "final", "String", "response", "=", "EXTENSION", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "EXTENSION", ".", "getAdminPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT>", "\"", ",", "MediaType", ".", "TEXT_PLAIN", ")", ",", "String", ".", "class", ")", ";", "assertThat", "(", "response", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "clientUsesJacksonMapperFromEnvironment", "(", ")", "{", "assertThat", "(", "EXTENSION", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "EXTENSION", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "DropwizardTestApplication", ".", "MessageView", ".", "class", ")", ".", "getMessage", "(", ")", ",", "is", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "WebApplicationException", "e", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "BeforeEach", "public", "void", "setup", "(", ")", "{", "when", "(", "peopleStore", ".", "fetchPerson", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "person", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetPerson", "(", ")", "{", "assertThat", "(", "resources", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Person", ".", "class", ")", ")", ".", "isEqualTo", "(", "person", ")", ";", "verify", "(", "peopleStore", ")", ".", "fetchPerson", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetImmutableListOfPersons", "(", ")", "{", "assertThat", "(", "resources", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "new", "GenericType", "<", "ImmutableList", "<", "Person", ">", ">", "(", ")", "{", "}", ")", ")", ".", "isEqualTo", "(", "ImmutableList", ".", "of", "(", "person", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetPersonWithQueryParam", "(", ")", "{", "assertThat", "(", "resources", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "0", ")", ".", "request", "(", ")", ".", "get", "(", "Person", ".", "class", ")", ")", ".", "isEqualTo", "(", "person", ")", ";", "verify", "(", "peopleStore", ")", ".", "fetchPerson", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultConstraintViolation", "(", ")", "{", "assertThat", "(", "resources", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "-", "1", ")", ".", "request", "(", ")", ".", "get", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultJsonProcessingMapper", "(", ")", "{", "assertThat", "(", "resources", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultExceptionMapper", "(", ")", "{", "assertThat", "(", "resources", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{}>", "\"", ")", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "startsWith", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultEofExceptionMapper", "(", ")", "{", "assertThat", "(", "resources", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ".", "getStatusCode", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testValidationGroupsException", "(", ")", "{", "final", "Response", "resp", "=", "resources", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{}>", "\"", ")", ")", ";", "assertThat", "(", "resp", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "Response", ".", "Status", ".", "INTERNAL_SERVER_ERROR", ".", "getStatusCode", "(", ")", ")", ";", "assertThat", "(", "resp", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCustomClientConfiguration", "(", ")", "{", "assertThat", "(", "resources", ".", "client", "(", ")", ".", "getConfiguration", "(", ")", ".", "isRegistered", "(", "DummyExceptionMapper", ".", "class", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "runWithExplicitConfig", "(", ")", "{", "Map", "<", "?", ",", "?", ">", "response", "=", "EXTENSION", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "EXTENSION", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Map", ".", "class", ")", ";", "Assertions", ".", "assertEquals", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:!>", "\"", ")", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "TestConfiguration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "TestResource", "(", "configuration", ".", "getMessage", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "TestResource", "(", "String", "m", ")", "{", "message", "=", "m", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "Response", "get", "(", ")", "{", "return", "Response", ".", "ok", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "message", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "extensionCreatedSessionFactory", "(", ")", "{", "final", "SessionFactory", "sessionFactory", "=", "daoTestExtension", ".", "getSessionFactory", "(", ")", ";", "assertThat", "(", "sessionFactory", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "extensionCanOpenTransaction", "(", ")", "{", "final", "Long", "id", "=", "daoTestExtension", ".", "inTransaction", "(", "(", ")", "-", ">", "persist", "(", "new", "TestEntity", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "getId", "(", ")", ")", ";", "assertThat", "(", "id", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "extensionCanRoundtrip", "(", ")", "{", "final", "Long", "id", "=", "daoTestExtension", ".", "inTransaction", "(", "(", ")", "-", ">", "persist", "(", "new", "TestEntity", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "getId", "(", ")", ")", ";", "final", "TestEntity", "testEntity", "=", "get", "(", "id", ")", ";", "assertThat", "(", "testEntity", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "testEntity", ".", "getDescription", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", ")", "public", "void", "transactionThrowsExceptionAsExpected", "(", ")", "{", "Throwable", "throwable", "=", "Assertions", ".", "assertThrows", "(", "ConstraintViolationException", ".", "class", ",", "(", ")", "-", ">", "daoTestExtension", ".", "inTransaction", "(", "(", ")", "-", ">", "persist", "(", "new", "TestEntity", "(", "null", ")", ")", ")", ")", ";", "Assertions", ".", "assertEquals", "(", "ConstraintViolationException", ".", "class", ",", "throwable", ".", "getClass", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rollsBackTransaction", "(", ")", "{", "final", "TestEntity", "testEntity", "=", "new", "TestEntity", "(", "\"", "<STR_LIT>", "\"", ")", ";", "daoTestExtension", ".", "inTransaction", "(", "(", ")", "-", ">", "persist", "(", "testEntity", ")", ")", ";", "testEntity", ".", "setDescription", "(", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "daoTestExtension", ".", "inTransaction", "(", "(", ")", "-", ">", "{", "persist", "(", "testEntity", ")", ";", "persist", "(", "new", "TestEntity", "(", "null", ")", ")", ";", "}", ")", ";", "failBecauseExceptionWasNotThrown", "(", "ConstraintViolationException", ".", "class", ")", ";", "}", "catch", "(", "ConstraintViolationException", "ignoredException", ")", "{", "final", "TestEntity", "sameTestEntity", "=", "get", "(", "testEntity", ".", "getId", "(", ")", ")", ";", "assertThat", "(", "sameTestEntity", ".", "getDescription", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "private", "TestEntity", "persist", "(", "TestEntity", "testEntity", ")", "{", "final", "Session", "currentSession", "=", "daoTestExtension", ".", "getSessionFactory", "(", ")", ".", "getCurrentSession", "(", ")", ";", "currentSession", ".", "saveOrUpdate", "(", "testEntity", ")", ";", "return", "testEntity", ";", "}", "</s>"]
["<s>", "private", "TestEntity", "get", "(", "Serializable", "id", ")", "{", "final", "Session", "currentSession", "=", "daoTestExtension", ".", "getSessionFactory", "(", ")", ".", "getCurrentSession", "(", ")", ";", "final", "TestEntity", "testEntity", "=", "currentSession", ".", "get", "(", "TestEntity", ".", "class", ",", "id", ")", ";", "currentSession", ".", "refresh", "(", "testEntity", ")", ";", "return", "testEntity", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "supportsConfigAttributeOverrides", "(", ")", "{", "final", "String", "content", "=", "EXTENSION", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "EXTENSION", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "content", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "supportsSuppliedConfigAttributeOverrides", "(", ")", "throws", "Exception", "{", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "test2", "(", ")", "throws", "Exception", "{", "dropwizardAppExtension", ".", "before", "(", ")", ";", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNull", "(", ")", ";", "dropwizardAppExtension", ".", "after", "(", ")", ";", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "dropwizardAppExtension", ".", "before", "(", ")", ";", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dropwizardAppExtension", ".", "after", "(", ")", ";", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "System", ".", "clearProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultConstraintViolation", "(", ")", "{", "assertThat", "(", "resources", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "-", "1", ")", ".", "request", "(", ")", ".", "get", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultJsonProcessingMapper", "(", ")", "{", "assertThat", "(", "resources", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultExceptionMapper", "(", ")", "{", "assertThat", "(", "resources", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{}>", "\"", ")", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultEofExceptionMapper", "(", ")", "{", "assertThat", "(", "resources", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "JerseyViolationException", "exception", ")", "{", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ".", "type", "(", "MediaType", ".", "TEXT_PLAIN", ")", ".", "entity", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isMappable", "(", "Throwable", "throwable", ")", "{", "return", "!", "(", "throwable", "instanceof", "JerseyViolationException", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "Throwable", "exception", ")", "{", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ".", "type", "(", "MediaType", ".", "TEXT_PLAIN", ")", ".", "entity", "(", "\"", "<STR_LIT>", "\"", "+", "Strings", ".", "nullToEmpty", "(", "exception", ".", "getMessage", "(", ")", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "FixtureHelpers", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "String", "fixture", "(", "String", "filename", ")", "{", "return", "fixture", "(", "filename", ",", "StandardCharsets", ".", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "fixture", "(", "String", "filename", ",", "Charset", "charset", ")", "{", "try", "{", "return", "Resources", ".", "toString", "(", "Resources", ".", "getResource", "(", "filename", ")", ",", "charset", ")", ".", "trim", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "IllegalArgumentException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "POJOConfigurationFactory", "(", "C", "cfg", ")", "{", "super", "(", "(", "Class", "<", "C", ">", ")", "cfg", ".", "getClass", "(", ")", ",", "null", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "configuration", "=", "cfg", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "C", "build", "(", "ConfigurationSourceProvider", "provider", ",", "String", "path", ")", "{", "return", "configuration", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "C", "build", "(", "File", "file", ")", "{", "return", "configuration", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "C", "build", "(", ")", "{", "return", "configuration", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "C", "build", "(", "JsonNode", "node", ",", "String", "path", ")", "{", "return", "configuration", ";", "}", "</s>"]
["<s>", "private", "ConfigOverride", "(", "String", "propertyPrefix", ",", "String", "key", ",", "Supplier", "<", "String", ">", "value", ")", "{", "this", ".", "key", "=", "key", ";", "this", ".", "value", "=", "value", ";", "this", ".", "propertyPrefix", "=", "propertyPrefix", ".", "endsWith", "(", "\"", "<STR_LIT:.>", "\"", ")", "?", "propertyPrefix", ":", "propertyPrefix", "+", "\"", "<STR_LIT:.>", "\"", ";", "}", "</s>"]
["<s>", "public", "static", "ConfigOverride", "config", "(", "String", "key", ",", "String", "value", ")", "{", "return", "new", "ConfigOverride", "(", "DEFAULT_PREFIX", ",", "key", ",", "(", ")", "-", ">", "value", ")", ";", "}", "</s>"]
["<s>", "public", "static", "ConfigOverride", "config", "(", "String", "propertyPrefix", ",", "String", "key", ",", "String", "value", ")", "{", "return", "new", "ConfigOverride", "(", "propertyPrefix", ",", "key", ",", "(", ")", "-", ">", "value", ")", ";", "}", "</s>"]
["<s>", "public", "static", "ConfigOverride", "config", "(", "String", "key", ",", "Supplier", "<", "String", ">", "value", ")", "{", "return", "new", "ConfigOverride", "(", "DEFAULT_PREFIX", ",", "key", ",", "value", ")", ";", "}", "</s>"]
["<s>", "public", "static", "ConfigOverride", "config", "(", "String", "propertyPrefix", ",", "String", "key", ",", "Supplier", "<", "String", ">", "value", ")", "{", "return", "new", "ConfigOverride", "(", "propertyPrefix", ",", "key", ",", "value", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addToSystemProperties", "(", ")", "{", "System", ".", "setProperty", "(", "propertyPrefix", "+", "key", ",", "value", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "removeFromSystemProperties", "(", ")", "{", "System", ".", "clearProperty", "(", "propertyPrefix", "+", "key", ")", ";", "}", "</s>"]
["<s>", "private", "ResourceHelpers", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "String", "resourceFilePath", "(", "final", "String", "resourceClassPathLocation", ")", "{", "try", "{", "return", "new", "File", "(", "Resources", ".", "getResource", "(", "resourceClassPathLocation", ")", ".", "toURI", "(", ")", ")", ".", "getAbsolutePath", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "DropwizardTestSupport", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "@", "Nullable", "String", "configPath", ",", "ConfigOverride", ".", ".", ".", "configOverrides", ")", "{", "this", "(", "applicationClass", ",", "configPath", ",", "Optional", ".", "empty", "(", ")", ",", "configOverrides", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardTestSupport", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "@", "Nullable", "String", "configPath", ",", "Optional", "<", "String", ">", "customPropertyPrefix", ",", "ConfigOverride", ".", ".", ".", "configOverrides", ")", "{", "this", "(", "applicationClass", ",", "configPath", ",", "customPropertyPrefix", ",", "ServerCommand", ":", ":", "new", ",", "configOverrides", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardTestSupport", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "@", "Nullable", "String", "configPath", ",", "Optional", "<", "String", ">", "customPropertyPrefix", ",", "Function", "<", "Application", "<", "C", ">", ",", "Command", ">", "commandInstantiator", ",", "ConfigOverride", ".", ".", ".", "configOverrides", ")", "{", "this", ".", "applicationClass", "=", "applicationClass", ";", "this", ".", "configPath", "=", "configPath", ";", "this", ".", "configOverrides", "=", "ImmutableSet", ".", "copyOf", "(", "firstNonNull", "(", "configOverrides", ",", "new", "ConfigOverride", "[", "0", "]", ")", ")", ";", "this", ".", "customPropertyPrefix", "=", "customPropertyPrefix", ";", "explicitConfig", "=", "false", ";", "this", ".", "commandInstantiator", "=", "commandInstantiator", ";", "}", "</s>"]
["<s>", "public", "DropwizardTestSupport", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "C", "configuration", ")", "{", "this", "(", "applicationClass", ",", "configuration", ",", "ServerCommand", ":", ":", "new", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardTestSupport", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "C", "configuration", ",", "Function", "<", "Application", "<", "C", ">", ",", "Command", ">", "commandInstantiator", ")", "{", "if", "(", "configuration", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "applicationClass", "=", "applicationClass", ";", "configPath", "=", "\"", "\"", ";", "configOverrides", "=", "ImmutableSet", ".", "of", "(", ")", ";", "customPropertyPrefix", "=", "Optional", ".", "empty", "(", ")", ";", "this", ".", "configuration", "=", "configuration", ";", "explicitConfig", "=", "true", ";", "this", ".", "commandInstantiator", "=", "commandInstantiator", ";", "}", "</s>"]
["<s>", "public", "DropwizardTestSupport", "<", "C", ">", "addListener", "(", "ServiceListener", "<", "C", ">", "listener", ")", "{", "this", ".", "listeners", ".", "add", "(", "listener", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "DropwizardTestSupport", "<", "C", ">", "manage", "(", "final", "Managed", "managed", ")", "{", "return", "addListener", "(", "new", "ServiceListener", "<", "C", ">", "(", ")", "{", "@", "Override", "public", "void", "onRun", "(", "C", "configuration", ",", "Environment", "environment", ",", "DropwizardTestSupport", "<", "C", ">", "rule", ")", "throws", "Exception", "{", "environment", ".", "lifecycle", "(", ")", ".", "manage", "(", "managed", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onRun", "(", "C", "configuration", ",", "Environment", "environment", ",", "DropwizardTestSupport", "<", "C", ">", "rule", ")", "throws", "Exception", "{", "environment", ".", "lifecycle", "(", ")", ".", "manage", "(", "managed", ")", ";", "}", "</s>"]
["<s>", "public", "void", "before", "(", ")", "{", "applyConfigOverrides", "(", ")", ";", "startIfRequired", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "after", "(", ")", "{", "try", "{", "stopIfRequired", "(", ")", ";", "}", "finally", "{", "resetConfigOverrides", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "stopIfRequired", "(", ")", "{", "if", "(", "jettyServer", "!", "=", "null", ")", "{", "for", "(", "ServiceListener", "<", "C", ">", "listener", ":", "listeners", ")", "{", "try", "{", "listener", ".", "onStop", "(", "this", ")", ";", "}", "catch", "(", "Exception", "ignored", ")", "{", "}", "}", "try", "{", "jettyServer", ".", "stop", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "Throwables", ".", "throwIfUnchecked", "(", "e", ")", ";", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "finally", "{", "jettyServer", "=", "null", ";", "}", "}", "requireNonNull", "(", "configuration", ")", ".", "getLoggingFactory", "(", ")", ".", "reset", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "applyConfigOverrides", "(", ")", "{", "for", "(", "ConfigOverride", "configOverride", ":", "configOverrides", ")", "{", "configOverride", ".", "addToSystemProperties", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "resetConfigOverrides", "(", ")", "{", "for", "(", "ConfigOverride", "configOverride", ":", "configOverrides", ")", "{", "configOverride", ".", "removeFromSystemProperties", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "startIfRequired", "(", ")", "{", "if", "(", "jettyServer", "!", "=", "null", ")", "{", "return", ";", "}", "try", "{", "application", "=", "newApplication", "(", ")", ";", "final", "Bootstrap", "<", "C", ">", "bootstrap", "=", "new", "Bootstrap", "<", "C", ">", "(", "getApplication", "(", ")", ")", "{", "@", "Override", "public", "void", "run", "(", "C", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "lifecycle", "(", ")", ".", "addServerLifecycleListener", "(", "server", "-", ">", "jettyServer", "=", "server", ")", ";", "DropwizardTestSupport", ".", "this", ".", "configuration", "=", "configuration", ";", "DropwizardTestSupport", ".", "this", ".", "environment", "=", "environment", ";", "super", ".", "run", "(", "configuration", ",", "environment", ")", ";", "for", "(", "ServiceListener", "<", "C", ">", "listener", ":", "listeners", ")", "{", "try", "{", "listener", ".", "onRun", "(", "configuration", ",", "environment", ",", "DropwizardTestSupport", ".", "this", ")", ";", "}", "catch", "(", "Exception", "ex", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ",", "ex", ")", ";", "}", "}", "}", "}", ";", "if", "(", "explicitConfig", ")", "{", "bootstrap", ".", "setConfigurationFactoryFactory", "(", "(", "klass", ",", "validator", ",", "objectMapper", ",", "propertyPrefix", ")", "-", ">", "new", "POJOConfigurationFactory", "<", ">", "(", "getConfiguration", "(", ")", ")", ")", ";", "}", "else", "if", "(", "customPropertyPrefix", ".", "isPresent", "(", ")", ")", "{", "bootstrap", ".", "setConfigurationFactoryFactory", "(", "(", "klass", ",", "validator", ",", "objectMapper", ",", "propertyPrefix", ")", "-", ">", "new", "YamlConfigurationFactory", "<", ">", "(", "klass", ",", "validator", ",", "objectMapper", ",", "customPropertyPrefix", ".", "get", "(", ")", ")", ")", ";", "}", "getApplication", "(", ")", ".", "initialize", "(", "bootstrap", ")", ";", "final", "Command", "command", "=", "commandInstantiator", ".", "apply", "(", "application", ")", ";", "final", "ImmutableMap", ".", "Builder", "<", "String", ",", "Object", ">", "file", "=", "ImmutableMap", ".", "builder", "(", ")", ";", "if", "(", "!", "Strings", ".", "isNullOrEmpty", "(", "configPath", ")", ")", "{", "file", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "configPath", ")", ";", "}", "final", "Namespace", "namespace", "=", "new", "Namespace", "(", "file", ".", "build", "(", ")", ")", ";", "command", ".", "run", "(", "bootstrap", ",", "namespace", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "Throwables", ".", "throwIfUnchecked", "(", "e", ")", ";", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "C", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "lifecycle", "(", ")", ".", "addServerLifecycleListener", "(", "server", "-", ">", "jettyServer", "=", "server", ")", ";", "DropwizardTestSupport", ".", "this", ".", "configuration", "=", "configuration", ";", "DropwizardTestSupport", ".", "this", ".", "environment", "=", "environment", ";", "super", ".", "run", "(", "configuration", ",", "environment", ")", ";", "for", "(", "ServiceListener", "<", "C", ">", "listener", ":", "listeners", ")", "{", "try", "{", "listener", ".", "onRun", "(", "configuration", ",", "environment", ",", "DropwizardTestSupport", ".", "this", ")", ";", "}", "catch", "(", "Exception", "ex", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ",", "ex", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "C", "getConfiguration", "(", ")", "{", "return", "requireNonNull", "(", "configuration", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getLocalPort", "(", ")", "{", "return", "(", "(", "ServerConnector", ")", "requireNonNull", "(", "jettyServer", ")", ".", "getConnectors", "(", ")", "[", "0", "]", ")", ".", "getLocalPort", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getAdminPort", "(", ")", "{", "final", "Connector", "[", "]", "connectors", "=", "requireNonNull", "(", "jettyServer", ")", ".", "getConnectors", "(", ")", ";", "return", "(", "(", "ServerConnector", ")", "connectors", "[", "connectors", ".", "length", "-", "1", "]", ")", ".", "getLocalPort", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getPort", "(", "int", "connectorIndex", ")", "{", "return", "(", "(", "ServerConnector", ")", "requireNonNull", "(", "jettyServer", ")", ".", "getConnectors", "(", ")", "[", "connectorIndex", "]", ")", ".", "getLocalPort", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Application", "<", "C", ">", "newApplication", "(", ")", "{", "try", "{", "return", "applicationClass", ".", "getConstructor", "(", ")", ".", "newInstance", "(", ")", ";", "}", "catch", "(", "NoSuchMethodException", "|", "InstantiationException", "|", "IllegalAccessException", "|", "InvocationTargetException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "<", "A", "extends", "Application", "<", "C", ">", ">", "A", "getApplication", "(", ")", "{", "return", "(", "A", ")", "requireNonNull", "(", "application", ")", ";", "}", "</s>"]
["<s>", "public", "Environment", "getEnvironment", "(", ")", "{", "return", "requireNonNull", "(", "environment", ")", ";", "}", "</s>"]
["<s>", "public", "ObjectMapper", "getObjectMapper", "(", ")", "{", "return", "getEnvironment", "(", ")", ".", "getObjectMapper", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onRun", "(", "T", "configuration", ",", "Environment", "environment", ",", "DropwizardTestSupport", "<", "T", ">", "rule", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "public", "void", "onStop", "(", "DropwizardTestSupport", "<", "T", ">", "rule", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "public", "DAOTestRule", "build", "(", ")", "{", "return", "new", "DAOTestRule", "(", "buildDAOTest", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Builder", "newBuilder", "(", ")", "{", "return", "new", "Builder", "(", ")", ";", "}", "</s>"]
["<s>", "private", "DAOTestRule", "(", "DAOTest", "daoTest", ")", "{", "this", ".", "daoTest", "=", "daoTest", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "before", "(", ")", "throws", "Throwable", "{", "daoTest", ".", "before", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "after", "(", ")", "{", "daoTest", ".", "after", "(", ")", ";", "}", "</s>"]
["<s>", "public", "SessionFactory", "getSessionFactory", "(", ")", "{", "return", "daoTest", ".", "getSessionFactory", "(", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "inTransaction", "(", "Callable", "<", "T", ">", "call", ")", "{", "return", "daoTest", ".", "inTransaction", "(", "call", ")", ";", "}", "</s>"]
["<s>", "public", "void", "inTransaction", "(", "Runnable", "action", ")", "{", "daoTest", ".", "inTransaction", "(", "action", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppRule", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ")", "{", "this", "(", "applicationClass", ",", "(", "String", ")", "null", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppRule", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "@", "Nullable", "String", "configPath", ",", "ConfigOverride", ".", ".", ".", "configOverrides", ")", "{", "this", "(", "applicationClass", ",", "configPath", ",", "Optional", ".", "empty", "(", ")", ",", "configOverrides", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppRule", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "@", "Nullable", "String", "configPath", ",", "Optional", "<", "String", ">", "customPropertyPrefix", ",", "ConfigOverride", ".", ".", ".", "configOverrides", ")", "{", "this", "(", "applicationClass", ",", "configPath", ",", "customPropertyPrefix", ",", "ServerCommand", ":", ":", "new", ",", "configOverrides", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppRule", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "@", "Nullable", "String", "configPath", ",", "Optional", "<", "String", ">", "customPropertyPrefix", ",", "Function", "<", "Application", "<", "C", ">", ",", "Command", ">", "commandInstantiator", ",", "ConfigOverride", ".", ".", ".", "configOverrides", ")", "{", "this", "(", "new", "DropwizardTestSupport", "<", ">", "(", "applicationClass", ",", "configPath", ",", "customPropertyPrefix", ",", "commandInstantiator", ",", "configOverrides", ")", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppRule", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "C", "configuration", ")", "{", "this", "(", "new", "DropwizardTestSupport", "<", ">", "(", "applicationClass", ",", "configuration", ")", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppRule", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "C", "configuration", ",", "Function", "<", "Application", "<", "C", ">", ",", "Command", ">", "commandInstantiator", ")", "{", "this", "(", "new", "DropwizardTestSupport", "<", ">", "(", "applicationClass", ",", "configuration", ",", "commandInstantiator", ")", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppRule", "(", "DropwizardTestSupport", "<", "C", ">", "testSupport", ")", "{", "this", ".", "testSupport", "=", "testSupport", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppRule", "<", "C", ">", "addListener", "(", "final", "ServiceListener", "<", "C", ">", "listener", ")", "{", "this", ".", "testSupport", ".", "addListener", "(", "new", "DropwizardTestSupport", ".", "ServiceListener", "<", "C", ">", "(", ")", "{", "@", "Override", "public", "void", "onRun", "(", "C", "configuration", ",", "Environment", "environment", ",", "DropwizardTestSupport", "<", "C", ">", "rule", ")", "throws", "Exception", "{", "listener", ".", "onRun", "(", "configuration", ",", "environment", ",", "DropwizardAppRule", ".", "this", ")", ";", "}", "@", "Override", "public", "void", "onStop", "(", "DropwizardTestSupport", "<", "C", ">", "rule", ")", "throws", "Exception", "{", "listener", ".", "onStop", "(", "DropwizardAppRule", ".", "this", ")", ";", "}", "}", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onRun", "(", "C", "configuration", ",", "Environment", "environment", ",", "DropwizardTestSupport", "<", "C", ">", "rule", ")", "throws", "Exception", "{", "listener", ".", "onRun", "(", "configuration", ",", "environment", ",", "DropwizardAppRule", ".", "this", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onStop", "(", "DropwizardTestSupport", "<", "C", ">", "rule", ")", "throws", "Exception", "{", "listener", ".", "onStop", "(", "DropwizardAppRule", ".", "this", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppRule", "<", "C", ">", "manage", "(", "final", "Managed", "managed", ")", "{", "return", "addListener", "(", "new", "ServiceListener", "<", "C", ">", "(", ")", "{", "@", "Override", "public", "void", "onRun", "(", "C", "configuration", ",", "Environment", "environment", ",", "DropwizardAppRule", "<", "C", ">", "rule", ")", "throws", "Exception", "{", "environment", ".", "lifecycle", "(", ")", ".", "manage", "(", "managed", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onRun", "(", "C", "configuration", ",", "Environment", "environment", ",", "DropwizardAppRule", "<", "C", ">", "rule", ")", "throws", "Exception", "{", "environment", ".", "lifecycle", "(", ")", ".", "manage", "(", "managed", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "before", "(", ")", "{", "if", "(", "recursiveCallCount", ".", "getAndIncrement", "(", ")", "=", "=", "0", ")", "{", "testSupport", ".", "before", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "after", "(", ")", "{", "if", "(", "recursiveCallCount", ".", "decrementAndGet", "(", ")", "=", "=", "0", ")", "{", "testSupport", ".", "after", "(", ")", ";", "synchronized", "(", "this", ")", "{", "if", "(", "client", "!", "=", "null", ")", "{", "client", ".", "close", "(", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "public", "C", "getConfiguration", "(", ")", "{", "return", "testSupport", ".", "getConfiguration", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getLocalPort", "(", ")", "{", "return", "testSupport", ".", "getLocalPort", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getPort", "(", "int", "connectorIndex", ")", "{", "return", "testSupport", ".", "getPort", "(", "connectorIndex", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getAdminPort", "(", ")", "{", "return", "testSupport", ".", "getAdminPort", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Application", "<", "C", ">", "newApplication", "(", ")", "{", "return", "testSupport", ".", "newApplication", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "<", "A", "extends", "Application", "<", "C", ">", ">", "A", "getApplication", "(", ")", "{", "return", "testSupport", ".", "getApplication", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Environment", "getEnvironment", "(", ")", "{", "return", "testSupport", ".", "getEnvironment", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ObjectMapper", "getObjectMapper", "(", ")", "{", "return", "testSupport", ".", "getObjectMapper", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onRun", "(", "T", "configuration", ",", "Environment", "environment", ",", "DropwizardAppRule", "<", "T", ">", "rule", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "public", "void", "onStop", "(", "DropwizardAppRule", "<", "T", ">", "rule", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "public", "DropwizardTestSupport", "<", "C", ">", "getTestSupport", "(", ")", "{", "return", "testSupport", ";", "}", "</s>"]
["<s>", "public", "Client", "client", "(", ")", "{", "synchronized", "(", "this", ")", "{", "if", "(", "client", "=", "=", "null", ")", "{", "client", "=", "clientBuilder", "(", ")", ".", "build", "(", ")", ";", "}", "return", "client", ";", "}", "}", "</s>"]
["<s>", "protected", "JerseyClientBuilder", "clientBuilder", "(", ")", "{", "return", "new", "JerseyClientBuilder", "(", ")", ".", "register", "(", "new", "JacksonBinder", "(", "getObjectMapper", "(", ")", ")", ")", ".", "property", "(", "ClientProperties", ".", "CONNECT_TIMEOUT", ",", "DEFAULT_CONNECT_TIMEOUT_MS", ")", ".", "property", "(", "ClientProperties", ".", "READ_TIMEOUT", ",", "DEFAULT_READ_TIMEOUT_MS", ")", ";", "}", "</s>"]
["<s>", "public", "ResourceTestRule", "build", "(", ")", "{", "return", "new", "ResourceTestRule", "(", "buildResource", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "ResourceTestRule", ".", "Builder", "builder", "(", ")", "{", "return", "new", "ResourceTestRule", ".", "Builder", "(", ")", ";", "}", "</s>"]
["<s>", "private", "ResourceTestRule", "(", "Resource", "resource", ")", "{", "this", ".", "resource", "=", "resource", ";", "}", "</s>"]
["<s>", "public", "Validator", "getValidator", "(", ")", "{", "return", "resource", ".", "getValidator", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ObjectMapper", "getObjectMapper", "(", ")", "{", "return", "resource", ".", "getObjectMapper", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Consumer", "<", "ClientConfig", ">", "getClientConfigurator", "(", ")", "{", "return", "resource", ".", "getClientConfigurator", "(", ")", ";", "}", "</s>"]
["<s>", "public", "WebTarget", "target", "(", "String", "path", ")", "{", "return", "resource", ".", "target", "(", "path", ")", ";", "}", "</s>"]
["<s>", "public", "Client", "client", "(", ")", "{", "return", "resource", ".", "client", "(", ")", ";", "}", "</s>"]
["<s>", "public", "JerseyTest", "getJerseyTest", "(", ")", "{", "return", "resource", ".", "getJerseyTest", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Statement", "apply", "(", "Statement", "base", ",", "Description", "description", ")", "{", "return", "new", "Statement", "(", ")", "{", "@", "Override", "public", "void", "evaluate", "(", ")", "throws", "Throwable", "{", "try", "{", "resource", ".", "before", "(", ")", ";", "base", ".", "evaluate", "(", ")", ";", "}", "finally", "{", "resource", ".", "after", "(", ")", ";", "}", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "evaluate", "(", ")", "throws", "Throwable", "{", "try", "{", "resource", ".", "before", "(", ")", ";", "base", ".", "evaluate", "(", ")", ";", "}", "finally", "{", "resource", ".", "after", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "DropwizardClientRule", "(", "Object", ".", ".", ".", "resources", ")", "{", "this", ".", "client", "=", "new", "DropwizardClient", "(", "resources", ")", ";", "}", "</s>"]
["<s>", "public", "URI", "baseUri", "(", ")", "{", "return", "client", ".", "baseUri", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ObjectMapper", "getObjectMapper", "(", ")", "{", "return", "client", ".", "getObjectMapper", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Environment", "getEnvironment", "(", ")", "{", "return", "client", ".", "getEnvironment", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "before", "(", ")", "throws", "Throwable", "{", "client", ".", "before", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "after", "(", ")", "{", "client", ".", "after", "(", ")", ";", "}", "</s>"]
["<s>", "public", "DAOTestExtension", "build", "(", ")", "{", "return", "new", "DAOTestExtension", "(", "buildDAOTest", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Builder", "newBuilder", "(", ")", "{", "return", "new", "Builder", "(", ")", ";", "}", "</s>"]
["<s>", "private", "DAOTestExtension", "(", "DAOTest", "daoTest", ")", "{", "this", ".", "daoTest", "=", "daoTest", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "before", "(", ")", "throws", "Throwable", "{", "daoTest", ".", "before", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "after", "(", ")", "{", "daoTest", ".", "after", "(", ")", ";", "}", "</s>"]
["<s>", "public", "SessionFactory", "getSessionFactory", "(", ")", "{", "return", "daoTest", ".", "getSessionFactory", "(", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "inTransaction", "(", "Callable", "<", "T", ">", "call", ")", "{", "return", "daoTest", ".", "inTransaction", "(", "call", ")", ";", "}", "</s>"]
["<s>", "public", "void", "inTransaction", "(", "Runnable", "action", ")", "{", "daoTest", ".", "inTransaction", "(", "action", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardClientExtension", "(", "Object", ".", ".", ".", "resources", ")", "{", "this", ".", "client", "=", "new", "DropwizardClient", "(", "resources", ")", ";", "}", "</s>"]
["<s>", "public", "URI", "baseUri", "(", ")", "{", "return", "client", ".", "baseUri", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ObjectMapper", "getObjectMapper", "(", ")", "{", "return", "client", ".", "getObjectMapper", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Environment", "getEnvironment", "(", ")", "{", "return", "client", ".", "getEnvironment", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "before", "(", ")", "throws", "Throwable", "{", "client", ".", "before", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "after", "(", ")", "{", "client", ".", "after", "(", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppExtension", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ")", "{", "this", "(", "applicationClass", ",", "(", "String", ")", "null", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppExtension", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "@", "Nullable", "String", "configPath", ",", "ConfigOverride", ".", ".", ".", "configOverrides", ")", "{", "this", "(", "applicationClass", ",", "configPath", ",", "Optional", ".", "empty", "(", ")", ",", "configOverrides", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppExtension", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "@", "Nullable", "String", "configPath", ",", "Optional", "<", "String", ">", "customPropertyPrefix", ",", "ConfigOverride", ".", ".", ".", "configOverrides", ")", "{", "this", "(", "applicationClass", ",", "configPath", ",", "customPropertyPrefix", ",", "ServerCommand", ":", ":", "new", ",", "configOverrides", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppExtension", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "@", "Nullable", "String", "configPath", ",", "Optional", "<", "String", ">", "customPropertyPrefix", ",", "Function", "<", "Application", "<", "C", ">", ",", "Command", ">", "commandInstantiator", ",", "ConfigOverride", ".", ".", ".", "configOverrides", ")", "{", "this", "(", "new", "DropwizardTestSupport", "<", ">", "(", "applicationClass", ",", "configPath", ",", "customPropertyPrefix", ",", "commandInstantiator", ",", "configOverrides", ")", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppExtension", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "C", "configuration", ")", "{", "this", "(", "new", "DropwizardTestSupport", "<", ">", "(", "applicationClass", ",", "configuration", ")", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppExtension", "(", "Class", "<", "?", "extends", "Application", "<", "C", ">", ">", "applicationClass", ",", "C", "configuration", ",", "Function", "<", "Application", "<", "C", ">", ",", "Command", ">", "commandInstantiator", ")", "{", "this", "(", "new", "DropwizardTestSupport", "<", ">", "(", "applicationClass", ",", "configuration", ",", "commandInstantiator", ")", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppExtension", "(", "DropwizardTestSupport", "<", "C", ">", "testSupport", ")", "{", "this", ".", "testSupport", "=", "testSupport", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppExtension", "<", "C", ">", "addListener", "(", "final", "ServiceListener", "<", "C", ">", "listener", ")", "{", "this", ".", "testSupport", ".", "addListener", "(", "new", "DropwizardTestSupport", ".", "ServiceListener", "<", "C", ">", "(", ")", "{", "@", "Override", "public", "void", "onRun", "(", "C", "configuration", ",", "Environment", "environment", ",", "DropwizardTestSupport", "<", "C", ">", "rule", ")", "throws", "Exception", "{", "listener", ".", "onRun", "(", "configuration", ",", "environment", ",", "DropwizardAppExtension", ".", "this", ")", ";", "}", "@", "Override", "public", "void", "onStop", "(", "DropwizardTestSupport", "<", "C", ">", "rule", ")", "throws", "Exception", "{", "listener", ".", "onStop", "(", "DropwizardAppExtension", ".", "this", ")", ";", "}", "}", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onRun", "(", "C", "configuration", ",", "Environment", "environment", ",", "DropwizardTestSupport", "<", "C", ">", "rule", ")", "throws", "Exception", "{", "listener", ".", "onRun", "(", "configuration", ",", "environment", ",", "DropwizardAppExtension", ".", "this", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onStop", "(", "DropwizardTestSupport", "<", "C", ">", "rule", ")", "throws", "Exception", "{", "listener", ".", "onStop", "(", "DropwizardAppExtension", ".", "this", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardAppExtension", "<", "C", ">", "manage", "(", "final", "Managed", "managed", ")", "{", "return", "addListener", "(", "new", "ServiceListener", "<", "C", ">", "(", ")", "{", "@", "Override", "public", "void", "onRun", "(", "C", "configuration", ",", "Environment", "environment", ",", "DropwizardAppExtension", "<", "C", ">", "rule", ")", "throws", "Exception", "{", "environment", ".", "lifecycle", "(", ")", ".", "manage", "(", "managed", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onRun", "(", "C", "configuration", ",", "Environment", "environment", ",", "DropwizardAppExtension", "<", "C", ">", "rule", ")", "throws", "Exception", "{", "environment", ".", "lifecycle", "(", ")", ".", "manage", "(", "managed", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "before", "(", ")", "{", "if", "(", "recursiveCallCount", ".", "getAndIncrement", "(", ")", "=", "=", "0", ")", "{", "testSupport", ".", "before", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "after", "(", ")", "{", "if", "(", "recursiveCallCount", ".", "decrementAndGet", "(", ")", "=", "=", "0", ")", "{", "testSupport", ".", "after", "(", ")", ";", "synchronized", "(", "this", ")", "{", "if", "(", "client", "!", "=", "null", ")", "{", "client", ".", "close", "(", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "public", "C", "getConfiguration", "(", ")", "{", "return", "testSupport", ".", "getConfiguration", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getLocalPort", "(", ")", "{", "return", "testSupport", ".", "getLocalPort", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getPort", "(", "int", "connectorIndex", ")", "{", "return", "testSupport", ".", "getPort", "(", "connectorIndex", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getAdminPort", "(", ")", "{", "return", "testSupport", ".", "getAdminPort", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Application", "<", "C", ">", "newApplication", "(", ")", "{", "return", "testSupport", ".", "newApplication", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "<", "A", "extends", "Application", "<", "C", ">", ">", "A", "getApplication", "(", ")", "{", "return", "testSupport", ".", "getApplication", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Environment", "getEnvironment", "(", ")", "{", "return", "testSupport", ".", "getEnvironment", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ObjectMapper", "getObjectMapper", "(", ")", "{", "return", "testSupport", ".", "getObjectMapper", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onRun", "(", "T", "configuration", ",", "Environment", "environment", ",", "DropwizardAppExtension", "<", "T", ">", "rule", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "public", "void", "onStop", "(", "DropwizardAppExtension", "<", "T", ">", "rule", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "public", "DropwizardTestSupport", "<", "C", ">", "getTestSupport", "(", ")", "{", "return", "testSupport", ";", "}", "</s>"]
["<s>", "public", "Client", "client", "(", ")", "{", "synchronized", "(", "this", ")", "{", "if", "(", "client", "=", "=", "null", ")", "{", "client", "=", "clientBuilder", "(", ")", ".", "build", "(", ")", ";", "}", "return", "client", ";", "}", "}", "</s>"]
["<s>", "protected", "JerseyClientBuilder", "clientBuilder", "(", ")", "{", "return", "new", "JerseyClientBuilder", "(", ")", ".", "register", "(", "new", "JacksonBinder", "(", "getObjectMapper", "(", ")", ")", ")", ".", "property", "(", "ClientProperties", ".", "CONNECT_TIMEOUT", ",", "DEFAULT_CONNECT_TIMEOUT_MS", ")", ".", "property", "(", "ClientProperties", ".", "READ_TIMEOUT", ",", "DEFAULT_READ_TIMEOUT_MS", ")", ";", "}", "</s>"]
["<s>", "public", "ResourceExtension", "build", "(", ")", "{", "return", "new", "ResourceExtension", "(", "buildResource", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Builder", "builder", "(", ")", "{", "return", "new", "Builder", "(", ")", ";", "}", "</s>"]
["<s>", "private", "ResourceExtension", "(", "Resource", "resource", ")", "{", "this", ".", "resource", "=", "resource", ";", "}", "</s>"]
["<s>", "public", "Validator", "getValidator", "(", ")", "{", "return", "resource", ".", "getValidator", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ObjectMapper", "getObjectMapper", "(", ")", "{", "return", "resource", ".", "getObjectMapper", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Consumer", "<", "ClientConfig", ">", "getClientConfigurator", "(", ")", "{", "return", "resource", ".", "getClientConfigurator", "(", ")", ";", "}", "</s>"]
["<s>", "public", "WebTarget", "target", "(", "String", "path", ")", "{", "return", "resource", ".", "target", "(", "path", ")", ";", "}", "</s>"]
["<s>", "public", "Client", "client", "(", ")", "{", "return", "resource", ".", "client", "(", ")", ";", "}", "</s>"]
["<s>", "public", "JerseyTest", "getJerseyTest", "(", ")", "{", "return", "resource", ".", "getJerseyTest", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "before", "(", ")", "throws", "Throwable", "{", "resource", ".", "before", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "after", "(", ")", "throws", "Throwable", "{", "resource", ".", "after", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Set", "<", "Field", ">", "findAnnotatedFields", "(", "Class", "<", "?", ">", "testClass", ",", "boolean", "isStaticMember", ")", "{", "final", "Set", "<", "Field", ">", "set", "=", "Arrays", ".", "stream", "(", "testClass", ".", "getDeclaredFields", "(", ")", ")", ".", "filter", "(", "m", "-", ">", "isStaticMember", "=", "=", "Modifier", ".", "isStatic", "(", "m", ".", "getModifiers", "(", ")", ")", ")", ".", "filter", "(", "m", "-", ">", "DropwizardExtension", ".", "class", ".", "isAssignableFrom", "(", "m", ".", "getType", "(", ")", ")", ")", ".", "collect", "(", "Collectors", ".", "toSet", "(", ")", ")", ";", "if", "(", "!", "testClass", ".", "getSuperclass", "(", ")", ".", "equals", "(", "Object", ".", "class", ")", ")", "{", "set", ".", "addAll", "(", "findAnnotatedFields", "(", "testClass", ".", "getSuperclass", "(", ")", ",", "isStaticMember", ")", ")", ";", "}", "return", "set", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "afterAll", "(", "ExtensionContext", "extensionContext", ")", "throws", "Exception", "{", "try", "{", "for", "(", "Field", "member", ":", "findAnnotatedFields", "(", "extensionContext", ".", "getRequiredTestClass", "(", ")", ",", "true", ")", ")", "{", "(", "(", "DropwizardExtension", ")", "ReflectionUtils", ".", "makeAccessible", "(", "member", ")", ".", "get", "(", "null", ")", ")", ".", "after", "(", ")", ";", "}", "}", "catch", "(", "Throwable", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "afterEach", "(", "ExtensionContext", "extensionContext", ")", "throws", "Exception", "{", "final", "Object", "testInstance", "=", "extensionContext", ".", "getTestInstance", "(", ")", ".", "orElseThrow", "(", "(", ")", "-", ">", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "try", "{", "for", "(", "Field", "member", ":", "findAnnotatedFields", "(", "testInstance", ".", "getClass", "(", ")", ",", "false", ")", ")", "{", "(", "(", "DropwizardExtension", ")", "ReflectionUtils", ".", "makeAccessible", "(", "member", ")", ".", "get", "(", "testInstance", ")", ")", ".", "after", "(", ")", ";", "}", "}", "catch", "(", "Throwable", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "beforeAll", "(", "ExtensionContext", "extensionContext", ")", "throws", "Exception", "{", "try", "{", "for", "(", "Field", "member", ":", "findAnnotatedFields", "(", "extensionContext", ".", "getRequiredTestClass", "(", ")", ",", "true", ")", ")", "{", "(", "(", "DropwizardExtension", ")", "ReflectionUtils", ".", "makeAccessible", "(", "member", ")", ".", "get", "(", "null", ")", ")", ".", "before", "(", ")", ";", "}", "}", "catch", "(", "Throwable", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "beforeEach", "(", "ExtensionContext", "extensionContext", ")", "throws", "Exception", "{", "final", "Object", "testInstance", "=", "extensionContext", ".", "getTestInstance", "(", ")", ".", "orElseThrow", "(", "(", ")", "-", ">", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "try", "{", "for", "(", "Field", "member", ":", "findAnnotatedFields", "(", "testInstance", ".", "getClass", "(", ")", ",", "false", ")", ")", "{", "(", "(", "DropwizardExtension", ")", "ReflectionUtils", ".", "makeAccessible", "(", "member", ")", ".", "get", "(", "testInstance", ")", ")", ".", "before", "(", ")", ";", "}", "}", "catch", "(", "Throwable", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "void", "before", "(", ")", "throws", "Throwable", ";", "</s>"]
["<s>", "void", "after", "(", ")", "throws", "Throwable", ";", "</s>"]
["<s>", "public", "B", "setMapper", "(", "ObjectMapper", "mapper", ")", "{", "this", ".", "mapper", "=", "mapper", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "setValidator", "(", "Validator", "validator", ")", "{", "this", ".", "validator", "=", "validator", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "setClientConfigurator", "(", "Consumer", "<", "ClientConfig", ">", "clientConfigurator", ")", "{", "this", ".", "clientConfigurator", "=", "clientConfigurator", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "addResource", "(", "Object", "resource", ")", "{", "singletons", ".", "add", "(", "resource", ")", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "addProvider", "(", "Class", "<", "?", ">", "klass", ")", "{", "providers", ".", "add", "(", "klass", ")", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "addProvider", "(", "Object", "provider", ")", "{", "singletons", ".", "add", "(", "provider", ")", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "addProperty", "(", "String", "property", ",", "Object", "value", ")", "{", "properties", ".", "put", "(", "property", ",", "value", ")", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "setTestContainerFactory", "(", "TestContainerFactory", "factory", ")", "{", "this", ".", "testContainerFactory", "=", "factory", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "setRegisterDefaultExceptionMappers", "(", "boolean", "value", ")", "{", "registerDefaultExceptionMappers", "=", "value", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "protected", "Resource", "buildResource", "(", ")", "{", "return", "new", "Resource", "(", "new", "ResourceTestJerseyConfiguration", "(", "singletons", ",", "providers", ",", "properties", ",", "mapper", ",", "validator", ",", "clientConfigurator", ",", "testContainerFactory", ",", "registerDefaultExceptionMappers", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "ResourceExtension", ".", "Builder", "builder", "(", ")", "{", "return", "new", "ResourceExtension", ".", "Builder", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Resource", "(", "ResourceTestJerseyConfiguration", "configuration", ")", "{", "this", ".", "configuration", "=", "configuration", ";", "}", "</s>"]
["<s>", "public", "Validator", "getValidator", "(", ")", "{", "return", "configuration", ".", "validator", ";", "}", "</s>"]
["<s>", "public", "ObjectMapper", "getObjectMapper", "(", ")", "{", "return", "configuration", ".", "mapper", ";", "}", "</s>"]
["<s>", "public", "Consumer", "<", "ClientConfig", ">", "getClientConfigurator", "(", ")", "{", "return", "configuration", ".", "clientConfigurator", ";", "}", "</s>"]
["<s>", "public", "WebTarget", "target", "(", "String", "path", ")", "{", "return", "getJerseyTest", "(", ")", ".", "target", "(", "path", ")", ";", "}", "</s>"]
["<s>", "public", "Client", "client", "(", ")", "{", "return", "getJerseyTest", "(", ")", ".", "client", "(", ")", ";", "}", "</s>"]
["<s>", "public", "JerseyTest", "getJerseyTest", "(", ")", "{", "return", "requireNonNull", "(", "test", ")", ";", "}", "</s>"]
["<s>", "public", "void", "before", "(", ")", "throws", "Throwable", "{", "DropwizardTestResourceConfig", ".", "CONFIGURATION_REGISTRY", ".", "put", "(", "configuration", ".", "getId", "(", ")", ",", "configuration", ")", ";", "test", "=", "new", "JerseyTest", "(", ")", "{", "@", "Override", "protected", "TestContainerFactory", "getTestContainerFactory", "(", ")", "{", "return", "configuration", ".", "testContainerFactory", ";", "}", "@", "Override", "protected", "DeploymentContext", "configureDeployment", "(", ")", "{", "return", "ServletDeploymentContext", ".", "builder", "(", "new", "DropwizardTestResourceConfig", "(", "configuration", ")", ")", ".", "initParam", "(", "ServletProperties", ".", "JAXRS_APPLICATION_CLASS", ",", "DropwizardTestResourceConfig", ".", "class", ".", "getName", "(", ")", ")", ".", "initParam", "(", "DropwizardTestResourceConfig", ".", "CONFIGURATION_ID", ",", "configuration", ".", "getId", "(", ")", ")", ".", "build", "(", ")", ";", "}", "@", "Override", "protected", "void", "configureClient", "(", "ClientConfig", "clientConfig", ")", "{", "final", "JacksonJsonProvider", "jsonProvider", "=", "new", "JacksonJsonProvider", "(", ")", ";", "jsonProvider", ".", "setMapper", "(", "configuration", ".", "mapper", ")", ";", "configuration", ".", "clientConfigurator", ".", "accept", "(", "clientConfig", ")", ";", "clientConfig", ".", "register", "(", "jsonProvider", ")", ";", "}", "}", ";", "test", ".", "setUp", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "TestContainerFactory", "getTestContainerFactory", "(", ")", "{", "return", "configuration", ".", "testContainerFactory", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DeploymentContext", "configureDeployment", "(", ")", "{", "return", "ServletDeploymentContext", ".", "builder", "(", "new", "DropwizardTestResourceConfig", "(", "configuration", ")", ")", ".", "initParam", "(", "ServletProperties", ".", "JAXRS_APPLICATION_CLASS", ",", "DropwizardTestResourceConfig", ".", "class", ".", "getName", "(", ")", ")", ".", "initParam", "(", "DropwizardTestResourceConfig", ".", "CONFIGURATION_ID", ",", "configuration", ".", "getId", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "configureClient", "(", "ClientConfig", "clientConfig", ")", "{", "final", "JacksonJsonProvider", "jsonProvider", "=", "new", "JacksonJsonProvider", "(", ")", ";", "jsonProvider", ".", "setMapper", "(", "configuration", ".", "mapper", ")", ";", "configuration", ".", "clientConfigurator", ".", "accept", "(", "clientConfig", ")", ";", "clientConfig", ".", "register", "(", "jsonProvider", ")", ";", "}", "</s>"]
["<s>", "public", "void", "after", "(", ")", "throws", "Throwable", "{", "DropwizardTestResourceConfig", ".", "CONFIGURATION_REGISTRY", ".", "remove", "(", "configuration", ".", "getId", "(", ")", ")", ";", "requireNonNull", "(", "test", ")", ".", "tearDown", "(", ")", ";", "}", "</s>"]
["<s>", "public", "B", "setUrl", "(", "String", "url", ")", "{", "this", ".", "url", "=", "url", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "setUsername", "(", "String", "username", ")", "{", "this", ".", "username", "=", "username", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "setDriver", "(", "Class", "<", "?", "extends", "java", ".", "sql", ".", "Driver", ">", "driver", ")", "{", "this", ".", "driver", "=", "driver", ".", "getName", "(", ")", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "setHbm2DdlAuto", "(", "String", "hbm2ddlAuto", ")", "{", "this", ".", "hbm2ddlAuto", "=", "hbm2ddlAuto", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "setShowSql", "(", "boolean", "showSql", ")", "{", "this", ".", "showSql", "=", "showSql", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "useSqlComments", "(", "boolean", "useSqlComments", ")", "{", "this", ".", "useSqlComments", "=", "useSqlComments", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "addEntityClass", "(", "Class", "<", "?", ">", "entityClass", ")", "{", "this", ".", "entityClasses", ".", "add", "(", "entityClass", ")", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "public", "B", "setProperty", "(", "String", "key", ",", "String", "value", ")", "{", "this", ".", "properties", ".", "put", "(", "key", ",", "value", ")", ";", "return", "(", "B", ")", "this", ";", "}", "</s>"]
["<s>", "protected", "DAOTest", "buildDAOTest", "(", ")", "{", "final", "Configuration", "config", "=", "new", "Configuration", "(", ")", ";", "config", ".", "setProperty", "(", "AvailableSettings", ".", "URL", ",", "url", ")", ";", "config", ".", "setProperty", "(", "AvailableSettings", ".", "USER", ",", "username", ")", ";", "config", ".", "setProperty", "(", "AvailableSettings", ".", "PASS", ",", "password", ")", ";", "config", ".", "setProperty", "(", "AvailableSettings", ".", "DRIVER", ",", "driver", ")", ";", "config", ".", "setProperty", "(", "AvailableSettings", ".", "HBM2DDL_AUTO", ",", "hbm2ddlAuto", ")", ";", "config", ".", "setProperty", "(", "AvailableSettings", ".", "SHOW_SQL", ",", "String", ".", "valueOf", "(", "showSql", ")", ")", ";", "config", ".", "setProperty", "(", "AvailableSettings", ".", "USE_SQL_COMMENTS", ",", "String", ".", "valueOf", "(", "useSqlComments", ")", ")", ";", "config", ".", "setProperty", "(", "AvailableSettings", ".", "CURRENT_SESSION_CONTEXT_CLASS", ",", "\"", "<STR_LIT>", "\"", ")", ";", "config", ".", "setProperty", "(", "AvailableSettings", ".", "USE_GET_GENERATED_KEYS", ",", "\"", "<STR_LIT>", "\"", ")", ";", "config", ".", "setProperty", "(", "AvailableSettings", ".", "GENERATE_STATISTICS", ",", "\"", "<STR_LIT>", "\"", ")", ";", "config", ".", "setProperty", "(", "AvailableSettings", ".", "USE_REFLECTION_OPTIMIZER", ",", "\"", "<STR_LIT>", "\"", ")", ";", "config", ".", "setProperty", "(", "AvailableSettings", ".", "ORDER_UPDATES", ",", "\"", "<STR_LIT>", "\"", ")", ";", "config", ".", "setProperty", "(", "AvailableSettings", ".", "ORDER_INSERTS", ",", "\"", "<STR_LIT>", "\"", ")", ";", "config", ".", "setProperty", "(", "AvailableSettings", ".", "USE_NEW_ID_GENERATOR_MAPPINGS", ",", "\"", "<STR_LIT>", "\"", ")", ";", "config", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "entityClasses", ".", "forEach", "(", "config", ":", ":", "addAnnotatedClass", ")", ";", "properties", ".", "forEach", "(", "config", ":", ":", "setProperty", ")", ";", "return", "new", "DAOTest", "(", "config", ".", "buildSessionFactory", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "DAOTest", "(", "SessionFactory", "sessionFactory", ")", "{", "this", ".", "sessionFactory", "=", "sessionFactory", ";", "}", "</s>"]
["<s>", "public", "void", "before", "(", ")", "throws", "Throwable", "{", "if", "(", "ManagedSessionContext", ".", "hasBind", "(", "sessionFactory", ")", ")", "{", "return", ";", "}", "final", "Session", "session", "=", "sessionFactory", ".", "openSession", "(", ")", ";", "ManagedSessionContext", ".", "bind", "(", "session", ")", ";", "}", "</s>"]
["<s>", "public", "void", "after", "(", ")", "{", "if", "(", "!", "ManagedSessionContext", ".", "hasBind", "(", "sessionFactory", ")", ")", "{", "return", ";", "}", "final", "Session", "currentSession", "=", "sessionFactory", ".", "getCurrentSession", "(", ")", ";", "if", "(", "currentSession", ".", "isOpen", "(", ")", ")", "{", "currentSession", ".", "close", "(", ")", ";", "}", "ManagedSessionContext", ".", "unbind", "(", "sessionFactory", ")", ";", "}", "</s>"]
["<s>", "public", "SessionFactory", "getSessionFactory", "(", ")", "{", "return", "sessionFactory", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "inTransaction", "(", "Callable", "<", "T", ">", "call", ")", "{", "final", "Session", "session", "=", "sessionFactory", ".", "getCurrentSession", "(", ")", ";", "final", "Transaction", "transaction", "=", "session", ".", "beginTransaction", "(", ")", ";", "try", "{", "final", "T", "result", "=", "call", ".", "call", "(", ")", ";", "transaction", ".", "commit", "(", ")", ";", "return", "result", ";", "}", "catch", "(", "final", "Exception", "e", ")", "{", "transaction", ".", "rollback", "(", ")", ";", "Throwables", ".", "throwIfUnchecked", "(", "e", ")", ";", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "inTransaction", "(", "Runnable", "action", ")", "{", "inTransaction", "(", "(", ")", "-", ">", "{", "action", ".", "run", "(", ")", ";", "return", "true", ";", "}", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardClient", "(", "Object", ".", ".", ".", "resources", ")", "{", "testSupport", "=", "new", "DropwizardTestSupport", "<", "Configuration", ">", "(", "FakeApplication", ".", "class", ",", "\"", "\"", ")", "{", "@", "Override", "public", "Application", "<", "Configuration", ">", "newApplication", "(", ")", "{", "return", "new", "FakeApplication", "(", ")", ";", "}", "}", ";", "this", ".", "resources", "=", "resources", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Application", "<", "Configuration", ">", "newApplication", "(", ")", "{", "return", "new", "FakeApplication", "(", ")", ";", "}", "</s>"]
["<s>", "public", "URI", "baseUri", "(", ")", "{", "return", "URI", ".", "create", "(", "\"", "<STR_LIT>", "\"", "+", "testSupport", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "ObjectMapper", "getObjectMapper", "(", ")", "{", "return", "testSupport", ".", "getObjectMapper", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Environment", "getEnvironment", "(", ")", "{", "return", "testSupport", ".", "getEnvironment", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "before", "(", ")", "throws", "Throwable", "{", "testSupport", ".", "before", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "after", "(", ")", "{", "testSupport", ".", "after", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Result", "check", "(", ")", "{", "return", "Result", ".", "healthy", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "{", "final", "SimpleServerFactory", "serverConfig", "=", "new", "SimpleServerFactory", "(", ")", ";", "configuration", ".", "setServerFactory", "(", "serverConfig", ")", ";", "final", "HttpConnectorFactory", "connectorConfig", "=", "(", "HttpConnectorFactory", ")", "serverConfig", ".", "getConnector", "(", ")", ";", "connectorConfig", ".", "setPort", "(", "0", ")", ";", "environment", ".", "healthChecks", "(", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "new", "DummyHealthCheck", "(", ")", ")", ";", "for", "(", "Object", "resource", ":", "resources", ")", "{", "if", "(", "resource", "instanceof", "Class", "<", "?", ">", ")", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "(", "Class", "<", "?", ">", ")", "resource", ")", ";", "}", "else", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "resource", ")", ";", "}", "}", "}", "</s>"]
["<s>", "ResourceTestJerseyConfiguration", "(", "Set", "<", "Object", ">", "singletons", ",", "Set", "<", "Class", "<", "?", ">", ">", "providers", ",", "Map", "<", "String", ",", "Object", ">", "properties", ",", "ObjectMapper", "mapper", ",", "Validator", "validator", ",", "Consumer", "<", "ClientConfig", ">", "clientConfigurator", ",", "TestContainerFactory", "testContainerFactory", ",", "boolean", "registerDefaultExceptionMappers", ")", "{", "this", ".", "singletons", "=", "singletons", ";", "this", ".", "providers", "=", "providers", ";", "this", ".", "properties", "=", "properties", ";", "this", ".", "mapper", "=", "mapper", ";", "this", ".", "validator", "=", "validator", ";", "this", ".", "clientConfigurator", "=", "clientConfigurator", ";", "this", ".", "testContainerFactory", "=", "testContainerFactory", ";", "this", ".", "registerDefaultExceptionMappers", "=", "registerDefaultExceptionMappers", ";", "}", "</s>"]
["<s>", "String", "getId", "(", ")", "{", "return", "String", ".", "valueOf", "(", "hashCode", "(", ")", ")", ";", "}", "</s>"]
["<s>", "DropwizardTestResourceConfig", "(", "ResourceTestJerseyConfiguration", "configuration", ")", "{", "super", "(", "true", ",", "new", "MetricRegistry", "(", ")", ")", ";", "if", "(", "configuration", ".", "registerDefaultExceptionMappers", ")", "{", "register", "(", "new", "ExceptionMapperBinder", "(", "false", ")", ")", ";", "}", "for", "(", "Class", "<", "?", ">", "provider", ":", "configuration", ".", "providers", ")", "{", "register", "(", "provider", ")", ";", "}", "property", "(", "ServerProperties", ".", "RESPONSE_SET_STATUS_OVER_SEND_ERROR", ",", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "Object", ">", "property", ":", "configuration", ".", "properties", ".", "entrySet", "(", ")", ")", "{", "property", "(", "property", ".", "getKey", "(", ")", ",", "property", ".", "getValue", "(", ")", ")", ";", "}", "register", "(", "new", "JacksonBinder", "(", "configuration", ".", "mapper", ")", ")", ";", "register", "(", "new", "HibernateValidationFeature", "(", "configuration", ".", "validator", ")", ")", ";", "for", "(", "Object", "singleton", ":", "configuration", ".", "singletons", ")", "{", "register", "(", "singleton", ")", ";", "}", "}", "</s>"]
["<s>", "DropwizardTestResourceConfig", "(", "@", "Context", "ServletConfig", "servletConfig", ")", "{", "this", "(", "getConfiguration", "(", "servletConfig", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "ResourceTestJerseyConfiguration", "getConfiguration", "(", "@", "Context", "ServletConfig", "servletConfig", ")", "{", "final", "String", "id", "=", "requireNonNull", "(", "servletConfig", ".", "getInitParameter", "(", "CONFIGURATION_ID", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "requireNonNull", "(", "CONFIGURATION_REGISTRY", ".", "get", "(", "id", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRun", "(", ")", "throws", "Exception", "{", "Liquibase", "liquibase", "=", "Mockito", ".", "mock", "(", "Liquibase", ".", "class", ")", ";", "generateDocsCommand", ".", "run", "(", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ",", "liquibase", ")", ";", "Mockito", ".", "verify", "(", "liquibase", ")", ".", "generateDocumentation", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHelpPage", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "createSubparser", "(", "generateDocsCommand", ")", ".", "printHelp", "(", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "baos", ",", "UTF_8", ")", ",", "true", ")", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "final", "String", "databaseUrl", "=", "getDatabaseUrl", "(", ")", ";", "conf", "=", "createConfiguration", "(", "databaseUrl", ")", ";", "dbi", "=", "new", "DBI", "(", "databaseUrl", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFastForwardFirst", "(", ")", "throws", "Exception", "{", "try", "(", "Handle", "handle", "=", "dbi", ".", "open", "(", ")", ")", "{", "handle", ".", "execute", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "fastForwardCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "\"", "<STR_LIT>", "\"", ",", "false", ")", ")", ",", "conf", ")", ";", "new", "DbMigrateCommand", "<", ">", "(", "TestMigrationConfiguration", ":", ":", "getDataSource", ",", "TestMigrationConfiguration", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "try", "(", "Handle", "handle", "=", "dbi", ".", "open", "(", ")", ")", "{", "assertThat", "(", "handle", ".", "createQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "mapTo", "(", "Integer", ".", "class", ")", ".", "first", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFastForwardAll", "(", ")", "throws", "Exception", "{", "try", "(", "Handle", "handle", "=", "dbi", ".", "open", "(", ")", ")", "{", "handle", ".", "execute", "(", "\"", "<STR_LIT>", "\"", ")", ";", "handle", ".", "execute", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "fastForwardCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "\"", "<STR_LIT>", "\"", ",", "false", ")", ")", ",", "conf", ")", ";", "new", "DbMigrateCommand", "<", ">", "(", "TestMigrationConfiguration", ":", ":", "getDataSource", ",", "TestMigrationConfiguration", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "try", "(", "Handle", "handle", "=", "dbi", ".", "open", "(", ")", ")", "{", "assertThat", "(", "handle", ".", "createQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "mapTo", "(", "Integer", ".", "class", ")", ".", "first", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFastForwardFirstDryRun", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "fastForwardCommand", ".", "setPrintStream", "(", "new", "PrintStream", "(", "baos", ")", ")", ";", "fastForwardCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ")", ",", "conf", ")", ";", "assertThat", "(", "NEWLINE_PATTERN", ".", "splitAsStream", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "filter", "(", "s", "-", ">", "s", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFastForwardAllDryRun", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "fastForwardCommand", ".", "setPrintStream", "(", "new", "PrintStream", "(", "baos", ")", ")", ";", "fastForwardCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ")", ",", "conf", ")", ";", "assertThat", "(", "NEWLINE_PATTERN", ".", "splitAsStream", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "filter", "(", "s", "-", ">", "s", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "hasSize", "(", "<NUM_LIT:3>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPrintHelp", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "createSubparser", "(", "fastForwardCommand", ")", ".", "printHelp", "(", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "baos", ",", "UTF_8", ")", ",", "true", ")", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "databaseUrl", "=", "getDatabaseUrl", "(", ")", ";", "conf", "=", "createConfiguration", "(", "databaseUrl", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRun", "(", ")", "throws", "Exception", "{", "migrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "try", "(", "Handle", "handle", "=", "new", "DBI", "(", "databaseUrl", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "open", "(", ")", ")", "{", "final", "List", "<", "Map", "<", "String", ",", "Object", ">", ">", "rows", "=", "handle", ".", "select", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "rows", ")", ".", "hasSize", "(", "0", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRunForFileFromFilesystem", "(", ")", "throws", "Exception", "{", "final", "String", "migrationsPath", "=", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ".", "getAbsolutePath", "(", ")", ";", "migrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "migrationsPath", ")", ")", ",", "conf", ")", ";", "try", "(", "Handle", "handle", "=", "new", "DBI", "(", "databaseUrl", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "open", "(", ")", ")", "{", "assertThat", "(", "handle", ".", "select", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "hasSize", "(", "1", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRun", "(", ")", "throws", "Exception", "{", "final", "TestMigrationConfiguration", "conf", "=", "createConfiguration", "(", "getDatabaseUrl", "(", ")", ")", ";", "final", "DbMigrateCommand", "<", "TestMigrationConfiguration", ">", "dbMigrateCommand", "=", "new", "DbMigrateCommand", "<", ">", "(", "new", "TestMigrationDatabaseConfiguration", "(", ")", ",", "TestMigrationConfiguration", ".", "class", ",", "migrationsFileName", ")", ";", "dbMigrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "dbTagCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ")", ",", "conf", ")", ";", "try", "(", "CloseableLiquibase", "liquibase", "=", "dbTagCommand", ".", "openLiquibase", "(", "conf", ".", "getDataSource", "(", ")", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ")", ")", "{", "assertThat", "(", "liquibase", ".", "tagExists", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ".", "isTrue", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPrintHelp", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "createSubparser", "(", "dbTagCommand", ")", ".", "printHelp", "(", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "baos", ",", "UTF_8", ")", ",", "true", ")", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRun", "(", ")", "throws", "Exception", "{", "final", "AtomicBoolean", "checkSumVerified", "=", "new", "AtomicBoolean", "(", ")", ";", "migrateCommand", ".", "setCheckSumConsumer", "(", "checkSum", "-", ">", "{", "assertThat", "(", "checkSum", ")", ".", "isEqualTo", "(", "CheckSum", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "checkSumVerified", ".", "set", "(", "true", ")", ";", "}", ")", ";", "migrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT:2>", "\"", ")", ",", "\"", "<STR_LIT>", "\"", ",", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ",", "createConfiguration", "(", "getDatabaseUrl", "(", ")", ")", ")", ";", "assertThat", "(", "checkSumVerified", ".", "get", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHelpPage", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "out", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "createSubparser", "(", "migrateCommand", ")", ".", "printHelp", "(", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "out", ",", "UTF_8", ")", ",", "true", ")", ")", ";", "assertThat", "(", "out", ".", "toString", "(", "UTF_8", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRun", "(", ")", "throws", "Exception", "{", "final", "String", "databaseUrl", "=", "getDatabaseUrl", "(", ")", ";", "final", "TestMigrationConfiguration", "conf", "=", "createConfiguration", "(", "databaseUrl", ")", ";", "new", "DbMigrateCommand", "<", ">", "(", "TestMigrationConfiguration", ":", ":", "getDataSource", ",", "TestMigrationConfiguration", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "dropAllCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "try", "(", "Handle", "handle", "=", "new", "DBI", "(", "databaseUrl", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "open", "(", ")", ")", "{", "handle", ".", "execute", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHelpPage", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "out", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "createSubparser", "(", "dropAllCommand", ")", ".", "printHelp", "(", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "out", ",", "UTF_8", ")", ",", "true", ")", ")", ";", "assertThat", "(", "out", ".", "toString", "(", "UTF_8", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "BeforeClass", "public", "static", "void", "initXmlParser", "(", ")", "throws", "Exception", "{", "xmlParser", "=", "DocumentBuilderFactory", ".", "newInstance", "(", ")", ".", "newDocumentBuilder", "(", ")", ";", "attributeNames", "=", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "final", "String", "existedDbPath", "=", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ".", "getAbsolutePath", "(", ")", ";", "final", "String", "existedDbUrl", "=", "\"", "<STR_LIT>", "\"", "+", "StringUtils", ".", "removeEnd", "(", "existedDbPath", ",", "\"", "<STR_LIT>", "\"", ")", ";", "existedDbConf", "=", "createConfiguration", "(", "existedDbUrl", ")", ";", "dumpCommand", ".", "setOutputStream", "(", "new", "PrintStream", "(", "baos", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDumpSchema", "(", ")", "throws", "Exception", "{", "final", "Map", "<", "String", ",", "Object", ">", "attributes", "=", "new", "HashMap", "<", ">", "(", ")", ";", "for", "(", "String", "name", ":", "attributeNames", ")", "{", "attributes", ".", "put", "(", "name", ",", "true", ")", ";", "}", "dumpCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "attributes", ")", ",", "existedDbConf", ")", ";", "final", "Element", "changeSet", "=", "getFirstElement", "(", "toXmlDocument", "(", "baos", ")", ".", "getDocumentElement", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertCreateTable", "(", "changeSet", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDumpSchemaAndData", "(", ")", "throws", "Exception", "{", "final", "Map", "<", "String", ",", "Object", ">", "attributes", "=", "new", "HashMap", "<", ">", "(", ")", ";", "for", "(", "String", "name", ":", "Iterables", ".", "concat", "(", "attributeNames", ",", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "attributes", ".", "put", "(", "name", ",", "true", ")", ";", "}", "dumpCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "attributes", ")", ",", "existedDbConf", ")", ";", "final", "NodeList", "changeSets", "=", "toXmlDocument", "(", "baos", ")", ".", "getDocumentElement", "(", ")", ".", "getElementsByTagName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertCreateTable", "(", "(", "Element", ")", "changeSets", ".", "item", "(", "0", ")", ")", ";", "assertInsertData", "(", "(", "Element", ")", "changeSets", ".", "item", "(", "1", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDumpOnlyData", "(", ")", "throws", "Exception", "{", "dumpCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "(", "Object", ")", "true", ")", ")", ",", "existedDbConf", ")", ";", "final", "Element", "changeSet", "=", "getFirstElement", "(", "toXmlDocument", "(", "baos", ")", ".", "getDocumentElement", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertInsertData", "(", "changeSet", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testWriteToFile", "(", ")", "throws", "Exception", "{", "final", "File", "file", "=", "File", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Map", "<", "String", ",", "Object", ">", "attributes", "=", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "file", ".", "getAbsolutePath", "(", ")", ")", ";", "dumpCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "attributes", ")", ",", "existedDbConf", ")", ";", "assertThat", "(", "new", "String", "(", "Files", ".", "readAllBytes", "(", "file", ".", "toPath", "(", ")", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHelpPage", "(", ")", "throws", "Exception", "{", "createSubparser", "(", "dumpCommand", ")", ".", "printHelp", "(", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "baos", ",", "UTF_8", ")", ",", "true", ")", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Document", "toXmlDocument", "(", "ByteArrayOutputStream", "baos", ")", "throws", "SAXException", ",", "IOException", "{", "return", "xmlParser", ".", "parse", "(", "new", "ByteArrayInputStream", "(", "baos", ".", "toByteArray", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "assertCreateTable", "(", "Element", "changeSet", ")", "{", "final", "Element", "createTable", "=", "getFirstElement", "(", "changeSet", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "createTable", ".", "getAttribute", "(", "\"", "<STR_LIT:Name>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "createTable", ".", "getAttribute", "(", "\"", "<STR_LIT:Name>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "createTable", ".", "getAttribute", "(", "\"", "<STR_LIT:Name>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "NodeList", "columns", "=", "createTable", ".", "getElementsByTagName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Element", "idColumn", "=", "(", "Element", ")", "columns", ".", "item", "(", "0", ")", ";", "assertThat", "(", "idColumn", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "idColumn", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:ID>", "\"", ")", ";", "assertThat", "(", "idColumn", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Element", "idColumnConstraints", "=", "getFirstElement", "(", "idColumn", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "idColumnConstraints", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "idColumnConstraints", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Element", "nameColumn", "=", "(", "Element", ")", "columns", ".", "item", "(", "1", ")", ";", "assertThat", "(", "nameColumn", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "nameColumn", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Element", "nameColumnConstraints", "=", "getFirstElement", "(", "nameColumn", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "nameColumnConstraints", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Element", "emailColumn", "=", "(", "Element", ")", "columns", ".", "item", "(", "<NUM_LIT:2>", ")", ";", "assertThat", "(", "emailColumn", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "emailColumn", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "assertInsertData", "(", "Element", "changeSet", ")", "{", "final", "Element", "insert", "=", "getFirstElement", "(", "changeSet", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "insert", ".", "getAttribute", "(", "\"", "<STR_LIT:Name>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "insert", ".", "getAttribute", "(", "\"", "<STR_LIT:Name>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "insert", ".", "getAttribute", "(", "\"", "<STR_LIT:Name>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "NodeList", "columns", "=", "insert", ".", "getElementsByTagName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Element", "idColumn", "=", "(", "Element", ")", "columns", ".", "item", "(", "0", ")", ";", "assertThat", "(", "idColumn", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:ID>", "\"", ")", ";", "assertThat", "(", "idColumn", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "final", "Element", "nameColumn", "=", "(", "Element", ")", "columns", ".", "item", "(", "1", ")", ";", "assertThat", "(", "nameColumn", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "nameColumn", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Element", "emailColumn", "=", "(", "Element", ")", "columns", ".", "item", "(", "<NUM_LIT:2>", ")", ";", "assertThat", "(", "emailColumn", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "emailColumn", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Element", "getFirstElement", "(", "Element", "root", ",", "String", "tagName", ")", "{", "return", "(", "Element", ")", "root", ".", "getElementsByTagName", "(", "tagName", ")", ".", "item", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "conf", "=", "createConfiguration", "(", "getDatabaseUrl", "(", ")", ")", ";", "statusCommand", ".", "setOutputStream", "(", "new", "PrintStream", "(", "baos", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRunOnMigratedDb", "(", ")", "throws", "Exception", "{", "final", "String", "existedDbPath", "=", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ".", "getAbsolutePath", "(", ")", ";", "final", "String", "existedDbUrl", "=", "\"", "<STR_LIT>", "\"", "+", "StringUtils", ".", "removeEnd", "(", "existedDbPath", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "TestMigrationConfiguration", "existedDbConf", "=", "createConfiguration", "(", "existedDbUrl", ")", ";", "statusCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "existedDbConf", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "matches", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRun", "(", ")", "throws", "Exception", "{", "statusCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "matches", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testVerbose", "(", ")", "throws", "Exception", "{", "statusCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "(", "Object", ")", "true", ")", ")", ",", "conf", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "matches", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPrintHelp", "(", ")", "throws", "Exception", "{", "createSubparser", "(", "statusCommand", ")", ".", "printHelp", "(", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "baos", ",", "UTF_8", ")", ",", "true", ")", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "databaseUrl", "=", "getDatabaseUrl", "(", ")", ";", "conf", "=", "createConfiguration", "(", "databaseUrl", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRunMigrationWithCustomSchema", "(", ")", "throws", "Exception", "{", "String", "schemaName", "=", "\"", "<STR_LIT>", "\"", ";", "DBI", "dbi", "=", "new", "DBI", "(", "databaseUrl", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "dbi", ".", "useHandle", "(", "h", "-", ">", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", "+", "schemaName", ")", ")", ";", "Namespace", "namespace", "=", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "schemaName", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "migrateCommand", ".", "run", "(", "null", ",", "namespace", ",", "conf", ")", ";", "dbi", ".", "useHandle", "(", "handle", "-", ">", "assertThat", "(", "handle", ".", "select", "(", "\"", "<STR_LIT>", "\"", "+", "schemaName", "+", "\"", "<STR_LIT>", "\"", ")", ")", ".", "hasSize", "(", "1", ")", ".", "contains", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "Index", ".", "atIndex", "(", "0", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "final", "String", "databaseUrl", "=", "getDatabaseUrl", "(", ")", ";", "conf", "=", "createConfiguration", "(", "databaseUrl", ")", ";", "dbi", "=", "new", "DBI", "(", "databaseUrl", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRollbackNChanges", "(", ")", "throws", "Exception", "{", "migrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "rollbackCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ")", ",", "conf", ")", ";", "dbi", ".", "useHandle", "(", "h", "-", ">", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRollbackNChangesAsDryRun", "(", ")", "throws", "Exception", "{", "migrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "rollbackCommand", ".", "setOutputStream", "(", "new", "PrintStream", "(", "baos", ",", "true", ")", ")", ";", "rollbackCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ")", ",", "conf", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "containsIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRollbackToDate", "(", ")", "throws", "Exception", "{", "long", "migrationDate", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "migrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "rollbackCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Date", "(", "migrationDate", "-", "<NUM_LIT:1000>", ")", ")", ")", ",", "conf", ")", ";", "dbi", ".", "useHandle", "(", "h", "-", ">", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRollbackToDateAsDryRun", "(", ")", "throws", "Exception", "{", "long", "migrationDate", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "migrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "rollbackCommand", ".", "setOutputStream", "(", "new", "PrintStream", "(", "baos", ",", "true", ")", ")", ";", "rollbackCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Date", "(", "migrationDate", "-", "<NUM_LIT:1000>", ")", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ")", ",", "conf", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "containsIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ".", "containsIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRollbackToTag", "(", ")", "throws", "Exception", "{", "migrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ")", ",", "conf", ")", ";", "final", "DbTagCommand", "<", "TestMigrationConfiguration", ">", "tagCommand", "=", "new", "DbTagCommand", "<", ">", "(", "new", "TestMigrationDatabaseConfiguration", "(", ")", ",", "TestMigrationConfiguration", ".", "class", ",", "migrationsFileName", ")", ";", "tagCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ")", ",", "conf", ")", ";", "migrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "rollbackCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ")", ",", "conf", ")", ";", "dbi", ".", "useHandle", "(", "h", "-", ">", "h", ".", "execute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRollbackToTagAsDryRun", "(", ")", "throws", "Exception", "{", "migrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ")", ",", "conf", ")", ";", "final", "DbTagCommand", "<", "TestMigrationConfiguration", ">", "tagCommand", "=", "new", "DbTagCommand", "<", ">", "(", "new", "TestMigrationDatabaseConfiguration", "(", ")", ",", "TestMigrationConfiguration", ".", "class", ",", "migrationsFileName", ")", ";", "tagCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ")", ",", "conf", ")", ";", "migrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "rollbackCommand", ".", "setOutputStream", "(", "new", "PrintStream", "(", "baos", ",", "true", ")", ")", ";", "rollbackCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ")", ",", "conf", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "containsIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPrintHelp", "(", ")", "throws", "Exception", "{", "createSubparser", "(", "rollbackCommand", ")", ".", "printHelp", "(", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "baos", ",", "UTF_8", ")", ",", "true", ")", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRunSubCommand", "(", ")", "throws", "Exception", "{", "final", "String", "databaseUrl", "=", "getDatabaseUrl", "(", ")", ";", "final", "TestMigrationConfiguration", "conf", "=", "createConfiguration", "(", "databaseUrl", ")", ";", "dbCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ",", "conf", ")", ";", "try", "(", "Handle", "handle", "=", "new", "DBI", "(", "databaseUrl", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "open", "(", ")", ")", "{", "assertThat", "(", "handle", ".", "createQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "mapTo", "(", "Integer", ".", "class", ")", ".", "first", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPrintHelp", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "createSubparser", "(", "dbCommand", ")", ".", "printHelp", "(", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "baos", ",", "UTF_8", ")", ",", "true", ")", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRun", "(", ")", "throws", "Exception", "{", "final", "Liquibase", "liquibase", "=", "Mockito", ".", "mock", "(", "Liquibase", ".", "class", ")", ";", "clearChecksums", ".", "run", "(", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "liquibase", ")", ";", "Mockito", ".", "verify", "(", "liquibase", ")", ".", "clearCheckSums", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHelpPage", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "out", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "createSubparser", "(", "clearChecksums", ")", ".", "printHelp", "(", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "out", ",", "UTF_8", ")", ",", "true", ")", ")", ";", "assertThat", "(", "out", ".", "toString", "(", "UTF_8", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRelease", "(", ")", "throws", "Exception", "{", "final", "Liquibase", "liquibase", "=", "Mockito", ".", "mock", "(", "Liquibase", ".", "class", ")", ";", "locksCommand", ".", "run", "(", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ")", ",", "liquibase", ")", ";", "Mockito", ".", "verify", "(", "liquibase", ")", ".", "forceReleaseLocks", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testListLocks", "(", ")", "throws", "Exception", "{", "final", "PrintStream", "printStream", "=", "new", "PrintStream", "(", "new", "ByteArrayOutputStream", "(", ")", ")", ";", "locksCommand", ".", "setPrintStream", "(", "printStream", ")", ";", "final", "Liquibase", "liquibase", "=", "Mockito", ".", "mock", "(", "Liquibase", ".", "class", ")", ";", "locksCommand", ".", "run", "(", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "\"", "<STR_LIT>", "\"", ",", "false", ")", ")", ",", "liquibase", ")", ";", "Mockito", ".", "verify", "(", "liquibase", ")", ".", "reportLocks", "(", "printStream", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFailsWhenNoListOrRelease", "(", ")", "throws", "Exception", "{", "final", "Liquibase", "liquibase", "=", "Mockito", ".", "mock", "(", "Liquibase", ".", "class", ")", ";", "assertThatExceptionOfType", "(", "IllegalArgumentException", ".", "class", ")", ".", "isThrownBy", "(", "(", ")", "-", ">", "locksCommand", ".", "run", "(", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "\"", "<STR_LIT>", "\"", ",", "false", ")", ")", ",", "liquibase", ")", ")", ".", "withMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFailsWhenBothListAndRelease", "(", ")", "throws", "Exception", "{", "final", "Liquibase", "liquibase", "=", "Mockito", ".", "mock", "(", "Liquibase", ".", "class", ")", ";", "assertThatExceptionOfType", "(", "IllegalArgumentException", ".", "class", ")", ".", "isThrownBy", "(", "(", ")", "-", ">", "locksCommand", ".", "run", "(", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ")", ",", "liquibase", ")", ")", ".", "withMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPrintHelp", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "out", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "createSubparser", "(", "locksCommand", ")", ".", "printHelp", "(", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "out", ",", "UTF_8", ")", ",", "true", ")", ")", ";", "assertThat", "(", "out", ".", "toString", "(", "UTF_8", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "static", "Subparser", "createSubparser", "(", "AbstractLiquibaseCommand", "<", "?", ">", "command", ")", "{", "final", "Subparser", "subparser", "=", "ArgumentParsers", ".", "newArgumentParser", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addSubparsers", "(", ")", ".", "addParser", "(", "command", ".", "getName", "(", ")", ")", ".", "description", "(", "command", ".", "getDescription", "(", ")", ")", ";", "command", ".", "configure", "(", "subparser", ")", ";", "return", "subparser", ";", "}", "</s>"]
["<s>", "protected", "static", "TestMigrationConfiguration", "createConfiguration", "(", "String", "databaseUrl", ")", "{", "final", "DataSourceFactory", "dataSource", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSource", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSource", ".", "setUser", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSource", ".", "setUrl", "(", "databaseUrl", ")", ";", "return", "new", "TestMigrationConfiguration", "(", "dataSource", ")", ";", "}", "</s>"]
["<s>", "protected", "static", "String", "getDatabaseUrl", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "UUID", ".", "randomUUID", "(", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "DataSourceFactory", "factory", "=", "new", "DataSourceFactory", "(", ")", ";", "factory", ".", "setDriverClass", "(", "org", ".", "h2", ".", "Driver", ".", "class", ".", "getName", "(", ")", ")", ";", "factory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", ")", ";", "factory", ".", "setUser", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSource", "=", "(", "ManagedPooledDataSource", ")", "factory", ".", "build", "(", "new", "MetricRegistry", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "liquibase", "=", "new", "CloseableLiquibaseWithClassPathMigrationsFile", "(", "dataSource", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testWhenClosingAllConnectionsInPoolIsReleased", "(", ")", "throws", "Exception", "{", "ConnectionPool", "pool", "=", "dataSource", ".", "getPool", "(", ")", ";", "assertThat", "(", "pool", ".", "getActive", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "liquibase", ".", "close", "(", ")", ";", "assertThat", "(", "pool", ".", "getActive", "(", ")", ")", ".", "isZero", "(", ")", ";", "assertThat", "(", "pool", ".", "getIdle", "(", ")", ")", ".", "isZero", "(", ")", ";", "assertThat", "(", "pool", ".", "isClosed", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "databaseUrl", "=", "getDatabaseUrl", "(", ")", ";", "conf", "=", "createConfiguration", "(", "databaseUrl", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRun", "(", ")", "throws", "Exception", "{", "migrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "try", "(", "Handle", "handle", "=", "new", "DBI", "(", "databaseUrl", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "open", "(", ")", ")", "{", "final", "List", "<", "Map", "<", "String", ",", "Object", ">", ">", "rows", "=", "handle", ".", "select", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "rows", ")", ".", "hasSize", "(", "1", ")", ";", "assertThat", "(", "rows", ".", "get", "(", "0", ")", ")", ".", "isEqualTo", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRunFirstTwoMigration", "(", ")", "throws", "Exception", "{", "migrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "(", "Object", ")", "<NUM_LIT:2>", ")", ")", ",", "conf", ")", ";", "try", "(", "Handle", "handle", "=", "new", "DBI", "(", "databaseUrl", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "open", "(", ")", ")", "{", "assertThat", "(", "handle", ".", "select", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDryRun", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "migrateCommand", ".", "setOutputStream", "(", "new", "PrintStream", "(", "baos", ")", ")", ";", "migrateCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "(", "Object", ")", "true", ")", ")", ",", "conf", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "startsWith", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPrintHelp", "(", ")", "throws", "Exception", "{", "final", "Subparser", "subparser", "=", "ArgumentParsers", ".", "newArgumentParser", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addSubparsers", "(", ")", ".", "addParser", "(", "migrateCommand", ".", "getName", "(", ")", ")", ".", "description", "(", "migrateCommand", ".", "getDescription", "(", ")", ")", ";", "migrateCommand", ".", "configure", "(", "subparser", ")", ";", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "subparser", ".", "printHelp", "(", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "baos", ",", "UTF_8", ")", ",", "true", ")", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRun", "(", ")", "throws", "Exception", "{", "final", "TestMigrationConfiguration", "conf", "=", "createConfiguration", "(", "getDatabaseUrl", "(", ")", ")", ";", "dbTestCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPrintHelp", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "createSubparser", "(", "dbTestCommand", ")", ".", "printHelp", "(", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "baos", ",", "UTF_8", ")", ",", "true", ")", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "final", "String", "databaseUrl", "=", "getDatabaseUrl", "(", ")", ";", "conf", "=", "createConfiguration", "(", "databaseUrl", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRun", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "prepareRollbackCommand", ".", "setOutputStream", "(", "new", "PrintStream", "(", "baos", ")", ")", ";", "prepareRollbackCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", ")", ")", ",", "conf", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPrepareOnlyChange", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "prepareRollbackCommand", ".", "setOutputStream", "(", "new", "PrintStream", "(", "baos", ")", ")", ";", "prepareRollbackCommand", ".", "run", "(", "null", ",", "new", "Namespace", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ")", ",", "conf", ")", ";", "assertThat", "(", "baos", ".", "toString", "(", "UTF_8", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPrintHelp", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "out", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "createSubparser", "(", "prepareRollbackCommand", ")", ".", "printHelp", "(", "new", "PrintWriter", "(", "new", "OutputStreamWriter", "(", "out", ",", "UTF_8", ")", ",", "true", ")", ")", ";", "assertThat", "(", "out", ".", "toString", "(", "UTF_8", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "TestMigrationConfiguration", "(", "DataSourceFactory", "dataSource", ")", "{", "this", ".", "dataSource", "=", "dataSource", ";", "}", "</s>"]
["<s>", "public", "DataSourceFactory", "getDataSource", "(", ")", "{", "return", "dataSource", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "DataSourceFactory", "getDataSourceFactory", "(", "TestMigrationConfiguration", "configuration", ")", "{", "return", "configuration", ".", "getDataSource", "(", ")", ";", "}", "</s>"]
["<s>", "public", "DbPrepareRollbackCommand", "(", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "setOutputStream", "(", "PrintStream", "outputStream", ")", "{", "this", ".", "outputStream", "=", "outputStream", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "super", ".", "configure", "(", "subparser", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "type", "(", "Integer", ".", "class", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "append", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", "{", "final", "String", "context", "=", "getContext", "(", "namespace", ")", ";", "final", "Integer", "count", "=", "namespace", ".", "getInt", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "count", "!", "=", "null", ")", "{", "liquibase", ".", "futureRollbackSQL", "(", "count", ",", "context", ",", "new", "OutputStreamWriter", "(", "outputStream", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "else", "{", "liquibase", ".", "futureRollbackSQL", "(", "context", ",", "new", "OutputStreamWriter", "(", "outputStream", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "String", "getContext", "(", "Namespace", "namespace", ")", "{", "final", "List", "<", "Object", ">", "contexts", "=", "namespace", ".", "getList", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "contexts", "=", "=", "null", ")", "{", "return", "\"", "\"", ";", "}", "return", "Joiner", ".", "on", "(", "<CHAR_LIT:U+002C>", ")", ".", "join", "(", "contexts", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "final", "void", "initialize", "(", "Bootstrap", "<", "?", ">", "bootstrap", ")", "{", "final", "Class", "<", "T", ">", "klass", "=", "(", "Class", "<", "T", ">", ")", "bootstrap", ".", "getApplication", "(", ")", ".", "getConfigurationClass", "(", ")", ";", "bootstrap", ".", "addCommand", "(", "new", "DbCommand", "<", ">", "(", "name", "(", ")", ",", "this", ",", "klass", ",", "getMigrationsFileName", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getMigrationsFileName", "(", ")", "{", "return", "DEFAULT_MIGRATIONS_FILE", ";", "}", "</s>"]
["<s>", "public", "String", "name", "(", ")", "{", "return", "DEFAULT_NAME", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "final", "void", "run", "(", "Environment", "environment", ")", "{", "}", "</s>"]
["<s>", "public", "DbCalculateChecksumCommand", "(", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "setCheckSumConsumer", "(", "Consumer", "<", "CheckSum", ">", "checkSumConsumer", ")", "{", "this", ".", "checkSumConsumer", "=", "checkSumConsumer", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "super", ".", "configure", "(", "subparser", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "nargs", "(", "1", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "nargs", "(", "1", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", "{", "final", "CheckSum", "checkSum", "=", "liquibase", ".", "calculateCheckSum", "(", "\"", "<STR_LIT>", "\"", ",", "namespace", ".", "<", "String", ">", "getList", "(", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "0", ")", ",", "namespace", ".", "<", "String", ">", "getList", "(", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "0", ")", ")", ";", "checkSumConsumer", ".", "accept", "(", "checkSum", ")", ";", "}", "</s>"]
["<s>", "protected", "AbstractLiquibaseCommand", "(", "String", "name", ",", "String", "description", ",", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "name", ",", "description", ")", ";", "this", ".", "strategy", "=", "strategy", ";", "this", ".", "configurationClass", "=", "configurationClass", ";", "this", ".", "migrationsFileName", "=", "migrationsFileName", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "T", ">", "getConfigurationClass", "(", ")", "{", "return", "configurationClass", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "super", ".", "configure", "(", "subparser", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "protected", "void", "run", "(", "@", "Nullable", "Bootstrap", "<", "T", ">", "bootstrap", ",", "Namespace", "namespace", ",", "T", "configuration", ")", "throws", "Exception", "{", "final", "PooledDataSourceFactory", "dbConfig", "=", "strategy", ".", "getDataSourceFactory", "(", "configuration", ")", ";", "dbConfig", ".", "asSingleConnectionPool", "(", ")", ";", "try", "(", "final", "CloseableLiquibase", "liquibase", "=", "openLiquibase", "(", "dbConfig", ",", "namespace", ")", ")", "{", "run", "(", "namespace", ",", "liquibase", ")", ";", "}", "catch", "(", "ValidationFailedException", "e", ")", "{", "e", ".", "printDescriptiveError", "(", "System", ".", "err", ")", ";", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "CloseableLiquibase", "openLiquibase", "(", "final", "PooledDataSourceFactory", "dataSourceFactory", ",", "final", "Namespace", "namespace", ")", "throws", "SQLException", ",", "LiquibaseException", "{", "final", "CloseableLiquibase", "liquibase", ";", "final", "ManagedDataSource", "dataSource", "=", "dataSourceFactory", ".", "build", "(", "new", "MetricRegistry", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Database", "database", "=", "createDatabase", "(", "dataSource", ",", "namespace", ")", ";", "final", "String", "migrationsFile", "=", "namespace", ".", "getString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "migrationsFile", "=", "=", "null", ")", "{", "liquibase", "=", "new", "CloseableLiquibaseWithClassPathMigrationsFile", "(", "dataSource", ",", "database", ",", "migrationsFileName", ")", ";", "}", "else", "{", "liquibase", "=", "new", "CloseableLiquibaseWithFileSystemMigrationsFile", "(", "dataSource", ",", "database", ",", "migrationsFile", ")", ";", "}", "return", "liquibase", ";", "}", "</s>"]
["<s>", "private", "Database", "createDatabase", "(", "ManagedDataSource", "dataSource", ",", "Namespace", "namespace", ")", "throws", "SQLException", ",", "LiquibaseException", "{", "final", "DatabaseConnection", "conn", "=", "new", "JdbcConnection", "(", "dataSource", ".", "getConnection", "(", ")", ")", ";", "final", "Database", "database", "=", "DatabaseFactory", ".", "getInstance", "(", ")", ".", "findCorrectDatabaseImplementation", "(", "conn", ")", ";", "final", "String", "catalogName", "=", "namespace", ".", "getString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "String", "schemaName", "=", "namespace", ".", "getString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "database", ".", "supportsCatalogs", "(", ")", "&", "&", "catalogName", "!", "=", "null", ")", "{", "database", ".", "setDefaultCatalogName", "(", "catalogName", ")", ";", "database", ".", "setOutputDefaultCatalog", "(", "true", ")", ";", "}", "if", "(", "database", ".", "supportsSchemas", "(", ")", "&", "&", "schemaName", "!", "=", "null", ")", "{", "database", ".", "setDefaultSchemaName", "(", "schemaName", ")", ";", "database", ".", "setOutputDefaultSchema", "(", "true", ")", ";", "}", "return", "database", ";", "}", "</s>"]
["<s>", "protected", "abstract", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", ";", "</s>"]
["<s>", "public", "DbTagCommand", "(", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "super", ".", "configure", "(", "subparser", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "nargs", "(", "1", ")", ".", "required", "(", "true", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", "{", "liquibase", ".", "tag", "(", "namespace", ".", "<", "String", ">", "getList", "(", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "0", ")", ")", ";", "}", "</s>"]
["<s>", "CloseableLiquibase", "(", "String", "changeLogFile", ",", "ResourceAccessor", "resourceAccessor", ",", "Database", "database", ",", "ManagedDataSource", "dataSource", ")", "throws", "LiquibaseException", ",", "SQLException", "{", "super", "(", "changeLogFile", ",", "resourceAccessor", ",", "database", ")", ";", "this", ".", "dataSource", "=", "dataSource", ";", "}", "</s>"]
["<s>", "public", "CloseableLiquibase", "(", "String", "changeLogFile", ",", "ResourceAccessor", "resourceAccessor", ",", "DatabaseConnection", "conn", ",", "ManagedDataSource", "dataSource", ")", "throws", "LiquibaseException", ",", "SQLException", "{", "super", "(", "changeLogFile", ",", "resourceAccessor", ",", "conn", ")", ";", "this", ".", "dataSource", "=", "dataSource", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "Exception", "{", "try", "{", "database", ".", "close", "(", ")", ";", "}", "finally", "{", "dataSource", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "CloseableLiquibaseWithClassPathMigrationsFile", "(", "ManagedDataSource", "dataSource", ",", "Database", "database", ",", "String", "file", ")", "throws", "LiquibaseException", ",", "SQLException", "{", "super", "(", "file", ",", "new", "ClassLoaderResourceAccessor", "(", ")", ",", "database", ",", "dataSource", ")", ";", "}", "</s>"]
["<s>", "public", "CloseableLiquibaseWithClassPathMigrationsFile", "(", "ManagedDataSource", "dataSource", ",", "String", "file", ")", "throws", "LiquibaseException", ",", "SQLException", "{", "this", "(", "dataSource", ",", "DatabaseFactory", ".", "getInstance", "(", ")", ".", "findCorrectDatabaseImplementation", "(", "new", "JdbcConnection", "(", "dataSource", ".", "getConnection", "(", ")", ")", ")", ",", "file", ")", ";", "}", "</s>"]
["<s>", "public", "DbCommand", "(", "String", "name", ",", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "name", ",", "\"", "<STR_LIT>", "\"", ",", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ";", "this", ".", "subcommands", "=", "new", "TreeMap", "<", ">", "(", ")", ";", "addSubcommand", "(", "new", "DbCalculateChecksumCommand", "<", ">", "(", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ")", ";", "addSubcommand", "(", "new", "DbClearChecksumsCommand", "<", ">", "(", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ")", ";", "addSubcommand", "(", "new", "DbDropAllCommand", "<", ">", "(", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ")", ";", "addSubcommand", "(", "new", "DbDumpCommand", "<", ">", "(", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ")", ";", "addSubcommand", "(", "new", "DbFastForwardCommand", "<", ">", "(", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ")", ";", "addSubcommand", "(", "new", "DbGenerateDocsCommand", "<", ">", "(", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ")", ";", "addSubcommand", "(", "new", "DbLocksCommand", "<", ">", "(", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ")", ";", "addSubcommand", "(", "new", "DbMigrateCommand", "<", ">", "(", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ")", ";", "addSubcommand", "(", "new", "DbPrepareRollbackCommand", "<", ">", "(", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ")", ";", "addSubcommand", "(", "new", "DbRollbackCommand", "<", ">", "(", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ")", ";", "addSubcommand", "(", "new", "DbStatusCommand", "<", ">", "(", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ")", ";", "addSubcommand", "(", "new", "DbTagCommand", "<", ">", "(", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ")", ";", "addSubcommand", "(", "new", "DbTestCommand", "<", ">", "(", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "addSubcommand", "(", "AbstractLiquibaseCommand", "<", "T", ">", "subcommand", ")", "{", "subcommands", ".", "put", "(", "subcommand", ".", "getName", "(", ")", ",", "subcommand", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "for", "(", "AbstractLiquibaseCommand", "<", "T", ">", "subcommand", ":", "subcommands", ".", "values", "(", ")", ")", "{", "final", "Subparser", "cmdParser", "=", "subparser", ".", "addSubparsers", "(", ")", ".", "addParser", "(", "subcommand", ".", "getName", "(", ")", ")", ".", "setDefault", "(", "COMMAND_NAME_ATTR", ",", "subcommand", ".", "getName", "(", ")", ")", ".", "description", "(", "subcommand", ".", "getDescription", "(", ")", ")", ";", "subcommand", ".", "configure", "(", "cmdParser", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", "{", "final", "AbstractLiquibaseCommand", "<", "T", ">", "subcommand", "=", "requireNonNull", "(", "subcommands", ".", "get", "(", "namespace", ".", "getString", "(", "COMMAND_NAME_ATTR", ")", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "subcommand", ".", "run", "(", "namespace", ",", "liquibase", ")", ";", "}", "</s>"]
["<s>", "protected", "DbFastForwardCommand", "(", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "setPrintStream", "(", "PrintStream", "printStream", ")", "{", "this", ".", "printStream", "=", "printStream", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "super", ".", "configure", "(", "subparser", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setDefault", "(", "Boolean", ".", "FALSE", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setDefault", "(", "Boolean", ".", "FALSE", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "append", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", "{", "final", "String", "context", "=", "getContext", "(", "namespace", ")", ";", "if", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "if", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "liquibase", ".", "changeLogSync", "(", "context", ",", "new", "OutputStreamWriter", "(", "printStream", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "else", "{", "liquibase", ".", "changeLogSync", "(", "context", ")", ";", "}", "}", "else", "{", "if", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "liquibase", ".", "markNextChangeSetRan", "(", "context", ",", "new", "OutputStreamWriter", "(", "printStream", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "else", "{", "liquibase", ".", "markNextChangeSetRan", "(", "context", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "String", "getContext", "(", "Namespace", "namespace", ")", "{", "final", "List", "<", "Object", ">", "contexts", "=", "namespace", ".", "getList", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "contexts", "=", "=", "null", ")", "{", "return", "\"", "\"", ";", "}", "return", "Joiner", ".", "on", "(", "<CHAR_LIT:U+002C>", ")", ".", "join", "(", "contexts", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "setOutputStream", "(", "PrintStream", "outputStream", ")", "{", "this", ".", "outputStream", "=", "outputStream", ";", "}", "</s>"]
["<s>", "public", "DbMigrateCommand", "(", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "super", ".", "configure", "(", "subparser", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setDefault", "(", "Boolean", ".", "FALSE", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "type", "(", "Integer", ".", "class", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "append", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", "{", "final", "String", "context", "=", "getContext", "(", "namespace", ")", ";", "final", "Integer", "count", "=", "namespace", ".", "getInt", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "boolean", "dryRun", "=", "MoreObjects", ".", "firstNonNull", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ",", "false", ")", ";", "if", "(", "count", "!", "=", "null", ")", "{", "if", "(", "dryRun", ")", "{", "liquibase", ".", "update", "(", "count", ",", "context", ",", "new", "OutputStreamWriter", "(", "outputStream", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "else", "{", "liquibase", ".", "update", "(", "count", ",", "context", ")", ";", "}", "}", "else", "{", "if", "(", "dryRun", ")", "{", "liquibase", ".", "update", "(", "context", ",", "new", "OutputStreamWriter", "(", "outputStream", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "else", "{", "liquibase", ".", "update", "(", "context", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "String", "getContext", "(", "Namespace", "namespace", ")", "{", "final", "List", "<", "Object", ">", "contexts", "=", "namespace", ".", "getList", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "contexts", "=", "=", "null", ")", "{", "return", "\"", "\"", ";", "}", "return", "Joiner", ".", "on", "(", "<CHAR_LIT:U+002C>", ")", ".", "join", "(", "contexts", ")", ";", "}", "</s>"]
["<s>", "public", "DbTestCommand", "(", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "super", ".", "configure", "(", "subparser", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "append", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", "{", "liquibase", ".", "updateTestingRollback", "(", "getContext", "(", "namespace", ")", ")", ";", "}", "</s>"]
["<s>", "private", "String", "getContext", "(", "Namespace", "namespace", ")", "{", "final", "List", "<", "Object", ">", "contexts", "=", "namespace", ".", "getList", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "contexts", "=", "=", "null", ")", "{", "return", "\"", "\"", ";", "}", "return", "Joiner", ".", "on", "(", "<CHAR_LIT:U+002C>", ")", ".", "join", "(", "contexts", ")", ";", "}", "</s>"]
["<s>", "public", "DbRollbackCommand", "(", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "setOutputStream", "(", "PrintStream", "outputStream", ")", "{", "this", ".", "outputStream", "=", "outputStream", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "super", ".", "configure", "(", "subparser", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setDefault", "(", "Boolean", ".", "FALSE", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "type", "(", "Date", ".", "class", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "type", "(", "Integer", ".", "class", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "append", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", "{", "final", "String", "tag", "=", "namespace", ".", "getString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Integer", "count", "=", "namespace", ".", "getInt", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Date", "date", "=", "namespace", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Boolean", "dryRun", "=", "firstNonNull", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ",", "false", ")", ";", "final", "String", "context", "=", "getContext", "(", "namespace", ")", ";", "if", "(", "Stream", ".", "of", "(", "tag", ",", "count", ",", "date", ")", ".", "filter", "(", "Objects", ":", ":", "nonNull", ")", ".", "count", "(", ")", "!", "=", "1", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "count", "!", "=", "null", ")", "{", "if", "(", "dryRun", ")", "{", "liquibase", ".", "rollback", "(", "count", ",", "context", ",", "new", "OutputStreamWriter", "(", "outputStream", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "else", "{", "liquibase", ".", "rollback", "(", "count", ",", "context", ")", ";", "}", "}", "else", "if", "(", "tag", "!", "=", "null", ")", "{", "if", "(", "dryRun", ")", "{", "liquibase", ".", "rollback", "(", "tag", ",", "context", ",", "new", "OutputStreamWriter", "(", "outputStream", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "else", "{", "liquibase", ".", "rollback", "(", "tag", ",", "context", ")", ";", "}", "}", "else", "{", "if", "(", "dryRun", ")", "{", "liquibase", ".", "rollback", "(", "date", ",", "context", ",", "new", "OutputStreamWriter", "(", "outputStream", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "else", "{", "liquibase", ".", "rollback", "(", "date", ",", "context", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "String", "getContext", "(", "Namespace", "namespace", ")", "{", "final", "List", "<", "Object", ">", "contexts", "=", "namespace", ".", "getList", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "contexts", "=", "=", "null", ")", "{", "return", "\"", "\"", ";", "}", "return", "Joiner", ".", "on", "(", "<CHAR_LIT:U+002C>", ")", ".", "join", "(", "contexts", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "setOutputStream", "(", "PrintStream", "outputStream", ")", "{", "this", ".", "outputStream", "=", "outputStream", ";", "}", "</s>"]
["<s>", "public", "DbDumpCommand", "(", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "super", ".", "configure", "(", "subparser", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ArgumentGroup", "tables", "=", "subparser", ".", "addArgumentGroup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "tables", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "tables", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeFalse", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ArgumentGroup", "columns", "=", "subparser", ".", "addArgumentGroup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "columns", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "columns", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeFalse", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ArgumentGroup", "views", "=", "subparser", ".", "addArgumentGroup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "views", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "views", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeFalse", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ArgumentGroup", "primaryKeys", "=", "subparser", ".", "addArgumentGroup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "primaryKeys", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "primaryKeys", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeFalse", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ArgumentGroup", "uniqueConstraints", "=", "subparser", ".", "addArgumentGroup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "uniqueConstraints", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "uniqueConstraints", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeFalse", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ArgumentGroup", "indexes", "=", "subparser", ".", "addArgumentGroup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "indexes", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "indexes", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeFalse", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ArgumentGroup", "foreignKeys", "=", "subparser", ".", "addArgumentGroup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "foreignKeys", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "foreignKeys", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeFalse", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ArgumentGroup", "sequences", "=", "subparser", ".", "addArgumentGroup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sequences", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sequences", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeFalse", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ArgumentGroup", "data", "=", "subparser", ".", "addArgumentGroup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "data", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setDefault", "(", "Boolean", ".", "FALSE", ")", ";", "data", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeFalse", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setDefault", "(", "Boolean", ".", "FALSE", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", "{", "final", "Set", "<", "Class", "<", "?", "extends", "DatabaseObject", ">", ">", "compareTypes", "=", "new", "HashSet", "<", ">", "(", ")", ";", "if", "(", "isTrue", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "compareTypes", ".", "add", "(", "Column", ".", "class", ")", ";", "}", "if", "(", "isTrue", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "compareTypes", ".", "add", "(", "Data", ".", "class", ")", ";", "}", "if", "(", "isTrue", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "compareTypes", ".", "add", "(", "ForeignKey", ".", "class", ")", ";", "}", "if", "(", "isTrue", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "compareTypes", ".", "add", "(", "Index", ".", "class", ")", ";", "}", "if", "(", "isTrue", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "compareTypes", ".", "add", "(", "PrimaryKey", ".", "class", ")", ";", "}", "if", "(", "isTrue", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "compareTypes", ".", "add", "(", "Sequence", ".", "class", ")", ";", "}", "if", "(", "isTrue", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "compareTypes", ".", "add", "(", "Table", ".", "class", ")", ";", "}", "if", "(", "isTrue", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "compareTypes", ".", "add", "(", "UniqueConstraint", ".", "class", ")", ";", "}", "if", "(", "isTrue", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "compareTypes", ".", "add", "(", "View", ".", "class", ")", ";", "}", "final", "DiffToChangeLog", "diffToChangeLog", "=", "new", "DiffToChangeLog", "(", "new", "DiffOutputControl", "(", ")", ")", ";", "final", "Database", "database", "=", "liquibase", ".", "getDatabase", "(", ")", ";", "final", "String", "filename", "=", "namespace", ".", "getString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "filename", "!", "=", "null", ")", "{", "try", "(", "PrintStream", "file", "=", "new", "PrintStream", "(", "filename", ",", "StandardCharsets", ".", "UTF_8", ".", "name", "(", ")", ")", ")", "{", "generateChangeLog", "(", "database", ",", "database", ".", "getDefaultSchema", "(", ")", ",", "diffToChangeLog", ",", "file", ",", "compareTypes", ")", ";", "}", "}", "else", "{", "generateChangeLog", "(", "database", ",", "database", ".", "getDefaultSchema", "(", ")", ",", "diffToChangeLog", ",", "outputStream", ",", "compareTypes", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "generateChangeLog", "(", "final", "Database", "database", ",", "final", "CatalogAndSchema", "catalogAndSchema", ",", "final", "DiffToChangeLog", "changeLogWriter", ",", "PrintStream", "outputStream", ",", "final", "Set", "<", "Class", "<", "?", "extends", "DatabaseObject", ">", ">", "compareTypes", ")", "throws", "DatabaseException", ",", "IOException", ",", "ParserConfigurationException", "{", "@", "SuppressWarnings", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "final", "SnapshotControl", "snapshotControl", "=", "new", "SnapshotControl", "(", "database", ",", "compareTypes", ".", "toArray", "(", "new", "Class", "[", "compareTypes", ".", "size", "(", ")", "]", ")", ")", ";", "final", "CompareControl", "compareControl", "=", "new", "CompareControl", "(", "new", "CompareControl", ".", "SchemaComparison", "[", "]", "{", "new", "CompareControl", ".", "SchemaComparison", "(", "catalogAndSchema", ",", "catalogAndSchema", ")", "}", ",", "compareTypes", ")", ";", "final", "CatalogAndSchema", "[", "]", "compareControlSchemas", "=", "compareControl", ".", "getSchemas", "(", "CompareControl", ".", "DatabaseRole", ".", "REFERENCE", ")", ";", "try", "{", "final", "DatabaseSnapshot", "referenceSnapshot", "=", "SnapshotGeneratorFactory", ".", "getInstance", "(", ")", ".", "createSnapshot", "(", "compareControlSchemas", ",", "database", ",", "snapshotControl", ")", ";", "final", "DatabaseSnapshot", "comparisonSnapshot", "=", "SnapshotGeneratorFactory", ".", "getInstance", "(", ")", ".", "createSnapshot", "(", "compareControlSchemas", ",", "null", ",", "snapshotControl", ")", ";", "final", "DiffResult", "diffResult", "=", "DiffGeneratorFactory", ".", "getInstance", "(", ")", ".", "compare", "(", "referenceSnapshot", ",", "comparisonSnapshot", ",", "compareControl", ")", ";", "changeLogWriter", ".", "setDiffResult", "(", "diffResult", ")", ";", "changeLogWriter", ".", "print", "(", "outputStream", ")", ";", "}", "catch", "(", "InvalidExampleException", "e", ")", "{", "throw", "new", "UnexpectedLiquibaseException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "boolean", "isTrue", "(", "Boolean", "nullableCondition", ")", "{", "return", "nullableCondition", "!", "=", "null", "&", "&", "nullableCondition", ";", "}", "</s>"]
["<s>", "public", "DbLocksCommand", "(", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "setPrintStream", "(", "PrintStream", "printStream", ")", "{", "this", ".", "printStream", "=", "printStream", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "super", ".", "configure", "(", "subparser", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "setDefault", "(", "Boolean", ".", "FALSE", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "setDefault", "(", "Boolean", ".", "FALSE", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", "{", "final", "boolean", "list", "=", "firstNonNull", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ",", "false", ")", ";", "final", "boolean", "release", "=", "firstNonNull", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ",", "false", ")", ";", "if", "(", "list", "=", "=", "release", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "list", ")", "{", "liquibase", ".", "reportLocks", "(", "printStream", ")", ";", "}", "else", "{", "liquibase", ".", "forceReleaseLocks", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "DbClearChecksumsCommand", "(", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", "{", "liquibase", ".", "clearCheckSums", "(", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "setOutputStream", "(", "PrintStream", "outputStream", ")", "{", "this", ".", "outputStream", "=", "outputStream", ";", "}", "</s>"]
["<s>", "public", "DbStatusCommand", "(", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "super", ".", "configure", "(", "subparser", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "append", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", "{", "liquibase", ".", "reportStatus", "(", "MoreObjects", ".", "firstNonNull", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ",", "false", ")", ",", "getContext", "(", "namespace", ")", ",", "new", "OutputStreamWriter", "(", "outputStream", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "private", "String", "getContext", "(", "Namespace", "namespace", ")", "{", "final", "List", "<", "Object", ">", "contexts", "=", "namespace", ".", "getList", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "contexts", "=", "=", "null", ")", "{", "return", "\"", "\"", ";", "}", "return", "Joiner", ".", "on", "(", "<CHAR_LIT:U+002C>", ")", ".", "join", "(", "contexts", ")", ";", "}", "</s>"]
["<s>", "CloseableLiquibaseWithFileSystemMigrationsFile", "(", "ManagedDataSource", "dataSource", ",", "Database", "database", ",", "String", "file", ")", "throws", "LiquibaseException", ",", "SQLException", "{", "super", "(", "file", ",", "new", "FileSystemResourceAccessor", "(", ")", ",", "database", ",", "dataSource", ")", ";", "}", "</s>"]
["<s>", "public", "CloseableLiquibaseWithFileSystemMigrationsFile", "(", "ManagedDataSource", "dataSource", ",", "String", "file", ")", "throws", "LiquibaseException", ",", "SQLException", "{", "this", "(", "dataSource", ",", "DatabaseFactory", ".", "getInstance", "(", ")", ".", "findCorrectDatabaseImplementation", "(", "new", "JdbcConnection", "(", "dataSource", ".", "getConnection", "(", ")", ")", ")", ",", "file", ")", ";", "}", "</s>"]
["<s>", "public", "DbDropAllCommand", "(", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "super", ".", "configure", "(", "subparser", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "required", "(", "true", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", "{", "liquibase", ".", "dropAll", "(", ")", ";", "}", "</s>"]
["<s>", "public", "DbGenerateDocsCommand", "(", "DatabaseConfiguration", "<", "T", ">", "strategy", ",", "Class", "<", "T", ">", "configurationClass", ",", "String", "migrationsFileName", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "strategy", ",", "configurationClass", ",", "migrationsFileName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "super", ".", "configure", "(", "subparser", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "nargs", "(", "1", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Namespace", "namespace", ",", "Liquibase", "liquibase", ")", "throws", "Exception", "{", "liquibase", ".", "generateDocumentation", "(", "namespace", ".", "<", "String", ">", "getList", "(", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "0", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "ImmutableList", "<", "Integer", ">", "findGameIds", "(", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "ImmutableSet", "<", "String", ">", "findAllUniqueHomeTeams", "(", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "Integer", ">", "findIdByTeamsAndDate", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "homeTeam", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "visitorTeam", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "LocalDate", "date", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "LocalDate", "getFirstPlayedSince", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "LocalDate", "up", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", "@", "Timed", "(", "name", "=", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "LocalDate", ">", "getLastPlayedDateByTeams", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "homeTeam", ",", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "String", "visitorTeam", ")", ";", "</s>"]
["<s>", "@", "SqlQuery", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "findHomeTeamByGameId", "(", "@", "Bind", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "Integer", ">", "id", ")", ";", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "environment", "=", "new", "Environment", "(", "\"", "<STR_LIT>", "\"", ",", "new", "ObjectMapper", "(", ")", ",", "Validators", ".", "newValidator", "(", ")", ",", "metricRegistry", ",", "ClassLoader", ".", "getSystemClassLoader", "(", ")", ")", ";", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setUser", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "asSingleConnectionPool", "(", ")", ";", "dbi", "=", "new", "JdbiFactory", "(", "new", "TimedAnnotationNameStrategy", "(", ")", ")", ".", "build", "(", "environment", ",", "dataSourceFactory", ",", "\"", "<STR_LIT:2>", "\"", ")", ";", "dbi", ".", "useTransaction", "(", "h", "-", ">", "{", "h", ".", "createScript", "(", "Resources", ".", "toString", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Charsets", ".", "UTF_8", ")", ")", ".", "execute", "(", ")", ";", "h", ".", "createScript", "(", "Resources", ".", "toString", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Charsets", ".", "UTF_8", ")", ")", ".", "execute", "(", ")", ";", "}", ")", ";", "dao", "=", "dbi", ".", "onDemand", "(", "GameDao", ".", "class", ")", ";", "for", "(", "LifeCycle", "lc", ":", "environment", ".", "lifecycle", "(", ")", ".", "getManagedObjects", "(", ")", ")", "{", "lc", ".", "start", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "for", "(", "LifeCycle", "lc", ":", "environment", ".", "lifecycle", "(", ")", ".", "getManagedObjects", "(", ")", ")", "{", "lc", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "fluentQueryWorks", "(", ")", "{", "dbi", ".", "useHandle", "(", "h", "-", ">", "assertThat", "(", "h", ".", "createQuery", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "\"", "<STR_LIT>", "\"", ",", "LocalDate", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT:2>", ",", "<NUM_LIT:15>", ")", ")", ".", "mapTo", "(", "Integer", ".", "class", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ")", ".", "containsOnly", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:5>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canAcceptOptionalParams", "(", ")", "{", "assertThat", "(", "dao", ".", "findHomeTeamByGameId", "(", "Optional", ".", "of", "(", "<NUM_LIT:4>", ")", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "metricRegistry", ".", "timer", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canAcceptEmptyOptionalParams", "(", ")", "{", "assertThat", "(", "dao", ".", "findHomeTeamByGameId", "(", "Optional", ".", "empty", "(", ")", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "metricRegistry", ".", "timer", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canReturnImmutableLists", "(", ")", "{", "assertThat", "(", "dao", ".", "findGameIds", "(", ")", ")", ".", "containsExactly", "(", "1", ",", "<NUM_LIT:2>", ",", "<NUM_LIT:3>", ",", "<NUM_LIT:4>", ",", "<NUM_LIT:5>", ")", ";", "assertThat", "(", "metricRegistry", ".", "timer", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canReturnImmutableSets", "(", ")", "{", "assertThat", "(", "dao", ".", "findAllUniqueHomeTeams", "(", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "metricRegistry", ".", "timer", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canReturnOptional", "(", ")", "{", "assertThat", "(", "dao", ".", "findIdByTeamsAndDate", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "LocalDate", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT>", ")", ")", ")", ".", "contains", "(", "<NUM_LIT:2>", ")", ";", "assertThat", "(", "metricRegistry", ".", "timer", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canReturnEmptyOptional", "(", ")", "{", "assertThat", "(", "dao", ".", "findIdByTeamsAndDate", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "LocalDate", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT>", ")", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "metricRegistry", ".", "timer", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "worksWithDates", "(", ")", "{", "assertThat", "(", "dao", ".", "getFirstPlayedSince", "(", "LocalDate", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT:3>", ",", "1", ")", ")", ")", ".", "isEqualTo", "(", "LocalDate", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT:2>", ",", "<NUM_LIT:15>", ")", ")", ";", "assertThat", "(", "metricRegistry", ".", "timer", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "worksWithOptionalDates", "(", ")", "{", "Optional", "<", "LocalDate", ">", "date", "=", "dao", ".", "getLastPlayedDateByTeams", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "date", ")", ".", "contains", "(", "LocalDate", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT:2>", ",", "<NUM_LIT:11>", ")", ")", ";", "assertThat", "(", "metricRegistry", ".", "timer", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "worksWithAbsentOptionalDates", "(", ")", "{", "assertThat", "(", "dao", ".", "getLastPlayedDateByTeams", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "metricRegistry", ".", "timer", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getCount", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testJodaTimeWorksForDateTimes", "(", ")", "{", "dbi", ".", "useHandle", "(", "h", "-", ">", "assertThat", "(", "h", ".", "createQuery", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ".", "bind", "(", "\"", "<STR_LIT>", "\"", ",", "org", ".", "joda", ".", "time", ".", "LocalDate", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toDateTimeAtStartOfDay", "(", ")", ")", ".", "mapTo", "(", "DateTime", ".", "class", ")", ".", "stream", "(", ")", ".", "map", "(", "DateTime", ":", ":", "toLocalDate", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ")", ".", "containsOnly", "(", "org", ".", "joda", ".", "time", ".", "LocalDate", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ",", "org", ".", "joda", ".", "time", ".", "LocalDate", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testBuild", "(", ")", "{", "final", "Environment", "environment", "=", "mock", "(", "Environment", ".", "class", ")", ";", "final", "MetricRegistry", "metrics", "=", "mock", "(", "MetricRegistry", ".", "class", ")", ";", "final", "LifecycleEnvironment", "lifecycle", "=", "mock", "(", "LifecycleEnvironment", ".", "class", ")", ";", "final", "HealthCheckRegistry", "healthChecks", "=", "mock", "(", "HealthCheckRegistry", ".", "class", ")", ";", "final", "PooledDataSourceFactory", "configuration", "=", "mock", "(", "PooledDataSourceFactory", ".", "class", ")", ";", "final", "String", "name", "=", "UUID", ".", "randomUUID", "(", ")", ".", "toString", "(", ")", ";", "final", "ManagedDataSource", "dataSource", "=", "mock", "(", "ManagedDataSource", ".", "class", ")", ";", "final", "String", "validationQuery", "=", "UUID", ".", "randomUUID", "(", ")", ".", "toString", "(", ")", ";", "final", "Jdbi", "jdbi", "=", "mock", "(", "Jdbi", ".", "class", ")", ";", "final", "SqlStatements", "sqlStatements", "=", "new", "SqlStatements", "(", ")", ";", "when", "(", "environment", ".", "metrics", "(", ")", ")", ".", "thenReturn", "(", "metrics", ")", ";", "when", "(", "environment", ".", "lifecycle", "(", ")", ")", ".", "thenReturn", "(", "lifecycle", ")", ";", "when", "(", "environment", ".", "healthChecks", "(", ")", ")", ".", "thenReturn", "(", "healthChecks", ")", ";", "when", "(", "configuration", ".", "build", "(", "metrics", ",", "name", ")", ")", ".", "thenReturn", "(", "dataSource", ")", ";", "when", "(", "configuration", ".", "getValidationQuery", "(", ")", ")", ".", "thenReturn", "(", "validationQuery", ")", ";", "when", "(", "configuration", ".", "isAutoCommentsEnabled", "(", ")", ")", ".", "thenReturn", "(", "true", ")", ";", "when", "(", "jdbi", ".", "getConfig", "(", "SqlStatements", ".", "class", ")", ")", ".", "thenReturn", "(", "sqlStatements", ")", ";", "final", "JdbiFactory", "factory", "=", "spy", "(", "new", "JdbiFactory", "(", ")", ")", ";", "when", "(", "factory", ".", "newInstance", "(", "dataSource", ")", ")", ".", "thenReturn", "(", "jdbi", ")", ";", "final", "Jdbi", "result", "=", "factory", ".", "build", "(", "environment", ",", "configuration", ",", "name", ")", ";", "assertThat", "(", "result", ")", ".", "isSameAs", "(", "jdbi", ")", ";", "verify", "(", "lifecycle", ")", ".", "manage", "(", "dataSource", ")", ";", "verify", "(", "healthChecks", ")", ".", "register", "(", "eq", "(", "name", ")", ",", "any", "(", "JdbiHealthCheck", ".", "class", ")", ")", ";", "verify", "(", "jdbi", ")", ".", "setTimingCollector", "(", "any", "(", "InstrumentedTimingCollector", ".", "class", ")", ")", ";", "verify", "(", "jdbi", ")", ".", "setTemplateEngine", "(", "any", "(", "NamePrependingTemplateEngine", ".", "class", ")", ")", ";", "verify", "(", "factory", ")", ".", "configure", "(", "jdbi", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "{", "jdbi", "=", "mock", "(", "Jdbi", ".", "class", ")", ";", "handle", "=", "mock", "(", "Handle", ".", "class", ")", ";", "when", "(", "jdbi", ".", "open", "(", ")", ")", ".", "thenReturn", "(", "handle", ")", ";", "executorService", "=", "Executors", ".", "newSingleThreadExecutor", "(", ")", ";", "sut", "=", "new", "JdbiHealthCheck", "(", "executorService", ",", "Duration", ".", "milliseconds", "(", "<NUM_LIT:100>", ")", ",", "jdbi", ",", "VALIDATION_QUERY", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "teardown", "(", ")", "{", "executorService", ".", "shutdown", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNoTimeoutReturnsHealthy", "(", ")", "throws", "Exception", "{", "when", "(", "handle", ".", "execute", "(", "VALIDATION_QUERY", ")", ")", ".", "thenReturn", "(", "0", ")", ";", "HealthCheck", ".", "Result", "result", "=", "sut", ".", "check", "(", ")", ";", "assertThat", "(", "result", ".", "isHealthy", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testItTimesOutProperly", "(", ")", "throws", "Exception", "{", "when", "(", "handle", ".", "execute", "(", "VALIDATION_QUERY", ")", ")", ".", "thenAnswer", "(", "(", "Answer", "<", "Integer", ">", ")", "invocation", "-", ">", "{", "TimeUnit", ".", "SECONDS", ".", "sleep", "(", "<NUM_LIT:10>", ")", ";", "return", "null", ";", "}", ")", ";", "HealthCheck", ".", "Result", "result", "=", "sut", ".", "check", "(", ")", ";", "assertThat", "(", "result", ".", "isHealthy", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "String", "myDbCall", "(", ")", ";", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "{", "original", "=", "mock", "(", "TemplateEngine", ".", "class", ")", ";", "ctx", "=", "mock", "(", "StatementContext", ".", "class", ")", ";", "when", "(", "original", ".", "render", "(", "TEMPLATE", ",", "ctx", ")", ")", ".", "thenReturn", "(", "ORIGINAL_RENDERED", ")", ";", "sut", "=", "new", "NamePrependingTemplateEngine", "(", "original", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNoExtensionMethodShouldReturnOriginal", "(", ")", "{", "when", "(", "ctx", ".", "getExtensionMethod", "(", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "final", "String", "result", "=", "sut", ".", "render", "(", "TEMPLATE", ",", "ctx", ")", ";", "assertThat", "(", "result", ")", ".", "isEqualTo", "(", "ORIGINAL_RENDERED", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPrependsCorrectName", "(", ")", "throws", "NoSuchMethodException", "{", "final", "ExtensionMethod", "extensionMethod", "=", "new", "ExtensionMethod", "(", "MyDao", ".", "class", ",", "MyDao", ".", "class", ".", "getMethod", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "when", "(", "ctx", ".", "getExtensionMethod", "(", ")", ")", ".", "thenReturn", "(", "extensionMethod", ")", ";", "final", "String", "result", "=", "sut", ".", "render", "(", "TEMPLATE", ",", "ctx", ")", ";", "assertThat", "(", "result", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", "+", "extensionMethod", ".", "getType", "(", ")", ".", "getSimpleName", "(", ")", "+", "\"", "<STR_LIT:.>", "\"", "+", "extensionMethod", ".", "getMethod", "(", ")", ".", "getName", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "ORIGINAL_RENDERED", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLogException", "(", ")", "throws", "Exception", "{", "Logger", "logger", "=", "mock", "(", "Logger", ".", "class", ")", ";", "LoggingSQLExceptionMapper", "sqlExceptionMapper", "=", "new", "LoggingSQLExceptionMapper", "(", ")", ";", "LoggingSQLExceptionMapper", ".", "setLogger", "(", "logger", ")", ";", "RuntimeException", "runtimeException", "=", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "SQLException", "sqlException", "=", "new", "SQLException", "(", "\"", "<STR_LIT>", "\"", ",", "runtimeException", ")", ";", "sqlExceptionMapper", ".", "logException", "(", "<NUM_LIT>", ",", "sqlException", ")", ";", "verify", "(", "logger", ")", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "sqlException", ")", ";", "verify", "(", "logger", ")", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "runtimeException", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "logger", "=", "mock", "(", "Logger", ".", "class", ")", ";", "jdbiExceptionMapper", "=", "new", "LoggingJdbiExceptionMapper", "(", ")", ";", "LoggingJdbiExceptionMapper", ".", "setLogger", "(", "logger", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSqlExceptionIsCause", "(", ")", "throws", "Exception", "{", "StatementContext", "statementContext", "=", "mock", "(", "StatementContext", ".", "class", ")", ";", "RuntimeException", "runtimeException", "=", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "SQLException", "sqlException", "=", "new", "SQLException", "(", "\"", "<STR_LIT>", "\"", ",", "runtimeException", ")", ";", "JdbiException", "jdbiException", "=", "new", "NoResultsException", "(", "\"", "<STR_LIT>", "\"", ",", "sqlException", ",", "statementContext", ")", ";", "jdbiExceptionMapper", ".", "logException", "(", "<NUM_LIT>", ",", "jdbiException", ")", ";", "verify", "(", "logger", ")", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "sqlException", ")", ";", "verify", "(", "logger", ")", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "runtimeException", ")", ";", "verify", "(", "logger", ",", "never", "(", ")", ")", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "jdbiException", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPlainJdbiException", "(", ")", "throws", "Exception", "{", "JdbiException", "jdbiException", "=", "new", "TransactionException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "jdbiExceptionMapper", ".", "logException", "(", "<NUM_LIT>", ",", "jdbiException", ")", ";", "verify", "(", "logger", ")", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "jdbiException", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "test", "(", ")", "{", "Environment", "environment", "=", "mock", "(", "Environment", ".", "class", ")", ";", "JerseyEnvironment", "jerseyEnvironment", "=", "mock", "(", "JerseyEnvironment", ".", "class", ")", ";", "when", "(", "environment", ".", "jersey", "(", ")", ")", ".", "thenReturn", "(", "jerseyEnvironment", ")", ";", "new", "JdbiExceptionsBundle", "(", ")", ".", "run", "(", "environment", ")", ";", "verify", "(", "jerseyEnvironment", ")", ".", "register", "(", "isA", "(", "LoggingSQLExceptionMapper", ".", "class", ")", ")", ";", "verify", "(", "jerseyEnvironment", ")", ".", "register", "(", "isA", "(", "LoggingJdbiExceptionMapper", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "public", "JdbiFactory", "(", ")", "{", "this", "(", "new", "SmartNameStrategy", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "JdbiFactory", "(", "StatementNameStrategy", "nameStrategy", ")", "{", "this", ".", "nameStrategy", "=", "nameStrategy", ";", "}", "</s>"]
["<s>", "public", "Jdbi", "build", "(", "Environment", "environment", ",", "PooledDataSourceFactory", "configuration", ",", "String", "name", ")", "{", "final", "ManagedDataSource", "dataSource", "=", "configuration", ".", "build", "(", "environment", ".", "metrics", "(", ")", ",", "name", ")", ";", "return", "build", "(", "environment", ",", "configuration", ",", "dataSource", ",", "name", ")", ";", "}", "</s>"]
["<s>", "public", "Jdbi", "build", "(", "Environment", "environment", ",", "PooledDataSourceFactory", "configuration", ",", "ManagedDataSource", "dataSource", ",", "String", "name", ")", "{", "final", "Jdbi", "jdbi", "=", "newInstance", "(", "dataSource", ")", ";", "environment", ".", "lifecycle", "(", ")", ".", "manage", "(", "dataSource", ")", ";", "final", "String", "validationQuery", "=", "configuration", ".", "getValidationQuery", "(", ")", ";", "environment", ".", "healthChecks", "(", ")", ".", "register", "(", "name", ",", "new", "JdbiHealthCheck", "(", "environment", ".", "getHealthCheckExecutorService", "(", ")", ",", "configuration", ".", "getValidationQueryTimeout", "(", ")", ".", "orElseGet", "(", "(", ")", "-", ">", "Duration", ".", "seconds", "(", "<NUM_LIT:5>", ")", ")", ",", "jdbi", ",", "validationQuery", ")", ")", ";", "jdbi", ".", "setTimingCollector", "(", "new", "InstrumentedTimingCollector", "(", "environment", ".", "metrics", "(", ")", ",", "nameStrategy", ")", ")", ";", "if", "(", "configuration", ".", "isAutoCommentsEnabled", "(", ")", ")", "{", "final", "TemplateEngine", "original", "=", "jdbi", ".", "getConfig", "(", "SqlStatements", ".", "class", ")", ".", "getTemplateEngine", "(", ")", ";", "jdbi", ".", "setTemplateEngine", "(", "new", "NamePrependingTemplateEngine", "(", "original", ")", ")", ";", "}", "configure", "(", "jdbi", ")", ";", "return", "jdbi", ";", "}", "</s>"]
["<s>", "protected", "Jdbi", "newInstance", "(", "final", "ManagedDataSource", "dataSource", ")", "{", "return", "Jdbi", ".", "create", "(", "dataSource", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "configure", "(", "final", "Jdbi", "jdbi", ")", "{", "jdbi", ".", "installPlugin", "(", "new", "SqlObjectPlugin", "(", ")", ")", ";", "jdbi", ".", "installPlugin", "(", "new", "JodaTimePlugin", "(", ")", ")", ";", "jdbi", ".", "installPlugin", "(", "new", "GuavaPlugin", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "JdbiHealthCheck", "(", "ExecutorService", "executorService", ",", "Duration", "duration", ",", "Jdbi", "jdbi", ",", "String", "validationQuery", ")", "{", "this", ".", "jdbi", "=", "jdbi", ";", "this", ".", "validationQuery", "=", "validationQuery", ";", "this", ".", "timeBoundHealthCheck", "=", "new", "TimeBoundHealthCheck", "(", "executorService", ",", "duration", ")", ";", "}", "</s>"]
["<s>", "public", "JdbiHealthCheck", "(", "Jdbi", "jdbi", ",", "String", "validationQuery", ")", "{", "this", "(", "MoreExecutors", ".", "newDirectExecutorService", "(", ")", ",", "Duration", ".", "seconds", "(", "0", ")", ",", "jdbi", ",", "validationQuery", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Result", "check", "(", ")", "throws", "Exception", "{", "return", "timeBoundHealthCheck", ".", "check", "(", "(", ")", "-", ">", "{", "try", "(", "Handle", "handle", "=", "jdbi", ".", "open", "(", ")", ")", "{", "handle", ".", "execute", "(", "validationQuery", ")", ";", "return", "Result", ".", "healthy", "(", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "NamePrependingTemplateEngine", "(", "TemplateEngine", "originalEngine", ")", "{", "this", ".", "originalEngine", "=", "Objects", ".", "requireNonNull", "(", "originalEngine", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "render", "(", "String", "template", ",", "StatementContext", "ctx", ")", "{", "final", "ExtensionMethod", "extensionMethod", "=", "ctx", ".", "getExtensionMethod", "(", ")", ";", "final", "String", "originalResult", "=", "originalEngine", ".", "render", "(", "template", ",", "ctx", ")", ";", "if", "(", "extensionMethod", "=", "=", "null", ")", "{", "return", "originalResult", ";", "}", "final", "StringBuilder", "query", "=", "new", "StringBuilder", "(", "originalResult", ".", "length", "(", ")", "+", "<NUM_LIT:100>", ")", ";", "query", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "String", "className", "=", "extensionMethod", ".", "getType", "(", ")", ".", "getSimpleName", "(", ")", ";", "if", "(", "!", "className", ".", "isEmpty", "(", ")", ")", "{", "query", ".", "append", "(", "className", ")", ".", "append", "(", "<CHAR_LIT:.>", ")", ";", "}", "query", ".", "append", "(", "extensionMethod", ".", "getMethod", "(", ")", ".", "getName", "(", ")", ")", ";", "query", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "query", ".", "append", "(", "originalResult", ")", ";", "return", "query", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "logException", "(", "long", "id", ",", "JdbiException", "exception", ")", "{", "final", "Throwable", "cause", "=", "exception", ".", "getCause", "(", ")", ";", "if", "(", "cause", "instanceof", "SQLException", ")", "{", "for", "(", "Throwable", "throwable", ":", "(", "SQLException", ")", "cause", ")", "{", "logger", ".", "error", "(", "formatLogMessage", "(", "id", ",", "throwable", ")", ",", "throwable", ")", ";", "}", "}", "else", "{", "logger", ".", "error", "(", "formatLogMessage", "(", "id", ",", "exception", ")", ",", "exception", ")", ";", "}", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "static", "synchronized", "void", "setLogger", "(", "Logger", "newLogger", ")", "{", "logger", "=", "newLogger", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "logException", "(", "long", "id", ",", "SQLException", "exception", ")", "{", "final", "String", "message", "=", "formatLogMessage", "(", "id", ",", "exception", ")", ";", "for", "(", "Throwable", "throwable", ":", "exception", ")", "{", "logger", ".", "error", "(", "message", ",", "throwable", ")", ";", "}", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "static", "synchronized", "void", "setLogger", "(", "Logger", "newLogger", ")", "{", "logger", "=", "newLogger", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "Bootstrap", "<", "?", ">", "bootstrap", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Environment", "environment", ")", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "LoggingSQLExceptionMapper", "(", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "LoggingJdbiExceptionMapper", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "writeToShouldUseValidRenderer", "(", ")", "throws", "IOException", "{", "final", "ViewRenderer", "renderable", "=", "mock", "(", "ViewRenderer", ".", "class", ")", ";", "final", "ViewRenderer", "nonRenderable", "=", "mock", "(", "ViewRenderer", ".", "class", ")", ";", "final", "Locale", "locale", "=", "new", "Locale", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "metricRegistry", ".", "timer", "(", "anyString", "(", ")", ")", ")", ".", "thenReturn", "(", "timer", ")", ";", "when", "(", "timer", ".", "time", "(", ")", ")", ".", "thenReturn", "(", "timerContext", ")", ";", "when", "(", "renderable", ".", "isRenderable", "(", "view", ")", ")", ".", "thenReturn", "(", "true", ")", ";", "when", "(", "nonRenderable", ".", "isRenderable", "(", "view", ")", ")", ".", "thenReturn", "(", "false", ")", ";", "final", "ViewMessageBodyWriter", "writer", "=", "spy", "(", "new", "ViewMessageBodyWriter", "(", "metricRegistry", ",", "Arrays", ".", "asList", "(", "nonRenderable", ",", "renderable", ")", ")", ")", ";", "doReturn", "(", "locale", ")", ".", "when", "(", "writer", ")", ".", "detectLocale", "(", "any", "(", ")", ")", ";", "writer", ".", "setHeaders", "(", "mock", "(", "HttpHeaders", ".", "class", ")", ")", ";", "writer", ".", "writeTo", "(", "view", ",", "Class", ".", "class", ",", "Class", ".", "class", ",", "new", "Annotation", "[", "]", "{", "}", ",", "new", "MediaType", "(", ")", ",", "new", "MultivaluedHashMap", "<", ">", "(", ")", ",", "stream", ")", ";", "verify", "(", "nonRenderable", ")", ".", "isRenderable", "(", "view", ")", ";", "verifyNoMoreInteractions", "(", "nonRenderable", ")", ";", "verify", "(", "renderable", ")", ".", "isRenderable", "(", "view", ")", ";", "verify", "(", "renderable", ")", ".", "render", "(", "view", ",", "locale", ",", "stream", ")", ";", "verify", "(", "timerContext", ")", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "writeToShouldThrowWhenNoValidRendererFound", "(", ")", "{", "final", "ViewMessageBodyWriter", "writer", "=", "new", "ViewMessageBodyWriter", "(", "metricRegistry", ",", "Collections", ".", "emptyList", "(", ")", ")", ";", "when", "(", "metricRegistry", ".", "timer", "(", "anyString", "(", ")", ")", ")", ".", "thenReturn", "(", "timer", ")", ";", "when", "(", "timer", ".", "time", "(", ")", ")", ".", "thenReturn", "(", "timerContext", ")", ";", "assertThatExceptionOfType", "(", "WebApplicationException", ".", "class", ")", ".", "isThrownBy", "(", "(", ")", "-", ">", "{", "writer", ".", "writeTo", "(", "view", ",", "Class", ".", "class", ",", "Class", ".", "class", ",", "new", "Annotation", "[", "]", "{", "}", ",", "new", "MediaType", "(", ")", ",", "new", "MultivaluedHashMap", "<", ">", "(", ")", ",", "stream", ")", ";", "}", ")", ".", "withCauseExactlyInstanceOf", "(", "ViewRenderException", ".", "class", ")", ";", "verify", "(", "timerContext", ")", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "writeToShouldHandleViewRenderingExceptions", "(", ")", "throws", "IOException", "{", "final", "ViewRenderer", "renderer", "=", "mock", "(", "ViewRenderer", ".", "class", ")", ";", "final", "Locale", "locale", "=", "new", "Locale", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ViewRenderException", "exception", "=", "new", "ViewRenderException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "metricRegistry", ".", "timer", "(", "anyString", "(", ")", ")", ")", ".", "thenReturn", "(", "timer", ")", ";", "when", "(", "timer", ".", "time", "(", ")", ")", ".", "thenReturn", "(", "timerContext", ")", ";", "when", "(", "renderer", ".", "isRenderable", "(", "view", ")", ")", ".", "thenReturn", "(", "true", ")", ";", "doThrow", "(", "exception", ")", ".", "when", "(", "renderer", ")", ".", "render", "(", "view", ",", "locale", ",", "stream", ")", ";", "final", "ViewMessageBodyWriter", "writer", "=", "spy", "(", "new", "ViewMessageBodyWriter", "(", "metricRegistry", ",", "Collections", ".", "singletonList", "(", "renderer", ")", ")", ")", ";", "doReturn", "(", "locale", ")", ".", "when", "(", "writer", ")", ".", "detectLocale", "(", "any", "(", ")", ")", ";", "writer", ".", "setHeaders", "(", "mock", "(", "HttpHeaders", ".", "class", ")", ")", ";", "assertThatExceptionOfType", "(", "WebApplicationException", ".", "class", ")", ".", "isThrownBy", "(", "(", ")", "-", ">", "{", "writer", ".", "writeTo", "(", "view", ",", "Class", ".", "class", ",", "Class", ".", "class", ",", "new", "Annotation", "[", "]", "{", "}", ",", "new", "MediaType", "(", ")", ",", "new", "MultivaluedHashMap", "<", ">", "(", ")", ",", "stream", ")", ";", "}", ")", ".", "withCause", "(", "exception", ")", ";", "verify", "(", "timerContext", ")", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "detectLocaleShouldHandleBadlyFormedHeader", "(", ")", "{", "when", "(", "headers", ".", "getAcceptableLanguages", "(", ")", ")", ".", "thenThrow", "(", "HeaderValueException", ".", "class", ")", ";", "final", "ViewMessageBodyWriter", "writer", "=", "new", "ViewMessageBodyWriter", "(", "metricRegistry", ",", "Collections", ".", "emptyList", "(", ")", ")", ";", "assertThatExceptionOfType", "(", "WebApplicationException", ".", "class", ")", ".", "isThrownBy", "(", "(", ")", "-", ">", "{", "writer", ".", "detectLocale", "(", "headers", ")", ";", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "detectLocaleShouldReturnDefaultLocaleWhenHeaderNotSpecified", "(", ")", "{", "when", "(", "headers", ".", "getAcceptableLanguages", "(", ")", ")", ".", "thenCallRealMethod", "(", ")", ";", "when", "(", "headers", ".", "getQualifiedAcceptableLanguages", "(", ")", ")", ".", "thenCallRealMethod", "(", ")", ";", "when", "(", "headers", ".", "getHeaderString", "(", "HttpHeaders", ".", "ACCEPT_LANGUAGE", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "final", "ViewMessageBodyWriter", "writer", "=", "new", "ViewMessageBodyWriter", "(", "metricRegistry", ",", "Collections", ".", "emptyList", "(", ")", ")", ";", "final", "Locale", "result", "=", "writer", ".", "detectLocale", "(", "headers", ")", ";", "assertThat", "(", "result", ")", ".", "isSameAs", "(", "Locale", ".", "getDefault", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "detectLocaleShouldReturnCorrectLocale", "(", ")", "{", "final", "Locale", "fakeLocale", "=", "new", "Locale", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "headers", ".", "getAcceptableLanguages", "(", ")", ")", ".", "thenReturn", "(", "Collections", ".", "singletonList", "(", "fakeLocale", ")", ")", ";", "final", "ViewMessageBodyWriter", "writer", "=", "new", "ViewMessageBodyWriter", "(", "metricRegistry", ",", "Collections", ".", "emptyList", "(", ")", ")", ";", "final", "Locale", "result", "=", "writer", ".", "detectLocale", "(", "headers", ")", ";", "assertThat", "(", "result", ")", ".", "isSameAs", "(", "fakeLocale", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasATemplate", "(", ")", "throws", "Exception", "{", "assertThat", "(", "view", ".", "getTemplateName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Map", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "getViewRendererConfiguration", "(", ")", "{", "return", "viewRendererConfiguration", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "setViewRendererConfiguration", "(", "Map", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "viewRendererConfiguration", ")", "{", "ImmutableMap", ".", "Builder", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "builder", "=", "ImmutableMap", ".", "builder", "(", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "entry", ":", "viewRendererConfiguration", ".", "entrySet", "(", ")", ")", "{", "builder", ".", "put", "(", "entry", ".", "getKey", "(", ")", ",", "ImmutableMap", ".", "copyOf", "(", "entry", ".", "getValue", "(", ")", ")", ")", ";", "}", "this", ".", "viewRendererConfiguration", "=", "builder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "environment", ".", "jersey", "(", ")", ")", ".", "thenReturn", "(", "jerseyEnvironment", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addsTheViewMessageBodyWriterToTheEnvironment", "(", ")", "throws", "Exception", "{", "new", "ViewBundle", "<", ">", "(", ")", ".", "run", "(", "new", "MyConfiguration", "(", ")", ",", "environment", ")", ";", "verify", "(", "jerseyEnvironment", ")", ".", "register", "(", "any", "(", "ViewMessageBodyWriter", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addsTheViewMessageBodyWriterWithSingleViewRendererToTheEnvironment", "(", ")", "throws", "Exception", "{", "final", "String", "configurationKey", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "testKey", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Map", "<", "String", ",", "String", ">", "freeMarkerConfig", "=", "Collections", ".", "singletonMap", "(", "testKey", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Map", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "viewRendererConfig", "=", "Collections", ".", "singletonMap", "(", "configurationKey", ",", "freeMarkerConfig", ")", ";", "final", "MyConfiguration", "myConfiguration", "=", "new", "MyConfiguration", "(", ")", ";", "myConfiguration", ".", "setViewRendererConfiguration", "(", "viewRendererConfig", ")", ";", "ViewRenderer", "renderer", "=", "new", "ViewRenderer", "(", ")", "{", "@", "Override", "public", "boolean", "isRenderable", "(", "View", "view", ")", "{", "return", "false", ";", "}", "@", "Override", "public", "void", "render", "(", "View", "view", ",", "Locale", "locale", ",", "OutputStream", "output", ")", "throws", "IOException", ",", "WebApplicationException", "{", "}", "@", "Override", "public", "void", "configure", "(", "Map", "<", "String", ",", "String", ">", "options", ")", "{", "assertThat", "(", "options", ")", ".", "containsKey", "(", "testKey", ")", ";", "}", "@", "Override", "public", "String", "getConfigurationKey", "(", ")", "{", "return", "configurationKey", ";", "}", "}", ";", "new", "ViewBundle", "<", "MyConfiguration", ">", "(", "Collections", ".", "singletonList", "(", "renderer", ")", ")", "{", "@", "Override", "public", "Map", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "getViewConfiguration", "(", "MyConfiguration", "configuration", ")", "{", "return", "configuration", ".", "getViewRendererConfiguration", "(", ")", ";", "}", "}", ".", "run", "(", "myConfiguration", ",", "environment", ")", ";", "final", "ArgumentCaptor", "<", "ViewMessageBodyWriter", ">", "captor", "=", "ArgumentCaptor", ".", "forClass", "(", "ViewMessageBodyWriter", ".", "class", ")", ";", "verify", "(", "jerseyEnvironment", ")", ".", "register", "(", "captor", ".", "capture", "(", ")", ")", ";", "final", "ViewMessageBodyWriter", "capturedRenderer", "=", "captor", ".", "getValue", "(", ")", ";", "final", "Iterable", "<", "ViewRenderer", ">", "configuredRenderers", "=", "capturedRenderer", ".", "getRenderers", "(", ")", ";", "assertThat", "(", "configuredRenderers", ")", ".", "hasSize", "(", "1", ")", ";", "assertThat", "(", "configuredRenderers", ")", ".", "contains", "(", "renderer", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isRenderable", "(", "View", "view", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "render", "(", "View", "view", ",", "Locale", "locale", ",", "OutputStream", "output", ")", "throws", "IOException", ",", "WebApplicationException", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Map", "<", "String", ",", "String", ">", "options", ")", "{", "assertThat", "(", "options", ")", ".", "containsKey", "(", "testKey", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getConfigurationKey", "(", ")", "{", "return", "configurationKey", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Map", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "getViewConfiguration", "(", "MyConfiguration", "configuration", ")", "{", "return", "configuration", ".", "getViewRendererConfiguration", "(", ")", ";", "}", "</s>"]
["<s>", "boolean", "isRenderable", "(", "View", "view", ")", ";", "</s>"]
["<s>", "void", "render", "(", "View", "view", ",", "Locale", "locale", ",", "OutputStream", "output", ")", "throws", "IOException", ";", "</s>"]
["<s>", "void", "configure", "(", "Map", "<", "String", ",", "String", ">", "options", ")", ";", "</s>"]
["<s>", "String", "getConfigurationKey", "(", ")", ";", "</s>"]
["<s>", "Map", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "getViewConfiguration", "(", "T", "configuration", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "WebApplicationException", "exception", ")", "{", "LOGGER", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "exception", ")", ";", "return", "Response", ".", "serverError", "(", ")", ".", "type", "(", "MediaType", ".", "TEXT_HTML_TYPE", ")", ".", "entity", "(", "TEMPLATE_ERROR_MSG", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isMappable", "(", "WebApplicationException", "e", ")", "{", "return", "ExceptionUtils", ".", "indexOfThrowable", "(", "e", ",", "ViewRenderException", ".", "class", ")", "!", "=", "-", "1", ";", "}", "</s>"]
["<s>", "protected", "View", "(", "String", "templateName", ")", "{", "this", "(", "templateName", ",", "null", ")", ";", "}", "</s>"]
["<s>", "protected", "View", "(", "String", "templateName", ",", "@", "Nullable", "Charset", "charset", ")", "{", "this", ".", "templateName", "=", "resolveName", "(", "templateName", ")", ";", "this", ".", "charset", "=", "charset", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "public", "String", "getTemplateName", "(", ")", "{", "return", "templateName", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "public", "Optional", "<", "Charset", ">", "getCharset", "(", ")", "{", "return", "Optional", ".", "ofNullable", "(", "charset", ")", ";", "}", "</s>"]
["<s>", "private", "String", "resolveName", "(", "String", "templateName", ")", "{", "if", "(", "templateName", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", "{", "return", "templateName", ";", "}", "final", "String", "packagePath", "=", "getClass", "(", ")", ".", "getPackage", "(", ")", ".", "getName", "(", ")", ".", "replace", "(", "<CHAR_LIT:.>", ",", "<CHAR_LIT:/>", ")", ";", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "packagePath", ",", "templateName", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "setHeaders", "(", "HttpHeaders", "headers", ")", "{", "this", ".", "headers", "=", "headers", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "ViewMessageBodyWriter", "(", "MetricRegistry", "metricRegistry", ")", "{", "this", "(", "metricRegistry", ",", "ServiceLoader", ".", "load", "(", "ViewRenderer", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "public", "ViewMessageBodyWriter", "(", "MetricRegistry", "metricRegistry", ",", "Iterable", "<", "ViewRenderer", ">", "viewRenderers", ")", "{", "this", ".", "metricRegistry", "=", "metricRegistry", ";", "this", ".", "renderers", "=", "viewRenderers", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isWriteable", "(", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "View", ".", "class", ".", "isAssignableFrom", "(", "type", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getSize", "(", "View", "t", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "writeTo", "(", "View", "t", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ",", "MultivaluedMap", "<", "String", ",", "Object", ">", "httpHeaders", ",", "OutputStream", "entityStream", ")", "throws", "IOException", "{", "final", "Timer", ".", "Context", "context", "=", "metricRegistry", ".", "timer", "(", "name", "(", "t", ".", "getClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "time", "(", ")", ";", "try", "{", "for", "(", "ViewRenderer", "renderer", ":", "renderers", ")", "{", "if", "(", "renderer", ".", "isRenderable", "(", "t", ")", ")", "{", "renderer", ".", "render", "(", "t", ",", "detectLocale", "(", "requireNonNull", "(", "headers", ")", ")", ",", "entityStream", ")", ";", "return", ";", "}", "}", "throw", "new", "ViewRenderException", "(", "\"", "<STR_LIT>", "\"", "+", "t", ".", "getTemplateName", "(", ")", ")", ";", "}", "catch", "(", "ViewRenderException", "e", ")", "{", "throw", "new", "WebApplicationException", "(", "e", ")", ";", "}", "finally", "{", "context", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "Locale", "detectLocale", "(", "HttpHeaders", "headers", ")", "{", "final", "List", "<", "Locale", ">", "languages", ";", "try", "{", "languages", "=", "headers", ".", "getAcceptableLanguages", "(", ")", ";", "}", "catch", "(", "HeaderValueException", "e", ")", "{", "throw", "new", "WebApplicationException", "(", "e", ".", "getMessage", "(", ")", ",", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ";", "}", "for", "(", "Locale", "locale", ":", "languages", ")", "{", "if", "(", "!", "locale", ".", "toString", "(", ")", ".", "contains", "(", "\"", "<STR_LIT:*>", "\"", ")", ")", "{", "return", "locale", ";", "}", "}", "return", "Locale", ".", "getDefault", "(", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "Iterable", "<", "ViewRenderer", ">", "getRenderers", "(", ")", "{", "return", "renderers", ";", "}", "</s>"]
["<s>", "public", "ViewBundle", "(", ")", "{", "this", "(", "ServiceLoader", ".", "load", "(", "ViewRenderer", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "public", "ViewBundle", "(", "Iterable", "<", "ViewRenderer", ">", "viewRenderers", ")", "{", "this", ".", "viewRenderers", "=", "ImmutableSet", ".", "copyOf", "(", "viewRenderers", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Map", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "getViewConfiguration", "(", "T", "configuration", ")", "{", "return", "ImmutableMap", ".", "of", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "T", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "final", "Map", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "options", "=", "getViewConfiguration", "(", "configuration", ")", ";", "for", "(", "ViewRenderer", "viewRenderer", ":", "viewRenderers", ")", "{", "final", "Map", "<", "String", ",", "String", ">", "viewOptions", "=", "options", ".", "get", "(", "viewRenderer", ".", "getConfigurationKey", "(", ")", ")", ";", "viewRenderer", ".", "configure", "(", "firstNonNull", "(", "viewOptions", ",", "Collections", ".", "emptyMap", "(", ")", ")", ")", ";", "}", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "ViewMessageBodyWriter", "(", "environment", ".", "metrics", "(", ")", ",", "viewRenderers", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "Bootstrap", "<", "?", ">", "bootstrap", ")", "{", "}", "</s>"]
["<s>", "public", "ViewRenderException", "(", "String", "message", ")", "{", "super", "(", "message", ")", ";", "}", "</s>"]
["<s>", "public", "ViewRenderException", "(", "String", "message", ",", "Throwable", "cause", ")", "{", "super", "(", "message", ",", "cause", ")", ";", "}", "</s>"]
["<s>", "public", "ViewRenderException", "(", "Throwable", "cause", ")", "{", "super", "(", "cause", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createDefaultFactory", "(", ")", "throws", "Exception", "{", "File", "validFile", "=", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ";", "ConfigurationFactory", "<", "Example", ">", "factory", "=", "factoryFactory", ".", "create", "(", "Example", ".", "class", ",", "validator", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Example", "example", "=", "factory", ".", "build", "(", "validFile", ")", ";", "assertThat", "(", "example", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createDefaultFactoryFailsUnknownProperty", "(", ")", "throws", "Exception", "{", "File", "validFileWithUnknownProp", "=", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ";", "ConfigurationFactory", "<", "Example", ">", "factory", "=", "factoryFactory", ".", "create", "(", "Example", ".", "class", ",", "validator", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "expectedException", ".", "expect", "(", "ConfigurationException", ".", "class", ")", ";", "expectedException", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "factory", ".", "build", "(", "validFileWithUnknownProp", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createFactoryAllowingUnknownProperties", "(", ")", "throws", "Exception", "{", "ConfigurationFactoryFactory", "<", "Example", ">", "customFactory", "=", "new", "PassThroughConfigurationFactoryFactory", "(", ")", ";", "File", "validFileWithUnknownProp", "=", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ";", "ConfigurationFactory", "<", "Example", ">", "factory", "=", "customFactory", ".", "create", "(", "Example", ".", "class", ",", "validator", ",", "Jackson", ".", "newObjectMapper", "(", ")", ".", "disable", "(", "DeserializationFeature", ".", "FAIL_ON_UNKNOWN_PROPERTIES", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Example", "example", "=", "factory", ".", "build", "(", "validFileWithUnknownProp", ")", ";", "assertThat", "(", "example", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "ObjectMapper", "configureObjectMapper", "(", "ObjectMapper", "objectMapper", ")", "{", "return", "objectMapper", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "readsFileContents", "(", ")", "throws", "Exception", "{", "assertForWheeContent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertForWheeContent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertForWheeContent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "void", "assertForWheeContent", "(", "String", "path", ")", "throws", "Exception", "{", "assertThat", "(", "loadResourceAsString", "(", "path", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "String", "loadResourceAsString", "(", "String", "path", ")", "throws", "Exception", "{", "try", "(", "InputStream", "input", "=", "provider", ".", "open", "(", "path", ")", ")", "{", "return", "new", "String", "(", "ByteStreams", ".", "toByteArray", "(", "input", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ".", "trim", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "assumeThat", "(", "Locale", ".", "getDefault", "(", ")", ".", "getLanguage", "(", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "Validator", "validator", "=", "BaseValidator", ".", "newValidator", "(", ")", ";", "final", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "violations", "=", "validator", ".", "validate", "(", "new", "Example", "(", ")", ")", ";", "this", ".", "e", "=", "new", "ConfigurationValidationException", "(", "\"", "<STR_LIT>", "\"", ",", "violations", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "formatsTheViolationsIntoAHumanReadableMessage", "(", ")", "throws", "Exception", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "retainsTheSetOfExceptions", "(", ")", "throws", "Exception", "{", "assertThat", "(", "e", ".", "getConstraintViolations", "(", ")", ")", ".", "isNotEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "this", ".", "factory", "=", "new", "JsonConfigurationFactory", "<", ">", "(", "Example", ".", "class", ",", "validator", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "malformedFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "emptyFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "invalidFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "validFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "commentFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "typoFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "wrongTypeFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "malformedAdvancedFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "throwsAnExceptionOnMalformedFiles", "(", ")", "throws", "Exception", "{", "try", "{", "super", ".", "throwsAnExceptionOnMalformedFiles", "(", ")", ";", "}", "catch", "(", "ConfigurationParsingException", "e", ")", "{", "assertThat", "(", "e", ")", ".", "hasMessageContaining", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "printsDetailedInformationOnMalformedContent", "(", ")", "throws", "Exception", "{", "try", "{", "super", ".", "printsDetailedInformationOnMalformedContent", "(", ")", ";", "}", "catch", "(", "ConfigurationParsingException", "e", ")", "{", "assertThat", "(", "e", ")", ".", "hasMessageContaining", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "malformedAdvancedFile", ".", "getName", "(", ")", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "ConfigurationParsingException", ".", "class", ")", "public", "void", "defaultJsonFactoryFailsOnComment", "(", ")", "throws", "IOException", ",", "ConfigurationException", "{", "try", "{", "factory", ".", "build", "(", "commentFile", ")", ";", "}", "catch", "(", "ConfigurationParsingException", "e", ")", "{", "assertThat", "(", "e", ")", ".", "hasMessageContaining", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "commentFile", ".", "getName", "(", ")", ")", ")", ";", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configuredMapperAllowsComment", "(", ")", "throws", "IOException", ",", "ConfigurationException", "{", "ObjectMapper", "mapper", "=", "Jackson", ".", "newObjectMapper", "(", ")", ".", "configure", "(", "Feature", ".", "ALLOW_COMMENTS", ",", "true", ")", ";", "JsonConfigurationFactory", "<", "Example", ">", "factory", "=", "new", "JsonConfigurationFactory", "<", ">", "(", "Example", ".", "class", ",", "validator", ",", "mapper", ",", "\"", "<STR_LIT>", "\"", ")", ";", "factory", ".", "build", "(", "commentFile", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "readsFileContents", "(", ")", "throws", "Exception", "{", "try", "(", "InputStream", "input", "=", "provider", ".", "open", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ")", "{", "assertThat", "(", "new", "String", "(", "ByteStreams", ".", "toByteArray", "(", "input", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ".", "trim", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldSubstituteCorrectly", "(", ")", "throws", "IOException", "{", "StrLookup", "<", "?", ">", "dummyLookup", "=", "new", "StrLookup", "<", "Object", ">", "(", ")", "{", "@", "Override", "public", "String", "lookup", "(", "String", "key", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "}", ";", "DummySourceProvider", "dummyProvider", "=", "new", "DummySourceProvider", "(", ")", ";", "SubstitutingSourceProvider", "provider", "=", "new", "SubstitutingSourceProvider", "(", "dummyProvider", ",", "new", "StrSubstitutor", "(", "dummyLookup", ")", ")", ";", "String", "results", "=", "new", "String", "(", "ByteStreams", ".", "toByteArray", "(", "provider", ".", "open", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ";", "assertThat", "(", "results", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "dummyProvider", ".", "lastStream", ".", "read", "(", ")", ";", "failBecauseExceptionWasNotThrown", "(", "IOException", ".", "class", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "assertThat", "(", "e", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "lookup", "(", "String", "key", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldSubstituteOnlyExistingVariables", "(", ")", "throws", "IOException", "{", "StrLookup", "<", "?", ">", "dummyLookup", "=", "new", "StrLookup", "<", "Object", ">", "(", ")", "{", "@", "Override", "@", "Nullable", "public", "String", "lookup", "(", "String", "key", ")", "{", "return", "null", ";", "}", "}", ";", "SubstitutingSourceProvider", "provider", "=", "new", "SubstitutingSourceProvider", "(", "new", "DummySourceProvider", "(", ")", ",", "new", "StrSubstitutor", "(", "dummyLookup", ")", ")", ";", "String", "results", "=", "new", "String", "(", "ByteStreams", ".", "toByteArray", "(", "provider", ".", "open", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ";", "assertThat", "(", "results", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "String", "lookup", "(", "String", "key", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldSubstituteWithDefaultValue", "(", ")", "throws", "IOException", "{", "StrLookup", "<", "?", ">", "dummyLookup", "=", "new", "StrLookup", "<", "Object", ">", "(", ")", "{", "@", "Override", "@", "Nullable", "public", "String", "lookup", "(", "String", "key", ")", "{", "return", "null", ";", "}", "}", ";", "SubstitutingSourceProvider", "provider", "=", "new", "SubstitutingSourceProvider", "(", "new", "DummySourceProvider", "(", ")", ",", "new", "StrSubstitutor", "(", "dummyLookup", ")", ")", ";", "String", "results", "=", "new", "String", "(", "ByteStreams", ".", "toByteArray", "(", "provider", ".", "open", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ";", "assertThat", "(", "results", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "String", "lookup", "(", "String", "key", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "open", "(", "String", "s", ")", "throws", "IOException", "{", "lastStream", "=", "new", "BufferedInputStream", "(", "new", "ByteArrayInputStream", "(", "s", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ")", ";", "return", "lastStream", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultConstructorDisablesSubstitutionInVariables", "(", ")", "{", "EnvironmentVariableSubstitutor", "substitutor", "=", "new", "EnvironmentVariableSubstitutor", "(", ")", ";", "assertThat", "(", "substitutor", ".", "isEnableSubstitutionInVariables", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "UndefinedEnvironmentVariableException", ".", "class", ")", "public", "void", "defaultConstructorEnablesStrict", "(", ")", "{", "assumeThat", "(", "System", ".", "getenv", "(", "\"", "<STR_LIT>", "\"", ")", ",", "nullValue", "(", ")", ")", ";", "EnvironmentVariableSubstitutor", "substitutor", "=", "new", "EnvironmentVariableSubstitutor", "(", ")", ";", "substitutor", ".", "replace", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "constructorEnablesSubstitutionInVariables", "(", ")", "{", "EnvironmentVariableSubstitutor", "substitutor", "=", "new", "EnvironmentVariableSubstitutor", "(", "true", ",", "true", ")", ";", "assertThat", "(", "substitutor", ".", "isEnableSubstitutionInVariables", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "substitutorUsesEnvironmentVariableLookup", "(", ")", "{", "EnvironmentVariableSubstitutor", "substitutor", "=", "new", "EnvironmentVariableSubstitutor", "(", ")", ";", "assertThat", "(", "substitutor", ".", "getVariableResolver", "(", ")", ")", ".", "isInstanceOf", "(", "EnvironmentVariableLookup", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "substitutorReplacesWithEnvironmentVariables", "(", ")", "{", "EnvironmentVariableSubstitutor", "substitutor", "=", "new", "EnvironmentVariableSubstitutor", "(", "false", ")", ";", "assertThat", "(", "substitutor", ".", "replace", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "System", ".", "getenv", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "substitutor", ".", "replace", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "substitutor", ".", "replace", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "substitutor", ".", "replace", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "UndefinedEnvironmentVariableException", ".", "class", ")", "public", "void", "substitutorThrowsExceptionInStrictMode", "(", ")", "{", "assumeThat", "(", "System", ".", "getenv", "(", "\"", "<STR_LIT>", "\"", ")", ",", "nullValue", "(", ")", ")", ";", "EnvironmentVariableSubstitutor", "substitutor", "=", "new", "EnvironmentVariableSubstitutor", "(", "true", ")", ";", "substitutor", ".", "replace", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "substitutorReplacesRecursively", "(", ")", "{", "EnvironmentVariableSubstitutor", "substitutor", "=", "new", "EnvironmentVariableSubstitutor", "(", "false", ",", "true", ")", ";", "assertThat", "(", "substitutor", ".", "replace", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "substitutor", ".", "replace", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "System", ".", "getenv", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "UndefinedEnvironmentVariableException", ".", "class", ")", "public", "void", "defaultConstructorEnablesStrict", "(", ")", "{", "assumeThat", "(", "System", ".", "getenv", "(", "\"", "<STR_LIT>", "\"", ")", ",", "nullValue", "(", ")", ")", ";", "EnvironmentVariableLookup", "lookup", "=", "new", "EnvironmentVariableLookup", "(", ")", ";", "lookup", ".", "lookup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "lookupReplacesWithEnvironmentVariables", "(", ")", "{", "EnvironmentVariableLookup", "lookup", "=", "new", "EnvironmentVariableLookup", "(", "false", ")", ";", "assertThat", "(", "lookup", ".", "lookup", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "System", ".", "getenv", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "lookup", ".", "lookup", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "UndefinedEnvironmentVariableException", ".", "class", ")", "public", "void", "lookupThrowsExceptionInStrictMode", "(", ")", "{", "assumeThat", "(", "System", ".", "getenv", "(", "\"", "<STR_LIT>", "\"", ")", ",", "nullValue", "(", ")", ")", ";", "EnvironmentVariableLookup", "lookup", "=", "new", "EnvironmentVariableLookup", "(", "true", ")", ";", "lookup", ".", "lookup", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "readsFileContents", "(", ")", "throws", "Exception", "{", "try", "(", "InputStream", "input", "=", "provider", ".", "open", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getFile", "(", ")", ")", ")", "{", "assertThat", "(", "new", "String", "(", "ByteStreams", ".", "toByteArray", "(", "input", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ".", "trim", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "int", "getPort", "(", ")", "{", "return", "port", ";", "}", "</s>"]
["<s>", "public", "static", "ExampleServer", "create", "(", "int", "port", ")", "{", "ExampleServer", "server", "=", "new", "ExampleServer", "(", ")", ";", "server", ".", "port", "=", "port", ";", "return", "server", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "List", "<", "String", ">", "getType", "(", ")", "{", "return", "type", ";", "}", "</s>"]
["<s>", "public", "Map", "<", "String", ",", "String", ">", "getProperties", "(", ")", "{", "return", "properties", ";", "}", "</s>"]
["<s>", "public", "List", "<", "ExampleServer", ">", "getServers", "(", ")", "{", "return", "servers", ";", "}", "</s>"]
["<s>", "public", "boolean", "isAdmin", "(", ")", "{", "return", "admin", ";", "}", "</s>"]
["<s>", "public", "void", "setAdmin", "(", "boolean", "admin", ")", "{", "this", ".", "admin", "=", "admin", ";", "}", "</s>"]
["<s>", "public", "Map", "<", "String", ",", "String", ">", "getLogger", "(", ")", "{", "return", "logger", ";", "}", "</s>"]
["<s>", "NonInsatiableExample", "(", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ")", "{", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Example", "build", "(", "ConfigurationSourceProvider", "provider", ",", "String", "path", ")", "throws", "IOException", ",", "ConfigurationException", "{", "return", "new", "Example", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Example", "build", "(", ")", "throws", "IOException", ",", "ConfigurationException", "{", "return", "new", "Example", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "static", "File", "resourceFileName", "(", "String", "resourceName", ")", "throws", "URISyntaxException", "{", "return", "new", "File", "(", "Resources", ".", "getResource", "(", "resourceName", ")", ".", "toURI", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "resetConfigOverrides", "(", ")", "{", "for", "(", "Enumeration", "<", "?", ">", "props", "=", "System", ".", "getProperties", "(", ")", ".", "propertyNames", "(", ")", ";", "props", ".", "hasMoreElements", "(", ")", ";", ")", "{", "String", "keyString", "=", "(", "String", ")", "props", ".", "nextElement", "(", ")", ";", "if", "(", "keyString", ".", "startsWith", "(", "\"", "<STR_LIT:.>", "\"", ")", ")", "{", "System", ".", "clearProperty", "(", "keyString", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Before", "public", "abstract", "void", "setUp", "(", ")", "throws", "Exception", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "usesDefaultedCacheBuilderSpec", "(", ")", "throws", "Exception", "{", "final", "ExampleWithDefaults", "example", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "ExampleWithDefaults", ".", "class", ",", "validator", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "assertThat", "(", "example", ".", "cacheBuilderSpec", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "example", ".", "cacheBuilderSpec", ")", ".", "isEqualTo", "(", "CacheBuilderSpec", ".", "disableCaching", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "loadsValidConfigFiles", "(", ")", "throws", "Exception", "{", "final", "Example", "example", "=", "factory", ".", "build", "(", "validFile", ")", ";", "assertThat", "(", "example", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "example", ".", "getType", "(", ")", ".", "get", "(", "0", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "example", ".", "getType", "(", ")", ".", "get", "(", "1", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "example", ".", "getProperties", "(", ")", ")", ".", "contains", "(", "MapEntry", ".", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "MapEntry", ".", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "example", ".", "getServers", "(", ")", ")", ".", "hasSize", "(", "<NUM_LIT:3>", ")", ";", "assertThat", "(", "example", ".", "getServers", "(", ")", ".", "get", "(", "0", ")", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesSimpleOverride", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Example", "example", "=", "factory", ".", "build", "(", "validFile", ")", ";", "assertThat", "(", "example", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesExistingOverrideWithPeriod", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Example", "example", "=", "factory", ".", "build", "(", "validFile", ")", ";", "assertThat", "(", "example", ".", "getLogger", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesNewOverrideWithPeriod", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Example", "example", "=", "factory", ".", "build", "(", "validFile", ")", ";", "assertThat", "(", "example", ".", "getLogger", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesArrayOverride", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Example", "example", "=", "factory", ".", "build", "(", "validFile", ")", ";", "assertThat", "(", "example", ".", "getType", "(", ")", ".", "get", "(", "<NUM_LIT:2>", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "example", ".", "getType", "(", ")", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:3>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesArrayOverrideEscaped", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "final", "Example", "example", "=", "factory", ".", "build", "(", "validFile", ")", ";", "assertThat", "(", "example", ".", "getType", "(", ")", ".", "get", "(", "<NUM_LIT:2>", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "example", ".", "getType", "(", ")", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:3>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesSingleElementArrayOverride", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Example", "example", "=", "factory", ".", "build", "(", "validFile", ")", ";", "assertThat", "(", "example", ".", "getType", "(", ")", ".", "get", "(", "0", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "example", ".", "getType", "(", ")", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "overridesArrayWithIndices", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Example", "example", "=", "factory", ".", "build", "(", "validFile", ")", ";", "assertThat", "(", "example", ".", "getType", "(", ")", ".", "get", "(", "0", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "example", ".", "getType", "(", ")", ".", "get", "(", "1", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "overridesArrayWithIndicesReverse", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Example", "example", "=", "factory", ".", "build", "(", "validFile", ")", ";", "assertThat", "(", "example", ".", "getType", "(", ")", ".", "get", "(", "0", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "example", ".", "getType", "(", ")", ".", "get", "(", "1", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "overridesArrayPropertiesWithIndices", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Example", "example", "=", "factory", ".", "build", "(", "validFile", ")", ";", "assertThat", "(", "example", ".", "getServers", "(", ")", ")", ".", "hasSize", "(", "<NUM_LIT:3>", ")", ";", "assertThat", "(", "example", ".", "getServers", "(", ")", ".", "get", "(", "0", ")", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "example", ".", "getServers", "(", ")", ".", "get", "(", "<NUM_LIT:2>", ")", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "overrideMapProperty", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Example", "example", "=", "factory", ".", "build", "(", "validFile", ")", ";", "assertThat", "(", "example", ".", "getProperties", "(", ")", ")", ".", "contains", "(", "MapEntry", ".", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "MapEntry", ".", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsAnExceptionOnUnexpectedArrayOverride", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "factory", ".", "build", "(", "validFile", ")", ";", "failBecauseExceptionWasNotThrown", "(", "IllegalArgumentException", ".", "class", ")", ";", "}", "catch", "(", "IllegalArgumentException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "ConfigurationParsingException", ".", "class", ")", "public", "void", "throwsAnExceptionOnArrayOverrideWithInvalidType", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "factory", ".", "build", "(", "validFile", ")", ";", "failBecauseExceptionWasNotThrown", "(", "ConfigurationParsingException", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsAnExceptionOnOverrideArrayIndexOutOfBounds", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "factory", ".", "build", "(", "validFile", ")", ";", "failBecauseExceptionWasNotThrown", "(", "ArrayIndexOutOfBoundsException", ".", "class", ")", ";", "}", "catch", "(", "ArrayIndexOutOfBoundsException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsAnExceptionOnOverrideArrayPropertyIndexOutOfBounds", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "factory", ".", "build", "(", "validFile", ")", ";", "failBecauseExceptionWasNotThrown", "(", "ArrayIndexOutOfBoundsException", ".", "class", ")", ";", "}", "catch", "(", "ArrayIndexOutOfBoundsException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsAnExceptionOnMalformedFiles", "(", ")", "throws", "Exception", "{", "factory", ".", "build", "(", "malformedFile", ")", ";", "failBecauseExceptionWasNotThrown", "(", "ConfigurationParsingException", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsAnExceptionOnEmptyFiles", "(", ")", "throws", "Exception", "{", "try", "{", "factory", ".", "build", "(", "emptyFile", ")", ";", "failBecauseExceptionWasNotThrown", "(", "ConfigurationParsingException", ".", "class", ")", ";", "}", "catch", "(", "ConfigurationParsingException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", "+", "emptyFile", ".", "toString", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsAnExceptionOnInvalidFiles", "(", ")", "throws", "Exception", "{", "try", "{", "factory", ".", "build", "(", "invalidFile", ")", ";", "failBecauseExceptionWasNotThrown", "(", "ConfigurationValidationException", ".", "class", ")", ";", "}", "catch", "(", "ConfigurationValidationException", "e", ")", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "Locale", ".", "getDefault", "(", ")", ".", "getLanguage", "(", ")", ")", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "endsWith", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:[>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "invalidFile", ".", "getName", "(", ")", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handleOverrideDefaultConfiguration", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ExampleWithDefaults", "example", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "ExampleWithDefaults", ".", "class", ",", "validator", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "assertThat", "(", "example", ".", "name", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "example", ".", "type", ".", "get", "(", "<NUM_LIT:2>", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "example", ".", "type", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:3>", ")", ";", "assertThat", "(", "example", ".", "properties", ")", ".", "containsEntry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "example", ".", "servers", ".", "get", "(", "0", ")", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "example", ".", "servers", ".", "get", "(", "<NUM_LIT:2>", ")", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handleDefaultConfigurationWithoutOverriding", "(", ")", "throws", "Exception", "{", "final", "ExampleWithDefaults", "example", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "ExampleWithDefaults", ".", "class", ",", "validator", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "assertThat", "(", "example", ".", "name", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "example", ".", "type", ")", ".", "isEqualTo", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "example", ".", "properties", ")", ".", "isEqualTo", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "example", ".", "servers", ".", "get", "(", "0", ")", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "example", ".", "servers", ".", "get", "(", "1", ")", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "example", ".", "servers", ".", "get", "(", "<NUM_LIT:2>", ")", ".", "getPort", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsAnExceptionIfDefaultConfigurationCantBeInstantiated", "(", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "YamlConfigurationFactory", "<", "NonInsatiableExample", ">", "factory", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "NonInsatiableExample", ".", "class", ",", "validator", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThatThrownBy", "(", "factory", ":", ":", "build", ")", ".", "isInstanceOf", "(", "IllegalArgumentException", ".", "class", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "printsDidYouMeanOnUnrecognizedField", "(", ")", "throws", "Exception", "{", "assertThatThrownBy", "(", "(", ")", "-", ">", "factory", ".", "build", "(", "typoFile", ")", ")", ".", "isInstanceOf", "(", "ConfigurationParsingException", ".", "class", ")", ".", "hasMessage", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "typoFile", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "incorrectTypeIsFound", "(", ")", "throws", "Exception", "{", "assertThatThrownBy", "(", "(", ")", "-", ">", "factory", ".", "build", "(", "wrongTypeFile", ")", ")", ".", "isInstanceOf", "(", "ConfigurationParsingException", ".", "class", ")", ".", "hasMessage", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "NEWLINE", "+", "\"", "<STR_LIT>", "\"", "+", "NEWLINE", ",", "wrongTypeFile", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "printsDetailedInformationOnMalformedContent", "(", ")", "throws", "Exception", "{", "factory", ".", "build", "(", "malformedAdvancedFile", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLevenshteinComparatorSort", "(", ")", "{", "Arrays", ".", "sort", "(", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ",", "c", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLevenshteinCompare", "(", ")", "{", "assertThat", "(", "c", ".", "compare", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "c", ".", "compare", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "-", "1", ")", ";", "assertThat", "(", "c", ".", "compare", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "this", ".", "factory", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "Example", ".", "class", ",", "validator", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "malformedFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "emptyFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "invalidFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "validFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "typoFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "wrongTypeFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "malformedAdvancedFile", "=", "resourceFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "throwsAnExceptionOnMalformedFiles", "(", ")", "throws", "Exception", "{", "try", "{", "super", ".", "throwsAnExceptionOnMalformedFiles", "(", ")", ";", "}", "catch", "(", "ConfigurationParsingException", "e", ")", "{", "assertThat", "(", "e", ")", ".", "hasMessageContaining", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "printsDetailedInformationOnMalformedContent", "(", ")", "throws", "Exception", "{", "try", "{", "super", ".", "printsDetailedInformationOnMalformedContent", "(", ")", ";", "}", "catch", "(", "Throwable", "t", ")", "{", "assertThat", "(", "t", ")", ".", "hasMessageContaining", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "malformedAdvancedFile", ".", "getName", "(", ")", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "YamlConfigurationFactory", "(", "Class", "<", "T", ">", "klass", ",", "@", "Nullable", "Validator", "validator", ",", "ObjectMapper", "objectMapper", ",", "String", "propertyPrefix", ")", "{", "super", "(", "new", "YAMLFactory", "(", ")", ",", "YAMLFactory", ".", "FORMAT_NAME_YAML", ",", "klass", ",", "validator", ",", "objectMapper", ",", "propertyPrefix", ")", ";", "}", "</s>"]
["<s>", "public", "UndefinedEnvironmentVariableException", "(", "String", "errorMessage", ")", "{", "super", "(", "errorMessage", ")", ";", "}", "</s>"]
["<s>", "T", "build", "(", "ConfigurationSourceProvider", "provider", ",", "String", "path", ")", "throws", "IOException", ",", "ConfigurationException", ";", "</s>"]
["<s>", "default", "T", "build", "(", "File", "file", ")", "throws", "IOException", ",", "ConfigurationException", "{", "return", "build", "(", "new", "FileConfigurationSourceProvider", "(", ")", ",", "file", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "T", "build", "(", ")", "throws", "IOException", ",", "ConfigurationException", ";", "</s>"]
["<s>", "public", "ConfigurationException", "(", "String", "path", ",", "Collection", "<", "String", ">", "errors", ")", "{", "super", "(", "formatMessage", "(", "path", ",", "errors", ")", ")", ";", "this", ".", "errors", "=", "errors", ";", "}", "</s>"]
["<s>", "public", "ConfigurationException", "(", "String", "path", ",", "Collection", "<", "String", ">", "errors", ",", "Throwable", "cause", ")", "{", "super", "(", "formatMessage", "(", "path", ",", "errors", ")", ",", "cause", ")", ";", "this", ".", "errors", "=", "errors", ";", "}", "</s>"]
["<s>", "public", "Collection", "<", "String", ">", "getErrors", "(", ")", "{", "return", "errors", ";", "}", "</s>"]
["<s>", "protected", "static", "String", "formatMessage", "(", "String", "file", ",", "Collection", "<", "String", ">", "errors", ")", "{", "final", "StringBuilder", "msg", "=", "new", "StringBuilder", "(", "file", ")", ";", "msg", ".", "append", "(", "errors", ".", "size", "(", ")", "=", "=", "1", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "NEWLINE", ")", ";", "for", "(", "String", "error", ":", "errors", ")", "{", "msg", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "error", ")", ".", "append", "(", "NEWLINE", ")", ";", "}", "return", "msg", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "JsonConfigurationFactory", "(", "Class", "<", "T", ">", "klass", ",", "Validator", "validator", ",", "ObjectMapper", "objectMapper", ",", "String", "propertyPrefix", ")", "{", "super", "(", "objectMapper", ".", "getFactory", "(", ")", ",", "JsonFactory", ".", "FORMAT_NAME_JSON", ",", "klass", ",", "validator", ",", "objectMapper", ",", "propertyPrefix", ")", ";", "}", "</s>"]
["<s>", "public", "SubstitutingSourceProvider", "(", "ConfigurationSourceProvider", "delegate", ",", "StrSubstitutor", "substitutor", ")", "{", "this", ".", "delegate", "=", "requireNonNull", "(", "delegate", ")", ";", "this", ".", "substitutor", "=", "requireNonNull", "(", "substitutor", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "open", "(", "String", "path", ")", "throws", "IOException", "{", "try", "(", "final", "InputStream", "in", "=", "delegate", ".", "open", "(", "path", ")", ")", "{", "final", "String", "config", "=", "new", "String", "(", "ByteStreams", ".", "toByteArray", "(", "in", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ";", "final", "String", "substituted", "=", "substitutor", ".", "replace", "(", "config", ")", ";", "return", "new", "ByteArrayInputStream", "(", "substituted", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "open", "(", "String", "path", ")", "throws", "IOException", "{", "final", "File", "file", "=", "new", "File", "(", "path", ")", ";", "if", "(", "!", "file", ".", "exists", "(", ")", ")", "{", "throw", "new", "FileNotFoundException", "(", "\"", "<STR_LIT>", "\"", "+", "file", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "new", "FileInputStream", "(", "file", ")", ";", "}", "</s>"]
["<s>", "Builder", "(", "String", "summary", ")", "{", "this", ".", "summary", "=", "summary", ";", "}", "</s>"]
["<s>", "public", "String", "getSummary", "(", ")", "{", "return", "summary", ".", "trim", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getDetail", "(", ")", "{", "return", "detail", ".", "trim", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "hasDetail", "(", ")", "{", "return", "detail", "!", "=", "null", "&", "&", "!", "detail", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "List", "<", "JsonMappingException", ".", "Reference", ">", "getFieldPath", "(", ")", "{", "return", "fieldPath", ";", "}", "</s>"]
["<s>", "public", "boolean", "hasFieldPath", "(", ")", "{", "return", "fieldPath", "!", "=", "null", "&", "&", "!", "fieldPath", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getLine", "(", ")", "{", "return", "line", ";", "}", "</s>"]
["<s>", "public", "int", "getColumn", "(", ")", "{", "return", "column", ";", "}", "</s>"]
["<s>", "public", "boolean", "hasLocation", "(", ")", "{", "return", "line", ">", "-", "1", "&", "&", "column", ">", "-", "1", ";", "}", "</s>"]
["<s>", "public", "List", "<", "String", ">", "getSuggestions", "(", ")", "{", "if", "(", "suggestionsSorted", "|", "|", "!", "hasSuggestionBase", "(", ")", ")", "{", "return", "suggestions", ";", "}", "suggestions", ".", "sort", "(", "new", "LevenshteinComparator", "(", "requireNonNull", "(", "getSuggestionBase", "(", ")", ")", ")", ")", ";", "suggestionsSorted", "=", "true", ";", "return", "suggestions", ";", "}", "</s>"]
["<s>", "public", "boolean", "hasSuggestions", "(", ")", "{", "return", "suggestions", "!", "=", "null", "&", "&", "!", "suggestions", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Nullable", "public", "String", "getSuggestionBase", "(", ")", "{", "return", "suggestionBase", ";", "}", "</s>"]
["<s>", "public", "boolean", "hasSuggestionBase", "(", ")", "{", "return", "suggestionBase", "!", "=", "null", "&", "&", "!", "suggestionBase", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Nullable", "public", "Exception", "getCause", "(", ")", "{", "return", "cause", ";", "}", "</s>"]
["<s>", "public", "boolean", "hasCause", "(", ")", "{", "return", "cause", "!", "=", "null", ";", "}", "</s>"]
["<s>", "Builder", "setCause", "(", "Exception", "cause", ")", "{", "this", ".", "cause", "=", "cause", ";", "return", "this", ";", "}", "</s>"]
["<s>", "Builder", "setDetail", "(", "@", "Nullable", "String", "detail", ")", "{", "this", ".", "detail", "=", "Strings", ".", "nullToEmpty", "(", "detail", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "Builder", "setFieldPath", "(", "List", "<", "JsonMappingException", ".", "Reference", ">", "fieldPath", ")", "{", "this", ".", "fieldPath", "=", "fieldPath", ";", "return", "this", ";", "}", "</s>"]
["<s>", "Builder", "setLocation", "(", "JsonLocation", "location", ")", "{", "return", "location", "=", "=", "null", "?", "this", ":", "setLocation", "(", "location", ".", "getLineNr", "(", ")", ",", "location", ".", "getColumnNr", "(", ")", ")", ";", "}", "</s>"]
["<s>", "Builder", "setLocation", "(", "int", "line", ",", "int", "column", ")", "{", "this", ".", "line", "=", "line", ";", "this", ".", "column", "=", "column", ";", "return", "this", ";", "}", "</s>"]
["<s>", "Builder", "addSuggestion", "(", "String", "suggestion", ")", "{", "this", ".", "suggestionsSorted", "=", "false", ";", "this", ".", "suggestions", ".", "add", "(", "suggestion", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "Builder", "addSuggestions", "(", "Collection", "<", "String", ">", "suggestions", ")", "{", "this", ".", "suggestionsSorted", "=", "false", ";", "this", ".", "suggestions", ".", "addAll", "(", "suggestions", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "Builder", "setSuggestionBase", "(", "String", "base", ")", "{", "this", ".", "suggestionBase", "=", "base", ";", "this", ".", "suggestionsSorted", "=", "false", ";", "return", "this", ";", "}", "</s>"]
["<s>", "ConfigurationParsingException", "build", "(", "String", "path", ")", "{", "final", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", "getSummary", "(", ")", ")", ";", "if", "(", "hasFieldPath", "(", ")", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "buildPath", "(", "getFieldPath", "(", ")", ")", ")", ";", "}", "else", "if", "(", "hasLocation", "(", ")", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "getLine", "(", ")", "+", "1", ")", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "getColumn", "(", ")", "+", "1", ")", ";", "}", "if", "(", "hasDetail", "(", ")", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "getDetail", "(", ")", ")", ";", "}", "if", "(", "hasSuggestions", "(", ")", ")", "{", "final", "List", "<", "String", ">", "suggestions", "=", "getSuggestions", "(", ")", ";", "sb", ".", "append", "(", "NEWLINE", ")", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "NEWLINE", ")", ";", "final", "Iterator", "<", "String", ">", "it", "=", "suggestions", ".", "iterator", "(", ")", ";", "int", "i", "=", "0", ";", "while", "(", "it", ".", "hasNext", "(", ")", "&", "&", "i", "<", "MAX_SUGGESTIONS", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "it", ".", "next", "(", ")", ")", ";", "i", "+", "+", ";", "if", "(", "it", ".", "hasNext", "(", ")", ")", "{", "sb", ".", "append", "(", "NEWLINE", ")", ";", "}", "}", "final", "int", "total", "=", "suggestions", ".", "size", "(", ")", ";", "if", "(", "i", "<", "total", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "total", "-", "i", ")", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "return", "hasCause", "(", ")", "?", "new", "ConfigurationParsingException", "(", "path", ",", "sb", ".", "toString", "(", ")", ",", "requireNonNull", "(", "getCause", "(", ")", ")", ")", ":", "new", "ConfigurationParsingException", "(", "path", ",", "sb", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "String", "buildPath", "(", "Iterable", "<", "JsonMappingException", ".", "Reference", ">", "path", ")", "{", "final", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "if", "(", "path", "!", "=", "null", ")", "{", "final", "Iterator", "<", "JsonMappingException", ".", "Reference", ">", "it", "=", "path", ".", "iterator", "(", ")", ";", "while", "(", "it", ".", "hasNext", "(", ")", ")", "{", "final", "JsonMappingException", ".", "Reference", "reference", "=", "it", ".", "next", "(", ")", ";", "final", "String", "name", "=", "reference", ".", "getFieldName", "(", ")", ";", "if", "(", "name", "=", "=", "null", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:[>", ")", ".", "append", "(", "reference", ".", "getIndex", "(", ")", ")", ".", "append", "(", "<CHAR_LIT:]>", ")", ";", "}", "else", "{", "sb", ".", "append", "(", "name", ")", ";", "}", "if", "(", "it", ".", "hasNext", "(", ")", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:.>", ")", ";", "}", "}", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "LevenshteinComparator", "(", "String", "base", ")", "{", "this", ".", "base", "=", "base", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "compare", "(", "String", "a", ",", "String", "b", ")", "{", "if", "(", "a", ".", "equals", "(", "b", ")", ")", "{", "return", "0", ";", "}", "else", "if", "(", "a", ".", "equals", "(", "base", ")", ")", "{", "return", "-", "1", ";", "}", "else", "if", "(", "b", ".", "equals", "(", "base", ")", ")", "{", "return", "1", ";", "}", "return", "Integer", ".", "compare", "(", "LEVENSHTEIN_DISTANCE", ".", "apply", "(", "a", ",", "base", ")", ",", "LEVENSHTEIN_DISTANCE", ".", "apply", "(", "b", ",", "base", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "writeObject", "(", "ObjectOutputStream", "stream", ")", "throws", "IOException", "{", "stream", ".", "defaultWriteObject", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "readObject", "(", "ObjectInputStream", "stream", ")", "throws", "IOException", ",", "ClassNotFoundException", "{", "stream", ".", "defaultReadObject", "(", ")", ";", "}", "</s>"]
["<s>", "static", "Builder", "builder", "(", "String", "brief", ")", "{", "return", "new", "Builder", "(", "brief", ")", ";", "}", "</s>"]
["<s>", "private", "ConfigurationParsingException", "(", "String", "path", ",", "String", "msg", ")", "{", "super", "(", "path", ",", "ImmutableSet", ".", "of", "(", "msg", ")", ")", ";", "}", "</s>"]
["<s>", "private", "ConfigurationParsingException", "(", "String", "path", ",", "String", "msg", ",", "Throwable", "cause", ")", "{", "super", "(", "path", ",", "ImmutableSet", ".", "of", "(", "msg", ")", ",", "cause", ")", ";", "}", "</s>"]
["<s>", "ConfigurationFactory", "<", "T", ">", "create", "(", "Class", "<", "T", ">", "klass", ",", "Validator", "validator", ",", "ObjectMapper", "objectMapper", ",", "String", "propertyPrefix", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "open", "(", "String", "path", ")", "throws", "IOException", "{", "InputStream", "result", "=", "getResourceAsStream", "(", "path", ")", ";", "return", "result", "=", "=", "null", "&", "&", "path", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", "?", "getResourceAsStream", "(", "path", ".", "substring", "(", "1", ")", ")", ":", "result", ";", "}", "</s>"]
["<s>", "private", "InputStream", "getResourceAsStream", "(", "String", "path", ")", "{", "return", "getClass", "(", ")", ".", "getClassLoader", "(", ")", ".", "getResourceAsStream", "(", "path", ")", ";", "}", "</s>"]
["<s>", "public", "EnvironmentVariableLookup", "(", ")", "{", "this", "(", "true", ")", ";", "}", "</s>"]
["<s>", "public", "EnvironmentVariableLookup", "(", "boolean", "strict", ")", "{", "this", ".", "strict", "=", "strict", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "lookup", "(", "String", "key", ")", "{", "final", "String", "value", "=", "System", ".", "getenv", "(", "key", ")", ";", "if", "(", "value", "=", "=", "null", "&", "&", "strict", ")", "{", "throw", "new", "UndefinedEnvironmentVariableException", "(", "\"", "<STR_LIT>", "\"", "+", "key", "+", "\"", "<STR_LIT>", "\"", "+", "key", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ConfigurationFactory", "<", "T", ">", "create", "(", "Class", "<", "T", ">", "klass", ",", "Validator", "validator", ",", "ObjectMapper", "objectMapper", ",", "String", "propertyPrefix", ")", "{", "return", "new", "YamlConfigurationFactory", "<", ">", "(", "klass", ",", "validator", ",", "configureObjectMapper", "(", "objectMapper", ".", "copy", "(", ")", ")", ",", "propertyPrefix", ")", ";", "}", "</s>"]
["<s>", "protected", "ObjectMapper", "configureObjectMapper", "(", "ObjectMapper", "objectMapper", ")", "{", "return", "objectMapper", ".", "enable", "(", "DeserializationFeature", ".", "FAIL_ON_UNKNOWN_PROPERTIES", ")", ";", "}", "</s>"]
["<s>", "public", "BaseConfigurationFactory", "(", "JsonFactory", "parserFactory", ",", "String", "formatName", ",", "Class", "<", "T", ">", "klass", ",", "@", "Nullable", "Validator", "validator", ",", "ObjectMapper", "objectMapper", ",", "String", "propertyPrefix", ")", "{", "this", ".", "klass", "=", "klass", ";", "this", ".", "formatName", "=", "formatName", ";", "this", ".", "propertyPrefix", "=", "propertyPrefix", ".", "endsWith", "(", "\"", "<STR_LIT:.>", "\"", ")", "?", "propertyPrefix", ":", "propertyPrefix", "+", "<CHAR_LIT:.>", ";", "this", ".", "mapper", "=", "objectMapper", ";", "this", ".", "parserFactory", "=", "parserFactory", ";", "this", ".", "validator", "=", "validator", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "T", "build", "(", "ConfigurationSourceProvider", "provider", ",", "String", "path", ")", "throws", "IOException", ",", "ConfigurationException", "{", "try", "(", "InputStream", "input", "=", "provider", ".", "open", "(", "requireNonNull", "(", "path", ")", ")", ")", "{", "final", "JsonNode", "node", "=", "mapper", ".", "readTree", "(", "createParser", "(", "input", ")", ")", ";", "if", "(", "node", "=", "=", "null", ")", "{", "throw", "ConfigurationParsingException", ".", "builder", "(", "\"", "<STR_LIT>", "\"", "+", "path", "+", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", "path", ")", ";", "}", "return", "build", "(", "node", ",", "path", ")", ";", "}", "catch", "(", "JsonParseException", "e", ")", "{", "throw", "ConfigurationParsingException", ".", "builder", "(", "\"", "<STR_LIT>", "\"", "+", "formatName", ")", ".", "setCause", "(", "e", ")", ".", "setLocation", "(", "e", ".", "getLocation", "(", ")", ")", ".", "setDetail", "(", "e", ".", "getMessage", "(", ")", ")", ".", "build", "(", "path", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "JsonParser", "createParser", "(", "InputStream", "input", ")", "throws", "IOException", "{", "return", "parserFactory", ".", "createParser", "(", "input", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "T", "build", "(", ")", "throws", "IOException", ",", "ConfigurationException", "{", "try", "{", "final", "JsonNode", "node", "=", "mapper", ".", "valueToTree", "(", "klass", ".", "newInstance", "(", ")", ")", ";", "return", "build", "(", "node", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "InstantiationException", "|", "IllegalAccessException", "|", "IllegalArgumentException", "|", "SecurityException", "e", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "klass", ".", "getCanonicalName", "(", ")", "+", "\"", "'", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "T", "build", "(", "JsonNode", "node", ",", "String", "path", ")", "throws", "IOException", ",", "ConfigurationException", "{", "for", "(", "Map", ".", "Entry", "<", "Object", ",", "Object", ">", "pref", ":", "System", ".", "getProperties", "(", ")", ".", "entrySet", "(", ")", ")", "{", "final", "String", "prefName", "=", "(", "String", ")", "pref", ".", "getKey", "(", ")", ";", "if", "(", "prefName", ".", "startsWith", "(", "propertyPrefix", ")", ")", "{", "final", "String", "configName", "=", "prefName", ".", "substring", "(", "propertyPrefix", ".", "length", "(", ")", ")", ";", "addOverride", "(", "node", ",", "configName", ",", "System", ".", "getProperty", "(", "prefName", ")", ")", ";", "}", "}", "try", "{", "final", "T", "config", "=", "mapper", ".", "readValue", "(", "new", "TreeTraversingParser", "(", "node", ")", ",", "klass", ")", ";", "validate", "(", "path", ",", "config", ")", ";", "return", "config", ";", "}", "catch", "(", "UnrecognizedPropertyException", "e", ")", "{", "final", "List", "<", "String", ">", "properties", "=", "e", ".", "getKnownPropertyIds", "(", ")", ".", "stream", "(", ")", ".", "map", "(", "Object", ":", ":", "toString", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "throw", "ConfigurationParsingException", ".", "builder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setFieldPath", "(", "e", ".", "getPath", "(", ")", ")", ".", "setLocation", "(", "e", ".", "getLocation", "(", ")", ")", ".", "addSuggestions", "(", "properties", ")", ".", "setSuggestionBase", "(", "e", ".", "getPropertyName", "(", ")", ")", ".", "setCause", "(", "e", ")", ".", "build", "(", "path", ")", ";", "}", "catch", "(", "InvalidFormatException", "e", ")", "{", "final", "String", "sourceType", "=", "e", ".", "getValue", "(", ")", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ";", "final", "String", "targetType", "=", "e", ".", "getTargetType", "(", ")", ".", "getSimpleName", "(", ")", ";", "throw", "ConfigurationParsingException", ".", "builder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setDetail", "(", "\"", "<STR_LIT>", "\"", "+", "sourceType", "+", "\"", "<STR_LIT>", "\"", "+", "targetType", ")", ".", "setLocation", "(", "e", ".", "getLocation", "(", ")", ")", ".", "setFieldPath", "(", "e", ".", "getPath", "(", ")", ")", ".", "setCause", "(", "e", ")", ".", "build", "(", "path", ")", ";", "}", "catch", "(", "JsonMappingException", "e", ")", "{", "throw", "ConfigurationParsingException", ".", "builder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setDetail", "(", "e", ".", "getMessage", "(", ")", ")", ".", "setFieldPath", "(", "e", ".", "getPath", "(", ")", ")", ".", "setLocation", "(", "e", ".", "getLocation", "(", ")", ")", ".", "setCause", "(", "e", ")", ".", "build", "(", "path", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "void", "addOverride", "(", "JsonNode", "root", ",", "String", "name", ",", "String", "value", ")", "{", "JsonNode", "node", "=", "root", ";", "final", "List", "<", "String", ">", "parts", "=", "ESCAPED_DOT_SPLITTER", ".", "splitToList", "(", "name", ")", ".", "stream", "(", ")", ".", "map", "(", "key", "-", ">", "ESCAPED_DOT_PATTERN", ".", "matcher", "(", "key", ")", ".", "replaceAll", "(", "\"", "<STR_LIT:.>", "\"", ")", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "parts", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "final", "String", "key", "=", "parts", ".", "get", "(", "i", ")", ";", "if", "(", "!", "(", "node", "instanceof", "ObjectNode", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "name", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "final", "ObjectNode", "obj", "=", "(", "ObjectNode", ")", "node", ";", "final", "String", "remainingPath", "=", "Joiner", ".", "on", "(", "<CHAR_LIT:.>", ")", ".", "join", "(", "parts", ".", "subList", "(", "i", ",", "parts", ".", "size", "(", ")", ")", ")", ";", "if", "(", "obj", ".", "has", "(", "remainingPath", ")", "&", "&", "!", "remainingPath", ".", "equals", "(", "key", ")", ")", "{", "if", "(", "obj", ".", "get", "(", "remainingPath", ")", ".", "isValueNode", "(", ")", ")", "{", "obj", ".", "put", "(", "remainingPath", ",", "value", ")", ";", "return", ";", "}", "}", "JsonNode", "child", ";", "final", "boolean", "moreParts", "=", "i", "<", "parts", ".", "size", "(", ")", "-", "1", ";", "if", "(", "key", ".", "matches", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:[>", "<STR_LIT:\\\\>", "<STR_LIT:+>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", "{", "final", "int", "s", "=", "key", ".", "indexOf", "(", "<CHAR_LIT:[>", ")", ";", "final", "int", "index", "=", "Integer", ".", "parseInt", "(", "key", ".", "substring", "(", "s", "+", "1", ",", "key", ".", "length", "(", ")", "-", "1", ")", ")", ";", "child", "=", "obj", ".", "get", "(", "key", ".", "substring", "(", "0", ",", "s", ")", ")", ";", "if", "(", "child", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "name", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "!", "child", ".", "isArray", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "name", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "index", ">", "=", "child", ".", "size", "(", ")", ")", "{", "throw", "new", "ArrayIndexOutOfBoundsException", "(", "\"", "<STR_LIT>", "\"", "+", "name", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "moreParts", ")", "{", "child", "=", "child", ".", "get", "(", "index", ")", ";", "node", "=", "child", ";", "}", "else", "{", "final", "ArrayNode", "array", "=", "(", "ArrayNode", ")", "child", ";", "array", ".", "set", "(", "index", ",", "TextNode", ".", "valueOf", "(", "value", ")", ")", ";", "return", ";", "}", "}", "else", "if", "(", "moreParts", ")", "{", "child", "=", "obj", ".", "get", "(", "key", ")", ";", "if", "(", "child", "=", "=", "null", ")", "{", "child", "=", "obj", ".", "objectNode", "(", ")", ";", "obj", ".", "set", "(", "key", ",", "child", ")", ";", "}", "if", "(", "child", ".", "isArray", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "name", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "node", "=", "child", ";", "}", "if", "(", "!", "moreParts", ")", "{", "if", "(", "node", ".", "get", "(", "key", ")", "!", "=", "null", "&", "&", "node", ".", "get", "(", "key", ")", ".", "isArray", "(", ")", ")", "{", "final", "ArrayNode", "arrayNode", "=", "(", "ArrayNode", ")", "obj", ".", "get", "(", "key", ")", ";", "arrayNode", ".", "removeAll", "(", ")", ";", "for", "(", "String", "val", ":", "ESCAPED_COMMA_SPLITTER", ".", "split", "(", "value", ")", ")", "{", "arrayNode", ".", "add", "(", "ESCAPED_COMMA_PATTERN", ".", "matcher", "(", "val", ")", ".", "replaceAll", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ")", ";", "}", "}", "else", "{", "obj", ".", "put", "(", "key", ",", "value", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "private", "void", "validate", "(", "String", "path", ",", "T", "config", ")", "throws", "ConfigurationValidationException", "{", "if", "(", "validator", "!", "=", "null", ")", "{", "final", "Set", "<", "ConstraintViolation", "<", "T", ">", ">", "violations", "=", "validator", ".", "validate", "(", "config", ")", ";", "if", "(", "!", "violations", ".", "isEmpty", "(", ")", ")", "{", "throw", "new", "ConfigurationValidationException", "(", "path", ",", "violations", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "open", "(", "String", "path", ")", "throws", "IOException", "{", "return", "new", "URL", "(", "path", ")", ".", "openStream", "(", ")", ";", "}", "</s>"]
["<s>", "public", "EnvironmentVariableSubstitutor", "(", ")", "{", "this", "(", "true", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "EnvironmentVariableSubstitutor", "(", "boolean", "strict", ")", "{", "this", "(", "strict", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "EnvironmentVariableSubstitutor", "(", "boolean", "strict", ",", "boolean", "substitutionInVariables", ")", "{", "super", "(", "new", "EnvironmentVariableLookup", "(", "strict", ")", ")", ";", "this", ".", "setEnableSubstitutionInVariables", "(", "substitutionInVariables", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "ConfigurationValidationException", "(", "String", "path", ",", "Set", "<", "ConstraintViolation", "<", "T", ">", ">", "errors", ")", "{", "super", "(", "path", ",", "ConstraintViolations", ".", "format", "(", "errors", ")", ")", ";", "this", ".", "constraintViolations", "=", "ConstraintViolations", ".", "copyOf", "(", "errors", ")", ";", "}", "</s>"]
["<s>", "public", "ImmutableSet", "<", "ConstraintViolation", "<", "?", ">", ">", "getConstraintViolations", "(", ")", "{", "return", "constraintViolations", ";", "}", "</s>"]
["<s>", "InputStream", "open", "(", "String", "path", ")", "throws", "IOException", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "passesThroughNonHttpRequests", "(", ")", "throws", "Exception", "{", "final", "ServletRequest", "req", "=", "mock", "(", "ServletRequest", ".", "class", ")", ";", "final", "ServletResponse", "res", "=", "mock", "(", "ServletResponse", ".", "class", ")", ";", "filter", ".", "doFilter", "(", "req", ",", "res", ",", "chain", ")", ";", "verify", "(", "chain", ")", ".", "doFilter", "(", "req", ",", "res", ")", ";", "verifyZeroInteractions", "(", "res", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsACacheHeaderOnTheResponse", "(", ")", "throws", "Exception", "{", "filter", ".", "doFilter", "(", "request", ",", "response", ",", "chain", ")", ";", "final", "InOrder", "inOrder", "=", "inOrder", "(", "response", ",", "chain", ")", ";", "inOrder", ".", "verify", "(", "response", ")", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "inOrder", ".", "verify", "(", "chain", ")", ".", "doFilter", "(", "request", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "request", ".", "getRequestURI", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "fullRequest", ".", "getRequestURI", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "fullRequest", ".", "getQueryString", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "formatsBasicURIs", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Servlets", ".", "getFullUrl", "(", "request", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "formatsFullURIs", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Servlets", ".", "getFullUrl", "(", "fullRequest", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "slowRequestFilter", ".", "init", "(", "filterConfig", ")", ";", "slowRequestFilter", ".", "setLogger", "(", "logger", ")", ";", "slowRequestFilter", ".", "setCurrentTimeProvider", "(", "(", ")", "-", ">", "<NUM_LIT>", ")", ";", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "when", "(", "request", ".", "getRequestURI", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "slowRequestFilter", ".", "destroy", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "logsSlowRequests", "(", ")", "throws", "Exception", "{", "doAnswer", "(", "invocationOnMock", "-", ">", "{", "slowRequestFilter", ".", "setCurrentTimeProvider", "(", "(", ")", "-", ">", "<NUM_LIT>", ")", ";", "return", "null", ";", "}", ")", ".", "when", "(", "chain", ")", ".", "doFilter", "(", "request", ",", "response", ")", ";", "slowRequestFilter", ".", "doFilter", "(", "request", ",", "response", ",", "chain", ")", ";", "verify", "(", "logger", ")", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:GET>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotLogFastRequests", "(", ")", "throws", "Exception", "{", "doAnswer", "(", "invocationOnMock", "-", ">", "{", "slowRequestFilter", ".", "setCurrentTimeProvider", "(", "(", ")", "-", ">", "<NUM_LIT>", ")", ";", "return", "null", ";", "}", ")", ".", "when", "(", "chain", ")", ".", "doFilter", "(", "request", ",", "response", ")", ";", "slowRequestFilter", ".", "doFilter", "(", "request", ",", "response", ",", "chain", ")", ";", "verify", "(", "logger", ",", "never", "(", ")", ")", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:GET>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "threadNameFilter", ".", "init", "(", "filterConfig", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "threadNameFilter", ".", "destroy", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsThreadNameInChain", "(", ")", "throws", "Exception", "{", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "when", "(", "request", ".", "getRequestURI", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "doAnswer", "(", "invocationOnMock", "-", ">", "{", "assertThat", "(", "Thread", ".", "currentThread", "(", ")", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "null", ";", "}", ")", ".", "when", "(", "chain", ")", ".", "doFilter", "(", "request", ",", "response", ")", ";", "Thread", ".", "currentThread", "(", ")", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "threadNameFilter", ".", "doFilter", "(", "request", ",", "response", ",", "chain", ")", ";", "verify", "(", "chain", ")", ".", "doFilter", "(", "request", ",", "response", ")", ";", "assertThat", "(", "Thread", ".", "currentThread", "(", ")", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "String", "body", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "UnsupportedOperationException", ".", "class", ")", "public", "void", "throwsExceptionWhenCallingExecuteWithoutThePostBody", "(", ")", "throws", "Exception", "{", "task", ".", "execute", "(", "new", "ImmutableMultimap", ".", "Builder", "<", "String", ",", "String", ">", "(", ")", ".", "build", "(", ")", ",", "new", "PrintWriter", "(", "System", ".", "out", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "gc", ".", "getName", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "printJSON", ".", "getName", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "servlet", ".", "add", "(", "gc", ")", ";", "servlet", ".", "add", "(", "printJSON", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA404WhenNotFound", "(", ")", "throws", "Exception", "{", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "when", "(", "request", ".", "getPathInfo", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "servlet", ".", "service", "(", "request", ",", "response", ")", ";", "verify", "(", "response", ")", ".", "sendError", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "runsATaskWhenFound", "(", ")", "throws", "Exception", "{", "final", "PrintWriter", "output", "=", "mock", "(", "PrintWriter", ".", "class", ")", ";", "final", "ServletInputStream", "bodyStream", "=", "new", "TestServletInputStream", "(", "new", "ByteArrayInputStream", "(", "\"", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ")", ";", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "when", "(", "request", ".", "getPathInfo", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "request", ".", "getParameterNames", "(", ")", ")", ".", "thenReturn", "(", "Collections", ".", "enumeration", "(", "ImmutableList", ".", "of", "(", ")", ")", ")", ";", "when", "(", "response", ".", "getWriter", "(", ")", ")", ".", "thenReturn", "(", "output", ")", ";", "when", "(", "request", ".", "getInputStream", "(", ")", ")", ".", "thenReturn", "(", "bodyStream", ")", ";", "servlet", ".", "service", "(", "request", ",", "response", ")", ";", "verify", "(", "gc", ")", ".", "execute", "(", "ImmutableMultimap", ".", "of", "(", ")", ",", "output", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "passesQueryStringParamsAlong", "(", ")", "throws", "Exception", "{", "final", "PrintWriter", "output", "=", "mock", "(", "PrintWriter", ".", "class", ")", ";", "final", "ServletInputStream", "bodyStream", "=", "new", "TestServletInputStream", "(", "new", "ByteArrayInputStream", "(", "\"", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ")", ";", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "when", "(", "request", ".", "getPathInfo", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "request", ".", "getParameterNames", "(", ")", ")", ".", "thenReturn", "(", "Collections", ".", "enumeration", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "when", "(", "request", ".", "getParameterValues", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "new", "String", "[", "]", "{", "\"", "<STR_LIT:1>", "\"", "}", ")", ";", "when", "(", "request", ".", "getInputStream", "(", ")", ")", ".", "thenReturn", "(", "bodyStream", ")", ";", "when", "(", "response", ".", "getWriter", "(", ")", ")", ".", "thenReturn", "(", "output", ")", ";", "servlet", ".", "service", "(", "request", ",", "response", ")", ";", "verify", "(", "gc", ")", ".", "execute", "(", "ImmutableMultimap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ",", "output", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "passesPostBodyAlongToPostBodyTasks", "(", ")", "throws", "Exception", "{", "String", "body", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "final", "PrintWriter", "output", "=", "mock", "(", "PrintWriter", ".", "class", ")", ";", "final", "ServletInputStream", "bodyStream", "=", "new", "TestServletInputStream", "(", "new", "ByteArrayInputStream", "(", "body", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ")", ";", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "when", "(", "request", ".", "getPathInfo", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "request", ".", "getParameterNames", "(", ")", ")", ".", "thenReturn", "(", "Collections", ".", "enumeration", "(", "ImmutableList", ".", "of", "(", ")", ")", ")", ";", "when", "(", "request", ".", "getInputStream", "(", ")", ")", ".", "thenReturn", "(", "bodyStream", ")", ";", "when", "(", "response", ".", "getWriter", "(", ")", ")", ".", "thenReturn", "(", "output", ")", ";", "servlet", ".", "service", "(", "request", ",", "response", ")", ";", "verify", "(", "printJSON", ")", ".", "execute", "(", "ImmutableMultimap", ".", "of", "(", ")", ",", "body", ",", "output", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "returnsA500OnExceptions", "(", ")", "throws", "Exception", "{", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "when", "(", "request", ".", "getPathInfo", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "request", ".", "getParameterNames", "(", ")", ")", ".", "thenReturn", "(", "Collections", ".", "enumeration", "(", "ImmutableList", ".", "of", "(", ")", ")", ")", ";", "final", "PrintWriter", "output", "=", "mock", "(", "PrintWriter", ".", "class", ")", ";", "when", "(", "response", ".", "getWriter", "(", ")", ")", ".", "thenReturn", "(", "output", ")", ";", "final", "RuntimeException", "ex", "=", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "doThrow", "(", "ex", ")", ".", "when", "(", "gc", ")", ".", "execute", "(", "any", "(", "ImmutableMultimap", ".", "class", ")", ",", "any", "(", "PrintWriter", ".", "class", ")", ")", ";", "servlet", ".", "service", "(", "request", ",", "response", ")", ";", "verify", "(", "response", ")", ".", "setStatus", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "verifyTaskExecuteMethod", "(", ")", "{", "try", "{", "Task", ".", "class", ".", "getMethod", "(", "\"", "<STR_LIT>", "\"", ",", "ImmutableMultimap", ".", "class", ",", "PrintWriter", ".", "class", ")", ";", "}", "catch", "(", "NoSuchMethodException", "e", ")", "{", "Assert", ".", "fail", "(", "\"", "<STR_LIT>", "\"", "+", "Task", ".", "class", ".", "getName", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "verifyPostBodyTaskExecuteMethod", "(", ")", "{", "try", "{", "PostBodyTask", ".", "class", ".", "getMethod", "(", "\"", "<STR_LIT>", "\"", ",", "ImmutableMultimap", ".", "class", ",", "String", ".", "class", ",", "PrintWriter", ".", "class", ")", ";", "}", "catch", "(", "NoSuchMethodException", "e", ")", "{", "Assert", ".", "fail", "(", "\"", "<STR_LIT>", "\"", "+", "PostBodyTask", ".", "class", ".", "getName", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnAllTaskNamesLexicallyOnGet", "(", ")", "throws", "Exception", "{", "try", "(", "StringWriter", "sw", "=", "new", "StringWriter", "(", ")", ";", "PrintWriter", "pw", "=", "new", "PrintWriter", "(", "sw", ")", ")", "{", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "when", "(", "request", ".", "getPathInfo", "(", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "when", "(", "response", ".", "getWriter", "(", ")", ")", ".", "thenReturn", "(", "pw", ")", ";", "servlet", ".", "service", "(", "request", ",", "response", ")", ";", "final", "String", "newLine", "=", "System", ".", "lineSeparator", "(", ")", ";", "assertThat", "(", "sw", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "gc", ".", "getName", "(", ")", "+", "newLine", "+", "printJSON", ".", "getName", "(", ")", "+", "newLine", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA404WhenGettingUnknownTask", "(", ")", "throws", "Exception", "{", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "when", "(", "request", ".", "getPathInfo", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "servlet", ".", "service", "(", "request", ",", "response", ")", ";", "verify", "(", "response", ")", ".", "sendError", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA405WhenGettingTaskByName", "(", ")", "throws", "Exception", "{", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "when", "(", "request", ".", "getPathInfo", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "servlet", ".", "service", "(", "request", ",", "response", ")", ";", "verify", "(", "response", ")", ".", "sendError", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRunsTimedTask", "(", ")", "throws", "Exception", "{", "final", "Task", "timedTask", "=", "new", "Task", "(", "\"", "<STR_LIT>", "\"", ")", "{", "@", "Override", "@", "Timed", "(", "name", "=", "\"", "<STR_LIT>", "\"", ")", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "output", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", ";", "servlet", ".", "add", "(", "timedTask", ")", ";", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "when", "(", "request", ".", "getPathInfo", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "response", ".", "getWriter", "(", ")", ")", ".", "thenReturn", "(", "mock", "(", "PrintWriter", ".", "class", ")", ")", ";", "servlet", ".", "service", "(", "request", ",", "response", ")", ";", "assertThat", "(", "metricRegistry", ".", "getTimers", "(", ")", ")", ".", "containsKey", "(", "name", "(", "timedTask", ".", "getClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Timed", "(", "name", "=", "\"", "<STR_LIT>", "\"", ")", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "output", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRunsMeteredTask", "(", ")", "throws", "Exception", "{", "final", "Task", "meteredTask", "=", "new", "Task", "(", "\"", "<STR_LIT>", "\"", ")", "{", "@", "Override", "@", "Metered", "(", "name", "=", "\"", "<STR_LIT>", "\"", ")", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "output", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", ";", "servlet", ".", "add", "(", "meteredTask", ")", ";", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "when", "(", "request", ".", "getPathInfo", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "response", ".", "getWriter", "(", ")", ")", ".", "thenReturn", "(", "mock", "(", "PrintWriter", ".", "class", ")", ")", ";", "servlet", ".", "service", "(", "request", ",", "response", ")", ";", "assertThat", "(", "metricRegistry", ".", "getMeters", "(", ")", ")", ".", "containsKey", "(", "name", "(", "meteredTask", ".", "getClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Metered", "(", "name", "=", "\"", "<STR_LIT>", "\"", ")", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "output", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRunsExceptionMeteredTask", "(", ")", "throws", "Exception", "{", "final", "Task", "exceptionMeteredTask", "=", "new", "Task", "(", "\"", "<STR_LIT>", "\"", ")", "{", "@", "Override", "@", "ExceptionMetered", "(", "name", "=", "\"", "<STR_LIT>", "\"", ")", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", ";", "servlet", ".", "add", "(", "exceptionMeteredTask", ")", ";", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "when", "(", "request", ".", "getPathInfo", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "response", ".", "getWriter", "(", ")", ")", ".", "thenReturn", "(", "mock", "(", "PrintWriter", ".", "class", ")", ")", ";", "servlet", ".", "service", "(", "request", ",", "response", ")", ";", "assertThat", "(", "metricRegistry", ".", "getMeters", "(", ")", ")", ".", "containsKey", "(", "name", "(", "exceptionMeteredTask", ".", "getClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "ExceptionMetered", "(", "name", "=", "\"", "<STR_LIT>", "\"", ")", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "TestServletInputStream", "(", "InputStream", "delegate", ")", "{", "this", ".", "delegate", "=", "delegate", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isFinished", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isReady", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setReadListener", "(", "ReadListener", "readListener", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", ")", "throws", "IOException", "{", "return", "delegate", ".", "read", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "logger1", ".", "setLevel", "(", "DEFAULT_LEVEL", ")", ";", "logger2", ".", "setLevel", "(", "DEFAULT_LEVEL", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configuresSpecificLevelForALogger", "(", ")", "throws", "Exception", "{", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", "=", "ImmutableMultimap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "task", ".", "execute", "(", "parameters", ",", "output", ")", ";", "assertThat", "(", "logger1", ".", "getLevel", "(", ")", ")", ".", "isEqualTo", "(", "Level", ".", "DEBUG", ")", ";", "assertThat", "(", "logger2", ".", "getLevel", "(", ")", ")", ".", "isEqualTo", "(", "DEFAULT_LEVEL", ")", ";", "assertThat", "(", "stringWriter", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configuresDefaultLevelForALogger", "(", ")", "throws", "Exception", "{", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", "=", "ImmutableMultimap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "task", ".", "execute", "(", "parameters", ",", "output", ")", ";", "assertThat", "(", "logger1", ".", "getLevel", "(", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "logger2", ".", "getLevel", "(", ")", ")", ".", "isEqualTo", "(", "DEFAULT_LEVEL", ")", ";", "assertThat", "(", "stringWriter", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configuresLevelForMultipleLoggers", "(", ")", "throws", "Exception", "{", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", "=", "ImmutableMultimap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "task", ".", "execute", "(", "parameters", ",", "output", ")", ";", "assertThat", "(", "logger1", ".", "getLevel", "(", ")", ")", ".", "isEqualTo", "(", "Level", ".", "INFO", ")", ";", "assertThat", "(", "logger2", ".", "getLevel", "(", ")", ")", ".", "isEqualTo", "(", "Level", ".", "INFO", ")", ";", "assertThat", "(", "stringWriter", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "runsOnceWithNoParameters", "(", ")", "throws", "Exception", "{", "task", ".", "execute", "(", "ImmutableMultimap", ".", "of", "(", ")", ",", "output", ")", ";", "verify", "(", "runtime", ",", "times", "(", "1", ")", ")", ".", "gc", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "usesTheFirstRunsParameter", "(", ")", "throws", "Exception", "{", "task", ".", "execute", "(", "ImmutableMultimap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:3>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ")", ",", "output", ")", ";", "verify", "(", "runtime", ",", "times", "(", "<NUM_LIT:3>", ")", ")", ".", "gc", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultsToOneRunIfTheQueryParamDoesNotParse", "(", ")", "throws", "Exception", "{", "task", ".", "execute", "(", "ImmutableMultimap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:$>", "\"", ")", ",", "output", ")", ";", "verify", "(", "runtime", ",", "times", "(", "1", ")", ")", ".", "gc", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAName", "(", ")", "throws", "Exception", "{", "assertThat", "(", "task", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDirectoryReturnsTrueForPlainDirectories", "(", ")", "throws", "Exception", "{", "final", "Path", "path", "=", "Files", ".", "createTempDirectory", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "URL", "url", "=", "path", ".", "toUri", "(", ")", ".", "toURL", "(", ")", ";", "assertThat", "(", "url", ".", "getProtocol", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ResourceURL", ".", "isDirectory", "(", "url", ")", ")", ".", "isTrue", "(", ")", ";", "Files", ".", "delete", "(", "path", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDirectoryReturnsFalseForPlainFiles", "(", ")", "throws", "Exception", "{", "final", "Path", "path", "=", "Files", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "final", "URL", "url", "=", "path", ".", "toUri", "(", ")", ".", "toURL", "(", ")", ";", "assertThat", "(", "url", ".", "getProtocol", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ResourceURL", ".", "isDirectory", "(", "url", ")", ")", ".", "isFalse", "(", ")", ";", "Files", ".", "delete", "(", "path", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDirectoryReturnsTrueForDirectoriesInJars", "(", ")", "throws", "Exception", "{", "final", "URL", "url", "=", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "url", ".", "getProtocol", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ResourceURL", ".", "isDirectory", "(", "url", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDirectoryReturnsFalseForFilesInJars", "(", ")", "throws", "Exception", "{", "final", "URL", "url", "=", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "url", ".", "getProtocol", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ResourceURL", ".", "isDirectory", "(", "url", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDirectoryReturnsTrueForDirectoriesInJarsWithoutTrailingSlashes", "(", ")", "throws", "Exception", "{", "final", "URL", "url", "=", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "url", ".", "getProtocol", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ResourceURL", ".", "isDirectory", "(", "url", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDirectoryThrowsResourceNotFoundExceptionForMissingDirectories", "(", ")", "throws", "Exception", "{", "final", "URL", "url", "=", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "URL", "nurl", "=", "new", "URL", "(", "url", ".", "toExternalForm", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "assertThatThrownBy", "(", "(", ")", "-", ">", "ResourceURL", ".", "isDirectory", "(", "nurl", ")", ")", ".", "isInstanceOf", "(", "ResourceNotFoundException", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "appendTrailingSlashAddsASlash", "(", ")", "throws", "Exception", "{", "final", "URL", "url", "=", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "url", ".", "toExternalForm", "(", ")", ")", ".", "doesNotMatch", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "ResourceURL", ".", "appendTrailingSlash", "(", "url", ")", ".", "toExternalForm", "(", ")", ")", ".", "endsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "appendTrailingSlashDoesntASlashWhenOneIsAlreadyPresent", "(", ")", "throws", "Exception", "{", "final", "URL", "url", "=", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "url", ".", "toExternalForm", "(", ")", ")", ".", "endsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "assertThat", "(", "ResourceURL", ".", "appendTrailingSlash", "(", "url", ")", ".", "toExternalForm", "(", ")", ")", ".", "doesNotMatch", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "url", ")", ".", "isEqualTo", "(", "ResourceURL", ".", "appendTrailingSlash", "(", "url", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getLastModifiedReturnsTheLastModifiedTimeOfAFile", "(", ")", "throws", "Exception", "{", "final", "Path", "path", "=", "Files", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "final", "URL", "url", "=", "path", ".", "toUri", "(", ")", ".", "toURL", "(", ")", ";", "final", "long", "lastModified", "=", "ResourceURL", ".", "getLastModified", "(", "url", ")", ";", "assertThat", "(", "lastModified", ")", ".", "isGreaterThan", "(", "0", ")", ";", "assertThat", "(", "lastModified", ")", ".", "isEqualTo", "(", "path", ".", "toFile", "(", ")", ".", "lastModified", "(", ")", ")", ";", "Files", ".", "delete", "(", "path", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getLastModifiedReturnsTheLastModifiedTimeOfAJarEntry", "(", ")", "throws", "Exception", "{", "final", "URL", "url", "=", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "long", "lastModified", "=", "ResourceURL", ".", "getLastModified", "(", "url", ")", ";", "final", "JarURLConnection", "jarConnection", "=", "(", "JarURLConnection", ")", "url", ".", "openConnection", "(", ")", ";", "final", "JarEntry", "entry", "=", "jarConnection", ".", "getJarEntry", "(", ")", ";", "assertThat", "(", "lastModified", ")", ".", "isGreaterThan", "(", "0", ")", ";", "assertThat", "(", "lastModified", ")", ".", "isEqualTo", "(", "entry", ".", "getTime", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getLastModifiedReturnsZeroIfAnErrorOccurs", "(", ")", "throws", "Exception", "{", "final", "URL", "url", "=", "new", "URL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "long", "lastModified", "=", "ResourceURL", ".", "getLastModified", "(", "url", ")", ";", "assertThat", "(", "lastModified", ")", ".", "isZero", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "firstBytes", "(", ")", "{", "final", "ByteRange", "actual", "=", "ByteRange", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ",", "RESOURCE_LENGTH", ")", ";", "assertThat", "(", "actual", ".", "getStart", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "actual", ".", "getEnd", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "secondBytes", "(", ")", "{", "final", "ByteRange", "actual", "=", "ByteRange", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ",", "RESOURCE_LENGTH", ")", ";", "assertThat", "(", "actual", ".", "getStart", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "actual", ".", "getEnd", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "finalBytes", "(", ")", "{", "final", "ByteRange", "actual", "=", "ByteRange", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ",", "RESOURCE_LENGTH", ")", ";", "assertThat", "(", "actual", ".", "getStart", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "actual", ".", "getEnd", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "noEndBytes", "(", ")", "{", "final", "ByteRange", "actual", "=", "ByteRange", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ",", "RESOURCE_LENGTH", ")", ";", "assertThat", "(", "actual", ".", "getStart", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "actual", ".", "getEnd", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "startBytes", "(", ")", "{", "final", "ByteRange", "actual", "=", "ByteRange", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ",", "RESOURCE_LENGTH", ")", ";", "assertThat", "(", "actual", ".", "getStart", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "actual", ".", "getEnd", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "tooManyBytes", "(", ")", "{", "final", "ByteRange", "actual", "=", "ByteRange", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ",", "RESOURCE_LENGTH", ")", ";", "assertThat", "(", "actual", ".", "getStart", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "actual", ".", "getEnd", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "DummyAssetServlet", "(", ")", "{", "super", "(", "RESOURCE_PATH", ",", "DUMMY_SERVLET", ",", "\"", "<STR_LIT>", "\"", ",", "StandardCharsets", ".", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "public", "NoIndexAssetServlet", "(", ")", "{", "super", "(", "RESOURCE_PATH", ",", "DUMMY_SERVLET", ",", "null", ",", "StandardCharsets", ".", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "public", "RootAssetServlet", "(", ")", "{", "super", "(", "\"", "<STR_LIT:/>", "\"", ",", "ROOT_SERVLET", ",", "null", ",", "StandardCharsets", ".", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "public", "NoCharsetAssetServlet", "(", ")", "{", "super", "(", "RESOURCE_PATH", ",", "NOCHARSET_SERVLET", ",", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "@", "BeforeClass", "public", "static", "void", "startServletTester", "(", ")", "throws", "Exception", "{", "SERVLET_TESTER", ".", "addServlet", "(", "DummyAssetServlet", ".", "class", ",", "DUMMY_SERVLET", "+", "<CHAR_LIT>", ")", ";", "SERVLET_TESTER", ".", "addServlet", "(", "NoIndexAssetServlet", ".", "class", ",", "NOINDEX_SERVLET", "+", "<CHAR_LIT>", ")", ";", "SERVLET_TESTER", ".", "addServlet", "(", "NoCharsetAssetServlet", ".", "class", ",", "NOCHARSET_SERVLET", "+", "<CHAR_LIT>", ")", ";", "SERVLET_TESTER", ".", "addServlet", "(", "RootAssetServlet", ".", "class", ",", "ROOT_SERVLET", "+", "<CHAR_LIT>", ")", ";", "SERVLET_TESTER", ".", "start", "(", ")", ";", "SERVLET_TESTER", ".", "getContext", "(", ")", ".", "getMimeTypes", "(", ")", ".", "addMimeMapping", "(", "\"", "<STR_LIT:4>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "SERVLET_TESTER", ".", "getContext", "(", ")", ".", "getMimeTypes", "(", ")", ".", "addMimeMapping", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "AfterClass", "public", "static", "void", "stopServletTester", "(", ")", "throws", "Exception", "{", "SERVLET_TESTER", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "request", ".", "setMethod", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "request", ".", "setURI", "(", "DUMMY_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "request", ".", "setVersion", "(", "HttpVersion", ".", "HTTP_1_0", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "servesFilesMappedToRoot", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "ROOT_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "servesCharset", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "DUMMY_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "MimeTypes", ".", "CACHE", ".", "get", "(", "response", ".", "get", "(", "HttpHeader", ".", "CONTENT_TYPE", ")", ")", ")", ".", "isEqualTo", "(", "MimeTypes", ".", "Type", ".", "TEXT_PLAIN_UTF_8", ")", ";", "request", ".", "setURI", "(", "NOCHARSET_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeader", ".", "CONTENT_TYPE", ")", ")", ".", "isEqualTo", "(", "MimeTypes", ".", "Type", ".", "TEXT_PLAIN", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "servesFilesFromRootsWithSameName", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "DUMMY_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "servesFilesWithA200", "(", ")", "throws", "Exception", "{", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throws404IfTheAssetIsMissing", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "DUMMY_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "consistentlyAssignsETags", "(", ")", "throws", "Exception", "{", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "String", "firstEtag", "=", "response", ".", "get", "(", "HttpHeaders", ".", "ETAG", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "String", "secondEtag", "=", "response", ".", "get", "(", "HttpHeaders", ".", "ETAG", ")", ";", "assertThat", "(", "firstEtag", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ".", "isEqualTo", "(", "secondEtag", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "assignsDifferentETagsForDifferentFiles", "(", ")", "throws", "Exception", "{", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "String", "firstEtag", "=", "response", ".", "get", "(", "HttpHeaders", ".", "ETAG", ")", ";", "request", ".", "setURI", "(", "DUMMY_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "String", "secondEtag", "=", "response", ".", "get", "(", "HttpHeaders", ".", "ETAG", ")", ";", "assertThat", "(", "firstEtag", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertThat", "(", "secondEtag", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "supportsIfNoneMatchRequests", "(", ")", "throws", "Exception", "{", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "String", "correctEtag", "=", "response", ".", "get", "(", "HttpHeaders", ".", "ETAG", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "IF_NONE_MATCH", ",", "correctEtag", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "int", "statusWithMatchingEtag", "=", "response", ".", "getStatus", "(", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "IF_NONE_MATCH", ",", "correctEtag", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "int", "statusWithNonMatchingEtag", "=", "response", ".", "getStatus", "(", ")", ";", "assertThat", "(", "statusWithMatchingEtag", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "statusWithNonMatchingEtag", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "consistentlyAssignsLastModifiedTimes", "(", ")", "throws", "Exception", "{", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "long", "firstLastModifiedTime", "=", "response", ".", "getDateField", "(", "HttpHeaders", ".", "LAST_MODIFIED", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "long", "secondLastModifiedTime", "=", "response", ".", "getDateField", "(", "HttpHeaders", ".", "LAST_MODIFIED", ")", ";", "assertThat", "(", "firstLastModifiedTime", ")", ".", "isEqualTo", "(", "secondLastModifiedTime", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "supportsByteRangeForMedia", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "ROOT_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "ACCEPT_RANGES", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "request", ".", "setURI", "(", "ROOT_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "ACCEPT_RANGES", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "supportsFullByteRange", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "ROOT_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "RANGE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "ACCEPT_RANGES", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "CONTENT_RANGE", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "supportsCentralByteRange", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "ROOT_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "RANGE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "ACCEPT_RANGES", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "CONTENT_RANGE", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "CONTENT_LENGTH", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:5>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "supportsFinalByteRange", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "ROOT_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "RANGE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:E>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "ACCEPT_RANGES", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "CONTENT_RANGE", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "CONTENT_LENGTH", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "RANGE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:E>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "ACCEPT_RANGES", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "CONTENT_RANGE", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "CONTENT_LENGTH", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rejectsInvalidByteRanges", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "ROOT_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "RANGE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "RANGE", ",", "\"", "<STR_LIT:=>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "RANGE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "RANGE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "supportsMultipleByteRanges", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "ROOT_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "RANGE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "ACCEPT_RANGES", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "CONTENT_RANGE", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "CONTENT_LENGTH", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "RANGE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "ACCEPT_RANGES", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "CONTENT_RANGE", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "get", "(", "HttpHeaders", ".", "CONTENT_LENGTH", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:6>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "supportsIfRangeMatchRequests", "(", ")", "throws", "Exception", "{", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "String", "correctEtag", "=", "response", ".", "get", "(", "HttpHeaders", ".", "ETAG", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "RANGE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "IF_RANGE", ",", "correctEtag", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "int", "statusWithMatchingEtag", "=", "response", ".", "getStatus", "(", ")", ";", "request", ".", "setHeader", "(", "HttpHeaders", ".", "IF_RANGE", ",", "correctEtag", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "int", "statusWithNonMatchingEtag", "=", "response", ".", "getStatus", "(", ")", ";", "assertThat", "(", "statusWithMatchingEtag", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "statusWithNonMatchingEtag", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "supportsIfModifiedSinceRequests", "(", ")", "throws", "Exception", "{", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "long", "lastModifiedTime", "=", "response", ".", "getDateField", "(", "HttpHeaders", ".", "LAST_MODIFIED", ")", ";", "request", ".", "putDateField", "(", "HttpHeaders", ".", "IF_MODIFIED_SINCE", ",", "lastModifiedTime", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "int", "statusWithMatchingLastModifiedTime", "=", "response", ".", "getStatus", "(", ")", ";", "request", ".", "putDateField", "(", "HttpHeaders", ".", "IF_MODIFIED_SINCE", ",", "lastModifiedTime", "-", "<NUM_LIT:100>", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "int", "statusWithStaleLastModifiedTime", "=", "response", ".", "getStatus", "(", ")", ";", "request", ".", "putDateField", "(", "HttpHeaders", ".", "IF_MODIFIED_SINCE", ",", "lastModifiedTime", "+", "<NUM_LIT:100>", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "final", "int", "statusWithRecentLastModifiedTime", "=", "response", ".", "getStatus", "(", ")", ";", "assertThat", "(", "statusWithMatchingLastModifiedTime", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "statusWithStaleLastModifiedTime", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "statusWithRecentLastModifiedTime", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "guessesMimeTypes", "(", ")", "throws", "Exception", "{", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "MimeTypes", ".", "CACHE", ".", "get", "(", "response", ".", "get", "(", "HttpHeader", ".", "CONTENT_TYPE", ")", ")", ")", ".", "isEqualTo", "(", "MimeTypes", ".", "Type", ".", "TEXT_PLAIN_UTF_8", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultsToHtml", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "DUMMY_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "MimeTypes", ".", "CACHE", ".", "get", "(", "response", ".", "get", "(", "HttpHeader", ".", "CONTENT_TYPE", ")", ")", ")", ".", "isEqualTo", "(", "MimeTypes", ".", "Type", ".", "TEXT_HTML_UTF_8", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "servesIndexFilesByDefault", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "DUMMY_SERVLET", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "request", ".", "setURI", "(", "DUMMY_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "request", ".", "setURI", "(", "DUMMY_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContent", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsA404IfNoIndexFileIsDefined", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "NOINDEX_SERVLET", "+", "<CHAR_LIT:/>", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "request", ".", "setURI", "(", "NOINDEX_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "request", ".", "setURI", "(", "NOINDEX_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotAllowOverridingUrls", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "DUMMY_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotAllowOverridingPaths", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "DUMMY_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "allowsEncodedAssetNames", "(", ")", "throws", "Exception", "{", "request", ".", "setURI", "(", "DUMMY_SERVLET", "+", "\"", "<STR_LIT>", "\"", ")", ";", "response", "=", "HttpTester", ".", "parseResponse", "(", "SERVLET_TESTER", ".", "getResponses", "(", "request", ".", "generate", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SlowRequestFilter", "(", ")", "{", "this", "(", "Duration", ".", "seconds", "(", "1", ")", ")", ";", "}", "</s>"]
["<s>", "public", "SlowRequestFilter", "(", "Duration", "threshold", ")", "{", "this", ".", "threshold", "=", "threshold", ".", "toNanoseconds", "(", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "setCurrentTimeProvider", "(", "Supplier", "<", "Long", ">", "currentTimeProvider", ")", "{", "this", ".", "currentTimeProvider", "=", "currentTimeProvider", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "setLogger", "(", "Logger", "logger", ")", "{", "this", ".", "logger", "=", "logger", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "init", "(", "FilterConfig", "filterConfig", ")", "throws", "ServletException", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "destroy", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "doFilter", "(", "ServletRequest", "request", ",", "ServletResponse", "response", ",", "FilterChain", "chain", ")", "throws", "IOException", ",", "ServletException", "{", "final", "HttpServletRequest", "req", "=", "(", "HttpServletRequest", ")", "request", ";", "final", "long", "startTime", "=", "currentTimeProvider", ".", "get", "(", ")", ";", "try", "{", "chain", ".", "doFilter", "(", "request", ",", "response", ")", ";", "}", "finally", "{", "final", "long", "elapsedNS", "=", "currentTimeProvider", ".", "get", "(", ")", "-", "startTime", ";", "final", "long", "elapsedMS", "=", "NANOSECONDS", ".", "toMillis", "(", "elapsedNS", ")", ";", "if", "(", "elapsedNS", ">", "=", "threshold", ")", "{", "logger", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ",", "req", ".", "getMethod", "(", ")", ",", "getFullUrl", "(", "req", ")", ",", "elapsedMS", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "Servlets", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "String", "getFullUrl", "(", "HttpServletRequest", "request", ")", "{", "if", "(", "request", ".", "getQueryString", "(", ")", "=", "=", "null", ")", "{", "return", "request", ".", "getRequestURI", "(", ")", ";", "}", "return", "request", ".", "getRequestURI", "(", ")", "+", "\"", "<STR_LIT:?>", "\"", "+", "request", ".", "getQueryString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "doFilter", "(", "ServletRequest", "request", ",", "ServletResponse", "response", ",", "FilterChain", "chain", ")", "throws", "IOException", ",", "ServletException", "{", "if", "(", "response", "instanceof", "HttpServletResponse", ")", "{", "final", "HttpServletResponse", "resp", "=", "(", "HttpServletResponse", ")", "response", ";", "resp", ".", "setHeader", "(", "HttpHeaders", ".", "CACHE_CONTROL", ",", "CACHE_SETTINGS", ")", ";", "}", "chain", ".", "doFilter", "(", "request", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "destroy", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "init", "(", "FilterConfig", "filterConfig", ")", "throws", "ServletException", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "init", "(", "FilterConfig", "filterConfig", ")", "throws", "ServletException", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "destroy", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "doFilter", "(", "ServletRequest", "request", ",", "ServletResponse", "response", ",", "FilterChain", "chain", ")", "throws", "IOException", ",", "ServletException", "{", "final", "HttpServletRequest", "req", "=", "(", "HttpServletRequest", ")", "request", ";", "final", "Thread", "current", "=", "Thread", ".", "currentThread", "(", ")", ";", "final", "String", "oldName", "=", "current", ".", "getName", "(", ")", ";", "try", "{", "current", ".", "setName", "(", "formatName", "(", "req", ",", "oldName", ")", ")", ";", "chain", ".", "doFilter", "(", "request", ",", "response", ")", ";", "}", "finally", "{", "current", ".", "setName", "(", "oldName", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "String", "formatName", "(", "HttpServletRequest", "req", ",", "String", "oldName", ")", "{", "return", "oldName", "+", "\"", "<STR_LIT>", "\"", "+", "req", ".", "getMethod", "(", ")", "+", "<CHAR_LIT>", "+", "getFullUrl", "(", "req", ")", ";", "}", "</s>"]
["<s>", "public", "GarbageCollectionTask", "(", ")", "{", "this", "(", "Runtime", ".", "getRuntime", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "GarbageCollectionTask", "(", "Runtime", "runtime", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "runtime", "=", "runtime", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "{", "final", "int", "count", "=", "parseRuns", "(", "parameters", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "output", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "output", ".", "flush", "(", ")", ";", "runtime", ".", "gc", "(", ")", ";", "}", "output", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "int", "parseRuns", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ")", "{", "final", "ImmutableList", "<", "String", ">", "runs", "=", "parameters", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asList", "(", ")", ";", "if", "(", "runs", ".", "isEmpty", "(", ")", ")", "{", "return", "1", ";", "}", "else", "{", "try", "{", "return", "Integer", ".", "parseInt", "(", "runs", ".", "get", "(", "0", ")", ")", ";", "}", "catch", "(", "NumberFormatException", "ignored", ")", "{", "return", "1", ";", "}", "}", "}", "</s>"]
["<s>", "public", "TaskServlet", "(", "MetricRegistry", "metricRegistry", ")", "{", "this", ".", "metricRegistry", "=", "metricRegistry", ";", "this", ".", "tasks", "=", "new", "ConcurrentHashMap", "<", ">", "(", ")", ";", "this", ".", "taskExecutors", "=", "new", "ConcurrentHashMap", "<", ">", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "add", "(", "Task", "task", ")", "{", "tasks", ".", "put", "(", "<CHAR_LIT:/>", "+", "task", ".", "getName", "(", ")", ",", "task", ")", ";", "TaskExecutor", "taskExecutor", "=", "new", "TaskExecutor", "(", "task", ")", ";", "try", "{", "final", "Method", "executeMethod", "=", "task", ".", "getClass", "(", ")", ".", "getMethod", "(", "\"", "<STR_LIT>", "\"", ",", "ImmutableMultimap", ".", "class", ",", "PrintWriter", ".", "class", ")", ";", "if", "(", "executeMethod", ".", "isAnnotationPresent", "(", "Timed", ".", "class", ")", ")", "{", "final", "Timed", "annotation", "=", "executeMethod", ".", "getAnnotation", "(", "Timed", ".", "class", ")", ";", "final", "String", "name", "=", "chooseName", "(", "annotation", ".", "name", "(", ")", ",", "annotation", ".", "absolute", "(", ")", ",", "task", ")", ";", "taskExecutor", "=", "new", "TimedTask", "(", "taskExecutor", ",", "metricRegistry", ".", "timer", "(", "name", ")", ")", ";", "}", "if", "(", "executeMethod", ".", "isAnnotationPresent", "(", "Metered", ".", "class", ")", ")", "{", "final", "Metered", "annotation", "=", "executeMethod", ".", "getAnnotation", "(", "Metered", ".", "class", ")", ";", "final", "String", "name", "=", "chooseName", "(", "annotation", ".", "name", "(", ")", ",", "annotation", ".", "absolute", "(", ")", ",", "task", ")", ";", "taskExecutor", "=", "new", "MeteredTask", "(", "taskExecutor", ",", "metricRegistry", ".", "meter", "(", "name", ")", ")", ";", "}", "if", "(", "executeMethod", ".", "isAnnotationPresent", "(", "ExceptionMetered", ".", "class", ")", ")", "{", "final", "ExceptionMetered", "annotation", "=", "executeMethod", ".", "getAnnotation", "(", "ExceptionMetered", ".", "class", ")", ";", "final", "String", "name", "=", "chooseName", "(", "annotation", ".", "name", "(", ")", ",", "annotation", ".", "absolute", "(", ")", ",", "task", ",", "ExceptionMetered", ".", "DEFAULT_NAME_SUFFIX", ")", ";", "taskExecutor", "=", "new", "ExceptionMeteredTask", "(", "taskExecutor", ",", "metricRegistry", ".", "meter", "(", "name", ")", ",", "annotation", ".", "cause", "(", ")", ")", ";", "}", "}", "catch", "(", "NoSuchMethodException", "ignored", ")", "{", "}", "taskExecutors", ".", "put", "(", "task", ",", "taskExecutor", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "doGet", "(", "HttpServletRequest", "req", ",", "HttpServletResponse", "resp", ")", "throws", "ServletException", ",", "IOException", "{", "if", "(", "Strings", ".", "isNullOrEmpty", "(", "req", ".", "getPathInfo", "(", ")", ")", ")", "{", "try", "(", "final", "PrintWriter", "output", "=", "resp", ".", "getWriter", "(", ")", ")", "{", "resp", ".", "setContentType", "(", "MediaType", ".", "PLAIN_TEXT_UTF_8", ".", "toString", "(", ")", ")", ";", "getTasks", "(", ")", ".", "stream", "(", ")", ".", "map", "(", "Task", ":", ":", "getName", ")", ".", "sorted", "(", ")", ".", "forEach", "(", "output", ":", ":", "println", ")", ";", "}", "}", "else", "if", "(", "tasks", ".", "containsKey", "(", "req", ".", "getPathInfo", "(", ")", ")", ")", "{", "resp", ".", "sendError", "(", "HttpServletResponse", ".", "SC_METHOD_NOT_ALLOWED", ")", ";", "}", "else", "{", "resp", ".", "sendError", "(", "HttpServletResponse", ".", "SC_NOT_FOUND", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "doPost", "(", "HttpServletRequest", "req", ",", "HttpServletResponse", "resp", ")", "throws", "ServletException", ",", "IOException", "{", "final", "Task", "task", "=", "tasks", ".", "get", "(", "req", ".", "getPathInfo", "(", ")", ")", ";", "if", "(", "task", "!", "=", "null", ")", "{", "resp", ".", "setContentType", "(", "MediaType", ".", "PLAIN_TEXT_UTF_8", ".", "toString", "(", ")", ")", ";", "final", "PrintWriter", "output", "=", "resp", ".", "getWriter", "(", ")", ";", "try", "{", "final", "TaskExecutor", "taskExecutor", "=", "taskExecutors", ".", "get", "(", "task", ")", ";", "requireNonNull", "(", "taskExecutor", ")", ".", "executeTask", "(", "getParams", "(", "req", ")", ",", "getBody", "(", "req", ")", ",", "output", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "LOGGER", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "task", ".", "getName", "(", ")", ",", "e", ")", ";", "resp", ".", "setStatus", "(", "HttpServletResponse", ".", "SC_INTERNAL_SERVER_ERROR", ")", ";", "output", ".", "println", "(", ")", ";", "output", ".", "println", "(", "e", ".", "getMessage", "(", ")", ")", ";", "e", ".", "printStackTrace", "(", "output", ")", ";", "}", "finally", "{", "output", ".", "close", "(", ")", ";", "}", "}", "else", "{", "resp", ".", "sendError", "(", "HttpServletResponse", ".", "SC_NOT_FOUND", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "ImmutableMultimap", "<", "String", ",", "String", ">", "getParams", "(", "HttpServletRequest", "req", ")", "{", "final", "ImmutableMultimap", ".", "Builder", "<", "String", ",", "String", ">", "results", "=", "ImmutableMultimap", ".", "builder", "(", ")", ";", "final", "Enumeration", "<", "String", ">", "names", "=", "req", ".", "getParameterNames", "(", ")", ";", "while", "(", "names", ".", "hasMoreElements", "(", ")", ")", "{", "final", "String", "name", "=", "names", ".", "nextElement", "(", ")", ";", "final", "String", "[", "]", "values", "=", "req", ".", "getParameterValues", "(", "name", ")", ";", "results", ".", "putAll", "(", "name", ",", "values", ")", ";", "}", "return", "results", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "String", "getBody", "(", "HttpServletRequest", "req", ")", "throws", "IOException", "{", "return", "CharStreams", ".", "toString", "(", "new", "InputStreamReader", "(", "req", ".", "getInputStream", "(", ")", ",", "Charsets", ".", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Collection", "<", "Task", ">", "getTasks", "(", ")", "{", "return", "tasks", ".", "values", "(", ")", ";", "}", "</s>"]
["<s>", "private", "String", "chooseName", "(", "String", "explicitName", ",", "boolean", "absolute", ",", "Task", "task", ",", "String", ".", ".", ".", "suffixes", ")", "{", "if", "(", "explicitName", "!", "=", "null", "&", "&", "!", "explicitName", ".", "isEmpty", "(", ")", ")", "{", "if", "(", "absolute", ")", "{", "return", "explicitName", ";", "}", "return", "name", "(", "task", ".", "getClass", "(", ")", ",", "explicitName", ")", ";", "}", "return", "name", "(", "task", ".", "getClass", "(", ")", ",", "suffixes", ")", ";", "}", "</s>"]
["<s>", "private", "TaskExecutor", "(", "Task", "task", ")", "{", "this", ".", "task", "=", "task", ";", "}", "</s>"]
["<s>", "public", "void", "executeTask", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "params", ",", "String", "body", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "if", "(", "task", "instanceof", "PostBodyTask", ")", "{", "PostBodyTask", "postBodyTask", "=", "(", "PostBodyTask", ")", "task", ";", "postBodyTask", ".", "execute", "(", "params", ",", "body", ",", "output", ")", ";", "}", "else", "{", "task", ".", "execute", "(", "params", ",", "output", ")", ";", "}", "}", "</s>"]
["<s>", "private", "TimedTask", "(", "TaskExecutor", "underlying", ",", "Timer", "timer", ")", "{", "super", "(", "underlying", ".", "task", ")", ";", "this", ".", "underlying", "=", "underlying", ";", "this", ".", "timer", "=", "timer", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "executeTask", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "params", ",", "String", "body", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "final", "Timer", ".", "Context", "context", "=", "timer", ".", "time", "(", ")", ";", "try", "{", "underlying", ".", "executeTask", "(", "params", ",", "body", ",", "output", ")", ";", "}", "finally", "{", "context", ".", "stop", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "MeteredTask", "(", "TaskExecutor", "underlying", ",", "Meter", "meter", ")", "{", "super", "(", "underlying", ".", "task", ")", ";", "this", ".", "meter", "=", "meter", ";", "this", ".", "underlying", "=", "underlying", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "executeTask", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "params", ",", "String", "body", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "meter", ".", "mark", "(", ")", ";", "underlying", ".", "executeTask", "(", "params", ",", "body", ",", "output", ")", ";", "}", "</s>"]
["<s>", "private", "ExceptionMeteredTask", "(", "TaskExecutor", "underlying", ",", "Meter", "exceptionMeter", ",", "Class", "<", "?", "extends", "Throwable", ">", "exceptionClass", ")", "{", "super", "(", "underlying", ".", "task", ")", ";", "this", ".", "underlying", "=", "underlying", ";", "this", ".", "exceptionMeter", "=", "exceptionMeter", ";", "this", ".", "exceptionClass", "=", "exceptionClass", ";", "}", "</s>"]
["<s>", "private", "boolean", "isReallyAssignableFrom", "(", "Exception", "e", ")", "{", "return", "exceptionClass", ".", "isAssignableFrom", "(", "e", ".", "getClass", "(", ")", ")", "|", "|", "(", "e", ".", "getCause", "(", ")", "!", "=", "null", "&", "&", "exceptionClass", ".", "isAssignableFrom", "(", "e", ".", "getCause", "(", ")", ".", "getClass", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "executeTask", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "params", ",", "String", "body", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "try", "{", "underlying", ".", "executeTask", "(", "params", ",", "body", ",", "output", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "if", "(", "exceptionMeter", "!", "=", "null", "&", "&", "isReallyAssignableFrom", "(", "e", ")", ")", "{", "exceptionMeter", ".", "mark", "(", ")", ";", "}", "else", "{", "throw", "e", ";", "}", "}", "}", "</s>"]
["<s>", "public", "LogConfigurationTask", "(", ")", "{", "this", "(", "LoggerFactory", ".", "getILoggerFactory", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "LogConfigurationTask", "(", "ILoggerFactory", "loggerContext", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "loggerContext", "=", "loggerContext", ";", "}", "</s>"]
["<s>", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "final", "List", "<", "String", ">", "loggerNames", "=", "getLoggerNames", "(", "parameters", ")", ";", "final", "Level", "loggerLevel", "=", "getLoggerLevel", "(", "parameters", ")", ";", "for", "(", "String", "loggerName", ":", "loggerNames", ")", "{", "(", "(", "LoggerContext", ")", "loggerContext", ")", ".", "getLogger", "(", "loggerName", ")", ".", "setLevel", "(", "loggerLevel", ")", ";", "output", ".", "println", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "loggerName", ",", "loggerLevel", ")", ")", ";", "output", ".", "flush", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "List", "<", "String", ">", "getLoggerNames", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ")", "{", "return", "parameters", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asList", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Nullable", "private", "Level", "getLoggerLevel", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ")", "{", "final", "List", "<", "String", ">", "loggerLevels", "=", "parameters", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asList", "(", ")", ";", "return", "loggerLevels", ".", "isEmpty", "(", ")", "?", "null", ":", "Level", ".", "valueOf", "(", "loggerLevels", ".", "get", "(", "0", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "Task", "(", "String", "name", ")", "{", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "abstract", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", ";", "</s>"]
["<s>", "protected", "PostBodyTask", "(", "String", "name", ")", "{", "super", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "abstract", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "String", "body", ",", "PrintWriter", "output", ")", "throws", "Exception", ";", "</s>"]
["<s>", "@", "Override", "@", "Deprecated", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "CachedAsset", "(", "byte", "[", "]", "resource", ",", "long", "lastModifiedTime", ")", "{", "this", ".", "resource", "=", "resource", ";", "this", ".", "eTag", "=", "<CHAR_LIT:\">", "+", "Hashing", ".", "murmur3_128", "(", ")", ".", "hashBytes", "(", "resource", ")", ".", "toString", "(", ")", "+", "<CHAR_LIT:\">", ";", "this", ".", "lastModifiedTime", "=", "lastModifiedTime", ";", "}", "</s>"]
["<s>", "public", "byte", "[", "]", "getResource", "(", ")", "{", "return", "resource", ";", "}", "</s>"]
["<s>", "public", "String", "getETag", "(", ")", "{", "return", "eTag", ";", "}", "</s>"]
["<s>", "public", "long", "getLastModifiedTime", "(", ")", "{", "return", "lastModifiedTime", ";", "}", "</s>"]
["<s>", "public", "AssetServlet", "(", "String", "resourcePath", ",", "String", "uriPath", ",", "@", "Nullable", "String", "indexFile", ",", "@", "Nullable", "Charset", "defaultCharset", ")", "{", "final", "String", "trimmedPath", "=", "SLASHES", ".", "trimFrom", "(", "resourcePath", ")", ";", "this", ".", "resourcePath", "=", "trimmedPath", ".", "isEmpty", "(", ")", "?", "trimmedPath", ":", "trimmedPath", "+", "<CHAR_LIT:/>", ";", "final", "String", "trimmedUri", "=", "SLASHES", ".", "trimTrailingFrom", "(", "uriPath", ")", ";", "this", ".", "uriPath", "=", "trimmedUri", ".", "isEmpty", "(", ")", "?", "\"", "<STR_LIT:/>", "\"", ":", "trimmedUri", ";", "this", ".", "indexFile", "=", "indexFile", ";", "this", ".", "defaultCharset", "=", "defaultCharset", ";", "}", "</s>"]
["<s>", "public", "URL", "getResourceURL", "(", ")", "{", "return", "Resources", ".", "getResource", "(", "resourcePath", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getUriPath", "(", ")", "{", "return", "uriPath", ";", "}", "</s>"]
["<s>", "@", "Nullable", "public", "String", "getIndexFile", "(", ")", "{", "return", "indexFile", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "doGet", "(", "HttpServletRequest", "req", ",", "HttpServletResponse", "resp", ")", "throws", "ServletException", ",", "IOException", "{", "try", "{", "final", "StringBuilder", "builder", "=", "new", "StringBuilder", "(", "req", ".", "getServletPath", "(", ")", ")", ";", "if", "(", "req", ".", "getPathInfo", "(", ")", "!", "=", "null", ")", "{", "builder", ".", "append", "(", "req", ".", "getPathInfo", "(", ")", ")", ";", "}", "final", "CachedAsset", "cachedAsset", "=", "loadAsset", "(", "builder", ".", "toString", "(", ")", ")", ";", "if", "(", "cachedAsset", "=", "=", "null", ")", "{", "resp", ".", "sendError", "(", "HttpServletResponse", ".", "SC_NOT_FOUND", ")", ";", "return", ";", "}", "if", "(", "isCachedClientSide", "(", "req", ",", "cachedAsset", ")", ")", "{", "resp", ".", "sendError", "(", "HttpServletResponse", ".", "SC_NOT_MODIFIED", ")", ";", "return", ";", "}", "final", "String", "rangeHeader", "=", "req", ".", "getHeader", "(", "HttpHeaders", ".", "RANGE", ")", ";", "final", "int", "resourceLength", "=", "cachedAsset", ".", "getResource", "(", ")", ".", "length", ";", "ImmutableList", "<", "ByteRange", ">", "ranges", "=", "ImmutableList", ".", "of", "(", ")", ";", "boolean", "usingRanges", "=", "false", ";", "if", "(", "rangeHeader", "!", "=", "null", ")", "{", "final", "String", "ifRange", "=", "req", ".", "getHeader", "(", "HttpHeaders", ".", "IF_RANGE", ")", ";", "if", "(", "ifRange", "=", "=", "null", "|", "|", "cachedAsset", ".", "getETag", "(", ")", ".", "equals", "(", "ifRange", ")", ")", "{", "try", "{", "ranges", "=", "parseRangeHeader", "(", "rangeHeader", ",", "resourceLength", ")", ";", "}", "catch", "(", "NumberFormatException", "e", ")", "{", "resp", ".", "sendError", "(", "HttpServletResponse", ".", "SC_REQUESTED_RANGE_NOT_SATISFIABLE", ")", ";", "return", ";", "}", "if", "(", "ranges", ".", "isEmpty", "(", ")", ")", "{", "resp", ".", "sendError", "(", "HttpServletResponse", ".", "SC_REQUESTED_RANGE_NOT_SATISFIABLE", ")", ";", "return", ";", "}", "resp", ".", "setStatus", "(", "HttpServletResponse", ".", "SC_PARTIAL_CONTENT", ")", ";", "usingRanges", "=", "true", ";", "resp", ".", "addHeader", "(", "HttpHeaders", ".", "CONTENT_RANGE", ",", "\"", "<STR_LIT>", "\"", "+", "Joiner", ".", "on", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ".", "join", "(", "ranges", ")", "+", "\"", "<STR_LIT:/>", "\"", "+", "resourceLength", ")", ";", "}", "}", "resp", ".", "setDateHeader", "(", "HttpHeaders", ".", "LAST_MODIFIED", ",", "cachedAsset", ".", "getLastModifiedTime", "(", ")", ")", ";", "resp", ".", "setHeader", "(", "HttpHeaders", ".", "ETAG", ",", "cachedAsset", ".", "getETag", "(", ")", ")", ";", "final", "String", "mimeTypeOfExtension", "=", "req", ".", "getServletContext", "(", ")", ".", "getMimeType", "(", "req", ".", "getRequestURI", "(", ")", ")", ";", "MediaType", "mediaType", "=", "DEFAULT_MEDIA_TYPE", ";", "if", "(", "mimeTypeOfExtension", "!", "=", "null", ")", "{", "try", "{", "mediaType", "=", "MediaType", ".", "parse", "(", "mimeTypeOfExtension", ")", ";", "if", "(", "defaultCharset", "!", "=", "null", "&", "&", "mediaType", ".", "is", "(", "MediaType", ".", "ANY_TEXT_TYPE", ")", ")", "{", "mediaType", "=", "mediaType", ".", "withCharset", "(", "defaultCharset", ")", ";", "}", "}", "catch", "(", "IllegalArgumentException", "ignore", ")", "{", "}", "}", "if", "(", "mediaType", ".", "is", "(", "MediaType", ".", "ANY_VIDEO_TYPE", ")", "|", "|", "mediaType", ".", "is", "(", "MediaType", ".", "ANY_AUDIO_TYPE", ")", "|", "|", "usingRanges", ")", "{", "resp", ".", "addHeader", "(", "HttpHeaders", ".", "ACCEPT_RANGES", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "resp", ".", "setContentType", "(", "mediaType", ".", "type", "(", ")", "+", "<CHAR_LIT:/>", "+", "mediaType", ".", "subtype", "(", ")", ")", ";", "if", "(", "mediaType", ".", "charset", "(", ")", ".", "isPresent", "(", ")", ")", "{", "resp", ".", "setCharacterEncoding", "(", "mediaType", ".", "charset", "(", ")", ".", "get", "(", ")", ".", "toString", "(", ")", ")", ";", "}", "try", "(", "ServletOutputStream", "output", "=", "resp", ".", "getOutputStream", "(", ")", ")", "{", "if", "(", "usingRanges", ")", "{", "for", "(", "ByteRange", "range", ":", "ranges", ")", "{", "output", ".", "write", "(", "cachedAsset", ".", "getResource", "(", ")", ",", "range", ".", "getStart", "(", ")", ",", "range", ".", "getEnd", "(", ")", "-", "range", ".", "getStart", "(", ")", "+", "1", ")", ";", "}", "}", "else", "{", "output", ".", "write", "(", "cachedAsset", ".", "getResource", "(", ")", ")", ";", "}", "}", "}", "catch", "(", "RuntimeException", "|", "URISyntaxException", "ignored", ")", "{", "resp", ".", "sendError", "(", "HttpServletResponse", ".", "SC_NOT_FOUND", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Nullable", "private", "CachedAsset", "loadAsset", "(", "String", "key", ")", "throws", "URISyntaxException", ",", "IOException", "{", "checkArgument", "(", "key", ".", "startsWith", "(", "uriPath", ")", ")", ";", "final", "String", "requestedResourcePath", "=", "SLASHES", ".", "trimFrom", "(", "key", ".", "substring", "(", "uriPath", ".", "length", "(", ")", ")", ")", ";", "final", "String", "absoluteRequestedResourcePath", "=", "SLASHES", ".", "trimFrom", "(", "this", ".", "resourcePath", "+", "requestedResourcePath", ")", ";", "URL", "requestedResourceURL", "=", "getResourceUrl", "(", "absoluteRequestedResourcePath", ")", ";", "if", "(", "ResourceURL", ".", "isDirectory", "(", "requestedResourceURL", ")", ")", "{", "if", "(", "indexFile", "!", "=", "null", ")", "{", "requestedResourceURL", "=", "getResourceUrl", "(", "absoluteRequestedResourcePath", "+", "<CHAR_LIT:/>", "+", "indexFile", ")", ";", "}", "else", "{", "return", "null", ";", "}", "}", "long", "lastModified", "=", "ResourceURL", ".", "getLastModified", "(", "requestedResourceURL", ")", ";", "if", "(", "lastModified", "<", "1", ")", "{", "lastModified", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "}", "lastModified", "=", "(", "lastModified", "/", "<NUM_LIT:1000>", ")", "*", "<NUM_LIT:1000>", ";", "return", "new", "CachedAsset", "(", "readResource", "(", "requestedResourceURL", ")", ",", "lastModified", ")", ";", "}", "</s>"]
["<s>", "protected", "URL", "getResourceUrl", "(", "String", "absoluteRequestedResourcePath", ")", "{", "return", "Resources", ".", "getResource", "(", "absoluteRequestedResourcePath", ")", ";", "}", "</s>"]
["<s>", "protected", "byte", "[", "]", "readResource", "(", "URL", "requestedResourceURL", ")", "throws", "IOException", "{", "return", "Resources", ".", "toByteArray", "(", "requestedResourceURL", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "isCachedClientSide", "(", "HttpServletRequest", "req", ",", "CachedAsset", "cachedAsset", ")", "{", "return", "cachedAsset", ".", "getETag", "(", ")", ".", "equals", "(", "req", ".", "getHeader", "(", "HttpHeaders", ".", "IF_NONE_MATCH", ")", ")", "|", "|", "(", "req", ".", "getDateHeader", "(", "HttpHeaders", ".", "IF_MODIFIED_SINCE", ")", ">", "=", "cachedAsset", ".", "getLastModifiedTime", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "ImmutableList", "<", "ByteRange", ">", "parseRangeHeader", "(", "final", "String", "rangeHeader", ",", "final", "int", "resourceLength", ")", "{", "final", "ImmutableList", ".", "Builder", "<", "ByteRange", ">", "builder", "=", "ImmutableList", ".", "builder", "(", ")", ";", "if", "(", "rangeHeader", ".", "contains", "(", "\"", "<STR_LIT:=>", "\"", ")", ")", "{", "final", "String", "[", "]", "parts", "=", "rangeHeader", ".", "split", "(", "\"", "<STR_LIT:=>", "\"", ")", ";", "if", "(", "parts", ".", "length", ">", "1", ")", "{", "final", "List", "<", "String", ">", "ranges", "=", "Splitter", ".", "on", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ".", "trimResults", "(", ")", ".", "splitToList", "(", "parts", "[", "1", "]", ")", ";", "for", "(", "final", "String", "range", ":", "ranges", ")", "{", "builder", ".", "add", "(", "ByteRange", ".", "parse", "(", "range", ",", "resourceLength", ")", ")", ";", "}", "}", "}", "return", "builder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ResourceNotFoundException", "(", "Throwable", "cause", ")", "{", "super", "(", "cause", ")", ";", "}", "</s>"]
["<s>", "private", "ResourceURL", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "boolean", "isDirectory", "(", "URL", "resourceURL", ")", "throws", "URISyntaxException", "{", "final", "String", "protocol", "=", "resourceURL", ".", "getProtocol", "(", ")", ";", "switch", "(", "protocol", ")", "{", "case", "\"", "<STR_LIT>", "\"", ":", "try", "{", "final", "JarURLConnection", "jarConnection", "=", "(", "JarURLConnection", ")", "resourceURL", ".", "openConnection", "(", ")", ";", "final", "JarEntry", "entry", "=", "jarConnection", ".", "getJarEntry", "(", ")", ";", "if", "(", "entry", ".", "isDirectory", "(", ")", ")", "{", "return", "true", ";", "}", "final", "String", "fileName", "=", "resourceURL", ".", "getFile", "(", ")", ";", "final", "String", "relativeFilePath", "=", "fileName", ".", "substring", "(", "fileName", ".", "lastIndexOf", "(", "<CHAR_LIT>", ")", "+", "<NUM_LIT:2>", ")", ";", "final", "JarFile", "jarFile", "=", "jarConnection", ".", "getJarFile", "(", ")", ";", "final", "ZipEntry", "zipEntry", "=", "jarFile", ".", "getEntry", "(", "relativeFilePath", ")", ";", "final", "InputStream", "inputStream", "=", "jarFile", ".", "getInputStream", "(", "zipEntry", ")", ";", "return", "inputStream", "=", "=", "null", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "ResourceNotFoundException", "(", "e", ")", ";", "}", "case", "\"", "<STR_LIT>", "\"", ":", "return", "new", "File", "(", "resourceURL", ".", "toURI", "(", ")", ")", ".", "isDirectory", "(", ")", ";", "default", ":", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "resourceURL", ".", "getProtocol", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "resourceURL", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "URL", "appendTrailingSlash", "(", "URL", "originalURL", ")", "{", "try", "{", "return", "originalURL", ".", "getPath", "(", ")", ".", "endsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", "?", "originalURL", ":", "new", "URL", "(", "originalURL", ".", "getProtocol", "(", ")", ",", "originalURL", ".", "getHost", "(", ")", ",", "originalURL", ".", "getPort", "(", ")", ",", "originalURL", ".", "getFile", "(", ")", "+", "<CHAR_LIT:/>", ")", ";", "}", "catch", "(", "MalformedURLException", "ignored", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "originalURL", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "long", "getLastModified", "(", "URL", "resourceURL", ")", "{", "final", "String", "protocol", "=", "resourceURL", ".", "getProtocol", "(", ")", ";", "switch", "(", "protocol", ")", "{", "case", "\"", "<STR_LIT>", "\"", ":", "try", "{", "final", "JarURLConnection", "jarConnection", "=", "(", "JarURLConnection", ")", "resourceURL", ".", "openConnection", "(", ")", ";", "final", "JarEntry", "entry", "=", "jarConnection", ".", "getJarEntry", "(", ")", ";", "return", "entry", ".", "getTime", "(", ")", ";", "}", "catch", "(", "IOException", "ignored", ")", "{", "return", "0", ";", "}", "case", "\"", "<STR_LIT>", "\"", ":", "URLConnection", "connection", "=", "null", ";", "try", "{", "connection", "=", "resourceURL", ".", "openConnection", "(", ")", ";", "return", "connection", ".", "getLastModified", "(", ")", ";", "}", "catch", "(", "IOException", "ignored", ")", "{", "return", "0", ";", "}", "finally", "{", "if", "(", "connection", "!", "=", "null", ")", "{", "try", "{", "connection", ".", "getInputStream", "(", ")", ".", "close", "(", ")", ";", "}", "catch", "(", "IOException", "ignored", ")", "{", "}", "}", "}", "default", ":", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "resourceURL", ".", "getProtocol", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "resourceURL", ")", ";", "}", "}", "</s>"]
["<s>", "public", "ByteRange", "(", "final", "int", "start", ",", "final", "int", "end", ")", "{", "this", ".", "start", "=", "start", ";", "this", ".", "end", "=", "end", ";", "}", "</s>"]
["<s>", "public", "int", "getStart", "(", ")", "{", "return", "start", ";", "}", "</s>"]
["<s>", "public", "int", "getEnd", "(", ")", "{", "return", "end", ";", "}", "</s>"]
["<s>", "public", "static", "ByteRange", "parse", "(", "final", "String", "byteRange", ",", "final", "int", "resourceLength", ")", "{", "if", "(", "!", "byteRange", ".", "contains", "(", "\"", "<STR_LIT:->", "\"", ")", ")", "{", "final", "int", "start", "=", "Integer", ".", "parseInt", "(", "byteRange", ")", ";", "return", "new", "ByteRange", "(", "start", ",", "resourceLength", "-", "1", ")", ";", "}", "if", "(", "byteRange", ".", "indexOf", "(", "\"", "<STR_LIT:->", "\"", ")", "=", "=", "0", ")", "{", "final", "int", "start", "=", "Integer", ".", "parseInt", "(", "byteRange", ")", ";", "return", "new", "ByteRange", "(", "resourceLength", "+", "start", ",", "resourceLength", "-", "1", ")", ";", "}", "final", "String", "[", "]", "parts", "=", "byteRange", ".", "split", "(", "\"", "<STR_LIT:->", "\"", ")", ";", "if", "(", "parts", ".", "length", "=", "=", "<NUM_LIT:2>", ")", "{", "final", "int", "start", "=", "Integer", ".", "parseInt", "(", "parts", "[", "0", "]", ")", ";", "int", "end", "=", "Integer", ".", "parseInt", "(", "parts", "[", "1", "]", ")", ";", "if", "(", "end", ">", "resourceLength", ")", "{", "end", "=", "resourceLength", "-", "1", ";", "}", "return", "new", "ByteRange", "(", "start", ",", "end", ")", ";", "}", "else", "{", "final", "int", "start", "=", "Integer", ".", "parseInt", "(", "parts", "[", "0", "]", ")", ";", "return", "new", "ByteRange", "(", "start", ",", "resourceLength", "-", "1", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "final", "Object", "obj", ")", "{", "if", "(", "this", "=", "=", "obj", ")", "{", "return", "true", ";", "}", "if", "(", "(", "obj", "=", "=", "null", ")", "|", "|", "(", "getClass", "(", ")", "!", "=", "obj", ".", "getClass", "(", ")", ")", ")", "{", "return", "false", ";", "}", "final", "ByteRange", "other", "=", "(", "ByteRange", ")", "obj", ";", "return", "Objects", ".", "equals", "(", "start", ",", "other", ".", "start", ")", "&", "&", "Objects", ".", "equals", "(", "end", ",", "other", ".", "end", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "Objects", ".", "hash", "(", "start", ",", "end", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "start", ",", "end", ")", ";", "}", "</s>"]
["<s>", "public", "MyMessage", "(", "final", "String", "message", ")", "{", "this", ".", "message", "=", "message", ";", "}", "</s>"]
["<s>", "public", "String", "getMessage", "(", ")", "{", "return", "message", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "rc", "=", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "findsResourceClassInPackage", "(", ")", "{", "rc", ".", "packages", "(", "DummyResource", ".", "class", ".", "getPackage", "(", ")", ".", "getName", "(", ")", ")", ";", "assertThat", "(", "rc", ".", "getClasses", "(", ")", ")", ".", "contains", "(", "DummyResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "findsResourceClassesInPackageAndSubpackage", "(", ")", "{", "rc", ".", "packages", "(", "getClass", "(", ")", ".", "getPackage", "(", ")", ".", "getName", "(", ")", ")", ";", "assertThat", "(", "rc", ".", "getClasses", "(", ")", ")", ".", "contains", "(", "DummyResource", ".", "class", ",", "TestResource", ".", "class", ",", "ResourceInterface", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "combinesAlRegisteredClasses", "(", ")", "{", "rc", ".", "register", "(", "new", "TestResource", "(", ")", ")", ";", "rc", ".", "registerClasses", "(", "ResourceInterface", ".", "class", ",", "ImplementingResource", ".", "class", ")", ";", "assertThat", "(", "rc", ".", "allClasses", "(", ")", ")", ".", "contains", "(", "TestResource", ".", "class", ",", "ResourceInterface", ".", "class", ",", "ImplementingResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "combinesAlRegisteredClassesPathOnMethodLevel", "(", ")", "{", "rc", ".", "register", "(", "new", "TestResource", "(", ")", ")", ";", "rc", ".", "register", "(", "new", "ResourcePathOnMethodLevel", "(", ")", ")", ";", "assertThat", "(", "rc", ".", "allClasses", "(", ")", ")", ".", "contains", "(", "TestResource", ".", "class", ",", "ResourcePathOnMethodLevel", ".", "class", ")", ";", "assertThat", "(", "rc", ".", "getEndpointsInfo", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "logsNoInterfaces", "(", ")", "{", "rc", ".", "packages", "(", "getClass", "(", ")", ".", "getPackage", "(", ")", ".", "getName", "(", ")", ")", ";", "assertThat", "(", "rc", ".", "getEndpointsInfo", "(", ")", ")", ".", "doesNotContain", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "logsNoEndpointsWhenNoResourcesAreRegistered", "(", ")", "{", "assertThat", "(", "rc", ".", "getEndpointsInfo", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "logsEndpoints", "(", ")", "{", "rc", ".", "register", "(", "TestResource", ".", "class", ")", ";", "rc", ".", "register", "(", "ImplementingResource", ".", "class", ")", ";", "assertThat", "(", "rc", ".", "getEndpointsInfo", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "logsEndpointsSorted", "(", ")", "{", "rc", ".", "register", "(", "DummyResource", ".", "class", ")", ";", "rc", ".", "register", "(", "TestResource2", ".", "class", ")", ";", "rc", ".", "register", "(", "TestResource", ".", "class", ")", ";", "rc", ".", "register", "(", "ImplementingResource", ".", "class", ")", ";", "final", "String", "expectedLog", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "rc", ".", "getEndpointsInfo", "(", ")", ")", ".", "isEqualTo", "(", "expectedLog", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "logsNestedEndpoints", "(", ")", "{", "rc", ".", "register", "(", "WrapperResource", ".", "class", ")", ";", "assertThat", "(", "rc", ".", "getEndpointsInfo", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "logsProgrammaticalEndpoints", "(", ")", "{", "Resource", ".", "Builder", "resourceBuilder", "=", "Resource", ".", "builder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "resourceBuilder", ".", "addChildResource", "(", "Resource", ".", "from", "(", "DummyResource", ".", "class", ")", ")", ";", "resourceBuilder", ".", "addChildResource", "(", "Resource", ".", "from", "(", "TestResource", ".", "class", ")", ")", ";", "resourceBuilder", ".", "addChildResource", "(", "Resource", ".", "from", "(", "ImplementingResource", ".", "class", ")", ")", ";", "rc", ".", "registerResources", "(", "resourceBuilder", ".", "build", "(", ")", ")", ";", "final", "String", "expectedLog", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "rc", ".", "getEndpointsInfo", "(", ")", ")", ".", "isEqualTo", "(", "expectedLog", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEndpointLoggerPathCleaning", "(", ")", "{", "String", "dirtyPath", "=", "\"", "<STR_LIT>", "\"", ";", "String", "anotherDirtyPath", "=", "\"", "<STR_LIT>", "\"", ";", "assertThat", "(", "rc", ".", "cleanUpPath", "(", "dirtyPath", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "rc", ".", "cleanUpPath", "(", "anotherDirtyPath", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "duplicatePathsTest", "(", ")", "{", "rc", ".", "register", "(", "TestDuplicateResource", ".", "class", ")", ";", "final", "String", "expectedLog", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "rc", ".", "getEndpointsInfo", "(", ")", ")", ".", "contains", "(", "expectedLog", ")", ";", "assertThat", "(", "rc", ".", "getEndpointsInfo", "(", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "logsEndpointsContextPath", "(", ")", "{", "rc", ".", "setContextPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "rc", ".", "register", "(", "TestResource", ".", "class", ")", ";", "rc", ".", "register", "(", "ImplementingResource", ".", "class", ")", ";", "assertThat", "(", "rc", ".", "getEndpointsInfo", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "logsEndpointsNoSlashContextPath", "(", ")", "{", "rc", ".", "setContextPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "rc", ".", "register", "(", "TestResource", ".", "class", ")", ";", "rc", ".", "register", "(", "ImplementingResource", ".", "class", ")", ";", "assertThat", "(", "rc", ".", "getEndpointsInfo", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "String", "foo", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "POST", "public", "String", "fooPost", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "DELETE", "public", "String", "fooDelete", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Produces", "(", "MediaType", ".", "APPLICATION_JSON", ")", "public", "String", "fooGet", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Produces", "(", "MediaType", ".", "TEXT_HTML", ")", "public", "String", "fooGet2", "(", ")", "{", "return", "\"", "<STR_LIT:2>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Produces", "(", "MediaType", ".", "APPLICATION_XML", ")", "public", "String", "fooGet3", "(", ")", "{", "return", "\"", "<STR_LIT:3>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "fooGet4", "(", ")", "{", "return", "\"", "<STR_LIT:4>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "String", "bar", "(", ")", ";", "</s>"]
["<s>", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "ResourcePathOnMethodLevel", "getNested", "(", ")", "{", "return", "new", "ResourcePathOnMethodLevel", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Class", "<", "ResourcePathOnMethodLevel", ">", "getNested2", "(", ")", "{", "return", "ResourcePathOnMethodLevel", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Object", "getNested3", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "path", ")", "{", "if", "(", "path", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "return", "new", "ImplementingResource", "(", ")", ";", "}", "return", "new", "ResourcePathOnMethodLevel", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "bar", "(", ")", "{", "return", "\"", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "bar", "(", ")", "{", "return", "\"", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "DummyResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAsyncResponse", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "TEXT_PLAIN_TYPE", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "DummyResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testValidContentType", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "request", "(", "MediaType", ".", "TEXT_PLAIN_TYPE", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testInvalidContentType", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "request", "(", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "hasEntity", "(", ")", ")", ".", "isEqualTo", "(", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Nullable", "public", "<", "T", ">", "ParamConverter", "<", "T", ">", "getConverter", "(", "Class", "<", "T", ">", "rawType", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ")", "{", "if", "(", "genericType", ".", "equals", "(", "MyMessage", ".", "class", ")", ")", "{", "return", "(", "ParamConverter", "<", "T", ">", ")", "new", "MyMessageParamConverter", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "MyMessage", "fromString", "(", "String", "value", ")", "{", "return", "new", "MyMessage", "(", "value", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", "MyMessage", "value", ")", "{", "return", "value", ".", "getMessage", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "AbstractJerseyTest", "(", ")", "{", "super", "(", ")", ";", "forceSet", "(", "TestProperties", ".", "CONTAINER_PORT", ",", "\"", "<STR_LIT:0>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "configureClient", "(", "ClientConfig", "config", ")", "{", "config", ".", "property", "(", "ClientProperties", ".", "CONNECT_TIMEOUT", ",", "DEFAULT_CONNECT_TIMEOUT_MS", ")", ".", "property", "(", "ClientProperties", ".", "READ_TIMEOUT", ",", "DEFAULT_READ_TIMEOUT_MS", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "String", "foo", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "ManagedAsync", "public", "void", "async", "(", "@", "Suspended", "final", "AsyncResponse", "ar", ")", "{", "ar", ".", "resume", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "new", "EmptyOptionalExceptionMapper", "(", ")", ")", ".", "register", "(", "OptionalReturnResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "presentOptionalsReturnTheirValue", "(", ")", "throws", "Exception", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "absentOptionalsThrowANotFound", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "GET", "public", "Optional", "<", "String", ">", "showWithQueryParam", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "id", ")", "{", "return", "Optional", ".", "fromNullable", "(", "id", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "public", "Optional", "<", "String", ">", "showWithFormParam", "(", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "id", ")", "{", "return", "Optional", ".", "fromNullable", "(", "id", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "OptionalCookieParamResource", ".", "class", ")", ".", "register", "(", "MyMessageParamConverterProvider", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMessageIsNotPresent", "(", ")", "{", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageIsBlank", "(", ")", "{", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "cookie", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageIsPresent", "(", ")", "{", "String", "customMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "cookie", "(", "\"", "<STR_LIT>", "\"", ",", "customMessage", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "customMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMyMessageIsNotPresent", "(", ")", "{", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMyMessageWhenMyMessageIsPresent", "(", ")", "{", "String", "myMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "cookie", "(", "\"", "<STR_LIT>", "\"", ",", "myMessage", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "myMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "BadRequestException", ".", "class", ")", "public", "void", "shouldThrowBadRequestExceptionWhenInvalidUUIDIsPresent", "(", ")", "{", "String", "invalidUUID", "=", "\"", "<STR_LIT>", "\"", ";", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "cookie", "(", "\"", "<STR_LIT>", "\"", ",", "invalidUUID", ")", ".", "get", "(", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultUUIDWhenUUIDIsNotPresent", "(", ")", "{", "String", "defaultUUID", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultUUID", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnUUIDWhenValidUUIDIsPresent", "(", ")", "{", "String", "uuid", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "cookie", "(", "\"", "<STR_LIT>", "\"", ",", "uuid", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "uuid", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMessage", "(", "@", "CookieParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "message", ")", "{", "return", "message", ".", "or", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMyMessage", "(", "@", "CookieParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "MyMessage", ">", "myMessage", ")", "{", "return", "myMessage", ".", "or", "(", "new", "MyMessage", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "getMessage", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getUUID", "(", "@", "CookieParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "UUIDParam", ">", "uuid", ")", "{", "return", "uuid", ".", "or", "(", "new", "UUIDParam", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "get", "(", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "OptionalHeaderParamResource", ".", "class", ")", ".", "register", "(", "MyMessageParamConverterProvider", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMessageIsNotPresent", "(", ")", "{", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageIsBlank", "(", ")", "{", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageIsPresent", "(", ")", "{", "String", "customMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "customMessage", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "customMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMyMessageIsNotPresent", "(", ")", "{", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMyMessageWhenMyMessageIsPresent", "(", ")", "{", "String", "myMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "myMessage", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "myMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "BadRequestException", ".", "class", ")", "public", "void", "shouldThrowBadRequestExceptionWhenInvalidUUIDIsPresent", "(", ")", "{", "String", "invalidUUID", "=", "\"", "<STR_LIT>", "\"", ";", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "invalidUUID", ")", ".", "get", "(", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultUUIDWhenUUIDIsNotPresent", "(", ")", "{", "String", "defaultUUID", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultUUID", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnUUIDWhenValidUUIDIsPresent", "(", ")", "{", "String", "uuid", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "uuid", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "uuid", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMessage", "(", "@", "HeaderParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "message", ")", "{", "return", "message", ".", "or", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMyMessage", "(", "@", "HeaderParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "MyMessage", ">", "myMessage", ")", "{", "return", "myMessage", ".", "or", "(", "new", "MyMessage", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "getMessage", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getUUID", "(", "@", "HeaderParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "UUIDParam", ">", "uuid", ")", "{", "return", "uuid", ".", "or", "(", "new", "UUIDParam", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "get", "(", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "OptionalQueryParamResource", ".", "class", ")", ".", "register", "(", "MyMessageParamConverterProvider", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMessageIsNotPresent", "(", ")", "{", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageIsPresent", "(", ")", "{", "String", "customMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "customMessage", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "customMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageIsBlank", "(", ")", "{", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDecodedMessageWhenEncodedMessageIsPresent", "(", ")", "{", "String", "encodedMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "decodedMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "encodedMessage", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "decodedMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMyMessageIsNotPresent", "(", ")", "{", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMyMessageWhenMyMessageIsPresent", "(", ")", "{", "String", "myMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "myMessage", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "myMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "BadRequestException", ".", "class", ")", "public", "void", "shouldThrowBadRequestExceptionWhenInvalidUUIDIsPresent", "(", ")", "{", "String", "invalidUUID", "=", "\"", "<STR_LIT>", "\"", ";", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "invalidUUID", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultUUIDWhenUUIDIsNotPresent", "(", ")", "{", "String", "defaultUUID", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultUUID", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnUUIDWhenValidUUIDIsPresent", "(", ")", "{", "String", "uuid", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "uuid", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "uuid", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultValueWhenValueIsAbsent", "(", ")", "{", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultValueWhenEmptyValueIsGiven", "(", ")", "{", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnValueWhenValueIsPresent", "(", ")", "{", "String", "value", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "value", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "value", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMessage", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "message", ")", "{", "return", "message", ".", "or", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMyMessage", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "MyMessage", ">", "myMessage", ")", "{", "return", "myMessage", ".", "or", "(", "new", "MyMessage", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "getMessage", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getUUID", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "UUIDParam", ">", "uuid", ")", "{", "return", "uuid", ".", "or", "(", "new", "UUIDParam", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "get", "(", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getValue", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "Integer", ">", "value", ")", "{", "return", "value", ".", "or", "(", "<NUM_LIT>", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "OptionalFormParamResource", ".", "class", ")", ".", "register", "(", "MyMessageParamConverterProvider", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMessageIsNotPresent", "(", ")", "throws", "IOException", "{", "final", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "new", "MultivaluedStringMap", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageBlank", "(", ")", "throws", "IOException", "{", "final", "Form", "form", "=", "new", "Form", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "form", ")", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageIsPresent", "(", ")", "throws", "IOException", "{", "final", "String", "customMessage", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Form", "form", "=", "new", "Form", "(", "\"", "<STR_LIT>", "\"", ",", "customMessage", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "form", ")", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "customMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMyMessageIsNotPresent", "(", ")", "throws", "IOException", "{", "final", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "new", "MultivaluedStringMap", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMyMessageWhenMyMessageIsPresent", "(", ")", "throws", "IOException", "{", "final", "String", "myMessage", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Form", "form", "=", "new", "Form", "(", "\"", "<STR_LIT>", "\"", ",", "myMessage", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "form", ")", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "myMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldThrowBadRequestExceptionWhenInvalidUUIDIsPresent", "(", ")", "throws", "IOException", "{", "final", "String", "invalidUUID", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Form", "form", "=", "new", "Form", "(", "\"", "<STR_LIT>", "\"", ",", "invalidUUID", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "form", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ".", "getStatusCode", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultUUIDWhenUUIDIsNotPresent", "(", ")", "throws", "IOException", "{", "final", "String", "defaultUUID", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "new", "MultivaluedStringMap", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "defaultUUID", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnUUIDWhenValidUUIDIsPresent", "(", ")", "throws", "IOException", "{", "final", "String", "uuid", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Form", "form", "=", "new", "Form", "(", "\"", "<STR_LIT>", "\"", ",", "uuid", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "form", ")", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "uuid", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMessage", "(", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "message", ")", "{", "return", "message", ".", "or", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMyMessage", "(", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "MyMessage", ">", "myMessage", ")", "{", "return", "myMessage", ".", "or", "(", "new", "MyMessage", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "getMessage", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getUUID", "(", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "UUIDParam", ">", "uuid", ")", "{", "return", "uuid", ".", "or", "(", "new", "UUIDParam", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "get", "(", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "urlPatternEndsWithSlashStar", "(", ")", "{", "assertPatternEndsWithSlashStar", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "urlPatternEndsWithStar", "(", ")", "{", "assertPatternEndsWithSlashStar", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "urlPatternSuffixNoop", "(", ")", "{", "String", "slashStarPath", "=", "\"", "<STR_LIT>", "\"", ";", "jerseyEnvironment", ".", "setUrlPattern", "(", "slashStarPath", ")", ";", "assertThat", "(", "jerseyEnvironment", ".", "getUrlPattern", "(", ")", ")", ".", "isEqualTo", "(", "slashStarPath", ")", ";", "}", "</s>"]
["<s>", "private", "void", "assertPatternEndsWithSlashStar", "(", "String", "jerseyRootPath", ")", "{", "jerseyEnvironment", ".", "setUrlPattern", "(", "jerseyRootPath", ")", ";", "assertThat", "(", "jerseyEnvironment", ".", "getUrlPattern", "(", ")", ")", ".", "endsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "gzipParametersSpec", "(", ")", "throws", "IOException", "{", "ClientRequestContext", "context", "=", "mock", "(", "ClientRequestContext", ".", "class", ")", ";", "MultivaluedMap", "<", "String", ",", "Object", ">", "headers", "=", "new", "MultivaluedHashMap", "<", ">", "(", ")", ";", "when", "(", "context", ".", "getHeaders", "(", ")", ")", ".", "thenReturn", "(", "headers", ")", ";", "headers", ".", "put", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ",", "null", ")", ";", "when", "(", "context", ".", "hasEntity", "(", ")", ")", ".", "thenReturn", "(", "true", ")", ";", "new", "ConfiguredGZipEncoder", "(", "true", ")", ".", "filter", "(", "context", ")", ";", "assertThat", "(", "headers", ".", "getFirst", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ")", ".", "toString", "(", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "aroundWriteToSpec", "(", ")", "throws", "IOException", ",", "WebApplicationException", "{", "MultivaluedMap", "<", "String", ",", "Object", ">", "headers", "=", "new", "MultivaluedHashMap", "<", ">", "(", ")", ";", "headers", ".", "add", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ";", "WriterInterceptorContextMock", "context", "=", "new", "WriterInterceptorContextMock", "(", "headers", ")", ";", "new", "ConfiguredGZipEncoder", "(", "true", ")", ".", "aroundWriteTo", "(", "context", ")", ";", "assertThat", "(", "context", ".", "getOutputStream", "(", ")", ",", "is", "(", "instanceOf", "(", "GZIPOutputStream", ".", "class", ")", ")", ")", ";", "assertThat", "(", "context", ".", "isProceedCalled", "(", ")", ",", "is", "(", "true", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "aroundWriteToSpecX_GZip", "(", ")", "throws", "IOException", ",", "WebApplicationException", "{", "MultivaluedMap", "<", "String", ",", "Object", ">", "headers", "=", "new", "MultivaluedHashMap", "<", ">", "(", ")", ";", "headers", ".", "add", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ";", "WriterInterceptorContextMock", "context", "=", "new", "WriterInterceptorContextMock", "(", "headers", ")", ";", "new", "ConfiguredGZipEncoder", "(", "true", ")", ".", "aroundWriteTo", "(", "context", ")", ";", "assertThat", "(", "context", ".", "getOutputStream", "(", ")", ",", "is", "(", "instanceOf", "(", "GZIPOutputStream", ".", "class", ")", ")", ")", ";", "assertThat", "(", "context", ".", "isProceedCalled", "(", ")", ",", "is", "(", "true", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "otherEncodingWillNotAroundWrite", "(", ")", "throws", "IOException", ",", "WebApplicationException", "{", "MultivaluedMap", "<", "String", ",", "Object", ">", "headers", "=", "new", "MultivaluedHashMap", "<", ">", "(", ")", ";", "headers", ".", "add", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ";", "WriterInterceptorContextMock", "context", "=", "new", "WriterInterceptorContextMock", "(", "headers", ")", ";", "new", "ConfiguredGZipEncoder", "(", "true", ")", ".", "aroundWriteTo", "(", "context", ")", ";", "assertThat", "(", "context", ".", "getOutputStream", "(", ")", ",", "is", "(", "not", "(", "instanceOf", "(", "GZIPOutputStream", ".", "class", ")", ")", ")", ")", ";", "assertThat", "(", "context", ".", "isProceedCalled", "(", ")", ",", "is", "(", "true", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "noEncodingwillNotAroundWrite", "(", ")", "throws", "IOException", ",", "WebApplicationException", "{", "MultivaluedMap", "<", "String", ",", "Object", ">", "headers", "=", "new", "MultivaluedHashMap", "<", ">", "(", ")", ";", "headers", ".", "add", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ",", "null", ")", ";", "WriterInterceptorContextMock", "context", "=", "new", "WriterInterceptorContextMock", "(", "headers", ")", ";", "new", "ConfiguredGZipEncoder", "(", "true", ")", ".", "aroundWriteTo", "(", "context", ")", ";", "assertThat", "(", "context", ".", "getOutputStream", "(", ")", ",", "is", "(", "not", "(", "instanceOf", "(", "GZIPOutputStream", ".", "class", ")", ")", ")", ")", ";", "assertThat", "(", "context", ".", "isProceedCalled", "(", ")", ",", "is", "(", "true", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "write", "(", "int", "i", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "public", "WriterInterceptorContextMock", "(", "MultivaluedMap", "<", "String", ",", "Object", ">", "headers", ")", "{", "this", ".", "headers", "=", "headers", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "proceed", "(", ")", "throws", "IOException", ",", "WebApplicationException", "{", "proceedCalled", "=", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "Object", "getEntity", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setEntity", "(", "Object", "entity", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "OutputStream", "getOutputStream", "(", ")", "{", "return", "os", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setOutputStream", "(", "OutputStream", "os", ")", "{", "this", ".", "os", "=", "os", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "MultivaluedMap", "<", "String", ",", "Object", ">", "getHeaders", "(", ")", "{", "return", "headers", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "Object", "getProperty", "(", "String", "name", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "Collection", "<", "String", ">", "getPropertyNames", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setProperty", "(", "String", "name", ",", "Object", "object", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "removeProperty", "(", "String", "name", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "Annotation", "[", "]", "getAnnotations", "(", ")", "{", "return", "new", "Annotation", "[", "0", "]", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setAnnotations", "(", "Annotation", "[", "]", "annotations", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "Class", "<", "?", ">", "getType", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setType", "(", "Class", "<", "?", ">", "type", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "Type", "getGenericType", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setGenericType", "(", "Type", "genericType", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "MediaType", "getMediaType", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setMediaType", "(", "MediaType", "mediaType", ")", "{", "}", "</s>"]
["<s>", "public", "boolean", "isProceedCalled", "(", ")", "{", "return", "proceedCalled", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "new", "EmptyOptionalExceptionMapper", "(", ")", ")", ".", "register", "(", "OptionalReturnResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "presentOptionalsReturnTheirValue", "(", ")", "throws", "Exception", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "presentOptionalsReturnTheirValueWithResponse", "(", ")", "throws", "Exception", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "absentOptionalsThrowANotFound", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "GET", "public", "Optional", "<", "String", ">", "showWithQueryParam", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "id", ")", "{", "return", "Optional", ".", "ofNullable", "(", "id", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "public", "Optional", "<", "String", ">", "showWithFormParam", "(", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "id", ")", "{", "return", "Optional", ".", "ofNullable", "(", "id", ")", ";", "}", "</s>"]
["<s>", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "GET", "public", "Response", "showWithQueryParamResponse", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "id", ")", "{", "return", "Response", ".", "ok", "(", "Optional", ".", "ofNullable", "(", "id", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "OptionalCookieParamResource", ".", "class", ")", ".", "register", "(", "MyMessageParamConverterProvider", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMessageIsNotPresent", "(", ")", "{", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageIsBlank", "(", ")", "{", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "cookie", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageIsPresent", "(", ")", "{", "String", "customMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "cookie", "(", "\"", "<STR_LIT>", "\"", ",", "customMessage", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "customMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMyMessageIsNotPresent", "(", ")", "{", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMyMessageWhenMyMessageIsPresent", "(", ")", "{", "String", "myMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "cookie", "(", "\"", "<STR_LIT>", "\"", ",", "myMessage", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "myMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "BadRequestException", ".", "class", ")", "public", "void", "shouldThrowBadRequestExceptionWhenInvalidUUIDIsPresent", "(", ")", "{", "String", "invalidUUID", "=", "\"", "<STR_LIT>", "\"", ";", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "cookie", "(", "\"", "<STR_LIT>", "\"", ",", "invalidUUID", ")", ".", "get", "(", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultUUIDWhenUUIDIsNotPresent", "(", ")", "{", "String", "defaultUUID", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultUUID", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnUUIDWhenValidUUIDIsPresent", "(", ")", "{", "String", "uuid", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "cookie", "(", "\"", "<STR_LIT>", "\"", ",", "uuid", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "uuid", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMessage", "(", "@", "CookieParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "message", ")", "{", "return", "message", ".", "orElse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMyMessage", "(", "@", "CookieParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "MyMessage", ">", "myMessage", ")", "{", "return", "myMessage", ".", "orElse", "(", "new", "MyMessage", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "getMessage", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getUUID", "(", "@", "CookieParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "UUIDParam", ">", "uuid", ")", "{", "return", "uuid", ".", "orElse", "(", "new", "UUIDParam", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "get", "(", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "new", "EmptyOptionalExceptionMapper", "(", ")", ")", ".", "register", "(", "OptionalDoubleReturnResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "presentOptionalsReturnTheirValue", "(", ")", "throws", "Exception", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Double", ".", "class", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "presentOptionalsReturnTheirValueWithResponse", "(", ")", "throws", "Exception", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Double", ".", "class", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "absentOptionalsThrowANotFound", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Double", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "GET", "public", "OptionalDouble", "showWithQueryParam", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalDouble", "id", ")", "{", "return", "id", ";", "}", "</s>"]
["<s>", "@", "POST", "public", "OptionalDouble", "showWithFormParam", "(", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalDouble", "id", ")", "{", "return", "id", ";", "}", "</s>"]
["<s>", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "GET", "public", "Response", "showWithQueryParamResponse", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalDouble", "id", ")", "{", "return", "Response", ".", "ok", "(", "id", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "new", "EmptyOptionalExceptionMapper", "(", ")", ")", ".", "register", "(", "OptionalIntReturnResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "presentOptionalsReturnTheirValue", "(", ")", "throws", "Exception", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Integer", ".", "class", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "presentOptionalsReturnTheirValueWithResponse", "(", ")", "throws", "Exception", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Integer", ".", "class", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "absentOptionalsThrowANotFound", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Integer", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "GET", "public", "OptionalInt", "showWithQueryParam", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalInt", "id", ")", "{", "return", "id", ";", "}", "</s>"]
["<s>", "@", "POST", "public", "OptionalInt", "showWithFormParam", "(", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalInt", "id", ")", "{", "return", "id", ";", "}", "</s>"]
["<s>", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "GET", "public", "Response", "showWithQueryParamResponse", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalInt", "id", ")", "{", "return", "Response", ".", "ok", "(", "id", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "OptionalHeaderParamResource", ".", "class", ")", ".", "register", "(", "MyMessageParamConverterProvider", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMessageIsNotPresent", "(", ")", "{", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageIsBlank", "(", ")", "{", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageIsPresent", "(", ")", "{", "String", "customMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "customMessage", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "customMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMyMessageIsNotPresent", "(", ")", "{", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMyMessageWhenMyMessageIsPresent", "(", ")", "{", "String", "myMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "myMessage", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "myMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "BadRequestException", ".", "class", ")", "public", "void", "shouldThrowBadRequestExceptionWhenInvalidUUIDIsPresent", "(", ")", "{", "String", "invalidUUID", "=", "\"", "<STR_LIT>", "\"", ";", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "invalidUUID", ")", ".", "get", "(", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultUUIDWhenUUIDIsNotPresent", "(", ")", "{", "String", "defaultUUID", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultUUID", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnUUIDWhenValidUUIDIsPresent", "(", ")", "{", "String", "uuid", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "uuid", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "uuid", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMessage", "(", "@", "HeaderParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "message", ")", "{", "return", "message", ".", "orElse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMyMessage", "(", "@", "HeaderParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "MyMessage", ">", "myMessage", ")", "{", "return", "myMessage", ".", "orElse", "(", "new", "MyMessage", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "getMessage", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getUUID", "(", "@", "HeaderParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "UUIDParam", ">", "uuid", ")", "{", "return", "uuid", ".", "orElse", "(", "new", "UUIDParam", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "get", "(", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "new", "EmptyOptionalExceptionMapper", "(", ")", ")", ".", "register", "(", "OptionalLongReturnResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "presentOptionalsReturnTheirValue", "(", ")", "throws", "Exception", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Long", ".", "class", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "presentOptionalsReturnTheirValueWithResponse", "(", ")", "throws", "Exception", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Long", ".", "class", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "absentOptionalsThrowANotFound", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Long", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "GET", "public", "OptionalLong", "showWithQueryParam", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalLong", "id", ")", "{", "return", "id", ";", "}", "</s>"]
["<s>", "@", "POST", "public", "OptionalLong", "showWithFormParam", "(", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalLong", "id", ")", "{", "return", "id", ";", "}", "</s>"]
["<s>", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "GET", "public", "Response", "showWithQueryParamResponse", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "OptionalLong", "id", ")", "{", "return", "Response", ".", "ok", "(", "id", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "OptionalQueryParamResource", ".", "class", ")", ".", "register", "(", "MyMessageParamConverterProvider", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMessageIsNotPresent", "(", ")", "{", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageIsPresent", "(", ")", "{", "String", "customMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "customMessage", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "customMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageIsBlank", "(", ")", "{", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDecodedMessageWhenEncodedMessageIsPresent", "(", ")", "{", "String", "encodedMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "decodedMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "encodedMessage", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "decodedMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMyMessageIsNotPresent", "(", ")", "{", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMyMessageWhenMyMessageIsPresent", "(", ")", "{", "String", "myMessage", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "myMessage", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "myMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "BadRequestException", ".", "class", ")", "public", "void", "shouldThrowBadRequestExceptionWhenInvalidUUIDIsPresent", "(", ")", "{", "String", "invalidUUID", "=", "\"", "<STR_LIT>", "\"", ";", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "invalidUUID", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultUUIDWhenUUIDIsNotPresent", "(", ")", "{", "String", "defaultUUID", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "defaultUUID", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnUUIDWhenValidUUIDIsPresent", "(", ")", "{", "String", "uuid", "=", "\"", "<STR_LIT>", "\"", ";", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "uuid", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "uuid", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMessage", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "message", ")", "{", "return", "message", ".", "orElse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMyMessage", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "MyMessage", ">", "myMessage", ")", "{", "return", "myMessage", ".", "orElse", "(", "new", "MyMessage", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "getMessage", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getUUID", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "UUIDParam", ">", "uuid", ")", "{", "return", "uuid", ".", "orElse", "(", "new", "UUIDParam", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "get", "(", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "OptionalFormParamResource", ".", "class", ")", ".", "register", "(", "MyMessageParamConverterProvider", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMessageIsNotPresent", "(", ")", "throws", "IOException", "{", "final", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "new", "MultivaluedStringMap", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageBlank", "(", ")", "throws", "IOException", "{", "final", "Form", "form", "=", "new", "Form", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "form", ")", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenMessageIsPresent", "(", ")", "throws", "IOException", "{", "final", "String", "customMessage", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Form", "form", "=", "new", "Form", "(", "\"", "<STR_LIT>", "\"", ",", "customMessage", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "form", ")", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "customMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenMyMessageIsNotPresent", "(", ")", "throws", "IOException", "{", "final", "String", "defaultMessage", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "new", "MultivaluedStringMap", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "defaultMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMyMessageWhenMyMessageIsPresent", "(", ")", "throws", "IOException", "{", "final", "String", "myMessage", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Form", "form", "=", "new", "Form", "(", "\"", "<STR_LIT>", "\"", ",", "myMessage", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "form", ")", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "myMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldThrowBadRequestExceptionWhenInvalidUUIDIsPresent", "(", ")", "throws", "IOException", "{", "final", "String", "invalidUUID", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Form", "form", "=", "new", "Form", "(", "\"", "<STR_LIT>", "\"", ",", "invalidUUID", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "form", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ".", "getStatusCode", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultUUIDWhenUUIDIsNotPresent", "(", ")", "throws", "IOException", "{", "final", "String", "defaultUUID", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "new", "MultivaluedStringMap", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "defaultUUID", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnUUIDWhenValidUUIDIsPresent", "(", ")", "throws", "IOException", "{", "final", "String", "uuid", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Form", "form", "=", "new", "Form", "(", "\"", "<STR_LIT>", "\"", ",", "uuid", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "form", ")", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "uuid", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMessage", "(", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "message", ")", "{", "return", "message", ".", "orElse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMyMessage", "(", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "MyMessage", ">", "myMessage", ")", "{", "return", "myMessage", ".", "orElse", "(", "new", "MyMessage", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "getMessage", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getUUID", "(", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "UUIDParam", ">", "uuid", ")", "{", "return", "uuid", ".", "orElse", "(", "new", "UUIDParam", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "get", "(", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesInstants", "(", ")", "throws", "Exception", "{", "final", "InstantParam", "param", "=", "new", "InstantParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "Instant", ".", "ofEpochMilli", "(", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesDateTimes", "(", ")", "throws", "Exception", "{", "final", "ZonedDateTimeParam", "param", "=", "new", "ZonedDateTimeParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "ZonedDateTime", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT:11>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "0", ",", "0", ",", "ZoneId", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesDateTimes", "(", ")", "throws", "Exception", "{", "final", "LocalDateParam", "param", "=", "new", "LocalDateParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "LocalDate", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT:11>", ",", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesDateTimes", "(", ")", "throws", "Exception", "{", "final", "LocalDateTimeParam", "param", "=", "new", "LocalDateTimeParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "LocalDateTime", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT:11>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesInstants", "(", ")", "throws", "Exception", "{", "final", "InstantSecondParam", "param", "=", "new", "InstantSecondParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "Instant", ".", "ofEpochSecond", "(", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesDateTimes", "(", ")", "throws", "Exception", "{", "final", "LocalTimeParam", "param", "=", "new", "LocalTimeParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "LocalTime", ".", "of", "(", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesDateTimes", "(", ")", "throws", "Exception", "{", "final", "YearMonthParam", "param", "=", "new", "YearMonthParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "YearMonth", ".", "of", "(", "<NUM_LIT>", ",", "Month", ".", "NOVEMBER", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesDateTimes", "(", ")", "throws", "Exception", "{", "final", "ZoneIdParam", "param", "=", "new", "ZoneIdParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "ZoneId", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesDateTimes", "(", ")", "throws", "Exception", "{", "final", "OffsetDateTimeParam", "param", "=", "new", "OffsetDateTimeParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "OffsetDateTime", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT:11>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "0", ",", "0", ",", "ZoneOffset", ".", "ofHours", "(", "1", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesDateTimes", "(", ")", "throws", "Exception", "{", "final", "YearParam", "param", "=", "new", "YearParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "Year", ".", "of", "(", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "TestContainerFactory", "getTestContainerFactory", "(", ")", "throws", "TestContainerException", "{", "return", "new", "GrizzlyWebTestContainerFactory", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DeploymentContext", "configureDeployment", "(", ")", "{", "final", "ResourceConfig", "rc", "=", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ";", "return", "ServletDeploymentContext", ".", "builder", "(", "rc", ")", ".", "initParam", "(", "ServletProperties", ".", "JAXRS_APPLICATION_CLASS", ",", "DropwizardResourceConfig", ".", "class", ".", "getName", "(", ")", ")", ".", "initParam", "(", "ServerProperties", ".", "PROVIDER_CLASSNAMES", ",", "FlashResource", ".", "class", ".", "getName", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "passesInHttpSessions", "(", ")", "throws", "Exception", "{", "Response", "firstResponse", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "TEXT_PLAIN", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT>", "\"", ",", "MediaType", ".", "TEXT_PLAIN", ")", ")", ";", "final", "Map", "<", "String", ",", "NewCookie", ">", "cookies", "=", "firstResponse", ".", "getCookies", "(", ")", ";", "firstResponse", ".", "close", "(", ")", ";", "Invocation", ".", "Builder", "builder", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "accept", "(", "MediaType", ".", "TEXT_PLAIN", ")", ";", "for", "(", "NewCookie", "cookie", ":", "cookies", ".", "values", "(", ")", ")", "{", "builder", "=", "builder", ".", "cookie", "(", "cookie", ")", ";", "}", "final", "String", "secondResponse", "=", "builder", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "secondResponse", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Invocation", ".", "Builder", "anotherBuilder", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "accept", "(", "MediaType", ".", "TEXT_PLAIN", ")", ";", "for", "(", "NewCookie", "cookie", ":", "cookies", ".", "values", "(", ")", ")", "{", "anotherBuilder", "=", "anotherBuilder", ".", "cookie", "(", "cookie", ")", ";", "}", "final", "String", "thirdResponse", "=", "anotherBuilder", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "thirdResponse", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "TestContainerFactory", "getTestContainerFactory", "(", ")", "throws", "TestContainerException", "{", "return", "new", "GrizzlyWebTestContainerFactory", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DeploymentContext", "configureDeployment", "(", ")", "{", "final", "ResourceConfig", "rc", "=", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ";", "return", "ServletDeploymentContext", ".", "builder", "(", "rc", ")", ".", "initParam", "(", "ServletProperties", ".", "JAXRS_APPLICATION_CLASS", ",", "DropwizardResourceConfig", ".", "class", ".", "getName", "(", ")", ")", ".", "initParam", "(", "ServerProperties", ".", "PROVIDER_CLASSNAMES", ",", "SessionResource", ".", "class", ".", "getName", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "passesInHttpSessions", "(", ")", "throws", "Exception", "{", "Response", "firstResponse", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "TEXT_PLAIN", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT>", "\"", ",", "MediaType", ".", "TEXT_PLAIN", ")", ")", ";", "final", "Map", "<", "String", ",", "NewCookie", ">", "cookies", "=", "firstResponse", ".", "getCookies", "(", ")", ";", "firstResponse", ".", "close", "(", ")", ";", "Invocation", ".", "Builder", "builder", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "accept", "(", "MediaType", ".", "TEXT_PLAIN", ")", ";", "for", "(", "NewCookie", "cookie", ":", "cookies", ".", "values", "(", ")", ")", "{", "builder", ".", "cookie", "(", "cookie", ")", ";", "}", "assertThat", "(", "builder", ".", "get", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "String", "getName", "(", "@", "Session", "HttpSession", "session", ")", "{", "return", "Objects", ".", "toString", "(", "session", ".", "getAttribute", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "public", "void", "setName", "(", "@", "Session", "HttpSession", "session", ",", "String", "name", ")", "{", "session", ".", "setAttribute", "(", "\"", "<STR_LIT>", "\"", ",", "name", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "public", "void", "setName", "(", "@", "Session", "Flash", "<", "String", ">", "flash", ",", "String", "name", ")", "{", "flash", ".", "set", "(", "name", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "String", "getName", "(", "@", "Session", "Flash", "<", "String", ">", "flash", ")", "{", "return", "Objects", ".", "toString", "(", "flash", ".", "get", "(", ")", ".", "orElse", "(", "null", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesDateTimes", "(", ")", "throws", "Exception", "{", "final", "InstantParam", "param", "=", "new", "InstantParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Instant", "instant", "=", "LocalDateTime", ".", "of", "(", "<NUM_LIT>", ",", "<NUM_LIT:11>", ",", "<NUM_LIT>", ",", "0", ",", "0", ")", ".", "toInstant", "(", "ZoneOffset", ".", "UTC", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "instant", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "nullThrowsAnException", "(", ")", "throws", "Exception", "{", "try", "{", "new", "InstantParam", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "final", "Response", "response", "=", "e", ".", "getResponse", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "ErrorMessage", "entity", "=", "(", "ErrorMessage", ")", "response", ".", "getEntity", "(", ")", ";", "assertThat", "(", "entity", ".", "getCode", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "entity", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "trueReturnsTrue", "(", ")", "throws", "Exception", "{", "final", "BooleanParam", "param", "=", "new", "BooleanParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "uppercaseTrueReturnsTrue", "(", ")", "throws", "Exception", "{", "final", "BooleanParam", "param", "=", "new", "BooleanParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "falseReturnsFalse", "(", ")", "throws", "Exception", "{", "final", "BooleanParam", "param", "=", "new", "BooleanParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "uppercaseFalseReturnsFalse", "(", ")", "throws", "Exception", "{", "final", "BooleanParam", "param", "=", "new", "BooleanParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "nullThrowsAnException", "(", ")", "throws", "Exception", "{", "try", "{", "new", "BooleanParam", "(", "null", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "final", "Response", "response", "=", "e", ".", "getResponse", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "ErrorMessage", "entity", "=", "(", "ErrorMessage", ")", "response", ".", "getEntity", "(", ")", ";", "assertThat", "(", "entity", ".", "getCode", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "entity", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:.>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "nonBooleanValuesThrowAnException", "(", ")", "throws", "Exception", "{", "try", "{", "new", "BooleanParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "final", "Response", "response", "=", "e", ".", "getResponse", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "ErrorMessage", "entity", "=", "(", "ErrorMessage", ")", "response", ".", "getEntity", "(", ")", ";", "assertThat", "(", "entity", ".", "getCode", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "entity", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:.>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesLocalDates", "(", ")", "throws", "Exception", "{", "final", "LocalDateParam", "param", "=", "new", "LocalDateParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "new", "LocalDate", "(", "<NUM_LIT>", ",", "<NUM_LIT:11>", ",", "<NUM_LIT:20>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "aBlankStringIsAnAbsentString", "(", ")", "throws", "Exception", "{", "final", "NonEmptyStringParam", "param", "=", "new", "NonEmptyStringParam", "(", "\"", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "empty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "aNullStringIsAnAbsentString", "(", ")", "throws", "Exception", "{", "final", "NonEmptyStringParam", "param", "=", "new", "NonEmptyStringParam", "(", "null", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "empty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "aStringWithContentIsItself", "(", ")", "throws", "Exception", "{", "final", "NonEmptyStringParam", "param", "=", "new", "NonEmptyStringParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parseSizeKilobytes", "(", ")", "throws", "Exception", "{", "final", "SizeParam", "param", "=", "new", "SizeParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "Size", ".", "kilobytes", "(", "<NUM_LIT:10>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "badValueThrowsException", "(", ")", "throws", "Exception", "{", "final", "Throwable", "exn", "=", "catchThrowable", "(", "(", ")", "-", ">", "new", "SizeParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "exn", ")", ".", "isInstanceOf", "(", "WebApplicationException", ".", "class", ")", ";", "final", "Response", "response", "=", "(", "(", "WebApplicationException", ")", "exn", ")", ".", "getResponse", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "(", "ErrorMessage", ")", "response", ".", "getEntity", "(", ")", ")", ".", "isEqualTo", "(", "new", "ErrorMessage", "(", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parseDurationSeconds", "(", ")", "throws", "Exception", "{", "final", "DurationParam", "param", "=", "new", "DurationParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:10>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "badValueThrowsException", "(", ")", "throws", "Exception", "{", "try", "{", "new", "DurationParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "final", "Response", "response", "=", "e", ".", "getResponse", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "ErrorMessage", "entity", "=", "(", "ErrorMessage", ")", "response", ".", "getEntity", "(", ")", ";", "assertThat", "(", "entity", ".", "getCode", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "entity", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "aLongReturnsALong", "(", ")", "throws", "Exception", "{", "final", "LongParam", "param", "=", "new", "LongParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "aNonIntegerThrowsAnException", "(", ")", "throws", "Exception", "{", "try", "{", "new", "LongParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "final", "Response", "response", "=", "e", ".", "getResponse", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "ErrorMessage", "entity", "=", "(", "ErrorMessage", ")", "response", ".", "getEntity", "(", ")", ";", "assertThat", "(", "entity", ".", "getCode", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "entity", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "NonEmptyStringParamResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenNonExistent", "(", ")", "{", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:Hello>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenEmptyString", "(", ")", "{", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:Hello>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnDefaultMessageWhenNull", "(", ")", "{", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:Hello>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnMessageWhenSpecified", "(", ")", "{", "String", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMessage", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "NonEmptyStringParam", "message", ")", "{", "return", "message", ".", "get", "(", ")", ".", "orElse", "(", "\"", "<STR_LIT:Hello>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesDateTimes", "(", ")", "throws", "Exception", "{", "final", "DateTimeParam", "param", "=", "new", "DateTimeParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "new", "DateTime", "(", "<NUM_LIT>", ",", "<NUM_LIT:11>", ",", "<NUM_LIT>", ",", "0", ",", "0", ",", "DateTimeZone", ".", "UTC", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "anIntegerReturnsAnInteger", "(", ")", "throws", "Exception", "{", "final", "IntParam", "param", "=", "new", "IntParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "aNonIntegerThrowsAnException", "(", ")", "throws", "Exception", "{", "try", "{", "new", "IntParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "final", "Response", "response", "=", "e", ".", "getResponse", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "ErrorMessage", "entity", "=", "(", "ErrorMessage", ")", "response", ".", "getEntity", "(", ")", ";", "assertThat", "(", "entity", ".", "getCode", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "entity", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "aUUIDStringReturnsAUUIDObject", "(", ")", "throws", "Exception", "{", "final", "String", "uuidString", "=", "\"", "<STR_LIT>", "\"", ";", "final", "UUID", "uuid", "=", "UUID", ".", "fromString", "(", "uuidString", ")", ";", "final", "UUIDParam", "param", "=", "new", "UUIDParam", "(", "uuidString", ")", ";", "assertThat", "(", "param", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "uuid", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "aNonUUIDThrowsAnException", "(", ")", "throws", "Exception", "{", "try", "{", "new", "UUIDParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "final", "Response", "response", "=", "e", ".", "getResponse", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "ErrorMessage", "entity", "=", "(", "ErrorMessage", ")", "response", ".", "getEntity", "(", ")", ";", "assertThat", "(", "entity", ".", "getCode", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "entity", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "requestIdFilter", ".", "setLogger", "(", "logger", ")", ";", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "UriInfo", "uriInfo", "=", "Mockito", ".", "mock", "(", "UriInfo", ".", "class", ")", ";", "when", "(", "uriInfo", ".", "getPath", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "when", "(", "request", ".", "getUriInfo", "(", ")", ")", ".", "thenReturn", "(", "uriInfo", ")", ";", "when", "(", "response", ".", "getStatus", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "when", "(", "response", ".", "getLength", "(", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "when", "(", "response", ".", "getHeaders", "(", ")", ")", ".", "thenReturn", "(", "headers", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addsRandomRequestIdHeader", "(", ")", "throws", "Exception", "{", "requestIdFilter", ".", "filter", "(", "request", ",", "response", ")", ";", "String", "requestId", "=", "(", "String", ")", "headers", ".", "getFirst", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "requestId", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "UUID", ".", "fromString", "(", "requestId", ")", ")", ".", "isNotNull", "(", ")", ";", "verify", "(", "logger", ")", ".", "trace", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:GET>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "requestId", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotAddRandomRequestIdHeaderIfItExists", "(", ")", "throws", "Exception", "{", "String", "existedRequestId", "=", "\"", "<STR_LIT>", "\"", ";", "headers", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "existedRequestId", ")", ";", "when", "(", "request", ".", "getHeaderString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "existedRequestId", ")", ";", "requestIdFilter", ".", "filter", "(", "request", ",", "response", ")", ";", "String", "requestId", "=", "(", "String", ")", "headers", ".", "getFirst", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "requestId", ")", ".", "isEqualTo", "(", "existedRequestId", ")", ";", "verify", "(", "logger", ")", ".", "trace", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:GET>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "requestId", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSetsCurrentTimeProperty", "(", ")", "throws", "Exception", "{", "runtimeFilter", ".", "setCurrentTimeProvider", "(", "(", ")", "-", ">", "<NUM_LIT>", ")", ";", "runtimeFilter", ".", "filter", "(", "request", ")", ";", "Mockito", ".", "verify", "(", "request", ")", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAddsXRuntimeHeader", "(", ")", "throws", "Exception", "{", "MultivaluedMap", "<", "String", ",", "Object", ">", "headers", "=", "new", "MultivaluedHashMap", "<", ">", "(", ")", ";", "when", "(", "response", ".", "getHeaders", "(", ")", ")", ".", "thenReturn", "(", "headers", ")", ";", "when", "(", "request", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "thenReturn", "(", "<NUM_LIT>", ")", ";", "runtimeFilter", ".", "setCurrentTimeProvider", "(", "(", ")", "-", ">", "<NUM_LIT>", ")", ";", "runtimeFilter", ".", "filter", "(", "request", ",", "response", ")", ";", "assertThat", "(", "headers", ".", "getFirst", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSetsCharsetEncoding", "(", ")", "throws", "Exception", "{", "when", "(", "response", ".", "getMediaType", "(", ")", ")", ".", "thenReturn", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ";", "MultivaluedMap", "<", "String", ",", "Object", ">", "headers", "=", "new", "MultivaluedHashMap", "<", ">", "(", ")", ";", "headers", ".", "add", "(", "HttpHeaders", ".", "CONTENT_TYPE", ",", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ";", "when", "(", "response", ".", "getHeaders", "(", ")", ")", ".", "thenReturn", "(", "headers", ")", ";", "charsetUtf8Filter", ".", "filter", "(", "request", ",", "response", ")", ";", "assertThat", "(", "(", "MediaType", ")", "headers", ".", "getFirst", "(", "HttpHeaders", ".", "CONTENT_TYPE", ")", ")", ".", "isEqualTo", "(", "MediaType", ".", "valueOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUpFilter", "(", ")", "{", "filter", ".", "init", "(", "config", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "TestContainerFactory", "getTestContainerFactory", "(", ")", "throws", "TestContainerException", "{", "return", "new", "GrizzlyWebTestContainerFactory", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DeploymentContext", "configureDeployment", "(", ")", "{", "final", "ResourceConfig", "rc", "=", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ";", "final", "Map", "<", "String", ",", "String", ">", "filterParams", "=", "ImmutableMap", ".", "of", "(", "AllowedMethodsFilter", ".", "ALLOWED_METHODS_PARAM", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "ServletDeploymentContext", ".", "builder", "(", "rc", ")", ".", "addFilter", "(", "AllowedMethodsFilter", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "filterParams", ")", ".", "initParam", "(", "ServletProperties", ".", "JAXRS_APPLICATION_CLASS", ",", "DropwizardResourceConfig", ".", "class", ".", "getName", "(", ")", ")", ".", "initParam", "(", "ServerProperties", ".", "PROVIDER_CLASSNAMES", ",", "DummyResource", ".", "class", ".", "getName", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "int", "getResponseStatusForRequestMethod", "(", "String", "method", ",", "boolean", "includeEntity", ")", "{", "final", "Response", "resourceResponse", "=", "includeEntity", "?", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "method", "(", "method", ",", "Entity", ".", "entity", "(", "\"", "\"", ",", "MediaType", ".", "TEXT_PLAIN", ")", ")", ":", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "method", "(", "method", ")", ";", "try", "{", "return", "resourceResponse", ".", "getStatus", "(", ")", ";", "}", "finally", "{", "resourceResponse", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetRequestAllowed", "(", ")", "{", "assertEquals", "(", "OK_STATUS_CODE", ",", "getResponseStatusForRequestMethod", "(", "\"", "<STR_LIT:GET>", "\"", ",", "false", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPostRequestAllowed", "(", ")", "{", "assertEquals", "(", "OK_STATUS_CODE", ",", "getResponseStatusForRequestMethod", "(", "\"", "<STR_LIT:POST>", "\"", ",", "true", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPutRequestBlocked", "(", ")", "{", "assertEquals", "(", "DISALLOWED_STATUS_CODE", ",", "getResponseStatusForRequestMethod", "(", "\"", "<STR_LIT>", "\"", ",", "true", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDeleteRequestBlocked", "(", ")", "{", "assertEquals", "(", "DISALLOWED_STATUS_CODE", ",", "getResponseStatusForRequestMethod", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testTraceRequestBlocked", "(", ")", "{", "assertEquals", "(", "DISALLOWED_STATUS_CODE", ",", "getResponseStatusForRequestMethod", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "allowsAllowedMethod", "(", ")", "throws", "Exception", "{", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "filter", ".", "doFilter", "(", "request", ",", "response", ",", "chain", ")", ";", "verify", "(", "chain", ")", ".", "doFilter", "(", "request", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "blocksDisallowedMethod", "(", ")", "throws", "Exception", "{", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "filter", ".", "doFilter", "(", "request", ",", "response", ",", "chain", ")", ";", "verify", "(", "chain", ",", "never", "(", ")", ")", ".", "doFilter", "(", "request", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "disallowedMethodCausesMethodNotAllowedResponse", "(", ")", "throws", "IOException", ",", "ServletException", "{", "when", "(", "request", ".", "getMethod", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "filter", ".", "doFilter", "(", "request", ",", "response", ",", "chain", ")", ";", "verify", "(", "response", ")", ".", "sendError", "(", "eq", "(", "DISALLOWED_STATUS_CODE", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "Response", "get", "(", ")", "{", "return", "Response", ".", "ok", "(", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "public", "Response", "post", "(", ")", "{", "return", "Response", ".", "ok", "(", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "PATCH", "public", "Response", "patch", "(", ")", "{", "return", "Response", ".", "ok", "(", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "PUT", "public", "Response", "put", "(", ")", "{", "return", "Response", ".", "ok", "(", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "DELETE", "public", "Response", "delete", "(", ")", "{", "return", "Response", ".", "ok", "(", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testToReponse", "(", ")", "{", "final", "Response", "reponse", "=", "mapper", ".", "toResponse", "(", "new", "EofException", "(", ")", ")", ";", "Assert", ".", "assertEquals", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ".", "getStatusCode", "(", ")", ",", "reponse", ".", "getStatus", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "register", "(", "DefaultLoggingExceptionMapper", ".", "class", ")", ".", "register", "(", "DefaultJacksonMessageBodyProvider", ".", "class", ")", ".", "register", "(", "ExceptionResource", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsAnErrorMessage", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "final", "Response", "response", "=", "e", ".", "getResponse", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "startsWith", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesJsonMappingException", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "final", "Response", "response", "=", "e", ".", "getResponse", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "startsWith", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesMethodNotAllowedWithHeaders", "(", ")", "{", "final", "Throwable", "thrown", "=", "catchThrowable", "(", "(", ")", "-", ">", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:A>", "\"", ")", ",", "String", ".", "class", ")", ")", ";", "assertThat", "(", "thrown", ")", ".", "isInstanceOf", "(", "WebApplicationException", ".", "class", ")", ";", "final", "Response", "resp", "=", "(", "(", "WebApplicationException", ")", "thrown", ")", ".", "getResponse", "(", ")", ";", "assertThat", "(", "resp", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "resp", ".", "getHeaders", "(", ")", ")", ".", "contains", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "resp", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "formatsWebApplicationException", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "final", "Response", "response", "=", "e", ".", "getResponse", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesRedirectInWebApplicationException", "(", ")", "{", "String", "responseText", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "responseText", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT:OK>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "String", "show", "(", ")", "throws", "IOException", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "jsonMappingException", "(", ")", "throws", "JsonMappingException", "{", "throw", "new", "JsonMappingException", "(", "new", "StringReader", "(", "\"", "\"", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "webApplicationException", "(", ")", "throws", "WebApplicationException", "{", "throw", "new", "WebApplicationException", "(", "\"", "<STR_LIT>", "\"", ",", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "webApplicationExceptionWithRedirect", "(", ")", "throws", "WebApplicationException", "{", "URI", "redirectPath", "=", "UriBuilder", ".", "fromPath", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "throw", "new", "WebApplicationException", "(", "Response", ".", "seeOther", "(", "redirectPath", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Response", "redirectTarget", "(", ")", "{", "return", "Response", ".", "ok", "(", ")", ".", "entity", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT:OK>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Produces", "(", "MediaType", ".", "TEXT_HTML", ")", "public", "void", "htmlException", "(", ")", "throws", "WebApplicationException", "{", "throw", "new", "WebApplicationException", "(", "\"", "<STR_LIT>", "\"", ",", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ";", "}", "</s>"]
["<s>", "public", "DefaultJacksonMessageBodyProvider", "(", ")", "{", "super", "(", "Jackson", ".", "newObjectMapper", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "ErrorEntityWriterTestResourceConfig", "(", ")", "{", "super", "(", "true", ",", "new", "MetricRegistry", "(", ")", ")", ";", "register", "(", "DefaultLoggingExceptionMapper", ".", "class", ")", ";", "register", "(", "DefaultJacksonMessageBodyProvider", ".", "class", ")", ";", "register", "(", "ExceptionResource", ".", "class", ")", ";", "register", "(", "new", "ErrorEntityWriter", "<", "ErrorMessage", ",", "String", ">", "(", "MediaType", ".", "TEXT_HTML_TYPE", ",", "String", ".", "class", ")", "{", "@", "Override", "protected", "String", "getRepresentation", "(", "ErrorMessage", "entity", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "entity", ".", "getMessage", "(", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "getRepresentation", "(", "ErrorMessage", "entity", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "entity", ".", "getMessage", "(", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "TestContainerFactory", "getTestContainerFactory", "(", ")", "throws", "TestContainerException", "{", "return", "new", "GrizzlyWebTestContainerFactory", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DeploymentContext", "configureDeployment", "(", ")", "{", "final", "ResourceConfig", "rc", "=", "new", "ErrorEntityWriterTestResourceConfig", "(", ")", ";", "return", "ServletDeploymentContext", ".", "builder", "(", "rc", ")", ".", "initParam", "(", "ServletProperties", ".", "JAXRS_APPLICATION_CLASS", ",", "ErrorEntityWriterTestResourceConfig", ".", "class", ".", "getName", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "formatsErrorsAsHtml", "(", ")", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "TEXT_HTML_TYPE", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "final", "Response", "response", "=", "e", ".", "getResponse", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getMediaType", "(", ")", ")", ".", "isEqualTo", "(", "MediaType", ".", "TEXT_HTML_TYPE", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "delegatesToParentClass", "(", ")", "{", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "final", "Response", "reponse", "=", "mapper", ".", "toResponse", "(", "new", "IllegalStateException", "(", "getClass", "(", ")", ".", "getName", "(", ")", ")", "{", "}", ")", ";", "assertThat", "(", "reponse", ".", "getStatusInfo", "(", ")", ")", ".", "isEqualTo", "(", "INTERNAL_SERVER_ERROR", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "handlesFormParamContentTypeError", "(", ")", "{", "final", "Response", "reponse", "=", "mapper", ".", "toResponse", "(", "new", "IllegalStateException", "(", "LocalizationMessages", ".", "FORM_PARAM_CONTENT_TYPE_ERROR", "(", ")", ")", ")", ";", "assertThat", "(", "reponse", ".", "getStatusInfo", "(", ")", ")", ".", "isEqualTo", "(", "UNSUPPORTED_MEDIA_TYPE", ")", ";", "assertThat", "(", "reponse", ".", "getEntity", "(", ")", ")", ".", "isInstanceOf", "(", "ErrorMessage", ".", "class", ")", ";", "assertThat", "(", "(", "(", "ErrorMessage", ")", "reponse", ".", "getEntity", "(", ")", ")", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "new", "NotSupportedException", "(", ")", ".", "getLocalizedMessage", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "ResourceConfig", "rc", "=", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ";", "rc", "=", "rc", ".", "register", "(", "CachingResource", ".", "class", ")", ";", "return", "rc", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "immutableResponsesHaveCacheControlHeaders", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "CACHE_CONTROL", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "privateResponsesHaveCacheControlHeaders", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "CACHE_CONTROL", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "maxAgeResponsesHaveCacheControlHeaders", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "CACHE_CONTROL", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "noCacheResponsesHaveCacheControlHeaders", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "CACHE_CONTROL", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "noStoreResponsesHaveCacheControlHeaders", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "CACHE_CONTROL", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "noTransformResponsesHaveCacheControlHeaders", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "CACHE_CONTROL", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mustRevalidateResponsesHaveCacheControlHeaders", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "CACHE_CONTROL", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "proxyRevalidateResponsesHaveCacheControlHeaders", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "CACHE_CONTROL", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sharedMaxAgeResponsesHaveCacheControlHeaders", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "CACHE_CONTROL", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "CacheControl", "(", "immutable", "=", "true", ")", "public", "String", "showImmutable", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "CacheControl", "(", "isPrivate", "=", "true", ")", "public", "String", "showPrivate", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "CacheControl", "(", "maxAge", "=", "<NUM_LIT>", ",", "maxAgeUnit", "=", "TimeUnit", ".", "DAYS", ")", "public", "String", "showMaxAge", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "CacheControl", "(", "noCache", "=", "true", ")", "public", "String", "showNoCache", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "CacheControl", "(", "noStore", "=", "true", ")", "public", "String", "showNoStore", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "CacheControl", "(", "noTransform", "=", "false", ")", "public", "String", "showNoTransform", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "CacheControl", "(", "mustRevalidate", "=", "true", ")", "public", "String", "showMustRevalidate", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "CacheControl", "(", "proxyRevalidate", "=", "true", ")", "public", "String", "showProxyRevalidate", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "CacheControl", "(", "sharedMaxAge", "=", "<NUM_LIT>", ",", "sharedMaxAgeUnit", "=", "TimeUnit", ".", "HOURS", ")", "public", "String", "showSharedMaxAge", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isFail", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAccessors", "(", ")", "{", "final", "Set", "<", "?", "extends", "ConstraintViolation", "<", "?", ">", ">", "violations", "=", "ImmutableSet", ".", "of", "(", ")", ";", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "final", "Inflector", "<", "Request", ",", "?", ">", "inf", "=", "mock", "(", "Inflector", ".", "class", ")", ";", "final", "Invocable", "inv", "=", "Invocable", ".", "create", "(", "inf", ")", ";", "final", "JerseyViolationException", "test", "=", "new", "JerseyViolationException", "(", "violations", ",", "inv", ")", ";", "assertSame", "(", "inv", ",", "test", ".", "getInvocable", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "FailingExample", "getExample", "(", ")", "{", "return", "example", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setExample", "(", "FailingExample", "example", ")", "{", "this", ".", "example", "=", "example", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ValidRepresentation", "repr", "(", "ValidRepresentation", "representation", ",", "String", "xer", ")", "{", "return", "representation", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "ValidRepresentation", "getRepresentation", "(", ")", "{", "return", "representation", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setRepresentation", "(", "ValidRepresentation", "representation", ")", "{", "this", ".", "representation", "=", "representation", ";", "}", "</s>"]
["<s>", "public", "DefaultJacksonMessageBodyProvider", "(", ")", "{", "super", "(", "Jackson", ".", "newObjectMapper", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "Choice", "getChoice", "(", ")", "{", "return", "Objects", ".", "requireNonNull", "(", "choice", ")", ";", "}", "</s>"]
["<s>", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "isCoda", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "\"", "<STR_LIT:<>", "\"", "+", "this", ".", "name", "(", ")", "+", "\"", "<STR_LIT:>>", "\"", ";", "}", "</s>"]
["<s>", "ExplicitFromString", "(", "String", "code", ")", "{", "this", ".", "code", "=", "code", ";", "}", "</s>"]
["<s>", "@", "Nullable", "public", "static", "ExplicitFromString", "fromString", "(", "String", "str", ")", "{", "for", "(", "ExplicitFromString", "e", ":", "ExplicitFromString", ".", "values", "(", ")", ")", "{", "if", "(", "str", ".", "equals", "(", "e", ".", "code", ")", ")", "{", "return", "e", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "ExplicitFromStringThrowsWebApplicationException", "(", "String", "code", ")", "{", "this", ".", "code", "=", "code", ";", "}", "</s>"]
["<s>", "public", "static", "ExplicitFromStringThrowsWebApplicationException", "fromString", "(", "String", "str", ")", "{", "throw", "new", "WebApplicationException", "(", "Response", ".", "status", "(", "new", "Response", ".", "StatusType", "(", ")", "{", "@", "Override", "public", "int", "getStatusCode", "(", ")", "{", "return", "<NUM_LIT>", ";", "}", "@", "Override", "public", "Response", ".", "Status", ".", "Family", "getFamily", "(", ")", "{", "return", "Response", ".", "Status", ".", "Family", ".", "CLIENT_ERROR", ";", "}", "@", "Override", "public", "String", "getReasonPhrase", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "}", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getStatusCode", "(", ")", "{", "return", "<NUM_LIT>", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", ".", "Status", ".", "Family", "getFamily", "(", ")", "{", "return", "Response", ".", "Status", ".", "Family", ".", "CLIENT_ERROR", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getReasonPhrase", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "ExplicitFromStringThrowsOtherException", "(", "String", "code", ")", "{", "this", ".", "code", "=", "code", ";", "}", "</s>"]
["<s>", "public", "static", "ExplicitFromStringThrowsOtherException", "fromString", "(", "String", "str", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "ExplicitFromStringNonStatic", "(", "String", "code", ")", "{", "this", ".", "code", "=", "code", ";", "}", "</s>"]
["<s>", "@", "Nullable", "public", "ExplicitFromStringNonStatic", "fromString", "(", "String", "str", ")", "{", "for", "(", "ExplicitFromStringNonStatic", "e", ":", "ExplicitFromStringNonStatic", ".", "values", "(", ")", ")", "{", "if", "(", "str", ".", "equals", "(", "e", ".", "code", ")", ")", "{", "return", "e", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "ExplicitFromStringPrivate", "(", "String", "code", ")", "{", "this", ".", "code", "=", "code", ";", "}", "</s>"]
["<s>", "@", "Nullable", "private", "static", "ExplicitFromStringPrivate", "fromString", "(", "String", "str", ")", "{", "for", "(", "ExplicitFromStringPrivate", "e", ":", "ExplicitFromStringPrivate", ".", "values", "(", ")", ")", "{", "if", "(", "str", ".", "equals", "(", "e", ".", "code", ")", ")", "{", "return", "e", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "private", "<", "T", ">", "ParamConverter", "<", "T", ">", "getConverter", "(", "Class", "<", "T", ">", "rawType", ")", "{", "return", "requireNonNull", "(", "paramConverterProvider", ".", "getConverter", "(", "rawType", ",", "null", ",", "new", "Annotation", "[", "]", "{", "}", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFuzzyEnum", "(", ")", "throws", "IOException", "{", "final", "ParamConverter", "<", "Fuzzy", ">", "converter", "=", "getConverter", "(", "Fuzzy", ".", "class", ")", ";", "assertThat", "(", "converter", ".", "fromString", "(", "null", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "converter", ".", "fromString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isSameAs", "(", "Fuzzy", ".", "A_1", ")", ";", "assertThat", "(", "converter", ".", "fromString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isSameAs", "(", "Fuzzy", ".", "A_1", ")", ";", "assertThat", "(", "converter", ".", "fromString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isSameAs", "(", "Fuzzy", ".", "A_1", ")", ";", "assertThat", "(", "converter", ".", "fromString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isSameAs", "(", "Fuzzy", ".", "A_1", ")", ";", "assertThat", "(", "converter", ".", "fromString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isSameAs", "(", "Fuzzy", ".", "A_1", ")", ";", "assertThat", "(", "converter", ".", "fromString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isSameAs", "(", "Fuzzy", ".", "A_2", ")", ";", "assertThatThrownBy", "(", "(", ")", "-", ">", "converter", ".", "fromString", "(", "\"", "<STR_LIT:B>", "\"", ")", ")", ".", "isInstanceOf", "(", "WebApplicationException", ".", "class", ")", ".", "extracting", "(", "e", "-", ">", "(", "(", "(", "WebApplicationException", ")", "e", ")", ".", "getResponse", "(", ")", ")", ".", "getEntity", "(", ")", ")", ".", "matches", "(", "e", "-", ">", "(", "(", "ErrorMessage", ")", "e", "[", "0", "]", ")", ".", "getCode", "(", ")", "=", "=", "<NUM_LIT>", ")", ".", "matches", "(", "e", "-", ">", "(", "(", "ErrorMessage", ")", "e", "[", "0", "]", ")", ".", "getMessage", "(", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "matches", "(", "e", "-", ">", "(", "(", "ErrorMessage", ")", "e", "[", "0", "]", ")", ".", "getMessage", "(", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testToString", "(", ")", "throws", "IOException", "{", "final", "ParamConverter", "<", "WithToString", ">", "converter", "=", "getConverter", "(", "WithToString", ".", "class", ")", ";", "assertThat", "(", "converter", ".", "toString", "(", "WithToString", ".", "A_1", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNonEnum", "(", ")", "throws", "IOException", "{", "assertThat", "(", "paramConverterProvider", ".", "getConverter", "(", "Klass", ".", "class", ",", "null", ",", "new", "Annotation", "[", "]", "{", "}", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEnumViaExplicitFromString", "(", ")", "throws", "IOException", "{", "final", "ParamConverter", "<", "ExplicitFromString", ">", "converter", "=", "getConverter", "(", "ExplicitFromString", ".", "class", ")", ";", "assertThat", "(", "converter", ".", "fromString", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ".", "isSameAs", "(", "ExplicitFromString", ".", "A", ")", ";", "assertThat", "(", "converter", ".", "fromString", "(", "\"", "<STR_LIT:2>", "\"", ")", ")", ".", "isSameAs", "(", "ExplicitFromString", ".", "B", ")", ";", "assertThatThrownBy", "(", "(", ")", "-", ">", "converter", ".", "fromString", "(", "\"", "<STR_LIT:3>", "\"", ")", ")", ".", "isInstanceOf", "(", "WebApplicationException", ".", "class", ")", ".", "extracting", "(", "e", "-", ">", "(", "(", "(", "WebApplicationException", ")", "e", ")", ".", "getResponse", "(", ")", ")", ".", "getEntity", "(", ")", ")", ".", "matches", "(", "e", "-", ">", "(", "(", "ErrorMessage", ")", "e", "[", "0", "]", ")", ".", "getCode", "(", ")", "=", "=", "<NUM_LIT>", ")", ".", "matches", "(", "e", "-", ">", "(", "(", "ErrorMessage", ")", "e", "[", "0", "]", ")", ".", "getMessage", "(", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEnumViaExplicitFromStringThatThrowsWebApplicationException", "(", ")", "throws", "IOException", "{", "final", "ParamConverter", "<", "ExplicitFromStringThrowsWebApplicationException", ">", "converter", "=", "getConverter", "(", "ExplicitFromStringThrowsWebApplicationException", ".", "class", ")", ";", "assertThatThrownBy", "(", "(", ")", "-", ">", "converter", ".", "fromString", "(", "\"", "<STR_LIT:3>", "\"", ")", ")", ".", "isInstanceOf", "(", "WebApplicationException", ".", "class", ")", ".", "extracting", "(", "e", "-", ">", "(", "(", "(", "WebApplicationException", ")", "e", ")", ".", "getResponse", "(", ")", ")", ".", "getStatusInfo", "(", ")", ")", ".", "matches", "(", "e", "-", ">", "(", "(", "Response", ".", "StatusType", ")", "e", "[", "0", "]", ")", ".", "getStatusCode", "(", ")", "=", "=", "<NUM_LIT>", ")", ".", "matches", "(", "e", "-", ">", "(", "(", "Response", ".", "StatusType", ")", "e", "[", "0", "]", ")", ".", "getReasonPhrase", "(", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEnumViaExplicitFromStringThatThrowsOtherException", "(", ")", "throws", "IOException", "{", "final", "ParamConverter", "<", "ExplicitFromStringThrowsOtherException", ">", "converter", "=", "getConverter", "(", "ExplicitFromStringThrowsOtherException", ".", "class", ")", ";", "assertThatThrownBy", "(", "(", ")", "-", ">", "converter", ".", "fromString", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ".", "isInstanceOf", "(", "WebApplicationException", ".", "class", ")", ".", "extracting", "(", "e", "-", ">", "(", "(", "(", "WebApplicationException", ")", "e", ")", ".", "getResponse", "(", ")", ")", ".", "getEntity", "(", ")", ")", ".", "matches", "(", "e", "-", ">", "(", "(", "ErrorMessage", ")", "e", "[", "0", "]", ")", ".", "getCode", "(", ")", "=", "=", "<NUM_LIT>", ")", ".", "matches", "(", "e", "-", ">", "(", "(", "ErrorMessage", ")", "e", "[", "0", "]", ")", ".", "getMessage", "(", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEnumViaExplicitFromStringNonStatic", "(", ")", "throws", "IOException", "{", "final", "ParamConverter", "<", "ExplicitFromStringNonStatic", ">", "converter", "=", "getConverter", "(", "ExplicitFromStringNonStatic", ".", "class", ")", ";", "assertThatThrownBy", "(", "(", ")", "-", ">", "converter", ".", "fromString", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ".", "isInstanceOf", "(", "WebApplicationException", ".", "class", ")", ".", "extracting", "(", "e", "-", ">", "(", "(", "(", "WebApplicationException", ")", "e", ")", ".", "getResponse", "(", ")", ")", ".", "getEntity", "(", ")", ")", ".", "matches", "(", "e", "-", ">", "(", "(", "ErrorMessage", ")", "e", "[", "0", "]", ")", ".", "getCode", "(", ")", "=", "=", "<NUM_LIT>", ")", ".", "matches", "(", "e", "-", ">", "(", "(", "ErrorMessage", ")", "e", "[", "0", "]", ")", ".", "getMessage", "(", ")", ".", "contains", "(", "\"", "<STR_LIT:A>", "\"", ")", ")", ".", "matches", "(", "e", "-", ">", "(", "(", "ErrorMessage", ")", "e", "[", "0", "]", ")", ".", "getMessage", "(", ")", ".", "contains", "(", "\"", "<STR_LIT:B>", "\"", ")", ")", ";", "assertThat", "(", "converter", ".", "fromString", "(", "\"", "<STR_LIT:A>", "\"", ")", ")", ".", "isSameAs", "(", "ExplicitFromStringNonStatic", ".", "A", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEnumViaExplicitFromStringPrivate", "(", ")", "throws", "IOException", "{", "final", "ParamConverter", "<", "ExplicitFromStringPrivate", ">", "converter", "=", "getConverter", "(", "ExplicitFromStringPrivate", ".", "class", ")", ";", "assertThatThrownBy", "(", "(", ")", "-", ">", "converter", ".", "fromString", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ".", "isInstanceOf", "(", "WebApplicationException", ".", "class", ")", ".", "extracting", "(", "e", "-", ">", "(", "(", "(", "WebApplicationException", ")", "e", ")", ".", "getResponse", "(", ")", ")", ".", "getEntity", "(", ")", ")", ".", "matches", "(", "e", "-", ">", "(", "(", "ErrorMessage", ")", "e", "[", "0", "]", ")", ".", "getCode", "(", ")", "=", "=", "<NUM_LIT>", ")", ".", "matches", "(", "e", "-", ">", "(", "(", "ErrorMessage", ")", "e", "[", "0", "]", ")", ".", "getMessage", "(", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Valid", "public", "ValidRepresentation", "blah", "(", "@", "NotNull", "@", "Valid", "ValidRepresentation", "representation", ",", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "xer", ")", "{", "return", "new", "ValidRepresentation", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Validated", "@", "Valid", "public", "ValidRepresentation", "blahValidated", "(", "@", "Validated", "@", "Valid", "ValidRepresentation", "representation", ")", "{", "return", "new", "ValidRepresentation", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "simpleEntity", "(", "@", "Length", "(", "min", "=", "<NUM_LIT:3>", ",", "max", "=", "<NUM_LIT:5>", ")", "String", "name", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Length", "(", "max", "=", "<NUM_LIT:3>", ")", "public", "String", "blaze", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Length", "(", "min", "=", "<NUM_LIT:3>", ")", "String", "name", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "paramValidation", "(", "@", "UnwrapValidatedValue", "@", "NotNull", "@", "Min", "(", "<NUM_LIT:2>", ")", "@", "Max", "(", "<NUM_LIT:5>", ")", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "LongParam", "length", ")", "{", "return", "Long", ".", "toString", "(", "length", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "messageValidation", "(", "@", "UnwrapValidatedValue", "@", "NotNull", "@", "Min", "(", "value", "=", "<NUM_LIT:2>", ",", "message", "=", "\"", "<STR_LIT>", "\"", ")", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "LongParam", "length", ")", "{", "return", "Long", ".", "toString", "(", "length", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "isnt", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Length", "(", "min", "=", "<NUM_LIT:3>", ")", "@", "UnwrapValidatedValue", "NonEmptyStringParam", "name", ")", "{", "return", "name", ".", "get", "(", ")", ".", "orElse", "(", "null", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "PartialExample", "validatedPartialExampleBoth", "(", "@", "NotNull", "@", "Valid", "@", "Validated", "(", "{", "Partial1", ".", "class", ",", "Partial2", ".", "class", "}", ")", "PartialExample", "obj", ")", "{", "return", "obj", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Example", "validExample", "(", "@", "NotNull", "@", "Valid", "Example", "obj", ")", "{", "return", "obj", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Example", "[", "]", "validExample", "(", "@", "Valid", "Example", "[", "]", "obj", ")", "{", "return", "obj", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Collection", "<", "Example", ">", "validExample", "(", "@", "Valid", "Collection", "<", "Example", ">", "obj", ")", "{", "return", "obj", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Map", "<", "String", ",", "Example", ">", "validExample", "(", "@", "Valid", "Map", "<", "String", ",", "Example", ">", "obj", ")", "{", "return", "obj", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Set", "<", "Example", ">", "validExample", "(", "@", "Valid", "Set", "<", "Example", ">", "obj", ")", "{", "return", "obj", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "List", "<", "Example", ">", "validExample", "(", "@", "Valid", "List", "<", "Example", ">", "obj", ")", "{", "return", "obj", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "PartialExample", "validatedPartialExample", "(", "@", "NotNull", "(", "groups", "=", "Partial1", ".", "class", ")", "@", "Valid", "@", "Validated", "(", "{", "Partial1", ".", "class", "}", ")", "PartialExample", "obj", ")", "{", "return", "obj", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "List", "<", "ListExample", ">", "validExampleEmbedded", "(", "@", "Valid", "List", "<", "ListExample", ">", "obj", ")", "{", "return", "obj", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "everybody", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Min", "(", "<NUM_LIT>", ")", "@", "NotNull", "Long", "param", ")", "{", "return", "param", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "blazer", "(", "@", "Valid", "@", "BeanParam", "BeanParameter", "params", ")", "{", "return", "params", ".", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "subBlazer", "(", "@", "Valid", "@", "BeanParam", "SubBeanParameter", "params", ")", "{", "return", "params", ".", "getName", "(", ")", "+", "\"", "\"", "+", "params", ".", "getAddress", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "subGroupBlazer", "(", "@", "Valid", "@", "Validated", "(", "Partial1", ".", "class", ")", "@", "BeanParam", "SubBeanParameter", "params", ")", "{", "return", "params", ".", "getName", "(", ")", "+", "\"", "\"", "+", "params", ".", "getAddress", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "subValidGroupBlazer", "(", "@", "Valid", "@", "Validated", "(", "Partial1", ".", "class", ")", "@", "BeanParam", "SubBeanParameter", "params", ",", "@", "Valid", "@", "Validated", "(", "Partial1", ".", "class", ")", "ValidRepresentation", "entity", ")", "{", "return", "params", ".", "getName", "(", ")", "+", "\"", "\"", "+", "params", ".", "getAddress", "(", ")", "+", "\"", "\"", "+", "entity", ".", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT:2>", "\"", ")", "public", "String", "blazerValidated", "(", "@", "Validated", "@", "Valid", "@", "BeanParam", "BeanParameter", "params", ")", "{", "return", "params", ".", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "heads", "(", "@", "HeaderParam", "(", "\"", "<STR_LIT>", "\"", ")", "@", "NotEmpty", "String", "secretSauce", ")", "{", "return", "secretSauce", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "heads", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "@", "NotNull", "@", "UnwrapValidatedValue", "(", "false", ")", "IntParam", "secretSauce", ")", "{", "return", "secretSauce", ".", "get", "(", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "nullableIntParam", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Max", "(", "<NUM_LIT:3>", ")", "IntParam", "secretSauce", ")", "{", "return", "secretSauce", "=", "=", "null", "?", "\"", "<STR_LIT>", "\"", ":", "secretSauce", ".", "get", "(", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "cooks", "(", "@", "CookieParam", "(", "\"", "<STR_LIT>", "\"", ")", "@", "NotEmpty", "String", "secretSauce", ")", "{", "return", "secretSauce", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "pather", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Email", "String", "is", ")", "{", "return", "is", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Consumes", "(", "MediaType", ".", "APPLICATION_FORM_URLENCODED", ")", "public", "String", "form", "(", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "@", "NotEmpty", "String", "secretSauce", ")", "{", "return", "secretSauce", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Valid", "public", "WrappedValidRepresentation", "nested", "(", ")", "{", "WrappedValidRepresentation", "result", "=", "new", "WrappedValidRepresentation", "(", ")", ";", "result", ".", "setRepresentation", "(", "new", "ValidRepresentation", "(", ")", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT:2>", "\"", ")", "@", "Valid", "public", "WrappedFailingExample", "nested2", "(", ")", "{", "WrappedFailingExample", "result", "=", "new", "WrappedFailingExample", "(", ")", ";", "result", ".", "setExample", "(", "new", "FailingExample", "(", ")", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "contextual", "(", "@", "Valid", "@", "Context", "@", "NotNull", "ServletContext", "con", ")", "{", "return", "\"", "<STR_LIT:A>", "\"", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "matrixParam", "(", "@", "MatrixParam", "(", "\"", "<STR_LIT>", "\"", ")", "@", "NotEmpty", "String", "param", ")", "{", "return", "param", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "FailingExample", "valmeth", "(", "@", "Valid", "FailingExample", "exam", ")", "{", "return", "exam", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "enumParam", "(", "@", "NotNull", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "Choice", "choice", ")", "{", "return", "choice", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "ValidationMethod", "(", "message", "=", "\"", "<STR_LIT>", "\"", ",", "groups", "=", "JacksonMessageBodyProviderTest", ".", "Partial1", ".", "class", ")", "public", "boolean", "isAddressNotUppercase", "(", ")", "{", "return", "Strings", ".", "isNullOrEmpty", "(", "address", ")", "|", "|", "(", "!", "address", ".", "toUpperCase", "(", "Locale", ".", "US", ")", ".", "equals", "(", "address", ")", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getAddress", "(", ")", "{", "return", "address", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setName", "(", "String", "name", ")", "{", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "packages", "(", "\"", "<STR_LIT>", "\"", ")", ".", "register", "(", "new", "ValidatingResource2", "(", ")", ")", ".", "register", "(", "new", "HibernateValidationFeature", "(", "Validators", ".", "newValidator", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "BeforeClass", "public", "static", "void", "init", "(", ")", "{", "Locale", ".", "setDefault", "(", "Locale", ".", "ENGLISH", ")", ";", "}", "</s>"]
["<s>", "@", "AfterClass", "public", "static", "void", "shutdown", "(", ")", "{", "Locale", ".", "setDefault", "(", "DEFAULT_LOCALE", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postInvalidEntityIs422", "(", ")", "throws", "Exception", "{", "assumeThat", "(", "Locale", ".", "getDefault", "(", ")", ".", "getLanguage", "(", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT:{}>", "\"", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postNullEntityIs422", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "post", "(", "Entity", ".", "entity", "(", "null", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postInvalidatedEntityIs422", "(", ")", "throws", "Exception", "{", "assumeThat", "(", "Locale", ".", "getDefault", "(", ")", ".", "getLanguage", "(", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT:{}>", "\"", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postInvalidInterfaceEntityIs422", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnInvalidEntityIs500", "(", ")", "throws", "Exception", "{", "assumeThat", "(", "Locale", ".", "getDefault", "(", ")", ".", "getLanguage", "(", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnInvalidatedEntityIs500", "(", ")", "throws", "Exception", "{", "assumeThat", "(", "Locale", ".", "getDefault", "(", ")", ".", "getLanguage", "(", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getInvalidReturnIs500", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getInvalidQueryParamsIs400", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "final", "Response", "cache", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "cache", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "cache", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "cacheIsForParamNamesOnly", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "final", "Response", "cache", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "cache", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "cache", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postInvalidPrimitiveIs422", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getInvalidCustomTypeIs400", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getInvalidBeanParamsIs400", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getInvalidSubBeanParamsIs400", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getGroupSubBeanParamsIs400", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT:[>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:]>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postValidGroupsIs400", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{}>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT:[>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:]>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getInvalidatedBeanParamsIs400", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getInvalidHeaderParamsIs400", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getInvalidCookieParamsIs400", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getInvalidPathParamsIs400", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getInvalidFormParamsIs400", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "form", "(", "new", "Form", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postInvalidMethodClassIs422", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT:{}>", "\"", ",", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getInvalidNestedReturnIs500", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getInvalidNested2ReturnIs500", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getInvalidContextIs400", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getInvalidMatrixParamIs400", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "matrixParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "functionWithSameNameReturnDifferentErrors", "(", ")", "throws", "Exception", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "String", "ret", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret", ")", ";", "final", "Response", "response2", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "String", "ret2", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "assertThat", "(", "response2", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "ret2", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "paramsCanBeValidatedWhenNull", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "paramsCanBeUnwrappedAndValidated", "(", ")", "{", "assertThat", "(", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:4>", ")", ".", "request", "(", ")", ".", "get", "(", ")", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT:[>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:]>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnPartialValidatedRequestEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "PartialExample", ".", "class", ")", ".", "id", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidNullPartialValidatedRequestEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "null", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidEntityExceptionForPartialValidatedRequestEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidNullPartialBothValidatedRequestEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "null", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnPartialBothValidatedRequestEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "PartialExample", "ex", "=", "response", ".", "readEntity", "(", "PartialExample", ".", "class", ")", ";", "assertThat", "(", "ex", ".", "id", ")", ".", "isEqualTo", "(", "1", ")", ";", "assertThat", "(", "ex", ".", "text", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidEntityExceptionForInvalidRequestEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnRequestEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "Example", ".", "class", ")", ".", "id", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnRequestArrayEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "final", "Example", "ex1", "=", "new", "Example", "(", ")", ";", "final", "Example", "ex2", "=", "new", "Example", "(", ")", ";", "ex1", ".", "id", "=", "1", ";", "ex2", ".", "id", "=", "<NUM_LIT:2>", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "Example", "[", "]", ".", "class", ")", ")", ".", "containsExactly", "(", "ex1", ",", "ex2", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidRequestCollectionEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidRequestSingleCollectionEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnRequestCollectionEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "final", "Collection", "<", "Example", ">", "example", "=", "response", ".", "readEntity", "(", "new", "GenericType", "<", "Collection", "<", "Example", ">", ">", "(", ")", "{", "}", ")", ";", "Example", "ex1", "=", "new", "Example", "(", ")", ";", "Example", "ex2", "=", "new", "Example", "(", ")", ";", "ex1", ".", "id", "=", "1", ";", "ex2", ".", "id", "=", "<NUM_LIT:2>", ";", "assertThat", "(", "example", ")", ".", "containsOnly", "(", "ex1", ",", "ex2", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidRequestSetEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidRequestListEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsAConstraintViolationExceptionForEmptyRequestEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "null", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsValidatedMapRequestEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "Map", "<", "String", ",", "Example", ">", "map", "=", "response", ".", "readEntity", "(", "new", "GenericType", "<", "Map", "<", "String", ",", "Example", ">", ">", "(", ")", "{", "}", ")", ";", "assertThat", "(", "requireNonNull", "(", "map", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "id", ")", ".", "isEqualTo", "(", "1", ")", ";", "assertThat", "(", "requireNonNull", "(", "map", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "id", ")", ".", "isEqualTo", "(", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidMapRequestEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsValidatedEmbeddedListEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "List", "<", "ListExample", ">", "res", "=", "response", ".", "readEntity", "(", "new", "GenericType", "<", "List", "<", "ListExample", ">", ">", "(", ")", "{", "}", ")", ";", "assertThat", "(", "res", ")", ".", "hasSize", "(", "1", ")", ";", "assertThat", "(", "res", ".", "get", "(", "0", ")", ".", "examples", ")", ".", "hasSize", "(", "1", ")", ";", "assertThat", "(", "res", ".", "get", "(", "0", ")", ".", "examples", ".", "get", "(", "0", ")", ".", "id", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidEmbeddedListEntities", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testInvalidFieldQueryParam", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "missingParameterMessageContainsParameterName", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyParameterMessageContainsParameterName", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "maxMessageContainsParameterName", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "minMessageContainsParameterName", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "paramClassPassesValidation", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:3>", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "minCustomMessage", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Response", "response2", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "0", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response2", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response2", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notPresentEnumParameter", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidEnumParameter", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invalidBeanParamEnumParameter", "(", ")", "{", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "containsOnlyOnce", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "succeedsWithAllGoodData", "(", ")", "{", "final", "Example", "example", "=", "new", "Example", "(", ")", ";", "final", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "validate", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "validate", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "failsWithInvalidIntParam", "(", ")", "{", "final", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "inter", "=", "new", "IntParam", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "final", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "validate", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "validate", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "failsWithInvalidNonEmptyStringParam", "(", ")", "{", "final", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "name", "=", "new", "NonEmptyStringParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Set", "<", "ConstraintViolation", "<", "Example", ">", ">", "validate", "=", "validator", ".", "validate", "(", "example", ")", ";", "assertThat", "(", "validate", ")", ".", "hasSize", "(", "1", ")", ";", "}", "</s>"]
["<s>", "public", "CustomDeserialization", "(", ")", "{", "super", "(", "(", "Class", ")", "null", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "CustomRepresentation", "deserialize", "(", "JsonParser", "jsonParser", ",", "DeserializationContext", "deserializationContext", ")", "throws", "IOException", "{", "final", "Object", "ss", "=", "jsonParser", ".", "readValueAs", "(", "Object", ".", "class", ")", ";", "if", "(", "ss", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "throw", "new", "MyNastyException", "(", "jsonParser", ")", ";", "}", "}", "</s>"]
["<s>", "public", "MyNastyException", "(", "JsonParser", "jp", ")", "{", "super", "(", "jp", ":", ":", "close", ",", "null", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "String", "getMessage", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "broken", "(", "BrokenRepresentation", "rep", ")", "{", "System", ".", "out", ".", "println", "(", "rep", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "NonBeanImplementation", "brokenOutbound", "(", ")", "{", "return", "new", "NonBeanImplementation", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "List", "<", "Integer", ">", "ok", "(", "OkRepresentation", "rep", ")", "{", "return", "ImmutableList", ".", "of", "(", "rep", ".", "getMessage", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "List", "<", "Integer", ">", "ok", "(", "List", "<", "BrokenRepresentation", ">", "rep", ")", "{", "return", "ImmutableList", ".", "of", "(", "rep", ".", "size", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "custom", "(", "CustomRepresentation", "rep", ")", "{", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "url", "(", "URL", "url", ")", "{", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "urlList", "(", "List", "<", "URL", ">", "url", ")", "{", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "face", "(", "IInterface", "inter", ")", "{", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "face", "(", "List", "<", "IInterface", ">", "inter", ")", "{", "}", "</s>"]
["<s>", "public", "DefaultJacksonMessageBodyProvider", "(", ")", "{", "super", "(", "Jackson", ".", "newObjectMapper", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "BrokenRepresentation", "(", "List", "<", "String", ">", "messages", ")", "{", "this", ".", "messages", "=", "messages", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "List", "<", "String", ">", "getMessages", "(", ")", "{", "return", "messages", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMessages", "(", "List", "<", "String", ">", "messages", ")", "{", "this", ".", "messages", "=", "messages", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "Objects", ".", "hash", "(", "id", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "this", "=", "=", "obj", ")", "{", "return", "true", ";", "}", "if", "(", "obj", "=", "=", "null", "|", "|", "getClass", "(", ")", "!", "=", "obj", ".", "getClass", "(", ")", ")", "{", "return", "false", ";", "}", "final", "Example", "other", "=", "(", "Example", ")", "obj", ";", "return", "Objects", ".", "equals", "(", "this", ".", "id", ",", "other", ".", "id", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "assumeThat", "(", "Locale", ".", "getDefault", "(", ")", ".", "getLanguage", "(", ")", ",", "is", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "readsDeserializableTypes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "provider", ".", "isReadable", "(", "Example", ".", "class", ",", "null", ",", "null", ",", "null", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "writesSerializableTypes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "provider", ".", "isWriteable", "(", "Example", ".", "class", ",", "null", ",", "null", ",", "null", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotWriteIgnoredTypes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "provider", ".", "isWriteable", "(", "Ignorable", ".", "class", ",", "null", ",", "null", ",", "null", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "writesUnIgnoredTypes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "provider", ".", "isWriteable", "(", "NonIgnorable", ".", "class", ",", "null", ",", "null", ",", "null", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotReadIgnoredTypes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "provider", ".", "isReadable", "(", "Ignorable", ".", "class", ",", "null", ",", "null", ",", "null", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "readsUnIgnoredTypes", "(", ")", "throws", "Exception", "{", "assertThat", "(", "provider", ".", "isReadable", "(", "NonIgnorable", ".", "class", ",", "null", ",", "null", ",", "null", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isChunked", "(", ")", "throws", "Exception", "{", "assertThat", "(", "provider", ".", "getSize", "(", "null", ",", "null", ",", "null", ",", "null", ",", "null", ")", ")", ".", "isEqualTo", "(", "-", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "deserializesRequestEntities", "(", ")", "throws", "Exception", "{", "final", "ByteArrayInputStream", "entity", "=", "new", "ByteArrayInputStream", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "final", "Class", "<", "?", ">", "klass", "=", "Example", ".", "class", ";", "final", "Object", "obj", "=", "provider", ".", "readFrom", "(", "(", "Class", "<", "Object", ">", ")", "klass", ",", "Example", ".", "class", ",", "NONE", ",", "MediaType", ".", "APPLICATION_JSON_TYPE", ",", "new", "MultivaluedHashMap", "<", ">", "(", ")", ",", "entity", ")", ";", "assertThat", "(", "obj", ")", ".", "isInstanceOf", "(", "Example", ".", "class", ")", ";", "assertThat", "(", "(", "(", "Example", ")", "obj", ")", ".", "id", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsPartialValidatedRequestEntities", "(", ")", "throws", "Exception", "{", "final", "Validated", "valid", "=", "mock", "(", "Validated", ".", "class", ")", ";", "doReturn", "(", "Validated", ".", "class", ")", ".", "when", "(", "valid", ")", ".", "annotationType", "(", ")", ";", "when", "(", "valid", ".", "value", "(", ")", ")", ".", "thenReturn", "(", "new", "Class", "<", "?", ">", "[", "]", "{", "Partial1", ".", "class", ",", "Partial2", ".", "class", "}", ")", ";", "final", "ByteArrayInputStream", "entity", "=", "new", "ByteArrayInputStream", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "final", "Class", "<", "?", ">", "klass", "=", "PartialExample", ".", "class", ";", "final", "Object", "obj", "=", "provider", ".", "readFrom", "(", "(", "Class", "<", "Object", ">", ")", "klass", ",", "PartialExample", ".", "class", ",", "new", "Annotation", "[", "]", "{", "valid", "}", ",", "MediaType", ".", "APPLICATION_JSON_TYPE", ",", "new", "MultivaluedHashMap", "<", ">", "(", ")", ",", "entity", ")", ";", "assertThat", "(", "obj", ")", ".", "isInstanceOf", "(", "PartialExample", ".", "class", ")", ";", "assertThat", "(", "(", "(", "PartialExample", ")", "obj", ")", ".", "id", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsPartialValidatedByGroupRequestEntities", "(", ")", "throws", "Exception", "{", "final", "Validated", "valid", "=", "mock", "(", "Validated", ".", "class", ")", ";", "doReturn", "(", "Validated", ".", "class", ")", ".", "when", "(", "valid", ")", ".", "annotationType", "(", ")", ";", "when", "(", "valid", ".", "value", "(", ")", ")", ".", "thenReturn", "(", "new", "Class", "<", "?", ">", "[", "]", "{", "Partial1", ".", "class", "}", ")", ";", "final", "ByteArrayInputStream", "entity", "=", "new", "ByteArrayInputStream", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "final", "Class", "<", "?", ">", "klass", "=", "PartialExample", ".", "class", ";", "final", "Object", "obj", "=", "provider", ".", "readFrom", "(", "(", "Class", "<", "Object", ">", ")", "klass", ",", "PartialExample", ".", "class", ",", "new", "Annotation", "[", "]", "{", "valid", "}", ",", "MediaType", ".", "APPLICATION_JSON_TYPE", ",", "new", "MultivaluedHashMap", "<", ">", "(", ")", ",", "entity", ")", ";", "assertThat", "(", "obj", ")", ".", "isInstanceOf", "(", "PartialExample", ".", "class", ")", ";", "assertThat", "(", "(", "(", "PartialExample", ")", "obj", ")", ".", "id", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsAJsonProcessingExceptionForMalformedRequestEntities", "(", ")", "throws", "Exception", "{", "final", "ByteArrayInputStream", "entity", "=", "new", "ByteArrayInputStream", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "try", "{", "final", "Class", "<", "?", ">", "klass", "=", "Example", ".", "class", ";", "provider", ".", "readFrom", "(", "(", "Class", "<", "Object", ">", ")", "klass", ",", "Example", ".", "class", ",", "NONE", ",", "MediaType", ".", "APPLICATION_JSON_TYPE", ",", "new", "MultivaluedHashMap", "<", ">", "(", ")", ",", "entity", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "JsonProcessingException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "serializesResponseEntities", "(", ")", "throws", "Exception", "{", "final", "ByteArrayOutputStream", "output", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "final", "Example", "example", "=", "new", "Example", "(", ")", ";", "example", ".", "id", "=", "<NUM_LIT>", ";", "provider", ".", "writeTo", "(", "example", ",", "Example", ".", "class", ",", "Example", ".", "class", ",", "NONE", ",", "MediaType", ".", "APPLICATION_JSON_TYPE", ",", "new", "MultivaluedHashMap", "<", ">", "(", ")", ",", "output", ")", ";", "assertThat", "(", "output", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsValidatedCollectionRequestEntities", "(", ")", "throws", "Exception", "{", "testValidatedCollectionType", "(", "Collection", ".", "class", ",", "new", "TypeToken", "<", "Collection", "<", "Example", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsValidatedSetRequestEntities", "(", ")", "throws", "Exception", "{", "testValidatedCollectionType", "(", "Set", ".", "class", ",", "new", "TypeToken", "<", "Set", "<", "Example", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsValidatedListRequestEntities", "(", ")", "throws", "Exception", "{", "testValidatedCollectionType", "(", "List", ".", "class", ",", "new", "TypeToken", "<", "List", "<", "Example", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "testValidatedCollectionType", "(", "Class", "<", "?", ">", "klass", ",", "Type", "type", ")", "throws", "IOException", "{", "final", "Annotation", "valid", "=", "mock", "(", "Annotation", ".", "class", ")", ";", "doReturn", "(", "Valid", ".", "class", ")", ".", "when", "(", "valid", ")", ".", "annotationType", "(", ")", ";", "final", "ByteArrayInputStream", "entity", "=", "new", "ByteArrayInputStream", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "final", "Object", "obj", "=", "provider", ".", "readFrom", "(", "(", "Class", "<", "Object", ">", ")", "klass", ",", "type", ",", "new", "Annotation", "[", "]", "{", "valid", "}", ",", "MediaType", ".", "APPLICATION_JSON_TYPE", ",", "new", "MultivaluedHashMap", "<", ">", "(", ")", ",", "entity", ")", ";", "assertThat", "(", "obj", ")", ".", "isInstanceOf", "(", "klass", ")", ";", "Iterator", "<", "Example", ">", "iterator", "=", "(", "(", "Iterable", "<", "Example", ">", ")", "obj", ")", ".", "iterator", "(", ")", ";", "assertThat", "(", "iterator", ".", "next", "(", ")", ".", "id", ")", ".", "isEqualTo", "(", "1", ")", ";", "assertThat", "(", "iterator", ".", "next", "(", ")", ".", "id", ")", ".", "isEqualTo", "(", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Integer", "getMessage", "(", ")", "{", "return", "message", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "LocalDate", "getDate", "(", ")", "{", "return", "date", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMessage", "(", "Integer", "message", ")", "{", "this", ".", "message", "=", "message", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setDate", "(", "LocalDate", "date", ")", "{", "this", ".", "date", "=", "date", ";", "}", "</s>"]
["<s>", "public", "Integer", "val", "(", ")", "{", "return", "1", ";", "}", "</s>"]
["<s>", "public", "UnknownRepresentation", "(", "int", "bork", ")", "{", "this", ".", "bork", "=", "bork", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getBork", "(", ")", "{", "return", "bork", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setBork", "(", "int", "bork", ")", "{", "this", ".", "bork", "=", "bork", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "return", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ".", "packages", "(", "\"", "<STR_LIT>", "\"", ")", ".", "register", "(", "new", "LoggingExceptionMapper", "<", "Throwable", ">", "(", ")", "{", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "configureClient", "(", "ClientConfig", "config", ")", "{", "final", "ObjectMapper", "mapper", "=", "new", "ObjectMapper", "(", ")", ";", "final", "JacksonMessageBodyProvider", "provider", "=", "new", "JacksonMessageBodyProvider", "(", "mapper", ")", ";", "config", ".", "register", "(", "provider", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA500ForNonDeserializableRepresentationClasses", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "post", "(", "Entity", ".", "entity", "(", "new", "BrokenRepresentation", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getMediaType", "(", ")", ")", ".", "isEqualTo", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA500ForListNonDeserializableRepresentationClasses", "(", ")", "throws", "Exception", "{", "final", "ImmutableList", "<", "BrokenRepresentation", ">", "ent", "=", "ImmutableList", ".", "of", "(", "new", "BrokenRepresentation", "(", "ImmutableList", ".", "of", "(", ")", ")", ",", "new", "BrokenRepresentation", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "post", "(", "Entity", ".", "entity", "(", "ent", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getMediaType", "(", ")", ")", ".", "isEqualTo", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA500ForNonSerializableRepresentationClassesOutbound", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getMediaType", "(", ")", ")", ".", "isEqualTo", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA500ForAbstractEntity", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getMediaType", "(", ")", ")", ".", "isEqualTo", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA500ForAbstractEntities", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT:[>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:]>", "\"", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getMediaType", "(", ")", ")", ".", "isEqualTo", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA400ForCustomDeserializer", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT:{}>", "\"", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getMediaType", "(", ")", ")", ".", "isEqualTo", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA500ForCustomDeserializerUnexpected", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getMediaType", "(", ")", ")", ".", "isEqualTo", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA400ForMalformedInputCausingIoException", "(", ")", "throws", "Exception", "{", "assertEndpointReturns400", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA400ForListWrongInputType", "(", ")", "throws", "Exception", "{", "assertEndpointReturns400", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA400ForMalformedListInputCausingIoException", "(", ")", "throws", "Exception", "{", "assertEndpointReturns400", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:[>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:]>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA400ForNonDeserializableRequestEntities", "(", ")", "throws", "Exception", "{", "assertEndpointReturns400", "(", "\"", "<STR_LIT>", "\"", ",", "new", "UnknownRepresentation", "(", "<NUM_LIT:100>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA400ForWrongInputType", "(", ")", "throws", "Exception", "{", "assertEndpointReturns400", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA400ForInvalidFormatRequestEntities", "(", ")", "throws", "Exception", "{", "assertEndpointReturns400", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA400ForInvalidFormatRequestEntitiesWrapped", "(", ")", "throws", "Exception", "{", "assertEndpointReturns400", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA400ForInvalidFormatRequestEntitiesArray", "(", ")", "throws", "Exception", "{", "assertEndpointReturns400", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsA400ForSemanticInvalidDate", "(", ")", "throws", "Exception", "{", "assertEndpointReturns400", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "<", "T", ">", "void", "assertEndpointReturns400", "(", "String", "endpoint", ",", "T", "entity", ")", "{", "Response", "response", "=", "target", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "endpoint", ")", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "post", "(", "Entity", ".", "entity", "(", "entity", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "JsonNode", "errorMessage", "=", "response", ".", "readEntity", "(", "JsonNode", ".", "class", ")", ";", "assertThat", "(", "errorMessage", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asInt", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "errorMessage", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "asText", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "errorMessage", ".", "has", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Valid", "ValidRepresentation", "repr", "(", "@", "NotNull", "@", "Valid", "ValidRepresentation", "representation", ",", "@", "NotNull", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "xer", ")", ";", "</s>"]
["<s>", "public", "DropwizardResourceConfig", "(", "MetricRegistry", "metricRegistry", ")", "{", "this", "(", "false", ",", "metricRegistry", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardResourceConfig", "(", ")", "{", "this", "(", "true", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardResourceConfig", "(", "boolean", "testOnly", ",", "@", "Nullable", "MetricRegistry", "metricRegistry", ")", "{", "super", "(", ")", ";", "if", "(", "metricRegistry", "=", "=", "null", ")", "{", "metricRegistry", "=", "new", "MetricRegistry", "(", ")", ";", "}", "property", "(", "ServerProperties", ".", "WADL_FEATURE_DISABLE", ",", "Boolean", ".", "TRUE", ")", ";", "if", "(", "!", "testOnly", ")", "{", "register", "(", "new", "ComponentLoggingListener", "(", "this", ")", ")", ";", "}", "register", "(", "new", "InstrumentedResourceMethodApplicationListener", "(", "metricRegistry", ")", ")", ";", "register", "(", "CacheControlledResponseFeature", ".", "class", ")", ";", "register", "(", "io", ".", "dropwizard", ".", "jersey", ".", "guava", ".", "OptionalMessageBodyWriter", ".", "class", ")", ";", "register", "(", "io", ".", "dropwizard", ".", "jersey", ".", "guava", ".", "OptionalParamFeature", ".", "class", ")", ";", "register", "(", "io", ".", "dropwizard", ".", "jersey", ".", "optional", ".", "OptionalMessageBodyWriter", ".", "class", ")", ";", "register", "(", "io", ".", "dropwizard", ".", "jersey", ".", "optional", ".", "OptionalDoubleMessageBodyWriter", ".", "class", ")", ";", "register", "(", "io", ".", "dropwizard", ".", "jersey", ".", "optional", ".", "OptionalIntMessageBodyWriter", ".", "class", ")", ";", "register", "(", "io", ".", "dropwizard", ".", "jersey", ".", "optional", ".", "OptionalLongMessageBodyWriter", ".", "class", ")", ";", "register", "(", "io", ".", "dropwizard", ".", "jersey", ".", "optional", ".", "OptionalParamFeature", ".", "class", ")", ";", "register", "(", "AbstractParamConverterProvider", ".", "class", ")", ";", "register", "(", "new", "FuzzyEnumParamConverterProvider", "(", ")", ")", ";", "register", "(", "new", "SessionFactoryProvider", ".", "Binder", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "DropwizardResourceConfig", "forTesting", "(", "MetricRegistry", "metricRegistry", ")", "{", "return", "new", "DropwizardResourceConfig", "(", "true", ",", "metricRegistry", ")", ";", "}", "</s>"]
["<s>", "public", "void", "logComponents", "(", ")", "{", "LOGGER", ".", "debug", "(", "\"", "<STR_LIT>", "\"", ",", "canonicalNamesByAnnotation", "(", "Path", ".", "class", ")", ")", ";", "LOGGER", ".", "debug", "(", "\"", "<STR_LIT>", "\"", ",", "canonicalNamesByAnnotation", "(", "Provider", ".", "class", ")", ")", ";", "LOGGER", ".", "info", "(", "getEndpointsInfo", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getUrlPattern", "(", ")", "{", "return", "urlPattern", ";", "}", "</s>"]
["<s>", "public", "void", "setUrlPattern", "(", "String", "urlPattern", ")", "{", "this", ".", "urlPattern", "=", "urlPattern", ";", "}", "</s>"]
["<s>", "public", "void", "setContextPath", "(", "String", "contextPath", ")", "{", "this", ".", "contextPath", "=", "contextPath", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "Set", "<", "Class", "<", "?", ">", ">", "allClasses", "(", ")", "{", "final", "Set", "<", "Class", "<", "?", ">", ">", "allClasses", "=", "new", "HashSet", "<", ">", "(", "getClasses", "(", ")", ")", ";", "for", "(", "Object", "singleton", ":", "getSingletons", "(", ")", ")", "{", "allClasses", ".", "add", "(", "singleton", ".", "getClass", "(", ")", ")", ";", "}", "return", "allClasses", ";", "}", "</s>"]
["<s>", "private", "Set", "<", "String", ">", "canonicalNamesByAnnotation", "(", "final", "Class", "<", "?", "extends", "Annotation", ">", "annotation", ")", "{", "final", "Set", "<", "String", ">", "result", "=", "new", "HashSet", "<", ">", "(", ")", ";", "for", "(", "Class", "<", "?", ">", "clazz", ":", "getClasses", "(", ")", ")", "{", "if", "(", "clazz", ".", "isAnnotationPresent", "(", "annotation", ")", ")", "{", "result", ".", "add", "(", "clazz", ".", "getCanonicalName", "(", ")", ")", ";", "}", "}", "return", "result", ";", "}", "</s>"]
["<s>", "public", "String", "getEndpointsInfo", "(", ")", "{", "final", "StringBuilder", "msg", "=", "new", "StringBuilder", "(", "<NUM_LIT>", ")", ";", "final", "Set", "<", "EndpointLogLine", ">", "endpointLogLines", "=", "new", "TreeSet", "<", ">", "(", "new", "EndpointComparator", "(", ")", ")", ";", "msg", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "msg", ".", "append", "(", "NEWLINE", ")", ".", "append", "(", "NEWLINE", ")", ";", "final", "Set", "<", "Class", "<", "?", ">", ">", "allResourcesClasses", "=", "new", "HashSet", "<", ">", "(", ")", ";", "for", "(", "Class", "<", "?", ">", "clazz", ":", "allClasses", "(", ")", ")", "{", "if", "(", "!", "clazz", ".", "isInterface", "(", ")", "&", "&", "Resource", ".", "from", "(", "clazz", ")", "!", "=", "null", ")", "{", "allResourcesClasses", ".", "add", "(", "clazz", ")", ";", "}", "}", "for", "(", "Class", "<", "?", ">", "klass", ":", "allResourcesClasses", ")", "{", "new", "EndpointLogger", "(", "contextPath", ",", "urlPattern", ",", "klass", ")", ".", "populate", "(", "endpointLogLines", ")", ";", "}", "final", "Set", "<", "Resource", ">", "allResources", "=", "this", ".", "getResources", "(", ")", ";", "for", "(", "Resource", "res", ":", "allResources", ")", "{", "for", "(", "Resource", "childRes", ":", "res", ".", "getChildResources", "(", ")", ")", "{", "for", "(", "Class", "<", "?", ">", "childResHandlerClass", ":", "childRes", ".", "getHandlerClasses", "(", ")", ")", "{", "EndpointLogger", "epl", "=", "new", "EndpointLogger", "(", "contextPath", ",", "urlPattern", ",", "childResHandlerClass", ")", ";", "epl", ".", "populate", "(", "cleanUpPath", "(", "res", ".", "getPath", "(", ")", "+", "epl", ".", "rootPath", ")", ",", "epl", ".", "klass", ",", "false", ",", "childRes", ",", "endpointLogLines", ")", ";", "}", "}", "}", "if", "(", "!", "endpointLogLines", ".", "isEmpty", "(", ")", ")", "{", "for", "(", "EndpointLogLine", "line", ":", "endpointLogLines", ")", "{", "msg", ".", "append", "(", "line", ")", ".", "append", "(", "NEWLINE", ")", ";", "}", "}", "else", "{", "msg", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "NEWLINE", ")", ";", "}", "return", "msg", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "String", "cleanUpPath", "(", "String", "path", ")", "{", "return", "PATH_DIRTY_SLASHES", ".", "matcher", "(", "path", ")", ".", "replaceAll", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "trim", "(", ")", ";", "}", "</s>"]
["<s>", "EndpointLogger", "(", "String", "contextPath", ",", "String", "urlPattern", ",", "Class", "<", "?", ">", "klass", ")", "{", "final", "String", "rootPattern", "=", "urlPattern", ".", "endsWith", "(", "\"", "<STR_LIT>", "\"", ")", "?", "urlPattern", ".", "substring", "(", "0", ",", "urlPattern", ".", "length", "(", ")", "-", "1", ")", ":", "urlPattern", ";", "final", "String", "normalizedContextPath", "=", "contextPath", ".", "isEmpty", "(", ")", "|", "|", "contextPath", ".", "equals", "(", "\"", "<STR_LIT:/>", "\"", ")", "?", "\"", "\"", ":", "contextPath", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", "?", "contextPath", ":", "\"", "<STR_LIT:/>", "\"", "+", "contextPath", ";", "this", ".", "rootPath", "=", "normalizedContextPath", "+", "rootPattern", ";", "this", ".", "klass", "=", "klass", ";", "}", "</s>"]
["<s>", "public", "void", "populate", "(", "Set", "<", "EndpointLogLine", ">", "endpointLogLines", ")", "{", "populate", "(", "this", ".", "rootPath", ",", "klass", ",", "false", ",", "endpointLogLines", ")", ";", "}", "</s>"]
["<s>", "private", "void", "populate", "(", "String", "basePath", ",", "Class", "<", "?", ">", "klass", ",", "boolean", "isLocator", ",", "Set", "<", "EndpointLogLine", ">", "endpointLogLines", ")", "{", "populate", "(", "basePath", ",", "klass", ",", "isLocator", ",", "Resource", ".", "from", "(", "klass", ")", ",", "endpointLogLines", ")", ";", "}", "</s>"]
["<s>", "private", "void", "populate", "(", "String", "basePath", ",", "Class", "<", "?", ">", "klass", ",", "boolean", "isLocator", ",", "Resource", "resource", ",", "Set", "<", "EndpointLogLine", ">", "endpointLogLines", ")", "{", "if", "(", "!", "isLocator", ")", "{", "basePath", "=", "normalizePath", "(", "basePath", ",", "resource", ".", "getPath", "(", ")", ")", ";", "}", "for", "(", "ResourceMethod", "method", ":", "resource", ".", "getResourceMethods", "(", ")", ")", "{", "endpointLogLines", ".", "add", "(", "new", "EndpointLogLine", "(", "method", ".", "getHttpMethod", "(", ")", ",", "basePath", ",", "klass", ")", ")", ";", "}", "for", "(", "Resource", "childResource", ":", "resource", ".", "getChildResources", "(", ")", ")", "{", "for", "(", "ResourceMethod", "method", ":", "childResource", ".", "getAllMethods", "(", ")", ")", "{", "if", "(", "method", ".", "getType", "(", ")", "=", "=", "ResourceMethod", ".", "JaxrsType", ".", "RESOURCE_METHOD", ")", "{", "final", "String", "path", "=", "normalizePath", "(", "basePath", ",", "childResource", ".", "getPath", "(", ")", ")", ";", "endpointLogLines", ".", "add", "(", "new", "EndpointLogLine", "(", "method", ".", "getHttpMethod", "(", ")", ",", "path", ",", "klass", ")", ")", ";", "}", "else", "if", "(", "method", ".", "getType", "(", ")", "=", "=", "ResourceMethod", ".", "JaxrsType", ".", "SUB_RESOURCE_LOCATOR", ")", "{", "final", "String", "path", "=", "normalizePath", "(", "basePath", ",", "childResource", ".", "getPath", "(", ")", ")", ";", "final", "ResolvedType", "responseType", "=", "TYPE_RESOLVER", ".", "resolve", "(", "method", ".", "getInvocable", "(", ")", ".", "getResponseType", "(", ")", ")", ";", "final", "Class", "<", "?", ">", "erasedType", "=", "!", "responseType", ".", "getTypeBindings", "(", ")", ".", "isEmpty", "(", ")", "?", "responseType", ".", "getTypeBindings", "(", ")", ".", "getBoundType", "(", "0", ")", ".", "getErasedType", "(", ")", ":", "responseType", ".", "getErasedType", "(", ")", ";", "if", "(", "Resource", ".", "from", "(", "erasedType", ")", "=", "=", "null", ")", "{", "endpointLogLines", ".", "add", "(", "new", "EndpointLogLine", "(", "method", ".", "getHttpMethod", "(", ")", ",", "path", ",", "erasedType", ")", ")", ";", "}", "else", "{", "populate", "(", "path", ",", "erasedType", ",", "true", ",", "endpointLogLines", ")", ";", "}", "}", "}", "}", "}", "</s>"]
["<s>", "private", "static", "String", "normalizePath", "(", "String", "basePath", ",", "String", "path", ")", "{", "if", "(", "path", "=", "=", "null", ")", "{", "return", "basePath", ";", "}", "if", "(", "basePath", ".", "endsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", "{", "return", "path", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", "?", "basePath", "+", "path", ".", "substring", "(", "1", ")", ":", "basePath", "+", "path", ";", "}", "return", "path", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", "?", "basePath", "+", "path", ":", "basePath", "+", "\"", "<STR_LIT:/>", "\"", "+", "path", ";", "}", "</s>"]
["<s>", "EndpointLogLine", "(", "String", "httpMethod", ",", "String", "basePath", ",", "Class", "<", "?", ">", "klass", ")", "{", "this", ".", "basePath", "=", "basePath", ";", "this", ".", "klass", "=", "klass", ";", "this", ".", "httpMethod", "=", "httpMethod", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "final", "String", "method", "=", "httpMethod", "=", "=", "null", "?", "\"", "<STR_LIT>", "\"", ":", "httpMethod", ";", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "method", ",", "basePath", ",", "klass", ".", "getCanonicalName", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "compare", "(", "EndpointLogLine", "endpointA", ",", "EndpointLogLine", "endpointB", ")", "{", "return", "ComparisonChain", ".", "start", "(", ")", ".", "compare", "(", "endpointA", ".", "basePath", ",", "endpointB", ".", "basePath", ")", ".", "compare", "(", "endpointA", ".", "httpMethod", ",", "endpointB", ".", "httpMethod", ",", "Comparator", ".", "nullsLast", "(", "Ordering", ".", "natural", "(", ")", ")", ")", ".", "result", "(", ")", ";", "}", "</s>"]
["<s>", "ComponentLoggingListener", "(", "DropwizardResourceConfig", "config", ")", "{", "this", ".", "config", "=", "config", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onEvent", "(", "ApplicationEvent", "event", ")", "{", "if", "(", "event", ".", "getType", "(", ")", "=", "=", "ApplicationEvent", ".", "Type", ".", "INITIALIZATION_APP_FINISHED", ")", "{", "config", ".", "logComponents", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "RequestEventListener", "onRequest", "(", "RequestEvent", "requestEvent", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Inject", "public", "OptionalParamConverterProvider", "(", "final", "ServiceLocator", "locator", ")", "{", "this", ".", "locator", "=", "locator", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "<", "T", ">", "ParamConverter", "<", "T", ">", "getConverter", "(", "final", "Class", "<", "T", ">", "rawType", ",", "final", "Type", "genericType", ",", "final", "Annotation", "[", "]", "annotations", ")", "{", "if", "(", "Optional", ".", "class", ".", "equals", "(", "rawType", ")", ")", "{", "final", "List", "<", "ClassTypePair", ">", "ctps", "=", "ReflectionHelper", ".", "getTypeArgumentAndClass", "(", "genericType", ")", ";", "final", "ClassTypePair", "ctp", "=", "(", "ctps", ".", "size", "(", ")", "=", "=", "1", ")", "?", "ctps", ".", "get", "(", "0", ")", ":", "null", ";", "if", "(", "ctp", "=", "=", "null", "|", "|", "ctp", ".", "rawClass", "(", ")", "=", "=", "String", ".", "class", ")", "{", "return", "new", "ParamConverter", "<", "T", ">", "(", ")", "{", "@", "Override", "public", "T", "fromString", "(", "final", "String", "value", ")", "{", "return", "rawType", ".", "cast", "(", "Optional", ".", "fromNullable", "(", "value", ")", ")", ";", "}", "@", "Override", "public", "String", "toString", "(", "final", "T", "value", ")", "{", "return", "value", ".", "toString", "(", ")", ";", "}", "}", ";", "}", "for", "(", "ParamConverterProvider", "provider", ":", "Providers", ".", "getProviders", "(", "locator", ",", "ParamConverterProvider", ".", "class", ")", ")", "{", "final", "ParamConverter", "<", "?", ">", "converter", "=", "provider", ".", "getConverter", "(", "ctp", ".", "rawClass", "(", ")", ",", "ctp", ".", "type", "(", ")", ",", "annotations", ")", ";", "if", "(", "converter", "!", "=", "null", ")", "{", "return", "new", "ParamConverter", "<", "T", ">", "(", ")", "{", "@", "Override", "public", "T", "fromString", "(", "final", "String", "value", ")", "{", "final", "Object", "convertedValue", "=", "value", "=", "=", "null", "?", "null", ":", "converter", ".", "fromString", "(", "value", ")", ";", "return", "rawType", ".", "cast", "(", "Optional", ".", "fromNullable", "(", "convertedValue", ")", ")", ";", "}", "@", "Override", "public", "String", "toString", "(", "final", "T", "value", ")", "{", "return", "value", ".", "toString", "(", ")", ";", "}", "}", ";", "}", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "T", "fromString", "(", "final", "String", "value", ")", "{", "return", "rawType", ".", "cast", "(", "Optional", ".", "fromNullable", "(", "value", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", "final", "T", "value", ")", "{", "return", "value", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "T", "fromString", "(", "final", "String", "value", ")", "{", "final", "Object", "convertedValue", "=", "value", "=", "=", "null", "?", "null", ":", "converter", ".", "fromString", "(", "value", ")", ";", "return", "rawType", ".", "cast", "(", "Optional", ".", "fromNullable", "(", "convertedValue", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", "final", "T", "value", ")", "{", "return", "value", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "configure", "(", "final", "FeatureContext", "context", ")", "{", "context", ".", "register", "(", "new", "OptionalParamBinder", "(", ")", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "configure", "(", ")", "{", "bind", "(", "OptionalParamConverterProvider", ".", "class", ")", ".", "to", "(", "ParamConverterProvider", ".", "class", ")", ".", "in", "(", "Singleton", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getSize", "(", "Optional", "<", "?", ">", "entity", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isWriteable", "(", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "Optional", ".", "class", ".", "isAssignableFrom", "(", "type", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "@", "Override", "public", "void", "writeTo", "(", "Optional", "<", "?", ">", "entity", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ",", "MultivaluedMap", "<", "String", ",", "Object", ">", "httpHeaders", ",", "OutputStream", "entityStream", ")", "throws", "IOException", "{", "if", "(", "!", "entity", ".", "isPresent", "(", ")", ")", "{", "throw", "EmptyOptionalException", ".", "INSTANCE", ";", "}", "final", "ParameterizedType", "actualGenericType", "=", "(", "ParameterizedType", ")", "genericType", ";", "final", "Type", "actualGenericTypeArgument", "=", "actualGenericType", ".", "getActualTypeArguments", "(", ")", "[", "0", "]", ";", "final", "MessageBodyWriter", "writer", "=", "requireNonNull", "(", "mbw", ")", ".", "get", "(", ")", ".", "getMessageBodyWriter", "(", "entity", ".", "get", "(", ")", ".", "getClass", "(", ")", ",", "actualGenericTypeArgument", ",", "annotations", ",", "mediaType", ")", ";", "writer", ".", "writeTo", "(", "entity", ".", "get", "(", ")", ",", "entity", ".", "get", "(", ")", ".", "getClass", "(", ")", ",", "actualGenericTypeArgument", ",", "annotations", ",", "mediaType", ",", "httpHeaders", ",", "entityStream", ")", ";", "}", "</s>"]
["<s>", "public", "JerseyEnvironment", "(", "JerseyContainerHolder", "holder", ",", "DropwizardResourceConfig", "config", ")", "{", "this", ".", "holder", "=", "holder", ";", "this", ".", "config", "=", "config", ";", "}", "</s>"]
["<s>", "public", "void", "disable", "(", ")", "{", "holder", ".", "setContainer", "(", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "replace", "(", "Function", "<", "ResourceConfig", ",", "Servlet", ">", "replace", ")", "{", "holder", ".", "setContainer", "(", "replace", ".", "apply", "(", "config", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "register", "(", "Object", "component", ")", "{", "config", ".", "register", "(", "requireNonNull", "(", "component", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "register", "(", "Class", "<", "?", ">", "componentClass", ")", "{", "config", ".", "register", "(", "requireNonNull", "(", "componentClass", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "packages", "(", "String", ".", ".", ".", "packages", ")", "{", "config", ".", "packages", "(", "requireNonNull", "(", "packages", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "enable", "(", "String", "featureName", ")", "{", "config", ".", "property", "(", "requireNonNull", "(", "featureName", ")", ",", "Boolean", ".", "TRUE", ")", ";", "}", "</s>"]
["<s>", "public", "void", "disable", "(", "String", "featureName", ")", "{", "config", ".", "property", "(", "requireNonNull", "(", "featureName", ")", ",", "Boolean", ".", "FALSE", ")", ";", "}", "</s>"]
["<s>", "public", "void", "property", "(", "String", "name", ",", "@", "Nullable", "Object", "value", ")", "{", "config", ".", "property", "(", "requireNonNull", "(", "name", ")", ",", "value", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Nullable", "public", "<", "T", ">", "T", "getProperty", "(", "String", "name", ")", "{", "return", "(", "T", ")", "config", ".", "getProperties", "(", ")", ".", "get", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getUrlPattern", "(", ")", "{", "return", "config", ".", "getUrlPattern", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setUrlPattern", "(", "String", "urlPattern", ")", "{", "String", "normalizedUrlPattern", "=", "urlPattern", ";", "if", "(", "!", "normalizedUrlPattern", ".", "endsWith", "(", "\"", "<STR_LIT:*>", "\"", ")", "&", "&", "!", "normalizedUrlPattern", ".", "endsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", "{", "normalizedUrlPattern", "+", "=", "\"", "<STR_LIT:/>", "\"", ";", "}", "if", "(", "!", "normalizedUrlPattern", ".", "endsWith", "(", "\"", "<STR_LIT:*>", "\"", ")", ")", "{", "normalizedUrlPattern", "+", "=", "\"", "<STR_LIT:*>", "\"", ";", "}", "config", ".", "setUrlPattern", "(", "normalizedUrlPattern", ")", ";", "}", "</s>"]
["<s>", "public", "DropwizardResourceConfig", "getResourceConfig", "(", ")", "{", "return", "config", ";", "}", "</s>"]
["<s>", "public", "JerseyServletContainer", "(", ")", "{", "}", "</s>"]
["<s>", "public", "JerseyServletContainer", "(", "DropwizardResourceConfig", "resourceConfig", ")", "{", "super", "(", "resourceConfig", ")", ";", "}", "</s>"]
["<s>", "public", "JerseyContainerHolder", "(", "@", "Nullable", "Servlet", "container", ")", "{", "this", ".", "container", "=", "container", ";", "}", "</s>"]
["<s>", "@", "Nullable", "public", "Servlet", "getContainer", "(", ")", "{", "return", "container", ";", "}", "</s>"]
["<s>", "public", "void", "setContainer", "(", "@", "Nullable", "Servlet", "container", ")", "{", "this", ".", "container", "=", "container", ";", "}", "</s>"]
["<s>", "public", "ConfiguredGZipEncoder", "(", "boolean", "forceEncoding", ")", "{", "this", ".", "forceEncoding", "=", "forceEncoding", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "ClientRequestContext", "context", ")", "throws", "IOException", "{", "if", "(", "context", ".", "hasEntity", "(", ")", "&", "&", "context", ".", "getHeaders", "(", ")", ".", "getFirst", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ")", "=", "=", "null", "&", "&", "this", ".", "forceEncoding", ")", "{", "context", ".", "getHeaders", "(", ")", ".", "add", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "final", "void", "aroundWriteTo", "(", "WriterInterceptorContext", "context", ")", "throws", "IOException", "{", "final", "String", "contentEncoding", "=", "(", "String", ")", "context", ".", "getHeaders", "(", ")", ".", "getFirst", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ")", ";", "if", "(", "(", "contentEncoding", "!", "=", "null", ")", "&", "&", "(", "contentEncoding", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", "|", "|", "contentEncoding", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "context", ".", "setOutputStream", "(", "new", "GZIPOutputStream", "(", "context", ".", "getOutputStream", "(", ")", ")", ")", ";", "}", "context", ".", "proceed", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "aroundReadFrom", "(", "ReaderInterceptorContext", "context", ")", "throws", "IOException", "{", "if", "(", "!", "context", ".", "getHeaders", "(", ")", ".", "containsKey", "(", "HttpHeaders", ".", "ACCEPT_ENCODING", ")", ")", "{", "context", ".", "getHeaders", "(", ")", ".", "add", "(", "HttpHeaders", ".", "ACCEPT_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "final", "String", "contentEncoding", "=", "context", ".", "getHeaders", "(", ")", ".", "getFirst", "(", "HttpHeaders", ".", "CONTENT_ENCODING", ")", ";", "if", "(", "contentEncoding", "!", "=", "null", "&", "&", "(", "contentEncoding", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", "|", "|", "contentEncoding", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "context", ".", "setInputStream", "(", "new", "GZIPInputStream", "(", "context", ".", "getInputStream", "(", ")", ")", ")", ";", "}", "return", "context", ".", "proceed", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Inject", "public", "OptionalParamConverterProvider", "(", "final", "ServiceLocator", "locator", ")", "{", "this", ".", "locator", "=", "locator", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "<", "T", ">", "ParamConverter", "<", "T", ">", "getConverter", "(", "final", "Class", "<", "T", ">", "rawType", ",", "final", "Type", "genericType", ",", "final", "Annotation", "[", "]", "annotations", ")", "{", "if", "(", "Optional", ".", "class", ".", "equals", "(", "rawType", ")", ")", "{", "final", "List", "<", "ClassTypePair", ">", "ctps", "=", "ReflectionHelper", ".", "getTypeArgumentAndClass", "(", "genericType", ")", ";", "final", "ClassTypePair", "ctp", "=", "(", "ctps", ".", "size", "(", ")", "=", "=", "1", ")", "?", "ctps", ".", "get", "(", "0", ")", ":", "null", ";", "if", "(", "ctp", "=", "=", "null", "|", "|", "ctp", ".", "rawClass", "(", ")", "=", "=", "String", ".", "class", ")", "{", "return", "new", "ParamConverter", "<", "T", ">", "(", ")", "{", "@", "Override", "public", "T", "fromString", "(", "final", "String", "value", ")", "{", "return", "rawType", ".", "cast", "(", "Optional", ".", "ofNullable", "(", "value", ")", ")", ";", "}", "@", "Override", "public", "String", "toString", "(", "final", "T", "value", ")", "{", "return", "value", ".", "toString", "(", ")", ";", "}", "}", ";", "}", "for", "(", "ParamConverterProvider", "provider", ":", "Providers", ".", "getProviders", "(", "locator", ",", "ParamConverterProvider", ".", "class", ")", ")", "{", "final", "ParamConverter", "<", "?", ">", "converter", "=", "provider", ".", "getConverter", "(", "ctp", ".", "rawClass", "(", ")", ",", "ctp", ".", "type", "(", ")", ",", "annotations", ")", ";", "if", "(", "converter", "!", "=", "null", ")", "{", "return", "new", "ParamConverter", "<", "T", ">", "(", ")", "{", "@", "Override", "public", "T", "fromString", "(", "final", "String", "value", ")", "{", "return", "rawType", ".", "cast", "(", "Optional", ".", "ofNullable", "(", "value", ")", ".", "map", "(", "s", "-", ">", "converter", ".", "fromString", "(", "value", ")", ")", ")", ";", "}", "@", "Override", "public", "String", "toString", "(", "final", "T", "value", ")", "{", "return", "value", ".", "toString", "(", ")", ";", "}", "}", ";", "}", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "T", "fromString", "(", "final", "String", "value", ")", "{", "return", "rawType", ".", "cast", "(", "Optional", ".", "ofNullable", "(", "value", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", "final", "T", "value", ")", "{", "return", "value", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "T", "fromString", "(", "final", "String", "value", ")", "{", "return", "rawType", ".", "cast", "(", "Optional", ".", "ofNullable", "(", "value", ")", ".", "map", "(", "s", "-", ">", "converter", ".", "fromString", "(", "value", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", "final", "T", "value", ")", "{", "return", "value", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Nullable", "public", "<", "T", ">", "ParamConverter", "<", "T", ">", "getConverter", "(", "final", "Class", "<", "T", ">", "rawType", ",", "final", "Type", "genericType", ",", "final", "Annotation", "[", "]", "annotations", ")", "{", "return", "OptionalDouble", ".", "class", ".", "equals", "(", "rawType", ")", "?", "(", "ParamConverter", "<", "T", ">", ")", "paramConverter", ":", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "OptionalDouble", "fromString", "(", "final", "String", "value", ")", "{", "if", "(", "value", "=", "=", "null", ")", "{", "return", "OptionalDouble", ".", "empty", "(", ")", ";", "}", "try", "{", "return", "OptionalDouble", ".", "of", "(", "Double", ".", "parseDouble", "(", "value", ")", ")", ";", "}", "catch", "(", "NumberFormatException", "e", ")", "{", "throw", "new", "IllegalArgumentException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", "final", "OptionalDouble", "value", ")", "{", "checkArgument", "(", "value", "!", "=", "null", ")", ";", "return", "value", ".", "isPresent", "(", ")", "?", "Double", ".", "toString", "(", "value", ".", "getAsDouble", "(", ")", ")", ":", "\"", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "configure", "(", "final", "FeatureContext", "context", ")", "{", "context", ".", "register", "(", "new", "OptionalParamBinder", "(", ")", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Nullable", "public", "<", "T", ">", "ParamConverter", "<", "T", ">", "getConverter", "(", "final", "Class", "<", "T", ">", "rawType", ",", "final", "Type", "genericType", ",", "final", "Annotation", "[", "]", "annotations", ")", "{", "return", "OptionalInt", ".", "class", ".", "equals", "(", "rawType", ")", "?", "(", "ParamConverter", "<", "T", ">", ")", "paramConverter", ":", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "OptionalInt", "fromString", "(", "final", "String", "value", ")", "{", "if", "(", "value", "=", "=", "null", ")", "{", "return", "OptionalInt", ".", "empty", "(", ")", ";", "}", "try", "{", "return", "OptionalInt", ".", "of", "(", "Integer", ".", "parseInt", "(", "value", ")", ")", ";", "}", "catch", "(", "NumberFormatException", "e", ")", "{", "throw", "new", "IllegalArgumentException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", "final", "OptionalInt", "value", ")", "{", "checkArgument", "(", "value", "!", "=", "null", ")", ";", "return", "value", ".", "isPresent", "(", ")", "?", "Integer", ".", "toString", "(", "value", ".", "getAsInt", "(", ")", ")", ":", "\"", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getSize", "(", "OptionalLong", "entity", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isWriteable", "(", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "OptionalLong", ".", "class", ".", "isAssignableFrom", "(", "type", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "writeTo", "(", "OptionalLong", "entity", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ",", "MultivaluedMap", "<", "String", ",", "Object", ">", "httpHeaders", ",", "OutputStream", "entityStream", ")", "throws", "IOException", "{", "if", "(", "!", "entity", ".", "isPresent", "(", ")", ")", "{", "throw", "EmptyOptionalException", ".", "INSTANCE", ";", "}", "entityStream", ".", "write", "(", "Long", ".", "toString", "(", "entity", ".", "getAsLong", "(", ")", ")", ".", "getBytes", "(", "StandardCharsets", ".", "US_ASCII", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "configure", "(", ")", "{", "bind", "(", "OptionalParamConverterProvider", ".", "class", ")", ".", "to", "(", "ParamConverterProvider", ".", "class", ")", ".", "in", "(", "Singleton", ".", "class", ")", ";", "bind", "(", "OptionalDoubleParamConverterProvider", ".", "class", ")", ".", "to", "(", "ParamConverterProvider", ".", "class", ")", ".", "in", "(", "Singleton", ".", "class", ")", ";", "bind", "(", "OptionalIntParamConverterProvider", ".", "class", ")", ".", "to", "(", "ParamConverterProvider", ".", "class", ")", ".", "in", "(", "Singleton", ".", "class", ")", ";", "bind", "(", "OptionalLongParamConverterProvider", ".", "class", ")", ".", "to", "(", "ParamConverterProvider", ".", "class", ")", ".", "in", "(", "Singleton", ".", "class", ")", ";", "}", "</s>"]
["<s>", "private", "EmptyOptionalException", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getSize", "(", "OptionalDouble", "entity", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isWriteable", "(", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "OptionalDouble", ".", "class", ".", "isAssignableFrom", "(", "type", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "@", "Override", "public", "void", "writeTo", "(", "OptionalDouble", "entity", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ",", "MultivaluedMap", "<", "String", ",", "Object", ">", "httpHeaders", ",", "OutputStream", "entityStream", ")", "throws", "IOException", "{", "if", "(", "!", "entity", ".", "isPresent", "(", ")", ")", "{", "throw", "EmptyOptionalException", ".", "INSTANCE", ";", "}", "entityStream", ".", "write", "(", "Double", ".", "toString", "(", "entity", ".", "getAsDouble", "(", ")", ")", ".", "getBytes", "(", "StandardCharsets", ".", "US_ASCII", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Nullable", "public", "<", "T", ">", "ParamConverter", "<", "T", ">", "getConverter", "(", "final", "Class", "<", "T", ">", "rawType", ",", "final", "Type", "genericType", ",", "final", "Annotation", "[", "]", "annotations", ")", "{", "return", "OptionalLong", ".", "class", ".", "equals", "(", "rawType", ")", "?", "(", "ParamConverter", "<", "T", ">", ")", "paramConverter", ":", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "OptionalLong", "fromString", "(", "final", "String", "value", ")", "{", "if", "(", "value", "=", "=", "null", ")", "{", "return", "OptionalLong", ".", "empty", "(", ")", ";", "}", "try", "{", "return", "OptionalLong", ".", "of", "(", "Long", ".", "parseLong", "(", "value", ")", ")", ";", "}", "catch", "(", "NumberFormatException", "e", ")", "{", "throw", "new", "IllegalArgumentException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", "final", "OptionalLong", "value", ")", "{", "checkArgument", "(", "value", "!", "=", "null", ")", ";", "return", "value", ".", "isPresent", "(", ")", "?", "Long", ".", "toString", "(", "value", ".", "getAsLong", "(", ")", ")", ":", "\"", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getSize", "(", "OptionalInt", "entity", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isWriteable", "(", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "OptionalInt", ".", "class", ".", "isAssignableFrom", "(", "type", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "@", "Override", "public", "void", "writeTo", "(", "OptionalInt", "entity", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ",", "MultivaluedMap", "<", "String", ",", "Object", ">", "httpHeaders", ",", "OutputStream", "entityStream", ")", "throws", "IOException", "{", "if", "(", "!", "entity", ".", "isPresent", "(", ")", ")", "{", "throw", "EmptyOptionalException", ".", "INSTANCE", ";", "}", "entityStream", ".", "write", "(", "Integer", ".", "toString", "(", "entity", ".", "getAsInt", "(", ")", ")", ".", "getBytes", "(", "StandardCharsets", ".", "US_ASCII", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "EmptyOptionalException", "exception", ")", "{", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "NOT_FOUND", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getSize", "(", "Optional", "<", "?", ">", "entity", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isWriteable", "(", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "Optional", ".", "class", ".", "isAssignableFrom", "(", "type", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "@", "Override", "public", "void", "writeTo", "(", "Optional", "<", "?", ">", "entity", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ",", "MultivaluedMap", "<", "String", ",", "Object", ">", "httpHeaders", ",", "OutputStream", "entityStream", ")", "throws", "IOException", "{", "if", "(", "!", "entity", ".", "isPresent", "(", ")", ")", "{", "throw", "EmptyOptionalException", ".", "INSTANCE", ";", "}", "final", "Type", "innerGenericType", "=", "(", "genericType", "instanceof", "ParameterizedType", ")", "?", "(", "(", "ParameterizedType", ")", "genericType", ")", ".", "getActualTypeArguments", "(", ")", "[", "0", "]", ":", "entity", ".", "get", "(", ")", ".", "getClass", "(", ")", ";", "final", "MessageBodyWriter", "writer", "=", "requireNonNull", "(", "mbw", ")", ".", "get", "(", ")", ".", "getMessageBodyWriter", "(", "entity", ".", "get", "(", ")", ".", "getClass", "(", ")", ",", "innerGenericType", ",", "annotations", ",", "mediaType", ")", ";", "writer", ".", "writeTo", "(", "entity", ".", "get", "(", ")", ",", "entity", ".", "get", "(", ")", ".", "getClass", "(", ")", ",", "innerGenericType", ",", "annotations", ",", "mediaType", ",", "httpHeaders", ",", "entityStream", ")", ";", "}", "</s>"]
["<s>", "public", "LocalDateParam", "(", "@", "Nullable", "final", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "LocalDate", "parse", "(", "@", "Nullable", "final", "String", "input", ")", "throws", "Exception", "{", "return", "LocalDate", ".", "parse", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "ZonedDateTimeParam", "(", "@", "Nullable", "final", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "ZonedDateTime", "parse", "(", "@", "Nullable", "final", "String", "input", ")", "throws", "Exception", "{", "return", "ZonedDateTime", ".", "parse", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "OffsetDateTimeParam", "(", "@", "Nullable", "final", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "OffsetDateTime", "parse", "(", "@", "Nullable", "final", "String", "input", ")", "throws", "Exception", "{", "return", "OffsetDateTime", ".", "parse", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "YearMonthParam", "(", "@", "Nullable", "final", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "YearMonth", "parse", "(", "@", "Nullable", "final", "String", "input", ")", "throws", "Exception", "{", "return", "YearMonth", ".", "parse", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "InstantSecondParam", "(", "@", "Nullable", "final", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Instant", "parse", "(", "@", "Nullable", "final", "String", "input", ")", "throws", "Exception", "{", "return", "Instant", ".", "ofEpochSecond", "(", "Long", ".", "parseLong", "(", "input", ")", ")", ";", "}", "</s>"]
["<s>", "public", "LocalTimeParam", "(", "@", "Nullable", "final", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "LocalTime", "parse", "(", "@", "Nullable", "final", "String", "input", ")", "throws", "Exception", "{", "return", "LocalTime", ".", "parse", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "YearParam", "(", "@", "Nullable", "final", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Year", "parse", "(", "@", "Nullable", "final", "String", "input", ")", "throws", "Exception", "{", "return", "Year", ".", "parse", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "ZoneIdParam", "(", "@", "Nullable", "final", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "ZoneId", "parse", "(", "@", "Nullable", "final", "String", "input", ")", "throws", "Exception", "{", "return", "ZoneId", ".", "of", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "InstantParam", "(", "@", "Nullable", "final", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Instant", "parse", "(", "@", "Nullable", "final", "String", "input", ")", "throws", "Exception", "{", "return", "Instant", ".", "ofEpochMilli", "(", "Long", ".", "parseLong", "(", "input", ")", ")", ";", "}", "</s>"]
["<s>", "public", "LocalDateTimeParam", "(", "@", "Nullable", "final", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "LocalDateTime", "parse", "(", "@", "Nullable", "final", "String", "input", ")", "throws", "Exception", "{", "return", "LocalDateTime", ".", "parse", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "HttpSessionFactory", "(", "boolean", "doNotCreate", ")", "{", "this", ".", "doNotCreate", "=", "doNotCreate", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "HttpSession", "provide", "(", ")", "{", "if", "(", "request", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "request", ".", "getSession", "(", "!", "doNotCreate", ")", ";", "}", "</s>"]
["<s>", "@", "Inject", "public", "SessionFactoryProvider", "(", "final", "MultivaluedParameterExtractorProvider", "extractorProvider", ",", "final", "ServiceLocator", "injector", ")", "{", "super", "(", "extractorProvider", ",", "injector", ",", "Parameter", ".", "Source", ".", "UNKNOWN", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "protected", "Factory", "<", "?", ">", "createValueFactory", "(", "final", "Parameter", "parameter", ")", "{", "final", "Class", "<", "?", ">", "classType", "=", "parameter", ".", "getRawType", "(", ")", ";", "final", "Session", "sessionAnnotation", "=", "parameter", ".", "getAnnotation", "(", "Session", ".", "class", ")", ";", "if", "(", "sessionAnnotation", "=", "=", "null", ")", "{", "return", "null", ";", "}", "if", "(", "classType", ".", "isAssignableFrom", "(", "HttpSession", ".", "class", ")", ")", "{", "return", "new", "HttpSessionFactory", "(", "sessionAnnotation", ".", "doNotCreate", "(", ")", ")", ";", "}", "else", "if", "(", "classType", ".", "isAssignableFrom", "(", "Flash", ".", "class", ")", ")", "{", "return", "new", "FlashFactory", "(", "sessionAnnotation", ".", "doNotCreate", "(", ")", ")", ";", "}", "else", "{", "return", "null", ";", "}", "}", "</s>"]
["<s>", "public", "SessionInjectionResolver", "(", ")", "{", "super", "(", "SessionFactoryProvider", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "configure", "(", ")", "{", "bind", "(", "SessionFactoryProvider", ".", "class", ")", ".", "to", "(", "ValueFactoryProvider", ".", "class", ")", ".", "in", "(", "Singleton", ".", "class", ")", ";", "bind", "(", "SessionInjectionResolver", ".", "class", ")", ".", "to", "(", "new", "TypeLiteral", "<", "InjectionResolver", "<", "Session", ">", ">", "(", ")", "{", "}", ")", ".", "in", "(", "Singleton", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "Flash", "(", "HttpSession", "session", ")", "{", "this", ".", "session", "=", "session", ";", "this", ".", "value", "=", "(", "T", ")", "session", ".", "getAttribute", "(", "ATTRIBUTE", ")", ";", "if", "(", "this", ".", "value", "!", "=", "null", ")", "{", "session", ".", "removeAttribute", "(", "ATTRIBUTE", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Optional", "<", "T", ">", "get", "(", ")", "{", "return", "Optional", ".", "ofNullable", "(", "value", ")", ";", "}", "</s>"]
["<s>", "public", "void", "set", "(", "T", "value", ")", "{", "session", ".", "setAttribute", "(", "ATTRIBUTE", ",", "value", ")", ";", "}", "</s>"]
["<s>", "public", "FlashFactory", "(", "boolean", "doNotCreate", ")", "{", "this", ".", "doNotCreate", "=", "doNotCreate", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Nullable", "public", "Flash", "<", "?", ">", "provide", "(", ")", "{", "if", "(", "request", "=", "=", "null", ")", "{", "return", "null", ";", "}", "final", "HttpSession", "session", "=", "request", ".", "getSession", "(", "!", "this", ".", "doNotCreate", ")", ";", "if", "(", "session", "!", "=", "null", ")", "{", "return", "new", "Flash", "(", "session", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "LocalDateParam", "(", "@", "Nullable", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "LocalDateParam", "(", "@", "Nullable", "String", "input", ",", "String", "parameterName", ")", "{", "super", "(", "input", ",", "parameterName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "LocalDate", "parse", "(", "@", "Nullable", "String", "input", ")", "throws", "Exception", "{", "return", "new", "LocalDate", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "LongParam", "(", "@", "Nullable", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "LongParam", "(", "@", "Nullable", "String", "input", ",", "String", "parameterName", ")", "{", "super", "(", "input", ",", "parameterName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "errorMessage", "(", "Exception", "e", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Long", "parse", "(", "@", "Nullable", "String", "input", ")", "{", "return", "Long", ".", "valueOf", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "DurationParam", "(", "@", "Nullable", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "DurationParam", "(", "@", "Nullable", "String", "input", ",", "String", "parameterName", ")", "{", "super", "(", "input", ",", "parameterName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "errorMessage", "(", "Exception", "e", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Duration", "parse", "(", "@", "Nullable", "String", "input", ")", "throws", "Exception", "{", "return", "Duration", ".", "parse", "(", "requireNonNull", "(", "input", ")", ")", ";", "}", "</s>"]
["<s>", "public", "DateTimeParam", "(", "@", "Nullable", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "DateTimeParam", "(", "@", "Nullable", "String", "input", ",", "String", "parameterName", ")", "{", "super", "(", "input", ",", "parameterName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "DateTime", "parse", "(", "@", "Nullable", "String", "input", ")", "throws", "Exception", "{", "return", "new", "DateTime", "(", "input", ",", "DateTimeZone", ".", "UTC", ")", ";", "}", "</s>"]
["<s>", "protected", "AbstractParam", "(", "@", "Nullable", "String", "input", ")", "{", "this", "(", "input", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "protected", "AbstractParam", "(", "@", "Nullable", "String", "input", ",", "String", "parameterName", ")", "{", "this", ".", "parameterName", "=", "parameterName", ";", "try", "{", "this", ".", "value", "=", "parse", "(", "input", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "WebApplicationException", "(", "error", "(", "input", ",", "e", ")", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "Response", "error", "(", "@", "Nullable", "String", "input", ",", "Exception", "e", ")", "{", "LOGGER", ".", "debug", "(", "\"", "<STR_LIT>", "\"", ",", "input", ")", ";", "String", "errorMessage", "=", "errorMessage", "(", "e", ")", ";", "if", "(", "errorMessage", ".", "contains", "(", "\"", "<STR_LIT:%s>", "\"", ")", ")", "{", "errorMessage", "=", "String", ".", "format", "(", "errorMessage", ",", "parameterName", ")", ";", "}", "return", "Response", ".", "status", "(", "getErrorStatus", "(", ")", ")", ".", "entity", "(", "new", "ErrorMessage", "(", "getErrorStatus", "(", ")", ".", "getStatusCode", "(", ")", ",", "errorMessage", ")", ")", ".", "type", "(", "mediaType", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "MediaType", "mediaType", "(", ")", "{", "return", "MediaType", ".", "APPLICATION_JSON_TYPE", ";", "}", "</s>"]
["<s>", "protected", "String", "errorMessage", "(", "Exception", "e", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "parameterName", ",", "e", ".", "getMessage", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "protected", "Status", "getErrorStatus", "(", ")", "{", "return", "Status", ".", "BAD_REQUEST", ";", "}", "</s>"]
["<s>", "protected", "abstract", "T", "parse", "(", "@", "Nullable", "String", "input", ")", "throws", "Exception", ";", "</s>"]
["<s>", "public", "T", "get", "(", ")", "{", "return", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "this", "=", "=", "obj", ")", "{", "return", "true", ";", "}", "if", "(", "(", "obj", "=", "=", "null", ")", "|", "|", "(", "getClass", "(", ")", "!", "=", "obj", ".", "getClass", "(", ")", ")", ")", "{", "return", "false", ";", "}", "final", "AbstractParam", "<", "?", ">", "that", "=", "(", "AbstractParam", "<", "?", ">", ")", "obj", ";", "return", "value", ".", "equals", "(", "that", ".", "value", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "value", ".", "hashCode", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "value", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "BooleanParam", "(", "@", "Nullable", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "BooleanParam", "(", "@", "Nullable", "String", "input", ",", "String", "parameterName", ")", "{", "super", "(", "input", ",", "parameterName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "errorMessage", "(", "Exception", "e", ")", "{", "return", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:.>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Boolean", "parse", "(", "@", "Nullable", "String", "input", ")", "throws", "Exception", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "input", ")", ")", "{", "return", "Boolean", ".", "TRUE", ";", "}", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "input", ")", ")", "{", "return", "Boolean", ".", "FALSE", ";", "}", "throw", "new", "Exception", "(", ")", ";", "}", "</s>"]
["<s>", "public", "NonEmptyStringParam", "(", "@", "Nullable", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "NonEmptyStringParam", "(", "@", "Nullable", "String", "input", ",", "String", "parameterName", ")", "{", "super", "(", "input", ",", "parameterName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Optional", "<", "String", ">", "parse", "(", "@", "Nullable", "String", "input", ")", "throws", "Exception", "{", "return", "Optional", ".", "ofNullable", "(", "Strings", ".", "emptyToNull", "(", "input", ")", ")", ";", "}", "</s>"]
["<s>", "public", "AbstractParamConverterProvider", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "<", "T", ">", "ParamConverter", "<", "T", ">", "getConverter", "(", "Class", "<", "T", ">", "rawType", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ")", "{", "if", "(", "AbstractParam", ".", "class", ".", "isAssignableFrom", "(", "rawType", ")", ")", "{", "final", "String", "parameterName", "=", "JerseyParameterNameProvider", ".", "getParameterNameFromAnnotations", "(", "annotations", ")", ".", "orElse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Constructor", "<", "T", ">", "constructor", ";", "try", "{", "constructor", "=", "rawType", ".", "getConstructor", "(", "String", ".", "class", ",", "String", ".", "class", ")", ";", "}", "catch", "(", "NoSuchMethodException", "ignored", ")", "{", "return", "null", ";", "}", "return", "new", "ParamConverter", "<", "T", ">", "(", ")", "{", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Nullable", "public", "T", "fromString", "(", "String", "value", ")", "{", "if", "(", "rawType", "!", "=", "NonEmptyStringParam", ".", "class", "&", "&", "Strings", ".", "isNullOrEmpty", "(", "value", ")", ")", "{", "return", "null", ";", "}", "try", "{", "return", "_fromString", "(", "value", ")", ";", "}", "catch", "(", "InvocationTargetException", "ex", ")", "{", "final", "Throwable", "cause", "=", "ex", ".", "getCause", "(", ")", ";", "if", "(", "cause", "instanceof", "WebApplicationException", ")", "{", "throw", "(", "WebApplicationException", ")", "cause", ";", "}", "else", "{", "throw", "new", "ExtractorException", "(", "cause", ")", ";", "}", "}", "catch", "(", "final", "Exception", "ex", ")", "{", "throw", "new", "ProcessingException", "(", "ex", ")", ";", "}", "}", "protected", "T", "_fromString", "(", "String", "value", ")", "throws", "Exception", "{", "return", "constructor", ".", "newInstance", "(", "value", ",", "parameterName", ")", ";", "}", "@", "Override", "public", "String", "toString", "(", "T", "value", ")", "throws", "IllegalArgumentException", "{", "if", "(", "value", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "LocalizationMessages", ".", "METHOD_PARAMETER_CANNOT_BE_NULL", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "return", "value", ".", "toString", "(", ")", ";", "}", "}", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Nullable", "public", "T", "fromString", "(", "String", "value", ")", "{", "if", "(", "rawType", "!", "=", "NonEmptyStringParam", ".", "class", "&", "&", "Strings", ".", "isNullOrEmpty", "(", "value", ")", ")", "{", "return", "null", ";", "}", "try", "{", "return", "_fromString", "(", "value", ")", ";", "}", "catch", "(", "InvocationTargetException", "ex", ")", "{", "final", "Throwable", "cause", "=", "ex", ".", "getCause", "(", ")", ";", "if", "(", "cause", "instanceof", "WebApplicationException", ")", "{", "throw", "(", "WebApplicationException", ")", "cause", ";", "}", "else", "{", "throw", "new", "ExtractorException", "(", "cause", ")", ";", "}", "}", "catch", "(", "final", "Exception", "ex", ")", "{", "throw", "new", "ProcessingException", "(", "ex", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "T", "_fromString", "(", "String", "value", ")", "throws", "Exception", "{", "return", "constructor", ".", "newInstance", "(", "value", ",", "parameterName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", "T", "value", ")", "throws", "IllegalArgumentException", "{", "if", "(", "value", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "LocalizationMessages", ".", "METHOD_PARAMETER_CANNOT_BE_NULL", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "return", "value", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "SizeParam", "(", "@", "Nullable", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "SizeParam", "(", "@", "Nullable", "String", "input", ",", "String", "parameterName", ")", "{", "super", "(", "input", ",", "parameterName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "errorMessage", "(", "Exception", "e", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Size", "parse", "(", "@", "Nullable", "String", "input", ")", "throws", "Exception", "{", "return", "Size", ".", "parse", "(", "requireNonNull", "(", "input", ")", ")", ";", "}", "</s>"]
["<s>", "public", "UUIDParam", "(", "@", "Nullable", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "UUIDParam", "(", "@", "Nullable", "String", "input", ",", "String", "parameterName", ")", "{", "super", "(", "input", ",", "parameterName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "errorMessage", "(", "Exception", "e", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "UUID", "parse", "(", "@", "Nullable", "String", "input", ")", "throws", "Exception", "{", "return", "UUID", ".", "fromString", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "InstantParam", "(", "@", "Nullable", "final", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "InstantParam", "(", "@", "Nullable", "final", "String", "input", ",", "final", "String", "parameterName", ")", "{", "super", "(", "input", ",", "parameterName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "errorMessage", "(", "Exception", "e", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Instant", "parse", "(", "@", "Nullable", "final", "String", "input", ")", "throws", "Exception", "{", "return", "Instant", ".", "parse", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "IntParam", "(", "@", "Nullable", "String", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "IntParam", "(", "@", "Nullable", "String", "input", ",", "String", "parameterName", ")", "{", "super", "(", "input", ",", "parameterName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "errorMessage", "(", "Exception", "e", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Integer", "parse", "(", "@", "Nullable", "String", "input", ")", "{", "return", "Integer", ".", "valueOf", "(", "input", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "final", "ContainerRequestContext", "request", ",", "final", "ContainerResponseContext", "response", ")", "throws", "IOException", "{", "final", "MediaType", "type", "=", "response", ".", "getMediaType", "(", ")", ";", "if", "(", "type", "!", "=", "null", "&", "&", "!", "type", ".", "getParameters", "(", ")", ".", "containsKey", "(", "MediaType", ".", "CHARSET_PARAMETER", ")", ")", "{", "final", "MediaType", "typeWithCharset", "=", "type", ".", "withCharset", "(", "UTF_8", ")", ";", "response", ".", "getHeaders", "(", ")", ".", "putSingle", "(", "HttpHeaders", ".", "CONTENT_TYPE", ",", "typeWithCharset", ")", ";", "}", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "setCurrentTimeProvider", "(", "Supplier", "<", "Long", ">", "currentTimeProvider", ")", "{", "this", ".", "currentTimeProvider", "=", "currentTimeProvider", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "final", "ContainerRequestContext", "request", ")", "throws", "IOException", "{", "request", ".", "setProperty", "(", "RUNTIME_PROPERTY", ",", "currentTimeProvider", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "final", "ContainerRequestContext", "request", ",", "final", "ContainerResponseContext", "response", ")", "throws", "IOException", "{", "final", "Long", "startTime", "=", "(", "Long", ")", "request", ".", "getProperty", "(", "RUNTIME_PROPERTY", ")", ";", "if", "(", "startTime", "!", "=", "null", ")", "{", "final", "float", "seconds", "=", "(", "currentTimeProvider", ".", "get", "(", ")", "-", "startTime", ")", "/", "NANOS_IN_SECOND", ";", "response", ".", "getHeaders", "(", ")", ".", "putSingle", "(", "RUNTIME_HEADER", ",", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "seconds", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "setLogger", "(", "Logger", "logger", ")", "{", "this", ".", "logger", "=", "logger", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "final", "ContainerRequestContext", "request", ",", "final", "ContainerResponseContext", "response", ")", "throws", "IOException", "{", "String", "id", "=", "request", ".", "getHeaderString", "(", "REQUEST_ID", ")", ";", "if", "(", "Strings", ".", "isNullOrEmpty", "(", "id", ")", ")", "{", "id", "=", "generateRandomUuid", "(", ")", ".", "toString", "(", ")", ";", "}", "logger", ".", "trace", "(", "\"", "<STR_LIT>", "\"", ",", "request", ".", "getMethod", "(", ")", ",", "request", ".", "getUriInfo", "(", ")", ".", "getPath", "(", ")", ",", "id", ",", "response", ".", "getStatus", "(", ")", ",", "response", ".", "getLength", "(", ")", ")", ";", "response", ".", "getHeaders", "(", ")", ".", "putSingle", "(", "REQUEST_ID", ",", "id", ")", ";", "}", "</s>"]
["<s>", "private", "static", "UUID", "generateRandomUuid", "(", ")", "{", "final", "Random", "rnd", "=", "ThreadLocalRandom", ".", "current", "(", ")", ";", "long", "mostSig", "=", "rnd", ".", "nextLong", "(", ")", ";", "long", "leastSig", "=", "rnd", ".", "nextLong", "(", ")", ";", "mostSig", "&", "=", "<NUM_LIT>", ";", "mostSig", "|", "=", "<NUM_LIT>", ";", "leastSig", "&", "=", "<NUM_LIT>", ";", "leastSig", "|", "=", "<NUM_LIT>", ";", "return", "new", "UUID", "(", "mostSig", ",", "leastSig", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "init", "(", "FilterConfig", "config", ")", "{", "allowedMethods", "=", "Optional", ".", "ofNullable", "(", "config", ".", "getInitParameter", "(", "ALLOWED_METHODS_PARAM", ")", ")", ".", "map", "(", "p", "-", ">", "ImmutableSet", ".", "copyOf", "(", "p", ".", "split", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ")", ")", ".", "orElse", "(", "DEFAULT_ALLOWED_METHODS", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "doFilter", "(", "ServletRequest", "request", ",", "ServletResponse", "response", ",", "FilterChain", "chain", ")", "throws", "IOException", ",", "ServletException", "{", "handle", "(", "(", "HttpServletRequest", ")", "request", ",", "(", "HttpServletResponse", ")", "response", ",", "chain", ")", ";", "}", "</s>"]
["<s>", "private", "void", "handle", "(", "HttpServletRequest", "request", ",", "HttpServletResponse", "response", ",", "FilterChain", "chain", ")", "throws", "IOException", ",", "ServletException", "{", "if", "(", "allowedMethods", ".", "contains", "(", "request", ".", "getMethod", "(", ")", ")", ")", "{", "chain", ".", "doFilter", "(", "request", ",", "response", ")", ";", "}", "else", "{", "LOG", ".", "debug", "(", "\"", "<STR_LIT>", "\"", ",", "request", ".", "getMethod", "(", ")", ")", ";", "response", ".", "sendError", "(", "HttpServletResponse", ".", "SC_METHOD_NOT_ALLOWED", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "destroy", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "EofException", "e", ")", "{", "LOGGER", ".", "debug", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "final", "IllegalStateException", "exception", ")", "{", "final", "String", "message", "=", "exception", ".", "getMessage", "(", ")", ";", "if", "(", "LocalizationMessages", ".", "FORM_PARAM_CONTENT_TYPE_ERROR", "(", ")", ".", "equals", "(", "message", ")", ")", "{", "LOGGER", ".", "debug", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "exception", ")", ";", "return", "createResponse", "(", "new", "NotSupportedException", "(", ")", ")", ";", "}", "return", "super", ".", "toResponse", "(", "exception", ")", ";", "}", "</s>"]
["<s>", "private", "Response", "createResponse", "(", "final", "WebApplicationException", "exception", ")", "{", "final", "ErrorMessage", "errorMessage", "=", "new", "ErrorMessage", "(", "exception", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ",", "exception", ".", "getLocalizedMessage", "(", ")", ")", ";", "return", "Response", ".", "status", "(", "errorMessage", ".", "getCode", "(", ")", ")", ".", "type", "(", "APPLICATION_JSON_TYPE", ")", ".", "entity", "(", "errorMessage", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ErrorEntityWriter", "(", "MediaType", "contentType", ",", "Class", "<", "U", ">", "representation", ")", "{", "this", ".", "contentType", "=", "contentType", ";", "this", ".", "representation", "=", "representation", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isWriteable", "(", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "requireNonNull", "(", "headers", ")", ".", "getAcceptableMediaTypes", "(", ")", ".", "contains", "(", "contentType", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getSize", "(", "T", "entity", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "writeTo", "(", "T", "entity", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ",", "MultivaluedMap", "<", "String", ",", "Object", ">", "responseHeaders", ",", "OutputStream", "entityStream", ")", "throws", "IOException", ",", "WebApplicationException", "{", "final", "MessageBodyWriter", "<", "U", ">", "writer", "=", "requireNonNull", "(", "mbw", ")", ".", "get", "(", ")", ".", "getMessageBodyWriter", "(", "representation", ",", "representation", ",", "annotations", ",", "contentType", ")", ";", "responseHeaders", ".", "putSingle", "(", "HttpHeaders", ".", "CONTENT_TYPE", ",", "contentType", ")", ";", "writer", ".", "writeTo", "(", "getRepresentation", "(", "entity", ")", ",", "representation", ",", "representation", ",", "annotations", ",", "contentType", ",", "responseHeaders", ",", "entityStream", ")", ";", "}", "</s>"]
["<s>", "protected", "abstract", "U", "getRepresentation", "(", "T", "entity", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "E", "exception", ")", "{", "if", "(", "exception", "instanceof", "WebApplicationException", ")", "{", "final", "Response", "response", "=", "(", "(", "WebApplicationException", ")", "exception", ")", ".", "getResponse", "(", ")", ";", "Response", ".", "Status", ".", "Family", "family", "=", "response", ".", "getStatusInfo", "(", ")", ".", "getFamily", "(", ")", ";", "if", "(", "family", ".", "equals", "(", "Response", ".", "Status", ".", "Family", ".", "REDIRECTION", ")", ")", "{", "return", "response", ";", "}", "if", "(", "family", ".", "equals", "(", "Response", ".", "Status", ".", "Family", ".", "SERVER_ERROR", ")", ")", "{", "logException", "(", "exception", ")", ";", "}", "return", "Response", ".", "fromResponse", "(", "response", ")", ".", "type", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ".", "entity", "(", "new", "ErrorMessage", "(", "response", ".", "getStatus", "(", ")", ",", "exception", ".", "getLocalizedMessage", "(", ")", ")", ")", ".", "build", "(", ")", ";", "}", "final", "long", "id", "=", "logException", "(", "exception", ")", ";", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "INTERNAL_SERVER_ERROR", ".", "getStatusCode", "(", ")", ")", ".", "type", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ".", "entity", "(", "new", "ErrorMessage", "(", "formatErrorMessage", "(", "id", ",", "exception", ")", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "protected", "String", "formatErrorMessage", "(", "long", "id", ",", "E", "exception", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "id", ")", ";", "}", "</s>"]
["<s>", "protected", "long", "logException", "(", "E", "exception", ")", "{", "final", "long", "id", "=", "ThreadLocalRandom", ".", "current", "(", ")", ".", "nextLong", "(", ")", ";", "logException", "(", "id", ",", "exception", ")", ";", "return", "id", ";", "}", "</s>"]
["<s>", "protected", "void", "logException", "(", "long", "id", ",", "E", "exception", ")", "{", "LOGGER", ".", "error", "(", "formatLogMessage", "(", "id", ",", "exception", ")", ",", "exception", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "protected", "String", "formatLogMessage", "(", "long", "id", ",", "Throwable", "exception", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "id", ")", ";", "}", "</s>"]
["<s>", "public", "ErrorMessage", "(", "String", "message", ")", "{", "this", "(", "<NUM_LIT>", ",", "message", ")", ";", "}", "</s>"]
["<s>", "public", "ErrorMessage", "(", "int", "code", ",", "String", "message", ")", "{", "this", "(", "code", ",", "message", ",", "null", ")", ";", "}", "</s>"]
["<s>", "@", "JsonCreator", "public", "ErrorMessage", "(", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "int", "code", ",", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "String", "message", ",", "@", "Nullable", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "String", "details", ")", "{", "this", ".", "code", "=", "code", ";", "this", ".", "message", "=", "message", ";", "this", ".", "details", "=", "details", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Integer", "getCode", "(", ")", "{", "return", "code", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getMessage", "(", ")", "{", "return", "message", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Nullable", "public", "String", "getDetails", "(", ")", "{", "return", "details", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "final", "Object", "obj", ")", "{", "if", "(", "this", "=", "=", "obj", ")", "{", "return", "true", ";", "}", "if", "(", "(", "obj", "=", "=", "null", ")", "|", "|", "(", "getClass", "(", ")", "!", "=", "obj", ".", "getClass", "(", ")", ")", ")", "{", "return", "false", ";", "}", "final", "ErrorMessage", "other", "=", "(", "ErrorMessage", ")", "obj", ";", "return", "Objects", ".", "equals", "(", "code", ",", "other", ".", "code", ")", "&", "&", "Objects", ".", "equals", "(", "message", ",", "other", ".", "message", ")", "&", "&", "Objects", ".", "equals", "(", "details", ",", "other", ".", "details", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "Objects", ".", "hash", "(", "code", ",", "message", ",", "details", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "MoreObjects", ".", "toStringHelper", "(", "this", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "code", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "message", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "details", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "final", "ResourceInfo", "resourceInfo", ",", "final", "FeatureContext", "configuration", ")", "{", "final", "AnnotatedMethod", "am", "=", "new", "AnnotatedMethod", "(", "resourceInfo", ".", "getResourceMethod", "(", ")", ")", ";", "final", "CacheControl", "cc", "=", "am", ".", "getAnnotation", "(", "CacheControl", ".", "class", ")", ";", "if", "(", "cc", "!", "=", "null", ")", "{", "configuration", ".", "register", "(", "new", "CacheControlledResponseFilter", "(", "cc", ")", ")", ";", "}", "}", "</s>"]
["<s>", "CacheControlledResponseFilter", "(", "CacheControl", "control", ")", "{", "final", "javax", ".", "ws", ".", "rs", ".", "core", ".", "CacheControl", "cacheControl", "=", "new", "javax", ".", "ws", ".", "rs", ".", "core", ".", "CacheControl", "(", ")", ";", "cacheControl", ".", "setPrivate", "(", "control", ".", "isPrivate", "(", ")", ")", ";", "cacheControl", ".", "setNoCache", "(", "control", ".", "noCache", "(", ")", ")", ";", "cacheControl", ".", "setNoStore", "(", "control", ".", "noStore", "(", ")", ")", ";", "cacheControl", ".", "setNoTransform", "(", "control", ".", "noTransform", "(", ")", ")", ";", "cacheControl", ".", "setMustRevalidate", "(", "control", ".", "mustRevalidate", "(", ")", ")", ";", "cacheControl", ".", "setProxyRevalidate", "(", "control", ".", "proxyRevalidate", "(", ")", ")", ";", "cacheControl", ".", "setMaxAge", "(", "(", "int", ")", "control", ".", "maxAgeUnit", "(", ")", ".", "toSeconds", "(", "control", ".", "maxAge", "(", ")", ")", ")", ";", "cacheControl", ".", "setSMaxAge", "(", "(", "int", ")", "control", ".", "sharedMaxAgeUnit", "(", ")", ".", "toSeconds", "(", "control", ".", "sharedMaxAge", "(", ")", ")", ")", ";", "if", "(", "control", ".", "immutable", "(", ")", ")", "{", "cacheControl", ".", "setMaxAge", "(", "ONE_YEAR_IN_SECONDS", ")", ";", "}", "cacheResponseHeader", "=", "cacheControl", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "ContainerRequestContext", "requestContext", ",", "ContainerResponseContext", "responseContext", ")", "throws", "IOException", "{", "if", "(", "!", "cacheResponseHeader", ".", "isEmpty", "(", ")", ")", "{", "responseContext", ".", "getHeaders", "(", ")", ".", "add", "(", "HttpHeaders", ".", "CACHE_CONTROL", ",", "cacheResponseHeader", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "Object", "handleValidatedValue", "(", "final", "AbstractParam", "<", "?", ">", "abstractParam", ")", "{", "return", "abstractParam", "=", "=", "null", "?", "null", ":", "abstractParam", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Type", "getValidatedValueType", "(", "final", "Type", "type", ")", "{", "return", "resolver", ".", "resolve", "(", "type", ")", ".", "typeParametersFor", "(", "AbstractParam", ".", "class", ")", ".", "get", "(", "0", ")", ".", "getErasedType", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "List", "<", "String", ">", "getParameterNames", "(", "Method", "method", ")", "{", "Parameter", "[", "]", "parameters", "=", "method", ".", "getParameters", "(", ")", ";", "Annotation", "[", "]", "[", "]", "parameterAnnotations", "=", "method", ".", "getParameterAnnotations", "(", ")", ";", "List", "<", "String", ">", "names", "=", "new", "ArrayList", "<", ">", "(", "parameterAnnotations", ".", "length", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "parameterAnnotations", ".", "length", ";", "i", "+", "+", ")", "{", "Annotation", "[", "]", "annotations", "=", "parameterAnnotations", "[", "i", "]", ";", "String", "name", "=", "getParameterNameFromAnnotations", "(", "annotations", ")", ".", "orElse", "(", "parameters", "[", "i", "]", ".", "getName", "(", ")", ")", ";", "names", ".", "add", "(", "name", ")", ";", "}", "return", "names", ";", "}", "</s>"]
["<s>", "public", "static", "Optional", "<", "String", ">", "getParameterNameFromAnnotations", "(", "Annotation", "[", "]", "memberAnnotations", ")", "{", "for", "(", "Annotation", "a", ":", "memberAnnotations", ")", "{", "if", "(", "a", "instanceof", "QueryParam", ")", "{", "return", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", "+", "(", "(", "QueryParam", ")", "a", ")", ".", "value", "(", ")", ")", ";", "}", "else", "if", "(", "a", "instanceof", "PathParam", ")", "{", "return", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", "+", "(", "(", "PathParam", ")", "a", ")", ".", "value", "(", ")", ")", ";", "}", "else", "if", "(", "a", "instanceof", "HeaderParam", ")", "{", "return", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", "+", "(", "(", "HeaderParam", ")", "a", ")", ".", "value", "(", ")", ")", ";", "}", "else", "if", "(", "a", "instanceof", "CookieParam", ")", "{", "return", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", "+", "(", "(", "CookieParam", ")", "a", ")", ".", "value", "(", ")", ")", ";", "}", "else", "if", "(", "a", "instanceof", "FormParam", ")", "{", "return", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", "+", "(", "(", "FormParam", ")", "a", ")", ".", "value", "(", ")", ")", ";", "}", "else", "if", "(", "a", "instanceof", "Context", ")", "{", "return", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "a", "instanceof", "MatrixParam", ")", "{", "return", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", "+", "(", "(", "MatrixParam", ")", "a", ")", ".", "value", "(", ")", ")", ";", "}", "}", "return", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "handleValidatedValue", "(", "final", "NonEmptyStringParam", "nonEmptyStringParam", ")", "{", "return", "nonEmptyStringParam", ".", "get", "(", ")", ".", "orElse", "(", "null", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Type", "getValidatedValueType", "(", "final", "Type", "type", ")", "{", "return", "String", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "<", "T", ">", "ParamConverter", "<", "T", ">", "getConverter", "(", "Class", "<", "T", ">", "rawType", ",", "@", "Nullable", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ")", "{", "if", "(", "!", "rawType", ".", "isEnum", "(", ")", ")", "{", "return", "null", ";", "}", "final", "Class", "<", "Enum", "<", "?", ">", ">", "type", "=", "(", "Class", "<", "Enum", "<", "?", ">", ">", ")", "rawType", ";", "final", "Enum", "<", "?", ">", "[", "]", "constants", "=", "type", ".", "getEnumConstants", "(", ")", ";", "final", "String", "parameterName", "=", "getParameterNameFromAnnotations", "(", "annotations", ")", ".", "orElse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Method", "fromStringMethod", "=", "AccessController", ".", "doPrivileged", "(", "ReflectionHelper", ".", "getFromStringStringMethodPA", "(", "rawType", ")", ")", ";", "return", "new", "ParamConverter", "<", "T", ">", "(", ")", "{", "@", "Override", "@", "Nullable", "public", "T", "fromString", "(", "String", "value", ")", "{", "if", "(", "Strings", ".", "isNullOrEmpty", "(", "value", ")", ")", "{", "return", "null", ";", "}", "if", "(", "fromStringMethod", "!", "=", "null", ")", "{", "try", "{", "Object", "constant", "=", "fromStringMethod", ".", "invoke", "(", "null", ",", "value", ")", ";", "if", "(", "constant", "!", "=", "null", ")", "{", "return", "(", "T", ")", "constant", ";", "}", "final", "String", "errMsg", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "parameterName", ",", "rawType", ".", "getSimpleName", "(", ")", ")", ";", "throw", "new", "WebApplicationException", "(", "getErrorResponse", "(", "errMsg", ")", ")", ";", "}", "catch", "(", "IllegalAccessException", "e", ")", "{", "final", "String", "errMsg", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "rawType", ".", "getSimpleName", "(", ")", ")", ";", "LOGGER", ".", "debug", "(", "errMsg", ",", "e", ")", ";", "throw", "new", "WebApplicationException", "(", "getErrorResponse", "(", "errMsg", ")", ")", ";", "}", "catch", "(", "InvocationTargetException", "e", ")", "{", "if", "(", "e", ".", "getCause", "(", ")", "instanceof", "WebApplicationException", ")", "{", "throw", "(", "WebApplicationException", ")", "e", ".", "getCause", "(", ")", ";", "}", "final", "String", "errMsg", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "parameterName", ",", "rawType", ".", "getSimpleName", "(", ")", ")", ";", "LOGGER", ".", "debug", "(", "errMsg", ",", "e", ")", ";", "throw", "new", "WebApplicationException", "(", "getErrorResponse", "(", "errMsg", ")", ")", ";", "}", "}", "Object", "constant", "=", "Enums", ".", "fromStringFuzzy", "(", "value", ",", "constants", ")", ";", "if", "(", "constant", "!", "=", "null", ")", "{", "return", "(", "T", ")", "constant", ";", "}", "final", "String", "errMsg", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "parameterName", ",", "JOINER", ".", "join", "(", "constants", ")", ")", ";", "throw", "new", "WebApplicationException", "(", "getErrorResponse", "(", "errMsg", ")", ")", ";", "}", "@", "Override", "public", "String", "toString", "(", "T", "value", ")", "{", "return", "value", ".", "toString", "(", ")", ";", "}", "protected", "Response", "getErrorResponse", "(", "String", "message", ")", "{", "return", "Response", ".", "status", "(", "<NUM_LIT>", ")", ".", "entity", "(", "new", "ErrorMessage", "(", "<NUM_LIT>", ",", "message", ")", ")", ".", "type", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ".", "build", "(", ")", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Nullable", "public", "T", "fromString", "(", "String", "value", ")", "{", "if", "(", "Strings", ".", "isNullOrEmpty", "(", "value", ")", ")", "{", "return", "null", ";", "}", "if", "(", "fromStringMethod", "!", "=", "null", ")", "{", "try", "{", "Object", "constant", "=", "fromStringMethod", ".", "invoke", "(", "null", ",", "value", ")", ";", "if", "(", "constant", "!", "=", "null", ")", "{", "return", "(", "T", ")", "constant", ";", "}", "final", "String", "errMsg", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "parameterName", ",", "rawType", ".", "getSimpleName", "(", ")", ")", ";", "throw", "new", "WebApplicationException", "(", "getErrorResponse", "(", "errMsg", ")", ")", ";", "}", "catch", "(", "IllegalAccessException", "e", ")", "{", "final", "String", "errMsg", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "rawType", ".", "getSimpleName", "(", ")", ")", ";", "LOGGER", ".", "debug", "(", "errMsg", ",", "e", ")", ";", "throw", "new", "WebApplicationException", "(", "getErrorResponse", "(", "errMsg", ")", ")", ";", "}", "catch", "(", "InvocationTargetException", "e", ")", "{", "if", "(", "e", ".", "getCause", "(", ")", "instanceof", "WebApplicationException", ")", "{", "throw", "(", "WebApplicationException", ")", "e", ".", "getCause", "(", ")", ";", "}", "final", "String", "errMsg", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "parameterName", ",", "rawType", ".", "getSimpleName", "(", ")", ")", ";", "LOGGER", ".", "debug", "(", "errMsg", ",", "e", ")", ";", "throw", "new", "WebApplicationException", "(", "getErrorResponse", "(", "errMsg", ")", ")", ";", "}", "}", "Object", "constant", "=", "Enums", ".", "fromStringFuzzy", "(", "value", ",", "constants", ")", ";", "if", "(", "constant", "!", "=", "null", ")", "{", "return", "(", "T", ")", "constant", ";", "}", "final", "String", "errMsg", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "parameterName", ",", "JOINER", ".", "join", "(", "constants", ")", ")", ";", "throw", "new", "WebApplicationException", "(", "getErrorResponse", "(", "errMsg", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", "T", "value", ")", "{", "return", "value", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "Response", "getErrorResponse", "(", "String", "message", ")", "{", "return", "Response", ".", "status", "(", "<NUM_LIT>", ")", ".", "entity", "(", "new", "ErrorMessage", "(", "<NUM_LIT>", ",", "message", ")", ")", ".", "type", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Validators", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "Validator", "newValidator", "(", ")", "{", "return", "newValidatorFactory", "(", ")", ".", "getValidator", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "ValidatorFactory", "newValidatorFactory", "(", ")", "{", "return", "newConfiguration", "(", ")", ".", "buildValidatorFactory", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "HibernateValidatorConfiguration", "newConfiguration", "(", ")", "{", "return", "BaseValidator", ".", "newConfiguration", "(", ")", ".", "parameterNameProvider", "(", "new", "JerseyParameterNameProvider", "(", ")", ")", ".", "addValidatedValueHandler", "(", "new", "NonEmptyStringParamUnwrapper", "(", ")", ")", ".", "addValidatedValueHandler", "(", "new", "ParamValidatorUnwrapper", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "JsonCreator", "public", "ValidationErrorMessage", "(", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "ImmutableList", "<", "String", ">", "errors", ")", "{", "this", ".", "errors", "=", "errors", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "ImmutableList", "<", "String", ">", "getErrors", "(", ")", "{", "return", "errors", ";", "}", "</s>"]
["<s>", "public", "DropwizardConfiguredValidator", "(", "Validator", "validator", ")", "{", "this", ".", "validator", "=", "requireNonNull", "(", "validator", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "validateResourceAndInputParams", "(", "Object", "resource", ",", "final", "Invocable", "invocable", ",", "Object", "[", "]", "objects", ")", "throws", "ConstraintViolationException", "{", "final", "Class", "<", "?", ">", "[", "]", "groups", "=", "getGroup", "(", "invocable", ")", ";", "final", "Set", "<", "ConstraintViolation", "<", "Object", ">", ">", "violations", "=", "new", "HashSet", "<", ">", "(", ")", ";", "final", "BeanDescriptor", "beanDescriptor", "=", "getConstraintsForClass", "(", "resource", ".", "getClass", "(", ")", ")", ";", "if", "(", "beanDescriptor", ".", "isBeanConstrained", "(", ")", ")", "{", "violations", ".", "addAll", "(", "validate", "(", "resource", ",", "groups", ")", ")", ";", "}", "violations", ".", "addAll", "(", "forExecutables", "(", ")", ".", "validateParameters", "(", "resource", ",", "invocable", ".", "getHandlingMethod", "(", ")", ",", "objects", ",", "groups", ")", ")", ";", "if", "(", "!", "violations", ".", "isEmpty", "(", ")", ")", "{", "throw", "new", "JerseyViolationException", "(", "violations", ",", "invocable", ")", ";", "}", "}", "</s>"]
["<s>", "private", "Class", "<", "?", ">", "[", "]", "getGroup", "(", "Invocable", "invocable", ")", "{", "final", "ImmutableList", ".", "Builder", "<", "Class", "<", "?", ">", "[", "]", ">", "builder", "=", "ImmutableList", ".", "builder", "(", ")", ";", "for", "(", "Parameter", "parameter", ":", "invocable", ".", "getParameters", "(", ")", ")", "{", "if", "(", "parameter", ".", "isAnnotationPresent", "(", "Validated", ".", "class", ")", ")", "{", "builder", ".", "add", "(", "parameter", ".", "getAnnotation", "(", "Validated", ".", "class", ")", ".", "value", "(", ")", ")", ";", "}", "}", "final", "ImmutableList", "<", "Class", "<", "?", ">", "[", "]", ">", "groups", "=", "builder", ".", "build", "(", ")", ";", "switch", "(", "groups", ".", "size", "(", ")", ")", "{", "case", "0", ":", "return", "new", "Class", "<", "?", ">", "[", "]", "{", "Default", ".", "class", "}", ";", "case", "1", ":", "return", "groups", ".", "get", "(", "0", ")", ";", "default", ":", "for", "(", "int", "i", "=", "0", ";", "i", "<", "groups", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "for", "(", "int", "j", "=", "i", ";", "j", "<", "groups", ".", "size", "(", ")", ";", "j", "+", "+", ")", "{", "if", "(", "!", "Arrays", ".", "deepEquals", "(", "groups", ".", "get", "(", "i", ")", ",", "groups", ".", "get", "(", "j", ")", ")", ")", "{", "throw", "new", "WebApplicationException", "(", "\"", "<STR_LIT>", "\"", "+", "invocable", ".", "getHandlingMethod", "(", ")", ".", "getName", "(", ")", ",", "<NUM_LIT>", ")", ";", "}", "}", "}", "return", "groups", ".", "get", "(", "0", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "validateResult", "(", "Object", "resource", ",", "Invocable", "invocable", ",", "Object", "returnValue", ")", "throws", "ConstraintViolationException", "{", "final", "Class", "<", "?", ">", "[", "]", "groups", ";", "if", "(", "invocable", ".", "getHandlingMethod", "(", ")", ".", "isAnnotationPresent", "(", "Validated", ".", "class", ")", ")", "{", "groups", "=", "invocable", ".", "getHandlingMethod", "(", ")", ".", "getAnnotation", "(", "Validated", ".", "class", ")", ".", "value", "(", ")", ";", "}", "else", "{", "groups", "=", "new", "Class", "<", "?", ">", "[", "]", "{", "Default", ".", "class", "}", ";", "}", "final", "Set", "<", "ConstraintViolation", "<", "Object", ">", ">", "violations", "=", "forExecutables", "(", ")", ".", "validateReturnValue", "(", "resource", ",", "invocable", ".", "getHandlingMethod", "(", ")", ",", "returnValue", ",", "groups", ")", ";", "if", "(", "!", "violations", ".", "isEmpty", "(", ")", ")", "{", "LOGGER", ".", "trace", "(", "\"", "<STR_LIT>", "\"", ",", "ConstraintViolations", ".", "copyOf", "(", "violations", ")", ")", ";", "throw", "new", "JerseyViolationException", "(", "violations", ",", "invocable", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "<", "T", ">", "Set", "<", "ConstraintViolation", "<", "T", ">", ">", "validate", "(", "T", "t", ",", "Class", "<", "?", ">", ".", ".", ".", "classes", ")", "{", "return", "validator", ".", "validate", "(", "t", ",", "classes", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "<", "T", ">", "Set", "<", "ConstraintViolation", "<", "T", ">", ">", "validateProperty", "(", "T", "t", ",", "String", "s", ",", "Class", "<", "?", ">", ".", ".", ".", "classes", ")", "{", "return", "validator", ".", "validateProperty", "(", "t", ",", "s", ",", "classes", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "<", "T", ">", "Set", "<", "ConstraintViolation", "<", "T", ">", ">", "validateValue", "(", "Class", "<", "T", ">", "aClass", ",", "String", "s", ",", "Object", "o", ",", "Class", "<", "?", ">", ".", ".", ".", "classes", ")", "{", "return", "validator", ".", "validateValue", "(", "aClass", ",", "s", ",", "o", ",", "classes", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "BeanDescriptor", "getConstraintsForClass", "(", "Class", "<", "?", ">", "aClass", ")", "{", "return", "validator", ".", "getConstraintsForClass", "(", "aClass", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "<", "T", ">", "T", "unwrap", "(", "Class", "<", "T", ">", "aClass", ")", "{", "return", "validator", ".", "unwrap", "(", "aClass", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ExecutableValidator", "forExecutables", "(", ")", "{", "return", "validator", ".", "forExecutables", "(", ")", ";", "}", "</s>"]
["<s>", "public", "HibernateValidationFeature", "(", "Validator", "validator", ")", "{", "this", ".", "validator", "=", "validator", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "configure", "(", "FeatureContext", "context", ")", "{", "context", ".", "register", "(", "new", "AbstractBinder", "(", ")", "{", "@", "Override", "protected", "void", "configure", "(", ")", "{", "bind", "(", "new", "DropwizardConfiguredValidator", "(", "validator", ")", ")", ".", "to", "(", "ConfiguredValidator", ".", "class", ")", ";", "}", "}", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "configure", "(", ")", "{", "bind", "(", "new", "DropwizardConfiguredValidator", "(", "validator", ")", ")", ".", "to", "(", "ConfiguredValidator", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "final", "JerseyViolationException", "exception", ")", "{", "LOGGER", ".", "debug", "(", "\"", "<STR_LIT>", "\"", ",", "exception", ")", ";", "final", "Set", "<", "ConstraintViolation", "<", "?", ">", ">", "violations", "=", "exception", ".", "getConstraintViolations", "(", ")", ";", "final", "Invocable", "invocable", "=", "exception", ".", "getInvocable", "(", ")", ";", "final", "ImmutableList", "<", "String", ">", "errors", "=", "FluentIterable", ".", "from", "(", "exception", ".", "getConstraintViolations", "(", ")", ")", ".", "transform", "(", "violation", "-", ">", "ConstraintMessage", ".", "getMessage", "(", "violation", ",", "invocable", ")", ")", ".", "toList", "(", ")", ";", "final", "int", "status", "=", "ConstraintMessage", ".", "determineStatus", "(", "violations", ",", "invocable", ")", ";", "return", "Response", ".", "status", "(", "status", ")", ".", "entity", "(", "new", "ValidationErrorMessage", "(", "errors", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "JerseyViolationException", "(", "Set", "<", "?", "extends", "ConstraintViolation", "<", "?", ">", ">", "constraintViolations", ",", "Invocable", "invocable", ")", "{", "super", "(", "constraintViolations", ")", ";", "this", ".", "invocable", "=", "invocable", ";", "}", "</s>"]
["<s>", "public", "Invocable", "getInvocable", "(", ")", "{", "return", "invocable", ";", "}", "</s>"]
["<s>", "private", "ConstraintMessage", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "String", "getMessage", "(", "ConstraintViolation", "<", "?", ">", "v", ",", "Invocable", "invocable", ")", "{", "final", "Pair", "<", "Path", ",", "?", "extends", "ConstraintDescriptor", "<", "?", ">", ">", "of", "=", "Pair", ".", "of", "(", "v", ".", "getPropertyPath", "(", ")", ",", "v", ".", "getConstraintDescriptor", "(", ")", ")", ";", "final", "String", "cachePrefix", "=", "PREFIX_CACHE", ".", "getIfPresent", "(", "of", ")", ";", "if", "(", "cachePrefix", "=", "=", "null", ")", "{", "final", "String", "prefix", "=", "calculatePrefix", "(", "v", ",", "invocable", ")", ";", "PREFIX_CACHE", ".", "put", "(", "of", ",", "prefix", ")", ";", "return", "prefix", "+", "v", ".", "getMessage", "(", ")", ";", "}", "return", "cachePrefix", "+", "v", ".", "getMessage", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "calculatePrefix", "(", "ConstraintViolation", "<", "?", ">", "v", ",", "Invocable", "invocable", ")", "{", "final", "Optional", "<", "String", ">", "returnValueName", "=", "getMethodReturnValueName", "(", "v", ")", ";", "if", "(", "returnValueName", ".", "isPresent", "(", ")", ")", "{", "final", "String", "name", "=", "isValidationMethod", "(", "v", ")", "?", "StringUtils", ".", "substringBeforeLast", "(", "returnValueName", ".", "get", "(", ")", ",", "\"", "<STR_LIT:.>", "\"", ")", ":", "returnValueName", ".", "get", "(", ")", ";", "return", "name", "+", "\"", "\"", ";", "}", "if", "(", "isValidationMethod", "(", "v", ")", ")", "{", "return", "\"", "\"", ";", "}", "final", "Optional", "<", "String", ">", "entity", "=", "isRequestEntity", "(", "v", ",", "invocable", ")", ";", "if", "(", "entity", ".", "isPresent", "(", ")", ")", "{", "final", "String", "prefix", "=", "Strings", ".", "isNullOrEmpty", "(", "entity", ".", "get", "(", ")", ")", "?", "\"", "<STR_LIT>", "\"", ":", "entity", ".", "get", "(", ")", ";", "return", "prefix", "+", "\"", "\"", ";", "}", "final", "Optional", "<", "String", ">", "memberName", "=", "getMemberName", "(", "v", ",", "invocable", ")", ";", "return", "memberName", ".", "map", "(", "s", "-", ">", "s", "+", "\"", "\"", ")", ".", "orElseGet", "(", "(", ")", "-", ">", "v", ".", "getPropertyPath", "(", ")", "+", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Optional", "<", "String", ">", "isRequestEntity", "(", "ConstraintViolation", "<", "?", ">", "violation", ",", "Invocable", "invocable", ")", "{", "final", "Path", ".", "Node", "parent", "=", "Iterables", ".", "get", "(", "violation", ".", "getPropertyPath", "(", ")", ",", "1", ",", "null", ")", ";", "if", "(", "parent", "=", "=", "null", ")", "{", "return", "Optional", ".", "empty", "(", ")", ";", "}", "final", "List", "<", "Parameter", ">", "parameters", "=", "invocable", ".", "getParameters", "(", ")", ";", "if", "(", "parent", ".", "getKind", "(", ")", "=", "=", "ElementKind", ".", "PARAMETER", ")", "{", "final", "Parameter", "param", "=", "parameters", ".", "get", "(", "parent", ".", "as", "(", "Path", ".", "ParameterNode", ".", "class", ")", ".", "getParameterIndex", "(", ")", ")", ";", "if", "(", "param", ".", "getSource", "(", ")", ".", "equals", "(", "Parameter", ".", "Source", ".", "UNKNOWN", ")", ")", "{", "return", "Optional", ".", "of", "(", "Joiner", ".", "on", "(", "<CHAR_LIT:.>", ")", ".", "join", "(", "Iterables", ".", "skip", "(", "violation", ".", "getPropertyPath", "(", ")", ",", "<NUM_LIT:2>", ")", ")", ")", ";", "}", "}", "return", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Optional", "<", "String", ">", "getMemberName", "(", "ConstraintViolation", "<", "?", ">", "violation", ",", "Invocable", "invocable", ")", "{", "final", "int", "size", "=", "Iterables", ".", "size", "(", "violation", ".", "getPropertyPath", "(", ")", ")", ";", "if", "(", "size", "<", "<NUM_LIT:2>", ")", "{", "return", "Optional", ".", "empty", "(", ")", ";", "}", "final", "Path", ".", "Node", "parent", "=", "Iterables", ".", "get", "(", "violation", ".", "getPropertyPath", "(", ")", ",", "size", "-", "<NUM_LIT:2>", ")", ";", "final", "Path", ".", "Node", "member", "=", "Iterables", ".", "getLast", "(", "violation", ".", "getPropertyPath", "(", ")", ")", ";", "switch", "(", "parent", ".", "getKind", "(", ")", ")", "{", "case", "PARAMETER", ":", "final", "List", "<", "Parameter", ">", "parameters", "=", "invocable", ".", "getParameters", "(", ")", ";", "final", "Parameter", "param", "=", "parameters", ".", "get", "(", "parent", ".", "as", "(", "Path", ".", "ParameterNode", ".", "class", ")", ".", "getParameterIndex", "(", ")", ")", ";", "if", "(", "param", ".", "getSource", "(", ")", ".", "equals", "(", "Parameter", ".", "Source", ".", "BEAN_PARAM", ")", ")", "{", "final", "Field", "field", "=", "FieldUtils", ".", "getField", "(", "param", ".", "getRawType", "(", ")", ",", "member", ".", "getName", "(", ")", ",", "true", ")", ";", "return", "JerseyParameterNameProvider", ".", "getParameterNameFromAnnotations", "(", "field", ".", "getDeclaredAnnotations", "(", ")", ")", ";", "}", "break", ";", "case", "METHOD", ":", "return", "Optional", ".", "of", "(", "member", ".", "getName", "(", ")", ")", ";", "default", ":", "break", ";", "}", "return", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Optional", "<", "String", ">", "getMethodReturnValueName", "(", "ConstraintViolation", "<", "?", ">", "violation", ")", "{", "int", "returnValueNames", "=", "-", "1", ";", "final", "StringBuilder", "result", "=", "new", "StringBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "Path", ".", "Node", "node", ":", "violation", ".", "getPropertyPath", "(", ")", ")", "{", "if", "(", "node", ".", "getKind", "(", ")", ".", "equals", "(", "ElementKind", ".", "RETURN_VALUE", ")", ")", "{", "returnValueNames", "=", "0", ";", "}", "else", "if", "(", "returnValueNames", ">", "=", "0", ")", "{", "result", ".", "append", "(", "returnValueNames", "+", "+", "=", "=", "0", "?", "\"", "\"", ":", "\"", "<STR_LIT:.>", "\"", ")", ".", "append", "(", "node", ")", ";", "}", "}", "return", "returnValueNames", ">", "=", "0", "?", "Optional", ".", "of", "(", "result", ".", "toString", "(", ")", ")", ":", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "isValidationMethod", "(", "ConstraintViolation", "<", "?", ">", "v", ")", "{", "return", "v", ".", "getConstraintDescriptor", "(", ")", ".", "getAnnotation", "(", ")", "instanceof", "ValidationMethod", ";", "}", "</s>"]
["<s>", "public", "static", "<", "T", "extends", "ConstraintViolation", "<", "?", ">", ">", "int", "determineStatus", "(", "Set", "<", "T", ">", "violations", ",", "Invocable", "invocable", ")", "{", "if", "(", "violations", ".", "size", "(", ")", ">", "0", ")", "{", "final", "ConstraintViolation", "<", "?", ">", "violation", "=", "violations", ".", "iterator", "(", ")", ".", "next", "(", ")", ";", "for", "(", "Path", ".", "Node", "node", ":", "violation", ".", "getPropertyPath", "(", ")", ")", "{", "switch", "(", "node", ".", "getKind", "(", ")", ")", "{", "case", "RETURN_VALUE", ":", "return", "<NUM_LIT>", ";", "case", "PARAMETER", ":", "final", "int", "index", "=", "node", ".", "as", "(", "Path", ".", "ParameterNode", ".", "class", ")", ".", "getParameterIndex", "(", ")", ";", "final", "Parameter", "parameter", "=", "invocable", ".", "getParameters", "(", ")", ".", "get", "(", "index", ")", ";", "return", "parameter", ".", "getSource", "(", ")", ".", "equals", "(", "Parameter", ".", "Source", ".", "UNKNOWN", ")", "?", "<NUM_LIT>", ":", "<NUM_LIT>", ";", "default", ":", "continue", ";", "}", "}", "}", "return", "<NUM_LIT>", ";", "}", "</s>"]
["<s>", "public", "JacksonMessageBodyProvider", "(", "ObjectMapper", "mapper", ")", "{", "this", ".", "mapper", "=", "mapper", ";", "setMapper", "(", "mapper", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isReadable", "(", "Class", "<", "?", ">", "type", ",", "@", "Nullable", "Type", "genericType", ",", "@", "Nullable", "Annotation", "[", "]", "annotations", ",", "@", "Nullable", "MediaType", "mediaType", ")", "{", "return", "isProvidable", "(", "type", ")", "&", "&", "super", ".", "isReadable", "(", "type", ",", "genericType", ",", "annotations", ",", "mediaType", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isWriteable", "(", "Class", "<", "?", ">", "type", ",", "@", "Nullable", "Type", "genericType", ",", "@", "Nullable", "Annotation", "[", "]", "annotations", ",", "@", "Nullable", "MediaType", "mediaType", ")", "{", "return", "isProvidable", "(", "type", ")", "&", "&", "super", ".", "isWriteable", "(", "type", ",", "genericType", ",", "annotations", ",", "mediaType", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "isProvidable", "(", "Class", "<", "?", ">", "type", ")", "{", "final", "JsonIgnoreType", "ignore", "=", "type", ".", "getAnnotation", "(", "JsonIgnoreType", ".", "class", ")", ";", "return", "(", "ignore", "=", "=", "null", ")", "|", "|", "!", "ignore", ".", "value", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ObjectMapper", "getObjectMapper", "(", ")", "{", "return", "mapper", ";", "}", "</s>"]
["<s>", "public", "JsonProcessingExceptionMapper", "(", ")", "{", "this", "(", "false", ")", ";", "}", "</s>"]
["<s>", "public", "JsonProcessingExceptionMapper", "(", "boolean", "showDetails", ")", "{", "this", ".", "showDetails", "=", "showDetails", ";", "}", "</s>"]
["<s>", "public", "boolean", "isShowDetails", "(", ")", "{", "return", "showDetails", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "JsonProcessingException", "exception", ")", "{", "if", "(", "exception", "instanceof", "JsonGenerationException", "|", "|", "exception", "instanceof", "InvalidDefinitionException", ")", "{", "return", "super", ".", "toResponse", "(", "exception", ")", ";", "}", "LOGGER", ".", "debug", "(", "\"", "<STR_LIT>", "\"", ",", "exception", ")", ";", "final", "String", "message", "=", "exception", ".", "getOriginalMessage", "(", ")", ";", "final", "ErrorMessage", "errorMessage", "=", "new", "ErrorMessage", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ".", "getStatusCode", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "showDetails", "?", "message", ":", "null", ")", ";", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ".", "type", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ".", "entity", "(", "errorMessage", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "JacksonBinder", "(", "ObjectMapper", "mapper", ")", "{", "this", ".", "mapper", "=", "mapper", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "configure", "(", ")", "{", "final", "JacksonMessageBodyProvider", "jsonProvider", "=", "new", "JacksonMessageBodyProvider", "(", "mapper", ")", ";", "bind", "(", "jsonProvider", ")", ".", "to", "(", "MessageBodyWriter", ".", "class", ")", ";", "bind", "(", "jsonProvider", ")", ".", "to", "(", "MessageBodyReader", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "config", ".", "setTimeout", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canSubmitFormAndReceiveResponse", "(", ")", "{", "config", ".", "setChunkedEncodingEnabled", "(", "false", ")", ";", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "config", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "MultiPart", "mp", "=", "new", "FormDataMultiPart", "(", ")", ".", "bodyPart", "(", "new", "FormDataBodyPart", "(", "FormDataContentDisposition", ".", "name", "(", "\"", "<STR_LIT>", "\"", ")", ".", "fileName", "(", "\"", "<STR_LIT:Name>", "\"", ")", ".", "build", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "String", "url", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "RULE", ".", "getLocalPort", "(", ")", ")", ";", "final", "String", "response", "=", "client", ".", "target", "(", "url", ")", ".", "register", "(", "MultiPartFeature", ".", "class", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "entity", "(", "mp", ",", "mp", ".", "getMediaType", "(", ")", ")", ",", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "failOnNoChunkedEncoding", "(", ")", "{", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "RULE", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "config", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "MultiPart", "mp", "=", "new", "FormDataMultiPart", "(", ")", ".", "bodyPart", "(", "new", "FormDataBodyPart", "(", "FormDataContentDisposition", ".", "name", "(", "\"", "<STR_LIT>", "\"", ")", ".", "fileName", "(", "\"", "<STR_LIT:Name>", "\"", ")", ".", "build", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "String", "url", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "RULE", ".", "getLocalPort", "(", ")", ")", ";", "final", "Response", "response", "=", "client", ".", "target", "(", "url", ")", ".", "register", "(", "MultiPartFeature", ".", "class", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "entity", "(", "mp", ",", "mp", ".", "getMediaType", "(", ")", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "ErrorMessage", ".", "class", ")", ")", ".", "isEqualTo", "(", "new", "ErrorMessage", "(", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "throws", "Exception", "{", "out", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "err", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "System", ".", "setOut", "(", "new", "PrintStream", "(", "out", ")", ")", ";", "System", ".", "setErr", "(", "new", "PrintStream", "(", "err", ")", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "teardown", "(", ")", "{", "System", ".", "setOut", "(", "oldOut", ")", ";", "System", ".", "setErr", "(", "oldErr", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "thatLoggingIsntBrokenOnCleanup", "(", ")", "throws", "Exception", "{", "BadLogApp", ".", "runMe", "(", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", "}", ")", ";", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Thread", ".", "sleep", "(", "<NUM_LIT:100>", ")", ";", "assertThat", "(", "new", "String", "(", "out", ".", "toByteArray", "(", ")", ",", "UTF_8", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "new", "String", "(", "err", ".", "toByteArray", "(", ")", ",", "UTF_8", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSupportShouldResetLogging", "(", ")", "throws", "Exception", "{", "final", "Path", "logFile", "=", "folder", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toPath", "(", ")", ";", "Files", ".", "write", "(", "logFile", ",", "new", "byte", "[", "]", "{", "}", ")", ";", "final", "String", "configPath", "=", "ResourceHelpers", ".", "resourceFilePath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "DropwizardTestSupport", "<", "Configuration", ">", "app", "=", "new", "DropwizardTestSupport", "<", ">", "(", "BadLogApp", ".", "class", ",", "configPath", ",", "ConfigOverride", ".", "config", "(", "\"", "<STR_LIT>", "\"", ",", "logFile", ".", "toString", "(", ")", ")", ")", ";", "assertThatThrownBy", "(", "app", ":", ":", "before", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "app", ".", "getApplication", "(", ")", ".", "run", "(", "\"", "<STR_LIT>", "\"", ",", "configPath", ")", ";", "app", ".", "after", "(", ")", ";", "assertThat", "(", "new", "String", "(", "out", ".", "toByteArray", "(", ")", ",", "UTF_8", ")", ")", ".", "doesNotContain", "(", "\"", "<STR_LIT>", "\"", ")", ";", "out", ".", "reset", "(", ")", ";", "final", "String", "contents", "=", "new", "String", "(", "Files", ".", "readAllBytes", "(", "logFile", ")", ",", "UTF_8", ")", ";", "assertThat", "(", "contents", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Files", ".", "write", "(", "logFile", ",", "new", "byte", "[", "]", "{", "}", ")", ";", "final", "DropwizardTestSupport", "<", "Configuration", ">", "app2", "=", "new", "DropwizardTestSupport", "<", ">", "(", "BadLogApp", ".", "class", ",", "new", "Configuration", "(", ")", ")", ";", "assertThatThrownBy", "(", "app2", ":", ":", "before", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "app2", ".", "getApplication", "(", ")", ".", "run", "(", "\"", "<STR_LIT>", "\"", ")", ";", "app2", ".", "after", "(", ")", ";", "assertThat", "(", "new", "String", "(", "out", ".", "toByteArray", "(", ")", ",", "UTF_8", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "out", ".", "reset", "(", ")", ";", "final", "String", "contents2", "=", "new", "String", "(", "Files", ".", "readAllBytes", "(", "logFile", ")", ",", "UTF_8", ")", ";", "assertThat", "(", "contents2", ")", ".", "doesNotContain", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Files", ".", "write", "(", "logFile", ",", "new", "byte", "[", "]", "{", "}", ")", ";", "final", "DropwizardTestSupport", "<", "Configuration", ">", "app3", "=", "new", "DropwizardTestSupport", "<", ">", "(", "BadLogApp", ".", "class", ",", "configPath", ",", "ConfigOverride", ".", "config", "(", "\"", "<STR_LIT>", "\"", ",", "logFile", ".", "toString", "(", ")", ")", ")", ";", "assertThatThrownBy", "(", "app3", ":", ":", "before", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "app3", ".", "getApplication", "(", ")", ".", "run", "(", "\"", "<STR_LIT>", "\"", ",", "configPath", ")", ";", "app3", ".", "after", "(", ")", ";", "assertThat", "(", "new", "String", "(", "out", ".", "toByteArray", "(", ")", ",", "UTF_8", ")", ")", ".", "doesNotContain", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "String", "contents3", "=", "new", "String", "(", "Files", ".", "readAllBytes", "(", "logFile", ")", ",", "UTF_8", ")", ";", "assertThat", "(", "contents3", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "checkClientTrusted", "(", "X509Certificate", "[", "]", "x509Certificates", ",", "String", "s", ")", "throws", "CertificateException", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "checkServerTrusted", "(", "X509Certificate", "[", "]", "x509Certificates", ",", "String", "s", ")", "throws", "CertificateException", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "X509Certificate", "[", "]", "getAcceptedIssuers", "(", ")", "{", "return", "new", "X509Certificate", "[", "0", "]", ";", "}", "</s>"]
["<s>", "@", "BeforeClass", "public", "static", "void", "setupClass", "(", ")", "throws", "IOException", "{", "keystore", "=", "FOLDER", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toPath", "(", ")", ";", "final", "byte", "[", "]", "keystoreBytes", "=", "Resources", ".", "toByteArray", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Files", ".", "write", "(", "keystore", ",", "keystoreBytes", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "after", "(", ")", "throws", "IOException", "{", "final", "byte", "[", "]", "keystoreBytes", "=", "Resources", ".", "toByteArray", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Files", ".", "write", "(", "keystore", ",", "keystoreBytes", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "reloadCertificateChangesTheServerCertificate", "(", ")", "throws", "Exception", "{", "final", "byte", "[", "]", "keystore2Bytes", "=", "Resources", ".", "toByteArray", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Files", ".", "write", "(", "keystore", ",", "keystore2Bytes", ")", ";", "byte", "[", "]", "firstCertBytes", "=", "certBytes", "(", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "byte", "[", "]", "secondCertBytes", "=", "certBytes", "(", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "byte", "[", "]", "thirdCertBytes", "=", "certBytes", "(", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "firstCertBytes", ")", ".", "isNotEqualTo", "(", "secondCertBytes", ")", ";", "assertThat", "(", "secondCertBytes", ")", ".", "isEqualTo", "(", "thirdCertBytes", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "badReloadDoesNotChangeTheServerCertificate", "(", ")", "throws", "Exception", "{", "final", "byte", "[", "]", "badKeystore", "=", "Resources", ".", "toByteArray", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Files", ".", "write", "(", "keystore", ",", "badKeystore", ")", ";", "byte", "[", "]", "firstCertBytes", "=", "certBytes", "(", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ")", ";", "byte", "[", "]", "secondCertBytes", "=", "certBytes", "(", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ")", ";", "byte", "[", "]", "thirdCertBytes", "=", "certBytes", "(", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "firstCertBytes", ")", ".", "isEqualTo", "(", "secondCertBytes", ")", ".", "isEqualTo", "(", "thirdCertBytes", ")", ";", "}", "</s>"]
["<s>", "private", "byte", "[", "]", "certBytes", "(", "int", "code", ",", "String", "content", ")", "throws", "Exception", "{", "final", "URL", "url", "=", "new", "URL", "(", "\"", "<STR_LIT>", "\"", "+", "rule", ".", "getAdminPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "final", "HttpsURLConnection", "conn", "=", "(", "HttpsURLConnection", ")", "url", ".", "openConnection", "(", ")", ";", "try", "{", "postIt", "(", "conn", ")", ";", "assertThat", "(", "conn", ".", "getResponseCode", "(", ")", ")", ".", "isEqualTo", "(", "code", ")", ";", "if", "(", "code", "=", "=", "<NUM_LIT>", ")", "{", "assertThat", "(", "CharStreams", ".", "toString", "(", "new", "InputStreamReader", "(", "conn", ".", "getInputStream", "(", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ")", ".", "isEqualTo", "(", "content", ")", ";", "}", "else", "{", "assertThat", "(", "CharStreams", ".", "toString", "(", "new", "InputStreamReader", "(", "conn", ".", "getErrorStream", "(", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ")", ".", "contains", "(", "content", ")", ";", "}", "return", "conn", ".", "getServerCertificates", "(", ")", "[", "0", "]", ".", "getEncoded", "(", ")", ";", "}", "finally", "{", "conn", ".", "disconnect", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "postIt", "(", "HttpsURLConnection", "conn", ")", "throws", "Exception", "{", "final", "SSLContext", "sslCtx", "=", "SSLContext", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sslCtx", ".", "init", "(", "null", ",", "new", "TrustManager", "[", "]", "{", "TRUST_ALL", "}", ",", "null", ")", ";", "conn", ".", "setHostnameVerifier", "(", "new", "NoopHostnameVerifier", "(", ")", ")", ";", "conn", ".", "setSSLSocketFactory", "(", "sslCtx", ".", "getSocketFactory", "(", ")", ")", ";", "conn", ".", "setDoOutput", "(", "true", ")", ";", "conn", ".", "getOutputStream", "(", ")", ".", "write", "(", "new", "byte", "[", "]", "{", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultPattern", "(", ")", "throws", "Exception", "{", "String", "url", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "dropwizardAppRule", ".", "getLocalPort", "(", ")", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:100>", ";", "i", "+", "+", ")", "{", "client", ".", "target", "(", "url", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "}", "Thread", ".", "sleep", "(", "<NUM_LIT:100>", ")", ";", "List", "<", "String", ">", "logs", ";", "try", "(", "BufferedReader", "reader", "=", "new", "BufferedReader", "(", "new", "FileReader", "(", "new", "File", "(", "tempFile", ")", ")", ")", ")", "{", "logs", "=", "reader", ".", "lines", "(", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "}", "assertThat", "(", "logs", ")", ".", "hasSize", "(", "<NUM_LIT:100>", ")", ".", "allMatch", "(", "s", "-", ">", "REQUEST_LOG_PATTERN", ".", "matcher", "(", "s", ")", ".", "matches", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "List", "<", "ConfigOverride", ">", "configOverrides", "(", ")", "{", "return", "ImmutableList", ".", "<", "ConfigOverride", ">", "builder", "(", ")", ".", "addAll", "(", "super", ".", "configOverrides", "(", ")", ")", ".", "add", "(", "ConfigOverride", ".", "config", "(", "\"", "<STR_LIT>", "\"", ",", "LOG_FORMAT", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCustomPattern", "(", ")", "throws", "Exception", "{", "String", "url", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "dropwizardAppRule", ".", "getLocalPort", "(", ")", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:100>", ";", "i", "+", "+", ")", "{", "client", ".", "target", "(", "url", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "}", "Thread", ".", "sleep", "(", "<NUM_LIT:100>", ")", ";", "List", "<", "String", ">", "logs", ";", "try", "(", "BufferedReader", "reader", "=", "new", "BufferedReader", "(", "new", "FileReader", "(", "new", "File", "(", "tempFile", ")", ")", ")", ")", "{", "logs", "=", "reader", ".", "lines", "(", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "}", "assertThat", "(", "logs", ")", ".", "hasSize", "(", "<NUM_LIT:100>", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "[", "]", "args", ")", "throws", "Exception", "{", "new", "TestApplication", "(", ")", ".", "run", "(", "args", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "TestResource", ".", "class", ")", ";", "environment", ".", "healthChecks", "(", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "new", "HealthCheck", "(", ")", "{", "@", "Override", "protected", "Result", "check", "(", ")", "throws", "Exception", "{", "return", "Result", ".", "healthy", "(", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Result", "check", "(", ")", "throws", "Exception", "{", "return", "Result", ".", "healthy", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "String", "get", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ",", "@", "Context", "HttpServletRequest", "httpRequest", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "name", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "createTempFile", "(", ")", "{", "try", "{", "return", "File", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ".", "getAbsolutePath", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "List", "<", "ConfigOverride", ">", "configOverrides", "(", ")", "{", "return", "ImmutableList", ".", "of", "(", "ConfigOverride", ".", "config", "(", "\"", "<STR_LIT>", "\"", ",", "tempFile", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "final", "JerseyClientConfiguration", "configuration", "=", "new", "JerseyClientConfiguration", "(", ")", ";", "configuration", ".", "setTimeout", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:2>", ")", ")", ";", "client", "=", "new", "JerseyClientBuilder", "(", "dropwizardAppRule", ".", "getEnvironment", "(", ")", ")", ".", "using", "(", "configuration", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "client", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "BeforeClass", "public", "static", "void", "setup", "(", ")", "{", "client", "=", "new", "JerseyClientBuilder", "(", "RULE", ".", "getEnvironment", "(", ")", ")", ".", "withProvider", "(", "new", "CustomJsonProvider", "(", "Jackson", ".", "newObjectMapper", "(", ")", ")", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "custom204OnEmptyOptional", "(", ")", "{", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "RULE", ".", "getEnvironment", "(", ")", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "String", "url", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "RULE", ".", "getLocalPort", "(", ")", ")", ";", "final", "Response", "response", "=", "client", ".", "target", "(", "url", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "custom404OnViewRenderMissingMustacheTemplate", "(", ")", "{", "final", "Client", "client", "=", "new", "JerseyClientBuilder", "(", "RULE", ".", "getEnvironment", "(", ")", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "String", "url", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "RULE", ".", "getLocalPort", "(", ")", ")", ";", "final", "Response", "response", "=", "client", ".", "target", "(", "url", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "earlyEofTest", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "(", "(", "App1", ")", "RULE", ".", "getApplication", "(", ")", ")", ".", "wasEofExceptionHit", "=", "false", ";", "final", "URL", "url", "=", "new", "URL", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "RULE", ".", "getLocalPort", "(", ")", ")", ")", ";", "final", "HttpURLConnection", "conn", "=", "(", "HttpURLConnection", ")", "url", ".", "openConnection", "(", ")", ";", "conn", ".", "setRequestMethod", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "conn", ".", "setRequestProperty", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "conn", ".", "setDoOutput", "(", "true", ")", ";", "conn", ".", "setFixedLengthStreamingMode", "(", "<NUM_LIT>", ")", ";", "conn", ".", "getOutputStream", "(", ")", ".", "write", "(", "\"", "<STR_LIT:{>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "conn", ".", "disconnect", "(", ")", ";", "Thread", ".", "sleep", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "(", "(", "App1", ")", "RULE", ".", "getApplication", "(", ")", ")", ".", "wasEofExceptionHit", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customJsonProvider", "(", ")", "{", "final", "String", "url", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "RULE", ".", "getLocalPort", "(", ")", ")", ";", "final", "String", "response", "=", "client", ".", "target", "(", "url", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ",", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customJsonProviderMissingHeader", "(", ")", "{", "final", "String", "url", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "RULE", ".", "getLocalPort", "(", ")", ")", ";", "final", "Response", "response", "=", "client", ".", "target", "(", "url", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customJsonProviderClient", "(", ")", "{", "final", "String", "url", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "RULE", ".", "getLocalPort", "(", ")", ")", ";", "final", "String", "response", "=", "client", ".", "target", "(", "url", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ",", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customJsonProviderRoundtrip", "(", ")", "{", "final", "String", "url", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "RULE", ".", "getLocalPort", "(", ")", ")", ";", "final", "GenericType", "<", "Map", "<", "String", ",", "String", ">", ">", "typ", "=", "new", "GenericType", "<", "Map", "<", "String", ",", "String", ">", ">", "(", ")", "{", "}", ";", "final", "Map", "<", "String", ",", "String", ">", "response", "=", "client", ".", "target", "(", "url", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "json", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ",", "typ", ")", ";", "assertThat", "(", "response", ")", ".", "containsExactly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customBodyWriterTest", "(", ")", "{", "final", "String", "url", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "RULE", ".", "getLocalPort", "(", ")", ")", ";", "final", "String", "response", "=", "client", ".", "target", "(", "url", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Consumes", "(", "MediaType", ".", "MULTIPART_FORM_DATA", ")", "@", "Produces", "(", "MediaType", ".", "TEXT_PLAIN", ")", "public", "StreamingOutput", "uploadFile", "(", "@", "FormDataParam", "(", "\"", "<STR_LIT>", "\"", ")", "InputStream", "file", ",", "@", "FormDataParam", "(", "\"", "<STR_LIT>", "\"", ")", "FormDataContentDisposition", "fileDisposition", ")", "{", "return", "output", "-", ">", "{", "output", ".", "write", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "fileDisposition", ".", "getFileName", "(", ")", ")", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "ByteStreams", ".", "copy", "(", "file", ",", "output", ")", ";", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "Bootstrap", "<", "Configuration", ">", "bootstrap", ")", "{", "bootstrap", ".", "addBundle", "(", "new", "MultiPartBundle", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "FormsResource", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onFatalError", "(", ")", "{", "LOGGER", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "runMe", "(", "String", "[", "]", "args", ")", "throws", "Exception", "{", "new", "BadLogApp", "(", ")", ".", "run", "(", "args", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "Bootstrap", "<", "Configuration", ">", "bootstrap", ")", "{", "bootstrap", ".", "addBundle", "(", "new", "SslReloadBundle", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "Bootstrap", "<", "Configuration", ">", "bootstrap", ")", "{", "bootstrap", ".", "addBundle", "(", "new", "ViewBundle", "<", ">", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "config", ",", "Environment", "env", ")", "throws", "Exception", "{", "env", ".", "jersey", "(", ")", ".", "register", "(", "new", "ExceptionMapper", "<", "EmptyOptionalException", ">", "(", ")", "{", "@", "Override", "public", "Response", "toResponse", "(", "EmptyOptionalException", "exception", ")", "{", "return", "Response", ".", "noContent", "(", ")", ".", "build", "(", ")", ";", "}", "}", ")", ";", "env", ".", "jersey", "(", ")", ".", "register", "(", "new", "ExceptionMapper", "<", "EofException", ">", "(", ")", "{", "@", "Override", "public", "Response", "toResponse", "(", "EofException", "exception", ")", "{", "wasEofExceptionHit", "=", "true", ";", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ".", "build", "(", ")", ";", "}", "}", ")", ";", "env", ".", "jersey", "(", ")", ".", "register", "(", "new", "ExtendedExceptionMapper", "<", "WebApplicationException", ">", "(", ")", "{", "@", "Override", "public", "Response", "toResponse", "(", "WebApplicationException", "exception", ")", "{", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "NOT_FOUND", ")", ".", "build", "(", ")", ";", "}", "@", "Override", "public", "boolean", "isMappable", "(", "WebApplicationException", "e", ")", "{", "return", "Throwables", ".", "getRootCause", "(", "e", ")", ".", "getClass", "(", ")", "=", "=", "MustacheNotFoundException", ".", "class", ";", "}", "}", ")", ";", "env", ".", "jersey", "(", ")", ".", "register", "(", "new", "App1Resource", "(", ")", ")", ";", "env", ".", "jersey", "(", ")", ".", "register", "(", "new", "CustomJsonProvider", "(", "env", ".", "getObjectMapper", "(", ")", ")", ")", ";", "env", ".", "jersey", "(", ")", ".", "register", "(", "new", "CustomClassBodyWriter", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "EmptyOptionalException", "exception", ")", "{", "return", "Response", ".", "noContent", "(", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "EofException", "exception", ")", "{", "wasEofExceptionHit", "=", "true", ";", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "WebApplicationException", "exception", ")", "{", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "NOT_FOUND", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isMappable", "(", "WebApplicationException", "e", ")", "{", "return", "Throwables", ".", "getRootCause", "(", "e", ")", ".", "getClass", "(", ")", "=", "=", "MustacheNotFoundException", ".", "class", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "OptionalInt", "emptyOptional", "(", ")", "{", "return", "OptionalInt", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Produces", "(", "MediaType", ".", "TEXT_HTML", ")", "public", "View", "getMissingTemplateView", "(", ")", "{", "return", "new", "View", "(", "\"", "<STR_LIT>", "\"", ")", "{", "}", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "ImmutableMap", "<", "String", ",", "String", ">", "postMapper", "(", "ImmutableMap", "<", "String", ",", "String", ">", "map", ")", "{", "return", "ImmutableMap", ".", "<", "String", ",", "String", ">", "builder", "(", ")", ".", "putAll", "(", "map", ")", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "CustomClass", "newCustomClass", "(", ")", "{", "return", "new", "CustomClass", "(", ")", ";", "}", "</s>"]
["<s>", "public", "CustomJsonProvider", "(", "ObjectMapper", "mapper", ")", "{", "setMapper", "(", "mapper", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "writeTo", "(", "Object", "value", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ",", "MultivaluedMap", "<", "String", ",", "Object", ">", "httpHeaders", ",", "OutputStream", "entityStream", ")", "throws", "IOException", "{", "entityStream", ".", "write", "(", "HEADER_BYTES", ")", ";", "super", ".", "writeTo", "(", "value", ",", "type", ",", "genericType", ",", "annotations", ",", "mediaType", ",", "httpHeaders", ",", "entityStream", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "readFrom", "(", "Class", "<", "Object", ">", "type", ",", "Type", "genericType", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ",", "MultivaluedMap", "<", "String", ",", "String", ">", "httpHeaders", ",", "InputStream", "entityStream", ")", "throws", "IOException", "{", "final", "byte", "[", "]", "ent", "=", "new", "byte", "[", "HEADER_BYTES", ".", "length", "]", ";", "final", "int", "read", "=", "entityStream", ".", "read", "(", "ent", ")", ";", "if", "(", "read", "!", "=", "ent", ".", "length", "|", "|", "!", "Objects", ".", "deepEquals", "(", "ent", ",", "HEADER_BYTES", ")", ")", "{", "throw", "new", "WebApplicationException", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ";", "}", "return", "super", ".", "readFrom", "(", "type", ",", "genericType", ",", "annotations", ",", "mediaType", ",", "httpHeaders", ",", "entityStream", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isWriteable", "(", "Class", "<", "?", ">", "aClass", ",", "Type", "type", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getSize", "(", "CustomClass", "customClass", ",", "Class", "<", "?", ">", "aClass", ",", "Type", "type", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ")", "{", "return", "RESPONSE", ".", "length", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "writeTo", "(", "CustomClass", "customClass", ",", "Class", "<", "?", ">", "aClass", ",", "Type", "type", ",", "Annotation", "[", "]", "annotations", ",", "MediaType", "mediaType", ",", "MultivaluedMap", "<", "String", ",", "Object", ">", "multivaluedMap", ",", "OutputStream", "outputStream", ")", "throws", "IOException", ",", "WebApplicationException", "{", "outputStream", ".", "write", "(", "RESPONSE", ")", ";", "}", "</s>"]
["<s>", "@", "BeforeClass", "public", "static", "void", "migrateDb", "(", ")", "throws", "Exception", "{", "RULE", ".", "getApplication", "(", ")", ".", "run", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "CONFIG_PATH", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "createTempFile", "(", ")", "{", "try", "{", "return", "File", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ".", "getAbsolutePath", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHelloWorld", "(", ")", "throws", "Exception", "{", "final", "Optional", "<", "String", ">", "name", "=", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Saying", "saying", "=", "RULE", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "RULE", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "queryParam", "(", "\"", "<STR_LIT>", "\"", ",", "name", ".", "get", "(", ")", ")", ".", "request", "(", ")", ".", "get", "(", "Saying", ".", "class", ")", ";", "assertThat", "(", "saying", ".", "getContent", "(", ")", ")", ".", "isEqualTo", "(", "RULE", ".", "getConfiguration", "(", ")", ".", "buildTemplate", "(", ")", ".", "render", "(", "name", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPostPerson", "(", ")", "throws", "Exception", "{", "final", "Person", "person", "=", "new", "Person", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Person", "newPerson", "=", "RULE", ".", "client", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "RULE", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "entity", "(", "person", ",", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ")", ".", "readEntity", "(", "Person", ".", "class", ")", ";", "assertThat", "(", "newPerson", ".", "getId", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "newPerson", ".", "getFullName", "(", ")", ")", ".", "isEqualTo", "(", "person", ".", "getFullName", "(", ")", ")", ";", "assertThat", "(", "newPerson", ".", "getJobTitle", "(", ")", ")", ".", "isEqualTo", "(", "person", ".", "getJobTitle", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLogFileWritten", "(", ")", "throws", "IOException", "{", "final", "Path", "log", "=", "Paths", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "log", ")", ".", "exists", "(", ")", ";", "final", "String", "actual", "=", "new", "String", "(", "Files", ".", "readAllBytes", "(", "log", ")", ",", "UTF_8", ")", ";", "assertThat", "(", "actual", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", "+", "RULE", ".", "getLocalPort", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProtectedEndpoint", "(", ")", "{", "String", "secret", "=", "RULE", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "secret", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProtectedEndpointNoCredentials401", "(", ")", "{", "try", "{", "RULE", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "NotAuthorizedException", ".", "class", ")", ";", "}", "catch", "(", "NotAuthorizedException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "WWW_AUTHENTICATE", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProtectedEndpointBadCredentials401", "(", ")", "{", "try", "{", "RULE", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "NotAuthorizedException", ".", "class", ")", ";", "}", "catch", "(", "NotAuthorizedException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getHeaders", "(", ")", ".", "get", "(", "HttpHeaders", ".", "WWW_AUTHENTICATE", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProtectedAdminEndpoint", "(", ")", "{", "String", "secret", "=", "RULE", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "secret", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProtectedAdminEndpointPrincipalIsNotAuthorized403", "(", ")", "{", "try", "{", "RULE", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "ForbiddenException", ".", "class", ")", ";", "}", "catch", "(", "ForbiddenException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "{", "person", "=", "new", "Person", "(", ")", ";", "person", ".", "setId", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "{", "reset", "(", "DAO", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getPersonSuccess", "(", ")", "{", "when", "(", "DAO", ".", "findById", "(", "<NUM_LIT>", ")", ")", ".", "thenReturn", "(", "Optional", ".", "of", "(", "person", ")", ")", ";", "Person", "found", "=", "RULE", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Person", ".", "class", ")", ";", "assertThat", "(", "found", ".", "getId", "(", ")", ")", ".", "isEqualTo", "(", "person", ".", "getId", "(", ")", ")", ";", "verify", "(", "DAO", ")", ".", "findById", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getPersonNotFound", "(", ")", "{", "when", "(", "DAO", ".", "findById", "(", "<NUM_LIT>", ")", ")", ".", "thenReturn", "(", "Optional", ".", "empty", "(", ")", ")", ";", "final", "Response", "response", "=", "RULE", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatusInfo", "(", ")", ".", "getStatusCode", "(", ")", ")", ".", "isEqualTo", "(", "Response", ".", "Status", ".", "NOT_FOUND", ".", "getStatusCode", "(", ")", ")", ";", "verify", "(", "DAO", ")", ".", "findById", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "person", "=", "new", "Person", "(", ")", ";", "person", ".", "setFullName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "person", ".", "setJobTitle", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "{", "reset", "(", "PERSON_DAO", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createPerson", "(", ")", "throws", "JsonProcessingException", "{", "when", "(", "PERSON_DAO", ".", "create", "(", "any", "(", "Person", ".", "class", ")", ")", ")", ".", "thenReturn", "(", "person", ")", ";", "final", "Response", "response", "=", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ".", "post", "(", "Entity", ".", "entity", "(", "person", ",", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ")", ";", "assertThat", "(", "response", ".", "getStatusInfo", "(", ")", ")", ".", "isEqualTo", "(", "Response", ".", "Status", ".", "OK", ")", ";", "verify", "(", "PERSON_DAO", ")", ".", "create", "(", "personCaptor", ".", "capture", "(", ")", ")", ";", "assertThat", "(", "personCaptor", ".", "getValue", "(", ")", ")", ".", "isEqualTo", "(", "person", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "listPeople", "(", ")", "throws", "Exception", "{", "final", "ImmutableList", "<", "Person", ">", "people", "=", "ImmutableList", ".", "of", "(", "person", ")", ";", "when", "(", "PERSON_DAO", ".", "findAll", "(", ")", ")", ".", "thenReturn", "(", "people", ")", ";", "final", "List", "<", "Person", ">", "response", "=", "RESOURCES", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "new", "GenericType", "<", "List", "<", "Person", ">", ">", "(", ")", "{", "}", ")", ";", "verify", "(", "PERSON_DAO", ")", ".", "findAll", "(", ")", ";", "assertThat", "(", "response", ")", ".", "containsAll", "(", "people", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProtectedAdminEndpoint", "(", ")", "{", "String", "secret", "=", "RULE", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "secret", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProtectedBasicUserEndpoint", "(", ")", "{", "String", "secret", "=", "RULE", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "secret", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProtectedBasicUserEndpointAsAdmin", "(", ")", "{", "String", "secret", "=", "RULE", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "secret", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProtectedGuestEndpoint", "(", ")", "{", "String", "secret", "=", "RULE", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ";", "assertThat", "(", "secret", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProtectedBasicUserEndpointPrincipalIsNotAuthorized403", "(", ")", "{", "try", "{", "RULE", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "header", "(", "HttpHeaders", ".", "AUTHORIZATION", ",", "\"", "<STR_LIT>", "\"", ")", ".", "get", "(", "String", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "ForbiddenException", ".", "class", ")", ";", "}", "catch", "(", "ForbiddenException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "personDAO", "=", "new", "PersonDAO", "(", "daoTestRule", ".", "getSessionFactory", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createPerson", "(", ")", "{", "final", "Person", "jeff", "=", "daoTestRule", ".", "inTransaction", "(", "(", ")", "-", ">", "personDAO", ".", "create", "(", "new", "Person", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "jeff", ".", "getId", "(", ")", ")", ".", "isGreaterThan", "(", "0", ")", ";", "assertThat", "(", "jeff", ".", "getFullName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "jeff", ".", "getJobTitle", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "personDAO", ".", "findById", "(", "jeff", ".", "getId", "(", ")", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "of", "(", "jeff", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "findAll", "(", ")", "{", "daoTestRule", ".", "inTransaction", "(", "(", ")", "-", ">", "{", "personDAO", ".", "create", "(", "new", "Person", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "personDAO", ".", "create", "(", "new", "Person", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "personDAO", ".", "create", "(", "new", "Person", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", ")", ";", "final", "List", "<", "Person", ">", "persons", "=", "personDAO", ".", "findAll", "(", ")", ";", "assertThat", "(", "persons", ")", ".", "extracting", "(", "\"", "<STR_LIT:Name>", "\"", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "persons", ")", ".", "extracting", "(", "\"", "<STR_LIT>", "\"", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "ConstraintViolationException", ".", "class", ")", "public", "void", "handlesNullFullName", "(", ")", "{", "daoTestRule", ".", "inTransaction", "(", "(", ")", "-", ">", "personDAO", ".", "create", "(", "new", "Person", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getTemplate", "(", ")", "{", "return", "template", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTemplate", "(", "String", "template", ")", "{", "this", ".", "template", "=", "template", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getDefaultName", "(", ")", "{", "return", "defaultName", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setDefaultName", "(", "String", "defaultName", ")", "{", "this", ".", "defaultName", "=", "defaultName", ";", "}", "</s>"]
["<s>", "public", "Template", "buildTemplate", "(", ")", "{", "return", "new", "Template", "(", "template", ",", "defaultName", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "DataSourceFactory", "getDataSourceFactory", "(", ")", "{", "return", "database", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "setDataSourceFactory", "(", "DataSourceFactory", "dataSourceFactory", ")", "{", "this", ".", "database", "=", "dataSourceFactory", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Map", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "getViewRendererConfiguration", "(", ")", "{", "return", "viewRendererConfiguration", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "setViewRendererConfiguration", "(", "Map", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "viewRendererConfiguration", ")", "{", "final", "ImmutableMap", ".", "Builder", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "builder", "=", "ImmutableMap", ".", "builder", "(", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "entry", ":", "viewRendererConfiguration", ".", "entrySet", "(", ")", ")", "{", "builder", ".", "put", "(", "entry", ".", "getKey", "(", ")", ",", "ImmutableMap", ".", "copyOf", "(", "entry", ".", "getValue", "(", ")", ")", ")", ";", "}", "this", ".", "viewRendererConfiguration", "=", "builder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "[", "]", "args", ")", "throws", "Exception", "{", "new", "HelloWorldApplication", "(", ")", ".", "run", "(", "args", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "DataSourceFactory", "getDataSourceFactory", "(", "HelloWorldConfiguration", "configuration", ")", "{", "return", "configuration", ".", "getDataSourceFactory", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getName", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "Bootstrap", "<", "HelloWorldConfiguration", ">", "bootstrap", ")", "{", "bootstrap", ".", "setConfigurationSourceProvider", "(", "new", "SubstitutingSourceProvider", "(", "bootstrap", ".", "getConfigurationSourceProvider", "(", ")", ",", "new", "EnvironmentVariableSubstitutor", "(", "false", ")", ")", ")", ";", "bootstrap", ".", "addCommand", "(", "new", "RenderCommand", "(", ")", ")", ";", "bootstrap", ".", "addBundle", "(", "new", "AssetsBundle", "(", ")", ")", ";", "bootstrap", ".", "addBundle", "(", "new", "MigrationsBundle", "<", "HelloWorldConfiguration", ">", "(", ")", "{", "@", "Override", "public", "DataSourceFactory", "getDataSourceFactory", "(", "HelloWorldConfiguration", "configuration", ")", "{", "return", "configuration", ".", "getDataSourceFactory", "(", ")", ";", "}", "}", ")", ";", "bootstrap", ".", "addBundle", "(", "hibernateBundle", ")", ";", "bootstrap", ".", "addBundle", "(", "new", "ViewBundle", "<", "HelloWorldConfiguration", ">", "(", ")", "{", "@", "Override", "public", "Map", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "getViewConfiguration", "(", "HelloWorldConfiguration", "configuration", ")", "{", "return", "configuration", ".", "getViewRendererConfiguration", "(", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "DataSourceFactory", "getDataSourceFactory", "(", "HelloWorldConfiguration", "configuration", ")", "{", "return", "configuration", ".", "getDataSourceFactory", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Map", "<", "String", ",", "Map", "<", "String", ",", "String", ">", ">", "getViewConfiguration", "(", "HelloWorldConfiguration", "configuration", ")", "{", "return", "configuration", ".", "getViewRendererConfiguration", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "HelloWorldConfiguration", "configuration", ",", "Environment", "environment", ")", "{", "final", "PersonDAO", "dao", "=", "new", "PersonDAO", "(", "hibernateBundle", ".", "getSessionFactory", "(", ")", ")", ";", "final", "Template", "template", "=", "configuration", ".", "buildTemplate", "(", ")", ";", "environment", ".", "healthChecks", "(", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "new", "TemplateHealthCheck", "(", "template", ")", ")", ";", "environment", ".", "admin", "(", ")", ".", "addTask", "(", "new", "EchoTask", "(", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "DateRequiredFeature", ".", "class", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "AuthDynamicFeature", "(", "new", "BasicCredentialAuthFilter", ".", "Builder", "<", "User", ">", "(", ")", ".", "setAuthenticator", "(", "new", "ExampleAuthenticator", "(", ")", ")", ".", "setAuthorizer", "(", "new", "ExampleAuthorizer", "(", ")", ")", ".", "setRealm", "(", "\"", "<STR_LIT>", "\"", ")", ".", "buildAuthFilter", "(", ")", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "AuthValueFactoryProvider", ".", "Binder", "<", ">", "(", "User", ".", "class", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "RolesAllowedDynamicFeature", ".", "class", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "HelloWorldResource", "(", "template", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "ViewResource", "(", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "ProtectedResource", "(", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "PeopleResource", "(", "dao", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "PersonResource", "(", "dao", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "FilteredResource", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "EchoTask", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "execute", "(", "ImmutableMultimap", "<", "String", ",", "String", ">", "parameters", ",", "String", "body", ",", "PrintWriter", "output", ")", "throws", "Exception", "{", "output", ".", "print", "(", "body", ")", ";", "output", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "User", "(", "String", "name", ")", "{", "this", ".", "name", "=", "name", ";", "this", ".", "roles", "=", "null", ";", "}", "</s>"]
["<s>", "public", "User", "(", "String", "name", ",", "Set", "<", "String", ">", "roles", ")", "{", "this", ".", "name", "=", "name", ";", "this", ".", "roles", "=", "roles", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "int", "getId", "(", ")", "{", "return", "(", "int", ")", "(", "Math", ".", "random", "(", ")", "*", "<NUM_LIT:100>", ")", ";", "}", "</s>"]
["<s>", "public", "Set", "<", "String", ">", "getRoles", "(", ")", "{", "return", "roles", ";", "}", "</s>"]
["<s>", "public", "Person", "(", ")", "{", "}", "</s>"]
["<s>", "public", "Person", "(", "String", "fullName", ",", "String", "jobTitle", ")", "{", "this", ".", "fullName", "=", "fullName", ";", "this", ".", "jobTitle", "=", "jobTitle", ";", "}", "</s>"]
["<s>", "public", "long", "getId", "(", ")", "{", "return", "id", ";", "}", "</s>"]
["<s>", "public", "void", "setId", "(", "long", "id", ")", "{", "this", ".", "id", "=", "id", ";", "}", "</s>"]
["<s>", "public", "String", "getFullName", "(", ")", "{", "return", "fullName", ";", "}", "</s>"]
["<s>", "public", "void", "setFullName", "(", "String", "fullName", ")", "{", "this", ".", "fullName", "=", "fullName", ";", "}", "</s>"]
["<s>", "public", "String", "getJobTitle", "(", ")", "{", "return", "jobTitle", ";", "}", "</s>"]
["<s>", "public", "void", "setJobTitle", "(", "String", "jobTitle", ")", "{", "this", ".", "jobTitle", "=", "jobTitle", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "o", ")", "{", "if", "(", "this", "=", "=", "o", ")", "{", "return", "true", ";", "}", "if", "(", "!", "(", "o", "instanceof", "Person", ")", ")", "{", "return", "false", ";", "}", "final", "Person", "that", "=", "(", "Person", ")", "o", ";", "return", "Objects", ".", "equals", "(", "this", ".", "id", ",", "that", ".", "id", ")", "&", "&", "Objects", ".", "equals", "(", "this", ".", "fullName", ",", "that", ".", "fullName", ")", "&", "&", "Objects", ".", "equals", "(", "this", ".", "jobTitle", ",", "that", ".", "jobTitle", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "Objects", ".", "hash", "(", "id", ",", "fullName", ",", "jobTitle", ")", ";", "}", "</s>"]
["<s>", "public", "Template", "(", "String", "content", ",", "String", "defaultName", ")", "{", "this", ".", "content", "=", "content", ";", "this", ".", "defaultName", "=", "defaultName", ";", "}", "</s>"]
["<s>", "public", "String", "render", "(", "Optional", "<", "String", ">", "name", ")", "{", "return", "format", "(", "content", ",", "name", ".", "orElse", "(", "defaultName", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "authorize", "(", "User", "user", ",", "String", "role", ")", "{", "return", "user", ".", "getRoles", "(", ")", "!", "=", "null", "&", "&", "user", ".", "getRoles", "(", ")", ".", "contains", "(", "role", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Optional", "<", "User", ">", "authenticate", "(", "BasicCredentials", "credentials", ")", "throws", "AuthenticationException", "{", "if", "(", "VALID_USERS", ".", "containsKey", "(", "credentials", ".", "getUsername", "(", ")", ")", "&", "&", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "credentials", ".", "getPassword", "(", ")", ")", ")", "{", "return", "Optional", ".", "of", "(", "new", "User", "(", "credentials", ".", "getUsername", "(", ")", ",", "VALID_USERS", ".", "get", "(", "credentials", ".", "getUsername", "(", ")", ")", ")", ")", ";", "}", "return", "Optional", ".", "empty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "TemplateHealthCheck", "(", "Template", "template", ")", "{", "this", ".", "template", "=", "template", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Result", "check", "(", ")", "throws", "Exception", "{", "template", ".", "render", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "template", ".", "render", "(", "Optional", ".", "empty", "(", ")", ")", ";", "return", "Result", ".", "healthy", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "DateRequired", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "sayHello", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "public", "HelloWorldResource", "(", "Template", "template", ")", "{", "this", ".", "template", "=", "template", ";", "this", ".", "counter", "=", "new", "AtomicLong", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Timed", "(", "name", "=", "\"", "<STR_LIT>", "\"", ")", "@", "CacheControl", "(", "maxAge", "=", "1", ",", "maxAgeUnit", "=", "TimeUnit", ".", "DAYS", ")", "public", "Saying", "sayHello", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "name", ")", "{", "return", "new", "Saying", "(", "counter", ".", "incrementAndGet", "(", ")", ",", "template", ".", "render", "(", "name", ")", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "public", "void", "receiveHello", "(", "@", "Valid", "Saying", "saying", ")", "{", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "saying", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Produces", "(", "MediaType", ".", "TEXT_PLAIN", ")", "public", "String", "receiveDate", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "DateTimeParam", ">", "dateTimeParam", ")", "{", "if", "(", "dateTimeParam", ".", "isPresent", "(", ")", ")", "{", "final", "DateTimeParam", "actualDateTimeParam", "=", "dateTimeParam", ".", "get", "(", ")", ";", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "actualDateTimeParam", ")", ";", "return", "actualDateTimeParam", ".", "get", "(", ")", ".", "toString", "(", ")", ";", "}", "else", "{", "LOGGER", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "null", ";", "}", "}", "</s>"]
["<s>", "@", "PermitAll", "@", "GET", "public", "String", "showSecret", "(", "@", "Auth", "User", "user", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "user", ".", "getName", "(", ")", ",", "user", ".", "getId", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RolesAllowed", "(", "\"", "<STR_LIT>", "\"", ")", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "showAdminSecret", "(", "@", "Auth", "User", "user", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "user", ".", "getName", "(", ")", ",", "user", ".", "getId", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "PeopleResource", "(", "PersonDAO", "peopleDAO", ")", "{", "this", ".", "peopleDAO", "=", "peopleDAO", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "UnitOfWork", "public", "Person", "createPerson", "(", "Person", "person", ")", "{", "return", "peopleDAO", ".", "create", "(", "person", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "UnitOfWork", "public", "List", "<", "Person", ">", "listPeople", "(", ")", "{", "return", "peopleDAO", ".", "findAll", "(", ")", ";", "}", "</s>"]
["<s>", "public", "PersonResource", "(", "PersonDAO", "peopleDAO", ")", "{", "this", ".", "peopleDAO", "=", "peopleDAO", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "UnitOfWork", "public", "Person", "getPerson", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "LongParam", "personId", ")", "{", "return", "findSafely", "(", "personId", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "UnitOfWork", "@", "Produces", "(", "MediaType", ".", "TEXT_HTML", ")", "public", "PersonView", "getPersonViewFreemarker", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "LongParam", "personId", ")", "{", "return", "new", "PersonView", "(", "PersonView", ".", "Template", ".", "FREEMARKER", ",", "findSafely", "(", "personId", ".", "get", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "UnitOfWork", "@", "Produces", "(", "MediaType", ".", "TEXT_HTML", ")", "public", "PersonView", "getPersonViewMustache", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "LongParam", "personId", ")", "{", "return", "new", "PersonView", "(", "PersonView", ".", "Template", ".", "MUSTACHE", ",", "findSafely", "(", "personId", ".", "get", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "Person", "findSafely", "(", "long", "personId", ")", "{", "return", "peopleDAO", ".", "findById", "(", "personId", ")", ".", "orElseThrow", "(", "(", ")", "-", ">", "new", "NotFoundException", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "PermitAll", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "showSecret", "(", "@", "Auth", "User", "user", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "user", ".", "getName", "(", ")", ",", "user", ".", "getId", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "String", "showBasicUserSecret", "(", "@", "Context", "SecurityContext", "context", ")", "{", "User", "user", "=", "(", "User", ")", "context", ".", "getUserPrincipal", "(", ")", ";", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "user", ".", "getName", "(", ")", ",", "user", ".", "getId", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "RolesAllowed", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "showAdminSecret", "(", "@", "Auth", "User", "user", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "user", ".", "getName", "(", ")", ",", "user", ".", "getId", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Produces", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "View", "freemarkerUTF8", "(", ")", "{", "return", "new", "View", "(", "\"", "<STR_LIT>", "\"", ",", "StandardCharsets", ".", "UTF_8", ")", "{", "}", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Produces", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "View", "freemarkerISO88591", "(", ")", "{", "return", "new", "View", "(", "\"", "<STR_LIT>", "\"", ",", "StandardCharsets", ".", "ISO_8859_1", ")", "{", "}", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Produces", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "View", "mustacheUTF8", "(", ")", "{", "return", "new", "View", "(", "\"", "<STR_LIT>", "\"", ",", "StandardCharsets", ".", "UTF_8", ")", "{", "}", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Produces", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "View", "mustacheISO88591", "(", ")", "{", "return", "new", "View", "(", "\"", "<STR_LIT>", "\"", ",", "StandardCharsets", ".", "ISO_8859_1", ")", "{", "}", ";", "}", "</s>"]
["<s>", "public", "RenderCommand", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "Subparser", "subparser", ")", "{", "super", ".", "configure", "(", "subparser", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "action", "(", "Arguments", ".", "storeTrue", "(", ")", ")", ".", "dest", "(", "\"", "<STR_LIT>", "\"", ")", ".", "help", "(", "\"", "<STR_LIT>", "\"", ")", ";", "subparser", ".", "addArgument", "(", "\"", "<STR_LIT>", "\"", ")", ".", "nargs", "(", "\"", "<STR_LIT:*>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "run", "(", "Bootstrap", "<", "HelloWorldConfiguration", ">", "bootstrap", ",", "Namespace", "namespace", ",", "HelloWorldConfiguration", "configuration", ")", "throws", "Exception", "{", "final", "Template", "template", "=", "configuration", ".", "buildTemplate", "(", ")", ";", "if", "(", "namespace", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "template", ".", "render", "(", "Optional", ".", "empty", "(", ")", ")", ")", ";", "}", "for", "(", "String", "name", ":", "namespace", ".", "<", "String", ">", "getList", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:1000>", ";", "i", "+", "+", ")", "{", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "name", ",", "template", ".", "render", "(", "Optional", ".", "of", "(", "name", ")", ")", ")", ";", "Thread", ".", "sleep", "(", "<NUM_LIT:1000>", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "PersonDAO", "(", "SessionFactory", "factory", ")", "{", "super", "(", "factory", ")", ";", "}", "</s>"]
["<s>", "public", "Optional", "<", "Person", ">", "findById", "(", "Long", "id", ")", "{", "return", "Optional", ".", "ofNullable", "(", "get", "(", "id", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Person", "create", "(", "Person", "person", ")", "{", "return", "persist", "(", "person", ")", ";", "}", "</s>"]
["<s>", "public", "List", "<", "Person", ">", "findAll", "(", ")", "{", "return", "list", "(", "namedQuery", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Saying", "(", ")", "{", "}", "</s>"]
["<s>", "public", "Saying", "(", "long", "id", ",", "String", "content", ")", "{", "this", ".", "id", "=", "id", ";", "this", ".", "content", "=", "content", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "long", "getId", "(", ")", "{", "return", "id", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getContent", "(", ")", "{", "return", "content", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "MoreObjects", ".", "toStringHelper", "(", "this", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "id", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "content", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "configure", "(", "ResourceInfo", "resourceInfo", ",", "FeatureContext", "context", ")", "{", "if", "(", "resourceInfo", ".", "getResourceMethod", "(", ")", ".", "getAnnotation", "(", "DateRequired", ".", "class", ")", "!", "=", "null", ")", "{", "context", ".", "register", "(", "DateNotSpecifiedFilter", ".", "class", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "filter", "(", "ContainerRequestContext", "requestContext", ")", "throws", "IOException", "{", "final", "String", "dateHeader", "=", "requestContext", ".", "getHeaderString", "(", "HttpHeaders", ".", "DATE", ")", ";", "if", "(", "dateHeader", "=", "=", "null", ")", "{", "throw", "new", "WebApplicationException", "(", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ";", "}", "}", "</s>"]
["<s>", "Template", "(", "String", "templateName", ")", "{", "this", ".", "templateName", "=", "templateName", ";", "}", "</s>"]
["<s>", "public", "String", "getTemplateName", "(", ")", "{", "return", "templateName", ";", "}", "</s>"]
["<s>", "public", "PersonView", "(", "PersonView", ".", "Template", "template", ",", "Person", "person", ")", "{", "super", "(", "template", ".", "getTemplateName", "(", ")", ")", ";", "this", ".", "person", "=", "person", ";", "}", "</s>"]
["<s>", "public", "Person", "getPerson", "(", ")", "{", "return", "person", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "startsAndStops", "(", ")", "throws", "Exception", "{", "this", ".", "closeableManager", ".", "start", "(", ")", ";", "this", ".", "closeableManager", ".", "stop", "(", ")", ";", "verify", "(", "this", ".", "managed", ")", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "startsAndStops", "(", ")", "throws", "Exception", "{", "jettyManaged", ".", "start", "(", ")", ";", "jettyManaged", ".", "stop", "(", ")", ";", "final", "InOrder", "inOrder", "=", "inOrder", "(", "managed", ")", ";", "inOrder", ".", "verify", "(", "managed", ")", ".", "start", "(", ")", ";", "inOrder", ".", "verify", "(", "managed", ")", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ExecutorServiceManagerTest", "(", ")", "{", "this", ".", "exec", "=", "mock", "(", "ExecutorService", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAccessors", "(", ")", "{", "final", "String", "poolName", "=", "this", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ";", "final", "ExecutorServiceManager", "test", "=", "new", "ExecutorServiceManager", "(", "this", ".", "exec", ",", "TEST_DURATION", ",", "poolName", ")", ";", "assertThat", "(", "test", ".", "getShutdownPeriod", "(", ")", ")", ".", "isSameAs", "(", "TEST_DURATION", ")", ";", "assertThat", "(", "test", ".", "getPoolName", "(", ")", ")", ".", "isSameAs", "(", "poolName", ")", ";", "assertThat", "(", "test", ".", "getExecutor", "(", ")", ")", ".", "isSameAs", "(", "this", ".", "exec", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testManaged", "(", ")", "throws", "Exception", "{", "final", "String", "poolName", "=", "this", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ";", "when", "(", "this", ".", "exec", ".", "awaitTermination", "(", "anyLong", "(", ")", ",", "any", "(", ")", ")", ")", ".", "thenReturn", "(", "true", ")", ";", "final", "ExecutorServiceManager", "test", "=", "new", "ExecutorServiceManager", "(", "this", ".", "exec", ",", "TEST_DURATION", ",", "poolName", ")", ";", "test", ".", "start", "(", ")", ";", "verifyZeroInteractions", "(", "this", ".", "exec", ")", ";", "test", ".", "stop", "(", ")", ";", "verify", "(", "this", ".", "exec", ")", ".", "shutdown", "(", ")", ";", "verify", "(", "this", ".", "exec", ")", ".", "awaitTermination", "(", "TEST_DURATION", ".", "getQuantity", "(", ")", ",", "TEST_DURATION", ".", "getUnit", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testManagedTimeout", "(", ")", "throws", "Exception", "{", "final", "String", "poolName", "=", "this", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ";", "when", "(", "this", ".", "exec", ".", "awaitTermination", "(", "anyLong", "(", ")", ",", "any", "(", ")", ")", ")", ".", "thenReturn", "(", "false", ")", ";", "final", "ExecutorServiceManager", "test", "=", "new", "ExecutorServiceManager", "(", "this", ".", "exec", ",", "TEST_DURATION", ",", "poolName", ")", ";", "test", ".", "start", "(", ")", ";", "verifyZeroInteractions", "(", "this", ".", "exec", ")", ";", "test", ".", "stop", "(", ")", ";", "verify", "(", "this", ".", "exec", ")", ".", "shutdown", "(", ")", ";", "verify", "(", "this", ".", "exec", ")", ".", "awaitTermination", "(", "TEST_DURATION", ".", "getQuantity", "(", ")", ",", "TEST_DURATION", ".", "getUnit", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "managesLifeCycleObjects", "(", ")", "throws", "Exception", "{", "final", "LifeCycle", "lifeCycle", "=", "mock", "(", "LifeCycle", ".", "class", ")", ";", "environment", ".", "manage", "(", "lifeCycle", ")", ";", "final", "ContainerLifeCycle", "container", "=", "new", "ContainerLifeCycle", "(", ")", ";", "environment", ".", "attach", "(", "container", ")", ";", "assertThat", "(", "container", ".", "getBeans", "(", ")", ")", ".", "contains", "(", "lifeCycle", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "managesManagedObjects", "(", ")", "throws", "Exception", "{", "final", "Managed", "managed", "=", "mock", "(", "Managed", ".", "class", ")", ";", "environment", ".", "manage", "(", "managed", ")", ";", "final", "ContainerLifeCycle", "container", "=", "new", "ContainerLifeCycle", "(", ")", ";", "environment", ".", "attach", "(", "container", ")", ";", "final", "Object", "bean", "=", "ImmutableList", ".", "copyOf", "(", "container", ".", "getBeans", "(", ")", ")", ".", "get", "(", "0", ")", ";", "assertThat", "(", "bean", ")", ".", "isInstanceOf", "(", "JettyManaged", ".", "class", ")", ";", "final", "JettyManaged", "jettyManaged", "=", "(", "JettyManaged", ")", "bean", ";", "assertThat", "(", "jettyManaged", ".", "getManaged", "(", ")", ")", ".", "isEqualTo", "(", "managed", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "scheduledExecutorServiceBuildsDaemonThreads", "(", ")", "throws", "ExecutionException", ",", "InterruptedException", "{", "final", "ScheduledExecutorService", "executorService", "=", "environment", ".", "scheduledExecutorService", "(", "\"", "<STR_LIT>", "\"", ",", "true", ")", ".", "build", "(", ")", ";", "final", "Future", "<", "Boolean", ">", "isDaemon", "=", "executorService", ".", "submit", "(", "(", ")", "-", ">", "Thread", ".", "currentThread", "(", ")", ".", "isDaemon", "(", ")", ")", ";", "assertThat", "(", "isDaemon", ".", "get", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "scheduledExecutorServiceBuildsUserThreadsByDefault", "(", ")", "throws", "ExecutionException", ",", "InterruptedException", "{", "final", "ScheduledExecutorService", "executorService", "=", "environment", ".", "scheduledExecutorService", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "final", "Future", "<", "Boolean", ">", "isDaemon", "=", "executorService", ".", "submit", "(", "(", ")", "-", ">", "Thread", ".", "currentThread", "(", ")", ".", "isDaemon", "(", ")", ")", ";", "assertThat", "(", "isDaemon", ".", "get", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "scheduledExecutorServiceThreadFactory", "(", ")", "throws", "ExecutionException", ",", "InterruptedException", "{", "final", "String", "expectedName", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "expectedNamePattern", "=", "expectedName", "+", "\"", "<STR_LIT>", "\"", ";", "final", "ThreadFactory", "tfactory", "=", "(", "new", "ThreadFactoryBuilder", "(", ")", ")", ".", "setDaemon", "(", "false", ")", ".", "setNameFormat", "(", "expectedNamePattern", ")", ".", "build", "(", ")", ";", "final", "ScheduledExecutorService", "executorService", "=", "environment", ".", "scheduledExecutorService", "(", "\"", "<STR_LIT>", "\"", ",", "tfactory", ")", ".", "build", "(", ")", ";", "final", "Future", "<", "Boolean", ">", "isFactoryInUse", "=", "executorService", ".", "submit", "(", "(", ")", "-", ">", "Thread", ".", "currentThread", "(", ")", ".", "getName", "(", ")", ".", "startsWith", "(", "expectedName", ")", ")", ";", "assertThat", "(", "isFactoryInUse", ".", "get", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "executorServiceThreadFactory", "(", ")", "throws", "ExecutionException", ",", "InterruptedException", "{", "final", "String", "expectedName", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "expectedNamePattern", "=", "expectedName", "+", "\"", "<STR_LIT>", "\"", ";", "final", "ThreadFactory", "tfactory", "=", "(", "new", "ThreadFactoryBuilder", "(", ")", ")", ".", "setDaemon", "(", "false", ")", ".", "setNameFormat", "(", "expectedNamePattern", ")", ".", "build", "(", ")", ";", "final", "ExecutorService", "executorService", "=", "environment", ".", "executorService", "(", "\"", "<STR_LIT>", "\"", ",", "tfactory", ")", ".", "build", "(", ")", ";", "final", "Future", "<", "Boolean", ">", "isFactoryInUse", "=", "executorService", ".", "submit", "(", "(", ")", "-", ">", "Thread", ".", "currentThread", "(", ")", ".", "getName", "(", ")", ".", "startsWith", "(", "expectedName", ")", ")", ";", "assertThat", "(", "isFactoryInUse", ".", "get", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "executorServiceBuilder", "=", "new", "ExecutorServiceBuilder", "(", "new", "LifecycleEnvironment", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "log", "=", "mock", "(", "Logger", ".", "class", ")", ";", "ExecutorServiceBuilder", ".", "setLog", "(", "log", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGiveAWarningAboutMaximumPoolSizeAndUnboundedQueue", "(", ")", "{", "executorServiceBuilder", ".", "minThreads", "(", "<NUM_LIT:4>", ")", ".", "maxThreads", "(", "<NUM_LIT:8>", ")", ".", "build", "(", ")", ";", "verify", "(", "log", ")", ".", "warn", "(", "WARNING", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGiveNoWarningAboutMaximumPoolSizeAndBoundedQueue", "(", ")", "throws", "InterruptedException", "{", "ExecutorService", "exe", "=", "executorServiceBuilder", ".", "minThreads", "(", "<NUM_LIT:4>", ")", ".", "maxThreads", "(", "<NUM_LIT:8>", ")", ".", "workQueue", "(", "new", "ArrayBlockingQueue", "<", ">", "(", "<NUM_LIT:16>", ")", ")", ".", "build", "(", ")", ";", "verify", "(", "log", ",", "never", "(", ")", ")", ".", "warn", "(", "WARNING", ")", ";", "assertCanExecuteAtLeast2ConcurrentTasks", "(", "exe", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldNotWarnWhenSettingUpSingleThreadedPool", "(", ")", "{", "executorServiceBuilder", ".", "minThreads", "(", "1", ")", ".", "maxThreads", "(", "1", ")", ".", "keepAliveTime", "(", "Duration", ".", "milliseconds", "(", "0", ")", ")", ".", "workQueue", "(", "new", "LinkedBlockingQueue", "<", ">", "(", ")", ")", ".", "build", "(", ")", ";", "verify", "(", "log", ",", "never", "(", ")", ")", ".", "warn", "(", "anyString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldNotWarnWhenSettingUpCachedThreadPool", "(", ")", "throws", "InterruptedException", "{", "ExecutorService", "exe", "=", "executorServiceBuilder", ".", "minThreads", "(", "0", ")", ".", "maxThreads", "(", "Integer", ".", "MAX_VALUE", ")", ".", "keepAliveTime", "(", "Duration", ".", "seconds", "(", "<NUM_LIT>", ")", ")", ".", "workQueue", "(", "new", "SynchronousQueue", "<", ">", "(", ")", ")", ".", "build", "(", ")", ";", "verify", "(", "log", ",", "never", "(", ")", ")", ".", "warn", "(", "anyString", "(", ")", ")", ";", "assertCanExecuteAtLeast2ConcurrentTasks", "(", "exe", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldNotWarnWhenUsingTheDefaultConfiguration", "(", ")", "{", "executorServiceBuilder", ".", "build", "(", ")", ";", "verify", "(", "log", ",", "never", "(", ")", ")", ".", "warn", "(", "anyString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldBeAbleToExecute2TasksAtOnceWithLargeMaxThreadsOrBeWarnedOtherwise", "(", ")", "{", "ExecutorService", "exe", "=", "executorServiceBuilder", ".", "maxThreads", "(", "Integer", ".", "MAX_VALUE", ")", ".", "build", "(", ")", ";", "try", "{", "verify", "(", "log", ")", ".", "warn", "(", "anyString", "(", ")", ")", ";", "}", "catch", "(", "WantedButNotInvoked", "error", ")", "{", "assertCanExecuteAtLeast2ConcurrentTasks", "(", "exe", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "assertCanExecuteAtLeast2ConcurrentTasks", "(", "Executor", "exe", ")", "{", "CountDownLatch", "latch", "=", "new", "CountDownLatch", "(", "<NUM_LIT:2>", ")", ";", "Runnable", "concurrentLatchCountDownAndWait", "=", "(", ")", "-", ">", "{", "latch", ".", "countDown", "(", ")", ";", "try", "{", "latch", ".", "await", "(", ")", ";", "}", "catch", "(", "InterruptedException", "ex", ")", "{", "throw", "new", "RuntimeException", "(", "ex", ")", ";", "}", "}", ";", "exe", ".", "execute", "(", "concurrentLatchCountDownAndWait", ")", ";", "exe", ".", "execute", "(", "concurrentLatchCountDownAndWait", ")", ";", "try", "{", "assertThat", "(", "latch", ".", "await", "(", "1", ",", "TimeUnit", ".", "SECONDS", ")", ")", ".", "as", "(", "\"", "<STR_LIT>", "\"", "+", "exe", ")", ".", "isTrue", "(", ")", ";", "}", "catch", "(", "InterruptedException", "ex", ")", "{", "throw", "new", "RuntimeException", "(", "ex", ")", ";", "}", "}", "</s>"]
["<s>", "public", "ScheduledExecutorServiceBuilderTest", "(", ")", "{", "this", ".", "execTracker", "=", "null", ";", "this", ".", "le", "=", "mock", "(", "LifecycleEnvironment", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "{", "if", "(", "this", ".", "execTracker", "!", "=", "null", ")", "{", "this", ".", "execTracker", ".", "shutdownNow", "(", ")", ";", "try", "{", "this", ".", "execTracker", ".", "awaitTermination", "(", "Long", ".", "MAX_VALUE", ",", "TimeUnit", ".", "MILLISECONDS", ")", ";", "}", "catch", "(", "final", "InterruptedException", "e", ")", "{", "Thread", ".", "currentThread", "(", ")", ".", "interrupt", "(", ")", ";", "}", "this", ".", "execTracker", "=", "null", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testBasicInvocation", "(", ")", "{", "final", "String", "poolName", "=", "this", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ";", "final", "ScheduledExecutorServiceBuilder", "test", "=", "new", "ScheduledExecutorServiceBuilder", "(", "this", ".", "le", ",", "poolName", ",", "false", ")", ";", "this", ".", "execTracker", "=", "test", ".", "build", "(", ")", ";", "assertThat", "(", "this", ".", "execTracker", ")", ".", "isInstanceOf", "(", "ScheduledThreadPoolExecutor", ".", "class", ")", ";", "final", "ScheduledThreadPoolExecutor", "castedExec", "=", "(", "ScheduledThreadPoolExecutor", ")", "this", ".", "execTracker", ";", "assertThat", "(", "castedExec", ".", "getRemoveOnCancelPolicy", "(", ")", ")", ".", "isFalse", "(", ")", ";", "final", "ArgumentCaptor", "<", "ExecutorServiceManager", ">", "esmCaptor", "=", "ArgumentCaptor", ".", "forClass", "(", "ExecutorServiceManager", ".", "class", ")", ";", "verify", "(", "this", ".", "le", ")", ".", "manage", "(", "esmCaptor", ".", "capture", "(", ")", ")", ";", "final", "ExecutorServiceManager", "esmCaptured", "=", "esmCaptor", ".", "getValue", "(", ")", ";", "assertThat", "(", "esmCaptured", ".", "getExecutor", "(", ")", ")", ".", "isSameAs", "(", "this", ".", "execTracker", ")", ";", "assertThat", "(", "esmCaptured", ".", "getShutdownPeriod", "(", ")", ")", ".", "isEqualTo", "(", "DEFAULT_SHUTDOWN_PERIOD", ")", ";", "assertThat", "(", "esmCaptured", ".", "getPoolName", "(", ")", ")", ".", "isSameAs", "(", "poolName", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRemoveOnCancelTrue", "(", ")", "{", "final", "String", "poolName", "=", "this", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ";", "final", "ScheduledExecutorServiceBuilder", "test", "=", "new", "ScheduledExecutorServiceBuilder", "(", "this", ".", "le", ",", "poolName", ",", "false", ")", ";", "this", ".", "execTracker", "=", "test", ".", "removeOnCancelPolicy", "(", "true", ")", ".", "build", "(", ")", ";", "assertThat", "(", "this", ".", "execTracker", ")", ".", "isInstanceOf", "(", "ScheduledThreadPoolExecutor", ".", "class", ")", ";", "final", "ScheduledThreadPoolExecutor", "castedExec", "=", "(", "ScheduledThreadPoolExecutor", ")", "this", ".", "execTracker", ";", "assertThat", "(", "castedExec", ".", "getRemoveOnCancelPolicy", "(", ")", ")", ".", "isTrue", "(", ")", ";", "final", "ArgumentCaptor", "<", "ExecutorServiceManager", ">", "esmCaptor", "=", "ArgumentCaptor", ".", "forClass", "(", "ExecutorServiceManager", ".", "class", ")", ";", "verify", "(", "this", ".", "le", ")", ".", "manage", "(", "esmCaptor", ".", "capture", "(", ")", ")", ";", "final", "ExecutorServiceManager", "esmCaptured", "=", "esmCaptor", ".", "getValue", "(", ")", ";", "assertThat", "(", "esmCaptured", ".", "getExecutor", "(", ")", ")", ".", "isSameAs", "(", "this", ".", "execTracker", ")", ";", "assertThat", "(", "esmCaptured", ".", "getShutdownPeriod", "(", ")", ")", ".", "isEqualTo", "(", "DEFAULT_SHUTDOWN_PERIOD", ")", ";", "assertThat", "(", "esmCaptured", ".", "getPoolName", "(", ")", ")", ".", "isSameAs", "(", "poolName", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRemoveOnCancelFalse", "(", ")", "{", "final", "String", "poolName", "=", "this", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ";", "final", "ScheduledExecutorServiceBuilder", "test", "=", "new", "ScheduledExecutorServiceBuilder", "(", "this", ".", "le", ",", "poolName", ",", "false", ")", ";", "this", ".", "execTracker", "=", "test", ".", "removeOnCancelPolicy", "(", "false", ")", ".", "build", "(", ")", ";", "assertThat", "(", "this", ".", "execTracker", ")", ".", "isInstanceOf", "(", "ScheduledThreadPoolExecutor", ".", "class", ")", ";", "final", "ScheduledThreadPoolExecutor", "castedExec", "=", "(", "ScheduledThreadPoolExecutor", ")", "this", ".", "execTracker", ";", "assertThat", "(", "castedExec", ".", "getRemoveOnCancelPolicy", "(", ")", ")", ".", "isFalse", "(", ")", ";", "final", "ArgumentCaptor", "<", "ExecutorServiceManager", ">", "esmCaptor", "=", "ArgumentCaptor", ".", "forClass", "(", "ExecutorServiceManager", ".", "class", ")", ";", "verify", "(", "this", ".", "le", ")", ".", "manage", "(", "esmCaptor", ".", "capture", "(", ")", ")", ";", "final", "ExecutorServiceManager", "esmCaptured", "=", "esmCaptor", ".", "getValue", "(", ")", ";", "assertThat", "(", "esmCaptured", ".", "getExecutor", "(", ")", ")", ".", "isSameAs", "(", "this", ".", "execTracker", ")", ";", "assertThat", "(", "esmCaptured", ".", "getShutdownPeriod", "(", ")", ")", ".", "isEqualTo", "(", "DEFAULT_SHUTDOWN_PERIOD", ")", ";", "assertThat", "(", "esmCaptured", ".", "getPoolName", "(", ")", ")", ".", "isSameAs", "(", "poolName", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPredefinedThreadFactory", "(", ")", "{", "final", "ThreadFactory", "tfactory", "=", "mock", "(", "ThreadFactory", ".", "class", ")", ";", "final", "String", "poolName", "=", "this", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ";", "final", "ScheduledExecutorServiceBuilder", "test", "=", "new", "ScheduledExecutorServiceBuilder", "(", "this", ".", "le", ",", "poolName", ",", "tfactory", ")", ";", "this", ".", "execTracker", "=", "test", ".", "removeOnCancelPolicy", "(", "false", ")", ".", "build", "(", ")", ";", "assertThat", "(", "this", ".", "execTracker", ")", ".", "isInstanceOf", "(", "ScheduledThreadPoolExecutor", ".", "class", ")", ";", "final", "ScheduledThreadPoolExecutor", "castedExec", "=", "(", "ScheduledThreadPoolExecutor", ")", "this", ".", "execTracker", ";", "assertThat", "(", "castedExec", ".", "getRemoveOnCancelPolicy", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "castedExec", ".", "getThreadFactory", "(", ")", ")", ".", "isSameAs", "(", "tfactory", ")", ";", "final", "ArgumentCaptor", "<", "ExecutorServiceManager", ">", "esmCaptor", "=", "ArgumentCaptor", ".", "forClass", "(", "ExecutorServiceManager", ".", "class", ")", ";", "verify", "(", "this", ".", "le", ")", ".", "manage", "(", "esmCaptor", ".", "capture", "(", ")", ")", ";", "final", "ExecutorServiceManager", "esmCaptured", "=", "esmCaptor", ".", "getValue", "(", ")", ";", "assertThat", "(", "esmCaptured", ".", "getExecutor", "(", ")", ")", ".", "isSameAs", "(", "this", ".", "execTracker", ")", ";", "assertThat", "(", "esmCaptured", ".", "getShutdownPeriod", "(", ")", ")", ".", "isEqualTo", "(", "DEFAULT_SHUTDOWN_PERIOD", ")", ";", "assertThat", "(", "esmCaptured", ".", "getPoolName", "(", ")", ")", ".", "isSameAs", "(", "poolName", ")", ";", "}", "</s>"]
["<s>", "public", "JettyManaged", "(", "Managed", "managed", ")", "{", "this", ".", "managed", "=", "managed", ";", "}", "</s>"]
["<s>", "public", "Managed", "getManaged", "(", ")", "{", "return", "managed", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "doStart", "(", ")", "throws", "Exception", "{", "managed", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "doStop", "(", ")", "throws", "Exception", "{", "managed", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "managed", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "void", "serverStarted", "(", "Server", "server", ")", ";", "</s>"]
["<s>", "default", "int", "getLocalPort", "(", "Server", "server", ")", "{", "return", "(", "(", "ServerConnector", ")", "server", ".", "getConnectors", "(", ")", "[", "0", "]", ")", ".", "getLocalPort", "(", ")", ";", "}", "</s>"]
["<s>", "default", "int", "getAdminPort", "(", "Server", "server", ")", "{", "final", "Connector", "[", "]", "connectors", "=", "server", ".", "getConnectors", "(", ")", ";", "return", "(", "(", "ServerConnector", ")", "connectors", "[", "connectors", ".", "length", "-", "1", "]", ")", ".", "getLocalPort", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ExecutorServiceManager", "(", "ExecutorService", "executor", ",", "Duration", "shutdownPeriod", ",", "String", "poolName", ")", "{", "this", ".", "executor", "=", "executor", ";", "this", ".", "shutdownPeriod", "=", "shutdownPeriod", ";", "this", ".", "poolName", "=", "poolName", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "start", "(", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "stop", "(", ")", "throws", "InterruptedException", ",", "Exception", "{", "executor", ".", "shutdown", "(", ")", ";", "final", "boolean", "success", "=", "executor", ".", "awaitTermination", "(", "shutdownPeriod", ".", "getQuantity", "(", ")", ",", "shutdownPeriod", ".", "getUnit", "(", ")", ")", ";", "if", "(", "!", "success", "&", "&", "LOG", ".", "isDebugEnabled", "(", ")", ")", "{", "LOG", ".", "debug", "(", "\"", "<STR_LIT>", "\"", "+", "executor", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "super", ".", "toString", "(", ")", "+", "<CHAR_LIT:(>", "+", "poolName", "+", "<CHAR_LIT:)>", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "public", "ExecutorService", "getExecutor", "(", ")", "{", "return", "executor", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "public", "Duration", "getShutdownPeriod", "(", ")", "{", "return", "shutdownPeriod", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "public", "String", "getPoolName", "(", ")", "{", "return", "poolName", ";", "}", "</s>"]
["<s>", "public", "AutoCloseableManager", "(", "final", "AutoCloseable", "autoCloseable", ")", "{", "this", ".", "autoCloseable", "=", "autoCloseable", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "start", "(", ")", "throws", "Exception", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "stop", "(", ")", "throws", "Exception", "{", "this", ".", "autoCloseable", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "void", "start", "(", ")", "throws", "Exception", ";", "</s>"]
["<s>", "void", "stop", "(", ")", "throws", "Exception", ";", "</s>"]
["<s>", "public", "LifecycleEnvironment", "(", ")", "{", "this", ".", "managedObjects", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "this", ".", "lifecycleListeners", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "}", "</s>"]
["<s>", "public", "List", "<", "LifeCycle", ">", "getManagedObjects", "(", ")", "{", "return", "managedObjects", ";", "}", "</s>"]
["<s>", "public", "void", "manage", "(", "Managed", "managed", ")", "{", "managedObjects", ".", "add", "(", "new", "JettyManaged", "(", "requireNonNull", "(", "managed", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "manage", "(", "LifeCycle", "managed", ")", "{", "managedObjects", ".", "add", "(", "requireNonNull", "(", "managed", ")", ")", ";", "}", "</s>"]
["<s>", "public", "ExecutorServiceBuilder", "executorService", "(", "String", "nameFormat", ")", "{", "return", "new", "ExecutorServiceBuilder", "(", "this", ",", "nameFormat", ")", ";", "}", "</s>"]
["<s>", "public", "ExecutorServiceBuilder", "executorService", "(", "String", "nameFormat", ",", "ThreadFactory", "factory", ")", "{", "return", "new", "ExecutorServiceBuilder", "(", "this", ",", "nameFormat", ",", "factory", ")", ";", "}", "</s>"]
["<s>", "public", "ScheduledExecutorServiceBuilder", "scheduledExecutorService", "(", "String", "nameFormat", ")", "{", "return", "scheduledExecutorService", "(", "nameFormat", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "ScheduledExecutorServiceBuilder", "scheduledExecutorService", "(", "String", "nameFormat", ",", "ThreadFactory", "factory", ")", "{", "return", "new", "ScheduledExecutorServiceBuilder", "(", "this", ",", "nameFormat", ",", "factory", ")", ";", "}", "</s>"]
["<s>", "public", "ScheduledExecutorServiceBuilder", "scheduledExecutorService", "(", "String", "nameFormat", ",", "boolean", "useDaemonThreads", ")", "{", "return", "new", "ScheduledExecutorServiceBuilder", "(", "this", ",", "nameFormat", ",", "useDaemonThreads", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addServerLifecycleListener", "(", "ServerLifecycleListener", "listener", ")", "{", "lifecycleListeners", ".", "add", "(", "new", "ServerListener", "(", "listener", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addLifeCycleListener", "(", "LifeCycle", ".", "Listener", "listener", ")", "{", "lifecycleListeners", ".", "add", "(", "listener", ")", ";", "}", "</s>"]
["<s>", "public", "void", "attach", "(", "ContainerLifeCycle", "container", ")", "{", "for", "(", "LifeCycle", "object", ":", "managedObjects", ")", "{", "container", ".", "addBean", "(", "object", ")", ";", "}", "container", ".", "addLifeCycleListener", "(", "new", "AbstractLifeCycle", ".", "AbstractLifeCycleListener", "(", ")", "{", "@", "Override", "public", "void", "lifeCycleStarting", "(", "LifeCycle", "event", ")", "{", "LOGGER", ".", "debug", "(", "\"", "<STR_LIT>", "\"", ",", "managedObjects", ")", ";", "}", "}", ")", ";", "for", "(", "LifeCycle", ".", "Listener", "listener", ":", "lifecycleListeners", ")", "{", "container", ".", "addLifeCycleListener", "(", "listener", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "lifeCycleStarting", "(", "LifeCycle", "event", ")", "{", "LOGGER", ".", "debug", "(", "\"", "<STR_LIT>", "\"", ",", "managedObjects", ")", ";", "}", "</s>"]
["<s>", "private", "ServerListener", "(", "ServerLifecycleListener", "listener", ")", "{", "this", ".", "listener", "=", "listener", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "lifeCycleStarted", "(", "LifeCycle", "event", ")", "{", "if", "(", "event", "instanceof", "Server", ")", "{", "listener", ".", "serverStarted", "(", "(", "Server", ")", "event", ")", ";", "}", "}", "</s>"]
["<s>", "public", "ScheduledExecutorServiceBuilder", "(", "LifecycleEnvironment", "environment", ",", "String", "nameFormat", ",", "ThreadFactory", "factory", ")", "{", "this", ".", "environment", "=", "environment", ";", "this", ".", "nameFormat", "=", "nameFormat", ";", "this", ".", "poolSize", "=", "1", ";", "this", ".", "threadFactory", "=", "factory", ";", "this", ".", "shutdownTime", "=", "Duration", ".", "seconds", "(", "<NUM_LIT:5>", ")", ";", "this", ".", "handler", "=", "new", "ThreadPoolExecutor", ".", "AbortPolicy", "(", ")", ";", "this", ".", "removeOnCancel", "=", "false", ";", "}", "</s>"]
["<s>", "public", "ScheduledExecutorServiceBuilder", "(", "LifecycleEnvironment", "environment", ",", "String", "nameFormat", ",", "boolean", "useDaemonThreads", ")", "{", "this", "(", "environment", ",", "nameFormat", ",", "new", "ThreadFactoryBuilder", "(", ")", ".", "setNameFormat", "(", "nameFormat", ")", ".", "setDaemon", "(", "useDaemonThreads", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "ScheduledExecutorServiceBuilder", "threads", "(", "int", "threads", ")", "{", "this", ".", "poolSize", "=", "threads", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "ScheduledExecutorServiceBuilder", "shutdownTime", "(", "Duration", "time", ")", "{", "this", ".", "shutdownTime", "=", "time", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "ScheduledExecutorServiceBuilder", "rejectedExecutionHandler", "(", "RejectedExecutionHandler", "handler", ")", "{", "this", ".", "handler", "=", "handler", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "ScheduledExecutorServiceBuilder", "threadFactory", "(", "ThreadFactory", "threadFactory", ")", "{", "this", ".", "threadFactory", "=", "threadFactory", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "ScheduledExecutorServiceBuilder", "removeOnCancelPolicy", "(", "boolean", "removeOnCancel", ")", "{", "this", ".", "removeOnCancel", "=", "Boolean", ".", "valueOf", "(", "removeOnCancel", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "ScheduledExecutorService", "build", "(", ")", "{", "final", "ScheduledThreadPoolExecutor", "executor", "=", "new", "ScheduledThreadPoolExecutor", "(", "this", ".", "poolSize", ",", "this", ".", "threadFactory", ",", "this", ".", "handler", ")", ";", "executor", ".", "setRemoveOnCancelPolicy", "(", "this", ".", "removeOnCancel", ")", ";", "this", ".", "environment", ".", "manage", "(", "new", "ExecutorServiceManager", "(", "executor", ",", "this", ".", "shutdownTime", ",", "this", ".", "nameFormat", ")", ")", ";", "return", "executor", ";", "}", "</s>"]
["<s>", "public", "ExecutorServiceBuilder", "(", "LifecycleEnvironment", "environment", ",", "String", "nameFormat", ",", "ThreadFactory", "factory", ")", "{", "this", ".", "environment", "=", "environment", ";", "this", ".", "nameFormat", "=", "nameFormat", ";", "this", ".", "corePoolSize", "=", "0", ";", "this", ".", "maximumPoolSize", "=", "1", ";", "this", ".", "allowCoreThreadTimeOut", "=", "false", ";", "this", ".", "keepAliveTime", "=", "Duration", ".", "seconds", "(", "<NUM_LIT>", ")", ";", "this", ".", "shutdownTime", "=", "Duration", ".", "seconds", "(", "<NUM_LIT:5>", ")", ";", "this", ".", "workQueue", "=", "new", "LinkedBlockingQueue", "<", ">", "(", ")", ";", "this", ".", "threadFactory", "=", "factory", ";", "this", ".", "handler", "=", "new", "ThreadPoolExecutor", ".", "AbortPolicy", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ExecutorServiceBuilder", "(", "LifecycleEnvironment", "environment", ",", "String", "nameFormat", ")", "{", "this", "(", "environment", ",", "nameFormat", ",", "new", "ThreadFactoryBuilder", "(", ")", ".", "setNameFormat", "(", "nameFormat", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "ExecutorServiceBuilder", "minThreads", "(", "int", "threads", ")", "{", "this", ".", "corePoolSize", "=", "threads", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "ExecutorServiceBuilder", "maxThreads", "(", "int", "threads", ")", "{", "this", ".", "maximumPoolSize", "=", "threads", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "ExecutorServiceBuilder", "allowCoreThreadTimeOut", "(", "boolean", "allowCoreThreadTimeOut", ")", "{", "this", ".", "allowCoreThreadTimeOut", "=", "allowCoreThreadTimeOut", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "ExecutorServiceBuilder", "keepAliveTime", "(", "Duration", "time", ")", "{", "this", ".", "keepAliveTime", "=", "time", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "ExecutorServiceBuilder", "shutdownTime", "(", "Duration", "time", ")", "{", "this", ".", "shutdownTime", "=", "time", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "ExecutorServiceBuilder", "workQueue", "(", "BlockingQueue", "<", "Runnable", ">", "workQueue", ")", "{", "this", ".", "workQueue", "=", "workQueue", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "ExecutorServiceBuilder", "rejectedExecutionHandler", "(", "RejectedExecutionHandler", "handler", ")", "{", "this", ".", "handler", "=", "handler", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "ExecutorServiceBuilder", "threadFactory", "(", "ThreadFactory", "threadFactory", ")", "{", "this", ".", "threadFactory", "=", "threadFactory", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "ExecutorService", "build", "(", ")", "{", "if", "(", "corePoolSize", "!", "=", "maximumPoolSize", "&", "&", "maximumPoolSize", ">", "1", "&", "&", "!", "isBoundedQueue", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "final", "ThreadPoolExecutor", "executor", "=", "new", "ThreadPoolExecutor", "(", "corePoolSize", ",", "maximumPoolSize", ",", "keepAliveTime", ".", "getQuantity", "(", ")", ",", "keepAliveTime", ".", "getUnit", "(", ")", ",", "workQueue", ",", "threadFactory", ",", "handler", ")", ";", "executor", ".", "allowCoreThreadTimeOut", "(", "allowCoreThreadTimeOut", ")", ";", "environment", ".", "manage", "(", "new", "ExecutorServiceManager", "(", "executor", ",", "shutdownTime", ",", "nameFormat", ")", ")", ";", "return", "executor", ";", "}", "</s>"]
["<s>", "private", "boolean", "isBoundedQueue", "(", ")", "{", "return", "workQueue", ".", "remainingCapacity", "(", ")", "!", "=", "Integer", ".", "MAX_VALUE", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "static", "synchronized", "void", "setLog", "(", "Logger", "newLog", ")", "{", "log", "=", "newLog", ";", "}", "</s>"]
["<s>", "TestConfiguration", "(", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "DataSourceFactory", "dataSource", ")", "{", "this", ".", "dataSource", "=", "dataSource", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "PooledDataSourceFactory", "getDataSourceFactory", "(", "TestConfiguration", "configuration", ")", "{", "return", "configuration", ".", "dataSource", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "Bootstrap", "<", "TestConfiguration", ">", "bootstrap", ")", "{", "bootstrap", ".", "addBundle", "(", "hibernate", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "TestConfiguration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "final", "SessionFactory", "sessionFactory", "=", "hibernate", ".", "getSessionFactory", "(", ")", ";", "initDatabase", "(", "sessionFactory", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "UnitOfWorkApplicationListener", "(", "\"", "<STR_LIT>", "\"", ",", "sessionFactory", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "DogResource", "(", "new", "DogDAO", "(", "sessionFactory", ")", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "PersistenceExceptionMapper", "(", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "ConstraintViolationExceptionMapper", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "initDatabase", "(", "SessionFactory", "sessionFactory", ")", "{", "try", "(", "Session", "session", "=", "sessionFactory", ".", "openSession", "(", ")", ")", "{", "Transaction", "transaction", "=", "session", ".", "beginTransaction", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "transaction", ".", "commit", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "Bootstrap", "<", "TestConfiguration", ">", "bootstrap", ")", "{", "hibernate", ".", "setLazyLoadingEnabled", "(", "false", ")", ";", "bootstrap", ".", "addBundle", "(", "hibernate", ")", ";", "}", "</s>"]
["<s>", "DogDAO", "(", "SessionFactory", "sessionFactory", ")", "{", "super", "(", "sessionFactory", ")", ";", "}", "</s>"]
["<s>", "Optional", "<", "Dog", ">", "findByName", "(", "String", "name", ")", "{", "return", "Optional", ".", "ofNullable", "(", "get", "(", "name", ")", ")", ";", "}", "</s>"]
["<s>", "Dog", "create", "(", "Dog", "dog", ")", "throws", "HibernateException", "{", "currentSession", "(", ")", ".", "setHibernateFlushMode", "(", "FlushMode", ".", "COMMIT", ")", ";", "currentSession", "(", ")", ".", "save", "(", "requireNonNull", "(", "dog", ")", ")", ";", "return", "dog", ";", "}", "</s>"]
["<s>", "DogResource", "(", "DogDAO", "dao", ")", "{", "this", ".", "dao", "=", "dao", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "UnitOfWork", "(", "readOnly", "=", "true", ")", "public", "Optional", "<", "Dog", ">", "find", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ")", "{", "return", "dao", ".", "findByName", "(", "name", ")", ";", "}", "</s>"]
["<s>", "@", "PUT", "@", "UnitOfWork", "public", "void", "create", "(", "Dog", "dog", ")", "{", "dao", ".", "create", "(", "dog", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "ConstraintViolationException", "e", ")", "{", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ".", "entity", "(", "new", "ErrorMessage", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ".", "getStatusCode", "(", ")", ",", "Strings", ".", "nullToEmpty", "(", "e", ".", "getCause", "(", ")", ".", "getMessage", "(", ")", ")", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setup", "(", "Class", "<", "?", "extends", "Application", "<", "TestConfiguration", ">", ">", "applicationClass", ")", "{", "dropwizardTestSupport", "=", "new", "DropwizardTestSupport", "<", ">", "(", "applicationClass", ",", "ResourceHelpers", ".", "resourceFilePath", "(", "\"", "<STR_LIT>", "\"", ")", ",", "ConfigOverride", ".", "config", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "System", ".", "nanoTime", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "dropwizardTestSupport", ".", "before", "(", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "{", "dropwizardTestSupport", ".", "after", "(", ")", ";", "client", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "private", "String", "getUrlPrefix", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "dropwizardTestSupport", ".", "getLocalPort", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "serialisesLazyObjectWhenEnabled", "(", ")", "throws", "Exception", "{", "setup", "(", "TestApplication", ".", "class", ")", ";", "final", "Dog", "raf", "=", "client", ".", "target", "(", "getUrlPrefix", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "get", "(", "Dog", ".", "class", ")", ";", "assertThat", "(", "raf", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "raf", ".", "getOwner", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "requireNonNull", "(", "raf", ".", "getOwner", "(", ")", ")", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sendsNullWhenDisabled", "(", ")", "throws", "Exception", "{", "setup", "(", "TestApplicationWithDisabledLazyLoading", ".", "class", ")", ";", "final", "Dog", "raf", "=", "client", ".", "target", "(", "getUrlPrefix", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "get", "(", "Dog", ".", "class", ")", ";", "assertThat", "(", "raf", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "raf", ".", "getOwner", "(", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsErrorsWhenEnabled", "(", ")", "throws", "Exception", "{", "setup", "(", "TestApplication", ".", "class", ")", ";", "final", "Dog", "raf", "=", "new", "Dog", "(", ")", ";", "raf", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Response", "response", "=", "client", ".", "target", "(", "getUrlPrefix", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "put", "(", "Entity", ".", "entity", "(", "raf", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatusInfo", "(", ")", ")", ".", "isEqualTo", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ";", "assertThat", "(", "response", ".", "getHeaderString", "(", "HttpHeaders", ".", "CONTENT_TYPE", ")", ")", ".", "isEqualTo", "(", "MediaType", ".", "APPLICATION_JSON", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "ErrorMessage", ".", "class", ")", ".", "getMessage", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "listener", ".", "registerSessionFactory", "(", "HibernateBundle", ".", "DEFAULT_NAME", ",", "sessionFactory", ")", ";", "listener", ".", "registerSessionFactory", "(", "\"", "<STR_LIT>", "\"", ",", "analyticsSessionFactory", ")", ";", "when", "(", "sessionFactory", ".", "openSession", "(", ")", ")", ".", "thenReturn", "(", "session", ")", ";", "when", "(", "session", ".", "getSessionFactory", "(", ")", ")", ".", "thenReturn", "(", "sessionFactory", ")", ";", "when", "(", "session", ".", "beginTransaction", "(", ")", ")", ".", "thenReturn", "(", "transaction", ")", ";", "when", "(", "session", ".", "getTransaction", "(", ")", ")", ".", "thenReturn", "(", "transaction", ")", ";", "when", "(", "transaction", ".", "getStatus", "(", ")", ")", ".", "thenReturn", "(", "ACTIVE", ")", ";", "when", "(", "analyticsSessionFactory", ".", "openSession", "(", ")", ")", ".", "thenReturn", "(", "analyticsSession", ")", ";", "when", "(", "analyticsSession", ".", "getSessionFactory", "(", ")", ")", ".", "thenReturn", "(", "analyticsSessionFactory", ")", ";", "when", "(", "analyticsSession", ".", "beginTransaction", "(", ")", ")", ".", "thenReturn", "(", "analyticsTransaction", ")", ";", "when", "(", "analyticsSession", ".", "getTransaction", "(", ")", ")", ".", "thenReturn", "(", "analyticsTransaction", ")", ";", "when", "(", "analyticsTransaction", ".", "getStatus", "(", ")", ")", ".", "thenReturn", "(", "ACTIVE", ")", ";", "when", "(", "requestMethodStartEvent", ".", "getType", "(", ")", ")", ".", "thenReturn", "(", "RequestEvent", ".", "Type", ".", "RESOURCE_METHOD_START", ")", ";", "when", "(", "responseFinishedEvent", ".", "getType", "(", ")", ")", ".", "thenReturn", "(", "RequestEvent", ".", "Type", ".", "FINISHED", ")", ";", "when", "(", "requestMethodExceptionEvent", ".", "getType", "(", ")", ")", ".", "thenReturn", "(", "RequestEvent", ".", "Type", ".", "ON_EXCEPTION", ")", ";", "when", "(", "responseFiltersStartEvent", ".", "getType", "(", ")", ")", ".", "thenReturn", "(", "RequestEvent", ".", "Type", ".", "RESP_FILTERS_START", ")", ";", "when", "(", "requestMethodStartEvent", ".", "getUriInfo", "(", ")", ")", ".", "thenReturn", "(", "uriInfo", ")", ";", "when", "(", "responseFinishedEvent", ".", "getUriInfo", "(", ")", ")", ".", "thenReturn", "(", "uriInfo", ")", ";", "when", "(", "requestMethodExceptionEvent", ".", "getUriInfo", "(", ")", ")", ".", "thenReturn", "(", "uriInfo", ")", ";", "prepareResourceMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "opensAndClosesASession", "(", ")", "throws", "Exception", "{", "execute", "(", ")", ";", "final", "InOrder", "inOrder", "=", "inOrder", "(", "sessionFactory", ",", "session", ")", ";", "inOrder", ".", "verify", "(", "sessionFactory", ")", ".", "openSession", "(", ")", ";", "inOrder", ".", "verify", "(", "session", ")", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "bindsAndUnbindsTheSessionToTheManagedContext", "(", ")", "throws", "Exception", "{", "doAnswer", "(", "invocation", "-", ">", "{", "assertThat", "(", "ManagedSessionContext", ".", "hasBind", "(", "sessionFactory", ")", ")", ".", "isTrue", "(", ")", ";", "return", "null", ";", "}", ")", ".", "when", "(", "session", ")", ".", "beginTransaction", "(", ")", ";", "execute", "(", ")", ";", "assertThat", "(", "ManagedSessionContext", ".", "hasBind", "(", "sessionFactory", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configuresTheSessionsReadOnlyDefault", "(", ")", "throws", "Exception", "{", "prepareResourceMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "execute", "(", ")", ";", "verify", "(", "session", ")", ".", "setDefaultReadOnly", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configuresTheSessionsCacheMode", "(", ")", "throws", "Exception", "{", "prepareResourceMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "execute", "(", ")", ";", "verify", "(", "session", ")", ".", "setCacheMode", "(", "CacheMode", ".", "IGNORE", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configuresTheSessionsFlushMode", "(", ")", "throws", "Exception", "{", "prepareResourceMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "execute", "(", ")", ";", "verify", "(", "session", ")", ".", "setHibernateFlushMode", "(", "FlushMode", ".", "ALWAYS", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotBeginATransactionIfNotTransactional", "(", ")", "throws", "Exception", "{", "final", "String", "resourceMethodName", "=", "\"", "<STR_LIT>", "\"", ";", "prepareResourceMethod", "(", "resourceMethodName", ")", ";", "when", "(", "session", ".", "getTransaction", "(", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "execute", "(", ")", ";", "verify", "(", "session", ",", "never", "(", ")", ")", ".", "beginTransaction", "(", ")", ";", "verifyZeroInteractions", "(", "transaction", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "detectsAnnotationOnHandlingMethod", "(", ")", "throws", "NoSuchMethodException", "{", "final", "String", "resourceMethodName", "=", "\"", "<STR_LIT>", "\"", ";", "prepareResourceMethod", "(", "resourceMethodName", ")", ";", "execute", "(", ")", ";", "verify", "(", "session", ")", ".", "setDefaultReadOnly", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "detectsAnnotationOnDefinitionMethod", "(", ")", "throws", "NoSuchMethodException", "{", "final", "String", "resourceMethodName", "=", "\"", "<STR_LIT>", "\"", ";", "prepareResourceMethod", "(", "resourceMethodName", ")", ";", "execute", "(", ")", ";", "verify", "(", "session", ")", ".", "setDefaultReadOnly", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "annotationOnDefinitionMethodOverridesHandlingMethod", "(", ")", "throws", "NoSuchMethodException", "{", "final", "String", "resourceMethodName", "=", "\"", "<STR_LIT>", "\"", ";", "prepareResourceMethod", "(", "resourceMethodName", ")", ";", "execute", "(", ")", ";", "verify", "(", "session", ")", ".", "setDefaultReadOnly", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beginsAndCommitsATransactionIfTransactional", "(", ")", "throws", "Exception", "{", "execute", "(", ")", ";", "final", "InOrder", "inOrder", "=", "inOrder", "(", "session", ",", "transaction", ")", ";", "inOrder", ".", "verify", "(", "session", ")", ".", "beginTransaction", "(", ")", ";", "inOrder", ".", "verify", "(", "transaction", ")", ".", "commit", "(", ")", ";", "inOrder", ".", "verify", "(", "session", ")", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rollsBackTheTransactionOnException", "(", ")", "throws", "Exception", "{", "executeWithException", "(", ")", ";", "final", "InOrder", "inOrder", "=", "inOrder", "(", "session", ",", "transaction", ")", ";", "inOrder", ".", "verify", "(", "session", ")", ".", "beginTransaction", "(", ")", ";", "inOrder", ".", "verify", "(", "transaction", ")", ".", "rollback", "(", ")", ";", "inOrder", ".", "verify", "(", "session", ")", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotCommitAnInactiveTransaction", "(", ")", "throws", "Exception", "{", "when", "(", "transaction", ".", "getStatus", "(", ")", ")", ".", "thenReturn", "(", "NOT_ACTIVE", ")", ";", "execute", "(", ")", ";", "verify", "(", "transaction", ",", "never", "(", ")", ")", ".", "commit", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotCommitANullTransaction", "(", ")", "throws", "Exception", "{", "when", "(", "session", ".", "getTransaction", "(", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "execute", "(", ")", ";", "verify", "(", "transaction", ",", "never", "(", ")", ")", ".", "commit", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotRollbackAnInactiveTransaction", "(", ")", "throws", "Exception", "{", "when", "(", "transaction", ".", "getStatus", "(", ")", ")", ".", "thenReturn", "(", "NOT_ACTIVE", ")", ";", "executeWithException", "(", ")", ";", "verify", "(", "transaction", ",", "never", "(", ")", ")", ".", "rollback", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotRollbackANullTransaction", "(", ")", "throws", "Exception", "{", "when", "(", "session", ".", "getTransaction", "(", ")", ")", ".", "thenReturn", "(", "null", ")", ";", "executeWithException", "(", ")", ";", "verify", "(", "transaction", ",", "never", "(", ")", ")", ".", "rollback", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beginsAndCommitsATransactionForAnalytics", "(", ")", "throws", "Exception", "{", "prepareResourceMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "execute", "(", ")", ";", "final", "InOrder", "inOrder", "=", "inOrder", "(", "analyticsSession", ",", "analyticsTransaction", ")", ";", "inOrder", ".", "verify", "(", "analyticsSession", ")", ".", "beginTransaction", "(", ")", ";", "inOrder", ".", "verify", "(", "analyticsTransaction", ")", ".", "commit", "(", ")", ";", "inOrder", ".", "verify", "(", "analyticsSession", ")", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsExceptionOnNotRegisteredDatabase", "(", ")", "throws", "Exception", "{", "prepareResourceMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThatThrownBy", "(", "this", ":", ":", "execute", ")", ".", "isInstanceOf", "(", "IllegalArgumentException", ".", "class", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "void", "prepareResourceMethod", "(", "String", "resourceMethodName", ")", "throws", "NoSuchMethodException", "{", "final", "Method", "handlingMethod", "=", "MockResource", ".", "class", ".", "getMethod", "(", "resourceMethodName", ")", ";", "Method", "definitionMethod", "=", "handlingMethod", ";", "Class", "<", "?", ">", "interfaceClass", "=", "MockResource", ".", "class", ".", "getInterfaces", "(", ")", "[", "0", "]", ";", "if", "(", "methodDefinedOnInterface", "(", "resourceMethodName", ",", "interfaceClass", ".", "getMethods", "(", ")", ")", ")", "{", "definitionMethod", "=", "interfaceClass", ".", "getMethod", "(", "resourceMethodName", ")", ";", "}", "when", "(", "uriInfo", ".", "getMatchedResourceMethod", "(", ")", ")", ".", "thenReturn", "(", "Resource", ".", "builder", "(", ")", ".", "addMethod", "(", ")", ".", "handlingMethod", "(", "handlingMethod", ")", ".", "handledBy", "(", "new", "MockResource", "(", ")", ",", "definitionMethod", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "methodDefinedOnInterface", "(", "String", "methodName", ",", "Method", "[", "]", "methods", ")", "{", "for", "(", "Method", "method", ":", "methods", ")", "{", "if", "(", "method", ".", "getName", "(", ")", ".", "equals", "(", "methodName", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "private", "void", "execute", "(", ")", "{", "RequestEventListener", "requestListener", "=", "listener", ".", "onRequest", "(", "requestStartEvent", ")", ";", "requestListener", ".", "onEvent", "(", "requestMethodStartEvent", ")", ";", "requestListener", ".", "onEvent", "(", "responseFiltersStartEvent", ")", ";", "requestListener", ".", "onEvent", "(", "responseFinishedEvent", ")", ";", "}", "</s>"]
["<s>", "private", "void", "executeWithException", "(", ")", "{", "RequestEventListener", "requestListener", "=", "listener", ".", "onRequest", "(", "requestStartEvent", ")", ";", "requestListener", ".", "onEvent", "(", "requestMethodStartEvent", ")", ";", "requestListener", ".", "onEvent", "(", "responseFiltersStartEvent", ")", ";", "requestListener", ".", "onEvent", "(", "requestMethodExceptionEvent", ")", ";", "requestListener", ".", "onEvent", "(", "responseFinishedEvent", ")", ";", "}", "</s>"]
["<s>", "@", "UnitOfWork", "(", "readOnly", "=", "false", ",", "cacheMode", "=", "CacheMode", ".", "NORMAL", ",", "transactional", "=", "true", ",", "flushMode", "=", "FlushMode", ".", "AUTO", ")", "public", "void", "methodWithDefaultAnnotation", "(", ")", "{", "}", "</s>"]
["<s>", "@", "UnitOfWork", "(", "readOnly", "=", "true", ",", "cacheMode", "=", "CacheMode", ".", "NORMAL", ",", "transactional", "=", "true", ",", "flushMode", "=", "FlushMode", ".", "AUTO", ")", "public", "void", "methodWithReadOnlyAnnotation", "(", ")", "{", "}", "</s>"]
["<s>", "@", "UnitOfWork", "(", "readOnly", "=", "false", ",", "cacheMode", "=", "CacheMode", ".", "IGNORE", ",", "transactional", "=", "true", ",", "flushMode", "=", "FlushMode", ".", "AUTO", ")", "public", "void", "methodWithCacheModeIgnoreAnnotation", "(", ")", "{", "}", "</s>"]
["<s>", "@", "UnitOfWork", "(", "readOnly", "=", "false", ",", "cacheMode", "=", "CacheMode", ".", "NORMAL", ",", "transactional", "=", "true", ",", "flushMode", "=", "FlushMode", ".", "ALWAYS", ")", "public", "void", "methodWithFlushModeAlwaysAnnotation", "(", ")", "{", "}", "</s>"]
["<s>", "@", "UnitOfWork", "(", "readOnly", "=", "false", ",", "cacheMode", "=", "CacheMode", ".", "NORMAL", ",", "transactional", "=", "false", ",", "flushMode", "=", "FlushMode", ".", "AUTO", ")", "public", "void", "methodWithTransactionalFalseAnnotation", "(", ")", "{", "}", "</s>"]
["<s>", "@", "UnitOfWork", "(", "readOnly", "=", "true", ")", "@", "Override", "public", "void", "handlingMethodAnnotated", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "definitionMethodAnnotated", "(", ")", "{", "}", "</s>"]
["<s>", "@", "UnitOfWork", "(", "readOnly", "=", "false", ")", "@", "Override", "public", "void", "bothMethodsAnnotated", "(", ")", "{", "}", "</s>"]
["<s>", "@", "UnitOfWork", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "methodWithUnitOfWorkOnAnalyticsDatabase", "(", ")", "{", "}", "</s>"]
["<s>", "@", "UnitOfWork", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "methodWithUnitOfWorkOnNotRegisteredDatabase", "(", ")", "{", "}", "</s>"]
["<s>", "void", "handlingMethodAnnotated", "(", ")", ";", "</s>"]
["<s>", "@", "UnitOfWork", "(", "readOnly", "=", "true", ")", "void", "definitionMethodAnnotated", "(", ")", ";", "</s>"]
["<s>", "@", "UnitOfWork", "(", "readOnly", "=", "true", ")", "void", "bothMethodsAnnotated", "(", ")", ";", "</s>"]
["<s>", "public", "PersonDAO", "(", "SessionFactory", "sessionFactory", ")", "{", "super", "(", "sessionFactory", ")", ";", "}", "</s>"]
["<s>", "public", "Optional", "<", "Person", ">", "findByName", "(", "String", "name", ")", "{", "return", "Optional", ".", "ofNullable", "(", "get", "(", "name", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Person", "persist", "(", "Person", "entity", ")", "{", "return", "super", ".", "persist", "(", "entity", ")", ";", "}", "</s>"]
["<s>", "public", "PersonResource", "(", "PersonDAO", "dao", ")", "{", "this", ".", "dao", "=", "dao", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "UnitOfWork", "(", "readOnly", "=", "true", ")", "public", "Optional", "<", "Person", ">", "find", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ")", "{", "return", "dao", ".", "findByName", "(", "name", ")", ";", "}", "</s>"]
["<s>", "@", "PUT", "@", "UnitOfWork", "public", "void", "save", "(", "Person", "person", ")", "{", "dao", ".", "persist", "(", "person", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "super", ".", "tearDown", "(", ")", ";", "if", "(", "sessionFactory", "!", "=", "null", ")", "{", "sessionFactory", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "Application", "configure", "(", ")", "{", "forceSet", "(", "TestProperties", ".", "CONTAINER_PORT", ",", "\"", "<STR_LIT:0>", "\"", ")", ";", "final", "MetricRegistry", "metricRegistry", "=", "new", "MetricRegistry", "(", ")", ";", "final", "SessionFactoryFactory", "factory", "=", "new", "SessionFactoryFactory", "(", ")", ";", "final", "DataSourceFactory", "dbConfig", "=", "new", "DataSourceFactory", "(", ")", ";", "dbConfig", ".", "setProperties", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "HibernateBundle", "<", "?", ">", "bundle", "=", "mock", "(", "HibernateBundle", ".", "class", ")", ";", "final", "Environment", "environment", "=", "mock", "(", "Environment", ".", "class", ")", ";", "final", "LifecycleEnvironment", "lifecycleEnvironment", "=", "mock", "(", "LifecycleEnvironment", ".", "class", ")", ";", "when", "(", "environment", ".", "lifecycle", "(", ")", ")", ".", "thenReturn", "(", "lifecycleEnvironment", ")", ";", "when", "(", "environment", ".", "metrics", "(", ")", ")", ".", "thenReturn", "(", "metricRegistry", ")", ";", "dbConfig", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "nanoTime", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "dbConfig", ".", "setUser", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dbConfig", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dbConfig", ".", "setValidationQuery", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "sessionFactory", "=", "factory", ".", "build", "(", "bundle", ",", "environment", ",", "dbConfig", ",", "ImmutableList", ".", "of", "(", "Person", ".", "class", ")", ")", ";", "try", "(", "Session", "session", "=", "sessionFactory", ".", "openSession", "(", ")", ")", "{", "Transaction", "transaction", "=", "session", ".", "beginTransaction", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "transaction", ".", "commit", "(", ")", ";", "}", "final", "DropwizardResourceConfig", "config", "=", "DropwizardResourceConfig", ".", "forTesting", "(", "new", "MetricRegistry", "(", ")", ")", ";", "config", ".", "register", "(", "new", "UnitOfWorkApplicationListener", "(", "\"", "<STR_LIT>", "\"", ",", "sessionFactory", ")", ")", ";", "config", ".", "register", "(", "new", "PersonResource", "(", "new", "PersonDAO", "(", "sessionFactory", ")", ")", ")", ";", "config", ".", "register", "(", "new", "JacksonMessageBodyProvider", "(", "Jackson", ".", "newObjectMapper", "(", ")", ")", ")", ";", "config", ".", "register", "(", "new", "PersistenceExceptionMapper", "(", ")", ")", ";", "config", ".", "register", "(", "new", "DataExceptionMapper", "(", ")", ")", ";", "config", ".", "register", "(", "new", "EmptyOptionalExceptionMapper", "(", ")", ")", ";", "return", "config", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "configureClient", "(", "ClientConfig", "config", ")", "{", "config", ".", "register", "(", "new", "JacksonMessageBodyProvider", "(", "Jackson", ".", "newObjectMapper", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "findsExistingData", "(", ")", "throws", "Exception", "{", "final", "Person", "coda", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "get", "(", "Person", ".", "class", ")", ";", "assertThat", "(", "coda", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "coda", ".", "getEmail", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "coda", ".", "getBirthday", "(", ")", ")", ".", "isEqualTo", "(", "new", "DateTime", "(", "<NUM_LIT>", ",", "1", ",", "<NUM_LIT:2>", ",", "0", ",", "<NUM_LIT>", ",", "DateTimeZone", ".", "UTC", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesNotFindMissingData", "(", ")", "throws", "Exception", "{", "try", "{", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "get", "(", "Person", ".", "class", ")", ";", "failBecauseExceptionWasNotThrown", "(", "WebApplicationException", ".", "class", ")", ";", "}", "catch", "(", "WebApplicationException", "e", ")", "{", "assertThat", "(", "e", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createsNewData", "(", ")", "throws", "Exception", "{", "final", "Person", "person", "=", "new", "Person", "(", ")", ";", "person", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "person", ".", "setEmail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "person", ".", "setBirthday", "(", "new", "DateTime", "(", "<NUM_LIT>", ",", "<NUM_LIT:3>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT:12>", ",", "DateTimeZone", ".", "UTC", ")", ")", ";", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "put", "(", "Entity", ".", "entity", "(", "person", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "final", "Person", "hank", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "MediaType", ".", "APPLICATION_JSON", ")", ".", "get", "(", "Person", ".", "class", ")", ";", "assertThat", "(", "hank", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "hank", ".", "getEmail", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "hank", ".", "getBirthday", "(", ")", ")", ".", "isEqualTo", "(", "person", ".", "getBirthday", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSqlExceptionIsHandled", "(", ")", "throws", "Exception", "{", "final", "Person", "person", "=", "new", "Person", "(", ")", ";", "person", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "person", ".", "setEmail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "person", ".", "setBirthday", "(", "new", "DateTime", "(", "<NUM_LIT>", ",", "<NUM_LIT:2>", ",", "<NUM_LIT:11>", ",", "0", ",", "0", ",", "DateTimeZone", ".", "UTC", ")", ")", ";", "final", "Response", "response", "=", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "put", "(", "Entity", ".", "entity", "(", "person", ",", "MediaType", ".", "APPLICATION_JSON", ")", ")", ";", "assertThat", "(", "response", ".", "getStatusInfo", "(", ")", ")", ".", "isEqualTo", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ";", "assertThat", "(", "response", ".", "getHeaderString", "(", "HttpHeaders", ".", "CONTENT_TYPE", ")", ")", ".", "isEqualTo", "(", "MediaType", ".", "APPLICATION_JSON", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "ErrorMessage", ".", "class", ")", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasASessionFactory", "(", ")", "throws", "Exception", "{", "assertThat", "(", "healthCheck", ".", "getSessionFactory", "(", ")", ")", ".", "isEqualTo", "(", "factory", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAValidationQuery", "(", ")", "throws", "Exception", "{", "assertThat", "(", "healthCheck", ".", "getValidationQuery", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isHealthyIfNoExceptionIsThrown", "(", ")", "throws", "Exception", "{", "final", "Session", "session", "=", "mock", "(", "Session", ".", "class", ")", ";", "when", "(", "factory", ".", "openSession", "(", ")", ")", ".", "thenReturn", "(", "session", ")", ";", "final", "Transaction", "transaction", "=", "mock", "(", "Transaction", ".", "class", ")", ";", "when", "(", "session", ".", "beginTransaction", "(", ")", ")", ".", "thenReturn", "(", "transaction", ")", ";", "final", "NativeQuery", "query", "=", "mock", "(", "NativeQuery", ".", "class", ")", ";", "when", "(", "session", ".", "createNativeQuery", "(", "anyString", "(", ")", ")", ")", ".", "thenReturn", "(", "query", ")", ";", "assertThat", "(", "healthCheck", ".", "execute", "(", ")", ".", "isHealthy", "(", ")", ")", ".", "isTrue", "(", ")", ";", "final", "InOrder", "inOrder", "=", "inOrder", "(", "factory", ",", "session", ",", "transaction", ",", "query", ")", ";", "inOrder", ".", "verify", "(", "factory", ")", ".", "openSession", "(", ")", ";", "inOrder", ".", "verify", "(", "session", ")", ".", "beginTransaction", "(", ")", ";", "inOrder", ".", "verify", "(", "session", ")", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ";", "inOrder", ".", "verify", "(", "query", ")", ".", "list", "(", ")", ";", "inOrder", ".", "verify", "(", "transaction", ")", ".", "commit", "(", ")", ";", "inOrder", ".", "verify", "(", "session", ")", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isUnhealthyIfAnExceptionIsThrown", "(", ")", "throws", "Exception", "{", "final", "Session", "session", "=", "mock", "(", "Session", ".", "class", ")", ";", "when", "(", "factory", ".", "openSession", "(", ")", ")", ".", "thenReturn", "(", "session", ")", ";", "final", "Transaction", "transaction", "=", "mock", "(", "Transaction", ".", "class", ")", ";", "when", "(", "session", ".", "beginTransaction", "(", ")", ")", ".", "thenReturn", "(", "transaction", ")", ";", "when", "(", "transaction", ".", "getStatus", "(", ")", ")", ".", "thenReturn", "(", "ACTIVE", ")", ";", "final", "NativeQuery", "query", "=", "mock", "(", "NativeQuery", ".", "class", ")", ";", "when", "(", "session", ".", "createNativeQuery", "(", "anyString", "(", ")", ")", ")", ".", "thenReturn", "(", "query", ")", ";", "when", "(", "query", ".", "list", "(", ")", ")", ".", "thenThrow", "(", "new", "HibernateException", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "healthCheck", ".", "execute", "(", ")", ".", "isHealthy", "(", ")", ")", ".", "isFalse", "(", ")", ";", "final", "InOrder", "inOrder", "=", "inOrder", "(", "factory", ",", "session", ",", "transaction", ",", "query", ")", ";", "inOrder", ".", "verify", "(", "factory", ")", ".", "openSession", "(", ")", ";", "inOrder", ".", "verify", "(", "session", ")", ".", "beginTransaction", "(", ")", ";", "inOrder", ".", "verify", "(", "session", ")", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ";", "inOrder", ".", "verify", "(", "query", ")", ".", "list", "(", ")", ";", "inOrder", ".", "verify", "(", "transaction", ")", ".", "rollback", "(", ")", ";", "inOrder", ".", "verify", "(", "session", ")", ".", "close", "(", ")", ";", "verify", "(", "transaction", ",", "never", "(", ")", ")", ".", "commit", "(", ")", ";", "}", "</s>"]
["<s>", "MockDAO", "(", "SessionFactory", "factory", ")", "{", "super", "(", "factory", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Session", "currentSession", "(", ")", "{", "return", "super", ".", "currentSession", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Criteria", "criteria", "(", ")", "{", "return", "super", ".", "criteria", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Query", "namedQuery", "(", "String", "queryName", ")", "throws", "HibernateException", "{", "return", "super", ".", "namedQuery", "(", "queryName", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Class", "<", "String", ">", "getEntityClass", "(", ")", "{", "return", "super", ".", "getEntityClass", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "uniqueResult", "(", "Criteria", "criteria", ")", "throws", "HibernateException", "{", "return", "super", ".", "uniqueResult", "(", "criteria", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "uniqueResult", "(", "Query", "<", "String", ">", "query", ")", "throws", "HibernateException", "{", "return", "super", ".", "uniqueResult", "(", "query", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "List", "<", "String", ">", "list", "(", "Criteria", "criteria", ")", "throws", "HibernateException", "{", "return", "super", ".", "list", "(", "criteria", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "List", "<", "String", ">", "list", "(", "Query", "<", "String", ">", "query", ")", "throws", "HibernateException", "{", "return", "super", ".", "list", "(", "query", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "get", "(", "Serializable", "id", ")", "{", "return", "super", ".", "get", "(", "id", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "persist", "(", "String", "entity", ")", "throws", "HibernateException", "{", "return", "super", ".", "persist", "(", "entity", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "<", "T", ">", "T", "initialize", "(", "T", "proxy", ")", "{", "return", "super", ".", "initialize", "(", "proxy", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "throws", "Exception", "{", "when", "(", "criteriaBuilder", ".", "createQuery", "(", "same", "(", "String", ".", "class", ")", ")", ")", ".", "thenReturn", "(", "criteriaQuery", ")", ";", "when", "(", "factory", ".", "getCurrentSession", "(", ")", ")", ".", "thenReturn", "(", "session", ")", ";", "when", "(", "session", ".", "createCriteria", "(", "String", ".", "class", ")", ")", ".", "thenReturn", "(", "criteria", ")", ";", "when", "(", "session", ".", "getCriteriaBuilder", "(", ")", ")", ".", "thenReturn", "(", "criteriaBuilder", ")", ";", "when", "(", "session", ".", "getNamedQuery", "(", "anyString", "(", ")", ")", ")", ".", "thenReturn", "(", "query", ")", ";", "when", "(", "session", ".", "createQuery", "(", "anyString", "(", ")", ",", "same", "(", "String", ".", "class", ")", ")", ")", ".", "thenReturn", "(", "query", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getsASessionFromTheSessionFactory", "(", ")", "throws", "Exception", "{", "assertThat", "(", "dao", ".", "currentSession", "(", ")", ")", ".", "isSameAs", "(", "session", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasAnEntityClass", "(", ")", "throws", "Exception", "{", "assertThat", "(", "dao", ".", "getEntityClass", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getsNamedQueries", "(", ")", "throws", "Exception", "{", "assertThat", "(", "dao", ".", "namedQuery", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "query", ")", ";", "verify", "(", "session", ")", ".", "getNamedQuery", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getsTypedQueries", "(", ")", "throws", "Exception", "{", "assertThat", "(", "dao", ".", "query", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "query", ")", ";", "verify", "(", "session", ")", ".", "createQuery", "(", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createsNewCriteria", "(", ")", "throws", "Exception", "{", "assertThat", "(", "dao", ".", "criteria", "(", ")", ")", ".", "isEqualTo", "(", "criteria", ")", ";", "verify", "(", "session", ")", ".", "createCriteria", "(", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createsNewCriteriaQueries", "(", ")", "throws", "Exception", "{", "assertThat", "(", "dao", ".", "criteriaQuery", "(", ")", ")", ".", "isEqualTo", "(", "criteriaQuery", ")", ";", "verify", "(", "session", ")", ".", "getCriteriaBuilder", "(", ")", ";", "verify", "(", "criteriaBuilder", ")", ".", "createQuery", "(", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsUniqueResultsFromCriteriaQueries", "(", ")", "throws", "Exception", "{", "when", "(", "criteria", ".", "uniqueResult", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "dao", ".", "uniqueResult", "(", "criteria", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsUniqueResultsFromJpaCriteriaQueries", "(", ")", "throws", "Exception", "{", "when", "(", "session", ".", "createQuery", "(", "criteriaQuery", ")", ")", ".", "thenReturn", "(", "query", ")", ";", "when", "(", "query", ".", "getResultList", "(", ")", ")", ".", "thenReturn", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "uniqueResult", "(", "criteriaQuery", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "NonUniqueResultException", ".", "class", ")", "public", "void", "throwsOnNonUniqueResultsFromJpaCriteriaQueries", "(", ")", "throws", "Exception", "{", "when", "(", "session", ".", "createQuery", "(", "criteriaQuery", ")", ")", ".", "thenReturn", "(", "query", ")", ";", "when", "(", "query", ".", "getResultList", "(", ")", ")", ".", "thenReturn", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "dao", ".", "uniqueResult", "(", "criteriaQuery", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsUniqueResultsFromQueries", "(", ")", "throws", "Exception", "{", "when", "(", "query", ".", "uniqueResult", "(", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "dao", ".", "uniqueResult", "(", "query", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsUniqueListsFromCriteriaQueries", "(", ")", "throws", "Exception", "{", "when", "(", "criteria", ".", "list", "(", ")", ")", ".", "thenReturn", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "list", "(", "criteria", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsUniqueListsFromJpaCriteriaQueries", "(", ")", "throws", "Exception", "{", "when", "(", "session", ".", "createQuery", "(", "criteriaQuery", ")", ")", ".", "thenReturn", "(", "query", ")", ";", "when", "(", "query", ".", "getResultList", "(", ")", ")", ".", "thenReturn", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "list", "(", "criteriaQuery", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "returnsUniqueListsFromQueries", "(", ")", "throws", "Exception", "{", "when", "(", "query", ".", "list", "(", ")", ")", ".", "thenReturn", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "dao", ".", "list", "(", "query", ")", ")", ".", "containsOnly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getsEntitiesById", "(", ")", "throws", "Exception", "{", "when", "(", "session", ".", "get", "(", "String", ".", "class", ",", "<NUM_LIT>", ")", ")", ".", "thenReturn", "(", "\"", "<STR_LIT:!>", "\"", ")", ";", "assertThat", "(", "dao", ".", "get", "(", "<NUM_LIT>", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:!>", "\"", ")", ";", "verify", "(", "session", ")", ".", "get", "(", "String", ".", "class", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "persistsEntities", "(", ")", "throws", "Exception", "{", "assertThat", "(", "dao", ".", "persist", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "verify", "(", "session", ")", ".", "saveOrUpdate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "initializesProxies", "(", ")", "throws", "Exception", "{", "final", "LazyInitializer", "initializer", "=", "mock", "(", "LazyInitializer", ".", "class", ")", ";", "when", "(", "initializer", ".", "isUninitialized", "(", ")", ")", ".", "thenReturn", "(", "true", ")", ";", "final", "HibernateProxy", "proxy", "=", "mock", "(", "HibernateProxy", ".", "class", ")", ";", "when", "(", "proxy", ".", "getHibernateLazyInitializer", "(", ")", ")", ".", "thenReturn", "(", "initializer", ")", ";", "dao", ".", "initialize", "(", "proxy", ")", ";", "verify", "(", "initializer", ")", ".", "initialize", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "environment", ".", "metrics", "(", ")", ")", ".", "thenReturn", "(", "metricRegistry", ")", ";", "when", "(", "environment", ".", "lifecycle", "(", ")", ")", ".", "thenReturn", "(", "lifecycleEnvironment", ")", ";", "config", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", ")", ";", "config", ".", "setUser", "(", "\"", "<STR_LIT>", "\"", ")", ";", "config", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "config", ".", "setValidationQuery", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ImmutableMap", "<", "String", ",", "String", ">", "properties", "=", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "config", ".", "setProperties", "(", "properties", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "if", "(", "sessionFactory", "!", "=", "null", ")", "{", "sessionFactory", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "managesTheSessionFactory", "(", ")", "throws", "Exception", "{", "build", "(", ")", ";", "verify", "(", "lifecycleEnvironment", ")", ".", "manage", "(", "any", "(", "SessionFactoryManager", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "callsBundleToConfigure", "(", ")", "throws", "Exception", "{", "build", "(", ")", ";", "verify", "(", "bundle", ")", ".", "configure", "(", "any", "(", "Configuration", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsPoolName", "(", ")", "{", "build", "(", ")", ";", "ArgumentCaptor", "<", "SessionFactoryManager", ">", "sessionFactoryManager", "=", "ArgumentCaptor", ".", "forClass", "(", "SessionFactoryManager", ".", "class", ")", ";", "verify", "(", "lifecycleEnvironment", ")", ".", "manage", "(", "sessionFactoryManager", ".", "capture", "(", ")", ")", ";", "ManagedPooledDataSource", "dataSource", "=", "(", "ManagedPooledDataSource", ")", "sessionFactoryManager", ".", "getValue", "(", ")", ".", "getDataSource", "(", ")", ";", "assertThat", "(", "dataSource", ".", "getPool", "(", ")", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "setsACustomPoolName", "(", ")", "{", "this", ".", "sessionFactory", "=", "factory", ".", "build", "(", "bundle", ",", "environment", ",", "config", ",", "ImmutableList", ".", "of", "(", "Person", ".", "class", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ArgumentCaptor", "<", "SessionFactoryManager", ">", "sessionFactoryManager", "=", "ArgumentCaptor", ".", "forClass", "(", "SessionFactoryManager", ".", "class", ")", ";", "verify", "(", "lifecycleEnvironment", ")", ".", "manage", "(", "sessionFactoryManager", ".", "capture", "(", ")", ")", ";", "ManagedPooledDataSource", "dataSource", "=", "(", "ManagedPooledDataSource", ")", "sessionFactoryManager", ".", "getValue", "(", ")", ".", "getDataSource", "(", ")", ";", "assertThat", "(", "dataSource", ".", "getPool", "(", ")", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "buildsAWorkingSessionFactory", "(", ")", "throws", "Exception", "{", "build", "(", ")", ";", "try", "(", "Session", "session", "=", "requireNonNull", "(", "sessionFactory", ")", ".", "openSession", "(", ")", ")", "{", "Transaction", "transaction", "=", "session", ".", "beginTransaction", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "transaction", ".", "commit", "(", ")", ";", "final", "Person", "entity", "=", "session", ".", "get", "(", "Person", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "entity", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "entity", ".", "getEmail", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "requireNonNull", "(", "entity", ".", "getBirthday", "(", ")", ")", ".", "toDateTime", "(", "DateTimeZone", ".", "UTC", ")", ")", ".", "isEqualTo", "(", "new", "DateTime", "(", "<NUM_LIT>", ",", "1", ",", "<NUM_LIT:2>", ",", "0", ",", "<NUM_LIT>", ",", "DateTimeZone", ".", "UTC", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configureRunsBeforeSessionFactoryCreation", "(", ")", "{", "final", "SessionFactoryFactory", "customFactory", "=", "new", "SessionFactoryFactory", "(", ")", "{", "@", "Override", "protected", "void", "configure", "(", "Configuration", "configuration", ",", "ServiceRegistry", "registry", ")", "{", "super", ".", "configure", "(", "configuration", ",", "registry", ")", ";", "configuration", ".", "setInterceptor", "(", "EmptyInterceptor", ".", "INSTANCE", ")", ";", "}", "}", ";", "sessionFactory", "=", "customFactory", ".", "build", "(", "bundle", ",", "environment", ",", "config", ",", "ImmutableList", ".", "of", "(", "Person", ".", "class", ")", ")", ";", "assertThat", "(", "sessionFactory", ".", "getSessionFactoryOptions", "(", ")", ".", "getInterceptor", "(", ")", ")", ".", "isSameAs", "(", "EmptyInterceptor", ".", "INSTANCE", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "configure", "(", "Configuration", "configuration", ",", "ServiceRegistry", "registry", ")", "{", "super", ".", "configure", "(", "configuration", ",", "registry", ")", ";", "configuration", ".", "setInterceptor", "(", "EmptyInterceptor", ".", "INSTANCE", ")", ";", "}", "</s>"]
["<s>", "private", "void", "build", "(", ")", "{", "this", ".", "sessionFactory", "=", "factory", ".", "build", "(", "bundle", ",", "environment", ",", "config", ",", "ImmutableList", ".", "of", "(", "Person", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "DataException", "e", ")", "{", "final", "String", "causeMessage", "=", "Strings", ".", "nullToEmpty", "(", "e", ".", "getCause", "(", ")", ".", "getMessage", "(", ")", ")", ";", "final", "String", "message", "=", "causeMessage", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", ";", "return", "Response", ".", "status", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ")", ".", "entity", "(", "new", "ErrorMessage", "(", "Response", ".", "Status", ".", "BAD_REQUEST", ".", "getStatusCode", "(", ")", ",", "message", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "final", "HibernateBundle", "<", "?", ">", "bundle", "=", "mock", "(", "HibernateBundle", ".", "class", ")", ";", "final", "Environment", "environment", "=", "mock", "(", "Environment", ".", "class", ")", ";", "when", "(", "environment", ".", "lifecycle", "(", ")", ")", ".", "thenReturn", "(", "mock", "(", "LifecycleEnvironment", ".", "class", ")", ")", ";", "when", "(", "environment", ".", "metrics", "(", ")", ")", ".", "thenReturn", "(", "new", "MetricRegistry", "(", ")", ")", ";", "final", "DataSourceFactory", "dataSourceFactory", "=", "new", "DataSourceFactory", "(", ")", ";", "dataSourceFactory", ".", "setUrl", "(", "\"", "<STR_LIT>", "\"", "+", "UUID", ".", "randomUUID", "(", ")", ".", "toString", "(", ")", ")", ";", "dataSourceFactory", ".", "setUser", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setDriverClass", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setValidationQuery", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dataSourceFactory", ".", "setProperties", "(", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "dataSourceFactory", ".", "setInitialSize", "(", "1", ")", ";", "dataSourceFactory", ".", "setMinSize", "(", "1", ")", ";", "sessionFactory", "=", "new", "SessionFactoryFactory", "(", ")", ".", "build", "(", "bundle", ",", "environment", ",", "dataSourceFactory", ",", "ImmutableList", ".", "of", "(", ")", ")", ";", "try", "(", "Session", "session", "=", "sessionFactory", ".", "openSession", "(", ")", ")", "{", "Transaction", "transaction", "=", "session", ".", "beginTransaction", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "transaction", ".", "commit", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProxyWorks", "(", ")", "throws", "Exception", "{", "final", "SessionDao", "sessionDao", "=", "new", "SessionDao", "(", "sessionFactory", ")", ";", "final", "UnitOfWorkAwareProxyFactory", "unitOfWorkAwareProxyFactory", "=", "new", "UnitOfWorkAwareProxyFactory", "(", "\"", "<STR_LIT>", "\"", ",", "sessionFactory", ")", ";", "final", "OAuthAuthenticator", "oAuthAuthenticator", "=", "unitOfWorkAwareProxyFactory", ".", "create", "(", "OAuthAuthenticator", ".", "class", ",", "SessionDao", ".", "class", ",", "sessionDao", ")", ";", "assertThat", "(", "oAuthAuthenticator", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "oAuthAuthenticator", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProxyWorksWithoutUnitOfWork", "(", ")", "{", "assertThat", "(", "new", "UnitOfWorkAwareProxyFactory", "(", "\"", "<STR_LIT>", "\"", ",", "sessionFactory", ")", ".", "create", "(", "PlainAuthenticator", ".", "class", ")", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProxyHandlesErrors", "(", ")", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "new", "UnitOfWorkAwareProxyFactory", "(", "\"", "<STR_LIT>", "\"", ",", "sessionFactory", ")", ".", "create", "(", "BrokenAuthenticator", ".", "class", ")", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNewAspect", "(", ")", "{", "final", "UnitOfWorkAwareProxyFactory", "unitOfWorkAwareProxyFactory", "=", "new", "UnitOfWorkAwareProxyFactory", "(", "\"", "<STR_LIT>", "\"", ",", "sessionFactory", ")", ";", "ImmutableMap", "<", "String", ",", "SessionFactory", ">", "sessionFactories", "=", "ImmutableMap", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "sessionFactory", ")", ";", "UnitOfWorkAspect", "aspect1", "=", "unitOfWorkAwareProxyFactory", ".", "newAspect", "(", "sessionFactories", ")", ";", "UnitOfWorkAspect", "aspect2", "=", "unitOfWorkAwareProxyFactory", ".", "newAspect", "(", "sessionFactories", ")", ";", "assertThat", "(", "aspect1", ")", ".", "isNotSameAs", "(", "aspect2", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCanBeConfiguredWithACustomAspect", "(", ")", "{", "final", "SessionDao", "sessionDao", "=", "new", "SessionDao", "(", "sessionFactory", ")", ";", "final", "UnitOfWorkAwareProxyFactory", "unitOfWorkAwareProxyFactory", "=", "new", "UnitOfWorkAwareProxyFactory", "(", "\"", "<STR_LIT>", "\"", ",", "sessionFactory", ")", "{", "@", "Override", "public", "UnitOfWorkAspect", "newAspect", "(", "ImmutableMap", "<", "String", ",", "SessionFactory", ">", "sessionFactories", ")", "{", "return", "new", "CustomAspect", "(", "sessionFactories", ")", ";", "}", "}", ";", "final", "OAuthAuthenticator", "oAuthAuthenticator", "=", "unitOfWorkAwareProxyFactory", ".", "create", "(", "OAuthAuthenticator", ".", "class", ",", "SessionDao", ".", "class", ",", "sessionDao", ")", ";", "assertThat", "(", "oAuthAuthenticator", ".", "authenticate", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "UnitOfWorkAspect", "newAspect", "(", "ImmutableMap", "<", "String", ",", "SessionFactory", ">", "sessionFactories", ")", "{", "return", "new", "CustomAspect", "(", "sessionFactories", ")", ";", "}", "</s>"]
["<s>", "public", "SessionDao", "(", "SessionFactory", "sessionFactory", ")", "{", "this", ".", "sessionFactory", "=", "sessionFactory", ";", "}", "</s>"]
["<s>", "public", "boolean", "isExist", "(", "String", "token", ")", "{", "return", "sessionFactory", ".", "getCurrentSession", "(", ")", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setParameter", "(", "\"", "<STR_LIT>", "\"", ",", "token", ")", ".", "list", "(", ")", ".", "size", "(", ")", ">", "0", ";", "}", "</s>"]
["<s>", "public", "OAuthAuthenticator", "(", "SessionDao", "sessionDao", ")", "{", "this", ".", "sessionDao", "=", "sessionDao", ";", "}", "</s>"]
["<s>", "@", "UnitOfWork", "public", "boolean", "authenticate", "(", "String", "token", ")", "{", "return", "sessionDao", ".", "isExist", "(", "token", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "authenticate", "(", "String", "token", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "UnitOfWork", "public", "boolean", "authenticate", "(", "String", "token", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "CustomAspect", "(", "Map", "<", "String", ",", "SessionFactory", ">", "sessionFactories", ")", "{", "super", "(", "sessionFactories", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "configureSession", "(", ")", "{", "super", ".", "configureSession", "(", ")", ";", "Transaction", "transaction", "=", "getSession", "(", ")", ".", "beginTransaction", "(", ")", ";", "getSession", "(", ")", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "transaction", ".", "commit", "(", ")", ";", "}", "</s>"]
["<s>", "@", "UnitOfWork", "public", "void", "example", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "this", ".", "unitOfWork", "=", "Example", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getAnnotation", "(", "UnitOfWork", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultsToReadWrite", "(", ")", "throws", "Exception", "{", "assertThat", "(", "unitOfWork", ".", "readOnly", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultsToTransactional", "(", ")", "throws", "Exception", "{", "assertThat", "(", "unitOfWork", ".", "transactional", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultsToNormalCaching", "(", ")", "throws", "Exception", "{", "assertThat", "(", "unitOfWork", ".", "cacheMode", "(", ")", ")", ".", "isEqualTo", "(", "CacheMode", ".", "NORMAL", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultsToAutomaticFlushing", "(", ")", "throws", "Exception", "{", "assertThat", "(", "unitOfWork", ".", "flushMode", "(", ")", ")", ".", "isEqualTo", "(", "FlushMode", ".", "AUTO", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "closesTheFactoryOnStopping", "(", ")", "throws", "Exception", "{", "manager", ".", "stop", "(", ")", ";", "verify", "(", "factory", ")", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "stopsTheDataSourceOnStopping", "(", ")", "throws", "Exception", "{", "manager", ".", "stop", "(", ")", ";", "verify", "(", "dataSource", ")", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "startsTheDataSourceOnStarting", "(", ")", "throws", "Exception", "{", "manager", ".", "start", "(", ")", ";", "verify", "(", "dataSource", ")", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setName", "(", "String", "name", ")", "{", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getEmail", "(", ")", "{", "return", "email", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setEmail", "(", "String", "email", ")", "{", "this", ".", "email", "=", "email", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "DateTime", "getBirthday", "(", ")", "{", "return", "birthday", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setBirthday", "(", "DateTime", "birthday", ")", "{", "this", ".", "birthday", "=", "birthday", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "DataSourceFactory", "getDataSourceFactory", "(", "Configuration", "configuration", ")", "{", "return", "dbConfig", ";", "}", "</s>"]
["<s>", "@", "Before", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "when", "(", "environment", ".", "healthChecks", "(", ")", ")", ".", "thenReturn", "(", "healthChecks", ")", ";", "when", "(", "environment", ".", "jersey", "(", ")", ")", ".", "thenReturn", "(", "jerseyEnvironment", ")", ";", "when", "(", "jerseyEnvironment", ".", "getResourceConfig", "(", ")", ")", ".", "thenReturn", "(", "new", "DropwizardResourceConfig", "(", ")", ")", ";", "when", "(", "factory", ".", "build", "(", "eq", "(", "bundle", ")", ",", "any", "(", "Environment", ".", "class", ")", ",", "any", "(", "DataSourceFactory", ".", "class", ")", ",", "anyList", "(", ")", ",", "eq", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "thenReturn", "(", "sessionFactory", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addsHibernateSupportToJackson", "(", ")", "throws", "Exception", "{", "final", "ObjectMapper", "objectMapperFactory", "=", "mock", "(", "ObjectMapper", ".", "class", ")", ";", "final", "Bootstrap", "<", "?", ">", "bootstrap", "=", "mock", "(", "Bootstrap", ".", "class", ")", ";", "when", "(", "bootstrap", ".", "getObjectMapper", "(", ")", ")", ".", "thenReturn", "(", "objectMapperFactory", ")", ";", "bundle", ".", "initialize", "(", "bootstrap", ")", ";", "final", "ArgumentCaptor", "<", "Module", ">", "captor", "=", "ArgumentCaptor", ".", "forClass", "(", "Module", ".", "class", ")", ";", "verify", "(", "objectMapperFactory", ")", ".", "registerModule", "(", "captor", ".", "capture", "(", ")", ")", ";", "assertThat", "(", "captor", ".", "getValue", "(", ")", ")", ".", "isInstanceOf", "(", "Hibernate5Module", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "buildsASessionFactory", "(", ")", "throws", "Exception", "{", "bundle", ".", "run", "(", "configuration", ",", "environment", ")", ";", "verify", "(", "factory", ")", ".", "build", "(", "bundle", ",", "environment", ",", "dbConfig", ",", "entities", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "registersATransactionalListener", "(", ")", "throws", "Exception", "{", "bundle", ".", "run", "(", "configuration", ",", "environment", ")", ";", "final", "ArgumentCaptor", "<", "UnitOfWorkApplicationListener", ">", "captor", "=", "ArgumentCaptor", ".", "forClass", "(", "UnitOfWorkApplicationListener", ".", "class", ")", ";", "verify", "(", "jerseyEnvironment", ")", ".", "register", "(", "captor", ".", "capture", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "registersASessionFactoryHealthCheck", "(", ")", "throws", "Exception", "{", "dbConfig", ".", "setValidationQuery", "(", "\"", "<STR_LIT>", "\"", ")", ";", "bundle", ".", "run", "(", "configuration", ",", "environment", ")", ";", "final", "ArgumentCaptor", "<", "SessionFactoryHealthCheck", ">", "captor", "=", "ArgumentCaptor", ".", "forClass", "(", "SessionFactoryHealthCheck", ".", "class", ")", ";", "verify", "(", "healthChecks", ")", ".", "register", "(", "eq", "(", "\"", "<STR_LIT>", "\"", ")", ",", "captor", ".", "capture", "(", ")", ")", ";", "assertThat", "(", "captor", ".", "getValue", "(", ")", ".", "getSessionFactory", "(", ")", ")", ".", "isEqualTo", "(", "sessionFactory", ")", ";", "assertThat", "(", "captor", ".", "getValue", "(", ")", ".", "getValidationQuery", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "registersACustomNameOfHealthCheckAndDBPoolMetrics", "(", ")", "throws", "Exception", "{", "final", "HibernateBundle", "<", "Configuration", ">", "customBundle", "=", "new", "HibernateBundle", "<", "Configuration", ">", "(", "entities", ",", "factory", ")", "{", "@", "Override", "public", "DataSourceFactory", "getDataSourceFactory", "(", "Configuration", "configuration", ")", "{", "return", "dbConfig", ";", "}", "@", "Override", "protected", "String", "name", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "}", ";", "when", "(", "factory", ".", "build", "(", "eq", "(", "customBundle", ")", ",", "any", "(", "Environment", ".", "class", ")", ",", "any", "(", "DataSourceFactory", ".", "class", ")", ",", "anyList", "(", ")", ",", "eq", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "thenReturn", "(", "sessionFactory", ")", ";", "customBundle", ".", "run", "(", "configuration", ",", "environment", ")", ";", "final", "ArgumentCaptor", "<", "SessionFactoryHealthCheck", ">", "captor", "=", "ArgumentCaptor", ".", "forClass", "(", "SessionFactoryHealthCheck", ".", "class", ")", ";", "verify", "(", "healthChecks", ")", ".", "register", "(", "eq", "(", "\"", "<STR_LIT>", "\"", ")", ",", "captor", ".", "capture", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "DataSourceFactory", "getDataSourceFactory", "(", "Configuration", "configuration", ")", "{", "return", "dbConfig", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "name", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasASessionFactory", "(", ")", "throws", "Exception", "{", "bundle", ".", "run", "(", "configuration", ",", "environment", ")", ";", "assertThat", "(", "bundle", ".", "getSessionFactory", "(", ")", ")", ".", "isEqualTo", "(", "sessionFactory", ")", ";", "}", "</s>"]
["<s>", "TestConfiguration", "(", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "DataSourceFactory", "dataSource", ")", "{", "this", ".", "dataSource", "=", "dataSource", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "PooledDataSourceFactory", "getDataSourceFactory", "(", "TestConfiguration", "configuration", ")", "{", "return", "configuration", ".", "dataSource", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "initialize", "(", "Bootstrap", "<", "TestConfiguration", ">", "bootstrap", ")", "{", "bootstrap", ".", "addBundle", "(", "hibernate", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "TestConfiguration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "final", "SessionFactory", "sessionFactory", "=", "hibernate", ".", "getSessionFactory", "(", ")", ";", "initDatabase", "(", "sessionFactory", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "UnitOfWorkApplicationListener", "(", "\"", "<STR_LIT>", "\"", ",", "sessionFactory", ")", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "PersonResource", "(", "new", "PersonDAO", "(", "sessionFactory", ")", ",", "new", "DogDAO", "(", "sessionFactory", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "initDatabase", "(", "SessionFactory", "sessionFactory", ")", "{", "try", "(", "Session", "session", "=", "sessionFactory", ".", "openSession", "(", ")", ")", "{", "Transaction", "transaction", "=", "session", ".", "beginTransaction", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "session", ".", "createNativeQuery", "(", "\"", "<STR_LIT>", "\"", ")", ".", "executeUpdate", "(", ")", ";", "transaction", ".", "commit", "(", ")", ";", "}", "}", "</s>"]
["<s>", "PersonResource", "(", "PersonDAO", "dao", ",", "DogDAO", "dogDao", ")", "{", "this", ".", "personDao", "=", "dao", ";", "this", ".", "dogResource", "=", "new", "DogResource", "(", "dogDao", ",", "personDao", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "UnitOfWork", "(", "readOnly", "=", "true", ")", "public", "Optional", "<", "Person", ">", "find", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ")", "{", "return", "personDao", ".", "findByName", "(", "name", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "UnitOfWork", "public", "Person", "save", "(", "Person", "person", ")", "{", "return", "personDao", ".", "persist", "(", "person", ")", ";", "}", "</s>"]
["<s>", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "DogResource", "dogResource", "(", ")", "{", "return", "dogResource", ";", "}", "</s>"]
["<s>", "DogResource", "(", "DogDAO", "dogDAO", ",", "PersonDAO", "personDAO", ")", "{", "this", ".", "dogDAO", "=", "dogDAO", ";", "this", ".", "personDAO", "=", "personDAO", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "List", "<", "Dog", ">", "findAll", "(", "@", "PathParam", "(", "\"", "<STR_LIT:Name>", "\"", ")", "String", "ownerName", ")", "{", "return", "dogDAO", ".", "findByOwner", "(", "ownerName", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "UnitOfWork", "(", "readOnly", "=", "true", ")", "public", "Optional", "<", "Dog", ">", "find", "(", "@", "PathParam", "(", "\"", "<STR_LIT:Name>", "\"", ")", "String", "ownerName", ",", "@", "PathParam", "(", "\"", "<STR_LIT:Name>", "\"", ")", "String", "dogName", ")", "{", "return", "dogDAO", ".", "findByOwnerAndName", "(", "ownerName", ",", "dogName", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "@", "UnitOfWork", "public", "Dog", "create", "(", "@", "PathParam", "(", "\"", "<STR_LIT:Name>", "\"", ")", "String", "ownerName", ",", "Dog", "dog", ")", "{", "Optional", "<", "Person", ">", "person", "=", "personDAO", ".", "findByName", "(", "ownerName", ")", ";", "if", "(", "!", "person", ".", "isPresent", "(", ")", ")", "{", "throw", "new", "WebApplicationException", "(", "<NUM_LIT>", ")", ";", "}", "dog", ".", "setOwner", "(", "person", ".", "get", "(", ")", ")", ";", "return", "dogDAO", ".", "persist", "(", "dog", ")", ";", "}", "</s>"]
["<s>", "PersonDAO", "(", "SessionFactory", "sessionFactory", ")", "{", "super", "(", "sessionFactory", ")", ";", "}", "</s>"]
["<s>", "Optional", "<", "Person", ">", "findByName", "(", "String", "name", ")", "{", "return", "Optional", ".", "ofNullable", "(", "get", "(", "name", ")", ")", ";", "}", "</s>"]
["<s>", "DogDAO", "(", "SessionFactory", "sessionFactory", ")", "{", "super", "(", "sessionFactory", ")", ";", "}", "</s>"]
["<s>", "Optional", "<", "Dog", ">", "findByOwnerAndName", "(", "String", "ownerName", ",", "String", "dogName", ")", "{", "return", "query", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setParameter", "(", "\"", "<STR_LIT>", "\"", ",", "ownerName", ")", ".", "setParameter", "(", "\"", "<STR_LIT>", "\"", ",", "dogName", ")", ".", "uniqueResultOptional", "(", ")", ";", "}", "</s>"]
["<s>", "List", "<", "Dog", ">", "findByOwner", "(", "String", "ownerName", ")", "{", "return", "query", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setParameter", "(", "\"", "<STR_LIT>", "\"", ",", "ownerName", ")", ".", "list", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "baseUri", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "appRule", ".", "getLocalPort", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canReadFromTopResource", "(", ")", "throws", "Exception", "{", "final", "Person", "person", "=", "appRule", ".", "client", "(", ")", ".", "target", "(", "baseUri", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Person", ".", "class", ")", ";", "assertThat", "(", "person", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canWriteTopResource", "(", ")", "throws", "Exception", "{", "final", "Person", "person", "=", "appRule", ".", "client", "(", ")", ".", "target", "(", "baseUri", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ",", "Person", ".", "class", ")", ";", "assertThat", "(", "person", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canReadFromSubResources", "(", ")", "throws", "Exception", "{", "final", "Dog", "dog", "=", "appRule", ".", "client", "(", ")", ".", "target", "(", "baseUri", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", "Dog", ".", "class", ")", ";", "assertThat", "(", "dog", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "dog", ".", "getOwner", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "requireNonNull", "(", "dog", ".", "getOwner", "(", ")", ")", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canWriteSubResource", "(", ")", "throws", "Exception", "{", "final", "Dog", "dog", "=", "appRule", ".", "client", "(", ")", ".", "target", "(", "baseUri", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ",", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ",", "Dog", ".", "class", ")", ";", "assertThat", "(", "dog", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "dog", ".", "getOwner", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "requireNonNull", "(", "dog", ".", "getOwner", "(", ")", ")", ".", "getName", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "errorsAreHandled", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "appRule", ".", "client", "(", ")", ".", "target", "(", "baseUri", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "post", "(", "Entity", ".", "entity", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ",", "MediaType", ".", "APPLICATION_JSON_TYPE", ")", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "noSessionErrorIsRaised", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "appRule", ".", "client", "(", ")", ".", "target", "(", "baseUri", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setName", "(", "String", "name", ")", "{", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "Person", "getOwner", "(", ")", "{", "return", "owner", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setOwner", "(", "Person", "owner", ")", "{", "this", ".", "owner", "=", "owner", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "toResponse", "(", "PersistenceException", "e", ")", "{", "LOGGER", ".", "error", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "Throwable", "t", "=", "e", ".", "getCause", "(", ")", ";", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "final", "ExceptionMapper", "<", "Throwable", ">", "exceptionMapper", "=", "(", "ExceptionMapper", "<", "Throwable", ">", ")", "requireNonNull", "(", "providers", ")", ".", "getExceptionMapper", "(", "t", ".", "getClass", "(", ")", ")", ";", "return", "exceptionMapper", ".", "toResponse", "(", "t", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isMappable", "(", "PersistenceException", "e", ")", "{", "return", "requireNonNull", "(", "providers", ")", ".", "getExceptionMapper", "(", "e", ".", "getCause", "(", ")", ".", "getClass", "(", ")", ")", "!", "=", "null", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFindEntityClassesFromDirectory", "(", ")", "{", "String", "packageWithEntities", "=", "\"", "<STR_LIT>", "\"", ";", "ImmutableList", "<", "Class", "<", "?", ">", ">", "findEntityClassesFromDirectory", "=", "ScanningHibernateBundle", ".", "findEntityClassesFromDirectory", "(", "new", "String", "[", "]", "{", "packageWithEntities", "}", ")", ";", "assertFalse", "(", "findEntityClassesFromDirectory", ".", "isEmpty", "(", ")", ")", ";", "assertEquals", "(", "<NUM_LIT:4>", ",", "findEntityClassesFromDirectory", ".", "size", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFindEntityClassesFromMultipleDirectories", "(", ")", "{", "String", "packageWithEntities", "=", "\"", "<STR_LIT>", "\"", ";", "String", "packageWithEntities2", "=", "\"", "<STR_LIT>", "\"", ";", "ImmutableList", "<", "Class", "<", "?", ">", ">", "findEntityClassesFromDirectory", "=", "ScanningHibernateBundle", ".", "findEntityClassesFromDirectory", "(", "new", "String", "[", "]", "{", "packageWithEntities", ",", "packageWithEntities2", "}", ")", ";", "assertFalse", "(", "findEntityClassesFromDirectory", ".", "isEmpty", "(", ")", ")", ";", "assertEquals", "(", "<NUM_LIT:8>", ",", "findEntityClassesFromDirectory", ".", "size", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "UnitOfWorkAspect", "(", "Map", "<", "String", ",", "SessionFactory", ">", "sessionFactories", ")", "{", "this", ".", "sessionFactories", "=", "sessionFactories", ";", "}", "</s>"]
["<s>", "public", "void", "beforeStart", "(", "@", "Nullable", "UnitOfWork", "unitOfWork", ")", "{", "if", "(", "unitOfWork", "=", "=", "null", ")", "{", "return", ";", "}", "this", ".", "unitOfWork", "=", "unitOfWork", ";", "sessionFactory", "=", "sessionFactories", ".", "get", "(", "unitOfWork", ".", "value", "(", ")", ")", ";", "if", "(", "sessionFactory", "=", "=", "null", ")", "{", "if", "(", "unitOfWork", ".", "value", "(", ")", ".", "equals", "(", "HibernateBundle", ".", "DEFAULT_NAME", ")", "&", "&", "sessionFactories", ".", "size", "(", ")", "=", "=", "1", ")", "{", "sessionFactory", "=", "sessionFactories", ".", "values", "(", ")", ".", "iterator", "(", ")", ".", "next", "(", ")", ";", "}", "else", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "unitOfWork", ".", "value", "(", ")", "+", "\"", "'", "\"", ")", ";", "}", "}", "session", "=", "sessionFactory", ".", "openSession", "(", ")", ";", "try", "{", "configureSession", "(", ")", ";", "ManagedSessionContext", ".", "bind", "(", "session", ")", ";", "beginTransaction", "(", "unitOfWork", ",", "session", ")", ";", "}", "catch", "(", "Throwable", "th", ")", "{", "session", ".", "close", "(", ")", ";", "session", "=", "null", ";", "ManagedSessionContext", ".", "unbind", "(", "sessionFactory", ")", ";", "throw", "th", ";", "}", "}", "</s>"]
["<s>", "public", "void", "afterEnd", "(", ")", "{", "if", "(", "unitOfWork", "=", "=", "null", "|", "|", "session", "=", "=", "null", ")", "{", "return", ";", "}", "try", "{", "commitTransaction", "(", "unitOfWork", ",", "session", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "rollbackTransaction", "(", "unitOfWork", ",", "session", ")", ";", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "public", "void", "onError", "(", ")", "{", "if", "(", "unitOfWork", "=", "=", "null", "|", "|", "session", "=", "=", "null", ")", "{", "return", ";", "}", "try", "{", "rollbackTransaction", "(", "unitOfWork", ",", "session", ")", ";", "}", "finally", "{", "onFinish", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "onFinish", "(", ")", "{", "try", "{", "if", "(", "session", "!", "=", "null", ")", "{", "session", ".", "close", "(", ")", ";", "}", "}", "finally", "{", "session", "=", "null", ";", "ManagedSessionContext", ".", "unbind", "(", "sessionFactory", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "void", "configureSession", "(", ")", "{", "checkNotNull", "(", "unitOfWork", ")", ";", "checkNotNull", "(", "session", ")", ";", "session", ".", "setDefaultReadOnly", "(", "unitOfWork", ".", "readOnly", "(", ")", ")", ";", "session", ".", "setCacheMode", "(", "unitOfWork", ".", "cacheMode", "(", ")", ")", ";", "session", ".", "setHibernateFlushMode", "(", "unitOfWork", ".", "flushMode", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "beginTransaction", "(", "UnitOfWork", "unitOfWork", ",", "Session", "session", ")", "{", "if", "(", "!", "unitOfWork", ".", "transactional", "(", ")", ")", "{", "return", ";", "}", "session", ".", "beginTransaction", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "rollbackTransaction", "(", "UnitOfWork", "unitOfWork", ",", "Session", "session", ")", "{", "if", "(", "!", "unitOfWork", ".", "transactional", "(", ")", ")", "{", "return", ";", "}", "final", "Transaction", "txn", "=", "session", ".", "getTransaction", "(", ")", ";", "if", "(", "txn", "!", "=", "null", "&", "&", "txn", ".", "getStatus", "(", ")", ".", "canRollback", "(", ")", ")", "{", "txn", ".", "rollback", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "commitTransaction", "(", "UnitOfWork", "unitOfWork", ",", "Session", "session", ")", "{", "if", "(", "!", "unitOfWork", ".", "transactional", "(", ")", ")", "{", "return", ";", "}", "final", "Transaction", "txn", "=", "session", ".", "getTransaction", "(", ")", ";", "if", "(", "txn", "!", "=", "null", "&", "&", "txn", ".", "getStatus", "(", ")", ".", "canRollback", "(", ")", ")", "{", "txn", ".", "commit", "(", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "Session", "getSession", "(", ")", "{", "return", "requireNonNull", "(", "session", ")", ";", "}", "</s>"]
["<s>", "protected", "SessionFactory", "getSessionFactory", "(", ")", "{", "return", "requireNonNull", "(", "sessionFactory", ")", ";", "}", "</s>"]
["<s>", "public", "UnitOfWorkApplicationListener", "(", ")", "{", "}", "</s>"]
["<s>", "public", "UnitOfWorkApplicationListener", "(", "String", "name", ",", "SessionFactory", "sessionFactory", ")", "{", "registerSessionFactory", "(", "name", ",", "sessionFactory", ")", ";", "}", "</s>"]
["<s>", "public", "void", "registerSessionFactory", "(", "String", "name", ",", "SessionFactory", "sessionFactory", ")", "{", "sessionFactories", ".", "put", "(", "name", ",", "sessionFactory", ")", ";", "}", "</s>"]
["<s>", "UnitOfWorkEventListener", "(", "ConcurrentMap", "<", "ResourceMethod", ",", "Optional", "<", "UnitOfWork", ">", ">", "methodMap", ",", "Map", "<", "String", ",", "SessionFactory", ">", "sessionFactories", ")", "{", "this", ".", "methodMap", "=", "methodMap", ";", "unitOfWorkAspect", "=", "new", "UnitOfWorkAspect", "(", "sessionFactories", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onEvent", "(", "RequestEvent", "event", ")", "{", "final", "RequestEvent", ".", "Type", "eventType", "=", "event", ".", "getType", "(", ")", ";", "if", "(", "eventType", "=", "=", "RequestEvent", ".", "Type", ".", "RESOURCE_METHOD_START", ")", "{", "Optional", "<", "UnitOfWork", ">", "unitOfWork", "=", "methodMap", ".", "computeIfAbsent", "(", "event", ".", "getUriInfo", "(", ")", ".", "getMatchedResourceMethod", "(", ")", ",", "UnitOfWorkEventListener", ":", ":", "registerUnitOfWorkAnnotations", ")", ";", "unitOfWorkAspect", ".", "beforeStart", "(", "unitOfWork", ".", "orElse", "(", "null", ")", ")", ";", "}", "else", "if", "(", "eventType", "=", "=", "RequestEvent", ".", "Type", ".", "RESP_FILTERS_START", ")", "{", "try", "{", "unitOfWorkAspect", ".", "afterEnd", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "MappableException", "(", "e", ")", ";", "}", "}", "else", "if", "(", "eventType", "=", "=", "RequestEvent", ".", "Type", ".", "ON_EXCEPTION", ")", "{", "unitOfWorkAspect", ".", "onError", "(", ")", ";", "}", "else", "if", "(", "eventType", "=", "=", "RequestEvent", ".", "Type", ".", "FINISHED", ")", "{", "unitOfWorkAspect", ".", "onFinish", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "Optional", "<", "UnitOfWork", ">", "registerUnitOfWorkAnnotations", "(", "ResourceMethod", "method", ")", "{", "UnitOfWork", "annotation", "=", "method", ".", "getInvocable", "(", ")", ".", "getDefinitionMethod", "(", ")", ".", "getAnnotation", "(", "UnitOfWork", ".", "class", ")", ";", "if", "(", "annotation", "=", "=", "null", ")", "{", "annotation", "=", "method", ".", "getInvocable", "(", ")", ".", "getHandlingMethod", "(", ")", ".", "getAnnotation", "(", "UnitOfWork", ".", "class", ")", ";", "}", "return", "Optional", ".", "ofNullable", "(", "annotation", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onEvent", "(", "ApplicationEvent", "event", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "RequestEventListener", "onRequest", "(", "RequestEvent", "event", ")", "{", "return", "new", "UnitOfWorkEventListener", "(", "methodMap", ",", "sessionFactories", ")", ";", "}", "</s>"]
["<s>", "public", "AbstractDAO", "(", "SessionFactory", "sessionFactory", ")", "{", "this", ".", "sessionFactory", "=", "requireNonNull", "(", "sessionFactory", ")", ";", "this", ".", "entityClass", "=", "Generics", ".", "getTypeParameter", "(", "getClass", "(", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "Session", "currentSession", "(", ")", "{", "return", "sessionFactory", ".", "getCurrentSession", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "protected", "Criteria", "criteria", "(", ")", "{", "return", "currentSession", "(", ")", ".", "createCriteria", "(", "entityClass", ")", ";", "}", "</s>"]
["<s>", "protected", "CriteriaQuery", "<", "E", ">", "criteriaQuery", "(", ")", "{", "return", "this", ".", "currentSession", "(", ")", ".", "getCriteriaBuilder", "(", ")", ".", "createQuery", "(", "getEntityClass", "(", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "Query", "namedQuery", "(", "String", "queryName", ")", "throws", "HibernateException", "{", "return", "currentSession", "(", ")", ".", "getNamedQuery", "(", "requireNonNull", "(", "queryName", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "Query", "<", "E", ">", "query", "(", "String", "queryString", ")", "{", "return", "currentSession", "(", ")", ".", "createQuery", "(", "requireNonNull", "(", "queryString", ")", ",", "getEntityClass", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "Class", "<", "E", ">", "getEntityClass", "(", ")", "{", "return", "(", "Class", "<", "E", ">", ")", "entityClass", ";", "}", "</s>"]
["<s>", "protected", "E", "uniqueResult", "(", "CriteriaQuery", "<", "E", ">", "criteriaQuery", ")", "throws", "HibernateException", "{", "return", "AbstractProducedQuery", ".", "uniqueElement", "(", "currentSession", "(", ")", ".", "createQuery", "(", "requireNonNull", "(", "criteriaQuery", ")", ")", ".", "getResultList", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "protected", "E", "uniqueResult", "(", "Criteria", "criteria", ")", "throws", "HibernateException", "{", "return", "(", "E", ")", "requireNonNull", "(", "criteria", ")", ".", "uniqueResult", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "E", "uniqueResult", "(", "Query", "<", "E", ">", "query", ")", "throws", "HibernateException", "{", "return", "requireNonNull", "(", "query", ")", ".", "uniqueResult", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "protected", "List", "<", "E", ">", "list", "(", "Criteria", "criteria", ")", "throws", "HibernateException", "{", "return", "requireNonNull", "(", "criteria", ")", ".", "list", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "List", "<", "E", ">", "list", "(", "CriteriaQuery", "<", "E", ">", "criteria", ")", "throws", "HibernateException", "{", "return", "currentSession", "(", ")", ".", "createQuery", "(", "requireNonNull", "(", "criteria", ")", ")", ".", "getResultList", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "List", "<", "E", ">", "list", "(", "Query", "<", "E", ">", "query", ")", "throws", "HibernateException", "{", "return", "requireNonNull", "(", "query", ")", ".", "list", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "protected", "E", "get", "(", "Serializable", "id", ")", "{", "return", "(", "E", ")", "currentSession", "(", ")", ".", "get", "(", "entityClass", ",", "requireNonNull", "(", "id", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "E", "persist", "(", "E", "entity", ")", "throws", "HibernateException", "{", "currentSession", "(", ")", ".", "saveOrUpdate", "(", "requireNonNull", "(", "entity", ")", ")", ";", "return", "entity", ";", "}", "</s>"]
["<s>", "protected", "<", "T", ">", "T", "initialize", "(", "T", "proxy", ")", "throws", "HibernateException", "{", "if", "(", "!", "Hibernate", ".", "isInitialized", "(", "proxy", ")", ")", "{", "Hibernate", ".", "initialize", "(", "proxy", ")", ";", "}", "return", "proxy", ";", "}", "</s>"]
["<s>", "public", "SessionFactoryManager", "(", "SessionFactory", "factory", ",", "ManagedDataSource", "dataSource", ")", "{", "this", ".", "factory", "=", "factory", ";", "this", ".", "dataSource", "=", "dataSource", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "ManagedDataSource", "getDataSource", "(", ")", "{", "return", "dataSource", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "start", "(", ")", "throws", "Exception", "{", "dataSource", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "stop", "(", ")", "throws", "Exception", "{", "factory", ".", "close", "(", ")", ";", "dataSource", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "ScanningHibernateBundle", "(", "String", "pckg", ")", "{", "this", "(", "pckg", ",", "new", "SessionFactoryFactory", "(", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "ScanningHibernateBundle", "(", "String", "pckg", ",", "SessionFactoryFactory", "sessionFactoryFactory", ")", "{", "this", "(", "new", "String", "[", "]", "{", "pckg", "}", ",", "sessionFactoryFactory", ")", ";", "}", "</s>"]
["<s>", "protected", "ScanningHibernateBundle", "(", "String", "[", "]", "pckgs", ",", "SessionFactoryFactory", "sessionFactoryFactory", ")", "{", "super", "(", "findEntityClassesFromDirectory", "(", "pckgs", ")", ",", "sessionFactoryFactory", ")", ";", "}", "</s>"]
["<s>", "public", "static", "ImmutableList", "<", "Class", "<", "?", ">", ">", "findEntityClassesFromDirectory", "(", "String", "[", "]", "pckgs", ")", "{", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "final", "AnnotationAcceptingListener", "asl", "=", "new", "AnnotationAcceptingListener", "(", "Entity", ".", "class", ")", ";", "try", "(", "final", "PackageNamesScanner", "scanner", "=", "new", "PackageNamesScanner", "(", "pckgs", ",", "true", ")", ")", "{", "while", "(", "scanner", ".", "hasNext", "(", ")", ")", "{", "final", "String", "next", "=", "scanner", ".", "next", "(", ")", ";", "if", "(", "asl", ".", "accept", "(", "next", ")", ")", "{", "try", "(", "final", "InputStream", "in", "=", "scanner", ".", "open", "(", ")", ")", "{", "asl", ".", "process", "(", "next", ",", "in", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", "+", "next", ")", ";", "}", "}", "}", "}", "final", "Builder", "<", "Class", "<", "?", ">", ">", "builder", "=", "ImmutableList", ".", "builder", "(", ")", ";", "for", "(", "Class", "<", "?", ">", "clazz", ":", "asl", ".", "getAnnotatedClasses", "(", ")", ")", "{", "builder", ".", "add", "(", "clazz", ")", ";", "}", "return", "builder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "HibernateBundle", "(", "Class", "<", "?", ">", "entity", ",", "Class", "<", "?", ">", ".", ".", ".", "entities", ")", "{", "this", "(", "ImmutableList", ".", "<", "Class", "<", "?", ">", ">", "builder", "(", ")", ".", "add", "(", "entity", ")", ".", "add", "(", "entities", ")", ".", "build", "(", ")", ",", "new", "SessionFactoryFactory", "(", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "HibernateBundle", "(", "ImmutableList", "<", "Class", "<", "?", ">", ">", "entities", ",", "SessionFactoryFactory", "sessionFactoryFactory", ")", "{", "this", ".", "entities", "=", "entities", ";", "this", ".", "sessionFactoryFactory", "=", "sessionFactoryFactory", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "final", "void", "initialize", "(", "Bootstrap", "<", "?", ">", "bootstrap", ")", "{", "bootstrap", ".", "getObjectMapper", "(", ")", ".", "registerModule", "(", "createHibernate5Module", "(", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "Hibernate5Module", "createHibernate5Module", "(", ")", "{", "Hibernate5Module", "module", "=", "new", "Hibernate5Module", "(", ")", ";", "if", "(", "lazyLoadingEnabled", ")", "{", "module", ".", "enable", "(", "Feature", ".", "FORCE_LAZY_LOADING", ")", ";", "}", "return", "module", ";", "}", "</s>"]
["<s>", "protected", "String", "name", "(", ")", "{", "return", "DEFAULT_NAME", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "final", "void", "run", "(", "T", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "final", "PooledDataSourceFactory", "dbConfig", "=", "getDataSourceFactory", "(", "configuration", ")", ";", "this", ".", "sessionFactory", "=", "requireNonNull", "(", "sessionFactoryFactory", ".", "build", "(", "this", ",", "environment", ",", "dbConfig", ",", "entities", ",", "name", "(", ")", ")", ")", ";", "registerUnitOfWorkListenerIfAbsent", "(", "environment", ")", ".", "registerSessionFactory", "(", "name", "(", ")", ",", "sessionFactory", ")", ";", "environment", ".", "healthChecks", "(", ")", ".", "register", "(", "name", "(", ")", ",", "new", "SessionFactoryHealthCheck", "(", "environment", ".", "getHealthCheckExecutorService", "(", ")", ",", "dbConfig", ".", "getValidationQueryTimeout", "(", ")", ".", "orElse", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:5>", ")", ")", ",", "sessionFactory", ",", "dbConfig", ".", "getValidationQuery", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "UnitOfWorkApplicationListener", "registerUnitOfWorkListenerIfAbsent", "(", "Environment", "environment", ")", "{", "for", "(", "Object", "singleton", ":", "environment", ".", "jersey", "(", ")", ".", "getResourceConfig", "(", ")", ".", "getSingletons", "(", ")", ")", "{", "if", "(", "singleton", "instanceof", "UnitOfWorkApplicationListener", ")", "{", "return", "(", "UnitOfWorkApplicationListener", ")", "singleton", ";", "}", "}", "final", "UnitOfWorkApplicationListener", "listener", "=", "new", "UnitOfWorkApplicationListener", "(", ")", ";", "environment", ".", "jersey", "(", ")", ".", "register", "(", "listener", ")", ";", "return", "listener", ";", "}", "</s>"]
["<s>", "public", "boolean", "isLazyLoadingEnabled", "(", ")", "{", "return", "lazyLoadingEnabled", ";", "}", "</s>"]
["<s>", "public", "void", "setLazyLoadingEnabled", "(", "boolean", "lazyLoadingEnabled", ")", "{", "this", ".", "lazyLoadingEnabled", "=", "lazyLoadingEnabled", ";", "}", "</s>"]
["<s>", "public", "SessionFactory", "getSessionFactory", "(", ")", "{", "return", "requireNonNull", "(", "sessionFactory", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "configure", "(", "org", ".", "hibernate", ".", "cfg", ".", "Configuration", "configuration", ")", "{", "}", "</s>"]
["<s>", "public", "SessionFactoryHealthCheck", "(", "SessionFactory", "sessionFactory", ",", "String", "validationQuery", ")", "{", "this", "(", "MoreExecutors", ".", "newDirectExecutorService", "(", ")", ",", "Duration", ".", "seconds", "(", "0", ")", ",", "sessionFactory", ",", "validationQuery", ")", ";", "}", "</s>"]
["<s>", "public", "SessionFactoryHealthCheck", "(", "ExecutorService", "executorService", ",", "Duration", "duration", ",", "SessionFactory", "sessionFactory", ",", "String", "validationQuery", ")", "{", "this", ".", "sessionFactory", "=", "sessionFactory", ";", "this", ".", "validationQuery", "=", "validationQuery", ";", "this", ".", "timeBoundHealthCheck", "=", "new", "TimeBoundHealthCheck", "(", "executorService", ",", "duration", ")", ";", "}", "</s>"]
["<s>", "public", "SessionFactory", "getSessionFactory", "(", ")", "{", "return", "sessionFactory", ";", "}", "</s>"]
["<s>", "public", "String", "getValidationQuery", "(", ")", "{", "return", "validationQuery", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Result", "check", "(", ")", "throws", "Exception", "{", "return", "timeBoundHealthCheck", ".", "check", "(", "(", ")", "-", ">", "{", "try", "(", "Session", "session", "=", "sessionFactory", ".", "openSession", "(", ")", ")", "{", "final", "Transaction", "txn", "=", "session", ".", "beginTransaction", "(", ")", ";", "try", "{", "session", ".", "createNativeQuery", "(", "validationQuery", ")", ".", "list", "(", ")", ";", "txn", ".", "commit", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "if", "(", "txn", ".", "getStatus", "(", ")", ".", "canRollback", "(", ")", ")", "{", "txn", ".", "rollback", "(", ")", ";", "}", "throw", "e", ";", "}", "}", "return", "Result", ".", "healthy", "(", ")", ";", "}", ")", ";", "}", "</s>"]
["<s>", "public", "SessionFactory", "build", "(", "HibernateBundle", "<", "?", ">", "bundle", ",", "Environment", "environment", ",", "PooledDataSourceFactory", "dbConfig", ",", "List", "<", "Class", "<", "?", ">", ">", "entities", ")", "{", "return", "build", "(", "bundle", ",", "environment", ",", "dbConfig", ",", "entities", ",", "DEFAULT_NAME", ")", ";", "}", "</s>"]
["<s>", "public", "SessionFactory", "build", "(", "HibernateBundle", "<", "?", ">", "bundle", ",", "Environment", "environment", ",", "PooledDataSourceFactory", "dbConfig", ",", "List", "<", "Class", "<", "?", ">", ">", "entities", ",", "String", "name", ")", "{", "final", "ManagedDataSource", "dataSource", "=", "dbConfig", ".", "build", "(", "environment", ".", "metrics", "(", ")", ",", "name", ")", ";", "return", "build", "(", "bundle", ",", "environment", ",", "dbConfig", ",", "dataSource", ",", "entities", ")", ";", "}", "</s>"]
["<s>", "public", "SessionFactory", "build", "(", "HibernateBundle", "<", "?", ">", "bundle", ",", "Environment", "environment", ",", "PooledDataSourceFactory", "dbConfig", ",", "ManagedDataSource", "dataSource", ",", "List", "<", "Class", "<", "?", ">", ">", "entities", ")", "{", "final", "ConnectionProvider", "provider", "=", "buildConnectionProvider", "(", "dataSource", ",", "dbConfig", ".", "getProperties", "(", ")", ")", ";", "final", "SessionFactory", "factory", "=", "buildSessionFactory", "(", "bundle", ",", "dbConfig", ",", "provider", ",", "dbConfig", ".", "getProperties", "(", ")", ",", "entities", ")", ";", "final", "SessionFactoryManager", "managedFactory", "=", "new", "SessionFactoryManager", "(", "factory", ",", "dataSource", ")", ";", "environment", ".", "lifecycle", "(", ")", ".", "manage", "(", "managedFactory", ")", ";", "return", "factory", ";", "}", "</s>"]
["<s>", "private", "ConnectionProvider", "buildConnectionProvider", "(", "DataSource", "dataSource", ",", "Map", "<", "String", ",", "String", ">", "properties", ")", "{", "final", "DatasourceConnectionProviderImpl", "connectionProvider", "=", "new", "DatasourceConnectionProviderImpl", "(", ")", ";", "connectionProvider", ".", "setDataSource", "(", "dataSource", ")", ";", "connectionProvider", ".", "configure", "(", "properties", ")", ";", "return", "connectionProvider", ";", "}", "</s>"]
["<s>", "private", "SessionFactory", "buildSessionFactory", "(", "HibernateBundle", "<", "?", ">", "bundle", ",", "PooledDataSourceFactory", "dbConfig", ",", "ConnectionProvider", "connectionProvider", ",", "Map", "<", "String", ",", "String", ">", "properties", ",", "List", "<", "Class", "<", "?", ">", ">", "entities", ")", "{", "final", "Configuration", "configuration", "=", "new", "Configuration", "(", ")", ";", "configuration", ".", "setProperty", "(", "AvailableSettings", ".", "CURRENT_SESSION_CONTEXT_CLASS", ",", "\"", "<STR_LIT>", "\"", ")", ";", "configuration", ".", "setProperty", "(", "AvailableSettings", ".", "USE_SQL_COMMENTS", ",", "Boolean", ".", "toString", "(", "dbConfig", ".", "isAutoCommentsEnabled", "(", ")", ")", ")", ";", "configuration", ".", "setProperty", "(", "AvailableSettings", ".", "USE_GET_GENERATED_KEYS", ",", "\"", "<STR_LIT>", "\"", ")", ";", "configuration", ".", "setProperty", "(", "AvailableSettings", ".", "GENERATE_STATISTICS", ",", "\"", "<STR_LIT>", "\"", ")", ";", "configuration", ".", "setProperty", "(", "AvailableSettings", ".", "USE_REFLECTION_OPTIMIZER", ",", "\"", "<STR_LIT>", "\"", ")", ";", "configuration", ".", "setProperty", "(", "AvailableSettings", ".", "ORDER_UPDATES", ",", "\"", "<STR_LIT>", "\"", ")", ";", "configuration", ".", "setProperty", "(", "AvailableSettings", ".", "ORDER_INSERTS", ",", "\"", "<STR_LIT>", "\"", ")", ";", "configuration", ".", "setProperty", "(", "AvailableSettings", ".", "USE_NEW_ID_GENERATOR_MAPPINGS", ",", "\"", "<STR_LIT>", "\"", ")", ";", "configuration", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "String", ">", "property", ":", "properties", ".", "entrySet", "(", ")", ")", "{", "configuration", ".", "setProperty", "(", "property", ".", "getKey", "(", ")", ",", "property", ".", "getValue", "(", ")", ")", ";", "}", "addAnnotatedClasses", "(", "configuration", ",", "entities", ")", ";", "bundle", ".", "configure", "(", "configuration", ")", ";", "final", "ServiceRegistry", "registry", "=", "new", "StandardServiceRegistryBuilder", "(", ")", ".", "addService", "(", "ConnectionProvider", ".", "class", ",", "connectionProvider", ")", ".", "applySettings", "(", "configuration", ".", "getProperties", "(", ")", ")", ".", "build", "(", ")", ";", "configure", "(", "configuration", ",", "registry", ")", ";", "return", "configuration", ".", "buildSessionFactory", "(", "registry", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "configure", "(", "Configuration", "configuration", ",", "ServiceRegistry", "registry", ")", "{", "}", "</s>"]
["<s>", "private", "void", "addAnnotatedClasses", "(", "Configuration", "configuration", ",", "Iterable", "<", "Class", "<", "?", ">", ">", "entities", ")", "{", "final", "SortedSet", "<", "String", ">", "entityClasses", "=", "new", "TreeSet", "<", ">", "(", ")", ";", "for", "(", "Class", "<", "?", ">", "klass", ":", "entities", ")", "{", "configuration", ".", "addAnnotatedClass", "(", "klass", ")", ";", "entityClasses", ".", "add", "(", "klass", ".", "getCanonicalName", "(", ")", ")", ";", "}", "LOGGER", ".", "info", "(", "\"", "<STR_LIT>", "\"", ",", "entityClasses", ")", ";", "}", "</s>"]
["<s>", "public", "UnitOfWorkAwareProxyFactory", "(", "String", "name", ",", "SessionFactory", "sessionFactory", ")", "{", "sessionFactories", "=", "ImmutableMap", ".", "of", "(", "name", ",", "sessionFactory", ")", ";", "}", "</s>"]
["<s>", "public", "UnitOfWorkAwareProxyFactory", "(", "HibernateBundle", "<", "?", ">", ".", ".", ".", "bundles", ")", "{", "final", "ImmutableMap", ".", "Builder", "<", "String", ",", "SessionFactory", ">", "sessionFactoriesBuilder", "=", "ImmutableMap", ".", "builder", "(", ")", ";", "for", "(", "HibernateBundle", "<", "?", ">", "bundle", ":", "bundles", ")", "{", "sessionFactoriesBuilder", ".", "put", "(", "bundle", ".", "name", "(", ")", ",", "bundle", ".", "getSessionFactory", "(", ")", ")", ";", "}", "sessionFactories", "=", "sessionFactoriesBuilder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "create", "(", "Class", "<", "T", ">", "clazz", ")", "{", "return", "create", "(", "clazz", ",", "new", "Class", "<", "?", ">", "[", "]", "{", "}", ",", "new", "Object", "[", "]", "{", "}", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "create", "(", "Class", "<", "T", ">", "clazz", ",", "Class", "<", "?", ">", "constructorParamType", ",", "Object", "constructorArguments", ")", "{", "return", "create", "(", "clazz", ",", "new", "Class", "<", "?", ">", "[", "]", "{", "constructorParamType", "}", ",", "new", "Object", "[", "]", "{", "constructorArguments", "}", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "<", "T", ">", "T", "create", "(", "Class", "<", "T", ">", "clazz", ",", "Class", "<", "?", ">", "[", "]", "constructorParamTypes", ",", "Object", "[", "]", "constructorArguments", ")", "{", "final", "ProxyFactory", "factory", "=", "new", "ProxyFactory", "(", ")", ";", "factory", ".", "setSuperclass", "(", "clazz", ")", ";", "try", "{", "final", "Proxy", "proxy", "=", "(", "Proxy", ")", "(", "constructorParamTypes", ".", "length", "=", "=", "0", "?", "factory", ".", "createClass", "(", ")", ".", "getConstructor", "(", ")", ".", "newInstance", "(", ")", ":", "factory", ".", "create", "(", "constructorParamTypes", ",", "constructorArguments", ")", ")", ";", "proxy", ".", "setHandler", "(", "(", "self", ",", "overridden", ",", "proceed", ",", "args", ")", "-", ">", "{", "final", "UnitOfWork", "unitOfWork", "=", "overridden", ".", "getAnnotation", "(", "UnitOfWork", ".", "class", ")", ";", "final", "UnitOfWorkAspect", "unitOfWorkAspect", "=", "newAspect", "(", "sessionFactories", ")", ";", "try", "{", "unitOfWorkAspect", ".", "beforeStart", "(", "unitOfWork", ")", ";", "Object", "result", "=", "proceed", ".", "invoke", "(", "self", ",", "args", ")", ";", "unitOfWorkAspect", ".", "afterEnd", "(", ")", ";", "return", "result", ";", "}", "catch", "(", "InvocationTargetException", "e", ")", "{", "unitOfWorkAspect", ".", "onError", "(", ")", ";", "throw", "e", ".", "getCause", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "unitOfWorkAspect", ".", "onError", "(", ")", ";", "throw", "e", ";", "}", "finally", "{", "unitOfWorkAspect", ".", "onFinish", "(", ")", ";", "}", "}", ")", ";", "return", "(", "T", ")", "proxy", ";", "}", "catch", "(", "NoSuchMethodException", "|", "InstantiationException", "|", "IllegalAccessException", "|", "InvocationTargetException", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", "+", "clazz", "+", "\"", "'", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "UnitOfWorkAspect", "newAspect", "(", ")", "{", "return", "new", "UnitOfWorkAspect", "(", "sessionFactories", ")", ";", "}", "</s>"]
["<s>", "public", "UnitOfWorkAspect", "newAspect", "(", "ImmutableMap", "<", "String", ",", "SessionFactory", ">", "sessionFactories", ")", "{", "return", "new", "UnitOfWorkAspect", "(", "sessionFactories", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "GraphiteReporter", ".", "Builder", "builder", "(", "MetricRegistry", "registry", ")", "{", "return", "builderSpy", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "GraphiteReporterFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "createDefaultFactory", "(", ")", "throws", "Exception", "{", "final", "GraphiteReporterFactory", "factory", "=", "new", "YamlConfigurationFactory", "<", ">", "(", "GraphiteReporterFactory", ".", "class", ",", "BaseValidator", ".", "newValidator", "(", ")", ",", "Jackson", ".", "newObjectMapper", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "assertThat", "(", "factory", ".", "getFrequency", "(", ")", ")", ".", "isEqualTo", "(", "Optional", ".", "empty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNoAddressResolutionForGraphite", "(", ")", "throws", "Exception", "{", "graphiteReporterFactory", ".", "build", "(", "new", "MetricRegistry", "(", ")", ")", ";", "final", "ArgumentCaptor", "<", "Graphite", ">", "argument", "=", "ArgumentCaptor", ".", "forClass", "(", "Graphite", ".", "class", ")", ";", "verify", "(", "builderSpy", ")", ".", "build", "(", "argument", ".", "capture", "(", ")", ")", ";", "final", "Graphite", "graphite", "=", "argument", ".", "getValue", "(", ")", ";", "assertThat", "(", "getField", "(", "graphite", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "getField", "(", "graphite", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "getField", "(", "graphite", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCorrectTransportForGraphiteUDP", "(", ")", "throws", "Exception", "{", "graphiteReporterFactory", ".", "setTransport", "(", "\"", "<STR_LIT>", "\"", ")", ";", "graphiteReporterFactory", ".", "build", "(", "new", "MetricRegistry", "(", ")", ")", ";", "final", "ArgumentCaptor", "<", "GraphiteUDP", ">", "argument", "=", "ArgumentCaptor", ".", "forClass", "(", "GraphiteUDP", ".", "class", ")", ";", "verify", "(", "builderSpy", ")", ".", "build", "(", "argument", ".", "capture", "(", ")", ")", ";", "final", "GraphiteUDP", "graphite", "=", "argument", ".", "getValue", "(", ")", ";", "assertThat", "(", "getField", "(", "graphite", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "getField", "(", "graphite", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "getField", "(", "graphite", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Object", "getField", "(", "GraphiteUDP", "graphite", ",", "String", "name", ")", "{", "try", "{", "return", "FieldUtils", ".", "getDeclaredField", "(", "GraphiteUDP", ".", "class", ",", "name", ",", "true", ")", ".", "get", "(", "graphite", ")", ";", "}", "catch", "(", "IllegalAccessException", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "Object", "getField", "(", "Graphite", "graphite", ",", "String", "name", ")", "{", "try", "{", "return", "FieldUtils", ".", "getDeclaredField", "(", "Graphite", ".", "class", ",", "name", ",", "true", ")", ".", "get", "(", "graphite", ")", ";", "}", "catch", "(", "IllegalAccessException", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getHost", "(", ")", "{", "return", "host", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setHost", "(", "String", "host", ")", "{", "this", ".", "host", "=", "host", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getPort", "(", ")", "{", "return", "port", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setPort", "(", "int", "port", ")", "{", "this", ".", "port", "=", "port", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getPrefix", "(", ")", "{", "return", "prefix", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setPrefix", "(", "String", "prefix", ")", "{", "this", ".", "prefix", "=", "prefix", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "String", "getTransport", "(", ")", "{", "return", "transport", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTransport", "(", "String", "transport", ")", "{", "this", ".", "transport", "=", "transport", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ScheduledReporter", "build", "(", "MetricRegistry", "registry", ")", "{", "GraphiteReporter", ".", "Builder", "builder", "=", "builder", "(", "registry", ")", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "transport", ")", ")", "{", "return", "builder", ".", "build", "(", "new", "GraphiteUDP", "(", "host", ",", "port", ")", ")", ";", "}", "else", "{", "return", "builder", ".", "build", "(", "new", "Graphite", "(", "host", ",", "port", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "protected", "GraphiteReporter", ".", "Builder", "builder", "(", "MetricRegistry", "registry", ")", "{", "return", "GraphiteReporter", ".", "forRegistry", "(", "registry", ")", ".", "convertDurationsTo", "(", "getDurationUnit", "(", ")", ")", ".", "convertRatesTo", "(", "getRateUnit", "(", ")", ")", ".", "filter", "(", "getFilter", "(", ")", ")", ".", "prefixedWith", "(", "getPrefix", "(", ")", ")", ".", "disabledMetricAttributes", "(", "getDisabledAttributes", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSetDefaultHttp2Cipher", "(", ")", "{", "http2ConnectorFactory", ".", "checkSupportedCipherSuites", "(", ")", ";", "assertThat", "(", "http2ConnectorFactory", ".", "getSupportedCipherSuites", "(", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCustomCiphersAreSupported", "(", ")", "{", "http2ConnectorFactory", ".", "setSupportedCipherSuites", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "http2ConnectorFactory", ".", "checkSupportedCipherSuites", "(", ")", ";", "assertThat", "(", "http2ConnectorFactory", ".", "getSupportedCipherSuites", "(", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testThrowExceptionIfDefaultCipherIsNotSet", "(", ")", "{", "http2ConnectorFactory", ".", "setSupportedCipherSuites", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThatIllegalArgumentException", "(", ")", ".", "isThrownBy", "(", "(", ")", "-", ">", "http2ConnectorFactory", ".", "checkSupportedCipherSuites", "(", ")", ")", ".", "withMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHttp2WithCustomCipher", "(", ")", "throws", "Exception", "{", "assertResponse", "(", "client", ".", "GET", "(", "\"", "<STR_LIT>", "\"", "+", "appRule", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", "Configuration", "configuration", ",", "Environment", "environment", ")", "throws", "Exception", "{", "environment", ".", "jersey", "(", ")", ".", "register", "(", "new", "FakeResource", "(", ")", ")", ";", "environment", ".", "healthChecks", "(", ")", ".", "register", "(", "\"", "<STR_LIT>", "\"", ",", "new", "HealthCheck", "(", ")", "{", "@", "Override", "protected", "Result", "check", "(", ")", "throws", "Exception", "{", "return", "Result", ".", "healthy", "(", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Result", "check", "(", ")", "throws", "Exception", "{", "return", "Result", ".", "healthy", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "public", "String", "get", "(", ")", "throws", "Exception", "{", "return", "HELLO_WORLD", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "sslContextFactory", ".", "setTrustStorePath", "(", "ResourceHelpers", ".", "resourceFilePath", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "sslContextFactory", ".", "setTrustStorePassword", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sslContextFactory", ".", "start", "(", ")", ";", "client", "=", "new", "HttpClient", "(", "new", "HttpClientTransportOverHTTP2", "(", "new", "HTTP2Client", "(", ")", ")", ",", "sslContextFactory", ")", ";", "client", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "client", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "static", "void", "assertResponse", "(", "ContentResponse", "response", ")", "{", "assertThat", "(", "response", ".", "getVersion", "(", ")", ")", ".", "isEqualTo", "(", "HttpVersion", ".", "HTTP_2", ")", ";", "assertThat", "(", "response", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "getContentAsString", "(", ")", ")", ".", "isEqualTo", "(", "FakeApplication", ".", "HELLO_WORLD", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "performManyAsyncRequests", "(", "HttpClient", "client", ",", "String", "url", ")", "throws", "InterruptedException", "{", "final", "int", "amount", "=", "<NUM_LIT:100>", ";", "final", "CountDownLatch", "latch", "=", "new", "CountDownLatch", "(", "amount", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "amount", ";", "i", "+", "+", ")", "{", "client", ".", "newRequest", "(", "url", ")", ".", "send", "(", "new", "BufferingResponseListener", "(", ")", "{", "@", "Override", "public", "void", "onComplete", "(", "Result", "result", ")", "{", "assertThat", "(", "result", ".", "getResponse", "(", ")", ".", "getVersion", "(", ")", ")", ".", "isEqualTo", "(", "HttpVersion", ".", "HTTP_2", ")", ";", "assertThat", "(", "result", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "getContentAsString", "(", "Charsets", ".", "UTF_8", ")", ")", ".", "isEqualTo", "(", "FakeApplication", ".", "HELLO_WORLD", ")", ";", "latch", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "}", "assertThat", "(", "latch", ".", "await", "(", "<NUM_LIT:30>", ",", "TimeUnit", ".", "SECONDS", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onComplete", "(", "Result", "result", ")", "{", "assertThat", "(", "result", ".", "getResponse", "(", ")", ".", "getVersion", "(", ")", ")", ".", "isEqualTo", "(", "HttpVersion", ".", "HTTP_2", ")", ";", "assertThat", "(", "result", ".", "getResponse", "(", ")", ".", "getStatus", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "getContentAsString", "(", "Charsets", ".", "UTF_8", ")", ")", ".", "isEqualTo", "(", "FakeApplication", ".", "HELLO_WORLD", ")", ";", "latch", ".", "countDown", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHttp2WithCustomCipher", "(", ")", "throws", "Exception", "{", "assertResponse", "(", "client", ".", "GET", "(", "\"", "<STR_LIT>", "\"", "+", "appRule", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHttp11", "(", ")", "throws", "Exception", "{", "final", "String", "hostname", "=", "\"", "<STR_LIT>", "\"", ";", "final", "int", "port", "=", "appRule", ".", "getLocalPort", "(", ")", ";", "final", "JerseyClient", "http11Client", "=", "new", "JerseyClientBuilder", "(", ")", ".", "sslContext", "(", "sslContextFactory", ".", "getSslContext", "(", ")", ")", ".", "build", "(", ")", ";", "final", "Response", "response", "=", "http11Client", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "hostname", "+", "\"", "<STR_LIT::>", "\"", "+", "port", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getHeaderString", "(", "HttpHeaders", ".", "CONTENT_TYPE", ")", ")", ".", "isEqualTo", "(", "MediaType", ".", "APPLICATION_JSON", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "FakeApplication", ".", "HELLO_WORLD", ")", ";", "http11Client", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHttp2", "(", ")", "throws", "Exception", "{", "assertResponse", "(", "client", ".", "GET", "(", "\"", "<STR_LIT>", "\"", "+", "appRule", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHttp2ManyRequests", "(", ")", "throws", "Exception", "{", "performManyAsyncRequests", "(", "client", ",", "\"", "<STR_LIT>", "\"", "+", "appRule", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "final", "HTTP2Client", "http2Client", "=", "new", "HTTP2Client", "(", ")", ";", "http2Client", ".", "setClientConnectionFactory", "(", "new", "HTTP2ClientConnectionFactory", "(", ")", ")", ";", "client", "=", "new", "HttpClient", "(", "new", "HttpClientTransportOverHTTP2", "(", "http2Client", ")", ",", "null", ")", ";", "client", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "client", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHttp11", "(", ")", "{", "final", "String", "hostname", "=", "\"", "<STR_LIT:127.0.0.1>", "\"", ";", "final", "int", "port", "=", "appRule", ".", "getLocalPort", "(", ")", ";", "final", "JerseyClient", "http11Client", "=", "new", "JerseyClientBuilder", "(", ")", ".", "build", "(", ")", ";", "final", "Response", "response", "=", "http11Client", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "hostname", "+", "\"", "<STR_LIT::>", "\"", "+", "port", "+", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", ")", ".", "get", "(", ")", ";", "assertThat", "(", "response", ".", "getHeaderString", "(", "HttpHeaders", ".", "CONTENT_TYPE", ")", ")", ".", "isEqualTo", "(", "MediaType", ".", "APPLICATION_JSON", ")", ";", "assertThat", "(", "response", ".", "readEntity", "(", "String", ".", "class", ")", ")", ".", "isEqualTo", "(", "FakeApplication", ".", "HELLO_WORLD", ")", ";", "http11Client", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHttp2c", "(", ")", "throws", "Exception", "{", "assertResponse", "(", "client", ".", "GET", "(", "\"", "<STR_LIT>", "\"", "+", "appRule", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHttp2cManyRequests", "(", ")", "throws", "Exception", "{", "performManyAsyncRequests", "(", "client", ",", "\"", "<STR_LIT>", "\"", "+", "appRule", ".", "getLocalPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getMaxConcurrentStreams", "(", ")", "{", "return", "maxConcurrentStreams", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxConcurrentStreams", "(", "int", "maxConcurrentStreams", ")", "{", "this", ".", "maxConcurrentStreams", "=", "maxConcurrentStreams", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getInitialStreamRecvWindow", "(", ")", "{", "return", "initialStreamRecvWindow", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setInitialStreamRecvWindow", "(", "int", "initialStreamRecvWindow", ")", "{", "this", ".", "initialStreamRecvWindow", "=", "initialStreamRecvWindow", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Connector", "build", "(", "Server", "server", ",", "MetricRegistry", "metrics", ",", "String", "name", ",", "@", "Nullable", "ThreadPool", "threadPool", ")", "{", "setSupportedProtocols", "(", "ImmutableList", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "checkSupportedCipherSuites", "(", ")", ";", "final", "HttpConfiguration", "httpConfig", "=", "buildHttpConfiguration", "(", ")", ";", "final", "HttpConnectionFactory", "http1", "=", "buildHttpConnectionFactory", "(", "httpConfig", ")", ";", "final", "HTTP2ServerConnectionFactory", "http2", "=", "new", "HTTP2ServerConnectionFactory", "(", "httpConfig", ")", ";", "http2", ".", "setMaxConcurrentStreams", "(", "maxConcurrentStreams", ")", ";", "http2", ".", "setInitialStreamRecvWindow", "(", "initialStreamRecvWindow", ")", ";", "final", "NegotiatingServerConnectionFactory", "alpn", "=", "new", "ALPNServerConnectionFactory", "(", "H2", ",", "H2_17", ")", ";", "alpn", ".", "setDefaultProtocol", "(", "HTTP_1_1", ")", ";", "final", "SslContextFactory", "sslContextFactory", "=", "configureSslContextFactory", "(", "new", "SslContextFactory", "(", ")", ")", ";", "sslContextFactory", ".", "addLifeCycleListener", "(", "logSslInfoOnStart", "(", "sslContextFactory", ")", ")", ";", "server", ".", "addBean", "(", "sslContextFactory", ")", ";", "server", ".", "addBean", "(", "new", "SslReload", "(", "sslContextFactory", ",", "this", ":", ":", "configureSslContextFactory", ")", ")", ";", "final", "SslConnectionFactory", "sslConnectionFactory", "=", "new", "SslConnectionFactory", "(", "sslContextFactory", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "buildConnector", "(", "server", ",", "new", "ScheduledExecutorScheduler", "(", ")", ",", "buildBufferPool", "(", ")", ",", "name", ",", "threadPool", ",", "new", "Jetty93InstrumentedConnectionFactory", "(", "sslConnectionFactory", ",", "metrics", ".", "timer", "(", "httpConnections", "(", ")", ")", ")", ",", "alpn", ",", "http2", ",", "http1", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "checkSupportedCipherSuites", "(", ")", "{", "if", "(", "getSupportedCipherSuites", "(", ")", "=", "=", "null", ")", "{", "setSupportedCipherSuites", "(", "ImmutableList", ".", "of", "(", "HTTP2_DEFAULT_CIPHER", ")", ")", ";", "}", "else", "if", "(", "!", "getSupportedCipherSuites", "(", ")", ".", "contains", "(", "HTTP2_DEFAULT_CIPHER", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "HTTP2_DEFAULT_CIPHER", ")", ";", "}", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getMaxConcurrentStreams", "(", ")", "{", "return", "maxConcurrentStreams", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMaxConcurrentStreams", "(", "int", "maxConcurrentStreams", ")", "{", "this", ".", "maxConcurrentStreams", "=", "maxConcurrentStreams", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "int", "getInitialStreamRecvWindow", "(", ")", "{", "return", "initialStreamRecvWindow", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setInitialStreamRecvWindow", "(", "int", "initialStreamRecvWindow", ")", "{", "this", ".", "initialStreamRecvWindow", "=", "initialStreamRecvWindow", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Connector", "build", "(", "Server", "server", ",", "MetricRegistry", "metrics", ",", "String", "name", ",", "@", "Nullable", "ThreadPool", "threadPool", ")", "{", "final", "HttpConfiguration", "httpConfig", "=", "buildHttpConfiguration", "(", ")", ";", "final", "HttpConnectionFactory", "http11", "=", "buildHttpConnectionFactory", "(", "httpConfig", ")", ";", "final", "HTTP2ServerConnectionFactory", "http2c", "=", "new", "HTTP2CServerConnectionFactory", "(", "httpConfig", ")", ";", "http2c", ".", "setMaxConcurrentStreams", "(", "maxConcurrentStreams", ")", ";", "http2c", ".", "setInitialStreamRecvWindow", "(", "initialStreamRecvWindow", ")", ";", "return", "buildConnector", "(", "server", ",", "new", "ScheduledExecutorScheduler", "(", ")", ",", "buildBufferPool", "(", ")", ",", "name", ",", "threadPool", ",", "new", "Jetty93InstrumentedConnectionFactory", "(", "http11", ",", "metrics", ".", "timer", "(", "httpConnections", "(", ")", ")", ")", ",", "http2c", ")", ";", "}", "</s>"]
["<s>", "@", "Parameterized", ".", "Parameters", "(", "name", "=", "\"", "<STR_LIT>", "\"", ")", "public", "static", "List", "<", "Object", "[", "]", ">", "data", "(", ")", "{", "return", "ImmutableList", ".", "of", "(", "new", "Object", "[", "]", "{", "EMPTY", ",", "EMPTY", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ",", "true", ",", "\"", "<STR_LIT:1>", "\"", "}", ",", "new", "Object", "[", "]", "{", "EMPTY", ",", "EMPTY", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ",", "true", ",", "\"", "<STR_LIT:1>", "\"", "}", ",", "new", "Object", "[", "]", "{", "EMPTY", ",", "EMPTY", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ",", "true", ",", "\"", "<STR_LIT:1>", "\"", "}", ",", "new", "Object", "[", "]", "{", "EMPTY", ",", "EMPTY", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ",", "true", ",", "\"", "<STR_LIT:1>", "\"", "}", ",", "new", "Object", "[", "]", "{", "EMPTY", ",", "EMPTY", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ",", "true", ",", "\"", "<STR_LIT:1>", "\"", "}", ",", "new", "Object", "[", "]", "{", "EMPTY", ",", "EMPTY", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ",", "true", ",", "\"", "<STR_LIT:1>", "\"", "}", ",", "new", "Object", "[", "]", "{", "EMPTY", ",", "EMPTY", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ",", "true", ",", "\"", "<STR_LIT:1>", "\"", "}", ",", "new", "Object", "[", "]", "{", "INCLUDES", ",", "EMPTY", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ",", "true", ",", "\"", "<STR_LIT:2>", "\"", "}", ",", "new", "Object", "[", "]", "{", "INCLUDES", ",", "EMPTY", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ",", "true", ",", "\"", "<STR_LIT:2>", "\"", "}", ",", "new", "Object", "[", "]", "{", "INCLUDES", ",", "EMPTY", ",", "\"", "<STR_LIT>", "\"", ",", "false", ",", "false", ",", "false", ",", "\"", "<STR_LIT:2>", "\"", "}", ",", "new", "Object", "[", "]", "{", "INCLUDES", ",", "EMPTY", ",", "\"", "<STR_LIT>", "\"", ",", "false", ",", "false", ",", "false", ",", "\"", "<STR_LIT:2>", "\"", "}", ",", "new", "Object", "[", "]", "{", "INCLUDES", ",", "EMPTY", ",", "\"", "<STR_LIT>", "\"", ",", "false", ",", "true", ",", "true", ",", "\"", "<STR_LIT:2>", "\"", "}", ",", "new", "Object", "[", "]", "{", "INCLUDES", ",", "EMPTY", ",", "\"", "<STR_LIT>", "\"", ",", "false", ",", "false", ",", "false", ",", "\"", "<STR_LIT:2>", "\"", "}", ",", "new", "Object", "[", "]", "{", "INCLUDES", ",", "EMPTY", ",", "\"", "<STR_LIT>", "\"", ",", "false", ",", "false", ",", "true", ",", "\"", "<STR_LIT:2>", "\"", "}", ",", "new", "Object", "[", "]", "{", "EMPTY", ",", "EXCLUDES", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ",", "true", ",", "\"", "<STR_LIT:3>", "\"", "}", ",", "new", "Object", "[", "]", "{", "EMPTY", ",", "EXCLUDES", ",", "\"", "<STR_LIT>", "\"", ",", "false", ",", "false", ",", "false", ",", "\"", "<STR_LIT:3>", "\"", "}", ",", "new", "Object", "[", "]", "{", "EMPTY", ",", "EXCLUDES", ",", "\"", "<STR_LIT>", "\"", ",", "false", ",", "false", ",", "false", ",", "\"", "<STR_LIT:3>", "\"", "}", ",", "new", "Object", "[", "]", "{", "EMPTY", ",", "EXCLUDES", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ",", "true", ",", "\"", "<STR_LIT:3>", "\"", "}", ",", "new", "Object", "[", "]", "{", "EMPTY", ",", "EXCLUDES", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ",", "true", ",", "\"", "<STR_LIT:3>", "\"", "}", ",", "new", "Object", "[", "]", "{", "EMPTY", ",", "EXCLUDES", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "false", ",", "false", ",", "\"", "<STR_LIT:3>", "\"", "}", ",", "new", "Object", "[", "]", "{", "EMPTY", ",", "EXCLUDES", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ",", "true", ",", "\"", "<STR_LIT:3>", "\"", "}", ",", "new", "Object", "[", "]", "{", "INCLUDES", ",", "EXCLUDES", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ",", "true", ",", "\"", "<STR_LIT:4>", "\"", "}", ",", "new", "Object", "[", "]", "{", "INCLUDES", ",", "EXCLUDES", ",", "\"", "<STR_LIT>", "\"", ",", "false", ",", "false", ",", "false", ",", "\"", "<STR_LIT:4>", "\"", "}", ",", "new", "Object", "[", "]", "{", "INCLUDES", ",", "EXCLUDES", ",", "\"", "<STR_LIT>", "\"", ",", "false", ",", "false", ",", "false", ",", "\"", "<STR_LIT:4>", "\"", "}", ",", "new", "Object", "[", "]", "{", "INCLUDES", ",", "EXCLUDES", ",", "\"", "<STR_LIT>", "\"", ",", "false", ",", "false", ",", "false", ",", "\"", "<STR_LIT:4>", "\"", "}", ",", "new", "Object", "[", "]", "{", "INCLUDES", ",", "EXCLUDES", ",", "\"", "<STR_LIT>", "\"", ",", "false", ",", "true", ",", "true", ",", "\"", "<STR_LIT:4>", "\"", "}", ",", "new", "Object", "[", "]", "{", "INCLUDES", ",", "EXCLUDES", ",", "\"", "<STR_LIT>", "\"", ",", "false", ",", "false", ",", "false", ",", "\"", "<STR_LIT:4>", "\"", "}", ",", "new", "Object", "[", "]", "{", "INCLUDES", ",", "EXCLUDES", ",", "\"", "<STR_LIT>", "\"", ",", "false", ",", "false", ",", "true", ",", "\"", "<STR_LIT:4>", "\"", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ScheduledReporter", "build", "(", "MetricRegistry", "registry", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultMatching", "(", ")", "{", "factory", ".", "setIncludes", "(", "includes", ")", ";", "factory", ".", "setExcludes", "(", "excludes", ")", ";", "factory", ".", "setUseRegexFilters", "(", "false", ")", ";", "factory", ".", "setUseSubstringMatching", "(", "false", ")", ";", "assertThat", "(", "factory", ".", "getFilter", "(", ")", ".", "matches", "(", "name", ",", "metric", ")", ")", ".", "overridingErrorMessage", "(", "msg", "+", "\"", "<STR_LIT>", "\"", ",", "name", ",", "expectedDefaultResult", ")", ".", "isEqualTo", "(", "expectedDefaultResult", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRegexMatching", "(", ")", "{", "factory", ".", "setIncludes", "(", "includes", ")", ";", "factory", ".", "setExcludes", "(", "excludes", ")", ";", "factory", ".", "setUseRegexFilters", "(", "true", ")", ";", "factory", ".", "setUseSubstringMatching", "(", "false", ")", ";", "assertThat", "(", "factory", ".", "getFilter", "(", ")", ".", "matches", "(", "name", ",", "metric", ")", ")", ".", "overridingErrorMessage", "(", "msg", "+", "\"", "<STR_LIT>", "\"", ",", "name", ",", "expectedRegexResult", ")", ".", "isEqualTo", "(", "expectedRegexResult", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "tesSubstringMatching", "(", ")", "{", "factory", ".", "setIncludes", "(", "includes", ")", ";", "factory", ".", "setExcludes", "(", "excludes", ")", ";", "factory", ".", "setUseRegexFilters", "(", "false", ")", ";", "factory", ".", "setUseSubstringMatching", "(", "true", ")", ";", "assertThat", "(", "factory", ".", "getFilter", "(", ")", ".", "matches", "(", "name", ",", "metric", ")", ")", ".", "overridingErrorMessage", "(", "msg", "+", "\"", "<STR_LIT>", "\"", ",", "name", ",", "expectedSubstringResult", ")", ".", "isEqualTo", "(", "expectedSubstringResult", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "ConsoleReporterFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "Slf4jReporterFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "objectMapper", ".", "getSubtypeResolver", "(", ")", ".", "registerSubtypes", "(", "ConsoleReporterFactory", ".", "class", ",", "CsvReporterFactory", ".", "class", ",", "Slf4jReporterFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isDiscoverable", "(", ")", "throws", "Exception", "{", "assertThat", "(", "new", "DiscoverableSubtypeResolver", "(", ")", ".", "getDiscoveredSubtypes", "(", ")", ")", ".", "contains", "(", "CsvReporterFactory", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "directoryCreatedOnStartup", "(", ")", "throws", "Exception", "{", "File", "dir", "=", "new", "File", "(", "\"", "<STR_LIT>", "\"", ")", ";", "dir", ".", "delete", "(", ")", ";", "MetricsFactory", "config", "=", "factory", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "config", ".", "configure", "(", "new", "LifecycleEnvironment", "(", ")", ",", "new", "MetricRegistry", "(", ")", ")", ";", "assertThat", "(", "dir", ".", "exists", "(", ")", ")", ".", "isEqualTo", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Parameters", "(", "name", "=", "\"", "<STR_LIT>", "\"", ")", "public", "static", "List", "<", "Object", "[", "]", ">", "data", "(", ")", "{", "return", "ImmutableList", ".", "of", "(", "new", "Object", "[", "]", "{", "NONE", ",", "NONE", ",", "ALL", "}", ",", "new", "Object", "[", "]", "{", "ALL", ",", "NONE", ",", "NONE", "}", ",", "new", "Object", "[", "]", "{", "ALL", ",", "EnumSet", ".", "of", "(", "MetricAttribute", ".", "STDDEV", ",", "MetricAttribute", ".", "M15_RATE", ")", ",", "EnumSet", ".", "of", "(", "MetricAttribute", ".", "STDDEV", ",", "MetricAttribute", ".", "M15_RATE", ")", "}", ",", "new", "Object", "[", "]", "{", "EnumSet", ".", "of", "(", "MetricAttribute", ".", "STDDEV", ",", "MetricAttribute", ".", "M15_RATE", ")", ",", "NONE", ",", "EnumSet", ".", "complementOf", "(", "EnumSet", ".", "of", "(", "MetricAttribute", ".", "STDDEV", ",", "MetricAttribute", ".", "M15_RATE", ")", ")", "}", ",", "new", "Object", "[", "]", "{", "EnumSet", ".", "of", "(", "MetricAttribute", ".", "STDDEV", ",", "MetricAttribute", ".", "M15_RATE", ",", "MetricAttribute", ".", "P95", ")", ",", "EnumSet", ".", "of", "(", "MetricAttribute", ".", "P95", ")", ",", "EnumSet", ".", "complementOf", "(", "EnumSet", ".", "of", "(", "MetricAttribute", ".", "STDDEV", ",", "MetricAttribute", ".", "M15_RATE", ")", ")", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ScheduledReporter", "build", "(", "MetricRegistry", "registry", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetDisabledAttributes", "(", ")", "{", "factory", ".", "setIncludesAttributes", "(", "includes", ")", ";", "factory", ".", "setExcludesAttributes", "(", "excludes", ")", ";", "assertThat", "(", "factory", ".", "getDisabledAttributes", "(", ")", ")", ".", "isEqualTo", "(", "expectedResult", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "objectMapper", ".", "getSubtypeResolver", "(", ")", ".", "registerSubtypes", "(", "ConsoleReporterFactory", ".", "class", ",", "CsvReporterFactory", ".", "class", ",", "Slf4jReporterFactory", ".", "class", ")", ";", "this", ".", "config", "=", "factory", ".", "build", "(", "new", "File", "(", "Resources", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasADefaultFrequency", "(", ")", "throws", "Exception", "{", "assertThat", "(", "config", ".", "getFrequency", "(", ")", ")", ".", "isEqualTo", "(", "Duration", ".", "seconds", "(", "<NUM_LIT:10>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasReporters", "(", ")", "throws", "Exception", "{", "CsvReporterFactory", "csvReporter", "=", "new", "CsvReporterFactory", "(", ")", ";", "csvReporter", ".", "setFile", "(", "new", "File", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "config", ".", "getReporters", "(", ")", ")", ".", "hasSize", "(", "<NUM_LIT:3>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canReadExcludedAndIncludedAttributes", "(", ")", "{", "assertThat", "(", "config", ".", "getReporters", "(", ")", ")", ".", "hasSize", "(", "<NUM_LIT:3>", ")", ";", "final", "ReporterFactory", "reporterFactory", "=", "config", ".", "getReporters", "(", ")", ".", "get", "(", "0", ")", ";", "assertThat", "(", "reporterFactory", ")", ".", "isInstanceOf", "(", "ConsoleReporterFactory", ".", "class", ")", ";", "final", "ConsoleReporterFactory", "consoleReporterFactory", "=", "(", "ConsoleReporterFactory", ")", "reporterFactory", ";", "assertThat", "(", "consoleReporterFactory", ".", "getIncludesAttributes", "(", ")", ")", ".", "isEqualTo", "(", "EnumSet", ".", "of", "(", "MetricAttribute", ".", "P50", ",", "MetricAttribute", ".", "P95", ",", "MetricAttribute", ".", "P98", ",", "MetricAttribute", ".", "P99", ")", ")", ";", "assertThat", "(", "consoleReporterFactory", ".", "getExcludesAttributes", "(", ")", ")", ".", "isEqualTo", "(", "EnumSet", ".", "of", "(", "MetricAttribute", ".", "P98", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canReadDefaultExcludedAndIncludedAttributes", "(", ")", "{", "assertThat", "(", "config", ".", "getReporters", "(", ")", ")", ".", "hasSize", "(", "<NUM_LIT:3>", ")", ";", "final", "ReporterFactory", "reporterFactory", "=", "config", ".", "getReporters", "(", ")", ".", "get", "(", "1", ")", ";", "assertThat", "(", "reporterFactory", ")", ".", "isInstanceOf", "(", "CsvReporterFactory", ".", "class", ")", ";", "final", "CsvReporterFactory", "csvReporterFactory", "=", "(", "CsvReporterFactory", ")", "reporterFactory", ";", "assertThat", "(", "csvReporterFactory", ".", "getIncludesAttributes", "(", ")", ")", ".", "isEqualTo", "(", "EnumSet", ".", "allOf", "(", "MetricAttribute", ".", "class", ")", ")", ";", "assertThat", "(", "csvReporterFactory", ".", "getExcludesAttributes", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getLoggerName", "(", ")", "{", "return", "loggerName", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "setLoggerName", "(", "String", "loggerName", ")", "{", "this", ".", "loggerName", "=", "loggerName", ";", "}", "</s>"]
["<s>", "public", "Logger", "getLogger", "(", ")", "{", "return", "LoggerFactory", ".", "getLogger", "(", "getLoggerName", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "String", "getMarkerName", "(", ")", "{", "return", "markerName", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setMarkerName", "(", "@", "Nullable", "String", "markerName", ")", "{", "this", ".", "markerName", "=", "markerName", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ScheduledReporter", "build", "(", "MetricRegistry", "registry", ")", "{", "final", "Slf4jReporter", ".", "Builder", "builder", "=", "Slf4jReporter", ".", "forRegistry", "(", "registry", ")", ".", "convertDurationsTo", "(", "getDurationUnit", "(", ")", ")", ".", "convertRatesTo", "(", "getRateUnit", "(", ")", ")", ".", "filter", "(", "getFilter", "(", ")", ")", ".", "outputTo", "(", "getLogger", "(", ")", ")", ";", "if", "(", "markerName", "!", "=", "null", ")", "{", "builder", ".", "markWith", "(", "MarkerFactory", ".", "getMarker", "(", "markerName", ")", ")", ";", "}", "return", "builder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "containsMatch", "(", "ImmutableSet", "<", "String", ">", "matchExpressions", ",", "String", "metricName", ")", "{", "for", "(", "String", "matchExpression", ":", "matchExpressions", ")", "{", "if", "(", "metricName", ".", "contains", "(", "matchExpression", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "boolean", "containsMatch", "(", "ImmutableSet", "<", "String", ">", "matchExpressions", ",", "String", "metricName", ")", ";", "</s>"]
["<s>", "public", "TimeUnit", "getDurationUnit", "(", ")", "{", "return", "durationUnit", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setDurationUnit", "(", "TimeUnit", "durationUnit", ")", "{", "this", ".", "durationUnit", "=", "durationUnit", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "TimeUnit", "getRateUnit", "(", ")", "{", "return", "rateUnit", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setRateUnit", "(", "final", "TimeUnit", "rateUnit", ")", "{", "this", ".", "rateUnit", "=", "rateUnit", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "ImmutableSet", "<", "String", ">", "getIncludes", "(", ")", "{", "return", "includes", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setIncludes", "(", "ImmutableSet", "<", "String", ">", "includes", ")", "{", "this", ".", "includes", "=", "includes", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "ImmutableSet", "<", "String", ">", "getExcludes", "(", ")", "{", "return", "excludes", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setExcludes", "(", "ImmutableSet", "<", "String", ">", "excludes", ")", "{", "this", ".", "excludes", "=", "excludes", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "JsonProperty", "public", "Optional", "<", "Duration", ">", "getFrequency", "(", ")", "{", "return", "frequency", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setFrequency", "(", "Optional", "<", "Duration", ">", "frequency", ")", "{", "this", ".", "frequency", "=", "frequency", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getUseRegexFilters", "(", ")", "{", "return", "useRegexFilters", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setUseRegexFilters", "(", "boolean", "useRegexFilters", ")", "{", "this", ".", "useRegexFilters", "=", "useRegexFilters", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "boolean", "getUseSubstringMatching", "(", ")", "{", "return", "useSubstringMatching", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setUseSubstringMatching", "(", "boolean", "useSubstringMatching", ")", "{", "this", ".", "useSubstringMatching", "=", "useSubstringMatching", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "EnumSet", "<", "MetricAttribute", ">", "getExcludesAttributes", "(", ")", "{", "return", "excludesAttributes", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setExcludesAttributes", "(", "EnumSet", "<", "MetricAttribute", ">", "excludesAttributes", ")", "{", "this", ".", "excludesAttributes", "=", "excludesAttributes", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "EnumSet", "<", "MetricAttribute", ">", "getIncludesAttributes", "(", ")", "{", "return", "includesAttributes", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setIncludesAttributes", "(", "EnumSet", "<", "MetricAttribute", ">", "includesAttributes", ")", "{", "this", ".", "includesAttributes", "=", "includesAttributes", ";", "}", "</s>"]
["<s>", "@", "JsonIgnore", "public", "MetricFilter", "getFilter", "(", ")", "{", "final", "StringMatchingStrategy", "stringMatchingStrategy", "=", "getUseRegexFilters", "(", ")", "?", "REGEX_STRING_MATCHING_STRATEGY", ":", "(", "getUseSubstringMatching", "(", ")", "?", "SUBSTRING_MATCHING_STRATEGY", ":", "DEFAULT_STRING_MATCHING_STRATEGY", ")", ";", "return", "(", "name", ",", "metric", ")", "-", ">", "{", "return", "!", "stringMatchingStrategy", ".", "containsMatch", "(", "getExcludes", "(", ")", ",", "name", ")", "&", "&", "(", "getIncludes", "(", ")", ".", "isEmpty", "(", ")", "|", "|", "stringMatchingStrategy", ".", "containsMatch", "(", "getIncludes", "(", ")", ",", "name", ")", ")", ";", "}", ";", "}", "</s>"]
["<s>", "protected", "Set", "<", "MetricAttribute", ">", "getDisabledAttributes", "(", ")", "{", "return", "ImmutableSet", ".", "copyOf", "(", "Sets", ".", "union", "(", "Sets", ".", "difference", "(", "EnumSet", ".", "allOf", "(", "MetricAttribute", ".", "class", ")", ",", "getIncludesAttributes", "(", ")", ")", ",", "getExcludesAttributes", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "ImmutableList", "<", "ReporterFactory", ">", "getReporters", "(", ")", "{", "return", "reporters", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setReporters", "(", "ImmutableList", "<", "ReporterFactory", ">", "reporters", ")", "{", "this", ".", "reporters", "=", "reporters", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Duration", "getFrequency", "(", ")", "{", "return", "frequency", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setFrequency", "(", "Duration", "frequency", ")", "{", "this", ".", "frequency", "=", "frequency", ";", "}", "</s>"]
["<s>", "public", "void", "configure", "(", "LifecycleEnvironment", "environment", ",", "MetricRegistry", "registry", ")", "{", "for", "(", "ReporterFactory", "reporter", ":", "reporters", ")", "{", "try", "{", "final", "ScheduledReporterManager", "manager", "=", "new", "ScheduledReporterManager", "(", "reporter", ".", "build", "(", "registry", ")", ",", "reporter", ".", "getFrequency", "(", ")", ".", "orElseGet", "(", "this", ":", ":", "getFrequency", ")", ")", ";", "environment", ".", "manage", "(", "manager", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "LOGGER", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "MoreObjects", ".", "toStringHelper", "(", "this", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "frequency", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "reporters", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "Optional", "<", "Duration", ">", "getFrequency", "(", ")", ";", "</s>"]
["<s>", "ScheduledReporter", "build", "(", "MetricRegistry", "registry", ")", ";", "</s>"]
["<s>", "@", "JsonProperty", "@", "Nullable", "public", "File", "getFile", "(", ")", "{", "return", "file", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setFile", "(", "@", "Nullable", "File", "file", ")", "{", "this", ".", "file", "=", "file", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ScheduledReporter", "build", "(", "MetricRegistry", "registry", ")", "{", "final", "File", "file", "=", "requireNonNull", "(", "this", ".", "file", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "boolean", "creation", "=", "file", ".", "mkdirs", "(", ")", ";", "if", "(", "!", "creation", "&", "&", "!", "file", ".", "exists", "(", ")", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", "+", "file", ".", "getAbsolutePath", "(", ")", ")", ";", "}", "return", "CsvReporter", ".", "forRegistry", "(", "registry", ")", ".", "convertDurationsTo", "(", "getDurationUnit", "(", ")", ")", ".", "convertRatesTo", "(", "getRateUnit", "(", ")", ")", ".", "filter", "(", "getFilter", "(", ")", ")", ".", "formatFor", "(", "getLocale", "(", ")", ")", ".", "build", "(", "getFile", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "containsMatch", "(", "ImmutableSet", "<", "String", ">", "matchExpressions", ",", "String", "metricName", ")", "{", "return", "matchExpressions", ".", "contains", "(", "metricName", ")", ";", "}", "</s>"]
["<s>", "public", "ScheduledReporterManager", "(", "ScheduledReporter", "reporter", ",", "Duration", "period", ")", "{", "this", ".", "reporter", "=", "reporter", ";", "this", ".", "period", "=", "period", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "start", "(", ")", "throws", "Exception", "{", "reporter", ".", "start", "(", "period", ".", "getQuantity", "(", ")", ",", "period", ".", "getUnit", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "stop", "(", ")", "throws", "Exception", "{", "reporter", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "RegexStringMatchingStrategy", "(", ")", "{", "patternCache", "=", "CacheBuilder", ".", "newBuilder", "(", ")", ".", "expireAfterWrite", "(", "1", ",", "TimeUnit", ".", "HOURS", ")", ".", "build", "(", "new", "CacheLoader", "<", "String", ",", "Pattern", ">", "(", ")", "{", "@", "Override", "public", "Pattern", "load", "(", "String", "regex", ")", "throws", "Exception", "{", "return", "Pattern", ".", "compile", "(", "regex", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Pattern", "load", "(", "String", "regex", ")", "throws", "Exception", "{", "return", "Pattern", ".", "compile", "(", "regex", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "containsMatch", "(", "ImmutableSet", "<", "String", ">", "matchExpressions", ",", "String", "metricName", ")", "{", "for", "(", "String", "regexExpression", ":", "matchExpressions", ")", "{", "if", "(", "patternCache", ".", "getUnchecked", "(", "regexExpression", ")", ".", "matcher", "(", "metricName", ")", ".", "matches", "(", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "Locale", "getLocale", "(", ")", "{", "return", "locale", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setLocale", "(", "Locale", "locale", ")", "{", "this", ".", "locale", "=", "locale", ";", "}", "</s>"]
["<s>", "ConsoleStream", "(", "PrintStream", "printStream", ")", "{", "this", ".", "printStream", "=", "printStream", ";", "}", "</s>"]
["<s>", "public", "PrintStream", "get", "(", ")", "{", "return", "printStream", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "TimeZone", "getTimeZone", "(", ")", "{", "return", "timeZone", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setTimeZone", "(", "TimeZone", "timeZone", ")", "{", "this", ".", "timeZone", "=", "timeZone", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "ConsoleStream", "getOutput", "(", ")", "{", "return", "output", ";", "}", "</s>"]
["<s>", "@", "JsonProperty", "public", "void", "setOutput", "(", "ConsoleStream", "stream", ")", "{", "this", ".", "output", "=", "stream", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ScheduledReporter", "build", "(", "MetricRegistry", "registry", ")", "{", "return", "ConsoleReporter", ".", "forRegistry", "(", "registry", ")", ".", "convertDurationsTo", "(", "getDurationUnit", "(", ")", ")", ".", "convertRatesTo", "(", "getRateUnit", "(", ")", ")", ".", "filter", "(", "getFilter", "(", ")", ")", ".", "formattedFor", "(", "getLocale", "(", ")", ")", ".", "formattedFor", "(", "getTimeZone", "(", ")", ")", ".", "outputTo", "(", "getOutput", "(", ")", ".", "get", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
