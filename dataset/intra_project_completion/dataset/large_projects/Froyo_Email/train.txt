["<s>", "public", "void", "disable_testNoDuplicates", "(", ")", "{", "String", "[", "]", "[", "]", "allTags", "=", "Tags", ".", "pages", ";", "HashMap", "<", "String", ",", "Boolean", ">", "map", "=", "new", "HashMap", "<", "String", ",", "Boolean", ">", "(", ")", ";", "for", "(", "String", "[", "]", "page", ":", "allTags", ")", "{", "for", "(", "String", "tag", ":", "page", ")", "{", "assertTrue", "(", "tag", ",", "!", "map", ".", "containsKey", "(", "tag", ")", ")", ";", "map", ".", "put", "(", "tag", ",", "true", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "InputStream", "getTestInputStream", "(", ")", "{", "return", "new", "ByteArrayInputStream", "(", "new", "byte", "[", "]", "{", "0", ",", "0", ",", "0", ",", "0", ",", "0", "}", ")", ";", "}", "</s>"]
["<s>", "EasSyncService", "getTestService", "(", ")", "{", "Account", "account", "=", "new", "Account", "(", ")", ";", "account", ".", "mId", "=", "-", "1", ";", "Mailbox", "mailbox", "=", "new", "Mailbox", "(", ")", ";", "mailbox", ".", "mId", "=", "-", "1", ";", "EasSyncService", "service", "=", "new", "EasSyncService", "(", ")", ";", "service", ".", "mContext", "=", "getContext", "(", ")", ";", "service", ".", "mMailbox", "=", "mailbox", ";", "service", ".", "mAccount", "=", "account", ";", "return", "service", ";", "}", "</s>"]
["<s>", "EmailSyncAdapter", "getTestSyncAdapter", "(", ")", "{", "EasSyncService", "service", "=", "getTestService", "(", ")", ";", "EmailSyncAdapter", "adapter", "=", "new", "EmailSyncAdapter", "(", "service", ".", "mMailbox", ",", "service", ")", ";", "return", "adapter", ";", "}", "</s>"]
["<s>", "public", "void", "testGetMimeTypeFromFileName", "(", ")", "throws", "IOException", "{", "EasSyncService", "service", "=", "getTestService", "(", ")", ";", "EmailSyncAdapter", "adapter", "=", "new", "EmailSyncAdapter", "(", "service", ".", "mMailbox", ",", "service", ")", ";", "EasEmailSyncParser", "p", "=", "adapter", ".", "new", "EasEmailSyncParser", "(", "getTestInputStream", "(", ")", ",", "adapter", ")", ";", "String", "mimeType", "=", "p", ".", "getMimeTypeFromFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mimeType", ")", ";", "mimeType", "=", "p", ".", "getMimeTypeFromFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mimeType", ")", ";", "mimeType", "=", "p", ".", "getMimeTypeFromFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mimeType", ")", ";", "mimeType", "=", "p", ".", "getMimeTypeFromFileName", "(", "\"", "<STR_LIT:.>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mimeType", ")", ";", "mimeType", "=", "p", ".", "getMimeTypeFromFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mimeType", ")", ";", "mimeType", "=", "p", ".", "getMimeTypeFromFileName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mimeType", ")", ";", "mimeType", "=", "p", ".", "getMimeTypeFromFileName", "(", "\"", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mimeType", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testFormatDateTime", "(", ")", "throws", "IOException", "{", "EmailSyncAdapter", "adapter", "=", "getTestSyncAdapter", "(", ")", ";", "GregorianCalendar", "calendar", "=", "new", "GregorianCalendar", "(", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT:GMT>", "\"", ")", ")", ";", "calendar", ".", "set", "(", "<NUM_LIT>", ",", "<NUM_LIT:11>", ",", "<NUM_LIT:11>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT:20>", ")", ";", "String", "date", "=", "adapter", ".", "formatDateTime", "(", "calendar", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "date", ")", ";", "calendar", ".", "clear", "(", ")", ";", "calendar", ".", "set", "(", "<NUM_LIT>", ",", "0", ",", "<NUM_LIT:2>", ",", "<NUM_LIT>", ",", "0", ",", "1", ")", ";", "date", "=", "adapter", ".", "formatDateTime", "(", "calendar", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "date", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mMockContext", "=", "getContext", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCreateUniqueFile", "(", ")", "throws", "IOException", "{", "EasSyncService", "svc", "=", "new", "EasSyncService", "(", ")", ";", "svc", ".", "mContext", "=", "mMockContext", ";", "try", "{", "String", "fileName", "=", "\"", "<STR_LIT>", "\"", ";", "File", "uniqueFile", "=", "svc", ".", "createUniqueFileInternal", "(", "null", ",", "fileName", ")", ";", "assertEquals", "(", "fileName", ",", "uniqueFile", ".", "getName", "(", ")", ")", ";", "if", "(", "uniqueFile", ".", "createNewFile", "(", ")", ")", "{", "uniqueFile", "=", "svc", ".", "createUniqueFileInternal", "(", "null", ",", "fileName", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "uniqueFile", ".", "getName", "(", ")", ")", ";", "if", "(", "uniqueFile", ".", "createNewFile", "(", ")", ")", "{", "uniqueFile", "=", "svc", ".", "createUniqueFileInternal", "(", "null", ",", "fileName", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "uniqueFile", ".", "getName", "(", ")", ")", ";", "}", "}", "fileName", "=", "\"", "<STR_LIT>", "\"", ";", "uniqueFile", "=", "svc", ".", "createUniqueFileInternal", "(", "null", ",", "fileName", ")", ";", "assertEquals", "(", "fileName", ",", "uniqueFile", ".", "getName", "(", ")", ")", ";", "if", "(", "uniqueFile", ".", "createNewFile", "(", ")", ")", "{", "uniqueFile", "=", "svc", ".", "createUniqueFileInternal", "(", "null", ",", "fileName", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "uniqueFile", ".", "getName", "(", ")", ")", ";", "}", "}", "finally", "{", "File", "directory", "=", "getContext", "(", ")", ".", "getFilesDir", "(", ")", ";", "String", "[", "]", "fileNames", "=", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ";", "int", "length", "=", "fileNames", ".", "length", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "length", ";", "i", "+", "+", ")", "{", "File", "file", "=", "new", "File", "(", "directory", ",", "fileNames", "[", "i", "]", ")", ";", "if", "(", "file", ".", "exists", "(", ")", ")", "{", "file", ".", "delete", "(", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mPreferences", "=", "Preferences", ".", "getPreferences", "(", "getContext", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "tearDown", "(", ")", "throws", "Exception", "{", "super", ".", "tearDown", "(", ")", ";", "if", "(", "mAccount", "!", "=", "null", "&", "&", "mPreferences", "!", "=", "null", ")", "{", "mAccount", ".", "delete", "(", "mPreferences", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testGetAccountByContentUri", "(", ")", "{", "createTestAccount", "(", ")", ";", "Uri", "testAccountUri", "=", "mAccount", ".", "getContentUri", "(", ")", ";", "Account", "lookup", "=", "mPreferences", ".", "getAccountByContentUri", "(", "testAccountUri", ")", ";", "assertEquals", "(", "mAccount", ",", "lookup", ")", ";", "testAccountUri", "=", "Uri", ".", "parse", "(", "\"", "<STR_LIT>", "\"", "+", "mAccount", ".", "getUuid", "(", ")", ")", ";", "lookup", "=", "mPreferences", ".", "getAccountByContentUri", "(", "testAccountUri", ")", ";", "assertNull", "(", "lookup", ")", ";", "testAccountUri", "=", "Uri", ".", "parse", "(", "\"", "<STR_LIT>", "\"", "+", "mAccount", ".", "getUuid", "(", ")", ")", ";", "lookup", "=", "mPreferences", ".", "getAccountByContentUri", "(", "testAccountUri", ")", ";", "assertNull", "(", "lookup", ")", ";", "testAccountUri", "=", "Uri", ".", "parse", "(", "\"", "<STR_LIT>", "\"", "+", "mAccount", ".", "getUuid", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "lookup", "=", "mPreferences", ".", "getAccountByContentUri", "(", "testAccountUri", ")", ";", "assertNull", "(", "lookup", ")", ";", "}", "</s>"]
["<s>", "private", "void", "createTestAccount", "(", ")", "{", "mAccount", "=", "new", "Account", "(", "getContext", "(", ")", ")", ";", "mAccount", ".", "save", "(", "mPreferences", ")", ";", "mUuid", "=", "mAccount", ".", "getUuid", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ControllerProviderOpsTests", "(", ")", "{", "super", "(", "EmailProvider", ".", "class", ",", "EmailProvider", ".", "EMAIL_AUTHORITY", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mProviderContext", "=", "getMockContext", "(", ")", ";", "mContext", "=", "getContext", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "super", ".", "tearDown", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "TestController", "(", "Context", "providerContext", ",", "Context", "systemContext", ")", "{", "super", "(", "systemContext", ")", ";", "setProviderContext", "(", "providerContext", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetMailboxServerName", "(", ")", "{", "Controller", "ct", "=", "new", "TestController", "(", "mProviderContext", ",", "mContext", ")", ";", "assertEquals", "(", "\"", "\"", ",", "ct", ".", "getMailboxServerName", "(", "-", "1", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "ct", ".", "getMailboxServerName", "(", "Mailbox", ".", "TYPE_INBOX", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "ct", ".", "getMailboxServerName", "(", "Mailbox", ".", "TYPE_OUTBOX", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "ct", ".", "getMailboxServerName", "(", "Mailbox", ".", "TYPE_TRASH", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "ct", ".", "getMailboxServerName", "(", "Mailbox", ".", "TYPE_SENT", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "ct", ".", "getMailboxServerName", "(", "Mailbox", ".", "TYPE_JUNK", ")", ")", ";", "Locale", "savedLocale", "=", "Locale", ".", "getDefault", "(", ")", ";", "Locale", ".", "setDefault", "(", "Locale", ".", "FRANCE", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "ct", ".", "getMailboxServerName", "(", "Mailbox", ".", "TYPE_INBOX", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "ct", ".", "getMailboxServerName", "(", "Mailbox", ".", "TYPE_OUTBOX", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "ct", ".", "getMailboxServerName", "(", "Mailbox", ".", "TYPE_TRASH", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "ct", ".", "getMailboxServerName", "(", "Mailbox", ".", "TYPE_SENT", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "ct", ".", "getMailboxServerName", "(", "Mailbox", ".", "TYPE_JUNK", ")", ")", ";", "Locale", ".", "setDefault", "(", "savedLocale", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCreateMailbox", "(", ")", "{", "Account", "account", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mProviderContext", ")", ";", "long", "accountId", "=", "account", ".", "mId", ";", "long", "oldBoxId", "=", "Mailbox", ".", "findMailboxOfType", "(", "mProviderContext", ",", "accountId", ",", "Mailbox", ".", "TYPE_DRAFTS", ")", ";", "assertEquals", "(", "Mailbox", ".", "NO_MAILBOX", ",", "oldBoxId", ")", ";", "Controller", "ct", "=", "new", "TestController", "(", "mProviderContext", ",", "mContext", ")", ";", "ct", ".", "createMailbox", "(", "accountId", ",", "Mailbox", ".", "TYPE_DRAFTS", ")", ";", "long", "boxId", "=", "Mailbox", ".", "findMailboxOfType", "(", "mProviderContext", ",", "accountId", ",", "Mailbox", ".", "TYPE_DRAFTS", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "boxId", "!", "=", "Mailbox", ".", "NO_MAILBOX", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testFindOrCreateMailboxOfType", "(", ")", "{", "Account", "account", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mProviderContext", ")", ";", "long", "accountId", "=", "account", ".", "mId", ";", "Mailbox", "box", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT>", "\"", ",", "accountId", ",", "false", ",", "mProviderContext", ")", ";", "final", "int", "boxType", "=", "Mailbox", ".", "TYPE_TRASH", ";", "box", ".", "mType", "=", "boxType", ";", "box", ".", "save", "(", "mProviderContext", ")", ";", "long", "boxId", "=", "box", ".", "mId", ";", "Controller", "ct", "=", "new", "TestController", "(", "mProviderContext", ",", "mContext", ")", ";", "long", "testBoxId", "=", "ct", ".", "findOrCreateMailboxOfType", "(", "accountId", ",", "boxType", ")", ";", "assertEquals", "(", "boxId", ",", "testBoxId", ")", ";", "long", "boxId2", "=", "ct", ".", "findOrCreateMailboxOfType", "(", "accountId", ",", "Mailbox", ".", "TYPE_DRAFTS", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "boxId2", "!", "=", "Mailbox", ".", "NO_MAILBOX", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "testBoxId", "!", "=", "boxId2", ")", ";", "long", "boxId3", "=", "ct", ".", "findOrCreateMailboxOfType", "(", "accountId", ",", "Mailbox", ".", "TYPE_DRAFTS", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "boxId3", ",", "boxId2", ")", ";", "assertEquals", "(", "Mailbox", ".", "NO_MAILBOX", ",", "ct", ".", "findOrCreateMailboxOfType", "(", "-", "1", ",", "Mailbox", ".", "TYPE_DRAFTS", ")", ")", ";", "assertEquals", "(", "Mailbox", ".", "NO_MAILBOX", ",", "ct", ".", "findOrCreateMailboxOfType", "(", "accountId", ",", "-", "1", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDeleteMessage", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mProviderContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mProviderContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "Mailbox", "box2", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:2>", "\"", ",", "account1Id", ",", "false", ",", "mProviderContext", ")", ";", "box2", ".", "mType", "=", "EmailContent", ".", "Mailbox", ".", "TYPE_TRASH", ";", "box2", ".", "save", "(", "mProviderContext", ")", ";", "long", "box2Id", "=", "box2", ".", "mId", ";", "Message", "message1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mProviderContext", ")", ";", "long", "message1Id", "=", "message1", ".", "mId", ";", "Controller", "ct", "=", "new", "TestController", "(", "mProviderContext", ",", "mContext", ")", ";", "ct", ".", "deleteMessage", "(", "message1Id", ",", "account1Id", ")", ";", "Message", "message1get", "=", "EmailContent", ".", "Message", ".", "restoreMessageWithId", "(", "mProviderContext", ",", "message1Id", ")", ";", "assertEquals", "(", "box2Id", ",", "message1get", ".", "mMailboxKey", ")", ";", "Message", "message2", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:2>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mProviderContext", ")", ";", "long", "message2Id", "=", "message2", ".", "mId", ";", "ct", ".", "deleteMessage", "(", "message2Id", ",", "-", "1", ")", ";", "Message", "message2get", "=", "EmailContent", ".", "Message", ".", "restoreMessageWithId", "(", "mProviderContext", ",", "message2Id", ")", ";", "assertEquals", "(", "box2Id", ",", "message2get", ".", "mMailboxKey", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDeleteMessageNoTrash", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mProviderContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mProviderContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "Message", "message1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mProviderContext", ")", ";", "long", "message1Id", "=", "message1", ".", "mId", ";", "Controller", "ct", "=", "new", "TestController", "(", "mProviderContext", ",", "mContext", ")", ";", "ct", ".", "deleteMessage", "(", "message1Id", ",", "account1Id", ")", ";", "Message", "message1get", "=", "EmailContent", ".", "Message", ".", "restoreMessageWithId", "(", "mProviderContext", ",", "message1Id", ")", ";", "assertFalse", "(", "-", "1", "=", "=", "message1get", ".", "mMailboxKey", ")", ";", "assertFalse", "(", "box1Id", "=", "=", "message1get", ".", "mMailboxKey", ")", ";", "Mailbox", "mailbox2get", "=", "EmailContent", ".", "Mailbox", ".", "restoreMailboxWithId", "(", "mProviderContext", ",", "message1get", ".", "mMailboxKey", ")", ";", "assertEquals", "(", "EmailContent", ".", "Mailbox", ".", "TYPE_TRASH", ",", "mailbox2get", ".", "mType", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testReadUnread", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "mProviderContext", ")", ";", "account1", ".", "mHostAuthRecv", "=", "ProviderTestUtils", ".", "setupHostAuth", "(", "\"", "<STR_LIT>", "\"", ",", "0", ",", "false", ",", "mProviderContext", ")", ";", "account1", ".", "save", "(", "mProviderContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "long", "box1Id", "=", "<NUM_LIT:2>", ";", "Message", "message1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mProviderContext", ")", ";", "long", "message1Id", "=", "message1", ".", "mId", ";", "Controller", "ct", "=", "new", "TestController", "(", "mProviderContext", ",", "mContext", ")", ";", "ct", ".", "setMessageRead", "(", "message1Id", ",", "true", ")", ";", "Message", "message1get", "=", "Message", ".", "restoreMessageWithId", "(", "mProviderContext", ",", "message1Id", ")", ";", "assertTrue", "(", "message1get", ".", "mFlagRead", ")", ";", "ct", ".", "setMessageRead", "(", "message1Id", ",", "false", ")", ";", "message1get", "=", "Message", ".", "restoreMessageWithId", "(", "mProviderContext", ",", "message1Id", ")", ";", "assertFalse", "(", "message1get", ".", "mFlagRead", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testFavorites", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "mProviderContext", ")", ";", "account1", ".", "mHostAuthRecv", "=", "ProviderTestUtils", ".", "setupHostAuth", "(", "\"", "<STR_LIT>", "\"", ",", "0", ",", "false", ",", "mProviderContext", ")", ";", "account1", ".", "save", "(", "mProviderContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "long", "box1Id", "=", "<NUM_LIT:2>", ";", "Message", "message1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mProviderContext", ")", ";", "long", "message1Id", "=", "message1", ".", "mId", ";", "Controller", "ct", "=", "new", "TestController", "(", "mProviderContext", ",", "mContext", ")", ";", "ct", ".", "setMessageFavorite", "(", "message1Id", ",", "true", ")", ";", "Message", "message1get", "=", "Message", ".", "restoreMessageWithId", "(", "mProviderContext", ",", "message1Id", ")", ";", "assertTrue", "(", "message1get", ".", "mFlagFavorite", ")", ";", "ct", ".", "setMessageFavorite", "(", "message1Id", ",", "false", ")", ";", "message1get", "=", "Message", ".", "restoreMessageWithId", "(", "mProviderContext", ",", "message1Id", ")", ";", "assertFalse", "(", "message1get", ".", "mFlagFavorite", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testImapQuote", "(", ")", "{", "assertEquals", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Utility", ".", "imapQuoted", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Utility", ".", "imapQuoted", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "Utility", ".", "imapQuoted", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetDisplayName", "(", ")", "{", "Context", "context", "=", "getContext", "(", ")", ";", "String", "expect", ",", "name", ";", "expect", "=", "context", ".", "getString", "(", "R", ".", "string", ".", "mailbox_name_display_inbox", ")", ";", "name", "=", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "context", ")", ".", "getDisplayName", "(", "Mailbox", ".", "TYPE_INBOX", ")", ";", "assertEquals", "(", "expect", ",", "name", ")", ";", "expect", "=", "null", ";", "name", "=", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "context", ")", ".", "getDisplayName", "(", "Mailbox", ".", "TYPE_MAIL", ")", ";", "assertEquals", "(", "expect", ",", "name", ")", ";", "expect", "=", "null", ";", "name", "=", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "context", ")", ".", "getDisplayName", "(", "Mailbox", ".", "TYPE_PARENT", ")", ";", "assertEquals", "(", "expect", ",", "name", ")", ";", "expect", "=", "context", ".", "getString", "(", "R", ".", "string", ".", "mailbox_name_display_drafts", ")", ";", "name", "=", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "context", ")", ".", "getDisplayName", "(", "Mailbox", ".", "TYPE_DRAFTS", ")", ";", "assertEquals", "(", "expect", ",", "name", ")", ";", "expect", "=", "context", ".", "getString", "(", "R", ".", "string", ".", "mailbox_name_display_outbox", ")", ";", "name", "=", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "context", ")", ".", "getDisplayName", "(", "Mailbox", ".", "TYPE_OUTBOX", ")", ";", "assertEquals", "(", "expect", ",", "name", ")", ";", "expect", "=", "context", ".", "getString", "(", "R", ".", "string", ".", "mailbox_name_display_sent", ")", ";", "name", "=", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "context", ")", ".", "getDisplayName", "(", "Mailbox", ".", "TYPE_SENT", ")", ";", "assertEquals", "(", "expect", ",", "name", ")", ";", "expect", "=", "context", ".", "getString", "(", "R", ".", "string", ".", "mailbox_name_display_trash", ")", ";", "name", "=", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "context", ")", ".", "getDisplayName", "(", "Mailbox", ".", "TYPE_TRASH", ")", ";", "assertEquals", "(", "expect", ",", "name", ")", ";", "expect", "=", "context", ".", "getString", "(", "R", ".", "string", ".", "mailbox_name_display_junk", ")", ";", "name", "=", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "context", ")", ".", "getDisplayName", "(", "Mailbox", ".", "TYPE_JUNK", ")", ";", "assertEquals", "(", "expect", ",", "name", ")", ";", "expect", "=", "null", ";", "name", "=", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "context", ")", ".", "getDisplayName", "(", "<NUM_LIT:8>", ")", ";", "assertEquals", "(", "expect", ",", "name", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSpecialIcons", "(", ")", "{", "Utility", ".", "FolderProperties", "fp", "=", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "mContext", ")", ";", "Drawable", "inbox", "=", "fp", ".", "getIconIds", "(", "Mailbox", ".", "TYPE_INBOX", ")", ";", "Drawable", "mail", "=", "fp", ".", "getIconIds", "(", "Mailbox", ".", "TYPE_MAIL", ")", ";", "Drawable", "parent", "=", "fp", ".", "getIconIds", "(", "Mailbox", ".", "TYPE_PARENT", ")", ";", "Drawable", "drafts", "=", "fp", ".", "getIconIds", "(", "Mailbox", ".", "TYPE_DRAFTS", ")", ";", "Drawable", "outbox", "=", "fp", ".", "getIconIds", "(", "Mailbox", ".", "TYPE_OUTBOX", ")", ";", "Drawable", "sent", "=", "fp", ".", "getIconIds", "(", "Mailbox", ".", "TYPE_SENT", ")", ";", "Drawable", "trash", "=", "fp", ".", "getIconIds", "(", "Mailbox", ".", "TYPE_TRASH", ")", ";", "Drawable", "junk", "=", "fp", ".", "getIconIds", "(", "Mailbox", ".", "TYPE_JUNK", ")", ";", "Set", "<", "Drawable", ">", "set", "=", "new", "HashSet", "<", "Drawable", ">", "(", ")", ";", "set", ".", "add", "(", "inbox", ")", ";", "set", ".", "add", "(", "mail", ")", ";", "set", ".", "add", "(", "parent", ")", ";", "set", ".", "add", "(", "drafts", ")", ";", "set", ".", "add", "(", "outbox", ")", ";", "set", ".", "add", "(", "sent", ")", ";", "set", ".", "add", "(", "trash", ")", ";", "set", ".", "add", "(", "junk", ")", ";", "assertEquals", "(", "<NUM_LIT:8>", ",", "set", ".", "size", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testAddRemove", "(", ")", "{", "GroupMessagingListener", "groupListener", "=", "new", "GroupMessagingListener", "(", ")", ";", "MessagingListener", "listener1", "=", "new", "MessagingListener", "(", ")", ";", "MessagingListener", "listener2", "=", "new", "MessagingListener", "(", ")", ";", "groupListener", ".", "addListener", "(", "listener1", ")", ";", "groupListener", ".", "addListener", "(", "listener2", ")", ";", "groupListener", ".", "removeListener", "(", "listener1", ")", ";", "groupListener", ".", "removeListener", "(", "listener2", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testIsActiveListener", "(", ")", "{", "GroupMessagingListener", "groupListener", "=", "new", "GroupMessagingListener", "(", ")", ";", "MessagingListener", "listener1", "=", "new", "MessagingListener", "(", ")", ";", "MessagingListener", "listener2", "=", "new", "MessagingListener", "(", ")", ";", "assertFalse", "(", "groupListener", ".", "isActiveListener", "(", "listener1", ")", ")", ";", "assertFalse", "(", "groupListener", ".", "isActiveListener", "(", "listener2", ")", ")", ";", "groupListener", ".", "addListener", "(", "listener1", ")", ";", "assertTrue", "(", "groupListener", ".", "isActiveListener", "(", "listener1", ")", ")", ";", "assertFalse", "(", "groupListener", ".", "isActiveListener", "(", "listener2", ")", ")", ";", "groupListener", ".", "addListener", "(", "listener2", ")", ";", "assertTrue", "(", "groupListener", ".", "isActiveListener", "(", "listener1", ")", ")", ";", "assertTrue", "(", "groupListener", ".", "isActiveListener", "(", "listener2", ")", ")", ";", "groupListener", ".", "removeListener", "(", "listener1", ")", ";", "assertFalse", "(", "groupListener", ".", "isActiveListener", "(", "listener1", ")", ")", ";", "assertTrue", "(", "groupListener", ".", "isActiveListener", "(", "listener2", ")", ")", ";", "groupListener", ".", "removeListener", "(", "listener2", ")", ";", "assertFalse", "(", "groupListener", ".", "isActiveListener", "(", "listener1", ")", ")", ";", "assertFalse", "(", "groupListener", ".", "isActiveListener", "(", "listener2", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mPreferences", "=", "Preferences", ".", "getPreferences", "(", "getContext", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "tearDown", "(", ")", "throws", "Exception", "{", "super", ".", "tearDown", "(", ")", ";", "if", "(", "mAccount", "!", "=", "null", "&", "&", "mPreferences", "!", "=", "null", ")", "{", "mAccount", ".", "delete", "(", "mPreferences", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testTransportToSenderUpdate", "(", ")", "{", "final", "String", "TEST_VALUE", "=", "\"", "<STR_LIT>", "\"", ";", "createTestAccount", "(", ")", ";", "SharedPreferences", ".", "Editor", "editor", "=", "mPreferences", ".", "mSharedPreferences", ".", "edit", "(", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "putString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "Utility", ".", "base64Encode", "(", "TEST_VALUE", ")", ")", ";", "editor", ".", "commit", "(", ")", ";", "mAccount", ".", "refresh", "(", "mPreferences", ")", ";", "assertEquals", "(", "TEST_VALUE", ",", "mAccount", ".", "getSenderUri", "(", ")", ")", ";", "mAccount", ".", "save", "(", "mPreferences", ")", ";", "String", "newString", "=", "mPreferences", ".", "mSharedPreferences", ".", "getString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "assertEquals", "(", "TEST_VALUE", ",", "Utility", ".", "base64Decode", "(", "newString", ")", ")", ";", "String", "oldString", "=", "mPreferences", ".", "mSharedPreferences", ".", "getString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "assertNull", "(", "oldString", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testImapDeletePolicyUpdate", "(", ")", "{", "final", "String", "STORE_URI_IMAP", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "STORE_URI_POP3", "=", "\"", "<STR_LIT>", "\"", ";", "createTestAccount", "(", ")", ";", "SharedPreferences", ".", "Editor", "editor", "=", "mPreferences", ".", "mSharedPreferences", ".", "edit", "(", ")", ";", "editor", ".", "putString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "Utility", ".", "base64Encode", "(", "STORE_URI_POP3", ")", ")", ";", "editor", ".", "putInt", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "Account", ".", "DELETE_POLICY_NEVER", ")", ";", "editor", ".", "commit", "(", ")", ";", "mAccount", ".", "refresh", "(", "mPreferences", ")", ";", "assertEquals", "(", "Account", ".", "DELETE_POLICY_NEVER", ",", "mAccount", ".", "getDeletePolicy", "(", ")", ")", ";", "mAccount", ".", "save", "(", "mPreferences", ")", ";", "int", "storedPolicy", "=", "mPreferences", ".", "mSharedPreferences", ".", "getInt", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "-", "1", ")", ";", "assertEquals", "(", "Account", ".", "DELETE_POLICY_NEVER", ",", "storedPolicy", ")", ";", "mAccount", ".", "delete", "(", "mPreferences", ")", ";", "createTestAccount", "(", ")", ";", "editor", "=", "mPreferences", ".", "mSharedPreferences", ".", "edit", "(", ")", ";", "editor", ".", "putString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "Utility", ".", "base64Encode", "(", "STORE_URI_IMAP", ")", ")", ";", "editor", ".", "putInt", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "Account", ".", "DELETE_POLICY_NEVER", ")", ";", "editor", ".", "commit", "(", ")", ";", "mAccount", ".", "refresh", "(", "mPreferences", ")", ";", "assertEquals", "(", "Account", ".", "DELETE_POLICY_ON_DELETE", ",", "mAccount", ".", "getDeletePolicy", "(", ")", ")", ";", "mAccount", ".", "save", "(", "mPreferences", ")", ";", "storedPolicy", "=", "mPreferences", ".", "mSharedPreferences", ".", "getInt", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "-", "1", ")", ";", "assertEquals", "(", "Account", ".", "DELETE_POLICY_ON_DELETE", ",", "storedPolicy", ")", ";", "}", "</s>"]
["<s>", "private", "void", "createTestAccount", "(", ")", "{", "mAccount", "=", "new", "Account", "(", "getContext", "(", ")", ")", ";", "mAccount", ".", "save", "(", "mPreferences", ")", ";", "mUuid", "=", "mAccount", ".", "getUuid", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "tearDown", "(", ")", "throws", "Exception", "{", "super", ".", "tearDown", "(", ")", ";", "if", "(", "mAccount", "!", "=", "null", ")", "{", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Account", ".", "CONTENT_URI", ",", "mAccountId", ")", ";", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "}", "}", "</s>"]
["<s>", "public", "MyMockFolder", "(", "FolderRole", "role", ",", "String", "name", ")", "{", "mRole", "=", "role", ";", "mName", "=", "name", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "mName", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "FolderRole", "getRole", "(", ")", "{", "return", "mRole", ";", "}", "</s>"]
["<s>", "private", "void", "createTestAccount", "(", ")", "{", "mAccount", "=", "new", "EmailContent", ".", "Account", "(", ")", ";", "mAccount", ".", "save", "(", "getContext", "(", ")", ")", ";", "mAccountId", "=", "mAccount", ".", "mId", ";", "}", "</s>"]
["<s>", "public", "static", "Test", "suite", "(", ")", "{", "return", "new", "TestSuiteBuilder", "(", "SmallTests", ".", "class", ")", ".", "includeAllPackagesUnderHere", "(", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "LegacyConversionsTests", "(", ")", "{", "super", "(", "EmailProvider", ".", "class", ",", "EmailProvider", ".", "EMAIL_AUTHORITY", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mProviderContext", "=", "getMockContext", "(", ")", ";", "mContext", "=", "getContext", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "super", ".", "tearDown", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testUpdateMessageFields", "(", ")", "throws", "MessagingException", "{", "MimeMessage", "message", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "RECIPIENT_CC", ",", "RECIPIENT_BCC", ",", "REPLY_TO", ",", "SENDER", ",", "SUBJECT", ",", "null", ")", ";", "EmailContent", ".", "Message", "localMessage", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "boolean", "result", "=", "LegacyConversions", ".", "updateMessageFields", "(", "localMessage", ",", "message", ",", "1", ",", "1", ")", ";", "assertTrue", "(", "result", ")", ";", "checkProviderMessage", "(", "\"", "<STR_LIT>", "\"", ",", "message", ",", "localMessage", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testUpdateMessageFieldsNoMessageId", "(", ")", "throws", "MessagingException", "{", "MimeMessage", "message", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "RECIPIENT_CC", ",", "RECIPIENT_BCC", ",", "REPLY_TO", ",", "SENDER", ",", "SUBJECT", ",", "null", ")", ";", "EmailContent", ".", "Message", "localMessage", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "localMessage", ".", "mMessageId", "=", "MESSAGE_ID_2", ";", "message", ".", "removeHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "boolean", "result", "=", "LegacyConversions", ".", "updateMessageFields", "(", "localMessage", ",", "message", ",", "1", ",", "1", ")", ";", "assertTrue", "(", "result", ")", ";", "assertEquals", "(", "MESSAGE_ID_2", ",", "localMessage", ".", "mMessageId", ")", ";", "}", "</s>"]
["<s>", "private", "MimeMessage", "buildTestMessage", "(", "String", "to", ",", "String", "cc", ",", "String", "bcc", ",", "String", "replyTo", ",", "String", "sender", ",", "String", "subject", ",", "String", "content", ")", "throws", "MessagingException", "{", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "if", "(", "to", "!", "=", "null", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "to", ")", ";", "message", ".", "setRecipients", "(", "RecipientType", ".", "TO", ",", "addresses", ")", ";", "}", "if", "(", "cc", "!", "=", "null", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "cc", ")", ";", "message", ".", "setRecipients", "(", "RecipientType", ".", "CC", ",", "addresses", ")", ";", "}", "if", "(", "bcc", "!", "=", "null", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "bcc", ")", ";", "message", ".", "setRecipients", "(", "RecipientType", ".", "BCC", ",", "addresses", ")", ";", "}", "if", "(", "replyTo", "!", "=", "null", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "replyTo", ")", ";", "message", ".", "setReplyTo", "(", "addresses", ")", ";", "}", "if", "(", "sender", "!", "=", "null", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "sender", ")", ";", "message", ".", "setFrom", "(", "Address", ".", "parse", "(", "sender", ")", "[", "0", "]", ")", ";", "}", "if", "(", "subject", "!", "=", "null", ")", "{", "message", ".", "setSubject", "(", "subject", ")", ";", "}", "if", "(", "content", "!", "=", "null", ")", "{", "TextBody", "body", "=", "new", "TextBody", "(", "content", ")", ";", "message", ".", "setBody", "(", "body", ")", ";", "}", "message", ".", "setUid", "(", "UID", ")", ";", "message", ".", "setSentDate", "(", "new", "Date", "(", ")", ")", ";", "message", ".", "setInternalDate", "(", "new", "Date", "(", ")", ")", ";", "message", ".", "setMessageId", "(", "MESSAGE_ID", ")", ";", "return", "message", ";", "}", "</s>"]
["<s>", "public", "void", "testUpdateBodyFieldsNullText", "(", ")", "throws", "MessagingException", "{", "EmailContent", ".", "Body", "localBody", "=", "new", "EmailContent", ".", "Body", "(", ")", ";", "EmailContent", ".", "Message", "localMessage", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "ArrayList", "<", "Part", ">", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "Part", "emptyTextPart", "=", "new", "MimeBodyPart", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "viewables", ".", "add", "(", "emptyTextPart", ")", ";", "boolean", "result", "=", "LegacyConversions", ".", "updateBodyFields", "(", "localBody", ",", "localMessage", ",", "viewables", ")", ";", "assertTrue", "(", "result", ")", ";", "assertNull", "(", "localBody", ".", "mTextContent", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testAddAttachments", "(", ")", "throws", "MessagingException", ",", "IOException", "{", "final", "long", "accountId", "=", "1", ";", "final", "long", "mailboxId", "=", "1", ";", "final", "EmailContent", ".", "Message", "localMessage", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT>", "\"", ",", "accountId", ",", "mailboxId", ",", "false", ",", "true", ",", "mProviderContext", ")", ";", "final", "Message", "legacyMessage", "=", "prepareLegacyMessageWithAttachments", "(", "<NUM_LIT:2>", ")", ";", "ArrayList", "<", "Part", ">", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "ArrayList", "<", "Part", ">", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "legacyMessage", ",", "viewables", ",", "attachments", ")", ";", "LegacyConversions", ".", "updateAttachments", "(", "mProviderContext", ",", "localMessage", ",", "attachments", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "MESSAGE_ID_URI", ",", "localMessage", ".", "mId", ")", ";", "Cursor", "c", "=", "mProviderContext", ".", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "Attachment", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "assertEquals", "(", "<NUM_LIT:2>", ",", "c", ".", "getCount", "(", ")", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "Attachment", "attachment", "=", "Attachment", ".", "getContent", "(", "c", ",", "Attachment", ".", "class", ")", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "attachment", ".", "mLocation", ")", ")", "{", "checkAttachment", "(", "\"", "<STR_LIT>", "\"", ",", "attachments", ".", "get", "(", "0", ")", ",", "attachment", ")", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "attachment", ".", "mLocation", ")", ")", "{", "checkAttachment", "(", "\"", "<STR_LIT>", "\"", ",", "attachments", ".", "get", "(", "1", ")", ",", "attachment", ")", ";", "}", "else", "{", "fail", "(", "\"", "<STR_LIT>", "\"", "+", "attachment", ".", "mLocation", ")", ";", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testAddDuplicateAttachments", "(", ")", "throws", "MessagingException", ",", "IOException", "{", "final", "long", "accountId", "=", "1", ";", "final", "long", "mailboxId", "=", "1", ";", "final", "EmailContent", ".", "Message", "localMessage", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT>", "\"", ",", "accountId", ",", "mailboxId", ",", "false", ",", "true", ",", "mProviderContext", ")", ";", "Message", "legacyMessage", "=", "prepareLegacyMessageWithAttachments", "(", "<NUM_LIT:2>", ")", ";", "ArrayList", "<", "Part", ">", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "ArrayList", "<", "Part", ">", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "legacyMessage", ",", "viewables", ",", "attachments", ")", ";", "LegacyConversions", ".", "updateAttachments", "(", "mProviderContext", ",", "localMessage", ",", "attachments", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "MESSAGE_ID_URI", ",", "localMessage", ".", "mId", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "EmailContent", ".", "count", "(", "mProviderContext", ",", "uri", ",", "null", ",", "null", ")", ")", ";", "LegacyConversions", ".", "updateAttachments", "(", "mProviderContext", ",", "localMessage", ",", "attachments", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "EmailContent", ".", "count", "(", "mProviderContext", ",", "uri", ",", "null", ",", "null", ")", ")", ";", "legacyMessage", "=", "prepareLegacyMessageWithAttachments", "(", "<NUM_LIT:4>", ")", ";", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "legacyMessage", ",", "viewables", ",", "attachments", ")", ";", "LegacyConversions", ".", "updateAttachments", "(", "mProviderContext", ",", "localMessage", ",", "attachments", ")", ";", "assertEquals", "(", "<NUM_LIT:4>", ",", "EmailContent", ".", "count", "(", "mProviderContext", ",", "uri", ",", "null", ",", "null", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Message", "prepareLegacyMessageWithAttachments", "(", "int", "numAttachments", ")", "throws", "MessagingException", "{", "MultipartBuilder", "mpBuilder", "=", "new", "MultipartBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "int", "i", "=", "1", ";", "i", "<", "=", "numAttachments", ";", "+", "+", "i", ")", "{", "BodyPart", "attachmentPart", "=", "MessageTestUtils", ".", "bodyPart", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "attachmentPart", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "i", "+", "\"", "<STR_LIT:\\\">", "\"", ")", ";", "attachmentPart", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TRANSFER_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ";", "attachmentPart", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_DISPOSITION", ",", "\"", "<STR_LIT:;>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:2>", "<STR_LIT:\\\">", "<STR_LIT:;>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "i", "+", "\"", "<STR_LIT>", "\"", ")", ";", "attachmentPart", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_ATTACHMENT_STORE_DATA", ",", "\"", "<STR_LIT:10>", "\"", "+", "i", ")", ";", "mpBuilder", ".", "addBodyPart", "(", "attachmentPart", ")", ";", "}", "final", "Message", "legacyMessage", "=", "new", "MessageBuilder", "(", ")", ".", "setBody", "(", "new", "MultipartBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "bodyPart", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ")", ".", "addBodyPart", "(", "mpBuilder", ".", "buildBodyPart", "(", ")", ")", ".", "build", "(", ")", ")", ".", "build", "(", ")", ";", "return", "legacyMessage", ";", "}", "</s>"]
["<s>", "public", "void", "testStringInequal", "(", ")", "{", "assertFalse", "(", "LegacyConversions", ".", "stringNotEqual", "(", "null", ",", "null", ")", ")", ";", "assertFalse", "(", "LegacyConversions", ".", "stringNotEqual", "(", "null", ",", "\"", "\"", ")", ")", ";", "assertFalse", "(", "LegacyConversions", ".", "stringNotEqual", "(", "\"", "\"", ",", "null", ")", ")", ";", "assertFalse", "(", "LegacyConversions", ".", "stringNotEqual", "(", "\"", "\"", ",", "\"", "\"", ")", ")", ";", "assertFalse", "(", "LegacyConversions", ".", "stringNotEqual", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "LegacyConversions", ".", "stringNotEqual", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "LegacyConversions", ".", "stringNotEqual", "(", "\"", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "LegacyConversions", ".", "stringNotEqual", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ")", ";", "assertTrue", "(", "LegacyConversions", ".", "stringNotEqual", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ")", ";", "assertTrue", "(", "LegacyConversions", ".", "stringNotEqual", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkAttachment", "(", "String", "tag", ",", "Part", "expected", ",", "EmailContent", ".", "Attachment", "actual", ")", "throws", "MessagingException", "{", "String", "contentType", "=", "MimeUtility", ".", "unfoldAndDecode", "(", "expected", ".", "getContentType", "(", ")", ")", ";", "String", "expectedName", "=", "MimeUtility", ".", "getHeaderParameter", "(", "contentType", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "tag", ",", "expectedName", ",", "actual", ".", "mFileName", ")", ";", "assertEquals", "(", "tag", ",", "expected", ".", "getMimeType", "(", ")", ",", "actual", ".", "mMimeType", ")", ";", "String", "disposition", "=", "expected", ".", "getDisposition", "(", ")", ";", "String", "sizeString", "=", "MimeUtility", ".", "getHeaderParameter", "(", "disposition", ",", "\"", "<STR_LIT>", "\"", ")", ";", "long", "expectedSize", "=", "Long", ".", "parseLong", "(", "sizeString", ")", ";", "assertEquals", "(", "tag", ",", "expectedSize", ",", "actual", ".", "mSize", ")", ";", "assertEquals", "(", "tag", ",", "expected", ".", "getContentId", "(", ")", ",", "actual", ".", "mContentId", ")", ";", "assertNull", "(", "tag", ",", "actual", ".", "mContentUri", ")", ";", "assertTrue", "(", "tag", ",", "0", "!", "=", "actual", ".", "mMessageKey", ")", ";", "String", "expectedPartId", "=", "expected", ".", "getHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_ATTACHMENT_STORE_DATA", ")", "[", "0", "]", ";", "assertEquals", "(", "tag", ",", "expectedPartId", ",", "actual", ".", "mLocation", ")", ";", "assertEquals", "(", "tag", ",", "\"", "<STR_LIT:B>", "\"", ",", "actual", ".", "mEncoding", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testMakeLegacyMessage", "(", ")", "throws", "MessagingException", "{", "long", "account1Id", "=", "1", ";", "long", "mailbox1Id", "=", "1", ";", "EmailContent", ".", "Message", "localMessage1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT>", "\"", ",", "account1Id", ",", "mailbox1Id", ",", "false", ",", "true", ",", "mProviderContext", ")", ";", "Message", "getMessage1", "=", "LegacyConversions", ".", "makeMessage", "(", "mProviderContext", ",", "localMessage1", ")", ";", "checkLegacyMessage", "(", "\"", "<STR_LIT>", "\"", ",", "localMessage1", ",", "getMessage1", ")", ";", "EmailContent", ".", "Message", "localMessage2", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT>", "\"", ",", "account1Id", ",", "mailbox1Id", ",", "true", ",", "false", ",", "mProviderContext", ")", ";", "localMessage2", ".", "mTextReply", "=", "null", ";", "localMessage2", ".", "mHtmlReply", "=", "null", ";", "localMessage2", ".", "mIntroText", "=", "null", ";", "localMessage2", ".", "mFlags", "&", "=", "~", "EmailContent", ".", "Message", ".", "FLAG_TYPE_MASK", ";", "localMessage2", ".", "save", "(", "mProviderContext", ")", ";", "Message", "getMessage2", "=", "LegacyConversions", ".", "makeMessage", "(", "mProviderContext", ",", "localMessage2", ")", ";", "checkLegacyMessage", "(", "\"", "<STR_LIT>", "\"", ",", "localMessage2", ",", "getMessage2", ")", ";", "EmailContent", ".", "Message", "localMessage3", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT>", "\"", ",", "account1Id", ",", "mailbox1Id", ",", "true", ",", "false", ",", "mProviderContext", ")", ";", "localMessage3", ".", "mFlags", "&", "=", "~", "EmailContent", ".", "Message", ".", "FLAG_TYPE_MASK", ";", "localMessage3", ".", "mFlags", "|", "=", "EmailContent", ".", "Message", ".", "FLAG_TYPE_REPLY", ";", "localMessage3", ".", "save", "(", "mProviderContext", ")", ";", "Message", "getMessage3", "=", "LegacyConversions", ".", "makeMessage", "(", "mProviderContext", ",", "localMessage3", ")", ";", "checkLegacyMessage", "(", "\"", "<STR_LIT>", "\"", ",", "localMessage3", ",", "getMessage3", ")", ";", "EmailContent", ".", "Message", "localMessage4", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT>", "\"", ",", "account1Id", ",", "mailbox1Id", ",", "true", ",", "false", ",", "mProviderContext", ")", ";", "localMessage4", ".", "mFlags", "&", "=", "~", "EmailContent", ".", "Message", ".", "FLAG_TYPE_MASK", ";", "localMessage4", ".", "mFlags", "|", "=", "EmailContent", ".", "Message", ".", "FLAG_TYPE_FORWARD", ";", "localMessage4", ".", "save", "(", "mProviderContext", ")", ";", "Message", "getMessage4", "=", "LegacyConversions", ".", "makeMessage", "(", "mProviderContext", ",", "localMessage4", ")", ";", "checkLegacyMessage", "(", "\"", "<STR_LIT>", "\"", ",", "localMessage4", ",", "getMessage4", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkProviderMessage", "(", "String", "tag", ",", "Message", "expect", ",", "EmailContent", ".", "Message", "actual", ")", "throws", "MessagingException", "{", "assertEquals", "(", "tag", ",", "expect", ".", "getUid", "(", ")", ",", "actual", ".", "mServerId", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "getSubject", "(", ")", ",", "actual", ".", "mSubject", ")", ";", "assertEquals", "(", "tag", ",", "Address", ".", "pack", "(", "expect", ".", "getFrom", "(", ")", ")", ",", "actual", ".", "mFrom", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "getSentDate", "(", ")", ".", "getTime", "(", ")", ",", "actual", ".", "mTimeStamp", ")", ";", "assertEquals", "(", "tag", ",", "Address", ".", "pack", "(", "expect", ".", "getRecipients", "(", "RecipientType", ".", "TO", ")", ")", ",", "actual", ".", "mTo", ")", ";", "assertEquals", "(", "tag", ",", "Address", ".", "pack", "(", "expect", ".", "getRecipients", "(", "RecipientType", ".", "CC", ")", ")", ",", "actual", ".", "mCc", ")", ";", "assertEquals", "(", "tag", ",", "(", "(", "MimeMessage", ")", "expect", ")", ".", "getMessageId", "(", ")", ",", "actual", ".", "mMessageId", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "isSet", "(", "Flag", ".", "SEEN", ")", ",", "actual", ".", "mFlagRead", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "isSet", "(", "Flag", ".", "FLAGGED", ")", ",", "actual", ".", "mFlagFavorite", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkLegacyMessage", "(", "String", "tag", ",", "EmailContent", ".", "Message", "expect", ",", "Message", "actual", ")", "throws", "MessagingException", "{", "assertEquals", "(", "tag", ",", "expect", ".", "mServerId", ",", "actual", ".", "getUid", "(", ")", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mServerTimeStamp", ",", "actual", ".", "getInternalDate", "(", ")", ".", "getTime", "(", ")", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mSubject", ",", "actual", ".", "getSubject", "(", ")", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mFrom", ",", "Address", ".", "pack", "(", "actual", ".", "getFrom", "(", ")", ")", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mTimeStamp", ",", "actual", ".", "getSentDate", "(", ")", ".", "getTime", "(", ")", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mTo", ",", "Address", ".", "pack", "(", "actual", ".", "getRecipients", "(", "RecipientType", ".", "TO", ")", ")", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mCc", ",", "Address", ".", "pack", "(", "actual", ".", "getRecipients", "(", "RecipientType", ".", "CC", ")", ")", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mBcc", ",", "Address", ".", "pack", "(", "actual", ".", "getRecipients", "(", "RecipientType", ".", "BCC", ")", ")", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mReplyTo", ",", "Address", ".", "pack", "(", "actual", ".", "getReplyTo", "(", ")", ")", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mMessageId", ",", "(", "(", "MimeMessage", ")", "actual", ")", ".", "getMessageId", "(", ")", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mFlagRead", ",", "actual", ".", "isSet", "(", "Flag", ".", "SEEN", ")", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mFlagFavorite", ",", "actual", ".", "isSet", "(", "Flag", ".", "FLAGGED", ")", ")", ";", "ArrayList", "<", "Part", ">", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "ArrayList", "<", "Part", ">", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "actual", ",", "viewables", ",", "attachments", ")", ";", "String", "get1Text", "=", "null", ";", "String", "get1Html", "=", "null", ";", "String", "get1TextReply", "=", "null", ";", "String", "get1HtmlReply", "=", "null", ";", "String", "get1TextIntro", "=", "null", ";", "for", "(", "Part", "viewable", ":", "viewables", ")", "{", "String", "text", "=", "MimeUtility", ".", "getTextFromPart", "(", "viewable", ")", ";", "boolean", "isHtml", "=", "viewable", ".", "getMimeType", "(", ")", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "[", "]", "headers", "=", "viewable", ".", "getHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_BODY_QUOTED_PART", ")", ";", "if", "(", "headers", "!", "=", "null", ")", "{", "String", "header", "=", "headers", "[", "0", "]", ";", "boolean", "isReply", "=", "LegacyConversions", ".", "BODY_QUOTED_PART_REPLY", ".", "equalsIgnoreCase", "(", "header", ")", ";", "boolean", "isFwd", "=", "LegacyConversions", ".", "BODY_QUOTED_PART_FORWARD", ".", "equalsIgnoreCase", "(", "header", ")", ";", "boolean", "isIntro", "=", "LegacyConversions", ".", "BODY_QUOTED_PART_INTRO", ".", "equalsIgnoreCase", "(", "header", ")", ";", "if", "(", "isReply", "|", "|", "isFwd", ")", "{", "if", "(", "isHtml", ")", "{", "get1HtmlReply", "=", "text", ";", "}", "else", "{", "get1TextReply", "=", "text", ";", "}", "}", "else", "if", "(", "isIntro", ")", "{", "get1TextIntro", "=", "text", ";", "}", "int", "replyTypeFlags", "=", "expect", ".", "mFlags", "&", "EmailContent", ".", "Message", ".", "FLAG_TYPE_MASK", ";", "if", "(", "isReply", ")", "{", "assertEquals", "(", "tag", ",", "EmailContent", ".", "Message", ".", "FLAG_TYPE_REPLY", ",", "replyTypeFlags", ")", ";", "}", "if", "(", "isFwd", ")", "{", "assertEquals", "(", "tag", ",", "EmailContent", ".", "Message", ".", "FLAG_TYPE_FORWARD", ",", "replyTypeFlags", ")", ";", "}", "}", "else", "{", "if", "(", "isHtml", ")", "{", "get1Html", "=", "text", ";", "}", "else", "{", "get1Text", "=", "text", ";", "}", "}", "}", "assertEquals", "(", "tag", ",", "expect", ".", "mText", ",", "get1Text", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mHtml", ",", "get1Html", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mTextReply", ",", "get1TextReply", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mHtmlReply", ",", "get1HtmlReply", ")", ";", "assertEquals", "(", "tag", ",", "expect", ".", "mIntroText", ",", "get1TextIntro", ")", ";", "}", "</s>"]
["<s>", "public", "MessageComposeInstrumentationTests", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "MessageCompose", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "Context", "context", "=", "getInstrumentation", "(", ")", ".", "getTargetContext", "(", ")", ";", "long", "accountId", "=", "Account", ".", "getDefaultAccountId", "(", "context", ")", ";", "if", "(", "accountId", "=", "=", "-", "1", ")", "{", "Account", "account", "=", "new", "Account", "(", ")", ";", "account", ".", "mSenderName", "=", "\"", "<STR_LIT>", "\"", ";", "account", ".", "mEmailAddress", "=", "\"", "<STR_LIT>", "\"", ";", "account", ".", "save", "(", "context", ")", ";", "accountId", "=", "account", ".", "mId", ";", "mCreatedAccountId", "=", "accountId", ";", "}", "Account", ".", "restoreAccountWithId", "(", "context", ",", "accountId", ")", ";", "Email", ".", "setServicesEnabled", "(", "context", ")", ";", "Intent", "intent", "=", "new", "Intent", "(", "Intent", ".", "ACTION_VIEW", ")", ";", "setActivityIntent", "(", "intent", ")", ";", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "mToView", "=", "(", "MultiAutoCompleteTextView", ")", "a", ".", "findViewById", "(", "R", ".", "id", ".", "to", ")", ";", "mCcView", "=", "(", "MultiAutoCompleteTextView", ")", "a", ".", "findViewById", "(", "R", ".", "id", ".", "cc", ")", ";", "mSubjectView", "=", "(", "EditText", ")", "a", ".", "findViewById", "(", "R", ".", "id", ".", "subject", ")", ";", "mMessageView", "=", "(", "EditText", ")", "a", ".", "findViewById", "(", "R", ".", "id", ".", "message_content", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "tearDown", "(", ")", "throws", "Exception", "{", "super", ".", "tearDown", "(", ")", ";", "Context", "context", "=", "getInstrumentation", "(", ")", ".", "getTargetContext", "(", ")", ";", "if", "(", "mCreatedAccountId", ">", "-", "1", ")", "{", "context", ".", "getContentResolver", "(", ")", ".", "delete", "(", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "mCreatedAccountId", ")", ",", "null", ",", "null", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testPreconditions", "(", ")", "{", "assertNotNull", "(", "mToView", ")", ";", "assertEquals", "(", "0", ",", "mToView", ".", "length", "(", ")", ")", ";", "assertNotNull", "(", "mSubjectView", ")", ";", "assertEquals", "(", "0", ",", "mSubjectView", ".", "length", "(", ")", ")", ";", "assertNotNull", "(", "mMessageView", ")", ";", "assertEquals", "(", "0", ",", "mMessageView", ".", "length", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testProcessSourceMessageReply", "(", ")", "throws", "MessagingException", ",", "Throwable", "{", "final", "Message", "message", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "Intent", "intent", "=", "new", "Intent", "(", "ACTION_REPLY", ")", ";", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "a", ".", "setIntent", "(", "intent", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "SENDER", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", "+", "SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "}", ")", ";", "message", ".", "mFrom", "=", "null", ";", "message", ".", "mReplyTo", "=", "Address", ".", "parseAndPack", "(", "REPLYTO", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "resetViews", "(", ")", ";", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "REPLYTO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", "+", "SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "SENDER", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", "+", "SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "resetViews", "(", ")", ";", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "REPLYTO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", "+", "SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testProcessSourceMessageReplyUtf16", "(", ")", "throws", "MessagingException", ",", "Throwable", "{", "final", "Message", "message", "=", "buildTestMessage", "(", "UTF16_RECIPIENT_TO", ",", "UTF16_SENDER", ",", "UTF16_SUBJECT", ",", "UTF16_BODY", ")", ";", "Intent", "intent", "=", "new", "Intent", "(", "ACTION_REPLY", ")", ";", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "a", ".", "setIntent", "(", "intent", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF16_SENDER", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", "+", "UTF16_SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "}", ")", ";", "message", ".", "mFrom", "=", "null", ";", "message", ".", "mReplyTo", "=", "Address", ".", "parseAndPack", "(", "UTF16_REPLYTO", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "resetViews", "(", ")", ";", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF16_REPLYTO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", "+", "UTF16_SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF16_SENDER", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", "+", "UTF16_SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "resetViews", "(", ")", ";", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF16_REPLYTO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", "+", "UTF16_SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testProcessSourceMessageReplyUtf32", "(", ")", "throws", "MessagingException", ",", "Throwable", "{", "final", "Message", "message", "=", "buildTestMessage", "(", "UTF32_RECIPIENT_TO", ",", "UTF32_SENDER", ",", "UTF32_SUBJECT", ",", "UTF32_BODY", ")", ";", "Intent", "intent", "=", "new", "Intent", "(", "ACTION_REPLY", ")", ";", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "a", ".", "setIntent", "(", "intent", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF32_SENDER", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", "+", "UTF32_SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "}", ")", ";", "message", ".", "mFrom", "=", "null", ";", "message", ".", "mReplyTo", "=", "Address", ".", "parseAndPack", "(", "UTF32_REPLYTO", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "resetViews", "(", ")", ";", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF32_REPLYTO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", "+", "UTF32_SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF32_SENDER", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", "+", "UTF32_SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "resetViews", "(", ")", ";", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF32_REPLYTO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", "+", "UTF32_SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testProcessSourceMessageForward", "(", ")", "throws", "MessagingException", ",", "Throwable", "{", "final", "Message", "message", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "Intent", "intent", "=", "new", "Intent", "(", "ACTION_FORWARD", ")", ";", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "a", ".", "setIntent", "(", "intent", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "null", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", "+", "SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mToView", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "null", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", "+", "SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mToView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testProcessSourceMessageDraft", "(", ")", "throws", "MessagingException", ",", "Throwable", "{", "final", "Message", "message", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "Intent", "intent", "=", "new", "Intent", "(", "ACTION_EDIT_DRAFT", ")", ";", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "a", ".", "setIntent", "(", "intent", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "SUBJECT", ",", "BODY", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "}", ")", ";", "message", ".", "mSubject", "=", "\"", "\"", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "resetViews", "(", ")", ";", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "null", ",", "BODY", ")", ";", "checkFocused", "(", "mSubjectView", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "SUBJECT", ",", "BODY", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "resetViews", "(", ")", ";", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "null", ",", "BODY", ")", ";", "checkFocused", "(", "mSubjectView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testProcessSourceMessageDraftWithUtf16", "(", ")", "throws", "MessagingException", ",", "Throwable", "{", "final", "Message", "message", "=", "buildTestMessage", "(", "UTF16_RECIPIENT_TO", ",", "UTF16_SENDER", ",", "UTF16_SUBJECT", ",", "UTF16_BODY", ")", ";", "Intent", "intent", "=", "new", "Intent", "(", "ACTION_EDIT_DRAFT", ")", ";", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "a", ".", "setIntent", "(", "intent", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF16_RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "UTF16_SUBJECT", ",", "UTF16_BODY", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "}", ")", ";", "message", ".", "mSubject", "=", "\"", "\"", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "resetViews", "(", ")", ";", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF16_RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "null", ",", "UTF16_BODY", ")", ";", "checkFocused", "(", "mSubjectView", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF16_RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "UTF16_SUBJECT", ",", "UTF16_BODY", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "resetViews", "(", ")", ";", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF16_RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "null", ",", "UTF16_BODY", ")", ";", "checkFocused", "(", "mSubjectView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testProcessSourceMessageDraftWithUtf32", "(", ")", "throws", "MessagingException", ",", "Throwable", "{", "final", "Message", "message", "=", "buildTestMessage", "(", "UTF32_RECIPIENT_TO", ",", "UTF32_SENDER", ",", "UTF32_SUBJECT", ",", "UTF32_BODY", ")", ";", "Intent", "intent", "=", "new", "Intent", "(", "ACTION_EDIT_DRAFT", ")", ";", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "a", ".", "setIntent", "(", "intent", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF32_RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "UTF32_SUBJECT", ",", "UTF32_BODY", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "}", ")", ";", "message", ".", "mSubject", "=", "\"", "\"", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "resetViews", "(", ")", ";", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF32_RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "null", ",", "UTF32_BODY", ")", ";", "checkFocused", "(", "mSubjectView", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF32_RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "UTF32_SUBJECT", ",", "UTF32_BODY", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "resetViews", "(", ")", ";", "a", ".", "processSourceMessage", "(", "message", ",", "null", ")", ";", "checkFields", "(", "UTF32_RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "null", ",", "UTF32_BODY", ")", ";", "checkFocused", "(", "mSubjectView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testReplyAddresses", "(", ")", "throws", "Throwable", "{", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "final", "Intent", "intent", "=", "new", "Intent", "(", "Intent", ".", "ACTION_VIEW", ")", ";", "Message", "msg", "=", "new", "Message", "(", ")", ";", "final", "Account", "account", "=", "new", "Account", "(", ")", ";", "msg", ".", "mFrom", "=", "Address", ".", "parseAndPack", "(", "FROM", ")", ";", "msg", ".", "mTo", "=", "Address", ".", "parseAndPack", "(", "TO1", "+", "<CHAR_LIT:U+002C>", "+", "TO2", ")", ";", "msg", ".", "mCc", "=", "Address", ".", "parseAndPack", "(", "CC1", "+", "<CHAR_LIT:U+002C>", "+", "CC2", "+", "<CHAR_LIT:U+002C>", "+", "CC3", ")", ";", "final", "Message", "message", "=", "msg", ";", "account", ".", "mEmailAddress", "=", "\"", "<STR_LIT>", "\"", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "intent", ")", ";", "a", ".", "setupAddressViews", "(", "message", ",", "account", ",", "mToView", ",", "mCcView", ",", "false", ")", ";", "assertEquals", "(", "\"", "\"", ",", "mCcView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "String", "result", "=", "Address", ".", "parseAndPack", "(", "mToView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "String", "expected", "=", "Address", ".", "parseAndPack", "(", "FROM", ")", ";", "assertEquals", "(", "expected", ",", "result", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "intent", ")", ";", "a", ".", "setupAddressViews", "(", "message", ",", "account", ",", "mToView", ",", "mCcView", ",", "false", ")", ";", "assertEquals", "(", "\"", "\"", ",", "mCcView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "String", "result", "=", "Address", ".", "parseAndPack", "(", "mToView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "String", "expected", "=", "Address", ".", "parseAndPack", "(", "FROM", ")", ";", "assertEquals", "(", "expected", ",", "result", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testReplyAllAddresses1", "(", ")", "throws", "Throwable", "{", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "final", "Intent", "intent", "=", "new", "Intent", "(", "Intent", ".", "ACTION_VIEW", ")", ";", "Message", "msg", "=", "new", "Message", "(", ")", ";", "final", "Account", "account", "=", "new", "Account", "(", ")", ";", "msg", ".", "mFrom", "=", "Address", ".", "parseAndPack", "(", "FROM", ")", ";", "msg", ".", "mTo", "=", "Address", ".", "parseAndPack", "(", "TO1", "+", "<CHAR_LIT:U+002C>", "+", "TO2", ")", ";", "msg", ".", "mCc", "=", "Address", ".", "parseAndPack", "(", "CC1", "+", "<CHAR_LIT:U+002C>", "+", "CC2", "+", "<CHAR_LIT:U+002C>", "+", "CC3", ")", ";", "final", "Message", "message", "=", "msg", ";", "account", ".", "mEmailAddress", "=", "\"", "<STR_LIT>", "\"", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "intent", ")", ";", "a", ".", "setupAddressViews", "(", "message", ",", "account", ",", "mToView", ",", "mCcView", ",", "true", ")", ";", "String", "result", "=", "Address", ".", "parseAndPack", "(", "mToView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "String", "expected", "=", "Address", ".", "parseAndPack", "(", "FROM", "+", "<CHAR_LIT:U+002C>", "+", "TO2", ")", ";", "assertEquals", "(", "expected", ",", "result", ")", ";", "result", "=", "Address", ".", "parseAndPack", "(", "mCcView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "expected", "=", "Address", ".", "parseAndPack", "(", "CC1", "+", "<CHAR_LIT:U+002C>", "+", "CC2", "+", "<CHAR_LIT:U+002C>", "+", "CC3", ")", ";", "assertEquals", "(", "expected", ",", "result", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "intent", ")", ";", "a", ".", "setupAddressViews", "(", "message", ",", "account", ",", "mToView", ",", "mCcView", ",", "true", ")", ";", "String", "result", "=", "Address", ".", "parseAndPack", "(", "mToView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "String", "expected", "=", "Address", ".", "parseAndPack", "(", "FROM", "+", "<CHAR_LIT:U+002C>", "+", "TO2", ")", ";", "assertEquals", "(", "expected", ",", "result", ")", ";", "result", "=", "Address", ".", "parseAndPack", "(", "mCcView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "expected", "=", "Address", ".", "parseAndPack", "(", "CC1", "+", "<CHAR_LIT:U+002C>", "+", "CC2", "+", "<CHAR_LIT:U+002C>", "+", "CC3", ")", ";", "assertEquals", "(", "expected", ",", "result", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testReplyAllAddresses2", "(", ")", "throws", "Throwable", "{", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "final", "Intent", "intent", "=", "new", "Intent", "(", "Intent", ".", "ACTION_VIEW", ")", ";", "Message", "msg", "=", "new", "Message", "(", ")", ";", "final", "Account", "account", "=", "new", "Account", "(", ")", ";", "msg", ".", "mFrom", "=", "Address", ".", "parseAndPack", "(", "FROM", ")", ";", "msg", ".", "mTo", "=", "Address", ".", "parseAndPack", "(", "TO1", "+", "<CHAR_LIT:U+002C>", "+", "TO2", ")", ";", "msg", ".", "mCc", "=", "Address", ".", "parseAndPack", "(", "CC1", "+", "<CHAR_LIT:U+002C>", "+", "CC2", "+", "<CHAR_LIT:U+002C>", "+", "CC3", ")", ";", "final", "Message", "message", "=", "msg", ";", "account", ".", "mEmailAddress", "=", "\"", "<STR_LIT>", "\"", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "intent", ")", ";", "a", ".", "setupAddressViews", "(", "message", ",", "account", ",", "mToView", ",", "mCcView", ",", "true", ")", ";", "String", "result", "=", "Address", ".", "parseAndPack", "(", "mToView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "String", "expected", "=", "Address", ".", "parseAndPack", "(", "FROM", "+", "<CHAR_LIT:U+002C>", "+", "TO1", "+", "<CHAR_LIT:U+002C>", "+", "TO2", ")", ";", "assertEquals", "(", "expected", ",", "result", ")", ";", "result", "=", "Address", ".", "parseAndPack", "(", "mCcView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "expected", "=", "Address", ".", "parseAndPack", "(", "CC1", "+", "<CHAR_LIT:U+002C>", "+", "CC3", ")", ";", "assertEquals", "(", "expected", ",", "result", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "intent", ")", ";", "a", ".", "setupAddressViews", "(", "message", ",", "account", ",", "mToView", ",", "mCcView", ",", "true", ")", ";", "String", "result", "=", "Address", ".", "parseAndPack", "(", "mToView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "String", "expected", "=", "Address", ".", "parseAndPack", "(", "FROM", "+", "<CHAR_LIT:U+002C>", "+", "TO1", "+", "<CHAR_LIT:U+002C>", "+", "TO2", ")", ";", "assertEquals", "(", "expected", ",", "result", ")", ";", "result", "=", "Address", ".", "parseAndPack", "(", "mCcView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "expected", "=", "Address", ".", "parseAndPack", "(", "CC1", "+", "<CHAR_LIT:U+002C>", "+", "CC3", ")", ";", "assertEquals", "(", "expected", ",", "result", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testReplyAllAddresses3", "(", ")", "throws", "Throwable", "{", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "final", "Intent", "intent", "=", "new", "Intent", "(", "Intent", ".", "ACTION_VIEW", ")", ";", "Message", "msg", "=", "new", "Message", "(", ")", ";", "final", "Account", "account", "=", "new", "Account", "(", ")", ";", "msg", ".", "mFrom", "=", "Address", ".", "parseAndPack", "(", "FROM", ")", ";", "msg", ".", "mTo", "=", "Address", ".", "parseAndPack", "(", "TO1", "+", "<CHAR_LIT:U+002C>", "+", "TO2", "+", "<CHAR_LIT:U+002C>", "+", "TO3", ")", ";", "msg", ".", "mCc", "=", "Address", ".", "parseAndPack", "(", "CC1", "+", "<CHAR_LIT:U+002C>", "+", "CC2", "+", "<CHAR_LIT:U+002C>", "+", "CC3", "+", "<CHAR_LIT:U+002C>", "+", "CC4", ")", ";", "final", "Message", "message", "=", "msg", ";", "account", ".", "mEmailAddress", "=", "\"", "<STR_LIT>", "\"", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "intent", ")", ";", "a", ".", "setupAddressViews", "(", "message", ",", "account", ",", "mToView", ",", "mCcView", ",", "true", ")", ";", "String", "result", "=", "Address", ".", "parseAndPack", "(", "mToView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "String", "expected", "=", "Address", ".", "parseAndPack", "(", "FROM", "+", "<CHAR_LIT:U+002C>", "+", "TO1", "+", "<CHAR_LIT:U+002C>", "+", "TO2", "+", "<CHAR_LIT:U+002C>", "+", "TO3", ")", ";", "assertEquals", "(", "expected", ",", "result", ")", ";", "result", "=", "Address", ".", "parseAndPack", "(", "mCcView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "expected", "=", "Address", ".", "parseAndPack", "(", "CC3", ")", ";", "assertEquals", "(", "expected", ",", "result", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "intent", ")", ";", "a", ".", "setupAddressViews", "(", "message", ",", "account", ",", "mToView", ",", "mCcView", ",", "true", ")", ";", "String", "result", "=", "Address", ".", "parseAndPack", "(", "mToView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "String", "expected", "=", "Address", ".", "parseAndPack", "(", "FROM", "+", "<CHAR_LIT:U+002C>", "+", "TO1", "+", "<CHAR_LIT:U+002C>", "+", "TO2", "+", "<CHAR_LIT:U+002C>", "+", "TO3", ")", ";", "assertEquals", "(", "expected", ",", "result", ")", ";", "result", "=", "Address", ".", "parseAndPack", "(", "mCcView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "expected", "=", "Address", ".", "parseAndPack", "(", "CC3", ")", ";", "assertEquals", "(", "expected", ",", "result", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testIntentHeaderExtras", "(", ")", "throws", "MessagingException", ",", "Throwable", "{", "Intent", "intent", "=", "new", "Intent", "(", "Intent", ".", "ACTION_VIEW", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_EMAIL", ",", "new", "String", "[", "]", "{", "RECIPIENT_TO", "}", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_CC", ",", "new", "String", "[", "]", "{", "RECIPIENT_CC", "}", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_BCC", ",", "new", "String", "[", "]", "{", "RECIPIENT_BCC", "}", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_SUBJECT", ",", "SUBJECT", ")", ";", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "final", "Intent", "i2", "=", "new", "Intent", "(", "intent", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "i2", ")", ";", "checkFields", "(", "RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "RECIPIENT_CC", ",", "RECIPIENT_BCC", ",", "SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "i2", ")", ";", "checkFields", "(", "RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "RECIPIENT_CC", ",", "RECIPIENT_BCC", ",", "SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testIntentHeaderExtrasWithUtf16", "(", ")", "throws", "MessagingException", ",", "Throwable", "{", "Intent", "intent", "=", "new", "Intent", "(", "Intent", ".", "ACTION_VIEW", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_EMAIL", ",", "new", "String", "[", "]", "{", "UTF16_RECIPIENT_TO", "}", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_CC", ",", "new", "String", "[", "]", "{", "UTF16_RECIPIENT_CC", "}", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_BCC", ",", "new", "String", "[", "]", "{", "UTF16_RECIPIENT_BCC", "}", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_SUBJECT", ",", "UTF16_SUBJECT", ")", ";", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "final", "Intent", "i2", "=", "new", "Intent", "(", "intent", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "i2", ")", ";", "checkFields", "(", "UTF16_RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "UTF16_RECIPIENT_CC", ",", "UTF16_RECIPIENT_BCC", ",", "UTF16_SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "i2", ")", ";", "checkFields", "(", "UTF16_RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "UTF16_RECIPIENT_CC", ",", "UTF16_RECIPIENT_BCC", ",", "UTF16_SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testIntentHeaderExtrasWithUtf32", "(", ")", "throws", "MessagingException", ",", "Throwable", "{", "Intent", "intent", "=", "new", "Intent", "(", "Intent", ".", "ACTION_VIEW", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_EMAIL", ",", "new", "String", "[", "]", "{", "UTF32_RECIPIENT_TO", "}", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_CC", ",", "new", "String", "[", "]", "{", "UTF32_RECIPIENT_CC", "}", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_BCC", ",", "new", "String", "[", "]", "{", "UTF32_RECIPIENT_BCC", "}", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_SUBJECT", ",", "UTF32_SUBJECT", ")", ";", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "final", "Intent", "i2", "=", "new", "Intent", "(", "intent", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "i2", ")", ";", "checkFields", "(", "UTF32_RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "UTF32_RECIPIENT_CC", ",", "UTF32_RECIPIENT_BCC", ",", "UTF32_SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "i2", ")", ";", "checkFields", "(", "UTF32_RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "UTF32_RECIPIENT_CC", ",", "UTF32_RECIPIENT_BCC", ",", "UTF32_SUBJECT", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testIntentSendPlainText", "(", ")", "throws", "MessagingException", ",", "Throwable", "{", "Intent", "intent", "=", "new", "Intent", "(", "Intent", ".", "ACTION_SEND", ")", ";", "intent", ".", "setType", "(", "\"", "<STR_LIT>", "\"", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_TEXT", ",", "BODY", ")", ";", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "final", "Intent", "i2", "=", "new", "Intent", "(", "intent", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "i2", ")", ";", "checkFields", "(", "null", ",", "null", ",", "null", ",", "null", ",", "BODY", ")", ";", "checkFocused", "(", "mToView", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "i2", ")", ";", "checkFields", "(", "null", ",", "null", ",", "null", ",", "null", ",", "BODY", ")", ";", "checkFocused", "(", "mToView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testBrowserMailToIntent", "(", ")", "throws", "MessagingException", ",", "Throwable", "{", "Intent", "intent", "=", "new", "Intent", "(", "Intent", ".", "ACTION_VIEW", ")", ";", "Uri", "uri", "=", "Uri", ".", "parse", "(", "\"", "<STR_LIT::>", "\"", "+", "RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ")", ";", "intent", ".", "setData", "(", "uri", ")", ";", "final", "MessageCompose", "a", "=", "getActivity", "(", ")", ";", "final", "Intent", "i2", "=", "new", "Intent", "(", "intent", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "i2", ")", ";", "checkFields", "(", "RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "a", ".", "initFromIntent", "(", "i2", ")", ";", "checkFields", "(", "RECIPIENT_TO", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "checkFocused", "(", "mMessageView", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkFields", "(", "String", "to", ",", "String", "cc", ",", "String", "bcc", ",", "String", "subject", ",", "String", "content", ")", "{", "String", "toText", "=", "mToView", ".", "getText", "(", ")", ".", "toString", "(", ")", ";", "if", "(", "to", "=", "=", "null", ")", "{", "assertEquals", "(", "0", ",", "toText", ".", "length", "(", ")", ")", ";", "}", "else", "{", "assertEquals", "(", "to", ",", "toText", ")", ";", "}", "String", "subjectText", "=", "mSubjectView", ".", "getText", "(", ")", ".", "toString", "(", ")", ";", "if", "(", "subject", "=", "=", "null", ")", "{", "assertEquals", "(", "0", ",", "subjectText", ".", "length", "(", ")", ")", ";", "}", "else", "{", "assertEquals", "(", "subject", ",", "subjectText", ")", ";", "}", "String", "contentText", "=", "mMessageView", ".", "getText", "(", ")", ".", "toString", "(", ")", ";", "if", "(", "content", "=", "=", "null", ")", "{", "assertEquals", "(", "0", ",", "contentText", ".", "length", "(", ")", ")", ";", "}", "else", "{", "assertEquals", "(", "content", ",", "contentText", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "checkFocused", "(", "View", "focused", ")", "{", "assertEquals", "(", "focused", "=", "=", "mToView", ",", "mToView", ".", "isFocused", "(", ")", ")", ";", "assertEquals", "(", "focused", "=", "=", "mSubjectView", ",", "mSubjectView", ".", "isFocused", "(", ")", ")", ";", "assertEquals", "(", "focused", "=", "=", "mMessageView", ",", "mMessageView", ".", "isFocused", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "resetViews", "(", ")", "{", "mToView", ".", "setText", "(", "null", ")", ";", "mSubjectView", ".", "setText", "(", "null", ")", ";", "mMessageView", ".", "setText", "(", "null", ")", ";", "}", "</s>"]
["<s>", "private", "Message", "buildTestMessage", "(", "String", "to", ",", "String", "sender", ",", "String", "subject", ",", "String", "content", ")", "throws", "MessagingException", "{", "Message", "message", "=", "new", "Message", "(", ")", ";", "if", "(", "to", "!", "=", "null", ")", "{", "message", ".", "mTo", "=", "Address", ".", "parseAndPack", "(", "to", ")", ";", "}", "if", "(", "sender", "!", "=", "null", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "sender", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "addresses", ".", "length", ">", "0", ")", ";", "message", ".", "mFrom", "=", "addresses", "[", "0", "]", ".", "pack", "(", ")", ";", "}", "message", ".", "mSubject", "=", "subject", ";", "if", "(", "content", "!", "=", "null", ")", "{", "message", ".", "mText", "=", "content", ";", "}", "return", "message", ";", "}", "</s>"]
["<s>", "@", "UiThreadTest", "public", "void", "testAddressTextView", "(", ")", "{", "MessageCompose", "messageCompose", "=", "getActivity", "(", ")", ";", "mToView", ".", "setValidator", "(", "new", "EmailAddressValidator", "(", ")", ")", ";", "mToView", ".", "setText", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mToView", ".", "performValidation", "(", ")", ";", "assertNotNull", "(", "mToView", ".", "getError", "(", ")", ")", ";", "assertFalse", "(", "messageCompose", ".", "isAddressAllValid", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mToView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "mToView", ".", "setText", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mToView", ".", "performValidation", "(", ")", ";", "assertNull", "(", "mToView", ".", "getError", "(", ")", ")", ";", "assertTrue", "(", "messageCompose", ".", "isAddressAllValid", "(", ")", ")", ";", "mToView", ".", "setText", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mToView", ".", "performValidation", "(", ")", ";", "assertNotNull", "(", "mToView", ".", "getError", "(", ")", ")", ";", "assertFalse", "(", "messageCompose", ".", "isAddressAllValid", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mToView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCommaInserting", "(", ")", "throws", "Throwable", "{", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ",", "false", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT:@>", "\"", ",", "\"", "\"", ",", "false", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ",", "false", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ",", "true", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ",", "true", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ",", "false", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ",", "true", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ",", "true", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ",", "false", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ",", "false", ")", ";", "checkCommaInsert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkCommaInsert", "(", "final", "String", "before", ",", "final", "String", "after", ",", "boolean", "expectComma", ")", "throws", "Throwable", "{", "String", "expect", "=", "new", "String", "(", "before", "+", "(", "expectComma", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "\"", ")", "+", "after", ")", ";", "runTestOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "mToView", ".", "setText", "(", "before", "+", "after", ")", ";", "mToView", ".", "setSelection", "(", "before", ".", "length", "(", ")", ")", ";", "}", "}", ")", ";", "getInstrumentation", "(", ")", ".", "sendStringSync", "(", "\"", "\"", ")", ";", "String", "result", "=", "mToView", ".", "getText", "(", ")", ".", "toString", "(", ")", ";", "assertEquals", "(", "expect", ",", "result", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "mToView", ".", "setText", "(", "before", "+", "after", ")", ";", "mToView", ".", "setSelection", "(", "before", ".", "length", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MessageViewTests", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "MessageView", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mContext", "=", "getInstrumentation", "(", ")", ".", "getTargetContext", "(", ")", ";", "Email", ".", "setServicesEnabled", "(", "mContext", ")", ";", "Intent", "i", "=", "new", "Intent", "(", ")", ".", "putExtra", "(", "EXTRA_MESSAGE_ID", ",", "Long", ".", "MIN_VALUE", ")", ".", "putExtra", "(", "EXTRA_MAILBOX_ID", ",", "Long", ".", "MIN_VALUE", ")", ";", "this", ".", "setActivityIntent", "(", "i", ")", ";", "MessagingController", "mockController", "=", "new", "MockMessagingController", "(", "getActivity", "(", ")", ".", "getApplication", "(", ")", ")", ";", "MessagingController", ".", "injectMockController", "(", "mockController", ")", ";", "final", "MessageView", "a", "=", "getActivity", "(", ")", ";", "mToView", "=", "(", "TextView", ")", "a", ".", "findViewById", "(", "R", ".", "id", ".", "to", ")", ";", "mSubjectView", "=", "(", "TextView", ")", "a", ".", "findViewById", "(", "R", ".", "id", ".", "subject", ")", ";", "mMessageContentView", "=", "(", "WebView", ")", "a", ".", "findViewById", "(", "R", ".", "id", ".", "message_content", ")", ";", "BinaryTempFileBody", ".", "setTempDirectory", "(", "getActivity", "(", ")", ".", "getCacheDir", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testPreconditions", "(", ")", "{", "assertNotNull", "(", "mToView", ")", ";", "assertEquals", "(", "0", ",", "mToView", ".", "length", "(", ")", ")", ";", "assertNotNull", "(", "mSubjectView", ")", ";", "assertEquals", "(", "0", ",", "mSubjectView", ".", "length", "(", ")", ")", ";", "assertNotNull", "(", "mMessageContentView", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testAttachmentWritePermissions", "(", ")", "throws", "FileNotFoundException", ",", "IOException", "{", "File", "file", "=", "null", ";", "try", "{", "if", "(", "!", "Environment", ".", "getExternalStorageState", "(", ")", ".", "equals", "(", "Environment", ".", "MEDIA_MOUNTED", ")", ")", "{", "return", ";", "}", "file", "=", "MessageView", ".", "createUniqueFile", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "OutputStream", "out", "=", "new", "FileOutputStream", "(", "file", ")", ";", "out", ".", "write", "(", "1", ")", ";", "out", ".", "close", "(", ")", ";", "}", "finally", "{", "try", "{", "if", "(", "file", "!", "=", "null", ")", "{", "if", "(", "file", ".", "exists", "(", ")", ")", "{", "file", ".", "delete", "(", ")", ";", "}", "}", "}", "catch", "(", "Exception", "e", ")", "{", "}", "}", "}", "</s>"]
["<s>", "@", "Suppress", "public", "void", "testUiRaceConditions", "(", ")", "{", "MessageView", "a", "=", "getActivity", "(", ")", ";", "a", ".", "onClick", "(", "a", ".", "findViewById", "(", "R", ".", "id", ".", "reply", ")", ")", ";", "a", ".", "onClick", "(", "a", ".", "findViewById", "(", "R", ".", "id", ".", "reply_all", ")", ")", ";", "a", ".", "onClick", "(", "a", ".", "findViewById", "(", "R", ".", "id", ".", "delete", ")", ")", ";", "a", ".", "onClick", "(", "a", ".", "findViewById", "(", "R", ".", "id", ".", "next", ")", ")", ";", "a", ".", "onClick", "(", "a", ".", "findViewById", "(", "R", ".", "id", ".", "previous", ")", ")", ";", "a", ".", "onClick", "(", "a", ".", "findViewById", "(", "R", ".", "id", ".", "show_pictures", ")", ")", ";", "a", ".", "handleMenuItem", "(", "R", ".", "id", ".", "delete", ")", ";", "a", ".", "handleMenuItem", "(", "R", ".", "id", ".", "reply", ")", ";", "a", ".", "handleMenuItem", "(", "R", ".", "id", ".", "reply_all", ")", ";", "a", ".", "handleMenuItem", "(", "R", ".", "id", ".", "forward", ")", ";", "a", ".", "handleMenuItem", "(", "R", ".", "id", ".", "mark_as_unread", ")", ";", "}", "</s>"]
["<s>", "private", "MockMessagingController", "(", "Application", "application", ")", "{", "super", "(", "application", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "tearDown", "(", ")", "throws", "Exception", "{", "if", "(", "mAccount", "!", "=", "null", ")", "{", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Account", ".", "CONTENT_URI", ",", "mAccountId", ")", ";", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "}", "super", ".", "tearDown", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkIntent", "(", "Intent", "i", ",", "Uri", "expectData", ",", "EmailContent", ".", "Account", "expectAccount", ",", "String", "expectFolder", ")", "{", "Uri", "resultUri", "=", "i", ".", "getData", "(", ")", ";", "assertEquals", "(", "expectData", ",", "resultUri", ")", ";", "long", "resultAccountId", "=", "i", ".", "getLongExtra", "(", "\"", "<STR_LIT>", "\"", ",", "-", "1", ")", ";", "long", "expectAccountId", "=", "(", "expectAccount", "!", "=", "null", ")", "?", "expectAccount", ".", "mId", ":", "-", "1", ";", "assertEquals", "(", "expectAccountId", ",", "resultAccountId", ")", ";", "String", "resultFolder", "=", "i", ".", "getStringExtra", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "expectFolder", ",", "resultFolder", ")", ";", "}", "</s>"]
["<s>", "private", "void", "createTestAccount", "(", ")", "{", "mAccount", "=", "new", "EmailContent", ".", "Account", "(", ")", ";", "mAccount", ".", "save", "(", "getContext", "(", ")", ")", ";", "mAccountId", "=", "mAccount", ".", "mId", ";", "}", "</s>"]
["<s>", "public", "MyContext", "(", "Context", "base", ")", "{", "super", "(", "base", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "startActivity", "(", "Intent", "i", ")", "{", "startActivityIntent", "=", "i", ";", "}", "</s>"]
["<s>", "public", "AccountSetupExchangeTests", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "AccountSetupExchange", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "setActivityIntent", "(", "i", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGoodUri", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "assertTrue", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testBadUriNoUser", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "assertFalse", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testBadUriNoPassword", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "assertFalse", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "UiThreadTest", "public", "void", "testGoodServerVariants", "(", ")", "{", "getActivityAndFields", "(", ")", ";", "assertTrue", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "mServerView", ".", "setText", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertTrue", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "UiThreadTest", "public", "void", "testBadServerVariants", "(", ")", "{", "getActivityAndFields", "(", ")", ";", "assertTrue", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "mServerView", ".", "setText", "(", "\"", "\"", ")", ";", "assertFalse", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "mServerView", ".", "setText", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertFalse", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "getActivityAndFields", "(", ")", "{", "mActivity", "=", "getActivity", "(", ")", ";", "mServerView", "=", "(", "EditText", ")", "mActivity", ".", "findViewById", "(", "R", ".", "id", ".", "account_server", ")", ";", "mNextButton", "=", "(", "Button", ")", "mActivity", ".", "findViewById", "(", "R", ".", "id", ".", "next", ")", ";", "}", "</s>"]
["<s>", "private", "Intent", "getTestIntent", "(", "String", "storeUriString", ")", "{", "EmailContent", ".", "Account", "account", "=", "new", "EmailContent", ".", "Account", "(", ")", ";", "account", ".", "setStoreUri", "(", "getInstrumentation", "(", ")", ".", "getTargetContext", "(", ")", ",", "storeUriString", ")", ";", "Intent", "i", "=", "new", "Intent", "(", "Intent", ".", "ACTION_MAIN", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "return", "i", ";", "}", "</s>"]
["<s>", "public", "AccountSetupOptionsTests", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "AccountSetupOptions", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testPushOptionPOP", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT:Name>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "boolean", "hasPush", "=", "frequencySpinnerHasValue", "(", "EmailContent", ".", "Account", ".", "CHECK_INTERVAL_PUSH", ")", ";", "assertFalse", "(", "hasPush", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testPushOptionIMAP", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT:Name>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "boolean", "hasPush", "=", "frequencySpinnerHasValue", "(", "EmailContent", ".", "Account", ".", "CHECK_INTERVAL_PUSH", ")", ";", "assertFalse", "(", "hasPush", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testPushOptionEAS", "(", ")", "{", "if", "(", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "\"", "<STR_LIT>", "\"", ",", "this", ".", "getInstrumentation", "(", ")", ".", "getTargetContext", "(", ")", ")", "=", "=", "null", ")", "{", "return", ";", "}", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT:Name>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "boolean", "hasPush", "=", "frequencySpinnerHasValue", "(", "EmailContent", ".", "Account", ".", "CHECK_INTERVAL_PUSH", ")", ";", "assertTrue", "(", "hasPush", ")", ";", "}", "</s>"]
["<s>", "private", "void", "getActivityAndFields", "(", ")", "{", "mActivity", "=", "getActivity", "(", ")", ";", "mCheckFrequencyView", "=", "(", "Spinner", ")", "mActivity", ".", "findViewById", "(", "R", ".", "id", ".", "account_check_frequency", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "frequencySpinnerHasValue", "(", "int", "value", ")", "{", "SpinnerAdapter", "sa", "=", "mCheckFrequencyView", ".", "getAdapter", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "sa", ".", "getCount", "(", ")", ";", "+", "+", "i", ")", "{", "SpinnerOption", "so", "=", "(", "SpinnerOption", ")", "sa", ".", "getItem", "(", "i", ")", ";", "if", "(", "so", "!", "=", "null", "&", "&", "(", "(", "Integer", ")", "so", ".", "value", ")", ".", "intValue", "(", ")", "=", "=", "value", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "private", "Intent", "getTestIntent", "(", "String", "name", ",", "String", "storeUri", ")", "{", "EmailContent", ".", "Account", "account", "=", "new", "EmailContent", ".", "Account", "(", ")", ";", "account", ".", "setSenderName", "(", "name", ")", ";", "account", ".", "setStoreUri", "(", "getInstrumentation", "(", ")", ".", "getTargetContext", "(", ")", ",", "storeUri", ")", ";", "Intent", "i", "=", "new", "Intent", "(", "Intent", ".", "ACTION_MAIN", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "return", "i", ";", "}", "</s>"]
["<s>", "public", "AccountSettingsTests", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "AccountSettings", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mContext", "=", "this", ".", "getInstrumentation", "(", ")", ".", "getTargetContext", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "tearDown", "(", ")", "throws", "Exception", "{", "if", "(", "mAccount", "!", "=", "null", ")", "{", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "mAccountId", ")", ";", "mContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "}", "super", ".", "tearDown", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testPushOptionPOP", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT:Name>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "boolean", "hasPush", "=", "frequencySpinnerHasValue", "(", "Account", ".", "CHECK_INTERVAL_PUSH", ")", ";", "assertFalse", "(", "hasPush", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testPushOptionIMAP", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT:Name>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "boolean", "hasPush", "=", "frequencySpinnerHasValue", "(", "Account", ".", "CHECK_INTERVAL_PUSH", ")", ";", "assertFalse", "(", "hasPush", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testPushOptionEAS", "(", ")", "{", "if", "(", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "\"", "<STR_LIT>", "\"", ",", "this", ".", "getInstrumentation", "(", ")", ".", "getTargetContext", "(", ")", ")", "=", "=", "null", ")", "{", "return", ";", "}", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT:Name>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "boolean", "hasPush", "=", "frequencySpinnerHasValue", "(", "Account", ".", "CHECK_INTERVAL_PUSH", ")", ";", "assertTrue", "(", "hasPush", ")", ";", "}", "</s>"]
["<s>", "private", "void", "getActivityAndFields", "(", ")", "{", "mActivity", "=", "getActivity", "(", ")", ";", "mCheckFrequency", "=", "(", "ListPreference", ")", "mActivity", ".", "findPreference", "(", "PREFERENCE_FREQUENCY", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "frequencySpinnerHasValue", "(", "int", "value", ")", "{", "CharSequence", "[", "]", "values", "=", "mCheckFrequency", ".", "getEntryValues", "(", ")", ";", "for", "(", "CharSequence", "listValue", ":", "values", ")", "{", "if", "(", "listValue", "!", "=", "null", "&", "&", "Integer", ".", "parseInt", "(", "listValue", ".", "toString", "(", ")", ")", "=", "=", "value", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "private", "Intent", "getTestIntent", "(", "String", "name", ",", "String", "storeUri", ",", "String", "senderUri", ")", "{", "mAccount", "=", "new", "Account", "(", ")", ";", "mAccount", ".", "setSenderName", "(", "name", ")", ";", "mAccount", ".", "mEmailAddress", "=", "\"", "<STR_LIT>", "\"", ";", "mAccount", ".", "setStoreUri", "(", "mContext", ",", "storeUri", ")", ";", "mAccount", ".", "setSenderUri", "(", "mContext", ",", "senderUri", ")", ";", "mAccount", ".", "save", "(", "mContext", ")", ";", "mAccountId", "=", "mAccount", ".", "mId", ";", "Intent", "i", "=", "new", "Intent", "(", "Intent", ".", "ACTION_MAIN", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT_ID", ",", "mAccountId", ")", ";", "return", "i", ";", "}", "</s>"]
["<s>", "public", "AccountSetupNamesTests", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "AccountSetupNames", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mContext", "=", "this", ".", "getInstrumentation", "(", ")", ".", "getTargetContext", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "tearDown", "(", ")", "throws", "Exception", "{", "if", "(", "mAccount", "!", "=", "null", ")", "{", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Account", ".", "CONTENT_URI", ",", "mAccountId", ")", ";", "mContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "}", "super", ".", "tearDown", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGoodAccountName", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "assertTrue", "(", "mDoneButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testBadAccountName", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "\"", ")", ";", "this", ".", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "assertFalse", "(", "mDoneButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "getActivityAndFields", "(", ")", "{", "mActivity", "=", "getActivity", "(", ")", ";", "mDoneButton", "=", "(", "Button", ")", "mActivity", ".", "findViewById", "(", "R", ".", "id", ".", "done", ")", ";", "}", "</s>"]
["<s>", "private", "Intent", "getTestIntent", "(", "String", "name", ")", "{", "mAccount", "=", "new", "EmailContent", ".", "Account", "(", ")", ";", "mAccount", ".", "setSenderName", "(", "name", ")", ";", "mAccount", ".", "save", "(", "mContext", ")", ";", "mAccountId", "=", "mAccount", ".", "mId", ";", "Intent", "i", "=", "new", "Intent", "(", "Intent", ".", "ACTION_MAIN", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT_ID", ",", "mAccountId", ")", ";", "return", "i", ";", "}", "</s>"]
["<s>", "public", "AccountSetupIncomingTests", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "AccountSetupIncoming", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "setActivityIntent", "(", "i", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGoodUri", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "assertTrue", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testBadUriNoUser", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "assertFalse", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testBadUriNoPassword", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "assertFalse", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGoodUriNoPort", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "assertTrue", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "UiThreadTest", "public", "void", "testGoodServerVariants", "(", ")", "{", "getActivityAndFields", "(", ")", ";", "assertTrue", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "mServerView", ".", "setText", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertTrue", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "UiThreadTest", "public", "void", "testBadServerVariants", "(", ")", "{", "getActivityAndFields", "(", ")", ";", "assertTrue", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "mServerView", ".", "setText", "(", "\"", "\"", ")", ";", "assertFalse", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "mServerView", ".", "setText", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertFalse", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "getActivityAndFields", "(", ")", "{", "mActivity", "=", "getActivity", "(", ")", ";", "mServerView", "=", "(", "EditText", ")", "mActivity", ".", "findViewById", "(", "R", ".", "id", ".", "account_server", ")", ";", "mNextButton", "=", "(", "Button", ")", "mActivity", ".", "findViewById", "(", "R", ".", "id", ".", "next", ")", ";", "}", "</s>"]
["<s>", "private", "Intent", "getTestIntent", "(", "String", "storeUriString", ")", "{", "EmailContent", ".", "Account", "account", "=", "new", "EmailContent", ".", "Account", "(", ")", ";", "account", ".", "setStoreUri", "(", "getInstrumentation", "(", ")", ".", "getTargetContext", "(", ")", ",", "storeUriString", ")", ";", "Intent", "i", "=", "new", "Intent", "(", "Intent", ".", "ACTION_MAIN", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "return", "i", ";", "}", "</s>"]
["<s>", "public", "AccountSetupOutgoingTests", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ",", "AccountSetupOutgoing", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "setActivityIntent", "(", "i", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGoodUri", "(", ")", "{", "getActivityAndFields", "(", ")", ";", "assertTrue", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testBadUriNoUser", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "assertFalse", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testBadUriNoPassword", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "assertFalse", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGoodUriNoPort", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ")", ";", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "assertTrue", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "UiThreadTest", "public", "void", "testGoodServerVariants", "(", ")", "{", "getActivityAndFields", "(", ")", ";", "assertTrue", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "mServerView", ".", "setText", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertTrue", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "UiThreadTest", "public", "void", "testBadServerVariants", "(", ")", "{", "getActivityAndFields", "(", ")", ";", "assertTrue", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "mServerView", ".", "setText", "(", "\"", "\"", ")", ";", "assertFalse", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "mServerView", ".", "setText", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertFalse", "(", "mNextButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "getActivityAndFields", "(", ")", "{", "mActivity", "=", "getActivity", "(", ")", ";", "mServerView", "=", "(", "EditText", ")", "mActivity", ".", "findViewById", "(", "R", ".", "id", ".", "account_server", ")", ";", "mNextButton", "=", "(", "Button", ")", "mActivity", ".", "findViewById", "(", "R", ".", "id", ".", "next", ")", ";", "}", "</s>"]
["<s>", "private", "Intent", "getTestIntent", "(", "String", "senderUriString", ")", "{", "EmailContent", ".", "Account", "account", "=", "new", "EmailContent", ".", "Account", "(", ")", ";", "account", ".", "setSenderUri", "(", "this", ".", "getInstrumentation", "(", ")", ".", "getTargetContext", "(", ")", ",", "senderUriString", ")", ";", "Intent", "i", "=", "new", "Intent", "(", "Intent", ".", "ACTION_MAIN", ")", ";", "i", ".", "putExtra", "(", "\"", "<STR_LIT>", "\"", ",", "account", ")", ";", "return", "i", ";", "}", "</s>"]
["<s>", "public", "AccountSetupAccountTypeUnitTests", "(", ")", "{", "super", "(", "AccountSetupAccountType", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mContext", "=", "this", ".", "getInstrumentation", "(", ")", ".", "getTargetContext", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "tearDown", "(", ")", "throws", "Exception", "{", "for", "(", "Account", "account", ":", "mAccounts", ")", "{", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "account", ".", "mId", ")", ";", "mContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "}", "super", ".", "tearDown", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testStoreTypeLimits", "(", ")", "{", "EmailContent", ".", "Account", "acct1", "=", "createTestAccount", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "EmailContent", ".", "Account", "acct2", "=", "createTestAccount", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "EmailContent", ".", "Account", "acct3", "=", "createTestAccount", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "AccountSetupAccountType", "activity", "=", "startActivity", "(", "getTestIntent", "(", "acct1", ")", ",", "null", ",", "null", ")", ";", "Store", ".", "StoreInfo", "info", "=", "new", "Store", ".", "StoreInfo", "(", ")", ";", "info", ".", "mAccountInstanceLimit", "=", "-", "1", ";", "info", ".", "mScheme", "=", "\"", "<STR_LIT:1>", "\"", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "activity", ".", "checkAccountInstanceLimit", "(", "info", ")", ")", ";", "info", ".", "mAccountInstanceLimit", "=", "<NUM_LIT:3>", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "activity", ".", "checkAccountInstanceLimit", "(", "info", ")", ")", ";", "info", ".", "mAccountInstanceLimit", "=", "<NUM_LIT:2>", ";", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "activity", ".", "checkAccountInstanceLimit", "(", "info", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testEasOffered", "(", ")", "{", "Account", "acct1", "=", "createTestAccount", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "AccountSetupAccountType", "activity", "=", "startActivity", "(", "getTestIntent", "(", "acct1", ")", ",", "null", ",", "null", ")", ";", "View", "exchangeButton", "=", "activity", ".", "findViewById", "(", "R", ".", "id", ".", "exchange", ")", ";", "assertEquals", "(", "View", ".", "VISIBLE", ",", "exchangeButton", ".", "getVisibility", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "Account", "createTestAccount", "(", "String", "scheme", ")", "{", "Account", "account", "=", "new", "Account", "(", ")", ";", "account", ".", "setStoreUri", "(", "mContext", ",", "scheme", "+", "\"", "<STR_LIT>", "\"", ")", ";", "account", ".", "save", "(", "mContext", ")", ";", "mAccounts", ".", "add", "(", "account", ")", ";", "return", "account", ";", "}", "</s>"]
["<s>", "private", "Intent", "getTestIntent", "(", "EmailContent", ".", "Account", "account", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "Intent", ".", "ACTION_MAIN", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "return", "i", ";", "}", "</s>"]
["<s>", "public", "void", "testFlagsUpperCase", "(", ")", "{", "for", "(", "Flag", "flag", ":", "Flag", ".", "values", "(", ")", ")", "{", "String", "name", "=", "flag", ".", "name", "(", ")", ";", "assertEquals", "(", "name", ".", "toUpperCase", "(", ")", ",", "name", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "Uri", "contentUri", "(", "long", "attachmentId", ",", "EmailContent", ".", "Account", "account", ")", "{", "return", "AttachmentProvider", ".", "getAttachmentUri", "(", "account", ".", "mId", ",", "attachmentId", ")", ";", "}", "</s>"]
["<s>", "public", "static", "BodyPart", "bodyPart", "(", "String", "mimeType", ",", "String", "contentId", ")", "throws", "MessagingException", "{", "final", "MimeBodyPart", "bp", "=", "new", "MimeBodyPart", "(", "null", ",", "mimeType", ")", ";", "if", "(", "contentId", "!", "=", "null", ")", "{", "bp", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_ID", ",", "contentId", ")", ";", "}", "return", "bp", ";", "}", "</s>"]
["<s>", "public", "static", "BodyPart", "textPart", "(", "String", "mimeType", ",", "String", "text", ")", "throws", "MessagingException", "{", "final", "TextBody", "textBody", "=", "new", "TextBody", "(", "text", ")", ";", "final", "MimeBodyPart", "textPart", "=", "new", "MimeBodyPart", "(", "textBody", ")", ";", "textPart", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "mimeType", ")", ";", "return", "textPart", ";", "}", "</s>"]
["<s>", "public", "static", "BodyPart", "imagePart", "(", "String", "mimeType", ",", "String", "contentId", ",", "long", "attachmentId", ",", "LocalStore", "store", ")", "throws", "MessagingException", ",", "IOException", "{", "final", "BinaryTempFileBody", "imageBody", "=", "new", "BinaryTempFileBody", "(", ")", ";", "final", "LocalStore", ".", "LocalAttachmentBodyPart", "imagePart", "=", "store", ".", "new", "LocalAttachmentBodyPart", "(", "imageBody", ",", "attachmentId", ")", ";", "imagePart", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "mimeType", ")", ";", "if", "(", "contentId", "!", "=", "null", ")", "{", "imagePart", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_ID", ",", "contentId", ")", ";", "}", "return", "imagePart", ";", "}", "</s>"]
["<s>", "public", "MultipartBuilder", "(", "String", "mimeType", ")", "{", "this", "(", "mimeType", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "MultipartBuilder", "(", "String", "mimeType", ",", "String", "boundary", ")", "{", "mContentType", "=", "mimeType", "+", "\"", "<STR_LIT>", "\"", "+", "boundary", ";", "}", "</s>"]
["<s>", "public", "MultipartBuilder", "addBodyPart", "(", "final", "BodyPart", "bodyPart", ")", "{", "mParts", ".", "add", "(", "bodyPart", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Multipart", "build", "(", ")", "throws", "MessagingException", "{", "final", "MimeMultipart", "mp", "=", "new", "MimeMultipart", "(", "mContentType", ")", ";", "for", "(", "BodyPart", "p", ":", "mParts", ")", "{", "mp", ".", "addBodyPart", "(", "p", ")", ";", "}", "return", "mp", ";", "}", "</s>"]
["<s>", "public", "BodyPart", "buildBodyPart", "(", ")", "throws", "MessagingException", "{", "final", "BodyPart", "bp", "=", "new", "MimeBodyPart", "(", ")", ";", "bp", ".", "setBody", "(", "this", ".", "build", "(", ")", ")", ";", "return", "bp", ";", "}", "</s>"]
["<s>", "public", "MessageBuilder", "(", ")", "{", "}", "</s>"]
["<s>", "public", "MessageBuilder", "setBody", "(", "final", "Body", "body", ")", "{", "mBody", "=", "body", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Message", "build", "(", ")", "throws", "MessagingException", "{", "final", "MimeMessage", "msg", "=", "new", "MimeMessage", "(", ")", ";", "if", "(", "mBody", "=", "=", "null", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "msg", ".", "setBody", "(", "mBody", ")", ";", "return", "msg", ";", "}", "</s>"]
["<s>", "public", "TextBuilder", "(", "String", "preamble", ")", "{", "mBuilder", ".", "append", "(", "preamble", ")", ";", "}", "</s>"]
["<s>", "public", "TextBuilder", "addCidImg", "(", "String", "contentId", ")", "{", "return", "addTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT::>", "\"", "+", "contentId", ")", ";", "}", "</s>"]
["<s>", "public", "TextBuilder", "addUidImg", "(", "Uri", "contentUri", ")", "{", "return", "addTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "contentUri", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "TextBuilder", "addTag", "(", "String", "tag", ",", "String", "attribute", ",", "String", "value", ")", "{", "return", "addText", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", ",", "tag", ",", "attribute", ",", "value", ")", ")", ";", "}", "</s>"]
["<s>", "public", "TextBuilder", "addText", "(", "String", "text", ")", "{", "mBuilder", ".", "append", "(", "text", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "String", "build", "(", "String", "epilogue", ")", "{", "mBuilder", ".", "append", "(", "epilogue", ")", ";", "return", "mBuilder", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testStoreLookupPOP", "(", ")", "throws", "MessagingException", "{", "final", "String", "storeUri", "=", "\"", "<STR_LIT>", "\"", ";", "Store", ".", "StoreInfo", "info", "=", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "storeUri", ",", "getContext", "(", ")", ")", ";", "assertNotNull", "(", "\"", "<STR_LIT>", "\"", ",", "info", ")", ";", "assertNotNull", "(", "\"", "<STR_LIT>", "\"", ",", "info", ".", "mScheme", ")", ";", "assertNotNull", "(", "\"", "<STR_LIT>", "\"", ",", "info", ".", "mClassName", ")", ";", "assertFalse", "(", "info", ".", "mPushSupported", ")", ";", "assertEquals", "(", "Email", ".", "VISIBLE_LIMIT_DEFAULT", ",", "info", ".", "mVisibleLimitDefault", ")", ";", "assertEquals", "(", "Email", ".", "VISIBLE_LIMIT_INCREMENT", ",", "info", ".", "mVisibleLimitIncrement", ")", ";", "Store", "store", "=", "Store", ".", "getInstance", "(", "storeUri", ",", "getContext", "(", ")", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testStoreLookupIMAP", "(", ")", "throws", "MessagingException", "{", "final", "String", "storeUri", "=", "\"", "<STR_LIT>", "\"", ";", "Store", ".", "StoreInfo", "info", "=", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "storeUri", ",", "getContext", "(", ")", ")", ";", "assertNotNull", "(", "\"", "<STR_LIT>", "\"", ",", "info", ")", ";", "assertNotNull", "(", "\"", "<STR_LIT>", "\"", ",", "info", ".", "mScheme", ")", ";", "assertNotNull", "(", "\"", "<STR_LIT>", "\"", ",", "info", ".", "mClassName", ")", ";", "assertFalse", "(", "info", ".", "mPushSupported", ")", ";", "assertEquals", "(", "Email", ".", "VISIBLE_LIMIT_DEFAULT", ",", "info", ".", "mVisibleLimitDefault", ")", ";", "assertEquals", "(", "Email", ".", "VISIBLE_LIMIT_INCREMENT", ",", "info", ".", "mVisibleLimitIncrement", ")", ";", "Store", "store", "=", "Store", ".", "getInstance", "(", "storeUri", ",", "getContext", "(", ")", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testStoreLookupEAS", "(", ")", "throws", "MessagingException", "{", "final", "String", "storeUri", "=", "\"", "<STR_LIT>", "\"", ";", "Store", ".", "StoreInfo", "info", "=", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "storeUri", ",", "getContext", "(", ")", ")", ";", "if", "(", "info", "!", "=", "null", ")", "{", "assertNotNull", "(", "\"", "<STR_LIT>", "\"", ",", "info", ".", "mScheme", ")", ";", "assertNotNull", "(", "\"", "<STR_LIT>", "\"", ",", "info", ".", "mClassName", ")", ";", "assertTrue", "(", "info", ".", "mPushSupported", ")", ";", "assertEquals", "(", "-", "1", ",", "info", ".", "mVisibleLimitDefault", ")", ";", "assertEquals", "(", "-", "1", ",", "info", ".", "mVisibleLimitIncrement", ")", ";", "Store", "store", "=", "Store", ".", "getInstance", "(", "storeUri", ",", "getContext", "(", ")", ",", "null", ")", ";", "}", "else", "{", "try", "{", "Store", "store", "=", "Store", ".", "getInstance", "(", "storeUri", ",", "getContext", "(", ")", ",", "null", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "}", "}", "</s>"]
["<s>", "public", "void", "testStoreLookupUnknown", "(", ")", "{", "final", "String", "storeUri", "=", "\"", "<STR_LIT>", "\"", ";", "Store", ".", "StoreInfo", "info", "=", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "storeUri", ",", "getContext", "(", ")", ")", ";", "assertNull", "(", "info", ")", ";", "try", "{", "Store", "store", "=", "Store", ".", "getInstance", "(", "storeUri", ",", "getContext", "(", ")", ",", "null", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mAddress1", "=", "new", "Address", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ";", "mAddress2", "=", "new", "Address", "(", "\"", "<STR_LIT:2>", "\"", ",", "\"", "\"", ")", ";", "mAddress3", "=", "new", "Address", "(", "\"", "<STR_LIT:3>", "\"", ",", "null", ")", ";", "}", "</s>"]
["<s>", "private", "String", "padEncoded", "(", "String", "s", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "s", "+", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "public", "void", "testBase64Decode", "(", ")", "{", "String", "testString", "=", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:0>", "<STR_LIT:\\\">", "\"", ";", "String", "base64Encoded", "[", "]", "=", "{", "\"", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ";", "int", "len", "=", "testString", ".", "length", "(", ")", ";", "for", "(", "int", "i", "=", "1", ";", "i", "<", "=", "len", ";", "+", "+", "i", ")", "{", "String", "encoded", "=", "padEncoded", "(", "base64Encoded", "[", "i", "]", ")", ";", "String", "decoded", "=", "DecoderUtil", ".", "decodeEncodedWords", "(", "encoded", ")", ";", "String", "prefix", "=", "testString", ".", "substring", "(", "0", ",", "i", ")", ";", "assertEquals", "(", "\"", "\"", "+", "i", ",", "prefix", ",", "decoded", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testSetAddress", "(", ")", "{", "String", "bareAddress", "=", "\"", "<STR_LIT>", "\"", ";", "String", "bracketAddress", "=", "\"", "<STR_LIT>", "\"", ";", "Address", "address", "=", "new", "Address", "(", "bareAddress", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "address", ".", "getAddress", "(", ")", ")", ";", "address", ".", "setAddress", "(", "bracketAddress", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "address", ".", "getAddress", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testNullPersonal", "(", ")", "{", "Address", "address", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "address", ".", "getPersonal", "(", ")", ")", ";", "address", ".", "setPersonal", "(", "null", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "address", ".", "getPersonal", "(", ")", ")", ";", "address", ".", "setPersonal", "(", "\"", "\"", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "address", ".", "getPersonal", "(", ")", ")", ";", "address", ".", "setPersonal", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "\"", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "address", ".", "getPersonal", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSetPersonal", "(", ")", "{", "Address", "address", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "address", ".", "getPersonal", "(", ")", ")", ";", "address", ".", "setPersonal", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "address", ".", "getPersonal", "(", ")", ")", ";", "address", ".", "setPersonal", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "address", ".", "getPersonal", "(", ")", ")", ";", "address", ".", "setPersonal", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "address", ".", "getPersonal", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSetPersonalMultipleEncodings", "(", ")", "{", "Address", "address", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "address", ".", "getPersonal", "(", ")", ")", ";", "address", ".", "setPersonal", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "address", ".", "getPersonal", "(", ")", ")", ";", "address", ".", "setPersonal", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "address", ".", "getPersonal", "(", ")", ")", ";", "address", ".", "setPersonal", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "address", ".", "getPersonal", "(", ")", ")", ";", "address", ".", "setPersonal", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "address", ".", "getPersonal", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testEmptyParse", "(", ")", "{", "Address", "[", "]", "result", ";", "result", "=", "Address", ".", "parse", "(", "null", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "result", "!", "=", "null", "&", "&", "result", ".", "length", "=", "=", "0", ")", ";", "result", "=", "Address", ".", "parse", "(", "\"", "\"", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "result", "!", "=", "null", "&", "&", "result", ".", "length", "=", "=", "0", ")", ";", "result", "=", "Address", ".", "parse", "(", "\"", "\"", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "result", "!", "=", "null", "&", "&", "result", ".", "length", "=", "=", "0", ")", ";", "result", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "result", "!", "=", "null", "&", "&", "result", ".", "length", "=", "=", "0", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSingleParse", "(", ")", "{", "Address", "[", "]", "address1", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "address1", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "address1", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "address1", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "Address", "[", "]", "address2", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "address2", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "address2", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "address2", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "Address", "[", "]", "address3", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "address3", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "address3", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "address3", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "Address", "[", "]", "address4", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "address4", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "address4", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "address4", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testIllegalParse", "(", ")", "{", "Address", "[", "]", "address1", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "0", ",", "address1", ".", "length", ")", ";", "Address", "[", "]", "address2", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "0", ",", "address2", ".", "length", ")", ";", "Address", "[", "]", "address3", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "0", ",", "address3", ".", "length", ")", ";", "Address", "[", "]", "address4", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "0", ",", "address4", ".", "length", ")", ";", "Address", "[", "]", "address5", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "0", ",", "address5", ".", "length", ")", ";", "Address", "[", "]", "address6", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "0", ",", "address6", ".", "length", ")", ";", "Address", "[", "]", "address7", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "0", ",", "address7", ".", "length", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testParsingAddress", "(", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "addresses", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "1", "]", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "1", "]", ".", "getPersonal", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testParsingSimpleName", "(", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "addresses", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "1", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "1", "]", ".", "getPersonal", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testParsingUtf16Name", "(", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "addresses", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "addresses", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "1", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "addresses", "[", "1", "]", ".", "getPersonal", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testParsingUtf32Name", "(", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "addresses", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "addresses", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "1", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "addresses", "[", "1", "]", ".", "getPersonal", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testParseMulti", "(", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "MULTI_ADDRESSES_LIST", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "MULTI_ADDRESSES_COUNT", ",", "addresses", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "1", "]", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "1", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:2>", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:2>", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:3>", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:3>", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:4>", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "addresses", "[", "<NUM_LIT:4>", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:5>", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:5>", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:6>", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:6>", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:7>", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:7>", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:8>", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:8>", "]", ".", "getPersonal", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testToStringSingle", "(", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "MULTI_ADDRESSES_LIST", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "MULTI_ADDRESSES_COUNT", ",", "addresses", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "0", "]", ".", "toString", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "1", "]", ".", "toString", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:2>", "]", ".", "toString", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:3>", "]", ".", "toString", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:4>", "]", ".", "toString", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:5>", "]", ".", "toString", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:6>", "]", ".", "toString", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:7>", "]", ".", "toString", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "addresses", "[", "<NUM_LIT:8>", "]", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testToStringMulti", "(", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "MULTI_ADDRESSES_LIST", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "MULTI_ADDRESSES_COUNT", ",", "addresses", ".", "length", ")", ";", "String", "line", "=", "Address", ".", "toString", "(", "addresses", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "line", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testParsingQuotedEncodedName", "(", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "addresses", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "addresses", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "addresses", "[", "1", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "addresses", "[", "1", "]", ".", "getPersonal", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testToHeaderSingle", "(", ")", "{", "Address", "noName1", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Address", "noName2", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "Address", "simpleName", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Address", "dquoteName", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Address", "quotedName", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "Address", "utf16Name", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "Address", "utf32Name", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "noName1", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "noName1", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "noName2", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "noName2", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "simpleName", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "simpleName", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "dquoteName", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "dquoteName", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "quotedName", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "quotedName", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "utf16Name", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "utf16Name", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "utf32Name", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "utf32Name", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "noName1", ".", "toHeader", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "noName2", ".", "toHeader", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "simpleName", ".", "toHeader", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "dquoteName", ".", "toHeader", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "quotedName", ".", "toHeader", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "utf16Name", ".", "toHeader", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "utf32Name", ".", "toHeader", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testToHeaderMulti", "(", ")", "{", "Address", "noName1", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Address", "noName2", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "Address", "simpleName", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Address", "dquoteName", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Address", "quotedName", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "Address", "utf16Name", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "Address", "utf32Name", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "noName1", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "noName1", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "noName2", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "noName2", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "simpleName", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "simpleName", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "dquoteName", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "dquoteName", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "quotedName", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "quotedName", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "utf16Name", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "utf16Name", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "utf32Name", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "utf32Name", ".", "getPersonal", "(", ")", ")", ";", "Address", "[", "]", "addresses", "=", "new", "Address", "[", "]", "{", "noName1", ",", "noName2", ",", "simpleName", ",", "dquoteName", ",", "quotedName", ",", "utf16Name", ",", "utf32Name", ",", "}", ";", "String", "line", "=", "Address", ".", "toHeader", "(", "addresses", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "line", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testToFriendlySingle", "(", ")", "{", "assertEquals", "(", "\"", "<STR_LIT:1>", "\"", ",", "mAddress1", ".", "toFriendly", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:2>", "\"", ",", "mAddress2", ".", "toFriendly", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:3>", "\"", ",", "mAddress3", ".", "toFriendly", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testToFriendlyArray", "(", ")", "{", "Address", "[", "]", "list1", "=", "null", ";", "Address", "[", "]", "list2", "=", "new", "Address", "[", "0", "]", ";", "Address", "[", "]", "list3", "=", "new", "Address", "[", "]", "{", "mAddress1", "}", ";", "Address", "[", "]", "list4", "=", "new", "Address", "[", "]", "{", "mAddress1", ",", "mAddress2", ",", "mAddress3", "}", ";", "assertEquals", "(", "null", ",", "Address", ".", "toFriendly", "(", "list1", ")", ")", ";", "assertEquals", "(", "null", ",", "Address", ".", "toFriendly", "(", "list2", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:1>", "\"", ",", "Address", ".", "toFriendly", "(", "list3", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Address", ".", "toFriendly", "(", "list4", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testEmptyPack", "(", ")", "{", "String", "result", ";", "result", "=", "Address", ".", "pack", "(", "null", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "result", ")", ";", "result", "=", "Address", ".", "pack", "(", "new", "Address", "[", "]", "{", "}", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ",", "result", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testEmptyUnpack", "(", ")", "{", "Address", "[", "]", "result", ";", "result", "=", "Address", ".", "unpack", "(", "null", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "result", "!", "=", "null", "&", "&", "result", ".", "length", "=", "=", "0", ")", ";", "result", "=", "Address", ".", "unpack", "(", "\"", "\"", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "result", "!", "=", "null", "&", "&", "result", ".", "length", "=", "=", "0", ")", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "addressEquals", "(", "Address", "a1", ",", "Address", "a2", ")", "{", "if", "(", "!", "a1", ".", "equals", "(", "a2", ")", ")", "{", "return", "false", ";", "}", "final", "String", "displayName1", "=", "a1", ".", "getPersonal", "(", ")", ";", "final", "String", "displayName2", "=", "a2", ".", "getPersonal", "(", ")", ";", "if", "(", "displayName1", "=", "=", "null", ")", "{", "return", "displayName2", "=", "=", "null", ";", "}", "else", "{", "return", "displayName1", ".", "equals", "(", "displayName2", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "boolean", "addressArrayEquals", "(", "Address", "[", "]", "array1", ",", "Address", "[", "]", "array2", ")", "{", "if", "(", "array1", ".", "length", "!", "=", "array2", ".", "length", ")", "{", "return", "false", ";", "}", "for", "(", "int", "i", "=", "array1", ".", "length", "-", "1", ";", "i", ">", "=", "0", ";", "-", "-", "i", ")", "{", "if", "(", "!", "addressEquals", "(", "array1", "[", "i", "]", ",", "array2", "[", "i", "]", ")", ")", "{", "return", "false", ";", "}", "}", "return", "true", ";", "}", "</s>"]
["<s>", "public", "void", "testPackUnpack", "(", ")", "{", "for", "(", "Address", "[", "]", "list", ":", "PACK_CASES", ")", "{", "String", "packed", "=", "Address", ".", "pack", "(", "list", ")", ";", "assertTrue", "(", "packed", ",", "addressArrayEquals", "(", "list", ",", "Address", ".", "unpack", "(", "packed", ")", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testLegacyPackUnpack", "(", ")", "{", "for", "(", "Address", "[", "]", "list", ":", "PACK_CASES", ")", "{", "String", "packed", "=", "legacyPack", "(", "list", ")", ";", "assertTrue", "(", "packed", ",", "addressArrayEquals", "(", "list", ",", "Address", ".", "legacyUnpack", "(", "packed", ")", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testUnpackToString", "(", ")", "{", "assertNull", "(", "Address", ".", "unpackToString", "(", "null", ")", ")", ";", "assertNull", "(", "Address", ".", "unpackToString", "(", "\"", "\"", ")", ")", ";", "for", "(", "Address", "[", "]", "list", ":", "PACK_CASES", ")", "{", "String", "packed", "=", "Address", ".", "pack", "(", "list", ")", ";", "String", "s1", "=", "Address", ".", "unpackToString", "(", "packed", ")", ";", "String", "s2", "=", "Address", ".", "toString", "(", "Address", ".", "unpack", "(", "packed", ")", ")", ";", "assertEquals", "(", "s2", ",", "s2", ",", "s1", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testParseAndPack", "(", ")", "{", "String", "s1", "=", "Address", ".", "parseAndPack", "(", "MULTI_ADDRESSES_LIST", ")", ";", "String", "s2", "=", "Address", ".", "pack", "(", "Address", ".", "parse", "(", "MULTI_ADDRESSES_LIST", ")", ")", ";", "assertEquals", "(", "s2", ",", "s1", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSinglePack", "(", ")", "{", "Address", "[", "]", "addrArray", "=", "new", "Address", "[", "1", "]", ";", "for", "(", "Address", "address", ":", "new", "Address", "[", "]", "{", "PACK_ADDR_1", ",", "PACK_ADDR_2", ",", "PACK_ADDR_3", "}", ")", "{", "String", "packed1", "=", "address", ".", "pack", "(", ")", ";", "addrArray", "[", "0", "]", "=", "address", ";", "String", "packed2", "=", "Address", ".", "pack", "(", "addrArray", ")", ";", "assertEquals", "(", "packed1", ",", "packed2", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testUnpackFirst", "(", ")", "{", "assertNull", "(", "Address", ".", "unpackFirst", "(", "null", ")", ")", ";", "assertNull", "(", "Address", ".", "unpackFirst", "(", "\"", "\"", ")", ")", ";", "for", "(", "Address", "[", "]", "list", ":", "PACK_CASES", ")", "{", "String", "packed", "=", "Address", ".", "pack", "(", "list", ")", ";", "Address", "[", "]", "array", "=", "Address", ".", "unpack", "(", "packed", ")", ";", "Address", "first", "=", "Address", ".", "unpackFirst", "(", "packed", ")", ";", "assertTrue", "(", "packed", ",", "addressEquals", "(", "array", "[", "0", "]", ",", "first", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testIsValidAddress", "(", ")", "{", "String", "notValid", "[", "]", "=", "{", "\"", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:@>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ";", "String", "valid", "[", "]", "=", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ";", "for", "(", "String", "address", ":", "notValid", ")", "{", "assertTrue", "(", "address", ",", "!", "Address", ".", "isValidAddress", "(", "address", ")", ")", ";", "}", "for", "(", "String", "address", ":", "valid", ")", "{", "assertTrue", "(", "address", ",", "Address", ".", "isValidAddress", "(", "address", ")", ")", ";", "}", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "Address", ".", "isAllValid", "(", "\"", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "legacyPack", "(", "Address", "[", "]", "addresses", ")", "{", "if", "(", "addresses", "=", "=", "null", ")", "{", "return", "null", ";", "}", "else", "if", "(", "addresses", ".", "length", "=", "=", "0", ")", "{", "return", "\"", "\"", ";", "}", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "addresses", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "Address", "address", "=", "addresses", "[", "i", "]", ";", "try", "{", "sb", ".", "append", "(", "URLEncoder", ".", "encode", "(", "address", ".", "getAddress", "(", ")", ",", "\"", "<STR_LIT:UTF-8>", "\"", ")", ")", ";", "if", "(", "address", ".", "getPersonal", "(", ")", "!", "=", "null", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:;>", ")", ";", "sb", ".", "append", "(", "URLEncoder", ".", "encode", "(", "address", ".", "getPersonal", "(", ")", ",", "\"", "<STR_LIT:UTF-8>", "\"", ")", ")", ";", "}", "if", "(", "i", "<", "count", "-", "1", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:U+002C>", ")", ";", "}", "}", "catch", "(", "UnsupportedEncodingException", "uee", ")", "{", "return", "null", ";", "}", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "appendMessages", "(", "Message", "[", "]", "messages", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", "boolean", "expunge", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "copyMessages", "(", "Message", "[", "]", "msgs", ",", "Folder", "folder", ",", "MessageUpdateCallbacks", "callbacks", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "canCreate", "(", "FolderType", "type", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "create", "(", "FolderType", "type", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "delete", "(", "boolean", "recurse", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "exists", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "[", "]", "expunge", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "fetch", "(", "Message", "[", "]", "messages", ",", "FetchProfile", "fp", ",", "MessageRetrievalListener", "listener", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "getMessage", "(", "String", "uid", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getMessageCount", "(", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "[", "]", "getMessages", "(", "int", "start", ",", "int", "end", ",", "MessageRetrievalListener", "listener", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "[", "]", "getMessages", "(", "MessageRetrievalListener", "listener", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "[", "]", "getMessages", "(", "String", "[", "]", "uids", ",", "MessageRetrievalListener", "listener", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "OpenMode", "getMode", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getName", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Flag", "[", "]", "getPermanentFlags", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getUnreadMessageCount", "(", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isOpen", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "open", "(", "OpenMode", "mode", ",", "PersistentDataCallbacks", "callbacks", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setFlags", "(", "Message", "[", "]", "messages", ",", "Flag", "[", "]", "flags", ",", "boolean", "value", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "createMessage", "(", "String", "uid", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "public", "void", "testUriParsing", "(", ")", "throws", "URISyntaxException", "{", "URI", "uri", "=", "new", "URI", "(", "\"", "<STR_LIT>", "\"", ")", ";", "MailTransport", "transport", "=", "new", "MailTransport", "(", "\"", "<STR_LIT>", "\"", ")", ";", "transport", ".", "setUri", "(", "uri", ",", "<NUM_LIT>", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "transport", ".", "getHost", "(", ")", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "transport", ".", "getPort", "(", ")", ")", ";", "String", "[", "]", "userInfoParts", "=", "transport", ".", "getUserInfoParts", "(", ")", ";", "assertNotNull", "(", "userInfoParts", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "userInfoParts", "[", "0", "]", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "userInfoParts", "[", "1", "]", ")", ";", "uri", "=", "new", "URI", "(", "\"", "<STR_LIT>", "\"", ")", ";", "transport", "=", "new", "MailTransport", "(", "\"", "<STR_LIT>", "\"", ")", ";", "transport", ".", "setUri", "(", "uri", ",", "<NUM_LIT>", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "transport", ".", "getHost", "(", ")", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "transport", ".", "getPort", "(", ")", ")", ";", "assertNull", "(", "transport", ".", "getUserInfoParts", "(", ")", ")", ";", "}", "</s>"]
["<s>", "Transaction", "(", "String", "pattern", ",", "String", "[", "]", "responses", ")", "{", "mAction", "=", "ACTION_INJECT_TEXT", ";", "mPattern", "=", "pattern", ";", "mResponses", "=", "responses", ";", "}", "</s>"]
["<s>", "Transaction", "(", "int", "otherType", ")", "{", "mAction", "=", "otherType", ";", "mPattern", "=", "null", ";", "mResponses", "=", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "switch", "(", "mAction", ")", "{", "case", "ACTION_INJECT_TEXT", ":", "return", "mPattern", "+", "\"", "<STR_LIT>", "\"", "+", "Arrays", ".", "toString", "(", "mResponses", ")", ";", "case", "ACTION_SERVER_CLOSE", ":", "return", "\"", "<STR_LIT>", "\"", ";", "case", "ACTION_CLIENT_CLOSE", ":", "return", "\"", "<STR_LIT>", "\"", ";", "default", ":", "return", "\"", "<STR_LIT>", "\"", ";", "}", "}", "</s>"]
["<s>", "public", "void", "expect", "(", "String", "pattern", ")", "{", "expect", "(", "pattern", ",", "(", "String", "[", "]", ")", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "expect", "(", "String", "pattern", ",", "String", "response", ")", "{", "expect", "(", "pattern", ",", "(", "response", "=", "=", "null", ")", "?", "null", ":", "new", "String", "[", "]", "{", "response", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "expect", "(", "String", "pattern", ",", "String", "[", "]", "responses", ")", "{", "Transaction", "pair", "=", "new", "Transaction", "(", "pattern", ",", "responses", ")", ";", "mPairs", ".", "add", "(", "pair", ")", ";", "}", "</s>"]
["<s>", "public", "void", "expectClose", "(", ")", "{", "mPairs", ".", "add", "(", "new", "Transaction", "(", "Transaction", ".", "ACTION_CLIENT_CLOSE", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "sendResponse", "(", "String", "[", "]", "responses", ")", "{", "for", "(", "String", "s", ":", "responses", ")", "{", "mQueuedInput", ".", "add", "(", "s", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "canTrySslSecurity", "(", ")", "{", "return", "(", "mConnectionSecurity", "=", "=", "CONNECTION_SECURITY_SSL", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "canTryTlsSecurity", "(", ")", "{", "return", "(", "mConnectionSecurity", "=", "=", "Transport", ".", "CONNECTION_SECURITY_TLS", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "canTrustAllCertificates", "(", ")", "{", "return", "mTrustCertificates", ";", "}", "</s>"]
["<s>", "public", "void", "closeInputStream", "(", ")", "{", "mInputOpen", "=", "false", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "{", "mOpen", "=", "false", ";", "mInputOpen", "=", "false", ";", "if", "(", "mPairs", ".", "size", "(", ")", ">", "0", ")", "{", "Transaction", "expect", "=", "mPairs", ".", "remove", "(", "0", ")", ";", "if", "(", "expect", ".", "mAction", "=", "=", "Transaction", ".", "ACTION_CLIENT_CLOSE", ")", "{", "return", ";", "}", "}", "mQueuedInput", ".", "clear", "(", ")", ";", "mPairs", ".", "clear", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getHost", "(", ")", "{", "SmtpSenderUnitTests", ".", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "null", ";", "}", "</s>"]
["<s>", "public", "InputStream", "getInputStream", "(", ")", "{", "SmtpSenderUnitTests", ".", "assertTrue", "(", "mOpen", ")", ";", "return", "new", "MockInputStream", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Transport", "newInstanceWithConfiguration", "(", ")", "{", "return", "this", ";", "}", "</s>"]
["<s>", "public", "OutputStream", "getOutputStream", "(", ")", "{", "SmtpSenderUnitTests", ".", "assertTrue", "(", "mOpen", ")", ";", "return", "new", "MockOutputStream", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getPort", "(", ")", "{", "SmtpSenderUnitTests", ".", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "0", ";", "}", "</s>"]
["<s>", "public", "int", "getSecurity", "(", ")", "{", "return", "mConnectionSecurity", ";", "}", "</s>"]
["<s>", "public", "String", "[", "]", "getUserInfoParts", "(", ")", "{", "SmtpSenderUnitTests", ".", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "null", ";", "}", "</s>"]
["<s>", "public", "boolean", "isOpen", "(", ")", "{", "return", "mOpen", ";", "}", "</s>"]
["<s>", "public", "void", "open", "(", ")", "{", "mOpen", "=", "true", ";", "mInputOpen", "=", "true", ";", "}", "</s>"]
["<s>", "public", "String", "readLine", "(", ")", "throws", "IOException", "{", "SmtpSenderUnitTests", ".", "assertTrue", "(", "mOpen", ")", ";", "if", "(", "!", "mInputOpen", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "0", "=", "=", "mQueuedInput", ".", "size", "(", ")", ")", "{", "Transaction", "pair", "=", "mPairs", ".", "get", "(", "0", ")", ";", "if", "(", "pair", "!", "=", "null", "&", "&", "pair", ".", "mPattern", "=", "=", "null", ")", "{", "mPairs", ".", "remove", "(", "0", ")", ";", "sendResponse", "(", "pair", ".", "mResponses", ")", ";", "}", "}", "SmtpSenderUnitTests", ".", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "0", "!", "=", "mQueuedInput", ".", "size", "(", ")", ")", ";", "String", "line", "=", "mQueuedInput", ".", "remove", "(", "0", ")", ";", "if", "(", "DEBUG_LOG_STREAMS", ")", "{", "Log", ".", "d", "(", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "line", ")", ";", "}", "return", "line", ";", "}", "</s>"]
["<s>", "public", "void", "reopenTls", "(", ")", "{", "SmtpSenderUnitTests", ".", "assertTrue", "(", "mOpen", ")", ";", "SmtpSenderUnitTests", ".", "assertTrue", "(", "mTlsAllowed", ")", ";", "SmtpSenderUnitTests", ".", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setSecurity", "(", "int", "connectionSecurity", ",", "boolean", "trustAllCertificates", ")", "{", "mConnectionSecurity", "=", "connectionSecurity", ";", "mTrustCertificates", "=", "trustAllCertificates", ";", "}", "</s>"]
["<s>", "public", "void", "setSoTimeout", "(", "int", "timeoutMilliseconds", ")", "{", "}", "</s>"]
["<s>", "public", "void", "setUri", "(", "URI", "uri", ",", "int", "defaultPort", ")", "{", "SmtpSenderUnitTests", ".", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "writeLine", "(", "String", "s", ",", "String", "sensitiveReplacement", ")", "{", "if", "(", "DEBUG_LOG_STREAMS", ")", "{", "Log", ".", "d", "(", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "s", ")", ";", "}", "SmtpSenderUnitTests", ".", "assertTrue", "(", "mOpen", ")", ";", "SmtpSenderUnitTests", ".", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "0", "!", "=", "mPairs", ".", "size", "(", ")", ")", ";", "Transaction", "pair", "=", "mPairs", ".", "remove", "(", "0", ")", ";", "SmtpSenderUnitTests", ".", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "pair", ".", "mPattern", "!", "=", "null", "&", "&", "s", ".", "matches", "(", "pair", ".", "mPattern", ")", ")", ";", "if", "(", "pair", ".", "mResponses", "!", "=", "null", ")", "{", "sendResponse", "(", "pair", ".", "mResponses", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", ")", "throws", "IOException", "{", "if", "(", "!", "mInputOpen", ")", "{", "throw", "new", "IOException", "(", ")", ";", "}", "if", "(", "mNextLine", "!", "=", "null", "&", "&", "mNextIndex", "<", "mNextLine", ".", "length", ")", "{", "return", "mNextLine", "[", "mNextIndex", "+", "+", "]", ";", "}", "String", "next", "=", "readLine", "(", ")", ";", "if", "(", "next", "=", "=", "null", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mNextLine", "=", "(", "next", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ".", "getBytes", "(", ")", ";", "mNextIndex", "=", "0", ";", "if", "(", "mNextLine", "!", "=", "null", "&", "&", "mNextIndex", "<", "mNextLine", ".", "length", ")", "{", "return", "mNextLine", "[", "mNextIndex", "+", "+", "]", ";", "}", "throw", "new", "IOException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "write", "(", "int", "oneByte", ")", "{", "if", "(", "oneByte", "=", "=", "<STR_LIT>", ")", "{", "writeLine", "(", "sb", ".", "toString", "(", ")", ",", "null", ")", ";", "sb", "=", "new", "StringBuilder", "(", ")", ";", "}", "else", "if", "(", "oneByte", "=", "=", "<STR_LIT:\\n>", ")", "{", "}", "else", "{", "sb", ".", "append", "(", "(", "char", ")", "oneByte", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testBuildBodyTextWithReply", "(", ")", "{", "Message", "msg", "=", "new", "Message", "(", ")", ";", "msg", ".", "mText", "=", "\"", "\"", ";", "msg", ".", "mFrom", "=", "SENDER", ";", "msg", ".", "mFlags", "=", "Message", ".", "FLAG_TYPE_REPLY", ";", "msg", ".", "mTextReply", "=", "BODY", ";", "msg", ".", "mIntroText", "=", "REPLY_BODY_SHORT", ";", "msg", ".", "save", "(", "getContext", "(", ")", ")", ";", "String", "body", "=", "Rfc822Output", ".", "buildBodyText", "(", "getContext", "(", ")", ",", "msg", ",", "true", ")", ";", "assertEquals", "(", "REPLY_BODY", ",", "body", ")", ";", "msg", ".", "mId", "=", "-", "1", ";", "msg", ".", "mTextReply", "=", "null", ";", "msg", ".", "save", "(", "getContext", "(", ")", ")", ";", "body", "=", "Rfc822Output", ".", "buildBodyText", "(", "getContext", "(", ")", ",", "msg", ",", "true", ")", ";", "assertEquals", "(", "REPLY_BODY_SHORT", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testBuildBodyTextWithoutReply", "(", ")", "{", "Message", "msg", "=", "new", "Message", "(", ")", ";", "msg", ".", "mText", "=", "TEXT", ";", "msg", ".", "mFrom", "=", "SENDER", ";", "msg", ".", "mFlags", "=", "Message", ".", "FLAG_TYPE_REPLY", ";", "msg", ".", "mTextReply", "=", "BODY", ";", "msg", ".", "mIntroText", "=", "REPLY_BODY_SHORT", ";", "msg", ".", "save", "(", "getContext", "(", ")", ")", ";", "String", "body", "=", "Rfc822Output", ".", "buildBodyText", "(", "getContext", "(", ")", ",", "msg", ",", "false", ")", ";", "assertEquals", "(", "TEXT", "+", "REPLY_BODY_SHORT", ",", "body", ")", ";", "msg", ".", "mId", "=", "-", "1", ";", "msg", ".", "mTextReply", "=", "null", ";", "msg", ".", "save", "(", "getContext", "(", ")", ")", ";", "body", "=", "Rfc822Output", ".", "buildBodyText", "(", "getContext", "(", ")", ",", "msg", ",", "false", ")", ";", "assertEquals", "(", "TEXT", "+", "REPLY_BODY_SHORT", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "SmtpSenderUnitTests", "(", ")", "{", "super", "(", "EmailProvider", ".", "class", ",", "EmailProvider", ".", "EMAIL_AUTHORITY", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mProviderContext", "=", "getMockContext", "(", ")", ";", "mContext", "=", "getContext", "(", ")", ";", "mSender", "=", "(", "SmtpSender", ")", "SmtpSender", ".", "newInstance", "(", "mProviderContext", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSimpleLogin", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "setupOpen", "(", "mockTransport", ",", "null", ")", ";", "mSender", ".", "open", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSendMessageWithBody", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "mockTransport", ".", "expectClose", "(", ")", ";", "setupOpen", "(", "mockTransport", ",", "null", ")", ";", "Message", "message", "=", "setupSimpleMessage", "(", ")", ";", "message", ".", "save", "(", "mProviderContext", ")", ";", "Body", "body", "=", "new", "Body", "(", ")", ";", "body", ".", "mMessageKey", "=", "message", ".", "mId", ";", "body", ".", "mTextContent", "=", "TEST_STRING", ";", "body", ".", "save", "(", "mProviderContext", ")", ";", "expectSimpleMessage", "(", "mockTransport", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "\"", ")", ";", "mockTransport", ".", "expect", "(", "TEST_STRING_BASE64", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:.>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mSender", ".", "sendMessage", "(", "message", ".", "mId", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSendMessageWithEmptyAttachment", "(", ")", "throws", "MessagingException", ",", "IOException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "mockTransport", ".", "expectClose", "(", ")", ";", "setupOpen", "(", "mockTransport", ",", "null", ")", ";", "Message", "message", "=", "setupSimpleMessage", "(", ")", ";", "message", ".", "save", "(", "mProviderContext", ")", ";", "Attachment", "attachment", "=", "setupSimpleAttachment", "(", "mProviderContext", ",", "message", ".", "mId", ",", "false", ")", ";", "attachment", ".", "save", "(", "mProviderContext", ")", ";", "expectSimpleMessage", "(", "mockTransport", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "expectSimpleAttachment", "(", "mockTransport", ",", "attachment", ")", ";", "mockTransport", ".", "expect", "(", "\"", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:.>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mSender", ".", "sendMessage", "(", "message", ".", "mId", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSendMessageWithAttachment", "(", ")", "throws", "MessagingException", ",", "IOException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "mockTransport", ".", "expectClose", "(", ")", ";", "setupOpen", "(", "mockTransport", ",", "null", ")", ";", "Message", "message", "=", "setupSimpleMessage", "(", ")", ";", "message", ".", "save", "(", "mProviderContext", ")", ";", "Attachment", "attachment", "=", "setupSimpleAttachment", "(", "mProviderContext", ",", "message", ".", "mId", ",", "true", ")", ";", "attachment", ".", "save", "(", "mProviderContext", ")", ";", "expectSimpleMessage", "(", "mockTransport", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "expectSimpleAttachment", "(", "mockTransport", ",", "attachment", ")", ";", "mockTransport", ".", "expect", "(", "\"", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:.>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mSender", ".", "sendMessage", "(", "message", ".", "mId", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSendMessageWithTwoAttachments", "(", ")", "throws", "MessagingException", ",", "IOException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "mockTransport", ".", "expectClose", "(", ")", ";", "setupOpen", "(", "mockTransport", ",", "null", ")", ";", "Message", "message", "=", "setupSimpleMessage", "(", ")", ";", "message", ".", "save", "(", "mProviderContext", ")", ";", "Attachment", "attachment", "=", "setupSimpleAttachment", "(", "mProviderContext", ",", "message", ".", "mId", ",", "true", ")", ";", "attachment", ".", "save", "(", "mProviderContext", ")", ";", "Attachment", "attachment2", "=", "setupSimpleAttachment", "(", "mProviderContext", ",", "message", ".", "mId", ",", "true", ")", ";", "attachment2", ".", "save", "(", "mProviderContext", ")", ";", "expectSimpleMessage", "(", "mockTransport", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "expectSimpleAttachment", "(", "mockTransport", ",", "attachment", ")", ";", "mockTransport", ".", "expect", "(", "\"", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "expectSimpleAttachment", "(", "mockTransport", ",", "attachment2", ")", ";", "mockTransport", ".", "expect", "(", "\"", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:.>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mSender", ".", "sendMessage", "(", "message", ".", "mId", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSendMessageWithBodyAndAttachment", "(", ")", "throws", "MessagingException", ",", "IOException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "mockTransport", ".", "expectClose", "(", ")", ";", "setupOpen", "(", "mockTransport", ",", "null", ")", ";", "Message", "message", "=", "setupSimpleMessage", "(", ")", ";", "message", ".", "save", "(", "mProviderContext", ")", ";", "Body", "body", "=", "new", "Body", "(", ")", ";", "body", ".", "mMessageKey", "=", "message", ".", "mId", ";", "body", ".", "mTextContent", "=", "TEST_STRING", ";", "body", ".", "save", "(", "mProviderContext", ")", ";", "Attachment", "attachment", "=", "setupSimpleAttachment", "(", "mProviderContext", ",", "message", ".", "mId", ",", "true", ")", ";", "attachment", ".", "save", "(", "mProviderContext", ")", ";", "expectSimpleMessage", "(", "mockTransport", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "\"", ")", ";", "mockTransport", ".", "expect", "(", "TEST_STRING_BASE64", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "expectSimpleAttachment", "(", "mockTransport", ",", "attachment", ")", ";", "mockTransport", ".", "expect", "(", "\"", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:.>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mSender", ".", "sendMessage", "(", "message", ".", "mId", ")", ";", "}", "</s>"]
["<s>", "private", "Message", "setupSimpleMessage", "(", ")", "{", "Message", "message", "=", "new", "Message", "(", ")", ";", "message", ".", "mTimeStamp", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "message", ".", "mFrom", "=", "Address", ".", "parseAndPack", "(", "\"", "<STR_LIT>", "\"", ")", ";", "message", ".", "mTo", "=", "Address", ".", "parseAndPack", "(", "\"", "<STR_LIT>", "\"", ")", ";", "message", ".", "mMessageId", "=", "\"", "<STR_LIT>", "\"", ";", "return", "message", ";", "}", "</s>"]
["<s>", "private", "void", "expectSimpleMessage", "(", "MockTransport", "mockTransport", ")", "{", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "Attachment", "setupSimpleAttachment", "(", "Context", "context", ",", "long", "messageId", ",", "boolean", "withBody", ")", "throws", "IOException", "{", "Attachment", "attachment", "=", "new", "Attachment", "(", ")", ";", "attachment", ".", "mFileName", "=", "\"", "<STR_LIT>", "\"", ";", "attachment", ".", "mMimeType", "=", "\"", "<STR_LIT>", "\"", ";", "attachment", ".", "mSize", "=", "0", ";", "attachment", ".", "mContentId", "=", "null", ";", "attachment", ".", "mContentUri", "=", "\"", "<STR_LIT>", "\"", ";", "attachment", ".", "mMessageKey", "=", "messageId", ";", "attachment", ".", "mLocation", "=", "null", ";", "attachment", ".", "mEncoding", "=", "null", ";", "if", "(", "withBody", ")", "{", "InputStream", "inStream", "=", "new", "ByteArrayInputStream", "(", "TEST_STRING", ".", "getBytes", "(", ")", ")", ";", "File", "cacheDir", "=", "context", ".", "getCacheDir", "(", ")", ";", "File", "tmpFile", "=", "File", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "cacheDir", ")", ";", "OutputStream", "outStream", "=", "new", "FileOutputStream", "(", "tmpFile", ")", ";", "IOUtils", ".", "copy", "(", "inStream", ",", "outStream", ")", ";", "attachment", ".", "mContentUri", "=", "\"", "<STR_LIT>", "\"", "+", "tmpFile", ".", "getAbsolutePath", "(", ")", ";", "}", "return", "attachment", ";", "}", "</s>"]
["<s>", "private", "void", "expectSimpleAttachment", "(", "MockTransport", "mockTransport", ",", "Attachment", "attachment", ")", "{", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", "+", "attachment", ".", "mMimeType", "+", "\"", "<STR_LIT:;>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "attachment", ".", "mFileName", "+", "\"", "<STR_LIT:\\\">", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "attachment", ".", "mFileName", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT:;>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", "+", "Long", ".", "toString", "(", "attachment", ".", "mSize", ")", ")", ";", "mockTransport", ".", "expect", "(", "\"", "\"", ")", ";", "if", "(", "attachment", ".", "mContentUri", "!", "=", "null", "&", "&", "attachment", ".", "mContentUri", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "mockTransport", ".", "expect", "(", "TEST_STRING_BASE64", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testEmptyLineResponse", "(", ")", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "mockTransport", ".", "expectClose", "(", ")", ";", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "try", "{", "mSender", ".", "sendMessage", "(", "-", "1", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "}", "</s>"]
["<s>", "private", "MockTransport", "openAndInjectMockTransport", "(", ")", "{", "MockTransport", "mockTransport", "=", "new", "MockTransport", "(", ")", ";", "mockTransport", ".", "setSecurity", "(", "Transport", ".", "CONNECTION_SECURITY_NONE", ",", "false", ")", ";", "mSender", ".", "setTransport", "(", "mockTransport", ")", ";", "return", "mockTransport", ";", "}", "</s>"]
["<s>", "private", "void", "setupOpen", "(", "MockTransport", "mockTransport", ",", "String", "capabilities", ")", "{", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "capabilities", "=", "=", "null", ")", "{", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "for", "(", "String", "capability", ":", "capabilities", ".", "split", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ")", "{", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", "+", "capability", ")", ";", "}", "}", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "MediumTest", "public", "void", "testSetSentDate", "(", ")", "throws", "MessagingException", ",", "ParseException", "{", "Locale", "savedLocale", "=", "Locale", ".", "getDefault", "(", ")", ";", "Locale", ".", "setDefault", "(", "Locale", ".", "US", ")", ";", "doTestSetSentDate", "(", ")", ";", "Locale", ".", "setDefault", "(", "Locale", ".", "JAPAN", ")", ";", "doTestSetSentDate", "(", ")", ";", "Locale", ".", "setDefault", "(", "savedLocale", ")", ";", "}", "</s>"]
["<s>", "private", "void", "doTestSetSentDate", "(", ")", "throws", "MessagingException", ",", "ParseException", "{", "long", "expectedTime", "=", "<NUM_LIT>", ";", "Date", "date", "=", "new", "Date", "(", "expectedTime", ")", ";", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "message", ".", "setSentDate", "(", "date", ")", ";", "String", "[", "]", "headers", "=", "message", ".", "getHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "1", ",", "headers", ".", "length", ")", ";", "SimpleDateFormat", "format", "=", "new", "SimpleDateFormat", "(", "\"", "<STR_LIT>", "\"", ",", "Locale", ".", "US", ")", ";", "Date", "result", "=", "format", ".", "parse", "(", "headers", "[", "0", "]", ")", ";", "assertEquals", "(", "expectedTime", ",", "result", ".", "getTime", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testMessageId", "(", ")", "throws", "MessagingException", "{", "MimeMessage", "message1", "=", "new", "MimeMessage", "(", ")", ";", "MimeMessage", "message2", "=", "new", "MimeMessage", "(", ")", ";", "String", "id1", "=", "message1", ".", "getMessageId", "(", ")", ";", "String", "id2", "=", "message2", ".", "getMessageId", "(", ")", ";", "assertNotNull", "(", "id1", ")", ";", "assertNotNull", "(", "id2", ")", ";", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "id1", ".", "equals", "(", "id2", ")", ")", ";", "final", "String", "testId1", "=", "\"", "<STR_LIT>", "\"", ";", "message1", ".", "setMessageId", "(", "testId1", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "testId1", ",", "message1", ".", "getMessageId", "(", ")", ")", ";", "final", "String", "testId2", "=", "\"", "<STR_LIT>", "\"", ";", "message2", ".", "setMessageId", "(", "testId1", ")", ";", "message2", ".", "setMessageId", "(", "testId2", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "testId2", ",", "message2", ".", "getMessageId", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetContentId", "(", ")", "throws", "MessagingException", "{", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "assertNull", "(", "message", ".", "getContentId", "(", ")", ")", ";", "final", "String", "cid1", "=", "\"", "<STR_LIT>", "\"", ";", "message", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_ID", ",", "cid1", ")", ";", "assertEquals", "(", "cid1", ",", "message", ".", "getContentId", "(", ")", ")", ";", "message", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_ID", ",", "\"", "<STR_LIT:<>", "\"", "+", "cid1", "+", "\"", "<STR_LIT:>>", "\"", ")", ";", "assertEquals", "(", "cid1", ",", "message", ".", "getContentId", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSetSubjectPlain", "(", ")", "throws", "MessagingException", "{", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "message", ".", "setSubject", "(", "SHORT_PLAIN", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "SHORT_PLAIN", ",", "message", ".", "getSubject", "(", ")", ")", ";", "String", "rawHeader", "=", "message", ".", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "-", "1", ",", "rawHeader", ".", "indexOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "message", ".", "setSubject", "(", "LONG_PLAIN_64", ")", ";", "rawHeader", "=", "message", ".", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "[", "]", "split", "=", "rawHeader", ".", "split", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "split", ".", "length", ")", ";", "message", ".", "setSubject", "(", "LONG_PLAIN_256", ")", ";", "rawHeader", "=", "message", ".", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "split", "=", "rawHeader", ".", "split", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "split", ".", "length", ">", "1", ")", ";", "for", "(", "String", "s", ":", "split", ")", "{", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "s", ".", "length", "(", ")", "<", "=", "<NUM_LIT>", ")", ";", "String", "trimmed", "=", "s", ".", "trim", "(", ")", ";", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "trimmed", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testSetSubject", "(", ")", "throws", "MessagingException", "{", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "message", ".", "setSubject", "(", "SHORT_UNICODE", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "SHORT_UNICODE", ",", "message", ".", "getSubject", "(", ")", ")", ";", "String", "rawHeader", "=", "message", ".", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "SHORT_UNICODE_ENCODED", ",", "rawHeader", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSetLongSubject", "(", ")", "throws", "MessagingException", "{", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "message", ".", "setSubject", "(", "LONG_UNICODE_16", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "LONG_UNICODE_16", ",", "message", ".", "getSubject", "(", ")", ")", ";", "message", ".", "setSubject", "(", "LONG_UNICODE_64", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "LONG_UNICODE_64", ",", "message", ".", "getSubject", "(", ")", ")", ";", "String", "rawHeader", "=", "message", ".", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "[", "]", "split", "=", "rawHeader", ".", "split", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "split", ".", "length", ">", "1", ")", ";", "for", "(", "String", "s", ":", "split", ")", "{", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "s", ".", "length", "(", ")", "<", "=", "<NUM_LIT>", ")", ";", "String", "trimmed", "=", "s", ".", "trim", "(", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "trimmed", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", "&", "&", "trimmed", ".", "endsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testEncodingAddressField", "(", ")", "throws", "MessagingException", "{", "Address", "noName1", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Address", "noName2", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "Address", "simpleName", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Address", "dquoteName", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Address", "quotedName", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "Address", "utf16Name", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ";", "Address", "utf32Name", "=", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "message", ".", "setFrom", "(", "noName1", ")", ";", "message", ".", "setRecipient", "(", "RecipientType", ".", "TO", ",", "noName2", ")", ";", "message", ".", "setRecipients", "(", "RecipientType", ".", "CC", ",", "new", "Address", "[", "]", "{", "simpleName", ",", "dquoteName", "}", ")", ";", "message", ".", "setReplyTo", "(", "new", "Address", "[", "]", "{", "quotedName", ",", "utf16Name", ",", "utf32Name", "}", ")", ";", "String", "[", "]", "from", "=", "message", ".", "getHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "[", "]", "to", "=", "message", ".", "getHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "[", "]", "cc", "=", "message", ".", "getHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "[", "]", "replyTo", "=", "message", ".", "getHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "from", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "from", "[", "0", "]", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "to", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "to", "[", "0", "]", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "cc", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "cc", "[", "0", "]", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "replyTo", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "replyTo", "[", "0", "]", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testParsingAddressField", "(", ")", "throws", "MessagingException", "{", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "message", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "message", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "message", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "message", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "Address", "[", "]", "from", "=", "message", ".", "getFrom", "(", ")", ";", "Address", "[", "]", "to", "=", "message", ".", "getRecipients", "(", "RecipientType", ".", "TO", ")", ";", "Address", "[", "]", "cc", "=", "message", ".", "getRecipients", "(", "RecipientType", ".", "CC", ")", ";", "Address", "[", "]", "replyTo", "=", "message", ".", "getReplyTo", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "from", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "from", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "from", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "to", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "to", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "to", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "cc", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "cc", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "cc", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "cc", "[", "1", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "cc", "[", "1", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:3>", ",", "replyTo", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "replyTo", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "replyTo", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "replyTo", "[", "1", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "replyTo", "[", "1", "]", ".", "getPersonal", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "replyTo", "[", "<NUM_LIT:2>", "]", ".", "getAddress", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "replyTo", "[", "<NUM_LIT:2>", "]", ".", "getPersonal", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testStoreFlags", "(", ")", "throws", "MessagingException", "{", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "Flag", "[", "]", "flags", "=", "message", ".", "getFlags", "(", ")", ";", "assertEquals", "(", "0", ",", "flags", ".", "length", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "true", ")", ";", "assertTrue", "(", "message", ".", "isSet", "(", "Flag", ".", "X_STORE_1", ")", ")", ";", "assertFalse", "(", "message", ".", "isSet", "(", "Flag", ".", "X_STORE_2", ")", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "true", ")", ";", "assertTrue", "(", "message", ".", "isSet", "(", "Flag", ".", "X_STORE_1", ")", ")", ";", "assertTrue", "(", "message", ".", "isSet", "(", "Flag", ".", "X_STORE_2", ")", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "false", ")", ";", "assertFalse", "(", "message", ".", "isSet", "(", "Flag", ".", "X_STORE_1", ")", ")", ";", "assertTrue", "(", "message", ".", "isSet", "(", "Flag", ".", "X_STORE_2", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testExtendedHeader", "(", ")", "throws", "MessagingException", "{", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "message", ".", "getExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "message", ".", "setExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ";", "message", ".", "setExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ",", "message", ".", "getExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "message", ".", "getExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "message", ".", "getExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "message", ".", "setExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:4>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:4>", "\"", ",", "message", ".", "getExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "message", ".", "setExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "message", ".", "getExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testExtendedHeaders", "(", ")", "throws", "MessagingException", "{", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "message", ".", "getExtendedHeaders", "(", ")", ")", ";", "message", ".", "setExtendedHeaders", "(", "null", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "message", ".", "getExtendedHeaders", "(", ")", ")", ";", "message", ".", "setExtendedHeaders", "(", "\"", "\"", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "message", ".", "getExtendedHeaders", "(", ")", ")", ";", "message", ".", "setExtendedHeaders", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ",", "message", ".", "getExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "message", ".", "getExtendedHeaders", "(", ")", ")", ";", "message", ".", "setExtendedHeaders", "(", "null", ")", ";", "message", ".", "setExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ")", ";", "message", ".", "setExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:3>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "message", ".", "getExtendedHeaders", "(", ")", ")", ";", "message", ".", "setExtendedHeaders", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ",", "message", ".", "getExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "message", ".", "getExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "message", ".", "getExtendedHeaders", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testWriteToHeader", "(", ")", "throws", "Exception", "{", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "message", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ";", "message", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_ATTACHMENT_STORE_DATA", ",", "\"", "<STR_LIT:2>", "\"", ")", ";", "message", ".", "setExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:3>", "\"", ")", ";", "message", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:4>", "\"", ")", ";", "message", ".", "setExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:5>", "\"", ")", ";", "ByteArrayOutputStream", "out", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "message", ".", "writeTo", "(", "out", ")", ";", "out", ".", "close", "(", ")", ";", "String", "expectedString", "=", "\"", "<STR_LIT>", "\"", "+", "message", ".", "getMessageId", "(", ")", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ";", "byte", "[", "]", "expected", "=", "expectedString", ".", "getBytes", "(", ")", ";", "byte", "[", "]", "actual", "=", "out", ".", "toByteArray", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expected", ".", "length", ",", "actual", ".", "length", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "actual", ".", "length", ";", "+", "+", "i", ")", "{", "assertEquals", "(", "\"", "<STR_LIT>", "\"", "+", "i", "+", "\"", "<STR_LIT:]>", "\"", ",", "expected", "[", "i", "]", ",", "actual", "[", "i", "]", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testWriteToString", "(", ")", "throws", "Exception", "{", "MimeHeader", "header", "=", "new", "MimeHeader", "(", ")", ";", "String", "actual1", "=", "header", ".", "writeToString", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "actual1", ",", "null", ")", ";", "header", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ";", "String", "actual2", "=", "header", ".", "writeToString", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "actual2", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "header", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ")", ";", "String", "actual3", "=", "header", ".", "writeToString", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "actual3", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "header", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_ATTACHMENT_STORE_DATA", ",", "\"", "<STR_LIT:3>", "\"", ")", ";", "String", "actual4", "=", "header", ".", "writeToString", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "actual4", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "Context", "context", "=", "getContext", "(", ")", ";", "long", "accountId", "=", "Account", ".", "getDefaultAccountId", "(", "context", ")", ";", "if", "(", "accountId", "=", "=", "-", "1", ")", "{", "Account", "account", "=", "new", "Account", "(", ")", ";", "account", ".", "mSenderName", "=", "\"", "<STR_LIT>", "\"", ";", "account", ".", "mEmailAddress", "=", "\"", "<STR_LIT>", "\"", ";", "account", ".", "save", "(", "context", ")", ";", "accountId", "=", "account", ".", "mId", ";", "mCreatedAccountId", "=", "accountId", ";", "}", "Account", ".", "restoreAccountWithId", "(", "context", ",", "accountId", ")", ";", "BinaryTempFileBody", ".", "setTempDirectory", "(", "getContext", "(", ")", ".", "getCacheDir", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "tearDown", "(", ")", "throws", "Exception", "{", "super", ".", "tearDown", "(", ")", ";", "Context", "context", "=", "getContext", "(", ")", ";", "if", "(", "mCreatedAccountId", ">", "-", "1", ")", "{", "context", ".", "getContentResolver", "(", ")", ".", "delete", "(", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "mCreatedAccountId", ")", ",", "null", ",", "null", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "disable_testResolveInlineImage", "(", ")", "throws", "MessagingException", ",", "IOException", "{", "final", "LocalStore", "store", "=", "(", "LocalStore", ")", "LocalStore", ".", "newInstance", "(", "mAccount", ".", "getLocalStoreUri", "(", "getContext", "(", ")", ")", ",", "mContext", ",", "null", ")", ";", "final", "String", "cid1", "=", "\"", "<STR_LIT>", "\"", ";", "final", "long", "aid1", "=", "<NUM_LIT:10>", ";", "final", "Uri", "uri1", "=", "MessageTestUtils", ".", "contentUri", "(", "aid1", ",", "mAccount", ")", ";", "final", "String", "text1", "=", "new", "TextBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addCidImg", "(", "cid1", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "String", "expected1", "=", "new", "TextBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addUidImg", "(", "uri1", ")", ".", "build", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Message", "msg1", "=", "new", "MessageBuilder", "(", ")", ".", "setBody", "(", "new", "MultipartBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "textPart", "(", "\"", "<STR_LIT>", "\"", ",", "text1", ")", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "imagePart", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:<>", "\"", "+", "cid1", "+", "\"", "<STR_LIT:>>", "\"", ",", "aid1", ",", "store", ")", ")", ".", "build", "(", ")", ")", ".", "build", "(", ")", ";", "final", "String", "actual1", "=", "EmailHtmlUtil", ".", "resolveInlineImage", "(", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ",", "mAccount", ".", "mId", ",", "text1", ",", "msg1", ",", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expected1", ",", "actual1", ")", ";", "final", "String", "actual0", "=", "EmailHtmlUtil", ".", "resolveInlineImage", "(", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ",", "mAccount", ".", "mId", ",", "text1", ",", "msg1", ",", "<NUM_LIT:10>", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "text1", ",", "actual0", ")", ";", "final", "String", "cid2", "=", "\"", "<STR_LIT>", "\"", ";", "final", "long", "aid2", "=", "<NUM_LIT:20>", ";", "final", "Uri", "uri2", "=", "MessageTestUtils", ".", "contentUri", "(", "aid2", ",", "mAccount", ")", ";", "final", "String", "text2", "=", "new", "TextBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addCidImg", "(", "cid2", ")", ".", "build", "(", "\"", "<STR_LIT:.>", "\"", ")", ";", "final", "String", "expected2", "=", "new", "TextBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addUidImg", "(", "uri2", ")", ".", "build", "(", "\"", "<STR_LIT:.>", "\"", ")", ";", "final", "Message", "msg2", "=", "new", "MessageBuilder", "(", ")", ".", "setBody", "(", "new", "MultipartBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "textPart", "(", "\"", "<STR_LIT>", "\"", ",", "text1", "+", "text2", ")", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "imagePart", "(", "\"", "<STR_LIT>", "\"", ",", "cid2", ",", "aid2", ",", "store", ")", ")", ".", "build", "(", ")", ")", ".", "build", "(", ")", ";", "final", "String", "actual2", "=", "EmailHtmlUtil", ".", "resolveInlineImage", "(", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ",", "mAccount", ".", "mId", ",", "text1", "+", "text2", ",", "msg2", ",", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "text1", "+", "expected2", ",", "actual2", ")", ";", "final", "Message", "msg3", "=", "new", "MessageBuilder", "(", ")", ".", "setBody", "(", "new", "MultipartBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "textPart", "(", "\"", "<STR_LIT>", "\"", ",", "text2", "+", "text1", ")", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "imagePart", "(", "\"", "<STR_LIT>", "\"", ",", "cid1", ",", "aid1", ",", "store", ")", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "imagePart", "(", "\"", "<STR_LIT>", "\"", ",", "cid2", ",", "aid2", ",", "store", ")", ")", ".", "build", "(", ")", ")", ".", "build", "(", ")", ";", "final", "String", "actual3", "=", "EmailHtmlUtil", ".", "resolveInlineImage", "(", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ",", "mAccount", ".", "mId", ",", "text2", "+", "text1", ",", "msg3", ",", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expected2", "+", "expected1", ",", "actual3", ")", ";", "final", "Message", "msg4", "=", "new", "MessageBuilder", "(", ")", ".", "setBody", "(", "new", "MultipartBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "imagePart", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "<NUM_LIT:30>", ",", "store", ")", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "imagePart", "(", "\"", "<STR_LIT>", "\"", ",", "cid1", ",", "aid1", ",", "store", ")", ")", ".", "addBodyPart", "(", "new", "MultipartBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "textPart", "(", "\"", "<STR_LIT>", "\"", ",", "text2", "+", "text1", ")", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "imagePart", "(", "\"", "<STR_LIT>", "\"", ",", "cid1", ",", "aid1", ",", "store", ")", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "imagePart", "(", "\"", "<STR_LIT>", "\"", ",", "cid2", ",", "aid2", ",", "store", ")", ")", ".", "buildBodyPart", "(", ")", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "imagePart", "(", "\"", "<STR_LIT>", "\"", ",", "cid2", ",", "aid2", ",", "store", ")", ")", ".", "build", "(", ")", ")", ".", "build", "(", ")", ";", "final", "String", "actual4", "=", "EmailHtmlUtil", ".", "resolveInlineImage", "(", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ",", "mAccount", ".", "mId", ",", "text2", "+", "text1", ",", "msg4", ",", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expected2", "+", "expected1", ",", "actual4", ")", ";", "final", "String", "actual5", "=", "EmailHtmlUtil", ".", "resolveInlineImage", "(", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ",", "mAccount", ".", "mId", ",", "null", ",", "msg4", ",", "0", ")", ";", "assertNull", "(", "actual5", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testEscapeCharacterToDisplayPlainText", "(", ")", "{", "String", "plainTags", "=", "EmailHtmlUtil", ".", "escapeCharacterToDisplay", "(", "textTags", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "plainTags", ")", ";", "String", "plainSpaces", "=", "EmailHtmlUtil", ".", "escapeCharacterToDisplay", "(", "textSpaces", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "plainSpaces", ")", ";", "String", "plainNewlines", "=", "EmailHtmlUtil", ".", "escapeCharacterToDisplay", "(", "textNewlines", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "plainNewlines", ")", ";", "String", "textAll", "=", "textTags", "+", "\"", "<STR_LIT>", "<STR_LIT>", "\"", "+", "textSpaces", "+", "\"", "<STR_LIT>", "<STR_LIT>", "\"", "+", "textNewlines", ";", "String", "plainAll", "=", "EmailHtmlUtil", ".", "escapeCharacterToDisplay", "(", "textAll", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "plainAll", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetContentId", "(", ")", "throws", "MessagingException", "{", "MimeBodyPart", "bp", "=", "new", "MimeBodyPart", "(", ")", ";", "assertNull", "(", "bp", ".", "getContentId", "(", ")", ")", ";", "final", "String", "cid1", "=", "\"", "<STR_LIT>", "\"", ";", "bp", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_ID", ",", "cid1", ")", ";", "assertEquals", "(", "cid1", ",", "bp", ".", "getContentId", "(", ")", ")", ";", "bp", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_ID", ",", "\"", "<STR_LIT:<>", "\"", "+", "cid1", "+", "\"", "<STR_LIT:>>", "\"", ")", ";", "assertEquals", "(", "cid1", ",", "bp", ".", "getContentId", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testEfficientUnfoldAndDecode", "(", ")", "{", "String", "result1", "=", "MimeUtility", ".", "unfold", "(", "SHORT_PLAIN", ")", ";", "String", "result2", "=", "MimeUtility", ".", "decode", "(", "SHORT_PLAIN", ")", ";", "String", "result3", "=", "MimeUtility", ".", "unfoldAndDecode", "(", "SHORT_PLAIN", ")", ";", "assertSame", "(", "SHORT_PLAIN", ",", "result1", ")", ";", "assertSame", "(", "SHORT_PLAIN", ",", "result2", ")", ";", "assertSame", "(", "SHORT_PLAIN", ",", "result3", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDecodeSimple", "(", ")", "{", "String", "result1", "=", "MimeUtility", ".", "decode", "(", "SHORT_UNICODE_ENCODED", ")", ";", "assertEquals", "(", "SHORT_UNICODE", ",", "result1", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testUnfoldAndDecodeSimple", "(", ")", "{", "String", "result1", "=", "MimeUtility", ".", "unfoldAndDecode", "(", "SHORT_UNICODE_ENCODED", ")", ";", "assertEquals", "(", "SHORT_UNICODE", ",", "result1", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testComplexDecode", "(", ")", "{", "String", "result1", "=", "MimeUtility", ".", "unfoldAndDecode", "(", "CALENDAR_SUBJECT_UNICODE", ")", ";", "assertEquals", "(", "CALENDAR_SUBJECT_PLAIN", ",", "result1", ")", ";", "String", "degenerate1", "=", "MimeUtility", ".", "unfoldAndDecode", "(", "CALENDAR_DEGENERATE_UNICODE_1", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "CALENDAR_DEGENERATE_UNICODE_1", ",", "degenerate1", ")", ";", "String", "degenerate2", "=", "MimeUtility", ".", "unfoldAndDecode", "(", "CALENDAR_DEGENERATE_UNICODE_2", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "CALENDAR_DEGENERATE_UNICODE_2", ",", "degenerate2", ")", ";", "String", "degenerate3", "=", "MimeUtility", ".", "unfoldAndDecode", "(", "CALENDAR_DEGENERATE_UNICODE_3", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "CALENDAR_DEGENERATE_UNICODE_3", ",", "degenerate3", ")", ";", "String", "degenerate4", "=", "MimeUtility", ".", "unfoldAndDecode", "(", "CALENDAR_DEGENERATE_UNICODE_4", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "CALENDAR_DEGENERATE_UNICODE_4", ",", "degenerate4", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testEfficientFoldAndEncode", "(", ")", "{", "String", "result1", "=", "MimeUtility", ".", "foldAndEncode", "(", "SHORT_PLAIN", ")", ";", "String", "result2", "=", "MimeUtility", ".", "foldAndEncode2", "(", "SHORT_PLAIN", ",", "<NUM_LIT:10>", ")", ";", "String", "result3", "=", "MimeUtility", ".", "fold", "(", "SHORT_PLAIN", ",", "<NUM_LIT:10>", ")", ";", "assertSame", "(", "SHORT_PLAIN", ",", "result1", ")", ";", "assertSame", "(", "SHORT_PLAIN", ",", "result2", ")", ";", "assertSame", "(", "SHORT_PLAIN", ",", "result3", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testPaddingOfFoldAndEncode2", "(", ")", "{", "String", "result1", "=", "MimeUtility", ".", "foldAndEncode2", "(", "PADDED2_UNICODE", ",", "0", ")", ";", "String", "result2", "=", "MimeUtility", ".", "foldAndEncode2", "(", "PADDED1_UNICODE", ",", "0", ")", ";", "String", "result3", "=", "MimeUtility", ".", "foldAndEncode2", "(", "PADDED0_UNICODE", ",", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "PADDED2_UNICODE_ENCODED", ",", "result1", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "PADDED1_UNICODE_ENCODED", ",", "result2", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "PADDED0_UNICODE_ENCODED", ",", "result3", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testFoldAndEncode2", "(", ")", "{", "String", "result1", "=", "MimeUtility", ".", "foldAndEncode2", "(", "SHORT_UNICODE", ",", "<NUM_LIT:10>", ")", ";", "assertEquals", "(", "SHORT_UNICODE_ENCODED", ",", "result1", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testFoldAndEncode2WithLongSplit", "(", ")", "{", "String", "result", "=", "MimeUtility", ".", "foldAndEncode2", "(", "LONG_UNICODE_SPLIT", ",", "\"", "<STR_LIT>", "\"", ".", "length", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "LONG_UNICODE_SPLIT_ENCODED", ",", "result", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testFoldAndEncode2Supplemental", "(", ")", "{", "String", "result1", "=", "MimeUtility", ".", "foldAndEncode2", "(", "SHORT_SUPPLEMENTAL", ",", "\"", "<STR_LIT>", "\"", ".", "length", "(", ")", ")", ";", "String", "result2", "=", "MimeUtility", ".", "foldAndEncode2", "(", "LONG_SUPPLEMENTAL", ",", "\"", "<STR_LIT>", "\"", ".", "length", "(", ")", ")", ";", "String", "result3", "=", "MimeUtility", ".", "foldAndEncode2", "(", "LONG_SUPPLEMENTAL_2", ",", "\"", "<STR_LIT>", "\"", ".", "length", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "SHORT_SUPPLEMENTAL_ENCODED", ",", "result1", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "LONG_SUPPLEMENTAL_ENCODED", ",", "result2", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "LONG_SUPPLEMENTAL_ENCODED_2", ",", "result3", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testFoldAndEncode2SupplementalQuotedPrintable", "(", ")", "{", "String", "result", "=", "MimeUtility", ".", "foldAndEncode2", "(", "LONG_SUPPLEMENTAL_QP", ",", "\"", "<STR_LIT>", "\"", ".", "length", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "LONG_SUPPLEMENTAL_QP_ENCODED", ",", "result", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetHeaderParameter", "(", ")", "{", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "MimeUtility", ".", "getHeaderParameter", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "MimeUtility", ".", "getHeaderParameter", "(", "HEADER_MULTI_PARAMETER", ",", "null", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "HEADER_NO_PARAMETER", ",", "MimeUtility", ".", "getHeaderParameter", "(", "HEADER_NO_PARAMETER", ",", "null", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "MimeUtility", ".", "getHeaderParameter", "(", "HEADER_MULTI_PARAMETER", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "MimeUtility", ".", "getHeaderParameter", "(", "HEADER_MULTI_PARAMETER", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "MimeUtility", ".", "getHeaderParameter", "(", "HEADER_MULTI_PARAMETER", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "MimeUtility", ".", "getHeaderParameter", "(", "HEADER_MULTI_PARAMETER", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "MimeUtility", ".", "getHeaderParameter", "(", "HEADER_MULTI_PARAMETER", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testFindPartByContentIdTestCase", "(", ")", "throws", "MessagingException", ",", "Exception", "{", "final", "String", "cid1", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Part", "cid1bp", "=", "MessageTestUtils", ".", "bodyPart", "(", "\"", "<STR_LIT>", "\"", ",", "cid1", ")", ";", "final", "String", "cid2", "=", "\"", "<STR_LIT>", "\"", ";", "final", "Part", "cid2bp", "=", "MessageTestUtils", ".", "bodyPart", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:<>", "\"", "+", "cid2", "+", "\"", "<STR_LIT:>>", "\"", ")", ";", "final", "Message", "msg1", "=", "new", "MessageBuilder", "(", ")", ".", "setBody", "(", "new", "MultipartBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "bodyPart", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ")", ".", "addBodyPart", "(", "(", "BodyPart", ")", "cid1bp", ")", ".", "build", "(", ")", ")", ".", "build", "(", ")", ";", "final", "Part", "actual1_1", "=", "MimeUtility", ".", "findPartByContentId", "(", "msg1", ",", "cid1", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "cid1bp", ",", "actual1_1", ")", ";", "final", "Message", "msg2", "=", "new", "MessageBuilder", "(", ")", ".", "setBody", "(", "new", "MultipartBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "bodyPart", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "addBodyPart", "(", "new", "MultipartBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addBodyPart", "(", "new", "MultipartBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "bodyPart", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "bodyPart", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ")", ".", "buildBodyPart", "(", ")", ")", ".", "addBodyPart", "(", "(", "BodyPart", ")", "cid1bp", ")", ".", "buildBodyPart", "(", ")", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "bodyPart", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "addBodyPart", "(", "(", "BodyPart", ")", "cid2bp", ")", ".", "build", "(", ")", ")", ".", "build", "(", ")", ";", "final", "Part", "actual2_1", "=", "MimeUtility", ".", "findPartByContentId", "(", "msg2", ",", "cid1", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "cid1bp", ",", "actual2_1", ")", ";", "final", "Part", "actual2_2", "=", "MimeUtility", ".", "findPartByContentId", "(", "msg2", ",", "cid2", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "cid2bp", ",", "actual2_2", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetTextFromPartContentTypeCase", "(", ")", "throws", "MessagingException", "{", "final", "String", "theText", "=", "\"", "<STR_LIT>", "\"", ";", "TextBody", "tb", "=", "new", "TextBody", "(", "theText", ")", ";", "MimeBodyPart", "p", "=", "new", "MimeBodyPart", "(", ")", ";", "p", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "p", ".", "setBody", "(", "tb", ")", ";", "String", "gotText", "=", "MimeUtility", ".", "getTextFromPart", "(", "p", ")", ";", "assertEquals", "(", "theText", ",", "gotText", ")", ";", "p", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "p", ".", "setBody", "(", "tb", ")", ";", "gotText", "=", "MimeUtility", ".", "getTextFromPart", "(", "p", ")", ";", "assertEquals", "(", "theText", ",", "gotText", ")", ";", "p", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "p", ".", "setBody", "(", "tb", ")", ";", "gotText", "=", "MimeUtility", ".", "getTextFromPart", "(", "p", ")", ";", "assertEquals", "(", "theText", ",", "gotText", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testMimeTypeMatches", "(", ")", "{", "assertFalse", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertFalse", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertFalse", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testMimeTypeMatchesArray", "(", ")", "{", "String", "[", "]", "arrayZero", "=", "new", "String", "[", "0", "]", ";", "assertFalse", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "arrayZero", ")", ")", ";", "String", "[", "]", "arrayOne", "=", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", "}", ";", "assertFalse", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "arrayOne", ")", ")", ";", "assertTrue", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "arrayOne", ")", ")", ";", "String", "[", "]", "arrayTwo", "=", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ";", "assertFalse", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "arrayTwo", ")", ")", ";", "assertTrue", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "arrayTwo", ")", ")", ";", "assertTrue", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "\"", "<STR_LIT>", "\"", ",", "arrayTwo", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mStore", "=", "(", "ImapStore", ")", "ImapStore", ".", "newInstance", "(", "\"", "<STR_LIT>", "\"", ",", "getContext", "(", ")", ",", "null", ")", ";", "mFolder", "=", "(", "ImapStore", ".", "ImapFolder", ")", "mStore", ".", "getFolder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "BinaryTempFileBody", ".", "setTempDirectory", "(", "this", ".", "getContext", "(", ")", ".", "getCacheDir", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSimpleLogin", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "setupOpenFolder", "(", "mockTransport", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testImapListWithUsLocale", "(", ")", "throws", "MessagingException", "{", "Locale", "savedLocale", "=", "Locale", ".", "getDefault", "(", ")", ";", "Locale", ".", "setDefault", "(", "Locale", ".", "US", ")", ";", "doTestImapList", "(", ")", ";", "Locale", ".", "setDefault", "(", "Locale", ".", "JAPAN", ")", ";", "doTestImapList", "(", ")", ";", "Locale", ".", "setDefault", "(", "savedLocale", ")", ";", "}", "</s>"]
["<s>", "private", "void", "doTestImapList", "(", ")", "throws", "MessagingException", "{", "ImapResponseParser", "parser", "=", "new", "ImapResponseParser", "(", "null", ")", ";", "ImapResponseParser", ".", "ImapList", "list", "=", "parser", ".", "new", "ImapList", "(", ")", ";", "String", "key", "=", "\"", "<STR_LIT>", "\"", ";", "String", "date", "=", "\"", "<STR_LIT>", "\"", ";", "list", ".", "add", "(", "key", ")", ";", "list", ".", "add", "(", "date", ")", ";", "Date", "result", "=", "list", ".", "getKeyedDate", "(", "key", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "result", ".", "getTime", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSmallFolderFunctions", "(", ")", "throws", "MessagingException", "{", "Flag", "[", "]", "flags", "=", "mFolder", ".", "getPermanentFlags", "(", ")", ";", "assertEquals", "(", "<NUM_LIT:3>", ",", "flags", ".", "length", ")", ";", "assertEquals", "(", "Flag", ".", "DELETED", ",", "flags", "[", "0", "]", ")", ";", "assertEquals", "(", "Flag", ".", "SEEN", ",", "flags", "[", "1", "]", ")", ";", "assertEquals", "(", "Flag", ".", "FLAGGED", ",", "flags", "[", "<NUM_LIT:2>", "]", ")", ";", "assertTrue", "(", "mFolder", ".", "canCreate", "(", "FolderType", ".", "HOLDS_FOLDERS", ")", ")", ";", "assertTrue", "(", "mFolder", ".", "canCreate", "(", "FolderType", ".", "HOLDS_MESSAGES", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testNoFolderRolesYet", "(", ")", "{", "assertEquals", "(", "Folder", ".", "FolderRole", ".", "UNKNOWN", ",", "mFolder", ".", "getRole", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testNoStructurePrefetch", "(", ")", "{", "assertFalse", "(", "mStore", ".", "requireStructurePrefetch", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSentUploadRequested", "(", ")", "{", "assertTrue", "(", "mStore", ".", "requireCopyMessageToSentFolder", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "MockTransport", "openAndInjectMockTransport", "(", ")", "{", "MockTransport", "mockTransport", "=", "new", "MockTransport", "(", ")", ";", "mockTransport", ".", "setSecurity", "(", "Transport", ".", "CONNECTION_SECURITY_NONE", ",", "false", ")", ";", "mStore", ".", "setTransport", "(", "mockTransport", ")", ";", "return", "mockTransport", ";", "}", "</s>"]
["<s>", "private", "void", "setupOpenFolder", "(", "MockTransport", "mockTransport", ")", "{", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetUnreadMessageCountWithQuotedString", "(", ")", "throws", "Exception", "{", "MockTransport", "mock", "=", "openAndInjectMockTransport", "(", ")", ";", "setupOpenFolder", "(", "mock", ")", ";", "mock", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "int", "unreadCount", "=", "mFolder", ".", "getUnreadMessageCount", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "unreadCount", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetUnreadMessageCountWithLiteralString", "(", ")", "throws", "Exception", "{", "MockTransport", "mock", "=", "openAndInjectMockTransport", "(", ")", ";", "setupOpenFolder", "(", "mock", ")", ";", "mock", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "int", "unreadCount", "=", "mFolder", ".", "getUnreadMessageCount", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:10>", ",", "unreadCount", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testNilMessage", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mock", "=", "openAndInjectMockTransport", "(", ")", ";", "setupOpenFolder", "(", "mock", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "clear", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "STRUCTURE", ")", ";", "Message", "message1", "=", "mFolder", ".", "createMessage", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "mock", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ";", "mFolder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "message1", "}", ",", "fp", ",", "null", ")", ";", "mock", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:]>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ";", "ArrayList", "<", "Part", ">", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "ArrayList", "<", "Part", ">", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "message1", ",", "viewables", ",", "attachments", ")", ";", "assertTrue", "(", "viewables", ".", "size", "(", ")", "=", "=", "1", ")", ";", "Part", "emptyBodyPart", "=", "viewables", ".", "get", "(", "0", ")", ";", "fp", ".", "clear", "(", ")", ";", "fp", ".", "add", "(", "emptyBodyPart", ")", ";", "mFolder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "message1", "}", ",", "fp", ",", "null", ")", ";", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "message1", ",", "viewables", ",", "attachments", ")", ";", "assertTrue", "(", "viewables", ".", "size", "(", ")", "=", "=", "1", ")", ";", "emptyBodyPart", "=", "viewables", ".", "get", "(", "0", ")", ";", "String", "text", "=", "MimeUtility", ".", "getTextFromPart", "(", "emptyBodyPart", ")", ";", "assertNull", "(", "text", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mStore", "=", "(", "Pop3Store", ")", "Pop3Store", ".", "newInstance", "(", "\"", "<STR_LIT>", "\"", ",", "getContext", "(", ")", ",", "null", ")", ";", "mFolder", "=", "(", "Pop3Store", ".", "Pop3Folder", ")", "mStore", ".", "getFolder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "BinaryTempFileBody", ".", "setTempDirectory", "(", "this", ".", "getContext", "(", ")", ".", "getCacheDir", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testUIDLParserMulti", "(", ")", "{", "Pop3Store", ".", "Pop3Folder", ".", "UidlParser", "parser", "=", "mFolder", ".", "new", "UidlParser", "(", ")", ";", "parser", ".", "parseMultiLine", "(", "\"", "<STR_LIT>", "\"", "+", "UNIQUE_ID_1", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "parser", ".", "mMessageNumber", ")", ";", "assertEquals", "(", "UNIQUE_ID_1", ",", "parser", ".", "mUniqueId", ")", ";", "assertFalse", "(", "parser", ".", "mEndOfMessage", ")", ";", "assertFalse", "(", "parser", ".", "mErr", ")", ";", "parser", ".", "parseMultiLine", "(", "\"", "<STR_LIT:.>", "\"", ")", ";", "assertTrue", "(", "parser", ".", "mEndOfMessage", ")", ";", "assertFalse", "(", "parser", ".", "mErr", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testUIDLParserSingle", "(", ")", "{", "Pop3Store", ".", "Pop3Folder", ".", "UidlParser", "parser", "=", "mFolder", ".", "new", "UidlParser", "(", ")", ";", "parser", ".", "parseSingleLine", "(", "\"", "<STR_LIT>", "\"", "+", "UNIQUE_ID_1", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "parser", ".", "mMessageNumber", ")", ";", "assertEquals", "(", "UNIQUE_ID_1", ",", "parser", ".", "mUniqueId", ")", ";", "assertTrue", "(", "parser", ".", "mEndOfMessage", ")", ";", "parser", ".", "parseSingleLine", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertTrue", "(", "parser", ".", "mErr", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testUIDLParserMultiFail", "(", ")", "{", "Pop3Store", ".", "Pop3Folder", ".", "UidlParser", "parser", "=", "mFolder", ".", "new", "UidlParser", "(", ")", ";", "boolean", "result", ";", "result", "=", "parser", ".", "parseMultiLine", "(", "null", ")", ";", "assertFalse", "(", "result", ")", ";", "result", "=", "parser", ".", "parseMultiLine", "(", "\"", "\"", ")", ";", "assertFalse", "(", "result", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testUIDLParserSingleFail", "(", ")", "{", "Pop3Store", ".", "Pop3Folder", ".", "UidlParser", "parser", "=", "mFolder", ".", "new", "UidlParser", "(", ")", ";", "boolean", "result", ";", "result", "=", "parser", ".", "parseSingleLine", "(", "null", ")", ";", "assertFalse", "(", "result", ")", ";", "result", "=", "parser", ".", "parseSingleLine", "(", "\"", "\"", ")", ";", "assertFalse", "(", "result", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testUIDLComcastVariant", "(", ")", "{", "Pop3Store", ".", "Pop3Folder", ".", "UidlParser", "parser", "=", "mFolder", ".", "new", "UidlParser", "(", ")", ";", "parser", ".", "parseMultiLine", "(", "\"", "<STR_LIT>", "\"", "+", "UNIQUE_ID_1", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "parser", ".", "mMessageNumber", ")", ";", "assertEquals", "(", "UNIQUE_ID_1", ",", "parser", ".", "mUniqueId", ")", ";", "assertFalse", "(", "parser", ".", "mEndOfMessage", ")", ";", "assertFalse", "(", "parser", ".", "mErr", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSimpleLogin", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "setupOpenFolder", "(", "mockTransport", ",", "0", ",", "null", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_ONLY", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCheckSettings", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "setupOpenFolder", "(", "mockTransport", ",", "0", ",", "null", ")", ";", "setupUidlSequence", "(", "mockTransport", ",", "1", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "mStore", ".", "checkSettings", "(", ")", ";", "setupOpenFolder", "(", "mockTransport", ",", "0", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "mStore", ".", "checkSettings", "(", ")", ";", "try", "{", "setupOpenFolder", "(", "mockTransport", ",", "0", ",", "null", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "mStore", ".", "checkSettings", "(", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "}", "</s>"]
["<s>", "public", "void", "testStoreFoldersFunctions", "(", ")", "throws", "MessagingException", "{", "Folder", "[", "]", "folders", "=", "mStore", ".", "getPersonalNamespaces", "(", ")", ";", "assertEquals", "(", "1", ",", "folders", ".", "length", ")", ";", "assertSame", "(", "mFolder", ",", "folders", "[", "0", "]", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mFolder", ".", "getName", "(", ")", ")", ";", "Pop3Store", ".", "Pop3Folder", "folderMixedCaseInbox", "=", "mStore", ".", "new", "Pop3Folder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "folderMixedCaseInbox", ".", "getName", "(", ")", ")", ";", "Pop3Store", ".", "Pop3Folder", "folderNotInbox", "=", "mStore", ".", "new", "Pop3Folder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "folderNotInbox", ".", "getName", "(", ")", ")", ";", "assertTrue", "(", "mFolder", ".", "exists", "(", ")", ")", ";", "assertTrue", "(", "folderMixedCaseInbox", ".", "exists", "(", ")", ")", ";", "assertFalse", "(", "folderNotInbox", ".", "exists", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSmallFolderFunctions", "(", ")", "throws", "MessagingException", "{", "assertEquals", "(", "OpenMode", ".", "READ_WRITE", ",", "mFolder", ".", "getMode", "(", ")", ")", ";", "assertFalse", "(", "mFolder", ".", "canCreate", "(", "FolderType", ".", "HOLDS_FOLDERS", ")", ")", ";", "assertFalse", "(", "mFolder", ".", "canCreate", "(", "FolderType", ".", "HOLDS_MESSAGES", ")", ")", ";", "assertFalse", "(", "mFolder", ".", "create", "(", "FolderType", ".", "HOLDS_FOLDERS", ")", ")", ";", "assertFalse", "(", "mFolder", ".", "create", "(", "FolderType", ".", "HOLDS_MESSAGES", ")", ")", ";", "assertEquals", "(", "-", "1", ",", "mFolder", ".", "getUnreadMessageCount", "(", ")", ")", ";", "try", "{", "mFolder", ".", "getMessages", "(", "null", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "UnsupportedOperationException", "e", ")", "{", "}", "try", "{", "mFolder", ".", "getMessages", "(", "null", ",", "null", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "UnsupportedOperationException", "e", ")", "{", "}", "Flag", "[", "]", "flags", "=", "mFolder", ".", "getPermanentFlags", "(", ")", ";", "assertEquals", "(", "1", ",", "flags", ".", "length", ")", ";", "assertEquals", "(", "Flag", ".", "DELETED", ",", "flags", "[", "0", "]", ")", ";", "mFolder", ".", "appendMessages", "(", "null", ")", ";", "mFolder", ".", "delete", "(", "false", ")", ";", "assertNull", "(", "mFolder", ".", "expunge", "(", ")", ")", ";", "try", "{", "mFolder", ".", "copyMessages", "(", "null", ",", "null", ",", "null", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "UnsupportedOperationException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "public", "void", "testNoFolderRolesYet", "(", ")", "throws", "MessagingException", "{", "Folder", "[", "]", "remoteFolders", "=", "mStore", ".", "getPersonalNamespaces", "(", ")", ";", "for", "(", "Folder", "folder", ":", "remoteFolders", ")", "{", "assertEquals", "(", "Folder", ".", "FolderRole", ".", "UNKNOWN", ",", "folder", ".", "getRole", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testNoStructurePrefetch", "(", ")", "{", "assertFalse", "(", "mStore", ".", "requireStructurePrefetch", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSentUploadRequested", "(", ")", "{", "assertTrue", "(", "mStore", ".", "requireCopyMessageToSentFolder", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testOneUnread", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "checkOneUnread", "(", "mockTransport", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetMessageByUid", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "setupOpenFolder", "(", "mockTransport", ",", "<NUM_LIT:2>", ",", "null", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "mFolder", ".", "getMessageCount", "(", ")", ")", ";", "setupUidlSequence", "(", "mockTransport", ",", "<NUM_LIT:2>", ")", ";", "String", "uid1", "=", "getSingleMessageUID", "(", "1", ")", ";", "String", "uid2", "=", "getSingleMessageUID", "(", "<NUM_LIT:2>", ")", ";", "String", "uid3", "=", "getSingleMessageUID", "(", "<NUM_LIT:3>", ")", ";", "Message", "msg1", "=", "mFolder", ".", "getMessage", "(", "uid1", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "msg1", "!", "=", "null", ")", ";", "Message", "msg3", "=", "mFolder", ".", "getMessage", "(", "uid3", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "msg3", "=", "=", "null", ")", ";", "Message", "msg2", "=", "mFolder", ".", "getMessage", "(", "uid2", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "msg2", "!", "=", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCatchClosed1a", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "openFolderWithMessage", "(", "mockTransport", ")", ";", "mockTransport", ".", "closeInputStream", "(", ")", ";", "try", "{", "setupUidlSequence", "(", "mockTransport", ",", "1", ")", ";", "Message", "[", "]", "messages", "=", "mFolder", ".", "getMessages", "(", "1", ",", "1", ",", "null", ")", ";", "assertEquals", "(", "1", ",", "messages", ".", "length", ")", ";", "assertEquals", "(", "getSingleMessageUID", "(", "1", ")", ",", "messages", "[", "0", "]", ".", "getUid", "(", ")", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "mFolder", ".", "isOpen", "(", ")", ")", ";", "checkOneUnread", "(", "mockTransport", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCatchClosed1b", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "openFolderWithMessage", "(", "mockTransport", ")", ";", "try", "{", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", "+", "\"", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT:.>", "\"", ")", ";", "Message", "[", "]", "messages", "=", "mFolder", ".", "getMessages", "(", "1", ",", "1", ",", "null", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "mFolder", ".", "isOpen", "(", ")", ")", ";", "checkOneUnread", "(", "mockTransport", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCatchClosed1c", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "setupOpenFolder", "(", "mockTransport", ",", "<NUM_LIT>", ",", "null", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_ONLY", ",", "null", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "mFolder", ".", "getMessageCount", "(", ")", ")", ";", "try", "{", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "Message", "[", "]", "messages", "=", "mFolder", ".", "getMessages", "(", "1", ",", "1", ",", "null", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "mFolder", ".", "isOpen", "(", ")", ")", ";", "checkOneUnread", "(", "mockTransport", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCatchClosed2", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "openFolderWithMessage", "(", "mockTransport", ")", ";", "setupUidlSequence", "(", "mockTransport", ",", "1", ")", ";", "Message", "[", "]", "messages", "=", "mFolder", ".", "getMessages", "(", "1", ",", "1", ",", "null", ")", ";", "assertEquals", "(", "1", ",", "messages", ".", "length", ")", ";", "assertEquals", "(", "getSingleMessageUID", "(", "1", ")", ",", "messages", "[", "0", "]", ".", "getUid", "(", ")", ")", ";", "mockTransport", ".", "closeInputStream", "(", ")", ";", "try", "{", "setupListSequence", "(", "mockTransport", ",", "1", ")", ";", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "FLAGS", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ";", "mFolder", ".", "fetch", "(", "messages", ",", "fp", ",", "null", ")", ";", "assertEquals", "(", "PER_MESSAGE_SIZE", ",", "messages", "[", "0", "]", ".", "getSize", "(", ")", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "mFolder", ".", "isOpen", "(", ")", ")", ";", "checkOneUnread", "(", "mockTransport", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCatchClosed2a", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "openFolderWithMessage", "(", "mockTransport", ")", ";", "setupUidlSequence", "(", "mockTransport", ",", "1", ")", ";", "Message", "[", "]", "messages", "=", "mFolder", ".", "getMessages", "(", "1", ",", "1", ",", "null", ")", ";", "assertEquals", "(", "1", ",", "messages", ".", "length", ")", ";", "assertEquals", "(", "getSingleMessageUID", "(", "1", ")", ",", "messages", "[", "0", "]", ".", "getUid", "(", ")", ")", ";", "setupBrokenListSequence", "(", "mockTransport", ",", "1", ")", ";", "try", "{", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "FLAGS", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ";", "mFolder", ".", "fetch", "(", "messages", ",", "fp", ",", "null", ")", ";", "assertEquals", "(", "PER_MESSAGE_SIZE", ",", "messages", "[", "0", "]", ".", "getSize", "(", ")", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "mFolder", ".", "isOpen", "(", ")", ")", ";", "checkOneUnread", "(", "mockTransport", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCatchClosed3", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "openFolderWithMessage", "(", "mockTransport", ")", ";", "setupUidlSequence", "(", "mockTransport", ",", "1", ")", ";", "Message", "[", "]", "messages", "=", "mFolder", ".", "getMessages", "(", "1", ",", "1", ",", "null", ")", ";", "assertEquals", "(", "1", ",", "messages", ".", "length", ")", ";", "assertEquals", "(", "getSingleMessageUID", "(", "1", ")", ",", "messages", "[", "0", "]", ".", "getUid", "(", ")", ")", ";", "setupListSequence", "(", "mockTransport", ",", "1", ")", ";", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "FLAGS", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ";", "mFolder", ".", "fetch", "(", "messages", ",", "fp", ",", "null", ")", ";", "assertEquals", "(", "PER_MESSAGE_SIZE", ",", "messages", "[", "0", "]", ".", "getSize", "(", ")", ")", ";", "mockTransport", ".", "closeInputStream", "(", ")", ";", "try", "{", "setupSingleMessage", "(", "mockTransport", ",", "1", ",", "false", ")", ";", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ";", "mFolder", ".", "fetch", "(", "messages", ",", "fp", ",", "null", ")", ";", "checkFetchedMessage", "(", "messages", "[", "0", "]", ",", "1", ",", "false", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "mFolder", ".", "isOpen", "(", ")", ")", ";", "checkOneUnread", "(", "mockTransport", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCatchClosed4", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "openFolderWithMessage", "(", "mockTransport", ")", ";", "setupUidlSequence", "(", "mockTransport", ",", "1", ")", ";", "Message", "[", "]", "messages", "=", "mFolder", ".", "getMessages", "(", "1", ",", "1", ",", "null", ")", ";", "assertEquals", "(", "1", ",", "messages", ".", "length", ")", ";", "assertEquals", "(", "getSingleMessageUID", "(", "1", ")", ",", "messages", "[", "0", "]", ".", "getUid", "(", ")", ")", ";", "mockTransport", ".", "closeInputStream", "(", ")", ";", "try", "{", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mFolder", ".", "setFlags", "(", "messages", ",", "new", "Flag", "[", "]", "{", "Flag", ".", "DELETED", "}", ",", "true", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "mFolder", ".", "isOpen", "(", ")", ")", ";", "checkOneUnread", "(", "mockTransport", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCatchClosed5", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "testCatchClosed6a", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "setupOpenFolder", "(", "mockTransport", ",", "-", "1", ",", "null", ")", ";", "try", "{", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_ONLY", ",", "null", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "mFolder", ".", "isOpen", "(", ")", ")", ";", "checkOneUnread", "(", "mockTransport", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCatchClosed6b", "(", ")", "throws", "MessagingException", "{", "}", "</s>"]
["<s>", "private", "void", "checkOneUnread", "(", "MockTransport", "mockTransport", ")", "throws", "MessagingException", "{", "openFolderWithMessage", "(", "mockTransport", ")", ";", "setupUidlSequence", "(", "mockTransport", ",", "1", ")", ";", "Message", "[", "]", "messages", "=", "mFolder", ".", "getMessages", "(", "1", ",", "1", ",", "null", ")", ";", "assertEquals", "(", "1", ",", "messages", ".", "length", ")", ";", "assertEquals", "(", "getSingleMessageUID", "(", "1", ")", ",", "messages", "[", "0", "]", ".", "getUid", "(", ")", ")", ";", "setupListSequence", "(", "mockTransport", ",", "1", ")", ";", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "FLAGS", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ";", "mFolder", ".", "fetch", "(", "messages", ",", "fp", ",", "null", ")", ";", "assertEquals", "(", "PER_MESSAGE_SIZE", ",", "messages", "[", "0", "]", ".", "getSize", "(", ")", ")", ";", "MimeMessage", "message", "=", "(", "MimeMessage", ")", "messages", "[", "0", "]", ";", "message", ".", "getRecipients", "(", "RecipientType", ".", "TO", ")", ";", "message", ".", "getRecipients", "(", "RecipientType", ".", "CC", ")", ";", "message", ".", "getRecipients", "(", "RecipientType", ".", "BCC", ")", ";", "setupSingleMessage", "(", "mockTransport", ",", "1", ",", "false", ")", ";", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ";", "mFolder", ".", "fetch", "(", "messages", ",", "fp", ",", "null", ")", ";", "checkFetchedMessage", "(", "messages", "[", "0", "]", ",", "1", ",", "false", ")", ";", "}", "</s>"]
["<s>", "private", "MockTransport", "openAndInjectMockTransport", "(", ")", "{", "MockTransport", "mockTransport", "=", "new", "MockTransport", "(", ")", ";", "mockTransport", ".", "setSecurity", "(", "Transport", ".", "CONNECTION_SECURITY_NONE", ",", "false", ")", ";", "mStore", ".", "setTransport", "(", "mockTransport", ")", ";", "return", "mockTransport", ";", "}", "</s>"]
["<s>", "private", "void", "openFolderWithMessage", "(", "MockTransport", "mockTransport", ")", "throws", "MessagingException", "{", "setupOpenFolder", "(", "mockTransport", ",", "1", ",", "null", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_ONLY", ",", "null", ")", ";", "assertEquals", "(", "1", ",", "mFolder", ".", "getMessageCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkFetchedMessage", "(", "Message", "message", ",", "int", "msgNum", ",", "boolean", "body", ")", "throws", "MessagingException", "{", "Address", "[", "]", "to", "=", "message", ".", "getRecipients", "(", "RecipientType", ".", "TO", ")", ";", "assertNotNull", "(", "to", ")", ";", "assertEquals", "(", "1", ",", "to", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "to", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "to", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "Address", "[", "]", "from", "=", "message", ".", "getFrom", "(", ")", ";", "assertNotNull", "(", "from", ")", ";", "assertEquals", "(", "1", ",", "from", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "from", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "from", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "Address", "[", "]", "cc", "=", "message", ".", "getRecipients", "(", "RecipientType", ".", "CC", ")", ";", "assertNotNull", "(", "cc", ")", ";", "assertEquals", "(", "1", ",", "cc", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "cc", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "cc", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "Address", "[", "]", "replyto", "=", "message", ".", "getReplyTo", "(", ")", ";", "assertNotNull", "(", "replyto", ")", ";", "assertEquals", "(", "1", ",", "replyto", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "replyto", "[", "0", "]", ".", "getAddress", "(", ")", ")", ";", "assertNull", "(", "replyto", "[", "0", "]", ".", "getPersonal", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "setupOpenFolder", "(", "MockTransport", "mockTransport", ",", "int", "statCount", ",", "String", "capabilities", ")", "{", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "capabilities", "=", "=", "null", ")", "{", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "null", ",", "capabilities", ".", "split", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ")", ";", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT:.>", "\"", ")", ";", "}", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "statCount", "=", "=", "-", "1", ")", "{", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "}", "else", "{", "String", "stat", "=", "\"", "<STR_LIT>", "\"", "+", "Integer", ".", "toString", "(", "statCount", ")", "+", "\"", "\"", "+", "Integer", ".", "toString", "(", "PER_MESSAGE_SIZE", "*", "statCount", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "stat", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "void", "setupUidlSequence", "(", "MockTransport", "transport", ",", "int", "numMessages", ")", "{", "transport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "int", "msgNum", "=", "1", ";", "msgNum", "<", "=", "numMessages", ";", "+", "+", "msgNum", ")", "{", "transport", ".", "expect", "(", "null", ",", "Integer", ".", "toString", "(", "msgNum", ")", "+", "\"", "\"", "+", "getSingleMessageUID", "(", "msgNum", ")", ")", ";", "}", "transport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT:.>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "setupListSequence", "(", "MockTransport", "transport", ",", "int", "numMessages", ")", "{", "transport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "int", "msgNum", "=", "1", ";", "msgNum", "<", "=", "numMessages", ";", "+", "+", "msgNum", ")", "{", "transport", ".", "expect", "(", "null", ",", "Integer", ".", "toString", "(", "msgNum", ")", "+", "\"", "\"", "+", "Integer", ".", "toString", "(", "PER_MESSAGE_SIZE", "*", "msgNum", ")", ")", ";", "}", "transport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT:.>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "setupBrokenListSequence", "(", "MockTransport", "transport", ",", "int", "numMessages", ")", "{", "transport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "for", "(", "int", "msgNum", "=", "1", ";", "msgNum", "<", "=", "numMessages", ";", "+", "+", "msgNum", ")", "{", "transport", ".", "expect", "(", "null", ",", "\"", "\"", ")", ";", "}", "transport", ".", "expect", "(", "null", ",", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "setupSingleMessage", "(", "MockTransport", "transport", ",", "int", "msgNum", ",", "boolean", "body", ")", "{", "transport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", "+", "Integer", ".", "toString", "(", "msgNum", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "transport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "transport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "transport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "transport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "transport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "transport", ".", "expect", "(", "null", ",", "\"", "\"", ")", ";", "transport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT:.>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "getSingleMessageUID", "(", "int", "msgNum", ")", "{", "final", "String", "UID_HEAD", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "UID_TAIL", "=", "\"", "\"", ";", "return", "UID_HEAD", "+", "Integer", ".", "toString", "(", "msgNum", ")", "+", "UID_TAIL", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mLocalStoreUri", "=", "\"", "<STR_LIT>", "\"", "+", "getContext", "(", ")", ".", "getDatabasePath", "(", "dbName", ")", ";", "mStore", "=", "(", "LocalStore", ")", "LocalStore", ".", "newInstance", "(", "mLocalStoreUri", ",", "getContext", "(", ")", ",", "null", ")", ";", "mFolder", "=", "(", "LocalStore", ".", "LocalFolder", ")", "mStore", ".", "getFolder", "(", "FOLDER_NAME", ")", ";", "mCacheDir", "=", "getContext", "(", ")", ".", "getCacheDir", "(", ")", ";", "BinaryTempFileBody", ".", "setTempDirectory", "(", "mCacheDir", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "tearDown", "(", ")", "throws", "Exception", "{", "super", ".", "tearDown", "(", ")", ";", "if", "(", "mFolder", "!", "=", "null", ")", "{", "mFolder", ".", "close", "(", "false", ")", ";", "}", "if", "(", "mStore", "!", "=", "null", ")", "{", "mStore", ".", "delete", "(", ")", ";", "}", "URI", "uri", "=", "new", "URI", "(", "mLocalStoreUri", ")", ";", "String", "path", "=", "uri", ".", "getPath", "(", ")", ";", "File", "attachmentsDir", "=", "new", "File", "(", "path", "+", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "File", "[", "]", "attachments", "=", "attachmentsDir", ".", "listFiles", "(", ")", ";", "for", "(", "File", "attachment", ":", "attachments", ")", "{", "if", "(", "attachment", ".", "exists", "(", ")", ")", "{", "attachment", ".", "delete", "(", ")", ";", "}", "}", "}", "catch", "(", "RuntimeException", "e", ")", "{", "}", "try", "{", "if", "(", "attachmentsDir", ".", "exists", "(", ")", ")", "{", "attachmentsDir", ".", "delete", "(", ")", ";", "}", "}", "catch", "(", "RuntimeException", "e", ")", "{", "}", "try", "{", "new", "File", "(", "path", ")", ".", "delete", "(", ")", ";", "}", "catch", "(", "RuntimeException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "public", "void", "testMessageId_1", "(", ")", "throws", "MessagingException", "{", "final", "MimeMessage", "message", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message", ".", "setMessageId", "(", "MESSAGE_ID", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "mFolder", ".", "appendMessages", "(", "new", "Message", "[", "]", "{", "message", "}", ")", ";", "String", "localUid", "=", "message", ".", "getUid", "(", ")", ";", "MimeMessage", "retrieved", "=", "(", "MimeMessage", ")", "mFolder", ".", "getMessage", "(", "localUid", ")", ";", "assertEquals", "(", "MESSAGE_ID", ",", "retrieved", ".", "getMessageId", "(", ")", ")", ";", "Message", "[", "]", "retrievedArray", "=", "mFolder", ".", "getMessages", "(", "null", ")", ";", "assertEquals", "(", "1", ",", "retrievedArray", ".", "length", ")", ";", "MimeMessage", "retrievedEntry", "=", "(", "MimeMessage", ")", "retrievedArray", "[", "0", "]", ";", "assertEquals", "(", "MESSAGE_ID", ",", "retrievedEntry", ".", "getMessageId", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testMessageId_2", "(", ")", "throws", "MessagingException", "{", "final", "MimeMessage", "message", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message", ".", "setMessageId", "(", "MESSAGE_ID", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "mFolder", ".", "appendMessages", "(", "new", "Message", "[", "]", "{", "message", "}", ")", ";", "String", "localUid", "=", "message", ".", "getUid", "(", ")", ";", "MimeMessage", "retrieved", "=", "(", "MimeMessage", ")", "mFolder", ".", "getMessage", "(", "localUid", ")", ";", "assertEquals", "(", "MESSAGE_ID", ",", "retrieved", ".", "getMessageId", "(", ")", ")", ";", "retrieved", ".", "setMessageId", "(", "MESSAGE_ID_2", ")", ";", "mFolder", ".", "updateMessage", "(", "(", "LocalStore", ".", "LocalMessage", ")", "retrieved", ")", ";", "Message", "[", "]", "retrievedArray", "=", "mFolder", ".", "getMessages", "(", "null", ")", ";", "assertEquals", "(", "1", ",", "retrievedArray", ".", "length", ")", ";", "MimeMessage", "retrievedEntry", "=", "(", "MimeMessage", ")", "retrievedArray", "[", "0", "]", ";", "assertEquals", "(", "MESSAGE_ID_2", ",", "retrievedEntry", ".", "getMessageId", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "MimeMessage", "buildTestMessage", "(", "String", "to", ",", "String", "sender", ",", "String", "subject", ",", "String", "content", ")", "throws", "MessagingException", "{", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "if", "(", "to", "!", "=", "null", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "to", ")", ";", "message", ".", "setRecipients", "(", "RecipientType", ".", "TO", ",", "addresses", ")", ";", "}", "if", "(", "sender", "!", "=", "null", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "sender", ")", ";", "message", ".", "setFrom", "(", "Address", ".", "parse", "(", "sender", ")", "[", "0", "]", ")", ";", "}", "if", "(", "subject", "!", "=", "null", ")", "{", "message", ".", "setSubject", "(", "subject", ")", ";", "}", "if", "(", "content", "!", "=", "null", ")", "{", "TextBody", "body", "=", "new", "TextBody", "(", "content", ")", ";", "message", ".", "setBody", "(", "body", ")", ";", "}", "return", "message", ";", "}", "</s>"]
["<s>", "public", "void", "testFetchModes", "(", ")", "throws", "MessagingException", "{", "final", "String", "BODY_TEXT_PLAIN", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "BODY_TEXT_HTML", "=", "\"", "<STR_LIT>", "\"", ";", "MimeMessage", "message", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message", ".", "setMessageId", "(", "MESSAGE_ID", ")", ";", "Body", "body", "=", "new", "MultipartBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "bodyPart", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "addBodyPart", "(", "new", "MultipartBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addBodyPart", "(", "new", "MultipartBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "textPart", "(", "\"", "<STR_LIT>", "\"", ",", "BODY_TEXT_PLAIN", ")", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "textPart", "(", "\"", "<STR_LIT>", "\"", ",", "BODY_TEXT_HTML", ")", ")", ".", "buildBodyPart", "(", ")", ")", ".", "buildBodyPart", "(", ")", ")", ".", "addBodyPart", "(", "MessageTestUtils", ".", "bodyPart", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "build", "(", ")", ";", "message", ".", "setBody", "(", "body", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "mFolder", ".", "appendMessages", "(", "new", "Message", "[", "]", "{", "message", "}", ")", ";", "Message", "[", "]", "messages", "=", "mFolder", ".", "getMessages", "(", "null", ")", ";", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "STRUCTURE", ")", ";", "mFolder", ".", "fetch", "(", "messages", ",", "fp", ",", "null", ")", ";", "Part", "textPart", "=", "MimeUtility", ".", "findFirstPartByMimeType", "(", "messages", "[", "0", "]", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Part", "htmlPart", "=", "MimeUtility", ".", "findFirstPartByMimeType", "(", "messages", "[", "0", "]", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertNull", "(", "MimeUtility", ".", "getTextFromPart", "(", "textPart", ")", ")", ";", "assertNull", "(", "MimeUtility", ".", "getTextFromPart", "(", "htmlPart", ")", ")", ";", "messages", "=", "mFolder", ".", "getMessages", "(", "null", ")", ";", "fp", ".", "clear", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ";", "mFolder", ".", "fetch", "(", "messages", ",", "fp", ",", "null", ")", ";", "textPart", "=", "MimeUtility", ".", "findFirstPartByMimeType", "(", "messages", "[", "0", "]", ",", "\"", "<STR_LIT>", "\"", ")", ";", "htmlPart", "=", "MimeUtility", ".", "findFirstPartByMimeType", "(", "messages", "[", "0", "]", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "BODY_TEXT_PLAIN", ",", "MimeUtility", ".", "getTextFromPart", "(", "textPart", ")", ")", ";", "assertEquals", "(", "BODY_TEXT_HTML", ",", "MimeUtility", ".", "getTextFromPart", "(", "htmlPart", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testStorePersistentData", "(", ")", "{", "final", "String", "TEST_KEY", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "TEST_KEY_2", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "TEST_STRING", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "TEST_STRING_2", "=", "\"", "<STR_LIT>", "\"", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mStore", ".", "getPersistentString", "(", "TEST_KEY", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "mStore", ".", "setPersistentString", "(", "TEST_KEY", ",", "TEST_STRING", ")", ";", "mStore", ".", "setPersistentString", "(", "TEST_KEY_2", ",", "TEST_STRING_2", ")", ";", "assertEquals", "(", "TEST_STRING", ",", "mStore", ".", "getPersistentString", "(", "TEST_KEY", ",", "null", ")", ")", ";", "assertEquals", "(", "TEST_STRING_2", ",", "mStore", ".", "getPersistentString", "(", "TEST_KEY_2", ",", "null", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testStorePersistentCallbacks", "(", ")", "throws", "MessagingException", "{", "final", "String", "TEST_KEY", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "TEST_KEY_2", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "TEST_STRING", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "TEST_STRING_2", "=", "\"", "<STR_LIT>", "\"", ";", "Store", ".", "PersistentDataCallbacks", "callbacks", "=", "mStore", ".", "getPersistentCallbacks", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "callbacks", ".", "getPersistentString", "(", "TEST_KEY", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "callbacks", ".", "setPersistentString", "(", "TEST_KEY", ",", "TEST_STRING", ")", ";", "callbacks", ".", "setPersistentString", "(", "TEST_KEY_2", ",", "TEST_STRING_2", ")", ";", "assertEquals", "(", "TEST_STRING", ",", "mStore", ".", "getPersistentString", "(", "TEST_KEY", ",", "null", ")", ")", ";", "assertEquals", "(", "TEST_STRING_2", ",", "mStore", ".", "getPersistentString", "(", "TEST_KEY_2", ",", "null", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testFolderPersistentStorage", "(", ")", "throws", "MessagingException", "{", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "LocalStore", ".", "LocalFolder", "folder2", "=", "(", "LocalStore", ".", "LocalFolder", ")", "mStore", ".", "getFolder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertFalse", "(", "folder2", ".", "exists", "(", ")", ")", ";", "folder2", ".", "create", "(", "FolderType", ".", "HOLDS_MESSAGES", ")", ";", "folder2", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "Folder", ".", "PersistentDataCallbacks", "callbacks", "=", "mFolder", ".", "getPersistentCallbacks", "(", ")", ";", "Folder", ".", "PersistentDataCallbacks", "callbacks2", "=", "folder2", ".", "getPersistentCallbacks", "(", ")", ";", "callbacks", ".", "setPersistentString", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "callbacks", ".", "setPersistentString", "(", "\"", "<STR_LIT:2>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "callbacks2", ".", "setPersistentString", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "callbacks2", ".", "setPersistentString", "(", "\"", "<STR_LIT:2>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "callbacks", ".", "getPersistentString", "(", "\"", "<STR_LIT:1>", "\"", ",", "null", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "callbacks", ".", "getPersistentString", "(", "\"", "<STR_LIT:2>", "\"", ",", "null", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "callbacks2", ".", "getPersistentString", "(", "\"", "<STR_LIT:1>", "\"", ",", "null", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "callbacks2", ".", "getPersistentString", "(", "\"", "<STR_LIT:2>", "\"", ",", "null", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "callbacks", ".", "getPersistentString", "(", "\"", "<STR_LIT:3>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "callbacks2", ".", "getPersistentString", "(", "\"", "<STR_LIT:3>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "callbacks", ".", "setPersistentString", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "callbacks2", ".", "setPersistentString", "(", "\"", "<STR_LIT:2>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "callbacks", ".", "getPersistentString", "(", "\"", "<STR_LIT:1>", "\"", ",", "null", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "callbacks", ".", "getPersistentString", "(", "\"", "<STR_LIT:2>", "\"", ",", "null", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "callbacks2", ".", "getPersistentString", "(", "\"", "<STR_LIT:1>", "\"", ",", "null", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "callbacks2", ".", "getPersistentString", "(", "\"", "<STR_LIT:2>", "\"", ",", "null", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testFolderPersistentBulkUpdate", "(", ")", "throws", "MessagingException", "{", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "LocalStore", ".", "LocalFolder", "folder2", "=", "(", "LocalStore", ".", "LocalFolder", ")", "mStore", ".", "getFolder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertFalse", "(", "folder2", ".", "exists", "(", ")", ")", ";", "folder2", ".", "create", "(", "FolderType", ".", "HOLDS_MESSAGES", ")", ";", "folder2", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "Folder", ".", "PersistentDataCallbacks", "callbacks", "=", "mFolder", ".", "getPersistentCallbacks", "(", ")", ";", "Folder", ".", "PersistentDataCallbacks", "callbacks2", "=", "folder2", ".", "getPersistentCallbacks", "(", ")", ";", "callbacks", ".", "setPersistentString", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "callbacks", ".", "setPersistentString", "(", "\"", "<STR_LIT:2>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "callbacks2", ".", "setPersistentString", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "callbacks2", ".", "setPersistentString", "(", "\"", "<STR_LIT:2>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "MimeMessage", "message1", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message1", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "false", ")", ";", "message1", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "false", ")", ";", "final", "MimeMessage", "message2", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message2", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "true", ")", ";", "message2", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "false", ")", ";", "final", "MimeMessage", "message3", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message3", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "false", ")", ";", "message3", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "true", ")", ";", "final", "MimeMessage", "message4", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message4", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "true", ")", ";", "message4", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "true", ")", ";", "Message", "[", "]", "allOriginals", "=", "new", "Message", "[", "]", "{", "message1", ",", "message2", ",", "message3", ",", "message4", "}", ";", "mFolder", ".", "appendMessages", "(", "allOriginals", ")", ";", "callbacks", ".", "setPersistentStringAndMessageFlags", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "new", "Flag", "[", "]", "{", "Flag", ".", "X_STORE_1", "}", ",", "null", ")", ";", "Message", "[", "]", "messages", "=", "mFolder", ".", "getMessages", "(", "null", ")", ";", "for", "(", "Message", "msg", ":", "messages", ")", "{", "assertTrue", "(", "msg", ".", "isSet", "(", "Flag", ".", "X_STORE_1", ")", ")", ";", "if", "(", "msg", ".", "getUid", "(", ")", ".", "equals", "(", "message1", ".", "getUid", "(", ")", ")", ")", "assertFalse", "(", "msg", ".", "isSet", "(", "Flag", ".", "X_STORE_2", ")", ")", ";", "if", "(", "msg", ".", "getUid", "(", ")", ".", "equals", "(", "message2", ".", "getUid", "(", ")", ")", ")", "assertFalse", "(", "msg", ".", "isSet", "(", "Flag", ".", "X_STORE_2", ")", ")", ";", "}", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "callbacks", ".", "getPersistentString", "(", "\"", "<STR_LIT:1>", "\"", ",", "null", ")", ")", ";", "callbacks", ".", "setPersistentStringAndMessageFlags", "(", "\"", "<STR_LIT:2>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "null", ",", "new", "Flag", "[", "]", "{", "Flag", ".", "X_STORE_2", "}", ")", ";", "messages", "=", "mFolder", ".", "getMessages", "(", "null", ")", ";", "for", "(", "Message", "msg", ":", "messages", ")", "{", "assertTrue", "(", "msg", ".", "isSet", "(", "Flag", ".", "X_STORE_1", ")", ")", ";", "assertFalse", "(", "msg", ".", "isSet", "(", "Flag", ".", "X_STORE_2", ")", ")", ";", "}", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "callbacks", ".", "getPersistentString", "(", "\"", "<STR_LIT:2>", "\"", ",", "null", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testStoreFlags", "(", ")", "throws", "MessagingException", "{", "final", "MimeMessage", "message", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message", ".", "setMessageId", "(", "MESSAGE_ID", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "true", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "false", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "mFolder", ".", "appendMessages", "(", "new", "Message", "[", "]", "{", "message", "}", ")", ";", "String", "localUid", "=", "message", ".", "getUid", "(", ")", ";", "MimeMessage", "retrieved", "=", "(", "MimeMessage", ")", "mFolder", ".", "getMessage", "(", "localUid", ")", ";", "assertEquals", "(", "MESSAGE_ID", ",", "retrieved", ".", "getMessageId", "(", ")", ")", ";", "assertTrue", "(", "message", ".", "isSet", "(", "Flag", ".", "X_STORE_1", ")", ")", ";", "assertFalse", "(", "message", ".", "isSet", "(", "Flag", ".", "X_STORE_2", ")", ")", ";", "retrieved", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "false", ")", ";", "retrieved", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "true", ")", ";", "mFolder", ".", "updateMessage", "(", "(", "LocalStore", ".", "LocalMessage", ")", "retrieved", ")", ";", "Message", "[", "]", "retrievedArray", "=", "mFolder", ".", "getMessages", "(", "null", ")", ";", "assertEquals", "(", "1", ",", "retrievedArray", ".", "length", ")", ";", "MimeMessage", "retrievedEntry", "=", "(", "MimeMessage", ")", "retrievedArray", "[", "0", "]", ";", "assertEquals", "(", "MESSAGE_ID", ",", "retrieved", ".", "getMessageId", "(", ")", ")", ";", "assertFalse", "(", "retrievedEntry", ".", "isSet", "(", "Flag", ".", "X_STORE_1", ")", ")", ";", "assertTrue", "(", "retrievedEntry", ".", "isSet", "(", "Flag", ".", "X_STORE_2", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDownloadAndDeletedFlags", "(", ")", "throws", "MessagingException", "{", "final", "MimeMessage", "message", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message", ".", "setMessageId", "(", "MESSAGE_ID", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "true", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "false", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "X_DOWNLOADED_FULL", ",", "true", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "X_DOWNLOADED_PARTIAL", ",", "false", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "DELETED", ",", "false", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "mFolder", ".", "appendMessages", "(", "new", "Message", "[", "]", "{", "message", "}", ")", ";", "String", "localUid", "=", "message", ".", "getUid", "(", ")", ";", "MimeMessage", "retrieved", "=", "(", "MimeMessage", ")", "mFolder", ".", "getMessage", "(", "localUid", ")", ";", "assertEquals", "(", "MESSAGE_ID", ",", "retrieved", ".", "getMessageId", "(", ")", ")", ";", "assertTrue", "(", "retrieved", ".", "isSet", "(", "Flag", ".", "X_STORE_1", ")", ")", ";", "assertFalse", "(", "retrieved", ".", "isSet", "(", "Flag", ".", "X_STORE_2", ")", ")", ";", "assertTrue", "(", "retrieved", ".", "isSet", "(", "Flag", ".", "X_DOWNLOADED_FULL", ")", ")", ";", "assertFalse", "(", "retrieved", ".", "isSet", "(", "Flag", ".", "X_DOWNLOADED_PARTIAL", ")", ")", ";", "assertFalse", "(", "retrieved", ".", "isSet", "(", "Flag", ".", "DELETED", ")", ")", ";", "retrieved", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "false", ")", ";", "retrieved", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "true", ")", ";", "retrieved", ".", "setFlag", "(", "Flag", ".", "X_DOWNLOADED_FULL", ",", "false", ")", ";", "retrieved", ".", "setFlag", "(", "Flag", ".", "X_DOWNLOADED_PARTIAL", ",", "true", ")", ";", "mFolder", ".", "updateMessage", "(", "(", "LocalStore", ".", "LocalMessage", ")", "retrieved", ")", ";", "Message", "[", "]", "retrievedArray", "=", "mFolder", ".", "getMessages", "(", "null", ")", ";", "assertEquals", "(", "1", ",", "retrievedArray", ".", "length", ")", ";", "MimeMessage", "retrievedEntry", "=", "(", "MimeMessage", ")", "retrievedArray", "[", "0", "]", ";", "assertEquals", "(", "MESSAGE_ID", ",", "retrievedEntry", ".", "getMessageId", "(", ")", ")", ";", "assertFalse", "(", "retrievedEntry", ".", "isSet", "(", "Flag", ".", "X_STORE_1", ")", ")", ";", "assertTrue", "(", "retrievedEntry", ".", "isSet", "(", "Flag", ".", "X_STORE_2", ")", ")", ";", "assertFalse", "(", "retrievedEntry", ".", "isSet", "(", "Flag", ".", "X_DOWNLOADED_FULL", ")", ")", ";", "assertTrue", "(", "retrievedEntry", ".", "isSet", "(", "Flag", ".", "X_DOWNLOADED_PARTIAL", ")", ")", ";", "assertFalse", "(", "retrievedEntry", ".", "isSet", "(", "Flag", ".", "DELETED", ")", ")", ";", "retrievedEntry", ".", "setFlag", "(", "Flag", ".", "DELETED", ",", "true", ")", ";", "mFolder", ".", "updateMessage", "(", "(", "LocalStore", ".", "LocalMessage", ")", "retrievedEntry", ")", ";", "Message", "[", "]", "retrievedArray2", "=", "mFolder", ".", "getMessages", "(", "null", ")", ";", "assertEquals", "(", "1", ",", "retrievedArray2", ".", "length", ")", ";", "MimeMessage", "retrievedEntry2", "=", "(", "MimeMessage", ")", "retrievedArray2", "[", "0", "]", ";", "assertEquals", "(", "MESSAGE_ID", ",", "retrievedEntry2", ".", "getMessageId", "(", ")", ")", ";", "assertFalse", "(", "retrievedEntry2", ".", "isSet", "(", "Flag", ".", "X_STORE_1", ")", ")", ";", "assertTrue", "(", "retrievedEntry2", ".", "isSet", "(", "Flag", ".", "X_STORE_2", ")", ")", ";", "assertFalse", "(", "retrievedEntry2", ".", "isSet", "(", "Flag", ".", "X_DOWNLOADED_FULL", ")", ")", ";", "assertTrue", "(", "retrievedEntry2", ".", "isSet", "(", "Flag", ".", "X_DOWNLOADED_PARTIAL", ")", ")", ";", "assertTrue", "(", "retrievedEntry2", ".", "isSet", "(", "Flag", ".", "DELETED", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testStoreFlagStorage", "(", ")", "throws", "MessagingException", ",", "URISyntaxException", "{", "final", "MimeMessage", "message", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message", ".", "setMessageId", "(", "MESSAGE_ID", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "SEEN", ",", "true", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "FLAGGED", ",", "true", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "true", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "true", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "X_DOWNLOADED_FULL", ",", "true", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "X_DOWNLOADED_PARTIAL", ",", "true", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "DELETED", ",", "true", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "mFolder", ".", "appendMessages", "(", "new", "Message", "[", "]", "{", "message", "}", ")", ";", "String", "localUid", "=", "message", ".", "getUid", "(", ")", ";", "long", "folderId", "=", "mFolder", ".", "getId", "(", ")", ";", "mFolder", ".", "close", "(", "false", ")", ";", "final", "URI", "uri", "=", "new", "URI", "(", "mLocalStoreUri", ")", ";", "final", "String", "dbPath", "=", "uri", ".", "getPath", "(", ")", ";", "SQLiteDatabase", "db", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "dbPath", ",", "null", ")", ";", "Cursor", "cursor", "=", "null", ";", "try", "{", "cursor", "=", "db", ".", "rawQuery", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "localUid", ",", "Long", ".", "toString", "(", "folderId", ")", "}", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "cursor", ".", "moveToNext", "(", ")", ")", ";", "String", "flagString", "=", "cursor", ".", "getString", "(", "0", ")", ";", "String", "[", "]", "flags", "=", "flagString", ".", "split", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "flags", ".", "length", ")", ";", "for", "(", "String", "flag", ":", "flags", ")", "{", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "flag", ".", "equals", "(", "Flag", ".", "X_STORE_1", ".", "toString", "(", ")", ")", ")", ";", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "flag", ".", "equals", "(", "Flag", ".", "X_STORE_2", ".", "toString", "(", ")", ")", ")", ";", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "flag", ".", "equals", "(", "Flag", ".", "X_DOWNLOADED_FULL", ".", "toString", "(", ")", ")", ")", ";", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "flag", ".", "equals", "(", "Flag", ".", "X_DOWNLOADED_PARTIAL", ".", "toString", "(", ")", ")", ")", ";", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "flag", ".", "equals", "(", "Flag", ".", "DELETED", ".", "toString", "(", ")", ")", ")", ";", "}", "assertEquals", "(", "1", ",", "cursor", ".", "getInt", "(", "1", ")", ")", ";", "assertEquals", "(", "1", ",", "cursor", ".", "getInt", "(", "<NUM_LIT:2>", ")", ")", ";", "assertEquals", "(", "1", ",", "cursor", ".", "getInt", "(", "<NUM_LIT:3>", ")", ")", ";", "assertEquals", "(", "1", ",", "cursor", ".", "getInt", "(", "<NUM_LIT:4>", ")", ")", ";", "assertEquals", "(", "1", ",", "cursor", ".", "getInt", "(", "<NUM_LIT:5>", ")", ")", ";", "}", "finally", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "testGetMessagesFlags", "(", ")", "throws", "MessagingException", "{", "final", "MimeMessage", "message1", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message1", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "false", ")", ";", "message1", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "false", ")", ";", "final", "MimeMessage", "message2", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message2", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "true", ")", ";", "message2", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "false", ")", ";", "final", "MimeMessage", "message3", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message3", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "false", ")", ";", "message3", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "true", ")", ";", "final", "MimeMessage", "message4", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message4", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "true", ")", ";", "message4", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "true", ")", ";", "final", "MimeMessage", "message5", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message5", ".", "setFlag", "(", "Flag", ".", "X_DOWNLOADED_FULL", ",", "true", ")", ";", "final", "MimeMessage", "message6", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message6", ".", "setFlag", "(", "Flag", ".", "X_DOWNLOADED_PARTIAL", ",", "true", ")", ";", "final", "MimeMessage", "message7", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message7", ".", "setFlag", "(", "Flag", ".", "DELETED", ",", "true", ")", ";", "Message", "[", "]", "allOriginals", "=", "new", "Message", "[", "]", "{", "message1", ",", "message2", ",", "message3", ",", "message4", ",", "message5", ",", "message6", ",", "message7", "}", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "mFolder", ".", "appendMessages", "(", "allOriginals", ")", ";", "mFolder", ".", "close", "(", "false", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "Message", "[", "]", "getAll1", "=", "mFolder", ".", "getMessages", "(", "null", ",", "null", ",", "null", ")", ";", "checkGottenMessages", "(", "\"", "<STR_LIT>", "\"", ",", "allOriginals", ",", "getAll1", ")", ";", "Message", "[", "]", "getAll2", "=", "mFolder", ".", "getMessages", "(", "new", "Flag", "[", "0", "]", ",", "new", "Flag", "[", "0", "]", ",", "null", ")", ";", "checkGottenMessages", "(", "\"", "<STR_LIT>", "\"", ",", "allOriginals", ",", "getAll2", ")", ";", "Message", "[", "]", "getSome1", "=", "mFolder", ".", "getMessages", "(", "new", "Flag", "[", "]", "{", "Flag", ".", "X_STORE_1", "}", ",", "null", ",", "null", ")", ";", "checkGottenMessages", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Message", "[", "]", "{", "message2", ",", "message4", "}", ",", "getSome1", ")", ";", "Message", "[", "]", "getSome2", "=", "mFolder", ".", "getMessages", "(", "null", ",", "new", "Flag", "[", "]", "{", "Flag", ".", "X_STORE_1", "}", ",", "null", ")", ";", "checkGottenMessages", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Message", "[", "]", "{", "message1", ",", "message3", ",", "message5", ",", "message6", ",", "message7", "}", ",", "getSome2", ")", ";", "Message", "[", "]", "getSome3", "=", "mFolder", ".", "getMessages", "(", "new", "Flag", "[", "]", "{", "Flag", ".", "X_STORE_2", "}", ",", "null", ",", "null", ")", ";", "checkGottenMessages", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Message", "[", "]", "{", "message3", ",", "message4", "}", ",", "getSome3", ")", ";", "Message", "[", "]", "getSome4", "=", "mFolder", ".", "getMessages", "(", "null", ",", "new", "Flag", "[", "]", "{", "Flag", ".", "X_STORE_2", "}", ",", "null", ")", ";", "checkGottenMessages", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Message", "[", "]", "{", "message1", ",", "message2", ",", "message5", ",", "message6", ",", "message7", "}", ",", "getSome4", ")", ";", "Message", "[", "]", "getOne1", "=", "mFolder", ".", "getMessages", "(", "new", "Flag", "[", "]", "{", "Flag", ".", "X_DOWNLOADED_FULL", "}", ",", "null", ",", "null", ")", ";", "checkGottenMessages", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Message", "[", "]", "{", "message5", "}", ",", "getOne1", ")", ";", "Message", "[", "]", "getOne2", "=", "mFolder", ".", "getMessages", "(", "new", "Flag", "[", "]", "{", "Flag", ".", "X_DOWNLOADED_PARTIAL", "}", ",", "null", ",", "null", ")", ";", "checkGottenMessages", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Message", "[", "]", "{", "message6", "}", ",", "getOne2", ")", ";", "Message", "[", "]", "getOne3", "=", "mFolder", ".", "getMessages", "(", "new", "Flag", "[", "]", "{", "Flag", ".", "DELETED", "}", ",", "null", ",", "null", ")", ";", "checkGottenMessages", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Message", "[", "]", "{", "message7", "}", ",", "getOne3", ")", ";", "Message", "[", "]", "getSingle1", "=", "mFolder", ".", "getMessages", "(", "new", "Flag", "[", "]", "{", "Flag", ".", "X_STORE_1", ",", "Flag", ".", "X_STORE_2", "}", ",", "null", ",", "null", ")", ";", "checkGottenMessages", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Message", "[", "]", "{", "message4", "}", ",", "getSingle1", ")", ";", "Message", "[", "]", "getSingle2", "=", "mFolder", ".", "getMessages", "(", "null", ",", "new", "Flag", "[", "]", "{", "Flag", ".", "X_STORE_1", ",", "Flag", ".", "X_STORE_2", "}", ",", "null", ")", ";", "checkGottenMessages", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Message", "[", "]", "{", "message1", ",", "message5", ",", "message6", ",", "message7", "}", ",", "getSingle2", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkGottenMessages", "(", "String", "failMessage", ",", "Message", "[", "]", "expected", ",", "Message", "[", "]", "actual", ")", "{", "HashSet", "<", "String", ">", "expectedUids", "=", "new", "HashSet", "<", "String", ">", "(", ")", ";", "for", "(", "Message", "message", ":", "expected", ")", "{", "expectedUids", ".", "add", "(", "message", ".", "getUid", "(", ")", ")", ";", "}", "HashSet", "<", "String", ">", "actualUids", "=", "new", "HashSet", "<", "String", ">", "(", ")", ";", "for", "(", "Message", "message", ":", "actual", ")", "{", "actualUids", ".", "add", "(", "message", ".", "getUid", "(", ")", ")", ";", "}", "assertEquals", "(", "failMessage", ",", "expectedUids", ",", "actualUids", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testMessageCount", "(", ")", "throws", "MessagingException", "{", "final", "MimeMessage", "message1", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message1", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "false", ")", ";", "message1", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "false", ")", ";", "message1", ".", "setFlag", "(", "Flag", ".", "X_DOWNLOADED_FULL", ",", "true", ")", ";", "final", "MimeMessage", "message2", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message2", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "true", ")", ";", "message2", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "false", ")", ";", "final", "MimeMessage", "message3", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message3", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "false", ")", ";", "message3", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "true", ")", ";", "message3", ".", "setFlag", "(", "Flag", ".", "X_DOWNLOADED_FULL", ",", "true", ")", ";", "final", "MimeMessage", "message4", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message4", ".", "setFlag", "(", "Flag", ".", "X_STORE_1", ",", "true", ")", ";", "message4", ".", "setFlag", "(", "Flag", ".", "X_STORE_2", ",", "true", ")", ";", "message4", ".", "setFlag", "(", "Flag", ".", "X_DOWNLOADED_FULL", ",", "true", ")", ";", "final", "MimeMessage", "message5", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message5", ".", "setFlag", "(", "Flag", ".", "X_DOWNLOADED_FULL", ",", "true", ")", ";", "final", "MimeMessage", "message6", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message6", ".", "setFlag", "(", "Flag", ".", "X_DOWNLOADED_PARTIAL", ",", "true", ")", ";", "final", "MimeMessage", "message7", "=", "buildTestMessage", "(", "RECIPIENT_TO", ",", "SENDER", ",", "SUBJECT", ",", "BODY", ")", ";", "message7", ".", "setFlag", "(", "Flag", ".", "DELETED", ",", "true", ")", ";", "Message", "[", "]", "allOriginals", "=", "new", "Message", "[", "]", "{", "message1", ",", "message2", ",", "message3", ",", "message4", ",", "message5", ",", "message6", ",", "message7", "}", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "mFolder", ".", "appendMessages", "(", "allOriginals", ")", ";", "mFolder", ".", "close", "(", "false", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "int", "allMessages", "=", "mFolder", ".", "getMessageCount", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:7>", ",", "allMessages", ")", ";", "int", "storeFlag1", "=", "mFolder", ".", "getMessageCount", "(", "new", "Flag", "[", "]", "{", "Flag", ".", "X_STORE_1", "}", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "storeFlag1", ")", ";", "int", "storeFlag1NotFlag2", "=", "mFolder", ".", "getMessageCount", "(", "new", "Flag", "[", "]", "{", "Flag", ".", "X_STORE_1", "}", ",", "new", "Flag", "[", "]", "{", "Flag", ".", "X_STORE_2", "}", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "storeFlag1NotFlag2", ")", ";", "int", "downloadedFull", "=", "mFolder", ".", "getMessageCount", "(", "new", "Flag", "[", "]", "{", "Flag", ".", "X_DOWNLOADED_FULL", "}", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:4>", ",", "downloadedFull", ")", ";", "int", "storeFlag2Full", "=", "mFolder", ".", "getMessageCount", "(", "new", "Flag", "[", "]", "{", "Flag", ".", "X_STORE_2", ",", "Flag", ".", "X_DOWNLOADED_FULL", "}", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "storeFlag2Full", ")", ";", "int", "notDeleted", "=", "mFolder", ".", "getMessageCount", "(", "null", ",", "new", "Flag", "[", "]", "{", "Flag", ".", "DELETED", "}", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:6>", ",", "notDeleted", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testUnreadMessages", "(", ")", "throws", "MessagingException", "{", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "LocalStore", ".", "LocalFolder", "folder2", "=", "(", "LocalStore", ".", "LocalFolder", ")", "mStore", ".", "getFolder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertFalse", "(", "folder2", ".", "exists", "(", ")", ")", ";", "folder2", ".", "create", "(", "FolderType", ".", "HOLDS_MESSAGES", ")", ";", "folder2", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "mFolder", ".", "setUnreadMessageCount", "(", "<NUM_LIT>", ")", ";", "folder2", ".", "setUnreadMessageCount", "(", "<NUM_LIT>", ")", ";", "mFolder", ".", "close", "(", "false", ")", ";", "folder2", ".", "close", "(", "false", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "folder2", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "mFolder", ".", "getUnreadMessageCount", "(", ")", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "folder2", ".", "getUnreadMessageCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testUnreadMessagesConcurrent", "(", ")", "throws", "MessagingException", "{", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "LocalStore", ".", "LocalFolder", "folder2", "=", "(", "LocalStore", ".", "LocalFolder", ")", "mStore", ".", "getFolder", "(", "FOLDER_NAME", ")", ";", "assertTrue", "(", "folder2", ".", "exists", "(", ")", ")", ";", "folder2", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "mFolder", ".", "setUnreadMessageCount", "(", "<NUM_LIT>", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "folder2", ".", "getUnreadMessageCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testReadWriteVisibleLimits", "(", ")", "throws", "MessagingException", "{", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "LocalStore", ".", "LocalFolder", "folder2", "=", "(", "LocalStore", ".", "LocalFolder", ")", "mStore", ".", "getFolder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertFalse", "(", "folder2", ".", "exists", "(", ")", ")", ";", "folder2", ".", "create", "(", "FolderType", ".", "HOLDS_MESSAGES", ")", ";", "folder2", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "mFolder", ".", "setVisibleLimit", "(", "<NUM_LIT:100>", ")", ";", "folder2", ".", "setVisibleLimit", "(", "<NUM_LIT>", ")", ";", "mFolder", ".", "close", "(", "false", ")", ";", "folder2", ".", "close", "(", "false", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "folder2", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "assertEquals", "(", "<NUM_LIT:100>", ",", "mFolder", ".", "getVisibleLimit", "(", ")", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "folder2", ".", "getVisibleLimit", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testVisibleLimitsConcurrent", "(", ")", "throws", "MessagingException", "{", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "LocalStore", ".", "LocalFolder", "folder2", "=", "(", "LocalStore", ".", "LocalFolder", ")", "mStore", ".", "getFolder", "(", "FOLDER_NAME", ")", ";", "assertTrue", "(", "folder2", ".", "exists", "(", ")", ")", ";", "folder2", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "mFolder", ".", "setVisibleLimit", "(", "<NUM_LIT>", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "folder2", ".", "getVisibleLimit", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testResetVisibleLimits", "(", ")", "throws", "MessagingException", "{", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "LocalStore", ".", "LocalFolder", "folder2", "=", "(", "LocalStore", ".", "LocalFolder", ")", "mStore", ".", "getFolder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertFalse", "(", "folder2", ".", "exists", "(", ")", ")", ";", "folder2", ".", "create", "(", "FolderType", ".", "HOLDS_MESSAGES", ")", ";", "folder2", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "mFolder", ".", "setVisibleLimit", "(", "<NUM_LIT:100>", ")", ";", "folder2", ".", "setVisibleLimit", "(", "<NUM_LIT>", ")", ";", "mFolder", ".", "close", "(", "false", ")", ";", "folder2", ".", "close", "(", "false", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "folder2", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "mStore", ".", "resetVisibleLimits", "(", "Email", ".", "VISIBLE_LIMIT_DEFAULT", ")", ";", "assertEquals", "(", "Email", ".", "VISIBLE_LIMIT_DEFAULT", ",", "mFolder", ".", "getVisibleLimit", "(", ")", ")", ";", "assertEquals", "(", "Email", ".", "VISIBLE_LIMIT_DEFAULT", ",", "folder2", ".", "getVisibleLimit", "(", ")", ")", ";", "mFolder", ".", "close", "(", "false", ")", ";", "folder2", ".", "close", "(", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testNoFolderRolesYet", "(", ")", "throws", "MessagingException", "{", "Folder", "[", "]", "localFolders", "=", "mStore", ".", "getPersonalNamespaces", "(", ")", ";", "for", "(", "Folder", "folder", ":", "localFolders", ")", "{", "assertEquals", "(", "Folder", ".", "FolderRole", ".", "UNKNOWN", ",", "folder", ".", "getRole", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testMissingFolderOpen", "(", ")", "throws", "MessagingException", "{", "Folder", "noFolder", "=", "mStore", ".", "getFolder", "(", "MISSING_FOLDER_NAME", ")", ";", "noFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "noFolder", ".", "close", "(", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testMissingFolderGetMessageCount", "(", ")", "throws", "MessagingException", "{", "Folder", "noFolder", "=", "mStore", ".", "getFolder", "(", "MISSING_FOLDER_NAME", ")", ";", "noFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "Folder", "noFolder2", "=", "mStore", ".", "getFolder", "(", "MISSING_FOLDER_NAME", ")", ";", "noFolder2", ".", "delete", "(", "true", ")", ";", "int", "count", "=", "noFolder", ".", "getMessageCount", "(", ")", ";", "assertEquals", "(", "0", ",", "count", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testMissingFolderGetUnreadMessageCount", "(", ")", "throws", "MessagingException", "{", "Folder", "noFolder", "=", "mStore", ".", "getFolder", "(", "MISSING_FOLDER_NAME", ")", ";", "noFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "Folder", "noFolder2", "=", "mStore", ".", "getFolder", "(", "MISSING_FOLDER_NAME", ")", ";", "noFolder2", ".", "delete", "(", "true", ")", ";", "try", "{", "noFolder", ".", "getUnreadMessageCount", "(", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "}", "</s>"]
["<s>", "public", "void", "testMissingFolderGetVisibleLimit", "(", ")", "throws", "MessagingException", "{", "LocalStore", ".", "LocalFolder", "noFolder", "=", "(", "LocalStore", ".", "LocalFolder", ")", "mStore", ".", "getFolder", "(", "MISSING_FOLDER_NAME", ")", ";", "noFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "Folder", "noFolder2", "=", "mStore", ".", "getFolder", "(", "MISSING_FOLDER_NAME", ")", ";", "noFolder2", ".", "delete", "(", "true", ")", ";", "try", "{", "noFolder", ".", "getVisibleLimit", "(", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "}", "</s>"]
["<s>", "public", "void", "testExtendedHeader", "(", ")", "throws", "MessagingException", "{", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "message", ".", "setUid", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "mFolder", ".", "appendMessages", "(", "new", "Message", "[", "]", "{", "message", "}", ")", ";", "message", ".", "setUid", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "message", ".", "setExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ";", "message", ".", "setExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "mFolder", ".", "appendMessages", "(", "new", "Message", "[", "]", "{", "message", "}", ")", ";", "LocalMessage", "message1", "=", "(", "LocalMessage", ")", "mFolder", ".", "getMessage", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "message1", ".", "getExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "LocalMessage", "message2", "=", "(", "LocalMessage", ")", "mFolder", ".", "getMessage", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ",", "message2", ".", "getExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "message2", ".", "getExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "message2", ".", "getExtendedHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDbVersion", "(", ")", "throws", "MessagingException", ",", "URISyntaxException", "{", "LocalStore", ".", "newInstance", "(", "mLocalStoreUri", ",", "getContext", "(", ")", ",", "null", ")", ";", "final", "URI", "uri", "=", "new", "URI", "(", "mLocalStoreUri", ")", ";", "final", "String", "dbPath", "=", "uri", ".", "getPath", "(", ")", ";", "final", "SQLiteDatabase", "db", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "dbPath", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "DATABASE_VERSION", ",", "db", ".", "getVersion", "(", ")", ")", ";", "db", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "private", "ContentValues", "cursorToContentValues", "(", "Cursor", "c", ",", "String", "[", "]", "schema", ")", "{", "if", "(", "c", ".", "getColumnCount", "(", ")", "!", "=", "schema", ".", "length", ")", "{", "throw", "new", "IndexOutOfBoundsException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "final", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "c", ".", "getColumnCount", "(", ")", ";", "i", "<", "count", ";", "+", "+", "i", ")", "{", "final", "String", "key", "=", "c", ".", "getColumnName", "(", "i", ")", ";", "final", "String", "type", "=", "schema", "[", "i", "]", ";", "if", "(", "type", "=", "=", "\"", "<STR_LIT>", "\"", ")", "{", "cv", ".", "put", "(", "key", ",", "c", ".", "getString", "(", "i", ")", ")", ";", "}", "else", "if", "(", "type", "=", "=", "\"", "<STR_LIT>", "\"", "|", "|", "type", "=", "=", "\"", "<STR_LIT>", "\"", ")", "{", "cv", ".", "put", "(", "key", ",", "c", ".", "getLong", "(", "i", ")", ")", ";", "}", "else", "if", "(", "type", "=", "=", "\"", "<STR_LIT>", "\"", "|", "|", "type", "=", "=", "\"", "<STR_LIT>", "\"", ")", "{", "cv", ".", "put", "(", "key", ",", "c", ".", "getDouble", "(", "i", ")", ")", ";", "}", "else", "if", "(", "type", "=", "=", "\"", "<STR_LIT>", "\"", ")", "{", "cv", ".", "put", "(", "key", ",", "c", ".", "getBlob", "(", "i", ")", ")", ";", "}", "else", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "i", ")", ";", "}", "}", "return", "cv", ";", "}", "</s>"]
["<s>", "private", "HashSet", "<", "String", ">", "cursorToColumnNames", "(", "Cursor", "c", ")", "{", "HashSet", "<", "String", ">", "result", "=", "new", "HashSet", "<", "String", ">", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "c", ".", "getColumnCount", "(", ")", ";", "i", "<", "count", ";", "+", "+", "i", ")", "{", "result", ".", "add", "(", "c", ".", "getColumnName", "(", "i", ")", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "public", "void", "testDbUpgrade18ToLatest", "(", ")", "throws", "MessagingException", ",", "URISyntaxException", "{", "final", "URI", "uri", "=", "new", "URI", "(", "mLocalStoreUri", ")", ";", "final", "String", "dbPath", "=", "uri", ".", "getPath", "(", ")", ";", "SQLiteDatabase", "db", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "dbPath", ",", "null", ")", ";", "createSampleDb", "(", "db", ",", "<NUM_LIT>", ")", ";", "final", "ContentValues", "initialMessage", "=", "new", "ContentValues", "(", ")", ";", "initialMessage", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "long", ")", "<NUM_LIT:2>", ")", ";", "initialMessage", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "long", ")", "<NUM_LIT:3>", ")", ";", "final", "ContentValues", "expectedMessage", "=", "new", "ContentValues", "(", "initialMessage", ")", ";", "expectedMessage", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "db", ".", "insert", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "initialMessage", ")", ")", ";", "final", "ContentValues", "initialAttachment", "=", "new", "ContentValues", "(", ")", ";", "initialAttachment", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "long", ")", "<NUM_LIT:4>", ")", ";", "initialAttachment", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "String", ")", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ContentValues", "expectedAttachment", "=", "new", "ContentValues", "(", "initialAttachment", ")", ";", "expectedAttachment", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "db", ".", "insert", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "initialAttachment", ")", ")", ";", "db", ".", "close", "(", ")", ";", "LocalStore", ".", "newInstance", "(", "mLocalStoreUri", ",", "getContext", "(", ")", ",", "null", ")", ";", "expectedMessage", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "String", ")", "null", ")", ";", "expectedAttachment", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "String", ")", "null", ")", ";", "db", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "dbPath", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "DATABASE_VERSION", ",", "db", ".", "getVersion", "(", ")", ")", ";", "Cursor", "c", ";", "checkAllTablesFound", "(", "db", ")", ";", "c", "=", "db", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ",", "null", ",", "null", ",", "null", ",", "null", ",", "null", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "c", ".", "moveToNext", "(", ")", ")", ";", "final", "ContentValues", "actualMessage", "=", "cursorToContentValues", "(", "c", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expectedMessage", ",", "actualMessage", ")", ";", "c", ".", "close", "(", ")", ";", "c", "=", "db", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ",", "null", ",", "null", ",", "null", ",", "null", ",", "null", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "c", ".", "moveToNext", "(", ")", ")", ";", "final", "ContentValues", "actualAttachment", "=", "cursorToContentValues", "(", "c", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expectedAttachment", ",", "actualAttachment", ")", ";", "c", ".", "close", "(", ")", ";", "db", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDbUpgrade19ToLatest", "(", ")", "throws", "MessagingException", ",", "URISyntaxException", "{", "final", "URI", "uri", "=", "new", "URI", "(", "mLocalStoreUri", ")", ";", "final", "String", "dbPath", "=", "uri", ".", "getPath", "(", ")", ";", "SQLiteDatabase", "db", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "dbPath", ",", "null", ")", ";", "createSampleDb", "(", "db", ",", "<NUM_LIT>", ")", ";", "final", "ContentValues", "initialMessage", "=", "new", "ContentValues", "(", ")", ";", "initialMessage", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "long", ")", "<NUM_LIT:2>", ")", ";", "initialMessage", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "long", ")", "<NUM_LIT:3>", ")", ";", "initialMessage", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "String", ")", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ContentValues", "expectedMessage", "=", "new", "ContentValues", "(", "initialMessage", ")", ";", "expectedMessage", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "db", ".", "insert", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "initialMessage", ")", ")", ";", "final", "ContentValues", "initialAttachment", "=", "new", "ContentValues", "(", ")", ";", "initialAttachment", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "long", ")", "<NUM_LIT:4>", ")", ";", "initialAttachment", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "String", ")", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ContentValues", "expectedAttachment", "=", "new", "ContentValues", "(", "initialAttachment", ")", ";", "expectedAttachment", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "db", ".", "insert", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "initialAttachment", ")", ")", ";", "db", ".", "close", "(", ")", ";", "LocalStore", ".", "newInstance", "(", "mLocalStoreUri", ",", "getContext", "(", ")", ",", "null", ")", ";", "expectedAttachment", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "String", ")", "null", ")", ";", "db", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "dbPath", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "DATABASE_VERSION", ",", "db", ".", "getVersion", "(", ")", ")", ";", "Cursor", "c", ";", "checkAllTablesFound", "(", "db", ")", ";", "c", "=", "db", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ",", "null", ",", "null", ",", "null", ",", "null", ",", "null", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "c", ".", "moveToNext", "(", ")", ")", ";", "final", "ContentValues", "actualMessage", "=", "cursorToContentValues", "(", "c", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expectedMessage", ",", "actualMessage", ")", ";", "c", "=", "db", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ",", "null", ",", "null", ",", "null", ",", "null", ",", "null", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "c", ".", "moveToNext", "(", ")", ")", ";", "final", "ContentValues", "actualAttachment", "=", "cursorToContentValues", "(", "c", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expectedAttachment", ",", "actualAttachment", ")", ";", "db", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDbUpgrade20ToLatest", "(", ")", "throws", "MessagingException", ",", "URISyntaxException", "{", "final", "URI", "uri", "=", "new", "URI", "(", "mLocalStoreUri", ")", ";", "final", "String", "dbPath", "=", "uri", ".", "getPath", "(", ")", ";", "SQLiteDatabase", "db", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "dbPath", ",", "null", ")", ";", "createSampleDb", "(", "db", ",", "<NUM_LIT:20>", ")", ";", "db", ".", "close", "(", ")", ";", "LocalStore", ".", "newInstance", "(", "mLocalStoreUri", ",", "getContext", "(", ")", ",", "null", ")", ";", "db", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "dbPath", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "DATABASE_VERSION", ",", "db", ".", "getVersion", "(", ")", ")", ";", "checkAllTablesFound", "(", "db", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDbUpgrade21ToLatest", "(", ")", "throws", "MessagingException", ",", "URISyntaxException", "{", "final", "URI", "uri", "=", "new", "URI", "(", "mLocalStoreUri", ")", ";", "final", "String", "dbPath", "=", "uri", ".", "getPath", "(", ")", ";", "SQLiteDatabase", "db", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "dbPath", ",", "null", ")", ";", "createSampleDb", "(", "db", ",", "<NUM_LIT>", ")", ";", "db", ".", "close", "(", ")", ";", "LocalStore", ".", "newInstance", "(", "mLocalStoreUri", ",", "getContext", "(", ")", ",", "null", ")", ";", "db", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "dbPath", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "DATABASE_VERSION", ",", "db", ".", "getVersion", "(", ")", ")", ";", "checkAllTablesFound", "(", "db", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDbUpgrade22ToLatest", "(", ")", "throws", "MessagingException", ",", "URISyntaxException", "{", "final", "URI", "uri", "=", "new", "URI", "(", "mLocalStoreUri", ")", ";", "final", "String", "dbPath", "=", "uri", ".", "getPath", "(", ")", ";", "SQLiteDatabase", "db", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "dbPath", ",", "null", ")", ";", "createSampleDb", "(", "db", ",", "<NUM_LIT>", ")", ";", "final", "ContentValues", "inMessage1", "=", "new", "ContentValues", "(", ")", ";", "inMessage1", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "String", ")", "\"", "<STR_LIT>", "\"", ")", ";", "inMessage1", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Flag", ".", "X_DOWNLOADED_FULL", ".", "toString", "(", ")", ")", ";", "final", "ContentValues", "outMessage1", "=", "new", "ContentValues", "(", "inMessage1", ")", ";", "outMessage1", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "db", ".", "insert", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "inMessage1", ")", ")", ";", "final", "ContentValues", "inMessage2", "=", "new", "ContentValues", "(", ")", ";", "inMessage2", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "String", ")", "\"", "<STR_LIT>", "\"", ")", ";", "inMessage2", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Flag", ".", "X_DOWNLOADED_PARTIAL", ".", "toString", "(", ")", ")", ";", "final", "ContentValues", "outMessage2", "=", "new", "ContentValues", "(", "inMessage2", ")", ";", "outMessage2", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "db", ".", "insert", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "inMessage2", ")", ")", ";", "final", "ContentValues", "inMessage3", "=", "new", "ContentValues", "(", ")", ";", "inMessage3", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "String", ")", "\"", "<STR_LIT>", "\"", ")", ";", "inMessage3", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Flag", ".", "DELETED", ".", "toString", "(", ")", ")", ";", "final", "ContentValues", "outMessage3", "=", "new", "ContentValues", "(", "inMessage3", ")", ";", "outMessage3", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "db", ".", "insert", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "inMessage3", ")", ")", ";", "db", ".", "close", "(", ")", ";", "LocalStore", ".", "newInstance", "(", "mLocalStoreUri", ",", "getContext", "(", ")", ",", "null", ")", ";", "db", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "dbPath", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "DATABASE_VERSION", ",", "db", ".", "getVersion", "(", ")", ")", ";", "checkAllTablesFound", "(", "db", ")", ";", "String", "[", "]", "columns", "=", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ";", "Cursor", "c", "=", "db", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "columns", ",", "null", ",", "null", ",", "null", ",", "null", ",", "null", ")", ";", "for", "(", "int", "msgNum", "=", "0", ";", "msgNum", "<", "=", "<NUM_LIT:2>", ";", "+", "+", "msgNum", ")", "{", "assertTrue", "(", "c", ".", "moveToNext", "(", ")", ")", ";", "ContentValues", "actualMessage", "=", "cursorToContentValues", "(", "c", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ";", "String", "messageId", "=", "actualMessage", ".", "getAsString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "int", "outDlFull", "=", "actualMessage", ".", "getAsInteger", "(", "\"", "<STR_LIT>", "\"", ")", ";", "int", "outDlPartial", "=", "actualMessage", ".", "getAsInteger", "(", "\"", "<STR_LIT>", "\"", ")", ";", "int", "outDeleted", "=", "actualMessage", ".", "getAsInteger", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "messageId", ")", ")", "{", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "outDlFull", "=", "=", "1", "&", "&", "outDlPartial", "=", "=", "0", "&", "&", "outDeleted", "=", "=", "0", ")", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "messageId", ")", ")", "{", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "outDlFull", "=", "=", "0", "&", "&", "outDlPartial", "=", "=", "1", "&", "&", "outDeleted", "=", "=", "0", ")", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "messageId", ")", ")", "{", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "outDlFull", "=", "=", "0", "&", "&", "outDlPartial", "=", "=", "0", "&", "&", "outDeleted", "=", "=", "1", ")", ";", "}", "}", "c", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDbUpgrade23ToLatest", "(", ")", "throws", "MessagingException", ",", "URISyntaxException", "{", "final", "URI", "uri", "=", "new", "URI", "(", "mLocalStoreUri", ")", ";", "final", "String", "dbPath", "=", "uri", ".", "getPath", "(", ")", ";", "SQLiteDatabase", "db", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "dbPath", ",", "null", ")", ";", "createSampleDb", "(", "db", ",", "<NUM_LIT>", ")", ";", "final", "ContentValues", "initialMessage", "=", "new", "ContentValues", "(", ")", ";", "initialMessage", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "long", ")", "<NUM_LIT:2>", ")", ";", "initialMessage", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "long", ")", "<NUM_LIT:3>", ")", ";", "final", "ContentValues", "expectedMessage", "=", "new", "ContentValues", "(", "initialMessage", ")", ";", "expectedMessage", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "db", ".", "insert", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "initialMessage", ")", ")", ";", "db", ".", "close", "(", ")", ";", "LocalStore", ".", "newInstance", "(", "mLocalStoreUri", ",", "getContext", "(", ")", ",", "null", ")", ";", "expectedMessage", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "String", ")", "null", ")", ";", "db", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "dbPath", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "DATABASE_VERSION", ",", "db", ".", "getVersion", "(", ")", ")", ";", "Cursor", "c", ";", "checkAllTablesFound", "(", "db", ")", ";", "c", "=", "db", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ",", "null", ",", "null", ",", "null", ",", "null", ",", "null", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "c", ".", "moveToNext", "(", ")", ")", ";", "final", "ContentValues", "actualMessage", "=", "cursorToContentValues", "(", "c", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expectedMessage", ",", "actualMessage", ")", ";", "c", ".", "close", "(", ")", ";", "db", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkAllTablesFound", "(", "SQLiteDatabase", "db", ")", "{", "Cursor", "c", ";", "HashSet", "<", "String", ">", "foundNames", ";", "ArrayList", "<", "String", ">", "expectedNames", ";", "c", "=", "db", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "null", ",", "null", ",", "null", ",", "null", ")", ";", "foundNames", "=", "cursorToColumnNames", "(", "c", ")", ";", "expectedNames", "=", "new", "ArrayList", "<", "String", ">", "(", "Arrays", ".", "asList", "(", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "foundNames", ".", "containsAll", "(", "expectedNames", ")", ")", ";", "c", "=", "db", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "null", ",", "null", ",", "null", ",", "null", ")", ";", "foundNames", "=", "cursorToColumnNames", "(", "c", ")", ";", "expectedNames", "=", "new", "ArrayList", "<", "String", ">", "(", "Arrays", ".", "asList", "(", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "foundNames", ".", "containsAll", "(", "expectedNames", ")", ")", ";", "c", "=", "db", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ",", "null", ",", "null", ",", "null", ",", "null", ")", ";", "foundNames", "=", "cursorToColumnNames", "(", "c", ")", ";", "expectedNames", "=", "new", "ArrayList", "<", "String", ">", "(", "Arrays", ".", "asList", "(", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "foundNames", ".", "containsAll", "(", "expectedNames", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "createSampleDb", "(", "SQLiteDatabase", "db", ",", "int", "version", ")", "{", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "(", "(", "version", ">", "=", "<NUM_LIT>", ")", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "\"", ")", "+", "(", "(", "version", ">", "=", "<NUM_LIT>", ")", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "\"", ")", "+", "(", "(", "version", ">", "=", "<NUM_LIT>", ")", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "\"", ")", "+", "(", "(", "version", ">", "=", "<NUM_LIT>", ")", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "\"", ")", "+", "(", "(", "version", ">", "=", "<NUM_LIT:24>", ")", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "\"", ")", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "(", "(", "version", ">", "=", "<NUM_LIT:20>", ")", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "\"", ")", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "if", "(", "version", ">", "=", "<NUM_LIT>", ")", "{", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "db", ".", "setVersion", "(", "version", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testParseLiteral", "(", ")", "throws", "Exception", "{", "ByteArrayInputStream", "is", "=", "new", "ByteArrayInputStream", "(", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ".", "getBytes", "(", ")", ")", ";", "ImapResponseParser", "parser", "=", "new", "ImapResponseParser", "(", "is", ")", ";", "ImapResponse", "line1", "=", "parser", ".", "readResponse", "(", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "line1", ".", "mTag", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "line1", ".", "completed", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:3>", ",", "line1", ".", "size", "(", ")", ")", ";", "ImapResponse", "line2", "=", "parser", ".", "readResponse", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "line2", ".", "mTag", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "line2", ".", "completed", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:3>", ",", "line2", ".", "size", "(", ")", ")", ";", "ImapResponse", "line3", "=", "parser", ".", "readResponse", "(", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "line3", ".", "mTag", ")", ";", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "line3", ".", "completed", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "line3", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "FixedLengthInputStream", ".", "class", ",", "line3", ".", "get", "(", "1", ")", ".", "getClass", "(", ")", ")", ";", "line3", ".", "nailDown", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "line3", ".", "get", "(", "1", ")", ".", "getClass", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "line3", ".", "getString", "(", "1", ")", ")", ";", "ImapResponse", "line4", "=", "parser", ".", "readResponse", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ",", "line4", ".", "mTag", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "line4", ".", "completed", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "line4", ".", "size", "(", ")", ")", ";", "line3", ".", "appendAll", "(", "line4", ")", ";", "assertNull", "(", "\"", "<STR_LIT>", "\"", ",", "line3", ".", "mTag", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "line3", ".", "completed", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:3>", ",", "line3", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "ImapList", ".", "class", ",", "line3", ".", "get", "(", "<NUM_LIT:2>", ")", ".", "getClass", "(", ")", ")", ";", "ImapResponse", "line5", "=", "parser", ".", "readResponse", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "line5", ".", "mTag", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "line5", ".", "completed", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:3>", ",", "line5", ".", "size", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "tearDown", "(", ")", "throws", "Exception", "{", "super", ".", "tearDown", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testLineLength54", "(", ")", "{", "byte", "[", "]", "out", "=", "Base64", ".", "encodeBase64Chunked", "(", "getByteArray", "(", "<NUM_LIT>", ")", ")", ";", "checkBase64Structure", "(", "out", ",", "1", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testLineLength55", "(", ")", "{", "byte", "[", "]", "out", "=", "Base64", ".", "encodeBase64Chunked", "(", "getByteArray", "(", "<NUM_LIT>", ")", ")", ";", "checkBase64Structure", "(", "out", ",", "1", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testLineLength56", "(", ")", "{", "byte", "[", "]", "out", "=", "Base64", ".", "encodeBase64Chunked", "(", "getByteArray", "(", "<NUM_LIT>", ")", ")", ";", "checkBase64Structure", "(", "out", ",", "1", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testLineLength57", "(", ")", "{", "byte", "[", "]", "out", "=", "Base64", ".", "encodeBase64Chunked", "(", "getByteArray", "(", "<NUM_LIT>", ")", ")", ";", "checkBase64Structure", "(", "out", ",", "1", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testLineLength58", "(", ")", "{", "byte", "[", "]", "out", "=", "Base64", ".", "encodeBase64Chunked", "(", "getByteArray", "(", "<NUM_LIT>", ")", ")", ";", "checkBase64Structure", "(", "out", ",", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testLineLength59", "(", ")", "{", "byte", "[", "]", "out", "=", "Base64", ".", "encodeBase64Chunked", "(", "getByteArray", "(", "<NUM_LIT>", ")", ")", ";", "checkBase64Structure", "(", "out", ",", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testLineLength111", "(", ")", "{", "byte", "[", "]", "out", "=", "Base64", ".", "encodeBase64Chunked", "(", "getByteArray", "(", "<NUM_LIT>", ")", ")", ";", "checkBase64Structure", "(", "out", ",", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testLineLength112", "(", ")", "{", "byte", "[", "]", "out", "=", "Base64", ".", "encodeBase64Chunked", "(", "getByteArray", "(", "<NUM_LIT>", ")", ")", ";", "checkBase64Structure", "(", "out", ",", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testLineLength113", "(", ")", "{", "byte", "[", "]", "out", "=", "Base64", ".", "encodeBase64Chunked", "(", "getByteArray", "(", "<NUM_LIT>", ")", ")", ";", "checkBase64Structure", "(", "out", ",", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testLineLength114", "(", ")", "{", "byte", "[", "]", "out", "=", "Base64", ".", "encodeBase64Chunked", "(", "getByteArray", "(", "<NUM_LIT>", ")", ")", ";", "checkBase64Structure", "(", "out", ",", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testLineLength115", "(", ")", "{", "byte", "[", "]", "out", "=", "Base64", ".", "encodeBase64Chunked", "(", "getByteArray", "(", "<NUM_LIT>", ")", ")", ";", "checkBase64Structure", "(", "out", ",", "<NUM_LIT:3>", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkBase64Structure", "(", "byte", "[", "]", "buffer", ",", "int", "expectedChunks", ")", "{", "int", "chunkCount", "=", "0", ";", "int", "chunkStart", ";", "int", "nextChunkStart", "=", "0", ";", "int", "limit", "=", "buffer", ".", "length", ";", "while", "(", "nextChunkStart", "<", "limit", ")", "{", "chunkStart", "=", "-", "1", ";", "int", "chunkEnd", ";", "for", "(", "chunkEnd", "=", "nextChunkStart", ";", "chunkEnd", "<", "limit", ";", "+", "+", "chunkEnd", ")", "{", "assertFalse", "(", "\"", "<STR_LIT>", "\"", ",", "buffer", "[", "chunkEnd", "]", "=", "=", "0", ")", ";", "if", "(", "buffer", "[", "chunkEnd", "]", "=", "=", "<STR_LIT>", ")", "{", "assertTrue", "(", "buffer", "[", "chunkEnd", "+", "1", "]", "=", "=", "<STR_LIT:\\n>", ")", ";", "chunkStart", "=", "nextChunkStart", ";", "break", ";", "}", "if", "(", "chunkEnd", "=", "=", "limit", ")", "{", "chunkStart", "=", "nextChunkStart", ";", "break", ";", "}", "}", "chunkCount", "+", "+", ";", "nextChunkStart", "=", "chunkEnd", "+", "<NUM_LIT:2>", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "chunkStart", ">", "=", "0", ")", ";", "int", "chunkLen", "=", "chunkEnd", "-", "chunkStart", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "chunkLen", "<", "=", "<NUM_LIT>", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "0", ",", "chunkLen", "%", "<NUM_LIT:4>", ")", ";", "boolean", "lastEquals1", "=", "buffer", "[", "chunkEnd", "-", "1", "]", "=", "=", "<CHAR_LIT:=>", ";", "boolean", "lastEquals2", "=", "buffer", "[", "chunkEnd", "-", "<NUM_LIT:2>", "]", "=", "=", "<CHAR_LIT:=>", ";", "boolean", "lastEquals3", "=", "buffer", "[", "chunkEnd", "-", "<NUM_LIT:3>", "]", "=", "=", "<CHAR_LIT:=>", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "(", "!", "lastEquals1", "&", "&", "!", "lastEquals2", ")", "|", "|", "(", "lastEquals1", "&", "&", "!", "lastEquals2", ")", "|", "|", "(", "lastEquals1", "&", "&", "lastEquals2", ")", ")", ";", "}", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expectedChunks", ",", "chunkCount", ")", ";", "}", "</s>"]
["<s>", "private", "byte", "[", "]", "getByteArray", "(", "int", "size", ")", "{", "byte", "[", "]", "result", "=", "new", "byte", "[", "size", "]", ";", "byte", "fillChar", "=", "<CHAR_LIT:1>", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "size", ";", "+", "+", "i", ")", "{", "result", "[", "i", "]", "=", "fillChar", "+", "+", ";", "if", "(", "fillChar", ">", "<CHAR_LIT:9>", ")", "{", "fillChar", "=", "<CHAR_LIT:0>", ";", "}", "}", "return", "result", ";", "}", "</s>"]
["<s>", "public", "AttachmentProviderTests", "(", ")", "{", "super", "(", "AttachmentProvider", ".", "class", ",", "AttachmentProvider", ".", "AUTHORITY", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mMockContext", "=", "getMockContext", "(", ")", ";", "mMockResolver", "=", "mMockContext", ".", "getContentResolver", "(", ")", ";", "mEmailProvider", "=", "new", "EmailProvider", "(", ")", ";", "mEmailProvider", ".", "attachInfo", "(", "mMockContext", ",", "null", ")", ";", "assertNotNull", "(", "mEmailProvider", ")", ";", "(", "(", "MockContentResolver", ")", "mMockResolver", ")", ".", "addProvider", "(", "EmailProvider", ".", "EMAIL_AUTHORITY", ",", "mEmailProvider", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "super", ".", "tearDown", "(", ")", ";", "if", "(", "mLocalStore", "!", "=", "null", ")", "{", "mLocalStore", ".", "delete", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testUnimplemented", "(", ")", "{", "assertEquals", "(", "0", ",", "mMockResolver", ".", "delete", "(", "AttachmentProvider", ".", "CONTENT_URI", ",", "null", ",", "null", ")", ")", ";", "assertEquals", "(", "0", ",", "mMockResolver", ".", "update", "(", "AttachmentProvider", ".", "CONTENT_URI", ",", "null", ",", "null", ",", "null", ")", ")", ";", "assertEquals", "(", "null", ",", "mMockResolver", ".", "insert", "(", "AttachmentProvider", ".", "CONTENT_URI", ",", "null", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testQuery", "(", ")", "throws", "MessagingException", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "mMockContext", ")", ";", "account1", ".", "mCompatibilityUuid", "=", "\"", "<STR_LIT>", "\"", ";", "account1", ".", "save", "(", "mMockContext", ")", ";", "final", "long", "message1Id", "=", "1", ";", "long", "attachment1Id", "=", "1", ";", "long", "attachment2Id", "=", "<NUM_LIT:2>", ";", "long", "attachment3Id", "=", "<NUM_LIT:3>", ";", "Uri", "attachment1Uri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment1Id", ")", ";", "Uri", "attachment2Uri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment2Id", ")", ";", "Uri", "attachment3Uri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment3Id", ")", ";", "Cursor", "c", "=", "mMockResolver", ".", "query", "(", "attachment1Uri", ",", "(", "String", "[", "]", ")", "null", ",", "null", ",", "(", "String", "[", "]", ")", "null", ",", "null", ")", ";", "assertNull", "(", "c", ")", ";", "setupAttachmentDatabase", "(", "account1", ")", ";", "c", "=", "mMockResolver", ".", "query", "(", "attachment1Uri", ",", "(", "String", "[", "]", ")", "null", ",", "null", ",", "(", "String", "[", "]", ")", "null", ",", "null", ")", ";", "assertNull", "(", "c", ")", ";", "Attachment", "newAttachment1", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message1Id", ",", "\"", "<STR_LIT:1>", "\"", ",", "<NUM_LIT:100>", ",", "false", ",", "mMockContext", ")", ";", "newAttachment1", ".", "mContentUri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment1Id", ")", ".", "toString", "(", ")", ";", "attachment1Id", "=", "addAttachmentToDb", "(", "account1", ",", "newAttachment1", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "attachment1Id", ")", ";", "Attachment", "newAttachment2", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message1Id", ",", "\"", "<STR_LIT:2>", "\"", ",", "<NUM_LIT>", ",", "false", ",", "mMockContext", ")", ";", "newAttachment2", ".", "mContentUri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment2Id", ")", ".", "toString", "(", ")", ";", "attachment2Id", "=", "addAttachmentToDb", "(", "account1", ",", "newAttachment2", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "attachment2Id", ")", ";", "Attachment", "newAttachment3", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message1Id", ",", "\"", "<STR_LIT:3>", "\"", ",", "<NUM_LIT>", ",", "false", ",", "mMockContext", ")", ";", "newAttachment3", ".", "mContentUri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment3Id", ")", ".", "toString", "(", ")", ";", "attachment3Id", "=", "addAttachmentToDb", "(", "account1", ",", "newAttachment3", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:3>", ",", "attachment3Id", ")", ";", "attachment2Uri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment2Id", ")", ";", "c", "=", "mMockResolver", ".", "query", "(", "attachment2Uri", ",", "new", "String", "[", "]", "{", "AttachmentProviderColumns", ".", "_ID", ",", "AttachmentProviderColumns", ".", "DATA", ",", "AttachmentProviderColumns", ".", "DISPLAY_NAME", ",", "AttachmentProviderColumns", ".", "SIZE", "}", ",", "null", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "1", ",", "c", ".", "getCount", "(", ")", ")", ";", "assertTrue", "(", "c", ".", "moveToFirst", "(", ")", ")", ";", "assertEquals", "(", "attachment2Id", ",", "c", ".", "getLong", "(", "0", ")", ")", ";", "assertEquals", "(", "attachment2Uri", ".", "toString", "(", ")", ",", "c", ".", "getString", "(", "1", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:2>", "\"", ",", "c", ".", "getString", "(", "<NUM_LIT:2>", ")", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "c", ".", "getInt", "(", "<NUM_LIT:3>", ")", ")", ";", "attachment3Uri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment3Id", ")", ";", "c", "=", "mMockResolver", ".", "query", "(", "attachment3Uri", ",", "new", "String", "[", "]", "{", "AttachmentProviderColumns", ".", "SIZE", ",", "AttachmentProviderColumns", ".", "DISPLAY_NAME", ",", "AttachmentProviderColumns", ".", "DATA", ",", "AttachmentProviderColumns", ".", "_ID", "}", ",", "null", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "1", ",", "c", ".", "getCount", "(", ")", ")", ";", "assertTrue", "(", "c", ".", "moveToFirst", "(", ")", ")", ";", "assertEquals", "(", "attachment3Id", ",", "c", ".", "getLong", "(", "<NUM_LIT:3>", ")", ")", ";", "assertEquals", "(", "attachment3Uri", ".", "toString", "(", ")", ",", "c", ".", "getString", "(", "<NUM_LIT:2>", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:3>", "\"", ",", "c", ".", "getString", "(", "1", ")", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "c", ".", "getInt", "(", "0", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetType", "(", ")", "throws", "MessagingException", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "mMockContext", ")", ";", "account1", ".", "mCompatibilityUuid", "=", "\"", "<STR_LIT>", "\"", ";", "account1", ".", "save", "(", "mMockContext", ")", ";", "final", "long", "message1Id", "=", "1", ";", "long", "attachment1Id", "=", "1", ";", "long", "attachment2Id", "=", "<NUM_LIT:2>", ";", "long", "attachment3Id", "=", "<NUM_LIT:3>", ";", "Uri", "attachment1Uri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment1Id", ")", ";", "String", "type", "=", "mMockResolver", ".", "getType", "(", "attachment1Uri", ")", ";", "assertNull", "(", "type", ")", ";", "setupAttachmentDatabase", "(", "account1", ")", ";", "type", "=", "mMockResolver", ".", "getType", "(", "attachment1Uri", ")", ";", "assertNull", "(", "type", ")", ";", "Attachment", "newAttachment2", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message1Id", ",", "\"", "<STR_LIT:2>", "\"", ",", "<NUM_LIT:100>", ",", "false", ",", "mMockContext", ")", ";", "newAttachment2", ".", "mMimeType", "=", "\"", "<STR_LIT>", "\"", ";", "attachment2Id", "=", "addAttachmentToDb", "(", "account1", ",", "newAttachment2", ")", ";", "Attachment", "newAttachment3", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message1Id", ",", "\"", "<STR_LIT:3>", "\"", ",", "<NUM_LIT:100>", ",", "false", ",", "mMockContext", ")", ";", "newAttachment3", ".", "mMimeType", "=", "\"", "<STR_LIT>", "\"", ";", "attachment3Id", "=", "addAttachmentToDb", "(", "account1", ",", "newAttachment3", ")", ";", "Uri", "uri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment2Id", ")", ";", "type", "=", "mMockResolver", ".", "getType", "(", "uri", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "type", ")", ";", "uri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment3Id", ")", ";", "type", "=", "mMockResolver", ".", "getType", "(", "uri", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "type", ")", ";", "uri", "=", "AttachmentProvider", ".", "getAttachmentThumbnailUri", "(", "account1", ".", "mId", ",", "attachment2Id", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ";", "type", "=", "mMockResolver", ".", "getType", "(", "uri", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "type", ")", ";", "uri", "=", "AttachmentProvider", ".", "getAttachmentThumbnailUri", "(", "account1", ".", "mId", ",", "attachment3Id", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ";", "type", "=", "mMockResolver", ".", "getType", "(", "uri", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "type", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testOpenFile", "(", ")", "throws", "MessagingException", ",", "IOException", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "mMockContext", ")", ";", "account1", ".", "mCompatibilityUuid", "=", "\"", "<STR_LIT>", "\"", ";", "account1", ".", "save", "(", "mMockContext", ")", ";", "final", "long", "message1Id", "=", "1", ";", "long", "attachment1Id", "=", "1", ";", "long", "attachment2Id", "=", "<NUM_LIT:2>", ";", "Uri", "file1Uri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment1Id", ")", ";", "Uri", "file2Uri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment2Id", ")", ";", "AssetFileDescriptor", "afd", ";", "try", "{", "afd", "=", "mMockResolver", ".", "openAssetFileDescriptor", "(", "file1Uri", ",", "\"", "<STR_LIT>", "\"", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "FileNotFoundException", "fnf", ")", "{", "}", "setupAttachmentDatabase", "(", "account1", ")", ";", "try", "{", "afd", "=", "mMockResolver", ".", "openAssetFileDescriptor", "(", "file1Uri", ",", "\"", "<STR_LIT>", "\"", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "FileNotFoundException", "fnf", ")", "{", "}", "Attachment", "newAttachment", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message1Id", ",", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:100>", ",", "false", ",", "mMockContext", ")", ";", "attachment1Id", "=", "addAttachmentToDb", "(", "account1", ",", "newAttachment", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "attachment1Id", ")", ";", "try", "{", "afd", "=", "mMockResolver", ".", "openAssetFileDescriptor", "(", "file1Uri", ",", "\"", "<STR_LIT>", "\"", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "FileNotFoundException", "fnf", ")", "{", "}", "createAttachmentFile", "(", "account1", ",", "attachment2Id", ")", ";", "Attachment", "newAttachment2", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message1Id", ",", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:100>", ",", "false", ",", "mMockContext", ")", ";", "newAttachment2", ".", "mContentId", "=", "null", ";", "newAttachment2", ".", "mContentUri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment2Id", ")", ".", "toString", "(", ")", ";", "newAttachment2", ".", "mMimeType", "=", "\"", "<STR_LIT>", "\"", ";", "attachment2Id", "=", "addAttachmentToDb", "(", "account1", ",", "newAttachment2", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "attachment2Id", ")", ";", "afd", "=", "mMockResolver", ".", "openAssetFileDescriptor", "(", "file2Uri", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertNotNull", "(", "afd", ")", ";", "afd", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testOpenThumbnail", "(", ")", "throws", "MessagingException", ",", "IOException", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "mMockContext", ")", ";", "account1", ".", "mCompatibilityUuid", "=", "\"", "<STR_LIT>", "\"", ";", "account1", ".", "save", "(", "mMockContext", ")", ";", "final", "long", "message1Id", "=", "1", ";", "long", "attachment1Id", "=", "1", ";", "long", "attachment2Id", "=", "<NUM_LIT:2>", ";", "Uri", "thumb1Uri", "=", "AttachmentProvider", ".", "getAttachmentThumbnailUri", "(", "account1", ".", "mId", ",", "attachment1Id", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ";", "Uri", "thumb2Uri", "=", "AttachmentProvider", ".", "getAttachmentThumbnailUri", "(", "account1", ".", "mId", ",", "attachment2Id", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ";", "AssetFileDescriptor", "afd", "=", "mMockResolver", ".", "openAssetFileDescriptor", "(", "thumb1Uri", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertNull", "(", "afd", ")", ";", "setupAttachmentDatabase", "(", "account1", ")", ";", "afd", "=", "mMockResolver", ".", "openAssetFileDescriptor", "(", "thumb1Uri", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertNull", "(", "afd", ")", ";", "Attachment", "newAttachment", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message1Id", ",", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:100>", ",", "false", ",", "mMockContext", ")", ";", "attachment1Id", "=", "addAttachmentToDb", "(", "account1", ",", "newAttachment", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "attachment1Id", ")", ";", "afd", "=", "mMockResolver", ".", "openAssetFileDescriptor", "(", "thumb1Uri", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertNull", "(", "afd", ")", ";", "createAttachmentFile", "(", "account1", ",", "attachment2Id", ")", ";", "Attachment", "newAttachment2", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message1Id", ",", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:100>", ",", "false", ",", "mMockContext", ")", ";", "newAttachment2", ".", "mContentId", "=", "null", ";", "newAttachment2", ".", "mContentUri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment2Id", ")", ".", "toString", "(", ")", ";", "newAttachment2", ".", "mMimeType", "=", "\"", "<STR_LIT>", "\"", ";", "attachment2Id", "=", "addAttachmentToDb", "(", "account1", ",", "newAttachment2", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "attachment2Id", ")", ";", "afd", "=", "mMockResolver", ".", "openAssetFileDescriptor", "(", "thumb2Uri", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertNotNull", "(", "afd", ")", ";", "afd", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testResolveAttachmentIdToContentUri", "(", ")", "throws", "MessagingException", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "mMockContext", ")", ";", "account1", ".", "mCompatibilityUuid", "=", "\"", "<STR_LIT>", "\"", ";", "account1", ".", "save", "(", "mMockContext", ")", ";", "final", "long", "message1Id", "=", "1", ";", "long", "attachment1Id", "=", "1", ";", "Uri", "attachment1Uri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "account1", ".", "mId", ",", "attachment1Id", ")", ";", "Uri", "result", "=", "AttachmentProvider", ".", "resolveAttachmentIdToContentUri", "(", "mMockResolver", ",", "attachment1Uri", ")", ";", "assertEquals", "(", "attachment1Uri", ",", "result", ")", ";", "setupAttachmentDatabase", "(", "account1", ")", ";", "result", "=", "AttachmentProvider", ".", "resolveAttachmentIdToContentUri", "(", "mMockResolver", ",", "attachment1Uri", ")", ";", "assertEquals", "(", "attachment1Uri", ",", "result", ")", ";", "Attachment", "newAttachment1", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message1Id", ",", "\"", "<STR_LIT:1>", "\"", ",", "<NUM_LIT:100>", ",", "false", ",", "mMockContext", ")", ";", "newAttachment1", ".", "mContentUri", "=", "\"", "<STR_LIT>", "\"", ";", "attachment1Id", "=", "addAttachmentToDb", "(", "account1", ",", "newAttachment1", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "attachment1Id", ")", ";", "result", "=", "AttachmentProvider", ".", "resolveAttachmentIdToContentUri", "(", "mMockResolver", ",", "attachment1Uri", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "result", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDeleteFiles", "(", ")", "throws", "IOException", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "mMockContext", ")", ";", "account1", ".", "mCompatibilityUuid", "=", "\"", "<STR_LIT>", "\"", ";", "account1", ".", "save", "(", "mMockContext", ")", ";", "final", "long", "message1Id", "=", "1", ";", "final", "long", "message2Id", "=", "<NUM_LIT:2>", ";", "final", "long", "message3Id", "=", "<NUM_LIT:3>", ";", "final", "long", "message4Id", "=", "<NUM_LIT:4>", ";", "Attachment", "newAttachment1", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message1Id", ",", "\"", "<STR_LIT:1>", "\"", ",", "<NUM_LIT:100>", ",", "true", ",", "mMockContext", ")", ";", "Attachment", "newAttachment2", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message2Id", ",", "\"", "<STR_LIT:2>", "\"", ",", "<NUM_LIT>", ",", "true", ",", "mMockContext", ")", ";", "Attachment", "newAttachment3", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message2Id", ",", "\"", "<STR_LIT:3>", "\"", ",", "<NUM_LIT:100>", ",", "true", ",", "mMockContext", ")", ";", "Attachment", "newAttachment4", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message3Id", ",", "\"", "<STR_LIT:4>", "\"", ",", "<NUM_LIT:100>", ",", "true", ",", "mMockContext", ")", ";", "createAttachmentFile", "(", "account1", ",", "newAttachment1", ".", "mId", ")", ";", "createAttachmentFile", "(", "account1", ",", "newAttachment2", ".", "mId", ")", ";", "createAttachmentFile", "(", "account1", ",", "newAttachment3", ".", "mId", ")", ";", "File", "attachmentsDir", "=", "AttachmentProvider", ".", "getAttachmentDirectory", "(", "mMockContext", ",", "account1", ".", "mId", ")", ";", "assertEquals", "(", "<NUM_LIT:3>", ",", "attachmentsDir", ".", "listFiles", "(", ")", ".", "length", ")", ";", "AttachmentProvider", ".", "deleteAllAttachmentFiles", "(", "mMockContext", ",", "account1", ".", "mId", ",", "message4Id", ")", ";", "assertEquals", "(", "<NUM_LIT:3>", ",", "attachmentsDir", ".", "listFiles", "(", ")", ".", "length", ")", ";", "AttachmentProvider", ".", "deleteAllAttachmentFiles", "(", "mMockContext", ",", "account1", ".", "mId", ",", "message3Id", ")", ";", "assertEquals", "(", "<NUM_LIT:3>", ",", "attachmentsDir", ".", "listFiles", "(", ")", ".", "length", ")", ";", "AttachmentProvider", ".", "deleteAllAttachmentFiles", "(", "mMockContext", ",", "account1", ".", "mId", ",", "message2Id", ")", ";", "assertEquals", "(", "1", ",", "attachmentsDir", ".", "listFiles", "(", ")", ".", "length", ")", ";", "AttachmentProvider", ".", "deleteAllAttachmentFiles", "(", "mMockContext", ",", "account1", ".", "mId", ",", "message1Id", ")", ";", "assertEquals", "(", "0", ",", "attachmentsDir", ".", "listFiles", "(", ")", ".", "length", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDeleteMailbox", "(", ")", "throws", "IOException", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "mMockContext", ")", ";", "account1", ".", "mCompatibilityUuid", "=", "\"", "<STR_LIT>", "\"", ";", "account1", ".", "save", "(", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "mailbox1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "mailbox1Id", "=", "mailbox1", ".", "mId", ";", "Mailbox", "mailbox2", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:2>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "mailbox2Id", "=", "mailbox2", ".", "mId", ";", "Message", "message1a", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT>", "\"", ",", "account1Id", ",", "mailbox1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "Message", "message1b", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT>", "\"", ",", "account1Id", ",", "mailbox1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "Message", "message2a", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT>", "\"", ",", "account1Id", ",", "mailbox2Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "Message", "message2b", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT>", "\"", ",", "account1Id", ",", "mailbox2Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "Attachment", "newAttachment1", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message1a", ".", "mId", ",", "\"", "<STR_LIT:1>", "\"", ",", "<NUM_LIT:100>", ",", "true", ",", "mMockContext", ")", ";", "Attachment", "newAttachment2", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message1a", ".", "mId", ",", "\"", "<STR_LIT:2>", "\"", ",", "<NUM_LIT>", ",", "true", ",", "mMockContext", ")", ";", "Attachment", "newAttachment3", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message1a", ".", "mId", ",", "\"", "<STR_LIT:3>", "\"", ",", "<NUM_LIT:100>", ",", "true", ",", "mMockContext", ")", ";", "Attachment", "newAttachment4", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "message2a", ".", "mId", ",", "\"", "<STR_LIT:4>", "\"", ",", "<NUM_LIT:100>", ",", "true", ",", "mMockContext", ")", ";", "createAttachmentFile", "(", "account1", ",", "newAttachment1", ".", "mId", ")", ";", "createAttachmentFile", "(", "account1", ",", "newAttachment2", ".", "mId", ")", ";", "createAttachmentFile", "(", "account1", ",", "newAttachment3", ".", "mId", ")", ";", "createAttachmentFile", "(", "account1", ",", "newAttachment4", ".", "mId", ")", ";", "File", "attachmentsDir", "=", "AttachmentProvider", ".", "getAttachmentDirectory", "(", "mMockContext", ",", "account1", ".", "mId", ")", ";", "assertEquals", "(", "<NUM_LIT:4>", ",", "attachmentsDir", ".", "listFiles", "(", ")", ".", "length", ")", ";", "AttachmentProvider", ".", "deleteAllMailboxAttachmentFiles", "(", "mMockContext", ",", "account1Id", ",", "mailbox1Id", ")", ";", "assertEquals", "(", "1", ",", "attachmentsDir", ".", "listFiles", "(", ")", ".", "length", ")", ";", "AttachmentProvider", ".", "deleteAllMailboxAttachmentFiles", "(", "mMockContext", ",", "account1Id", ",", "mailbox2Id", ")", ";", "assertEquals", "(", "0", ",", "attachmentsDir", ".", "listFiles", "(", ")", ".", "length", ")", ";", "}", "</s>"]
["<s>", "private", "String", "createAttachmentFile", "(", "Account", "forAccount", ",", "long", "id", ")", "throws", "IOException", "{", "File", "outFile", "=", "getAttachmentFile", "(", "forAccount", ",", "id", ")", ";", "Bitmap", "bitmap", "=", "BitmapFactory", ".", "decodeResource", "(", "getContext", "(", ")", ".", "getResources", "(", ")", ",", "R", ".", "drawable", ".", "ic_email_attachment", ")", ";", "FileOutputStream", "out", "=", "new", "FileOutputStream", "(", "outFile", ")", ";", "bitmap", ".", "compress", "(", "Bitmap", ".", "CompressFormat", ".", "PNG", ",", "<NUM_LIT:100>", ",", "out", ")", ";", "out", ".", "close", "(", ")", ";", "return", "outFile", ".", "getAbsolutePath", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "setupAttachmentDatabase", "(", "Account", "forAccount", ")", "throws", "MessagingException", "{", "if", "(", "USE_LOCALSTORE", ")", "{", "String", "localStoreUri", "=", "\"", "<STR_LIT>", "\"", "+", "dbName", "(", "forAccount", ")", ";", "mLocalStore", "=", "(", "LocalStore", ")", "LocalStore", ".", "newInstance", "(", "localStoreUri", ",", "mMockContext", ",", "null", ")", ";", "}", "else", "{", "}", "}", "</s>"]
["<s>", "private", "long", "addAttachmentToDb", "(", "Account", "forAccount", ",", "Attachment", "newAttachment", ")", "{", "long", "attachmentId", "=", "-", "1", ";", "if", "(", "USE_LOCALSTORE", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "newAttachment", ".", "mMessageKey", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "newAttachment", ".", "mContentUri", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "String", ")", "null", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "newAttachment", ".", "mSize", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "newAttachment", ".", "mFileName", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "newAttachment", ".", "mMimeType", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "newAttachment", ".", "mContentId", ")", ";", "SQLiteDatabase", "db", "=", "null", ";", "try", "{", "db", "=", "SQLiteDatabase", ".", "openDatabase", "(", "dbName", "(", "forAccount", ")", ",", "null", ",", "0", ")", ";", "attachmentId", "=", "db", ".", "insertOrThrow", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "cv", ")", ";", "}", "finally", "{", "if", "(", "db", "!", "=", "null", ")", "{", "db", ".", "close", "(", ")", ";", "}", "}", "}", "else", "{", "newAttachment", ".", "save", "(", "mMockContext", ")", ";", "attachmentId", "=", "newAttachment", ".", "mId", ";", "}", "return", "attachmentId", ";", "}", "</s>"]
["<s>", "private", "String", "dbName", "(", "Account", "forAccount", ")", "{", "if", "(", "USE_LOCALSTORE", ")", "{", "return", "mMockContext", ".", "getDatabasePath", "(", "forAccount", ".", "mCompatibilityUuid", "+", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ";", "}", "else", "{", "throw", "new", "java", ".", "lang", ".", "UnsupportedOperationException", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "File", "getAttachmentFile", "(", "Account", "forAccount", ",", "long", "id", ")", "{", "String", "idString", "=", "Long", ".", "toString", "(", "id", ")", ";", "if", "(", "USE_LOCALSTORE", ")", "{", "return", "new", "File", "(", "mMockContext", ".", "getDatabasePath", "(", "forAccount", ".", "mCompatibilityUuid", "+", "\"", "<STR_LIT>", "\"", ")", ",", "idString", ")", ";", "}", "else", "{", "File", "attachmentsDir", "=", "mMockContext", ".", "getDatabasePath", "(", "forAccount", ".", "mId", "+", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "!", "attachmentsDir", ".", "exists", "(", ")", ")", "{", "attachmentsDir", ".", "mkdirs", "(", ")", ";", "}", "return", "new", "File", "(", "attachmentsDir", ",", "idString", ")", ";", "}", "}", "</s>"]
["<s>", "public", "ProviderTests", "(", ")", "{", "super", "(", "EmailProvider", ".", "class", ",", "EmailProvider", ".", "EMAIL_AUTHORITY", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "mMockContext", "=", "getMockContext", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "super", ".", "tearDown", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testAccountSave", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Account", "account2", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mMockContext", ",", "account1Id", ")", ";", "ProviderTestUtils", ".", "assertAccountEqual", "(", "\"", "<STR_LIT>", "\"", ",", "account1", ",", "account2", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testAccountSaveHostAuth", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "mMockContext", ")", ";", "account1", ".", "mHostAuthRecv", "=", "ProviderTestUtils", ".", "setupHostAuth", "(", "\"", "<STR_LIT>", "\"", ",", "-", "1", ",", "false", ",", "mMockContext", ")", ";", "account1", ".", "mHostAuthSend", "=", "ProviderTestUtils", ".", "setupHostAuth", "(", "\"", "<STR_LIT>", "\"", ",", "-", "1", ",", "false", ",", "mMockContext", ")", ";", "account1", ".", "save", "(", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Account", "account1get", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mMockContext", ",", "account1Id", ")", ";", "ProviderTestUtils", ".", "assertAccountEqual", "(", "\"", "<STR_LIT>", "\"", ",", "account1", ",", "account1get", ")", ";", "HostAuth", "hostAuth1get", "=", "EmailContent", ".", "HostAuth", ".", "restoreHostAuthWithId", "(", "mMockContext", ",", "account1get", ".", "mHostAuthKeyRecv", ")", ";", "ProviderTestUtils", ".", "assertHostAuthEqual", "(", "\"", "<STR_LIT>", "\"", ",", "account1", ".", "mHostAuthRecv", ",", "hostAuth1get", ")", ";", "HostAuth", "hostAuth2get", "=", "EmailContent", ".", "HostAuth", ".", "restoreHostAuthWithId", "(", "mMockContext", ",", "account1get", ".", "mHostAuthKeySend", ")", ";", "ProviderTestUtils", ".", "assertHostAuthEqual", "(", "\"", "<STR_LIT>", "\"", ",", "account1", ".", "mHostAuthSend", ",", "hostAuth2get", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testAccountParcel", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "mMockContext", ")", ";", "Bundle", "b", "=", "new", "Bundle", "(", ")", ";", "b", ".", "putParcelable", "(", "\"", "<STR_LIT>", "\"", ",", "account1", ")", ";", "Parcel", "p", "=", "Parcel", ".", "obtain", "(", ")", ";", "b", ".", "writeToParcel", "(", "p", ",", "0", ")", ";", "p", ".", "setDataPosition", "(", "0", ")", ";", "Bundle", "b2", "=", "new", "Bundle", "(", "Account", ".", "class", ".", "getClassLoader", "(", ")", ")", ";", "b2", ".", "readFromParcel", "(", "p", ")", ";", "Account", "account2", "=", "(", "Account", ")", "b2", ".", "getParcelable", "(", "\"", "<STR_LIT>", "\"", ")", ";", "p", ".", "recycle", "(", ")", ";", "ProviderTestUtils", ".", "assertAccountEqual", "(", "\"", "<STR_LIT>", "\"", ",", "account1", ",", "account2", ")", ";", "}", "</s>"]
["<s>", "private", "int", "getUnreadCount", "(", "long", "mailboxId", ")", "{", "String", "text", "=", "null", ";", "Cursor", "c", "=", "null", ";", "try", "{", "c", "=", "mMockContext", ".", "getContentResolver", "(", ")", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "MAILBOX_UNREAD_COUNT_PROJECTION", ",", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "mailboxId", ")", "}", ",", "null", ")", ";", "c", ".", "moveToFirst", "(", ")", ";", "text", "=", "c", ".", "getString", "(", "MAILBOX_UNREAD_COUNT_COLMUN", ")", ";", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "return", "Integer", ".", "valueOf", "(", "text", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testHostAuthSecurityUri", "(", ")", "{", "HostAuth", "ha", "=", "ProviderTestUtils", ".", "setupHostAuth", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "false", ",", "mMockContext", ")", ";", "final", "int", "MASK", "=", "HostAuth", ".", "FLAG_SSL", "|", "HostAuth", ".", "FLAG_TLS", "|", "HostAuth", ".", "FLAG_TRUST_ALL_CERTIFICATES", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "0", ",", "ha", ".", "mFlags", "&", "MASK", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "HostAuth", ".", "FLAG_SSL", ",", "ha", ".", "mFlags", "&", "MASK", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "HostAuth", ".", "FLAG_SSL", "|", "HostAuth", ".", "FLAG_TRUST_ALL_CERTIFICATES", ",", "ha", ".", "mFlags", "&", "MASK", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "HostAuth", ".", "FLAG_TLS", ",", "ha", ".", "mFlags", "&", "MASK", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "HostAuth", ".", "FLAG_TLS", "|", "HostAuth", ".", "FLAG_TRUST_ALL_CERTIFICATES", ",", "ha", ".", "mFlags", "&", "MASK", ")", ";", "ha", ".", "mFlags", "&", "=", "~", "MASK", ";", "String", "uriString", "=", "ha", ".", "getStoreUri", "(", ")", ";", "assertTrue", "(", "uriString", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "ha", ".", "mFlags", "|", "=", "HostAuth", ".", "FLAG_SSL", ";", "uriString", "=", "ha", ".", "getStoreUri", "(", ")", ";", "assertTrue", "(", "uriString", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "ha", ".", "mFlags", "|", "=", "HostAuth", ".", "FLAG_TRUST_ALL_CERTIFICATES", ";", "uriString", "=", "ha", ".", "getStoreUri", "(", ")", ";", "assertTrue", "(", "uriString", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "ha", ".", "mFlags", "&", "=", "~", "MASK", ";", "ha", ".", "mFlags", "|", "=", "HostAuth", ".", "FLAG_TLS", ";", "uriString", "=", "ha", ".", "getStoreUri", "(", ")", ";", "assertTrue", "(", "uriString", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "ha", ".", "mFlags", "|", "=", "HostAuth", ".", "FLAG_TRUST_ALL_CERTIFICATES", ";", "uriString", "=", "ha", ".", "getStoreUri", "(", ")", ";", "assertTrue", "(", "uriString", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testHostAuthPortAssignments", "(", ")", "{", "HostAuth", "ha", "=", "ProviderTestUtils", ".", "setupHostAuth", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "false", ",", "mMockContext", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "ha", ".", "setStoreUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "ha", ".", "mPort", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testMailboxSave", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "Mailbox", "box2", "=", "EmailContent", ".", "Mailbox", ".", "restoreMailboxWithId", "(", "mMockContext", ",", "box1Id", ")", ";", "ProviderTestUtils", ".", "assertMailboxEqual", "(", "\"", "<STR_LIT>", "\"", ",", "box1", ",", "box2", ")", ";", "}", "</s>"]
["<s>", "private", "Body", "loadBodyForMessageId", "(", "long", "messageId", ")", "{", "Cursor", "c", "=", "null", ";", "try", "{", "c", "=", "mMockContext", ".", "getContentResolver", "(", ")", ".", "query", "(", "EmailContent", ".", "Body", ".", "CONTENT_URI", ",", "EmailContent", ".", "Body", ".", "CONTENT_PROJECTION", ",", "EmailContent", ".", "Body", ".", "MESSAGE_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "messageId", ")", "}", ",", "null", ")", ";", "int", "numBodies", "=", "c", ".", "getCount", "(", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "numBodies", "<", "<NUM_LIT:2>", ")", ";", "return", "c", ".", "moveToFirst", "(", ")", "?", "EmailContent", ".", "getContent", "(", "c", ",", "Body", ".", "class", ")", ":", "null", ";", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testMessageSave", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "Message", "message1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "long", "message1Id", "=", "message1", ".", "mId", ";", "Message", "message1get", "=", "EmailContent", ".", "Message", ".", "restoreMessageWithId", "(", "mMockContext", ",", "message1Id", ")", ";", "ProviderTestUtils", ".", "assertMessageEqual", "(", "\"", "<STR_LIT>", "\"", ",", "message1", ",", "message1get", ")", ";", "Message", "message2", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "true", ",", "true", ",", "mMockContext", ")", ";", "long", "message2Id", "=", "message2", ".", "mId", ";", "String", "text2", "=", "message2", ".", "mText", ";", "String", "html2", "=", "message2", ".", "mHtml", ";", "String", "textReply2", "=", "message2", ".", "mTextReply", ";", "String", "htmlReply2", "=", "message2", ".", "mHtmlReply", ";", "long", "sourceKey2", "=", "message2", ".", "mSourceKey", ";", "String", "introText2", "=", "message2", ".", "mIntroText", ";", "message2", ".", "mText", "=", "null", ";", "message2", ".", "mHtml", "=", "null", ";", "message2", ".", "mTextReply", "=", "null", ";", "message2", ".", "mHtmlReply", "=", "null", ";", "message2", ".", "mSourceKey", "=", "0", ";", "message2", ".", "mIntroText", "=", "null", ";", "Message", "message2get", "=", "EmailContent", ".", "Message", ".", "restoreMessageWithId", "(", "mMockContext", ",", "message2Id", ")", ";", "ProviderTestUtils", ".", "assertMessageEqual", "(", "\"", "<STR_LIT>", "\"", ",", "message2", ",", "message2get", ")", ";", "Body", "body2", "=", "loadBodyForMessageId", "(", "message2Id", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "text2", ",", "body2", ".", "mTextContent", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "html2", ",", "body2", ".", "mHtmlContent", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "textReply2", ",", "body2", ".", "mTextReply", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "htmlReply2", ",", "body2", ".", "mHtmlReply", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "sourceKey2", ",", "body2", ".", "mSourceKey", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "introText2", ",", "body2", ".", "mIntroText", ")", ";", "Message", "message3", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:3>", "\"", ",", "account1Id", ",", "box1Id", ",", "true", ",", "false", ",", "mMockContext", ")", ";", "ArrayList", "<", "Attachment", ">", "atts", "=", "new", "ArrayList", "<", "Attachment", ">", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:3>", ";", "i", "+", "+", ")", "{", "atts", ".", "add", "(", "ProviderTestUtils", ".", "setupAttachment", "(", "-", "1", ",", "expectedAttachmentNames", "[", "i", "]", ",", "expectedAttachmentSizes", "[", "i", "]", ",", "false", ",", "mMockContext", ")", ")", ";", "}", "message3", ".", "mAttachments", "=", "atts", ";", "message3", ".", "save", "(", "mMockContext", ")", ";", "long", "message3Id", "=", "message3", ".", "mId", ";", "Cursor", "c", "=", "null", ";", "try", "{", "c", "=", "mMockContext", ".", "getContentResolver", "(", ")", ".", "query", "(", "Attachment", ".", "CONTENT_URI", ",", "Attachment", ".", "CONTENT_PROJECTION", ",", "Attachment", ".", "MESSAGE_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "message3Id", ")", "}", ",", "Attachment", ".", "SIZE", ")", ";", "int", "numAtts", "=", "c", ".", "getCount", "(", ")", ";", "assertEquals", "(", "<NUM_LIT:3>", ",", "numAtts", ")", ";", "int", "i", "=", "0", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "Attachment", "actual", "=", "EmailContent", ".", "getContent", "(", "c", ",", "Attachment", ".", "class", ")", ";", "ProviderTestUtils", ".", "assertAttachmentEqual", "(", "\"", "<STR_LIT>", "\"", ",", "atts", ".", "get", "(", "i", ")", ",", "actual", ")", ";", "i", "+", "+", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "Message", "message4", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:4>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "false", ",", "mMockContext", ")", ";", "atts", "=", "new", "ArrayList", "<", "Attachment", ">", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:3>", ";", "i", "+", "+", ")", "{", "atts", ".", "add", "(", "ProviderTestUtils", ".", "setupAttachment", "(", "-", "1", ",", "expectedAttachmentNames", "[", "i", "]", ",", "expectedAttachmentSizes", "[", "i", "]", ",", "false", ",", "mMockContext", ")", ")", ";", "}", "message4", ".", "mAttachments", "=", "atts", ";", "message4", ".", "save", "(", "mMockContext", ")", ";", "long", "message4Id", "=", "message4", ".", "mId", ";", "c", "=", "null", ";", "try", "{", "c", "=", "mMockContext", ".", "getContentResolver", "(", ")", ".", "query", "(", "Attachment", ".", "CONTENT_URI", ",", "Attachment", ".", "CONTENT_PROJECTION", ",", "Attachment", ".", "MESSAGE_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "message4Id", ")", "}", ",", "Attachment", ".", "SIZE", ")", ";", "int", "numAtts", "=", "c", ".", "getCount", "(", ")", ";", "assertEquals", "(", "<NUM_LIT:3>", ",", "numAtts", ")", ";", "int", "i", "=", "0", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "Attachment", "actual", "=", "EmailContent", ".", "getContent", "(", "c", ",", "Attachment", ".", "class", ")", ";", "ProviderTestUtils", ".", "assertAttachmentEqual", "(", "\"", "<STR_LIT>", "\"", ",", "atts", ".", "get", "(", "i", ")", ",", "actual", ")", ";", "i", "+", "+", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "Attachment", "[", "]", "attachments", "=", "Attachment", ".", "restoreAttachmentsWithMessageId", "(", "mMockContext", ",", "message4Id", ")", ";", "int", "size", "=", "attachments", ".", "length", ";", "assertEquals", "(", "<NUM_LIT:3>", ",", "size", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "size", ";", "+", "+", "i", ")", "{", "ProviderTestUtils", ".", "assertAttachmentEqual", "(", "\"", "<STR_LIT>", "\"", ",", "atts", ".", "get", "(", "i", ")", ",", "attachments", "[", "i", "]", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testAccountDelete", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Account", "account2", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account2Id", "=", "account2", ".", "mId", ";", "int", "numBoxes", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Account", ".", "CONTENT_URI", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "numBoxes", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "account1Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "numBoxes", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Account", ".", "CONTENT_URI", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "1", ",", "numBoxes", ")", ";", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "account2Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "numBoxes", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Account", ".", "CONTENT_URI", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "0", ",", "numBoxes", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testLookupBodyIdWithMessageId", "(", ")", "{", "final", "ContentResolver", "resolver", "=", "mMockContext", ".", "getContentResolver", "(", ")", ";", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "Message", "message1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "long", "message1Id", "=", "message1", ".", "mId", ";", "long", "bodyId1", "=", "Body", ".", "lookupBodyIdWithMessageId", "(", "resolver", ",", "message1Id", ")", ";", "assertEquals", "(", "bodyId1", ",", "-", "1", ")", ";", "Message", "message2", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "true", ",", "true", ",", "mMockContext", ")", ";", "long", "message2Id", "=", "message2", ".", "mId", ";", "long", "bodyId2", "=", "Body", ".", "lookupBodyIdWithMessageId", "(", "resolver", ",", "message2Id", ")", ";", "Body", "body", "=", "loadBodyForMessageId", "(", "message2Id", ")", ";", "assertNotNull", "(", "body", ")", ";", "assertEquals", "(", "body", ".", "mId", ",", "bodyId2", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testUpdateBodyWithMessageId", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "final", "String", "textContent", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "htmlContent", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "textReply", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "htmlReply", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "introText", "=", "\"", "<STR_LIT>", "\"", ";", "ContentValues", "values", "=", "new", "ContentValues", "(", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "TEXT_CONTENT", ",", "textContent", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "HTML_CONTENT", ",", "htmlContent", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "TEXT_REPLY", ",", "textReply", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "HTML_REPLY", ",", "htmlReply", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "SOURCE_MESSAGE_KEY", ",", "<NUM_LIT>", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "INTRO_TEXT", ",", "introText", ")", ";", "Message", "message1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "long", "message1Id", "=", "message1", ".", "mId", ";", "Body", "body1", "=", "loadBodyForMessageId", "(", "message1Id", ")", ";", "assertNull", "(", "body1", ")", ";", "Body", ".", "updateBodyWithMessageId", "(", "mMockContext", ",", "message1Id", ",", "values", ")", ";", "body1", "=", "loadBodyForMessageId", "(", "message1Id", ")", ";", "assertNotNull", "(", "body1", ")", ";", "assertEquals", "(", "body1", ".", "mTextContent", ",", "textContent", ")", ";", "assertEquals", "(", "body1", ".", "mHtmlContent", ",", "htmlContent", ")", ";", "assertEquals", "(", "body1", ".", "mTextReply", ",", "textReply", ")", ";", "assertEquals", "(", "body1", ".", "mHtmlReply", ",", "htmlReply", ")", ";", "assertEquals", "(", "body1", ".", "mSourceKey", ",", "<NUM_LIT>", ")", ";", "assertEquals", "(", "body1", ".", "mIntroText", ",", "introText", ")", ";", "Message", "message2", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "true", ",", "true", ",", "mMockContext", ")", ";", "long", "message2Id", "=", "message2", ".", "mId", ";", "Body", "body2", "=", "loadBodyForMessageId", "(", "message2Id", ")", ";", "assertNotNull", "(", "body2", ")", ";", "assertTrue", "(", "!", "body2", ".", "mTextContent", ".", "equals", "(", "textContent", ")", ")", ";", "Body", ".", "updateBodyWithMessageId", "(", "mMockContext", ",", "message2Id", ",", "values", ")", ";", "body2", "=", "loadBodyForMessageId", "(", "message1Id", ")", ";", "assertNotNull", "(", "body2", ")", ";", "assertEquals", "(", "body2", ".", "mTextContent", ",", "textContent", ")", ";", "assertEquals", "(", "body2", ".", "mHtmlContent", ",", "htmlContent", ")", ";", "assertEquals", "(", "body2", ".", "mTextReply", ",", "textReply", ")", ";", "assertEquals", "(", "body2", ".", "mHtmlReply", ",", "htmlReply", ")", ";", "assertEquals", "(", "body2", ".", "mSourceKey", ",", "<NUM_LIT>", ")", ";", "assertEquals", "(", "body2", ".", "mIntroText", ",", "introText", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testBodyRetrieve", "(", ")", "{", "Message", "message1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT>", "\"", ",", "1", ",", "1", ",", "true", ",", "true", ",", "mMockContext", ")", ";", "long", "messageId", "=", "message1", ".", "mId", ";", "assertEquals", "(", "message1", ".", "mText", ",", "Body", ".", "restoreBodyTextWithMessageId", "(", "mMockContext", ",", "messageId", ")", ")", ";", "assertEquals", "(", "message1", ".", "mHtml", ",", "Body", ".", "restoreBodyHtmlWithMessageId", "(", "mMockContext", ",", "messageId", ")", ")", ";", "assertEquals", "(", "message1", ".", "mTextReply", ",", "Body", ".", "restoreReplyTextWithMessageId", "(", "mMockContext", ",", "messageId", ")", ")", ";", "assertEquals", "(", "message1", ".", "mHtmlReply", ",", "Body", ".", "restoreReplyHtmlWithMessageId", "(", "mMockContext", ",", "messageId", ")", ")", ";", "assertEquals", "(", "message1", ".", "mIntroText", ",", "Body", ".", "restoreIntroTextWithMessageId", "(", "mMockContext", ",", "messageId", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDeleteBody", "(", ")", "{", "final", "ContentResolver", "resolver", "=", "mMockContext", ".", "getContentResolver", "(", ")", ";", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "Message", "message1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "long", "message1Id", "=", "message1", ".", "mId", ";", "Message", "message2", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "true", ",", "true", ",", "mMockContext", ")", ";", "long", "message2Id", "=", "message2", ".", "mId", ";", "assertNotNull", "(", "loadBodyForMessageId", "(", "message2Id", ")", ")", ";", "resolver", ".", "delete", "(", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "message1Id", ")", ",", "null", ",", "null", ")", ";", "assertNotNull", "(", "loadBodyForMessageId", "(", "message2Id", ")", ")", ";", "resolver", ".", "delete", "(", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "message2Id", ")", ",", "null", ",", "null", ")", ";", "assertNull", "(", "loadBodyForMessageId", "(", "message2Id", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDeleteOrphanBodies", "(", ")", "{", "final", "ContentResolver", "resolver", "=", "mMockContext", ".", "getContentResolver", "(", ")", ";", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "Mailbox", "box2", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:2>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box2Id", "=", "box2", ".", "mId", ";", "Message", "message1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "long", "message1Id", "=", "message1", ".", "mId", ";", "Message", "message2", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "true", ",", "true", ",", "mMockContext", ")", ";", "long", "message2Id", "=", "message2", ".", "mId", ";", "assertNotNull", "(", "loadBodyForMessageId", "(", "message2Id", ")", ")", ";", "resolver", ".", "delete", "(", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "message1Id", ")", ",", "null", ",", "null", ")", ";", "resolver", ".", "delete", "(", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "CONTENT_URI", ",", "box2Id", ")", ",", "null", ",", "null", ")", ";", "assertNotNull", "(", "loadBodyForMessageId", "(", "message2Id", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testMailboxDelete", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "Mailbox", "box2", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:2>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box2Id", "=", "box2", ".", "mId", ";", "String", "selection", "=", "EmailContent", ".", "MailboxColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", ";", "String", "[", "]", "selArgs", "=", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "account1Id", ")", "}", ";", "int", "numBoxes", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Mailbox", ".", "CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "numBoxes", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "CONTENT_URI", ",", "box1Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "numBoxes", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Mailbox", ".", "CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "1", ",", "numBoxes", ")", ";", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "CONTENT_URI", ",", "box2Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "numBoxes", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Mailbox", ".", "CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "0", ",", "numBoxes", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testMessageDelete", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "Message", "message1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "long", "message1Id", "=", "message1", ".", "mId", ";", "Message", "message2", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:2>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "long", "message2Id", "=", "message2", ".", "mId", ";", "String", "selection", "=", "EmailContent", ".", "MessageColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", ";", "String", "[", "]", "selArgs", "=", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "account1Id", ")", ",", "String", ".", "valueOf", "(", "box1Id", ")", "}", ";", "int", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "numMessages", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "message1Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "1", ",", "numMessages", ")", ";", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "message2Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "0", ",", "numMessages", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSyncedMessageDelete", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "Message", "message1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "long", "message1Id", "=", "message1", ".", "mId", ";", "Message", "message2", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:2>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "long", "message2Id", "=", "message2", ".", "mId", ";", "String", "selection", "=", "EmailContent", ".", "MessageColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", ";", "String", "[", "]", "selArgs", "=", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "account1Id", ")", ",", "String", ".", "valueOf", "(", "box1Id", ")", "}", ";", "int", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "numMessages", ")", ";", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "DELETED_CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "0", ",", "numMessages", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "SYNCED_CONTENT_URI", ",", "message1Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "1", ",", "numMessages", ")", ";", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "DELETED_CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "1", ",", "numMessages", ")", ";", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "message2Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "0", ",", "numMessages", ")", ";", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "DELETED_CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "1", ",", "numMessages", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testMessageUpdate", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "Message", "message1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "long", "message1Id", "=", "message1", ".", "mId", ";", "Message", "message2", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:2>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "long", "message2Id", "=", "message2", ".", "mId", ";", "ContentResolver", "cr", "=", "mMockContext", ".", "getContentResolver", "(", ")", ";", "String", "selection", "=", "EmailContent", ".", "MessageColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", ";", "String", "[", "]", "selArgs", "=", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "account1Id", ")", ",", "String", ".", "valueOf", "(", "box1Id", ")", "}", ";", "int", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "numMessages", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "message1Id", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "MessageColumns", ".", "FROM_LIST", ",", "\"", "<STR_LIT>", "\"", ")", ";", "cr", ".", "update", "(", "uri", ",", "cv", ",", "null", ",", "null", ")", ";", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "UPDATED_CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "0", ",", "numMessages", ")", ";", "Message", "restoredMessage", "=", "Message", ".", "restoreMessageWithId", "(", "mMockContext", ",", "message1Id", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "restoredMessage", ".", "mFrom", ")", ";", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "SYNCED_CONTENT_URI", ",", "message2Id", ")", ";", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "MessageColumns", ".", "FROM_LIST", ",", "\"", "<STR_LIT>", "\"", ")", ";", "cr", ".", "update", "(", "uri", ",", "cv", ",", "null", ",", "null", ")", ";", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "UPDATED_CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "1", ",", "numMessages", ")", ";", "restoredMessage", "=", "Message", ".", "restoreMessageWithId", "(", "mMockContext", ",", "message2Id", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "restoredMessage", ".", "mFrom", ")", ";", "Cursor", "c", "=", "cr", ".", "query", "(", "Message", ".", "UPDATED_CONTENT_URI", ",", "Message", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "assertTrue", "(", "c", ".", "moveToFirst", "(", ")", ")", ";", "Message", "originalMessage", "=", "EmailContent", ".", "getContent", "(", "c", ",", "Message", ".", "class", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "originalMessage", ".", "mFrom", ")", ";", "assertFalse", "(", "c", ".", "moveToNext", "(", ")", ")", ";", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "cr", ".", "delete", "(", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "SYNCED_CONTENT_URI", ",", "message2Id", ")", ",", "null", ",", "null", ")", ";", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "UPDATED_CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "0", ",", "numMessages", ")", ";", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "DELETED_CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "1", ",", "numMessages", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCascadeDeleteAccount", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:2>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "int", "numAccounts", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Account", ".", "CONTENT_URI", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "1", ",", "numAccounts", ")", ";", "int", "numBoxes", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Mailbox", ".", "CONTENT_URI", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "1", ",", "numBoxes", ")", ";", "int", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "CONTENT_URI", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "numMessages", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "account1Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "numAccounts", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Account", ".", "CONTENT_URI", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "0", ",", "numAccounts", ")", ";", "numBoxes", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Mailbox", ".", "CONTENT_URI", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "0", ",", "numBoxes", ")", ";", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "CONTENT_URI", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "0", ",", "numMessages", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCascadeDeleteMailbox", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:2>", "\"", ",", "account1Id", ",", "box1Id", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "String", "selection", "=", "EmailContent", ".", "MessageColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", ";", "String", "[", "]", "selArgs", "=", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "account1Id", ")", ",", "String", ".", "valueOf", "(", "box1Id", ")", "}", ";", "int", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "numMessages", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "CONTENT_URI", ",", "box1Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "numMessages", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Message", ".", "CONTENT_URI", ",", "selection", ",", "selArgs", ")", ";", "assertEquals", "(", "0", ",", "numMessages", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCascadeMessageDelete", "(", ")", "{", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Mailbox", "box1", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "true", ",", "mMockContext", ")", ";", "long", "box1Id", "=", "box1", ".", "mId", ";", "Message", "message1", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account1Id", ",", "box1Id", ",", "true", ",", "false", ",", "mMockContext", ")", ";", "ArrayList", "<", "Attachment", ">", "atts", "=", "new", "ArrayList", "<", "Attachment", ">", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:2>", ";", "i", "+", "+", ")", "{", "atts", ".", "add", "(", "ProviderTestUtils", ".", "setupAttachment", "(", "-", "1", ",", "expectedAttachmentNames", "[", "i", "]", ",", "expectedAttachmentSizes", "[", "i", "]", ",", "false", ",", "mMockContext", ")", ")", ";", "}", "message1", ".", "mAttachments", "=", "atts", ";", "message1", ".", "save", "(", "mMockContext", ")", ";", "long", "message1Id", "=", "message1", ".", "mId", ";", "Message", "message2", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT:2>", "\"", ",", "account1Id", ",", "box1Id", ",", "true", ",", "false", ",", "mMockContext", ")", ";", "atts", "=", "new", "ArrayList", "<", "Attachment", ">", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:2>", ";", "i", "+", "+", ")", "{", "atts", ".", "add", "(", "ProviderTestUtils", ".", "setupAttachment", "(", "-", "1", ",", "expectedAttachmentNames", "[", "i", "]", ",", "expectedAttachmentSizes", "[", "i", "]", ",", "false", ",", "mMockContext", ")", ")", ";", "}", "message2", ".", "mAttachments", "=", "atts", ";", "message2", ".", "save", "(", "mMockContext", ")", ";", "long", "message2Id", "=", "message2", ".", "mId", ";", "String", "bodySelection", "=", "BodyColumns", ".", "MESSAGE_KEY", "+", "\"", "<STR_LIT>", "\"", ";", "String", "attachmentSelection", "=", "AttachmentColumns", ".", "MESSAGE_KEY", "+", "\"", "<STR_LIT>", "\"", ";", "String", "[", "]", "selArgs", "=", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "message1Id", ")", ",", "String", ".", "valueOf", "(", "message2Id", ")", "}", ";", "int", "numBodies", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Body", ".", "CONTENT_URI", ",", "bodySelection", ",", "selArgs", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "numBodies", ")", ";", "int", "numAttachments", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Attachment", ".", "CONTENT_URI", ",", "attachmentSelection", ",", "selArgs", ")", ";", "assertEquals", "(", "<NUM_LIT:4>", ",", "numAttachments", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "message1Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "numBodies", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Body", ".", "CONTENT_URI", ",", "bodySelection", ",", "selArgs", ")", ";", "assertEquals", "(", "1", ",", "numBodies", ")", ";", "numAttachments", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Attachment", ".", "CONTENT_URI", ",", "attachmentSelection", ",", "selArgs", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "numAttachments", ")", ";", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "message2Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "numBodies", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Body", ".", "CONTENT_URI", ",", "bodySelection", ",", "selArgs", ")", ";", "assertEquals", "(", "0", ",", "numBodies", ")", ";", "numAttachments", "=", "EmailContent", ".", "count", "(", "mMockContext", ",", "Attachment", ".", "CONTENT_URI", ",", "attachmentSelection", ",", "selArgs", ")", ";", "assertEquals", "(", "0", ",", "numAttachments", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCreateUniqueFile", "(", ")", "throws", "IOException", "{", "if", "(", "!", "Environment", ".", "getExternalStorageState", "(", ")", ".", "equals", "(", "Environment", ".", "MEDIA_MOUNTED", ")", ")", "{", "return", ";", "}", "try", "{", "String", "fileName", "=", "\"", "<STR_LIT>", "\"", ";", "File", "uniqueFile", "=", "Attachment", ".", "createUniqueFile", "(", "fileName", ")", ";", "assertEquals", "(", "fileName", ",", "uniqueFile", ".", "getName", "(", ")", ")", ";", "if", "(", "uniqueFile", ".", "createNewFile", "(", ")", ")", "{", "uniqueFile", "=", "Attachment", ".", "createUniqueFile", "(", "fileName", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "uniqueFile", ".", "getName", "(", ")", ")", ";", "if", "(", "uniqueFile", ".", "createNewFile", "(", ")", ")", "{", "uniqueFile", "=", "Attachment", ".", "createUniqueFile", "(", "fileName", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "uniqueFile", ".", "getName", "(", ")", ")", ";", "}", "}", "fileName", "=", "\"", "<STR_LIT>", "\"", ";", "uniqueFile", "=", "Attachment", ".", "createUniqueFile", "(", "fileName", ")", ";", "assertEquals", "(", "fileName", ",", "uniqueFile", ".", "getName", "(", ")", ")", ";", "if", "(", "uniqueFile", ".", "createNewFile", "(", ")", ")", "{", "uniqueFile", "=", "Attachment", ".", "createUniqueFile", "(", "fileName", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "uniqueFile", ".", "getName", "(", ")", ")", ";", "}", "}", "finally", "{", "File", "directory", "=", "Environment", ".", "getExternalStorageDirectory", "(", ")", ";", "String", "[", "]", "fileNames", "=", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ";", "int", "length", "=", "fileNames", ".", "length", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "length", ";", "i", "+", "+", ")", "{", "File", "file", "=", "new", "File", "(", "directory", ",", "fileNames", "[", "i", "]", ")", ";", "if", "(", "file", ".", "exists", "(", ")", ")", "{", "file", ".", "delete", "(", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "public", "void", "testGetAttachmentByMessageIdUri", "(", ")", "{", "Attachment", "a1", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "1", ",", "\"", "<STR_LIT:1>", "\"", ",", "<NUM_LIT:100>", ",", "true", ",", "mMockContext", ")", ";", "Attachment", "a2", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "1", ",", "\"", "<STR_LIT:2>", "\"", ",", "<NUM_LIT>", ",", "true", ",", "mMockContext", ")", ";", "ProviderTestUtils", ".", "setupAttachment", "(", "<NUM_LIT:2>", ",", "\"", "<STR_LIT:3>", "\"", ",", "<NUM_LIT>", ",", "true", ",", "mMockContext", ")", ";", "ProviderTestUtils", ".", "setupAttachment", "(", "<NUM_LIT:2>", ",", "\"", "<STR_LIT:4>", "\"", ",", "<NUM_LIT>", ",", "true", ",", "mMockContext", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "MESSAGE_ID_URI", ",", "1", ")", ";", "Cursor", "c", "=", "mMockContext", ".", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "Attachment", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "Attachment", ".", "SIZE", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "c", ".", "getCount", "(", ")", ")", ";", "try", "{", "c", ".", "moveToFirst", "(", ")", ";", "Attachment", "a1Get", "=", "EmailContent", ".", "getContent", "(", "c", ",", "Attachment", ".", "class", ")", ";", "ProviderTestUtils", ".", "assertAttachmentEqual", "(", "\"", "<STR_LIT>", "\"", ",", "a1", ",", "a1Get", ")", ";", "c", ".", "moveToNext", "(", ")", ";", "Attachment", "a2Get", "=", "EmailContent", ".", "getContent", "(", "c", ",", "Attachment", ".", "class", ")", ";", "ProviderTestUtils", ".", "assertAttachmentEqual", "(", "\"", "<STR_LIT>", "\"", ",", "a2", ",", "a2Get", ")", ";", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testDeleteAttachmentByMessageIdUri", "(", ")", "{", "ContentResolver", "mockResolver", "=", "mMockContext", ".", "getContentResolver", "(", ")", ";", "ProviderTestUtils", ".", "setupAttachment", "(", "1", ",", "\"", "<STR_LIT:1>", "\"", ",", "<NUM_LIT:100>", ",", "true", ",", "mMockContext", ")", ";", "ProviderTestUtils", ".", "setupAttachment", "(", "1", ",", "\"", "<STR_LIT:2>", "\"", ",", "<NUM_LIT>", ",", "true", ",", "mMockContext", ")", ";", "Attachment", "a3", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "<NUM_LIT:2>", ",", "\"", "<STR_LIT:3>", "\"", ",", "<NUM_LIT>", ",", "true", ",", "mMockContext", ")", ";", "Attachment", "a4", "=", "ProviderTestUtils", ".", "setupAttachment", "(", "<NUM_LIT:2>", ",", "\"", "<STR_LIT:4>", "\"", ",", "<NUM_LIT>", ",", "true", ",", "mMockContext", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "MESSAGE_ID_URI", ",", "1", ")", ";", "mockResolver", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "Cursor", "c", "=", "mockResolver", ".", "query", "(", "Attachment", ".", "CONTENT_URI", ",", "Attachment", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "Attachment", ".", "SIZE", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "c", ".", "getCount", "(", ")", ")", ";", "try", "{", "c", ".", "moveToFirst", "(", ")", ";", "Attachment", "a3Get", "=", "EmailContent", ".", "getContent", "(", "c", ",", "Attachment", ".", "class", ")", ";", "ProviderTestUtils", ".", "assertAttachmentEqual", "(", "\"", "<STR_LIT>", "\"", ",", "a3", ",", "a3Get", ")", ";", "c", ".", "moveToNext", "(", ")", ";", "Attachment", "a4Get", "=", "EmailContent", ".", "getContent", "(", "c", ",", "Attachment", ".", "class", ")", ";", "ProviderTestUtils", ".", "assertAttachmentEqual", "(", "\"", "<STR_LIT>", "\"", ",", "a4", ",", "a4Get", ")", ";", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testSetGetDefaultAccount", "(", ")", "{", "long", "defaultAccountId", "=", "Account", ".", "getDefaultAccountId", "(", "mMockContext", ")", ";", "assertEquals", "(", "-", "1", ",", "defaultAccountId", ")", ";", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account1Id", "=", "account1", ".", "mId", ";", "Account", "account2", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account2Id", "=", "account2", ".", "mId", ";", "Account", "account3", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "long", "account3Id", "=", "account3", ".", "mId", ";", "defaultAccountId", "=", "Account", ".", "getDefaultAccountId", "(", "mMockContext", ")", ";", "assertTrue", "(", "defaultAccountId", "=", "=", "account1Id", "|", "|", "defaultAccountId", "=", "=", "account2Id", "|", "|", "defaultAccountId", "=", "=", "account3Id", ")", ";", "updateIsDefault", "(", "account1", ",", "true", ")", ";", "defaultAccountId", "=", "Account", ".", "getDefaultAccountId", "(", "mMockContext", ")", ";", "assertEquals", "(", "account1Id", ",", "defaultAccountId", ")", ";", "updateIsDefault", "(", "account2", ",", "true", ")", ";", "defaultAccountId", "=", "Account", ".", "getDefaultAccountId", "(", "mMockContext", ")", ";", "assertEquals", "(", "account2Id", ",", "defaultAccountId", ")", ";", "updateIsDefault", "(", "account3", ",", "true", ")", ";", "defaultAccountId", "=", "Account", ".", "getDefaultAccountId", "(", "mMockContext", ")", ";", "assertEquals", "(", "account3Id", ",", "defaultAccountId", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "account1Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "defaultAccountId", "=", "Account", ".", "getDefaultAccountId", "(", "mMockContext", ")", ";", "assertEquals", "(", "account3Id", ",", "defaultAccountId", ")", ";", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "account3Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "defaultAccountId", "=", "Account", ".", "getDefaultAccountId", "(", "mMockContext", ")", ";", "assertEquals", "(", "account2Id", ",", "defaultAccountId", ")", ";", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "account2Id", ")", ";", "mMockContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "defaultAccountId", "=", "Account", ".", "getDefaultAccountId", "(", "mMockContext", ")", ";", "assertEquals", "(", "-", "1", ",", "defaultAccountId", ")", ";", "}", "</s>"]
["<s>", "private", "void", "updateIsDefault", "(", "Account", "account", ",", "boolean", "newState", ")", "{", "account", ".", "setDefaultAccount", "(", "newState", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "AccountColumns", ".", "IS_DEFAULT", ",", "account", ".", "mIsDefault", ")", ";", "account", ".", "update", "(", "mMockContext", ",", "cv", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Message", "setupUnreadMessage", "(", "String", "name", ",", "long", "accountId", ",", "long", "mailboxId", ",", "boolean", "addBody", ",", "boolean", "saveIt", ",", "Context", "context", ")", "{", "Message", "msg", "=", "ProviderTestUtils", ".", "setupMessage", "(", "name", ",", "accountId", ",", "mailboxId", ",", "addBody", ",", "false", ",", "context", ")", ";", "msg", ".", "mFlagRead", "=", "false", ";", "if", "(", "saveIt", ")", "{", "msg", ".", "save", "(", "context", ")", ";", "}", "return", "msg", ";", "}", "</s>"]
["<s>", "public", "void", "testUnreadCountTriggers", "(", ")", "{", "Account", "account", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "Mailbox", "boxA", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:A>", "\"", ",", "account", ".", "mId", ",", "true", ",", "mMockContext", ")", ";", "Mailbox", "boxB", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:B>", "\"", ",", "account", ".", "mId", ",", "true", ",", "mMockContext", ")", ";", "Mailbox", "boxC", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:C>", "\"", ",", "account", ".", "mId", ",", "true", ",", "mMockContext", ")", ";", "assertEquals", "(", "0", ",", "getUnreadCount", "(", "boxA", ".", "mId", ")", ")", ";", "assertEquals", "(", "0", ",", "getUnreadCount", "(", "boxB", ".", "mId", ")", ")", ";", "assertEquals", "(", "0", ",", "getUnreadCount", "(", "boxC", ".", "mId", ")", ")", ";", "Message", "message1", "=", "setupUnreadMessage", "(", "\"", "<STR_LIT:1>", "\"", ",", "account", ".", "mId", ",", "boxA", ".", "mId", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "Message", "message2", "=", "setupUnreadMessage", "(", "\"", "<STR_LIT:2>", "\"", ",", "account", ".", "mId", ",", "boxA", ".", "mId", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "Message", "message3", "=", "setupUnreadMessage", "(", "\"", "<STR_LIT:3>", "\"", ",", "account", ".", "mId", ",", "boxA", ".", "mId", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "setupUnreadMessage", "(", "\"", "<STR_LIT:4>", "\"", ",", "account", ".", "mId", ",", "boxC", ".", "mId", ",", "false", ",", "true", ",", "mMockContext", ")", ";", "assertEquals", "(", "<NUM_LIT:3>", ",", "getUnreadCount", "(", "boxA", ".", "mId", ")", ")", ";", "assertEquals", "(", "0", ",", "getUnreadCount", "(", "boxB", ".", "mId", ")", ")", ";", "assertEquals", "(", "1", ",", "getUnreadCount", "(", "boxC", ".", "mId", ")", ")", ";", "ContentResolver", "cr", "=", "mMockContext", ".", "getContentResolver", "(", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "message1", ".", "mId", ")", ";", "cr", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "getUnreadCount", "(", "boxA", ".", "mId", ")", ")", ";", "assertEquals", "(", "0", ",", "getUnreadCount", "(", "boxB", ".", "mId", ")", ")", ";", "assertEquals", "(", "1", ",", "getUnreadCount", "(", "boxC", ".", "mId", ")", ")", ";", "message2", ".", "mMailboxKey", "=", "boxB", ".", "mId", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "MessageColumns", ".", "MAILBOX_KEY", ",", "boxB", ".", "mId", ")", ";", "cr", ".", "update", "(", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "message2", ".", "mId", ")", ",", "cv", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "1", ",", "getUnreadCount", "(", "boxA", ".", "mId", ")", ")", ";", "assertEquals", "(", "1", ",", "getUnreadCount", "(", "boxB", ".", "mId", ")", ")", ";", "assertEquals", "(", "1", ",", "getUnreadCount", "(", "boxC", ".", "mId", ")", ")", ";", "cv", ".", "clear", "(", ")", ";", "cv", ".", "put", "(", "MessageColumns", ".", "FLAG_READ", ",", "1", ")", ";", "cr", ".", "update", "(", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "message3", ".", "mId", ")", ",", "cv", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "0", ",", "getUnreadCount", "(", "boxA", ".", "mId", ")", ")", ";", "assertEquals", "(", "1", ",", "getUnreadCount", "(", "boxB", ".", "mId", ")", ")", ";", "assertEquals", "(", "1", ",", "getUnreadCount", "(", "boxC", ".", "mId", ")", ")", ";", "message3", ".", "mMailboxKey", "=", "boxC", ".", "mId", ";", "cv", ".", "clear", "(", ")", ";", "cv", ".", "put", "(", "MessageColumns", ".", "MAILBOX_KEY", ",", "boxC", ".", "mId", ")", ";", "cr", ".", "update", "(", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "message3", ".", "mId", ")", ",", "cv", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "0", ",", "getUnreadCount", "(", "boxA", ".", "mId", ")", ")", ";", "assertEquals", "(", "1", ",", "getUnreadCount", "(", "boxB", ".", "mId", ")", ")", ";", "assertEquals", "(", "1", ",", "getUnreadCount", "(", "boxC", ".", "mId", ")", ")", ";", "cv", ".", "clear", "(", ")", ";", "cv", ".", "put", "(", "MessageColumns", ".", "FLAG_READ", ",", "0", ")", ";", "cr", ".", "update", "(", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "message3", ".", "mId", ")", ",", "cv", ",", "null", ",", "null", ")", ";", "assertEquals", "(", "0", ",", "getUnreadCount", "(", "boxA", ".", "mId", ")", ")", ";", "assertEquals", "(", "1", ",", "getUnreadCount", "(", "boxB", ".", "mId", ")", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "getUnreadCount", "(", "boxC", ".", "mId", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCreateIndex", "(", ")", "{", "String", "oldStr", "=", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "TIMESTAMP", "+", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "TIMESTAMP", "+", "\"", "<STR_LIT>", "\"", ";", "String", "newStr", "=", "EmailProvider", ".", "createIndex", "(", "Message", ".", "TABLE_NAME", ",", "MessageColumns", ".", "TIMESTAMP", ")", ";", "assertEquals", "(", "newStr", ",", "oldStr", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testIdAddToField", "(", ")", "{", "ContentResolver", "cr", "=", "mMockContext", ".", "getContentResolver", "(", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "Account", "account", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "int", "startCount", "=", "account", ".", "mNewMessageCount", ";", "cv", ".", "put", "(", "EmailContent", ".", "FIELD_COLUMN_NAME", ",", "AccountColumns", ".", "NEW_MESSAGE_COUNT", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "ADD_COLUMN_NAME", ",", "<NUM_LIT>", ")", ";", "cr", ".", "update", "(", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "ADD_TO_FIELD_URI", ",", "account", ".", "mId", ")", ",", "cv", ",", "null", ",", "null", ")", ";", "Account", "restoredAccount", "=", "Account", ".", "restoreAccountWithId", "(", "mMockContext", ",", "account", ".", "mId", ")", ";", "assertEquals", "(", "<NUM_LIT>", "+", "startCount", ",", "restoredAccount", ".", "mNewMessageCount", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "ADD_COLUMN_NAME", ",", "-", "<NUM_LIT:11>", ")", ";", "cr", ".", "update", "(", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "ADD_TO_FIELD_URI", ",", "account", ".", "mId", ")", ",", "cv", ",", "null", ",", "null", ")", ";", "restoredAccount", "=", "Account", ".", "restoreAccountWithId", "(", "mMockContext", ",", "account", ".", "mId", ")", ";", "assertEquals", "(", "<NUM_LIT>", "-", "<NUM_LIT:11>", "+", "startCount", ",", "restoredAccount", ".", "mNewMessageCount", ")", ";", "Mailbox", "boxA", "=", "ProviderTestUtils", ".", "setupMailbox", "(", "\"", "<STR_LIT:A>", "\"", ",", "account", ".", "mId", ",", "true", ",", "mMockContext", ")", ";", "assertEquals", "(", "0", ",", "boxA", ".", "mUnreadCount", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "FIELD_COLUMN_NAME", ",", "MailboxColumns", ".", "UNREAD_COUNT", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "ADD_COLUMN_NAME", ",", "<NUM_LIT:11>", ")", ";", "cr", ".", "update", "(", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "ADD_TO_FIELD_URI", ",", "boxA", ".", "mId", ")", ",", "cv", ",", "null", ",", "null", ")", ";", "Mailbox", "restoredBoxA", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "mMockContext", ",", "boxA", ".", "mId", ")", ";", "assertEquals", "(", "<NUM_LIT:11>", ",", "restoredBoxA", ".", "mUnreadCount", ")", ";", "}", "</s>"]
["<s>", "private", "ProviderTestUtils", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "Account", "setupAccount", "(", "String", "name", ",", "boolean", "saveIt", ",", "Context", "context", ")", "{", "Account", "account", "=", "new", "Account", "(", ")", ";", "account", ".", "mDisplayName", "=", "name", ";", "account", ".", "mEmailAddress", "=", "name", "+", "\"", "<STR_LIT>", "\"", ";", "account", ".", "mSyncKey", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "account", ".", "mSyncLookback", "=", "1", ";", "account", ".", "mSyncInterval", "=", "EmailContent", ".", "Account", ".", "CHECK_INTERVAL_NEVER", ";", "account", ".", "mHostAuthKeyRecv", "=", "0", ";", "account", ".", "mHostAuthKeySend", "=", "0", ";", "account", ".", "mFlags", "=", "<NUM_LIT:4>", ";", "account", ".", "mIsDefault", "=", "true", ";", "account", ".", "mCompatibilityUuid", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "account", ".", "mSenderName", "=", "name", ";", "account", ".", "mRingtoneUri", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "account", ".", "mProtocolVersion", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "account", ".", "mNewMessageCount", "=", "<NUM_LIT:5>", "+", "name", ".", "length", "(", ")", ";", "if", "(", "saveIt", ")", "{", "account", ".", "save", "(", "context", ")", ";", "}", "return", "account", ";", "}", "</s>"]
["<s>", "public", "static", "HostAuth", "setupHostAuth", "(", "String", "name", ",", "long", "accountId", ",", "boolean", "saveIt", ",", "Context", "context", ")", "{", "HostAuth", "hostAuth", "=", "new", "HostAuth", "(", ")", ";", "hostAuth", ".", "mProtocol", "=", "\"", "<STR_LIT:->", "\"", "+", "name", ";", "hostAuth", ".", "mAddress", "=", "\"", "<STR_LIT:->", "\"", "+", "name", ";", "hostAuth", ".", "mPort", "=", "<NUM_LIT:100>", ";", "hostAuth", ".", "mFlags", "=", "<NUM_LIT>", ";", "hostAuth", ".", "mLogin", "=", "\"", "<STR_LIT:->", "\"", "+", "name", ";", "hostAuth", ".", "mPassword", "=", "\"", "<STR_LIT:->", "\"", "+", "name", ";", "hostAuth", ".", "mDomain", "=", "\"", "<STR_LIT:->", "\"", "+", "name", ";", "hostAuth", ".", "mAccountKey", "=", "accountId", ";", "if", "(", "saveIt", ")", "{", "hostAuth", ".", "save", "(", "context", ")", ";", "}", "return", "hostAuth", ";", "}", "</s>"]
["<s>", "public", "static", "Mailbox", "setupMailbox", "(", "String", "name", ",", "long", "accountId", ",", "boolean", "saveIt", ",", "Context", "context", ")", "{", "Mailbox", "box", "=", "new", "Mailbox", "(", ")", ";", "box", ".", "mDisplayName", "=", "name", ";", "box", ".", "mServerId", "=", "\"", "<STR_LIT:->", "\"", "+", "name", ";", "box", ".", "mParentServerId", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "box", ".", "mAccountKey", "=", "accountId", ";", "box", ".", "mType", "=", "Mailbox", ".", "TYPE_MAIL", ";", "box", ".", "mDelimiter", "=", "1", ";", "box", ".", "mSyncKey", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "box", ".", "mSyncLookback", "=", "<NUM_LIT:2>", ";", "box", ".", "mSyncInterval", "=", "EmailContent", ".", "Account", ".", "CHECK_INTERVAL_NEVER", ";", "box", ".", "mSyncTime", "=", "<NUM_LIT:3>", ";", "box", ".", "mUnreadCount", "=", "0", ";", "box", ".", "mFlagVisible", "=", "true", ";", "box", ".", "mFlags", "=", "<NUM_LIT:5>", ";", "box", ".", "mVisibleLimit", "=", "<NUM_LIT:6>", ";", "if", "(", "saveIt", ")", "{", "box", ".", "save", "(", "context", ")", ";", "}", "return", "box", ";", "}", "</s>"]
["<s>", "public", "static", "Message", "setupMessage", "(", "String", "name", ",", "long", "accountId", ",", "long", "mailboxId", ",", "boolean", "addBody", ",", "boolean", "saveIt", ",", "Context", "context", ")", "{", "Message", "message", "=", "new", "Message", "(", ")", ";", "message", ".", "mDisplayName", "=", "name", ";", "message", ".", "mTimeStamp", "=", "<NUM_LIT:100>", "+", "name", ".", "length", "(", ")", ";", "message", ".", "mSubject", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "message", ".", "mFlagRead", "=", "true", ";", "message", ".", "mFlagLoaded", "=", "Message", ".", "FLAG_LOADED_UNLOADED", ";", "message", ".", "mFlagFavorite", "=", "true", ";", "message", ".", "mFlagAttachment", "=", "true", ";", "message", ".", "mFlags", "=", "0", ";", "message", ".", "mServerId", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "message", ".", "mServerTimeStamp", "=", "<NUM_LIT>", "+", "name", ".", "length", "(", ")", ";", "message", ".", "mClientId", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "message", ".", "mMessageId", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "message", ".", "mMailboxKey", "=", "mailboxId", ";", "message", ".", "mAccountKey", "=", "accountId", ";", "message", ".", "mFrom", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "message", ".", "mTo", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "message", ".", "mCc", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "message", ".", "mBcc", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "message", ".", "mReplyTo", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "if", "(", "addBody", ")", "{", "message", ".", "mText", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "message", ".", "mHtml", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "message", ".", "mTextReply", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "message", ".", "mHtmlReply", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "message", ".", "mSourceKey", "=", "<NUM_LIT>", "+", "name", ".", "length", "(", ")", ";", "message", ".", "mIntroText", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "}", "if", "(", "saveIt", ")", "{", "message", ".", "save", "(", "context", ")", ";", "}", "return", "message", ";", "}", "</s>"]
["<s>", "public", "static", "Attachment", "setupAttachment", "(", "long", "messageId", ",", "String", "fileName", ",", "long", "length", ",", "boolean", "saveIt", ",", "Context", "context", ")", "{", "Attachment", "att", "=", "new", "Attachment", "(", ")", ";", "att", ".", "mSize", "=", "length", ";", "att", ".", "mFileName", "=", "fileName", ";", "att", ".", "mContentId", "=", "\"", "<STR_LIT>", "\"", "+", "fileName", ";", "att", ".", "mContentUri", "=", "\"", "<STR_LIT>", "\"", "+", "fileName", ";", "att", ".", "mMessageKey", "=", "messageId", ";", "att", ".", "mMimeType", "=", "\"", "<STR_LIT>", "\"", "+", "fileName", ";", "att", ".", "mLocation", "=", "\"", "<STR_LIT>", "\"", "+", "fileName", ";", "att", ".", "mEncoding", "=", "\"", "<STR_LIT>", "\"", "+", "fileName", ";", "if", "(", "saveIt", ")", "{", "att", ".", "save", "(", "context", ")", ";", "}", "return", "att", ";", "}", "</s>"]
["<s>", "private", "static", "void", "assertEmailContentEqual", "(", "String", "caller", ",", "EmailContent", "expect", ",", "EmailContent", "actual", ")", "{", "if", "(", "expect", "=", "=", "actual", ")", "{", "return", ";", "}", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mId", ",", "actual", ".", "mId", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mBaseUri", ",", "actual", ".", "mBaseUri", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "assertAccountEqual", "(", "String", "caller", ",", "Account", "expect", ",", "Account", "actual", ")", "{", "if", "(", "expect", "=", "=", "actual", ")", "{", "return", ";", "}", "assertEmailContentEqual", "(", "caller", ",", "expect", ",", "actual", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mDisplayName", ",", "actual", ".", "mDisplayName", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mEmailAddress", ",", "actual", ".", "mEmailAddress", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mSyncKey", ",", "actual", ".", "mSyncKey", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mSyncLookback", ",", "actual", ".", "mSyncLookback", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mSyncInterval", ",", "actual", ".", "mSyncInterval", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mHostAuthKeyRecv", ",", "actual", ".", "mHostAuthKeyRecv", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mHostAuthKeySend", ",", "actual", ".", "mHostAuthKeySend", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mFlags", ",", "actual", ".", "mFlags", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mIsDefault", ",", "actual", ".", "mIsDefault", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mCompatibilityUuid", ",", "actual", ".", "mCompatibilityUuid", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mSenderName", ",", "actual", ".", "mSenderName", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mRingtoneUri", ",", "actual", ".", "mRingtoneUri", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mProtocolVersion", ",", "actual", ".", "mProtocolVersion", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mNewMessageCount", ",", "actual", ".", "mNewMessageCount", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "assertHostAuthEqual", "(", "String", "caller", ",", "HostAuth", "expect", ",", "HostAuth", "actual", ")", "{", "if", "(", "expect", "=", "=", "actual", ")", "{", "return", ";", "}", "assertEmailContentEqual", "(", "caller", ",", "expect", ",", "actual", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mProtocol", ",", "actual", ".", "mProtocol", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mAddress", ",", "actual", ".", "mAddress", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mPort", ",", "actual", ".", "mPort", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mFlags", ",", "actual", ".", "mFlags", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mLogin", ",", "actual", ".", "mLogin", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mPassword", ",", "actual", ".", "mPassword", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mDomain", ",", "actual", ".", "mDomain", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "assertMailboxEqual", "(", "String", "caller", ",", "Mailbox", "expect", ",", "Mailbox", "actual", ")", "{", "if", "(", "expect", "=", "=", "actual", ")", "{", "return", ";", "}", "assertEmailContentEqual", "(", "caller", ",", "expect", ",", "actual", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mDisplayName", ",", "actual", ".", "mDisplayName", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mServerId", ",", "actual", ".", "mServerId", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mParentServerId", ",", "actual", ".", "mParentServerId", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mAccountKey", ",", "actual", ".", "mAccountKey", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mType", ",", "actual", ".", "mType", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mDelimiter", ",", "actual", ".", "mDelimiter", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mSyncKey", ",", "actual", ".", "mSyncKey", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mSyncLookback", ",", "actual", ".", "mSyncLookback", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mSyncInterval", ",", "actual", ".", "mSyncInterval", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mSyncTime", ",", "actual", ".", "mSyncTime", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mUnreadCount", ",", "actual", ".", "mUnreadCount", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mFlagVisible", ",", "actual", ".", "mFlagVisible", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mFlags", ",", "actual", ".", "mFlags", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mVisibleLimit", ",", "actual", ".", "mVisibleLimit", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "assertMessageEqual", "(", "String", "caller", ",", "Message", "expect", ",", "Message", "actual", ")", "{", "if", "(", "expect", "=", "=", "actual", ")", "{", "return", ";", "}", "assertEmailContentEqual", "(", "caller", ",", "expect", ",", "actual", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mDisplayName", ",", "actual", ".", "mDisplayName", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mTimeStamp", ",", "actual", ".", "mTimeStamp", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mSubject", ",", "actual", ".", "mSubject", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mFlagRead", ",", "actual", ".", "mFlagRead", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mFlagLoaded", ",", "actual", ".", "mFlagLoaded", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mFlagFavorite", ",", "actual", ".", "mFlagFavorite", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mFlagAttachment", ",", "actual", ".", "mFlagAttachment", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mFlags", ",", "actual", ".", "mFlags", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mServerId", ",", "actual", ".", "mServerId", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mServerTimeStamp", ",", "actual", ".", "mServerTimeStamp", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mClientId", ",", "actual", ".", "mClientId", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mMessageId", ",", "actual", ".", "mMessageId", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mMailboxKey", ",", "actual", ".", "mMailboxKey", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mAccountKey", ",", "actual", ".", "mAccountKey", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mFrom", ",", "actual", ".", "mFrom", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mTo", ",", "actual", ".", "mTo", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mCc", ",", "actual", ".", "mCc", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mBcc", ",", "actual", ".", "mBcc", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mReplyTo", ",", "actual", ".", "mReplyTo", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mText", ",", "actual", ".", "mText", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mHtml", ",", "actual", ".", "mHtml", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mTextReply", ",", "actual", ".", "mTextReply", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mHtmlReply", ",", "actual", ".", "mHtmlReply", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mSourceKey", ",", "actual", ".", "mSourceKey", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mIntroText", ",", "actual", ".", "mIntroText", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "assertAttachmentEqual", "(", "String", "caller", ",", "Attachment", "expect", ",", "Attachment", "actual", ")", "{", "if", "(", "expect", "=", "=", "actual", ")", "{", "return", ";", "}", "assertEmailContentEqual", "(", "caller", ",", "expect", ",", "actual", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mSize", ",", "actual", ".", "mSize", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mFileName", ",", "actual", ".", "mFileName", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mContentId", ",", "actual", ".", "mContentId", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mContentUri", ",", "actual", ".", "mContentUri", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mMessageKey", ",", "actual", ".", "mMessageKey", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mMimeType", ",", "actual", ".", "mMimeType", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mLocation", ",", "actual", ".", "mLocation", ")", ";", "assertEquals", "(", "caller", "+", "\"", "<STR_LIT>", "\"", ",", "expect", ".", "mEncoding", ",", "actual", ".", "mEncoding", ")", ";", "}", "</s>"]
["<s>", "public", "RootInputStream", "(", "InputStream", "is", ")", "{", "this", ".", "is", "=", "is", ";", "}", "</s>"]
["<s>", "public", "int", "getLineNumber", "(", ")", "{", "return", "lineNumber", ";", "}", "</s>"]
["<s>", "public", "void", "truncate", "(", ")", "{", "this", ".", "truncated", "=", "true", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "if", "(", "truncated", ")", "{", "return", "-", "1", ";", "}", "int", "b", "=", "is", ".", "read", "(", ")", ";", "if", "(", "prev", "=", "=", "<STR_LIT>", "&", "&", "b", "=", "=", "<STR_LIT:\\n>", ")", "{", "lineNumber", "+", "+", ";", "}", "prev", "=", "b", ";", "return", "b", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "[", "]", "b", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "if", "(", "truncated", ")", "{", "return", "-", "1", ";", "}", "int", "n", "=", "is", ".", "read", "(", "b", ",", "off", ",", "len", ")", ";", "for", "(", "int", "i", "=", "off", ";", "i", "<", "off", "+", "n", ";", "i", "+", "+", ")", "{", "if", "(", "prev", "=", "=", "<STR_LIT>", "&", "&", "b", "[", "i", "]", "=", "=", "<STR_LIT:\\n>", ")", "{", "lineNumber", "+", "+", ";", "}", "prev", "=", "b", "[", "i", "]", ";", "}", "return", "n", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "[", "]", "b", ")", "throws", "IOException", "{", "return", "read", "(", "b", ",", "0", ",", "b", ".", "length", ")", ";", "}", "</s>"]
["<s>", "public", "BodyDescriptor", "(", ")", "{", "this", "(", "null", ")", ";", "}", "</s>"]
["<s>", "public", "BodyDescriptor", "(", "BodyDescriptor", "parent", ")", "{", "if", "(", "parent", "!", "=", "null", "&", "&", "parent", ".", "isMimeType", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "mimeType", "=", "\"", "<STR_LIT>", "\"", ";", "}", "else", "{", "mimeType", "=", "\"", "<STR_LIT>", "\"", ";", "}", "}", "</s>"]
["<s>", "public", "void", "addField", "(", "String", "name", ",", "String", "value", ")", "{", "name", "=", "name", ".", "trim", "(", ")", ".", "toLowerCase", "(", ")", ";", "if", "(", "name", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", "&", "&", "!", "contentTransferEncSet", ")", "{", "contentTransferEncSet", "=", "true", ";", "value", "=", "value", ".", "trim", "(", ")", ".", "toLowerCase", "(", ")", ";", "if", "(", "value", ".", "length", "(", ")", ">", "0", ")", "{", "transferEncoding", "=", "value", ";", "}", "}", "else", "if", "(", "name", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", "&", "&", "!", "contentTypeSet", ")", "{", "contentTypeSet", "=", "true", ";", "value", "=", "value", ".", "trim", "(", ")", ";", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "value", ".", "length", "(", ")", ";", "i", "+", "+", ")", "{", "char", "c", "=", "value", ".", "charAt", "(", "i", ")", ";", "if", "(", "c", "=", "=", "<STR_LIT>", "|", "|", "c", "=", "=", "<STR_LIT:\\n>", ")", "{", "continue", ";", "}", "sb", ".", "append", "(", "c", ")", ";", "}", "Map", "params", "=", "getHeaderParams", "(", "sb", ".", "toString", "(", ")", ")", ";", "String", "main", "=", "(", "String", ")", "params", ".", "get", "(", "\"", "\"", ")", ";", "if", "(", "main", "!", "=", "null", ")", "{", "main", "=", "main", ".", "toLowerCase", "(", ")", ".", "trim", "(", ")", ";", "int", "index", "=", "main", ".", "indexOf", "(", "<CHAR_LIT:/>", ")", ";", "boolean", "valid", "=", "false", ";", "if", "(", "index", "!", "=", "-", "1", ")", "{", "String", "type", "=", "main", ".", "substring", "(", "0", ",", "index", ")", ".", "trim", "(", ")", ";", "String", "subtype", "=", "main", ".", "substring", "(", "index", "+", "1", ")", ".", "trim", "(", ")", ";", "if", "(", "type", ".", "length", "(", ")", ">", "0", "&", "&", "subtype", ".", "length", "(", ")", ">", "0", ")", "{", "main", "=", "type", "+", "\"", "<STR_LIT:/>", "\"", "+", "subtype", ";", "valid", "=", "true", ";", "}", "}", "if", "(", "!", "valid", ")", "{", "main", "=", "null", ";", "}", "}", "String", "b", "=", "(", "String", ")", "params", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "main", "!", "=", "null", "&", "&", "(", "(", "main", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", "&", "&", "b", "!", "=", "null", ")", "|", "|", "!", "main", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", ")", "{", "mimeType", "=", "main", ";", "}", "if", "(", "isMultipart", "(", ")", ")", "{", "boundary", "=", "b", ";", "}", "String", "c", "=", "(", "String", ")", "params", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "c", "!", "=", "null", ")", "{", "c", "=", "c", ".", "trim", "(", ")", ";", "if", "(", "c", ".", "length", "(", ")", ">", "0", ")", "{", "charset", "=", "c", ".", "toLowerCase", "(", ")", ";", "}", "}", "parameters", ".", "putAll", "(", "params", ")", ";", "parameters", ".", "remove", "(", "\"", "\"", ")", ";", "parameters", ".", "remove", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parameters", ".", "remove", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "private", "Map", "getHeaderParams", "(", "String", "headerValue", ")", "{", "Map", "result", "=", "new", "HashMap", "(", ")", ";", "String", "main", ";", "String", "rest", ";", "if", "(", "headerValue", ".", "indexOf", "(", "\"", "<STR_LIT:;>", "\"", ")", "=", "=", "-", "1", ")", "{", "main", "=", "headerValue", ";", "rest", "=", "null", ";", "}", "else", "{", "main", "=", "headerValue", ".", "substring", "(", "0", ",", "headerValue", ".", "indexOf", "(", "\"", "<STR_LIT:;>", "\"", ")", ")", ";", "rest", "=", "headerValue", ".", "substring", "(", "main", ".", "length", "(", ")", "+", "1", ")", ";", "}", "result", ".", "put", "(", "\"", "\"", ",", "main", ")", ";", "if", "(", "rest", "!", "=", "null", ")", "{", "char", "[", "]", "chars", "=", "rest", ".", "toCharArray", "(", ")", ";", "StringBuffer", "paramName", "=", "new", "StringBuffer", "(", ")", ";", "StringBuffer", "paramValue", "=", "new", "StringBuffer", "(", ")", ";", "final", "byte", "READY_FOR_NAME", "=", "0", ";", "final", "byte", "IN_NAME", "=", "1", ";", "final", "byte", "READY_FOR_VALUE", "=", "<NUM_LIT:2>", ";", "final", "byte", "IN_VALUE", "=", "<NUM_LIT:3>", ";", "final", "byte", "IN_QUOTED_VALUE", "=", "<NUM_LIT:4>", ";", "final", "byte", "VALUE_DONE", "=", "<NUM_LIT:5>", ";", "final", "byte", "ERROR", "=", "<NUM_LIT>", ";", "byte", "state", "=", "READY_FOR_NAME", ";", "boolean", "escaped", "=", "false", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "chars", ".", "length", ";", "i", "+", "+", ")", "{", "char", "c", "=", "chars", "[", "i", "]", ";", "switch", "(", "state", ")", "{", "case", "ERROR", ":", "if", "(", "c", "=", "=", "<CHAR_LIT:;>", ")", "state", "=", "READY_FOR_NAME", ";", "break", ";", "case", "READY_FOR_NAME", ":", "if", "(", "c", "=", "=", "<CHAR_LIT:=>", ")", "{", "log", ".", "error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "state", "=", "ERROR", ";", "break", ";", "}", "paramName", "=", "new", "StringBuffer", "(", ")", ";", "paramValue", "=", "new", "StringBuffer", "(", ")", ";", "state", "=", "IN_NAME", ";", "case", "IN_NAME", ":", "if", "(", "c", "=", "=", "<CHAR_LIT:=>", ")", "{", "if", "(", "paramName", ".", "length", "(", ")", "=", "=", "0", ")", "state", "=", "ERROR", ";", "else", "state", "=", "READY_FOR_VALUE", ";", "break", ";", "}", "paramName", ".", "append", "(", "c", ")", ";", "break", ";", "case", "READY_FOR_VALUE", ":", "boolean", "fallThrough", "=", "false", ";", "switch", "(", "c", ")", "{", "case", "<CHAR_LIT>", ":", "case", "<STR_LIT:\\t>", ":", "break", ";", "case", "<CHAR_LIT:\">", ":", "state", "=", "IN_QUOTED_VALUE", ";", "break", ";", "default", ":", "state", "=", "IN_VALUE", ";", "fallThrough", "=", "true", ";", "break", ";", "}", "if", "(", "!", "fallThrough", ")", "break", ";", "case", "IN_VALUE", ":", "fallThrough", "=", "false", ";", "switch", "(", "c", ")", "{", "case", "<CHAR_LIT:;>", ":", "case", "<CHAR_LIT>", ":", "case", "<STR_LIT:\\t>", ":", "result", ".", "put", "(", "paramName", ".", "toString", "(", ")", ".", "trim", "(", ")", ".", "toLowerCase", "(", ")", ",", "paramValue", ".", "toString", "(", ")", ".", "trim", "(", ")", ")", ";", "state", "=", "VALUE_DONE", ";", "fallThrough", "=", "true", ";", "break", ";", "default", ":", "paramValue", ".", "append", "(", "c", ")", ";", "break", ";", "}", "if", "(", "!", "fallThrough", ")", "break", ";", "case", "VALUE_DONE", ":", "switch", "(", "c", ")", "{", "case", "<CHAR_LIT:;>", ":", "state", "=", "READY_FOR_NAME", ";", "break", ";", "case", "<CHAR_LIT>", ":", "case", "<STR_LIT:\\t>", ":", "break", ";", "default", ":", "state", "=", "ERROR", ";", "break", ";", "}", "break", ";", "case", "IN_QUOTED_VALUE", ":", "switch", "(", "c", ")", "{", "case", "<CHAR_LIT:\">", ":", "if", "(", "!", "escaped", ")", "{", "result", ".", "put", "(", "paramName", ".", "toString", "(", ")", ".", "trim", "(", ")", ".", "toLowerCase", "(", ")", ",", "paramValue", ".", "toString", "(", ")", ")", ";", "state", "=", "VALUE_DONE", ";", "}", "else", "{", "escaped", "=", "false", ";", "paramValue", ".", "append", "(", "c", ")", ";", "}", "break", ";", "case", "<STR_LIT:\\\\>", ":", "if", "(", "escaped", ")", "{", "paramValue", ".", "append", "(", "<STR_LIT:\\\\>", ")", ";", "}", "escaped", "=", "!", "escaped", ";", "break", ";", "default", ":", "if", "(", "escaped", ")", "{", "paramValue", ".", "append", "(", "<STR_LIT:\\\\>", ")", ";", "}", "escaped", "=", "false", ";", "paramValue", ".", "append", "(", "c", ")", ";", "break", ";", "}", "break", ";", "}", "}", "if", "(", "state", "=", "=", "IN_VALUE", ")", "{", "result", ".", "put", "(", "paramName", ".", "toString", "(", ")", ".", "trim", "(", ")", ".", "toLowerCase", "(", ")", ",", "paramValue", ".", "toString", "(", ")", ".", "trim", "(", ")", ")", ";", "}", "}", "return", "result", ";", "}", "</s>"]
["<s>", "public", "boolean", "isMimeType", "(", "String", "mimeType", ")", "{", "return", "this", ".", "mimeType", ".", "equals", "(", "mimeType", ".", "toLowerCase", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isMessage", "(", ")", "{", "return", "mimeType", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isMultipart", "(", ")", "{", "return", "mimeType", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getMimeType", "(", ")", "{", "return", "mimeType", ";", "}", "</s>"]
["<s>", "public", "String", "getBoundary", "(", ")", "{", "return", "boundary", ";", "}", "</s>"]
["<s>", "public", "String", "getCharset", "(", ")", "{", "return", "charset", ";", "}", "</s>"]
["<s>", "public", "Map", "getParameters", "(", ")", "{", "return", "parameters", ";", "}", "</s>"]
["<s>", "public", "String", "getTransferEncoding", "(", ")", "{", "return", "transferEncoding", ";", "}", "</s>"]
["<s>", "public", "boolean", "isBase64Encoded", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "transferEncoding", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isQuotedPrintableEncoded", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "transferEncoding", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "mimeType", ";", "}", "</s>"]
["<s>", "public", "void", "endMultipart", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "startMultipart", "(", "BodyDescriptor", "bd", ")", "{", "}", "</s>"]
["<s>", "public", "void", "body", "(", "BodyDescriptor", "bd", ",", "InputStream", "is", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "public", "void", "endBodyPart", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "endHeader", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "endMessage", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "epilogue", "(", "InputStream", "is", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "public", "void", "field", "(", "String", "fieldData", ")", "{", "}", "</s>"]
["<s>", "public", "void", "preamble", "(", "InputStream", "is", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "public", "void", "startBodyPart", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "startHeader", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "startMessage", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "raw", "(", "InputStream", "is", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "public", "MimeStreamParser", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "parse", "(", "InputStream", "is", ")", "throws", "IOException", "{", "rootStream", "=", "new", "RootInputStream", "(", "is", ")", ";", "parseMessage", "(", "rootStream", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isRaw", "(", ")", "{", "return", "raw", ";", "}", "</s>"]
["<s>", "public", "void", "setRaw", "(", "boolean", "raw", ")", "{", "this", ".", "raw", "=", "raw", ";", "}", "</s>"]
["<s>", "public", "void", "stop", "(", ")", "{", "rootStream", ".", "truncate", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "parseEntity", "(", "InputStream", "is", ")", "throws", "IOException", "{", "BodyDescriptor", "bd", "=", "parseHeader", "(", "is", ")", ";", "if", "(", "bd", ".", "isMultipart", "(", ")", ")", "{", "bodyDescriptors", ".", "addFirst", "(", "bd", ")", ";", "handler", ".", "startMultipart", "(", "bd", ")", ";", "MimeBoundaryInputStream", "tempIs", "=", "new", "MimeBoundaryInputStream", "(", "is", ",", "bd", ".", "getBoundary", "(", ")", ")", ";", "handler", ".", "preamble", "(", "new", "CloseShieldInputStream", "(", "tempIs", ")", ")", ";", "tempIs", ".", "consume", "(", ")", ";", "while", "(", "tempIs", ".", "hasMoreParts", "(", ")", ")", "{", "tempIs", "=", "new", "MimeBoundaryInputStream", "(", "is", ",", "bd", ".", "getBoundary", "(", ")", ")", ";", "parseBodyPart", "(", "tempIs", ")", ";", "tempIs", ".", "consume", "(", ")", ";", "if", "(", "tempIs", ".", "parentEOF", "(", ")", ")", "{", "if", "(", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "rootStream", ".", "getLineNumber", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "break", ";", "}", "}", "handler", ".", "epilogue", "(", "new", "CloseShieldInputStream", "(", "is", ")", ")", ";", "handler", ".", "endMultipart", "(", ")", ";", "bodyDescriptors", ".", "removeFirst", "(", ")", ";", "}", "else", "if", "(", "bd", ".", "isMessage", "(", ")", ")", "{", "if", "(", "bd", ".", "isBase64Encoded", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "is", "=", "new", "EOLConvertingInputStream", "(", "new", "Base64InputStream", "(", "is", ")", ")", ";", "}", "else", "if", "(", "bd", ".", "isQuotedPrintableEncoded", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "is", "=", "new", "EOLConvertingInputStream", "(", "new", "QuotedPrintableInputStream", "(", "is", ")", ")", ";", "}", "bodyDescriptors", ".", "addFirst", "(", "bd", ")", ";", "parseMessage", "(", "is", ")", ";", "bodyDescriptors", ".", "removeFirst", "(", ")", ";", "}", "else", "{", "handler", ".", "body", "(", "bd", ",", "new", "CloseShieldInputStream", "(", "is", ")", ")", ";", "}", "while", "(", "is", ".", "read", "(", ")", "!", "=", "-", "1", ")", "{", "}", "}", "</s>"]
["<s>", "private", "void", "parseMessage", "(", "InputStream", "is", ")", "throws", "IOException", "{", "if", "(", "raw", ")", "{", "handler", ".", "raw", "(", "new", "CloseShieldInputStream", "(", "is", ")", ")", ";", "}", "else", "{", "handler", ".", "startMessage", "(", ")", ";", "parseEntity", "(", "is", ")", ";", "handler", ".", "endMessage", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "parseBodyPart", "(", "InputStream", "is", ")", "throws", "IOException", "{", "if", "(", "raw", ")", "{", "handler", ".", "raw", "(", "new", "CloseShieldInputStream", "(", "is", ")", ")", ";", "}", "else", "{", "handler", ".", "startBodyPart", "(", ")", ";", "parseEntity", "(", "is", ")", ";", "handler", ".", "endBodyPart", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "BodyDescriptor", "parseHeader", "(", "InputStream", "is", ")", "throws", "IOException", "{", "BodyDescriptor", "bd", "=", "new", "BodyDescriptor", "(", "bodyDescriptors", ".", "isEmpty", "(", ")", "?", "null", ":", "(", "BodyDescriptor", ")", "bodyDescriptors", ".", "getFirst", "(", ")", ")", ";", "handler", ".", "startHeader", "(", ")", ";", "int", "lineNumber", "=", "rootStream", ".", "getLineNumber", "(", ")", ";", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "int", "curr", "=", "0", ";", "int", "prev", "=", "0", ";", "while", "(", "(", "curr", "=", "is", ".", "read", "(", ")", ")", "!", "=", "-", "1", ")", "{", "if", "(", "curr", "=", "=", "<STR_LIT:\\n>", "&", "&", "(", "prev", "=", "=", "<STR_LIT:\\n>", "|", "|", "prev", "=", "=", "0", ")", ")", "{", "sb", ".", "deleteCharAt", "(", "sb", ".", "length", "(", ")", "-", "1", ")", ";", "break", ";", "}", "sb", ".", "append", "(", "(", "char", ")", "curr", ")", ";", "prev", "=", "curr", "=", "=", "<STR_LIT>", "?", "prev", ":", "curr", ";", "}", "if", "(", "curr", "=", "=", "-", "1", "&", "&", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "rootStream", ".", "getLineNumber", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "int", "start", "=", "0", ";", "int", "pos", "=", "0", ";", "int", "startLineNumber", "=", "lineNumber", ";", "while", "(", "pos", "<", "sb", ".", "length", "(", ")", ")", "{", "while", "(", "pos", "<", "sb", ".", "length", "(", ")", "&", "&", "sb", ".", "charAt", "(", "pos", ")", "!", "=", "<STR_LIT>", ")", "{", "pos", "+", "+", ";", "}", "if", "(", "pos", "<", "sb", ".", "length", "(", ")", "-", "1", "&", "&", "sb", ".", "charAt", "(", "pos", "+", "1", ")", "!", "=", "<STR_LIT:\\n>", ")", "{", "pos", "+", "+", ";", "continue", ";", "}", "if", "(", "pos", ">", "=", "sb", ".", "length", "(", ")", "-", "<NUM_LIT:2>", "|", "|", "fieldChars", ".", "get", "(", "sb", ".", "charAt", "(", "pos", "+", "<NUM_LIT:2>", ")", ")", ")", "{", "String", "field", "=", "sb", ".", "substring", "(", "start", ",", "pos", ")", ";", "start", "=", "pos", "+", "<NUM_LIT:2>", ";", "int", "index", "=", "field", ".", "indexOf", "(", "<CHAR_LIT::>", ")", ";", "boolean", "valid", "=", "false", ";", "if", "(", "index", "!", "=", "-", "1", "&", "&", "fieldChars", ".", "get", "(", "field", ".", "charAt", "(", "0", ")", ")", ")", "{", "valid", "=", "true", ";", "String", "fieldName", "=", "field", ".", "substring", "(", "0", ",", "index", ")", ".", "trim", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "fieldName", ".", "length", "(", ")", ";", "i", "+", "+", ")", "{", "if", "(", "!", "fieldChars", ".", "get", "(", "fieldName", ".", "charAt", "(", "i", ")", ")", ")", "{", "valid", "=", "false", ";", "break", ";", "}", "}", "if", "(", "valid", ")", "{", "handler", ".", "field", "(", "field", ")", ";", "bd", ".", "addField", "(", "fieldName", ",", "field", ".", "substring", "(", "index", "+", "1", ")", ")", ";", "}", "}", "if", "(", "!", "valid", "&", "&", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "startLineNumber", "+", "\"", "<STR_LIT>", "\"", "+", "field", ".", "trim", "(", ")", "+", "\"", "'", "\"", ")", ";", "}", "startLineNumber", "=", "lineNumber", ";", "}", "pos", "+", "=", "<NUM_LIT:2>", ";", "lineNumber", "+", "+", ";", "}", "handler", ".", "endHeader", "(", ")", ";", "return", "bd", ";", "}", "</s>"]
["<s>", "public", "void", "setContentHandler", "(", "ContentHandler", "h", ")", "{", "this", ".", "handler", "=", "h", ";", "}", "</s>"]
["<s>", "public", "EOLConvertingInputStream", "(", "InputStream", "in", ")", "{", "this", "(", "in", ",", "CONVERT_BOTH", ")", ";", "}", "</s>"]
["<s>", "public", "EOLConvertingInputStream", "(", "InputStream", "in", ",", "int", "flags", ")", "{", "super", "(", ")", ";", "this", ".", "in", "=", "new", "PushbackInputStream", "(", "in", ",", "<NUM_LIT:2>", ")", ";", "this", ".", "flags", "=", "flags", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "in", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "int", "b", "=", "in", ".", "read", "(", ")", ";", "if", "(", "b", "=", "=", "-", "1", ")", "{", "return", "-", "1", ";", "}", "if", "(", "(", "flags", "&", "CONVERT_CR", ")", "!", "=", "0", "&", "&", "b", "=", "=", "<STR_LIT>", ")", "{", "int", "c", "=", "in", ".", "read", "(", ")", ";", "if", "(", "c", "!", "=", "-", "1", ")", "{", "in", ".", "unread", "(", "c", ")", ";", "}", "if", "(", "c", "!", "=", "<STR_LIT:\\n>", ")", "{", "in", ".", "unread", "(", "<STR_LIT:\\n>", ")", ";", "}", "}", "else", "if", "(", "(", "flags", "&", "CONVERT_LF", ")", "!", "=", "0", "&", "&", "b", "=", "=", "<STR_LIT:\\n>", "&", "&", "previous", "!", "=", "<STR_LIT>", ")", "{", "b", "=", "<STR_LIT>", ";", "in", ".", "unread", "(", "<STR_LIT:\\n>", ")", ";", "}", "previous", "=", "b", ";", "return", "b", ";", "}", "</s>"]
["<s>", "public", "abstract", "void", "headers", "(", "Header", "header", ")", ";", "</s>"]
["<s>", "public", "abstract", "void", "bodyDecoded", "(", "BodyDescriptor", "bd", ",", "InputStream", "is", ")", "throws", "IOException", ";", "</s>"]
["<s>", "public", "final", "void", "startHeader", "(", ")", "{", "currHeader", "=", "new", "Header", "(", ")", ";", "}", "</s>"]
["<s>", "public", "final", "void", "field", "(", "String", "fieldData", ")", "{", "currHeader", ".", "addField", "(", "Field", ".", "parse", "(", "fieldData", ")", ")", ";", "}", "</s>"]
["<s>", "public", "final", "void", "endHeader", "(", ")", "{", "Header", "tmp", "=", "currHeader", ";", "currHeader", "=", "null", ";", "headers", "(", "tmp", ")", ";", "}", "</s>"]
["<s>", "public", "final", "void", "body", "(", "BodyDescriptor", "bd", ",", "InputStream", "is", ")", "throws", "IOException", "{", "if", "(", "bd", ".", "isBase64Encoded", "(", ")", ")", "{", "bodyDecoded", "(", "bd", ",", "new", "Base64InputStream", "(", "is", ")", ")", ";", "}", "else", "if", "(", "bd", ".", "isQuotedPrintableEncoded", "(", ")", ")", "{", "bodyDecoded", "(", "bd", ",", "new", "QuotedPrintableInputStream", "(", "is", ")", ")", ";", "}", "else", "{", "bodyDecoded", "(", "bd", ",", "is", ")", ";", "}", "}", "</s>"]
["<s>", "public", "MimeBoundaryInputStream", "(", "InputStream", "s", ",", "String", "boundary", ")", "throws", "IOException", "{", "this", ".", "s", "=", "new", "PushbackInputStream", "(", "s", ",", "boundary", ".", "length", "(", ")", "+", "<NUM_LIT:4>", ")", ";", "boundary", "=", "\"", "<STR_LIT:-->", "\"", "+", "boundary", ";", "this", ".", "boundary", "=", "new", "byte", "[", "boundary", ".", "length", "(", ")", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "this", ".", "boundary", ".", "length", ";", "i", "+", "+", ")", "{", "this", ".", "boundary", "[", "i", "]", "=", "(", "byte", ")", "boundary", ".", "charAt", "(", "i", ")", ";", "}", "int", "b", "=", "read", "(", ")", ";", "if", "(", "b", "!", "=", "-", "1", ")", "{", "this", ".", "s", ".", "unread", "(", "b", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "s", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "hasMoreParts", "(", ")", "{", "return", "moreParts", ";", "}", "</s>"]
["<s>", "public", "boolean", "parentEOF", "(", ")", "{", "return", "parenteof", ";", "}", "</s>"]
["<s>", "public", "void", "consume", "(", ")", "throws", "IOException", "{", "while", "(", "read", "(", ")", "!", "=", "-", "1", ")", "{", "}", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "if", "(", "eof", ")", "{", "return", "-", "1", ";", "}", "if", "(", "first", ")", "{", "first", "=", "false", ";", "if", "(", "matchBoundary", "(", ")", ")", "{", "return", "-", "1", ";", "}", "}", "int", "b1", "=", "s", ".", "read", "(", ")", ";", "int", "b2", "=", "s", ".", "read", "(", ")", ";", "if", "(", "b1", "=", "=", "<STR_LIT>", "&", "&", "b2", "=", "=", "<STR_LIT:\\n>", ")", "{", "if", "(", "matchBoundary", "(", ")", ")", "{", "return", "-", "1", ";", "}", "}", "if", "(", "b2", "!", "=", "-", "1", ")", "{", "s", ".", "unread", "(", "b2", ")", ";", "}", "parenteof", "=", "b1", "=", "=", "-", "1", ";", "eof", "=", "parenteof", ";", "return", "b1", ";", "}", "</s>"]
["<s>", "private", "boolean", "matchBoundary", "(", ")", "throws", "IOException", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "boundary", ".", "length", ";", "i", "+", "+", ")", "{", "int", "b", "=", "s", ".", "read", "(", ")", ";", "if", "(", "b", "!", "=", "boundary", "[", "i", "]", ")", "{", "if", "(", "b", "!", "=", "-", "1", ")", "{", "s", ".", "unread", "(", "b", ")", ";", "}", "for", "(", "int", "j", "=", "i", "-", "1", ";", "j", ">", "=", "0", ";", "j", "-", "-", ")", "{", "s", ".", "unread", "(", "boundary", "[", "j", "]", ")", ";", "}", "return", "false", ";", "}", "}", "int", "prev", "=", "s", ".", "read", "(", ")", ";", "int", "curr", "=", "s", ".", "read", "(", ")", ";", "moreParts", "=", "!", "(", "prev", "=", "=", "<CHAR_LIT:->", "&", "&", "curr", "=", "=", "<CHAR_LIT:->", ")", ";", "do", "{", "if", "(", "curr", "=", "=", "<STR_LIT:\\n>", "&", "&", "prev", "=", "=", "<STR_LIT>", ")", "{", "break", ";", "}", "prev", "=", "curr", ";", "}", "while", "(", "(", "curr", "=", "s", ".", "read", "(", ")", ")", "!", "=", "-", "1", ")", ";", "if", "(", "curr", "=", "=", "-", "1", ")", "{", "moreParts", "=", "false", ";", "parenteof", "=", "true", ";", "}", "eof", "=", "true", ";", "return", "true", ";", "}", "</s>"]
["<s>", "public", "CloseShieldInputStream", "(", "InputStream", "is", ")", "{", "this", ".", "is", "=", "is", ";", "}", "</s>"]
["<s>", "public", "InputStream", "getUnderlyingStream", "(", ")", "{", "return", "is", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "checkIfClosed", "(", ")", ";", "return", "is", ".", "read", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "available", "(", ")", "throws", "IOException", "{", "checkIfClosed", "(", ")", ";", "return", "is", ".", "available", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "is", "=", "null", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "reset", "(", ")", "throws", "IOException", "{", "checkIfClosed", "(", ")", ";", "is", ".", "reset", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "markSupported", "(", ")", "{", "if", "(", "is", "=", "=", "null", ")", "return", "false", ";", "return", "is", ".", "markSupported", "(", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "mark", "(", "int", "readlimit", ")", "{", "if", "(", "is", "!", "=", "null", ")", "is", ".", "mark", "(", "readlimit", ")", ";", "}", "</s>"]
["<s>", "public", "long", "skip", "(", "long", "n", ")", "throws", "IOException", "{", "checkIfClosed", "(", ")", ";", "return", "is", ".", "skip", "(", "n", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "b", "[", "]", ")", "throws", "IOException", "{", "checkIfClosed", "(", ")", ";", "return", "is", ".", "read", "(", "b", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "b", "[", "]", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "checkIfClosed", "(", ")", ";", "return", "is", ".", "read", "(", "b", ",", "off", ",", "len", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkIfClosed", "(", ")", "throws", "IOException", "{", "if", "(", "is", "=", "=", "null", ")", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "void", "startMessage", "(", ")", ";", "</s>"]
["<s>", "void", "endMessage", "(", ")", ";", "</s>"]
["<s>", "void", "startBodyPart", "(", ")", ";", "</s>"]
["<s>", "void", "endBodyPart", "(", ")", ";", "</s>"]
["<s>", "void", "startHeader", "(", ")", ";", "</s>"]
["<s>", "void", "field", "(", "String", "fieldData", ")", ";", "</s>"]
["<s>", "void", "endHeader", "(", ")", ";", "</s>"]
["<s>", "void", "preamble", "(", "InputStream", "is", ")", "throws", "IOException", ";", "</s>"]
["<s>", "void", "epilogue", "(", "InputStream", "is", ")", "throws", "IOException", ";", "</s>"]
["<s>", "void", "startMultipart", "(", "BodyDescriptor", "bd", ")", ";", "</s>"]
["<s>", "void", "endMultipart", "(", ")", ";", "</s>"]
["<s>", "void", "body", "(", "BodyDescriptor", "bd", ",", "InputStream", "is", ")", "throws", "IOException", ";", "</s>"]
["<s>", "void", "raw", "(", "InputStream", "is", ")", "throws", "IOException", ";", "</s>"]
["<s>", "public", "PartialInputStream", "(", "InputStream", "inputStream", ",", "long", "offset", ",", "long", "length", ")", "throws", "IOException", "{", "super", "(", "inputStream", ")", ";", "inputStream", ".", "skip", "(", "offset", ")", ";", "this", ".", "limit", "=", "offset", "+", "length", ";", "}", "</s>"]
["<s>", "public", "int", "available", "(", ")", "throws", "IOException", "{", "return", "Math", ".", "min", "(", "super", ".", "available", "(", ")", ",", "getBytesLeft", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "if", "(", "limit", ">", "position", ")", "return", "super", ".", "read", "(", ")", ";", "else", "return", "-", "1", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "b", "[", "]", ")", "throws", "IOException", "{", "return", "read", "(", "b", ",", "0", ",", "b", ".", "length", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "b", "[", "]", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "len", "=", "Math", ".", "min", "(", "len", ",", "getBytesLeft", "(", ")", ")", ";", "return", "super", ".", "read", "(", "b", ",", "off", ",", "len", ")", ";", "}", "</s>"]
["<s>", "public", "long", "skip", "(", "long", "n", ")", "throws", "IOException", "{", "n", "=", "Math", ".", "min", "(", "n", ",", "getBytesLeft", "(", ")", ")", ";", "return", "super", ".", "skip", "(", "n", ")", ";", "}", "</s>"]
["<s>", "private", "int", "getBytesLeft", "(", ")", "{", "return", "(", "int", ")", "Math", ".", "min", "(", "Integer", ".", "MAX_VALUE", ",", "limit", "-", "position", ")", ";", "}", "</s>"]
["<s>", "InputStream", "getInputStream", "(", ")", "throws", "IOException", ";", "</s>"]
["<s>", "OutputStream", "getOutputStream", "(", ")", "throws", "IOException", ";", "</s>"]
["<s>", "String", "getAbsolutePath", "(", ")", ";", "</s>"]
["<s>", "void", "delete", "(", ")", ";", "</s>"]
["<s>", "boolean", "isInMemory", "(", ")", ";", "</s>"]
["<s>", "long", "length", "(", ")", ";", "</s>"]
["<s>", "private", "Charset", "(", "String", "canonical", ",", "String", "mime", ",", "String", "[", "]", "aliases", ")", "{", "this", ".", "canonical", "=", "canonical", ";", "this", ".", "mime", "=", "mime", ";", "this", ".", "aliases", "=", "aliases", ";", "}", "</s>"]
["<s>", "public", "int", "compareTo", "(", "Object", "o", ")", "{", "Charset", "c", "=", "(", "Charset", ")", "o", ";", "return", "this", ".", "canonical", ".", "compareTo", "(", "c", ".", "canonical", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isWhitespace", "(", "char", "ch", ")", "{", "return", "ch", "=", "=", "SP", "|", "|", "ch", "=", "=", "HT", "|", "|", "ch", "=", "=", "CR", "|", "|", "ch", "=", "=", "LF", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isWhitespace", "(", "final", "String", "s", ")", "{", "if", "(", "s", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "final", "int", "len", "=", "s", ".", "length", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "len", ";", "i", "+", "+", ")", "{", "if", "(", "!", "isWhitespace", "(", "s", ".", "charAt", "(", "i", ")", ")", ")", "{", "return", "false", ";", "}", "}", "return", "true", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isEncodingSupported", "(", "String", "charsetName", ")", "{", "return", "encodingSupported", ".", "contains", "(", "charsetName", ".", "toLowerCase", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isDecodingSupported", "(", "String", "charsetName", ")", "{", "return", "decodingSupported", ".", "contains", "(", "charsetName", ".", "toLowerCase", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "toMimeCharset", "(", "String", "charsetName", ")", "{", "Charset", "c", "=", "(", "Charset", ")", "charsetMap", ".", "get", "(", "charsetName", ".", "toLowerCase", "(", ")", ")", ";", "if", "(", "c", "!", "=", "null", ")", "{", "return", "c", ".", "mime", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "static", "String", "toJavaCharset", "(", "String", "charsetName", ")", "{", "Charset", "c", "=", "(", "Charset", ")", "charsetMap", ".", "get", "(", "charsetName", ".", "toLowerCase", "(", ")", ")", ";", "if", "(", "c", "!", "=", "null", ")", "{", "return", "c", ".", "canonical", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "static", "java", ".", "nio", ".", "charset", ".", "Charset", "getCharset", "(", "String", "charsetName", ")", "{", "String", "defaultCharset", "=", "\"", "<STR_LIT>", "\"", ";", "if", "(", "charsetName", "=", "=", "null", ")", "charsetName", "=", "defaultCharset", ";", "try", "{", "return", "java", ".", "nio", ".", "charset", ".", "Charset", ".", "forName", "(", "charsetName", ")", ";", "}", "catch", "(", "IllegalCharsetNameException", "e", ")", "{", "log", ".", "info", "(", "\"", "<STR_LIT>", "\"", "+", "charsetName", "+", "\"", "<STR_LIT>", "\"", "+", "defaultCharset", "+", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "return", "java", ".", "nio", ".", "charset", ".", "Charset", ".", "forName", "(", "defaultCharset", ")", ";", "}", "catch", "(", "UnsupportedCharsetException", "ex", ")", "{", "log", ".", "info", "(", "\"", "<STR_LIT>", "\"", "+", "charsetName", "+", "\"", "<STR_LIT>", "\"", "+", "defaultCharset", "+", "\"", "<STR_LIT>", "\"", "+", "ex", ")", ";", "return", "java", ".", "nio", ".", "charset", ".", "Charset", ".", "forName", "(", "defaultCharset", ")", ";", "}", "}", "</s>"]
["<s>", "public", "PositionInputStream", "(", "InputStream", "inputStream", ")", "{", "this", ".", "inputStream", "=", "inputStream", ";", "}", "</s>"]
["<s>", "public", "long", "getPosition", "(", ")", "{", "return", "position", ";", "}", "</s>"]
["<s>", "public", "int", "available", "(", ")", "throws", "IOException", "{", "return", "inputStream", ".", "available", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "int", "b", "=", "inputStream", ".", "read", "(", ")", ";", "if", "(", "b", "!", "=", "-", "1", ")", "position", "+", "+", ";", "return", "b", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "inputStream", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "reset", "(", ")", "throws", "IOException", "{", "inputStream", ".", "reset", "(", ")", ";", "position", "=", "markedPosition", ";", "}", "</s>"]
["<s>", "public", "boolean", "markSupported", "(", ")", "{", "return", "inputStream", ".", "markSupported", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "mark", "(", "int", "readlimit", ")", "{", "inputStream", ".", "mark", "(", "readlimit", ")", ";", "markedPosition", "=", "position", ";", "}", "</s>"]
["<s>", "public", "long", "skip", "(", "long", "n", ")", "throws", "IOException", "{", "final", "long", "c", "=", "inputStream", ".", "skip", "(", "n", ")", ";", "position", "+", "=", "c", ";", "return", "c", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "b", "[", "]", ")", "throws", "IOException", "{", "final", "int", "c", "=", "inputStream", ".", "read", "(", "b", ")", ";", "position", "+", "=", "c", ";", "return", "c", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "b", "[", "]", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "final", "int", "c", "=", "inputStream", ".", "read", "(", "b", ",", "off", ",", "len", ")", ";", "position", "+", "=", "c", ";", "return", "c", ";", "}", "</s>"]
["<s>", "public", "abstract", "TempPath", "getRootTempPath", "(", ")", ";", "</s>"]
["<s>", "public", "static", "TempStorage", "getInstance", "(", ")", "{", "return", "inst", ";", "}", "</s>"]
["<s>", "public", "static", "void", "setInstance", "(", "TempStorage", "inst", ")", "{", "if", "(", "inst", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "TempStorage", ".", "inst", "=", "inst", ";", "}", "</s>"]
["<s>", "TempPath", "createTempPath", "(", ")", "throws", "IOException", ";", "</s>"]
["<s>", "TempPath", "createTempPath", "(", "String", "prefix", ")", "throws", "IOException", ";", "</s>"]
["<s>", "TempFile", "createTempFile", "(", ")", "throws", "IOException", ";", "</s>"]
["<s>", "TempFile", "createTempFile", "(", "String", "prefix", ",", "String", "suffix", ")", "throws", "IOException", ";", "</s>"]
["<s>", "TempFile", "createTempFile", "(", "String", "prefix", ",", "String", "suffix", ",", "boolean", "allowInMemory", ")", "throws", "IOException", ";", "</s>"]
["<s>", "String", "getAbsolutePath", "(", ")", ";", "</s>"]
["<s>", "void", "delete", "(", ")", ";", "</s>"]
["<s>", "public", "SimpleTempStorage", "(", ")", "{", "rootPath", "=", "new", "SimpleTempPath", "(", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "private", "TempPath", "createTempPath", "(", "TempPath", "parent", ",", "String", "prefix", ")", "throws", "IOException", "{", "if", "(", "prefix", "=", "=", "null", ")", "{", "prefix", "=", "\"", "\"", ";", "}", "File", "p", "=", "null", ";", "int", "count", "=", "<NUM_LIT:1000>", ";", "do", "{", "long", "n", "=", "Math", ".", "abs", "(", "random", ".", "nextLong", "(", ")", ")", ";", "p", "=", "new", "File", "(", "parent", ".", "getAbsolutePath", "(", ")", ",", "prefix", "+", "n", ")", ";", "count", "-", "-", ";", "}", "while", "(", "p", ".", "exists", "(", ")", "&", "&", "count", ">", "0", ")", ";", "if", "(", "p", ".", "exists", "(", ")", "|", "|", "!", "p", ".", "mkdirs", "(", ")", ")", "{", "log", ".", "error", "(", "\"", "<STR_LIT>", "\"", "+", "p", ".", "getAbsolutePath", "(", ")", ")", ";", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "p", ".", "getAbsolutePath", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "new", "SimpleTempPath", "(", "p", ")", ";", "}", "</s>"]
["<s>", "private", "TempFile", "createTempFile", "(", "TempPath", "parent", ",", "String", "prefix", ",", "String", "suffix", ")", "throws", "IOException", "{", "if", "(", "prefix", "=", "=", "null", ")", "{", "prefix", "=", "\"", "\"", ";", "}", "if", "(", "suffix", "=", "=", "null", ")", "{", "suffix", "=", "\"", "<STR_LIT>", "\"", ";", "}", "File", "f", "=", "null", ";", "int", "count", "=", "<NUM_LIT:1000>", ";", "synchronized", "(", "this", ")", "{", "do", "{", "long", "n", "=", "Math", ".", "abs", "(", "random", ".", "nextLong", "(", ")", ")", ";", "f", "=", "new", "File", "(", "parent", ".", "getAbsolutePath", "(", ")", ",", "prefix", "+", "n", "+", "suffix", ")", ";", "count", "-", "-", ";", "}", "while", "(", "f", ".", "exists", "(", ")", "&", "&", "count", ">", "0", ")", ";", "if", "(", "f", ".", "exists", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "try", "{", "f", ".", "createNewFile", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "f", ".", "getAbsolutePath", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "return", "new", "SimpleTempFile", "(", "f", ")", ";", "}", "</s>"]
["<s>", "public", "TempPath", "getRootTempPath", "(", ")", "{", "return", "rootPath", ";", "}", "</s>"]
["<s>", "private", "SimpleTempPath", "(", "String", "path", ")", "{", "this", ".", "path", "=", "new", "File", "(", "path", ")", ";", "}", "</s>"]
["<s>", "private", "SimpleTempPath", "(", "File", "path", ")", "{", "this", ".", "path", "=", "path", ";", "}", "</s>"]
["<s>", "public", "TempFile", "createTempFile", "(", ")", "throws", "IOException", "{", "return", "SimpleTempStorage", ".", "this", ".", "createTempFile", "(", "this", ",", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "TempFile", "createTempFile", "(", "String", "prefix", ",", "String", "suffix", ")", "throws", "IOException", "{", "return", "SimpleTempStorage", ".", "this", ".", "createTempFile", "(", "this", ",", "prefix", ",", "suffix", ")", ";", "}", "</s>"]
["<s>", "public", "TempFile", "createTempFile", "(", "String", "prefix", ",", "String", "suffix", ",", "boolean", "allowInMemory", ")", "throws", "IOException", "{", "return", "SimpleTempStorage", ".", "this", ".", "createTempFile", "(", "this", ",", "prefix", ",", "suffix", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getAbsolutePath", "(", ")", "{", "return", "path", ".", "getAbsolutePath", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "delete", "(", ")", "{", "}", "</s>"]
["<s>", "public", "TempPath", "createTempPath", "(", ")", "throws", "IOException", "{", "return", "SimpleTempStorage", ".", "this", ".", "createTempPath", "(", "this", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "TempPath", "createTempPath", "(", "String", "prefix", ")", "throws", "IOException", "{", "return", "SimpleTempStorage", ".", "this", ".", "createTempPath", "(", "this", ",", "prefix", ")", ";", "}", "</s>"]
["<s>", "private", "SimpleTempFile", "(", "File", "file", ")", "{", "this", ".", "file", "=", "file", ";", "this", ".", "file", ".", "deleteOnExit", "(", ")", ";", "}", "</s>"]
["<s>", "public", "InputStream", "getInputStream", "(", ")", "throws", "IOException", "{", "return", "new", "BufferedInputStream", "(", "new", "FileInputStream", "(", "file", ")", ")", ";", "}", "</s>"]
["<s>", "public", "OutputStream", "getOutputStream", "(", ")", "throws", "IOException", "{", "return", "new", "BufferedOutputStream", "(", "new", "FileOutputStream", "(", "file", ")", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getAbsolutePath", "(", ")", "{", "return", "file", ".", "getAbsolutePath", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "delete", "(", ")", "{", "}", "</s>"]
["<s>", "public", "boolean", "isInMemory", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "long", "length", "(", ")", "{", "return", "file", ".", "length", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "BitSet", "initChars", "(", "String", "specials", ")", "{", "BitSet", "bs", "=", "new", "BitSet", "(", "<NUM_LIT>", ")", ";", "for", "(", "char", "ch", "=", "<NUM_LIT>", ";", "ch", "<", "<NUM_LIT>", ";", "ch", "+", "+", ")", "{", "if", "(", "specials", ".", "indexOf", "(", "ch", ")", "=", "=", "-", "1", ")", "{", "bs", ".", "set", "(", "ch", ")", ";", "}", "}", "return", "bs", ";", "}", "</s>"]
["<s>", "private", "EncoderUtil", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "String", "encodeAddressDisplayName", "(", "String", "displayName", ")", "{", "if", "(", "isAtomPhrase", "(", "displayName", ")", ")", "{", "return", "displayName", ";", "}", "else", "if", "(", "hasToBeEncoded", "(", "displayName", ",", "0", ")", ")", "{", "return", "encodeEncodedWord", "(", "displayName", ",", "Usage", ".", "WORD_ENTITY", ")", ";", "}", "else", "{", "return", "quote", "(", "displayName", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "encodeAddressLocalPart", "(", "String", "localPart", ")", "{", "if", "(", "isDotAtomText", "(", "localPart", ")", ")", "{", "return", "localPart", ";", "}", "else", "{", "return", "quote", "(", "localPart", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "encodeHeaderParameter", "(", "String", "name", ",", "String", "value", ")", "{", "name", "=", "name", ".", "toLowerCase", "(", "Locale", ".", "US", ")", ";", "if", "(", "isToken", "(", "value", ")", ")", "{", "return", "name", "+", "\"", "<STR_LIT:=>", "\"", "+", "value", ";", "}", "else", "{", "return", "name", "+", "\"", "<STR_LIT:=>", "\"", "+", "quote", "(", "value", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "encodeIfNecessary", "(", "String", "text", ",", "Usage", "usage", ",", "int", "usedCharacters", ")", "{", "if", "(", "hasToBeEncoded", "(", "text", ",", "usedCharacters", ")", ")", "return", "encodeEncodedWord", "(", "text", ",", "usage", ",", "usedCharacters", ")", ";", "else", "return", "text", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "hasToBeEncoded", "(", "String", "text", ",", "int", "usedCharacters", ")", "{", "if", "(", "text", "=", "=", "null", ")", "throw", "new", "IllegalArgumentException", "(", ")", ";", "if", "(", "usedCharacters", "<", "0", "|", "|", "usedCharacters", ">", "MAX_USED_CHARACTERS", ")", "throw", "new", "IllegalArgumentException", "(", ")", ";", "int", "nonWhiteSpaceCount", "=", "usedCharacters", ";", "for", "(", "int", "idx", "=", "0", ";", "idx", "<", "text", ".", "length", "(", ")", ";", "idx", "+", "+", ")", "{", "char", "ch", "=", "text", ".", "charAt", "(", "idx", ")", ";", "if", "(", "ch", "=", "=", "<STR_LIT:\\t>", "|", "|", "ch", "=", "=", "<CHAR_LIT>", ")", "{", "nonWhiteSpaceCount", "=", "0", ";", "}", "else", "{", "nonWhiteSpaceCount", "+", "+", ";", "if", "(", "nonWhiteSpaceCount", ">", "<NUM_LIT>", ")", "{", "return", "true", ";", "}", "if", "(", "ch", "<", "<NUM_LIT:32>", "|", "|", "ch", ">", "=", "<NUM_LIT>", ")", "{", "return", "true", ";", "}", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "static", "String", "encodeEncodedWord", "(", "String", "text", ",", "Usage", "usage", ")", "{", "return", "encodeEncodedWord", "(", "text", ",", "usage", ",", "0", ",", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "encodeEncodedWord", "(", "String", "text", ",", "Usage", "usage", ",", "int", "usedCharacters", ")", "{", "return", "encodeEncodedWord", "(", "text", ",", "usage", ",", "usedCharacters", ",", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "encodeEncodedWord", "(", "String", "text", ",", "Usage", "usage", ",", "int", "usedCharacters", ",", "Charset", "charset", ",", "Encoding", "encoding", ")", "{", "if", "(", "text", "=", "=", "null", ")", "throw", "new", "IllegalArgumentException", "(", ")", ";", "if", "(", "usedCharacters", "<", "0", "|", "|", "usedCharacters", ">", "MAX_USED_CHARACTERS", ")", "throw", "new", "IllegalArgumentException", "(", ")", ";", "if", "(", "charset", "=", "=", "null", ")", "charset", "=", "determineCharset", "(", "text", ")", ";", "String", "mimeCharset", "=", "CharsetUtil", ".", "toMimeCharset", "(", "charset", ".", "name", "(", ")", ")", ";", "if", "(", "mimeCharset", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "byte", "[", "]", "bytes", "=", "encode", "(", "text", ",", "charset", ")", ";", "if", "(", "encoding", "=", "=", "null", ")", "encoding", "=", "determineEncoding", "(", "bytes", ",", "usage", ")", ";", "if", "(", "encoding", "=", "=", "Encoding", ".", "B", ")", "{", "String", "prefix", "=", "ENC_WORD_PREFIX", "+", "mimeCharset", "+", "\"", "<STR_LIT>", "\"", ";", "return", "encodeB", "(", "prefix", ",", "text", ",", "usedCharacters", ",", "charset", ",", "bytes", ")", ";", "}", "else", "{", "String", "prefix", "=", "ENC_WORD_PREFIX", "+", "mimeCharset", "+", "\"", "<STR_LIT>", "\"", ";", "return", "encodeQ", "(", "prefix", ",", "text", ",", "usage", ",", "usedCharacters", ",", "charset", ",", "bytes", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "encodeB", "(", "byte", "[", "]", "bytes", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "int", "idx", "=", "0", ";", "final", "int", "end", "=", "bytes", ".", "length", ";", "for", "(", ";", "idx", "<", "end", "-", "<NUM_LIT:2>", ";", "idx", "+", "=", "<NUM_LIT:3>", ")", "{", "int", "data", "=", "(", "bytes", "[", "idx", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:16>", "|", "(", "bytes", "[", "idx", "+", "1", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", "|", "bytes", "[", "idx", "+", "<NUM_LIT:2>", "]", "&", "<NUM_LIT>", ";", "sb", ".", "append", "(", "(", "char", ")", "BASE64_TABLE", "[", "data", ">", ">", "<NUM_LIT>", "&", "<NUM_LIT>", "]", ")", ";", "sb", ".", "append", "(", "(", "char", ")", "BASE64_TABLE", "[", "data", ">", ">", "<NUM_LIT:12>", "&", "<NUM_LIT>", "]", ")", ";", "sb", ".", "append", "(", "(", "char", ")", "BASE64_TABLE", "[", "data", ">", ">", "<NUM_LIT:6>", "&", "<NUM_LIT>", "]", ")", ";", "sb", ".", "append", "(", "(", "char", ")", "BASE64_TABLE", "[", "data", "&", "<NUM_LIT>", "]", ")", ";", "}", "if", "(", "idx", "=", "=", "end", "-", "<NUM_LIT:2>", ")", "{", "int", "data", "=", "(", "bytes", "[", "idx", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:16>", "|", "(", "bytes", "[", "idx", "+", "1", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ";", "sb", ".", "append", "(", "(", "char", ")", "BASE64_TABLE", "[", "data", ">", ">", "<NUM_LIT>", "&", "<NUM_LIT>", "]", ")", ";", "sb", ".", "append", "(", "(", "char", ")", "BASE64_TABLE", "[", "data", ">", ">", "<NUM_LIT:12>", "&", "<NUM_LIT>", "]", ")", ";", "sb", ".", "append", "(", "(", "char", ")", "BASE64_TABLE", "[", "data", ">", ">", "<NUM_LIT:6>", "&", "<NUM_LIT>", "]", ")", ";", "sb", ".", "append", "(", "(", "char", ")", "BASE64_PAD", ")", ";", "}", "else", "if", "(", "idx", "=", "=", "end", "-", "1", ")", "{", "int", "data", "=", "(", "bytes", "[", "idx", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:16>", ";", "sb", ".", "append", "(", "(", "char", ")", "BASE64_TABLE", "[", "data", ">", ">", "<NUM_LIT>", "&", "<NUM_LIT>", "]", ")", ";", "sb", ".", "append", "(", "(", "char", ")", "BASE64_TABLE", "[", "data", ">", ">", "<NUM_LIT:12>", "&", "<NUM_LIT>", "]", ")", ";", "sb", ".", "append", "(", "(", "char", ")", "BASE64_PAD", ")", ";", "sb", ".", "append", "(", "(", "char", ")", "BASE64_PAD", ")", ";", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "encodeQ", "(", "byte", "[", "]", "bytes", ",", "Usage", "usage", ")", "{", "BitSet", "qChars", "=", "usage", "=", "=", "Usage", ".", "TEXT_TOKEN", "?", "Q_REGULAR_CHARS", ":", "Q_RESTRICTED_CHARS", ";", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "final", "int", "end", "=", "bytes", ".", "length", ";", "for", "(", "int", "idx", "=", "0", ";", "idx", "<", "end", ";", "idx", "+", "+", ")", "{", "int", "v", "=", "bytes", "[", "idx", "]", "&", "<NUM_LIT>", ";", "if", "(", "v", "=", "=", "<NUM_LIT:32>", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:_>", ")", ";", "}", "else", "if", "(", "!", "qChars", ".", "get", "(", "v", ")", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:=>", ")", ";", "sb", ".", "append", "(", "hexDigit", "(", "v", ">", ">", ">", "<NUM_LIT:4>", ")", ")", ";", "sb", ".", "append", "(", "hexDigit", "(", "v", "&", "<NUM_LIT>", ")", ")", ";", "}", "else", "{", "sb", ".", "append", "(", "(", "char", ")", "v", ")", ";", "}", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isToken", "(", "String", "str", ")", "{", "final", "int", "length", "=", "str", ".", "length", "(", ")", ";", "if", "(", "length", "=", "=", "0", ")", "return", "false", ";", "for", "(", "int", "idx", "=", "0", ";", "idx", "<", "length", ";", "idx", "+", "+", ")", "{", "char", "ch", "=", "str", ".", "charAt", "(", "idx", ")", ";", "if", "(", "!", "TOKEN_CHARS", ".", "get", "(", "ch", ")", ")", "return", "false", ";", "}", "return", "true", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "isAtomPhrase", "(", "String", "str", ")", "{", "boolean", "containsAText", "=", "false", ";", "final", "int", "length", "=", "str", ".", "length", "(", ")", ";", "for", "(", "int", "idx", "=", "0", ";", "idx", "<", "length", ";", "idx", "+", "+", ")", "{", "char", "ch", "=", "str", ".", "charAt", "(", "idx", ")", ";", "if", "(", "ATEXT_CHARS", ".", "get", "(", "ch", ")", ")", "{", "containsAText", "=", "true", ";", "}", "else", "if", "(", "!", "CharsetUtil", ".", "isWhitespace", "(", "ch", ")", ")", "{", "return", "false", ";", "}", "}", "return", "containsAText", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "isDotAtomText", "(", "String", "str", ")", "{", "char", "prev", "=", "<CHAR_LIT:.>", ";", "final", "int", "length", "=", "str", ".", "length", "(", ")", ";", "if", "(", "length", "=", "=", "0", ")", "return", "false", ";", "for", "(", "int", "idx", "=", "0", ";", "idx", "<", "length", ";", "idx", "+", "+", ")", "{", "char", "ch", "=", "str", ".", "charAt", "(", "idx", ")", ";", "if", "(", "ch", "=", "=", "<CHAR_LIT:.>", ")", "{", "if", "(", "prev", "=", "=", "<CHAR_LIT:.>", "|", "|", "idx", "=", "=", "length", "-", "1", ")", "return", "false", ";", "}", "else", "{", "if", "(", "!", "ATEXT_CHARS", ".", "get", "(", "ch", ")", ")", "return", "false", ";", "}", "prev", "=", "ch", ";", "}", "return", "true", ";", "}", "</s>"]
["<s>", "private", "static", "String", "quote", "(", "String", "str", ")", "{", "String", "escaped", "=", "str", ".", "replaceAll", "(", "\"", "<STR_LIT:[>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT:]>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "return", "\"", "<STR_LIT:\\\">", "\"", "+", "escaped", "+", "\"", "<STR_LIT:\\\">", "\"", ";", "}", "</s>"]
["<s>", "private", "static", "String", "encodeB", "(", "String", "prefix", ",", "String", "text", ",", "int", "usedCharacters", ",", "Charset", "charset", ",", "byte", "[", "]", "bytes", ")", "{", "int", "encodedLength", "=", "bEncodedLength", "(", "bytes", ")", ";", "int", "totalLength", "=", "prefix", ".", "length", "(", ")", "+", "encodedLength", "+", "ENC_WORD_SUFFIX", ".", "length", "(", ")", ";", "if", "(", "totalLength", "<", "=", "ENCODED_WORD_MAX_LENGTH", "-", "usedCharacters", ")", "{", "return", "prefix", "+", "encodeB", "(", "bytes", ")", "+", "ENC_WORD_SUFFIX", ";", "}", "else", "{", "int", "splitOffset", "=", "text", ".", "offsetByCodePoints", "(", "text", ".", "length", "(", ")", "/", "<NUM_LIT:2>", ",", "-", "1", ")", ";", "String", "part1", "=", "text", ".", "substring", "(", "0", ",", "splitOffset", ")", ";", "byte", "[", "]", "bytes1", "=", "encode", "(", "part1", ",", "charset", ")", ";", "String", "word1", "=", "encodeB", "(", "prefix", ",", "part1", ",", "usedCharacters", ",", "charset", ",", "bytes1", ")", ";", "String", "part2", "=", "text", ".", "substring", "(", "splitOffset", ")", ";", "byte", "[", "]", "bytes2", "=", "encode", "(", "part2", ",", "charset", ")", ";", "String", "word2", "=", "encodeB", "(", "prefix", ",", "part2", ",", "0", ",", "charset", ",", "bytes2", ")", ";", "return", "word1", "+", "\"", "\"", "+", "word2", ";", "}", "}", "</s>"]
["<s>", "private", "static", "int", "bEncodedLength", "(", "byte", "[", "]", "bytes", ")", "{", "return", "(", "bytes", ".", "length", "+", "<NUM_LIT:2>", ")", "/", "<NUM_LIT:3>", "*", "<NUM_LIT:4>", ";", "}", "</s>"]
["<s>", "private", "static", "String", "encodeQ", "(", "String", "prefix", ",", "String", "text", ",", "Usage", "usage", ",", "int", "usedCharacters", ",", "Charset", "charset", ",", "byte", "[", "]", "bytes", ")", "{", "int", "encodedLength", "=", "qEncodedLength", "(", "bytes", ",", "usage", ")", ";", "int", "totalLength", "=", "prefix", ".", "length", "(", ")", "+", "encodedLength", "+", "ENC_WORD_SUFFIX", ".", "length", "(", ")", ";", "if", "(", "totalLength", "<", "=", "ENCODED_WORD_MAX_LENGTH", "-", "usedCharacters", ")", "{", "return", "prefix", "+", "encodeQ", "(", "bytes", ",", "usage", ")", "+", "ENC_WORD_SUFFIX", ";", "}", "else", "{", "int", "splitOffset", "=", "text", ".", "offsetByCodePoints", "(", "text", ".", "length", "(", ")", "/", "<NUM_LIT:2>", ",", "-", "1", ")", ";", "String", "part1", "=", "text", ".", "substring", "(", "0", ",", "splitOffset", ")", ";", "byte", "[", "]", "bytes1", "=", "encode", "(", "part1", ",", "charset", ")", ";", "String", "word1", "=", "encodeQ", "(", "prefix", ",", "part1", ",", "usage", ",", "usedCharacters", ",", "charset", ",", "bytes1", ")", ";", "String", "part2", "=", "text", ".", "substring", "(", "splitOffset", ")", ";", "byte", "[", "]", "bytes2", "=", "encode", "(", "part2", ",", "charset", ")", ";", "String", "word2", "=", "encodeQ", "(", "prefix", ",", "part2", ",", "usage", ",", "0", ",", "charset", ",", "bytes2", ")", ";", "return", "word1", "+", "\"", "\"", "+", "word2", ";", "}", "}", "</s>"]
["<s>", "private", "static", "int", "qEncodedLength", "(", "byte", "[", "]", "bytes", ",", "Usage", "usage", ")", "{", "BitSet", "qChars", "=", "usage", "=", "=", "Usage", ".", "TEXT_TOKEN", "?", "Q_REGULAR_CHARS", ":", "Q_RESTRICTED_CHARS", ";", "int", "count", "=", "0", ";", "for", "(", "int", "idx", "=", "0", ";", "idx", "<", "bytes", ".", "length", ";", "idx", "+", "+", ")", "{", "int", "v", "=", "bytes", "[", "idx", "]", "&", "<NUM_LIT>", ";", "if", "(", "v", "=", "=", "<NUM_LIT:32>", ")", "{", "count", "+", "+", ";", "}", "else", "if", "(", "!", "qChars", ".", "get", "(", "v", ")", ")", "{", "count", "+", "=", "<NUM_LIT:3>", ";", "}", "else", "{", "count", "+", "+", ";", "}", "}", "return", "count", ";", "}", "</s>"]
["<s>", "private", "static", "byte", "[", "]", "encode", "(", "String", "text", ",", "Charset", "charset", ")", "{", "ByteBuffer", "buffer", "=", "charset", ".", "encode", "(", "text", ")", ";", "byte", "[", "]", "bytes", "=", "new", "byte", "[", "buffer", ".", "limit", "(", ")", "]", ";", "buffer", ".", "get", "(", "bytes", ")", ";", "return", "bytes", ";", "}", "</s>"]
["<s>", "private", "static", "Charset", "determineCharset", "(", "String", "text", ")", "{", "boolean", "ascii", "=", "true", ";", "final", "int", "len", "=", "text", ".", "length", "(", ")", ";", "for", "(", "int", "index", "=", "0", ";", "index", "<", "len", ";", "index", "+", "+", ")", "{", "char", "ch", "=", "text", ".", "charAt", "(", "index", ")", ";", "if", "(", "ch", ">", "<NUM_LIT>", ")", "{", "return", "CharsetUtil", ".", "UTF_8", ";", "}", "if", "(", "ch", ">", "<NUM_LIT>", ")", "{", "ascii", "=", "false", ";", "}", "}", "return", "ascii", "?", "CharsetUtil", ".", "US_ASCII", ":", "CharsetUtil", ".", "ISO_8859_1", ";", "}", "</s>"]
["<s>", "private", "static", "Encoding", "determineEncoding", "(", "byte", "[", "]", "bytes", ",", "Usage", "usage", ")", "{", "if", "(", "bytes", ".", "length", "=", "=", "0", ")", "return", "Encoding", ".", "Q", ";", "BitSet", "qChars", "=", "usage", "=", "=", "Usage", ".", "TEXT_TOKEN", "?", "Q_REGULAR_CHARS", ":", "Q_RESTRICTED_CHARS", ";", "int", "qEncoded", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "bytes", ".", "length", ";", "i", "+", "+", ")", "{", "int", "v", "=", "bytes", "[", "i", "]", "&", "<NUM_LIT>", ";", "if", "(", "v", "!", "=", "<NUM_LIT:32>", "&", "&", "!", "qChars", ".", "get", "(", "v", ")", ")", "{", "qEncoded", "+", "+", ";", "}", "}", "int", "percentage", "=", "qEncoded", "*", "<NUM_LIT:100>", "/", "bytes", ".", "length", ";", "return", "percentage", ">", "<NUM_LIT:30>", "?", "Encoding", ".", "B", ":", "Encoding", ".", "Q", ";", "}", "</s>"]
["<s>", "private", "static", "char", "hexDigit", "(", "int", "i", ")", "{", "return", "i", "<", "<NUM_LIT:10>", "?", "(", "char", ")", "(", "i", "+", "<CHAR_LIT:0>", ")", ":", "(", "char", ")", "(", "i", "-", "<NUM_LIT:10>", "+", "<CHAR_LIT:A>", ")", ";", "}", "</s>"]
["<s>", "public", "QuotedPrintableInputStream", "(", "InputStream", "stream", ")", "{", "this", ".", "stream", "=", "stream", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "stream", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "fillBuffer", "(", ")", ";", "if", "(", "byteq", ".", "count", "(", ")", "=", "=", "0", ")", "return", "-", "1", ";", "else", "{", "byte", "val", "=", "byteq", ".", "dequeue", "(", ")", ";", "if", "(", "val", ">", "=", "0", ")", "return", "val", ";", "else", "return", "val", "&", "<NUM_LIT>", ";", "}", "}", "</s>"]
["<s>", "private", "void", "populatePushbackQueue", "(", ")", "throws", "IOException", "{", "if", "(", "pushbackq", ".", "count", "(", ")", "!", "=", "0", ")", "return", ";", "while", "(", "true", ")", "{", "int", "i", "=", "stream", ".", "read", "(", ")", ";", "switch", "(", "i", ")", "{", "case", "-", "1", ":", "pushbackq", ".", "clear", "(", ")", ";", "return", ";", "case", "<CHAR_LIT>", ":", "case", "<STR_LIT:\\t>", ":", "pushbackq", ".", "enqueue", "(", "(", "byte", ")", "i", ")", ";", "break", ";", "case", "<STR_LIT>", ":", "case", "<STR_LIT:\\n>", ":", "pushbackq", ".", "clear", "(", ")", ";", "pushbackq", ".", "enqueue", "(", "(", "byte", ")", "i", ")", ";", "return", ";", "default", ":", "pushbackq", ".", "enqueue", "(", "(", "byte", ")", "i", ")", ";", "return", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "fillBuffer", "(", ")", "throws", "IOException", "{", "byte", "msdChar", "=", "0", ";", "while", "(", "byteq", ".", "count", "(", ")", "=", "=", "0", ")", "{", "if", "(", "pushbackq", ".", "count", "(", ")", "=", "=", "0", ")", "{", "populatePushbackQueue", "(", ")", ";", "if", "(", "pushbackq", ".", "count", "(", ")", "=", "=", "0", ")", "return", ";", "}", "byte", "b", "=", "(", "byte", ")", "pushbackq", ".", "dequeue", "(", ")", ";", "switch", "(", "state", ")", "{", "case", "0", ":", "if", "(", "b", "!", "=", "<CHAR_LIT:=>", ")", "{", "byteq", ".", "enqueue", "(", "b", ")", ";", "break", ";", "}", "else", "{", "state", "=", "1", ";", "break", ";", "}", "case", "1", ":", "if", "(", "b", "=", "=", "<STR_LIT>", ")", "{", "state", "=", "<NUM_LIT:2>", ";", "break", ";", "}", "else", "if", "(", "(", "b", ">", "=", "<CHAR_LIT:0>", "&", "&", "b", "<", "=", "<CHAR_LIT:9>", ")", "|", "|", "(", "b", ">", "=", "<CHAR_LIT:A>", "&", "&", "b", "<", "=", "<CHAR_LIT>", ")", "|", "|", "(", "b", ">", "=", "<CHAR_LIT:a>", "&", "&", "b", "<", "=", "<CHAR_LIT>", ")", ")", "{", "state", "=", "<NUM_LIT:3>", ";", "msdChar", "=", "b", ";", "break", ";", "}", "else", "if", "(", "b", "=", "=", "<CHAR_LIT:=>", ")", "{", "if", "(", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "byteq", ".", "enqueue", "(", "(", "byte", ")", "<CHAR_LIT:=>", ")", ";", "break", ";", "}", "else", "{", "if", "(", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "b", ")", ";", "}", "state", "=", "0", ";", "byteq", ".", "enqueue", "(", "(", "byte", ")", "<CHAR_LIT:=>", ")", ";", "byteq", ".", "enqueue", "(", "b", ")", ";", "break", ";", "}", "case", "<NUM_LIT:2>", ":", "if", "(", "b", "=", "=", "<STR_LIT:\\n>", ")", "{", "state", "=", "0", ";", "break", ";", "}", "else", "{", "if", "(", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "(", "int", ")", "<STR_LIT:\\n>", "+", "\"", "<STR_LIT>", "\"", "+", "b", ")", ";", "}", "state", "=", "0", ";", "byteq", ".", "enqueue", "(", "(", "byte", ")", "<CHAR_LIT:=>", ")", ";", "byteq", ".", "enqueue", "(", "(", "byte", ")", "<STR_LIT>", ")", ";", "byteq", ".", "enqueue", "(", "b", ")", ";", "break", ";", "}", "case", "<NUM_LIT:3>", ":", "if", "(", "(", "b", ">", "=", "<CHAR_LIT:0>", "&", "&", "b", "<", "=", "<CHAR_LIT:9>", ")", "|", "|", "(", "b", ">", "=", "<CHAR_LIT:A>", "&", "&", "b", "<", "=", "<CHAR_LIT>", ")", "|", "|", "(", "b", ">", "=", "<CHAR_LIT:a>", "&", "&", "b", "<", "=", "<CHAR_LIT>", ")", ")", "{", "byte", "msd", "=", "asciiCharToNumericValue", "(", "msdChar", ")", ";", "byte", "low", "=", "asciiCharToNumericValue", "(", "b", ")", ";", "state", "=", "0", ";", "byteq", ".", "enqueue", "(", "(", "byte", ")", "(", "(", "msd", "<", "<", "<NUM_LIT:4>", ")", "|", "low", ")", ")", ";", "break", ";", "}", "else", "{", "if", "(", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "b", ")", ";", "}", "state", "=", "0", ";", "byteq", ".", "enqueue", "(", "(", "byte", ")", "<CHAR_LIT:=>", ")", ";", "byteq", ".", "enqueue", "(", "msdChar", ")", ";", "byteq", ".", "enqueue", "(", "b", ")", ";", "break", ";", "}", "default", ":", "log", ".", "error", "(", "\"", "<STR_LIT>", "\"", "+", "state", ")", ";", "state", "=", "0", ";", "byteq", ".", "enqueue", "(", "b", ")", ";", "break", ";", "}", "}", "}", "</s>"]
["<s>", "private", "byte", "asciiCharToNumericValue", "(", "byte", "c", ")", "{", "if", "(", "c", ">", "=", "<CHAR_LIT:0>", "&", "&", "c", "<", "=", "<CHAR_LIT:9>", ")", "{", "return", "(", "byte", ")", "(", "c", "-", "<CHAR_LIT:0>", ")", ";", "}", "else", "if", "(", "c", ">", "=", "<CHAR_LIT:A>", "&", "&", "c", "<", "=", "<CHAR_LIT:Z>", ")", "{", "return", "(", "byte", ")", "(", "<NUM_LIT>", "+", "(", "c", "-", "<CHAR_LIT:A>", ")", ")", ";", "}", "else", "if", "(", "c", ">", "=", "<CHAR_LIT:a>", "&", "&", "c", "<", "=", "<CHAR_LIT>", ")", "{", "return", "(", "byte", ")", "(", "<NUM_LIT>", "+", "(", "c", "-", "<CHAR_LIT:a>", ")", ")", ";", "}", "else", "{", "throw", "new", "IllegalArgumentException", "(", "(", "char", ")", "c", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "ByteQueue", "(", ")", "{", "buf", "=", "new", "UnboundedFifoByteBuffer", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ByteQueue", "(", "int", "initialCapacity", ")", "{", "buf", "=", "new", "UnboundedFifoByteBuffer", "(", "initialCapacity", ")", ";", "this", ".", "initialCapacity", "=", "initialCapacity", ";", "}", "</s>"]
["<s>", "public", "void", "enqueue", "(", "byte", "b", ")", "{", "buf", ".", "add", "(", "b", ")", ";", "}", "</s>"]
["<s>", "public", "byte", "dequeue", "(", ")", "{", "return", "buf", ".", "remove", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "count", "(", ")", "{", "return", "buf", ".", "size", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "clear", "(", ")", "{", "if", "(", "initialCapacity", "!", "=", "-", "1", ")", "buf", "=", "new", "UnboundedFifoByteBuffer", "(", "initialCapacity", ")", ";", "else", "buf", "=", "new", "UnboundedFifoByteBuffer", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Iterator", "iterator", "(", ")", "{", "return", "buf", ".", "iterator", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "decodeBaseQuotedPrintable", "(", "String", "s", ")", "{", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "try", "{", "byte", "[", "]", "bytes", "=", "s", ".", "getBytes", "(", "\"", "<STR_LIT>", "\"", ")", ";", "QuotedPrintableInputStream", "is", "=", "new", "QuotedPrintableInputStream", "(", "new", "ByteArrayInputStream", "(", "bytes", ")", ")", ";", "int", "b", "=", "0", ";", "while", "(", "(", "b", "=", "is", ".", "read", "(", ")", ")", "!", "=", "-", "1", ")", "{", "baos", ".", "write", "(", "b", ")", ";", "}", "}", "catch", "(", "IOException", "e", ")", "{", "log", ".", "error", "(", "e", ")", ";", "}", "return", "baos", ".", "toByteArray", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "decodeBase64", "(", "String", "s", ")", "{", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "try", "{", "byte", "[", "]", "bytes", "=", "s", ".", "getBytes", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Base64InputStream", "is", "=", "new", "Base64InputStream", "(", "new", "ByteArrayInputStream", "(", "bytes", ")", ")", ";", "int", "b", "=", "0", ";", "while", "(", "(", "b", "=", "is", ".", "read", "(", ")", ")", "!", "=", "-", "1", ")", "{", "baos", ".", "write", "(", "b", ")", ";", "}", "}", "catch", "(", "IOException", "e", ")", "{", "log", ".", "error", "(", "e", ")", ";", "}", "return", "baos", ".", "toByteArray", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "decodeB", "(", "String", "encodedWord", ",", "String", "charset", ")", "throws", "UnsupportedEncodingException", "{", "return", "new", "String", "(", "decodeBase64", "(", "encodedWord", ")", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "decodeQ", "(", "String", "encodedWord", ",", "String", "charset", ")", "throws", "UnsupportedEncodingException", "{", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "encodedWord", ".", "length", "(", ")", ";", "i", "+", "+", ")", "{", "char", "c", "=", "encodedWord", ".", "charAt", "(", "i", ")", ";", "if", "(", "c", "=", "=", "<CHAR_LIT:_>", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "sb", ".", "append", "(", "c", ")", ";", "}", "}", "return", "new", "String", "(", "decodeBaseQuotedPrintable", "(", "sb", ".", "toString", "(", ")", ")", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "decodeEncodedWords", "(", "String", "body", ")", "{", "if", "(", "body", ".", "indexOf", "(", "\"", "<STR_LIT>", "\"", ")", "=", "=", "-", "1", ")", "{", "return", "body", ";", "}", "int", "previousEnd", "=", "0", ";", "boolean", "previousWasEncoded", "=", "false", ";", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "while", "(", "true", ")", "{", "int", "begin", "=", "body", ".", "indexOf", "(", "\"", "<STR_LIT>", "\"", ",", "previousEnd", ")", ";", "int", "endScan", "=", "begin", "+", "<NUM_LIT:2>", ";", "if", "(", "begin", "!", "=", "-", "1", ")", "{", "int", "qm1", "=", "body", ".", "indexOf", "(", "<CHAR_LIT>", ",", "endScan", "+", "<NUM_LIT:2>", ")", ";", "int", "qm2", "=", "body", ".", "indexOf", "(", "<CHAR_LIT>", ",", "qm1", "+", "1", ")", ";", "if", "(", "qm2", "!", "=", "-", "1", ")", "{", "endScan", "=", "qm2", "+", "1", ";", "}", "}", "int", "end", "=", "begin", "=", "=", "-", "1", "?", "-", "1", ":", "body", ".", "indexOf", "(", "\"", "<STR_LIT>", "\"", ",", "endScan", ")", ";", "if", "(", "end", "=", "=", "-", "1", ")", "{", "if", "(", "previousEnd", "=", "=", "0", ")", "return", "body", ";", "sb", ".", "append", "(", "body", ".", "substring", "(", "previousEnd", ")", ")", ";", "return", "sb", ".", "toString", "(", ")", ";", "}", "end", "+", "=", "<NUM_LIT:2>", ";", "String", "sep", "=", "body", ".", "substring", "(", "previousEnd", ",", "begin", ")", ";", "String", "decoded", "=", "decodeEncodedWord", "(", "body", ",", "begin", ",", "end", ")", ";", "if", "(", "decoded", "=", "=", "null", ")", "{", "sb", ".", "append", "(", "sep", ")", ";", "sb", ".", "append", "(", "body", ".", "substring", "(", "begin", ",", "end", ")", ")", ";", "}", "else", "{", "if", "(", "!", "previousWasEncoded", "|", "|", "!", "CharsetUtil", ".", "isWhitespace", "(", "sep", ")", ")", "{", "sb", ".", "append", "(", "sep", ")", ";", "}", "sb", ".", "append", "(", "decoded", ")", ";", "}", "previousEnd", "=", "end", ";", "previousWasEncoded", "=", "decoded", "!", "=", "null", ";", "}", "}", "</s>"]
["<s>", "private", "static", "String", "decodeEncodedWord", "(", "String", "body", ",", "int", "begin", ",", "int", "end", ")", "{", "int", "qm1", "=", "body", ".", "indexOf", "(", "<CHAR_LIT>", ",", "begin", "+", "<NUM_LIT:2>", ")", ";", "if", "(", "qm1", "=", "=", "end", "-", "<NUM_LIT:2>", ")", "return", "null", ";", "int", "qm2", "=", "body", ".", "indexOf", "(", "<CHAR_LIT>", ",", "qm1", "+", "1", ")", ";", "if", "(", "qm2", "=", "=", "end", "-", "<NUM_LIT:2>", ")", "return", "null", ";", "String", "mimeCharset", "=", "body", ".", "substring", "(", "begin", "+", "<NUM_LIT:2>", ",", "qm1", ")", ";", "String", "encoding", "=", "body", ".", "substring", "(", "qm1", "+", "1", ",", "qm2", ")", ";", "String", "encodedText", "=", "body", ".", "substring", "(", "qm2", "+", "1", ",", "end", "-", "<NUM_LIT:2>", ")", ";", "String", "charset", "=", "CharsetUtil", ".", "toJavaCharset", "(", "mimeCharset", ")", ";", "if", "(", "charset", "=", "=", "null", ")", "{", "if", "(", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "mimeCharset", "+", "\"", "<STR_LIT>", "\"", "+", "body", ".", "substring", "(", "begin", ",", "end", ")", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "null", ";", "}", "else", "if", "(", "!", "CharsetUtil", ".", "isDecodingSupported", "(", "charset", ")", ")", "{", "if", "(", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "charset", "+", "\"", "<STR_LIT>", "\"", "+", "mimeCharset", "+", "\"", "<STR_LIT>", "\"", "+", "body", ".", "substring", "(", "begin", ",", "end", ")", "+", "\"", "<CHAR_LIT:)>", "\"", ")", ";", "}", "return", "null", ";", "}", "if", "(", "encodedText", ".", "length", "(", ")", "=", "=", "0", ")", "{", "if", "(", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "body", ".", "substring", "(", "begin", ",", "end", ")", "+", "\"", "'", "\"", ")", ";", "}", "return", "null", ";", "}", "try", "{", "if", "(", "encoding", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "return", "DecoderUtil", ".", "decodeQ", "(", "encodedText", ",", "charset", ")", ";", "}", "else", "if", "(", "encoding", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT:B>", "\"", ")", ")", "{", "return", "DecoderUtil", ".", "decodeB", "(", "encodedText", ",", "charset", ")", ";", "}", "else", "{", "if", "(", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "body", ".", "substring", "(", "begin", ",", "end", ")", "+", "\"", "'", "\"", ")", ";", "}", "return", "null", ";", "}", "}", "catch", "(", "UnsupportedEncodingException", "e", ")", "{", "if", "(", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "body", ".", "substring", "(", "begin", ",", "end", ")", "+", "\"", "'", "\"", ",", "e", ")", ";", "}", "return", "null", ";", "}", "catch", "(", "RuntimeException", "e", ")", "{", "if", "(", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "body", ".", "substring", "(", "begin", ",", "end", ")", "+", "\"", "'", "\"", ",", "e", ")", ";", "}", "return", "null", ";", "}", "}", "</s>"]
["<s>", "public", "Base64InputStream", "(", "InputStream", "s", ")", "{", "this", ".", "s", "=", "s", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "s", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", ")", "throws", "IOException", "{", "if", "(", "outIndex", "=", "=", "outCount", ")", "{", "fillBuffer", "(", ")", ";", "if", "(", "outIndex", "=", "=", "outCount", ")", "{", "return", "-", "1", ";", "}", "}", "return", "outputBuffer", "[", "outIndex", "+", "+", "]", ";", "}", "</s>"]
["<s>", "private", "void", "fillBuffer", "(", ")", "throws", "IOException", "{", "outCount", "=", "0", ";", "outIndex", "=", "0", ";", "int", "inCount", "=", "0", ";", "int", "i", ";", "while", "(", "!", "done", ")", "{", "switch", "(", "i", "=", "s", ".", "read", "(", ")", ")", "{", "case", "-", "1", ":", "return", ";", "case", "<CHAR_LIT:=>", ":", "done", "=", "true", ";", "decodeAndEnqueue", "(", "inCount", ")", ";", "return", ";", "default", ":", "byte", "sX", "=", "TRANSLATION", "[", "i", "]", ";", "if", "(", "sX", "<", "0", ")", "continue", ";", "inputBuffer", "[", "inCount", "+", "+", "]", "=", "sX", ";", "if", "(", "inCount", "=", "=", "<NUM_LIT:4>", ")", "{", "decodeAndEnqueue", "(", "inCount", ")", ";", "return", ";", "}", "break", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "decodeAndEnqueue", "(", "int", "len", ")", "{", "int", "accum", "=", "0", ";", "accum", "|", "=", "inputBuffer", "[", "0", "]", "<", "<", "<NUM_LIT>", ";", "accum", "|", "=", "inputBuffer", "[", "1", "]", "<", "<", "<NUM_LIT:12>", ";", "accum", "|", "=", "inputBuffer", "[", "<NUM_LIT:2>", "]", "<", "<", "<NUM_LIT:6>", ";", "accum", "|", "=", "inputBuffer", "[", "<NUM_LIT:3>", "]", ";", "if", "(", "len", "=", "=", "<NUM_LIT:4>", ")", "{", "outputBuffer", "[", "0", "]", "=", "(", "accum", ">", ">", "<NUM_LIT:16>", ")", "&", "<NUM_LIT>", ";", "outputBuffer", "[", "1", "]", "=", "(", "accum", ">", ">", "<NUM_LIT:8>", ")", "&", "<NUM_LIT>", ";", "outputBuffer", "[", "<NUM_LIT:2>", "]", "=", "(", "accum", ")", "&", "<NUM_LIT>", ";", "outCount", "=", "<NUM_LIT:3>", ";", "return", ";", "}", "else", "if", "(", "len", "=", "=", "<NUM_LIT:3>", ")", "{", "outputBuffer", "[", "0", "]", "=", "(", "accum", ">", ">", "<NUM_LIT:16>", ")", "&", "<NUM_LIT>", ";", "outputBuffer", "[", "1", "]", "=", "(", "accum", ">", ">", "<NUM_LIT:8>", ")", "&", "<NUM_LIT>", ";", "outCount", "=", "<NUM_LIT:2>", ";", "return", ";", "}", "else", "{", "outputBuffer", "[", "0", "]", "=", "(", "accum", ">", ">", "<NUM_LIT:16>", ")", "&", "<NUM_LIT>", ";", "outCount", "=", "1", ";", "return", ";", "}", "}", "</s>"]
["<s>", "public", "UnboundedFifoByteBuffer", "(", ")", "{", "this", "(", "<NUM_LIT:32>", ")", ";", "}", "</s>"]
["<s>", "public", "UnboundedFifoByteBuffer", "(", "int", "initialSize", ")", "{", "if", "(", "initialSize", "<", "=", "0", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "buffer", "=", "new", "byte", "[", "initialSize", "+", "1", "]", ";", "head", "=", "0", ";", "tail", "=", "0", ";", "}", "</s>"]
["<s>", "public", "int", "size", "(", ")", "{", "int", "size", "=", "0", ";", "if", "(", "tail", "<", "head", ")", "{", "size", "=", "buffer", ".", "length", "-", "head", "+", "tail", ";", "}", "else", "{", "size", "=", "tail", "-", "head", ";", "}", "return", "size", ";", "}", "</s>"]
["<s>", "public", "boolean", "isEmpty", "(", ")", "{", "return", "(", "size", "(", ")", "=", "=", "0", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "add", "(", "final", "byte", "b", ")", "{", "if", "(", "size", "(", ")", "+", "1", ">", "=", "buffer", ".", "length", ")", "{", "byte", "[", "]", "tmp", "=", "new", "byte", "[", "(", "(", "buffer", ".", "length", "-", "1", ")", "*", "<NUM_LIT:2>", ")", "+", "1", "]", ";", "int", "j", "=", "0", ";", "for", "(", "int", "i", "=", "head", ";", "i", "!", "=", "tail", ";", ")", "{", "tmp", "[", "j", "]", "=", "buffer", "[", "i", "]", ";", "buffer", "[", "i", "]", "=", "0", ";", "j", "+", "+", ";", "i", "+", "+", ";", "if", "(", "i", "=", "=", "buffer", ".", "length", ")", "{", "i", "=", "0", ";", "}", "}", "buffer", "=", "tmp", ";", "head", "=", "0", ";", "tail", "=", "j", ";", "}", "buffer", "[", "tail", "]", "=", "b", ";", "tail", "+", "+", ";", "if", "(", "tail", ">", "=", "buffer", ".", "length", ")", "{", "tail", "=", "0", ";", "}", "return", "true", ";", "}", "</s>"]
["<s>", "public", "byte", "get", "(", ")", "{", "if", "(", "isEmpty", "(", ")", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "buffer", "[", "head", "]", ";", "}", "</s>"]
["<s>", "public", "byte", "remove", "(", ")", "{", "if", "(", "isEmpty", "(", ")", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "byte", "element", "=", "buffer", "[", "head", "]", ";", "head", "+", "+", ";", "if", "(", "head", ">", "=", "buffer", ".", "length", ")", "{", "head", "=", "0", ";", "}", "return", "element", ";", "}", "</s>"]
["<s>", "private", "int", "increment", "(", "int", "index", ")", "{", "index", "+", "+", ";", "if", "(", "index", ">", "=", "buffer", ".", "length", ")", "{", "index", "=", "0", ";", "}", "return", "index", ";", "}", "</s>"]
["<s>", "private", "int", "decrement", "(", "int", "index", ")", "{", "index", "-", "-", ";", "if", "(", "index", "<", "0", ")", "{", "index", "=", "buffer", ".", "length", "-", "1", ";", "}", "return", "index", ";", "}", "</s>"]
["<s>", "public", "Iterator", "iterator", "(", ")", "{", "return", "new", "Iterator", "(", ")", "{", "private", "int", "index", "=", "head", ";", "private", "int", "lastReturnedIndex", "=", "-", "1", ";", "public", "boolean", "hasNext", "(", ")", "{", "return", "index", "!", "=", "tail", ";", "}", "public", "Object", "next", "(", ")", "{", "if", "(", "!", "hasNext", "(", ")", ")", "{", "throw", "new", "NoSuchElementException", "(", ")", ";", "}", "lastReturnedIndex", "=", "index", ";", "index", "=", "increment", "(", "index", ")", ";", "return", "new", "Byte", "(", "buffer", "[", "lastReturnedIndex", "]", ")", ";", "}", "public", "void", "remove", "(", ")", "{", "if", "(", "lastReturnedIndex", "=", "=", "-", "1", ")", "{", "throw", "new", "IllegalStateException", "(", ")", ";", "}", "if", "(", "lastReturnedIndex", "=", "=", "head", ")", "{", "UnboundedFifoByteBuffer", ".", "this", ".", "remove", "(", ")", ";", "lastReturnedIndex", "=", "-", "1", ";", "return", ";", "}", "int", "i", "=", "lastReturnedIndex", "+", "1", ";", "while", "(", "i", "!", "=", "tail", ")", "{", "if", "(", "i", ">", "=", "buffer", ".", "length", ")", "{", "buffer", "[", "i", "-", "1", "]", "=", "buffer", "[", "0", "]", ";", "i", "=", "0", ";", "}", "else", "{", "buffer", "[", "i", "-", "1", "]", "=", "buffer", "[", "i", "]", ";", "i", "+", "+", ";", "}", "}", "lastReturnedIndex", "=", "-", "1", ";", "tail", "=", "decrement", "(", "tail", ")", ";", "buffer", "[", "tail", "]", "=", "0", ";", "index", "=", "decrement", "(", "index", ")", ";", "}", "}", ";", "}", "</s>"]
["<s>", "public", "boolean", "hasNext", "(", ")", "{", "return", "index", "!", "=", "tail", ";", "}", "</s>"]
["<s>", "public", "Object", "next", "(", ")", "{", "if", "(", "!", "hasNext", "(", ")", ")", "{", "throw", "new", "NoSuchElementException", "(", ")", ";", "}", "lastReturnedIndex", "=", "index", ";", "index", "=", "increment", "(", "index", ")", ";", "return", "new", "Byte", "(", "buffer", "[", "lastReturnedIndex", "]", ")", ";", "}", "</s>"]
["<s>", "public", "void", "remove", "(", ")", "{", "if", "(", "lastReturnedIndex", "=", "=", "-", "1", ")", "{", "throw", "new", "IllegalStateException", "(", ")", ";", "}", "if", "(", "lastReturnedIndex", "=", "=", "head", ")", "{", "UnboundedFifoByteBuffer", ".", "this", ".", "remove", "(", ")", ";", "lastReturnedIndex", "=", "-", "1", ";", "return", ";", "}", "int", "i", "=", "lastReturnedIndex", "+", "1", ";", "while", "(", "i", "!", "=", "tail", ")", "{", "if", "(", "i", ">", "=", "buffer", ".", "length", ")", "{", "buffer", "[", "i", "-", "1", "]", "=", "buffer", "[", "0", "]", ";", "i", "=", "0", ";", "}", "else", "{", "buffer", "[", "i", "-", "1", "]", "=", "buffer", "[", "i", "]", ";", "i", "+", "+", ";", "}", "}", "lastReturnedIndex", "=", "-", "1", ";", "tail", "=", "decrement", "(", "tail", ")", ";", "buffer", "[", "tail", "]", "=", "0", ";", "index", "=", "decrement", "(", "index", ")", ";", "}", "</s>"]
["<s>", "InputStream", "getInputStream", "(", ")", "throws", "IOException", ";", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", "{", "getHeader", "(", ")", ".", "writeTo", "(", "out", ")", ";", "getBody", "(", ")", ".", "writeTo", "(", "out", ")", ";", "}", "</s>"]
["<s>", "public", "Message", "(", ")", "{", "}", "</s>"]
["<s>", "public", "Message", "(", "InputStream", "is", ")", "throws", "IOException", "{", "MimeStreamParser", "parser", "=", "new", "MimeStreamParser", "(", ")", ";", "parser", ".", "setContentHandler", "(", "new", "MessageBuilder", "(", ")", ")", ";", "parser", ".", "parse", "(", "is", ")", ";", "}", "</s>"]
["<s>", "public", "UnstructuredField", "getSubject", "(", ")", "{", "return", "(", "UnstructuredField", ")", "getHeader", "(", ")", ".", "getField", "(", "Field", ".", "SUBJECT", ")", ";", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", "{", "getHeader", "(", ")", ".", "writeTo", "(", "out", ")", ";", "Body", "body", "=", "getBody", "(", ")", ";", "if", "(", "body", "instanceof", "Multipart", ")", "{", "Multipart", "mp", "=", "(", "Multipart", ")", "body", ";", "mp", ".", "writeTo", "(", "out", ")", ";", "}", "else", "{", "body", ".", "writeTo", "(", "out", ")", ";", "}", "}", "</s>"]
["<s>", "public", "MessageBuilder", "(", ")", "{", "}", "</s>"]
["<s>", "private", "void", "expect", "(", "Class", "c", ")", "{", "if", "(", "!", "c", ".", "isInstance", "(", "stack", ".", "peek", "(", ")", ")", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "c", ".", "getName", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "stack", ".", "peek", "(", ")", ".", "getClass", "(", ")", ".", "getName", "(", ")", "+", "\"", "'", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "startMessage", "(", ")", "{", "if", "(", "stack", ".", "isEmpty", "(", ")", ")", "{", "stack", ".", "push", "(", "Message", ".", "this", ")", ";", "}", "else", "{", "expect", "(", "Entity", ".", "class", ")", ";", "Message", "m", "=", "new", "Message", "(", ")", ";", "(", "(", "Entity", ")", "stack", ".", "peek", "(", ")", ")", ".", "setBody", "(", "m", ")", ";", "stack", ".", "push", "(", "m", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "endMessage", "(", ")", "{", "expect", "(", "Message", ".", "class", ")", ";", "stack", ".", "pop", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "startHeader", "(", ")", "{", "stack", ".", "push", "(", "new", "Header", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "field", "(", "String", "fieldData", ")", "{", "expect", "(", "Header", ".", "class", ")", ";", "(", "(", "Header", ")", "stack", ".", "peek", "(", ")", ")", ".", "addField", "(", "Field", ".", "parse", "(", "fieldData", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "endHeader", "(", ")", "{", "expect", "(", "Header", ".", "class", ")", ";", "Header", "h", "=", "(", "Header", ")", "stack", ".", "pop", "(", ")", ";", "expect", "(", "Entity", ".", "class", ")", ";", "(", "(", "Entity", ")", "stack", ".", "peek", "(", ")", ")", ".", "setHeader", "(", "h", ")", ";", "}", "</s>"]
["<s>", "public", "void", "startMultipart", "(", "BodyDescriptor", "bd", ")", "{", "expect", "(", "Entity", ".", "class", ")", ";", "Entity", "e", "=", "(", "Entity", ")", "stack", ".", "peek", "(", ")", ";", "Multipart", "multiPart", "=", "new", "Multipart", "(", ")", ";", "e", ".", "setBody", "(", "multiPart", ")", ";", "stack", ".", "push", "(", "multiPart", ")", ";", "}", "</s>"]
["<s>", "public", "void", "body", "(", "BodyDescriptor", "bd", ",", "InputStream", "is", ")", "throws", "IOException", "{", "expect", "(", "Entity", ".", "class", ")", ";", "String", "enc", "=", "bd", ".", "getTransferEncoding", "(", ")", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "enc", ")", ")", "{", "is", "=", "new", "Base64InputStream", "(", "is", ")", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "enc", ")", ")", "{", "is", "=", "new", "QuotedPrintableInputStream", "(", "is", ")", ";", "}", "Body", "body", "=", "null", ";", "if", "(", "bd", ".", "getMimeType", "(", ")", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", "{", "body", "=", "new", "MemoryTextBody", "(", "is", ",", "bd", ".", "getCharset", "(", ")", ")", ";", "}", "else", "{", "body", "=", "new", "MemoryBinaryBody", "(", "is", ")", ";", "}", "(", "(", "Entity", ")", "stack", ".", "peek", "(", ")", ")", ".", "setBody", "(", "body", ")", ";", "}", "</s>"]
["<s>", "public", "void", "endMultipart", "(", ")", "{", "stack", ".", "pop", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "startBodyPart", "(", ")", "{", "expect", "(", "Multipart", ".", "class", ")", ";", "BodyPart", "bodyPart", "=", "new", "BodyPart", "(", ")", ";", "(", "(", "Multipart", ")", "stack", ".", "peek", "(", ")", ")", ".", "addBodyPart", "(", "bodyPart", ")", ";", "stack", ".", "push", "(", "bodyPart", ")", ";", "}", "</s>"]
["<s>", "public", "void", "endBodyPart", "(", ")", "{", "expect", "(", "BodyPart", ".", "class", ")", ";", "stack", ".", "pop", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "epilogue", "(", "InputStream", "is", ")", "throws", "IOException", "{", "expect", "(", "Multipart", ".", "class", ")", ";", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "int", "b", ";", "while", "(", "(", "b", "=", "is", ".", "read", "(", ")", ")", "!", "=", "-", "1", ")", "{", "sb", ".", "append", "(", "(", "char", ")", "b", ")", ";", "}", "(", "(", "Multipart", ")", "stack", ".", "peek", "(", ")", ")", ".", "setEpilogue", "(", "sb", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "preamble", "(", "InputStream", "is", ")", "throws", "IOException", "{", "expect", "(", "Multipart", ".", "class", ")", ";", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "int", "b", ";", "while", "(", "(", "b", "=", "is", ".", "read", "(", ")", ")", "!", "=", "-", "1", ")", "{", "sb", ".", "append", "(", "(", "char", ")", "b", ")", ";", "}", "(", "(", "Multipart", ")", "stack", ".", "peek", "(", ")", ")", ".", "setPreamble", "(", "sb", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "raw", "(", "InputStream", "is", ")", "throws", "IOException", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "TempFileTextBody", "(", "InputStream", "is", ")", "throws", "IOException", "{", "this", "(", "is", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "TempFileTextBody", "(", "InputStream", "is", ",", "String", "mimeCharset", ")", "throws", "IOException", "{", "this", ".", "mimeCharset", "=", "mimeCharset", ";", "TempPath", "tempPath", "=", "TempStorage", ".", "getInstance", "(", ")", ".", "getRootTempPath", "(", ")", ";", "tempFile", "=", "tempPath", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "OutputStream", "out", "=", "tempFile", ".", "getOutputStream", "(", ")", ";", "IOUtils", ".", "copy", "(", "is", ",", "out", ")", ";", "out", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Reader", "getReader", "(", ")", "throws", "UnsupportedEncodingException", ",", "IOException", "{", "String", "javaCharset", "=", "null", ";", "if", "(", "mimeCharset", "!", "=", "null", ")", "{", "javaCharset", "=", "CharsetUtil", ".", "toJavaCharset", "(", "mimeCharset", ")", ";", "}", "if", "(", "javaCharset", "=", "=", "null", ")", "{", "javaCharset", "=", "\"", "<STR_LIT>", "\"", ";", "if", "(", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "if", "(", "mimeCharset", "=", "=", "null", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "javaCharset", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "mimeCharset", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "javaCharset", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "return", "new", "InputStreamReader", "(", "tempFile", ".", "getInputStream", "(", ")", ",", "javaCharset", ")", ";", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", "{", "IOUtils", ".", "copy", "(", "tempFile", ".", "getInputStream", "(", ")", ",", "out", ")", ";", "}", "</s>"]
["<s>", "public", "MemoryBinaryBody", "(", "InputStream", "is", ")", "throws", "IOException", "{", "TempPath", "tempPath", "=", "TempStorage", ".", "getInstance", "(", ")", ".", "getRootTempPath", "(", ")", ";", "ByteArrayOutputStream", "out", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "IOUtils", ".", "copy", "(", "is", ",", "out", ")", ";", "out", ".", "close", "(", ")", ";", "tempFile", "=", "out", ".", "toByteArray", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Entity", "getParent", "(", ")", "{", "return", "parent", ";", "}", "</s>"]
["<s>", "public", "void", "setParent", "(", "Entity", "parent", ")", "{", "this", ".", "parent", "=", "parent", ";", "}", "</s>"]
["<s>", "public", "InputStream", "getInputStream", "(", ")", "throws", "IOException", "{", "return", "new", "ByteArrayInputStream", "(", "tempFile", ")", ";", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", "{", "IOUtils", ".", "copy", "(", "getInputStream", "(", ")", ",", "out", ")", ";", "}", "</s>"]
["<s>", "Entity", "getParent", "(", ")", ";", "</s>"]
["<s>", "void", "setParent", "(", "Entity", "parent", ")", ";", "</s>"]
["<s>", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", ";", "</s>"]
["<s>", "public", "TempFileBinaryBody", "(", "InputStream", "is", ")", "throws", "IOException", "{", "TempPath", "tempPath", "=", "TempStorage", ".", "getInstance", "(", ")", ".", "getRootTempPath", "(", ")", ";", "tempFile", "=", "tempPath", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "OutputStream", "out", "=", "tempFile", ".", "getOutputStream", "(", ")", ";", "IOUtils", ".", "copy", "(", "is", ",", "out", ")", ";", "out", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Entity", "getParent", "(", ")", "{", "return", "parent", ";", "}", "</s>"]
["<s>", "public", "void", "setParent", "(", "Entity", "parent", ")", "{", "this", ".", "parent", "=", "parent", ";", "}", "</s>"]
["<s>", "public", "InputStream", "getInputStream", "(", ")", "throws", "IOException", "{", "return", "tempFile", ".", "getInputStream", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", "{", "IOUtils", ".", "copy", "(", "getInputStream", "(", ")", ",", "out", ")", ";", "}", "</s>"]
["<s>", "public", "Entity", "getParent", "(", ")", "{", "return", "parent", ";", "}", "</s>"]
["<s>", "public", "void", "setParent", "(", "Entity", "parent", ")", "{", "this", ".", "parent", "=", "parent", ";", "}", "</s>"]
["<s>", "Reader", "getReader", "(", ")", "throws", "IOException", ";", "</s>"]
["<s>", "public", "MemoryTextBody", "(", "InputStream", "is", ")", "throws", "IOException", "{", "this", "(", "is", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "MemoryTextBody", "(", "InputStream", "is", ",", "String", "mimeCharset", ")", "throws", "IOException", "{", "this", ".", "mimeCharset", "=", "mimeCharset", ";", "TempPath", "tempPath", "=", "TempStorage", ".", "getInstance", "(", ")", ".", "getRootTempPath", "(", ")", ";", "ByteArrayOutputStream", "out", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "IOUtils", ".", "copy", "(", "is", ",", "out", ")", ";", "out", ".", "close", "(", ")", ";", "tempFile", "=", "out", ".", "toByteArray", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Reader", "getReader", "(", ")", "throws", "UnsupportedEncodingException", ",", "IOException", "{", "String", "javaCharset", "=", "null", ";", "if", "(", "mimeCharset", "!", "=", "null", ")", "{", "javaCharset", "=", "CharsetUtil", ".", "toJavaCharset", "(", "mimeCharset", ")", ";", "}", "if", "(", "javaCharset", "=", "=", "null", ")", "{", "javaCharset", "=", "\"", "<STR_LIT>", "\"", ";", "if", "(", "log", ".", "isWarnEnabled", "(", ")", ")", "{", "if", "(", "mimeCharset", "=", "=", "null", ")", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "javaCharset", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "log", ".", "warn", "(", "\"", "<STR_LIT>", "\"", "+", "mimeCharset", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "javaCharset", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "return", "new", "InputStreamReader", "(", "new", "ByteArrayInputStream", "(", "tempFile", ")", ",", "javaCharset", ")", ";", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", "{", "IOUtils", ".", "copy", "(", "new", "ByteArrayInputStream", "(", "tempFile", ")", ",", "out", ")", ";", "}", "</s>"]
["<s>", "public", "Entity", "getParent", "(", ")", "{", "return", "parent", ";", "}", "</s>"]
["<s>", "public", "void", "setParent", "(", "Entity", "parent", ")", "{", "this", ".", "parent", "=", "parent", ";", "}", "</s>"]
["<s>", "public", "Header", "getHeader", "(", ")", "{", "return", "header", ";", "}", "</s>"]
["<s>", "public", "void", "setHeader", "(", "Header", "header", ")", "{", "this", ".", "header", "=", "header", ";", "}", "</s>"]
["<s>", "public", "Body", "getBody", "(", ")", "{", "return", "body", ";", "}", "</s>"]
["<s>", "public", "void", "setBody", "(", "Body", "body", ")", "{", "this", ".", "body", "=", "body", ";", "body", ".", "setParent", "(", "this", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getMimeType", "(", ")", "{", "ContentTypeField", "child", "=", "(", "ContentTypeField", ")", "getHeader", "(", ")", ".", "getField", "(", "Field", ".", "CONTENT_TYPE", ")", ";", "ContentTypeField", "parent", "=", "getParent", "(", ")", "!", "=", "null", "?", "(", "ContentTypeField", ")", "getParent", "(", ")", ".", "getHeader", "(", ")", ".", "getField", "(", "Field", ".", "CONTENT_TYPE", ")", ":", "null", ";", "return", "ContentTypeField", ".", "getMimeType", "(", "child", ",", "parent", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getCharset", "(", ")", "{", "return", "ContentTypeField", ".", "getCharset", "(", "(", "ContentTypeField", ")", "getHeader", "(", ")", ".", "getField", "(", "Field", ".", "CONTENT_TYPE", ")", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getContentTransferEncoding", "(", ")", "{", "ContentTransferEncodingField", "f", "=", "(", "ContentTransferEncodingField", ")", "getHeader", "(", ")", ".", "getField", "(", "Field", ".", "CONTENT_TRANSFER_ENCODING", ")", ";", "return", "ContentTransferEncodingField", ".", "getEncoding", "(", "f", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isMimeType", "(", "String", "type", ")", "{", "return", "getMimeType", "(", ")", ".", "equalsIgnoreCase", "(", "type", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isMultipart", "(", ")", "{", "ContentTypeField", "f", "=", "(", "ContentTypeField", ")", "getHeader", "(", ")", ".", "getField", "(", "Field", ".", "CONTENT_TYPE", ")", ";", "return", "f", "!", "=", "null", "&", "&", "f", ".", "getBoundary", "(", ")", "!", "=", "null", "&", "&", "getMimeType", "(", ")", ".", "startsWith", "(", "ContentTypeField", ".", "TYPE_MULTIPART_PREFIX", ")", ";", "}", "</s>"]
["<s>", "public", "abstract", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", ";", "</s>"]
["<s>", "public", "Header", "(", ")", "{", "}", "</s>"]
["<s>", "public", "Header", "(", "InputStream", "is", ")", "throws", "IOException", "{", "final", "MimeStreamParser", "parser", "=", "new", "MimeStreamParser", "(", ")", ";", "parser", ".", "setContentHandler", "(", "new", "AbstractContentHandler", "(", ")", "{", "public", "void", "endHeader", "(", ")", "{", "parser", ".", "stop", "(", ")", ";", "}", "public", "void", "field", "(", "String", "fieldData", ")", "{", "addField", "(", "Field", ".", "parse", "(", "fieldData", ")", ")", ";", "}", "}", ")", ";", "parser", ".", "parse", "(", "is", ")", ";", "}", "</s>"]
["<s>", "public", "void", "endHeader", "(", ")", "{", "parser", ".", "stop", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "field", "(", "String", "fieldData", ")", "{", "addField", "(", "Field", ".", "parse", "(", "fieldData", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addField", "(", "Field", "field", ")", "{", "List", "values", "=", "(", "List", ")", "fieldMap", ".", "get", "(", "field", ".", "getName", "(", ")", ".", "toLowerCase", "(", ")", ")", ";", "if", "(", "values", "=", "=", "null", ")", "{", "values", "=", "new", "LinkedList", "(", ")", ";", "fieldMap", ".", "put", "(", "field", ".", "getName", "(", ")", ".", "toLowerCase", "(", ")", ",", "values", ")", ";", "}", "values", ".", "add", "(", "field", ")", ";", "fields", ".", "add", "(", "field", ")", ";", "}", "</s>"]
["<s>", "public", "List", "getFields", "(", ")", "{", "return", "Collections", ".", "unmodifiableList", "(", "fields", ")", ";", "}", "</s>"]
["<s>", "public", "Field", "getField", "(", "String", "name", ")", "{", "List", "l", "=", "(", "List", ")", "fieldMap", ".", "get", "(", "name", ".", "toLowerCase", "(", ")", ")", ";", "if", "(", "l", "!", "=", "null", "&", "&", "!", "l", ".", "isEmpty", "(", ")", ")", "{", "return", "(", "Field", ")", "l", ".", "get", "(", "0", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "List", "getFields", "(", "String", "name", ")", "{", "List", "l", "=", "(", "List", ")", "fieldMap", ".", "get", "(", "name", ".", "toLowerCase", "(", ")", ")", ";", "return", "Collections", ".", "unmodifiableList", "(", "l", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "StringBuffer", "str", "=", "new", "StringBuffer", "(", ")", ";", "for", "(", "Iterator", "it", "=", "fields", ".", "iterator", "(", ")", ";", "it", ".", "hasNext", "(", ")", ";", ")", "{", "str", ".", "append", "(", "it", ".", "next", "(", ")", ".", "toString", "(", ")", ")", ";", "str", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "return", "str", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", "{", "String", "charString", "=", "(", "(", "ContentTypeField", ")", "getField", "(", "Field", ".", "CONTENT_TYPE", ")", ")", ".", "getCharset", "(", ")", ";", "BufferedWriter", "writer", "=", "new", "BufferedWriter", "(", "new", "OutputStreamWriter", "(", "out", ",", "CharsetUtil", ".", "getCharset", "(", "charString", ")", ")", ",", "<NUM_LIT>", ")", ";", "writer", ".", "write", "(", "toString", "(", ")", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "writer", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Multipart", "(", ")", "{", "}", "</s>"]
["<s>", "public", "String", "getSubType", "(", ")", "{", "return", "subType", ";", "}", "</s>"]
["<s>", "public", "void", "setSubType", "(", "String", "subType", ")", "{", "this", ".", "subType", "=", "subType", ";", "}", "</s>"]
["<s>", "public", "Entity", "getParent", "(", ")", "{", "return", "parent", ";", "}", "</s>"]
["<s>", "public", "void", "setParent", "(", "Entity", "parent", ")", "{", "this", ".", "parent", "=", "parent", ";", "for", "(", "Iterator", "it", "=", "bodyParts", ".", "iterator", "(", ")", ";", "it", ".", "hasNext", "(", ")", ";", ")", "{", "(", "(", "BodyPart", ")", "it", ".", "next", "(", ")", ")", ".", "setParent", "(", "parent", ")", ";", "}", "}", "</s>"]
["<s>", "public", "String", "getEpilogue", "(", ")", "{", "return", "epilogue", ";", "}", "</s>"]
["<s>", "public", "void", "setEpilogue", "(", "String", "epilogue", ")", "{", "this", ".", "epilogue", "=", "epilogue", ";", "}", "</s>"]
["<s>", "public", "List", "getBodyParts", "(", ")", "{", "return", "Collections", ".", "unmodifiableList", "(", "bodyParts", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setBodyParts", "(", "List", "bodyParts", ")", "{", "this", ".", "bodyParts", "=", "bodyParts", ";", "for", "(", "Iterator", "it", "=", "bodyParts", ".", "iterator", "(", ")", ";", "it", ".", "hasNext", "(", ")", ";", ")", "{", "(", "(", "BodyPart", ")", "it", ".", "next", "(", ")", ")", ".", "setParent", "(", "parent", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "addBodyPart", "(", "BodyPart", "bodyPart", ")", "{", "bodyParts", ".", "add", "(", "bodyPart", ")", ";", "bodyPart", ".", "setParent", "(", "parent", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getPreamble", "(", ")", "{", "return", "preamble", ";", "}", "</s>"]
["<s>", "public", "void", "setPreamble", "(", "String", "preamble", ")", "{", "this", ".", "preamble", "=", "preamble", ";", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", "{", "String", "boundary", "=", "getBoundary", "(", ")", ";", "List", "bodyParts", "=", "getBodyParts", "(", ")", ";", "BufferedWriter", "writer", "=", "new", "BufferedWriter", "(", "new", "OutputStreamWriter", "(", "out", ",", "CharsetUtil", ".", "getCharset", "(", "getCharset", "(", ")", ")", ")", ",", "<NUM_LIT>", ")", ";", "writer", ".", "write", "(", "getPreamble", "(", ")", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "bodyParts", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "writer", ".", "write", "(", "boundary", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "(", "(", "BodyPart", ")", "bodyParts", ".", "get", "(", "i", ")", ")", ".", "writeTo", "(", "out", ")", ";", "}", "writer", ".", "write", "(", "getEpilogue", "(", ")", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "writer", ".", "write", "(", "boundary", "+", "\"", "<STR_LIT:-->", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "String", "getBoundary", "(", ")", "{", "Entity", "e", "=", "getParent", "(", ")", ";", "ContentTypeField", "cField", "=", "(", "ContentTypeField", ")", "e", ".", "getHeader", "(", ")", ".", "getField", "(", "Field", ".", "CONTENT_TYPE", ")", ";", "return", "cField", ".", "getBoundary", "(", ")", ";", "}", "</s>"]
["<s>", "private", "String", "getCharset", "(", ")", "{", "Entity", "e", "=", "getParent", "(", ")", ";", "String", "charString", "=", "(", "(", "ContentTypeField", ")", "e", ".", "getHeader", "(", ")", ".", "getField", "(", "Field", ".", "CONTENT_TYPE", ")", ")", ".", "getCharset", "(", ")", ";", "return", "charString", ";", "}", "</s>"]
["<s>", "protected", "ContentTransferEncodingField", "(", "String", "name", ",", "String", "body", ",", "String", "raw", ",", "String", "encoding", ")", "{", "super", "(", "name", ",", "body", ",", "raw", ")", ";", "this", ".", "encoding", "=", "encoding", ";", "}", "</s>"]
["<s>", "public", "String", "getEncoding", "(", ")", "{", "return", "encoding", ";", "}", "</s>"]
["<s>", "public", "static", "String", "getEncoding", "(", "ContentTransferEncodingField", "f", ")", "{", "if", "(", "f", "!", "=", "null", "&", "&", "f", ".", "getEncoding", "(", ")", ".", "length", "(", ")", "!", "=", "0", ")", "{", "return", "f", ".", "getEncoding", "(", ")", ";", "}", "return", "ENC_7BIT", ";", "}", "</s>"]
["<s>", "public", "Field", "parse", "(", "final", "String", "name", ",", "final", "String", "body", ",", "final", "String", "raw", ")", "{", "final", "String", "encoding", "=", "body", ".", "trim", "(", ")", ".", "toLowerCase", "(", ")", ";", "return", "new", "ContentTransferEncodingField", "(", "name", ",", "body", ",", "raw", ",", "encoding", ")", ";", "}", "</s>"]
["<s>", "protected", "ContentTypeField", "(", "String", "name", ",", "String", "body", ",", "String", "raw", ",", "String", "mimeType", ",", "Map", "parameters", ",", "ParseException", "parseException", ")", "{", "super", "(", "name", ",", "body", ",", "raw", ")", ";", "this", ".", "mimeType", "=", "mimeType", ";", "this", ".", "parameters", "=", "parameters", ";", "this", ".", "parseException", "=", "parseException", ";", "}", "</s>"]
["<s>", "public", "ParseException", "getParseException", "(", ")", "{", "return", "parseException", ";", "}", "</s>"]
["<s>", "public", "String", "getMimeType", "(", ")", "{", "return", "mimeType", ";", "}", "</s>"]
["<s>", "public", "static", "String", "getMimeType", "(", "ContentTypeField", "child", ",", "ContentTypeField", "parent", ")", "{", "if", "(", "child", "=", "=", "null", "|", "|", "child", ".", "getMimeType", "(", ")", ".", "length", "(", ")", "=", "=", "0", "|", "|", "child", ".", "isMultipart", "(", ")", "&", "&", "child", ".", "getBoundary", "(", ")", "=", "=", "null", ")", "{", "if", "(", "parent", "!", "=", "null", "&", "&", "parent", ".", "isMimeType", "(", "TYPE_MULTIPART_DIGEST", ")", ")", "{", "return", "TYPE_MESSAGE_RFC822", ";", "}", "else", "{", "return", "TYPE_TEXT_PLAIN", ";", "}", "}", "return", "child", ".", "getMimeType", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getParameter", "(", "String", "name", ")", "{", "return", "parameters", "!", "=", "null", "?", "(", "String", ")", "parameters", ".", "get", "(", "name", ".", "toLowerCase", "(", ")", ")", ":", "null", ";", "}", "</s>"]
["<s>", "public", "Map", "getParameters", "(", ")", "{", "return", "parameters", "!", "=", "null", "?", "Collections", ".", "unmodifiableMap", "(", "parameters", ")", ":", "Collections", ".", "EMPTY_MAP", ";", "}", "</s>"]
["<s>", "public", "String", "getBoundary", "(", ")", "{", "return", "getParameter", "(", "PARAM_BOUNDARY", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getCharset", "(", ")", "{", "return", "getParameter", "(", "PARAM_CHARSET", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "getCharset", "(", "ContentTypeField", "f", ")", "{", "if", "(", "f", "!", "=", "null", ")", "{", "if", "(", "f", ".", "getCharset", "(", ")", "!", "=", "null", "&", "&", "f", ".", "getCharset", "(", ")", ".", "length", "(", ")", ">", "0", ")", "{", "return", "f", ".", "getCharset", "(", ")", ";", "}", "}", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "public", "boolean", "isMimeType", "(", "String", "mimeType", ")", "{", "return", "this", ".", "mimeType", ".", "equalsIgnoreCase", "(", "mimeType", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isMultipart", "(", ")", "{", "return", "mimeType", ".", "startsWith", "(", "TYPE_MULTIPART_PREFIX", ")", ";", "}", "</s>"]
["<s>", "public", "Field", "parse", "(", "final", "String", "name", ",", "final", "String", "body", ",", "final", "String", "raw", ")", "{", "ParseException", "parseException", "=", "null", ";", "String", "mimeType", "=", "\"", "\"", ";", "Map", "parameters", "=", "null", ";", "ContentTypeParser", "parser", "=", "new", "ContentTypeParser", "(", "new", "StringReader", "(", "body", ")", ")", ";", "try", "{", "parser", ".", "parseAll", "(", ")", ";", "}", "catch", "(", "ParseException", "e", ")", "{", "if", "(", "log", ".", "isDebugEnabled", "(", ")", ")", "{", "log", ".", "debug", "(", "\"", "<STR_LIT>", "\"", "+", "body", "+", "\"", "<STR_LIT>", "\"", "+", "e", ".", "getMessage", "(", ")", ")", ";", "}", "parseException", "=", "e", ";", "}", "catch", "(", "TokenMgrError", "e", ")", "{", "if", "(", "log", ".", "isDebugEnabled", "(", ")", ")", "{", "log", ".", "debug", "(", "\"", "<STR_LIT>", "\"", "+", "body", "+", "\"", "<STR_LIT>", "\"", "+", "e", ".", "getMessage", "(", ")", ")", ";", "}", "parseException", "=", "new", "ParseException", "(", "e", ".", "getMessage", "(", ")", ")", ";", "}", "try", "{", "final", "String", "type", "=", "parser", ".", "getType", "(", ")", ";", "final", "String", "subType", "=", "parser", ".", "getSubType", "(", ")", ";", "if", "(", "type", "!", "=", "null", "&", "&", "subType", "!", "=", "null", ")", "{", "mimeType", "=", "(", "type", "+", "\"", "<STR_LIT:/>", "\"", "+", "parser", ".", "getSubType", "(", ")", ")", ".", "toLowerCase", "(", ")", ";", "ArrayList", "paramNames", "=", "parser", ".", "getParamNames", "(", ")", ";", "ArrayList", "paramValues", "=", "parser", ".", "getParamValues", "(", ")", ";", "if", "(", "paramNames", "!", "=", "null", "&", "&", "paramValues", "!", "=", "null", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "paramNames", ".", "size", "(", ")", "&", "&", "i", "<", "paramValues", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "if", "(", "parameters", "=", "=", "null", ")", "parameters", "=", "new", "HashMap", "(", "(", "int", ")", "(", "paramNames", ".", "size", "(", ")", "*", "<NUM_LIT>", "+", "1", ")", ")", ";", "String", "paramName", "=", "(", "(", "String", ")", "paramNames", ".", "get", "(", "i", ")", ")", ".", "toLowerCase", "(", ")", ";", "String", "paramValue", "=", "(", "(", "String", ")", "paramValues", ".", "get", "(", "i", ")", ")", ";", "parameters", ".", "put", "(", "paramName", ",", "paramValue", ")", ";", "}", "}", "}", "}", "catch", "(", "NullPointerException", "npe", ")", "{", "}", "return", "new", "ContentTypeField", "(", "name", ",", "body", ",", "raw", ",", "mimeType", ",", "parameters", ",", "parseException", ")", ";", "}", "</s>"]
["<s>", "Field", "parse", "(", "final", "String", "name", ",", "final", "String", "body", ",", "final", "String", "raw", ")", ";", "</s>"]
["<s>", "protected", "DateTimeField", "(", "String", "name", ",", "String", "body", ",", "String", "raw", ",", "Date", "date", ",", "ParseException", "parseException", ")", "{", "super", "(", "name", ",", "body", ",", "raw", ")", ";", "this", ".", "date", "=", "date", ";", "this", ".", "parseException", "=", "parseException", ";", "}", "</s>"]
["<s>", "public", "Date", "getDate", "(", ")", "{", "return", "date", ";", "}", "</s>"]
["<s>", "public", "ParseException", "getParseException", "(", ")", "{", "return", "parseException", ";", "}", "</s>"]
["<s>", "public", "Field", "parse", "(", "final", "String", "name", ",", "final", "String", "body", ",", "final", "String", "raw", ")", "{", "Date", "date", "=", "null", ";", "ParseException", "parseException", "=", "null", ";", "try", "{", "date", "=", "DateTime", ".", "parse", "(", "body", ")", ".", "getDate", "(", ")", ";", "}", "catch", "(", "ParseException", "e", ")", "{", "if", "(", "log", ".", "isDebugEnabled", "(", ")", ")", "{", "log", ".", "debug", "(", "\"", "<STR_LIT>", "\"", "+", "body", "+", "\"", "<STR_LIT>", "\"", "+", "e", ".", "getMessage", "(", ")", ")", ";", "}", "parseException", "=", "e", ";", "}", "return", "new", "DateTimeField", "(", "name", ",", "body", ",", "raw", ",", "date", ",", "parseException", ")", ";", "}", "</s>"]
["<s>", "protected", "UnstructuredField", "(", "String", "name", ",", "String", "body", ",", "String", "raw", ",", "String", "value", ")", "{", "super", "(", "name", ",", "body", ",", "raw", ")", ";", "this", ".", "value", "=", "value", ";", "}", "</s>"]
["<s>", "public", "String", "getValue", "(", ")", "{", "return", "value", ";", "}", "</s>"]
["<s>", "public", "Field", "parse", "(", "final", "String", "name", ",", "final", "String", "body", ",", "final", "String", "raw", ")", "{", "final", "String", "value", "=", "DecoderUtil", ".", "decodeEncodedWords", "(", "body", ")", ";", "return", "new", "UnstructuredField", "(", "name", ",", "body", ",", "raw", ",", "value", ")", ";", "}", "</s>"]
["<s>", "protected", "MailboxField", "(", "final", "String", "name", ",", "final", "String", "body", ",", "final", "String", "raw", ",", "final", "Mailbox", "mailbox", ",", "final", "ParseException", "parseException", ")", "{", "super", "(", "name", ",", "body", ",", "raw", ")", ";", "this", ".", "mailbox", "=", "mailbox", ";", "this", ".", "parseException", "=", "parseException", ";", "}", "</s>"]
["<s>", "public", "Mailbox", "getMailbox", "(", ")", "{", "return", "mailbox", ";", "}", "</s>"]
["<s>", "public", "ParseException", "getParseException", "(", ")", "{", "return", "parseException", ";", "}", "</s>"]
["<s>", "public", "Field", "parse", "(", "final", "String", "name", ",", "final", "String", "body", ",", "final", "String", "raw", ")", "{", "Mailbox", "mailbox", "=", "null", ";", "ParseException", "parseException", "=", "null", ";", "try", "{", "MailboxList", "mailboxList", "=", "AddressList", ".", "parse", "(", "body", ")", ".", "flatten", "(", ")", ";", "if", "(", "mailboxList", ".", "size", "(", ")", ">", "0", ")", "{", "mailbox", "=", "mailboxList", ".", "get", "(", "0", ")", ";", "}", "}", "catch", "(", "ParseException", "e", ")", "{", "if", "(", "log", ".", "isDebugEnabled", "(", ")", ")", "{", "log", ".", "debug", "(", "\"", "<STR_LIT>", "\"", "+", "body", "+", "\"", "<STR_LIT>", "\"", "+", "e", ".", "getMessage", "(", ")", ")", ";", "}", "parseException", "=", "e", ";", "}", "return", "new", "MailboxField", "(", "name", ",", "body", ",", "raw", ",", "mailbox", ",", "parseException", ")", ";", "}", "</s>"]
["<s>", "protected", "MailboxListField", "(", "final", "String", "name", ",", "final", "String", "body", ",", "final", "String", "raw", ",", "final", "MailboxList", "mailboxList", ",", "final", "ParseException", "parseException", ")", "{", "super", "(", "name", ",", "body", ",", "raw", ")", ";", "this", ".", "mailboxList", "=", "mailboxList", ";", "this", ".", "parseException", "=", "parseException", ";", "}", "</s>"]
["<s>", "public", "MailboxList", "getMailboxList", "(", ")", "{", "return", "mailboxList", ";", "}", "</s>"]
["<s>", "public", "ParseException", "getParseException", "(", ")", "{", "return", "parseException", ";", "}", "</s>"]
["<s>", "public", "Field", "parse", "(", "final", "String", "name", ",", "final", "String", "body", ",", "final", "String", "raw", ")", "{", "MailboxList", "mailboxList", "=", "null", ";", "ParseException", "parseException", "=", "null", ";", "try", "{", "mailboxList", "=", "AddressList", ".", "parse", "(", "body", ")", ".", "flatten", "(", ")", ";", "}", "catch", "(", "ParseException", "e", ")", "{", "if", "(", "log", ".", "isDebugEnabled", "(", ")", ")", "{", "log", ".", "debug", "(", "\"", "<STR_LIT>", "\"", "+", "body", "+", "\"", "<STR_LIT>", "\"", "+", "e", ".", "getMessage", "(", ")", ")", ";", "}", "parseException", "=", "e", ";", "}", "return", "new", "MailboxListField", "(", "name", ",", "body", ",", "raw", ",", "mailboxList", ",", "parseException", ")", ";", "}", "</s>"]
["<s>", "public", "DefaultFieldParser", "(", ")", "{", "setFieldParser", "(", "Field", ".", "CONTENT_TRANSFER_ENCODING", ",", "new", "ContentTransferEncodingField", ".", "Parser", "(", ")", ")", ";", "setFieldParser", "(", "Field", ".", "CONTENT_TYPE", ",", "new", "ContentTypeField", ".", "Parser", "(", ")", ")", ";", "final", "DateTimeField", ".", "Parser", "dateTimeParser", "=", "new", "DateTimeField", ".", "Parser", "(", ")", ";", "setFieldParser", "(", "Field", ".", "DATE", ",", "dateTimeParser", ")", ";", "setFieldParser", "(", "Field", ".", "RESENT_DATE", ",", "dateTimeParser", ")", ";", "final", "MailboxListField", ".", "Parser", "mailboxListParser", "=", "new", "MailboxListField", ".", "Parser", "(", ")", ";", "setFieldParser", "(", "Field", ".", "FROM", ",", "mailboxListParser", ")", ";", "setFieldParser", "(", "Field", ".", "RESENT_FROM", ",", "mailboxListParser", ")", ";", "final", "MailboxField", ".", "Parser", "mailboxParser", "=", "new", "MailboxField", ".", "Parser", "(", ")", ";", "setFieldParser", "(", "Field", ".", "SENDER", ",", "mailboxParser", ")", ";", "setFieldParser", "(", "Field", ".", "RESENT_SENDER", ",", "mailboxParser", ")", ";", "final", "AddressListField", ".", "Parser", "addressListParser", "=", "new", "AddressListField", ".", "Parser", "(", ")", ";", "setFieldParser", "(", "Field", ".", "TO", ",", "addressListParser", ")", ";", "setFieldParser", "(", "Field", ".", "RESENT_TO", ",", "addressListParser", ")", ";", "setFieldParser", "(", "Field", ".", "CC", ",", "addressListParser", ")", ";", "setFieldParser", "(", "Field", ".", "RESENT_CC", ",", "addressListParser", ")", ";", "setFieldParser", "(", "Field", ".", "BCC", ",", "addressListParser", ")", ";", "setFieldParser", "(", "Field", ".", "RESENT_BCC", ",", "addressListParser", ")", ";", "setFieldParser", "(", "Field", ".", "REPLY_TO", ",", "addressListParser", ")", ";", "}", "</s>"]
["<s>", "protected", "AddressListField", "(", "String", "name", ",", "String", "body", ",", "String", "raw", ",", "AddressList", "addressList", ",", "ParseException", "parseException", ")", "{", "super", "(", "name", ",", "body", ",", "raw", ")", ";", "this", ".", "addressList", "=", "addressList", ";", "this", ".", "parseException", "=", "parseException", ";", "}", "</s>"]
["<s>", "public", "AddressList", "getAddressList", "(", ")", "{", "return", "addressList", ";", "}", "</s>"]
["<s>", "public", "ParseException", "getParseException", "(", ")", "{", "return", "parseException", ";", "}", "</s>"]
["<s>", "public", "Field", "parse", "(", "final", "String", "name", ",", "final", "String", "body", ",", "final", "String", "raw", ")", "{", "AddressList", "addressList", "=", "null", ";", "ParseException", "parseException", "=", "null", ";", "try", "{", "addressList", "=", "AddressList", ".", "parse", "(", "body", ")", ";", "}", "catch", "(", "ParseException", "e", ")", "{", "if", "(", "log", ".", "isDebugEnabled", "(", ")", ")", "{", "log", ".", "debug", "(", "\"", "<STR_LIT>", "\"", "+", "body", "+", "\"", "<STR_LIT>", "\"", "+", "e", ".", "getMessage", "(", ")", ")", ";", "}", "parseException", "=", "e", ";", "}", "return", "new", "AddressListField", "(", "name", ",", "body", ",", "raw", ",", "addressList", ",", "parseException", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setFieldParser", "(", "final", "String", "name", ",", "final", "FieldParser", "parser", ")", "{", "parsers", ".", "put", "(", "name", ".", "toLowerCase", "(", ")", ",", "parser", ")", ";", "}", "</s>"]
["<s>", "public", "FieldParser", "getParser", "(", "final", "String", "name", ")", "{", "final", "FieldParser", "field", "=", "(", "FieldParser", ")", "parsers", ".", "get", "(", "name", ".", "toLowerCase", "(", ")", ")", ";", "if", "(", "field", "=", "=", "null", ")", "{", "return", "defaultParser", ";", "}", "return", "field", ";", "}", "</s>"]
["<s>", "public", "Field", "parse", "(", "final", "String", "name", ",", "final", "String", "body", ",", "final", "String", "raw", ")", "{", "final", "FieldParser", "parser", "=", "getParser", "(", "name", ")", ";", "return", "parser", ".", "parse", "(", "name", ",", "body", ",", "raw", ")", ";", "}", "</s>"]
["<s>", "protected", "Field", "(", "final", "String", "name", ",", "final", "String", "body", ",", "final", "String", "raw", ")", "{", "this", ".", "name", "=", "name", ";", "this", ".", "body", "=", "body", ";", "this", ".", "raw", "=", "raw", ";", "}", "</s>"]
["<s>", "public", "static", "Field", "parse", "(", "final", "String", "raw", ")", "{", "final", "String", "unfolded", "=", "raw", ".", "replaceAll", "(", "\"", "<STR_LIT>", "<STR_LIT:|>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "final", "Matcher", "fieldMatcher", "=", "fieldNamePattern", ".", "matcher", "(", "unfolded", ")", ";", "if", "(", "!", "fieldMatcher", ".", "find", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "final", "String", "name", "=", "fieldMatcher", ".", "group", "(", "1", ")", ";", "String", "body", "=", "unfolded", ".", "substring", "(", "fieldMatcher", ".", "end", "(", ")", ")", ";", "if", "(", "body", ".", "length", "(", ")", ">", "0", "&", "&", "body", ".", "charAt", "(", "0", ")", "=", "=", "<CHAR_LIT>", ")", "{", "body", "=", "body", ".", "substring", "(", "1", ")", ";", "}", "return", "parser", ".", "parse", "(", "name", ",", "body", ",", "raw", ")", ";", "}", "</s>"]
["<s>", "public", "static", "DefaultFieldParser", "getParser", "(", ")", "{", "return", "parser", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "String", "getRaw", "(", ")", "{", "return", "raw", ";", "}", "</s>"]
["<s>", "public", "String", "getBody", "(", ")", "{", "return", "body", ";", "}", "</s>"]
["<s>", "public", "boolean", "isContentType", "(", ")", "{", "return", "CONTENT_TYPE", ".", "equalsIgnoreCase", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isSubject", "(", ")", "{", "return", "SUBJECT", ".", "equalsIgnoreCase", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isFrom", "(", ")", "{", "return", "FROM", ".", "equalsIgnoreCase", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isTo", "(", ")", "{", "return", "TO", ".", "equalsIgnoreCase", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "raw", ";", "}", "</s>"]
["<s>", "public", "DateTime", "(", "String", "yearString", ",", "int", "month", ",", "int", "day", ",", "int", "hour", ",", "int", "minute", ",", "int", "second", ",", "int", "timeZone", ")", "{", "this", ".", "year", "=", "convertToYear", "(", "yearString", ")", ";", "this", ".", "date", "=", "convertToDate", "(", "year", ",", "month", ",", "day", ",", "hour", ",", "minute", ",", "second", ",", "timeZone", ")", ";", "this", ".", "month", "=", "month", ";", "this", ".", "day", "=", "day", ";", "this", ".", "hour", "=", "hour", ";", "this", ".", "minute", "=", "minute", ";", "this", ".", "second", "=", "second", ";", "this", ".", "timeZone", "=", "timeZone", ";", "}", "</s>"]
["<s>", "private", "int", "convertToYear", "(", "String", "yearString", ")", "{", "int", "year", "=", "Integer", ".", "parseInt", "(", "yearString", ")", ";", "switch", "(", "yearString", ".", "length", "(", ")", ")", "{", "case", "1", ":", "case", "<NUM_LIT:2>", ":", "if", "(", "year", ">", "=", "0", "&", "&", "year", "<", "<NUM_LIT>", ")", "return", "<NUM_LIT>", "+", "year", ";", "else", "return", "<NUM_LIT>", "+", "year", ";", "case", "<NUM_LIT:3>", ":", "return", "<NUM_LIT>", "+", "year", ";", "default", ":", "return", "year", ";", "}", "}", "</s>"]
["<s>", "public", "static", "Date", "convertToDate", "(", "int", "year", ",", "int", "month", ",", "int", "day", ",", "int", "hour", ",", "int", "minute", ",", "int", "second", ",", "int", "timeZone", ")", "{", "Calendar", "c", "=", "new", "GregorianCalendar", "(", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "c", ".", "set", "(", "year", ",", "month", "-", "1", ",", "day", ",", "hour", ",", "minute", ",", "second", ")", ";", "c", ".", "set", "(", "Calendar", ".", "MILLISECOND", ",", "0", ")", ";", "if", "(", "timeZone", "!", "=", "Integer", ".", "MIN_VALUE", ")", "{", "int", "minutes", "=", "(", "(", "timeZone", "/", "<NUM_LIT:100>", ")", "*", "<NUM_LIT>", ")", "+", "timeZone", "%", "<NUM_LIT:100>", ";", "c", ".", "add", "(", "Calendar", ".", "MINUTE", ",", "-", "1", "*", "minutes", ")", ";", "}", "return", "c", ".", "getTime", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Date", "getDate", "(", ")", "{", "return", "date", ";", "}", "</s>"]
["<s>", "public", "int", "getYear", "(", ")", "{", "return", "year", ";", "}", "</s>"]
["<s>", "public", "int", "getMonth", "(", ")", "{", "return", "month", ";", "}", "</s>"]
["<s>", "public", "int", "getDay", "(", ")", "{", "return", "day", ";", "}", "</s>"]
["<s>", "public", "int", "getHour", "(", ")", "{", "return", "hour", ";", "}", "</s>"]
["<s>", "public", "int", "getMinute", "(", ")", "{", "return", "minute", ";", "}", "</s>"]
["<s>", "public", "int", "getSecond", "(", ")", "{", "return", "second", ";", "}", "</s>"]
["<s>", "public", "int", "getTimeZone", "(", ")", "{", "return", "timeZone", ";", "}", "</s>"]
["<s>", "public", "void", "print", "(", ")", "{", "System", ".", "out", ".", "println", "(", "getYear", "(", ")", "+", "\"", "\"", "+", "getMonth", "(", ")", "+", "\"", "\"", "+", "getDay", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "getHour", "(", ")", "+", "\"", "\"", "+", "getMinute", "(", ")", "+", "\"", "\"", "+", "getSecond", "(", ")", "+", "\"", "\"", "+", "getTimeZone", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "DateTime", "parse", "(", "String", "dateString", ")", "throws", "ParseException", "{", "try", "{", "return", "new", "DateTimeParser", "(", "new", "StringReader", "(", "dateString", ")", ")", ".", "parseAll", "(", ")", ";", "}", "catch", "(", "TokenMgrError", "err", ")", "{", "throw", "new", "ParseException", "(", "err", ".", "getMessage", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "static", "final", "String", "addEscapes", "(", "String", "str", ")", "{", "StringBuffer", "retval", "=", "new", "StringBuffer", "(", ")", ";", "char", "ch", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "str", ".", "length", "(", ")", ";", "i", "+", "+", ")", "{", "switch", "(", "str", ".", "charAt", "(", "i", ")", ")", "{", "case", "0", ":", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\t>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\n>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\\">", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "'", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\\\>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "\"", ")", ";", "continue", ";", "default", ":", "if", "(", "(", "ch", "=", "str", ".", "charAt", "(", "i", ")", ")", "<", "<NUM_LIT>", "|", "|", "ch", ">", "<NUM_LIT>", ")", "{", "String", "s", "=", "\"", "<STR_LIT>", "\"", "+", "Integer", ".", "toString", "(", "ch", ",", "<NUM_LIT:16>", ")", ";", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "s", ".", "substring", "(", "s", ".", "length", "(", ")", "-", "<NUM_LIT:4>", ",", "s", ".", "length", "(", ")", ")", ")", ";", "}", "else", "{", "retval", ".", "append", "(", "ch", ")", ";", "}", "continue", ";", "}", "}", "return", "retval", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "static", "String", "LexicalError", "(", "boolean", "EOFSeen", ",", "int", "lexState", ",", "int", "errorLine", ",", "int", "errorColumn", ",", "String", "errorAfter", ",", "char", "curChar", ")", "{", "return", "(", "\"", "<STR_LIT>", "\"", "+", "errorLine", "+", "\"", "<STR_LIT>", "\"", "+", "errorColumn", "+", "\"", "<STR_LIT>", "\"", "+", "(", "EOFSeen", "?", "\"", "<STR_LIT>", "\"", ":", "(", "\"", "<STR_LIT:\\\">", "\"", "+", "addEscapes", "(", "String", ".", "valueOf", "(", "curChar", ")", ")", "+", "\"", "<STR_LIT:\\\">", "\"", ")", "+", "\"", "<STR_LIT>", "\"", "+", "(", "int", ")", "curChar", "+", "\"", "<STR_LIT>", "\"", ")", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "addEscapes", "(", "errorAfter", ")", "+", "\"", "<STR_LIT:\\\">", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getMessage", "(", ")", "{", "return", "super", ".", "getMessage", "(", ")", ";", "}", "</s>"]
["<s>", "public", "TokenMgrError", "(", ")", "{", "}", "</s>"]
["<s>", "public", "TokenMgrError", "(", "String", "message", ",", "int", "reason", ")", "{", "super", "(", "message", ")", ";", "errorCode", "=", "reason", ";", "}", "</s>"]
["<s>", "public", "TokenMgrError", "(", "boolean", "EOFSeen", ",", "int", "lexState", ",", "int", "errorLine", ",", "int", "errorColumn", ",", "String", "errorAfter", ",", "char", "curChar", ",", "int", "reason", ")", "{", "this", "(", "LexicalError", "(", "EOFSeen", ",", "lexState", ",", "errorLine", ",", "errorColumn", ",", "errorAfter", ",", "curChar", ")", ",", "reason", ")", ";", "}", "</s>"]
["<s>", "public", "ParseException", "(", "Token", "currentTokenVal", ",", "int", "[", "]", "[", "]", "expectedTokenSequencesVal", ",", "String", "[", "]", "tokenImageVal", ")", "{", "super", "(", "\"", "\"", ")", ";", "specialConstructor", "=", "true", ";", "currentToken", "=", "currentTokenVal", ";", "expectedTokenSequences", "=", "expectedTokenSequencesVal", ";", "tokenImage", "=", "tokenImageVal", ";", "}", "</s>"]
["<s>", "public", "ParseException", "(", ")", "{", "super", "(", ")", ";", "specialConstructor", "=", "false", ";", "}", "</s>"]
["<s>", "public", "ParseException", "(", "String", "message", ")", "{", "super", "(", "message", ")", ";", "specialConstructor", "=", "false", ";", "}", "</s>"]
["<s>", "public", "String", "getMessage", "(", ")", "{", "if", "(", "!", "specialConstructor", ")", "{", "return", "super", ".", "getMessage", "(", ")", ";", "}", "StringBuffer", "expected", "=", "new", "StringBuffer", "(", ")", ";", "int", "maxSize", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "expectedTokenSequences", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "maxSize", "<", "expectedTokenSequences", "[", "i", "]", ".", "length", ")", "{", "maxSize", "=", "expectedTokenSequences", "[", "i", "]", ".", "length", ";", "}", "for", "(", "int", "j", "=", "0", ";", "j", "<", "expectedTokenSequences", "[", "i", "]", ".", "length", ";", "j", "+", "+", ")", "{", "expected", ".", "append", "(", "tokenImage", "[", "expectedTokenSequences", "[", "i", "]", "[", "j", "]", "]", ")", ".", "append", "(", "\"", "\"", ")", ";", "}", "if", "(", "expectedTokenSequences", "[", "i", "]", "[", "expectedTokenSequences", "[", "i", "]", ".", "length", "-", "1", "]", "!", "=", "0", ")", "{", "expected", ".", "append", "(", "\"", "<STR_LIT:...>", "\"", ")", ";", "}", "expected", ".", "append", "(", "eol", ")", ".", "append", "(", "\"", "\"", ")", ";", "}", "String", "retval", "=", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ";", "Token", "tok", "=", "currentToken", ".", "next", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "maxSize", ";", "i", "+", "+", ")", "{", "if", "(", "i", "!", "=", "0", ")", "retval", "+", "=", "\"", "\"", ";", "if", "(", "tok", ".", "kind", "=", "=", "0", ")", "{", "retval", "+", "=", "tokenImage", "[", "0", "]", ";", "break", ";", "}", "retval", "+", "=", "add_escapes", "(", "tok", ".", "image", ")", ";", "tok", "=", "tok", ".", "next", ";", "}", "retval", "+", "=", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "currentToken", ".", "next", ".", "beginLine", "+", "\"", "<STR_LIT>", "\"", "+", "currentToken", ".", "next", ".", "beginColumn", ";", "retval", "+", "=", "\"", "<STR_LIT:.>", "\"", "+", "eol", ";", "if", "(", "expectedTokenSequences", ".", "length", "=", "=", "1", ")", "{", "retval", "+", "=", "\"", "<STR_LIT>", "\"", "+", "eol", "+", "\"", "\"", ";", "}", "else", "{", "retval", "+", "=", "\"", "<STR_LIT>", "\"", "+", "eol", "+", "\"", "\"", ";", "}", "retval", "+", "=", "expected", ".", "toString", "(", ")", ";", "return", "retval", ";", "}", "</s>"]
["<s>", "protected", "String", "add_escapes", "(", "String", "str", ")", "{", "StringBuffer", "retval", "=", "new", "StringBuffer", "(", ")", ";", "char", "ch", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "str", ".", "length", "(", ")", ";", "i", "+", "+", ")", "{", "switch", "(", "str", ".", "charAt", "(", "i", ")", ")", "{", "case", "0", ":", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\t>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\n>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\\">", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "'", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\\\>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "\"", ")", ";", "continue", ";", "default", ":", "if", "(", "(", "ch", "=", "str", ".", "charAt", "(", "i", ")", ")", "<", "<NUM_LIT>", "|", "|", "ch", ">", "<NUM_LIT>", ")", "{", "String", "s", "=", "\"", "<STR_LIT>", "\"", "+", "Integer", ".", "toString", "(", "ch", ",", "<NUM_LIT:16>", ")", ";", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "s", ".", "substring", "(", "s", ".", "length", "(", ")", "-", "<NUM_LIT:4>", ",", "s", ".", "length", "(", ")", ")", ")", ";", "}", "else", "{", "retval", ".", "append", "(", "ch", ")", ";", "}", "continue", ";", "}", "}", "return", "retval", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setDebugStream", "(", "java", ".", "io", ".", "PrintStream", "ds", ")", "{", "debugStream", "=", "ds", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopStringLiteralDfa_0", "(", "int", "pos", ",", "long", "active0", ")", "{", "switch", "(", "pos", ")", "{", "case", "0", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "{", "jjmatchedKind", "=", "<NUM_LIT>", ";", "return", "-", "1", ";", "}", "return", "-", "1", ";", "case", "1", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "{", "if", "(", "jjmatchedPos", "=", "=", "0", ")", "{", "jjmatchedKind", "=", "<NUM_LIT>", ";", "jjmatchedPos", "=", "0", ";", "}", "return", "-", "1", ";", "}", "return", "-", "1", ";", "default", ":", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfa_0", "(", "int", "pos", ",", "long", "active0", ")", "{", "return", "jjMoveNfa_0", "(", "jjStopStringLiteralDfa_0", "(", "pos", ",", "active0", ")", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopAtPos", "(", "int", "pos", ",", "int", "kind", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "return", "pos", "+", "1", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfaWithStates_0", "(", "int", "pos", ",", "int", "kind", ",", "int", "state", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "pos", "+", "1", ";", "}", "return", "jjMoveNfa_0", "(", "state", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveStringLiteralDfa0_0", "(", ")", "{", "switch", "(", "curChar", ")", "{", "case", "<NUM_LIT:10>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:2>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "1", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:3>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa1_0", "(", "<NUM_LIT>", ")", ";", "default", ":", "return", "jjMoveNfa_0", "(", "0", ",", "0", ")", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveStringLiteralDfa1_0", "(", "long", "active0", ")", "{", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "jjStopStringLiteralDfa_0", "(", "0", ",", "active0", ")", ";", "return", "1", ";", "}", "switch", "(", "curChar", ")", "{", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa2_0", "(", "active0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa2_0", "(", "active0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa2_0", "(", "active0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "1", ",", "<NUM_LIT>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa2_0", "(", "active0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa2_0", "(", "active0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa2_0", "(", "active0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa2_0", "(", "active0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa2_0", "(", "active0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa2_0", "(", "active0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa2_0", "(", "active0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjMoveStringLiteralDfa2_0", "(", "active0", ",", "<NUM_LIT>", ")", ";", "default", ":", "break", ";", "}", "return", "jjStartNfa_0", "(", "0", ",", "active0", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveStringLiteralDfa2_0", "(", "long", "old0", ",", "long", "active0", ")", "{", "if", "(", "(", "(", "active0", "&", "=", "old0", ")", ")", "=", "=", "0", "L", ")", "return", "jjStartNfa_0", "(", "0", ",", "old0", ")", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "jjStopStringLiteralDfa_0", "(", "1", ",", "active0", ")", ";", "return", "<NUM_LIT:2>", ";", "}", "switch", "(", "curChar", ")", "{", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ";", "else", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ";", "else", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ";", "else", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ";", "else", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:30>", ")", ";", "else", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:31>", ")", ";", "else", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:32>", ")", ";", "else", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ";", "else", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:12>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ";", "break", ";", "case", "<NUM_LIT:100>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:6>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:5>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:8>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:4>", ")", ";", "else", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:10>", ")", ";", "else", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:11>", ")", ";", "else", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:16>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ";", "else", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:9>", ")", ";", "else", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:20>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:7>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "(", "active0", "&", "<NUM_LIT>", ")", "!", "=", "0", "L", ")", "return", "jjStopAtPos", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:15>", ")", ";", "break", ";", "default", ":", "break", ";", "}", "return", "jjStartNfa_0", "(", "1", ",", "active0", ")", ";", "}", "</s>"]
["<s>", "private", "final", "void", "jjCheckNAdd", "(", "int", "state", ")", "{", "if", "(", "jjrounds", "[", "state", "]", "!", "=", "jjround", ")", "{", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "state", ";", "jjrounds", "[", "state", "]", "=", "jjround", ";", "}", "}", "</s>"]
["<s>", "private", "final", "void", "jjAddStates", "(", "int", "start", ",", "int", "end", ")", "{", "do", "{", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "jjnextStates", "[", "start", "]", ";", "}", "while", "(", "start", "+", "+", "!", "=", "end", ")", ";", "}", "</s>"]
["<s>", "private", "final", "void", "jjCheckNAddTwoStates", "(", "int", "state1", ",", "int", "state2", ")", "{", "jjCheckNAdd", "(", "state1", ")", ";", "jjCheckNAdd", "(", "state2", ")", ";", "}", "</s>"]
["<s>", "private", "final", "void", "jjCheckNAddStates", "(", "int", "start", ",", "int", "end", ")", "{", "do", "{", "jjCheckNAdd", "(", "jjnextStates", "[", "start", "]", ")", ";", "}", "while", "(", "start", "+", "+", "!", "=", "end", ")", ";", "}", "</s>"]
["<s>", "private", "final", "void", "jjCheckNAddStates", "(", "int", "start", ")", "{", "jjCheckNAdd", "(", "jjnextStates", "[", "start", "]", ")", ";", "jjCheckNAdd", "(", "jjnextStates", "[", "start", "+", "1", "]", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveNfa_0", "(", "int", "startState", ",", "int", "curPos", ")", "{", "int", "[", "]", "nextStates", ";", "int", "startsAt", "=", "0", ";", "jjnewStateCnt", "=", "<NUM_LIT:4>", ";", "int", "i", "=", "1", ";", "jjstateSet", "[", "0", "]", "=", "startState", ";", "int", "j", ",", "kind", "=", "<NUM_LIT>", ";", "for", "(", ";", ";", ")", "{", "if", "(", "+", "+", "jjround", "=", "=", "<NUM_LIT>", ")", "ReInitRounds", "(", ")", ";", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "curChar", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "!", "=", "0", "L", ")", "{", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:3>", ")", ";", "}", "else", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "!", "=", "0", "L", ")", "{", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "}", "else", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "!", "=", "0", "L", ")", "{", "if", "(", "kind", ">", "<NUM_LIT:24>", ")", "kind", "=", "<NUM_LIT:24>", ";", "}", "break", ";", "case", "<NUM_LIT:2>", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "=", "=", "0", "L", ")", "break", ";", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "break", ";", "case", "<NUM_LIT:3>", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "=", "=", "0", "L", ")", "break", ";", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:3>", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "!", "=", "0", "L", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "{", "int", "i2", "=", "(", "curChar", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:6>", ";", "long", "l2", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "if", "(", "kind", "!", "=", "<NUM_LIT>", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "curPos", ";", "kind", "=", "<NUM_LIT>", ";", "}", "+", "+", "curPos", ";", "if", "(", "(", "i", "=", "jjnewStateCnt", ")", "=", "=", "(", "startsAt", "=", "<NUM_LIT:4>", "-", "(", "jjnewStateCnt", "=", "startsAt", ")", ")", ")", "return", "curPos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "curPos", ";", "}", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopStringLiteralDfa_1", "(", "int", "pos", ",", "long", "active0", ")", "{", "switch", "(", "pos", ")", "{", "default", ":", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfa_1", "(", "int", "pos", ",", "long", "active0", ")", "{", "return", "jjMoveNfa_1", "(", "jjStopStringLiteralDfa_1", "(", "pos", ",", "active0", ")", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfaWithStates_1", "(", "int", "pos", ",", "int", "kind", ",", "int", "state", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "pos", "+", "1", ";", "}", "return", "jjMoveNfa_1", "(", "state", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveStringLiteralDfa0_1", "(", ")", "{", "switch", "(", "curChar", ")", "{", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "default", ":", "return", "jjMoveNfa_1", "(", "0", ",", "0", ")", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveNfa_1", "(", "int", "startState", ",", "int", "curPos", ")", "{", "int", "[", "]", "nextStates", ";", "int", "startsAt", "=", "0", ";", "jjnewStateCnt", "=", "<NUM_LIT:3>", ";", "int", "i", "=", "1", ";", "jjstateSet", "[", "0", "]", "=", "startState", ";", "int", "j", ",", "kind", "=", "<NUM_LIT>", ";", "for", "(", ";", ";", ")", "{", "if", "(", "+", "+", "jjround", "=", "=", "<NUM_LIT>", ")", "ReInitRounds", "(", ")", ";", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "curChar", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "if", "(", "curChar", "=", "=", "<NUM_LIT>", ")", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "1", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "{", "int", "i2", "=", "(", "curChar", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:6>", ";", "long", "l2", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "1", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "if", "(", "kind", "!", "=", "<NUM_LIT>", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "curPos", ";", "kind", "=", "<NUM_LIT>", ";", "}", "+", "+", "curPos", ";", "if", "(", "(", "i", "=", "jjnewStateCnt", ")", "=", "=", "(", "startsAt", "=", "<NUM_LIT:3>", "-", "(", "jjnewStateCnt", "=", "startsAt", ")", ")", ")", "return", "curPos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "curPos", ";", "}", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopStringLiteralDfa_2", "(", "int", "pos", ",", "long", "active0", ")", "{", "switch", "(", "pos", ")", "{", "default", ":", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfa_2", "(", "int", "pos", ",", "long", "active0", ")", "{", "return", "jjMoveNfa_2", "(", "jjStopStringLiteralDfa_2", "(", "pos", ",", "active0", ")", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfaWithStates_2", "(", "int", "pos", ",", "int", "kind", ",", "int", "state", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "pos", "+", "1", ";", "}", "return", "jjMoveNfa_2", "(", "state", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveStringLiteralDfa0_2", "(", ")", "{", "switch", "(", "curChar", ")", "{", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "default", ":", "return", "jjMoveNfa_2", "(", "0", ",", "0", ")", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveNfa_2", "(", "int", "startState", ",", "int", "curPos", ")", "{", "int", "[", "]", "nextStates", ";", "int", "startsAt", "=", "0", ";", "jjnewStateCnt", "=", "<NUM_LIT:3>", ";", "int", "i", "=", "1", ";", "jjstateSet", "[", "0", "]", "=", "startState", ";", "int", "j", ",", "kind", "=", "<NUM_LIT>", ";", "for", "(", ";", ";", ")", "{", "if", "(", "+", "+", "jjround", "=", "=", "<NUM_LIT>", ")", "ReInitRounds", "(", ")", ";", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "curChar", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "if", "(", "curChar", "=", "=", "<NUM_LIT>", ")", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "1", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "{", "int", "i2", "=", "(", "curChar", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:6>", ";", "long", "l2", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "1", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "if", "(", "kind", "!", "=", "<NUM_LIT>", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "curPos", ";", "kind", "=", "<NUM_LIT>", ";", "}", "+", "+", "curPos", ";", "if", "(", "(", "i", "=", "jjnewStateCnt", ")", "=", "=", "(", "startsAt", "=", "<NUM_LIT:3>", "-", "(", "jjnewStateCnt", "=", "startsAt", ")", ")", ")", "return", "curPos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "curPos", ";", "}", "}", "}", "</s>"]
["<s>", "public", "DateTimeParserTokenManager", "(", "SimpleCharStream", "stream", ")", "{", "if", "(", "SimpleCharStream", ".", "staticFlag", ")", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "input_stream", "=", "stream", ";", "}", "</s>"]
["<s>", "public", "DateTimeParserTokenManager", "(", "SimpleCharStream", "stream", ",", "int", "lexState", ")", "{", "this", "(", "stream", ")", ";", "SwitchTo", "(", "lexState", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "SimpleCharStream", "stream", ")", "{", "jjmatchedPos", "=", "jjnewStateCnt", "=", "0", ";", "curLexState", "=", "defaultLexState", ";", "input_stream", "=", "stream", ";", "ReInitRounds", "(", ")", ";", "}", "</s>"]
["<s>", "private", "final", "void", "ReInitRounds", "(", ")", "{", "int", "i", ";", "jjround", "=", "<NUM_LIT>", ";", "for", "(", "i", "=", "<NUM_LIT:4>", ";", "i", "-", "-", ">", "0", ";", ")", "jjrounds", "[", "i", "]", "=", "<NUM_LIT>", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "SimpleCharStream", "stream", ",", "int", "lexState", ")", "{", "ReInit", "(", "stream", ")", ";", "SwitchTo", "(", "lexState", ")", ";", "}", "</s>"]
["<s>", "public", "void", "SwitchTo", "(", "int", "lexState", ")", "{", "if", "(", "lexState", ">", "=", "<NUM_LIT:3>", "|", "|", "lexState", "<", "0", ")", "throw", "new", "TokenMgrError", "(", "\"", "<STR_LIT>", "\"", "+", "lexState", "+", "\"", "<STR_LIT>", "\"", ",", "TokenMgrError", ".", "INVALID_LEXICAL_STATE", ")", ";", "else", "curLexState", "=", "lexState", ";", "}", "</s>"]
["<s>", "protected", "Token", "jjFillToken", "(", ")", "{", "Token", "t", "=", "Token", ".", "newToken", "(", "jjmatchedKind", ")", ";", "t", ".", "kind", "=", "jjmatchedKind", ";", "String", "im", "=", "jjstrLiteralImages", "[", "jjmatchedKind", "]", ";", "t", ".", "image", "=", "(", "im", "=", "=", "null", ")", "?", "input_stream", ".", "GetImage", "(", ")", ":", "im", ";", "t", ".", "beginLine", "=", "input_stream", ".", "getBeginLine", "(", ")", ";", "t", ".", "beginColumn", "=", "input_stream", ".", "getBeginColumn", "(", ")", ";", "t", ".", "endLine", "=", "input_stream", ".", "getEndLine", "(", ")", ";", "t", ".", "endColumn", "=", "input_stream", ".", "getEndColumn", "(", ")", ";", "return", "t", ";", "}", "</s>"]
["<s>", "public", "Token", "getNextToken", "(", ")", "{", "int", "kind", ";", "Token", "specialToken", "=", "null", ";", "Token", "matchedToken", ";", "int", "curPos", "=", "0", ";", "EOFLoop", ":", "for", "(", ";", ";", ")", "{", "try", "{", "curChar", "=", "input_stream", ".", "BeginToken", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "jjmatchedKind", "=", "0", ";", "matchedToken", "=", "jjFillToken", "(", ")", ";", "matchedToken", ".", "specialToken", "=", "specialToken", ";", "return", "matchedToken", ";", "}", "image", "=", "null", ";", "jjimageLen", "=", "0", ";", "for", "(", ";", ";", ")", "{", "switch", "(", "curLexState", ")", "{", "case", "0", ":", "jjmatchedKind", "=", "<NUM_LIT>", ";", "jjmatchedPos", "=", "0", ";", "curPos", "=", "jjMoveStringLiteralDfa0_0", "(", ")", ";", "break", ";", "case", "1", ":", "jjmatchedKind", "=", "<NUM_LIT>", ";", "jjmatchedPos", "=", "0", ";", "curPos", "=", "jjMoveStringLiteralDfa0_1", "(", ")", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "jjmatchedKind", "=", "<NUM_LIT>", ";", "jjmatchedPos", "=", "0", ";", "curPos", "=", "jjMoveStringLiteralDfa0_2", "(", ")", ";", "break", ";", "}", "if", "(", "jjmatchedKind", "!", "=", "<NUM_LIT>", ")", "{", "if", "(", "jjmatchedPos", "+", "1", "<", "curPos", ")", "input_stream", ".", "backup", "(", "curPos", "-", "jjmatchedPos", "-", "1", ")", ";", "if", "(", "(", "jjtoToken", "[", "jjmatchedKind", ">", ">", "<NUM_LIT:6>", "]", "&", "(", "<NUM_LIT>", "<", "<", "(", "jjmatchedKind", "&", "<NUM_LIT>", ")", ")", ")", "!", "=", "0", "L", ")", "{", "matchedToken", "=", "jjFillToken", "(", ")", ";", "matchedToken", ".", "specialToken", "=", "specialToken", ";", "if", "(", "jjnewLexState", "[", "jjmatchedKind", "]", "!", "=", "-", "1", ")", "curLexState", "=", "jjnewLexState", "[", "jjmatchedKind", "]", ";", "return", "matchedToken", ";", "}", "else", "if", "(", "(", "jjtoSkip", "[", "jjmatchedKind", ">", ">", "<NUM_LIT:6>", "]", "&", "(", "<NUM_LIT>", "<", "<", "(", "jjmatchedKind", "&", "<NUM_LIT>", ")", ")", ")", "!", "=", "0", "L", ")", "{", "if", "(", "(", "jjtoSpecial", "[", "jjmatchedKind", ">", ">", "<NUM_LIT:6>", "]", "&", "(", "<NUM_LIT>", "<", "<", "(", "jjmatchedKind", "&", "<NUM_LIT>", ")", ")", ")", "!", "=", "0", "L", ")", "{", "matchedToken", "=", "jjFillToken", "(", ")", ";", "if", "(", "specialToken", "=", "=", "null", ")", "specialToken", "=", "matchedToken", ";", "else", "{", "matchedToken", ".", "specialToken", "=", "specialToken", ";", "specialToken", "=", "(", "specialToken", ".", "next", "=", "matchedToken", ")", ";", "}", "}", "if", "(", "jjnewLexState", "[", "jjmatchedKind", "]", "!", "=", "-", "1", ")", "curLexState", "=", "jjnewLexState", "[", "jjmatchedKind", "]", ";", "continue", "EOFLoop", ";", "}", "MoreLexicalActions", "(", ")", ";", "if", "(", "jjnewLexState", "[", "jjmatchedKind", "]", "!", "=", "-", "1", ")", "curLexState", "=", "jjnewLexState", "[", "jjmatchedKind", "]", ";", "curPos", "=", "0", ";", "jjmatchedKind", "=", "<NUM_LIT>", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "continue", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e1", ")", "{", "}", "}", "int", "error_line", "=", "input_stream", ".", "getEndLine", "(", ")", ";", "int", "error_column", "=", "input_stream", ".", "getEndColumn", "(", ")", ";", "String", "error_after", "=", "null", ";", "boolean", "EOFSeen", "=", "false", ";", "try", "{", "input_stream", ".", "readChar", "(", ")", ";", "input_stream", ".", "backup", "(", "1", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e1", ")", "{", "EOFSeen", "=", "true", ";", "error_after", "=", "curPos", "<", "=", "1", "?", "\"", "\"", ":", "input_stream", ".", "GetImage", "(", ")", ";", "if", "(", "curChar", "=", "=", "<STR_LIT:\\n>", "|", "|", "curChar", "=", "=", "<STR_LIT>", ")", "{", "error_line", "+", "+", ";", "error_column", "=", "0", ";", "}", "else", "error_column", "+", "+", ";", "}", "if", "(", "!", "EOFSeen", ")", "{", "input_stream", ".", "backup", "(", "1", ")", ";", "error_after", "=", "curPos", "<", "=", "1", "?", "\"", "\"", ":", "input_stream", ".", "GetImage", "(", ")", ";", "}", "throw", "new", "TokenMgrError", "(", "EOFSeen", ",", "curLexState", ",", "error_line", ",", "error_column", ",", "error_after", ",", "curChar", ",", "TokenMgrError", ".", "LEXICAL_ERROR", ")", ";", "}", "}", "}", "</s>"]
["<s>", "void", "MoreLexicalActions", "(", ")", "{", "jjimageLen", "+", "=", "(", "lengthOfMatch", "=", "jjmatchedPos", "+", "1", ")", ";", "switch", "(", "jjmatchedKind", ")", "{", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "image", ".", "deleteCharAt", "(", "image", ".", "length", "(", ")", "-", "<NUM_LIT:2>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "commentNest", "=", "1", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "image", ".", "deleteCharAt", "(", "image", ".", "length", "(", ")", "-", "<NUM_LIT:2>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "+", "+", "commentNest", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "-", "-", "commentNest", ";", "if", "(", "commentNest", "=", "=", "0", ")", "SwitchTo", "(", "INCOMMENT", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "</s>"]
["<s>", "protected", "void", "setTabSize", "(", "int", "i", ")", "{", "tabSize", "=", "i", ";", "}", "</s>"]
["<s>", "protected", "int", "getTabSize", "(", "int", "i", ")", "{", "return", "tabSize", ";", "}", "</s>"]
["<s>", "protected", "void", "ExpandBuff", "(", "boolean", "wrapAround", ")", "{", "char", "[", "]", "newbuffer", "=", "new", "char", "[", "bufsize", "+", "<NUM_LIT>", "]", ";", "int", "newbufline", "[", "]", "=", "new", "int", "[", "bufsize", "+", "<NUM_LIT>", "]", ";", "int", "newbufcolumn", "[", "]", "=", "new", "int", "[", "bufsize", "+", "<NUM_LIT>", "]", ";", "try", "{", "if", "(", "wrapAround", ")", "{", "System", ".", "arraycopy", "(", "buffer", ",", "tokenBegin", ",", "newbuffer", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "System", ".", "arraycopy", "(", "buffer", ",", "0", ",", "newbuffer", ",", "bufsize", "-", "tokenBegin", ",", "bufpos", ")", ";", "buffer", "=", "newbuffer", ";", "System", ".", "arraycopy", "(", "bufline", ",", "tokenBegin", ",", "newbufline", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "System", ".", "arraycopy", "(", "bufline", ",", "0", ",", "newbufline", ",", "bufsize", "-", "tokenBegin", ",", "bufpos", ")", ";", "bufline", "=", "newbufline", ";", "System", ".", "arraycopy", "(", "bufcolumn", ",", "tokenBegin", ",", "newbufcolumn", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "System", ".", "arraycopy", "(", "bufcolumn", ",", "0", ",", "newbufcolumn", ",", "bufsize", "-", "tokenBegin", ",", "bufpos", ")", ";", "bufcolumn", "=", "newbufcolumn", ";", "maxNextCharInd", "=", "(", "bufpos", "+", "=", "(", "bufsize", "-", "tokenBegin", ")", ")", ";", "}", "else", "{", "System", ".", "arraycopy", "(", "buffer", ",", "tokenBegin", ",", "newbuffer", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "buffer", "=", "newbuffer", ";", "System", ".", "arraycopy", "(", "bufline", ",", "tokenBegin", ",", "newbufline", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "bufline", "=", "newbufline", ";", "System", ".", "arraycopy", "(", "bufcolumn", ",", "tokenBegin", ",", "newbufcolumn", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "bufcolumn", "=", "newbufcolumn", ";", "maxNextCharInd", "=", "(", "bufpos", "-", "=", "tokenBegin", ")", ";", "}", "}", "catch", "(", "Throwable", "t", ")", "{", "throw", "new", "Error", "(", "t", ".", "getMessage", "(", ")", ")", ";", "}", "bufsize", "+", "=", "<NUM_LIT>", ";", "available", "=", "bufsize", ";", "tokenBegin", "=", "0", ";", "}", "</s>"]
["<s>", "protected", "void", "FillBuff", "(", ")", "throws", "java", ".", "io", ".", "IOException", "{", "if", "(", "maxNextCharInd", "=", "=", "available", ")", "{", "if", "(", "available", "=", "=", "bufsize", ")", "{", "if", "(", "tokenBegin", ">", "<NUM_LIT>", ")", "{", "bufpos", "=", "maxNextCharInd", "=", "0", ";", "available", "=", "tokenBegin", ";", "}", "else", "if", "(", "tokenBegin", "<", "0", ")", "bufpos", "=", "maxNextCharInd", "=", "0", ";", "else", "ExpandBuff", "(", "false", ")", ";", "}", "else", "if", "(", "available", ">", "tokenBegin", ")", "available", "=", "bufsize", ";", "else", "if", "(", "(", "tokenBegin", "-", "available", ")", "<", "<NUM_LIT>", ")", "ExpandBuff", "(", "true", ")", ";", "else", "available", "=", "tokenBegin", ";", "}", "int", "i", ";", "try", "{", "if", "(", "(", "i", "=", "inputStream", ".", "read", "(", "buffer", ",", "maxNextCharInd", ",", "available", "-", "maxNextCharInd", ")", ")", "=", "=", "-", "1", ")", "{", "inputStream", ".", "close", "(", ")", ";", "throw", "new", "java", ".", "io", ".", "IOException", "(", ")", ";", "}", "else", "maxNextCharInd", "+", "=", "i", ";", "return", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "-", "-", "bufpos", ";", "backup", "(", "0", ")", ";", "if", "(", "tokenBegin", "=", "=", "-", "1", ")", "tokenBegin", "=", "bufpos", ";", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "public", "char", "BeginToken", "(", ")", "throws", "java", ".", "io", ".", "IOException", "{", "tokenBegin", "=", "-", "1", ";", "char", "c", "=", "readChar", "(", ")", ";", "tokenBegin", "=", "bufpos", ";", "return", "c", ";", "}", "</s>"]
["<s>", "protected", "void", "UpdateLineColumn", "(", "char", "c", ")", "{", "column", "+", "+", ";", "if", "(", "prevCharIsLF", ")", "{", "prevCharIsLF", "=", "false", ";", "line", "+", "=", "(", "column", "=", "1", ")", ";", "}", "else", "if", "(", "prevCharIsCR", ")", "{", "prevCharIsCR", "=", "false", ";", "if", "(", "c", "=", "=", "<STR_LIT:\\n>", ")", "{", "prevCharIsLF", "=", "true", ";", "}", "else", "line", "+", "=", "(", "column", "=", "1", ")", ";", "}", "switch", "(", "c", ")", "{", "case", "<STR_LIT>", ":", "prevCharIsCR", "=", "true", ";", "break", ";", "case", "<STR_LIT:\\n>", ":", "prevCharIsLF", "=", "true", ";", "break", ";", "case", "<STR_LIT:\\t>", ":", "column", "-", "-", ";", "column", "+", "=", "(", "tabSize", "-", "(", "column", "%", "tabSize", ")", ")", ";", "break", ";", "default", ":", "break", ";", "}", "bufline", "[", "bufpos", "]", "=", "line", ";", "bufcolumn", "[", "bufpos", "]", "=", "column", ";", "}", "</s>"]
["<s>", "public", "char", "readChar", "(", ")", "throws", "java", ".", "io", ".", "IOException", "{", "if", "(", "inBuf", ">", "0", ")", "{", "-", "-", "inBuf", ";", "if", "(", "+", "+", "bufpos", "=", "=", "bufsize", ")", "bufpos", "=", "0", ";", "return", "buffer", "[", "bufpos", "]", ";", "}", "if", "(", "+", "+", "bufpos", ">", "=", "maxNextCharInd", ")", "FillBuff", "(", ")", ";", "char", "c", "=", "buffer", "[", "bufpos", "]", ";", "UpdateLineColumn", "(", "c", ")", ";", "return", "(", "c", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getColumn", "(", ")", "{", "return", "bufcolumn", "[", "bufpos", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getLine", "(", ")", "{", "return", "bufline", "[", "bufpos", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getEndColumn", "(", ")", "{", "return", "bufcolumn", "[", "bufpos", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getEndLine", "(", ")", "{", "return", "bufline", "[", "bufpos", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getBeginColumn", "(", ")", "{", "return", "bufcolumn", "[", "tokenBegin", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getBeginLine", "(", ")", "{", "return", "bufline", "[", "tokenBegin", "]", ";", "}", "</s>"]
["<s>", "public", "void", "backup", "(", "int", "amount", ")", "{", "inBuf", "+", "=", "amount", ";", "if", "(", "(", "bufpos", "-", "=", "amount", ")", "<", "0", ")", "bufpos", "+", "=", "bufsize", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "Reader", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "{", "inputStream", "=", "dstream", ";", "line", "=", "startline", ";", "column", "=", "startcolumn", "-", "1", ";", "available", "=", "bufsize", "=", "buffersize", ";", "buffer", "=", "new", "char", "[", "buffersize", "]", ";", "bufline", "=", "new", "int", "[", "buffersize", "]", ";", "bufcolumn", "=", "new", "int", "[", "buffersize", "]", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "Reader", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ")", "{", "this", "(", "dstream", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "Reader", "dstream", ")", "{", "this", "(", "dstream", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "Reader", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "{", "inputStream", "=", "dstream", ";", "line", "=", "startline", ";", "column", "=", "startcolumn", "-", "1", ";", "if", "(", "buffer", "=", "=", "null", "|", "|", "buffersize", "!", "=", "buffer", ".", "length", ")", "{", "available", "=", "bufsize", "=", "buffersize", ";", "buffer", "=", "new", "char", "[", "buffersize", "]", ";", "bufline", "=", "new", "int", "[", "buffersize", "]", ";", "bufcolumn", "=", "new", "int", "[", "buffersize", "]", ";", "}", "prevCharIsLF", "=", "prevCharIsCR", "=", "false", ";", "tokenBegin", "=", "inBuf", "=", "maxNextCharInd", "=", "0", ";", "bufpos", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "Reader", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ")", "{", "ReInit", "(", "dstream", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "Reader", "dstream", ")", "{", "ReInit", "(", "dstream", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "this", "(", "encoding", "=", "=", "null", "?", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ")", ":", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ",", "encoding", ")", ",", "startline", ",", "startcolumn", ",", "buffersize", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "{", "this", "(", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ")", ",", "startline", ",", "startcolumn", ",", "buffersize", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ",", "int", "startline", ",", "int", "startcolumn", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "this", "(", "dstream", ",", "encoding", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ")", "{", "this", "(", "dstream", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "this", "(", "dstream", ",", "encoding", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ")", "{", "this", "(", "dstream", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "ReInit", "(", "encoding", "=", "=", "null", "?", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ")", ":", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ",", "encoding", ")", ",", "startline", ",", "startcolumn", ",", "buffersize", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "{", "ReInit", "(", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ")", ",", "startline", ",", "startcolumn", ",", "buffersize", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "ReInit", "(", "dstream", ",", "encoding", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ")", "{", "ReInit", "(", "dstream", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ",", "int", "startline", ",", "int", "startcolumn", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "ReInit", "(", "dstream", ",", "encoding", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ")", "{", "ReInit", "(", "dstream", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "String", "GetImage", "(", ")", "{", "if", "(", "bufpos", ">", "=", "tokenBegin", ")", "return", "new", "String", "(", "buffer", ",", "tokenBegin", ",", "bufpos", "-", "tokenBegin", "+", "1", ")", ";", "else", "return", "new", "String", "(", "buffer", ",", "tokenBegin", ",", "bufsize", "-", "tokenBegin", ")", "+", "new", "String", "(", "buffer", ",", "0", ",", "bufpos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "public", "char", "[", "]", "GetSuffix", "(", "int", "len", ")", "{", "char", "[", "]", "ret", "=", "new", "char", "[", "len", "]", ";", "if", "(", "(", "bufpos", "+", "1", ")", ">", "=", "len", ")", "System", ".", "arraycopy", "(", "buffer", ",", "bufpos", "-", "len", "+", "1", ",", "ret", ",", "0", ",", "len", ")", ";", "else", "{", "System", ".", "arraycopy", "(", "buffer", ",", "bufsize", "-", "(", "len", "-", "bufpos", "-", "1", ")", ",", "ret", ",", "0", ",", "len", "-", "bufpos", "-", "1", ")", ";", "System", ".", "arraycopy", "(", "buffer", ",", "0", ",", "ret", ",", "len", "-", "bufpos", "-", "1", ",", "bufpos", "+", "1", ")", ";", "}", "return", "ret", ";", "}", "</s>"]
["<s>", "public", "void", "Done", "(", ")", "{", "buffer", "=", "null", ";", "bufline", "=", "null", ";", "bufcolumn", "=", "null", ";", "}", "</s>"]
["<s>", "public", "void", "adjustBeginLineColumn", "(", "int", "newLine", ",", "int", "newCol", ")", "{", "int", "start", "=", "tokenBegin", ";", "int", "len", ";", "if", "(", "bufpos", ">", "=", "tokenBegin", ")", "{", "len", "=", "bufpos", "-", "tokenBegin", "+", "inBuf", "+", "1", ";", "}", "else", "{", "len", "=", "bufsize", "-", "tokenBegin", "+", "bufpos", "+", "1", "+", "inBuf", ";", "}", "int", "i", "=", "0", ",", "j", "=", "0", ",", "k", "=", "0", ";", "int", "nextColDiff", "=", "0", ",", "columnDiff", "=", "0", ";", "while", "(", "i", "<", "len", "&", "&", "bufline", "[", "j", "=", "start", "%", "bufsize", "]", "=", "=", "bufline", "[", "k", "=", "+", "+", "start", "%", "bufsize", "]", ")", "{", "bufline", "[", "j", "]", "=", "newLine", ";", "nextColDiff", "=", "columnDiff", "+", "bufcolumn", "[", "k", "]", "-", "bufcolumn", "[", "j", "]", ";", "bufcolumn", "[", "j", "]", "=", "newCol", "+", "columnDiff", ";", "columnDiff", "=", "nextColDiff", ";", "i", "+", "+", ";", "}", "if", "(", "i", "<", "len", ")", "{", "bufline", "[", "j", "]", "=", "newLine", "+", "+", ";", "bufcolumn", "[", "j", "]", "=", "newCol", "+", "columnDiff", ";", "while", "(", "i", "+", "+", "<", "len", ")", "{", "if", "(", "bufline", "[", "j", "=", "start", "%", "bufsize", "]", "!", "=", "bufline", "[", "+", "+", "start", "%", "bufsize", "]", ")", "bufline", "[", "j", "]", "=", "newLine", "+", "+", ";", "else", "bufline", "[", "j", "]", "=", "newLine", ";", "}", "}", "line", "=", "bufline", "[", "j", "]", ";", "column", "=", "bufcolumn", "[", "j", "]", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "args", "[", "]", ")", "throws", "ParseException", "{", "while", "(", "true", ")", "{", "try", "{", "DateTimeParser", "parser", "=", "new", "DateTimeParser", "(", "System", ".", "in", ")", ";", "parser", ".", "parseLine", "(", ")", ";", "}", "catch", "(", "Exception", "x", ")", "{", "x", ".", "printStackTrace", "(", ")", ";", "return", ";", "}", "}", "}", "</s>"]
["<s>", "private", "static", "int", "parseDigits", "(", "Token", "token", ")", "{", "return", "Integer", ".", "parseInt", "(", "token", ".", "image", ",", "<NUM_LIT:10>", ")", ";", "}", "</s>"]
["<s>", "private", "static", "int", "getMilitaryZoneOffset", "(", "char", "c", ")", "{", "if", "(", "ignoreMilitaryZoneOffset", ")", "return", "0", ";", "c", "=", "Character", ".", "toUpperCase", "(", "c", ")", ";", "switch", "(", "c", ")", "{", "case", "<CHAR_LIT:A>", ":", "return", "1", ";", "case", "<CHAR_LIT>", ":", "return", "<NUM_LIT:2>", ";", "case", "<CHAR_LIT>", ":", "return", "<NUM_LIT:3>", ";", "case", "<CHAR_LIT>", ":", "return", "<NUM_LIT:4>", ";", "case", "<CHAR_LIT>", ":", "return", "<NUM_LIT:5>", ";", "case", "<CHAR_LIT>", ":", "return", "<NUM_LIT:6>", ";", "case", "<CHAR_LIT>", ":", "return", "<NUM_LIT:7>", ";", "case", "<CHAR_LIT>", ":", "return", "<NUM_LIT:8>", ";", "case", "<CHAR_LIT>", ":", "return", "<NUM_LIT:9>", ";", "case", "<CHAR_LIT>", ":", "return", "<NUM_LIT:10>", ";", "case", "<CHAR_LIT>", ":", "return", "<NUM_LIT:11>", ";", "case", "<CHAR_LIT>", ":", "return", "<NUM_LIT:12>", ";", "case", "<CHAR_LIT>", ":", "return", "-", "1", ";", "case", "<CHAR_LIT>", ":", "return", "-", "<NUM_LIT:2>", ";", "case", "<CHAR_LIT>", ":", "return", "-", "<NUM_LIT:3>", ";", "case", "<CHAR_LIT>", ":", "return", "-", "<NUM_LIT:4>", ";", "case", "<CHAR_LIT>", ":", "return", "-", "<NUM_LIT:5>", ";", "case", "<CHAR_LIT>", ":", "return", "-", "<NUM_LIT:6>", ";", "case", "<CHAR_LIT>", ":", "return", "-", "<NUM_LIT:7>", ";", "case", "<CHAR_LIT>", ":", "return", "-", "<NUM_LIT:8>", ";", "case", "<CHAR_LIT>", ":", "return", "-", "<NUM_LIT:9>", ";", "case", "<CHAR_LIT>", ":", "return", "-", "<NUM_LIT:10>", ";", "case", "<CHAR_LIT>", ":", "return", "-", "<NUM_LIT:11>", ";", "case", "<CHAR_LIT>", ":", "return", "-", "<NUM_LIT:12>", ";", "case", "<CHAR_LIT:Z>", ":", "return", "0", ";", "default", ":", "return", "0", ";", "}", "}", "</s>"]
["<s>", "public", "Time", "(", "int", "hour", ",", "int", "minute", ",", "int", "second", ",", "int", "zone", ")", "{", "this", ".", "hour", "=", "hour", ";", "this", ".", "minute", "=", "minute", ";", "this", ".", "second", "=", "second", ";", "this", ".", "zone", "=", "zone", ";", "}", "</s>"]
["<s>", "public", "int", "getHour", "(", ")", "{", "return", "hour", ";", "}", "</s>"]
["<s>", "public", "int", "getMinute", "(", ")", "{", "return", "minute", ";", "}", "</s>"]
["<s>", "public", "int", "getSecond", "(", ")", "{", "return", "second", ";", "}", "</s>"]
["<s>", "public", "int", "getZone", "(", ")", "{", "return", "zone", ";", "}", "</s>"]
["<s>", "public", "Date", "(", "String", "year", ",", "int", "month", ",", "int", "day", ")", "{", "this", ".", "year", "=", "year", ";", "this", ".", "month", "=", "month", ";", "this", ".", "day", "=", "day", ";", "}", "</s>"]
["<s>", "public", "String", "getYear", "(", ")", "{", "return", "year", ";", "}", "</s>"]
["<s>", "public", "int", "getMonth", "(", ")", "{", "return", "month", ";", "}", "</s>"]
["<s>", "public", "int", "getDay", "(", ")", "{", "return", "day", ";", "}", "</s>"]
["<s>", "final", "public", "DateTime", "parseLine", "(", ")", "throws", "ParseException", "{", "DateTime", "dt", ";", "dt", "=", "date_time", "(", ")", ";", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "1", ":", "jj_consume_token", "(", "1", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "0", "]", "=", "jj_gen", ";", ";", "}", "jj_consume_token", "(", "<NUM_LIT:2>", ")", ";", "{", "if", "(", "true", ")", "return", "dt", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "final", "public", "DateTime", "parseAll", "(", ")", "throws", "ParseException", "{", "DateTime", "dt", ";", "dt", "=", "date_time", "(", ")", ";", "jj_consume_token", "(", "0", ")", ";", "{", "if", "(", "true", ")", "return", "dt", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "final", "public", "DateTime", "date_time", "(", ")", "throws", "ParseException", "{", "Date", "d", ";", "Time", "t", ";", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:4>", ":", "case", "<NUM_LIT:5>", ":", "case", "<NUM_LIT:6>", ":", "case", "<NUM_LIT:7>", ":", "case", "<NUM_LIT:8>", ":", "case", "<NUM_LIT:9>", ":", "case", "<NUM_LIT:10>", ":", "day_of_week", "(", ")", ";", "jj_consume_token", "(", "<NUM_LIT:3>", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "1", "]", "=", "jj_gen", ";", ";", "}", "d", "=", "date", "(", ")", ";", "t", "=", "time", "(", ")", ";", "{", "if", "(", "true", ")", "return", "new", "DateTime", "(", "d", ".", "getYear", "(", ")", ",", "d", ".", "getMonth", "(", ")", ",", "d", ".", "getDay", "(", ")", ",", "t", ".", "getHour", "(", ")", ",", "t", ".", "getMinute", "(", ")", ",", "t", ".", "getSecond", "(", ")", ",", "t", ".", "getZone", "(", ")", ")", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "final", "public", "String", "day_of_week", "(", ")", "throws", "ParseException", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:4>", ":", "jj_consume_token", "(", "<NUM_LIT:4>", ")", ";", "break", ";", "case", "<NUM_LIT:5>", ":", "jj_consume_token", "(", "<NUM_LIT:5>", ")", ";", "break", ";", "case", "<NUM_LIT:6>", ":", "jj_consume_token", "(", "<NUM_LIT:6>", ")", ";", "break", ";", "case", "<NUM_LIT:7>", ":", "jj_consume_token", "(", "<NUM_LIT:7>", ")", ";", "break", ";", "case", "<NUM_LIT:8>", ":", "jj_consume_token", "(", "<NUM_LIT:8>", ")", ";", "break", ";", "case", "<NUM_LIT:9>", ":", "jj_consume_token", "(", "<NUM_LIT:9>", ")", ";", "break", ";", "case", "<NUM_LIT:10>", ":", "jj_consume_token", "(", "<NUM_LIT:10>", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:2>", "]", "=", "jj_gen", ";", "jj_consume_token", "(", "-", "1", ")", ";", "throw", "new", "ParseException", "(", ")", ";", "}", "{", "if", "(", "true", ")", "return", "token", ".", "image", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "final", "public", "Date", "date", "(", ")", "throws", "ParseException", "{", "int", "d", ",", "m", ";", "String", "y", ";", "d", "=", "day", "(", ")", ";", "m", "=", "month", "(", ")", ";", "y", "=", "year", "(", ")", ";", "{", "if", "(", "true", ")", "return", "new", "Date", "(", "y", ",", "m", ",", "d", ")", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "final", "public", "int", "day", "(", ")", "throws", "ParseException", "{", "Token", "t", ";", "t", "=", "jj_consume_token", "(", "DIGITS", ")", ";", "{", "if", "(", "true", ")", "return", "parseDigits", "(", "t", ")", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "final", "public", "int", "month", "(", ")", "throws", "ParseException", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:11>", ":", "jj_consume_token", "(", "<NUM_LIT:11>", ")", ";", "{", "if", "(", "true", ")", "return", "1", ";", "}", "break", ";", "case", "<NUM_LIT:12>", ":", "jj_consume_token", "(", "<NUM_LIT:12>", ")", ";", "{", "if", "(", "true", ")", "return", "<NUM_LIT:2>", ";", "}", "break", ";", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "{", "if", "(", "true", ")", "return", "<NUM_LIT:3>", ";", "}", "break", ";", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "{", "if", "(", "true", ")", "return", "<NUM_LIT:4>", ";", "}", "break", ";", "case", "<NUM_LIT:15>", ":", "jj_consume_token", "(", "<NUM_LIT:15>", ")", ";", "{", "if", "(", "true", ")", "return", "<NUM_LIT:5>", ";", "}", "break", ";", "case", "<NUM_LIT:16>", ":", "jj_consume_token", "(", "<NUM_LIT:16>", ")", ";", "{", "if", "(", "true", ")", "return", "<NUM_LIT:6>", ";", "}", "break", ";", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "{", "if", "(", "true", ")", "return", "<NUM_LIT:7>", ";", "}", "break", ";", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "{", "if", "(", "true", ")", "return", "<NUM_LIT:8>", ";", "}", "break", ";", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "{", "if", "(", "true", ")", "return", "<NUM_LIT:9>", ";", "}", "break", ";", "case", "<NUM_LIT:20>", ":", "jj_consume_token", "(", "<NUM_LIT:20>", ")", ";", "{", "if", "(", "true", ")", "return", "<NUM_LIT:10>", ";", "}", "break", ";", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "{", "if", "(", "true", ")", "return", "<NUM_LIT:11>", ";", "}", "break", ";", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "{", "if", "(", "true", ")", "return", "<NUM_LIT:12>", ";", "}", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:3>", "]", "=", "jj_gen", ";", "jj_consume_token", "(", "-", "1", ")", ";", "throw", "new", "ParseException", "(", ")", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "final", "public", "String", "year", "(", ")", "throws", "ParseException", "{", "Token", "t", ";", "t", "=", "jj_consume_token", "(", "DIGITS", ")", ";", "{", "if", "(", "true", ")", "return", "t", ".", "image", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "final", "public", "Time", "time", "(", ")", "throws", "ParseException", "{", "int", "h", ",", "m", ",", "s", "=", "0", ",", "z", ";", "h", "=", "hour", "(", ")", ";", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "m", "=", "minute", "(", ")", ";", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "s", "=", "second", "(", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:4>", "]", "=", "jj_gen", ";", ";", "}", "z", "=", "zone", "(", ")", ";", "{", "if", "(", "true", ")", "return", "new", "Time", "(", "h", ",", "m", ",", "s", ",", "z", ")", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "final", "public", "int", "hour", "(", ")", "throws", "ParseException", "{", "Token", "t", ";", "t", "=", "jj_consume_token", "(", "DIGITS", ")", ";", "{", "if", "(", "true", ")", "return", "parseDigits", "(", "t", ")", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "final", "public", "int", "minute", "(", ")", "throws", "ParseException", "{", "Token", "t", ";", "t", "=", "jj_consume_token", "(", "DIGITS", ")", ";", "{", "if", "(", "true", ")", "return", "parseDigits", "(", "t", ")", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "final", "public", "int", "second", "(", ")", "throws", "ParseException", "{", "Token", "t", ";", "t", "=", "jj_consume_token", "(", "DIGITS", ")", ";", "{", "if", "(", "true", ")", "return", "parseDigits", "(", "t", ")", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "final", "public", "int", "zone", "(", ")", "throws", "ParseException", "{", "Token", "t", ",", "u", ";", "int", "z", ";", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "OFFSETDIR", ":", "t", "=", "jj_consume_token", "(", "OFFSETDIR", ")", ";", "u", "=", "jj_consume_token", "(", "DIGITS", ")", ";", "z", "=", "parseDigits", "(", "u", ")", "*", "(", "t", ".", "image", ".", "equals", "(", "\"", "<STR_LIT:->", "\"", ")", "?", "-", "1", ":", "1", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "case", "<NUM_LIT>", ":", "case", "<NUM_LIT>", ":", "case", "<NUM_LIT>", ":", "case", "<NUM_LIT>", ":", "case", "<NUM_LIT:30>", ":", "case", "<NUM_LIT:31>", ":", "case", "<NUM_LIT:32>", ":", "case", "<NUM_LIT>", ":", "case", "<NUM_LIT>", ":", "case", "MILITARY_ZONE", ":", "z", "=", "obs_zone", "(", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:5>", "]", "=", "jj_gen", ";", "jj_consume_token", "(", "-", "1", ")", ";", "throw", "new", "ParseException", "(", ")", ";", "}", "{", "if", "(", "true", ")", "return", "z", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "final", "public", "int", "obs_zone", "(", ")", "throws", "ParseException", "{", "Token", "t", ";", "int", "z", ";", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "z", "=", "0", ";", "break", ";", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "z", "=", "0", ";", "break", ";", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "z", "=", "-", "<NUM_LIT:5>", ";", "break", ";", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "z", "=", "-", "<NUM_LIT:4>", ";", "break", ";", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "z", "=", "-", "<NUM_LIT:6>", ";", "break", ";", "case", "<NUM_LIT:30>", ":", "jj_consume_token", "(", "<NUM_LIT:30>", ")", ";", "z", "=", "-", "<NUM_LIT:5>", ";", "break", ";", "case", "<NUM_LIT:31>", ":", "jj_consume_token", "(", "<NUM_LIT:31>", ")", ";", "z", "=", "-", "<NUM_LIT:7>", ";", "break", ";", "case", "<NUM_LIT:32>", ":", "jj_consume_token", "(", "<NUM_LIT:32>", ")", ";", "z", "=", "-", "<NUM_LIT:6>", ";", "break", ";", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "z", "=", "-", "<NUM_LIT:8>", ";", "break", ";", "case", "<NUM_LIT>", ":", "jj_consume_token", "(", "<NUM_LIT>", ")", ";", "z", "=", "-", "<NUM_LIT:7>", ";", "break", ";", "case", "MILITARY_ZONE", ":", "t", "=", "jj_consume_token", "(", "MILITARY_ZONE", ")", ";", "z", "=", "getMilitaryZoneOffset", "(", "t", ".", "image", ".", "charAt", "(", "0", ")", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:6>", "]", "=", "jj_gen", ";", "jj_consume_token", "(", "-", "1", ")", ";", "throw", "new", "ParseException", "(", ")", ";", "}", "{", "if", "(", "true", ")", "return", "z", "*", "<NUM_LIT:100>", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "jj_la1_0", "(", ")", "{", "jj_la1_0", "=", "new", "int", "[", "]", "{", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "}", ";", "}", "</s>"]
["<s>", "private", "static", "void", "jj_la1_1", "(", ")", "{", "jj_la1_1", "=", "new", "int", "[", "]", "{", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "}", ";", "}", "</s>"]
["<s>", "public", "DateTimeParser", "(", "java", ".", "io", ".", "InputStream", "stream", ")", "{", "this", "(", "stream", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "DateTimeParser", "(", "java", ".", "io", ".", "InputStream", "stream", ",", "String", "encoding", ")", "{", "try", "{", "jj_input_stream", "=", "new", "SimpleCharStream", "(", "stream", ",", "encoding", ",", "1", ",", "1", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "UnsupportedEncodingException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "token_source", "=", "new", "DateTimeParserTokenManager", "(", "jj_input_stream", ")", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:7>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "stream", ")", "{", "ReInit", "(", "stream", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "stream", ",", "String", "encoding", ")", "{", "try", "{", "jj_input_stream", ".", "ReInit", "(", "stream", ",", "encoding", ",", "1", ",", "1", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "UnsupportedEncodingException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "token_source", ".", "ReInit", "(", "jj_input_stream", ")", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:7>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "DateTimeParser", "(", "java", ".", "io", ".", "Reader", "stream", ")", "{", "jj_input_stream", "=", "new", "SimpleCharStream", "(", "stream", ",", "1", ",", "1", ")", ";", "token_source", "=", "new", "DateTimeParserTokenManager", "(", "jj_input_stream", ")", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:7>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "Reader", "stream", ")", "{", "jj_input_stream", ".", "ReInit", "(", "stream", ",", "1", ",", "1", ")", ";", "token_source", ".", "ReInit", "(", "jj_input_stream", ")", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:7>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "DateTimeParser", "(", "DateTimeParserTokenManager", "tm", ")", "{", "token_source", "=", "tm", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:7>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "DateTimeParserTokenManager", "tm", ")", "{", "token_source", "=", "tm", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:7>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "}", "</s>"]
["<s>", "final", "private", "Token", "jj_consume_token", "(", "int", "kind", ")", "throws", "ParseException", "{", "Token", "oldToken", ";", "if", "(", "(", "oldToken", "=", "token", ")", ".", "next", "!", "=", "null", ")", "token", "=", "token", ".", "next", ";", "else", "token", "=", "token", ".", "next", "=", "token_source", ".", "getNextToken", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "if", "(", "token", ".", "kind", "=", "=", "kind", ")", "{", "jj_gen", "+", "+", ";", "return", "token", ";", "}", "token", "=", "oldToken", ";", "jj_kind", "=", "kind", ";", "throw", "generateParseException", "(", ")", ";", "}", "</s>"]
["<s>", "final", "public", "Token", "getNextToken", "(", ")", "{", "if", "(", "token", ".", "next", "!", "=", "null", ")", "token", "=", "token", ".", "next", ";", "else", "token", "=", "token", ".", "next", "=", "token_source", ".", "getNextToken", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "+", "+", ";", "return", "token", ";", "}", "</s>"]
["<s>", "final", "public", "Token", "getToken", "(", "int", "index", ")", "{", "Token", "t", "=", "token", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "index", ";", "i", "+", "+", ")", "{", "if", "(", "t", ".", "next", "!", "=", "null", ")", "t", "=", "t", ".", "next", ";", "else", "t", "=", "t", ".", "next", "=", "token_source", ".", "getNextToken", "(", ")", ";", "}", "return", "t", ";", "}", "</s>"]
["<s>", "final", "private", "int", "jj_ntk", "(", ")", "{", "if", "(", "(", "jj_nt", "=", "token", ".", "next", ")", "=", "=", "null", ")", "return", "(", "jj_ntk", "=", "(", "token", ".", "next", "=", "token_source", ".", "getNextToken", "(", ")", ")", ".", "kind", ")", ";", "else", "return", "(", "jj_ntk", "=", "jj_nt", ".", "kind", ")", ";", "}", "</s>"]
["<s>", "public", "ParseException", "generateParseException", "(", ")", "{", "jj_expentries", ".", "removeAllElements", "(", ")", ";", "boolean", "[", "]", "la1tokens", "=", "new", "boolean", "[", "<NUM_LIT>", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT>", ";", "i", "+", "+", ")", "{", "la1tokens", "[", "i", "]", "=", "false", ";", "}", "if", "(", "jj_kind", ">", "=", "0", ")", "{", "la1tokens", "[", "jj_kind", "]", "=", "true", ";", "jj_kind", "=", "-", "1", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:7>", ";", "i", "+", "+", ")", "{", "if", "(", "jj_la1", "[", "i", "]", "=", "=", "jj_gen", ")", "{", "for", "(", "int", "j", "=", "0", ";", "j", "<", "<NUM_LIT:32>", ";", "j", "+", "+", ")", "{", "if", "(", "(", "jj_la1_0", "[", "i", "]", "&", "(", "1", "<", "<", "j", ")", ")", "!", "=", "0", ")", "{", "la1tokens", "[", "j", "]", "=", "true", ";", "}", "if", "(", "(", "jj_la1_1", "[", "i", "]", "&", "(", "1", "<", "<", "j", ")", ")", "!", "=", "0", ")", "{", "la1tokens", "[", "<NUM_LIT:32>", "+", "j", "]", "=", "true", ";", "}", "}", "}", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT>", ";", "i", "+", "+", ")", "{", "if", "(", "la1tokens", "[", "i", "]", ")", "{", "jj_expentry", "=", "new", "int", "[", "1", "]", ";", "jj_expentry", "[", "0", "]", "=", "i", ";", "jj_expentries", ".", "addElement", "(", "jj_expentry", ")", ";", "}", "}", "int", "[", "]", "[", "]", "exptokseq", "=", "new", "int", "[", "jj_expentries", ".", "size", "(", ")", "]", "[", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "jj_expentries", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "exptokseq", "[", "i", "]", "=", "(", "int", "[", "]", ")", "jj_expentries", ".", "elementAt", "(", "i", ")", ";", "}", "return", "new", "ParseException", "(", "token", ",", "exptokseq", ",", "tokenImage", ")", ";", "}", "</s>"]
["<s>", "final", "public", "void", "enable_tracing", "(", ")", "{", "}", "</s>"]
["<s>", "final", "public", "void", "disable_tracing", "(", ")", "{", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "image", ";", "}", "</s>"]
["<s>", "public", "static", "final", "Token", "newToken", "(", "int", "ofKind", ")", "{", "switch", "(", "ofKind", ")", "{", "default", ":", "return", "new", "Token", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "String", "getType", "(", ")", "{", "return", "type", ";", "}", "</s>"]
["<s>", "public", "String", "getSubType", "(", ")", "{", "return", "subtype", ";", "}", "</s>"]
["<s>", "public", "ArrayList", "getParamNames", "(", ")", "{", "return", "paramNames", ";", "}", "</s>"]
["<s>", "public", "ArrayList", "getParamValues", "(", ")", "{", "return", "paramValues", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "args", "[", "]", ")", "throws", "ParseException", "{", "while", "(", "true", ")", "{", "try", "{", "ContentTypeParser", "parser", "=", "new", "ContentTypeParser", "(", "System", ".", "in", ")", ";", "parser", ".", "parseLine", "(", ")", ";", "}", "catch", "(", "Exception", "x", ")", "{", "x", ".", "printStackTrace", "(", ")", ";", "return", ";", "}", "}", "}", "</s>"]
["<s>", "final", "public", "void", "parseLine", "(", ")", "throws", "ParseException", "{", "parse", "(", ")", ";", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "1", ":", "jj_consume_token", "(", "1", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "0", "]", "=", "jj_gen", ";", ";", "}", "jj_consume_token", "(", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "final", "public", "void", "parseAll", "(", ")", "throws", "ParseException", "{", "parse", "(", ")", ";", "jj_consume_token", "(", "0", ")", ";", "}", "</s>"]
["<s>", "final", "public", "void", "parse", "(", ")", "throws", "ParseException", "{", "Token", "type", ";", "Token", "subtype", ";", "type", "=", "jj_consume_token", "(", "ATOKEN", ")", ";", "jj_consume_token", "(", "<NUM_LIT:3>", ")", ";", "subtype", "=", "jj_consume_token", "(", "ATOKEN", ")", ";", "this", ".", "type", "=", "type", ".", "image", ";", "this", ".", "subtype", "=", "subtype", ".", "image", ";", "label_1", ":", "while", "(", "true", ")", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:4>", ":", ";", "break", ";", "default", ":", "jj_la1", "[", "1", "]", "=", "jj_gen", ";", "break", "label_1", ";", "}", "jj_consume_token", "(", "<NUM_LIT:4>", ")", ";", "parameter", "(", ")", ";", "}", "}", "</s>"]
["<s>", "final", "public", "void", "parameter", "(", ")", "throws", "ParseException", "{", "Token", "attrib", ";", "String", "val", ";", "attrib", "=", "jj_consume_token", "(", "ATOKEN", ")", ";", "jj_consume_token", "(", "<NUM_LIT:5>", ")", ";", "val", "=", "value", "(", ")", ";", "paramNames", ".", "add", "(", "attrib", ".", "image", ")", ";", "paramValues", ".", "add", "(", "val", ")", ";", "}", "</s>"]
["<s>", "final", "public", "String", "value", "(", ")", "throws", "ParseException", "{", "Token", "t", ";", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "ATOKEN", ":", "t", "=", "jj_consume_token", "(", "ATOKEN", ")", ";", "break", ";", "case", "QUOTEDSTRING", ":", "t", "=", "jj_consume_token", "(", "QUOTEDSTRING", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:2>", "]", "=", "jj_gen", ";", "jj_consume_token", "(", "-", "1", ")", ";", "throw", "new", "ParseException", "(", ")", ";", "}", "{", "if", "(", "true", ")", "return", "t", ".", "image", ";", "}", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "jj_la1_0", "(", ")", "{", "jj_la1_0", "=", "new", "int", "[", "]", "{", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "}", ";", "}", "</s>"]
["<s>", "public", "ContentTypeParser", "(", "java", ".", "io", ".", "InputStream", "stream", ")", "{", "this", "(", "stream", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "ContentTypeParser", "(", "java", ".", "io", ".", "InputStream", "stream", ",", "String", "encoding", ")", "{", "try", "{", "jj_input_stream", "=", "new", "SimpleCharStream", "(", "stream", ",", "encoding", ",", "1", ",", "1", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "UnsupportedEncodingException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "token_source", "=", "new", "ContentTypeParserTokenManager", "(", "jj_input_stream", ")", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:3>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "stream", ")", "{", "ReInit", "(", "stream", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "stream", ",", "String", "encoding", ")", "{", "try", "{", "jj_input_stream", ".", "ReInit", "(", "stream", ",", "encoding", ",", "1", ",", "1", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "UnsupportedEncodingException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "token_source", ".", "ReInit", "(", "jj_input_stream", ")", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:3>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "ContentTypeParser", "(", "java", ".", "io", ".", "Reader", "stream", ")", "{", "jj_input_stream", "=", "new", "SimpleCharStream", "(", "stream", ",", "1", ",", "1", ")", ";", "token_source", "=", "new", "ContentTypeParserTokenManager", "(", "jj_input_stream", ")", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:3>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "Reader", "stream", ")", "{", "jj_input_stream", ".", "ReInit", "(", "stream", ",", "1", ",", "1", ")", ";", "token_source", ".", "ReInit", "(", "jj_input_stream", ")", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:3>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "ContentTypeParser", "(", "ContentTypeParserTokenManager", "tm", ")", "{", "token_source", "=", "tm", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:3>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "ContentTypeParserTokenManager", "tm", ")", "{", "token_source", "=", "tm", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:3>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "}", "</s>"]
["<s>", "final", "private", "Token", "jj_consume_token", "(", "int", "kind", ")", "throws", "ParseException", "{", "Token", "oldToken", ";", "if", "(", "(", "oldToken", "=", "token", ")", ".", "next", "!", "=", "null", ")", "token", "=", "token", ".", "next", ";", "else", "token", "=", "token", ".", "next", "=", "token_source", ".", "getNextToken", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "if", "(", "token", ".", "kind", "=", "=", "kind", ")", "{", "jj_gen", "+", "+", ";", "return", "token", ";", "}", "token", "=", "oldToken", ";", "jj_kind", "=", "kind", ";", "throw", "generateParseException", "(", ")", ";", "}", "</s>"]
["<s>", "final", "public", "Token", "getNextToken", "(", ")", "{", "if", "(", "token", ".", "next", "!", "=", "null", ")", "token", "=", "token", ".", "next", ";", "else", "token", "=", "token", ".", "next", "=", "token_source", ".", "getNextToken", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "+", "+", ";", "return", "token", ";", "}", "</s>"]
["<s>", "final", "public", "Token", "getToken", "(", "int", "index", ")", "{", "Token", "t", "=", "token", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "index", ";", "i", "+", "+", ")", "{", "if", "(", "t", ".", "next", "!", "=", "null", ")", "t", "=", "t", ".", "next", ";", "else", "t", "=", "t", ".", "next", "=", "token_source", ".", "getNextToken", "(", ")", ";", "}", "return", "t", ";", "}", "</s>"]
["<s>", "final", "private", "int", "jj_ntk", "(", ")", "{", "if", "(", "(", "jj_nt", "=", "token", ".", "next", ")", "=", "=", "null", ")", "return", "(", "jj_ntk", "=", "(", "token", ".", "next", "=", "token_source", ".", "getNextToken", "(", ")", ")", ".", "kind", ")", ";", "else", "return", "(", "jj_ntk", "=", "jj_nt", ".", "kind", ")", ";", "}", "</s>"]
["<s>", "public", "ParseException", "generateParseException", "(", ")", "{", "jj_expentries", ".", "removeAllElements", "(", ")", ";", "boolean", "[", "]", "la1tokens", "=", "new", "boolean", "[", "<NUM_LIT:24>", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:24>", ";", "i", "+", "+", ")", "{", "la1tokens", "[", "i", "]", "=", "false", ";", "}", "if", "(", "jj_kind", ">", "=", "0", ")", "{", "la1tokens", "[", "jj_kind", "]", "=", "true", ";", "jj_kind", "=", "-", "1", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:3>", ";", "i", "+", "+", ")", "{", "if", "(", "jj_la1", "[", "i", "]", "=", "=", "jj_gen", ")", "{", "for", "(", "int", "j", "=", "0", ";", "j", "<", "<NUM_LIT:32>", ";", "j", "+", "+", ")", "{", "if", "(", "(", "jj_la1_0", "[", "i", "]", "&", "(", "1", "<", "<", "j", ")", ")", "!", "=", "0", ")", "{", "la1tokens", "[", "j", "]", "=", "true", ";", "}", "}", "}", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:24>", ";", "i", "+", "+", ")", "{", "if", "(", "la1tokens", "[", "i", "]", ")", "{", "jj_expentry", "=", "new", "int", "[", "1", "]", ";", "jj_expentry", "[", "0", "]", "=", "i", ";", "jj_expentries", ".", "addElement", "(", "jj_expentry", ")", ";", "}", "}", "int", "[", "]", "[", "]", "exptokseq", "=", "new", "int", "[", "jj_expentries", ".", "size", "(", ")", "]", "[", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "jj_expentries", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "exptokseq", "[", "i", "]", "=", "(", "int", "[", "]", ")", "jj_expentries", ".", "elementAt", "(", "i", ")", ";", "}", "return", "new", "ParseException", "(", "token", ",", "exptokseq", ",", "tokenImage", ")", ";", "}", "</s>"]
["<s>", "final", "public", "void", "enable_tracing", "(", ")", "{", "}", "</s>"]
["<s>", "final", "public", "void", "disable_tracing", "(", ")", "{", "}", "</s>"]
["<s>", "protected", "static", "final", "String", "addEscapes", "(", "String", "str", ")", "{", "StringBuffer", "retval", "=", "new", "StringBuffer", "(", ")", ";", "char", "ch", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "str", ".", "length", "(", ")", ";", "i", "+", "+", ")", "{", "switch", "(", "str", ".", "charAt", "(", "i", ")", ")", "{", "case", "0", ":", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\t>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\n>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\\">", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "'", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\\\>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "\"", ")", ";", "continue", ";", "default", ":", "if", "(", "(", "ch", "=", "str", ".", "charAt", "(", "i", ")", ")", "<", "<NUM_LIT>", "|", "|", "ch", ">", "<NUM_LIT>", ")", "{", "String", "s", "=", "\"", "<STR_LIT>", "\"", "+", "Integer", ".", "toString", "(", "ch", ",", "<NUM_LIT:16>", ")", ";", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "s", ".", "substring", "(", "s", ".", "length", "(", ")", "-", "<NUM_LIT:4>", ",", "s", ".", "length", "(", ")", ")", ")", ";", "}", "else", "{", "retval", ".", "append", "(", "ch", ")", ";", "}", "continue", ";", "}", "}", "return", "retval", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "static", "String", "LexicalError", "(", "boolean", "EOFSeen", ",", "int", "lexState", ",", "int", "errorLine", ",", "int", "errorColumn", ",", "String", "errorAfter", ",", "char", "curChar", ")", "{", "return", "(", "\"", "<STR_LIT>", "\"", "+", "errorLine", "+", "\"", "<STR_LIT>", "\"", "+", "errorColumn", "+", "\"", "<STR_LIT>", "\"", "+", "(", "EOFSeen", "?", "\"", "<STR_LIT>", "\"", ":", "(", "\"", "<STR_LIT:\\\">", "\"", "+", "addEscapes", "(", "String", ".", "valueOf", "(", "curChar", ")", ")", "+", "\"", "<STR_LIT:\\\">", "\"", ")", "+", "\"", "<STR_LIT>", "\"", "+", "(", "int", ")", "curChar", "+", "\"", "<STR_LIT>", "\"", ")", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "addEscapes", "(", "errorAfter", ")", "+", "\"", "<STR_LIT:\\\">", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getMessage", "(", ")", "{", "return", "super", ".", "getMessage", "(", ")", ";", "}", "</s>"]
["<s>", "public", "TokenMgrError", "(", ")", "{", "}", "</s>"]
["<s>", "public", "TokenMgrError", "(", "String", "message", ",", "int", "reason", ")", "{", "super", "(", "message", ")", ";", "errorCode", "=", "reason", ";", "}", "</s>"]
["<s>", "public", "TokenMgrError", "(", "boolean", "EOFSeen", ",", "int", "lexState", ",", "int", "errorLine", ",", "int", "errorColumn", ",", "String", "errorAfter", ",", "char", "curChar", ",", "int", "reason", ")", "{", "this", "(", "LexicalError", "(", "EOFSeen", ",", "lexState", ",", "errorLine", ",", "errorColumn", ",", "errorAfter", ",", "curChar", ")", ",", "reason", ")", ";", "}", "</s>"]
["<s>", "public", "ParseException", "(", "Token", "currentTokenVal", ",", "int", "[", "]", "[", "]", "expectedTokenSequencesVal", ",", "String", "[", "]", "tokenImageVal", ")", "{", "super", "(", "\"", "\"", ")", ";", "specialConstructor", "=", "true", ";", "currentToken", "=", "currentTokenVal", ";", "expectedTokenSequences", "=", "expectedTokenSequencesVal", ";", "tokenImage", "=", "tokenImageVal", ";", "}", "</s>"]
["<s>", "public", "ParseException", "(", ")", "{", "super", "(", ")", ";", "specialConstructor", "=", "false", ";", "}", "</s>"]
["<s>", "public", "ParseException", "(", "String", "message", ")", "{", "super", "(", "message", ")", ";", "specialConstructor", "=", "false", ";", "}", "</s>"]
["<s>", "public", "String", "getMessage", "(", ")", "{", "if", "(", "!", "specialConstructor", ")", "{", "return", "super", ".", "getMessage", "(", ")", ";", "}", "StringBuffer", "expected", "=", "new", "StringBuffer", "(", ")", ";", "int", "maxSize", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "expectedTokenSequences", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "maxSize", "<", "expectedTokenSequences", "[", "i", "]", ".", "length", ")", "{", "maxSize", "=", "expectedTokenSequences", "[", "i", "]", ".", "length", ";", "}", "for", "(", "int", "j", "=", "0", ";", "j", "<", "expectedTokenSequences", "[", "i", "]", ".", "length", ";", "j", "+", "+", ")", "{", "expected", ".", "append", "(", "tokenImage", "[", "expectedTokenSequences", "[", "i", "]", "[", "j", "]", "]", ")", ".", "append", "(", "\"", "\"", ")", ";", "}", "if", "(", "expectedTokenSequences", "[", "i", "]", "[", "expectedTokenSequences", "[", "i", "]", ".", "length", "-", "1", "]", "!", "=", "0", ")", "{", "expected", ".", "append", "(", "\"", "<STR_LIT:...>", "\"", ")", ";", "}", "expected", ".", "append", "(", "eol", ")", ".", "append", "(", "\"", "\"", ")", ";", "}", "String", "retval", "=", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ";", "Token", "tok", "=", "currentToken", ".", "next", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "maxSize", ";", "i", "+", "+", ")", "{", "if", "(", "i", "!", "=", "0", ")", "retval", "+", "=", "\"", "\"", ";", "if", "(", "tok", ".", "kind", "=", "=", "0", ")", "{", "retval", "+", "=", "tokenImage", "[", "0", "]", ";", "break", ";", "}", "retval", "+", "=", "add_escapes", "(", "tok", ".", "image", ")", ";", "tok", "=", "tok", ".", "next", ";", "}", "retval", "+", "=", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "currentToken", ".", "next", ".", "beginLine", "+", "\"", "<STR_LIT>", "\"", "+", "currentToken", ".", "next", ".", "beginColumn", ";", "retval", "+", "=", "\"", "<STR_LIT:.>", "\"", "+", "eol", ";", "if", "(", "expectedTokenSequences", ".", "length", "=", "=", "1", ")", "{", "retval", "+", "=", "\"", "<STR_LIT>", "\"", "+", "eol", "+", "\"", "\"", ";", "}", "else", "{", "retval", "+", "=", "\"", "<STR_LIT>", "\"", "+", "eol", "+", "\"", "\"", ";", "}", "retval", "+", "=", "expected", ".", "toString", "(", ")", ";", "return", "retval", ";", "}", "</s>"]
["<s>", "protected", "String", "add_escapes", "(", "String", "str", ")", "{", "StringBuffer", "retval", "=", "new", "StringBuffer", "(", ")", ";", "char", "ch", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "str", ".", "length", "(", ")", ";", "i", "+", "+", ")", "{", "switch", "(", "str", ".", "charAt", "(", "i", ")", ")", "{", "case", "0", ":", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\t>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\n>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\\">", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "'", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\\\>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "\"", ")", ";", "continue", ";", "default", ":", "if", "(", "(", "ch", "=", "str", ".", "charAt", "(", "i", ")", ")", "<", "<NUM_LIT>", "|", "|", "ch", ">", "<NUM_LIT>", ")", "{", "String", "s", "=", "\"", "<STR_LIT>", "\"", "+", "Integer", ".", "toString", "(", "ch", ",", "<NUM_LIT:16>", ")", ";", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "s", ".", "substring", "(", "s", ".", "length", "(", ")", "-", "<NUM_LIT:4>", ",", "s", ".", "length", "(", ")", ")", ")", ";", "}", "else", "{", "retval", ".", "append", "(", "ch", ")", ";", "}", "continue", ";", "}", "}", "return", "retval", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "setTabSize", "(", "int", "i", ")", "{", "tabSize", "=", "i", ";", "}", "</s>"]
["<s>", "protected", "int", "getTabSize", "(", "int", "i", ")", "{", "return", "tabSize", ";", "}", "</s>"]
["<s>", "protected", "void", "ExpandBuff", "(", "boolean", "wrapAround", ")", "{", "char", "[", "]", "newbuffer", "=", "new", "char", "[", "bufsize", "+", "<NUM_LIT>", "]", ";", "int", "newbufline", "[", "]", "=", "new", "int", "[", "bufsize", "+", "<NUM_LIT>", "]", ";", "int", "newbufcolumn", "[", "]", "=", "new", "int", "[", "bufsize", "+", "<NUM_LIT>", "]", ";", "try", "{", "if", "(", "wrapAround", ")", "{", "System", ".", "arraycopy", "(", "buffer", ",", "tokenBegin", ",", "newbuffer", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "System", ".", "arraycopy", "(", "buffer", ",", "0", ",", "newbuffer", ",", "bufsize", "-", "tokenBegin", ",", "bufpos", ")", ";", "buffer", "=", "newbuffer", ";", "System", ".", "arraycopy", "(", "bufline", ",", "tokenBegin", ",", "newbufline", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "System", ".", "arraycopy", "(", "bufline", ",", "0", ",", "newbufline", ",", "bufsize", "-", "tokenBegin", ",", "bufpos", ")", ";", "bufline", "=", "newbufline", ";", "System", ".", "arraycopy", "(", "bufcolumn", ",", "tokenBegin", ",", "newbufcolumn", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "System", ".", "arraycopy", "(", "bufcolumn", ",", "0", ",", "newbufcolumn", ",", "bufsize", "-", "tokenBegin", ",", "bufpos", ")", ";", "bufcolumn", "=", "newbufcolumn", ";", "maxNextCharInd", "=", "(", "bufpos", "+", "=", "(", "bufsize", "-", "tokenBegin", ")", ")", ";", "}", "else", "{", "System", ".", "arraycopy", "(", "buffer", ",", "tokenBegin", ",", "newbuffer", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "buffer", "=", "newbuffer", ";", "System", ".", "arraycopy", "(", "bufline", ",", "tokenBegin", ",", "newbufline", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "bufline", "=", "newbufline", ";", "System", ".", "arraycopy", "(", "bufcolumn", ",", "tokenBegin", ",", "newbufcolumn", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "bufcolumn", "=", "newbufcolumn", ";", "maxNextCharInd", "=", "(", "bufpos", "-", "=", "tokenBegin", ")", ";", "}", "}", "catch", "(", "Throwable", "t", ")", "{", "throw", "new", "Error", "(", "t", ".", "getMessage", "(", ")", ")", ";", "}", "bufsize", "+", "=", "<NUM_LIT>", ";", "available", "=", "bufsize", ";", "tokenBegin", "=", "0", ";", "}", "</s>"]
["<s>", "protected", "void", "FillBuff", "(", ")", "throws", "java", ".", "io", ".", "IOException", "{", "if", "(", "maxNextCharInd", "=", "=", "available", ")", "{", "if", "(", "available", "=", "=", "bufsize", ")", "{", "if", "(", "tokenBegin", ">", "<NUM_LIT>", ")", "{", "bufpos", "=", "maxNextCharInd", "=", "0", ";", "available", "=", "tokenBegin", ";", "}", "else", "if", "(", "tokenBegin", "<", "0", ")", "bufpos", "=", "maxNextCharInd", "=", "0", ";", "else", "ExpandBuff", "(", "false", ")", ";", "}", "else", "if", "(", "available", ">", "tokenBegin", ")", "available", "=", "bufsize", ";", "else", "if", "(", "(", "tokenBegin", "-", "available", ")", "<", "<NUM_LIT>", ")", "ExpandBuff", "(", "true", ")", ";", "else", "available", "=", "tokenBegin", ";", "}", "int", "i", ";", "try", "{", "if", "(", "(", "i", "=", "inputStream", ".", "read", "(", "buffer", ",", "maxNextCharInd", ",", "available", "-", "maxNextCharInd", ")", ")", "=", "=", "-", "1", ")", "{", "inputStream", ".", "close", "(", ")", ";", "throw", "new", "java", ".", "io", ".", "IOException", "(", ")", ";", "}", "else", "maxNextCharInd", "+", "=", "i", ";", "return", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "-", "-", "bufpos", ";", "backup", "(", "0", ")", ";", "if", "(", "tokenBegin", "=", "=", "-", "1", ")", "tokenBegin", "=", "bufpos", ";", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "public", "char", "BeginToken", "(", ")", "throws", "java", ".", "io", ".", "IOException", "{", "tokenBegin", "=", "-", "1", ";", "char", "c", "=", "readChar", "(", ")", ";", "tokenBegin", "=", "bufpos", ";", "return", "c", ";", "}", "</s>"]
["<s>", "protected", "void", "UpdateLineColumn", "(", "char", "c", ")", "{", "column", "+", "+", ";", "if", "(", "prevCharIsLF", ")", "{", "prevCharIsLF", "=", "false", ";", "line", "+", "=", "(", "column", "=", "1", ")", ";", "}", "else", "if", "(", "prevCharIsCR", ")", "{", "prevCharIsCR", "=", "false", ";", "if", "(", "c", "=", "=", "<STR_LIT:\\n>", ")", "{", "prevCharIsLF", "=", "true", ";", "}", "else", "line", "+", "=", "(", "column", "=", "1", ")", ";", "}", "switch", "(", "c", ")", "{", "case", "<STR_LIT>", ":", "prevCharIsCR", "=", "true", ";", "break", ";", "case", "<STR_LIT:\\n>", ":", "prevCharIsLF", "=", "true", ";", "break", ";", "case", "<STR_LIT:\\t>", ":", "column", "-", "-", ";", "column", "+", "=", "(", "tabSize", "-", "(", "column", "%", "tabSize", ")", ")", ";", "break", ";", "default", ":", "break", ";", "}", "bufline", "[", "bufpos", "]", "=", "line", ";", "bufcolumn", "[", "bufpos", "]", "=", "column", ";", "}", "</s>"]
["<s>", "public", "char", "readChar", "(", ")", "throws", "java", ".", "io", ".", "IOException", "{", "if", "(", "inBuf", ">", "0", ")", "{", "-", "-", "inBuf", ";", "if", "(", "+", "+", "bufpos", "=", "=", "bufsize", ")", "bufpos", "=", "0", ";", "return", "buffer", "[", "bufpos", "]", ";", "}", "if", "(", "+", "+", "bufpos", ">", "=", "maxNextCharInd", ")", "FillBuff", "(", ")", ";", "char", "c", "=", "buffer", "[", "bufpos", "]", ";", "UpdateLineColumn", "(", "c", ")", ";", "return", "(", "c", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getColumn", "(", ")", "{", "return", "bufcolumn", "[", "bufpos", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getLine", "(", ")", "{", "return", "bufline", "[", "bufpos", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getEndColumn", "(", ")", "{", "return", "bufcolumn", "[", "bufpos", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getEndLine", "(", ")", "{", "return", "bufline", "[", "bufpos", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getBeginColumn", "(", ")", "{", "return", "bufcolumn", "[", "tokenBegin", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getBeginLine", "(", ")", "{", "return", "bufline", "[", "tokenBegin", "]", ";", "}", "</s>"]
["<s>", "public", "void", "backup", "(", "int", "amount", ")", "{", "inBuf", "+", "=", "amount", ";", "if", "(", "(", "bufpos", "-", "=", "amount", ")", "<", "0", ")", "bufpos", "+", "=", "bufsize", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "Reader", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "{", "inputStream", "=", "dstream", ";", "line", "=", "startline", ";", "column", "=", "startcolumn", "-", "1", ";", "available", "=", "bufsize", "=", "buffersize", ";", "buffer", "=", "new", "char", "[", "buffersize", "]", ";", "bufline", "=", "new", "int", "[", "buffersize", "]", ";", "bufcolumn", "=", "new", "int", "[", "buffersize", "]", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "Reader", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ")", "{", "this", "(", "dstream", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "Reader", "dstream", ")", "{", "this", "(", "dstream", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "Reader", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "{", "inputStream", "=", "dstream", ";", "line", "=", "startline", ";", "column", "=", "startcolumn", "-", "1", ";", "if", "(", "buffer", "=", "=", "null", "|", "|", "buffersize", "!", "=", "buffer", ".", "length", ")", "{", "available", "=", "bufsize", "=", "buffersize", ";", "buffer", "=", "new", "char", "[", "buffersize", "]", ";", "bufline", "=", "new", "int", "[", "buffersize", "]", ";", "bufcolumn", "=", "new", "int", "[", "buffersize", "]", ";", "}", "prevCharIsLF", "=", "prevCharIsCR", "=", "false", ";", "tokenBegin", "=", "inBuf", "=", "maxNextCharInd", "=", "0", ";", "bufpos", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "Reader", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ")", "{", "ReInit", "(", "dstream", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "Reader", "dstream", ")", "{", "ReInit", "(", "dstream", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "this", "(", "encoding", "=", "=", "null", "?", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ")", ":", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ",", "encoding", ")", ",", "startline", ",", "startcolumn", ",", "buffersize", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "{", "this", "(", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ")", ",", "startline", ",", "startcolumn", ",", "buffersize", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ",", "int", "startline", ",", "int", "startcolumn", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "this", "(", "dstream", ",", "encoding", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ")", "{", "this", "(", "dstream", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "this", "(", "dstream", ",", "encoding", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ")", "{", "this", "(", "dstream", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "ReInit", "(", "encoding", "=", "=", "null", "?", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ")", ":", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ",", "encoding", ")", ",", "startline", ",", "startcolumn", ",", "buffersize", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "{", "ReInit", "(", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ")", ",", "startline", ",", "startcolumn", ",", "buffersize", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "ReInit", "(", "dstream", ",", "encoding", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ")", "{", "ReInit", "(", "dstream", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ",", "int", "startline", ",", "int", "startcolumn", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "ReInit", "(", "dstream", ",", "encoding", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ")", "{", "ReInit", "(", "dstream", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "String", "GetImage", "(", ")", "{", "if", "(", "bufpos", ">", "=", "tokenBegin", ")", "return", "new", "String", "(", "buffer", ",", "tokenBegin", ",", "bufpos", "-", "tokenBegin", "+", "1", ")", ";", "else", "return", "new", "String", "(", "buffer", ",", "tokenBegin", ",", "bufsize", "-", "tokenBegin", ")", "+", "new", "String", "(", "buffer", ",", "0", ",", "bufpos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "public", "char", "[", "]", "GetSuffix", "(", "int", "len", ")", "{", "char", "[", "]", "ret", "=", "new", "char", "[", "len", "]", ";", "if", "(", "(", "bufpos", "+", "1", ")", ">", "=", "len", ")", "System", ".", "arraycopy", "(", "buffer", ",", "bufpos", "-", "len", "+", "1", ",", "ret", ",", "0", ",", "len", ")", ";", "else", "{", "System", ".", "arraycopy", "(", "buffer", ",", "bufsize", "-", "(", "len", "-", "bufpos", "-", "1", ")", ",", "ret", ",", "0", ",", "len", "-", "bufpos", "-", "1", ")", ";", "System", ".", "arraycopy", "(", "buffer", ",", "0", ",", "ret", ",", "len", "-", "bufpos", "-", "1", ",", "bufpos", "+", "1", ")", ";", "}", "return", "ret", ";", "}", "</s>"]
["<s>", "public", "void", "Done", "(", ")", "{", "buffer", "=", "null", ";", "bufline", "=", "null", ";", "bufcolumn", "=", "null", ";", "}", "</s>"]
["<s>", "public", "void", "adjustBeginLineColumn", "(", "int", "newLine", ",", "int", "newCol", ")", "{", "int", "start", "=", "tokenBegin", ";", "int", "len", ";", "if", "(", "bufpos", ">", "=", "tokenBegin", ")", "{", "len", "=", "bufpos", "-", "tokenBegin", "+", "inBuf", "+", "1", ";", "}", "else", "{", "len", "=", "bufsize", "-", "tokenBegin", "+", "bufpos", "+", "1", "+", "inBuf", ";", "}", "int", "i", "=", "0", ",", "j", "=", "0", ",", "k", "=", "0", ";", "int", "nextColDiff", "=", "0", ",", "columnDiff", "=", "0", ";", "while", "(", "i", "<", "len", "&", "&", "bufline", "[", "j", "=", "start", "%", "bufsize", "]", "=", "=", "bufline", "[", "k", "=", "+", "+", "start", "%", "bufsize", "]", ")", "{", "bufline", "[", "j", "]", "=", "newLine", ";", "nextColDiff", "=", "columnDiff", "+", "bufcolumn", "[", "k", "]", "-", "bufcolumn", "[", "j", "]", ";", "bufcolumn", "[", "j", "]", "=", "newCol", "+", "columnDiff", ";", "columnDiff", "=", "nextColDiff", ";", "i", "+", "+", ";", "}", "if", "(", "i", "<", "len", ")", "{", "bufline", "[", "j", "]", "=", "newLine", "+", "+", ";", "bufcolumn", "[", "j", "]", "=", "newCol", "+", "columnDiff", ";", "while", "(", "i", "+", "+", "<", "len", ")", "{", "if", "(", "bufline", "[", "j", "=", "start", "%", "bufsize", "]", "!", "=", "bufline", "[", "+", "+", "start", "%", "bufsize", "]", ")", "bufline", "[", "j", "]", "=", "newLine", "+", "+", ";", "else", "bufline", "[", "j", "]", "=", "newLine", ";", "}", "}", "line", "=", "bufline", "[", "j", "]", ";", "column", "=", "bufcolumn", "[", "j", "]", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "image", ";", "}", "</s>"]
["<s>", "public", "static", "final", "Token", "newToken", "(", "int", "ofKind", ")", "{", "switch", "(", "ofKind", ")", "{", "default", ":", "return", "new", "Token", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "setDebugStream", "(", "java", ".", "io", ".", "PrintStream", "ds", ")", "{", "debugStream", "=", "ds", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopStringLiteralDfa_0", "(", "int", "pos", ",", "long", "active0", ")", "{", "switch", "(", "pos", ")", "{", "default", ":", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfa_0", "(", "int", "pos", ",", "long", "active0", ")", "{", "return", "jjMoveNfa_0", "(", "jjStopStringLiteralDfa_0", "(", "pos", ",", "active0", ")", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopAtPos", "(", "int", "pos", ",", "int", "kind", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "return", "pos", "+", "1", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfaWithStates_0", "(", "int", "pos", ",", "int", "kind", ",", "int", "state", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "pos", "+", "1", ";", "}", "return", "jjMoveNfa_0", "(", "state", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveStringLiteralDfa0_0", "(", ")", "{", "switch", "(", "curChar", ")", "{", "case", "<NUM_LIT:10>", ":", "return", "jjStartNfaWithStates_0", "(", "0", ",", "<NUM_LIT:2>", ",", "<NUM_LIT:2>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStartNfaWithStates_0", "(", "0", ",", "1", ",", "<NUM_LIT:2>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:16>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:7>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:3>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:4>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:5>", ")", ";", "default", ":", "return", "jjMoveNfa_0", "(", "<NUM_LIT:3>", ",", "0", ")", ";", "}", "}", "</s>"]
["<s>", "private", "final", "void", "jjCheckNAdd", "(", "int", "state", ")", "{", "if", "(", "jjrounds", "[", "state", "]", "!", "=", "jjround", ")", "{", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "state", ";", "jjrounds", "[", "state", "]", "=", "jjround", ";", "}", "}", "</s>"]
["<s>", "private", "final", "void", "jjAddStates", "(", "int", "start", ",", "int", "end", ")", "{", "do", "{", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "jjnextStates", "[", "start", "]", ";", "}", "while", "(", "start", "+", "+", "!", "=", "end", ")", ";", "}", "</s>"]
["<s>", "private", "final", "void", "jjCheckNAddTwoStates", "(", "int", "state1", ",", "int", "state2", ")", "{", "jjCheckNAdd", "(", "state1", ")", ";", "jjCheckNAdd", "(", "state2", ")", ";", "}", "</s>"]
["<s>", "private", "final", "void", "jjCheckNAddStates", "(", "int", "start", ",", "int", "end", ")", "{", "do", "{", "jjCheckNAdd", "(", "jjnextStates", "[", "start", "]", ")", ";", "}", "while", "(", "start", "+", "+", "!", "=", "end", ")", ";", "}", "</s>"]
["<s>", "private", "final", "void", "jjCheckNAddStates", "(", "int", "start", ")", "{", "jjCheckNAdd", "(", "jjnextStates", "[", "start", "]", ")", ";", "jjCheckNAdd", "(", "jjnextStates", "[", "start", "+", "1", "]", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveNfa_0", "(", "int", "startState", ",", "int", "curPos", ")", "{", "int", "[", "]", "nextStates", ";", "int", "startsAt", "=", "0", ";", "jjnewStateCnt", "=", "<NUM_LIT:3>", ";", "int", "i", "=", "1", ";", "jjstateSet", "[", "0", "]", "=", "startState", ";", "int", "j", ",", "kind", "=", "<NUM_LIT>", ";", "for", "(", ";", ";", ")", "{", "if", "(", "+", "+", "jjround", "=", "=", "<NUM_LIT>", ")", "ReInitRounds", "(", ")", ";", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "curChar", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "<NUM_LIT:3>", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "!", "=", "0", "L", ")", "{", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "}", "else", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "!", "=", "0", "L", ")", "{", "if", "(", "kind", ">", "<NUM_LIT:6>", ")", "kind", "=", "<NUM_LIT:6>", ";", "jjCheckNAdd", "(", "0", ")", ";", "}", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "!", "=", "0", "L", ")", "{", "if", "(", "kind", ">", "<NUM_LIT:20>", ")", "kind", "=", "<NUM_LIT:20>", ";", "jjCheckNAdd", "(", "1", ")", ";", "}", "break", ";", "case", "0", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "=", "=", "0", "L", ")", "break", ";", "kind", "=", "<NUM_LIT:6>", ";", "jjCheckNAdd", "(", "0", ")", ";", "break", ";", "case", "1", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "=", "=", "0", "L", ")", "break", ";", "if", "(", "kind", ">", "<NUM_LIT:20>", ")", "kind", "=", "<NUM_LIT:20>", ";", "jjCheckNAdd", "(", "1", ")", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "=", "=", "0", "L", ")", "break", ";", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "<NUM_LIT:3>", ":", "case", "<NUM_LIT:2>", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "=", "=", "0", "L", ")", "break", ";", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "{", "int", "i2", "=", "(", "curChar", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:6>", ";", "long", "l2", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "<NUM_LIT:3>", ":", "case", "<NUM_LIT:2>", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "=", "=", "0", "L", ")", "break", ";", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "if", "(", "kind", "!", "=", "<NUM_LIT>", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "curPos", ";", "kind", "=", "<NUM_LIT>", ";", "}", "+", "+", "curPos", ";", "if", "(", "(", "i", "=", "jjnewStateCnt", ")", "=", "=", "(", "startsAt", "=", "<NUM_LIT:3>", "-", "(", "jjnewStateCnt", "=", "startsAt", ")", ")", ")", "return", "curPos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "curPos", ";", "}", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopStringLiteralDfa_1", "(", "int", "pos", ",", "long", "active0", ")", "{", "switch", "(", "pos", ")", "{", "default", ":", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfa_1", "(", "int", "pos", ",", "long", "active0", ")", "{", "return", "jjMoveNfa_1", "(", "jjStopStringLiteralDfa_1", "(", "pos", ",", "active0", ")", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfaWithStates_1", "(", "int", "pos", ",", "int", "kind", ",", "int", "state", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "pos", "+", "1", ";", "}", "return", "jjMoveNfa_1", "(", "state", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveStringLiteralDfa0_1", "(", ")", "{", "switch", "(", "curChar", ")", "{", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:10>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:8>", ")", ";", "default", ":", "return", "jjMoveNfa_1", "(", "0", ",", "0", ")", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveNfa_1", "(", "int", "startState", ",", "int", "curPos", ")", "{", "int", "[", "]", "nextStates", ";", "int", "startsAt", "=", "0", ";", "jjnewStateCnt", "=", "<NUM_LIT:3>", ";", "int", "i", "=", "1", ";", "jjstateSet", "[", "0", "]", "=", "startState", ";", "int", "j", ",", "kind", "=", "<NUM_LIT>", ";", "for", "(", ";", ";", ")", "{", "if", "(", "+", "+", "jjround", "=", "=", "<NUM_LIT>", ")", "ReInitRounds", "(", ")", ";", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "curChar", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "kind", ">", "<NUM_LIT:11>", ")", "kind", "=", "<NUM_LIT:11>", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT:9>", ")", "kind", "=", "<NUM_LIT:9>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "kind", ">", "<NUM_LIT:11>", ")", "kind", "=", "<NUM_LIT:11>", ";", "if", "(", "curChar", "=", "=", "<NUM_LIT>", ")", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "1", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT:9>", ")", "kind", "=", "<NUM_LIT:9>", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "if", "(", "kind", ">", "<NUM_LIT:11>", ")", "kind", "=", "<NUM_LIT:11>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "{", "int", "i2", "=", "(", "curChar", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:6>", ";", "long", "l2", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT:11>", ")", "kind", "=", "<NUM_LIT:11>", ";", "break", ";", "case", "1", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT:9>", ")", "kind", "=", "<NUM_LIT:9>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "if", "(", "kind", "!", "=", "<NUM_LIT>", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "curPos", ";", "kind", "=", "<NUM_LIT>", ";", "}", "+", "+", "curPos", ";", "if", "(", "(", "i", "=", "jjnewStateCnt", ")", "=", "=", "(", "startsAt", "=", "<NUM_LIT:3>", "-", "(", "jjnewStateCnt", "=", "startsAt", ")", ")", ")", "return", "curPos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "curPos", ";", "}", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopStringLiteralDfa_3", "(", "int", "pos", ",", "long", "active0", ")", "{", "switch", "(", "pos", ")", "{", "default", ":", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfa_3", "(", "int", "pos", ",", "long", "active0", ")", "{", "return", "jjMoveNfa_3", "(", "jjStopStringLiteralDfa_3", "(", "pos", ",", "active0", ")", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfaWithStates_3", "(", "int", "pos", ",", "int", "kind", ",", "int", "state", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "pos", "+", "1", ";", "}", "return", "jjMoveNfa_3", "(", "state", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveStringLiteralDfa0_3", "(", ")", "{", "switch", "(", "curChar", ")", "{", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "default", ":", "return", "jjMoveNfa_3", "(", "0", ",", "0", ")", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveNfa_3", "(", "int", "startState", ",", "int", "curPos", ")", "{", "int", "[", "]", "nextStates", ";", "int", "startsAt", "=", "0", ";", "jjnewStateCnt", "=", "<NUM_LIT:3>", ";", "int", "i", "=", "1", ";", "jjstateSet", "[", "0", "]", "=", "startState", ";", "int", "j", ",", "kind", "=", "<NUM_LIT>", ";", "for", "(", ";", ";", ")", "{", "if", "(", "+", "+", "jjround", "=", "=", "<NUM_LIT>", ")", "ReInitRounds", "(", ")", ";", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "curChar", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "case", "<NUM_LIT:2>", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "=", "=", "0", "L", ")", "break", ";", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "!", "=", "0", "L", ")", "{", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "}", "else", "if", "(", "curChar", "=", "=", "<NUM_LIT>", ")", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "1", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "=", "=", "0", "L", ")", "break", ";", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "{", "int", "i2", "=", "(", "curChar", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:6>", ";", "long", "l2", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "case", "<NUM_LIT:2>", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "=", "=", "0", "L", ")", "break", ";", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "break", ";", "case", "1", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "if", "(", "kind", "!", "=", "<NUM_LIT>", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "curPos", ";", "kind", "=", "<NUM_LIT>", ";", "}", "+", "+", "curPos", ";", "if", "(", "(", "i", "=", "jjnewStateCnt", ")", "=", "=", "(", "startsAt", "=", "<NUM_LIT:3>", "-", "(", "jjnewStateCnt", "=", "startsAt", ")", ")", ")", "return", "curPos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "curPos", ";", "}", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopStringLiteralDfa_2", "(", "int", "pos", ",", "long", "active0", ")", "{", "switch", "(", "pos", ")", "{", "default", ":", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfa_2", "(", "int", "pos", ",", "long", "active0", ")", "{", "return", "jjMoveNfa_2", "(", "jjStopStringLiteralDfa_2", "(", "pos", ",", "active0", ")", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfaWithStates_2", "(", "int", "pos", ",", "int", "kind", ",", "int", "state", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "pos", "+", "1", ";", "}", "return", "jjMoveNfa_2", "(", "state", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveStringLiteralDfa0_2", "(", ")", "{", "switch", "(", "curChar", ")", "{", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "default", ":", "return", "jjMoveNfa_2", "(", "0", ",", "0", ")", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveNfa_2", "(", "int", "startState", ",", "int", "curPos", ")", "{", "int", "[", "]", "nextStates", ";", "int", "startsAt", "=", "0", ";", "jjnewStateCnt", "=", "<NUM_LIT:3>", ";", "int", "i", "=", "1", ";", "jjstateSet", "[", "0", "]", "=", "startState", ";", "int", "j", ",", "kind", "=", "<NUM_LIT>", ";", "for", "(", ";", ";", ")", "{", "if", "(", "+", "+", "jjround", "=", "=", "<NUM_LIT>", ")", "ReInitRounds", "(", ")", ";", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "curChar", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "kind", ">", "<NUM_LIT:15>", ")", "kind", "=", "<NUM_LIT:15>", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT:12>", ")", "kind", "=", "<NUM_LIT:12>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "kind", ">", "<NUM_LIT:15>", ")", "kind", "=", "<NUM_LIT:15>", ";", "if", "(", "curChar", "=", "=", "<NUM_LIT>", ")", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "1", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT:12>", ")", "kind", "=", "<NUM_LIT:12>", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "if", "(", "kind", ">", "<NUM_LIT:15>", ")", "kind", "=", "<NUM_LIT:15>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "{", "int", "i2", "=", "(", "curChar", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:6>", ";", "long", "l2", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT:15>", ")", "kind", "=", "<NUM_LIT:15>", ";", "break", ";", "case", "1", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT:12>", ")", "kind", "=", "<NUM_LIT:12>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "if", "(", "kind", "!", "=", "<NUM_LIT>", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "curPos", ";", "kind", "=", "<NUM_LIT>", ";", "}", "+", "+", "curPos", ";", "if", "(", "(", "i", "=", "jjnewStateCnt", ")", "=", "=", "(", "startsAt", "=", "<NUM_LIT:3>", "-", "(", "jjnewStateCnt", "=", "startsAt", ")", ")", ")", "return", "curPos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "curPos", ";", "}", "}", "}", "</s>"]
["<s>", "public", "ContentTypeParserTokenManager", "(", "SimpleCharStream", "stream", ")", "{", "if", "(", "SimpleCharStream", ".", "staticFlag", ")", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "input_stream", "=", "stream", ";", "}", "</s>"]
["<s>", "public", "ContentTypeParserTokenManager", "(", "SimpleCharStream", "stream", ",", "int", "lexState", ")", "{", "this", "(", "stream", ")", ";", "SwitchTo", "(", "lexState", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "SimpleCharStream", "stream", ")", "{", "jjmatchedPos", "=", "jjnewStateCnt", "=", "0", ";", "curLexState", "=", "defaultLexState", ";", "input_stream", "=", "stream", ";", "ReInitRounds", "(", ")", ";", "}", "</s>"]
["<s>", "private", "final", "void", "ReInitRounds", "(", ")", "{", "int", "i", ";", "jjround", "=", "<NUM_LIT>", ";", "for", "(", "i", "=", "<NUM_LIT:3>", ";", "i", "-", "-", ">", "0", ";", ")", "jjrounds", "[", "i", "]", "=", "<NUM_LIT>", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "SimpleCharStream", "stream", ",", "int", "lexState", ")", "{", "ReInit", "(", "stream", ")", ";", "SwitchTo", "(", "lexState", ")", ";", "}", "</s>"]
["<s>", "public", "void", "SwitchTo", "(", "int", "lexState", ")", "{", "if", "(", "lexState", ">", "=", "<NUM_LIT:4>", "|", "|", "lexState", "<", "0", ")", "throw", "new", "TokenMgrError", "(", "\"", "<STR_LIT>", "\"", "+", "lexState", "+", "\"", "<STR_LIT>", "\"", ",", "TokenMgrError", ".", "INVALID_LEXICAL_STATE", ")", ";", "else", "curLexState", "=", "lexState", ";", "}", "</s>"]
["<s>", "protected", "Token", "jjFillToken", "(", ")", "{", "Token", "t", "=", "Token", ".", "newToken", "(", "jjmatchedKind", ")", ";", "t", ".", "kind", "=", "jjmatchedKind", ";", "String", "im", "=", "jjstrLiteralImages", "[", "jjmatchedKind", "]", ";", "t", ".", "image", "=", "(", "im", "=", "=", "null", ")", "?", "input_stream", ".", "GetImage", "(", ")", ":", "im", ";", "t", ".", "beginLine", "=", "input_stream", ".", "getBeginLine", "(", ")", ";", "t", ".", "beginColumn", "=", "input_stream", ".", "getBeginColumn", "(", ")", ";", "t", ".", "endLine", "=", "input_stream", ".", "getEndLine", "(", ")", ";", "t", ".", "endColumn", "=", "input_stream", ".", "getEndColumn", "(", ")", ";", "return", "t", ";", "}", "</s>"]
["<s>", "public", "Token", "getNextToken", "(", ")", "{", "int", "kind", ";", "Token", "specialToken", "=", "null", ";", "Token", "matchedToken", ";", "int", "curPos", "=", "0", ";", "EOFLoop", ":", "for", "(", ";", ";", ")", "{", "try", "{", "curChar", "=", "input_stream", ".", "BeginToken", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "jjmatchedKind", "=", "0", ";", "matchedToken", "=", "jjFillToken", "(", ")", ";", "matchedToken", ".", "specialToken", "=", "specialToken", ";", "return", "matchedToken", ";", "}", "image", "=", "null", ";", "jjimageLen", "=", "0", ";", "for", "(", ";", ";", ")", "{", "switch", "(", "curLexState", ")", "{", "case", "0", ":", "jjmatchedKind", "=", "<NUM_LIT>", ";", "jjmatchedPos", "=", "0", ";", "curPos", "=", "jjMoveStringLiteralDfa0_0", "(", ")", ";", "break", ";", "case", "1", ":", "jjmatchedKind", "=", "<NUM_LIT>", ";", "jjmatchedPos", "=", "0", ";", "curPos", "=", "jjMoveStringLiteralDfa0_1", "(", ")", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "jjmatchedKind", "=", "<NUM_LIT>", ";", "jjmatchedPos", "=", "0", ";", "curPos", "=", "jjMoveStringLiteralDfa0_2", "(", ")", ";", "break", ";", "case", "<NUM_LIT:3>", ":", "jjmatchedKind", "=", "<NUM_LIT>", ";", "jjmatchedPos", "=", "0", ";", "curPos", "=", "jjMoveStringLiteralDfa0_3", "(", ")", ";", "break", ";", "}", "if", "(", "jjmatchedKind", "!", "=", "<NUM_LIT>", ")", "{", "if", "(", "jjmatchedPos", "+", "1", "<", "curPos", ")", "input_stream", ".", "backup", "(", "curPos", "-", "jjmatchedPos", "-", "1", ")", ";", "if", "(", "(", "jjtoToken", "[", "jjmatchedKind", ">", ">", "<NUM_LIT:6>", "]", "&", "(", "<NUM_LIT>", "<", "<", "(", "jjmatchedKind", "&", "<NUM_LIT>", ")", ")", ")", "!", "=", "0", "L", ")", "{", "matchedToken", "=", "jjFillToken", "(", ")", ";", "matchedToken", ".", "specialToken", "=", "specialToken", ";", "TokenLexicalActions", "(", "matchedToken", ")", ";", "if", "(", "jjnewLexState", "[", "jjmatchedKind", "]", "!", "=", "-", "1", ")", "curLexState", "=", "jjnewLexState", "[", "jjmatchedKind", "]", ";", "return", "matchedToken", ";", "}", "else", "if", "(", "(", "jjtoSkip", "[", "jjmatchedKind", ">", ">", "<NUM_LIT:6>", "]", "&", "(", "<NUM_LIT>", "<", "<", "(", "jjmatchedKind", "&", "<NUM_LIT>", ")", ")", ")", "!", "=", "0", "L", ")", "{", "if", "(", "(", "jjtoSpecial", "[", "jjmatchedKind", ">", ">", "<NUM_LIT:6>", "]", "&", "(", "<NUM_LIT>", "<", "<", "(", "jjmatchedKind", "&", "<NUM_LIT>", ")", ")", ")", "!", "=", "0", "L", ")", "{", "matchedToken", "=", "jjFillToken", "(", ")", ";", "if", "(", "specialToken", "=", "=", "null", ")", "specialToken", "=", "matchedToken", ";", "else", "{", "matchedToken", ".", "specialToken", "=", "specialToken", ";", "specialToken", "=", "(", "specialToken", ".", "next", "=", "matchedToken", ")", ";", "}", "}", "if", "(", "jjnewLexState", "[", "jjmatchedKind", "]", "!", "=", "-", "1", ")", "curLexState", "=", "jjnewLexState", "[", "jjmatchedKind", "]", ";", "continue", "EOFLoop", ";", "}", "MoreLexicalActions", "(", ")", ";", "if", "(", "jjnewLexState", "[", "jjmatchedKind", "]", "!", "=", "-", "1", ")", "curLexState", "=", "jjnewLexState", "[", "jjmatchedKind", "]", ";", "curPos", "=", "0", ";", "jjmatchedKind", "=", "<NUM_LIT>", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "continue", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e1", ")", "{", "}", "}", "int", "error_line", "=", "input_stream", ".", "getEndLine", "(", ")", ";", "int", "error_column", "=", "input_stream", ".", "getEndColumn", "(", ")", ";", "String", "error_after", "=", "null", ";", "boolean", "EOFSeen", "=", "false", ";", "try", "{", "input_stream", ".", "readChar", "(", ")", ";", "input_stream", ".", "backup", "(", "1", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e1", ")", "{", "EOFSeen", "=", "true", ";", "error_after", "=", "curPos", "<", "=", "1", "?", "\"", "\"", ":", "input_stream", ".", "GetImage", "(", ")", ";", "if", "(", "curChar", "=", "=", "<STR_LIT:\\n>", "|", "|", "curChar", "=", "=", "<STR_LIT>", ")", "{", "error_line", "+", "+", ";", "error_column", "=", "0", ";", "}", "else", "error_column", "+", "+", ";", "}", "if", "(", "!", "EOFSeen", ")", "{", "input_stream", ".", "backup", "(", "1", ")", ";", "error_after", "=", "curPos", "<", "=", "1", "?", "\"", "\"", ":", "input_stream", ".", "GetImage", "(", ")", ";", "}", "throw", "new", "TokenMgrError", "(", "EOFSeen", ",", "curLexState", ",", "error_line", ",", "error_column", ",", "error_after", ",", "curChar", ",", "TokenMgrError", ".", "LEXICAL_ERROR", ")", ";", "}", "}", "}", "</s>"]
["<s>", "void", "MoreLexicalActions", "(", ")", "{", "jjimageLen", "+", "=", "(", "lengthOfMatch", "=", "jjmatchedPos", "+", "1", ")", ";", "switch", "(", "jjmatchedKind", ")", "{", "case", "<NUM_LIT:9>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "image", ".", "deleteCharAt", "(", "image", ".", "length", "(", ")", "-", "<NUM_LIT:2>", ")", ";", "break", ";", "case", "<NUM_LIT:10>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "commentNest", "=", "1", ";", "break", ";", "case", "<NUM_LIT:12>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "image", ".", "deleteCharAt", "(", "image", ".", "length", "(", ")", "-", "<NUM_LIT:2>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "+", "+", "commentNest", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "-", "-", "commentNest", ";", "if", "(", "commentNest", "=", "=", "0", ")", "SwitchTo", "(", "INCOMMENT", ")", ";", "break", ";", "case", "<NUM_LIT:16>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "image", ".", "deleteCharAt", "(", "image", ".", "length", "(", ")", "-", "1", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "image", ".", "deleteCharAt", "(", "image", ".", "length", "(", ")", "-", "<NUM_LIT:2>", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "</s>"]
["<s>", "void", "TokenLexicalActions", "(", "Token", "matchedToken", ")", "{", "switch", "(", "jjmatchedKind", ")", "{", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", "+", "(", "lengthOfMatch", "=", "jjmatchedPos", "+", "1", ")", ")", ")", ";", "matchedToken", ".", "image", "=", "image", ".", "substring", "(", "0", ",", "image", ".", "length", "(", ")", "-", "1", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "</s>"]
["<s>", "public", "NamedMailbox", "(", "String", "name", ",", "String", "localPart", ",", "String", "domain", ")", "{", "super", "(", "localPart", ",", "domain", ")", ";", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "public", "NamedMailbox", "(", "String", "name", ",", "DomainList", "route", ",", "String", "localPart", ",", "String", "domain", ")", "{", "super", "(", "route", ",", "localPart", ",", "domain", ")", ";", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "public", "NamedMailbox", "(", "String", "name", ",", "Mailbox", "baseMailbox", ")", "{", "super", "(", "baseMailbox", ".", "getRoute", "(", ")", ",", "baseMailbox", ".", "getLocalPart", "(", ")", ",", "baseMailbox", ".", "getDomain", "(", ")", ")", ";", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "this", ".", "name", ";", "}", "</s>"]
["<s>", "public", "String", "getAddressString", "(", "boolean", "includeRoute", ")", "{", "return", "(", "name", "=", "=", "null", "?", "\"", "\"", ":", "name", "+", "\"", "\"", ")", "+", "super", ".", "getAddressString", "(", "includeRoute", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Builder", "getInstance", "(", ")", "{", "return", "singleton", ";", "}", "</s>"]
["<s>", "public", "AddressList", "buildAddressList", "(", "ASTaddress_list", "node", ")", "{", "ArrayList", "list", "=", "new", "ArrayList", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "node", ".", "jjtGetNumChildren", "(", ")", ";", "i", "+", "+", ")", "{", "ASTaddress", "childNode", "=", "(", "ASTaddress", ")", "node", ".", "jjtGetChild", "(", "i", ")", ";", "Address", "address", "=", "buildAddress", "(", "childNode", ")", ";", "list", ".", "add", "(", "address", ")", ";", "}", "return", "new", "AddressList", "(", "list", ",", "true", ")", ";", "}", "</s>"]
["<s>", "private", "Address", "buildAddress", "(", "ASTaddress", "node", ")", "{", "ChildNodeIterator", "it", "=", "new", "ChildNodeIterator", "(", "node", ")", ";", "Node", "n", "=", "it", ".", "nextNode", "(", ")", ";", "if", "(", "n", "instanceof", "ASTaddr_spec", ")", "{", "return", "buildAddrSpec", "(", "(", "ASTaddr_spec", ")", "n", ")", ";", "}", "else", "if", "(", "n", "instanceof", "ASTangle_addr", ")", "{", "return", "buildAngleAddr", "(", "(", "ASTangle_addr", ")", "n", ")", ";", "}", "else", "if", "(", "n", "instanceof", "ASTphrase", ")", "{", "String", "name", "=", "buildString", "(", "(", "ASTphrase", ")", "n", ",", "false", ")", ";", "Node", "n2", "=", "it", ".", "nextNode", "(", ")", ";", "if", "(", "n2", "instanceof", "ASTgroup_body", ")", "{", "return", "new", "Group", "(", "name", ",", "buildGroupBody", "(", "(", "ASTgroup_body", ")", "n2", ")", ")", ";", "}", "else", "if", "(", "n2", "instanceof", "ASTangle_addr", ")", "{", "name", "=", "DecoderUtil", ".", "decodeEncodedWords", "(", "name", ")", ";", "return", "new", "NamedMailbox", "(", "name", ",", "buildAngleAddr", "(", "(", "ASTangle_addr", ")", "n2", ")", ")", ";", "}", "else", "{", "throw", "new", "IllegalStateException", "(", ")", ";", "}", "}", "else", "{", "throw", "new", "IllegalStateException", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "MailboxList", "buildGroupBody", "(", "ASTgroup_body", "node", ")", "{", "ArrayList", "results", "=", "new", "ArrayList", "(", ")", ";", "ChildNodeIterator", "it", "=", "new", "ChildNodeIterator", "(", "node", ")", ";", "while", "(", "it", ".", "hasNext", "(", ")", ")", "{", "Node", "n", "=", "it", ".", "nextNode", "(", ")", ";", "if", "(", "n", "instanceof", "ASTmailbox", ")", "results", ".", "add", "(", "buildMailbox", "(", "(", "ASTmailbox", ")", "n", ")", ")", ";", "else", "throw", "new", "IllegalStateException", "(", ")", ";", "}", "return", "new", "MailboxList", "(", "results", ",", "true", ")", ";", "}", "</s>"]
["<s>", "private", "Mailbox", "buildMailbox", "(", "ASTmailbox", "node", ")", "{", "ChildNodeIterator", "it", "=", "new", "ChildNodeIterator", "(", "node", ")", ";", "Node", "n", "=", "it", ".", "nextNode", "(", ")", ";", "if", "(", "n", "instanceof", "ASTaddr_spec", ")", "{", "return", "buildAddrSpec", "(", "(", "ASTaddr_spec", ")", "n", ")", ";", "}", "else", "if", "(", "n", "instanceof", "ASTangle_addr", ")", "{", "return", "buildAngleAddr", "(", "(", "ASTangle_addr", ")", "n", ")", ";", "}", "else", "if", "(", "n", "instanceof", "ASTname_addr", ")", "{", "return", "buildNameAddr", "(", "(", "ASTname_addr", ")", "n", ")", ";", "}", "else", "{", "throw", "new", "IllegalStateException", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "NamedMailbox", "buildNameAddr", "(", "ASTname_addr", "node", ")", "{", "ChildNodeIterator", "it", "=", "new", "ChildNodeIterator", "(", "node", ")", ";", "Node", "n", "=", "it", ".", "nextNode", "(", ")", ";", "String", "name", ";", "if", "(", "n", "instanceof", "ASTphrase", ")", "{", "name", "=", "buildString", "(", "(", "ASTphrase", ")", "n", ",", "false", ")", ";", "}", "else", "{", "throw", "new", "IllegalStateException", "(", ")", ";", "}", "n", "=", "it", ".", "nextNode", "(", ")", ";", "if", "(", "n", "instanceof", "ASTangle_addr", ")", "{", "name", "=", "DecoderUtil", ".", "decodeEncodedWords", "(", "name", ")", ";", "return", "new", "NamedMailbox", "(", "name", ",", "buildAngleAddr", "(", "(", "ASTangle_addr", ")", "n", ")", ")", ";", "}", "else", "{", "throw", "new", "IllegalStateException", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "Mailbox", "buildAngleAddr", "(", "ASTangle_addr", "node", ")", "{", "ChildNodeIterator", "it", "=", "new", "ChildNodeIterator", "(", "node", ")", ";", "DomainList", "route", "=", "null", ";", "Node", "n", "=", "it", ".", "nextNode", "(", ")", ";", "if", "(", "n", "instanceof", "ASTroute", ")", "{", "route", "=", "buildRoute", "(", "(", "ASTroute", ")", "n", ")", ";", "n", "=", "it", ".", "nextNode", "(", ")", ";", "}", "else", "if", "(", "n", "instanceof", "ASTaddr_spec", ")", ";", "else", "throw", "new", "IllegalStateException", "(", ")", ";", "if", "(", "n", "instanceof", "ASTaddr_spec", ")", "return", "buildAddrSpec", "(", "route", ",", "(", "ASTaddr_spec", ")", "n", ")", ";", "else", "throw", "new", "IllegalStateException", "(", ")", ";", "}", "</s>"]
["<s>", "private", "DomainList", "buildRoute", "(", "ASTroute", "node", ")", "{", "ArrayList", "results", "=", "new", "ArrayList", "(", "node", ".", "jjtGetNumChildren", "(", ")", ")", ";", "ChildNodeIterator", "it", "=", "new", "ChildNodeIterator", "(", "node", ")", ";", "while", "(", "it", ".", "hasNext", "(", ")", ")", "{", "Node", "n", "=", "it", ".", "nextNode", "(", ")", ";", "if", "(", "n", "instanceof", "ASTdomain", ")", "results", ".", "add", "(", "buildString", "(", "(", "ASTdomain", ")", "n", ",", "true", ")", ")", ";", "else", "throw", "new", "IllegalStateException", "(", ")", ";", "}", "return", "new", "DomainList", "(", "results", ",", "true", ")", ";", "}", "</s>"]
["<s>", "private", "Mailbox", "buildAddrSpec", "(", "ASTaddr_spec", "node", ")", "{", "return", "buildAddrSpec", "(", "null", ",", "node", ")", ";", "}", "</s>"]
["<s>", "private", "Mailbox", "buildAddrSpec", "(", "DomainList", "route", ",", "ASTaddr_spec", "node", ")", "{", "ChildNodeIterator", "it", "=", "new", "ChildNodeIterator", "(", "node", ")", ";", "String", "localPart", "=", "buildString", "(", "(", "ASTlocal_part", ")", "it", ".", "nextNode", "(", ")", ",", "true", ")", ";", "String", "domain", "=", "buildString", "(", "(", "ASTdomain", ")", "it", ".", "nextNode", "(", ")", ",", "true", ")", ";", "return", "new", "Mailbox", "(", "route", ",", "localPart", ",", "domain", ")", ";", "}", "</s>"]
["<s>", "private", "String", "buildString", "(", "SimpleNode", "node", ",", "boolean", "stripSpaces", ")", "{", "Token", "head", "=", "node", ".", "firstToken", ";", "Token", "tail", "=", "node", ".", "lastToken", ";", "StringBuffer", "out", "=", "new", "StringBuffer", "(", ")", ";", "while", "(", "head", "!", "=", "tail", ")", "{", "out", ".", "append", "(", "head", ".", "image", ")", ";", "head", "=", "head", ".", "next", ";", "if", "(", "!", "stripSpaces", ")", "addSpecials", "(", "out", ",", "head", ".", "specialToken", ")", ";", "}", "out", ".", "append", "(", "tail", ".", "image", ")", ";", "return", "out", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "addSpecials", "(", "StringBuffer", "out", ",", "Token", "specialToken", ")", "{", "if", "(", "specialToken", "!", "=", "null", ")", "{", "addSpecials", "(", "out", ",", "specialToken", ".", "specialToken", ")", ";", "out", ".", "append", "(", "specialToken", ".", "image", ")", ";", "}", "}", "</s>"]
["<s>", "public", "ChildNodeIterator", "(", "SimpleNode", "simpleNode", ")", "{", "this", ".", "simpleNode", "=", "simpleNode", ";", "this", ".", "len", "=", "simpleNode", ".", "jjtGetNumChildren", "(", ")", ";", "this", ".", "index", "=", "0", ";", "}", "</s>"]
["<s>", "public", "void", "remove", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "hasNext", "(", ")", "{", "return", "index", "<", "len", ";", "}", "</s>"]
["<s>", "public", "Object", "next", "(", ")", "{", "return", "nextNode", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Node", "nextNode", "(", ")", "{", "return", "simpleNode", ".", "jjtGetChild", "(", "index", "+", "+", ")", ";", "}", "</s>"]
["<s>", "public", "Group", "(", "String", "name", ",", "MailboxList", "mailboxes", ")", "{", "this", ".", "name", "=", "name", ";", "this", ".", "mailboxList", "=", "mailboxes", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "MailboxList", "getMailboxes", "(", ")", "{", "return", "mailboxList", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "StringBuffer", "buf", "=", "new", "StringBuffer", "(", ")", ";", "buf", ".", "append", "(", "name", ")", ";", "buf", ".", "append", "(", "\"", "<STR_LIT::>", "\"", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "mailboxList", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "buf", ".", "append", "(", "mailboxList", ".", "get", "(", "i", ")", ".", "toString", "(", ")", ")", ";", "if", "(", "i", "+", "1", "<", "mailboxList", ".", "size", "(", ")", ")", "buf", ".", "append", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "}", "buf", ".", "append", "(", "\"", "<STR_LIT:;>", "\"", ")", ";", "return", "buf", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "doAddMailboxesTo", "(", "ArrayList", "results", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "mailboxList", ".", "size", "(", ")", ";", "i", "+", "+", ")", "results", ".", "add", "(", "mailboxList", ".", "get", "(", "i", ")", ")", ";", "}", "</s>"]
["<s>", "final", "void", "addMailboxesTo", "(", "ArrayList", "results", ")", "{", "doAddMailboxesTo", "(", "results", ")", ";", "}", "</s>"]
["<s>", "protected", "abstract", "void", "doAddMailboxesTo", "(", "ArrayList", "results", ")", ";", "</s>"]
["<s>", "public", "AddressList", "(", "ArrayList", "addresses", ",", "boolean", "dontCopy", ")", "{", "if", "(", "addresses", "!", "=", "null", ")", "this", ".", "addresses", "=", "(", "dontCopy", "?", "addresses", ":", "(", "ArrayList", ")", "addresses", ".", "clone", "(", ")", ")", ";", "else", "this", ".", "addresses", "=", "new", "ArrayList", "(", "0", ")", ";", "}", "</s>"]
["<s>", "public", "int", "size", "(", ")", "{", "return", "addresses", ".", "size", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Address", "get", "(", "int", "index", ")", "{", "if", "(", "0", ">", "index", "|", "|", "size", "(", ")", "<", "=", "index", ")", "throw", "new", "IndexOutOfBoundsException", "(", ")", ";", "return", "(", "Address", ")", "addresses", ".", "get", "(", "index", ")", ";", "}", "</s>"]
["<s>", "public", "MailboxList", "flatten", "(", ")", "{", "boolean", "groupDetected", "=", "false", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "size", "(", ")", ";", "i", "+", "+", ")", "{", "if", "(", "!", "(", "get", "(", "i", ")", "instanceof", "Mailbox", ")", ")", "{", "groupDetected", "=", "true", ";", "break", ";", "}", "}", "if", "(", "!", "groupDetected", ")", "return", "new", "MailboxList", "(", "addresses", ",", "true", ")", ";", "ArrayList", "results", "=", "new", "ArrayList", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "size", "(", ")", ";", "i", "+", "+", ")", "{", "Address", "addr", "=", "get", "(", "i", ")", ";", "addr", ".", "addMailboxesTo", "(", "results", ")", ";", "}", "return", "new", "MailboxList", "(", "results", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "print", "(", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "size", "(", ")", ";", "i", "+", "+", ")", "{", "Address", "addr", "=", "get", "(", "i", ")", ";", "System", ".", "out", ".", "println", "(", "addr", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "AddressList", "parse", "(", "String", "rawAddressList", ")", "throws", "ParseException", "{", "AddressListParser", "parser", "=", "new", "AddressListParser", "(", "new", "StringReader", "(", "rawAddressList", ")", ")", ";", "return", "Builder", ".", "getInstance", "(", ")", ".", "buildAddressList", "(", "parser", ".", "parse", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "[", "]", "args", ")", "throws", "Exception", "{", "java", ".", "io", ".", "BufferedReader", "reader", "=", "new", "java", ".", "io", ".", "BufferedReader", "(", "new", "java", ".", "io", ".", "InputStreamReader", "(", "System", ".", "in", ")", ")", ";", "while", "(", "true", ")", "{", "try", "{", "System", ".", "out", ".", "print", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "line", "=", "reader", ".", "readLine", "(", ")", ";", "if", "(", "line", ".", "length", "(", ")", "=", "=", "0", "|", "|", "line", ".", "toLowerCase", "(", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", "|", "|", "line", ".", "toLowerCase", "(", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "AddressList", "list", "=", "parse", "(", "line", ")", ";", "list", ".", "print", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "e", ".", "printStackTrace", "(", ")", ";", "Thread", ".", "sleep", "(", "<NUM_LIT>", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "DomainList", "(", "ArrayList", "domains", ",", "boolean", "dontCopy", ")", "{", "if", "(", "domains", "!", "=", "null", ")", "this", ".", "domains", "=", "(", "dontCopy", "?", "domains", ":", "(", "ArrayList", ")", "domains", ".", "clone", "(", ")", ")", ";", "else", "this", ".", "domains", "=", "new", "ArrayList", "(", "0", ")", ";", "}", "</s>"]
["<s>", "public", "int", "size", "(", ")", "{", "return", "domains", ".", "size", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "get", "(", "int", "index", ")", "{", "if", "(", "0", ">", "index", "|", "|", "size", "(", ")", "<", "=", "index", ")", "throw", "new", "IndexOutOfBoundsException", "(", ")", ";", "return", "(", "String", ")", "domains", ".", "get", "(", "index", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toRouteString", "(", ")", "{", "StringBuffer", "out", "=", "new", "StringBuffer", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "domains", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "out", ".", "append", "(", "\"", "<STR_LIT:@>", "\"", ")", ";", "out", ".", "append", "(", "get", "(", "i", ")", ")", ";", "if", "(", "i", "+", "1", "<", "domains", ".", "size", "(", ")", ")", "out", ".", "append", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "}", "return", "out", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "MailboxList", "(", "ArrayList", "mailboxes", ",", "boolean", "dontCopy", ")", "{", "if", "(", "mailboxes", "!", "=", "null", ")", "this", ".", "mailboxes", "=", "(", "dontCopy", "?", "mailboxes", ":", "(", "ArrayList", ")", "mailboxes", ".", "clone", "(", ")", ")", ";", "else", "this", ".", "mailboxes", "=", "new", "ArrayList", "(", "0", ")", ";", "}", "</s>"]
["<s>", "public", "int", "size", "(", ")", "{", "return", "mailboxes", ".", "size", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Mailbox", "get", "(", "int", "index", ")", "{", "if", "(", "0", ">", "index", "|", "|", "size", "(", ")", "<", "=", "index", ")", "throw", "new", "IndexOutOfBoundsException", "(", ")", ";", "return", "(", "Mailbox", ")", "mailboxes", ".", "get", "(", "index", ")", ";", "}", "</s>"]
["<s>", "public", "void", "print", "(", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "size", "(", ")", ";", "i", "+", "+", ")", "{", "Mailbox", "mailbox", "=", "get", "(", "i", ")", ";", "System", ".", "out", ".", "println", "(", "mailbox", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Mailbox", "(", "String", "localPart", ",", "String", "domain", ")", "{", "this", "(", "null", ",", "localPart", ",", "domain", ")", ";", "}", "</s>"]
["<s>", "public", "Mailbox", "(", "DomainList", "route", ",", "String", "localPart", ",", "String", "domain", ")", "{", "this", ".", "route", "=", "route", ";", "this", ".", "localPart", "=", "localPart", ";", "this", ".", "domain", "=", "domain", ";", "}", "</s>"]
["<s>", "public", "DomainList", "getRoute", "(", ")", "{", "return", "route", ";", "}", "</s>"]
["<s>", "public", "String", "getLocalPart", "(", ")", "{", "return", "localPart", ";", "}", "</s>"]
["<s>", "public", "String", "getDomain", "(", ")", "{", "return", "domain", ";", "}", "</s>"]
["<s>", "public", "String", "getAddressString", "(", ")", "{", "return", "getAddressString", "(", "false", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getAddressString", "(", "boolean", "includeRoute", ")", "{", "return", "\"", "<STR_LIT:<>", "\"", "+", "(", "!", "includeRoute", "|", "|", "route", "=", "=", "null", "?", "\"", "\"", ":", "route", ".", "toRouteString", "(", ")", "+", "\"", "<STR_LIT::>", "\"", ")", "+", "localPart", "+", "(", "domain", "=", "=", "null", "?", "\"", "\"", ":", "\"", "<STR_LIT:@>", "\"", ")", "+", "domain", "+", "\"", "<STR_LIT:>>", "\"", ";", "}", "</s>"]
["<s>", "protected", "final", "void", "doAddMailboxesTo", "(", "ArrayList", "results", ")", "{", "results", ".", "add", "(", "this", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "getAddressString", "(", ")", ";", "}", "</s>"]
["<s>", "JJTAddressListParserState", "(", ")", "{", "nodes", "=", "new", "java", ".", "util", ".", "Stack", "(", ")", ";", "marks", "=", "new", "java", ".", "util", ".", "Stack", "(", ")", ";", "sp", "=", "0", ";", "mk", "=", "0", ";", "}", "</s>"]
["<s>", "boolean", "nodeCreated", "(", ")", "{", "return", "node_created", ";", "}", "</s>"]
["<s>", "void", "reset", "(", ")", "{", "nodes", ".", "removeAllElements", "(", ")", ";", "marks", ".", "removeAllElements", "(", ")", ";", "sp", "=", "0", ";", "mk", "=", "0", ";", "}", "</s>"]
["<s>", "Node", "rootNode", "(", ")", "{", "return", "(", "Node", ")", "nodes", ".", "elementAt", "(", "0", ")", ";", "}", "</s>"]
["<s>", "void", "pushNode", "(", "Node", "n", ")", "{", "nodes", ".", "push", "(", "n", ")", ";", "+", "+", "sp", ";", "}", "</s>"]
["<s>", "Node", "popNode", "(", ")", "{", "if", "(", "-", "-", "sp", "<", "mk", ")", "{", "mk", "=", "(", "(", "Integer", ")", "marks", ".", "pop", "(", ")", ")", ".", "intValue", "(", ")", ";", "}", "return", "(", "Node", ")", "nodes", ".", "pop", "(", ")", ";", "}", "</s>"]
["<s>", "Node", "peekNode", "(", ")", "{", "return", "(", "Node", ")", "nodes", ".", "peek", "(", ")", ";", "}", "</s>"]
["<s>", "int", "nodeArity", "(", ")", "{", "return", "sp", "-", "mk", ";", "}", "</s>"]
["<s>", "void", "clearNodeScope", "(", "Node", "n", ")", "{", "while", "(", "sp", ">", "mk", ")", "{", "popNode", "(", ")", ";", "}", "mk", "=", "(", "(", "Integer", ")", "marks", ".", "pop", "(", ")", ")", ".", "intValue", "(", ")", ";", "}", "</s>"]
["<s>", "void", "openNodeScope", "(", "Node", "n", ")", "{", "marks", ".", "push", "(", "new", "Integer", "(", "mk", ")", ")", ";", "mk", "=", "sp", ";", "n", ".", "jjtOpen", "(", ")", ";", "}", "</s>"]
["<s>", "void", "closeNodeScope", "(", "Node", "n", ",", "int", "num", ")", "{", "mk", "=", "(", "(", "Integer", ")", "marks", ".", "pop", "(", ")", ")", ".", "intValue", "(", ")", ";", "while", "(", "num", "-", "-", ">", "0", ")", "{", "Node", "c", "=", "popNode", "(", ")", ";", "c", ".", "jjtSetParent", "(", "n", ")", ";", "n", ".", "jjtAddChild", "(", "c", ",", "num", ")", ";", "}", "n", ".", "jjtClose", "(", ")", ";", "pushNode", "(", "n", ")", ";", "node_created", "=", "true", ";", "}", "</s>"]
["<s>", "void", "closeNodeScope", "(", "Node", "n", ",", "boolean", "condition", ")", "{", "if", "(", "condition", ")", "{", "int", "a", "=", "nodeArity", "(", ")", ";", "mk", "=", "(", "(", "Integer", ")", "marks", ".", "pop", "(", ")", ")", ".", "intValue", "(", ")", ";", "while", "(", "a", "-", "-", ">", "0", ")", "{", "Node", "c", "=", "popNode", "(", ")", ";", "c", ".", "jjtSetParent", "(", "n", ")", ";", "n", ".", "jjtAddChild", "(", "c", ",", "a", ")", ";", "}", "n", ".", "jjtClose", "(", ")", ";", "pushNode", "(", "n", ")", ";", "node_created", "=", "true", ";", "}", "else", "{", "mk", "=", "(", "(", "Integer", ")", "marks", ".", "pop", "(", ")", ")", ".", "intValue", "(", ")", ";", "node_created", "=", "false", ";", "}", "}", "</s>"]
["<s>", "public", "void", "jjtOpen", "(", ")", ";", "</s>"]
["<s>", "public", "void", "jjtClose", "(", ")", ";", "</s>"]
["<s>", "public", "void", "jjtSetParent", "(", "Node", "n", ")", ";", "</s>"]
["<s>", "public", "Node", "jjtGetParent", "(", ")", ";", "</s>"]
["<s>", "public", "void", "jjtAddChild", "(", "Node", "n", ",", "int", "i", ")", ";", "</s>"]
["<s>", "public", "Node", "jjtGetChild", "(", "int", "i", ")", ";", "</s>"]
["<s>", "public", "int", "jjtGetNumChildren", "(", ")", ";", "</s>"]
["<s>", "public", "Object", "jjtAccept", "(", "AddressListParserVisitor", "visitor", ",", "Object", "data", ")", ";", "</s>"]
["<s>", "public", "ASTmailbox", "(", "int", "id", ")", "{", "super", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "ASTmailbox", "(", "AddressListParser", "p", ",", "int", "id", ")", "{", "super", "(", "p", ",", "id", ")", ";", "}", "</s>"]
["<s>", "public", "Object", "jjtAccept", "(", "AddressListParserVisitor", "visitor", ",", "Object", "data", ")", "{", "return", "visitor", ".", "visit", "(", "this", ",", "data", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setDebugStream", "(", "java", ".", "io", ".", "PrintStream", "ds", ")", "{", "debugStream", "=", "ds", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopStringLiteralDfa_0", "(", "int", "pos", ",", "long", "active0", ")", "{", "switch", "(", "pos", ")", "{", "default", ":", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfa_0", "(", "int", "pos", ",", "long", "active0", ")", "{", "return", "jjMoveNfa_0", "(", "jjStopStringLiteralDfa_0", "(", "pos", ",", "active0", ")", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopAtPos", "(", "int", "pos", ",", "int", "kind", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "return", "pos", "+", "1", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfaWithStates_0", "(", "int", "pos", ",", "int", "kind", ",", "int", "state", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "pos", "+", "1", ";", "}", "return", "jjMoveNfa_0", "(", "state", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveStringLiteralDfa0_0", "(", ")", "{", "switch", "(", "curChar", ")", "{", "case", "<NUM_LIT:10>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:2>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "1", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:3>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:9>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:4>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:5>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:6>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:7>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:8>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:15>", ")", ";", "default", ":", "return", "jjMoveNfa_0", "(", "1", ",", "0", ")", ";", "}", "}", "</s>"]
["<s>", "private", "final", "void", "jjCheckNAdd", "(", "int", "state", ")", "{", "if", "(", "jjrounds", "[", "state", "]", "!", "=", "jjround", ")", "{", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "state", ";", "jjrounds", "[", "state", "]", "=", "jjround", ";", "}", "}", "</s>"]
["<s>", "private", "final", "void", "jjAddStates", "(", "int", "start", ",", "int", "end", ")", "{", "do", "{", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "jjnextStates", "[", "start", "]", ";", "}", "while", "(", "start", "+", "+", "!", "=", "end", ")", ";", "}", "</s>"]
["<s>", "private", "final", "void", "jjCheckNAddTwoStates", "(", "int", "state1", ",", "int", "state2", ")", "{", "jjCheckNAdd", "(", "state1", ")", ";", "jjCheckNAdd", "(", "state2", ")", ";", "}", "</s>"]
["<s>", "private", "final", "void", "jjCheckNAddStates", "(", "int", "start", ",", "int", "end", ")", "{", "do", "{", "jjCheckNAdd", "(", "jjnextStates", "[", "start", "]", ")", ";", "}", "while", "(", "start", "+", "+", "!", "=", "end", ")", ";", "}", "</s>"]
["<s>", "private", "final", "void", "jjCheckNAddStates", "(", "int", "start", ")", "{", "jjCheckNAdd", "(", "jjnextStates", "[", "start", "]", ")", ";", "jjCheckNAdd", "(", "jjnextStates", "[", "start", "+", "1", "]", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveNfa_0", "(", "int", "startState", ",", "int", "curPos", ")", "{", "int", "[", "]", "nextStates", ";", "int", "startsAt", "=", "0", ";", "jjnewStateCnt", "=", "<NUM_LIT:3>", ";", "int", "i", "=", "1", ";", "jjstateSet", "[", "0", "]", "=", "startState", ";", "int", "j", ",", "kind", "=", "<NUM_LIT>", ";", "for", "(", ";", ";", ")", "{", "if", "(", "+", "+", "jjround", "=", "=", "<NUM_LIT>", ")", "ReInitRounds", "(", ")", ";", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "curChar", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "1", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "!", "=", "0", "L", ")", "{", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "}", "else", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "!", "=", "0", "L", ")", "{", "if", "(", "kind", ">", "<NUM_LIT:10>", ")", "kind", "=", "<NUM_LIT:10>", ";", "jjCheckNAdd", "(", "0", ")", ";", "}", "break", ";", "case", "0", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "=", "=", "0", "L", ")", "break", ";", "kind", "=", "<NUM_LIT:10>", ";", "jjCheckNAdd", "(", "0", ")", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "=", "=", "0", "L", ")", "break", ";", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "1", ":", "case", "<NUM_LIT:2>", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "=", "=", "0", "L", ")", "break", ";", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "{", "int", "i2", "=", "(", "curChar", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:6>", ";", "long", "l2", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "if", "(", "kind", "!", "=", "<NUM_LIT>", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "curPos", ";", "kind", "=", "<NUM_LIT>", ";", "}", "+", "+", "curPos", ";", "if", "(", "(", "i", "=", "jjnewStateCnt", ")", "=", "=", "(", "startsAt", "=", "<NUM_LIT:3>", "-", "(", "jjnewStateCnt", "=", "startsAt", ")", ")", ")", "return", "curPos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "curPos", ";", "}", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopStringLiteralDfa_2", "(", "int", "pos", ",", "long", "active0", ")", "{", "switch", "(", "pos", ")", "{", "default", ":", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfa_2", "(", "int", "pos", ",", "long", "active0", ")", "{", "return", "jjMoveNfa_2", "(", "jjStopStringLiteralDfa_2", "(", "pos", ",", "active0", ")", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfaWithStates_2", "(", "int", "pos", ",", "int", "kind", ",", "int", "state", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "pos", "+", "1", ";", "}", "return", "jjMoveNfa_2", "(", "state", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveStringLiteralDfa0_2", "(", ")", "{", "switch", "(", "curChar", ")", "{", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:20>", ")", ";", "default", ":", "return", "jjMoveNfa_2", "(", "0", ",", "0", ")", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveNfa_2", "(", "int", "startState", ",", "int", "curPos", ")", "{", "int", "[", "]", "nextStates", ";", "int", "startsAt", "=", "0", ";", "jjnewStateCnt", "=", "<NUM_LIT:3>", ";", "int", "i", "=", "1", ";", "jjstateSet", "[", "0", "]", "=", "startState", ";", "int", "j", ",", "kind", "=", "<NUM_LIT>", ";", "for", "(", ";", ";", ")", "{", "if", "(", "+", "+", "jjround", "=", "=", "<NUM_LIT>", ")", "ReInitRounds", "(", ")", ";", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "curChar", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "if", "(", "curChar", "=", "=", "<NUM_LIT>", ")", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "1", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "{", "int", "i2", "=", "(", "curChar", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:6>", ";", "long", "l2", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "1", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "if", "(", "kind", "!", "=", "<NUM_LIT>", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "curPos", ";", "kind", "=", "<NUM_LIT>", ";", "}", "+", "+", "curPos", ";", "if", "(", "(", "i", "=", "jjnewStateCnt", ")", "=", "=", "(", "startsAt", "=", "<NUM_LIT:3>", "-", "(", "jjnewStateCnt", "=", "startsAt", ")", ")", ")", "return", "curPos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "curPos", ";", "}", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopStringLiteralDfa_4", "(", "int", "pos", ",", "long", "active0", ")", "{", "switch", "(", "pos", ")", "{", "default", ":", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfa_4", "(", "int", "pos", ",", "long", "active0", ")", "{", "return", "jjMoveNfa_4", "(", "jjStopStringLiteralDfa_4", "(", "pos", ",", "active0", ")", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfaWithStates_4", "(", "int", "pos", ",", "int", "kind", ",", "int", "state", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "pos", "+", "1", ";", "}", "return", "jjMoveNfa_4", "(", "state", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveStringLiteralDfa0_4", "(", ")", "{", "switch", "(", "curChar", ")", "{", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT:31>", ")", ";", "default", ":", "return", "jjMoveNfa_4", "(", "0", ",", "0", ")", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveNfa_4", "(", "int", "startState", ",", "int", "curPos", ")", "{", "int", "[", "]", "nextStates", ";", "int", "startsAt", "=", "0", ";", "jjnewStateCnt", "=", "<NUM_LIT:3>", ";", "int", "i", "=", "1", ";", "jjstateSet", "[", "0", "]", "=", "startState", ";", "int", "j", ",", "kind", "=", "<NUM_LIT>", ";", "for", "(", ";", ";", ")", "{", "if", "(", "+", "+", "jjround", "=", "=", "<NUM_LIT>", ")", "ReInitRounds", "(", ")", ";", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "curChar", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "case", "<NUM_LIT:2>", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "=", "=", "0", "L", ")", "break", ";", "if", "(", "kind", ">", "<NUM_LIT:30>", ")", "kind", "=", "<NUM_LIT:30>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "!", "=", "0", "L", ")", "{", "if", "(", "kind", ">", "<NUM_LIT:30>", ")", "kind", "=", "<NUM_LIT:30>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "}", "else", "if", "(", "curChar", "=", "=", "<NUM_LIT>", ")", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "1", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "=", "=", "0", "L", ")", "break", ";", "if", "(", "kind", ">", "<NUM_LIT:30>", ")", "kind", "=", "<NUM_LIT:30>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "{", "int", "i2", "=", "(", "curChar", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:6>", ";", "long", "l2", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "case", "<NUM_LIT:2>", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "=", "=", "0", "L", ")", "break", ";", "if", "(", "kind", ">", "<NUM_LIT:30>", ")", "kind", "=", "<NUM_LIT:30>", ";", "jjCheckNAdd", "(", "<NUM_LIT:2>", ")", ";", "break", ";", "case", "1", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "if", "(", "kind", "!", "=", "<NUM_LIT>", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "curPos", ";", "kind", "=", "<NUM_LIT>", ";", "}", "+", "+", "curPos", ";", "if", "(", "(", "i", "=", "jjnewStateCnt", ")", "=", "=", "(", "startsAt", "=", "<NUM_LIT:3>", "-", "(", "jjnewStateCnt", "=", "startsAt", ")", ")", ")", "return", "curPos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "curPos", ";", "}", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopStringLiteralDfa_3", "(", "int", "pos", ",", "long", "active0", ")", "{", "switch", "(", "pos", ")", "{", "default", ":", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfa_3", "(", "int", "pos", ",", "long", "active0", ")", "{", "return", "jjMoveNfa_3", "(", "jjStopStringLiteralDfa_3", "(", "pos", ",", "active0", ")", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfaWithStates_3", "(", "int", "pos", ",", "int", "kind", ",", "int", "state", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "pos", "+", "1", ";", "}", "return", "jjMoveNfa_3", "(", "state", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveStringLiteralDfa0_3", "(", ")", "{", "switch", "(", "curChar", ")", "{", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "default", ":", "return", "jjMoveNfa_3", "(", "0", ",", "0", ")", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveNfa_3", "(", "int", "startState", ",", "int", "curPos", ")", "{", "int", "[", "]", "nextStates", ";", "int", "startsAt", "=", "0", ";", "jjnewStateCnt", "=", "<NUM_LIT:3>", ";", "int", "i", "=", "1", ";", "jjstateSet", "[", "0", "]", "=", "startState", ";", "int", "j", ",", "kind", "=", "<NUM_LIT>", ";", "for", "(", ";", ";", ")", "{", "if", "(", "+", "+", "jjround", "=", "=", "<NUM_LIT>", ")", "ReInitRounds", "(", ")", ";", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "curChar", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT:24>", ")", "kind", "=", "<NUM_LIT:24>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "if", "(", "curChar", "=", "=", "<NUM_LIT>", ")", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "1", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT:24>", ")", "kind", "=", "<NUM_LIT:24>", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "{", "int", "i2", "=", "(", "curChar", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:6>", ";", "long", "l2", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "1", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT:24>", ")", "kind", "=", "<NUM_LIT:24>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "if", "(", "kind", "!", "=", "<NUM_LIT>", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "curPos", ";", "kind", "=", "<NUM_LIT>", ";", "}", "+", "+", "curPos", ";", "if", "(", "(", "i", "=", "jjnewStateCnt", ")", "=", "=", "(", "startsAt", "=", "<NUM_LIT:3>", "-", "(", "jjnewStateCnt", "=", "startsAt", ")", ")", ")", "return", "curPos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "curPos", ";", "}", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStopStringLiteralDfa_1", "(", "int", "pos", ",", "long", "active0", ")", "{", "switch", "(", "pos", ")", "{", "default", ":", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfa_1", "(", "int", "pos", ",", "long", "active0", ")", "{", "return", "jjMoveNfa_1", "(", "jjStopStringLiteralDfa_1", "(", "pos", ",", "active0", ")", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjStartNfaWithStates_1", "(", "int", "pos", ",", "int", "kind", ",", "int", "state", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "pos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "pos", "+", "1", ";", "}", "return", "jjMoveNfa_1", "(", "state", ",", "pos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveStringLiteralDfa0_1", "(", ")", "{", "switch", "(", "curChar", ")", "{", "case", "<NUM_LIT>", ":", "return", "jjStopAtPos", "(", "0", ",", "<NUM_LIT>", ")", ";", "default", ":", "return", "jjMoveNfa_1", "(", "0", ",", "0", ")", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "jjMoveNfa_1", "(", "int", "startState", ",", "int", "curPos", ")", "{", "int", "[", "]", "nextStates", ";", "int", "startsAt", "=", "0", ";", "jjnewStateCnt", "=", "<NUM_LIT:3>", ";", "int", "i", "=", "1", ";", "jjstateSet", "[", "0", "]", "=", "startState", ";", "int", "j", ",", "kind", "=", "<NUM_LIT>", ";", "for", "(", ";", ";", ")", "{", "if", "(", "+", "+", "jjround", "=", "=", "<NUM_LIT>", ")", "ReInitRounds", "(", ")", ";", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "curChar", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT:16>", ")", "kind", "=", "<NUM_LIT:16>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "if", "(", "curChar", "<", "<NUM_LIT>", ")", "{", "long", "l", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "!", "=", "0", "L", ")", "{", "if", "(", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "}", "else", "if", "(", "curChar", "=", "=", "<NUM_LIT>", ")", "jjstateSet", "[", "jjnewStateCnt", "+", "+", "]", "=", "1", ";", "break", ";", "case", "1", ":", "if", "(", "kind", ">", "<NUM_LIT:16>", ")", "kind", "=", "<NUM_LIT:16>", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "if", "(", "(", "<NUM_LIT>", "&", "l", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "else", "{", "int", "i2", "=", "(", "curChar", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:6>", ";", "long", "l2", "=", "<NUM_LIT>", "<", "<", "(", "curChar", "&", "<NUM_LIT>", ")", ";", "MatchLoop", ":", "do", "{", "switch", "(", "jjstateSet", "[", "-", "-", "i", "]", ")", "{", "case", "0", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT>", ")", "kind", "=", "<NUM_LIT>", ";", "break", ";", "case", "1", ":", "if", "(", "(", "jjbitVec0", "[", "i2", "]", "&", "l2", ")", "!", "=", "0", "L", "&", "&", "kind", ">", "<NUM_LIT:16>", ")", "kind", "=", "<NUM_LIT:16>", ";", "break", ";", "default", ":", "break", ";", "}", "}", "while", "(", "i", "!", "=", "startsAt", ")", ";", "}", "if", "(", "kind", "!", "=", "<NUM_LIT>", ")", "{", "jjmatchedKind", "=", "kind", ";", "jjmatchedPos", "=", "curPos", ";", "kind", "=", "<NUM_LIT>", ";", "}", "+", "+", "curPos", ";", "if", "(", "(", "i", "=", "jjnewStateCnt", ")", "=", "=", "(", "startsAt", "=", "<NUM_LIT:3>", "-", "(", "jjnewStateCnt", "=", "startsAt", ")", ")", ")", "return", "curPos", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "return", "curPos", ";", "}", "}", "}", "</s>"]
["<s>", "public", "AddressListParserTokenManager", "(", "SimpleCharStream", "stream", ")", "{", "if", "(", "SimpleCharStream", ".", "staticFlag", ")", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "input_stream", "=", "stream", ";", "}", "</s>"]
["<s>", "public", "AddressListParserTokenManager", "(", "SimpleCharStream", "stream", ",", "int", "lexState", ")", "{", "this", "(", "stream", ")", ";", "SwitchTo", "(", "lexState", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "SimpleCharStream", "stream", ")", "{", "jjmatchedPos", "=", "jjnewStateCnt", "=", "0", ";", "curLexState", "=", "defaultLexState", ";", "input_stream", "=", "stream", ";", "ReInitRounds", "(", ")", ";", "}", "</s>"]
["<s>", "private", "final", "void", "ReInitRounds", "(", ")", "{", "int", "i", ";", "jjround", "=", "<NUM_LIT>", ";", "for", "(", "i", "=", "<NUM_LIT:3>", ";", "i", "-", "-", ">", "0", ";", ")", "jjrounds", "[", "i", "]", "=", "<NUM_LIT>", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "SimpleCharStream", "stream", ",", "int", "lexState", ")", "{", "ReInit", "(", "stream", ")", ";", "SwitchTo", "(", "lexState", ")", ";", "}", "</s>"]
["<s>", "public", "void", "SwitchTo", "(", "int", "lexState", ")", "{", "if", "(", "lexState", ">", "=", "<NUM_LIT:5>", "|", "|", "lexState", "<", "0", ")", "throw", "new", "TokenMgrError", "(", "\"", "<STR_LIT>", "\"", "+", "lexState", "+", "\"", "<STR_LIT>", "\"", ",", "TokenMgrError", ".", "INVALID_LEXICAL_STATE", ")", ";", "else", "curLexState", "=", "lexState", ";", "}", "</s>"]
["<s>", "protected", "Token", "jjFillToken", "(", ")", "{", "Token", "t", "=", "Token", ".", "newToken", "(", "jjmatchedKind", ")", ";", "t", ".", "kind", "=", "jjmatchedKind", ";", "String", "im", "=", "jjstrLiteralImages", "[", "jjmatchedKind", "]", ";", "t", ".", "image", "=", "(", "im", "=", "=", "null", ")", "?", "input_stream", ".", "GetImage", "(", ")", ":", "im", ";", "t", ".", "beginLine", "=", "input_stream", ".", "getBeginLine", "(", ")", ";", "t", ".", "beginColumn", "=", "input_stream", ".", "getBeginColumn", "(", ")", ";", "t", ".", "endLine", "=", "input_stream", ".", "getEndLine", "(", ")", ";", "t", ".", "endColumn", "=", "input_stream", ".", "getEndColumn", "(", ")", ";", "return", "t", ";", "}", "</s>"]
["<s>", "public", "Token", "getNextToken", "(", ")", "{", "int", "kind", ";", "Token", "specialToken", "=", "null", ";", "Token", "matchedToken", ";", "int", "curPos", "=", "0", ";", "EOFLoop", ":", "for", "(", ";", ";", ")", "{", "try", "{", "curChar", "=", "input_stream", ".", "BeginToken", "(", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "jjmatchedKind", "=", "0", ";", "matchedToken", "=", "jjFillToken", "(", ")", ";", "matchedToken", ".", "specialToken", "=", "specialToken", ";", "return", "matchedToken", ";", "}", "image", "=", "null", ";", "jjimageLen", "=", "0", ";", "for", "(", ";", ";", ")", "{", "switch", "(", "curLexState", ")", "{", "case", "0", ":", "jjmatchedKind", "=", "<NUM_LIT>", ";", "jjmatchedPos", "=", "0", ";", "curPos", "=", "jjMoveStringLiteralDfa0_0", "(", ")", ";", "break", ";", "case", "1", ":", "jjmatchedKind", "=", "<NUM_LIT>", ";", "jjmatchedPos", "=", "0", ";", "curPos", "=", "jjMoveStringLiteralDfa0_1", "(", ")", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "jjmatchedKind", "=", "<NUM_LIT>", ";", "jjmatchedPos", "=", "0", ";", "curPos", "=", "jjMoveStringLiteralDfa0_2", "(", ")", ";", "break", ";", "case", "<NUM_LIT:3>", ":", "jjmatchedKind", "=", "<NUM_LIT>", ";", "jjmatchedPos", "=", "0", ";", "curPos", "=", "jjMoveStringLiteralDfa0_3", "(", ")", ";", "break", ";", "case", "<NUM_LIT:4>", ":", "jjmatchedKind", "=", "<NUM_LIT>", ";", "jjmatchedPos", "=", "0", ";", "curPos", "=", "jjMoveStringLiteralDfa0_4", "(", ")", ";", "break", ";", "}", "if", "(", "jjmatchedKind", "!", "=", "<NUM_LIT>", ")", "{", "if", "(", "jjmatchedPos", "+", "1", "<", "curPos", ")", "input_stream", ".", "backup", "(", "curPos", "-", "jjmatchedPos", "-", "1", ")", ";", "if", "(", "(", "jjtoToken", "[", "jjmatchedKind", ">", ">", "<NUM_LIT:6>", "]", "&", "(", "<NUM_LIT>", "<", "<", "(", "jjmatchedKind", "&", "<NUM_LIT>", ")", ")", ")", "!", "=", "0", "L", ")", "{", "matchedToken", "=", "jjFillToken", "(", ")", ";", "matchedToken", ".", "specialToken", "=", "specialToken", ";", "TokenLexicalActions", "(", "matchedToken", ")", ";", "if", "(", "jjnewLexState", "[", "jjmatchedKind", "]", "!", "=", "-", "1", ")", "curLexState", "=", "jjnewLexState", "[", "jjmatchedKind", "]", ";", "return", "matchedToken", ";", "}", "else", "if", "(", "(", "jjtoSkip", "[", "jjmatchedKind", ">", ">", "<NUM_LIT:6>", "]", "&", "(", "<NUM_LIT>", "<", "<", "(", "jjmatchedKind", "&", "<NUM_LIT>", ")", ")", ")", "!", "=", "0", "L", ")", "{", "if", "(", "(", "jjtoSpecial", "[", "jjmatchedKind", ">", ">", "<NUM_LIT:6>", "]", "&", "(", "<NUM_LIT>", "<", "<", "(", "jjmatchedKind", "&", "<NUM_LIT>", ")", ")", ")", "!", "=", "0", "L", ")", "{", "matchedToken", "=", "jjFillToken", "(", ")", ";", "if", "(", "specialToken", "=", "=", "null", ")", "specialToken", "=", "matchedToken", ";", "else", "{", "matchedToken", ".", "specialToken", "=", "specialToken", ";", "specialToken", "=", "(", "specialToken", ".", "next", "=", "matchedToken", ")", ";", "}", "}", "if", "(", "jjnewLexState", "[", "jjmatchedKind", "]", "!", "=", "-", "1", ")", "curLexState", "=", "jjnewLexState", "[", "jjmatchedKind", "]", ";", "continue", "EOFLoop", ";", "}", "MoreLexicalActions", "(", ")", ";", "if", "(", "jjnewLexState", "[", "jjmatchedKind", "]", "!", "=", "-", "1", ")", "curLexState", "=", "jjnewLexState", "[", "jjmatchedKind", "]", ";", "curPos", "=", "0", ";", "jjmatchedKind", "=", "<NUM_LIT>", ";", "try", "{", "curChar", "=", "input_stream", ".", "readChar", "(", ")", ";", "continue", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e1", ")", "{", "}", "}", "int", "error_line", "=", "input_stream", ".", "getEndLine", "(", ")", ";", "int", "error_column", "=", "input_stream", ".", "getEndColumn", "(", ")", ";", "String", "error_after", "=", "null", ";", "boolean", "EOFSeen", "=", "false", ";", "try", "{", "input_stream", ".", "readChar", "(", ")", ";", "input_stream", ".", "backup", "(", "1", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e1", ")", "{", "EOFSeen", "=", "true", ";", "error_after", "=", "curPos", "<", "=", "1", "?", "\"", "\"", ":", "input_stream", ".", "GetImage", "(", ")", ";", "if", "(", "curChar", "=", "=", "<STR_LIT:\\n>", "|", "|", "curChar", "=", "=", "<STR_LIT>", ")", "{", "error_line", "+", "+", ";", "error_column", "=", "0", ";", "}", "else", "error_column", "+", "+", ";", "}", "if", "(", "!", "EOFSeen", ")", "{", "input_stream", ".", "backup", "(", "1", ")", ";", "error_after", "=", "curPos", "<", "=", "1", "?", "\"", "\"", ":", "input_stream", ".", "GetImage", "(", ")", ";", "}", "throw", "new", "TokenMgrError", "(", "EOFSeen", ",", "curLexState", ",", "error_line", ",", "error_column", ",", "error_after", ",", "curChar", ",", "TokenMgrError", ".", "LEXICAL_ERROR", ")", ";", "}", "}", "}", "</s>"]
["<s>", "void", "MoreLexicalActions", "(", ")", "{", "jjimageLen", "+", "=", "(", "lengthOfMatch", "=", "jjmatchedPos", "+", "1", ")", ";", "switch", "(", "jjmatchedKind", ")", "{", "case", "<NUM_LIT:16>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "image", ".", "deleteCharAt", "(", "image", ".", "length", "(", ")", "-", "<NUM_LIT:2>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "image", ".", "deleteCharAt", "(", "image", ".", "length", "(", ")", "-", "<NUM_LIT:2>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "commentNest", "=", "1", ";", "break", ";", "case", "<NUM_LIT:24>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "image", ".", "deleteCharAt", "(", "image", ".", "length", "(", ")", "-", "<NUM_LIT:2>", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "+", "+", "commentNest", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "-", "-", "commentNest", ";", "if", "(", "commentNest", "=", "=", "0", ")", "SwitchTo", "(", "INCOMMENT", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "image", ".", "deleteCharAt", "(", "image", ".", "length", "(", ")", "-", "1", ")", ";", "break", ";", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", ")", ")", ";", "jjimageLen", "=", "0", ";", "image", ".", "deleteCharAt", "(", "image", ".", "length", "(", ")", "-", "<NUM_LIT:2>", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "</s>"]
["<s>", "void", "TokenLexicalActions", "(", "Token", "matchedToken", ")", "{", "switch", "(", "jjmatchedKind", ")", "{", "case", "<NUM_LIT>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", "+", "(", "lengthOfMatch", "=", "jjmatchedPos", "+", "1", ")", ")", ")", ";", "matchedToken", ".", "image", "=", "image", ".", "toString", "(", ")", ";", "break", ";", "case", "<NUM_LIT:31>", ":", "if", "(", "image", "=", "=", "null", ")", "image", "=", "new", "StringBuffer", "(", ")", ";", "image", ".", "append", "(", "input_stream", ".", "GetSuffix", "(", "jjimageLen", "+", "(", "lengthOfMatch", "=", "jjmatchedPos", "+", "1", ")", ")", ")", ";", "matchedToken", ".", "image", "=", "image", ".", "substring", "(", "0", ",", "image", ".", "length", "(", ")", "-", "1", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "</s>"]
["<s>", "public", "ASTname_addr", "(", "int", "id", ")", "{", "super", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "ASTname_addr", "(", "AddressListParser", "p", ",", "int", "id", ")", "{", "super", "(", "p", ",", "id", ")", ";", "}", "</s>"]
["<s>", "public", "Object", "jjtAccept", "(", "AddressListParserVisitor", "visitor", ",", "Object", "data", ")", "{", "return", "visitor", ".", "visit", "(", "this", ",", "data", ")", ";", "}", "</s>"]
["<s>", "public", "ASTphrase", "(", "int", "id", ")", "{", "super", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "ASTphrase", "(", "AddressListParser", "p", ",", "int", "id", ")", "{", "super", "(", "p", ",", "id", ")", ";", "}", "</s>"]
["<s>", "public", "Object", "jjtAccept", "(", "AddressListParserVisitor", "visitor", ",", "Object", "data", ")", "{", "return", "visitor", ".", "visit", "(", "this", ",", "data", ")", ";", "}", "</s>"]
["<s>", "public", "ASTroute", "(", "int", "id", ")", "{", "super", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "ASTroute", "(", "AddressListParser", "p", ",", "int", "id", ")", "{", "super", "(", "p", ",", "id", ")", ";", "}", "</s>"]
["<s>", "public", "Object", "jjtAccept", "(", "AddressListParserVisitor", "visitor", ",", "Object", "data", ")", "{", "return", "visitor", ".", "visit", "(", "this", ",", "data", ")", ";", "}", "</s>"]
["<s>", "public", "ASTangle_addr", "(", "int", "id", ")", "{", "super", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "ASTangle_addr", "(", "AddressListParser", "p", ",", "int", "id", ")", "{", "super", "(", "p", ",", "id", ")", ";", "}", "</s>"]
["<s>", "public", "Object", "jjtAccept", "(", "AddressListParserVisitor", "visitor", ",", "Object", "data", ")", "{", "return", "visitor", ".", "visit", "(", "this", ",", "data", ")", ";", "}", "</s>"]
["<s>", "protected", "static", "final", "String", "addEscapes", "(", "String", "str", ")", "{", "StringBuffer", "retval", "=", "new", "StringBuffer", "(", ")", ";", "char", "ch", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "str", ".", "length", "(", ")", ";", "i", "+", "+", ")", "{", "switch", "(", "str", ".", "charAt", "(", "i", ")", ")", "{", "case", "0", ":", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\t>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\n>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\\">", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "'", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\\\>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "\"", ")", ";", "continue", ";", "default", ":", "if", "(", "(", "ch", "=", "str", ".", "charAt", "(", "i", ")", ")", "<", "<NUM_LIT>", "|", "|", "ch", ">", "<NUM_LIT>", ")", "{", "String", "s", "=", "\"", "<STR_LIT>", "\"", "+", "Integer", ".", "toString", "(", "ch", ",", "<NUM_LIT:16>", ")", ";", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "s", ".", "substring", "(", "s", ".", "length", "(", ")", "-", "<NUM_LIT:4>", ",", "s", ".", "length", "(", ")", ")", ")", ";", "}", "else", "{", "retval", ".", "append", "(", "ch", ")", ";", "}", "continue", ";", "}", "}", "return", "retval", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "static", "String", "LexicalError", "(", "boolean", "EOFSeen", ",", "int", "lexState", ",", "int", "errorLine", ",", "int", "errorColumn", ",", "String", "errorAfter", ",", "char", "curChar", ")", "{", "return", "(", "\"", "<STR_LIT>", "\"", "+", "errorLine", "+", "\"", "<STR_LIT>", "\"", "+", "errorColumn", "+", "\"", "<STR_LIT>", "\"", "+", "(", "EOFSeen", "?", "\"", "<STR_LIT>", "\"", ":", "(", "\"", "<STR_LIT:\\\">", "\"", "+", "addEscapes", "(", "String", ".", "valueOf", "(", "curChar", ")", ")", "+", "\"", "<STR_LIT:\\\">", "\"", ")", "+", "\"", "<STR_LIT>", "\"", "+", "(", "int", ")", "curChar", "+", "\"", "<STR_LIT>", "\"", ")", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "addEscapes", "(", "errorAfter", ")", "+", "\"", "<STR_LIT:\\\">", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getMessage", "(", ")", "{", "return", "super", ".", "getMessage", "(", ")", ";", "}", "</s>"]
["<s>", "public", "TokenMgrError", "(", ")", "{", "}", "</s>"]
["<s>", "public", "TokenMgrError", "(", "String", "message", ",", "int", "reason", ")", "{", "super", "(", "message", ")", ";", "errorCode", "=", "reason", ";", "}", "</s>"]
["<s>", "public", "TokenMgrError", "(", "boolean", "EOFSeen", ",", "int", "lexState", ",", "int", "errorLine", ",", "int", "errorColumn", ",", "String", "errorAfter", ",", "char", "curChar", ",", "int", "reason", ")", "{", "this", "(", "LexicalError", "(", "EOFSeen", ",", "lexState", ",", "errorLine", ",", "errorColumn", ",", "errorAfter", ",", "curChar", ")", ",", "reason", ")", ";", "}", "</s>"]
["<s>", "public", "ParseException", "(", "Token", "currentTokenVal", ",", "int", "[", "]", "[", "]", "expectedTokenSequencesVal", ",", "String", "[", "]", "tokenImageVal", ")", "{", "super", "(", "\"", "\"", ")", ";", "specialConstructor", "=", "true", ";", "currentToken", "=", "currentTokenVal", ";", "expectedTokenSequences", "=", "expectedTokenSequencesVal", ";", "tokenImage", "=", "tokenImageVal", ";", "}", "</s>"]
["<s>", "public", "ParseException", "(", ")", "{", "super", "(", ")", ";", "specialConstructor", "=", "false", ";", "}", "</s>"]
["<s>", "public", "ParseException", "(", "String", "message", ")", "{", "super", "(", "message", ")", ";", "specialConstructor", "=", "false", ";", "}", "</s>"]
["<s>", "public", "String", "getMessage", "(", ")", "{", "if", "(", "!", "specialConstructor", ")", "{", "return", "super", ".", "getMessage", "(", ")", ";", "}", "StringBuffer", "expected", "=", "new", "StringBuffer", "(", ")", ";", "int", "maxSize", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "expectedTokenSequences", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "maxSize", "<", "expectedTokenSequences", "[", "i", "]", ".", "length", ")", "{", "maxSize", "=", "expectedTokenSequences", "[", "i", "]", ".", "length", ";", "}", "for", "(", "int", "j", "=", "0", ";", "j", "<", "expectedTokenSequences", "[", "i", "]", ".", "length", ";", "j", "+", "+", ")", "{", "expected", ".", "append", "(", "tokenImage", "[", "expectedTokenSequences", "[", "i", "]", "[", "j", "]", "]", ")", ".", "append", "(", "\"", "\"", ")", ";", "}", "if", "(", "expectedTokenSequences", "[", "i", "]", "[", "expectedTokenSequences", "[", "i", "]", ".", "length", "-", "1", "]", "!", "=", "0", ")", "{", "expected", ".", "append", "(", "\"", "<STR_LIT:...>", "\"", ")", ";", "}", "expected", ".", "append", "(", "eol", ")", ".", "append", "(", "\"", "\"", ")", ";", "}", "String", "retval", "=", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ";", "Token", "tok", "=", "currentToken", ".", "next", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "maxSize", ";", "i", "+", "+", ")", "{", "if", "(", "i", "!", "=", "0", ")", "retval", "+", "=", "\"", "\"", ";", "if", "(", "tok", ".", "kind", "=", "=", "0", ")", "{", "retval", "+", "=", "tokenImage", "[", "0", "]", ";", "break", ";", "}", "retval", "+", "=", "add_escapes", "(", "tok", ".", "image", ")", ";", "tok", "=", "tok", ".", "next", ";", "}", "retval", "+", "=", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "currentToken", ".", "next", ".", "beginLine", "+", "\"", "<STR_LIT>", "\"", "+", "currentToken", ".", "next", ".", "beginColumn", ";", "retval", "+", "=", "\"", "<STR_LIT:.>", "\"", "+", "eol", ";", "if", "(", "expectedTokenSequences", ".", "length", "=", "=", "1", ")", "{", "retval", "+", "=", "\"", "<STR_LIT>", "\"", "+", "eol", "+", "\"", "\"", ";", "}", "else", "{", "retval", "+", "=", "\"", "<STR_LIT>", "\"", "+", "eol", "+", "\"", "\"", ";", "}", "retval", "+", "=", "expected", ".", "toString", "(", ")", ";", "return", "retval", ";", "}", "</s>"]
["<s>", "protected", "String", "add_escapes", "(", "String", "str", ")", "{", "StringBuffer", "retval", "=", "new", "StringBuffer", "(", ")", ";", "char", "ch", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "str", ".", "length", "(", ")", ";", "i", "+", "+", ")", "{", "switch", "(", "str", ".", "charAt", "(", "i", ")", ")", "{", "case", "0", ":", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\t>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\n>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\\">", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "\"", ")", ";", "continue", ";", "case", "<STR_LIT>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "'", "\"", ")", ";", "continue", ";", "case", "<STR_LIT:\\\\>", ":", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "\"", ")", ";", "continue", ";", "default", ":", "if", "(", "(", "ch", "=", "str", ".", "charAt", "(", "i", ")", ")", "<", "<NUM_LIT>", "|", "|", "ch", ">", "<NUM_LIT>", ")", "{", "String", "s", "=", "\"", "<STR_LIT>", "\"", "+", "Integer", ".", "toString", "(", "ch", ",", "<NUM_LIT:16>", ")", ";", "retval", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "s", ".", "substring", "(", "s", ".", "length", "(", ")", "-", "<NUM_LIT:4>", ",", "s", ".", "length", "(", ")", ")", ")", ";", "}", "else", "{", "retval", ".", "append", "(", "ch", ")", ";", "}", "continue", ";", "}", "}", "return", "retval", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ASTgroup_body", "(", "int", "id", ")", "{", "super", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "ASTgroup_body", "(", "AddressListParser", "p", ",", "int", "id", ")", "{", "super", "(", "p", ",", "id", ")", ";", "}", "</s>"]
["<s>", "public", "Object", "jjtAccept", "(", "AddressListParserVisitor", "visitor", ",", "Object", "data", ")", "{", "return", "visitor", ".", "visit", "(", "this", ",", "data", ")", ";", "}", "</s>"]
["<s>", "public", "ASTdomain", "(", "int", "id", ")", "{", "super", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "ASTdomain", "(", "AddressListParser", "p", ",", "int", "id", ")", "{", "super", "(", "p", ",", "id", ")", ";", "}", "</s>"]
["<s>", "public", "Object", "jjtAccept", "(", "AddressListParserVisitor", "visitor", ",", "Object", "data", ")", "{", "return", "visitor", ".", "visit", "(", "this", ",", "data", ")", ";", "}", "</s>"]
["<s>", "public", "ASTaddress_list", "(", "int", "id", ")", "{", "super", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "ASTaddress_list", "(", "AddressListParser", "p", ",", "int", "id", ")", "{", "super", "(", "p", ",", "id", ")", ";", "}", "</s>"]
["<s>", "public", "Object", "jjtAccept", "(", "AddressListParserVisitor", "visitor", ",", "Object", "data", ")", "{", "return", "visitor", ".", "visit", "(", "this", ",", "data", ")", ";", "}", "</s>"]
["<s>", "public", "Object", "visit", "(", "SimpleNode", "node", ",", "Object", "data", ")", ";", "</s>"]
["<s>", "public", "Object", "visit", "(", "ASTaddress_list", "node", ",", "Object", "data", ")", ";", "</s>"]
["<s>", "public", "Object", "visit", "(", "ASTaddress", "node", ",", "Object", "data", ")", ";", "</s>"]
["<s>", "public", "Object", "visit", "(", "ASTmailbox", "node", ",", "Object", "data", ")", ";", "</s>"]
["<s>", "public", "Object", "visit", "(", "ASTname_addr", "node", ",", "Object", "data", ")", ";", "</s>"]
["<s>", "public", "Object", "visit", "(", "ASTgroup_body", "node", ",", "Object", "data", ")", ";", "</s>"]
["<s>", "public", "Object", "visit", "(", "ASTangle_addr", "node", ",", "Object", "data", ")", ";", "</s>"]
["<s>", "public", "Object", "visit", "(", "ASTroute", "node", ",", "Object", "data", ")", ";", "</s>"]
["<s>", "public", "Object", "visit", "(", "ASTphrase", "node", ",", "Object", "data", ")", ";", "</s>"]
["<s>", "public", "Object", "visit", "(", "ASTaddr_spec", "node", ",", "Object", "data", ")", ";", "</s>"]
["<s>", "public", "Object", "visit", "(", "ASTlocal_part", "node", ",", "Object", "data", ")", ";", "</s>"]
["<s>", "public", "Object", "visit", "(", "ASTdomain", "node", ",", "Object", "data", ")", ";", "</s>"]
["<s>", "public", "ASTaddress", "(", "int", "id", ")", "{", "super", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "ASTaddress", "(", "AddressListParser", "p", ",", "int", "id", ")", "{", "super", "(", "p", ",", "id", ")", ";", "}", "</s>"]
["<s>", "public", "Object", "jjtAccept", "(", "AddressListParserVisitor", "visitor", ",", "Object", "data", ")", "{", "return", "visitor", ".", "visit", "(", "this", ",", "data", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "setTabSize", "(", "int", "i", ")", "{", "tabSize", "=", "i", ";", "}", "</s>"]
["<s>", "protected", "int", "getTabSize", "(", "int", "i", ")", "{", "return", "tabSize", ";", "}", "</s>"]
["<s>", "protected", "void", "ExpandBuff", "(", "boolean", "wrapAround", ")", "{", "char", "[", "]", "newbuffer", "=", "new", "char", "[", "bufsize", "+", "<NUM_LIT>", "]", ";", "int", "newbufline", "[", "]", "=", "new", "int", "[", "bufsize", "+", "<NUM_LIT>", "]", ";", "int", "newbufcolumn", "[", "]", "=", "new", "int", "[", "bufsize", "+", "<NUM_LIT>", "]", ";", "try", "{", "if", "(", "wrapAround", ")", "{", "System", ".", "arraycopy", "(", "buffer", ",", "tokenBegin", ",", "newbuffer", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "System", ".", "arraycopy", "(", "buffer", ",", "0", ",", "newbuffer", ",", "bufsize", "-", "tokenBegin", ",", "bufpos", ")", ";", "buffer", "=", "newbuffer", ";", "System", ".", "arraycopy", "(", "bufline", ",", "tokenBegin", ",", "newbufline", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "System", ".", "arraycopy", "(", "bufline", ",", "0", ",", "newbufline", ",", "bufsize", "-", "tokenBegin", ",", "bufpos", ")", ";", "bufline", "=", "newbufline", ";", "System", ".", "arraycopy", "(", "bufcolumn", ",", "tokenBegin", ",", "newbufcolumn", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "System", ".", "arraycopy", "(", "bufcolumn", ",", "0", ",", "newbufcolumn", ",", "bufsize", "-", "tokenBegin", ",", "bufpos", ")", ";", "bufcolumn", "=", "newbufcolumn", ";", "maxNextCharInd", "=", "(", "bufpos", "+", "=", "(", "bufsize", "-", "tokenBegin", ")", ")", ";", "}", "else", "{", "System", ".", "arraycopy", "(", "buffer", ",", "tokenBegin", ",", "newbuffer", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "buffer", "=", "newbuffer", ";", "System", ".", "arraycopy", "(", "bufline", ",", "tokenBegin", ",", "newbufline", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "bufline", "=", "newbufline", ";", "System", ".", "arraycopy", "(", "bufcolumn", ",", "tokenBegin", ",", "newbufcolumn", ",", "0", ",", "bufsize", "-", "tokenBegin", ")", ";", "bufcolumn", "=", "newbufcolumn", ";", "maxNextCharInd", "=", "(", "bufpos", "-", "=", "tokenBegin", ")", ";", "}", "}", "catch", "(", "Throwable", "t", ")", "{", "throw", "new", "Error", "(", "t", ".", "getMessage", "(", ")", ")", ";", "}", "bufsize", "+", "=", "<NUM_LIT>", ";", "available", "=", "bufsize", ";", "tokenBegin", "=", "0", ";", "}", "</s>"]
["<s>", "protected", "void", "FillBuff", "(", ")", "throws", "java", ".", "io", ".", "IOException", "{", "if", "(", "maxNextCharInd", "=", "=", "available", ")", "{", "if", "(", "available", "=", "=", "bufsize", ")", "{", "if", "(", "tokenBegin", ">", "<NUM_LIT>", ")", "{", "bufpos", "=", "maxNextCharInd", "=", "0", ";", "available", "=", "tokenBegin", ";", "}", "else", "if", "(", "tokenBegin", "<", "0", ")", "bufpos", "=", "maxNextCharInd", "=", "0", ";", "else", "ExpandBuff", "(", "false", ")", ";", "}", "else", "if", "(", "available", ">", "tokenBegin", ")", "available", "=", "bufsize", ";", "else", "if", "(", "(", "tokenBegin", "-", "available", ")", "<", "<NUM_LIT>", ")", "ExpandBuff", "(", "true", ")", ";", "else", "available", "=", "tokenBegin", ";", "}", "int", "i", ";", "try", "{", "if", "(", "(", "i", "=", "inputStream", ".", "read", "(", "buffer", ",", "maxNextCharInd", ",", "available", "-", "maxNextCharInd", ")", ")", "=", "=", "-", "1", ")", "{", "inputStream", ".", "close", "(", ")", ";", "throw", "new", "java", ".", "io", ".", "IOException", "(", ")", ";", "}", "else", "maxNextCharInd", "+", "=", "i", ";", "return", ";", "}", "catch", "(", "java", ".", "io", ".", "IOException", "e", ")", "{", "-", "-", "bufpos", ";", "backup", "(", "0", ")", ";", "if", "(", "tokenBegin", "=", "=", "-", "1", ")", "tokenBegin", "=", "bufpos", ";", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "public", "char", "BeginToken", "(", ")", "throws", "java", ".", "io", ".", "IOException", "{", "tokenBegin", "=", "-", "1", ";", "char", "c", "=", "readChar", "(", ")", ";", "tokenBegin", "=", "bufpos", ";", "return", "c", ";", "}", "</s>"]
["<s>", "protected", "void", "UpdateLineColumn", "(", "char", "c", ")", "{", "column", "+", "+", ";", "if", "(", "prevCharIsLF", ")", "{", "prevCharIsLF", "=", "false", ";", "line", "+", "=", "(", "column", "=", "1", ")", ";", "}", "else", "if", "(", "prevCharIsCR", ")", "{", "prevCharIsCR", "=", "false", ";", "if", "(", "c", "=", "=", "<STR_LIT:\\n>", ")", "{", "prevCharIsLF", "=", "true", ";", "}", "else", "line", "+", "=", "(", "column", "=", "1", ")", ";", "}", "switch", "(", "c", ")", "{", "case", "<STR_LIT>", ":", "prevCharIsCR", "=", "true", ";", "break", ";", "case", "<STR_LIT:\\n>", ":", "prevCharIsLF", "=", "true", ";", "break", ";", "case", "<STR_LIT:\\t>", ":", "column", "-", "-", ";", "column", "+", "=", "(", "tabSize", "-", "(", "column", "%", "tabSize", ")", ")", ";", "break", ";", "default", ":", "break", ";", "}", "bufline", "[", "bufpos", "]", "=", "line", ";", "bufcolumn", "[", "bufpos", "]", "=", "column", ";", "}", "</s>"]
["<s>", "public", "char", "readChar", "(", ")", "throws", "java", ".", "io", ".", "IOException", "{", "if", "(", "inBuf", ">", "0", ")", "{", "-", "-", "inBuf", ";", "if", "(", "+", "+", "bufpos", "=", "=", "bufsize", ")", "bufpos", "=", "0", ";", "return", "buffer", "[", "bufpos", "]", ";", "}", "if", "(", "+", "+", "bufpos", ">", "=", "maxNextCharInd", ")", "FillBuff", "(", ")", ";", "char", "c", "=", "buffer", "[", "bufpos", "]", ";", "UpdateLineColumn", "(", "c", ")", ";", "return", "(", "c", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getColumn", "(", ")", "{", "return", "bufcolumn", "[", "bufpos", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getLine", "(", ")", "{", "return", "bufline", "[", "bufpos", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getEndColumn", "(", ")", "{", "return", "bufcolumn", "[", "bufpos", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getEndLine", "(", ")", "{", "return", "bufline", "[", "bufpos", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getBeginColumn", "(", ")", "{", "return", "bufcolumn", "[", "tokenBegin", "]", ";", "}", "</s>"]
["<s>", "public", "int", "getBeginLine", "(", ")", "{", "return", "bufline", "[", "tokenBegin", "]", ";", "}", "</s>"]
["<s>", "public", "void", "backup", "(", "int", "amount", ")", "{", "inBuf", "+", "=", "amount", ";", "if", "(", "(", "bufpos", "-", "=", "amount", ")", "<", "0", ")", "bufpos", "+", "=", "bufsize", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "Reader", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "{", "inputStream", "=", "dstream", ";", "line", "=", "startline", ";", "column", "=", "startcolumn", "-", "1", ";", "available", "=", "bufsize", "=", "buffersize", ";", "buffer", "=", "new", "char", "[", "buffersize", "]", ";", "bufline", "=", "new", "int", "[", "buffersize", "]", ";", "bufcolumn", "=", "new", "int", "[", "buffersize", "]", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "Reader", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ")", "{", "this", "(", "dstream", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "Reader", "dstream", ")", "{", "this", "(", "dstream", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "Reader", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "{", "inputStream", "=", "dstream", ";", "line", "=", "startline", ";", "column", "=", "startcolumn", "-", "1", ";", "if", "(", "buffer", "=", "=", "null", "|", "|", "buffersize", "!", "=", "buffer", ".", "length", ")", "{", "available", "=", "bufsize", "=", "buffersize", ";", "buffer", "=", "new", "char", "[", "buffersize", "]", ";", "bufline", "=", "new", "int", "[", "buffersize", "]", ";", "bufcolumn", "=", "new", "int", "[", "buffersize", "]", ";", "}", "prevCharIsLF", "=", "prevCharIsCR", "=", "false", ";", "tokenBegin", "=", "inBuf", "=", "maxNextCharInd", "=", "0", ";", "bufpos", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "Reader", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ")", "{", "ReInit", "(", "dstream", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "Reader", "dstream", ")", "{", "ReInit", "(", "dstream", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "this", "(", "encoding", "=", "=", "null", "?", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ")", ":", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ",", "encoding", ")", ",", "startline", ",", "startcolumn", ",", "buffersize", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "{", "this", "(", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ")", ",", "startline", ",", "startcolumn", ",", "buffersize", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ",", "int", "startline", ",", "int", "startcolumn", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "this", "(", "dstream", ",", "encoding", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ")", "{", "this", "(", "dstream", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "this", "(", "dstream", ",", "encoding", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "SimpleCharStream", "(", "java", ".", "io", ".", "InputStream", "dstream", ")", "{", "this", "(", "dstream", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "ReInit", "(", "encoding", "=", "=", "null", "?", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ")", ":", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ",", "encoding", ")", ",", "startline", ",", "startcolumn", ",", "buffersize", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ",", "int", "buffersize", ")", "{", "ReInit", "(", "new", "java", ".", "io", ".", "InputStreamReader", "(", "dstream", ")", ",", "startline", ",", "startcolumn", ",", "buffersize", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "ReInit", "(", "dstream", ",", "encoding", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ")", "{", "ReInit", "(", "dstream", ",", "1", ",", "1", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "String", "encoding", ",", "int", "startline", ",", "int", "startcolumn", ")", "throws", "java", ".", "io", ".", "UnsupportedEncodingException", "{", "ReInit", "(", "dstream", ",", "encoding", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "dstream", ",", "int", "startline", ",", "int", "startcolumn", ")", "{", "ReInit", "(", "dstream", ",", "startline", ",", "startcolumn", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "String", "GetImage", "(", ")", "{", "if", "(", "bufpos", ">", "=", "tokenBegin", ")", "return", "new", "String", "(", "buffer", ",", "tokenBegin", ",", "bufpos", "-", "tokenBegin", "+", "1", ")", ";", "else", "return", "new", "String", "(", "buffer", ",", "tokenBegin", ",", "bufsize", "-", "tokenBegin", ")", "+", "new", "String", "(", "buffer", ",", "0", ",", "bufpos", "+", "1", ")", ";", "}", "</s>"]
["<s>", "public", "char", "[", "]", "GetSuffix", "(", "int", "len", ")", "{", "char", "[", "]", "ret", "=", "new", "char", "[", "len", "]", ";", "if", "(", "(", "bufpos", "+", "1", ")", ">", "=", "len", ")", "System", ".", "arraycopy", "(", "buffer", ",", "bufpos", "-", "len", "+", "1", ",", "ret", ",", "0", ",", "len", ")", ";", "else", "{", "System", ".", "arraycopy", "(", "buffer", ",", "bufsize", "-", "(", "len", "-", "bufpos", "-", "1", ")", ",", "ret", ",", "0", ",", "len", "-", "bufpos", "-", "1", ")", ";", "System", ".", "arraycopy", "(", "buffer", ",", "0", ",", "ret", ",", "len", "-", "bufpos", "-", "1", ",", "bufpos", "+", "1", ")", ";", "}", "return", "ret", ";", "}", "</s>"]
["<s>", "public", "void", "Done", "(", ")", "{", "buffer", "=", "null", ";", "bufline", "=", "null", ";", "bufcolumn", "=", "null", ";", "}", "</s>"]
["<s>", "public", "void", "adjustBeginLineColumn", "(", "int", "newLine", ",", "int", "newCol", ")", "{", "int", "start", "=", "tokenBegin", ";", "int", "len", ";", "if", "(", "bufpos", ">", "=", "tokenBegin", ")", "{", "len", "=", "bufpos", "-", "tokenBegin", "+", "inBuf", "+", "1", ";", "}", "else", "{", "len", "=", "bufsize", "-", "tokenBegin", "+", "bufpos", "+", "1", "+", "inBuf", ";", "}", "int", "i", "=", "0", ",", "j", "=", "0", ",", "k", "=", "0", ";", "int", "nextColDiff", "=", "0", ",", "columnDiff", "=", "0", ";", "while", "(", "i", "<", "len", "&", "&", "bufline", "[", "j", "=", "start", "%", "bufsize", "]", "=", "=", "bufline", "[", "k", "=", "+", "+", "start", "%", "bufsize", "]", ")", "{", "bufline", "[", "j", "]", "=", "newLine", ";", "nextColDiff", "=", "columnDiff", "+", "bufcolumn", "[", "k", "]", "-", "bufcolumn", "[", "j", "]", ";", "bufcolumn", "[", "j", "]", "=", "newCol", "+", "columnDiff", ";", "columnDiff", "=", "nextColDiff", ";", "i", "+", "+", ";", "}", "if", "(", "i", "<", "len", ")", "{", "bufline", "[", "j", "]", "=", "newLine", "+", "+", ";", "bufcolumn", "[", "j", "]", "=", "newCol", "+", "columnDiff", ";", "while", "(", "i", "+", "+", "<", "len", ")", "{", "if", "(", "bufline", "[", "j", "=", "start", "%", "bufsize", "]", "!", "=", "bufline", "[", "+", "+", "start", "%", "bufsize", "]", ")", "bufline", "[", "j", "]", "=", "newLine", "+", "+", ";", "else", "bufline", "[", "j", "]", "=", "newLine", ";", "}", "}", "line", "=", "bufline", "[", "j", "]", ";", "column", "=", "bufcolumn", "[", "j", "]", ";", "}", "</s>"]
["<s>", "public", "ASTaddr_spec", "(", "int", "id", ")", "{", "super", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "ASTaddr_spec", "(", "AddressListParser", "p", ",", "int", "id", ")", "{", "super", "(", "p", ",", "id", ")", ";", "}", "</s>"]
["<s>", "public", "Object", "jjtAccept", "(", "AddressListParserVisitor", "visitor", ",", "Object", "data", ")", "{", "return", "visitor", ".", "visit", "(", "this", ",", "data", ")", ";", "}", "</s>"]
["<s>", "public", "ASTlocal_part", "(", "int", "id", ")", "{", "super", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "ASTlocal_part", "(", "AddressListParser", "p", ",", "int", "id", ")", "{", "super", "(", "p", ",", "id", ")", ";", "}", "</s>"]
["<s>", "public", "Object", "jjtAccept", "(", "AddressListParserVisitor", "visitor", ",", "Object", "data", ")", "{", "return", "visitor", ".", "visit", "(", "this", ",", "data", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "image", ";", "}", "</s>"]
["<s>", "public", "static", "final", "Token", "newToken", "(", "int", "ofKind", ")", "{", "switch", "(", "ofKind", ")", "{", "default", ":", "return", "new", "Token", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "SimpleNode", "(", "int", "i", ")", "{", "id", "=", "i", ";", "}", "</s>"]
["<s>", "public", "SimpleNode", "(", "AddressListParser", "p", ",", "int", "i", ")", "{", "this", "(", "i", ")", ";", "parser", "=", "p", ";", "}", "</s>"]
["<s>", "public", "void", "jjtOpen", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "jjtClose", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "jjtSetParent", "(", "Node", "n", ")", "{", "parent", "=", "n", ";", "}", "</s>"]
["<s>", "public", "Node", "jjtGetParent", "(", ")", "{", "return", "parent", ";", "}", "</s>"]
["<s>", "public", "void", "jjtAddChild", "(", "Node", "n", ",", "int", "i", ")", "{", "if", "(", "children", "=", "=", "null", ")", "{", "children", "=", "new", "Node", "[", "i", "+", "1", "]", ";", "}", "else", "if", "(", "i", ">", "=", "children", ".", "length", ")", "{", "Node", "c", "[", "]", "=", "new", "Node", "[", "i", "+", "1", "]", ";", "System", ".", "arraycopy", "(", "children", ",", "0", ",", "c", ",", "0", ",", "children", ".", "length", ")", ";", "children", "=", "c", ";", "}", "children", "[", "i", "]", "=", "n", ";", "}", "</s>"]
["<s>", "public", "Node", "jjtGetChild", "(", "int", "i", ")", "{", "return", "children", "[", "i", "]", ";", "}", "</s>"]
["<s>", "public", "int", "jjtGetNumChildren", "(", ")", "{", "return", "(", "children", "=", "=", "null", ")", "?", "0", ":", "children", ".", "length", ";", "}", "</s>"]
["<s>", "public", "Object", "jjtAccept", "(", "AddressListParserVisitor", "visitor", ",", "Object", "data", ")", "{", "return", "visitor", ".", "visit", "(", "this", ",", "data", ")", ";", "}", "</s>"]
["<s>", "public", "Object", "childrenAccept", "(", "AddressListParserVisitor", "visitor", ",", "Object", "data", ")", "{", "if", "(", "children", "!", "=", "null", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "children", ".", "length", ";", "+", "+", "i", ")", "{", "children", "[", "i", "]", ".", "jjtAccept", "(", "visitor", ",", "data", ")", ";", "}", "}", "return", "data", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "AddressListParserTreeConstants", ".", "jjtNodeName", "[", "id", "]", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", "String", "prefix", ")", "{", "return", "prefix", "+", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "dump", "(", "String", "prefix", ")", "{", "System", ".", "out", ".", "println", "(", "toString", "(", "prefix", ")", ")", ";", "if", "(", "children", "!", "=", "null", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "children", ".", "length", ";", "+", "+", "i", ")", "{", "SimpleNode", "n", "=", "(", "SimpleNode", ")", "children", "[", "i", "]", ";", "if", "(", "n", "!", "=", "null", ")", "{", "n", ".", "dump", "(", "prefix", "+", "\"", "\"", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", "args", "[", "]", ")", "throws", "ParseException", "{", "while", "(", "true", ")", "{", "try", "{", "AddressListParser", "parser", "=", "new", "AddressListParser", "(", "System", ".", "in", ")", ";", "parser", ".", "parseLine", "(", ")", ";", "(", "(", "SimpleNode", ")", "parser", ".", "jjtree", ".", "rootNode", "(", ")", ")", ".", "dump", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "Exception", "x", ")", "{", "x", ".", "printStackTrace", "(", ")", ";", "return", ";", "}", "}", "}", "</s>"]
["<s>", "private", "static", "void", "log", "(", "String", "msg", ")", "{", "System", ".", "out", ".", "print", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "ASTaddress_list", "parse", "(", ")", "throws", "ParseException", "{", "try", "{", "parseAll", "(", ")", ";", "return", "(", "ASTaddress_list", ")", "jjtree", ".", "rootNode", "(", ")", ";", "}", "catch", "(", "TokenMgrError", "tme", ")", "{", "throw", "new", "ParseException", "(", "tme", ".", "getMessage", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "void", "jjtreeOpenNodeScope", "(", "Node", "n", ")", "{", "(", "(", "SimpleNode", ")", "n", ")", ".", "firstToken", "=", "getToken", "(", "1", ")", ";", "}", "</s>"]
["<s>", "void", "jjtreeCloseNodeScope", "(", "Node", "n", ")", "{", "(", "(", "SimpleNode", ")", "n", ")", ".", "lastToken", "=", "getToken", "(", "0", ")", ";", "}", "</s>"]
["<s>", "final", "public", "void", "parseLine", "(", ")", "throws", "ParseException", "{", "address_list", "(", ")", ";", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "1", ":", "jj_consume_token", "(", "1", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "0", "]", "=", "jj_gen", ";", ";", "}", "jj_consume_token", "(", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "final", "public", "void", "parseAll", "(", ")", "throws", "ParseException", "{", "address_list", "(", ")", ";", "jj_consume_token", "(", "0", ")", ";", "}", "</s>"]
["<s>", "final", "public", "void", "address_list", "(", ")", "throws", "ParseException", "{", "ASTaddress_list", "jjtn000", "=", "new", "ASTaddress_list", "(", "JJTADDRESS_LIST", ")", ";", "boolean", "jjtc000", "=", "true", ";", "jjtree", ".", "openNodeScope", "(", "jjtn000", ")", ";", "jjtreeOpenNodeScope", "(", "jjtn000", ")", ";", "try", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:6>", ":", "case", "DOTATOM", ":", "case", "QUOTEDSTRING", ":", "address", "(", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "1", "]", "=", "jj_gen", ";", ";", "}", "label_1", ":", "while", "(", "true", ")", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:3>", ":", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:2>", "]", "=", "jj_gen", ";", "break", "label_1", ";", "}", "jj_consume_token", "(", "<NUM_LIT:3>", ")", ";", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:6>", ":", "case", "DOTATOM", ":", "case", "QUOTEDSTRING", ":", "address", "(", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:3>", "]", "=", "jj_gen", ";", ";", "}", "}", "}", "catch", "(", "Throwable", "jjte000", ")", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "clearNodeScope", "(", "jjtn000", ")", ";", "jjtc000", "=", "false", ";", "}", "else", "{", "jjtree", ".", "popNode", "(", ")", ";", "}", "if", "(", "jjte000", "instanceof", "RuntimeException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "RuntimeException", ")", "jjte000", ";", "}", "}", "if", "(", "jjte000", "instanceof", "ParseException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "ParseException", ")", "jjte000", ";", "}", "}", "{", "if", "(", "true", ")", "throw", "(", "Error", ")", "jjte000", ";", "}", "}", "finally", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "closeNodeScope", "(", "jjtn000", ",", "true", ")", ";", "jjtreeCloseNodeScope", "(", "jjtn000", ")", ";", "}", "}", "}", "</s>"]
["<s>", "final", "public", "void", "address", "(", ")", "throws", "ParseException", "{", "ASTaddress", "jjtn000", "=", "new", "ASTaddress", "(", "JJTADDRESS", ")", ";", "boolean", "jjtc000", "=", "true", ";", "jjtree", ".", "openNodeScope", "(", "jjtn000", ")", ";", "jjtreeOpenNodeScope", "(", "jjtn000", ")", ";", "try", "{", "if", "(", "jj_2_1", "(", "<NUM_LIT>", ")", ")", "{", "addr_spec", "(", ")", ";", "}", "else", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:6>", ":", "angle_addr", "(", ")", ";", "break", ";", "case", "DOTATOM", ":", "case", "QUOTEDSTRING", ":", "phrase", "(", ")", ";", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:4>", ":", "group_body", "(", ")", ";", "break", ";", "case", "<NUM_LIT:6>", ":", "angle_addr", "(", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:4>", "]", "=", "jj_gen", ";", "jj_consume_token", "(", "-", "1", ")", ";", "throw", "new", "ParseException", "(", ")", ";", "}", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:5>", "]", "=", "jj_gen", ";", "jj_consume_token", "(", "-", "1", ")", ";", "throw", "new", "ParseException", "(", ")", ";", "}", "}", "}", "catch", "(", "Throwable", "jjte000", ")", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "clearNodeScope", "(", "jjtn000", ")", ";", "jjtc000", "=", "false", ";", "}", "else", "{", "jjtree", ".", "popNode", "(", ")", ";", "}", "if", "(", "jjte000", "instanceof", "RuntimeException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "RuntimeException", ")", "jjte000", ";", "}", "}", "if", "(", "jjte000", "instanceof", "ParseException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "ParseException", ")", "jjte000", ";", "}", "}", "{", "if", "(", "true", ")", "throw", "(", "Error", ")", "jjte000", ";", "}", "}", "finally", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "closeNodeScope", "(", "jjtn000", ",", "true", ")", ";", "jjtreeCloseNodeScope", "(", "jjtn000", ")", ";", "}", "}", "}", "</s>"]
["<s>", "final", "public", "void", "mailbox", "(", ")", "throws", "ParseException", "{", "ASTmailbox", "jjtn000", "=", "new", "ASTmailbox", "(", "JJTMAILBOX", ")", ";", "boolean", "jjtc000", "=", "true", ";", "jjtree", ".", "openNodeScope", "(", "jjtn000", ")", ";", "jjtreeOpenNodeScope", "(", "jjtn000", ")", ";", "try", "{", "if", "(", "jj_2_2", "(", "<NUM_LIT>", ")", ")", "{", "addr_spec", "(", ")", ";", "}", "else", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:6>", ":", "angle_addr", "(", ")", ";", "break", ";", "case", "DOTATOM", ":", "case", "QUOTEDSTRING", ":", "name_addr", "(", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:6>", "]", "=", "jj_gen", ";", "jj_consume_token", "(", "-", "1", ")", ";", "throw", "new", "ParseException", "(", ")", ";", "}", "}", "}", "catch", "(", "Throwable", "jjte000", ")", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "clearNodeScope", "(", "jjtn000", ")", ";", "jjtc000", "=", "false", ";", "}", "else", "{", "jjtree", ".", "popNode", "(", ")", ";", "}", "if", "(", "jjte000", "instanceof", "RuntimeException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "RuntimeException", ")", "jjte000", ";", "}", "}", "if", "(", "jjte000", "instanceof", "ParseException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "ParseException", ")", "jjte000", ";", "}", "}", "{", "if", "(", "true", ")", "throw", "(", "Error", ")", "jjte000", ";", "}", "}", "finally", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "closeNodeScope", "(", "jjtn000", ",", "true", ")", ";", "jjtreeCloseNodeScope", "(", "jjtn000", ")", ";", "}", "}", "}", "</s>"]
["<s>", "final", "public", "void", "name_addr", "(", ")", "throws", "ParseException", "{", "ASTname_addr", "jjtn000", "=", "new", "ASTname_addr", "(", "JJTNAME_ADDR", ")", ";", "boolean", "jjtc000", "=", "true", ";", "jjtree", ".", "openNodeScope", "(", "jjtn000", ")", ";", "jjtreeOpenNodeScope", "(", "jjtn000", ")", ";", "try", "{", "phrase", "(", ")", ";", "angle_addr", "(", ")", ";", "}", "catch", "(", "Throwable", "jjte000", ")", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "clearNodeScope", "(", "jjtn000", ")", ";", "jjtc000", "=", "false", ";", "}", "else", "{", "jjtree", ".", "popNode", "(", ")", ";", "}", "if", "(", "jjte000", "instanceof", "RuntimeException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "RuntimeException", ")", "jjte000", ";", "}", "}", "if", "(", "jjte000", "instanceof", "ParseException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "ParseException", ")", "jjte000", ";", "}", "}", "{", "if", "(", "true", ")", "throw", "(", "Error", ")", "jjte000", ";", "}", "}", "finally", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "closeNodeScope", "(", "jjtn000", ",", "true", ")", ";", "jjtreeCloseNodeScope", "(", "jjtn000", ")", ";", "}", "}", "}", "</s>"]
["<s>", "final", "public", "void", "group_body", "(", ")", "throws", "ParseException", "{", "ASTgroup_body", "jjtn000", "=", "new", "ASTgroup_body", "(", "JJTGROUP_BODY", ")", ";", "boolean", "jjtc000", "=", "true", ";", "jjtree", ".", "openNodeScope", "(", "jjtn000", ")", ";", "jjtreeOpenNodeScope", "(", "jjtn000", ")", ";", "try", "{", "jj_consume_token", "(", "<NUM_LIT:4>", ")", ";", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:6>", ":", "case", "DOTATOM", ":", "case", "QUOTEDSTRING", ":", "mailbox", "(", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:7>", "]", "=", "jj_gen", ";", ";", "}", "label_2", ":", "while", "(", "true", ")", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:3>", ":", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:8>", "]", "=", "jj_gen", ";", "break", "label_2", ";", "}", "jj_consume_token", "(", "<NUM_LIT:3>", ")", ";", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:6>", ":", "case", "DOTATOM", ":", "case", "QUOTEDSTRING", ":", "mailbox", "(", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:9>", "]", "=", "jj_gen", ";", ";", "}", "}", "jj_consume_token", "(", "<NUM_LIT:5>", ")", ";", "}", "catch", "(", "Throwable", "jjte000", ")", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "clearNodeScope", "(", "jjtn000", ")", ";", "jjtc000", "=", "false", ";", "}", "else", "{", "jjtree", ".", "popNode", "(", ")", ";", "}", "if", "(", "jjte000", "instanceof", "RuntimeException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "RuntimeException", ")", "jjte000", ";", "}", "}", "if", "(", "jjte000", "instanceof", "ParseException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "ParseException", ")", "jjte000", ";", "}", "}", "{", "if", "(", "true", ")", "throw", "(", "Error", ")", "jjte000", ";", "}", "}", "finally", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "closeNodeScope", "(", "jjtn000", ",", "true", ")", ";", "jjtreeCloseNodeScope", "(", "jjtn000", ")", ";", "}", "}", "}", "</s>"]
["<s>", "final", "public", "void", "angle_addr", "(", ")", "throws", "ParseException", "{", "ASTangle_addr", "jjtn000", "=", "new", "ASTangle_addr", "(", "JJTANGLE_ADDR", ")", ";", "boolean", "jjtc000", "=", "true", ";", "jjtree", ".", "openNodeScope", "(", "jjtn000", ")", ";", "jjtreeOpenNodeScope", "(", "jjtn000", ")", ";", "try", "{", "jj_consume_token", "(", "<NUM_LIT:6>", ")", ";", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:8>", ":", "route", "(", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:10>", "]", "=", "jj_gen", ";", ";", "}", "addr_spec", "(", ")", ";", "jj_consume_token", "(", "<NUM_LIT:7>", ")", ";", "}", "catch", "(", "Throwable", "jjte000", ")", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "clearNodeScope", "(", "jjtn000", ")", ";", "jjtc000", "=", "false", ";", "}", "else", "{", "jjtree", ".", "popNode", "(", ")", ";", "}", "if", "(", "jjte000", "instanceof", "RuntimeException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "RuntimeException", ")", "jjte000", ";", "}", "}", "if", "(", "jjte000", "instanceof", "ParseException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "ParseException", ")", "jjte000", ";", "}", "}", "{", "if", "(", "true", ")", "throw", "(", "Error", ")", "jjte000", ";", "}", "}", "finally", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "closeNodeScope", "(", "jjtn000", ",", "true", ")", ";", "jjtreeCloseNodeScope", "(", "jjtn000", ")", ";", "}", "}", "}", "</s>"]
["<s>", "final", "public", "void", "route", "(", ")", "throws", "ParseException", "{", "ASTroute", "jjtn000", "=", "new", "ASTroute", "(", "JJTROUTE", ")", ";", "boolean", "jjtc000", "=", "true", ";", "jjtree", ".", "openNodeScope", "(", "jjtn000", ")", ";", "jjtreeOpenNodeScope", "(", "jjtn000", ")", ";", "try", "{", "jj_consume_token", "(", "<NUM_LIT:8>", ")", ";", "domain", "(", ")", ";", "label_3", ":", "while", "(", "true", ")", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:3>", ":", "case", "<NUM_LIT:8>", ":", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:11>", "]", "=", "jj_gen", ";", "break", "label_3", ";", "}", "label_4", ":", "while", "(", "true", ")", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:3>", ":", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:12>", "]", "=", "jj_gen", ";", "break", "label_4", ";", "}", "jj_consume_token", "(", "<NUM_LIT:3>", ")", ";", "}", "jj_consume_token", "(", "<NUM_LIT:8>", ")", ";", "domain", "(", ")", ";", "}", "jj_consume_token", "(", "<NUM_LIT:4>", ")", ";", "}", "catch", "(", "Throwable", "jjte000", ")", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "clearNodeScope", "(", "jjtn000", ")", ";", "jjtc000", "=", "false", ";", "}", "else", "{", "jjtree", ".", "popNode", "(", ")", ";", "}", "if", "(", "jjte000", "instanceof", "RuntimeException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "RuntimeException", ")", "jjte000", ";", "}", "}", "if", "(", "jjte000", "instanceof", "ParseException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "ParseException", ")", "jjte000", ";", "}", "}", "{", "if", "(", "true", ")", "throw", "(", "Error", ")", "jjte000", ";", "}", "}", "finally", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "closeNodeScope", "(", "jjtn000", ",", "true", ")", ";", "jjtreeCloseNodeScope", "(", "jjtn000", ")", ";", "}", "}", "}", "</s>"]
["<s>", "final", "public", "void", "phrase", "(", ")", "throws", "ParseException", "{", "ASTphrase", "jjtn000", "=", "new", "ASTphrase", "(", "JJTPHRASE", ")", ";", "boolean", "jjtc000", "=", "true", ";", "jjtree", ".", "openNodeScope", "(", "jjtn000", ")", ";", "jjtreeOpenNodeScope", "(", "jjtn000", ")", ";", "try", "{", "label_5", ":", "while", "(", "true", ")", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "DOTATOM", ":", "jj_consume_token", "(", "DOTATOM", ")", ";", "break", ";", "case", "QUOTEDSTRING", ":", "jj_consume_token", "(", "QUOTEDSTRING", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT>", "]", "=", "jj_gen", ";", "jj_consume_token", "(", "-", "1", ")", ";", "throw", "new", "ParseException", "(", ")", ";", "}", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "DOTATOM", ":", "case", "QUOTEDSTRING", ":", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT>", "]", "=", "jj_gen", ";", "break", "label_5", ";", "}", "}", "}", "finally", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "closeNodeScope", "(", "jjtn000", ",", "true", ")", ";", "jjtreeCloseNodeScope", "(", "jjtn000", ")", ";", "}", "}", "}", "</s>"]
["<s>", "final", "public", "void", "addr_spec", "(", ")", "throws", "ParseException", "{", "ASTaddr_spec", "jjtn000", "=", "new", "ASTaddr_spec", "(", "JJTADDR_SPEC", ")", ";", "boolean", "jjtc000", "=", "true", ";", "jjtree", ".", "openNodeScope", "(", "jjtn000", ")", ";", "jjtreeOpenNodeScope", "(", "jjtn000", ")", ";", "try", "{", "local_part", "(", ")", ";", "jj_consume_token", "(", "<NUM_LIT:8>", ")", ";", "domain", "(", ")", ";", "}", "catch", "(", "Throwable", "jjte000", ")", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "clearNodeScope", "(", "jjtn000", ")", ";", "jjtc000", "=", "false", ";", "}", "else", "{", "jjtree", ".", "popNode", "(", ")", ";", "}", "if", "(", "jjte000", "instanceof", "RuntimeException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "RuntimeException", ")", "jjte000", ";", "}", "}", "if", "(", "jjte000", "instanceof", "ParseException", ")", "{", "{", "if", "(", "true", ")", "throw", "(", "ParseException", ")", "jjte000", ";", "}", "}", "{", "if", "(", "true", ")", "throw", "(", "Error", ")", "jjte000", ";", "}", "}", "finally", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "closeNodeScope", "(", "jjtn000", ",", "true", ")", ";", "jjtreeCloseNodeScope", "(", "jjtn000", ")", ";", "}", "}", "}", "</s>"]
["<s>", "final", "public", "void", "local_part", "(", ")", "throws", "ParseException", "{", "ASTlocal_part", "jjtn000", "=", "new", "ASTlocal_part", "(", "JJTLOCAL_PART", ")", ";", "boolean", "jjtc000", "=", "true", ";", "jjtree", ".", "openNodeScope", "(", "jjtn000", ")", ";", "jjtreeOpenNodeScope", "(", "jjtn000", ")", ";", "Token", "t", ";", "try", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "DOTATOM", ":", "t", "=", "jj_consume_token", "(", "DOTATOM", ")", ";", "break", ";", "case", "QUOTEDSTRING", ":", "t", "=", "jj_consume_token", "(", "QUOTEDSTRING", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:15>", "]", "=", "jj_gen", ";", "jj_consume_token", "(", "-", "1", ")", ";", "throw", "new", "ParseException", "(", ")", ";", "}", "label_6", ":", "while", "(", "true", ")", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:9>", ":", "case", "DOTATOM", ":", "case", "QUOTEDSTRING", ":", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:16>", "]", "=", "jj_gen", ";", "break", "label_6", ";", "}", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:9>", ":", "t", "=", "jj_consume_token", "(", "<NUM_LIT:9>", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT>", "]", "=", "jj_gen", ";", ";", "}", "if", "(", "t", ".", "image", ".", "charAt", "(", "t", ".", "image", ".", "length", "(", ")", "-", "1", ")", "!", "=", "<CHAR_LIT:.>", "|", "|", "t", ".", "kind", "=", "=", "AddressListParserConstants", ".", "QUOTEDSTRING", ")", "{", "if", "(", "true", ")", "throw", "new", "ParseException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "DOTATOM", ":", "t", "=", "jj_consume_token", "(", "DOTATOM", ")", ";", "break", ";", "case", "QUOTEDSTRING", ":", "t", "=", "jj_consume_token", "(", "QUOTEDSTRING", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT>", "]", "=", "jj_gen", ";", "jj_consume_token", "(", "-", "1", ")", ";", "throw", "new", "ParseException", "(", ")", ";", "}", "}", "}", "finally", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "closeNodeScope", "(", "jjtn000", ",", "true", ")", ";", "jjtreeCloseNodeScope", "(", "jjtn000", ")", ";", "}", "}", "}", "</s>"]
["<s>", "final", "public", "void", "domain", "(", ")", "throws", "ParseException", "{", "ASTdomain", "jjtn000", "=", "new", "ASTdomain", "(", "JJTDOMAIN", ")", ";", "boolean", "jjtc000", "=", "true", ";", "jjtree", ".", "openNodeScope", "(", "jjtn000", ")", ";", "jjtreeOpenNodeScope", "(", "jjtn000", ")", ";", "Token", "t", ";", "try", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "DOTATOM", ":", "t", "=", "jj_consume_token", "(", "DOTATOM", ")", ";", "label_7", ":", "while", "(", "true", ")", "{", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:9>", ":", "case", "DOTATOM", ":", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT>", "]", "=", "jj_gen", ";", "break", "label_7", ";", "}", "switch", "(", "(", "jj_ntk", "=", "=", "-", "1", ")", "?", "jj_ntk", "(", ")", ":", "jj_ntk", ")", "{", "case", "<NUM_LIT:9>", ":", "t", "=", "jj_consume_token", "(", "<NUM_LIT:9>", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT:20>", "]", "=", "jj_gen", ";", ";", "}", "if", "(", "t", ".", "image", ".", "charAt", "(", "t", ".", "image", ".", "length", "(", ")", "-", "1", ")", "!", "=", "<CHAR_LIT:.>", ")", "{", "if", "(", "true", ")", "throw", "new", "ParseException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "t", "=", "jj_consume_token", "(", "DOTATOM", ")", ";", "}", "break", ";", "case", "DOMAINLITERAL", ":", "jj_consume_token", "(", "DOMAINLITERAL", ")", ";", "break", ";", "default", ":", "jj_la1", "[", "<NUM_LIT>", "]", "=", "jj_gen", ";", "jj_consume_token", "(", "-", "1", ")", ";", "throw", "new", "ParseException", "(", ")", ";", "}", "}", "finally", "{", "if", "(", "jjtc000", ")", "{", "jjtree", ".", "closeNodeScope", "(", "jjtn000", ",", "true", ")", ";", "jjtreeCloseNodeScope", "(", "jjtn000", ")", ";", "}", "}", "}", "</s>"]
["<s>", "final", "private", "boolean", "jj_2_1", "(", "int", "xla", ")", "{", "jj_la", "=", "xla", ";", "jj_lastpos", "=", "jj_scanpos", "=", "token", ";", "try", "{", "return", "!", "jj_3_1", "(", ")", ";", "}", "catch", "(", "LookaheadSuccess", "ls", ")", "{", "return", "true", ";", "}", "finally", "{", "jj_save", "(", "0", ",", "xla", ")", ";", "}", "}", "</s>"]
["<s>", "final", "private", "boolean", "jj_2_2", "(", "int", "xla", ")", "{", "jj_la", "=", "xla", ";", "jj_lastpos", "=", "jj_scanpos", "=", "token", ";", "try", "{", "return", "!", "jj_3_2", "(", ")", ";", "}", "catch", "(", "LookaheadSuccess", "ls", ")", "{", "return", "true", ";", "}", "finally", "{", "jj_save", "(", "1", ",", "xla", ")", ";", "}", "}", "</s>"]
["<s>", "final", "private", "boolean", "jj_3R_11", "(", ")", "{", "Token", "xsp", ";", "xsp", "=", "jj_scanpos", ";", "if", "(", "jj_scan_token", "(", "<NUM_LIT:9>", ")", ")", "jj_scanpos", "=", "xsp", ";", "xsp", "=", "jj_scanpos", ";", "if", "(", "jj_scan_token", "(", "<NUM_LIT>", ")", ")", "{", "jj_scanpos", "=", "xsp", ";", "if", "(", "jj_scan_token", "(", "<NUM_LIT:31>", ")", ")", "return", "true", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "final", "private", "boolean", "jj_3R_13", "(", ")", "{", "Token", "xsp", ";", "xsp", "=", "jj_scanpos", ";", "if", "(", "jj_scan_token", "(", "<NUM_LIT:9>", ")", ")", "jj_scanpos", "=", "xsp", ";", "if", "(", "jj_scan_token", "(", "DOTATOM", ")", ")", "return", "true", ";", "return", "false", ";", "}", "</s>"]
["<s>", "final", "private", "boolean", "jj_3R_8", "(", ")", "{", "if", "(", "jj_3R_9", "(", ")", ")", "return", "true", ";", "if", "(", "jj_scan_token", "(", "<NUM_LIT:8>", ")", ")", "return", "true", ";", "if", "(", "jj_3R_10", "(", ")", ")", "return", "true", ";", "return", "false", ";", "}", "</s>"]
["<s>", "final", "private", "boolean", "jj_3_1", "(", ")", "{", "if", "(", "jj_3R_8", "(", ")", ")", "return", "true", ";", "return", "false", ";", "}", "</s>"]
["<s>", "final", "private", "boolean", "jj_3R_12", "(", ")", "{", "if", "(", "jj_scan_token", "(", "DOTATOM", ")", ")", "return", "true", ";", "Token", "xsp", ";", "while", "(", "true", ")", "{", "xsp", "=", "jj_scanpos", ";", "if", "(", "jj_3R_13", "(", ")", ")", "{", "jj_scanpos", "=", "xsp", ";", "break", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "final", "private", "boolean", "jj_3R_10", "(", ")", "{", "Token", "xsp", ";", "xsp", "=", "jj_scanpos", ";", "if", "(", "jj_3R_12", "(", ")", ")", "{", "jj_scanpos", "=", "xsp", ";", "if", "(", "jj_scan_token", "(", "<NUM_LIT>", ")", ")", "return", "true", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "final", "private", "boolean", "jj_3_2", "(", ")", "{", "if", "(", "jj_3R_8", "(", ")", ")", "return", "true", ";", "return", "false", ";", "}", "</s>"]
["<s>", "final", "private", "boolean", "jj_3R_9", "(", ")", "{", "Token", "xsp", ";", "xsp", "=", "jj_scanpos", ";", "if", "(", "jj_scan_token", "(", "<NUM_LIT>", ")", ")", "{", "jj_scanpos", "=", "xsp", ";", "if", "(", "jj_scan_token", "(", "<NUM_LIT:31>", ")", ")", "return", "true", ";", "}", "while", "(", "true", ")", "{", "xsp", "=", "jj_scanpos", ";", "if", "(", "jj_3R_11", "(", ")", ")", "{", "jj_scanpos", "=", "xsp", ";", "break", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "private", "static", "void", "jj_la1_0", "(", ")", "{", "jj_la1_0", "=", "new", "int", "[", "]", "{", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "}", ";", "}", "</s>"]
["<s>", "private", "static", "void", "jj_la1_1", "(", ")", "{", "jj_la1_1", "=", "new", "int", "[", "]", "{", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "}", ";", "}", "</s>"]
["<s>", "public", "AddressListParser", "(", "java", ".", "io", ".", "InputStream", "stream", ")", "{", "this", "(", "stream", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "AddressListParser", "(", "java", ".", "io", ".", "InputStream", "stream", ",", "String", "encoding", ")", "{", "try", "{", "jj_input_stream", "=", "new", "SimpleCharStream", "(", "stream", ",", "encoding", ",", "1", ",", "1", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "UnsupportedEncodingException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "token_source", "=", "new", "AddressListParserTokenManager", "(", "jj_input_stream", ")", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "jj_2_rtns", ".", "length", ";", "i", "+", "+", ")", "jj_2_rtns", "[", "i", "]", "=", "new", "JJCalls", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "stream", ")", "{", "ReInit", "(", "stream", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "InputStream", "stream", ",", "String", "encoding", ")", "{", "try", "{", "jj_input_stream", ".", "ReInit", "(", "stream", ",", "encoding", ",", "1", ",", "1", ")", ";", "}", "catch", "(", "java", ".", "io", ".", "UnsupportedEncodingException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "token_source", ".", "ReInit", "(", "jj_input_stream", ")", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jjtree", ".", "reset", "(", ")", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "jj_2_rtns", ".", "length", ";", "i", "+", "+", ")", "jj_2_rtns", "[", "i", "]", "=", "new", "JJCalls", "(", ")", ";", "}", "</s>"]
["<s>", "public", "AddressListParser", "(", "java", ".", "io", ".", "Reader", "stream", ")", "{", "jj_input_stream", "=", "new", "SimpleCharStream", "(", "stream", ",", "1", ",", "1", ")", ";", "token_source", "=", "new", "AddressListParserTokenManager", "(", "jj_input_stream", ")", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "jj_2_rtns", ".", "length", ";", "i", "+", "+", ")", "jj_2_rtns", "[", "i", "]", "=", "new", "JJCalls", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "java", ".", "io", ".", "Reader", "stream", ")", "{", "jj_input_stream", ".", "ReInit", "(", "stream", ",", "1", ",", "1", ")", ";", "token_source", ".", "ReInit", "(", "jj_input_stream", ")", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jjtree", ".", "reset", "(", ")", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "jj_2_rtns", ".", "length", ";", "i", "+", "+", ")", "jj_2_rtns", "[", "i", "]", "=", "new", "JJCalls", "(", ")", ";", "}", "</s>"]
["<s>", "public", "AddressListParser", "(", "AddressListParserTokenManager", "tm", ")", "{", "token_source", "=", "tm", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "jj_2_rtns", ".", "length", ";", "i", "+", "+", ")", "jj_2_rtns", "[", "i", "]", "=", "new", "JJCalls", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ReInit", "(", "AddressListParserTokenManager", "tm", ")", "{", "token_source", "=", "tm", ";", "token", "=", "new", "Token", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jjtree", ".", "reset", "(", ")", ";", "jj_gen", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT>", ";", "i", "+", "+", ")", "jj_la1", "[", "i", "]", "=", "-", "1", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "jj_2_rtns", ".", "length", ";", "i", "+", "+", ")", "jj_2_rtns", "[", "i", "]", "=", "new", "JJCalls", "(", ")", ";", "}", "</s>"]
["<s>", "final", "private", "Token", "jj_consume_token", "(", "int", "kind", ")", "throws", "ParseException", "{", "Token", "oldToken", ";", "if", "(", "(", "oldToken", "=", "token", ")", ".", "next", "!", "=", "null", ")", "token", "=", "token", ".", "next", ";", "else", "token", "=", "token", ".", "next", "=", "token_source", ".", "getNextToken", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "if", "(", "token", ".", "kind", "=", "=", "kind", ")", "{", "jj_gen", "+", "+", ";", "if", "(", "+", "+", "jj_gc", ">", "<NUM_LIT:100>", ")", "{", "jj_gc", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "jj_2_rtns", ".", "length", ";", "i", "+", "+", ")", "{", "JJCalls", "c", "=", "jj_2_rtns", "[", "i", "]", ";", "while", "(", "c", "!", "=", "null", ")", "{", "if", "(", "c", ".", "gen", "<", "jj_gen", ")", "c", ".", "first", "=", "null", ";", "c", "=", "c", ".", "next", ";", "}", "}", "}", "return", "token", ";", "}", "token", "=", "oldToken", ";", "jj_kind", "=", "kind", ";", "throw", "generateParseException", "(", ")", ";", "}", "</s>"]
["<s>", "final", "private", "boolean", "jj_scan_token", "(", "int", "kind", ")", "{", "if", "(", "jj_scanpos", "=", "=", "jj_lastpos", ")", "{", "jj_la", "-", "-", ";", "if", "(", "jj_scanpos", ".", "next", "=", "=", "null", ")", "{", "jj_lastpos", "=", "jj_scanpos", "=", "jj_scanpos", ".", "next", "=", "token_source", ".", "getNextToken", "(", ")", ";", "}", "else", "{", "jj_lastpos", "=", "jj_scanpos", "=", "jj_scanpos", ".", "next", ";", "}", "}", "else", "{", "jj_scanpos", "=", "jj_scanpos", ".", "next", ";", "}", "if", "(", "jj_rescan", ")", "{", "int", "i", "=", "0", ";", "Token", "tok", "=", "token", ";", "while", "(", "tok", "!", "=", "null", "&", "&", "tok", "!", "=", "jj_scanpos", ")", "{", "i", "+", "+", ";", "tok", "=", "tok", ".", "next", ";", "}", "if", "(", "tok", "!", "=", "null", ")", "jj_add_error_token", "(", "kind", ",", "i", ")", ";", "}", "if", "(", "jj_scanpos", ".", "kind", "!", "=", "kind", ")", "return", "true", ";", "if", "(", "jj_la", "=", "=", "0", "&", "&", "jj_scanpos", "=", "=", "jj_lastpos", ")", "throw", "jj_ls", ";", "return", "false", ";", "}", "</s>"]
["<s>", "final", "public", "Token", "getNextToken", "(", ")", "{", "if", "(", "token", ".", "next", "!", "=", "null", ")", "token", "=", "token", ".", "next", ";", "else", "token", "=", "token", ".", "next", "=", "token_source", ".", "getNextToken", "(", ")", ";", "jj_ntk", "=", "-", "1", ";", "jj_gen", "+", "+", ";", "return", "token", ";", "}", "</s>"]
["<s>", "final", "public", "Token", "getToken", "(", "int", "index", ")", "{", "Token", "t", "=", "lookingAhead", "?", "jj_scanpos", ":", "token", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "index", ";", "i", "+", "+", ")", "{", "if", "(", "t", ".", "next", "!", "=", "null", ")", "t", "=", "t", ".", "next", ";", "else", "t", "=", "t", ".", "next", "=", "token_source", ".", "getNextToken", "(", ")", ";", "}", "return", "t", ";", "}", "</s>"]
["<s>", "final", "private", "int", "jj_ntk", "(", ")", "{", "if", "(", "(", "jj_nt", "=", "token", ".", "next", ")", "=", "=", "null", ")", "return", "(", "jj_ntk", "=", "(", "token", ".", "next", "=", "token_source", ".", "getNextToken", "(", ")", ")", ".", "kind", ")", ";", "else", "return", "(", "jj_ntk", "=", "jj_nt", ".", "kind", ")", ";", "}", "</s>"]
["<s>", "private", "void", "jj_add_error_token", "(", "int", "kind", ",", "int", "pos", ")", "{", "if", "(", "pos", ">", "=", "<NUM_LIT:100>", ")", "return", ";", "if", "(", "pos", "=", "=", "jj_endpos", "+", "1", ")", "{", "jj_lasttokens", "[", "jj_endpos", "+", "+", "]", "=", "kind", ";", "}", "else", "if", "(", "jj_endpos", "!", "=", "0", ")", "{", "jj_expentry", "=", "new", "int", "[", "jj_endpos", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "jj_endpos", ";", "i", "+", "+", ")", "{", "jj_expentry", "[", "i", "]", "=", "jj_lasttokens", "[", "i", "]", ";", "}", "boolean", "exists", "=", "false", ";", "for", "(", "java", ".", "util", ".", "Enumeration", "e", "=", "jj_expentries", ".", "elements", "(", ")", ";", "e", ".", "hasMoreElements", "(", ")", ";", ")", "{", "int", "[", "]", "oldentry", "=", "(", "int", "[", "]", ")", "(", "e", ".", "nextElement", "(", ")", ")", ";", "if", "(", "oldentry", ".", "length", "=", "=", "jj_expentry", ".", "length", ")", "{", "exists", "=", "true", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "jj_expentry", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "oldentry", "[", "i", "]", "!", "=", "jj_expentry", "[", "i", "]", ")", "{", "exists", "=", "false", ";", "break", ";", "}", "}", "if", "(", "exists", ")", "break", ";", "}", "}", "if", "(", "!", "exists", ")", "jj_expentries", ".", "addElement", "(", "jj_expentry", ")", ";", "if", "(", "pos", "!", "=", "0", ")", "jj_lasttokens", "[", "(", "jj_endpos", "=", "pos", ")", "-", "1", "]", "=", "kind", ";", "}", "}", "</s>"]
["<s>", "public", "ParseException", "generateParseException", "(", ")", "{", "jj_expentries", ".", "removeAllElements", "(", ")", ";", "boolean", "[", "]", "la1tokens", "=", "new", "boolean", "[", "<NUM_LIT>", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT>", ";", "i", "+", "+", ")", "{", "la1tokens", "[", "i", "]", "=", "false", ";", "}", "if", "(", "jj_kind", ">", "=", "0", ")", "{", "la1tokens", "[", "jj_kind", "]", "=", "true", ";", "jj_kind", "=", "-", "1", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT>", ";", "i", "+", "+", ")", "{", "if", "(", "jj_la1", "[", "i", "]", "=", "=", "jj_gen", ")", "{", "for", "(", "int", "j", "=", "0", ";", "j", "<", "<NUM_LIT:32>", ";", "j", "+", "+", ")", "{", "if", "(", "(", "jj_la1_0", "[", "i", "]", "&", "(", "1", "<", "<", "j", ")", ")", "!", "=", "0", ")", "{", "la1tokens", "[", "j", "]", "=", "true", ";", "}", "if", "(", "(", "jj_la1_1", "[", "i", "]", "&", "(", "1", "<", "<", "j", ")", ")", "!", "=", "0", ")", "{", "la1tokens", "[", "<NUM_LIT:32>", "+", "j", "]", "=", "true", ";", "}", "}", "}", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT>", ";", "i", "+", "+", ")", "{", "if", "(", "la1tokens", "[", "i", "]", ")", "{", "jj_expentry", "=", "new", "int", "[", "1", "]", ";", "jj_expentry", "[", "0", "]", "=", "i", ";", "jj_expentries", ".", "addElement", "(", "jj_expentry", ")", ";", "}", "}", "jj_endpos", "=", "0", ";", "jj_rescan_token", "(", ")", ";", "jj_add_error_token", "(", "0", ",", "0", ")", ";", "int", "[", "]", "[", "]", "exptokseq", "=", "new", "int", "[", "jj_expentries", ".", "size", "(", ")", "]", "[", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "jj_expentries", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "exptokseq", "[", "i", "]", "=", "(", "int", "[", "]", ")", "jj_expentries", ".", "elementAt", "(", "i", ")", ";", "}", "return", "new", "ParseException", "(", "token", ",", "exptokseq", ",", "tokenImage", ")", ";", "}", "</s>"]
["<s>", "final", "public", "void", "enable_tracing", "(", ")", "{", "}", "</s>"]
["<s>", "final", "public", "void", "disable_tracing", "(", ")", "{", "}", "</s>"]
["<s>", "final", "private", "void", "jj_rescan_token", "(", ")", "{", "jj_rescan", "=", "true", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:2>", ";", "i", "+", "+", ")", "{", "try", "{", "JJCalls", "p", "=", "jj_2_rtns", "[", "i", "]", ";", "do", "{", "if", "(", "p", ".", "gen", ">", "jj_gen", ")", "{", "jj_la", "=", "p", ".", "arg", ";", "jj_lastpos", "=", "jj_scanpos", "=", "p", ".", "first", ";", "switch", "(", "i", ")", "{", "case", "0", ":", "jj_3_1", "(", ")", ";", "break", ";", "case", "1", ":", "jj_3_2", "(", ")", ";", "break", ";", "}", "}", "p", "=", "p", ".", "next", ";", "}", "while", "(", "p", "!", "=", "null", ")", ";", "}", "catch", "(", "LookaheadSuccess", "ls", ")", "{", "}", "}", "jj_rescan", "=", "false", ";", "}", "</s>"]
["<s>", "final", "private", "void", "jj_save", "(", "int", "index", ",", "int", "xla", ")", "{", "JJCalls", "p", "=", "jj_2_rtns", "[", "index", "]", ";", "while", "(", "p", ".", "gen", ">", "jj_gen", ")", "{", "if", "(", "p", ".", "next", "=", "=", "null", ")", "{", "p", "=", "p", ".", "next", "=", "new", "JJCalls", "(", ")", ";", "break", ";", "}", "p", "=", "p", ".", "next", ";", "}", "p", ".", "gen", "=", "jj_gen", "+", "xla", "-", "jj_la", ";", "p", ".", "first", "=", "token", ";", "p", ".", "arg", "=", "xla", ";", "}", "</s>"]
["<s>", "public", "CopyUtils", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "void", "copy", "(", "byte", "[", "]", "input", ",", "OutputStream", "output", ")", "throws", "IOException", "{", "output", ".", "write", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copy", "(", "byte", "[", "]", "input", ",", "Writer", "output", ")", "throws", "IOException", "{", "ByteArrayInputStream", "in", "=", "new", "ByteArrayInputStream", "(", "input", ")", ";", "copy", "(", "in", ",", "output", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copy", "(", "byte", "[", "]", "input", ",", "Writer", "output", ",", "String", "encoding", ")", "throws", "IOException", "{", "ByteArrayInputStream", "in", "=", "new", "ByteArrayInputStream", "(", "input", ")", ";", "copy", "(", "in", ",", "output", ",", "encoding", ")", ";", "}", "</s>"]
["<s>", "public", "static", "int", "copy", "(", "InputStream", "input", ",", "OutputStream", "output", ")", "throws", "IOException", "{", "byte", "[", "]", "buffer", "=", "new", "byte", "[", "DEFAULT_BUFFER_SIZE", "]", ";", "int", "count", "=", "0", ";", "int", "n", "=", "0", ";", "while", "(", "-", "1", "!", "=", "(", "n", "=", "input", ".", "read", "(", "buffer", ")", ")", ")", "{", "output", ".", "write", "(", "buffer", ",", "0", ",", "n", ")", ";", "count", "+", "=", "n", ";", "}", "return", "count", ";", "}", "</s>"]
["<s>", "public", "static", "int", "copy", "(", "Reader", "input", ",", "Writer", "output", ")", "throws", "IOException", "{", "char", "[", "]", "buffer", "=", "new", "char", "[", "DEFAULT_BUFFER_SIZE", "]", ";", "int", "count", "=", "0", ";", "int", "n", "=", "0", ";", "while", "(", "-", "1", "!", "=", "(", "n", "=", "input", ".", "read", "(", "buffer", ")", ")", ")", "{", "output", ".", "write", "(", "buffer", ",", "0", ",", "n", ")", ";", "count", "+", "=", "n", ";", "}", "return", "count", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copy", "(", "InputStream", "input", ",", "Writer", "output", ")", "throws", "IOException", "{", "InputStreamReader", "in", "=", "new", "InputStreamReader", "(", "input", ")", ";", "copy", "(", "in", ",", "output", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copy", "(", "InputStream", "input", ",", "Writer", "output", ",", "String", "encoding", ")", "throws", "IOException", "{", "InputStreamReader", "in", "=", "new", "InputStreamReader", "(", "input", ",", "encoding", ")", ";", "copy", "(", "in", ",", "output", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copy", "(", "Reader", "input", ",", "OutputStream", "output", ")", "throws", "IOException", "{", "OutputStreamWriter", "out", "=", "new", "OutputStreamWriter", "(", "output", ")", ";", "copy", "(", "input", ",", "out", ")", ";", "out", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copy", "(", "String", "input", ",", "OutputStream", "output", ")", "throws", "IOException", "{", "StringReader", "in", "=", "new", "StringReader", "(", "input", ")", ";", "OutputStreamWriter", "out", "=", "new", "OutputStreamWriter", "(", "output", ")", ";", "copy", "(", "in", ",", "out", ")", ";", "out", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copy", "(", "String", "input", ",", "Writer", "output", ")", "throws", "IOException", "{", "output", ".", "write", "(", "input", ")", ";", "}", "</s>"]
["<s>", "protected", "DirectoryWalker", "(", ")", "{", "this", "(", "null", ",", "-", "1", ")", ";", "}", "</s>"]
["<s>", "protected", "DirectoryWalker", "(", "FileFilter", "filter", ",", "int", "depthLimit", ")", "{", "this", ".", "filter", "=", "filter", ";", "this", ".", "depthLimit", "=", "depthLimit", ";", "}", "</s>"]
["<s>", "protected", "DirectoryWalker", "(", "IOFileFilter", "directoryFilter", ",", "IOFileFilter", "fileFilter", ",", "int", "depthLimit", ")", "{", "if", "(", "directoryFilter", "=", "=", "null", "&", "&", "fileFilter", "=", "=", "null", ")", "{", "this", ".", "filter", "=", "null", ";", "}", "else", "{", "directoryFilter", "=", "(", "directoryFilter", "!", "=", "null", "?", "directoryFilter", ":", "TrueFileFilter", ".", "TRUE", ")", ";", "fileFilter", "=", "(", "fileFilter", "!", "=", "null", "?", "fileFilter", ":", "TrueFileFilter", ".", "TRUE", ")", ";", "directoryFilter", "=", "FileFilterUtils", ".", "makeDirectoryOnly", "(", "directoryFilter", ")", ";", "fileFilter", "=", "FileFilterUtils", ".", "makeFileOnly", "(", "fileFilter", ")", ";", "this", ".", "filter", "=", "FileFilterUtils", ".", "orFileFilter", "(", "directoryFilter", ",", "fileFilter", ")", ";", "}", "this", ".", "depthLimit", "=", "depthLimit", ";", "}", "</s>"]
["<s>", "protected", "final", "void", "walk", "(", "File", "startDirectory", ",", "Collection", "results", ")", "throws", "IOException", "{", "if", "(", "startDirectory", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "try", "{", "handleStart", "(", "startDirectory", ",", "results", ")", ";", "walk", "(", "startDirectory", ",", "0", ",", "results", ")", ";", "handleEnd", "(", "results", ")", ";", "}", "catch", "(", "CancelException", "cancel", ")", "{", "handleCancelled", "(", "startDirectory", ",", "results", ",", "cancel", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "walk", "(", "File", "directory", ",", "int", "depth", ",", "Collection", "results", ")", "throws", "IOException", "{", "checkIfCancelled", "(", "directory", ",", "depth", ",", "results", ")", ";", "if", "(", "handleDirectory", "(", "directory", ",", "depth", ",", "results", ")", ")", "{", "handleDirectoryStart", "(", "directory", ",", "depth", ",", "results", ")", ";", "int", "childDepth", "=", "depth", "+", "1", ";", "if", "(", "depthLimit", "<", "0", "|", "|", "childDepth", "<", "=", "depthLimit", ")", "{", "checkIfCancelled", "(", "directory", ",", "depth", ",", "results", ")", ";", "File", "[", "]", "childFiles", "=", "(", "filter", "=", "=", "null", "?", "directory", ".", "listFiles", "(", ")", ":", "directory", ".", "listFiles", "(", "filter", ")", ")", ";", "if", "(", "childFiles", "=", "=", "null", ")", "{", "handleRestricted", "(", "directory", ",", "childDepth", ",", "results", ")", ";", "}", "else", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "childFiles", ".", "length", ";", "i", "+", "+", ")", "{", "File", "childFile", "=", "childFiles", "[", "i", "]", ";", "if", "(", "childFile", ".", "isDirectory", "(", ")", ")", "{", "walk", "(", "childFile", ",", "childDepth", ",", "results", ")", ";", "}", "else", "{", "checkIfCancelled", "(", "childFile", ",", "childDepth", ",", "results", ")", ";", "handleFile", "(", "childFile", ",", "childDepth", ",", "results", ")", ";", "checkIfCancelled", "(", "childFile", ",", "childDepth", ",", "results", ")", ";", "}", "}", "}", "}", "handleDirectoryEnd", "(", "directory", ",", "depth", ",", "results", ")", ";", "}", "checkIfCancelled", "(", "directory", ",", "depth", ",", "results", ")", ";", "}", "</s>"]
["<s>", "protected", "final", "void", "checkIfCancelled", "(", "File", "file", ",", "int", "depth", ",", "Collection", "results", ")", "throws", "IOException", "{", "if", "(", "handleIsCancelled", "(", "file", ",", "depth", ",", "results", ")", ")", "{", "throw", "new", "CancelException", "(", "file", ",", "depth", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "boolean", "handleIsCancelled", "(", "File", "file", ",", "int", "depth", ",", "Collection", "results", ")", "throws", "IOException", "{", "return", "false", ";", "}", "</s>"]
["<s>", "protected", "void", "handleCancelled", "(", "File", "startDirectory", ",", "Collection", "results", ",", "CancelException", "cancel", ")", "throws", "IOException", "{", "throw", "cancel", ";", "}", "</s>"]
["<s>", "protected", "void", "handleStart", "(", "File", "startDirectory", ",", "Collection", "results", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "protected", "boolean", "handleDirectory", "(", "File", "directory", ",", "int", "depth", ",", "Collection", "results", ")", "throws", "IOException", "{", "return", "true", ";", "}", "</s>"]
["<s>", "protected", "void", "handleDirectoryStart", "(", "File", "directory", ",", "int", "depth", ",", "Collection", "results", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "protected", "void", "handleFile", "(", "File", "file", ",", "int", "depth", ",", "Collection", "results", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "protected", "void", "handleRestricted", "(", "File", "directory", ",", "int", "depth", ",", "Collection", "results", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "protected", "void", "handleDirectoryEnd", "(", "File", "directory", ",", "int", "depth", ",", "Collection", "results", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "protected", "void", "handleEnd", "(", "Collection", "results", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "public", "CancelException", "(", "File", "file", ",", "int", "depth", ")", "{", "this", "(", "\"", "<STR_LIT>", "\"", ",", "file", ",", "depth", ")", ";", "}", "</s>"]
["<s>", "public", "CancelException", "(", "String", "message", ",", "File", "file", ",", "int", "depth", ")", "{", "super", "(", "message", ")", ";", "this", ".", "file", "=", "file", ";", "this", ".", "depth", "=", "depth", ";", "}", "</s>"]
["<s>", "public", "File", "getFile", "(", ")", "{", "return", "file", ";", "}", "</s>"]
["<s>", "public", "int", "getDepth", "(", ")", "{", "return", "depth", ";", "}", "</s>"]
["<s>", "public", "IOUtils", "(", ")", "{", "super", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "closeQuietly", "(", "Reader", "input", ")", "{", "try", "{", "if", "(", "input", "!", "=", "null", ")", "{", "input", ".", "close", "(", ")", ";", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "}", "}", "</s>"]
["<s>", "public", "static", "void", "closeQuietly", "(", "Writer", "output", ")", "{", "try", "{", "if", "(", "output", "!", "=", "null", ")", "{", "output", ".", "close", "(", ")", ";", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "}", "}", "</s>"]
["<s>", "public", "static", "void", "closeQuietly", "(", "InputStream", "input", ")", "{", "try", "{", "if", "(", "input", "!", "=", "null", ")", "{", "input", ".", "close", "(", ")", ";", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "}", "}", "</s>"]
["<s>", "public", "static", "void", "closeQuietly", "(", "OutputStream", "output", ")", "{", "try", "{", "if", "(", "output", "!", "=", "null", ")", "{", "output", ".", "close", "(", ")", ";", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "}", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "toByteArray", "(", "InputStream", "input", ")", "throws", "IOException", "{", "ByteArrayOutputStream", "output", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "copy", "(", "input", ",", "output", ")", ";", "return", "output", ".", "toByteArray", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "toByteArray", "(", "Reader", "input", ")", "throws", "IOException", "{", "ByteArrayOutputStream", "output", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "copy", "(", "input", ",", "output", ")", ";", "return", "output", ".", "toByteArray", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "toByteArray", "(", "Reader", "input", ",", "String", "encoding", ")", "throws", "IOException", "{", "ByteArrayOutputStream", "output", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "copy", "(", "input", ",", "output", ",", "encoding", ")", ";", "return", "output", ".", "toByteArray", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "toByteArray", "(", "String", "input", ")", "throws", "IOException", "{", "return", "input", ".", "getBytes", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "char", "[", "]", "toCharArray", "(", "InputStream", "is", ")", "throws", "IOException", "{", "CharArrayWriter", "output", "=", "new", "CharArrayWriter", "(", ")", ";", "copy", "(", "is", ",", "output", ")", ";", "return", "output", ".", "toCharArray", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "char", "[", "]", "toCharArray", "(", "InputStream", "is", ",", "String", "encoding", ")", "throws", "IOException", "{", "CharArrayWriter", "output", "=", "new", "CharArrayWriter", "(", ")", ";", "copy", "(", "is", ",", "output", ",", "encoding", ")", ";", "return", "output", ".", "toCharArray", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "char", "[", "]", "toCharArray", "(", "Reader", "input", ")", "throws", "IOException", "{", "CharArrayWriter", "sw", "=", "new", "CharArrayWriter", "(", ")", ";", "copy", "(", "input", ",", "sw", ")", ";", "return", "sw", ".", "toCharArray", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "toString", "(", "InputStream", "input", ")", "throws", "IOException", "{", "StringWriter", "sw", "=", "new", "StringWriter", "(", ")", ";", "copy", "(", "input", ",", "sw", ")", ";", "return", "sw", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "toString", "(", "InputStream", "input", ",", "String", "encoding", ")", "throws", "IOException", "{", "StringWriter", "sw", "=", "new", "StringWriter", "(", ")", ";", "copy", "(", "input", ",", "sw", ",", "encoding", ")", ";", "return", "sw", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "toString", "(", "Reader", "input", ")", "throws", "IOException", "{", "StringWriter", "sw", "=", "new", "StringWriter", "(", ")", ";", "copy", "(", "input", ",", "sw", ")", ";", "return", "sw", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "toString", "(", "byte", "[", "]", "input", ")", "throws", "IOException", "{", "return", "new", "String", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "toString", "(", "byte", "[", "]", "input", ",", "String", "encoding", ")", "throws", "IOException", "{", "if", "(", "encoding", "=", "=", "null", ")", "{", "return", "new", "String", "(", "input", ")", ";", "}", "else", "{", "return", "new", "String", "(", "input", ",", "encoding", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "List", "readLines", "(", "InputStream", "input", ")", "throws", "IOException", "{", "InputStreamReader", "reader", "=", "new", "InputStreamReader", "(", "input", ")", ";", "return", "readLines", "(", "reader", ")", ";", "}", "</s>"]
["<s>", "public", "static", "List", "readLines", "(", "InputStream", "input", ",", "String", "encoding", ")", "throws", "IOException", "{", "if", "(", "encoding", "=", "=", "null", ")", "{", "return", "readLines", "(", "input", ")", ";", "}", "else", "{", "InputStreamReader", "reader", "=", "new", "InputStreamReader", "(", "input", ",", "encoding", ")", ";", "return", "readLines", "(", "reader", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "List", "readLines", "(", "Reader", "input", ")", "throws", "IOException", "{", "BufferedReader", "reader", "=", "new", "BufferedReader", "(", "input", ")", ";", "List", "list", "=", "new", "ArrayList", "(", ")", ";", "String", "line", "=", "reader", ".", "readLine", "(", ")", ";", "while", "(", "line", "!", "=", "null", ")", "{", "list", ".", "add", "(", "line", ")", ";", "line", "=", "reader", ".", "readLine", "(", ")", ";", "}", "return", "list", ";", "}", "</s>"]
["<s>", "public", "static", "LineIterator", "lineIterator", "(", "Reader", "reader", ")", "{", "return", "new", "LineIterator", "(", "reader", ")", ";", "}", "</s>"]
["<s>", "public", "static", "LineIterator", "lineIterator", "(", "InputStream", "input", ",", "String", "encoding", ")", "throws", "IOException", "{", "Reader", "reader", "=", "null", ";", "if", "(", "encoding", "=", "=", "null", ")", "{", "reader", "=", "new", "InputStreamReader", "(", "input", ")", ";", "}", "else", "{", "reader", "=", "new", "InputStreamReader", "(", "input", ",", "encoding", ")", ";", "}", "return", "new", "LineIterator", "(", "reader", ")", ";", "}", "</s>"]
["<s>", "public", "static", "InputStream", "toInputStream", "(", "String", "input", ")", "{", "byte", "[", "]", "bytes", "=", "input", ".", "getBytes", "(", ")", ";", "return", "new", "ByteArrayInputStream", "(", "bytes", ")", ";", "}", "</s>"]
["<s>", "public", "static", "InputStream", "toInputStream", "(", "String", "input", ",", "String", "encoding", ")", "throws", "IOException", "{", "byte", "[", "]", "bytes", "=", "encoding", "!", "=", "null", "?", "input", ".", "getBytes", "(", "encoding", ")", ":", "input", ".", "getBytes", "(", ")", ";", "return", "new", "ByteArrayInputStream", "(", "bytes", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "write", "(", "byte", "[", "]", "data", ",", "OutputStream", "output", ")", "throws", "IOException", "{", "if", "(", "data", "!", "=", "null", ")", "{", "output", ".", "write", "(", "data", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "write", "(", "byte", "[", "]", "data", ",", "Writer", "output", ")", "throws", "IOException", "{", "if", "(", "data", "!", "=", "null", ")", "{", "output", ".", "write", "(", "new", "String", "(", "data", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "write", "(", "byte", "[", "]", "data", ",", "Writer", "output", ",", "String", "encoding", ")", "throws", "IOException", "{", "if", "(", "data", "!", "=", "null", ")", "{", "if", "(", "encoding", "=", "=", "null", ")", "{", "write", "(", "data", ",", "output", ")", ";", "}", "else", "{", "output", ".", "write", "(", "new", "String", "(", "data", ",", "encoding", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "void", "write", "(", "char", "[", "]", "data", ",", "Writer", "output", ")", "throws", "IOException", "{", "if", "(", "data", "!", "=", "null", ")", "{", "output", ".", "write", "(", "data", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "write", "(", "char", "[", "]", "data", ",", "OutputStream", "output", ")", "throws", "IOException", "{", "if", "(", "data", "!", "=", "null", ")", "{", "output", ".", "write", "(", "new", "String", "(", "data", ")", ".", "getBytes", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "write", "(", "char", "[", "]", "data", ",", "OutputStream", "output", ",", "String", "encoding", ")", "throws", "IOException", "{", "if", "(", "data", "!", "=", "null", ")", "{", "if", "(", "encoding", "=", "=", "null", ")", "{", "write", "(", "data", ",", "output", ")", ";", "}", "else", "{", "output", ".", "write", "(", "new", "String", "(", "data", ")", ".", "getBytes", "(", "encoding", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "void", "write", "(", "String", "data", ",", "Writer", "output", ")", "throws", "IOException", "{", "if", "(", "data", "!", "=", "null", ")", "{", "output", ".", "write", "(", "data", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "write", "(", "String", "data", ",", "OutputStream", "output", ")", "throws", "IOException", "{", "if", "(", "data", "!", "=", "null", ")", "{", "output", ".", "write", "(", "data", ".", "getBytes", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "write", "(", "String", "data", ",", "OutputStream", "output", ",", "String", "encoding", ")", "throws", "IOException", "{", "if", "(", "data", "!", "=", "null", ")", "{", "if", "(", "encoding", "=", "=", "null", ")", "{", "write", "(", "data", ",", "output", ")", ";", "}", "else", "{", "output", ".", "write", "(", "data", ".", "getBytes", "(", "encoding", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "void", "write", "(", "StringBuffer", "data", ",", "Writer", "output", ")", "throws", "IOException", "{", "if", "(", "data", "!", "=", "null", ")", "{", "output", ".", "write", "(", "data", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "write", "(", "StringBuffer", "data", ",", "OutputStream", "output", ")", "throws", "IOException", "{", "if", "(", "data", "!", "=", "null", ")", "{", "output", ".", "write", "(", "data", ".", "toString", "(", ")", ".", "getBytes", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "write", "(", "StringBuffer", "data", ",", "OutputStream", "output", ",", "String", "encoding", ")", "throws", "IOException", "{", "if", "(", "data", "!", "=", "null", ")", "{", "if", "(", "encoding", "=", "=", "null", ")", "{", "write", "(", "data", ",", "output", ")", ";", "}", "else", "{", "output", ".", "write", "(", "data", ".", "toString", "(", ")", ".", "getBytes", "(", "encoding", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "void", "writeLines", "(", "Collection", "lines", ",", "String", "lineEnding", ",", "OutputStream", "output", ")", "throws", "IOException", "{", "if", "(", "lines", "=", "=", "null", ")", "{", "return", ";", "}", "if", "(", "lineEnding", "=", "=", "null", ")", "{", "lineEnding", "=", "LINE_SEPARATOR", ";", "}", "for", "(", "Iterator", "it", "=", "lines", ".", "iterator", "(", ")", ";", "it", ".", "hasNext", "(", ")", ";", ")", "{", "Object", "line", "=", "it", ".", "next", "(", ")", ";", "if", "(", "line", "!", "=", "null", ")", "{", "output", ".", "write", "(", "line", ".", "toString", "(", ")", ".", "getBytes", "(", ")", ")", ";", "}", "output", ".", "write", "(", "lineEnding", ".", "getBytes", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "writeLines", "(", "Collection", "lines", ",", "String", "lineEnding", ",", "OutputStream", "output", ",", "String", "encoding", ")", "throws", "IOException", "{", "if", "(", "encoding", "=", "=", "null", ")", "{", "writeLines", "(", "lines", ",", "lineEnding", ",", "output", ")", ";", "}", "else", "{", "if", "(", "lines", "=", "=", "null", ")", "{", "return", ";", "}", "if", "(", "lineEnding", "=", "=", "null", ")", "{", "lineEnding", "=", "LINE_SEPARATOR", ";", "}", "for", "(", "Iterator", "it", "=", "lines", ".", "iterator", "(", ")", ";", "it", ".", "hasNext", "(", ")", ";", ")", "{", "Object", "line", "=", "it", ".", "next", "(", ")", ";", "if", "(", "line", "!", "=", "null", ")", "{", "output", ".", "write", "(", "line", ".", "toString", "(", ")", ".", "getBytes", "(", "encoding", ")", ")", ";", "}", "output", ".", "write", "(", "lineEnding", ".", "getBytes", "(", "encoding", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "void", "writeLines", "(", "Collection", "lines", ",", "String", "lineEnding", ",", "Writer", "writer", ")", "throws", "IOException", "{", "if", "(", "lines", "=", "=", "null", ")", "{", "return", ";", "}", "if", "(", "lineEnding", "=", "=", "null", ")", "{", "lineEnding", "=", "LINE_SEPARATOR", ";", "}", "for", "(", "Iterator", "it", "=", "lines", ".", "iterator", "(", ")", ";", "it", ".", "hasNext", "(", ")", ";", ")", "{", "Object", "line", "=", "it", ".", "next", "(", ")", ";", "if", "(", "line", "!", "=", "null", ")", "{", "writer", ".", "write", "(", "line", ".", "toString", "(", ")", ")", ";", "}", "writer", ".", "write", "(", "lineEnding", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "int", "copy", "(", "InputStream", "input", ",", "OutputStream", "output", ")", "throws", "IOException", "{", "long", "count", "=", "copyLarge", "(", "input", ",", "output", ")", ";", "if", "(", "count", ">", "Integer", ".", "MAX_VALUE", ")", "{", "return", "-", "1", ";", "}", "return", "(", "int", ")", "count", ";", "}", "</s>"]
["<s>", "public", "static", "long", "copyLarge", "(", "InputStream", "input", ",", "OutputStream", "output", ")", "throws", "IOException", "{", "byte", "[", "]", "buffer", "=", "new", "byte", "[", "DEFAULT_BUFFER_SIZE", "]", ";", "long", "count", "=", "0", ";", "int", "n", "=", "0", ";", "while", "(", "-", "1", "!", "=", "(", "n", "=", "input", ".", "read", "(", "buffer", ")", ")", ")", "{", "output", ".", "write", "(", "buffer", ",", "0", ",", "n", ")", ";", "count", "+", "=", "n", ";", "}", "return", "count", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copy", "(", "InputStream", "input", ",", "Writer", "output", ")", "throws", "IOException", "{", "InputStreamReader", "in", "=", "new", "InputStreamReader", "(", "input", ")", ";", "copy", "(", "in", ",", "output", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copy", "(", "InputStream", "input", ",", "Writer", "output", ",", "String", "encoding", ")", "throws", "IOException", "{", "if", "(", "encoding", "=", "=", "null", ")", "{", "copy", "(", "input", ",", "output", ")", ";", "}", "else", "{", "InputStreamReader", "in", "=", "new", "InputStreamReader", "(", "input", ",", "encoding", ")", ";", "copy", "(", "in", ",", "output", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "int", "copy", "(", "Reader", "input", ",", "Writer", "output", ")", "throws", "IOException", "{", "long", "count", "=", "copyLarge", "(", "input", ",", "output", ")", ";", "if", "(", "count", ">", "Integer", ".", "MAX_VALUE", ")", "{", "return", "-", "1", ";", "}", "return", "(", "int", ")", "count", ";", "}", "</s>"]
["<s>", "public", "static", "long", "copyLarge", "(", "Reader", "input", ",", "Writer", "output", ")", "throws", "IOException", "{", "char", "[", "]", "buffer", "=", "new", "char", "[", "DEFAULT_BUFFER_SIZE", "]", ";", "long", "count", "=", "0", ";", "int", "n", "=", "0", ";", "while", "(", "-", "1", "!", "=", "(", "n", "=", "input", ".", "read", "(", "buffer", ")", ")", ")", "{", "output", ".", "write", "(", "buffer", ",", "0", ",", "n", ")", ";", "count", "+", "=", "n", ";", "}", "return", "count", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copy", "(", "Reader", "input", ",", "OutputStream", "output", ")", "throws", "IOException", "{", "OutputStreamWriter", "out", "=", "new", "OutputStreamWriter", "(", "output", ")", ";", "copy", "(", "input", ",", "out", ")", ";", "out", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copy", "(", "Reader", "input", ",", "OutputStream", "output", ",", "String", "encoding", ")", "throws", "IOException", "{", "if", "(", "encoding", "=", "=", "null", ")", "{", "copy", "(", "input", ",", "output", ")", ";", "}", "else", "{", "OutputStreamWriter", "out", "=", "new", "OutputStreamWriter", "(", "output", ",", "encoding", ")", ";", "copy", "(", "input", ",", "out", ")", ";", "out", ".", "flush", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "boolean", "contentEquals", "(", "InputStream", "input1", ",", "InputStream", "input2", ")", "throws", "IOException", "{", "if", "(", "!", "(", "input1", "instanceof", "BufferedInputStream", ")", ")", "{", "input1", "=", "new", "BufferedInputStream", "(", "input1", ")", ";", "}", "if", "(", "!", "(", "input2", "instanceof", "BufferedInputStream", ")", ")", "{", "input2", "=", "new", "BufferedInputStream", "(", "input2", ")", ";", "}", "int", "ch", "=", "input1", ".", "read", "(", ")", ";", "while", "(", "-", "1", "!", "=", "ch", ")", "{", "int", "ch2", "=", "input2", ".", "read", "(", ")", ";", "if", "(", "ch", "!", "=", "ch2", ")", "{", "return", "false", ";", "}", "ch", "=", "input1", ".", "read", "(", ")", ";", "}", "int", "ch2", "=", "input2", ".", "read", "(", ")", ";", "return", "(", "ch2", "=", "=", "-", "1", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "contentEquals", "(", "Reader", "input1", ",", "Reader", "input2", ")", "throws", "IOException", "{", "if", "(", "!", "(", "input1", "instanceof", "BufferedReader", ")", ")", "{", "input1", "=", "new", "BufferedReader", "(", "input1", ")", ";", "}", "if", "(", "!", "(", "input2", "instanceof", "BufferedReader", ")", ")", "{", "input2", "=", "new", "BufferedReader", "(", "input2", ")", ";", "}", "int", "ch", "=", "input1", ".", "read", "(", ")", ";", "while", "(", "-", "1", "!", "=", "ch", ")", "{", "int", "ch2", "=", "input2", ".", "read", "(", ")", ";", "if", "(", "ch", "!", "=", "ch2", ")", "{", "return", "false", ";", "}", "ch", "=", "input1", ".", "read", "(", ")", ";", "}", "int", "ch2", "=", "input2", ".", "read", "(", ")", ";", "return", "(", "ch2", "=", "=", "-", "1", ")", ";", "}", "</s>"]
["<s>", "protected", "FileDeleteStrategy", "(", "String", "name", ")", "{", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "public", "boolean", "deleteQuietly", "(", "File", "fileToDelete", ")", "{", "if", "(", "fileToDelete", "=", "=", "null", "|", "|", "fileToDelete", ".", "exists", "(", ")", "=", "=", "false", ")", "{", "return", "true", ";", "}", "try", "{", "return", "doDelete", "(", "fileToDelete", ")", ";", "}", "catch", "(", "IOException", "ex", ")", "{", "return", "false", ";", "}", "}", "</s>"]
["<s>", "public", "void", "delete", "(", "File", "fileToDelete", ")", "throws", "IOException", "{", "if", "(", "fileToDelete", ".", "exists", "(", ")", "&", "&", "doDelete", "(", "fileToDelete", ")", "=", "=", "false", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "fileToDelete", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "boolean", "doDelete", "(", "File", "fileToDelete", ")", "throws", "IOException", "{", "return", "fileToDelete", ".", "delete", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "name", "+", "\"", "<STR_LIT:]>", "\"", ";", "}", "</s>"]
["<s>", "ForceFileDeleteStrategy", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "protected", "boolean", "doDelete", "(", "File", "fileToDelete", ")", "throws", "IOException", "{", "FileUtils", ".", "forceDelete", "(", "fileToDelete", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "public", "static", "IOCase", "forName", "(", "String", "name", ")", "{", "if", "(", "IOCase", ".", "SENSITIVE", ".", "name", ".", "equals", "(", "name", ")", ")", "{", "return", "IOCase", ".", "SENSITIVE", ";", "}", "if", "(", "IOCase", ".", "INSENSITIVE", ".", "name", ".", "equals", "(", "name", ")", ")", "{", "return", "IOCase", ".", "INSENSITIVE", ";", "}", "if", "(", "IOCase", ".", "SYSTEM", ".", "name", ".", "equals", "(", "name", ")", ")", "{", "return", "IOCase", ".", "SYSTEM", ";", "}", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "name", ")", ";", "}", "</s>"]
["<s>", "private", "IOCase", "(", "String", "name", ",", "boolean", "sensitive", ")", "{", "this", ".", "name", "=", "name", ";", "this", ".", "sensitive", "=", "sensitive", ";", "}", "</s>"]
["<s>", "private", "Object", "readResolve", "(", ")", "{", "return", "forName", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "boolean", "isCaseSensitive", "(", ")", "{", "return", "sensitive", ";", "}", "</s>"]
["<s>", "public", "int", "checkCompareTo", "(", "String", "str1", ",", "String", "str2", ")", "{", "if", "(", "str1", "=", "=", "null", "|", "|", "str2", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "sensitive", "?", "str1", ".", "compareTo", "(", "str2", ")", ":", "str1", ".", "compareToIgnoreCase", "(", "str2", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "checkEquals", "(", "String", "str1", ",", "String", "str2", ")", "{", "if", "(", "str1", "=", "=", "null", "|", "|", "str2", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "sensitive", "?", "str1", ".", "equals", "(", "str2", ")", ":", "str1", ".", "equalsIgnoreCase", "(", "str2", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "checkStartsWith", "(", "String", "str", ",", "String", "start", ")", "{", "return", "str", ".", "regionMatches", "(", "!", "sensitive", ",", "0", ",", "start", ",", "0", ",", "start", ".", "length", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "checkEndsWith", "(", "String", "str", ",", "String", "end", ")", "{", "int", "endLen", "=", "end", ".", "length", "(", ")", ";", "return", "str", ".", "regionMatches", "(", "!", "sensitive", ",", "str", ".", "length", "(", ")", "-", "endLen", ",", "end", ",", "0", ",", "endLen", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "checkRegionMatches", "(", "String", "str", ",", "int", "strStartIndex", ",", "String", "search", ")", "{", "return", "str", ".", "regionMatches", "(", "!", "sensitive", ",", "strStartIndex", ",", "search", ",", "0", ",", "search", ".", "length", "(", ")", ")", ";", "}", "</s>"]
["<s>", "String", "convertCase", "(", "String", "str", ")", "{", "if", "(", "str", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "sensitive", "?", "str", ":", "str", ".", "toLowerCase", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "FileSystemUtils", "(", ")", "{", "super", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "long", "freeSpace", "(", "String", "path", ")", "throws", "IOException", "{", "return", "INSTANCE", ".", "freeSpaceOS", "(", "path", ",", "OS", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "static", "long", "freeSpaceKb", "(", "String", "path", ")", "throws", "IOException", "{", "return", "INSTANCE", ".", "freeSpaceOS", "(", "path", ",", "OS", ",", "true", ")", ";", "}", "</s>"]
["<s>", "long", "freeSpaceOS", "(", "String", "path", ",", "int", "os", ",", "boolean", "kb", ")", "throws", "IOException", "{", "if", "(", "path", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "switch", "(", "os", ")", "{", "case", "WINDOWS", ":", "return", "(", "kb", "?", "freeSpaceWindows", "(", "path", ")", "/", "<NUM_LIT>", ":", "freeSpaceWindows", "(", "path", ")", ")", ";", "case", "UNIX", ":", "return", "freeSpaceUnix", "(", "path", ",", "kb", ",", "false", ")", ";", "case", "POSIX_UNIX", ":", "return", "freeSpaceUnix", "(", "path", ",", "kb", ",", "true", ")", ";", "case", "OTHER", ":", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "default", ":", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "long", "freeSpaceWindows", "(", "String", "path", ")", "throws", "IOException", "{", "path", "=", "FilenameUtils", ".", "normalize", "(", "path", ")", ";", "if", "(", "path", ".", "length", "(", ")", ">", "<NUM_LIT:2>", "&", "&", "path", ".", "charAt", "(", "1", ")", "=", "=", "<CHAR_LIT::>", ")", "{", "path", "=", "path", ".", "substring", "(", "0", ",", "<NUM_LIT:2>", ")", ";", "}", "String", "[", "]", "cmdAttribs", "=", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "path", "}", ";", "List", "lines", "=", "performCommand", "(", "cmdAttribs", ",", "Integer", ".", "MAX_VALUE", ")", ";", "for", "(", "int", "i", "=", "lines", ".", "size", "(", ")", "-", "1", ";", "i", ">", "=", "0", ";", "i", "-", "-", ")", "{", "String", "line", "=", "(", "String", ")", "lines", ".", "get", "(", "i", ")", ";", "if", "(", "line", ".", "length", "(", ")", ">", "0", ")", "{", "return", "parseDir", "(", "line", ",", "path", ")", ";", "}", "}", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "path", "+", "\"", "'", "\"", ")", ";", "}", "</s>"]
["<s>", "long", "parseDir", "(", "String", "line", ",", "String", "path", ")", "throws", "IOException", "{", "int", "bytesStart", "=", "0", ";", "int", "bytesEnd", "=", "0", ";", "int", "j", "=", "line", ".", "length", "(", ")", "-", "1", ";", "innerLoop1", ":", "while", "(", "j", ">", "=", "0", ")", "{", "char", "c", "=", "line", ".", "charAt", "(", "j", ")", ";", "if", "(", "Character", ".", "isDigit", "(", "c", ")", ")", "{", "bytesEnd", "=", "j", "+", "1", ";", "break", "innerLoop1", ";", "}", "j", "-", "-", ";", "}", "innerLoop2", ":", "while", "(", "j", ">", "=", "0", ")", "{", "char", "c", "=", "line", ".", "charAt", "(", "j", ")", ";", "if", "(", "!", "Character", ".", "isDigit", "(", "c", ")", "&", "&", "c", "!", "=", "<CHAR_LIT:U+002C>", "&", "&", "c", "!", "=", "<CHAR_LIT:.>", ")", "{", "bytesStart", "=", "j", "+", "1", ";", "break", "innerLoop2", ";", "}", "j", "-", "-", ";", "}", "if", "(", "j", "<", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "path", "+", "\"", "'", "\"", ")", ";", "}", "StringBuffer", "buf", "=", "new", "StringBuffer", "(", "line", ".", "substring", "(", "bytesStart", ",", "bytesEnd", ")", ")", ";", "for", "(", "int", "k", "=", "0", ";", "k", "<", "buf", ".", "length", "(", ")", ";", "k", "+", "+", ")", "{", "if", "(", "buf", ".", "charAt", "(", "k", ")", "=", "=", "<CHAR_LIT:U+002C>", "|", "|", "buf", ".", "charAt", "(", "k", ")", "=", "=", "<CHAR_LIT:.>", ")", "{", "buf", ".", "deleteCharAt", "(", "k", "-", "-", ")", ";", "}", "}", "return", "parseBytes", "(", "buf", ".", "toString", "(", ")", ",", "path", ")", ";", "}", "</s>"]
["<s>", "long", "freeSpaceUnix", "(", "String", "path", ",", "boolean", "kb", ",", "boolean", "posix", ")", "throws", "IOException", "{", "if", "(", "path", ".", "length", "(", ")", "=", "=", "0", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "path", "=", "FilenameUtils", ".", "normalize", "(", "path", ")", ";", "String", "flags", "=", "\"", "<STR_LIT:->", "\"", ";", "if", "(", "kb", ")", "{", "flags", "+", "=", "\"", "<STR_LIT>", "\"", ";", "}", "if", "(", "posix", ")", "{", "flags", "+", "=", "\"", "<STR_LIT>", "\"", ";", "}", "String", "[", "]", "cmdAttribs", "=", "(", "flags", ".", "length", "(", ")", ">", "1", "?", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "flags", ",", "path", "}", ":", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "path", "}", ")", ";", "List", "lines", "=", "performCommand", "(", "cmdAttribs", ",", "<NUM_LIT:3>", ")", ";", "if", "(", "lines", ".", "size", "(", ")", "<", "<NUM_LIT:2>", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "path", "+", "\"", "<STR_LIT>", "\"", "+", "lines", ")", ";", "}", "String", "line2", "=", "(", "String", ")", "lines", ".", "get", "(", "1", ")", ";", "StringTokenizer", "tok", "=", "new", "StringTokenizer", "(", "line2", ",", "\"", "\"", ")", ";", "if", "(", "tok", ".", "countTokens", "(", ")", "<", "<NUM_LIT:4>", ")", "{", "if", "(", "tok", ".", "countTokens", "(", ")", "=", "=", "1", "&", "&", "lines", ".", "size", "(", ")", ">", "=", "<NUM_LIT:3>", ")", "{", "String", "line3", "=", "(", "String", ")", "lines", ".", "get", "(", "<NUM_LIT:2>", ")", ";", "tok", "=", "new", "StringTokenizer", "(", "line3", ",", "\"", "\"", ")", ";", "}", "else", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "path", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "else", "{", "tok", ".", "nextToken", "(", ")", ";", "}", "tok", ".", "nextToken", "(", ")", ";", "tok", ".", "nextToken", "(", ")", ";", "String", "freeSpace", "=", "tok", ".", "nextToken", "(", ")", ";", "return", "parseBytes", "(", "freeSpace", ",", "path", ")", ";", "}", "</s>"]
["<s>", "long", "parseBytes", "(", "String", "freeSpace", ",", "String", "path", ")", "throws", "IOException", "{", "try", "{", "long", "bytes", "=", "Long", ".", "parseLong", "(", "freeSpace", ")", ";", "if", "(", "bytes", "<", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "path", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "bytes", ";", "}", "catch", "(", "NumberFormatException", "ex", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "path", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "List", "performCommand", "(", "String", "[", "]", "cmdAttribs", ",", "int", "max", ")", "throws", "IOException", "{", "List", "lines", "=", "new", "ArrayList", "(", "<NUM_LIT:20>", ")", ";", "Process", "proc", "=", "null", ";", "InputStream", "in", "=", "null", ";", "OutputStream", "out", "=", "null", ";", "InputStream", "err", "=", "null", ";", "BufferedReader", "inr", "=", "null", ";", "try", "{", "proc", "=", "openProcess", "(", "cmdAttribs", ")", ";", "in", "=", "proc", ".", "getInputStream", "(", ")", ";", "out", "=", "proc", ".", "getOutputStream", "(", ")", ";", "err", "=", "proc", ".", "getErrorStream", "(", ")", ";", "inr", "=", "new", "BufferedReader", "(", "new", "InputStreamReader", "(", "in", ")", ")", ";", "String", "line", "=", "inr", ".", "readLine", "(", ")", ";", "while", "(", "line", "!", "=", "null", "&", "&", "lines", ".", "size", "(", ")", "<", "max", ")", "{", "line", "=", "line", ".", "toLowerCase", "(", ")", ".", "trim", "(", ")", ";", "lines", ".", "add", "(", "line", ")", ";", "line", "=", "inr", ".", "readLine", "(", ")", ";", "}", "proc", ".", "waitFor", "(", ")", ";", "if", "(", "proc", ".", "exitValue", "(", ")", "!", "=", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "proc", ".", "exitValue", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "Arrays", ".", "asList", "(", "cmdAttribs", ")", ")", ";", "}", "if", "(", "lines", ".", "size", "(", ")", "=", "=", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "Arrays", ".", "asList", "(", "cmdAttribs", ")", ")", ";", "}", "return", "lines", ";", "}", "catch", "(", "InterruptedException", "ex", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "ex", ".", "getMessage", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "Arrays", ".", "asList", "(", "cmdAttribs", ")", ")", ";", "}", "finally", "{", "IOUtils", ".", "closeQuietly", "(", "in", ")", ";", "IOUtils", ".", "closeQuietly", "(", "out", ")", ";", "IOUtils", ".", "closeQuietly", "(", "err", ")", ";", "IOUtils", ".", "closeQuietly", "(", "inr", ")", ";", "if", "(", "proc", "!", "=", "null", ")", "{", "proc", ".", "destroy", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "Process", "openProcess", "(", "String", "[", "]", "cmdAttribs", ")", "throws", "IOException", "{", "return", "Runtime", ".", "getRuntime", "(", ")", ".", "exec", "(", "cmdAttribs", ")", ";", "}", "</s>"]
["<s>", "public", "FileUtils", "(", ")", "{", "super", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "FileInputStream", "openInputStream", "(", "File", "file", ")", "throws", "IOException", "{", "if", "(", "file", ".", "exists", "(", ")", ")", "{", "if", "(", "file", ".", "isDirectory", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "file", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "file", ".", "canRead", "(", ")", "=", "=", "false", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "file", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "else", "{", "throw", "new", "FileNotFoundException", "(", "\"", "<STR_LIT>", "\"", "+", "file", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "new", "FileInputStream", "(", "file", ")", ";", "}", "</s>"]
["<s>", "public", "static", "FileOutputStream", "openOutputStream", "(", "File", "file", ")", "throws", "IOException", "{", "if", "(", "file", ".", "exists", "(", ")", ")", "{", "if", "(", "file", ".", "isDirectory", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "file", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "file", ".", "canWrite", "(", ")", "=", "=", "false", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "file", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "else", "{", "File", "parent", "=", "file", ".", "getParentFile", "(", ")", ";", "if", "(", "parent", "!", "=", "null", "&", "&", "parent", ".", "exists", "(", ")", "=", "=", "false", ")", "{", "if", "(", "parent", ".", "mkdirs", "(", ")", "=", "=", "false", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "file", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "return", "new", "FileOutputStream", "(", "file", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "byteCountToDisplaySize", "(", "long", "size", ")", "{", "String", "displaySize", ";", "if", "(", "size", "/", "ONE_GB", ">", "0", ")", "{", "displaySize", "=", "String", ".", "valueOf", "(", "size", "/", "ONE_GB", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "else", "if", "(", "size", "/", "ONE_MB", ">", "0", ")", "{", "displaySize", "=", "String", ".", "valueOf", "(", "size", "/", "ONE_MB", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "else", "if", "(", "size", "/", "ONE_KB", ">", "0", ")", "{", "displaySize", "=", "String", ".", "valueOf", "(", "size", "/", "ONE_KB", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "else", "{", "displaySize", "=", "String", ".", "valueOf", "(", "size", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "return", "displaySize", ";", "}", "</s>"]
["<s>", "public", "static", "void", "touch", "(", "File", "file", ")", "throws", "IOException", "{", "if", "(", "!", "file", ".", "exists", "(", ")", ")", "{", "OutputStream", "out", "=", "openOutputStream", "(", "file", ")", ";", "IOUtils", ".", "closeQuietly", "(", "out", ")", ";", "}", "boolean", "success", "=", "file", ".", "setLastModified", "(", "System", ".", "currentTimeMillis", "(", ")", ")", ";", "if", "(", "!", "success", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "file", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "File", "[", "]", "convertFileCollectionToFileArray", "(", "Collection", "files", ")", "{", "return", "(", "File", "[", "]", ")", "files", ".", "toArray", "(", "new", "File", "[", "files", ".", "size", "(", ")", "]", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "innerListFiles", "(", "Collection", "files", ",", "File", "directory", ",", "IOFileFilter", "filter", ")", "{", "File", "[", "]", "found", "=", "directory", ".", "listFiles", "(", "(", "FileFilter", ")", "filter", ")", ";", "if", "(", "found", "!", "=", "null", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "found", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "found", "[", "i", "]", ".", "isDirectory", "(", ")", ")", "{", "innerListFiles", "(", "files", ",", "found", "[", "i", "]", ",", "filter", ")", ";", "}", "else", "{", "files", ".", "add", "(", "found", "[", "i", "]", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "public", "static", "Collection", "listFiles", "(", "File", "directory", ",", "IOFileFilter", "fileFilter", ",", "IOFileFilter", "dirFilter", ")", "{", "if", "(", "!", "directory", ".", "isDirectory", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "fileFilter", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "IOFileFilter", "effFileFilter", "=", "FileFilterUtils", ".", "andFileFilter", "(", "fileFilter", ",", "FileFilterUtils", ".", "notFileFilter", "(", "DirectoryFileFilter", ".", "INSTANCE", ")", ")", ";", "IOFileFilter", "effDirFilter", ";", "if", "(", "dirFilter", "=", "=", "null", ")", "{", "effDirFilter", "=", "FalseFileFilter", ".", "INSTANCE", ";", "}", "else", "{", "effDirFilter", "=", "FileFilterUtils", ".", "andFileFilter", "(", "dirFilter", ",", "DirectoryFileFilter", ".", "INSTANCE", ")", ";", "}", "Collection", "files", "=", "new", "java", ".", "util", ".", "LinkedList", "(", ")", ";", "innerListFiles", "(", "files", ",", "directory", ",", "FileFilterUtils", ".", "orFileFilter", "(", "effFileFilter", ",", "effDirFilter", ")", ")", ";", "return", "files", ";", "}", "</s>"]
["<s>", "public", "static", "Iterator", "iterateFiles", "(", "File", "directory", ",", "IOFileFilter", "fileFilter", ",", "IOFileFilter", "dirFilter", ")", "{", "return", "listFiles", "(", "directory", ",", "fileFilter", ",", "dirFilter", ")", ".", "iterator", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "[", "]", "toSuffixes", "(", "String", "[", "]", "extensions", ")", "{", "String", "[", "]", "suffixes", "=", "new", "String", "[", "extensions", ".", "length", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "extensions", ".", "length", ";", "i", "+", "+", ")", "{", "suffixes", "[", "i", "]", "=", "\"", "<STR_LIT:.>", "\"", "+", "extensions", "[", "i", "]", ";", "}", "return", "suffixes", ";", "}", "</s>"]
["<s>", "public", "static", "Collection", "listFiles", "(", "File", "directory", ",", "String", "[", "]", "extensions", ",", "boolean", "recursive", ")", "{", "IOFileFilter", "filter", ";", "if", "(", "extensions", "=", "=", "null", ")", "{", "filter", "=", "TrueFileFilter", ".", "INSTANCE", ";", "}", "else", "{", "String", "[", "]", "suffixes", "=", "toSuffixes", "(", "extensions", ")", ";", "filter", "=", "new", "SuffixFileFilter", "(", "suffixes", ")", ";", "}", "return", "listFiles", "(", "directory", ",", "filter", ",", "(", "recursive", "?", "TrueFileFilter", ".", "INSTANCE", ":", "FalseFileFilter", ".", "INSTANCE", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Iterator", "iterateFiles", "(", "File", "directory", ",", "String", "[", "]", "extensions", ",", "boolean", "recursive", ")", "{", "return", "listFiles", "(", "directory", ",", "extensions", ",", "recursive", ")", ".", "iterator", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "contentEquals", "(", "File", "file1", ",", "File", "file2", ")", "throws", "IOException", "{", "boolean", "file1Exists", "=", "file1", ".", "exists", "(", ")", ";", "if", "(", "file1Exists", "!", "=", "file2", ".", "exists", "(", ")", ")", "{", "return", "false", ";", "}", "if", "(", "!", "file1Exists", ")", "{", "return", "true", ";", "}", "if", "(", "file1", ".", "isDirectory", "(", ")", "|", "|", "file2", ".", "isDirectory", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "file1", ".", "length", "(", ")", "!", "=", "file2", ".", "length", "(", ")", ")", "{", "return", "false", ";", "}", "if", "(", "file1", ".", "getCanonicalFile", "(", ")", ".", "equals", "(", "file2", ".", "getCanonicalFile", "(", ")", ")", ")", "{", "return", "true", ";", "}", "InputStream", "input1", "=", "null", ";", "InputStream", "input2", "=", "null", ";", "try", "{", "input1", "=", "new", "FileInputStream", "(", "file1", ")", ";", "input2", "=", "new", "FileInputStream", "(", "file2", ")", ";", "return", "IOUtils", ".", "contentEquals", "(", "input1", ",", "input2", ")", ";", "}", "finally", "{", "IOUtils", ".", "closeQuietly", "(", "input1", ")", ";", "IOUtils", ".", "closeQuietly", "(", "input2", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "File", "toFile", "(", "URL", "url", ")", "{", "if", "(", "url", "=", "=", "null", "|", "|", "!", "url", ".", "getProtocol", "(", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "return", "null", ";", "}", "else", "{", "String", "filename", "=", "url", ".", "getFile", "(", ")", ".", "replace", "(", "<CHAR_LIT:/>", ",", "File", ".", "separatorChar", ")", ";", "int", "pos", "=", "0", ";", "while", "(", "(", "pos", "=", "filename", ".", "indexOf", "(", "<CHAR_LIT>", ",", "pos", ")", ")", ">", "=", "0", ")", "{", "if", "(", "pos", "+", "<NUM_LIT:2>", "<", "filename", ".", "length", "(", ")", ")", "{", "String", "hexStr", "=", "filename", ".", "substring", "(", "pos", "+", "1", ",", "pos", "+", "<NUM_LIT:3>", ")", ";", "char", "ch", "=", "(", "char", ")", "Integer", ".", "parseInt", "(", "hexStr", ",", "<NUM_LIT:16>", ")", ";", "filename", "=", "filename", ".", "substring", "(", "0", ",", "pos", ")", "+", "ch", "+", "filename", ".", "substring", "(", "pos", "+", "<NUM_LIT:3>", ")", ";", "}", "}", "return", "new", "File", "(", "filename", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "File", "[", "]", "toFiles", "(", "URL", "[", "]", "urls", ")", "{", "if", "(", "urls", "=", "=", "null", "|", "|", "urls", ".", "length", "=", "=", "0", ")", "{", "return", "EMPTY_FILE_ARRAY", ";", "}", "File", "[", "]", "files", "=", "new", "File", "[", "urls", ".", "length", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "urls", ".", "length", ";", "i", "+", "+", ")", "{", "URL", "url", "=", "urls", "[", "i", "]", ";", "if", "(", "url", "!", "=", "null", ")", "{", "if", "(", "url", ".", "getProtocol", "(", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", "=", "=", "false", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "url", ")", ";", "}", "files", "[", "i", "]", "=", "toFile", "(", "url", ")", ";", "}", "}", "return", "files", ";", "}", "</s>"]
["<s>", "public", "static", "URL", "[", "]", "toURLs", "(", "File", "[", "]", "files", ")", "throws", "IOException", "{", "URL", "[", "]", "urls", "=", "new", "URL", "[", "files", ".", "length", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "urls", ".", "length", ";", "i", "+", "+", ")", "{", "urls", "[", "i", "]", "=", "files", "[", "i", "]", ".", "toURL", "(", ")", ";", "}", "return", "urls", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copyFileToDirectory", "(", "File", "srcFile", ",", "File", "destDir", ")", "throws", "IOException", "{", "copyFileToDirectory", "(", "srcFile", ",", "destDir", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copyFileToDirectory", "(", "File", "srcFile", ",", "File", "destDir", ",", "boolean", "preserveFileDate", ")", "throws", "IOException", "{", "if", "(", "destDir", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "destDir", ".", "exists", "(", ")", "&", "&", "destDir", ".", "isDirectory", "(", ")", "=", "=", "false", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "destDir", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "copyFile", "(", "srcFile", ",", "new", "File", "(", "destDir", ",", "srcFile", ".", "getName", "(", ")", ")", ",", "preserveFileDate", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copyFile", "(", "File", "srcFile", ",", "File", "destFile", ")", "throws", "IOException", "{", "copyFile", "(", "srcFile", ",", "destFile", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copyFile", "(", "File", "srcFile", ",", "File", "destFile", ",", "boolean", "preserveFileDate", ")", "throws", "IOException", "{", "if", "(", "srcFile", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "destFile", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "srcFile", ".", "exists", "(", ")", "=", "=", "false", ")", "{", "throw", "new", "FileNotFoundException", "(", "\"", "<STR_LIT>", "\"", "+", "srcFile", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "srcFile", ".", "isDirectory", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "srcFile", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "srcFile", ".", "getCanonicalPath", "(", ")", ".", "equals", "(", "destFile", ".", "getCanonicalPath", "(", ")", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "srcFile", "+", "\"", "<STR_LIT>", "\"", "+", "destFile", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "destFile", ".", "getParentFile", "(", ")", "!", "=", "null", "&", "&", "destFile", ".", "getParentFile", "(", ")", ".", "exists", "(", ")", "=", "=", "false", ")", "{", "if", "(", "destFile", ".", "getParentFile", "(", ")", ".", "mkdirs", "(", ")", "=", "=", "false", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "destFile", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "if", "(", "destFile", ".", "exists", "(", ")", "&", "&", "destFile", ".", "canWrite", "(", ")", "=", "=", "false", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "destFile", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "doCopyFile", "(", "srcFile", ",", "destFile", ",", "preserveFileDate", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "doCopyFile", "(", "File", "srcFile", ",", "File", "destFile", ",", "boolean", "preserveFileDate", ")", "throws", "IOException", "{", "if", "(", "destFile", ".", "exists", "(", ")", "&", "&", "destFile", ".", "isDirectory", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "destFile", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "FileInputStream", "input", "=", "new", "FileInputStream", "(", "srcFile", ")", ";", "try", "{", "FileOutputStream", "output", "=", "new", "FileOutputStream", "(", "destFile", ")", ";", "try", "{", "IOUtils", ".", "copy", "(", "input", ",", "output", ")", ";", "}", "finally", "{", "IOUtils", ".", "closeQuietly", "(", "output", ")", ";", "}", "}", "finally", "{", "IOUtils", ".", "closeQuietly", "(", "input", ")", ";", "}", "if", "(", "srcFile", ".", "length", "(", ")", "!", "=", "destFile", ".", "length", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "srcFile", "+", "\"", "<STR_LIT>", "\"", "+", "destFile", "+", "\"", "'", "\"", ")", ";", "}", "if", "(", "preserveFileDate", ")", "{", "destFile", ".", "setLastModified", "(", "srcFile", ".", "lastModified", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "copyDirectoryToDirectory", "(", "File", "srcDir", ",", "File", "destDir", ")", "throws", "IOException", "{", "if", "(", "srcDir", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "srcDir", ".", "exists", "(", ")", "&", "&", "srcDir", ".", "isDirectory", "(", ")", "=", "=", "false", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "destDir", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "destDir", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "destDir", ".", "exists", "(", ")", "&", "&", "destDir", ".", "isDirectory", "(", ")", "=", "=", "false", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "destDir", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "copyDirectory", "(", "srcDir", ",", "new", "File", "(", "destDir", ",", "srcDir", ".", "getName", "(", ")", ")", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copyDirectory", "(", "File", "srcDir", ",", "File", "destDir", ")", "throws", "IOException", "{", "copyDirectory", "(", "srcDir", ",", "destDir", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copyDirectory", "(", "File", "srcDir", ",", "File", "destDir", ",", "boolean", "preserveFileDate", ")", "throws", "IOException", "{", "copyDirectory", "(", "srcDir", ",", "destDir", ",", "null", ",", "preserveFileDate", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copyDirectory", "(", "File", "srcDir", ",", "File", "destDir", ",", "FileFilter", "filter", ")", "throws", "IOException", "{", "copyDirectory", "(", "srcDir", ",", "destDir", ",", "filter", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "copyDirectory", "(", "File", "srcDir", ",", "File", "destDir", ",", "FileFilter", "filter", ",", "boolean", "preserveFileDate", ")", "throws", "IOException", "{", "if", "(", "srcDir", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "destDir", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "srcDir", ".", "exists", "(", ")", "=", "=", "false", ")", "{", "throw", "new", "FileNotFoundException", "(", "\"", "<STR_LIT>", "\"", "+", "srcDir", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "srcDir", ".", "isDirectory", "(", ")", "=", "=", "false", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "srcDir", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "srcDir", ".", "getCanonicalPath", "(", ")", ".", "equals", "(", "destDir", ".", "getCanonicalPath", "(", ")", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "srcDir", "+", "\"", "<STR_LIT>", "\"", "+", "destDir", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "List", "exclusionList", "=", "null", ";", "if", "(", "destDir", ".", "getCanonicalPath", "(", ")", ".", "startsWith", "(", "srcDir", ".", "getCanonicalPath", "(", ")", ")", ")", "{", "File", "[", "]", "srcFiles", "=", "filter", "=", "=", "null", "?", "srcDir", ".", "listFiles", "(", ")", ":", "srcDir", ".", "listFiles", "(", "filter", ")", ";", "if", "(", "srcFiles", "!", "=", "null", "&", "&", "srcFiles", ".", "length", ">", "0", ")", "{", "exclusionList", "=", "new", "ArrayList", "(", "srcFiles", ".", "length", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "srcFiles", ".", "length", ";", "i", "+", "+", ")", "{", "File", "copiedFile", "=", "new", "File", "(", "destDir", ",", "srcFiles", "[", "i", "]", ".", "getName", "(", ")", ")", ";", "exclusionList", ".", "add", "(", "copiedFile", ".", "getCanonicalPath", "(", ")", ")", ";", "}", "}", "}", "doCopyDirectory", "(", "srcDir", ",", "destDir", ",", "filter", ",", "preserveFileDate", ",", "exclusionList", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "doCopyDirectory", "(", "File", "srcDir", ",", "File", "destDir", ",", "FileFilter", "filter", ",", "boolean", "preserveFileDate", ",", "List", "exclusionList", ")", "throws", "IOException", "{", "if", "(", "destDir", ".", "exists", "(", ")", ")", "{", "if", "(", "destDir", ".", "isDirectory", "(", ")", "=", "=", "false", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "destDir", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "else", "{", "if", "(", "destDir", ".", "mkdirs", "(", ")", "=", "=", "false", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "destDir", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "preserveFileDate", ")", "{", "destDir", ".", "setLastModified", "(", "srcDir", ".", "lastModified", "(", ")", ")", ";", "}", "}", "if", "(", "destDir", ".", "canWrite", "(", ")", "=", "=", "false", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "destDir", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "File", "[", "]", "files", "=", "filter", "=", "=", "null", "?", "srcDir", ".", "listFiles", "(", ")", ":", "srcDir", ".", "listFiles", "(", "filter", ")", ";", "if", "(", "files", "=", "=", "null", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "srcDir", ")", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "length", ";", "i", "+", "+", ")", "{", "File", "copiedFile", "=", "new", "File", "(", "destDir", ",", "files", "[", "i", "]", ".", "getName", "(", ")", ")", ";", "if", "(", "exclusionList", "=", "=", "null", "|", "|", "!", "exclusionList", ".", "contains", "(", "files", "[", "i", "]", ".", "getCanonicalPath", "(", ")", ")", ")", "{", "if", "(", "files", "[", "i", "]", ".", "isDirectory", "(", ")", ")", "{", "doCopyDirectory", "(", "files", "[", "i", "]", ",", "copiedFile", ",", "filter", ",", "preserveFileDate", ",", "exclusionList", ")", ";", "}", "else", "{", "doCopyFile", "(", "files", "[", "i", "]", ",", "copiedFile", ",", "preserveFileDate", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "public", "static", "void", "copyURLToFile", "(", "URL", "source", ",", "File", "destination", ")", "throws", "IOException", "{", "InputStream", "input", "=", "source", ".", "openStream", "(", ")", ";", "try", "{", "FileOutputStream", "output", "=", "openOutputStream", "(", "destination", ")", ";", "try", "{", "IOUtils", ".", "copy", "(", "input", ",", "output", ")", ";", "}", "finally", "{", "IOUtils", ".", "closeQuietly", "(", "output", ")", ";", "}", "}", "finally", "{", "IOUtils", ".", "closeQuietly", "(", "input", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "deleteDirectory", "(", "File", "directory", ")", "throws", "IOException", "{", "if", "(", "!", "directory", ".", "exists", "(", ")", ")", "{", "return", ";", "}", "cleanDirectory", "(", "directory", ")", ";", "if", "(", "!", "directory", ".", "delete", "(", ")", ")", "{", "String", "message", "=", "\"", "<STR_LIT>", "\"", "+", "directory", "+", "\"", "<STR_LIT:.>", "\"", ";", "throw", "new", "IOException", "(", "message", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "boolean", "deleteQuietly", "(", "File", "file", ")", "{", "if", "(", "file", "=", "=", "null", ")", "{", "return", "false", ";", "}", "try", "{", "if", "(", "file", ".", "isDirectory", "(", ")", ")", "{", "cleanDirectory", "(", "file", ")", ";", "}", "}", "catch", "(", "Exception", "e", ")", "{", "}", "try", "{", "return", "file", ".", "delete", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "return", "false", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "cleanDirectory", "(", "File", "directory", ")", "throws", "IOException", "{", "if", "(", "!", "directory", ".", "exists", "(", ")", ")", "{", "String", "message", "=", "directory", "+", "\"", "<STR_LIT>", "\"", ";", "throw", "new", "IllegalArgumentException", "(", "message", ")", ";", "}", "if", "(", "!", "directory", ".", "isDirectory", "(", ")", ")", "{", "String", "message", "=", "directory", "+", "\"", "<STR_LIT>", "\"", ";", "throw", "new", "IllegalArgumentException", "(", "message", ")", ";", "}", "File", "[", "]", "files", "=", "directory", ".", "listFiles", "(", ")", ";", "if", "(", "files", "=", "=", "null", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "directory", ")", ";", "}", "IOException", "exception", "=", "null", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "length", ";", "i", "+", "+", ")", "{", "File", "file", "=", "files", "[", "i", "]", ";", "try", "{", "forceDelete", "(", "file", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "exception", "=", "ioe", ";", "}", "}", "if", "(", "null", "!", "=", "exception", ")", "{", "throw", "exception", ";", "}", "}", "</s>"]
["<s>", "public", "static", "boolean", "waitFor", "(", "File", "file", ",", "int", "seconds", ")", "{", "int", "timeout", "=", "0", ";", "int", "tick", "=", "0", ";", "while", "(", "!", "file", ".", "exists", "(", ")", ")", "{", "if", "(", "tick", "+", "+", ">", "=", "<NUM_LIT:10>", ")", "{", "tick", "=", "0", ";", "if", "(", "timeout", "+", "+", ">", "seconds", ")", "{", "return", "false", ";", "}", "}", "try", "{", "Thread", ".", "sleep", "(", "<NUM_LIT:100>", ")", ";", "}", "catch", "(", "InterruptedException", "ignore", ")", "{", "}", "catch", "(", "Exception", "ex", ")", "{", "break", ";", "}", "}", "return", "true", ";", "}", "</s>"]
["<s>", "public", "static", "String", "readFileToString", "(", "File", "file", ",", "String", "encoding", ")", "throws", "IOException", "{", "InputStream", "in", "=", "null", ";", "try", "{", "in", "=", "openInputStream", "(", "file", ")", ";", "return", "IOUtils", ".", "toString", "(", "in", ",", "encoding", ")", ";", "}", "finally", "{", "IOUtils", ".", "closeQuietly", "(", "in", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "readFileToString", "(", "File", "file", ")", "throws", "IOException", "{", "return", "readFileToString", "(", "file", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "readFileToByteArray", "(", "File", "file", ")", "throws", "IOException", "{", "InputStream", "in", "=", "null", ";", "try", "{", "in", "=", "openInputStream", "(", "file", ")", ";", "return", "IOUtils", ".", "toByteArray", "(", "in", ")", ";", "}", "finally", "{", "IOUtils", ".", "closeQuietly", "(", "in", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "List", "readLines", "(", "File", "file", ",", "String", "encoding", ")", "throws", "IOException", "{", "InputStream", "in", "=", "null", ";", "try", "{", "in", "=", "openInputStream", "(", "file", ")", ";", "return", "IOUtils", ".", "readLines", "(", "in", ",", "encoding", ")", ";", "}", "finally", "{", "IOUtils", ".", "closeQuietly", "(", "in", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "List", "readLines", "(", "File", "file", ")", "throws", "IOException", "{", "return", "readLines", "(", "file", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "static", "LineIterator", "lineIterator", "(", "File", "file", ",", "String", "encoding", ")", "throws", "IOException", "{", "InputStream", "in", "=", "null", ";", "try", "{", "in", "=", "openInputStream", "(", "file", ")", ";", "return", "IOUtils", ".", "lineIterator", "(", "in", ",", "encoding", ")", ";", "}", "catch", "(", "IOException", "ex", ")", "{", "IOUtils", ".", "closeQuietly", "(", "in", ")", ";", "throw", "ex", ";", "}", "catch", "(", "RuntimeException", "ex", ")", "{", "IOUtils", ".", "closeQuietly", "(", "in", ")", ";", "throw", "ex", ";", "}", "}", "</s>"]
["<s>", "public", "static", "LineIterator", "lineIterator", "(", "File", "file", ")", "throws", "IOException", "{", "return", "lineIterator", "(", "file", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeStringToFile", "(", "File", "file", ",", "String", "data", ",", "String", "encoding", ")", "throws", "IOException", "{", "OutputStream", "out", "=", "null", ";", "try", "{", "out", "=", "openOutputStream", "(", "file", ")", ";", "IOUtils", ".", "write", "(", "data", ",", "out", ",", "encoding", ")", ";", "}", "finally", "{", "IOUtils", ".", "closeQuietly", "(", "out", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "writeStringToFile", "(", "File", "file", ",", "String", "data", ")", "throws", "IOException", "{", "writeStringToFile", "(", "file", ",", "data", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeByteArrayToFile", "(", "File", "file", ",", "byte", "[", "]", "data", ")", "throws", "IOException", "{", "OutputStream", "out", "=", "null", ";", "try", "{", "out", "=", "openOutputStream", "(", "file", ")", ";", "out", ".", "write", "(", "data", ")", ";", "}", "finally", "{", "IOUtils", ".", "closeQuietly", "(", "out", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "writeLines", "(", "File", "file", ",", "String", "encoding", ",", "Collection", "lines", ")", "throws", "IOException", "{", "writeLines", "(", "file", ",", "encoding", ",", "lines", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeLines", "(", "File", "file", ",", "Collection", "lines", ")", "throws", "IOException", "{", "writeLines", "(", "file", ",", "null", ",", "lines", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeLines", "(", "File", "file", ",", "String", "encoding", ",", "Collection", "lines", ",", "String", "lineEnding", ")", "throws", "IOException", "{", "OutputStream", "out", "=", "null", ";", "try", "{", "out", "=", "openOutputStream", "(", "file", ")", ";", "IOUtils", ".", "writeLines", "(", "lines", ",", "lineEnding", ",", "out", ",", "encoding", ")", ";", "}", "finally", "{", "IOUtils", ".", "closeQuietly", "(", "out", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "writeLines", "(", "File", "file", ",", "Collection", "lines", ",", "String", "lineEnding", ")", "throws", "IOException", "{", "writeLines", "(", "file", ",", "null", ",", "lines", ",", "lineEnding", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "forceDelete", "(", "File", "file", ")", "throws", "IOException", "{", "if", "(", "file", ".", "isDirectory", "(", ")", ")", "{", "deleteDirectory", "(", "file", ")", ";", "}", "else", "{", "boolean", "filePresent", "=", "file", ".", "exists", "(", ")", ";", "if", "(", "!", "file", ".", "delete", "(", ")", ")", "{", "if", "(", "!", "filePresent", ")", "{", "throw", "new", "FileNotFoundException", "(", "\"", "<STR_LIT>", "\"", "+", "file", ")", ";", "}", "String", "message", "=", "\"", "<STR_LIT>", "\"", "+", "file", ";", "throw", "new", "IOException", "(", "message", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "void", "forceDeleteOnExit", "(", "File", "file", ")", "throws", "IOException", "{", "if", "(", "file", ".", "isDirectory", "(", ")", ")", "{", "deleteDirectoryOnExit", "(", "file", ")", ";", "}", "else", "{", "file", ".", "deleteOnExit", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "void", "deleteDirectoryOnExit", "(", "File", "directory", ")", "throws", "IOException", "{", "if", "(", "!", "directory", ".", "exists", "(", ")", ")", "{", "return", ";", "}", "cleanDirectoryOnExit", "(", "directory", ")", ";", "directory", ".", "deleteOnExit", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "cleanDirectoryOnExit", "(", "File", "directory", ")", "throws", "IOException", "{", "if", "(", "!", "directory", ".", "exists", "(", ")", ")", "{", "String", "message", "=", "directory", "+", "\"", "<STR_LIT>", "\"", ";", "throw", "new", "IllegalArgumentException", "(", "message", ")", ";", "}", "if", "(", "!", "directory", ".", "isDirectory", "(", ")", ")", "{", "String", "message", "=", "directory", "+", "\"", "<STR_LIT>", "\"", ";", "throw", "new", "IllegalArgumentException", "(", "message", ")", ";", "}", "File", "[", "]", "files", "=", "directory", ".", "listFiles", "(", ")", ";", "if", "(", "files", "=", "=", "null", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "directory", ")", ";", "}", "IOException", "exception", "=", "null", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "length", ";", "i", "+", "+", ")", "{", "File", "file", "=", "files", "[", "i", "]", ";", "try", "{", "forceDeleteOnExit", "(", "file", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "exception", "=", "ioe", ";", "}", "}", "if", "(", "null", "!", "=", "exception", ")", "{", "throw", "exception", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "forceMkdir", "(", "File", "directory", ")", "throws", "IOException", "{", "if", "(", "directory", ".", "exists", "(", ")", ")", "{", "if", "(", "directory", ".", "isFile", "(", ")", ")", "{", "String", "message", "=", "\"", "<STR_LIT>", "\"", "+", "directory", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "throw", "new", "IOException", "(", "message", ")", ";", "}", "}", "else", "{", "if", "(", "!", "directory", ".", "mkdirs", "(", ")", ")", "{", "String", "message", "=", "\"", "<STR_LIT>", "\"", "+", "directory", ";", "throw", "new", "IOException", "(", "message", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "long", "sizeOfDirectory", "(", "File", "directory", ")", "{", "if", "(", "!", "directory", ".", "exists", "(", ")", ")", "{", "String", "message", "=", "directory", "+", "\"", "<STR_LIT>", "\"", ";", "throw", "new", "IllegalArgumentException", "(", "message", ")", ";", "}", "if", "(", "!", "directory", ".", "isDirectory", "(", ")", ")", "{", "String", "message", "=", "directory", "+", "\"", "<STR_LIT>", "\"", ";", "throw", "new", "IllegalArgumentException", "(", "message", ")", ";", "}", "long", "size", "=", "0", ";", "File", "[", "]", "files", "=", "directory", ".", "listFiles", "(", ")", ";", "if", "(", "files", "=", "=", "null", ")", "{", "return", "0", "L", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "length", ";", "i", "+", "+", ")", "{", "File", "file", "=", "files", "[", "i", "]", ";", "if", "(", "file", ".", "isDirectory", "(", ")", ")", "{", "size", "+", "=", "sizeOfDirectory", "(", "file", ")", ";", "}", "else", "{", "size", "+", "=", "file", ".", "length", "(", ")", ";", "}", "}", "return", "size", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isFileNewer", "(", "File", "file", ",", "File", "reference", ")", "{", "if", "(", "reference", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "!", "reference", ".", "exists", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "file", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "isFileNewer", "(", "file", ",", "reference", ".", "lastModified", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isFileNewer", "(", "File", "file", ",", "Date", "date", ")", "{", "if", "(", "date", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "isFileNewer", "(", "file", ",", "date", ".", "getTime", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isFileNewer", "(", "File", "file", ",", "long", "timeMillis", ")", "{", "if", "(", "file", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "!", "file", ".", "exists", "(", ")", ")", "{", "return", "false", ";", "}", "return", "file", ".", "lastModified", "(", ")", ">", "timeMillis", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isFileOlder", "(", "File", "file", ",", "File", "reference", ")", "{", "if", "(", "reference", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "!", "reference", ".", "exists", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "file", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "isFileOlder", "(", "file", ",", "reference", ".", "lastModified", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isFileOlder", "(", "File", "file", ",", "Date", "date", ")", "{", "if", "(", "date", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "isFileOlder", "(", "file", ",", "date", ".", "getTime", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isFileOlder", "(", "File", "file", ",", "long", "timeMillis", ")", "{", "if", "(", "file", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "!", "file", ".", "exists", "(", ")", ")", "{", "return", "false", ";", "}", "return", "file", ".", "lastModified", "(", ")", "<", "timeMillis", ";", "}", "</s>"]
["<s>", "public", "static", "long", "checksumCRC32", "(", "File", "file", ")", "throws", "IOException", "{", "CRC32", "crc", "=", "new", "CRC32", "(", ")", ";", "checksum", "(", "file", ",", "crc", ")", ";", "return", "crc", ".", "getValue", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Checksum", "checksum", "(", "File", "file", ",", "Checksum", "checksum", ")", "throws", "IOException", "{", "if", "(", "file", ".", "isDirectory", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "InputStream", "in", "=", "null", ";", "try", "{", "in", "=", "new", "CheckedInputStream", "(", "new", "FileInputStream", "(", "file", ")", ",", "checksum", ")", ";", "IOUtils", ".", "copy", "(", "in", ",", "new", "NullOutputStream", "(", ")", ")", ";", "}", "finally", "{", "IOUtils", ".", "closeQuietly", "(", "in", ")", ";", "}", "return", "checksum", ";", "}", "</s>"]
["<s>", "public", "static", "void", "moveDirectory", "(", "File", "srcDir", ",", "File", "destDir", ")", "throws", "IOException", "{", "if", "(", "srcDir", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "destDir", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "!", "srcDir", ".", "exists", "(", ")", ")", "{", "throw", "new", "FileNotFoundException", "(", "\"", "<STR_LIT>", "\"", "+", "srcDir", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "!", "srcDir", ".", "isDirectory", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "srcDir", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "destDir", ".", "exists", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "destDir", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "boolean", "rename", "=", "srcDir", ".", "renameTo", "(", "destDir", ")", ";", "if", "(", "!", "rename", ")", "{", "copyDirectory", "(", "srcDir", ",", "destDir", ")", ";", "deleteDirectory", "(", "srcDir", ")", ";", "if", "(", "srcDir", ".", "exists", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "srcDir", "+", "\"", "<STR_LIT>", "\"", "+", "destDir", "+", "\"", "'", "\"", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "void", "moveDirectoryToDirectory", "(", "File", "src", ",", "File", "destDir", ",", "boolean", "createDestDir", ")", "throws", "IOException", "{", "if", "(", "src", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "destDir", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "!", "destDir", ".", "exists", "(", ")", "&", "&", "createDestDir", ")", "{", "destDir", ".", "mkdirs", "(", ")", ";", "}", "if", "(", "!", "destDir", ".", "exists", "(", ")", ")", "{", "throw", "new", "FileNotFoundException", "(", "\"", "<STR_LIT>", "\"", "+", "destDir", "+", "\"", "<STR_LIT>", "\"", "+", "createDestDir", "+", "\"", "<STR_LIT:]>", "\"", ")", ";", "}", "if", "(", "!", "destDir", ".", "isDirectory", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "destDir", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "moveDirectory", "(", "src", ",", "new", "File", "(", "destDir", ",", "src", ".", "getName", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "moveFile", "(", "File", "srcFile", ",", "File", "destFile", ")", "throws", "IOException", "{", "if", "(", "srcFile", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "destFile", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "!", "srcFile", ".", "exists", "(", ")", ")", "{", "throw", "new", "FileNotFoundException", "(", "\"", "<STR_LIT>", "\"", "+", "srcFile", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "srcFile", ".", "isDirectory", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "srcFile", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "destFile", ".", "exists", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "destFile", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "destFile", ".", "isDirectory", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "destFile", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "boolean", "rename", "=", "srcFile", ".", "renameTo", "(", "destFile", ")", ";", "if", "(", "!", "rename", ")", "{", "copyFile", "(", "srcFile", ",", "destFile", ")", ";", "if", "(", "!", "srcFile", ".", "delete", "(", ")", ")", "{", "FileUtils", ".", "deleteQuietly", "(", "destFile", ")", ";", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "srcFile", "+", "\"", "<STR_LIT>", "\"", "+", "destFile", "+", "\"", "'", "\"", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "void", "moveFileToDirectory", "(", "File", "srcFile", ",", "File", "destDir", ",", "boolean", "createDestDir", ")", "throws", "IOException", "{", "if", "(", "srcFile", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "destDir", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "!", "destDir", ".", "exists", "(", ")", "&", "&", "createDestDir", ")", "{", "destDir", ".", "mkdirs", "(", ")", ";", "}", "if", "(", "!", "destDir", ".", "exists", "(", ")", ")", "{", "throw", "new", "FileNotFoundException", "(", "\"", "<STR_LIT>", "\"", "+", "destDir", "+", "\"", "<STR_LIT>", "\"", "+", "createDestDir", "+", "\"", "<STR_LIT:]>", "\"", ")", ";", "}", "if", "(", "!", "destDir", ".", "isDirectory", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "destDir", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "moveFile", "(", "srcFile", ",", "new", "File", "(", "destDir", ",", "srcFile", ".", "getName", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "moveToDirectory", "(", "File", "src", ",", "File", "destDir", ",", "boolean", "createDestDir", ")", "throws", "IOException", "{", "if", "(", "src", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "destDir", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "!", "src", ".", "exists", "(", ")", ")", "{", "throw", "new", "FileNotFoundException", "(", "\"", "<STR_LIT>", "\"", "+", "src", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "src", ".", "isDirectory", "(", ")", ")", "{", "moveDirectoryToDirectory", "(", "src", ",", "destDir", ",", "createDestDir", ")", ";", "}", "else", "{", "moveFileToDirectory", "(", "src", ",", "destDir", ",", "createDestDir", ")", ";", "}", "}", "</s>"]
["<s>", "public", "EndianUtils", "(", ")", "{", "super", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "short", "swapShort", "(", "short", "value", ")", "{", "return", "(", "short", ")", "(", "(", "(", "(", "value", ">", ">", "0", ")", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ")", "+", "(", "(", "(", "value", ">", ">", "<NUM_LIT:8>", ")", "&", "<NUM_LIT>", ")", "<", "<", "0", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "int", "swapInteger", "(", "int", "value", ")", "{", "return", "(", "(", "(", "value", ">", ">", "0", ")", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:24>", ")", "+", "(", "(", "(", "value", ">", ">", "<NUM_LIT:8>", ")", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:16>", ")", "+", "(", "(", "(", "value", ">", ">", "<NUM_LIT:16>", ")", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ")", "+", "(", "(", "(", "value", ">", ">", "<NUM_LIT:24>", ")", "&", "<NUM_LIT>", ")", "<", "<", "0", ")", ";", "}", "</s>"]
["<s>", "public", "static", "long", "swapLong", "(", "long", "value", ")", "{", "return", "(", "(", "(", "value", ">", ">", "0", ")", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT>", ")", "+", "(", "(", "(", "value", ">", ">", "<NUM_LIT:8>", ")", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT>", ")", "+", "(", "(", "(", "value", ">", ">", "<NUM_LIT:16>", ")", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT>", ")", "+", "(", "(", "(", "value", ">", ">", "<NUM_LIT:24>", ")", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:32>", ")", "+", "(", "(", "(", "value", ">", ">", "<NUM_LIT:32>", ")", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:24>", ")", "+", "(", "(", "(", "value", ">", ">", "<NUM_LIT>", ")", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:16>", ")", "+", "(", "(", "(", "value", ">", ">", "<NUM_LIT>", ")", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ")", "+", "(", "(", "(", "value", ">", ">", "<NUM_LIT>", ")", "&", "<NUM_LIT>", ")", "<", "<", "0", ")", ";", "}", "</s>"]
["<s>", "public", "static", "float", "swapFloat", "(", "float", "value", ")", "{", "return", "Float", ".", "intBitsToFloat", "(", "swapInteger", "(", "Float", ".", "floatToIntBits", "(", "value", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "double", "swapDouble", "(", "double", "value", ")", "{", "return", "Double", ".", "longBitsToDouble", "(", "swapLong", "(", "Double", ".", "doubleToLongBits", "(", "value", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeSwappedShort", "(", "byte", "[", "]", "data", ",", "int", "offset", ",", "short", "value", ")", "{", "data", "[", "offset", "+", "0", "]", "=", "(", "byte", ")", "(", "(", "value", ">", ">", "0", ")", "&", "<NUM_LIT>", ")", ";", "data", "[", "offset", "+", "1", "]", "=", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:8>", ")", "&", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "static", "short", "readSwappedShort", "(", "byte", "[", "]", "data", ",", "int", "offset", ")", "{", "return", "(", "short", ")", "(", "(", "(", "data", "[", "offset", "+", "0", "]", "&", "<NUM_LIT>", ")", "<", "<", "0", ")", "+", "(", "(", "data", "[", "offset", "+", "1", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "int", "readSwappedUnsignedShort", "(", "byte", "[", "]", "data", ",", "int", "offset", ")", "{", "return", "(", "(", "(", "data", "[", "offset", "+", "0", "]", "&", "<NUM_LIT>", ")", "<", "<", "0", ")", "+", "(", "(", "data", "[", "offset", "+", "1", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeSwappedInteger", "(", "byte", "[", "]", "data", ",", "int", "offset", ",", "int", "value", ")", "{", "data", "[", "offset", "+", "0", "]", "=", "(", "byte", ")", "(", "(", "value", ">", ">", "0", ")", "&", "<NUM_LIT>", ")", ";", "data", "[", "offset", "+", "1", "]", "=", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:8>", ")", "&", "<NUM_LIT>", ")", ";", "data", "[", "offset", "+", "<NUM_LIT:2>", "]", "=", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:16>", ")", "&", "<NUM_LIT>", ")", ";", "data", "[", "offset", "+", "<NUM_LIT:3>", "]", "=", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:24>", ")", "&", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "static", "int", "readSwappedInteger", "(", "byte", "[", "]", "data", ",", "int", "offset", ")", "{", "return", "(", "(", "(", "data", "[", "offset", "+", "0", "]", "&", "<NUM_LIT>", ")", "<", "<", "0", ")", "+", "(", "(", "data", "[", "offset", "+", "1", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ")", "+", "(", "(", "data", "[", "offset", "+", "<NUM_LIT:2>", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:16>", ")", "+", "(", "(", "data", "[", "offset", "+", "<NUM_LIT:3>", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:24>", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "long", "readSwappedUnsignedInteger", "(", "byte", "[", "]", "data", ",", "int", "offset", ")", "{", "long", "low", "=", "(", "(", "(", "data", "[", "offset", "+", "0", "]", "&", "<NUM_LIT>", ")", "<", "<", "0", ")", "+", "(", "(", "data", "[", "offset", "+", "1", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ")", "+", "(", "(", "data", "[", "offset", "+", "<NUM_LIT:2>", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:16>", ")", ")", ";", "long", "high", "=", "data", "[", "offset", "+", "<NUM_LIT:3>", "]", "&", "<NUM_LIT>", ";", "return", "(", "high", "<", "<", "<NUM_LIT:24>", ")", "+", "(", "<NUM_LIT>", "&", "low", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeSwappedLong", "(", "byte", "[", "]", "data", ",", "int", "offset", ",", "long", "value", ")", "{", "data", "[", "offset", "+", "0", "]", "=", "(", "byte", ")", "(", "(", "value", ">", ">", "0", ")", "&", "<NUM_LIT>", ")", ";", "data", "[", "offset", "+", "1", "]", "=", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:8>", ")", "&", "<NUM_LIT>", ")", ";", "data", "[", "offset", "+", "<NUM_LIT:2>", "]", "=", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:16>", ")", "&", "<NUM_LIT>", ")", ";", "data", "[", "offset", "+", "<NUM_LIT:3>", "]", "=", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:24>", ")", "&", "<NUM_LIT>", ")", ";", "data", "[", "offset", "+", "<NUM_LIT:4>", "]", "=", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:32>", ")", "&", "<NUM_LIT>", ")", ";", "data", "[", "offset", "+", "<NUM_LIT:5>", "]", "=", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT>", ")", "&", "<NUM_LIT>", ")", ";", "data", "[", "offset", "+", "<NUM_LIT:6>", "]", "=", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT>", ")", "&", "<NUM_LIT>", ")", ";", "data", "[", "offset", "+", "<NUM_LIT:7>", "]", "=", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT>", ")", "&", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "static", "long", "readSwappedLong", "(", "byte", "[", "]", "data", ",", "int", "offset", ")", "{", "long", "low", "=", "(", "(", "data", "[", "offset", "+", "0", "]", "&", "<NUM_LIT>", ")", "<", "<", "0", ")", "+", "(", "(", "data", "[", "offset", "+", "1", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ")", "+", "(", "(", "data", "[", "offset", "+", "<NUM_LIT:2>", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:16>", ")", "+", "(", "(", "data", "[", "offset", "+", "<NUM_LIT:3>", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:24>", ")", ";", "long", "high", "=", "(", "(", "data", "[", "offset", "+", "<NUM_LIT:4>", "]", "&", "<NUM_LIT>", ")", "<", "<", "0", ")", "+", "(", "(", "data", "[", "offset", "+", "<NUM_LIT:5>", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ")", "+", "(", "(", "data", "[", "offset", "+", "<NUM_LIT:6>", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:16>", ")", "+", "(", "(", "data", "[", "offset", "+", "<NUM_LIT:7>", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:24>", ")", ";", "return", "(", "high", "<", "<", "<NUM_LIT:32>", ")", "+", "(", "<NUM_LIT>", "&", "low", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeSwappedFloat", "(", "byte", "[", "]", "data", ",", "int", "offset", ",", "float", "value", ")", "{", "writeSwappedInteger", "(", "data", ",", "offset", ",", "Float", ".", "floatToIntBits", "(", "value", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "float", "readSwappedFloat", "(", "byte", "[", "]", "data", ",", "int", "offset", ")", "{", "return", "Float", ".", "intBitsToFloat", "(", "readSwappedInteger", "(", "data", ",", "offset", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeSwappedDouble", "(", "byte", "[", "]", "data", ",", "int", "offset", ",", "double", "value", ")", "{", "writeSwappedLong", "(", "data", ",", "offset", ",", "Double", ".", "doubleToLongBits", "(", "value", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "double", "readSwappedDouble", "(", "byte", "[", "]", "data", ",", "int", "offset", ")", "{", "return", "Double", ".", "longBitsToDouble", "(", "readSwappedLong", "(", "data", ",", "offset", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeSwappedShort", "(", "OutputStream", "output", ",", "short", "value", ")", "throws", "IOException", "{", "output", ".", "write", "(", "(", "byte", ")", "(", "(", "value", ">", ">", "0", ")", "&", "<NUM_LIT>", ")", ")", ";", "output", ".", "write", "(", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:8>", ")", "&", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "short", "readSwappedShort", "(", "InputStream", "input", ")", "throws", "IOException", "{", "return", "(", "short", ")", "(", "(", "(", "read", "(", "input", ")", "&", "<NUM_LIT>", ")", "<", "<", "0", ")", "+", "(", "(", "read", "(", "input", ")", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "int", "readSwappedUnsignedShort", "(", "InputStream", "input", ")", "throws", "IOException", "{", "int", "value1", "=", "read", "(", "input", ")", ";", "int", "value2", "=", "read", "(", "input", ")", ";", "return", "(", "(", "(", "value1", "&", "<NUM_LIT>", ")", "<", "<", "0", ")", "+", "(", "(", "value2", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeSwappedInteger", "(", "OutputStream", "output", ",", "int", "value", ")", "throws", "IOException", "{", "output", ".", "write", "(", "(", "byte", ")", "(", "(", "value", ">", ">", "0", ")", "&", "<NUM_LIT>", ")", ")", ";", "output", ".", "write", "(", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:8>", ")", "&", "<NUM_LIT>", ")", ")", ";", "output", ".", "write", "(", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:16>", ")", "&", "<NUM_LIT>", ")", ")", ";", "output", ".", "write", "(", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:24>", ")", "&", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "int", "readSwappedInteger", "(", "InputStream", "input", ")", "throws", "IOException", "{", "int", "value1", "=", "read", "(", "input", ")", ";", "int", "value2", "=", "read", "(", "input", ")", ";", "int", "value3", "=", "read", "(", "input", ")", ";", "int", "value4", "=", "read", "(", "input", ")", ";", "return", "(", "(", "value1", "&", "<NUM_LIT>", ")", "<", "<", "0", ")", "+", "(", "(", "value2", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ")", "+", "(", "(", "value3", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:16>", ")", "+", "(", "(", "value4", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:24>", ")", ";", "}", "</s>"]
["<s>", "public", "static", "long", "readSwappedUnsignedInteger", "(", "InputStream", "input", ")", "throws", "IOException", "{", "int", "value1", "=", "read", "(", "input", ")", ";", "int", "value2", "=", "read", "(", "input", ")", ";", "int", "value3", "=", "read", "(", "input", ")", ";", "int", "value4", "=", "read", "(", "input", ")", ";", "long", "low", "=", "(", "(", "(", "value1", "&", "<NUM_LIT>", ")", "<", "<", "0", ")", "+", "(", "(", "value2", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ")", "+", "(", "(", "value3", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:16>", ")", ")", ";", "long", "high", "=", "value4", "&", "<NUM_LIT>", ";", "return", "(", "high", "<", "<", "<NUM_LIT:24>", ")", "+", "(", "<NUM_LIT>", "&", "low", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeSwappedLong", "(", "OutputStream", "output", ",", "long", "value", ")", "throws", "IOException", "{", "output", ".", "write", "(", "(", "byte", ")", "(", "(", "value", ">", ">", "0", ")", "&", "<NUM_LIT>", ")", ")", ";", "output", ".", "write", "(", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:8>", ")", "&", "<NUM_LIT>", ")", ")", ";", "output", ".", "write", "(", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:16>", ")", "&", "<NUM_LIT>", ")", ")", ";", "output", ".", "write", "(", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:24>", ")", "&", "<NUM_LIT>", ")", ")", ";", "output", ".", "write", "(", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT:32>", ")", "&", "<NUM_LIT>", ")", ")", ";", "output", ".", "write", "(", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT>", ")", "&", "<NUM_LIT>", ")", ")", ";", "output", ".", "write", "(", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT>", ")", "&", "<NUM_LIT>", ")", ")", ";", "output", ".", "write", "(", "(", "byte", ")", "(", "(", "value", ">", ">", "<NUM_LIT>", ")", "&", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "long", "readSwappedLong", "(", "InputStream", "input", ")", "throws", "IOException", "{", "byte", "[", "]", "bytes", "=", "new", "byte", "[", "<NUM_LIT:8>", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:8>", ";", "i", "+", "+", ")", "{", "bytes", "[", "i", "]", "=", "(", "byte", ")", "read", "(", "input", ")", ";", "}", "return", "readSwappedLong", "(", "bytes", ",", "0", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeSwappedFloat", "(", "OutputStream", "output", ",", "float", "value", ")", "throws", "IOException", "{", "writeSwappedInteger", "(", "output", ",", "Float", ".", "floatToIntBits", "(", "value", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "float", "readSwappedFloat", "(", "InputStream", "input", ")", "throws", "IOException", "{", "return", "Float", ".", "intBitsToFloat", "(", "readSwappedInteger", "(", "input", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeSwappedDouble", "(", "OutputStream", "output", ",", "double", "value", ")", "throws", "IOException", "{", "writeSwappedLong", "(", "output", ",", "Double", ".", "doubleToLongBits", "(", "value", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "double", "readSwappedDouble", "(", "InputStream", "input", ")", "throws", "IOException", "{", "return", "Double", ".", "longBitsToDouble", "(", "readSwappedLong", "(", "input", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "int", "read", "(", "InputStream", "input", ")", "throws", "IOException", "{", "int", "value", "=", "input", ".", "read", "(", ")", ";", "if", "(", "-", "1", "=", "=", "value", ")", "{", "throw", "new", "EOFException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "value", ";", "}", "</s>"]
["<s>", "public", "void", "track", "(", "File", "file", ",", "Object", "marker", ")", "{", "track", "(", "file", ",", "marker", ",", "(", "FileDeleteStrategy", ")", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "track", "(", "File", "file", ",", "Object", "marker", ",", "FileDeleteStrategy", "deleteStrategy", ")", "{", "if", "(", "file", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "addTracker", "(", "file", ".", "getPath", "(", ")", ",", "marker", ",", "deleteStrategy", ")", ";", "}", "</s>"]
["<s>", "public", "void", "track", "(", "String", "path", ",", "Object", "marker", ")", "{", "track", "(", "path", ",", "marker", ",", "(", "FileDeleteStrategy", ")", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "track", "(", "String", "path", ",", "Object", "marker", ",", "FileDeleteStrategy", "deleteStrategy", ")", "{", "if", "(", "path", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "addTracker", "(", "path", ",", "marker", ",", "deleteStrategy", ")", ";", "}", "</s>"]
["<s>", "private", "synchronized", "void", "addTracker", "(", "String", "path", ",", "Object", "marker", ",", "FileDeleteStrategy", "deleteStrategy", ")", "{", "if", "(", "exitWhenFinished", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "reaper", "=", "=", "null", ")", "{", "reaper", "=", "new", "Reaper", "(", ")", ";", "reaper", ".", "start", "(", ")", ";", "}", "trackers", ".", "add", "(", "new", "Tracker", "(", "path", ",", "deleteStrategy", ",", "marker", ",", "q", ")", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getTrackCount", "(", ")", "{", "return", "trackers", ".", "size", "(", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "exitWhenFinished", "(", ")", "{", "exitWhenFinished", "=", "true", ";", "if", "(", "reaper", "!", "=", "null", ")", "{", "synchronized", "(", "reaper", ")", "{", "reaper", ".", "interrupt", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "Reaper", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "setPriority", "(", "Thread", ".", "MAX_PRIORITY", ")", ";", "setDaemon", "(", "true", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "while", "(", "exitWhenFinished", "=", "=", "false", "|", "|", "trackers", ".", "size", "(", ")", ">", "0", ")", "{", "Tracker", "tracker", "=", "null", ";", "try", "{", "tracker", "=", "(", "Tracker", ")", "q", ".", "remove", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "continue", ";", "}", "if", "(", "tracker", "!", "=", "null", ")", "{", "tracker", ".", "delete", "(", ")", ";", "tracker", ".", "clear", "(", ")", ";", "trackers", ".", "remove", "(", "tracker", ")", ";", "}", "}", "}", "</s>"]
["<s>", "Tracker", "(", "String", "path", ",", "FileDeleteStrategy", "deleteStrategy", ",", "Object", "marker", ",", "ReferenceQueue", "queue", ")", "{", "super", "(", "marker", ",", "queue", ")", ";", "this", ".", "path", "=", "path", ";", "this", ".", "deleteStrategy", "=", "(", "deleteStrategy", "=", "=", "null", "?", "FileDeleteStrategy", ".", "NORMAL", ":", "deleteStrategy", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "delete", "(", ")", "{", "return", "deleteStrategy", ".", "deleteQuietly", "(", "new", "File", "(", "path", ")", ")", ";", "}", "</s>"]
["<s>", "public", "HexDump", "(", ")", "{", "super", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "dump", "(", "byte", "[", "]", "data", ",", "long", "offset", ",", "OutputStream", "stream", ",", "int", "index", ")", "throws", "IOException", ",", "ArrayIndexOutOfBoundsException", ",", "IllegalArgumentException", "{", "if", "(", "(", "index", "<", "0", ")", "|", "|", "(", "index", ">", "=", "data", ".", "length", ")", ")", "{", "throw", "new", "ArrayIndexOutOfBoundsException", "(", "\"", "<STR_LIT>", "\"", "+", "index", "+", "\"", "<STR_LIT>", "\"", "+", "data", ".", "length", ")", ";", "}", "if", "(", "stream", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "long", "display_offset", "=", "offset", "+", "index", ";", "StringBuffer", "buffer", "=", "new", "StringBuffer", "(", "<NUM_LIT>", ")", ";", "for", "(", "int", "j", "=", "index", ";", "j", "<", "data", ".", "length", ";", "j", "+", "=", "<NUM_LIT:16>", ")", "{", "int", "chars_read", "=", "data", ".", "length", "-", "j", ";", "if", "(", "chars_read", ">", "<NUM_LIT:16>", ")", "{", "chars_read", "=", "<NUM_LIT:16>", ";", "}", "dump", "(", "buffer", ",", "display_offset", ")", ".", "append", "(", "<CHAR_LIT>", ")", ";", "for", "(", "int", "k", "=", "0", ";", "k", "<", "<NUM_LIT:16>", ";", "k", "+", "+", ")", "{", "if", "(", "k", "<", "chars_read", ")", "{", "dump", "(", "buffer", ",", "data", "[", "k", "+", "j", "]", ")", ";", "}", "else", "{", "buffer", ".", "append", "(", "\"", "\"", ")", ";", "}", "buffer", ".", "append", "(", "<CHAR_LIT>", ")", ";", "}", "for", "(", "int", "k", "=", "0", ";", "k", "<", "chars_read", ";", "k", "+", "+", ")", "{", "if", "(", "(", "data", "[", "k", "+", "j", "]", ">", "=", "<CHAR_LIT>", ")", "&", "&", "(", "data", "[", "k", "+", "j", "]", "<", "<NUM_LIT>", ")", ")", "{", "buffer", ".", "append", "(", "(", "char", ")", "data", "[", "k", "+", "j", "]", ")", ";", "}", "else", "{", "buffer", ".", "append", "(", "<CHAR_LIT:.>", ")", ";", "}", "}", "buffer", ".", "append", "(", "EOL", ")", ";", "stream", ".", "write", "(", "buffer", ".", "toString", "(", ")", ".", "getBytes", "(", ")", ")", ";", "stream", ".", "flush", "(", ")", ";", "buffer", ".", "setLength", "(", "0", ")", ";", "display_offset", "+", "=", "chars_read", ";", "}", "}", "</s>"]
["<s>", "private", "static", "StringBuffer", "dump", "(", "StringBuffer", "_lbuffer", ",", "long", "value", ")", "{", "for", "(", "int", "j", "=", "0", ";", "j", "<", "<NUM_LIT:8>", ";", "j", "+", "+", ")", "{", "_lbuffer", ".", "append", "(", "_hexcodes", "[", "(", "(", "int", ")", "(", "value", ">", ">", "_shifts", "[", "j", "]", ")", ")", "&", "<NUM_LIT:15>", "]", ")", ";", "}", "return", "_lbuffer", ";", "}", "</s>"]
["<s>", "private", "static", "StringBuffer", "dump", "(", "StringBuffer", "_cbuffer", ",", "byte", "value", ")", "{", "for", "(", "int", "j", "=", "0", ";", "j", "<", "<NUM_LIT:2>", ";", "j", "+", "+", ")", "{", "_cbuffer", ".", "append", "(", "_hexcodes", "[", "(", "value", ">", ">", "_shifts", "[", "j", "+", "<NUM_LIT:6>", "]", ")", "&", "<NUM_LIT:15>", "]", ")", ";", "}", "return", "_cbuffer", ";", "}", "</s>"]
["<s>", "public", "static", "void", "track", "(", "File", "file", ",", "Object", "marker", ")", "{", "theInstance", ".", "track", "(", "file", ",", "marker", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "track", "(", "File", "file", ",", "Object", "marker", ",", "FileDeleteStrategy", "deleteStrategy", ")", "{", "theInstance", ".", "track", "(", "file", ",", "marker", ",", "deleteStrategy", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "track", "(", "String", "path", ",", "Object", "marker", ")", "{", "theInstance", ".", "track", "(", "path", ",", "marker", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "track", "(", "String", "path", ",", "Object", "marker", ",", "FileDeleteStrategy", "deleteStrategy", ")", "{", "theInstance", ".", "track", "(", "path", ",", "marker", ",", "deleteStrategy", ")", ";", "}", "</s>"]
["<s>", "public", "static", "int", "getTrackCount", "(", ")", "{", "return", "theInstance", ".", "getTrackCount", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "synchronized", "void", "exitWhenFinished", "(", ")", "{", "theInstance", ".", "exitWhenFinished", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "FileCleaningTracker", "getInstance", "(", ")", "{", "return", "theInstance", ";", "}", "</s>"]
["<s>", "public", "FilenameUtils", "(", ")", "{", "super", "(", ")", ";", "}", "</s>"]
["<s>", "static", "boolean", "isSystemWindows", "(", ")", "{", "return", "SYSTEM_SEPARATOR", "=", "=", "WINDOWS_SEPARATOR", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "isSeparator", "(", "char", "ch", ")", "{", "return", "(", "ch", "=", "=", "UNIX_SEPARATOR", ")", "|", "|", "(", "ch", "=", "=", "WINDOWS_SEPARATOR", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "normalize", "(", "String", "filename", ")", "{", "return", "doNormalize", "(", "filename", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "normalizeNoEndSeparator", "(", "String", "filename", ")", "{", "return", "doNormalize", "(", "filename", ",", "false", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "doNormalize", "(", "String", "filename", ",", "boolean", "keepSeparator", ")", "{", "if", "(", "filename", "=", "=", "null", ")", "{", "return", "null", ";", "}", "int", "size", "=", "filename", ".", "length", "(", ")", ";", "if", "(", "size", "=", "=", "0", ")", "{", "return", "filename", ";", "}", "int", "prefix", "=", "getPrefixLength", "(", "filename", ")", ";", "if", "(", "prefix", "<", "0", ")", "{", "return", "null", ";", "}", "char", "[", "]", "array", "=", "new", "char", "[", "size", "+", "<NUM_LIT:2>", "]", ";", "filename", ".", "getChars", "(", "0", ",", "filename", ".", "length", "(", ")", ",", "array", ",", "0", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "array", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "array", "[", "i", "]", "=", "=", "OTHER_SEPARATOR", ")", "{", "array", "[", "i", "]", "=", "SYSTEM_SEPARATOR", ";", "}", "}", "boolean", "lastIsDirectory", "=", "true", ";", "if", "(", "array", "[", "size", "-", "1", "]", "!", "=", "SYSTEM_SEPARATOR", ")", "{", "array", "[", "size", "+", "+", "]", "=", "SYSTEM_SEPARATOR", ";", "lastIsDirectory", "=", "false", ";", "}", "for", "(", "int", "i", "=", "prefix", "+", "1", ";", "i", "<", "size", ";", "i", "+", "+", ")", "{", "if", "(", "array", "[", "i", "]", "=", "=", "SYSTEM_SEPARATOR", "&", "&", "array", "[", "i", "-", "1", "]", "=", "=", "SYSTEM_SEPARATOR", ")", "{", "System", ".", "arraycopy", "(", "array", ",", "i", ",", "array", ",", "i", "-", "1", ",", "size", "-", "i", ")", ";", "size", "-", "-", ";", "i", "-", "-", ";", "}", "}", "for", "(", "int", "i", "=", "prefix", "+", "1", ";", "i", "<", "size", ";", "i", "+", "+", ")", "{", "if", "(", "array", "[", "i", "]", "=", "=", "SYSTEM_SEPARATOR", "&", "&", "array", "[", "i", "-", "1", "]", "=", "=", "<CHAR_LIT:.>", "&", "&", "(", "i", "=", "=", "prefix", "+", "1", "|", "|", "array", "[", "i", "-", "<NUM_LIT:2>", "]", "=", "=", "SYSTEM_SEPARATOR", ")", ")", "{", "if", "(", "i", "=", "=", "size", "-", "1", ")", "{", "lastIsDirectory", "=", "true", ";", "}", "System", ".", "arraycopy", "(", "array", ",", "i", "+", "1", ",", "array", ",", "i", "-", "1", ",", "size", "-", "i", ")", ";", "size", "-", "=", "<NUM_LIT:2>", ";", "i", "-", "-", ";", "}", "}", "outer", ":", "for", "(", "int", "i", "=", "prefix", "+", "<NUM_LIT:2>", ";", "i", "<", "size", ";", "i", "+", "+", ")", "{", "if", "(", "array", "[", "i", "]", "=", "=", "SYSTEM_SEPARATOR", "&", "&", "array", "[", "i", "-", "1", "]", "=", "=", "<CHAR_LIT:.>", "&", "&", "array", "[", "i", "-", "<NUM_LIT:2>", "]", "=", "=", "<CHAR_LIT:.>", "&", "&", "(", "i", "=", "=", "prefix", "+", "<NUM_LIT:2>", "|", "|", "array", "[", "i", "-", "<NUM_LIT:3>", "]", "=", "=", "SYSTEM_SEPARATOR", ")", ")", "{", "if", "(", "i", "=", "=", "prefix", "+", "<NUM_LIT:2>", ")", "{", "return", "null", ";", "}", "if", "(", "i", "=", "=", "size", "-", "1", ")", "{", "lastIsDirectory", "=", "true", ";", "}", "int", "j", ";", "for", "(", "j", "=", "i", "-", "<NUM_LIT:4>", ";", "j", ">", "=", "prefix", ";", "j", "-", "-", ")", "{", "if", "(", "array", "[", "j", "]", "=", "=", "SYSTEM_SEPARATOR", ")", "{", "System", ".", "arraycopy", "(", "array", ",", "i", "+", "1", ",", "array", ",", "j", "+", "1", ",", "size", "-", "i", ")", ";", "size", "-", "=", "(", "i", "-", "j", ")", ";", "i", "=", "j", "+", "1", ";", "continue", "outer", ";", "}", "}", "System", ".", "arraycopy", "(", "array", ",", "i", "+", "1", ",", "array", ",", "prefix", ",", "size", "-", "i", ")", ";", "size", "-", "=", "(", "i", "+", "1", "-", "prefix", ")", ";", "i", "=", "prefix", "+", "1", ";", "}", "}", "if", "(", "size", "<", "=", "0", ")", "{", "return", "\"", "\"", ";", "}", "if", "(", "size", "<", "=", "prefix", ")", "{", "return", "new", "String", "(", "array", ",", "0", ",", "size", ")", ";", "}", "if", "(", "lastIsDirectory", "&", "&", "keepSeparator", ")", "{", "return", "new", "String", "(", "array", ",", "0", ",", "size", ")", ";", "}", "return", "new", "String", "(", "array", ",", "0", ",", "size", "-", "1", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "concat", "(", "String", "basePath", ",", "String", "fullFilenameToAdd", ")", "{", "int", "prefix", "=", "getPrefixLength", "(", "fullFilenameToAdd", ")", ";", "if", "(", "prefix", "<", "0", ")", "{", "return", "null", ";", "}", "if", "(", "prefix", ">", "0", ")", "{", "return", "normalize", "(", "fullFilenameToAdd", ")", ";", "}", "if", "(", "basePath", "=", "=", "null", ")", "{", "return", "null", ";", "}", "int", "len", "=", "basePath", ".", "length", "(", ")", ";", "if", "(", "len", "=", "=", "0", ")", "{", "return", "normalize", "(", "fullFilenameToAdd", ")", ";", "}", "char", "ch", "=", "basePath", ".", "charAt", "(", "len", "-", "1", ")", ";", "if", "(", "isSeparator", "(", "ch", ")", ")", "{", "return", "normalize", "(", "basePath", "+", "fullFilenameToAdd", ")", ";", "}", "else", "{", "return", "normalize", "(", "basePath", "+", "<CHAR_LIT:/>", "+", "fullFilenameToAdd", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "separatorsToUnix", "(", "String", "path", ")", "{", "if", "(", "path", "=", "=", "null", "|", "|", "path", ".", "indexOf", "(", "WINDOWS_SEPARATOR", ")", "=", "=", "-", "1", ")", "{", "return", "path", ";", "}", "return", "path", ".", "replace", "(", "WINDOWS_SEPARATOR", ",", "UNIX_SEPARATOR", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "separatorsToWindows", "(", "String", "path", ")", "{", "if", "(", "path", "=", "=", "null", "|", "|", "path", ".", "indexOf", "(", "UNIX_SEPARATOR", ")", "=", "=", "-", "1", ")", "{", "return", "path", ";", "}", "return", "path", ".", "replace", "(", "UNIX_SEPARATOR", ",", "WINDOWS_SEPARATOR", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "separatorsToSystem", "(", "String", "path", ")", "{", "if", "(", "path", "=", "=", "null", ")", "{", "return", "null", ";", "}", "if", "(", "isSystemWindows", "(", ")", ")", "{", "return", "separatorsToWindows", "(", "path", ")", ";", "}", "else", "{", "return", "separatorsToUnix", "(", "path", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "int", "getPrefixLength", "(", "String", "filename", ")", "{", "if", "(", "filename", "=", "=", "null", ")", "{", "return", "-", "1", ";", "}", "int", "len", "=", "filename", ".", "length", "(", ")", ";", "if", "(", "len", "=", "=", "0", ")", "{", "return", "0", ";", "}", "char", "ch0", "=", "filename", ".", "charAt", "(", "0", ")", ";", "if", "(", "ch0", "=", "=", "<CHAR_LIT::>", ")", "{", "return", "-", "1", ";", "}", "if", "(", "len", "=", "=", "1", ")", "{", "if", "(", "ch0", "=", "=", "<CHAR_LIT>", ")", "{", "return", "<NUM_LIT:2>", ";", "}", "return", "(", "isSeparator", "(", "ch0", ")", "?", "1", ":", "0", ")", ";", "}", "else", "{", "if", "(", "ch0", "=", "=", "<CHAR_LIT>", ")", "{", "int", "posUnix", "=", "filename", ".", "indexOf", "(", "UNIX_SEPARATOR", ",", "1", ")", ";", "int", "posWin", "=", "filename", ".", "indexOf", "(", "WINDOWS_SEPARATOR", ",", "1", ")", ";", "if", "(", "posUnix", "=", "=", "-", "1", "&", "&", "posWin", "=", "=", "-", "1", ")", "{", "return", "len", "+", "1", ";", "}", "posUnix", "=", "(", "posUnix", "=", "=", "-", "1", "?", "posWin", ":", "posUnix", ")", ";", "posWin", "=", "(", "posWin", "=", "=", "-", "1", "?", "posUnix", ":", "posWin", ")", ";", "return", "Math", ".", "min", "(", "posUnix", ",", "posWin", ")", "+", "1", ";", "}", "char", "ch1", "=", "filename", ".", "charAt", "(", "1", ")", ";", "if", "(", "ch1", "=", "=", "<CHAR_LIT::>", ")", "{", "ch0", "=", "Character", ".", "toUpperCase", "(", "ch0", ")", ";", "if", "(", "ch0", ">", "=", "<CHAR_LIT:A>", "&", "&", "ch0", "<", "=", "<CHAR_LIT:Z>", ")", "{", "if", "(", "len", "=", "=", "<NUM_LIT:2>", "|", "|", "isSeparator", "(", "filename", ".", "charAt", "(", "<NUM_LIT:2>", ")", ")", "=", "=", "false", ")", "{", "return", "<NUM_LIT:2>", ";", "}", "return", "<NUM_LIT:3>", ";", "}", "return", "-", "1", ";", "}", "else", "if", "(", "isSeparator", "(", "ch0", ")", "&", "&", "isSeparator", "(", "ch1", ")", ")", "{", "int", "posUnix", "=", "filename", ".", "indexOf", "(", "UNIX_SEPARATOR", ",", "<NUM_LIT:2>", ")", ";", "int", "posWin", "=", "filename", ".", "indexOf", "(", "WINDOWS_SEPARATOR", ",", "<NUM_LIT:2>", ")", ";", "if", "(", "(", "posUnix", "=", "=", "-", "1", "&", "&", "posWin", "=", "=", "-", "1", ")", "|", "|", "posUnix", "=", "=", "<NUM_LIT:2>", "|", "|", "posWin", "=", "=", "<NUM_LIT:2>", ")", "{", "return", "-", "1", ";", "}", "posUnix", "=", "(", "posUnix", "=", "=", "-", "1", "?", "posWin", ":", "posUnix", ")", ";", "posWin", "=", "(", "posWin", "=", "=", "-", "1", "?", "posUnix", ":", "posWin", ")", ";", "return", "Math", ".", "min", "(", "posUnix", ",", "posWin", ")", "+", "1", ";", "}", "else", "{", "return", "(", "isSeparator", "(", "ch0", ")", "?", "1", ":", "0", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "int", "indexOfLastSeparator", "(", "String", "filename", ")", "{", "if", "(", "filename", "=", "=", "null", ")", "{", "return", "-", "1", ";", "}", "int", "lastUnixPos", "=", "filename", ".", "lastIndexOf", "(", "UNIX_SEPARATOR", ")", ";", "int", "lastWindowsPos", "=", "filename", ".", "lastIndexOf", "(", "WINDOWS_SEPARATOR", ")", ";", "return", "Math", ".", "max", "(", "lastUnixPos", ",", "lastWindowsPos", ")", ";", "}", "</s>"]
["<s>", "public", "static", "int", "indexOfExtension", "(", "String", "filename", ")", "{", "if", "(", "filename", "=", "=", "null", ")", "{", "return", "-", "1", ";", "}", "int", "extensionPos", "=", "filename", ".", "lastIndexOf", "(", "EXTENSION_SEPARATOR", ")", ";", "int", "lastSeparator", "=", "indexOfLastSeparator", "(", "filename", ")", ";", "return", "(", "lastSeparator", ">", "extensionPos", "?", "-", "1", ":", "extensionPos", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "getPrefix", "(", "String", "filename", ")", "{", "if", "(", "filename", "=", "=", "null", ")", "{", "return", "null", ";", "}", "int", "len", "=", "getPrefixLength", "(", "filename", ")", ";", "if", "(", "len", "<", "0", ")", "{", "return", "null", ";", "}", "if", "(", "len", ">", "filename", ".", "length", "(", ")", ")", "{", "return", "filename", "+", "UNIX_SEPARATOR", ";", "}", "return", "filename", ".", "substring", "(", "0", ",", "len", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "getPath", "(", "String", "filename", ")", "{", "return", "doGetPath", "(", "filename", ",", "1", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "getPathNoEndSeparator", "(", "String", "filename", ")", "{", "return", "doGetPath", "(", "filename", ",", "0", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "doGetPath", "(", "String", "filename", ",", "int", "separatorAdd", ")", "{", "if", "(", "filename", "=", "=", "null", ")", "{", "return", "null", ";", "}", "int", "prefix", "=", "getPrefixLength", "(", "filename", ")", ";", "if", "(", "prefix", "<", "0", ")", "{", "return", "null", ";", "}", "int", "index", "=", "indexOfLastSeparator", "(", "filename", ")", ";", "if", "(", "prefix", ">", "=", "filename", ".", "length", "(", ")", "|", "|", "index", "<", "0", ")", "{", "return", "\"", "\"", ";", "}", "return", "filename", ".", "substring", "(", "prefix", ",", "index", "+", "separatorAdd", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "getFullPath", "(", "String", "filename", ")", "{", "return", "doGetFullPath", "(", "filename", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "getFullPathNoEndSeparator", "(", "String", "filename", ")", "{", "return", "doGetFullPath", "(", "filename", ",", "false", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "doGetFullPath", "(", "String", "filename", ",", "boolean", "includeSeparator", ")", "{", "if", "(", "filename", "=", "=", "null", ")", "{", "return", "null", ";", "}", "int", "prefix", "=", "getPrefixLength", "(", "filename", ")", ";", "if", "(", "prefix", "<", "0", ")", "{", "return", "null", ";", "}", "if", "(", "prefix", ">", "=", "filename", ".", "length", "(", ")", ")", "{", "if", "(", "includeSeparator", ")", "{", "return", "getPrefix", "(", "filename", ")", ";", "}", "else", "{", "return", "filename", ";", "}", "}", "int", "index", "=", "indexOfLastSeparator", "(", "filename", ")", ";", "if", "(", "index", "<", "0", ")", "{", "return", "filename", ".", "substring", "(", "0", ",", "prefix", ")", ";", "}", "int", "end", "=", "index", "+", "(", "includeSeparator", "?", "1", ":", "0", ")", ";", "return", "filename", ".", "substring", "(", "0", ",", "end", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "getName", "(", "String", "filename", ")", "{", "if", "(", "filename", "=", "=", "null", ")", "{", "return", "null", ";", "}", "int", "index", "=", "indexOfLastSeparator", "(", "filename", ")", ";", "return", "filename", ".", "substring", "(", "index", "+", "1", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "getBaseName", "(", "String", "filename", ")", "{", "return", "removeExtension", "(", "getName", "(", "filename", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "getExtension", "(", "String", "filename", ")", "{", "if", "(", "filename", "=", "=", "null", ")", "{", "return", "null", ";", "}", "int", "index", "=", "indexOfExtension", "(", "filename", ")", ";", "if", "(", "index", "=", "=", "-", "1", ")", "{", "return", "\"", "\"", ";", "}", "else", "{", "return", "filename", ".", "substring", "(", "index", "+", "1", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "removeExtension", "(", "String", "filename", ")", "{", "if", "(", "filename", "=", "=", "null", ")", "{", "return", "null", ";", "}", "int", "index", "=", "indexOfExtension", "(", "filename", ")", ";", "if", "(", "index", "=", "=", "-", "1", ")", "{", "return", "filename", ";", "}", "else", "{", "return", "filename", ".", "substring", "(", "0", ",", "index", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "boolean", "equals", "(", "String", "filename1", ",", "String", "filename2", ")", "{", "return", "equals", "(", "filename1", ",", "filename2", ",", "false", ",", "IOCase", ".", "SENSITIVE", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "equalsOnSystem", "(", "String", "filename1", ",", "String", "filename2", ")", "{", "return", "equals", "(", "filename1", ",", "filename2", ",", "false", ",", "IOCase", ".", "SYSTEM", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "equalsNormalized", "(", "String", "filename1", ",", "String", "filename2", ")", "{", "return", "equals", "(", "filename1", ",", "filename2", ",", "true", ",", "IOCase", ".", "SENSITIVE", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "equalsNormalizedOnSystem", "(", "String", "filename1", ",", "String", "filename2", ")", "{", "return", "equals", "(", "filename1", ",", "filename2", ",", "true", ",", "IOCase", ".", "SYSTEM", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "equals", "(", "String", "filename1", ",", "String", "filename2", ",", "boolean", "normalized", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "filename1", "=", "=", "null", "|", "|", "filename2", "=", "=", "null", ")", "{", "return", "filename1", "=", "=", "filename2", ";", "}", "if", "(", "normalized", ")", "{", "filename1", "=", "normalize", "(", "filename1", ")", ";", "filename2", "=", "normalize", "(", "filename2", ")", ";", "if", "(", "filename1", "=", "=", "null", "|", "|", "filename2", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "if", "(", "caseSensitivity", "=", "=", "null", ")", "{", "caseSensitivity", "=", "IOCase", ".", "SENSITIVE", ";", "}", "return", "caseSensitivity", ".", "checkEquals", "(", "filename1", ",", "filename2", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isExtension", "(", "String", "filename", ",", "String", "extension", ")", "{", "if", "(", "filename", "=", "=", "null", ")", "{", "return", "false", ";", "}", "if", "(", "extension", "=", "=", "null", "|", "|", "extension", ".", "length", "(", ")", "=", "=", "0", ")", "{", "return", "(", "indexOfExtension", "(", "filename", ")", "=", "=", "-", "1", ")", ";", "}", "String", "fileExt", "=", "getExtension", "(", "filename", ")", ";", "return", "fileExt", ".", "equals", "(", "extension", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isExtension", "(", "String", "filename", ",", "String", "[", "]", "extensions", ")", "{", "if", "(", "filename", "=", "=", "null", ")", "{", "return", "false", ";", "}", "if", "(", "extensions", "=", "=", "null", "|", "|", "extensions", ".", "length", "=", "=", "0", ")", "{", "return", "(", "indexOfExtension", "(", "filename", ")", "=", "=", "-", "1", ")", ";", "}", "String", "fileExt", "=", "getExtension", "(", "filename", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "extensions", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "fileExt", ".", "equals", "(", "extensions", "[", "i", "]", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isExtension", "(", "String", "filename", ",", "Collection", "extensions", ")", "{", "if", "(", "filename", "=", "=", "null", ")", "{", "return", "false", ";", "}", "if", "(", "extensions", "=", "=", "null", "|", "|", "extensions", ".", "isEmpty", "(", ")", ")", "{", "return", "(", "indexOfExtension", "(", "filename", ")", "=", "=", "-", "1", ")", ";", "}", "String", "fileExt", "=", "getExtension", "(", "filename", ")", ";", "for", "(", "Iterator", "it", "=", "extensions", ".", "iterator", "(", ")", ";", "it", ".", "hasNext", "(", ")", ";", ")", "{", "if", "(", "fileExt", ".", "equals", "(", "it", ".", "next", "(", ")", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "wildcardMatch", "(", "String", "filename", ",", "String", "wildcardMatcher", ")", "{", "return", "wildcardMatch", "(", "filename", ",", "wildcardMatcher", ",", "IOCase", ".", "SENSITIVE", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "wildcardMatchOnSystem", "(", "String", "filename", ",", "String", "wildcardMatcher", ")", "{", "return", "wildcardMatch", "(", "filename", ",", "wildcardMatcher", ",", "IOCase", ".", "SYSTEM", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "wildcardMatch", "(", "String", "filename", ",", "String", "wildcardMatcher", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "filename", "=", "=", "null", "&", "&", "wildcardMatcher", "=", "=", "null", ")", "{", "return", "true", ";", "}", "if", "(", "filename", "=", "=", "null", "|", "|", "wildcardMatcher", "=", "=", "null", ")", "{", "return", "false", ";", "}", "if", "(", "caseSensitivity", "=", "=", "null", ")", "{", "caseSensitivity", "=", "IOCase", ".", "SENSITIVE", ";", "}", "filename", "=", "caseSensitivity", ".", "convertCase", "(", "filename", ")", ";", "wildcardMatcher", "=", "caseSensitivity", ".", "convertCase", "(", "wildcardMatcher", ")", ";", "String", "[", "]", "wcs", "=", "splitOnTokens", "(", "wildcardMatcher", ")", ";", "boolean", "anyChars", "=", "false", ";", "int", "textIdx", "=", "0", ";", "int", "wcsIdx", "=", "0", ";", "Stack", "backtrack", "=", "new", "Stack", "(", ")", ";", "do", "{", "if", "(", "backtrack", ".", "size", "(", ")", ">", "0", ")", "{", "int", "[", "]", "array", "=", "(", "int", "[", "]", ")", "backtrack", ".", "pop", "(", ")", ";", "wcsIdx", "=", "array", "[", "0", "]", ";", "textIdx", "=", "array", "[", "1", "]", ";", "anyChars", "=", "true", ";", "}", "while", "(", "wcsIdx", "<", "wcs", ".", "length", ")", "{", "if", "(", "wcs", "[", "wcsIdx", "]", ".", "equals", "(", "\"", "<STR_LIT:?>", "\"", ")", ")", "{", "textIdx", "+", "+", ";", "anyChars", "=", "false", ";", "}", "else", "if", "(", "wcs", "[", "wcsIdx", "]", ".", "equals", "(", "\"", "<STR_LIT:*>", "\"", ")", ")", "{", "anyChars", "=", "true", ";", "if", "(", "wcsIdx", "=", "=", "wcs", ".", "length", "-", "1", ")", "{", "textIdx", "=", "filename", ".", "length", "(", ")", ";", "}", "}", "else", "{", "if", "(", "anyChars", ")", "{", "textIdx", "=", "filename", ".", "indexOf", "(", "wcs", "[", "wcsIdx", "]", ",", "textIdx", ")", ";", "if", "(", "textIdx", "=", "=", "-", "1", ")", "{", "break", ";", "}", "int", "repeat", "=", "filename", ".", "indexOf", "(", "wcs", "[", "wcsIdx", "]", ",", "textIdx", "+", "1", ")", ";", "if", "(", "repeat", ">", "=", "0", ")", "{", "backtrack", ".", "push", "(", "new", "int", "[", "]", "{", "wcsIdx", ",", "repeat", "}", ")", ";", "}", "}", "else", "{", "if", "(", "!", "filename", ".", "startsWith", "(", "wcs", "[", "wcsIdx", "]", ",", "textIdx", ")", ")", "{", "break", ";", "}", "}", "textIdx", "+", "=", "wcs", "[", "wcsIdx", "]", ".", "length", "(", ")", ";", "anyChars", "=", "false", ";", "}", "wcsIdx", "+", "+", ";", "}", "if", "(", "wcsIdx", "=", "=", "wcs", ".", "length", "&", "&", "textIdx", "=", "=", "filename", ".", "length", "(", ")", ")", "{", "return", "true", ";", "}", "}", "while", "(", "backtrack", ".", "size", "(", ")", ">", "0", ")", ";", "return", "false", ";", "}", "</s>"]
["<s>", "static", "String", "[", "]", "splitOnTokens", "(", "String", "text", ")", "{", "if", "(", "text", ".", "indexOf", "(", "\"", "<STR_LIT:?>", "\"", ")", "=", "=", "-", "1", "&", "&", "text", ".", "indexOf", "(", "\"", "<STR_LIT:*>", "\"", ")", "=", "=", "-", "1", ")", "{", "return", "new", "String", "[", "]", "{", "text", "}", ";", "}", "char", "[", "]", "array", "=", "text", ".", "toCharArray", "(", ")", ";", "ArrayList", "list", "=", "new", "ArrayList", "(", ")", ";", "StringBuffer", "buffer", "=", "new", "StringBuffer", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "array", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "array", "[", "i", "]", "=", "=", "<CHAR_LIT>", "|", "|", "array", "[", "i", "]", "=", "=", "<CHAR_LIT>", ")", "{", "if", "(", "buffer", ".", "length", "(", ")", "!", "=", "0", ")", "{", "list", ".", "add", "(", "buffer", ".", "toString", "(", ")", ")", ";", "buffer", ".", "setLength", "(", "0", ")", ";", "}", "if", "(", "array", "[", "i", "]", "=", "=", "<CHAR_LIT>", ")", "{", "list", ".", "add", "(", "\"", "<STR_LIT:?>", "\"", ")", ";", "}", "else", "if", "(", "list", ".", "size", "(", ")", "=", "=", "0", "|", "|", "(", "i", ">", "0", "&", "&", "list", ".", "get", "(", "list", ".", "size", "(", ")", "-", "1", ")", ".", "equals", "(", "\"", "<STR_LIT:*>", "\"", ")", "=", "=", "false", ")", ")", "{", "list", ".", "add", "(", "\"", "<STR_LIT:*>", "\"", ")", ";", "}", "}", "else", "{", "buffer", ".", "append", "(", "array", "[", "i", "]", ")", ";", "}", "}", "if", "(", "buffer", ".", "length", "(", ")", "!", "=", "0", ")", "{", "list", ".", "add", "(", "buffer", ".", "toString", "(", ")", ")", ";", "}", "return", "(", "String", "[", "]", ")", "list", ".", "toArray", "(", "new", "String", "[", "list", ".", "size", "(", ")", "]", ")", ";", "}", "</s>"]
["<s>", "public", "LineIterator", "(", "final", "Reader", "reader", ")", "throws", "IllegalArgumentException", "{", "if", "(", "reader", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "reader", "instanceof", "BufferedReader", ")", "{", "bufferedReader", "=", "(", "BufferedReader", ")", "reader", ";", "}", "else", "{", "bufferedReader", "=", "new", "BufferedReader", "(", "reader", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "hasNext", "(", ")", "{", "if", "(", "cachedLine", "!", "=", "null", ")", "{", "return", "true", ";", "}", "else", "if", "(", "finished", ")", "{", "return", "false", ";", "}", "else", "{", "try", "{", "while", "(", "true", ")", "{", "String", "line", "=", "bufferedReader", ".", "readLine", "(", ")", ";", "if", "(", "line", "=", "=", "null", ")", "{", "finished", "=", "true", ";", "return", "false", ";", "}", "else", "if", "(", "isValidLine", "(", "line", ")", ")", "{", "cachedLine", "=", "line", ";", "return", "true", ";", "}", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "close", "(", ")", ";", "throw", "new", "IllegalStateException", "(", "ioe", ".", "toString", "(", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "protected", "boolean", "isValidLine", "(", "String", "line", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "public", "Object", "next", "(", ")", "{", "return", "nextLine", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "nextLine", "(", ")", "{", "if", "(", "!", "hasNext", "(", ")", ")", "{", "throw", "new", "NoSuchElementException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "String", "currentLine", "=", "cachedLine", ";", "cachedLine", "=", "null", ";", "return", "currentLine", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "{", "finished", "=", "true", ";", "IOUtils", ".", "closeQuietly", "(", "bufferedReader", ")", ";", "cachedLine", "=", "null", ";", "}", "</s>"]
["<s>", "public", "void", "remove", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "closeQuietly", "(", "LineIterator", "iterator", ")", "{", "if", "(", "iterator", "!", "=", "null", ")", "{", "iterator", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "IOExceptionWithCause", "(", "String", "message", ",", "Throwable", "cause", ")", "{", "super", "(", "message", ")", ";", "this", ".", "initCause", "(", "cause", ")", ";", "}", "</s>"]
["<s>", "public", "IOExceptionWithCause", "(", "Throwable", "cause", ")", "{", "super", "(", "cause", "=", "=", "null", "?", "null", ":", "cause", ".", "toString", "(", ")", ")", ";", "this", ".", "initCause", "(", "cause", ")", ";", "}", "</s>"]
["<s>", "public", "PathFileComparator", "(", ")", "{", "this", ".", "caseSensitivity", "=", "IOCase", ".", "SENSITIVE", ";", "}", "</s>"]
["<s>", "public", "PathFileComparator", "(", "IOCase", "caseSensitivity", ")", "{", "this", ".", "caseSensitivity", "=", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ";", "}", "</s>"]
["<s>", "public", "int", "compare", "(", "Object", "obj1", ",", "Object", "obj2", ")", "{", "File", "file1", "=", "(", "File", ")", "obj1", ";", "File", "file2", "=", "(", "File", ")", "obj2", ";", "return", "caseSensitivity", ".", "checkCompareTo", "(", "file1", ".", "getPath", "(", ")", ",", "file2", ".", "getPath", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "int", "compare", "(", "Object", "obj1", ",", "Object", "obj2", ")", "{", "File", "file1", "=", "(", "File", ")", "obj1", ";", "File", "file2", "=", "(", "File", ")", "obj2", ";", "long", "result", "=", "file1", ".", "lastModified", "(", ")", "-", "file2", ".", "lastModified", "(", ")", ";", "if", "(", "result", "<", "0", ")", "{", "return", "-", "1", ";", "}", "else", "if", "(", "result", ">", "0", ")", "{", "return", "1", ";", "}", "else", "{", "return", "0", ";", "}", "}", "</s>"]
["<s>", "public", "ReverseComparator", "(", "Comparator", "delegate", ")", "{", "if", "(", "delegate", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "delegate", "=", "delegate", ";", "}", "</s>"]
["<s>", "public", "int", "compare", "(", "Object", "obj1", ",", "Object", "obj2", ")", "{", "return", "delegate", ".", "compare", "(", "obj2", ",", "obj1", ")", ";", "}", "</s>"]
["<s>", "public", "int", "compare", "(", "Object", "obj1", ",", "Object", "obj2", ")", "{", "File", "file1", "=", "(", "File", ")", "obj1", ";", "File", "file2", "=", "(", "File", ")", "obj2", ";", "return", "file1", ".", "compareTo", "(", "file2", ")", ";", "}", "</s>"]
["<s>", "public", "SizeFileComparator", "(", ")", "{", "this", ".", "sumDirectoryContents", "=", "false", ";", "}", "</s>"]
["<s>", "public", "SizeFileComparator", "(", "boolean", "sumDirectoryContents", ")", "{", "this", ".", "sumDirectoryContents", "=", "sumDirectoryContents", ";", "}", "</s>"]
["<s>", "public", "int", "compare", "(", "Object", "obj1", ",", "Object", "obj2", ")", "{", "File", "file1", "=", "(", "File", ")", "obj1", ";", "File", "file2", "=", "(", "File", ")", "obj2", ";", "long", "size1", "=", "0", ";", "if", "(", "file1", ".", "isDirectory", "(", ")", ")", "{", "size1", "=", "sumDirectoryContents", "&", "&", "file1", ".", "exists", "(", ")", "?", "FileUtils", ".", "sizeOfDirectory", "(", "file1", ")", ":", "0", ";", "}", "else", "{", "size1", "=", "file1", ".", "length", "(", ")", ";", "}", "long", "size2", "=", "0", ";", "if", "(", "file2", ".", "isDirectory", "(", ")", ")", "{", "size2", "=", "sumDirectoryContents", "&", "&", "file2", ".", "exists", "(", ")", "?", "FileUtils", ".", "sizeOfDirectory", "(", "file2", ")", ":", "0", ";", "}", "else", "{", "size2", "=", "file2", ".", "length", "(", ")", ";", "}", "long", "result", "=", "size1", "-", "size2", ";", "if", "(", "result", "<", "0", ")", "{", "return", "-", "1", ";", "}", "else", "if", "(", "result", ">", "0", ")", "{", "return", "1", ";", "}", "else", "{", "return", "0", ";", "}", "}", "</s>"]
["<s>", "public", "ExtensionFileComparator", "(", ")", "{", "this", ".", "caseSensitivity", "=", "IOCase", ".", "SENSITIVE", ";", "}", "</s>"]
["<s>", "public", "ExtensionFileComparator", "(", "IOCase", "caseSensitivity", ")", "{", "this", ".", "caseSensitivity", "=", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ";", "}", "</s>"]
["<s>", "public", "int", "compare", "(", "Object", "obj1", ",", "Object", "obj2", ")", "{", "File", "file1", "=", "(", "File", ")", "obj1", ";", "File", "file2", "=", "(", "File", ")", "obj2", ";", "String", "suffix1", "=", "FilenameUtils", ".", "getExtension", "(", "file1", ".", "getName", "(", ")", ")", ";", "String", "suffix2", "=", "FilenameUtils", ".", "getExtension", "(", "file2", ".", "getName", "(", ")", ")", ";", "return", "caseSensitivity", ".", "checkCompareTo", "(", "suffix1", ",", "suffix2", ")", ";", "}", "</s>"]
["<s>", "public", "NameFileComparator", "(", ")", "{", "this", ".", "caseSensitivity", "=", "IOCase", ".", "SENSITIVE", ";", "}", "</s>"]
["<s>", "public", "NameFileComparator", "(", "IOCase", "caseSensitivity", ")", "{", "this", ".", "caseSensitivity", "=", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ";", "}", "</s>"]
["<s>", "public", "int", "compare", "(", "Object", "obj1", ",", "Object", "obj2", ")", "{", "File", "file1", "=", "(", "File", ")", "obj1", ";", "File", "file2", "=", "(", "File", ")", "obj2", ";", "return", "caseSensitivity", ".", "checkCompareTo", "(", "file1", ".", "getName", "(", ")", ",", "file2", ".", "getName", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "WildcardFilter", "(", "String", "wildcard", ")", "{", "if", "(", "wildcard", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "wildcards", "=", "new", "String", "[", "]", "{", "wildcard", "}", ";", "}", "</s>"]
["<s>", "public", "WildcardFilter", "(", "String", "[", "]", "wildcards", ")", "{", "if", "(", "wildcards", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "wildcards", "=", "wildcards", ";", "}", "</s>"]
["<s>", "public", "WildcardFilter", "(", "List", "wildcards", ")", "{", "if", "(", "wildcards", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "wildcards", "=", "(", "String", "[", "]", ")", "wildcards", ".", "toArray", "(", "new", "String", "[", "wildcards", ".", "size", "(", ")", "]", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "dir", ",", "String", "name", ")", "{", "if", "(", "dir", "!", "=", "null", "&", "&", "new", "File", "(", "dir", ",", "name", ")", ".", "isDirectory", "(", ")", ")", "{", "return", "false", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "wildcards", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "FilenameUtils", ".", "wildcardMatch", "(", "name", ",", "wildcards", "[", "i", "]", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "if", "(", "file", ".", "isDirectory", "(", ")", ")", "{", "return", "false", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "wildcards", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "FilenameUtils", ".", "wildcardMatch", "(", "file", ".", "getName", "(", ")", ",", "wildcards", "[", "i", "]", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "OrFileFilter", "(", ")", "{", "this", ".", "fileFilters", "=", "new", "ArrayList", "(", ")", ";", "}", "</s>"]
["<s>", "public", "OrFileFilter", "(", "final", "List", "fileFilters", ")", "{", "if", "(", "fileFilters", "=", "=", "null", ")", "{", "this", ".", "fileFilters", "=", "new", "ArrayList", "(", ")", ";", "}", "else", "{", "this", ".", "fileFilters", "=", "new", "ArrayList", "(", "fileFilters", ")", ";", "}", "}", "</s>"]
["<s>", "public", "OrFileFilter", "(", "IOFileFilter", "filter1", ",", "IOFileFilter", "filter2", ")", "{", "if", "(", "filter1", "=", "=", "null", "|", "|", "filter2", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "fileFilters", "=", "new", "ArrayList", "(", ")", ";", "addFileFilter", "(", "filter1", ")", ";", "addFileFilter", "(", "filter2", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addFileFilter", "(", "final", "IOFileFilter", "ioFileFilter", ")", "{", "this", ".", "fileFilters", ".", "add", "(", "ioFileFilter", ")", ";", "}", "</s>"]
["<s>", "public", "List", "getFileFilters", "(", ")", "{", "return", "Collections", ".", "unmodifiableList", "(", "this", ".", "fileFilters", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "removeFileFilter", "(", "IOFileFilter", "ioFileFilter", ")", "{", "return", "this", ".", "fileFilters", ".", "remove", "(", "ioFileFilter", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setFileFilters", "(", "final", "List", "fileFilters", ")", "{", "this", ".", "fileFilters", "=", "fileFilters", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "final", "File", "file", ")", "{", "for", "(", "Iterator", "iter", "=", "this", ".", "fileFilters", ".", "iterator", "(", ")", ";", "iter", ".", "hasNext", "(", ")", ";", ")", "{", "IOFileFilter", "fileFilter", "=", "(", "IOFileFilter", ")", "iter", ".", "next", "(", ")", ";", "if", "(", "fileFilter", ".", "accept", "(", "file", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "final", "File", "file", ",", "final", "String", "name", ")", "{", "for", "(", "Iterator", "iter", "=", "this", ".", "fileFilters", ".", "iterator", "(", ")", ";", "iter", ".", "hasNext", "(", ")", ";", ")", "{", "IOFileFilter", "fileFilter", "=", "(", "IOFileFilter", ")", "iter", ".", "next", "(", ")", ";", "if", "(", "fileFilter", ".", "accept", "(", "file", ",", "name", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "StringBuffer", "buffer", "=", "new", "StringBuffer", "(", ")", ";", "buffer", ".", "append", "(", "super", ".", "toString", "(", ")", ")", ";", "buffer", ".", "append", "(", "\"", "<STR_LIT:(>", "\"", ")", ";", "if", "(", "fileFilters", "!", "=", "null", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "fileFilters", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "if", "(", "i", ">", "0", ")", "{", "buffer", ".", "append", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "}", "Object", "filter", "=", "fileFilters", ".", "get", "(", "i", ")", ";", "buffer", ".", "append", "(", "filter", "=", "=", "null", "?", "\"", "<STR_LIT>", "\"", ":", "filter", ".", "toString", "(", ")", ")", ";", "}", "}", "buffer", ".", "append", "(", "\"", "<STR_LIT:)>", "\"", ")", ";", "return", "buffer", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "FileFilterUtils", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "prefixFileFilter", "(", "String", "prefix", ")", "{", "return", "new", "PrefixFileFilter", "(", "prefix", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "suffixFileFilter", "(", "String", "suffix", ")", "{", "return", "new", "SuffixFileFilter", "(", "suffix", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "nameFileFilter", "(", "String", "name", ")", "{", "return", "new", "NameFileFilter", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "directoryFileFilter", "(", ")", "{", "return", "DirectoryFileFilter", ".", "DIRECTORY", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "fileFileFilter", "(", ")", "{", "return", "FileFileFilter", ".", "FILE", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "andFileFilter", "(", "IOFileFilter", "filter1", ",", "IOFileFilter", "filter2", ")", "{", "return", "new", "AndFileFilter", "(", "filter1", ",", "filter2", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "orFileFilter", "(", "IOFileFilter", "filter1", ",", "IOFileFilter", "filter2", ")", "{", "return", "new", "OrFileFilter", "(", "filter1", ",", "filter2", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "notFileFilter", "(", "IOFileFilter", "filter", ")", "{", "return", "new", "NotFileFilter", "(", "filter", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "trueFileFilter", "(", ")", "{", "return", "TrueFileFilter", ".", "TRUE", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "falseFileFilter", "(", ")", "{", "return", "FalseFileFilter", ".", "FALSE", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "asFileFilter", "(", "FileFilter", "filter", ")", "{", "return", "new", "DelegateFileFilter", "(", "filter", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "asFileFilter", "(", "FilenameFilter", "filter", ")", "{", "return", "new", "DelegateFileFilter", "(", "filter", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "ageFileFilter", "(", "long", "cutoff", ")", "{", "return", "new", "AgeFileFilter", "(", "cutoff", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "ageFileFilter", "(", "long", "cutoff", ",", "boolean", "acceptOlder", ")", "{", "return", "new", "AgeFileFilter", "(", "cutoff", ",", "acceptOlder", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "ageFileFilter", "(", "Date", "cutoffDate", ")", "{", "return", "new", "AgeFileFilter", "(", "cutoffDate", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "ageFileFilter", "(", "Date", "cutoffDate", ",", "boolean", "acceptOlder", ")", "{", "return", "new", "AgeFileFilter", "(", "cutoffDate", ",", "acceptOlder", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "ageFileFilter", "(", "File", "cutoffReference", ")", "{", "return", "new", "AgeFileFilter", "(", "cutoffReference", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "ageFileFilter", "(", "File", "cutoffReference", ",", "boolean", "acceptOlder", ")", "{", "return", "new", "AgeFileFilter", "(", "cutoffReference", ",", "acceptOlder", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "sizeFileFilter", "(", "long", "threshold", ")", "{", "return", "new", "SizeFileFilter", "(", "threshold", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "sizeFileFilter", "(", "long", "threshold", ",", "boolean", "acceptLarger", ")", "{", "return", "new", "SizeFileFilter", "(", "threshold", ",", "acceptLarger", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "sizeRangeFileFilter", "(", "long", "minSizeInclusive", ",", "long", "maxSizeInclusive", ")", "{", "IOFileFilter", "minimumFilter", "=", "new", "SizeFileFilter", "(", "minSizeInclusive", ",", "true", ")", ";", "IOFileFilter", "maximumFilter", "=", "new", "SizeFileFilter", "(", "maxSizeInclusive", "+", "<NUM_LIT>", ",", "false", ")", ";", "return", "new", "AndFileFilter", "(", "minimumFilter", ",", "maximumFilter", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "makeCVSAware", "(", "IOFileFilter", "filter", ")", "{", "if", "(", "cvsFilter", "=", "=", "null", ")", "{", "cvsFilter", "=", "notFileFilter", "(", "andFileFilter", "(", "directoryFileFilter", "(", ")", ",", "nameFileFilter", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "if", "(", "filter", "=", "=", "null", ")", "{", "return", "cvsFilter", ";", "}", "else", "{", "return", "andFileFilter", "(", "filter", ",", "cvsFilter", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "makeSVNAware", "(", "IOFileFilter", "filter", ")", "{", "if", "(", "svnFilter", "=", "=", "null", ")", "{", "svnFilter", "=", "notFileFilter", "(", "andFileFilter", "(", "directoryFileFilter", "(", ")", ",", "nameFileFilter", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "if", "(", "filter", "=", "=", "null", ")", "{", "return", "svnFilter", ";", "}", "else", "{", "return", "andFileFilter", "(", "filter", ",", "svnFilter", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "makeDirectoryOnly", "(", "IOFileFilter", "filter", ")", "{", "if", "(", "filter", "=", "=", "null", ")", "{", "return", "DirectoryFileFilter", ".", "DIRECTORY", ";", "}", "return", "new", "AndFileFilter", "(", "DirectoryFileFilter", ".", "DIRECTORY", ",", "filter", ")", ";", "}", "</s>"]
["<s>", "public", "static", "IOFileFilter", "makeFileOnly", "(", "IOFileFilter", "filter", ")", "{", "if", "(", "filter", "=", "=", "null", ")", "{", "return", "FileFileFilter", ".", "FILE", ";", "}", "return", "new", "AndFileFilter", "(", "FileFileFilter", ".", "FILE", ",", "filter", ")", ";", "}", "</s>"]
["<s>", "public", "AgeFileFilter", "(", "long", "cutoff", ")", "{", "this", "(", "cutoff", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "AgeFileFilter", "(", "long", "cutoff", ",", "boolean", "acceptOlder", ")", "{", "this", ".", "acceptOlder", "=", "acceptOlder", ";", "this", ".", "cutoff", "=", "cutoff", ";", "}", "</s>"]
["<s>", "public", "AgeFileFilter", "(", "Date", "cutoffDate", ")", "{", "this", "(", "cutoffDate", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "AgeFileFilter", "(", "Date", "cutoffDate", ",", "boolean", "acceptOlder", ")", "{", "this", "(", "cutoffDate", ".", "getTime", "(", ")", ",", "acceptOlder", ")", ";", "}", "</s>"]
["<s>", "public", "AgeFileFilter", "(", "File", "cutoffReference", ")", "{", "this", "(", "cutoffReference", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "AgeFileFilter", "(", "File", "cutoffReference", ",", "boolean", "acceptOlder", ")", "{", "this", "(", "cutoffReference", ".", "lastModified", "(", ")", ",", "acceptOlder", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "boolean", "newer", "=", "FileUtils", ".", "isFileNewer", "(", "file", ",", "cutoff", ")", ";", "return", "acceptOlder", "?", "!", "newer", ":", "newer", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "String", "condition", "=", "acceptOlder", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT:>>", "\"", ";", "return", "super", ".", "toString", "(", ")", "+", "\"", "<STR_LIT:(>", "\"", "+", "condition", "+", "cutoff", "+", "\"", "<STR_LIT:)>", "\"", ";", "}", "</s>"]
["<s>", "protected", "EmptyFileFilter", "(", ")", "{", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "if", "(", "file", ".", "isDirectory", "(", ")", ")", "{", "File", "[", "]", "files", "=", "file", ".", "listFiles", "(", ")", ";", "return", "(", "files", "=", "=", "null", "|", "|", "files", ".", "length", "=", "=", "0", ")", ";", "}", "else", "{", "return", "(", "file", ".", "length", "(", ")", "=", "=", "0", ")", ";", "}", "}", "</s>"]
["<s>", "public", "AndFileFilter", "(", ")", "{", "this", ".", "fileFilters", "=", "new", "ArrayList", "(", ")", ";", "}", "</s>"]
["<s>", "public", "AndFileFilter", "(", "final", "List", "fileFilters", ")", "{", "if", "(", "fileFilters", "=", "=", "null", ")", "{", "this", ".", "fileFilters", "=", "new", "ArrayList", "(", ")", ";", "}", "else", "{", "this", ".", "fileFilters", "=", "new", "ArrayList", "(", "fileFilters", ")", ";", "}", "}", "</s>"]
["<s>", "public", "AndFileFilter", "(", "IOFileFilter", "filter1", ",", "IOFileFilter", "filter2", ")", "{", "if", "(", "filter1", "=", "=", "null", "|", "|", "filter2", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "fileFilters", "=", "new", "ArrayList", "(", ")", ";", "addFileFilter", "(", "filter1", ")", ";", "addFileFilter", "(", "filter2", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addFileFilter", "(", "final", "IOFileFilter", "ioFileFilter", ")", "{", "this", ".", "fileFilters", ".", "add", "(", "ioFileFilter", ")", ";", "}", "</s>"]
["<s>", "public", "List", "getFileFilters", "(", ")", "{", "return", "Collections", ".", "unmodifiableList", "(", "this", ".", "fileFilters", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "removeFileFilter", "(", "final", "IOFileFilter", "ioFileFilter", ")", "{", "return", "this", ".", "fileFilters", ".", "remove", "(", "ioFileFilter", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setFileFilters", "(", "final", "List", "fileFilters", ")", "{", "this", ".", "fileFilters", "=", "new", "ArrayList", "(", "fileFilters", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "final", "File", "file", ")", "{", "if", "(", "this", ".", "fileFilters", ".", "size", "(", ")", "=", "=", "0", ")", "{", "return", "false", ";", "}", "for", "(", "Iterator", "iter", "=", "this", ".", "fileFilters", ".", "iterator", "(", ")", ";", "iter", ".", "hasNext", "(", ")", ";", ")", "{", "IOFileFilter", "fileFilter", "=", "(", "IOFileFilter", ")", "iter", ".", "next", "(", ")", ";", "if", "(", "!", "fileFilter", ".", "accept", "(", "file", ")", ")", "{", "return", "false", ";", "}", "}", "return", "true", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "final", "File", "file", ",", "final", "String", "name", ")", "{", "if", "(", "this", ".", "fileFilters", ".", "size", "(", ")", "=", "=", "0", ")", "{", "return", "false", ";", "}", "for", "(", "Iterator", "iter", "=", "this", ".", "fileFilters", ".", "iterator", "(", ")", ";", "iter", ".", "hasNext", "(", ")", ";", ")", "{", "IOFileFilter", "fileFilter", "=", "(", "IOFileFilter", ")", "iter", ".", "next", "(", ")", ";", "if", "(", "!", "fileFilter", ".", "accept", "(", "file", ",", "name", ")", ")", "{", "return", "false", ";", "}", "}", "return", "true", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "StringBuffer", "buffer", "=", "new", "StringBuffer", "(", ")", ";", "buffer", ".", "append", "(", "super", ".", "toString", "(", ")", ")", ";", "buffer", ".", "append", "(", "\"", "<STR_LIT:(>", "\"", ")", ";", "if", "(", "fileFilters", "!", "=", "null", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "fileFilters", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "if", "(", "i", ">", "0", ")", "{", "buffer", ".", "append", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "}", "Object", "filter", "=", "fileFilters", ".", "get", "(", "i", ")", ";", "buffer", ".", "append", "(", "filter", "=", "=", "null", "?", "\"", "<STR_LIT>", "\"", ":", "filter", ".", "toString", "(", ")", ")", ";", "}", "}", "buffer", ".", "append", "(", "\"", "<STR_LIT:)>", "\"", ")", ";", "return", "buffer", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "CanWriteFileFilter", "(", ")", "{", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "return", "file", ".", "canWrite", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "DirectoryFileFilter", "(", ")", "{", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "return", "file", ".", "isDirectory", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "return", "accept", "(", "file", ".", "getParentFile", "(", ")", ",", "file", ".", "getName", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "dir", ",", "String", "name", ")", "{", "return", "accept", "(", "new", "File", "(", "dir", ",", "name", ")", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "String", "name", "=", "getClass", "(", ")", ".", "getName", "(", ")", ";", "int", "period", "=", "name", ".", "lastIndexOf", "(", "<CHAR_LIT:.>", ")", ";", "return", "(", "period", ">", "0", "?", "name", ".", "substring", "(", "period", "+", "1", ")", ":", "name", ")", ";", "}", "</s>"]
["<s>", "public", "SuffixFileFilter", "(", "String", "suffix", ")", "{", "this", "(", "suffix", ",", "IOCase", ".", "SENSITIVE", ")", ";", "}", "</s>"]
["<s>", "public", "SuffixFileFilter", "(", "String", "suffix", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "suffix", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "suffixes", "=", "new", "String", "[", "]", "{", "suffix", "}", ";", "this", ".", "caseSensitivity", "=", "(", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ")", ";", "}", "</s>"]
["<s>", "public", "SuffixFileFilter", "(", "String", "[", "]", "suffixes", ")", "{", "this", "(", "suffixes", ",", "IOCase", ".", "SENSITIVE", ")", ";", "}", "</s>"]
["<s>", "public", "SuffixFileFilter", "(", "String", "[", "]", "suffixes", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "suffixes", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "suffixes", "=", "suffixes", ";", "this", ".", "caseSensitivity", "=", "(", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ")", ";", "}", "</s>"]
["<s>", "public", "SuffixFileFilter", "(", "List", "suffixes", ")", "{", "this", "(", "suffixes", ",", "IOCase", ".", "SENSITIVE", ")", ";", "}", "</s>"]
["<s>", "public", "SuffixFileFilter", "(", "List", "suffixes", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "suffixes", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "suffixes", "=", "(", "String", "[", "]", ")", "suffixes", ".", "toArray", "(", "new", "String", "[", "suffixes", ".", "size", "(", ")", "]", ")", ";", "this", ".", "caseSensitivity", "=", "(", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "String", "name", "=", "file", ".", "getName", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "this", ".", "suffixes", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "caseSensitivity", ".", "checkEndsWith", "(", "name", ",", "suffixes", "[", "i", "]", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ",", "String", "name", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "this", ".", "suffixes", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "caseSensitivity", ".", "checkEndsWith", "(", "name", ",", "suffixes", "[", "i", "]", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "StringBuffer", "buffer", "=", "new", "StringBuffer", "(", ")", ";", "buffer", ".", "append", "(", "super", ".", "toString", "(", ")", ")", ";", "buffer", ".", "append", "(", "\"", "<STR_LIT:(>", "\"", ")", ";", "if", "(", "suffixes", "!", "=", "null", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "suffixes", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "i", ">", "0", ")", "{", "buffer", ".", "append", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "}", "buffer", ".", "append", "(", "suffixes", "[", "i", "]", ")", ";", "}", "}", "buffer", ".", "append", "(", "\"", "<STR_LIT:)>", "\"", ")", ";", "return", "buffer", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addFileFilter", "(", "IOFileFilter", "ioFileFilter", ")", ";", "</s>"]
["<s>", "public", "List", "getFileFilters", "(", ")", ";", "</s>"]
["<s>", "public", "boolean", "removeFileFilter", "(", "IOFileFilter", "ioFileFilter", ")", ";", "</s>"]
["<s>", "public", "void", "setFileFilters", "(", "List", "fileFilters", ")", ";", "</s>"]
["<s>", "protected", "CanReadFileFilter", "(", ")", "{", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "return", "file", ".", "canRead", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", ";", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "dir", ",", "String", "name", ")", ";", "</s>"]
["<s>", "public", "PrefixFileFilter", "(", "String", "prefix", ")", "{", "this", "(", "prefix", ",", "IOCase", ".", "SENSITIVE", ")", ";", "}", "</s>"]
["<s>", "public", "PrefixFileFilter", "(", "String", "prefix", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "prefix", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "prefixes", "=", "new", "String", "[", "]", "{", "prefix", "}", ";", "this", ".", "caseSensitivity", "=", "(", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ")", ";", "}", "</s>"]
["<s>", "public", "PrefixFileFilter", "(", "String", "[", "]", "prefixes", ")", "{", "this", "(", "prefixes", ",", "IOCase", ".", "SENSITIVE", ")", ";", "}", "</s>"]
["<s>", "public", "PrefixFileFilter", "(", "String", "[", "]", "prefixes", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "prefixes", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "prefixes", "=", "prefixes", ";", "this", ".", "caseSensitivity", "=", "(", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ")", ";", "}", "</s>"]
["<s>", "public", "PrefixFileFilter", "(", "List", "prefixes", ")", "{", "this", "(", "prefixes", ",", "IOCase", ".", "SENSITIVE", ")", ";", "}", "</s>"]
["<s>", "public", "PrefixFileFilter", "(", "List", "prefixes", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "prefixes", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "prefixes", "=", "(", "String", "[", "]", ")", "prefixes", ".", "toArray", "(", "new", "String", "[", "prefixes", ".", "size", "(", ")", "]", ")", ";", "this", ".", "caseSensitivity", "=", "(", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "String", "name", "=", "file", ".", "getName", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "this", ".", "prefixes", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "caseSensitivity", ".", "checkStartsWith", "(", "name", ",", "prefixes", "[", "i", "]", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ",", "String", "name", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "prefixes", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "caseSensitivity", ".", "checkStartsWith", "(", "name", ",", "prefixes", "[", "i", "]", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "StringBuffer", "buffer", "=", "new", "StringBuffer", "(", ")", ";", "buffer", ".", "append", "(", "super", ".", "toString", "(", ")", ")", ";", "buffer", ".", "append", "(", "\"", "<STR_LIT:(>", "\"", ")", ";", "if", "(", "prefixes", "!", "=", "null", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "prefixes", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "i", ">", "0", ")", "{", "buffer", ".", "append", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "}", "buffer", ".", "append", "(", "prefixes", "[", "i", "]", ")", ";", "}", "}", "buffer", ".", "append", "(", "\"", "<STR_LIT:)>", "\"", ")", ";", "return", "buffer", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "RegexFileFilter", "(", "String", "pattern", ")", "{", "if", "(", "pattern", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "pattern", "=", "Pattern", ".", "compile", "(", "pattern", ")", ";", "}", "</s>"]
["<s>", "public", "RegexFileFilter", "(", "String", "pattern", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "pattern", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "int", "flags", "=", "0", ";", "if", "(", "caseSensitivity", "!", "=", "null", "&", "&", "!", "caseSensitivity", ".", "isCaseSensitive", "(", ")", ")", "{", "flags", "=", "Pattern", ".", "CASE_INSENSITIVE", ";", "}", "this", ".", "pattern", "=", "Pattern", ".", "compile", "(", "pattern", ",", "flags", ")", ";", "}", "</s>"]
["<s>", "public", "RegexFileFilter", "(", "String", "pattern", ",", "int", "flags", ")", "{", "if", "(", "pattern", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "pattern", "=", "Pattern", ".", "compile", "(", "pattern", ",", "flags", ")", ";", "}", "</s>"]
["<s>", "public", "RegexFileFilter", "(", "Pattern", "pattern", ")", "{", "if", "(", "pattern", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "pattern", "=", "pattern", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "dir", ",", "String", "name", ")", "{", "return", "(", "pattern", ".", "matcher", "(", "name", ")", ".", "matches", "(", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "TrueFileFilter", "(", ")", "{", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "dir", ",", "String", "name", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "public", "NameFileFilter", "(", "String", "name", ")", "{", "this", "(", "name", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "NameFileFilter", "(", "String", "name", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "name", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "names", "=", "new", "String", "[", "]", "{", "name", "}", ";", "this", ".", "caseSensitivity", "=", "(", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ")", ";", "}", "</s>"]
["<s>", "public", "NameFileFilter", "(", "String", "[", "]", "names", ")", "{", "this", "(", "names", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "NameFileFilter", "(", "String", "[", "]", "names", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "names", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "names", "=", "names", ";", "this", ".", "caseSensitivity", "=", "(", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ")", ";", "}", "</s>"]
["<s>", "public", "NameFileFilter", "(", "List", "names", ")", "{", "this", "(", "names", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "NameFileFilter", "(", "List", "names", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "names", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "names", "=", "(", "String", "[", "]", ")", "names", ".", "toArray", "(", "new", "String", "[", "names", ".", "size", "(", ")", "]", ")", ";", "this", ".", "caseSensitivity", "=", "(", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "String", "name", "=", "file", ".", "getName", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "this", ".", "names", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "caseSensitivity", ".", "checkEquals", "(", "name", ",", "names", "[", "i", "]", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ",", "String", "name", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "names", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "caseSensitivity", ".", "checkEquals", "(", "name", ",", "names", "[", "i", "]", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "StringBuffer", "buffer", "=", "new", "StringBuffer", "(", ")", ";", "buffer", ".", "append", "(", "super", ".", "toString", "(", ")", ")", ";", "buffer", ".", "append", "(", "\"", "<STR_LIT:(>", "\"", ")", ";", "if", "(", "names", "!", "=", "null", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "names", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "i", ">", "0", ")", "{", "buffer", ".", "append", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "}", "buffer", ".", "append", "(", "names", "[", "i", "]", ")", ";", "}", "}", "buffer", ".", "append", "(", "\"", "<STR_LIT:)>", "\"", ")", ";", "return", "buffer", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "HiddenFileFilter", "(", ")", "{", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "return", "file", ".", "isHidden", "(", ")", ";", "}", "</s>"]
["<s>", "public", "NotFileFilter", "(", "IOFileFilter", "filter", ")", "{", "if", "(", "filter", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "filter", "=", "filter", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "return", "!", "filter", ".", "accept", "(", "file", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ",", "String", "name", ")", "{", "return", "!", "filter", ".", "accept", "(", "file", ",", "name", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "super", ".", "toString", "(", ")", "+", "\"", "<STR_LIT:(>", "\"", "+", "filter", ".", "toString", "(", ")", "+", "\"", "<STR_LIT:)>", "\"", ";", "}", "</s>"]
["<s>", "public", "WildcardFileFilter", "(", "String", "wildcard", ")", "{", "this", "(", "wildcard", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "WildcardFileFilter", "(", "String", "wildcard", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "wildcard", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "wildcards", "=", "new", "String", "[", "]", "{", "wildcard", "}", ";", "this", ".", "caseSensitivity", "=", "(", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ")", ";", "}", "</s>"]
["<s>", "public", "WildcardFileFilter", "(", "String", "[", "]", "wildcards", ")", "{", "this", "(", "wildcards", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "WildcardFileFilter", "(", "String", "[", "]", "wildcards", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "wildcards", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "wildcards", "=", "wildcards", ";", "this", ".", "caseSensitivity", "=", "(", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ")", ";", "}", "</s>"]
["<s>", "public", "WildcardFileFilter", "(", "List", "wildcards", ")", "{", "this", "(", "wildcards", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "WildcardFileFilter", "(", "List", "wildcards", ",", "IOCase", "caseSensitivity", ")", "{", "if", "(", "wildcards", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "wildcards", "=", "(", "String", "[", "]", ")", "wildcards", ".", "toArray", "(", "new", "String", "[", "wildcards", ".", "size", "(", ")", "]", ")", ";", "this", ".", "caseSensitivity", "=", "(", "caseSensitivity", "=", "=", "null", "?", "IOCase", ".", "SENSITIVE", ":", "caseSensitivity", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "dir", ",", "String", "name", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "wildcards", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "FilenameUtils", ".", "wildcardMatch", "(", "name", ",", "wildcards", "[", "i", "]", ",", "caseSensitivity", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "String", "name", "=", "file", ".", "getName", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "wildcards", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "FilenameUtils", ".", "wildcardMatch", "(", "name", ",", "wildcards", "[", "i", "]", ",", "caseSensitivity", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "StringBuffer", "buffer", "=", "new", "StringBuffer", "(", ")", ";", "buffer", ".", "append", "(", "super", ".", "toString", "(", ")", ")", ";", "buffer", ".", "append", "(", "\"", "<STR_LIT:(>", "\"", ")", ";", "if", "(", "wildcards", "!", "=", "null", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "wildcards", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "i", ">", "0", ")", "{", "buffer", ".", "append", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "}", "buffer", ".", "append", "(", "wildcards", "[", "i", "]", ")", ";", "}", "}", "buffer", ".", "append", "(", "\"", "<STR_LIT:)>", "\"", ")", ";", "return", "buffer", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "DelegateFileFilter", "(", "FilenameFilter", "filter", ")", "{", "if", "(", "filter", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "filenameFilter", "=", "filter", ";", "this", ".", "fileFilter", "=", "null", ";", "}", "</s>"]
["<s>", "public", "DelegateFileFilter", "(", "FileFilter", "filter", ")", "{", "if", "(", "filter", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "fileFilter", "=", "filter", ";", "this", ".", "filenameFilter", "=", "null", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "if", "(", "fileFilter", "!", "=", "null", ")", "{", "return", "fileFilter", ".", "accept", "(", "file", ")", ";", "}", "else", "{", "return", "super", ".", "accept", "(", "file", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "dir", ",", "String", "name", ")", "{", "if", "(", "filenameFilter", "!", "=", "null", ")", "{", "return", "filenameFilter", ".", "accept", "(", "dir", ",", "name", ")", ";", "}", "else", "{", "return", "super", ".", "accept", "(", "dir", ",", "name", ")", ";", "}", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "String", "delegate", "=", "(", "fileFilter", "!", "=", "null", "?", "fileFilter", ".", "toString", "(", ")", ":", "filenameFilter", ".", "toString", "(", ")", ")", ";", "return", "super", ".", "toString", "(", ")", "+", "\"", "<STR_LIT:(>", "\"", "+", "delegate", "+", "\"", "<STR_LIT:)>", "\"", ";", "}", "</s>"]
["<s>", "public", "SizeFileFilter", "(", "long", "size", ")", "{", "this", "(", "size", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "SizeFileFilter", "(", "long", "size", ",", "boolean", "acceptLarger", ")", "{", "if", "(", "size", "<", "0", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "size", "=", "size", ";", "this", ".", "acceptLarger", "=", "acceptLarger", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "boolean", "smaller", "=", "file", ".", "length", "(", ")", "<", "size", ";", "return", "acceptLarger", "?", "!", "smaller", ":", "smaller", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "String", "condition", "=", "acceptLarger", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT:<>", "\"", ";", "return", "super", ".", "toString", "(", ")", "+", "\"", "<STR_LIT:(>", "\"", "+", "condition", "+", "size", "+", "\"", "<STR_LIT:)>", "\"", ";", "}", "</s>"]
["<s>", "protected", "FileFileFilter", "(", ")", "{", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "return", "file", ".", "isFile", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "FalseFileFilter", "(", ")", "{", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "file", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "accept", "(", "File", "dir", ",", "String", "name", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "TeeInputStream", "(", "InputStream", "input", ",", "OutputStream", "branch", ")", "{", "this", "(", "input", ",", "branch", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "TeeInputStream", "(", "InputStream", "input", ",", "OutputStream", "branch", ",", "boolean", "closeBranch", ")", "{", "super", "(", "input", ")", ";", "this", ".", "branch", "=", "branch", ";", "this", ".", "closeBranch", "=", "closeBranch", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "try", "{", "super", ".", "close", "(", ")", ";", "}", "finally", "{", "if", "(", "closeBranch", ")", "{", "branch", ".", "close", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "int", "ch", "=", "super", ".", "read", "(", ")", ";", "if", "(", "ch", "!", "=", "-", "1", ")", "{", "branch", ".", "write", "(", "ch", ")", ";", "}", "return", "ch", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "[", "]", "bts", ",", "int", "st", ",", "int", "end", ")", "throws", "IOException", "{", "int", "n", "=", "super", ".", "read", "(", "bts", ",", "st", ",", "end", ")", ";", "if", "(", "n", "!", "=", "-", "1", ")", "{", "branch", ".", "write", "(", "bts", ",", "st", ",", "n", ")", ";", "}", "return", "n", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "[", "]", "bts", ")", "throws", "IOException", "{", "int", "n", "=", "super", ".", "read", "(", "bts", ")", ";", "if", "(", "n", "!", "=", "-", "1", ")", "{", "branch", ".", "write", "(", "bts", ",", "0", ",", "n", ")", ";", "}", "return", "n", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "{", "return", "-", "1", ";", "}", "</s>"]
["<s>", "public", "InputStream", "bindStream", "(", "InputStream", "input", ")", "{", "InputStream", "oldValue", "=", "getStream", "(", ")", ";", "m_streams", ".", "set", "(", "input", ")", ";", "return", "oldValue", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "InputStream", "input", "=", "getStream", "(", ")", ";", "if", "(", "null", "!", "=", "input", ")", "{", "input", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "InputStream", "input", "=", "getStream", "(", ")", ";", "if", "(", "null", "!", "=", "input", ")", "{", "return", "input", ".", "read", "(", ")", ";", "}", "else", "{", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "private", "InputStream", "getStream", "(", ")", "{", "return", "(", "InputStream", ")", "m_streams", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "public", "NullInputStream", "(", "long", "size", ")", "{", "this", "(", "size", ",", "true", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "NullInputStream", "(", "long", "size", ",", "boolean", "markSupported", ",", "boolean", "throwEofException", ")", "{", "this", ".", "size", "=", "size", ";", "this", ".", "markSupported", "=", "markSupported", ";", "this", ".", "throwEofException", "=", "throwEofException", ";", "}", "</s>"]
["<s>", "public", "long", "getPosition", "(", ")", "{", "return", "position", ";", "}", "</s>"]
["<s>", "public", "long", "getSize", "(", ")", "{", "return", "size", ";", "}", "</s>"]
["<s>", "public", "int", "available", "(", ")", "{", "long", "avail", "=", "size", "-", "position", ";", "if", "(", "avail", "<", "=", "0", ")", "{", "return", "0", ";", "}", "else", "if", "(", "avail", ">", "Integer", ".", "MAX_VALUE", ")", "{", "return", "Integer", ".", "MAX_VALUE", ";", "}", "else", "{", "return", "(", "int", ")", "avail", ";", "}", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "eof", "=", "false", ";", "position", "=", "0", ";", "mark", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "mark", "(", "int", "readlimit", ")", "{", "if", "(", "!", "markSupported", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mark", "=", "position", ";", "this", ".", "readlimit", "=", "readlimit", ";", "}", "</s>"]
["<s>", "public", "boolean", "markSupported", "(", ")", "{", "return", "markSupported", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "if", "(", "eof", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "position", "=", "=", "size", ")", "{", "return", "doEndOfFile", "(", ")", ";", "}", "position", "+", "+", ";", "return", "processByte", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "[", "]", "bytes", ")", "throws", "IOException", "{", "return", "read", "(", "bytes", ",", "0", ",", "bytes", ".", "length", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "[", "]", "bytes", ",", "int", "offset", ",", "int", "length", ")", "throws", "IOException", "{", "if", "(", "eof", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "position", "=", "=", "size", ")", "{", "return", "doEndOfFile", "(", ")", ";", "}", "position", "+", "=", "length", ";", "int", "returnLength", "=", "length", ";", "if", "(", "position", ">", "size", ")", "{", "returnLength", "=", "length", "-", "(", "int", ")", "(", "position", "-", "size", ")", ";", "position", "=", "size", ";", "}", "processBytes", "(", "bytes", ",", "offset", ",", "returnLength", ")", ";", "return", "returnLength", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "reset", "(", ")", "throws", "IOException", "{", "if", "(", "!", "markSupported", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "mark", "<", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "position", ">", "(", "mark", "+", "readlimit", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "mark", "+", "\"", "<STR_LIT>", "\"", "+", "readlimit", "+", "\"", "<STR_LIT:]>", "\"", ")", ";", "}", "position", "=", "mark", ";", "eof", "=", "false", ";", "}", "</s>"]
["<s>", "public", "long", "skip", "(", "long", "numberOfBytes", ")", "throws", "IOException", "{", "if", "(", "eof", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "position", "=", "=", "size", ")", "{", "return", "doEndOfFile", "(", ")", ";", "}", "position", "+", "=", "numberOfBytes", ";", "long", "returnLength", "=", "numberOfBytes", ";", "if", "(", "position", ">", "size", ")", "{", "returnLength", "=", "numberOfBytes", "-", "(", "position", "-", "size", ")", ";", "position", "=", "size", ";", "}", "return", "returnLength", ";", "}", "</s>"]
["<s>", "protected", "int", "processByte", "(", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "protected", "void", "processBytes", "(", "byte", "[", "]", "bytes", ",", "int", "offset", ",", "int", "length", ")", "{", "}", "</s>"]
["<s>", "private", "int", "doEndOfFile", "(", ")", "throws", "EOFException", "{", "eof", "=", "true", ";", "if", "(", "throwEofException", ")", "{", "throw", "new", "EOFException", "(", ")", ";", "}", "return", "-", "1", ";", "}", "</s>"]
["<s>", "public", "NullReader", "(", "long", "size", ")", "{", "this", "(", "size", ",", "true", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "NullReader", "(", "long", "size", ",", "boolean", "markSupported", ",", "boolean", "throwEofException", ")", "{", "this", ".", "size", "=", "size", ";", "this", ".", "markSupported", "=", "markSupported", ";", "this", ".", "throwEofException", "=", "throwEofException", ";", "}", "</s>"]
["<s>", "public", "long", "getPosition", "(", ")", "{", "return", "position", ";", "}", "</s>"]
["<s>", "public", "long", "getSize", "(", ")", "{", "return", "size", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "eof", "=", "false", ";", "position", "=", "0", ";", "mark", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "mark", "(", "int", "readlimit", ")", "{", "if", "(", "!", "markSupported", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mark", "=", "position", ";", "this", ".", "readlimit", "=", "readlimit", ";", "}", "</s>"]
["<s>", "public", "boolean", "markSupported", "(", ")", "{", "return", "markSupported", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "if", "(", "eof", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "position", "=", "=", "size", ")", "{", "return", "doEndOfFile", "(", ")", ";", "}", "position", "+", "+", ";", "return", "processChar", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "char", "[", "]", "chars", ")", "throws", "IOException", "{", "return", "read", "(", "chars", ",", "0", ",", "chars", ".", "length", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "char", "[", "]", "chars", ",", "int", "offset", ",", "int", "length", ")", "throws", "IOException", "{", "if", "(", "eof", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "position", "=", "=", "size", ")", "{", "return", "doEndOfFile", "(", ")", ";", "}", "position", "+", "=", "length", ";", "int", "returnLength", "=", "length", ";", "if", "(", "position", ">", "size", ")", "{", "returnLength", "=", "length", "-", "(", "int", ")", "(", "position", "-", "size", ")", ";", "position", "=", "size", ";", "}", "processChars", "(", "chars", ",", "offset", ",", "returnLength", ")", ";", "return", "returnLength", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "reset", "(", ")", "throws", "IOException", "{", "if", "(", "!", "markSupported", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "mark", "<", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "position", ">", "(", "mark", "+", "readlimit", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "mark", "+", "\"", "<STR_LIT>", "\"", "+", "readlimit", "+", "\"", "<STR_LIT:]>", "\"", ")", ";", "}", "position", "=", "mark", ";", "eof", "=", "false", ";", "}", "</s>"]
["<s>", "public", "long", "skip", "(", "long", "numberOfChars", ")", "throws", "IOException", "{", "if", "(", "eof", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "position", "=", "=", "size", ")", "{", "return", "doEndOfFile", "(", ")", ";", "}", "position", "+", "=", "numberOfChars", ";", "long", "returnLength", "=", "numberOfChars", ";", "if", "(", "position", ">", "size", ")", "{", "returnLength", "=", "numberOfChars", "-", "(", "position", "-", "size", ")", ";", "position", "=", "size", ";", "}", "return", "returnLength", ";", "}", "</s>"]
["<s>", "protected", "int", "processChar", "(", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "protected", "void", "processChars", "(", "char", "[", "]", "chars", ",", "int", "offset", ",", "int", "length", ")", "{", "}", "</s>"]
["<s>", "private", "int", "doEndOfFile", "(", ")", "throws", "EOFException", "{", "eof", "=", "true", ";", "if", "(", "throwEofException", ")", "{", "throw", "new", "EOFException", "(", ")", ";", "}", "return", "-", "1", ";", "}", "</s>"]
["<s>", "public", "CountingInputStream", "(", "InputStream", "in", ")", "{", "super", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "[", "]", "b", ")", "throws", "IOException", "{", "int", "found", "=", "super", ".", "read", "(", "b", ")", ";", "this", ".", "count", "+", "=", "(", "found", ">", "=", "0", ")", "?", "found", ":", "0", ";", "return", "found", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "[", "]", "b", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "int", "found", "=", "super", ".", "read", "(", "b", ",", "off", ",", "len", ")", ";", "this", ".", "count", "+", "=", "(", "found", ">", "=", "0", ")", "?", "found", ":", "0", ";", "return", "found", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "int", "found", "=", "super", ".", "read", "(", ")", ";", "this", ".", "count", "+", "=", "(", "found", ">", "=", "0", ")", "?", "1", ":", "0", ";", "return", "found", ";", "}", "</s>"]
["<s>", "public", "long", "skip", "(", "final", "long", "length", ")", "throws", "IOException", "{", "final", "long", "skip", "=", "super", ".", "skip", "(", "length", ")", ";", "this", ".", "count", "+", "=", "skip", ";", "return", "skip", ";", "}", "</s>"]
["<s>", "public", "synchronized", "int", "getCount", "(", ")", "{", "long", "result", "=", "getByteCount", "(", ")", ";", "if", "(", "result", ">", "Integer", ".", "MAX_VALUE", ")", "{", "throw", "new", "ArithmeticException", "(", "\"", "<STR_LIT>", "\"", "+", "result", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "(", "int", ")", "result", ";", "}", "</s>"]
["<s>", "public", "synchronized", "int", "resetCount", "(", ")", "{", "long", "result", "=", "resetByteCount", "(", ")", ";", "if", "(", "result", ">", "Integer", ".", "MAX_VALUE", ")", "{", "throw", "new", "ArithmeticException", "(", "\"", "<STR_LIT>", "\"", "+", "result", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "(", "int", ")", "result", ";", "}", "</s>"]
["<s>", "public", "synchronized", "long", "getByteCount", "(", ")", "{", "return", "this", ".", "count", ";", "}", "</s>"]
["<s>", "public", "synchronized", "long", "resetByteCount", "(", ")", "{", "long", "tmp", "=", "this", ".", "count", ";", "this", ".", "count", "=", "0", ";", "return", "tmp", ";", "}", "</s>"]
["<s>", "public", "ClassLoaderObjectInputStream", "(", "ClassLoader", "classLoader", ",", "InputStream", "inputStream", ")", "throws", "IOException", ",", "StreamCorruptedException", "{", "super", "(", "inputStream", ")", ";", "this", ".", "classLoader", "=", "classLoader", ";", "}", "</s>"]
["<s>", "protected", "Class", "resolveClass", "(", "ObjectStreamClass", "objectStreamClass", ")", "throws", "IOException", ",", "ClassNotFoundException", "{", "Class", "clazz", "=", "Class", ".", "forName", "(", "objectStreamClass", ".", "getName", "(", ")", ",", "false", ",", "classLoader", ")", ";", "if", "(", "clazz", "!", "=", "null", ")", "{", "return", "clazz", ";", "}", "else", "{", "return", "super", ".", "resolveClass", "(", "objectStreamClass", ")", ";", "}", "}", "</s>"]
["<s>", "public", "ProxyInputStream", "(", "InputStream", "proxy", ")", "{", "super", "(", "proxy", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "return", "in", ".", "read", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "[", "]", "bts", ")", "throws", "IOException", "{", "return", "in", ".", "read", "(", "bts", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "[", "]", "bts", ",", "int", "st", ",", "int", "end", ")", "throws", "IOException", "{", "return", "in", ".", "read", "(", "bts", ",", "st", ",", "end", ")", ";", "}", "</s>"]
["<s>", "public", "long", "skip", "(", "long", "ln", ")", "throws", "IOException", "{", "return", "in", ".", "skip", "(", "ln", ")", ";", "}", "</s>"]
["<s>", "public", "int", "available", "(", ")", "throws", "IOException", "{", "return", "in", ".", "available", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "in", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "mark", "(", "int", "idx", ")", "{", "in", ".", "mark", "(", "idx", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "reset", "(", ")", "throws", "IOException", "{", "in", ".", "reset", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "markSupported", "(", ")", "{", "return", "in", ".", "markSupported", "(", ")", ";", "}", "</s>"]
["<s>", "public", "CloseShieldInputStream", "(", "InputStream", "in", ")", "{", "super", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "{", "in", "=", "new", "ClosedInputStream", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ProxyReader", "(", "Reader", "proxy", ")", "{", "super", "(", "proxy", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "return", "in", ".", "read", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "char", "[", "]", "chr", ")", "throws", "IOException", "{", "return", "in", ".", "read", "(", "chr", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "char", "[", "]", "chr", ",", "int", "st", ",", "int", "end", ")", "throws", "IOException", "{", "return", "in", ".", "read", "(", "chr", ",", "st", ",", "end", ")", ";", "}", "</s>"]
["<s>", "public", "long", "skip", "(", "long", "ln", ")", "throws", "IOException", "{", "return", "in", ".", "skip", "(", "ln", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "ready", "(", ")", "throws", "IOException", "{", "return", "in", ".", "ready", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "in", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "mark", "(", "int", "idx", ")", "throws", "IOException", "{", "in", ".", "mark", "(", "idx", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "reset", "(", ")", "throws", "IOException", "{", "in", ".", "reset", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "markSupported", "(", ")", "{", "return", "in", ".", "markSupported", "(", ")", ";", "}", "</s>"]
["<s>", "public", "CharSequenceReader", "(", "CharSequence", "charSequence", ")", "{", "this", ".", "charSequence", "=", "(", "charSequence", "!", "=", "null", "?", "charSequence", ":", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "{", "idx", "=", "0", ";", "mark", "=", "0", ";", "}", "</s>"]
["<s>", "public", "void", "mark", "(", "int", "readAheadLimit", ")", "{", "mark", "=", "idx", ";", "}", "</s>"]
["<s>", "public", "boolean", "markSupported", "(", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "{", "if", "(", "idx", ">", "=", "charSequence", ".", "length", "(", ")", ")", "{", "return", "-", "1", ";", "}", "else", "{", "return", "charSequence", ".", "charAt", "(", "idx", "+", "+", ")", ";", "}", "}", "</s>"]
["<s>", "public", "int", "read", "(", "char", "[", "]", "array", ",", "int", "offset", ",", "int", "length", ")", "{", "if", "(", "idx", ">", "=", "charSequence", ".", "length", "(", ")", ")", "{", "return", "-", "1", ";", "}", "if", "(", "array", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "length", "<", "0", "|", "|", "(", "offset", "+", "length", ")", ">", "array", ".", "length", ")", "{", "throw", "new", "IndexOutOfBoundsException", "(", "\"", "<STR_LIT>", "\"", "+", "array", ".", "length", "+", "\"", "<STR_LIT>", "\"", "+", "offset", "+", "\"", "<STR_LIT>", "\"", "+", "length", ")", ";", "}", "int", "count", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "length", ";", "i", "+", "+", ")", "{", "int", "c", "=", "read", "(", ")", ";", "if", "(", "c", "=", "=", "-", "1", ")", "{", "return", "count", ";", "}", "array", "[", "offset", "+", "i", "]", "=", "(", "char", ")", "c", ";", "count", "+", "+", ";", "}", "return", "count", ";", "}", "</s>"]
["<s>", "public", "void", "reset", "(", ")", "{", "idx", "=", "mark", ";", "}", "</s>"]
["<s>", "public", "long", "skip", "(", "long", "n", ")", "{", "if", "(", "n", "<", "0", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "n", ")", ";", "}", "if", "(", "idx", ">", "=", "charSequence", ".", "length", "(", ")", ")", "{", "return", "-", "1", ";", "}", "int", "dest", "=", "(", "int", ")", "Math", ".", "min", "(", "charSequence", ".", "length", "(", ")", ",", "(", "idx", "+", "n", ")", ")", ";", "int", "count", "=", "dest", "-", "idx", ";", "idx", "=", "dest", ";", "return", "count", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "charSequence", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "SwappedDataInputStream", "(", "InputStream", "input", ")", "{", "super", "(", "input", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "readBoolean", "(", ")", "throws", "IOException", ",", "EOFException", "{", "return", "(", "0", "=", "=", "readByte", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "byte", "readByte", "(", ")", "throws", "IOException", ",", "EOFException", "{", "return", "(", "byte", ")", "in", ".", "read", "(", ")", ";", "}", "</s>"]
["<s>", "public", "char", "readChar", "(", ")", "throws", "IOException", ",", "EOFException", "{", "return", "(", "char", ")", "readShort", "(", ")", ";", "}", "</s>"]
["<s>", "public", "double", "readDouble", "(", ")", "throws", "IOException", ",", "EOFException", "{", "return", "EndianUtils", ".", "readSwappedDouble", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "float", "readFloat", "(", ")", "throws", "IOException", ",", "EOFException", "{", "return", "EndianUtils", ".", "readSwappedFloat", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "void", "readFully", "(", "byte", "[", "]", "data", ")", "throws", "IOException", ",", "EOFException", "{", "readFully", "(", "data", ",", "0", ",", "data", ".", "length", ")", ";", "}", "</s>"]
["<s>", "public", "void", "readFully", "(", "byte", "[", "]", "data", ",", "int", "offset", ",", "int", "length", ")", "throws", "IOException", ",", "EOFException", "{", "int", "remaining", "=", "length", ";", "while", "(", "remaining", ">", "0", ")", "{", "int", "location", "=", "offset", "+", "(", "length", "-", "remaining", ")", ";", "int", "count", "=", "read", "(", "data", ",", "location", ",", "remaining", ")", ";", "if", "(", "-", "1", "=", "=", "count", ")", "{", "throw", "new", "EOFException", "(", ")", ";", "}", "remaining", "-", "=", "count", ";", "}", "}", "</s>"]
["<s>", "public", "int", "readInt", "(", ")", "throws", "IOException", ",", "EOFException", "{", "return", "EndianUtils", ".", "readSwappedInteger", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "String", "readLine", "(", ")", "throws", "IOException", ",", "EOFException", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "long", "readLong", "(", ")", "throws", "IOException", ",", "EOFException", "{", "return", "EndianUtils", ".", "readSwappedLong", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "short", "readShort", "(", ")", "throws", "IOException", ",", "EOFException", "{", "return", "EndianUtils", ".", "readSwappedShort", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "int", "readUnsignedByte", "(", ")", "throws", "IOException", ",", "EOFException", "{", "return", "in", ".", "read", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "readUnsignedShort", "(", ")", "throws", "IOException", ",", "EOFException", "{", "return", "EndianUtils", ".", "readSwappedUnsignedShort", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "String", "readUTF", "(", ")", "throws", "IOException", ",", "EOFException", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "int", "skipBytes", "(", "int", "count", ")", "throws", "IOException", ",", "EOFException", "{", "return", "(", "int", ")", "in", ".", "skip", "(", "count", ")", ";", "}", "</s>"]
["<s>", "public", "AutoCloseInputStream", "(", "InputStream", "in", ")", "{", "super", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "in", ".", "close", "(", ")", ";", "in", "=", "new", "ClosedInputStream", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "int", "n", "=", "in", ".", "read", "(", ")", ";", "if", "(", "n", "=", "=", "-", "1", ")", "{", "close", "(", ")", ";", "}", "return", "n", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "[", "]", "b", ")", "throws", "IOException", "{", "int", "n", "=", "in", ".", "read", "(", "b", ")", ";", "if", "(", "n", "=", "=", "-", "1", ")", "{", "close", "(", ")", ";", "}", "return", "n", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "byte", "[", "]", "b", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "int", "n", "=", "in", ".", "read", "(", "b", ",", "off", ",", "len", ")", ";", "if", "(", "n", "=", "=", "-", "1", ")", "{", "close", "(", ")", ";", "}", "return", "n", ";", "}", "</s>"]
["<s>", "protected", "void", "finalize", "(", ")", "throws", "Throwable", "{", "close", "(", ")", ";", "super", ".", "finalize", "(", ")", ";", "}", "</s>"]
["<s>", "public", "DeferredFileOutputStream", "(", "int", "threshold", ",", "File", "outputFile", ")", "{", "super", "(", "threshold", ")", ";", "this", ".", "outputFile", "=", "outputFile", ";", "memoryOutputStream", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "currentOutputStream", "=", "memoryOutputStream", ";", "}", "</s>"]
["<s>", "public", "DeferredFileOutputStream", "(", "int", "threshold", ",", "String", "prefix", ",", "String", "suffix", ",", "File", "directory", ")", "{", "this", "(", "threshold", ",", "(", "File", ")", "null", ")", ";", "if", "(", "prefix", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "prefix", "=", "prefix", ";", "this", ".", "suffix", "=", "suffix", ";", "this", ".", "directory", "=", "directory", ";", "}", "</s>"]
["<s>", "protected", "OutputStream", "getStream", "(", ")", "throws", "IOException", "{", "return", "currentOutputStream", ";", "}", "</s>"]
["<s>", "protected", "void", "thresholdReached", "(", ")", "throws", "IOException", "{", "if", "(", "prefix", "!", "=", "null", ")", "{", "outputFile", "=", "File", ".", "createTempFile", "(", "prefix", ",", "suffix", ",", "directory", ")", ";", "}", "FileOutputStream", "fos", "=", "new", "FileOutputStream", "(", "outputFile", ")", ";", "memoryOutputStream", ".", "writeTo", "(", "fos", ")", ";", "currentOutputStream", "=", "fos", ";", "memoryOutputStream", "=", "null", ";", "}", "</s>"]
["<s>", "public", "boolean", "isInMemory", "(", ")", "{", "return", "(", "!", "isThresholdExceeded", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "byte", "[", "]", "getData", "(", ")", "{", "if", "(", "memoryOutputStream", "!", "=", "null", ")", "{", "return", "memoryOutputStream", ".", "toByteArray", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "File", "getFile", "(", ")", "{", "return", "outputFile", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "super", ".", "close", "(", ")", ";", "closed", "=", "true", ";", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", "{", "if", "(", "!", "closed", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "isInMemory", "(", ")", ")", "{", "memoryOutputStream", ".", "writeTo", "(", "out", ")", ";", "}", "else", "{", "FileInputStream", "fis", "=", "new", "FileInputStream", "(", "outputFile", ")", ";", "try", "{", "IOUtils", ".", "copy", "(", "fis", ",", "out", ")", ";", "}", "finally", "{", "IOUtils", ".", "closeQuietly", "(", "fis", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "ProxyOutputStream", "(", "OutputStream", "proxy", ")", "{", "super", "(", "proxy", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "int", "idx", ")", "throws", "IOException", "{", "out", ".", "write", "(", "idx", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "byte", "[", "]", "bts", ")", "throws", "IOException", "{", "out", ".", "write", "(", "bts", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "byte", "[", "]", "bts", ",", "int", "st", ",", "int", "end", ")", "throws", "IOException", "{", "out", ".", "write", "(", "bts", ",", "st", ",", "end", ")", ";", "}", "</s>"]
["<s>", "public", "void", "flush", "(", ")", "throws", "IOException", "{", "out", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "out", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "LockableFileWriter", "(", "String", "fileName", ")", "throws", "IOException", "{", "this", "(", "fileName", ",", "false", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "LockableFileWriter", "(", "String", "fileName", ",", "boolean", "append", ")", "throws", "IOException", "{", "this", "(", "fileName", ",", "append", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "LockableFileWriter", "(", "String", "fileName", ",", "boolean", "append", ",", "String", "lockDir", ")", "throws", "IOException", "{", "this", "(", "new", "File", "(", "fileName", ")", ",", "append", ",", "lockDir", ")", ";", "}", "</s>"]
["<s>", "public", "LockableFileWriter", "(", "File", "file", ")", "throws", "IOException", "{", "this", "(", "file", ",", "false", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "LockableFileWriter", "(", "File", "file", ",", "boolean", "append", ")", "throws", "IOException", "{", "this", "(", "file", ",", "append", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "LockableFileWriter", "(", "File", "file", ",", "boolean", "append", ",", "String", "lockDir", ")", "throws", "IOException", "{", "this", "(", "file", ",", "null", ",", "append", ",", "lockDir", ")", ";", "}", "</s>"]
["<s>", "public", "LockableFileWriter", "(", "File", "file", ",", "String", "encoding", ")", "throws", "IOException", "{", "this", "(", "file", ",", "encoding", ",", "false", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "LockableFileWriter", "(", "File", "file", ",", "String", "encoding", ",", "boolean", "append", ",", "String", "lockDir", ")", "throws", "IOException", "{", "super", "(", ")", ";", "file", "=", "file", ".", "getAbsoluteFile", "(", ")", ";", "if", "(", "file", ".", "getParentFile", "(", ")", "!", "=", "null", ")", "{", "FileUtils", ".", "forceMkdir", "(", "file", ".", "getParentFile", "(", ")", ")", ";", "}", "if", "(", "file", ".", "isDirectory", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "lockDir", "=", "=", "null", ")", "{", "lockDir", "=", "System", ".", "getProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "File", "lockDirFile", "=", "new", "File", "(", "lockDir", ")", ";", "FileUtils", ".", "forceMkdir", "(", "lockDirFile", ")", ";", "testLockDir", "(", "lockDirFile", ")", ";", "lockFile", "=", "new", "File", "(", "lockDirFile", ",", "file", ".", "getName", "(", ")", "+", "LCK", ")", ";", "createLock", "(", ")", ";", "out", "=", "initWriter", "(", "file", ",", "encoding", ",", "append", ")", ";", "}", "</s>"]
["<s>", "private", "void", "testLockDir", "(", "File", "lockDir", ")", "throws", "IOException", "{", "if", "(", "!", "lockDir", ".", "exists", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "lockDir", ".", "getAbsolutePath", "(", ")", ")", ";", "}", "if", "(", "!", "lockDir", ".", "canWrite", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "lockDir", ".", "getAbsolutePath", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "createLock", "(", ")", "throws", "IOException", "{", "synchronized", "(", "LockableFileWriter", ".", "class", ")", "{", "if", "(", "!", "lockFile", ".", "createNewFile", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "lockFile", ".", "getAbsolutePath", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "lockFile", ".", "deleteOnExit", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "Writer", "initWriter", "(", "File", "file", ",", "String", "encoding", ",", "boolean", "append", ")", "throws", "IOException", "{", "boolean", "fileExistedAlready", "=", "file", ".", "exists", "(", ")", ";", "OutputStream", "stream", "=", "null", ";", "Writer", "writer", "=", "null", ";", "try", "{", "if", "(", "encoding", "=", "=", "null", ")", "{", "writer", "=", "new", "FileWriter", "(", "file", ".", "getAbsolutePath", "(", ")", ",", "append", ")", ";", "}", "else", "{", "stream", "=", "new", "FileOutputStream", "(", "file", ".", "getAbsolutePath", "(", ")", ",", "append", ")", ";", "writer", "=", "new", "OutputStreamWriter", "(", "stream", ",", "encoding", ")", ";", "}", "}", "catch", "(", "IOException", "ex", ")", "{", "IOUtils", ".", "closeQuietly", "(", "writer", ")", ";", "IOUtils", ".", "closeQuietly", "(", "stream", ")", ";", "lockFile", ".", "delete", "(", ")", ";", "if", "(", "fileExistedAlready", "=", "=", "false", ")", "{", "file", ".", "delete", "(", ")", ";", "}", "throw", "ex", ";", "}", "catch", "(", "RuntimeException", "ex", ")", "{", "IOUtils", ".", "closeQuietly", "(", "writer", ")", ";", "IOUtils", ".", "closeQuietly", "(", "stream", ")", ";", "lockFile", ".", "delete", "(", ")", ";", "if", "(", "fileExistedAlready", "=", "=", "false", ")", "{", "file", ".", "delete", "(", ")", ";", "}", "throw", "ex", ";", "}", "return", "writer", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "try", "{", "out", ".", "close", "(", ")", ";", "}", "finally", "{", "lockFile", ".", "delete", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "write", "(", "int", "idx", ")", "throws", "IOException", "{", "out", ".", "write", "(", "idx", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "char", "[", "]", "chr", ")", "throws", "IOException", "{", "out", ".", "write", "(", "chr", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "char", "[", "]", "chr", ",", "int", "st", ",", "int", "end", ")", "throws", "IOException", "{", "out", ".", "write", "(", "chr", ",", "st", ",", "end", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "String", "str", ")", "throws", "IOException", "{", "out", ".", "write", "(", "str", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "String", "str", ",", "int", "st", ",", "int", "end", ")", "throws", "IOException", "{", "out", ".", "write", "(", "str", ",", "st", ",", "end", ")", ";", "}", "</s>"]
["<s>", "public", "void", "flush", "(", ")", "throws", "IOException", "{", "out", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "OutputStream", "bindStream", "(", "OutputStream", "output", ")", "{", "OutputStream", "stream", "=", "getStream", "(", ")", ";", "m_streams", ".", "set", "(", "output", ")", ";", "return", "stream", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "OutputStream", "output", "=", "getStream", "(", ")", ";", "if", "(", "null", "!", "=", "output", ")", "{", "output", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "flush", "(", ")", "throws", "IOException", "{", "OutputStream", "output", "=", "getStream", "(", ")", ";", "if", "(", "null", "!", "=", "output", ")", "{", "output", ".", "flush", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "write", "(", "int", "ch", ")", "throws", "IOException", "{", "OutputStream", "output", "=", "getStream", "(", ")", ";", "if", "(", "null", "!", "=", "output", ")", "{", "output", ".", "write", "(", "ch", ")", ";", "}", "}", "</s>"]
["<s>", "private", "OutputStream", "getStream", "(", ")", "{", "return", "(", "OutputStream", ")", "m_streams", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ThresholdingOutputStream", "(", "int", "threshold", ")", "{", "this", ".", "threshold", "=", "threshold", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "int", "b", ")", "throws", "IOException", "{", "checkThreshold", "(", "1", ")", ";", "getStream", "(", ")", ".", "write", "(", "b", ")", ";", "written", "+", "+", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "byte", "b", "[", "]", ")", "throws", "IOException", "{", "checkThreshold", "(", "b", ".", "length", ")", ";", "getStream", "(", ")", ".", "write", "(", "b", ")", ";", "written", "+", "=", "b", ".", "length", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "byte", "b", "[", "]", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "checkThreshold", "(", "len", ")", ";", "getStream", "(", ")", ".", "write", "(", "b", ",", "off", ",", "len", ")", ";", "written", "+", "=", "len", ";", "}", "</s>"]
["<s>", "public", "void", "flush", "(", ")", "throws", "IOException", "{", "getStream", "(", ")", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "try", "{", "flush", "(", ")", ";", "}", "catch", "(", "IOException", "ignored", ")", "{", "}", "getStream", "(", ")", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getThreshold", "(", ")", "{", "return", "threshold", ";", "}", "</s>"]
["<s>", "public", "long", "getByteCount", "(", ")", "{", "return", "written", ";", "}", "</s>"]
["<s>", "public", "boolean", "isThresholdExceeded", "(", ")", "{", "return", "(", "written", ">", "threshold", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "checkThreshold", "(", "int", "count", ")", "throws", "IOException", "{", "if", "(", "!", "thresholdExceeded", "&", "&", "(", "written", "+", "count", ">", "threshold", ")", ")", "{", "thresholdExceeded", "=", "true", ";", "thresholdReached", "(", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "void", "resetByteCount", "(", ")", "{", "this", ".", "thresholdExceeded", "=", "false", ";", "this", ".", "written", "=", "0", ";", "}", "</s>"]
["<s>", "protected", "abstract", "OutputStream", "getStream", "(", ")", "throws", "IOException", ";", "</s>"]
["<s>", "protected", "abstract", "void", "thresholdReached", "(", ")", "throws", "IOException", ";", "</s>"]
["<s>", "public", "void", "write", "(", "byte", "[", "]", "b", ",", "int", "off", ",", "int", "len", ")", "{", "}", "</s>"]
["<s>", "public", "void", "write", "(", "int", "b", ")", "{", "}", "</s>"]
["<s>", "public", "void", "write", "(", "byte", "[", "]", "b", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "public", "TeeOutputStream", "(", "OutputStream", "out", ",", "OutputStream", "branch", ")", "{", "super", "(", "out", ")", ";", "this", ".", "branch", "=", "branch", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "write", "(", "byte", "[", "]", "b", ")", "throws", "IOException", "{", "super", ".", "write", "(", "b", ")", ";", "this", ".", "branch", ".", "write", "(", "b", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "write", "(", "byte", "[", "]", "b", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "super", ".", "write", "(", "b", ",", "off", ",", "len", ")", ";", "this", ".", "branch", ".", "write", "(", "b", ",", "off", ",", "len", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "write", "(", "int", "b", ")", "throws", "IOException", "{", "super", ".", "write", "(", "b", ")", ";", "this", ".", "branch", ".", "write", "(", "b", ")", ";", "}", "</s>"]
["<s>", "public", "void", "flush", "(", ")", "throws", "IOException", "{", "super", ".", "flush", "(", ")", ";", "this", ".", "branch", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "super", ".", "close", "(", ")", ";", "this", ".", "branch", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "CountingOutputStream", "(", "OutputStream", "out", ")", "{", "super", "(", "out", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "byte", "[", "]", "b", ")", "throws", "IOException", "{", "count", "+", "=", "b", ".", "length", ";", "super", ".", "write", "(", "b", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "byte", "[", "]", "b", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "count", "+", "=", "len", ";", "super", ".", "write", "(", "b", ",", "off", ",", "len", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "int", "b", ")", "throws", "IOException", "{", "count", "+", "+", ";", "super", ".", "write", "(", "b", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "int", "getCount", "(", ")", "{", "long", "result", "=", "getByteCount", "(", ")", ";", "if", "(", "result", ">", "Integer", ".", "MAX_VALUE", ")", "{", "throw", "new", "ArithmeticException", "(", "\"", "<STR_LIT>", "\"", "+", "result", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "(", "int", ")", "result", ";", "}", "</s>"]
["<s>", "public", "synchronized", "int", "resetCount", "(", ")", "{", "long", "result", "=", "resetByteCount", "(", ")", ";", "if", "(", "result", ">", "Integer", ".", "MAX_VALUE", ")", "{", "throw", "new", "ArithmeticException", "(", "\"", "<STR_LIT>", "\"", "+", "result", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "(", "int", ")", "result", ";", "}", "</s>"]
["<s>", "public", "synchronized", "long", "getByteCount", "(", ")", "{", "return", "this", ".", "count", ";", "}", "</s>"]
["<s>", "public", "synchronized", "long", "resetByteCount", "(", ")", "{", "long", "tmp", "=", "this", ".", "count", ";", "this", ".", "count", "=", "0", ";", "return", "tmp", ";", "}", "</s>"]
["<s>", "public", "NullWriter", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "write", "(", "int", "idx", ")", "{", "}", "</s>"]
["<s>", "public", "void", "write", "(", "char", "[", "]", "chr", ")", "{", "}", "</s>"]
["<s>", "public", "void", "write", "(", "char", "[", "]", "chr", ",", "int", "st", ",", "int", "end", ")", "{", "}", "</s>"]
["<s>", "public", "void", "write", "(", "String", "str", ")", "{", "}", "</s>"]
["<s>", "public", "void", "write", "(", "String", "str", ",", "int", "st", ",", "int", "end", ")", "{", "}", "</s>"]
["<s>", "public", "void", "flush", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "write", "(", "int", "b", ")", "throws", "IOException", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT:(>", "\"", "+", "b", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "CloseShieldOutputStream", "(", "OutputStream", "out", ")", "{", "super", "(", "out", ")", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "{", "out", "=", "new", "ClosedOutputStream", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ByteArrayOutputStream", "(", ")", "{", "this", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "ByteArrayOutputStream", "(", "int", "size", ")", "{", "if", "(", "size", "<", "0", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "size", ")", ";", "}", "needNewBuffer", "(", "size", ")", ";", "}", "</s>"]
["<s>", "private", "byte", "[", "]", "getBuffer", "(", "int", "index", ")", "{", "return", "(", "byte", "[", "]", ")", "buffers", ".", "get", "(", "index", ")", ";", "}", "</s>"]
["<s>", "private", "void", "needNewBuffer", "(", "int", "newcount", ")", "{", "if", "(", "currentBufferIndex", "<", "buffers", ".", "size", "(", ")", "-", "1", ")", "{", "filledBufferSum", "+", "=", "currentBuffer", ".", "length", ";", "currentBufferIndex", "+", "+", ";", "currentBuffer", "=", "getBuffer", "(", "currentBufferIndex", ")", ";", "}", "else", "{", "int", "newBufferSize", ";", "if", "(", "currentBuffer", "=", "=", "null", ")", "{", "newBufferSize", "=", "newcount", ";", "filledBufferSum", "=", "0", ";", "}", "else", "{", "newBufferSize", "=", "Math", ".", "max", "(", "currentBuffer", ".", "length", "<", "<", "1", ",", "newcount", "-", "filledBufferSum", ")", ";", "filledBufferSum", "+", "=", "currentBuffer", ".", "length", ";", "}", "currentBufferIndex", "+", "+", ";", "currentBuffer", "=", "new", "byte", "[", "newBufferSize", "]", ";", "buffers", ".", "add", "(", "currentBuffer", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "write", "(", "byte", "[", "]", "b", ",", "int", "off", ",", "int", "len", ")", "{", "if", "(", "(", "off", "<", "0", ")", "|", "|", "(", "off", ">", "b", ".", "length", ")", "|", "|", "(", "len", "<", "0", ")", "|", "|", "(", "(", "off", "+", "len", ")", ">", "b", ".", "length", ")", "|", "|", "(", "(", "off", "+", "len", ")", "<", "0", ")", ")", "{", "throw", "new", "IndexOutOfBoundsException", "(", ")", ";", "}", "else", "if", "(", "len", "=", "=", "0", ")", "{", "return", ";", "}", "synchronized", "(", "this", ")", "{", "int", "newcount", "=", "count", "+", "len", ";", "int", "remaining", "=", "len", ";", "int", "inBufferPos", "=", "count", "-", "filledBufferSum", ";", "while", "(", "remaining", ">", "0", ")", "{", "int", "part", "=", "Math", ".", "min", "(", "remaining", ",", "currentBuffer", ".", "length", "-", "inBufferPos", ")", ";", "System", ".", "arraycopy", "(", "b", ",", "off", "+", "len", "-", "remaining", ",", "currentBuffer", ",", "inBufferPos", ",", "part", ")", ";", "remaining", "-", "=", "part", ";", "if", "(", "remaining", ">", "0", ")", "{", "needNewBuffer", "(", "newcount", ")", ";", "inBufferPos", "=", "0", ";", "}", "}", "count", "=", "newcount", ";", "}", "}", "</s>"]
["<s>", "public", "synchronized", "void", "write", "(", "int", "b", ")", "{", "int", "inBufferPos", "=", "count", "-", "filledBufferSum", ";", "if", "(", "inBufferPos", "=", "=", "currentBuffer", ".", "length", ")", "{", "needNewBuffer", "(", "count", "+", "1", ")", ";", "inBufferPos", "=", "0", ";", "}", "currentBuffer", "[", "inBufferPos", "]", "=", "(", "byte", ")", "b", ";", "count", "+", "+", ";", "}", "</s>"]
["<s>", "public", "synchronized", "int", "write", "(", "InputStream", "in", ")", "throws", "IOException", "{", "int", "readCount", "=", "0", ";", "int", "inBufferPos", "=", "count", "-", "filledBufferSum", ";", "int", "n", "=", "in", ".", "read", "(", "currentBuffer", ",", "inBufferPos", ",", "currentBuffer", ".", "length", "-", "inBufferPos", ")", ";", "while", "(", "n", "!", "=", "-", "1", ")", "{", "readCount", "+", "=", "n", ";", "inBufferPos", "+", "=", "n", ";", "count", "+", "=", "n", ";", "if", "(", "inBufferPos", "=", "=", "currentBuffer", ".", "length", ")", "{", "needNewBuffer", "(", "currentBuffer", ".", "length", ")", ";", "inBufferPos", "=", "0", ";", "}", "n", "=", "in", ".", "read", "(", "currentBuffer", ",", "inBufferPos", ",", "currentBuffer", ".", "length", "-", "inBufferPos", ")", ";", "}", "return", "readCount", ";", "}", "</s>"]
["<s>", "public", "synchronized", "int", "size", "(", ")", "{", "return", "count", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "public", "synchronized", "void", "reset", "(", ")", "{", "count", "=", "0", ";", "filledBufferSum", "=", "0", ";", "currentBufferIndex", "=", "0", ";", "currentBuffer", "=", "getBuffer", "(", "currentBufferIndex", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", "{", "int", "remaining", "=", "count", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "buffers", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "byte", "[", "]", "buf", "=", "getBuffer", "(", "i", ")", ";", "int", "c", "=", "Math", ".", "min", "(", "buf", ".", "length", ",", "remaining", ")", ";", "out", ".", "write", "(", "buf", ",", "0", ",", "c", ")", ";", "remaining", "-", "=", "c", ";", "if", "(", "remaining", "=", "=", "0", ")", "{", "break", ";", "}", "}", "}", "</s>"]
["<s>", "public", "synchronized", "byte", "[", "]", "toByteArray", "(", ")", "{", "int", "remaining", "=", "count", ";", "if", "(", "remaining", "=", "=", "0", ")", "{", "return", "EMPTY_BYTE_ARRAY", ";", "}", "byte", "newbuf", "[", "]", "=", "new", "byte", "[", "remaining", "]", ";", "int", "pos", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "buffers", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "byte", "[", "]", "buf", "=", "getBuffer", "(", "i", ")", ";", "int", "c", "=", "Math", ".", "min", "(", "buf", ".", "length", ",", "remaining", ")", ";", "System", ".", "arraycopy", "(", "buf", ",", "0", ",", "newbuf", ",", "pos", ",", "c", ")", ";", "pos", "+", "=", "c", ";", "remaining", "-", "=", "c", ";", "if", "(", "remaining", "=", "=", "0", ")", "{", "break", ";", "}", "}", "return", "newbuf", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "new", "String", "(", "toByteArray", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", "String", "enc", ")", "throws", "UnsupportedEncodingException", "{", "return", "new", "String", "(", "toByteArray", "(", ")", ",", "enc", ")", ";", "}", "</s>"]
["<s>", "public", "FileWriterWithEncoding", "(", "String", "filename", ",", "String", "encoding", ")", "throws", "IOException", "{", "this", "(", "new", "File", "(", "filename", ")", ",", "encoding", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "FileWriterWithEncoding", "(", "String", "filename", ",", "String", "encoding", ",", "boolean", "append", ")", "throws", "IOException", "{", "this", "(", "new", "File", "(", "filename", ")", ",", "encoding", ",", "append", ")", ";", "}", "</s>"]
["<s>", "public", "FileWriterWithEncoding", "(", "String", "filename", ",", "Charset", "encoding", ")", "throws", "IOException", "{", "this", "(", "new", "File", "(", "filename", ")", ",", "encoding", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "FileWriterWithEncoding", "(", "String", "filename", ",", "Charset", "encoding", ",", "boolean", "append", ")", "throws", "IOException", "{", "this", "(", "new", "File", "(", "filename", ")", ",", "encoding", ",", "append", ")", ";", "}", "</s>"]
["<s>", "public", "FileWriterWithEncoding", "(", "String", "filename", ",", "CharsetEncoder", "encoding", ")", "throws", "IOException", "{", "this", "(", "new", "File", "(", "filename", ")", ",", "encoding", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "FileWriterWithEncoding", "(", "String", "filename", ",", "CharsetEncoder", "encoding", ",", "boolean", "append", ")", "throws", "IOException", "{", "this", "(", "new", "File", "(", "filename", ")", ",", "encoding", ",", "append", ")", ";", "}", "</s>"]
["<s>", "public", "FileWriterWithEncoding", "(", "File", "file", ",", "String", "encoding", ")", "throws", "IOException", "{", "this", "(", "file", ",", "encoding", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "FileWriterWithEncoding", "(", "File", "file", ",", "String", "encoding", ",", "boolean", "append", ")", "throws", "IOException", "{", "super", "(", ")", ";", "this", ".", "out", "=", "initWriter", "(", "file", ",", "encoding", ",", "append", ")", ";", "}", "</s>"]
["<s>", "public", "FileWriterWithEncoding", "(", "File", "file", ",", "Charset", "encoding", ")", "throws", "IOException", "{", "this", "(", "file", ",", "encoding", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "FileWriterWithEncoding", "(", "File", "file", ",", "Charset", "encoding", ",", "boolean", "append", ")", "throws", "IOException", "{", "super", "(", ")", ";", "this", ".", "out", "=", "initWriter", "(", "file", ",", "encoding", ",", "append", ")", ";", "}", "</s>"]
["<s>", "public", "FileWriterWithEncoding", "(", "File", "file", ",", "CharsetEncoder", "encoding", ")", "throws", "IOException", "{", "this", "(", "file", ",", "encoding", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "FileWriterWithEncoding", "(", "File", "file", ",", "CharsetEncoder", "encoding", ",", "boolean", "append", ")", "throws", "IOException", "{", "super", "(", ")", ";", "this", ".", "out", "=", "initWriter", "(", "file", ",", "encoding", ",", "append", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Writer", "initWriter", "(", "File", "file", ",", "Object", "encoding", ",", "boolean", "append", ")", "throws", "IOException", "{", "if", "(", "file", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "encoding", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "boolean", "fileExistedAlready", "=", "file", ".", "exists", "(", ")", ";", "OutputStream", "stream", "=", "null", ";", "Writer", "writer", "=", "null", ";", "try", "{", "stream", "=", "new", "FileOutputStream", "(", "file", ",", "append", ")", ";", "if", "(", "encoding", "instanceof", "Charset", ")", "{", "writer", "=", "new", "OutputStreamWriter", "(", "stream", ",", "(", "Charset", ")", "encoding", ")", ";", "}", "else", "if", "(", "encoding", "instanceof", "CharsetEncoder", ")", "{", "writer", "=", "new", "OutputStreamWriter", "(", "stream", ",", "(", "CharsetEncoder", ")", "encoding", ")", ";", "}", "else", "{", "writer", "=", "new", "OutputStreamWriter", "(", "stream", ",", "(", "String", ")", "encoding", ")", ";", "}", "}", "catch", "(", "IOException", "ex", ")", "{", "IOUtils", ".", "closeQuietly", "(", "writer", ")", ";", "IOUtils", ".", "closeQuietly", "(", "stream", ")", ";", "if", "(", "fileExistedAlready", "=", "=", "false", ")", "{", "FileUtils", ".", "deleteQuietly", "(", "file", ")", ";", "}", "throw", "ex", ";", "}", "catch", "(", "RuntimeException", "ex", ")", "{", "IOUtils", ".", "closeQuietly", "(", "writer", ")", ";", "IOUtils", ".", "closeQuietly", "(", "stream", ")", ";", "if", "(", "fileExistedAlready", "=", "=", "false", ")", "{", "FileUtils", ".", "deleteQuietly", "(", "file", ")", ";", "}", "throw", "ex", ";", "}", "return", "writer", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "int", "idx", ")", "throws", "IOException", "{", "out", ".", "write", "(", "idx", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "char", "[", "]", "chr", ")", "throws", "IOException", "{", "out", ".", "write", "(", "chr", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "char", "[", "]", "chr", ",", "int", "st", ",", "int", "end", ")", "throws", "IOException", "{", "out", ".", "write", "(", "chr", ",", "st", ",", "end", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "String", "str", ")", "throws", "IOException", "{", "out", ".", "write", "(", "str", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "String", "str", ",", "int", "st", ",", "int", "end", ")", "throws", "IOException", "{", "out", ".", "write", "(", "str", ",", "st", ",", "end", ")", ";", "}", "</s>"]
["<s>", "public", "void", "flush", "(", ")", "throws", "IOException", "{", "out", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "out", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ProxyWriter", "(", "Writer", "proxy", ")", "{", "super", "(", "proxy", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "int", "idx", ")", "throws", "IOException", "{", "out", ".", "write", "(", "idx", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "char", "[", "]", "chr", ")", "throws", "IOException", "{", "out", ".", "write", "(", "chr", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "char", "[", "]", "chr", ",", "int", "st", ",", "int", "end", ")", "throws", "IOException", "{", "out", ".", "write", "(", "chr", ",", "st", ",", "end", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "String", "str", ")", "throws", "IOException", "{", "out", ".", "write", "(", "str", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "String", "str", ",", "int", "st", ",", "int", "end", ")", "throws", "IOException", "{", "out", ".", "write", "(", "str", ",", "st", ",", "end", ")", ";", "}", "</s>"]
["<s>", "public", "void", "flush", "(", ")", "throws", "IOException", "{", "out", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "out", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "UTF7StyleCharsetDecoder", "(", "UTF7StyleCharset", "cs", ",", "Base64Util", "base64", ",", "boolean", "strict", ")", "{", "super", "(", "cs", ",", "<NUM_LIT>", ",", "<NUM_LIT:1.0f>", ")", ";", "this", ".", "base64", "=", "base64", ";", "this", ".", "strict", "=", "strict", ";", "this", ".", "shift", "=", "cs", ".", "shift", "(", ")", ";", "this", ".", "unshift", "=", "cs", ".", "unshift", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "CoderResult", "decodeLoop", "(", "ByteBuffer", "in", ",", "CharBuffer", "out", ")", "{", "while", "(", "in", ".", "hasRemaining", "(", ")", ")", "{", "byte", "b", "=", "in", ".", "get", "(", ")", ";", "if", "(", "base64mode", ")", "{", "if", "(", "b", "=", "=", "unshift", ")", "{", "if", "(", "base64bitsWaiting", "(", ")", ")", "return", "malformed", "(", "in", ")", ";", "if", "(", "justShifted", ")", "{", "if", "(", "!", "out", ".", "hasRemaining", "(", ")", ")", "return", "overflow", "(", "in", ")", ";", "out", ".", "put", "(", "(", "char", ")", "shift", ")", ";", "}", "else", "justUnshifted", "=", "true", ";", "setUnshifted", "(", ")", ";", "}", "else", "{", "if", "(", "!", "out", ".", "hasRemaining", "(", ")", ")", "return", "overflow", "(", "in", ")", ";", "CoderResult", "result", "=", "handleBase64", "(", "in", ",", "out", ",", "b", ")", ";", "if", "(", "result", "!", "=", "null", ")", "return", "result", ";", "}", "justShifted", "=", "false", ";", "}", "else", "{", "if", "(", "b", "=", "=", "shift", ")", "{", "base64mode", "=", "true", ";", "if", "(", "justUnshifted", "&", "&", "strict", ")", "return", "malformed", "(", "in", ")", ";", "justShifted", "=", "true", ";", "continue", ";", "}", "if", "(", "!", "out", ".", "hasRemaining", "(", ")", ")", "return", "overflow", "(", "in", ")", ";", "out", ".", "put", "(", "(", "char", ")", "b", ")", ";", "justUnshifted", "=", "false", ";", "}", "}", "return", "CoderResult", ".", "UNDERFLOW", ";", "}", "</s>"]
["<s>", "private", "CoderResult", "overflow", "(", "ByteBuffer", "in", ")", "{", "in", ".", "position", "(", "in", ".", "position", "(", ")", "-", "1", ")", ";", "return", "CoderResult", ".", "OVERFLOW", ";", "}", "</s>"]
["<s>", "private", "CoderResult", "handleBase64", "(", "ByteBuffer", "in", ",", "CharBuffer", "out", ",", "byte", "lastRead", ")", "{", "CoderResult", "result", "=", "null", ";", "int", "sextet", "=", "base64", ".", "getSextet", "(", "lastRead", ")", ";", "if", "(", "sextet", ">", "=", "0", ")", "{", "bitsRead", "+", "=", "<NUM_LIT:6>", ";", "if", "(", "bitsRead", "<", "<NUM_LIT:16>", ")", "{", "tempChar", "+", "=", "sextet", "<", "<", "(", "<NUM_LIT:16>", "-", "bitsRead", ")", ";", "}", "else", "{", "bitsRead", "-", "=", "<NUM_LIT:16>", ";", "tempChar", "+", "=", "sextet", ">", ">", "(", "bitsRead", ")", ";", "out", ".", "put", "(", "(", "char", ")", "tempChar", ")", ";", "tempChar", "=", "(", "sextet", "<", "<", "(", "<NUM_LIT:16>", "-", "bitsRead", ")", ")", "&", "<NUM_LIT>", ";", "}", "}", "else", "{", "if", "(", "strict", ")", "return", "malformed", "(", "in", ")", ";", "out", ".", "put", "(", "(", "char", ")", "lastRead", ")", ";", "if", "(", "base64bitsWaiting", "(", ")", ")", "result", "=", "malformed", "(", "in", ")", ";", "setUnshifted", "(", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "protected", "CoderResult", "implFlush", "(", "CharBuffer", "out", ")", "{", "if", "(", "(", "base64mode", "&", "&", "strict", ")", "|", "|", "base64bitsWaiting", "(", ")", ")", "return", "CoderResult", ".", "malformedForLength", "(", "1", ")", ";", "return", "CoderResult", ".", "UNDERFLOW", ";", "}", "</s>"]
["<s>", "protected", "void", "implReset", "(", ")", "{", "setUnshifted", "(", ")", ";", "justUnshifted", "=", "false", ";", "}", "</s>"]
["<s>", "private", "CoderResult", "malformed", "(", "ByteBuffer", "in", ")", "{", "in", ".", "position", "(", "in", ".", "position", "(", ")", "-", "1", ")", ";", "return", "CoderResult", ".", "malformedForLength", "(", "1", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "base64bitsWaiting", "(", ")", "{", "return", "tempChar", "!", "=", "0", "|", "|", "bitsRead", ">", "=", "<NUM_LIT:6>", ";", "}", "</s>"]
["<s>", "private", "void", "setUnshifted", "(", ")", "{", "base64mode", "=", "false", ";", "bitsRead", "=", "0", ";", "tempChar", "=", "0", ";", "}", "</s>"]
["<s>", "public", "CharsetProvider", "(", ")", "{", "charsets", "=", "Arrays", ".", "asList", "(", "new", "Object", "[", "]", "{", "utf7charset", ",", "imap4charset", ",", "utf7oCharset", "}", ")", ";", "}", "</s>"]
["<s>", "public", "Charset", "charsetForName", "(", "String", "charsetName", ")", "{", "charsetName", "=", "charsetName", ".", "toUpperCase", "(", ")", ";", "for", "(", "Iterator", "iter", "=", "charsets", ".", "iterator", "(", ")", ";", "iter", ".", "hasNext", "(", ")", ";", ")", "{", "Charset", "charset", "=", "(", "Charset", ")", "iter", ".", "next", "(", ")", ";", "if", "(", "charset", ".", "name", "(", ")", ".", "equals", "(", "charsetName", ")", ")", "return", "charset", ";", "}", "for", "(", "Iterator", "iter", "=", "charsets", ".", "iterator", "(", ")", ";", "iter", ".", "hasNext", "(", ")", ";", ")", "{", "Charset", "charset", "=", "(", "Charset", ")", "iter", ".", "next", "(", ")", ";", "if", "(", "charset", ".", "aliases", "(", ")", ".", "contains", "(", "charsetName", ")", ")", "return", "charset", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "Iterator", "charsets", "(", ")", "{", "return", "charsets", ".", "iterator", "(", ")", ";", "}", "</s>"]
["<s>", "UTF7StyleCharsetEncoder", "(", "UTF7StyleCharset", "cs", ",", "Base64Util", "base64", ",", "boolean", "strict", ")", "{", "super", "(", "cs", ",", "AVG_BYTES_PER_CHAR", ",", "MAX_BYTES_PER_CHAR", ")", ";", "this", ".", "cs", "=", "cs", ";", "this", ".", "base64", "=", "base64", ";", "this", ".", "strict", "=", "strict", ";", "this", ".", "shift", "=", "cs", ".", "shift", "(", ")", ";", "this", ".", "unshift", "=", "cs", ".", "unshift", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "implReset", "(", ")", "{", "base64mode", "=", "false", ";", "sextet", "=", "0", ";", "bitsToOutput", "=", "0", ";", "}", "</s>"]
["<s>", "protected", "CoderResult", "implFlush", "(", "ByteBuffer", "out", ")", "{", "if", "(", "base64mode", ")", "{", "if", "(", "out", ".", "remaining", "(", ")", "<", "<NUM_LIT:2>", ")", "return", "CoderResult", ".", "OVERFLOW", ";", "if", "(", "bitsToOutput", "!", "=", "0", ")", "out", ".", "put", "(", "base64", ".", "getChar", "(", "sextet", ")", ")", ";", "out", ".", "put", "(", "unshift", ")", ";", "}", "return", "CoderResult", ".", "UNDERFLOW", ";", "}", "</s>"]
["<s>", "protected", "CoderResult", "encodeLoop", "(", "CharBuffer", "in", ",", "ByteBuffer", "out", ")", "{", "while", "(", "in", ".", "hasRemaining", "(", ")", ")", "{", "if", "(", "out", ".", "remaining", "(", ")", "<", "<NUM_LIT:4>", ")", "return", "CoderResult", ".", "OVERFLOW", ";", "char", "ch", "=", "in", ".", "get", "(", ")", ";", "if", "(", "cs", ".", "canEncodeDirectly", "(", "ch", ")", ")", "{", "unshift", "(", "out", ",", "ch", ")", ";", "out", ".", "put", "(", "(", "byte", ")", "ch", ")", ";", "}", "else", "if", "(", "!", "base64mode", "&", "&", "ch", "=", "=", "shift", ")", "{", "out", ".", "put", "(", "shift", ")", ";", "out", ".", "put", "(", "unshift", ")", ";", "}", "else", "encodeBase64", "(", "ch", ",", "out", ")", ";", "}", "if", "(", "base64mode", "&", "&", "useUglyHackToForceCallToFlushInJava5", "&", "&", "out", ".", "limit", "(", ")", "!", "=", "MAX_BYTES_PER_CHAR", "*", "in", ".", "limit", "(", ")", ")", "return", "CoderResult", ".", "OVERFLOW", ";", "return", "CoderResult", ".", "UNDERFLOW", ";", "}", "</s>"]
["<s>", "private", "void", "unshift", "(", "ByteBuffer", "out", ",", "char", "ch", ")", "{", "if", "(", "!", "base64mode", ")", "return", ";", "if", "(", "bitsToOutput", "!", "=", "0", ")", "out", ".", "put", "(", "base64", ".", "getChar", "(", "sextet", ")", ")", ";", "if", "(", "base64", ".", "contains", "(", "ch", ")", "|", "|", "ch", "=", "=", "unshift", "|", "|", "strict", ")", "out", ".", "put", "(", "unshift", ")", ";", "base64mode", "=", "false", ";", "sextet", "=", "0", ";", "bitsToOutput", "=", "0", ";", "}", "</s>"]
["<s>", "private", "void", "encodeBase64", "(", "char", "ch", ",", "ByteBuffer", "out", ")", "{", "if", "(", "!", "base64mode", ")", "out", ".", "put", "(", "shift", ")", ";", "base64mode", "=", "true", ";", "bitsToOutput", "+", "=", "<NUM_LIT:16>", ";", "while", "(", "bitsToOutput", ">", "=", "<NUM_LIT:6>", ")", "{", "bitsToOutput", "-", "=", "<NUM_LIT:6>", ";", "sextet", "+", "=", "(", "ch", ">", ">", "bitsToOutput", ")", ";", "sextet", "&", "=", "<NUM_LIT>", ";", "out", ".", "put", "(", "base64", ".", "getChar", "(", "sextet", ")", ")", ";", "sextet", "=", "0", ";", "}", "sextet", "=", "(", "ch", "<", "<", "(", "<NUM_LIT:6>", "-", "bitsToOutput", ")", ")", "&", "<NUM_LIT>", ";", "}", "</s>"]
["<s>", "protected", "UTF7StyleCharset", "(", "String", "canonicalName", ",", "String", "[", "]", "aliases", ",", "String", "alphabet", ",", "boolean", "strict", ")", "{", "super", "(", "canonicalName", ",", "aliases", ")", ";", "this", ".", "base64", "=", "new", "Base64Util", "(", "alphabet", ")", ";", "this", ".", "strict", "=", "strict", ";", "}", "</s>"]
["<s>", "public", "boolean", "contains", "(", "final", "Charset", "cs", ")", "{", "return", "CONTAINED", ".", "contains", "(", "cs", ".", "name", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "CharsetDecoder", "newDecoder", "(", ")", "{", "return", "new", "UTF7StyleCharsetDecoder", "(", "this", ",", "base64", ",", "strict", ")", ";", "}", "</s>"]
["<s>", "public", "CharsetEncoder", "newEncoder", "(", ")", "{", "return", "new", "UTF7StyleCharsetEncoder", "(", "this", ",", "base64", ",", "strict", ")", ";", "}", "</s>"]
["<s>", "abstract", "boolean", "canEncodeDirectly", "(", "char", "ch", ")", ";", "</s>"]
["<s>", "abstract", "byte", "shift", "(", ")", ";", "</s>"]
["<s>", "abstract", "byte", "unshift", "(", ")", ";", "</s>"]
["<s>", "Base64Util", "(", "final", "String", "alphabet", ")", "{", "this", ".", "alphabet", "=", "alphabet", ".", "toCharArray", "(", ")", ";", "if", "(", "alphabet", ".", "length", "(", ")", "!", "=", "ALPHABET_LENGTH", ")", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "alphabet", ".", "length", "(", ")", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "inverseAlphabet", "=", "new", "int", "[", "<NUM_LIT>", "]", ";", "Arrays", ".", "fill", "(", "inverseAlphabet", ",", "-", "1", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "this", ".", "alphabet", ".", "length", ";", "i", "+", "+", ")", "{", "final", "char", "ch", "=", "this", ".", "alphabet", "[", "i", "]", ";", "if", "(", "ch", ">", "=", "<NUM_LIT>", ")", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "ch", ")", ";", "inverseAlphabet", "[", "ch", "]", "=", "i", ";", "}", "}", "</s>"]
["<s>", "int", "getSextet", "(", "final", "byte", "ch", ")", "{", "if", "(", "ch", ">", "=", "<NUM_LIT>", ")", "return", "-", "1", ";", "return", "inverseAlphabet", "[", "ch", "]", ";", "}", "</s>"]
["<s>", "boolean", "contains", "(", "final", "char", "ch", ")", "{", "if", "(", "ch", ">", "=", "<NUM_LIT>", ")", "return", "false", ";", "return", "inverseAlphabet", "[", "ch", "]", ">", "=", "0", ";", "}", "</s>"]
["<s>", "byte", "getChar", "(", "final", "int", "sextet", ")", "{", "return", "(", "byte", ")", "alphabet", "[", "sextet", "]", ";", "}", "</s>"]
["<s>", "ModifiedUTF7Charset", "(", "String", "name", ",", "String", "[", "]", "aliases", ")", "{", "super", "(", "name", ",", "aliases", ",", "MODIFIED_BASE64_ALPHABET", ",", "true", ")", ";", "}", "</s>"]
["<s>", "boolean", "canEncodeDirectly", "(", "char", "ch", ")", "{", "if", "(", "ch", "=", "=", "shift", "(", ")", ")", "return", "false", ";", "return", "ch", ">", "=", "<NUM_LIT>", "&", "&", "ch", "<", "=", "<NUM_LIT>", ";", "}", "</s>"]
["<s>", "byte", "shift", "(", ")", "{", "return", "<CHAR_LIT>", ";", "}", "</s>"]
["<s>", "byte", "unshift", "(", ")", "{", "return", "<CHAR_LIT:->", ";", "}", "</s>"]
["<s>", "UTF7Charset", "(", "String", "name", ",", "String", "[", "]", "aliases", ",", "boolean", "includeOptional", ")", "{", "super", "(", "name", ",", "aliases", ",", "BASE64_ALPHABET", ",", "false", ")", ";", "if", "(", "includeOptional", ")", "this", ".", "directlyEncoded", "=", "SET_D", "+", "SET_O", "+", "RULE_3", ";", "else", "this", ".", "directlyEncoded", "=", "SET_D", "+", "RULE_3", ";", "}", "</s>"]
["<s>", "boolean", "canEncodeDirectly", "(", "char", "ch", ")", "{", "return", "directlyEncoded", ".", "indexOf", "(", "ch", ")", ">", "=", "0", ";", "}", "</s>"]
["<s>", "byte", "shift", "(", ")", "{", "return", "<CHAR_LIT>", ";", "}", "</s>"]
["<s>", "byte", "unshift", "(", ")", "{", "return", "<CHAR_LIT:->", ";", "}", "</s>"]
["<s>", "public", "EasOutboxService", "(", "Context", "_context", ",", "Mailbox", "_mailbox", ")", "{", "super", "(", "_context", ",", "_mailbox", ")", ";", "}", "</s>"]
["<s>", "private", "void", "sendCallback", "(", "long", "msgId", ",", "String", "subject", ",", "int", "status", ")", "{", "try", "{", "SyncManager", ".", "callback", "(", ")", ".", "sendMessageStatus", "(", "msgId", ",", "subject", ",", "status", ",", "0", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "int", "sendMessage", "(", "File", "cacheDir", ",", "long", "msgId", ")", "throws", "IOException", ",", "MessagingException", "{", "int", "result", ";", "sendCallback", "(", "msgId", ",", "null", ",", "EmailServiceStatus", ".", "IN_PROGRESS", ")", ";", "File", "tmpFile", "=", "File", ".", "createTempFile", "(", "\"", "<STR_LIT:_>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "cacheDir", ")", ";", "try", "{", "String", "[", "]", "cols", "=", "getRowColumns", "(", "Message", ".", "CONTENT_URI", ",", "msgId", ",", "MessageColumns", ".", "FLAGS", ",", "MessageColumns", ".", "SUBJECT", ")", ";", "int", "flags", "=", "Integer", ".", "parseInt", "(", "cols", "[", "0", "]", ")", ";", "String", "subject", "=", "cols", "[", "1", "]", ";", "boolean", "reply", "=", "(", "flags", "&", "Message", ".", "FLAG_TYPE_REPLY", ")", "!", "=", "0", ";", "boolean", "forward", "=", "(", "flags", "&", "Message", ".", "FLAG_TYPE_FORWARD", ")", "!", "=", "0", ";", "String", "itemId", "=", "null", ";", "String", "collectionId", "=", "null", ";", "if", "(", "reply", "|", "|", "forward", ")", "{", "cols", "=", "getRowColumns", "(", "Body", ".", "CONTENT_URI", ",", "BODY_SOURCE_PROJECTION", ",", "WHERE_MESSAGE_KEY", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "msgId", ")", "}", ")", ";", "if", "(", "cols", "!", "=", "null", ")", "{", "long", "refId", "=", "Long", ".", "parseLong", "(", "cols", "[", "0", "]", ")", ";", "cols", "=", "getRowColumns", "(", "Message", ".", "CONTENT_URI", ",", "refId", ",", "SyncColumns", ".", "SERVER_ID", ",", "MessageColumns", ".", "MAILBOX_KEY", ")", ";", "if", "(", "cols", "!", "=", "null", ")", "{", "itemId", "=", "cols", "[", "0", "]", ";", "long", "boxId", "=", "Long", ".", "parseLong", "(", "cols", "[", "1", "]", ")", ";", "cols", "=", "getRowColumns", "(", "Mailbox", ".", "CONTENT_URI", ",", "boxId", ",", "MailboxColumns", ".", "SERVER_ID", ")", ";", "if", "(", "cols", "!", "=", "null", ")", "{", "collectionId", "=", "cols", "[", "0", "]", ";", "}", "}", "}", "}", "boolean", "smartSend", "=", "itemId", "!", "=", "null", "&", "&", "collectionId", "!", "=", "null", ";", "FileOutputStream", "fileStream", "=", "new", "FileOutputStream", "(", "tmpFile", ")", ";", "Rfc822Output", ".", "writeTo", "(", "mContext", ",", "msgId", ",", "fileStream", ",", "!", "smartSend", ",", "true", ")", ";", "fileStream", ".", "close", "(", ")", ";", "FileInputStream", "inputStream", "=", "new", "FileInputStream", "(", "tmpFile", ")", ";", "InputStreamEntity", "inputEntity", "=", "new", "InputStreamEntity", "(", "inputStream", ",", "tmpFile", ".", "length", "(", ")", ")", ";", "String", "cmd", "=", "\"", "<STR_LIT>", "\"", ";", "if", "(", "smartSend", ")", "{", "cmd", "=", "reply", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", ";", "cmd", "+", "=", "\"", "<STR_LIT>", "\"", "+", "itemId", "+", "\"", "<STR_LIT>", "\"", "+", "collectionId", "+", "\"", "<STR_LIT>", "\"", ";", "}", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "cmd", ")", ";", "HttpResponse", "resp", "=", "sendHttpClientPost", "(", "cmd", ",", "inputEntity", ",", "SEND_MAIL_TIMEOUT", ")", ";", "inputStream", ".", "close", "(", ")", ";", "int", "code", "=", "resp", ".", "getStatusLine", "(", ")", ".", "getStatusCode", "(", ")", ";", "if", "(", "code", "=", "=", "HttpStatus", ".", "SC_OK", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mContentResolver", ".", "delete", "(", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "msgId", ")", ",", "null", ",", "null", ")", ";", "result", "=", "EmailServiceStatus", ".", "SUCCESS", ";", "sendCallback", "(", "-", "1", ",", "subject", ",", "EmailServiceStatus", ".", "SUCCESS", ")", ";", "}", "else", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "code", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "SyncColumns", ".", "SERVER_ID", ",", "SEND_FAILED", ")", ";", "Message", ".", "update", "(", "mContext", ",", "Message", ".", "CONTENT_URI", ",", "msgId", ",", "cv", ")", ";", "result", "=", "EmailServiceStatus", ".", "REMOTE_EXCEPTION", ";", "if", "(", "isAuthError", "(", "code", ")", ")", "{", "result", "=", "EmailServiceStatus", ".", "LOGIN_FAILED", ";", "}", "sendCallback", "(", "msgId", ",", "null", ",", "result", ")", ";", "}", "}", "catch", "(", "IOException", "e", ")", "{", "sendCallback", "(", "msgId", ",", "null", ",", "EmailServiceStatus", ".", "CONNECTION_ERROR", ")", ";", "throw", "e", ";", "}", "finally", "{", "if", "(", "tmpFile", ".", "exists", "(", ")", ")", "{", "tmpFile", ".", "delete", "(", ")", ";", "}", "}", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "setupService", "(", ")", ";", "File", "cacheDir", "=", "mContext", ".", "getCacheDir", "(", ")", ";", "try", "{", "mDeviceId", "=", "SyncManager", ".", "getDeviceId", "(", ")", ";", "Cursor", "c", "=", "mContext", ".", "getContentResolver", "(", ")", ".", "query", "(", "Message", ".", "CONTENT_URI", ",", "Message", ".", "ID_COLUMN_PROJECTION", ",", "MAILBOX_KEY_AND_NOT_SEND_FAILED", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mMailbox", ".", "mId", ")", "}", ",", "null", ")", ";", "try", "{", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "msgId", "=", "c", ".", "getLong", "(", "0", ")", ";", "if", "(", "msgId", "!", "=", "0", ")", "{", "int", "result", "=", "sendMessage", "(", "cacheDir", ",", "msgId", ")", ";", "if", "(", "result", "=", "=", "EmailServiceStatus", ".", "LOGIN_FAILED", ")", "{", "mExitStatus", "=", "EXIT_LOGIN_FAILURE", ";", "return", ";", "}", "else", "if", "(", "result", "=", "=", "EmailServiceStatus", ".", "REMOTE_EXCEPTION", ")", "{", "mExitStatus", "=", "EXIT_EXCEPTION", ";", "return", ";", "}", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "mExitStatus", "=", "EXIT_DONE", ";", "}", "catch", "(", "IOException", "e", ")", "{", "mExitStatus", "=", "EXIT_IO_ERROR", ";", "}", "catch", "(", "Exception", "e", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "mExitStatus", "=", "EXIT_EXCEPTION", ";", "}", "finally", "{", "userLog", "(", "mMailbox", ".", "mDisplayName", ",", "\"", "<STR_LIT>", "\"", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "mExitStatus", ")", ";", "SyncManager", ".", "done", "(", "this", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "loadAttachmentStatus", "(", "long", "messageId", ",", "long", "attachmentId", ",", "int", "statusCode", ",", "int", "progress", ")", "throws", "RemoteException", "{", "IEmailServiceCallback", "cb", "=", "INSTANCE", "=", "=", "null", "?", "null", ":", "INSTANCE", ".", "mCallback", ";", "if", "(", "cb", "!", "=", "null", ")", "{", "cb", ".", "loadAttachmentStatus", "(", "messageId", ",", "attachmentId", ",", "statusCode", ",", "progress", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "sendMessageStatus", "(", "long", "messageId", ",", "String", "subject", ",", "int", "statusCode", ",", "int", "progress", ")", "throws", "RemoteException", "{", "IEmailServiceCallback", "cb", "=", "INSTANCE", "=", "=", "null", "?", "null", ":", "INSTANCE", ".", "mCallback", ";", "if", "(", "cb", "!", "=", "null", ")", "{", "cb", ".", "sendMessageStatus", "(", "messageId", ",", "subject", ",", "statusCode", ",", "progress", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "syncMailboxListStatus", "(", "long", "accountId", ",", "int", "statusCode", ",", "int", "progress", ")", "throws", "RemoteException", "{", "IEmailServiceCallback", "cb", "=", "INSTANCE", "=", "=", "null", "?", "null", ":", "INSTANCE", ".", "mCallback", ";", "if", "(", "cb", "!", "=", "null", ")", "{", "cb", ".", "syncMailboxListStatus", "(", "accountId", ",", "statusCode", ",", "progress", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "syncMailboxStatus", "(", "long", "mailboxId", ",", "int", "statusCode", ",", "int", "progress", ")", "throws", "RemoteException", "{", "IEmailServiceCallback", "cb", "=", "INSTANCE", "=", "=", "null", "?", "null", ":", "INSTANCE", ".", "mCallback", ";", "if", "(", "cb", "!", "=", "null", ")", "{", "cb", ".", "syncMailboxStatus", "(", "mailboxId", ",", "statusCode", ",", "progress", ")", ";", "}", "else", "if", "(", "INSTANCE", "!", "=", "null", ")", "{", "INSTANCE", ".", "log", "(", "\"", "<STR_LIT>", "\"", "+", "mailboxId", "+", "\"", "<STR_LIT>", "\"", "+", "statusCode", ")", ";", "}", "}", "</s>"]
["<s>", "public", "int", "validate", "(", "String", "protocol", ",", "String", "host", ",", "String", "userName", ",", "String", "password", ",", "int", "port", ",", "boolean", "ssl", ",", "boolean", "trustCertificates", ")", "throws", "RemoteException", "{", "try", "{", "AbstractSyncService", ".", "validate", "(", "EasSyncService", ".", "class", ",", "host", ",", "userName", ",", "password", ",", "port", ",", "ssl", ",", "trustCertificates", ",", "SyncManager", ".", "this", ")", ";", "return", "MessagingException", ".", "NO_ERROR", ";", "}", "catch", "(", "MessagingException", "e", ")", "{", "return", "e", ".", "getExceptionType", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "startSync", "(", "long", "mailboxId", ")", "throws", "RemoteException", "{", "checkSyncManagerServiceRunning", "(", ")", ";", "Mailbox", "m", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "INSTANCE", ",", "mailboxId", ")", ";", "if", "(", "m", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_OUTBOX", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "SyncColumns", ".", "SERVER_ID", ",", "0", ")", ";", "INSTANCE", ".", "getContentResolver", "(", ")", ".", "update", "(", "Message", ".", "CONTENT_URI", ",", "cv", ",", "WHERE_MAILBOX_KEY", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mailboxId", ")", "}", ")", ";", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "else", "if", "(", "m", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_DRAFTS", ")", "{", "return", ";", "}", "startManualSync", "(", "mailboxId", ",", "SyncManager", ".", "SYNC_SERVICE_START_SYNC", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "stopSync", "(", "long", "mailboxId", ")", "throws", "RemoteException", "{", "stopManualSync", "(", "mailboxId", ")", ";", "}", "</s>"]
["<s>", "public", "void", "loadAttachment", "(", "long", "attachmentId", ",", "String", "destinationFile", ",", "String", "contentUriString", ")", "throws", "RemoteException", "{", "Attachment", "att", "=", "Attachment", ".", "restoreAttachmentWithId", "(", "SyncManager", ".", "this", ",", "attachmentId", ")", ";", "partRequest", "(", "new", "PartRequest", "(", "att", ",", "destinationFile", ",", "contentUriString", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "updateFolderList", "(", "long", "accountId", ")", "throws", "RemoteException", "{", "reloadFolderList", "(", "SyncManager", ".", "this", ",", "accountId", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "hostChanged", "(", "long", "accountId", ")", "throws", "RemoteException", "{", "if", "(", "INSTANCE", "!", "=", "null", ")", "{", "synchronized", "(", "INSTANCE", ".", "mSyncErrorMap", ")", "{", "for", "(", "long", "mailboxId", ":", "INSTANCE", ".", "mSyncErrorMap", ".", "keySet", "(", ")", ")", "{", "SyncError", "error", "=", "INSTANCE", ".", "mSyncErrorMap", ".", "get", "(", "mailboxId", ")", ";", "Mailbox", "m", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "INSTANCE", ",", "mailboxId", ")", ";", "if", "(", "m", ".", "mAccountKey", "=", "=", "accountId", ")", "{", "error", ".", "fatal", "=", "false", ";", "error", ".", "holdEndTime", "=", "0", ";", "}", "}", "}", "INSTANCE", ".", "stopAccountSyncs", "(", "accountId", ",", "true", ")", ";", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "setLogging", "(", "int", "on", ")", "throws", "RemoteException", "{", "Eas", ".", "setUserDebug", "(", "on", ")", ";", "}", "</s>"]
["<s>", "public", "void", "loadMore", "(", "long", "messageId", ")", "throws", "RemoteException", "{", "}", "</s>"]
["<s>", "public", "boolean", "createFolder", "(", "long", "accountId", ",", "String", "name", ")", "throws", "RemoteException", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "deleteFolder", "(", "long", "accountId", ",", "String", "name", ")", "throws", "RemoteException", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "renameFolder", "(", "long", "accountId", ",", "String", "oldName", ",", "String", "newName", ")", "throws", "RemoteException", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "void", "setCallback", "(", "IEmailServiceCallback", "cb", ")", "throws", "RemoteException", "{", "if", "(", "mCallback", "!", "=", "null", ")", "{", "mCallbackList", ".", "unregister", "(", "mCallback", ")", ";", "}", "mCallback", "=", "cb", ";", "mCallbackList", ".", "register", "(", "cb", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "contains", "(", "long", "id", ")", "{", "for", "(", "Account", "account", ":", "this", ")", "{", "if", "(", "account", ".", "mId", "=", "=", "id", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "Account", "getById", "(", "long", "id", ")", "{", "for", "(", "Account", "account", ":", "this", ")", "{", "if", "(", "account", ".", "mId", "=", "=", "id", ")", "{", "return", "account", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "AccountObserver", "(", "Handler", "handler", ")", "{", "super", "(", "handler", ")", ";", "Cursor", "c", "=", "getContentResolver", "(", ")", ".", "query", "(", "Account", ".", "CONTENT_URI", ",", "Account", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "collectEasAccounts", "(", "c", ",", "mAccounts", ")", ";", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "Context", "context", "=", "getContext", "(", ")", ";", "for", "(", "Account", "account", ":", "mAccounts", ")", "{", "int", "cnt", "=", "Mailbox", ".", "count", "(", "context", ",", "Mailbox", ".", "CONTENT_URI", ",", "\"", "<STR_LIT>", "\"", "+", "account", ".", "mId", ",", "null", ")", ";", "if", "(", "cnt", "=", "=", "0", ")", "{", "addAccountMailbox", "(", "account", ".", "mId", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "String", "getSyncableEasMailboxWhere", "(", ")", "{", "if", "(", "mSyncableEasMailboxSelector", "=", "=", "null", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", "WHERE_NOT_INTERVAL_NEVER_AND_ACCOUNT_KEY_IN", ")", ";", "boolean", "first", "=", "true", ";", "for", "(", "Account", "account", ":", "mAccounts", ")", "{", "if", "(", "!", "first", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:U+002C>", ")", ";", "}", "else", "{", "first", "=", "false", ";", "}", "sb", ".", "append", "(", "account", ".", "mId", ")", ";", "}", "sb", ".", "append", "(", "<CHAR_LIT:)>", ")", ";", "mSyncableEasMailboxSelector", "=", "sb", ".", "toString", "(", ")", ";", "}", "return", "mSyncableEasMailboxSelector", ";", "}", "</s>"]
["<s>", "public", "String", "getAccountKeyWhere", "(", ")", "{", "if", "(", "mEasAccountSelector", "=", "=", "null", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", "ACCOUNT_KEY_IN", ")", ";", "boolean", "first", "=", "true", ";", "for", "(", "Account", "account", ":", "mAccounts", ")", "{", "if", "(", "!", "first", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:U+002C>", ")", ";", "}", "else", "{", "first", "=", "false", ";", "}", "sb", ".", "append", "(", "account", ".", "mId", ")", ";", "}", "sb", ".", "append", "(", "<CHAR_LIT:)>", ")", ";", "mEasAccountSelector", "=", "sb", ".", "toString", "(", ")", ";", "}", "return", "mEasAccountSelector", ";", "}", "</s>"]
["<s>", "private", "boolean", "syncParametersChanged", "(", "Account", "account", ")", "{", "long", "accountId", "=", "account", ".", "mId", ";", "account", "=", "Account", ".", "restoreAccountWithId", "(", "getContext", "(", ")", ",", "accountId", ")", ";", "for", "(", "Account", "oldAccount", ":", "mAccounts", ")", "{", "if", "(", "oldAccount", ".", "mId", "=", "=", "accountId", ")", "{", "return", "oldAccount", ".", "mSyncInterval", "!", "=", "account", ".", "mSyncInterval", "|", "|", "oldAccount", ".", "mSyncLookback", "!", "=", "account", ".", "mSyncLookback", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onChange", "(", "boolean", "selfChange", ")", "{", "maybeStartSyncManagerThread", "(", ")", ";", "AccountList", "currentAccounts", "=", "new", "AccountList", "(", ")", ";", "Cursor", "c", "=", "getContentResolver", "(", ")", ".", "query", "(", "Account", ".", "CONTENT_URI", ",", "Account", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "collectEasAccounts", "(", "c", ",", "currentAccounts", ")", ";", "for", "(", "Account", "account", ":", "mAccounts", ")", "{", "if", "(", "!", "currentAccounts", ".", "contains", "(", "account", ".", "mId", ")", ")", "{", "stopAccountSyncs", "(", "account", ".", "mId", ",", "true", ")", ";", "android", ".", "accounts", ".", "Account", "acct", "=", "new", "android", ".", "accounts", ".", "Account", "(", "account", ".", "mEmailAddress", ",", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ")", ";", "AccountManager", ".", "get", "(", "SyncManager", ".", "this", ")", ".", "removeAccount", "(", "acct", ",", "null", ",", "null", ")", ";", "mSyncableEasMailboxSelector", "=", "null", ";", "mEasAccountSelector", "=", "null", ";", "}", "else", "{", "if", "(", "syncParametersChanged", "(", "account", ")", ")", "{", "Account", "updatedAccount", "=", "Account", ".", "restoreAccountWithId", "(", "getContext", "(", ")", ",", "account", ".", "mId", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "MailboxColumns", ".", "SYNC_INTERVAL", ",", "updatedAccount", ".", "mSyncInterval", ")", ";", "getContentResolver", "(", ")", ".", "update", "(", "Mailbox", ".", "CONTENT_URI", ",", "cv", ",", "WHERE_IN_ACCOUNT_AND_PUSHABLE", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "account", ".", "mId", ")", "}", ")", ";", "INSTANCE", ".", "log", "(", "\"", "<STR_LIT>", "\"", "+", "account", ".", "mDisplayName", "+", "\"", "<STR_LIT>", "\"", ")", ";", "stopAccountSyncs", "(", "account", ".", "mId", ",", "true", ")", ";", "}", "}", "}", "for", "(", "Account", "account", ":", "currentAccounts", ")", "{", "if", "(", "!", "mAccounts", ".", "contains", "(", "account", ".", "mId", ")", ")", "{", "addAccountMailbox", "(", "account", ".", "mId", ")", ";", "HostAuth", "ha", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "getContext", "(", ")", ",", "account", ".", "mHostAuthKeyRecv", ")", ";", "account", ".", "mHostAuthRecv", "=", "ha", ";", "mAccounts", ".", "add", "(", "account", ")", ";", "mSyncableEasMailboxSelector", "=", "null", ";", "mEasAccountSelector", "=", "null", ";", "}", "}", "mAccounts", "=", "currentAccounts", ";", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "void", "collectEasAccounts", "(", "Cursor", "c", ",", "ArrayList", "<", "Account", ">", "accounts", ")", "{", "Context", "context", "=", "getContext", "(", ")", ";", "if", "(", "context", "=", "=", "null", ")", "return", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "hostAuthId", "=", "c", ".", "getLong", "(", "Account", ".", "CONTENT_HOST_AUTH_KEY_RECV_COLUMN", ")", ";", "if", "(", "hostAuthId", ">", "0", ")", "{", "HostAuth", "ha", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "context", ",", "hostAuthId", ")", ";", "if", "(", "ha", "!", "=", "null", "&", "&", "ha", ".", "mProtocol", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "Account", "account", "=", "new", "Account", "(", ")", ".", "restore", "(", "c", ")", ";", "account", ".", "mHostAuthRecv", "=", "ha", ";", "accounts", ".", "add", "(", "account", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "private", "void", "addAccountMailbox", "(", "long", "acctId", ")", "{", "Account", "acct", "=", "Account", ".", "restoreAccountWithId", "(", "getContext", "(", ")", ",", "acctId", ")", ";", "Mailbox", "main", "=", "new", "Mailbox", "(", ")", ";", "main", ".", "mDisplayName", "=", "Eas", ".", "ACCOUNT_MAILBOX", ";", "main", ".", "mServerId", "=", "Eas", ".", "ACCOUNT_MAILBOX", "+", "System", ".", "nanoTime", "(", ")", ";", "main", ".", "mAccountKey", "=", "acct", ".", "mId", ";", "main", ".", "mType", "=", "Mailbox", ".", "TYPE_EAS_ACCOUNT_MAILBOX", ";", "main", ".", "mSyncInterval", "=", "Mailbox", ".", "CHECK_INTERVAL_PUSH", ";", "main", ".", "mFlagVisible", "=", "false", ";", "main", ".", "save", "(", "getContext", "(", ")", ")", ";", "INSTANCE", ".", "log", "(", "\"", "<STR_LIT>", "\"", "+", "acct", ".", "mDisplayName", ")", ";", "}", "</s>"]
["<s>", "public", "MailboxObserver", "(", "Handler", "handler", ")", "{", "super", "(", "handler", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onChange", "(", "boolean", "selfChange", ")", "{", "if", "(", "!", "selfChange", ")", "{", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "SyncedMessageObserver", "(", "Handler", "handler", ")", "{", "super", "(", "handler", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onChange", "(", "boolean", "selfChange", ")", "{", "INSTANCE", ".", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "alarmManager", ".", "set", "(", "AlarmManager", ".", "RTC_WAKEUP", ",", "System", ".", "currentTimeMillis", "(", ")", "+", "<NUM_LIT:10>", "*", "SECONDS", ",", "syncAlarmPendingIntent", ")", ";", "}", "</s>"]
["<s>", "public", "MessageObserver", "(", "Handler", "handler", ")", "{", "super", "(", "handler", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onChange", "(", "boolean", "selfChange", ")", "{", "if", "(", "!", "selfChange", ")", "{", "kick", "(", "null", ")", ";", "}", "}", "</s>"]
["<s>", "static", "public", "IEmailServiceCallback", "callback", "(", ")", "{", "return", "sCallbackProxy", ";", "}", "</s>"]
["<s>", "static", "public", "AccountList", "getAccountList", "(", ")", "{", "if", "(", "INSTANCE", "!", "=", "null", ")", "{", "return", "INSTANCE", ".", "mAccountObserver", ".", "mAccounts", ";", "}", "else", "{", "return", "EMPTY_ACCOUNT_LIST", ";", "}", "}", "</s>"]
["<s>", "static", "public", "String", "getEasAccountSelector", "(", ")", "{", "if", "(", "INSTANCE", "!", "=", "null", ")", "{", "return", "INSTANCE", ".", "mAccountObserver", ".", "getAccountKeyWhere", "(", ")", ";", "}", "else", "{", "return", "null", ";", "}", "}", "</s>"]
["<s>", "private", "Account", "getAccountById", "(", "long", "accountId", ")", "{", "return", "mAccountObserver", ".", "mAccounts", ".", "getById", "(", "accountId", ")", ";", "}", "</s>"]
["<s>", "SyncError", "(", "int", "_reason", ",", "boolean", "_fatal", ")", "{", "reason", "=", "_reason", ";", "fatal", "=", "_fatal", ";", "}", "</s>"]
["<s>", "void", "escalate", "(", ")", "{", "if", "(", "holdDelay", "<", "HOLD_DELAY_MAXIMUM", ")", "{", "holdDelay", "*", "=", "<NUM_LIT:2>", ";", "}", "holdEndTime", "=", "System", ".", "currentTimeMillis", "(", ")", "+", "holdDelay", ";", "}", "</s>"]
["<s>", "public", "void", "onStatusChanged", "(", "int", "which", ")", "{", "if", "(", "INSTANCE", "!", "=", "null", ")", "{", "checkPIMSyncSettings", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "onAccountsUpdated", "(", "android", ".", "accounts", ".", "Account", "[", "]", "accounts", ")", "{", "checkWithAccountManager", "(", ")", ";", "}", "</s>"]
["<s>", "static", "public", "void", "smLog", "(", "String", "str", ")", "{", "if", "(", "INSTANCE", "!", "=", "null", ")", "{", "INSTANCE", ".", "log", "(", "str", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "void", "log", "(", "String", "str", ")", "{", "if", "(", "Eas", ".", "USER_LOG", ")", "{", "Log", ".", "d", "(", "TAG", ",", "str", ")", ";", "if", "(", "Eas", ".", "FILE_LOG", ")", "{", "FileLogger", ".", "log", "(", "TAG", ",", "str", ")", ";", "}", "}", "}", "</s>"]
["<s>", "protected", "void", "alwaysLog", "(", "String", "str", ")", "{", "if", "(", "!", "Eas", ".", "USER_LOG", ")", "{", "Log", ".", "d", "(", "TAG", ",", "str", ")", ";", "}", "else", "{", "log", "(", "str", ")", ";", "}", "}", "</s>"]
["<s>", "static", "public", "String", "getDeviceId", "(", ")", "throws", "IOException", "{", "return", "getDeviceId", "(", "null", ")", ";", "}", "</s>"]
["<s>", "static", "public", "synchronized", "String", "getDeviceId", "(", "Context", "context", ")", "throws", "IOException", "{", "if", "(", "sDeviceId", "!", "=", "null", ")", "{", "return", "sDeviceId", ";", "}", "else", "if", "(", "INSTANCE", "=", "=", "null", "&", "&", "context", "=", "=", "null", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "context", "=", "=", "null", ")", "{", "context", "=", "INSTANCE", ";", "}", "try", "{", "File", "f", "=", "context", ".", "getFileStreamPath", "(", "\"", "<STR_LIT:Name>", "\"", ")", ";", "BufferedReader", "rdr", "=", "null", ";", "String", "id", ";", "if", "(", "f", ".", "exists", "(", ")", "&", "&", "f", ".", "canRead", "(", ")", ")", "{", "rdr", "=", "new", "BufferedReader", "(", "new", "FileReader", "(", "f", ")", ",", "<NUM_LIT>", ")", ";", "id", "=", "rdr", ".", "readLine", "(", ")", ";", "rdr", ".", "close", "(", ")", ";", "return", "id", ";", "}", "else", "if", "(", "f", ".", "createNewFile", "(", ")", ")", "{", "BufferedWriter", "w", "=", "new", "BufferedWriter", "(", "new", "FileWriter", "(", "f", ")", ",", "<NUM_LIT>", ")", ";", "id", "=", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", ";", "w", ".", "write", "(", "id", ")", ";", "w", ".", "close", "(", ")", ";", "sDeviceId", "=", "id", ";", "return", "id", ";", "}", "}", "catch", "(", "IOException", "e", ")", "{", "}", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "IBinder", "onBind", "(", "Intent", "arg0", ")", "{", "return", "mBinder", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", ")", "{", "alwaysLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "INSTANCE", "=", "=", "null", ")", "{", "INSTANCE", "=", "this", ";", "mResolver", "=", "getContentResolver", "(", ")", ";", "mAccountObserver", "=", "new", "AccountObserver", "(", "mHandler", ")", ";", "mResolver", ".", "registerContentObserver", "(", "Account", ".", "CONTENT_URI", ",", "true", ",", "mAccountObserver", ")", ";", "mMailboxObserver", "=", "new", "MailboxObserver", "(", "mHandler", ")", ";", "mSyncedMessageObserver", "=", "new", "SyncedMessageObserver", "(", "mHandler", ")", ";", "mMessageObserver", "=", "new", "MessageObserver", "(", "mHandler", ")", ";", "mSyncStatusObserver", "=", "new", "EasSyncStatusObserver", "(", ")", ";", "}", "else", "{", "alwaysLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "sDeviceId", "=", "=", "null", ")", "{", "try", "{", "getDeviceId", "(", "this", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "onStartCommand", "(", "Intent", "intent", ",", "int", "flags", ",", "int", "startId", ")", "{", "alwaysLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "maybeStartSyncManagerThread", "(", ")", ";", "if", "(", "sServiceThread", "=", "=", "null", ")", "{", "alwaysLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "stopSelf", "(", ")", ";", "}", "return", "Service", ".", "START_STICKY", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onDestroy", "(", ")", "{", "alwaysLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "INSTANCE", "!", "=", "null", ")", "{", "INSTANCE", "=", "null", ";", "mResolver", ".", "unregisterContentObserver", "(", "mAccountObserver", ")", ";", "mResolver", "=", "null", ";", "mAccountObserver", "=", "null", ";", "mMailboxObserver", "=", "null", ";", "mSyncedMessageObserver", "=", "null", ";", "mMessageObserver", "=", "null", ";", "mSyncStatusObserver", "=", "null", ";", "}", "}", "</s>"]
["<s>", "void", "maybeStartSyncManagerThread", "(", ")", "{", "if", "(", "EmailContent", ".", "count", "(", "this", ",", "HostAuth", ".", "CONTENT_URI", ",", "WHERE_PROTOCOL_EAS", ",", "null", ")", ">", "0", ")", "{", "if", "(", "sServiceThread", "=", "=", "null", "|", "|", "!", "sServiceThread", ".", "isAlive", "(", ")", ")", "{", "log", "(", "sServiceThread", "=", "=", "null", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", ")", ";", "sServiceThread", "=", "new", "Thread", "(", "this", ",", "\"", "<STR_LIT>", "\"", ")", ";", "sServiceThread", ".", "start", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "static", "void", "checkSyncManagerServiceRunning", "(", ")", "{", "if", "(", "INSTANCE", "=", "=", "null", ")", "return", ";", "if", "(", "sServiceThread", "=", "=", "null", ")", "{", "INSTANCE", ".", "alwaysLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "INSTANCE", ".", "startService", "(", "new", "Intent", "(", "INSTANCE", ",", "SyncManager", ".", "class", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "int", "getMaxForRoute", "(", "HttpRoute", "route", ")", "{", "return", "<NUM_LIT:8>", ";", "}", "</s>"]
["<s>", "static", "public", "synchronized", "ClientConnectionManager", "getClientConnectionManager", "(", ")", "{", "if", "(", "sClientConnectionManager", "=", "=", "null", ")", "{", "SchemeRegistry", "registry", "=", "new", "SchemeRegistry", "(", ")", ";", "registry", ".", "register", "(", "new", "Scheme", "(", "\"", "<STR_LIT>", "\"", ",", "PlainSocketFactory", ".", "getSocketFactory", "(", ")", ",", "<NUM_LIT>", ")", ")", ";", "registry", ".", "register", "(", "new", "Scheme", "(", "\"", "<STR_LIT>", "\"", ",", "SSLSocketFactory", ".", "getSocketFactory", "(", ")", ",", "<NUM_LIT>", ")", ")", ";", "X509TrustManager", "trustManager", "=", "TrustManagerFactory", ".", "get", "(", "null", ",", "false", ")", ";", "TrustManager", "[", "]", "trustManagers", "=", "new", "TrustManager", "[", "]", "{", "trustManager", "}", ";", "SSLContext", "sslcontext", ";", "try", "{", "sslcontext", "=", "SSLContext", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sslcontext", ".", "init", "(", "null", ",", "trustManagers", ",", "null", ")", ";", "SSLContextImpl", "sslContext", "=", "new", "SSLContextImpl", "(", ")", ";", "try", "{", "sslContext", ".", "engineInit", "(", "null", ",", "trustManagers", ",", "null", ",", "null", ",", "null", ")", ";", "}", "catch", "(", "KeyManagementException", "e", ")", "{", "throw", "new", "AssertionError", "(", "e", ")", ";", "}", "SSLSocketFactory", "sf", "=", "new", "SSLSocketFactory", "(", "sslContext", ".", "engineGetSocketFactory", "(", ")", ")", ";", "sf", ".", "setHostnameVerifier", "(", "SSLSocketFactory", ".", "ALLOW_ALL_HOSTNAME_VERIFIER", ")", ";", "registry", ".", "register", "(", "new", "Scheme", "(", "\"", "<STR_LIT>", "\"", ",", "sf", ",", "<NUM_LIT>", ")", ")", ";", "HttpParams", "params", "=", "new", "BasicHttpParams", "(", ")", ";", "params", ".", "setIntParameter", "(", "ConnManagerPNames", ".", "MAX_TOTAL_CONNECTIONS", ",", "<NUM_LIT>", ")", ";", "params", ".", "setParameter", "(", "ConnManagerPNames", ".", "MAX_CONNECTIONS_PER_ROUTE", ",", "sConnPerRoute", ")", ";", "sClientConnectionManager", "=", "new", "ThreadSafeClientConnManager", "(", "params", ",", "registry", ")", ";", "}", "catch", "(", "NoSuchAlgorithmException", "e2", ")", "{", "}", "catch", "(", "KeyManagementException", "e1", ")", "{", "}", "}", "return", "sClientConnectionManager", ";", "}", "</s>"]
["<s>", "public", "static", "void", "stopAccountSyncs", "(", "long", "acctId", ")", "{", "if", "(", "INSTANCE", "!", "=", "null", ")", "{", "INSTANCE", ".", "stopAccountSyncs", "(", "acctId", ",", "true", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "stopAccountSyncs", "(", "long", "acctId", ",", "boolean", "includeAccountMailbox", ")", "{", "synchronized", "(", "sSyncToken", ")", "{", "List", "<", "Long", ">", "deletedBoxes", "=", "new", "ArrayList", "<", "Long", ">", "(", ")", ";", "for", "(", "Long", "mid", ":", "INSTANCE", ".", "mServiceMap", ".", "keySet", "(", ")", ")", "{", "Mailbox", "box", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "INSTANCE", ",", "mid", ")", ";", "if", "(", "box", "!", "=", "null", ")", "{", "if", "(", "box", ".", "mAccountKey", "=", "=", "acctId", ")", "{", "if", "(", "!", "includeAccountMailbox", "&", "&", "box", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_EAS_ACCOUNT_MAILBOX", ")", "{", "AbstractSyncService", "svc", "=", "INSTANCE", ".", "mServiceMap", ".", "get", "(", "mid", ")", ";", "if", "(", "svc", "!", "=", "null", ")", "{", "svc", ".", "stop", "(", ")", ";", "}", "continue", ";", "}", "AbstractSyncService", "svc", "=", "INSTANCE", ".", "mServiceMap", ".", "get", "(", "mid", ")", ";", "if", "(", "svc", "!", "=", "null", ")", "{", "svc", ".", "stop", "(", ")", ";", "Thread", "t", "=", "svc", ".", "mThread", ";", "if", "(", "t", "!", "=", "null", ")", "{", "t", ".", "interrupt", "(", ")", ";", "}", "}", "deletedBoxes", ".", "add", "(", "mid", ")", ";", "}", "}", "}", "for", "(", "Long", "mid", ":", "deletedBoxes", ")", "{", "releaseMailbox", "(", "mid", ")", ";", "}", "}", "}", "</s>"]
["<s>", "static", "public", "void", "reloadFolderList", "(", "Context", "context", ",", "long", "accountId", ",", "boolean", "force", ")", "{", "if", "(", "INSTANCE", "=", "=", "null", ")", "return", ";", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "Mailbox", ".", "CONTENT_PROJECTION", ",", "MailboxColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "TYPE", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "accountId", ")", ",", "Long", ".", "toString", "(", "Mailbox", ".", "TYPE_EAS_ACCOUNT_MAILBOX", ")", "}", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "synchronized", "(", "sSyncToken", ")", "{", "Mailbox", "m", "=", "new", "Mailbox", "(", ")", ".", "restore", "(", "c", ")", ";", "Account", "acct", "=", "Account", ".", "restoreAccountWithId", "(", "context", ",", "accountId", ")", ";", "if", "(", "acct", "=", "=", "null", ")", "{", "return", ";", "}", "String", "syncKey", "=", "acct", ".", "mSyncKey", ";", "if", "(", "!", "force", "&", "&", "(", "syncKey", "=", "=", "null", "|", "|", "syncKey", ".", "equals", "(", "\"", "<STR_LIT:0>", "\"", ")", ")", ")", "{", "return", ";", "}", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "Mailbox", ".", "SYNC_INTERVAL", ",", "Mailbox", ".", "CHECK_INTERVAL_PUSH_HOLD", ")", ";", "context", ".", "getContentResolver", "(", ")", ".", "update", "(", "Mailbox", ".", "CONTENT_URI", ",", "cv", ",", "WHERE_PUSH_OR_PING_NOT_ACCOUNT_MAILBOX", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "accountId", ")", "}", ")", ";", "INSTANCE", ".", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "long", "id", "=", "m", ".", "mId", ";", "AbstractSyncService", "svc", "=", "INSTANCE", ".", "mServiceMap", ".", "get", "(", "id", ")", ";", "if", "(", "svc", "!", "=", "null", ")", "{", "synchronized", "(", "svc", ".", "getSynchronizer", "(", ")", ")", "{", "svc", ".", "stop", "(", ")", ";", "}", "Thread", "thread", "=", "svc", ".", "mThread", ";", "thread", ".", "setName", "(", "thread", ".", "getName", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "thread", ".", "interrupt", "(", ")", ";", "INSTANCE", ".", "releaseMailbox", "(", "id", ")", ";", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "static", "public", "void", "folderListReloaded", "(", "long", "acctId", ")", "{", "if", "(", "INSTANCE", "!", "=", "null", ")", "{", "INSTANCE", ".", "stopAccountSyncs", "(", "acctId", ",", "false", ")", ";", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "acquireWakeLock", "(", "long", "id", ")", "{", "synchronized", "(", "mWakeLocks", ")", "{", "Boolean", "lock", "=", "mWakeLocks", ".", "get", "(", "id", ")", ";", "if", "(", "lock", "=", "=", "null", ")", "{", "if", "(", "id", ">", "0", ")", "{", "}", "if", "(", "mWakeLock", "=", "=", "null", ")", "{", "PowerManager", "pm", "=", "(", "PowerManager", ")", "getSystemService", "(", "Context", ".", "POWER_SERVICE", ")", ";", "mWakeLock", "=", "pm", ".", "newWakeLock", "(", "PowerManager", ".", "PARTIAL_WAKE_LOCK", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mWakeLock", ".", "acquire", "(", ")", ";", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mWakeLocks", ".", "put", "(", "id", ",", "true", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "releaseWakeLock", "(", "long", "id", ")", "{", "synchronized", "(", "mWakeLocks", ")", "{", "Boolean", "lock", "=", "mWakeLocks", ".", "get", "(", "id", ")", ";", "if", "(", "lock", "!", "=", "null", ")", "{", "if", "(", "id", ">", "0", ")", "{", "}", "mWakeLocks", ".", "remove", "(", "id", ")", ";", "if", "(", "mWakeLocks", ".", "isEmpty", "(", ")", ")", "{", "if", "(", "mWakeLock", "!", "=", "null", ")", "{", "mWakeLock", ".", "release", "(", ")", ";", "}", "mWakeLock", "=", "null", ";", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "}", "}", "}", "}", "</s>"]
["<s>", "static", "public", "String", "alarmOwner", "(", "long", "id", ")", "{", "if", "(", "id", "=", "=", "SYNC_MANAGER_ID", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "else", "{", "String", "name", "=", "Long", ".", "toString", "(", "id", ")", ";", "if", "(", "Eas", ".", "USER_LOG", "&", "&", "INSTANCE", "!", "=", "null", ")", "{", "Mailbox", "m", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "INSTANCE", ",", "id", ")", ";", "if", "(", "m", "!", "=", "null", ")", "{", "name", "=", "m", ".", "mDisplayName", "+", "<CHAR_LIT:(>", "+", "m", ".", "mAccountKey", "+", "<CHAR_LIT:)>", ";", "}", "}", "return", "\"", "<STR_LIT>", "\"", "+", "name", ";", "}", "}", "</s>"]
["<s>", "private", "void", "clearAlarm", "(", "long", "id", ")", "{", "synchronized", "(", "mPendingIntents", ")", "{", "PendingIntent", "pi", "=", "mPendingIntents", ".", "get", "(", "id", ")", ";", "if", "(", "pi", "!", "=", "null", ")", "{", "AlarmManager", "alarmManager", "=", "(", "AlarmManager", ")", "getSystemService", "(", "Context", ".", "ALARM_SERVICE", ")", ";", "alarmManager", ".", "cancel", "(", "pi", ")", ";", "log", "(", "\"", "<STR_LIT>", "\"", "+", "alarmOwner", "(", "id", ")", ")", ";", "mPendingIntents", ".", "remove", "(", "id", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "setAlarm", "(", "long", "id", ",", "long", "millis", ")", "{", "synchronized", "(", "mPendingIntents", ")", "{", "PendingIntent", "pi", "=", "mPendingIntents", ".", "get", "(", "id", ")", ";", "if", "(", "pi", "=", "=", "null", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "this", ",", "MailboxAlarmReceiver", ".", "class", ")", ";", "i", ".", "putExtra", "(", "\"", "<STR_LIT>", "\"", ",", "id", ")", ";", "i", ".", "setData", "(", "Uri", ".", "parse", "(", "\"", "<STR_LIT>", "\"", "+", "id", ")", ")", ";", "pi", "=", "PendingIntent", ".", "getBroadcast", "(", "this", ",", "0", ",", "i", ",", "0", ")", ";", "mPendingIntents", ".", "put", "(", "id", ",", "pi", ")", ";", "AlarmManager", "alarmManager", "=", "(", "AlarmManager", ")", "getSystemService", "(", "Context", ".", "ALARM_SERVICE", ")", ";", "alarmManager", ".", "set", "(", "AlarmManager", ".", "RTC_WAKEUP", ",", "System", ".", "currentTimeMillis", "(", ")", "+", "millis", ",", "pi", ")", ";", "log", "(", "\"", "<STR_LIT>", "\"", "+", "alarmOwner", "(", "id", ")", "+", "\"", "<STR_LIT>", "\"", "+", "millis", "/", "<NUM_LIT:1000>", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "clearAlarms", "(", ")", "{", "AlarmManager", "alarmManager", "=", "(", "AlarmManager", ")", "getSystemService", "(", "Context", ".", "ALARM_SERVICE", ")", ";", "synchronized", "(", "mPendingIntents", ")", "{", "for", "(", "PendingIntent", "pi", ":", "mPendingIntents", ".", "values", "(", ")", ")", "{", "alarmManager", ".", "cancel", "(", "pi", ")", ";", "}", "mPendingIntents", ".", "clear", "(", ")", ";", "}", "}", "</s>"]
["<s>", "static", "public", "void", "runAwake", "(", "long", "id", ")", "{", "if", "(", "INSTANCE", "=", "=", "null", ")", "return", ";", "INSTANCE", ".", "acquireWakeLock", "(", "id", ")", ";", "INSTANCE", ".", "clearAlarm", "(", "id", ")", ";", "}", "</s>"]
["<s>", "static", "public", "void", "runAsleep", "(", "long", "id", ",", "long", "millis", ")", "{", "if", "(", "INSTANCE", "=", "=", "null", ")", "return", ";", "INSTANCE", ".", "setAlarm", "(", "id", ",", "millis", ")", ";", "INSTANCE", ".", "releaseWakeLock", "(", "id", ")", ";", "}", "</s>"]
["<s>", "static", "public", "void", "ping", "(", "Context", "context", ",", "long", "id", ")", "{", "checkSyncManagerServiceRunning", "(", ")", ";", "if", "(", "id", "<", "0", ")", "{", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "INSTANCE", "=", "=", "null", ")", "{", "context", ".", "startService", "(", "new", "Intent", "(", "context", ",", "SyncManager", ".", "class", ")", ")", ";", "}", "else", "{", "AbstractSyncService", "service", "=", "INSTANCE", ".", "mServiceMap", ".", "get", "(", "id", ")", ";", "if", "(", "service", "!", "=", "null", ")", "{", "Mailbox", "m", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "INSTANCE", ",", "id", ")", ";", "if", "(", "m", "!", "=", "null", ")", "{", "if", "(", "m", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_DRAFTS", "|", "|", "m", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_OUTBOX", ")", "{", "return", ";", "}", "service", ".", "mAccount", "=", "Account", ".", "restoreAccountWithId", "(", "INSTANCE", ",", "m", ".", "mAccountKey", ")", ";", "service", ".", "mMailbox", "=", "m", ";", "service", ".", "ping", "(", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "private", "void", "checkPIMSyncSettings", "(", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "List", "<", "Account", ">", "easAccounts", "=", "getAccountList", "(", ")", ";", "for", "(", "Account", "easAccount", ":", "easAccounts", ")", "{", "long", "contactsId", "=", "Mailbox", ".", "findMailboxOfType", "(", "this", ",", "easAccount", ".", "mId", ",", "Mailbox", ".", "TYPE_CONTACTS", ")", ";", "if", "(", "contactsId", "!", "=", "Mailbox", ".", "NO_MAILBOX", ")", "{", "android", ".", "accounts", ".", "Account", "acct", "=", "new", "android", ".", "accounts", ".", "Account", "(", "easAccount", ".", "mEmailAddress", ",", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ")", ";", "Mailbox", "contacts", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "this", ",", "contactsId", ")", ";", "int", "syncInterval", "=", "contacts", ".", "mSyncInterval", ";", "if", "(", "ContentResolver", ".", "getIsSyncable", "(", "acct", ",", "ContactsContract", ".", "AUTHORITY", ")", ">", "0", ")", "{", "if", "(", "ContentResolver", ".", "getSyncAutomatically", "(", "acct", ",", "ContactsContract", ".", "AUTHORITY", ")", ")", "{", "if", "(", "syncInterval", "=", "=", "Mailbox", ".", "CHECK_INTERVAL_NEVER", "|", "|", "syncInterval", ">", "0", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", "+", "acct", ".", "name", "+", "\"", "<STR_LIT>", "\"", ")", ";", "cv", ".", "put", "(", "MailboxColumns", ".", "SYNC_INTERVAL", ",", "Mailbox", ".", "CHECK_INTERVAL_PUSH", ")", ";", "}", "}", "else", "if", "(", "syncInterval", "!", "=", "Mailbox", ".", "CHECK_INTERVAL_NEVER", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", "+", "acct", ".", "name", "+", "\"", "<STR_LIT>", "\"", ")", ";", "cv", ".", "put", "(", "MailboxColumns", ".", "SYNC_INTERVAL", ",", "Mailbox", ".", "CHECK_INTERVAL_NEVER", ")", ";", "}", "}", "else", "if", "(", "syncInterval", "!", "=", "Mailbox", ".", "CHECK_INTERVAL_NEVER", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", "+", "acct", ".", "name", "+", "\"", "<STR_LIT>", "\"", ")", ";", "cv", ".", "put", "(", "MailboxColumns", ".", "SYNC_INTERVAL", ",", "Mailbox", ".", "CHECK_INTERVAL_NEVER", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "MailboxColumns", ".", "SYNC_INTERVAL", ")", ")", "{", "mResolver", ".", "update", "(", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "CONTENT_URI", ",", "contactsId", ")", ",", "cv", ",", "null", ",", "null", ")", ";", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "private", "void", "checkWithAccountManager", "(", ")", "{", "android", ".", "accounts", ".", "Account", "[", "]", "accts", "=", "AccountManager", ".", "get", "(", "this", ")", ".", "getAccountsByType", "(", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ")", ";", "List", "<", "Account", ">", "easAccounts", "=", "getAccountList", "(", ")", ";", "for", "(", "Account", "easAccount", ":", "easAccounts", ")", "{", "String", "accountName", "=", "easAccount", ".", "mEmailAddress", ";", "boolean", "found", "=", "false", ";", "for", "(", "android", ".", "accounts", ".", "Account", "acct", ":", "accts", ")", "{", "if", "(", "acct", ".", "name", ".", "equalsIgnoreCase", "(", "accountName", ")", ")", "{", "found", "=", "true", ";", "break", ";", "}", "}", "if", "(", "!", "found", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", "+", "accountName", ")", ";", "mResolver", ".", "delete", "(", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "easAccount", ".", "mId", ")", ",", "null", ",", "null", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "releaseConnectivityLock", "(", "String", "reason", ")", "{", "mSyncErrorMap", ".", "clear", "(", ")", ";", "synchronized", "(", "sConnectivityLock", ")", "{", "sConnectivityLock", ".", "notifyAll", "(", ")", ";", "}", "kick", "(", "reason", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onReceive", "(", "Context", "context", ",", "Intent", "intent", ")", "{", "Bundle", "b", "=", "intent", ".", "getExtras", "(", ")", ";", "if", "(", "b", "!", "=", "null", ")", "{", "NetworkInfo", "a", "=", "(", "NetworkInfo", ")", "b", ".", "get", "(", "ConnectivityManager", ".", "EXTRA_NETWORK_INFO", ")", ";", "String", "info", "=", "\"", "<STR_LIT>", "\"", "+", "a", ".", "getTypeName", "(", ")", ";", "State", "state", "=", "a", ".", "getState", "(", ")", ";", "if", "(", "state", "=", "=", "State", ".", "CONNECTED", ")", "{", "info", "+", "=", "\"", "<STR_LIT>", "\"", ";", "log", "(", "info", ")", ";", "releaseConnectivityLock", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "state", "=", "=", "State", ".", "DISCONNECTED", ")", "{", "info", "+", "=", "\"", "<STR_LIT>", "\"", ";", "a", "=", "(", "NetworkInfo", ")", "b", ".", "get", "(", "ConnectivityManager", ".", "EXTRA_OTHER_NETWORK_INFO", ")", ";", "if", "(", "a", "!", "=", "null", "&", "&", "a", ".", "getState", "(", ")", "=", "=", "State", ".", "CONNECTED", ")", "{", "info", "+", "=", "\"", "<STR_LIT>", "\"", ";", "releaseConnectivityLock", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ConnectivityManager", "cm", "=", "(", "ConnectivityManager", ")", "getSystemService", "(", "Context", ".", "CONNECTIVITY_SERVICE", ")", ";", "if", "(", "cm", "!", "=", "null", ")", "{", "NetworkInfo", "i", "=", "cm", ".", "getActiveNetworkInfo", "(", ")", ";", "if", "(", "i", "=", "=", "null", "|", "|", "i", ".", "getState", "(", ")", "!", "=", "State", ".", "CONNECTED", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "else", "{", "log", "(", "info", ")", ";", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "private", "void", "startService", "(", "AbstractSyncService", "service", ",", "Mailbox", "m", ")", "{", "synchronized", "(", "sSyncToken", ")", "{", "String", "mailboxName", "=", "m", ".", "mDisplayName", ";", "String", "accountName", "=", "service", ".", "mAccount", ".", "mDisplayName", ";", "Thread", "thread", "=", "new", "Thread", "(", "service", ",", "mailboxName", "+", "\"", "<STR_LIT:(>", "\"", "+", "accountName", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "log", "(", "\"", "<STR_LIT>", "\"", "+", "mailboxName", "+", "\"", "<STR_LIT>", "\"", "+", "accountName", ")", ";", "thread", ".", "start", "(", ")", ";", "mServiceMap", ".", "put", "(", "m", ".", "mId", ",", "service", ")", ";", "runAwake", "(", "m", ".", "mId", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "startService", "(", "Mailbox", "m", ",", "int", "reason", ",", "PartRequest", "req", ")", "{", "if", "(", "sConnectivityHold", ")", "return", ";", "synchronized", "(", "sSyncToken", ")", "{", "Account", "acct", "=", "Account", ".", "restoreAccountWithId", "(", "this", ",", "m", ".", "mAccountKey", ")", ";", "if", "(", "acct", "!", "=", "null", ")", "{", "AbstractSyncService", "service", ";", "service", "=", "new", "EasSyncService", "(", "this", ",", "m", ")", ";", "service", ".", "mSyncReason", "=", "reason", ";", "if", "(", "req", "!", "=", "null", ")", "{", "service", ".", "addPartRequest", "(", "req", ")", ";", "}", "startService", "(", "service", ",", "m", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "stopServices", "(", ")", "{", "synchronized", "(", "sSyncToken", ")", "{", "ArrayList", "<", "Long", ">", "toStop", "=", "new", "ArrayList", "<", "Long", ">", "(", ")", ";", "for", "(", "Long", "mailboxId", ":", "mServiceMap", ".", "keySet", "(", ")", ")", "{", "toStop", ".", "add", "(", "mailboxId", ")", ";", "}", "for", "(", "Long", "mailboxId", ":", "toStop", ")", "{", "AbstractSyncService", "svc", "=", "mServiceMap", ".", "get", "(", "mailboxId", ")", ";", "if", "(", "svc", "!", "=", "null", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", "+", "svc", ".", "mAccount", ".", "mDisplayName", "+", "<CHAR_LIT:/>", "+", "svc", ".", "mMailbox", ".", "mDisplayName", ")", ";", "svc", ".", "stop", "(", ")", ";", "if", "(", "svc", ".", "mThread", "!", "=", "null", ")", "{", "svc", ".", "mThread", ".", "interrupt", "(", ")", ";", "}", "}", "releaseWakeLock", "(", "mailboxId", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "waitForConnectivity", "(", ")", "{", "int", "cnt", "=", "0", ";", "while", "(", "!", "mStop", ")", "{", "ConnectivityManager", "cm", "=", "(", "ConnectivityManager", ")", "getSystemService", "(", "Context", ".", "CONNECTIVITY_SERVICE", ")", ";", "NetworkInfo", "info", "=", "cm", ".", "getActiveNetworkInfo", "(", ")", ";", "if", "(", "info", "!", "=", "null", ")", "{", "return", ";", "}", "else", "{", "if", "(", "+", "+", "cnt", ">", "1", ")", "{", "stopServices", "(", ")", ";", "}", "synchronized", "(", "sConnectivityLock", ")", "{", "runAsleep", "(", "SYNC_MANAGER_ID", ",", "CONNECTIVITY_WAIT_TIME", "+", "<NUM_LIT:5>", "*", "SECONDS", ")", ";", "try", "{", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sConnectivityHold", "=", "true", ";", "sConnectivityLock", ".", "wait", "(", "CONNECTIVITY_WAIT_TIME", ")", ";", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "InterruptedException", "e", ")", "{", "}", "finally", "{", "sConnectivityHold", "=", "false", ";", "}", "runAwake", "(", "SYNC_MANAGER_ID", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "mStop", "=", "false", ";", "if", "(", "Eas", ".", "DEBUG", ")", "{", "Eas", ".", "USER_LOG", "=", "true", ";", "Eas", ".", "PARSER_LOG", "=", "true", ";", "Eas", ".", "FILE_LOG", "=", "true", ";", "}", "if", "(", "Eas", ".", "WAIT_DEBUG", ")", "{", "Debug", ".", "waitForDebugger", "(", ")", ";", "}", "mResolver", ".", "registerContentObserver", "(", "Mailbox", ".", "CONTENT_URI", ",", "false", ",", "mMailboxObserver", ")", ";", "mResolver", ".", "registerContentObserver", "(", "Message", ".", "SYNCED_CONTENT_URI", ",", "true", ",", "mSyncedMessageObserver", ")", ";", "mResolver", ".", "registerContentObserver", "(", "Message", ".", "CONTENT_URI", ",", "true", ",", "mMessageObserver", ")", ";", "ContentResolver", ".", "addStatusChangeListener", "(", "ContentResolver", ".", "SYNC_OBSERVER_TYPE_SETTINGS", ",", "mSyncStatusObserver", ")", ";", "mAccountsUpdatedListener", "=", "new", "EasAccountsUpdatedListener", "(", ")", ";", "AccountManager", ".", "get", "(", "getApplication", "(", ")", ")", ".", "addOnAccountsUpdatedListener", "(", "mAccountsUpdatedListener", ",", "mHandler", ",", "true", ")", ";", "mConnectivityReceiver", "=", "new", "ConnectivityReceiver", "(", ")", ";", "registerReceiver", "(", "mConnectivityReceiver", ",", "new", "IntentFilter", "(", "ConnectivityManager", ".", "CONNECTIVITY_ACTION", ")", ")", ";", "checkPIMSyncSettings", "(", ")", ";", "try", "{", "while", "(", "!", "mStop", ")", "{", "runAwake", "(", "SYNC_MANAGER_ID", ")", ";", "waitForConnectivity", "(", ")", ";", "mNextWaitReason", "=", "\"", "<STR_LIT>", "\"", ";", "long", "nextWait", "=", "checkMailboxes", "(", ")", ";", "try", "{", "synchronized", "(", "this", ")", "{", "if", "(", "!", "mKicked", ")", "{", "if", "(", "nextWait", "<", "0", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "nextWait", "=", "1", "*", "SECONDS", ";", "}", "if", "(", "nextWait", ">", "<NUM_LIT:10>", "*", "SECONDS", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", "+", "nextWait", "/", "<NUM_LIT:1000>", "+", "\"", "<STR_LIT>", "\"", "+", "mNextWaitReason", ")", ";", "runAsleep", "(", "SYNC_MANAGER_ID", ",", "nextWait", "+", "(", "<NUM_LIT:3>", "*", "SECONDS", ")", ")", ";", "}", "wait", "(", "nextWait", ")", ";", "}", "}", "}", "catch", "(", "InterruptedException", "e", ")", "{", "}", "finally", "{", "synchronized", "(", "this", ")", "{", "if", "(", "mKicked", ")", "{", "mKicked", "=", "false", ";", "}", "}", "}", "}", "stopServices", "(", ")", ";", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "finally", "{", "stopServices", "(", ")", ";", "if", "(", "mConnectivityReceiver", "!", "=", "null", ")", "{", "unregisterReceiver", "(", "mConnectivityReceiver", ")", ";", "}", "if", "(", "INSTANCE", "!", "=", "null", ")", "{", "ContentResolver", "resolver", "=", "getContentResolver", "(", ")", ";", "resolver", ".", "unregisterContentObserver", "(", "mAccountObserver", ")", ";", "resolver", ".", "unregisterContentObserver", "(", "mMailboxObserver", ")", ";", "resolver", ".", "unregisterContentObserver", "(", "mSyncedMessageObserver", ")", ";", "resolver", ".", "unregisterContentObserver", "(", "mMessageObserver", ")", ";", "}", "if", "(", "mAccountsUpdatedListener", "!", "=", "null", ")", "{", "AccountManager", ".", "get", "(", "this", ")", ".", "removeOnAccountsUpdatedListener", "(", "mAccountsUpdatedListener", ")", ";", "mAccountsUpdatedListener", "=", "null", ";", "}", "clearAlarms", "(", ")", ";", "synchronized", "(", "mWakeLocks", ")", "{", "if", "(", "mWakeLock", "!", "=", "null", ")", "{", "mWakeLock", ".", "release", "(", ")", ";", "mWakeLock", "=", "null", ";", "}", "}", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "!", "mStop", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "releaseMailbox", "(", "long", "mailboxId", ")", "{", "mServiceMap", ".", "remove", "(", "mailboxId", ")", ";", "releaseWakeLock", "(", "mailboxId", ")", ";", "}", "</s>"]
["<s>", "private", "long", "checkMailboxes", "(", ")", "{", "ArrayList", "<", "Long", ">", "deletedMailboxes", "=", "new", "ArrayList", "<", "Long", ">", "(", ")", ";", "synchronized", "(", "sSyncToken", ")", "{", "for", "(", "long", "mailboxId", ":", "mServiceMap", ".", "keySet", "(", ")", ")", "{", "Mailbox", "m", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "this", ",", "mailboxId", ")", ";", "if", "(", "m", "=", "=", "null", ")", "{", "deletedMailboxes", ".", "add", "(", "mailboxId", ")", ";", "}", "}", "}", "for", "(", "Long", "mailboxId", ":", "deletedMailboxes", ")", "{", "AbstractSyncService", "svc", "=", "mServiceMap", ".", "get", "(", "mailboxId", ")", ";", "if", "(", "svc", "!", "=", "null", ")", "{", "boolean", "alive", "=", "svc", ".", "mThread", ".", "isAlive", "(", ")", ";", "log", "(", "\"", "<STR_LIT>", "\"", "+", "svc", ".", "mMailboxName", ")", ";", "if", "(", "alive", ")", "{", "stopManualSync", "(", "mailboxId", ")", ";", "}", "else", "{", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "releaseMailbox", "(", "mailboxId", ")", ";", "}", "}", "}", "long", "nextWait", "=", "SYNC_MANAGER_HEARTBEAT_TIME", ";", "long", "now", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "Cursor", "c", "=", "getContentResolver", "(", ")", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "Mailbox", ".", "CONTENT_PROJECTION", ",", "mAccountObserver", ".", "getSyncableEasMailboxWhere", "(", ")", ",", "null", ",", "null", ")", ";", "try", "{", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "mid", "=", "c", ".", "getLong", "(", "Mailbox", ".", "CONTENT_ID_COLUMN", ")", ";", "AbstractSyncService", "service", "=", "mServiceMap", ".", "get", "(", "mid", ")", ";", "if", "(", "service", "=", "=", "null", ")", "{", "SyncError", "syncError", "=", "mSyncErrorMap", ".", "get", "(", "mid", ")", ";", "if", "(", "syncError", "!", "=", "null", ")", "{", "if", "(", "syncError", ".", "fatal", ")", "continue", ";", "if", "(", "now", "<", "syncError", ".", "holdEndTime", ")", "{", "if", "(", "syncError", ".", "holdEndTime", "<", "now", "+", "nextWait", ")", "{", "nextWait", "=", "syncError", ".", "holdEndTime", "-", "now", ";", "mNextWaitReason", "=", "\"", "<STR_LIT>", "\"", ";", "}", "continue", ";", "}", "else", "{", "syncError", ".", "holdEndTime", "=", "0", ";", "}", "}", "int", "type", "=", "c", ".", "getInt", "(", "Mailbox", ".", "CONTENT_TYPE_COLUMN", ")", ";", "if", "(", "type", "=", "=", "Mailbox", ".", "TYPE_CONTACTS", ")", "{", "Account", "account", "=", "getAccountById", "(", "c", ".", "getInt", "(", "Mailbox", ".", "CONTENT_ACCOUNT_KEY_COLUMN", ")", ")", ";", "if", "(", "account", "!", "=", "null", ")", "{", "android", ".", "accounts", ".", "Account", "a", "=", "new", "android", ".", "accounts", ".", "Account", "(", "account", ".", "mEmailAddress", ",", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ")", ";", "if", "(", "!", "ContentResolver", ".", "getSyncAutomatically", "(", "a", ",", "ContactsContract", ".", "AUTHORITY", ")", ")", "{", "continue", ";", "}", "}", "}", "else", "if", "(", "type", "=", "=", "Mailbox", ".", "TYPE_TRASH", ")", "{", "continue", ";", "}", "long", "interval", "=", "c", ".", "getInt", "(", "Mailbox", ".", "CONTENT_SYNC_INTERVAL_COLUMN", ")", ";", "if", "(", "interval", "=", "=", "Mailbox", ".", "CHECK_INTERVAL_PUSH", ")", "{", "Mailbox", "m", "=", "EmailContent", ".", "getContent", "(", "c", ",", "Mailbox", ".", "class", ")", ";", "startService", "(", "m", ",", "SYNC_PUSH", ",", "null", ")", ";", "}", "else", "if", "(", "type", "=", "=", "Mailbox", ".", "TYPE_OUTBOX", ")", "{", "int", "cnt", "=", "EmailContent", ".", "count", "(", "this", ",", "Message", ".", "CONTENT_URI", ",", "EasOutboxService", ".", "MAILBOX_KEY_AND_NOT_SEND_FAILED", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mid", ")", "}", ")", ";", "if", "(", "cnt", ">", "0", ")", "{", "Mailbox", "m", "=", "EmailContent", ".", "getContent", "(", "c", ",", "Mailbox", ".", "class", ")", ";", "startService", "(", "new", "EasOutboxService", "(", "this", ",", "m", ")", ",", "m", ")", ";", "}", "}", "else", "if", "(", "interval", ">", "0", "&", "&", "interval", "<", "=", "ONE_DAY_MINUTES", ")", "{", "long", "lastSync", "=", "c", ".", "getLong", "(", "Mailbox", ".", "CONTENT_SYNC_TIME_COLUMN", ")", ";", "long", "sinceLastSync", "=", "now", "-", "lastSync", ";", "if", "(", "sinceLastSync", "<", "0", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", "+", "mid", ")", ";", "sinceLastSync", "=", "interval", "*", "MINUTES", ";", "}", "long", "toNextSync", "=", "interval", "*", "MINUTES", "-", "sinceLastSync", ";", "String", "name", "=", "c", ".", "getString", "(", "Mailbox", ".", "CONTENT_DISPLAY_NAME_COLUMN", ")", ";", "if", "(", "toNextSync", "<", "=", "0", ")", "{", "Mailbox", "m", "=", "EmailContent", ".", "getContent", "(", "c", ",", "Mailbox", ".", "class", ")", ";", "startService", "(", "m", ",", "SYNC_SCHEDULED", ",", "null", ")", ";", "}", "else", "if", "(", "toNextSync", "<", "nextWait", ")", "{", "nextWait", "=", "toNextSync", ";", "if", "(", "Eas", ".", "USER_LOG", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", "+", "name", "+", "\"", "<STR_LIT>", "\"", "+", "nextWait", "/", "<NUM_LIT:1000>", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mNextWaitReason", "=", "\"", "<STR_LIT>", "\"", "+", "name", ";", "}", "else", "if", "(", "Eas", ".", "USER_LOG", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", "+", "name", "+", "\"", "<STR_LIT>", "\"", "+", "toNextSync", "/", "<NUM_LIT:1000>", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "else", "{", "Thread", "thread", "=", "service", ".", "mThread", ";", "if", "(", "thread", "!", "=", "null", "&", "&", "!", "thread", ".", "isAlive", "(", ")", "&", "&", "!", "mSyncErrorMap", ".", "containsKey", "(", "mid", ")", ")", "{", "releaseMailbox", "(", "mid", ")", ";", "if", "(", "nextWait", ">", "<NUM_LIT:3>", "*", "SECONDS", ")", "{", "nextWait", "=", "<NUM_LIT:3>", "*", "SECONDS", ";", "mNextWaitReason", "=", "\"", "<STR_LIT>", "\"", ";", "}", "}", "else", "{", "long", "requestTime", "=", "service", ".", "mRequestTime", ";", "if", "(", "requestTime", ">", "0", ")", "{", "long", "timeToRequest", "=", "requestTime", "-", "now", ";", "if", "(", "service", "instanceof", "AbstractSyncService", "&", "&", "timeToRequest", "<", "=", "0", ")", "{", "service", ".", "mRequestTime", "=", "0", ";", "service", ".", "ping", "(", ")", ";", "}", "else", "if", "(", "requestTime", ">", "0", "&", "&", "timeToRequest", "<", "nextWait", ")", "{", "if", "(", "timeToRequest", "<", "<NUM_LIT:11>", "*", "MINUTES", ")", "{", "nextWait", "=", "timeToRequest", "<", "<NUM_LIT>", "?", "<NUM_LIT>", ":", "timeToRequest", ";", "mNextWaitReason", "=", "\"", "<STR_LIT>", "\"", ";", "}", "else", "{", "log", "(", "\"", "<STR_LIT>", "\"", "+", "timeToRequest", ")", ";", "}", "}", "}", "}", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "return", "nextWait", ";", "}", "</s>"]
["<s>", "static", "public", "void", "serviceRequest", "(", "long", "mailboxId", ",", "int", "reason", ")", "{", "serviceRequest", "(", "mailboxId", ",", "<NUM_LIT:5>", "*", "SECONDS", ",", "reason", ")", ";", "}", "</s>"]
["<s>", "static", "public", "void", "serviceRequest", "(", "long", "mailboxId", ",", "long", "ms", ",", "int", "reason", ")", "{", "if", "(", "INSTANCE", "=", "=", "null", ")", "return", ";", "Mailbox", "m", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "INSTANCE", ",", "mailboxId", ")", ";", "if", "(", "m", "=", "=", "null", "|", "|", "m", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_DRAFTS", "|", "|", "m", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_OUTBOX", ")", "{", "INSTANCE", ".", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "try", "{", "AbstractSyncService", "service", "=", "INSTANCE", ".", "mServiceMap", ".", "get", "(", "mailboxId", ")", ";", "if", "(", "service", "!", "=", "null", ")", "{", "service", ".", "mRequestTime", "=", "System", ".", "currentTimeMillis", "(", ")", "+", "ms", ";", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "startManualSync", "(", "mailboxId", ",", "reason", ",", "null", ")", ";", "}", "}", "catch", "(", "Exception", "e", ")", "{", "e", ".", "printStackTrace", "(", ")", ";", "}", "}", "</s>"]
["<s>", "static", "public", "void", "serviceRequestImmediate", "(", "long", "mailboxId", ")", "{", "if", "(", "INSTANCE", "=", "=", "null", ")", "return", ";", "AbstractSyncService", "service", "=", "INSTANCE", ".", "mServiceMap", ".", "get", "(", "mailboxId", ")", ";", "if", "(", "service", "!", "=", "null", ")", "{", "service", ".", "mRequestTime", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "Mailbox", "m", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "INSTANCE", ",", "mailboxId", ")", ";", "if", "(", "m", "!", "=", "null", ")", "{", "service", ".", "mAccount", "=", "Account", ".", "restoreAccountWithId", "(", "INSTANCE", ",", "m", ".", "mAccountKey", ")", ";", "service", ".", "mMailbox", "=", "m", ";", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "</s>"]
["<s>", "static", "public", "void", "partRequest", "(", "PartRequest", "req", ")", "{", "if", "(", "INSTANCE", "=", "=", "null", ")", "return", ";", "Message", "msg", "=", "Message", ".", "restoreMessageWithId", "(", "INSTANCE", ",", "req", ".", "emailId", ")", ";", "if", "(", "msg", "=", "=", "null", ")", "{", "return", ";", "}", "long", "mailboxId", "=", "msg", ".", "mMailboxKey", ";", "AbstractSyncService", "service", "=", "INSTANCE", ".", "mServiceMap", ".", "get", "(", "mailboxId", ")", ";", "if", "(", "service", "=", "=", "null", ")", "{", "service", "=", "startManualSync", "(", "mailboxId", ",", "SYNC_SERVICE_PART_REQUEST", ",", "req", ")", ";", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "service", ".", "addPartRequest", "(", "req", ")", ";", "}", "}", "</s>"]
["<s>", "static", "public", "PartRequest", "hasPartRequest", "(", "long", "emailId", ",", "String", "part", ")", "{", "if", "(", "INSTANCE", "=", "=", "null", ")", "return", "null", ";", "Message", "msg", "=", "Message", ".", "restoreMessageWithId", "(", "INSTANCE", ",", "emailId", ")", ";", "if", "(", "msg", "=", "=", "null", ")", "{", "return", "null", ";", "}", "long", "mailboxId", "=", "msg", ".", "mMailboxKey", ";", "AbstractSyncService", "service", "=", "INSTANCE", ".", "mServiceMap", ".", "get", "(", "mailboxId", ")", ";", "if", "(", "service", "!", "=", "null", ")", "{", "return", "service", ".", "hasPartRequest", "(", "emailId", ",", "part", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "static", "public", "void", "cancelPartRequest", "(", "long", "emailId", ",", "String", "part", ")", "{", "Message", "msg", "=", "Message", ".", "restoreMessageWithId", "(", "INSTANCE", ",", "emailId", ")", ";", "if", "(", "msg", "=", "=", "null", ")", "{", "return", ";", "}", "long", "mailboxId", "=", "msg", ".", "mMailboxKey", ";", "AbstractSyncService", "service", "=", "INSTANCE", ".", "mServiceMap", ".", "get", "(", "mailboxId", ")", ";", "if", "(", "service", "!", "=", "null", ")", "{", "service", ".", "cancelPartRequest", "(", "emailId", ",", "part", ")", ";", "}", "}", "</s>"]
["<s>", "static", "public", "int", "pingStatus", "(", "long", "mailboxId", ")", "{", "if", "(", "INSTANCE", ".", "mServiceMap", ".", "get", "(", "mailboxId", ")", "!", "=", "null", ")", "{", "return", "PING_STATUS_RUNNING", ";", "}", "SyncError", "error", "=", "INSTANCE", ".", "mSyncErrorMap", ".", "get", "(", "mailboxId", ")", ";", "if", "(", "error", "!", "=", "null", ")", "{", "if", "(", "error", ".", "fatal", ")", "{", "return", "PING_STATUS_UNABLE", ";", "}", "else", "if", "(", "error", ".", "holdEndTime", ">", "0", ")", "{", "return", "PING_STATUS_WAITING", ";", "}", "}", "return", "PING_STATUS_OK", ";", "}", "</s>"]
["<s>", "static", "public", "AbstractSyncService", "startManualSync", "(", "long", "mailboxId", ",", "int", "reason", ",", "PartRequest", "req", ")", "{", "if", "(", "INSTANCE", "=", "=", "null", "|", "|", "INSTANCE", ".", "mServiceMap", "=", "=", "null", ")", "return", "null", ";", "synchronized", "(", "sSyncToken", ")", "{", "if", "(", "INSTANCE", ".", "mServiceMap", ".", "get", "(", "mailboxId", ")", "=", "=", "null", ")", "{", "INSTANCE", ".", "mSyncErrorMap", ".", "remove", "(", "mailboxId", ")", ";", "Mailbox", "m", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "INSTANCE", ",", "mailboxId", ")", ";", "if", "(", "m", "!", "=", "null", ")", "{", "INSTANCE", ".", "log", "(", "\"", "<STR_LIT>", "\"", "+", "m", ".", "mDisplayName", ")", ";", "INSTANCE", ".", "startService", "(", "m", ",", "reason", ",", "req", ")", ";", "}", "}", "}", "return", "INSTANCE", ".", "mServiceMap", ".", "get", "(", "mailboxId", ")", ";", "}", "</s>"]
["<s>", "static", "private", "void", "stopManualSync", "(", "long", "mailboxId", ")", "{", "if", "(", "INSTANCE", "=", "=", "null", "|", "|", "INSTANCE", ".", "mServiceMap", "=", "=", "null", ")", "return", ";", "synchronized", "(", "sSyncToken", ")", "{", "AbstractSyncService", "svc", "=", "INSTANCE", ".", "mServiceMap", ".", "get", "(", "mailboxId", ")", ";", "if", "(", "svc", "!", "=", "null", ")", "{", "INSTANCE", ".", "log", "(", "\"", "<STR_LIT>", "\"", "+", "svc", ".", "mMailboxName", ")", ";", "svc", ".", "stop", "(", ")", ";", "svc", ".", "mThread", ".", "interrupt", "(", ")", ";", "INSTANCE", ".", "releaseWakeLock", "(", "mailboxId", ")", ";", "}", "}", "}", "</s>"]
["<s>", "static", "public", "void", "kick", "(", "String", "reason", ")", "{", "if", "(", "INSTANCE", "!", "=", "null", ")", "{", "synchronized", "(", "INSTANCE", ")", "{", "INSTANCE", ".", "mKicked", "=", "true", ";", "INSTANCE", ".", "notify", "(", ")", ";", "}", "}", "if", "(", "sConnectivityLock", "!", "=", "null", ")", "{", "synchronized", "(", "sConnectivityLock", ")", "{", "sConnectivityLock", ".", "notify", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "static", "public", "void", "accountUpdated", "(", "long", "acctId", ")", "{", "if", "(", "INSTANCE", "=", "=", "null", ")", "return", ";", "synchronized", "(", "sSyncToken", ")", "{", "for", "(", "AbstractSyncService", "svc", ":", "INSTANCE", ".", "mServiceMap", ".", "values", "(", ")", ")", "{", "if", "(", "svc", ".", "mAccount", ".", "mId", "=", "=", "acctId", ")", "{", "svc", ".", "mAccount", "=", "Account", ".", "restoreAccountWithId", "(", "INSTANCE", ",", "acctId", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "static", "public", "void", "done", "(", "AbstractSyncService", "svc", ")", "{", "if", "(", "INSTANCE", "=", "=", "null", ")", "return", ";", "synchronized", "(", "sSyncToken", ")", "{", "long", "mailboxId", "=", "svc", ".", "mMailboxId", ";", "HashMap", "<", "Long", ",", "SyncError", ">", "errorMap", "=", "INSTANCE", ".", "mSyncErrorMap", ";", "SyncError", "syncError", "=", "errorMap", ".", "get", "(", "mailboxId", ")", ";", "INSTANCE", ".", "releaseMailbox", "(", "mailboxId", ")", ";", "int", "exitStatus", "=", "svc", ".", "mExitStatus", ";", "switch", "(", "exitStatus", ")", "{", "case", "AbstractSyncService", ".", "EXIT_DONE", ":", "if", "(", "!", "svc", ".", "mPartRequests", ".", "isEmpty", "(", ")", ")", "{", "}", "errorMap", ".", "remove", "(", "mailboxId", ")", ";", "break", ";", "case", "AbstractSyncService", ".", "EXIT_IO_ERROR", ":", "Mailbox", "m", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "INSTANCE", ",", "mailboxId", ")", ";", "if", "(", "syncError", "!", "=", "null", ")", "{", "syncError", ".", "escalate", "(", ")", ";", "INSTANCE", ".", "log", "(", "m", ".", "mDisplayName", "+", "\"", "<STR_LIT>", "\"", "+", "syncError", ".", "holdDelay", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "errorMap", ".", "put", "(", "mailboxId", ",", "INSTANCE", ".", "new", "SyncError", "(", "exitStatus", ",", "false", ")", ")", ";", "INSTANCE", ".", "log", "(", "m", ".", "mDisplayName", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "break", ";", "case", "AbstractSyncService", ".", "EXIT_LOGIN_FAILURE", ":", "case", "AbstractSyncService", ".", "EXIT_EXCEPTION", ":", "errorMap", ".", "put", "(", "mailboxId", ",", "INSTANCE", ".", "new", "SyncError", "(", "exitStatus", ",", "true", ")", ")", ";", "break", ";", "}", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "static", "public", "int", "getStatusType", "(", "String", "status", ")", "{", "if", "(", "status", "=", "=", "null", ")", "{", "return", "-", "1", ";", "}", "else", "{", "return", "status", ".", "charAt", "(", "STATUS_TYPE_CHAR", ")", "-", "<CHAR_LIT:0>", ";", "}", "}", "</s>"]
["<s>", "static", "public", "int", "getStatusChangeCount", "(", "String", "status", ")", "{", "try", "{", "String", "s", "=", "status", ".", "substring", "(", "STATUS_CHANGE_COUNT_OFFSET", ")", ";", "return", "Integer", ".", "parseInt", "(", "s", ")", ";", "}", "catch", "(", "RuntimeException", "e", ")", "{", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "static", "public", "Context", "getContext", "(", ")", "{", "return", "INSTANCE", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onReceive", "(", "Context", "context", ",", "Intent", "intent", ")", "{", "Log", ".", "d", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "context", ".", "startService", "(", "new", "Intent", "(", "context", ",", "SyncManager", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "MockParserStream", "(", "int", "[", "]", "_array", ")", "{", "array", "=", "_array", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", ")", "throws", "IOException", "{", "try", "{", "return", "array", "[", "pos", "+", "+", "]", ";", "}", "catch", "(", "IndexOutOfBoundsException", "e", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "setResult", "(", "Object", "_value", ")", "{", "value", "=", "_value", ";", "}", "</s>"]
["<s>", "public", "Object", "getResult", "(", ")", "{", "return", "value", ";", "}", "</s>"]
["<s>", "public", "abstract", "void", "stop", "(", ")", ";", "</s>"]
["<s>", "public", "abstract", "void", "ping", "(", ")", ";", "</s>"]
["<s>", "public", "abstract", "void", "validateAccount", "(", "String", "host", ",", "String", "userName", ",", "String", "password", ",", "int", "port", ",", "boolean", "ssl", ",", "boolean", "trustCertificates", ",", "Context", "context", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "AbstractSyncService", "(", "Context", "_context", ",", "Mailbox", "_mailbox", ")", "{", "mContext", "=", "_context", ";", "mMailbox", "=", "_mailbox", ";", "mMailboxId", "=", "_mailbox", ".", "mId", ";", "mMailboxName", "=", "_mailbox", ".", "mServerId", ";", "mAccount", "=", "Account", ".", "restoreAccountWithId", "(", "_context", ",", "_mailbox", ".", "mAccountKey", ")", ";", "}", "</s>"]
["<s>", "public", "AbstractSyncService", "(", "String", "prefix", ")", "{", "}", "</s>"]
["<s>", "static", "public", "void", "validate", "(", "Class", "<", "?", "extends", "AbstractSyncService", ">", "klass", ",", "String", "host", ",", "String", "userName", ",", "String", "password", ",", "int", "port", ",", "boolean", "ssl", ",", "boolean", "trustCertificates", ",", "Context", "context", ")", "throws", "MessagingException", "{", "AbstractSyncService", "svc", ";", "try", "{", "svc", "=", "klass", ".", "newInstance", "(", ")", ";", "svc", ".", "validateAccount", "(", "host", ",", "userName", ",", "password", ",", "port", ",", "ssl", ",", "trustCertificates", ",", "context", ")", ";", "}", "catch", "(", "IllegalAccessException", "e", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "catch", "(", "InstantiationException", "e", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "ValidationResult", "(", "boolean", "_success", ",", "int", "_failure", ",", "String", "_reason", ")", "{", "success", "=", "_success", ";", "failure", "=", "_failure", ";", "reason", "=", "_reason", ";", "}", "</s>"]
["<s>", "ValidationResult", "(", "boolean", "_success", ")", "{", "success", "=", "_success", ";", "}", "</s>"]
["<s>", "ValidationResult", "(", "Exception", "e", ")", "{", "success", "=", "false", ";", "failure", "=", "EXCEPTION", ";", "exception", "=", "e", ";", "}", "</s>"]
["<s>", "public", "boolean", "isSuccess", "(", ")", "{", "return", "success", ";", "}", "</s>"]
["<s>", "public", "String", "getReason", "(", ")", "{", "return", "reason", ";", "}", "</s>"]
["<s>", "public", "boolean", "isStopped", "(", ")", "{", "return", "mStop", ";", "}", "</s>"]
["<s>", "public", "Object", "getSynchronizer", "(", ")", "{", "return", "mSynchronizer", ";", "}", "</s>"]
["<s>", "public", "void", "userLog", "(", "String", "string", ",", "int", "code", ",", "String", "string2", ")", "{", "if", "(", "Eas", ".", "USER_LOG", ")", "{", "userLog", "(", "string", "+", "code", "+", "string2", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "userLog", "(", "String", "string", ",", "int", "code", ")", "{", "if", "(", "Eas", ".", "USER_LOG", ")", "{", "userLog", "(", "string", "+", "code", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "userLog", "(", "String", "str", ",", "Exception", "e", ")", "{", "if", "(", "Eas", ".", "USER_LOG", ")", "{", "Log", ".", "e", "(", "TAG", ",", "str", ",", "e", ")", ";", "}", "else", "{", "Log", ".", "e", "(", "TAG", ",", "str", "+", "e", ")", ";", "}", "if", "(", "Eas", ".", "FILE_LOG", ")", "{", "FileLogger", ".", "log", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "userLog", "(", "String", ".", ".", ".", "strings", ")", "{", "if", "(", "Eas", ".", "USER_LOG", ")", "{", "String", "logText", ";", "if", "(", "strings", ".", "length", "=", "=", "1", ")", "{", "logText", "=", "strings", "[", "0", "]", ";", "}", "else", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", "<NUM_LIT>", ")", ";", "for", "(", "String", "string", ":", "strings", ")", "{", "sb", ".", "append", "(", "string", ")", ";", "}", "logText", "=", "sb", ".", "toString", "(", ")", ";", "}", "Log", ".", "d", "(", "TAG", ",", "logText", ")", ";", "if", "(", "Eas", ".", "FILE_LOG", ")", "{", "FileLogger", ".", "log", "(", "TAG", ",", "logText", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "errorLog", "(", "String", "str", ")", "{", "Log", ".", "e", "(", "TAG", ",", "str", ")", ";", "if", "(", "Eas", ".", "FILE_LOG", ")", "{", "FileLogger", ".", "log", "(", "TAG", ",", "str", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "hasConnectivity", "(", ")", "{", "ConnectivityManager", "cm", "=", "(", "ConnectivityManager", ")", "mContext", ".", "getSystemService", "(", "Context", ".", "CONNECTIVITY_SERVICE", ")", ";", "int", "tries", "=", "0", ";", "while", "(", "tries", "+", "+", "<", "1", ")", "{", "NetworkInfo", "info", "=", "cm", ".", "getActiveNetworkInfo", "(", ")", ";", "if", "(", "info", "!", "=", "null", "&", "&", "info", ".", "isConnected", "(", ")", ")", "{", "DetailedState", "state", "=", "info", ".", "getDetailedState", "(", ")", ";", "if", "(", "state", "=", "=", "DetailedState", ".", "CONNECTED", ")", "{", "return", "true", ";", "}", "}", "try", "{", "Thread", ".", "sleep", "(", "<NUM_LIT:10>", "*", "SECONDS", ")", ";", "}", "catch", "(", "InterruptedException", "e", ")", "{", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "void", "addPartRequest", "(", "PartRequest", "req", ")", "{", "synchronized", "(", "mPartRequests", ")", "{", "mPartRequests", ".", "add", "(", "req", ")", ";", "mRequestTime", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "removePartRequest", "(", "PartRequest", "req", ")", "{", "synchronized", "(", "mPartRequests", ")", "{", "mPartRequests", ".", "remove", "(", "req", ")", ";", "}", "}", "</s>"]
["<s>", "public", "PartRequest", "hasPartRequest", "(", "long", "emailId", ",", "String", "part", ")", "{", "synchronized", "(", "mPartRequests", ")", "{", "for", "(", "PartRequest", "pr", ":", "mPartRequests", ")", "{", "if", "(", "pr", ".", "emailId", "=", "=", "emailId", "&", "&", "pr", ".", "loc", ".", "equals", "(", "part", ")", ")", "return", "pr", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "PartRequest", "cancelPartRequest", "(", "long", "emailId", ",", "String", "part", ")", "{", "synchronized", "(", "mPartRequests", ")", "{", "PartRequest", "p", "=", "null", ";", "for", "(", "PartRequest", "pr", ":", "mPartRequests", ")", "{", "if", "(", "pr", ".", "emailId", "=", "=", "emailId", "&", "&", "pr", ".", "loc", ".", "equals", "(", "part", ")", ")", "{", "p", "=", "pr", ";", "break", ";", "}", "}", "if", "(", "p", "!", "=", "null", ")", "{", "mPartRequests", ".", "remove", "(", "p", ")", ";", "return", "p", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "protected", "String", "[", "]", "getRowColumns", "(", "Uri", "contentUri", ",", "String", "[", "]", "projection", ",", "String", "selection", ",", "String", "[", "]", "selectionArgs", ")", "{", "String", "[", "]", "values", "=", "new", "String", "[", "projection", ".", "length", "]", ";", "ContentResolver", "cr", "=", "mContext", ".", "getContentResolver", "(", ")", ";", "Cursor", "c", "=", "cr", ".", "query", "(", "contentUri", ",", "projection", ",", "selection", ",", "selectionArgs", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "projection", ".", "length", ";", "i", "+", "+", ")", "{", "values", "[", "i", "]", "=", "c", ".", "getString", "(", "i", ")", ";", "}", "}", "else", "{", "return", "null", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "return", "values", ";", "}", "</s>"]
["<s>", "protected", "String", "[", "]", "getRowColumns", "(", "Uri", "baseUri", ",", "long", "id", ",", "String", ".", ".", ".", "projection", ")", "{", "return", "getRowColumns", "(", "ContentUris", ".", "withAppendedId", "(", "baseUri", ",", "id", ")", ",", "projection", ",", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onReceive", "(", "Context", "context", ",", "Intent", "intent", ")", "{", "long", "mid", "=", "intent", ".", "getLongExtra", "(", "\"", "<STR_LIT>", "\"", ",", "-", "1", ")", ";", "if", "(", "SyncManager", ".", "INSTANCE", "!", "=", "null", ")", "{", "SyncManager", ".", "INSTANCE", ".", "log", "(", "\"", "<STR_LIT>", "\"", "+", "SyncManager", ".", "alarmOwner", "(", "mid", ")", ")", ";", "}", "SyncManager", ".", "ping", "(", "context", ",", "mid", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "setUserDebug", "(", "int", "state", ")", "{", "if", "(", "!", "DEBUG", ")", "{", "USER_LOG", "=", "(", "state", "&", "DEBUG_BIT", ")", "!", "=", "0", ";", "PARSER_LOG", "=", "(", "state", "&", "DEBUG_EXCHANGE_BIT", ")", "!", "=", "0", ";", "FILE_LOG", "=", "(", "state", "&", "DEBUG_FILE_BIT", ")", "!", "=", "0", ";", "if", "(", "FILE_LOG", "|", "|", "PARSER_LOG", ")", "{", "USER_LOG", "=", "true", ";", "}", "Log", ".", "d", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "(", "USER_LOG", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "\"", ")", "+", "(", "PARSER_LOG", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "\"", ")", "+", "(", "FILE_LOG", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "\"", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "EasSyncService", "(", "Context", "_context", ",", "Mailbox", "_mailbox", ")", "{", "super", "(", "_context", ",", "_mailbox", ")", ";", "mContentResolver", "=", "_context", ".", "getContentResolver", "(", ")", ";", "HostAuth", "ha", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "_context", ",", "mAccount", ".", "mHostAuthKeyRecv", ")", ";", "mSsl", "=", "(", "ha", ".", "mFlags", "&", "HostAuth", ".", "FLAG_SSL", ")", "!", "=", "0", ";", "mTrustSsl", "=", "(", "ha", ".", "mFlags", "&", "HostAuth", ".", "FLAG_TRUST_ALL_CERTIFICATES", ")", "!", "=", "0", ";", "}", "</s>"]
["<s>", "private", "EasSyncService", "(", "String", "prefix", ")", "{", "super", "(", "prefix", ")", ";", "}", "</s>"]
["<s>", "public", "EasSyncService", "(", ")", "{", "this", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "ping", "(", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "synchronized", "(", "getSynchronizer", "(", ")", ")", "{", "if", "(", "mPendingPost", "!", "=", "null", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mAborted", "=", "true", ";", "mPendingPost", ".", "abort", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "stop", "(", ")", "{", "mStop", "=", "true", ";", "synchronized", "(", "getSynchronizer", "(", ")", ")", "{", "if", "(", "mPendingPost", "!", "=", "null", ")", "{", "mPendingPost", ".", "abort", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "protected", "boolean", "isAuthError", "(", "int", "code", ")", "{", "return", "(", "(", "code", "=", "=", "HttpStatus", ".", "SC_UNAUTHORIZED", ")", "|", "|", "(", "code", "=", "=", "HttpStatus", ".", "SC_FORBIDDEN", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "validateAccount", "(", "String", "hostAddress", ",", "String", "userName", ",", "String", "password", ",", "int", "port", ",", "boolean", "ssl", ",", "boolean", "trustCertificates", ",", "Context", "context", ")", "throws", "MessagingException", "{", "try", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "hostAddress", ",", "\"", "<STR_LIT>", "\"", ",", "userName", ",", "\"", "<STR_LIT>", "\"", ",", "ssl", "?", "\"", "<STR_LIT:1>", "\"", ":", "\"", "<STR_LIT:0>", "\"", ")", ";", "EasSyncService", "svc", "=", "new", "EasSyncService", "(", "\"", "<STR_LIT>", "\"", ")", ";", "svc", ".", "mContext", "=", "context", ";", "svc", ".", "mHostAddress", "=", "hostAddress", ";", "svc", ".", "mUserName", "=", "userName", ";", "svc", ".", "mPassword", "=", "password", ";", "svc", ".", "mSsl", "=", "ssl", ";", "svc", ".", "mTrustSsl", "=", "trustCertificates", ";", "svc", ".", "mDeviceId", "=", "SyncManager", ".", "getDeviceId", "(", ")", ";", "HttpResponse", "resp", "=", "svc", ".", "sendHttpClientOptions", "(", ")", ";", "int", "code", "=", "resp", ".", "getStatusLine", "(", ")", ".", "getStatusCode", "(", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "code", ")", ";", "if", "(", "code", "=", "=", "HttpStatus", ".", "SC_OK", ")", "{", "Header", "commands", "=", "resp", ".", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Header", "versions", "=", "resp", ".", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "commands", "=", "=", "null", "|", "|", "versions", "=", "=", "null", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "throw", "new", "MessagingException", "(", "MessagingException", ".", "IOERROR", ")", ";", "}", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "if", "(", "isAuthError", "(", "code", ")", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "throw", "new", "AuthenticationFailedException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "code", ")", ";", "throw", "new", "MessagingException", "(", "MessagingException", ".", "IOERROR", ")", ";", "}", "}", "catch", "(", "IOException", "e", ")", "{", "Throwable", "cause", "=", "e", ".", "getCause", "(", ")", ";", "if", "(", "cause", "!", "=", "null", "&", "&", "cause", "instanceof", "CertificateException", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "e", ".", "getMessage", "(", ")", ")", ";", "throw", "new", "MessagingException", "(", "MessagingException", ".", "GENERAL_SECURITY", ")", ";", "}", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "e", ".", "getMessage", "(", ")", ")", ";", "throw", "new", "MessagingException", "(", "MessagingException", ".", "IOERROR", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "doStatusCallback", "(", "long", "messageId", ",", "long", "attachmentId", ",", "int", "status", ")", "{", "try", "{", "SyncManager", ".", "callback", "(", ")", ".", "loadAttachmentStatus", "(", "messageId", ",", "attachmentId", ",", "status", ",", "0", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "private", "void", "doProgressCallback", "(", "long", "messageId", ",", "long", "attachmentId", ",", "int", "progress", ")", "{", "try", "{", "SyncManager", ".", "callback", "(", ")", ".", "loadAttachmentStatus", "(", "messageId", ",", "attachmentId", ",", "EmailServiceStatus", ".", "IN_PROGRESS", ",", "progress", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "public", "File", "createUniqueFileInternal", "(", "String", "dir", ",", "String", "filename", ")", "{", "File", "directory", ";", "if", "(", "dir", "=", "=", "null", ")", "{", "directory", "=", "mContext", ".", "getFilesDir", "(", ")", ";", "}", "else", "{", "directory", "=", "new", "File", "(", "dir", ")", ";", "}", "if", "(", "!", "directory", ".", "exists", "(", ")", ")", "{", "directory", ".", "mkdirs", "(", ")", ";", "}", "File", "file", "=", "new", "File", "(", "directory", ",", "filename", ")", ";", "if", "(", "!", "file", ".", "exists", "(", ")", ")", "{", "return", "file", ";", "}", "int", "index", "=", "filename", ".", "lastIndexOf", "(", "<CHAR_LIT:.>", ")", ";", "String", "name", "=", "filename", ";", "String", "extension", "=", "\"", "\"", ";", "if", "(", "index", "!", "=", "-", "1", ")", "{", "name", "=", "filename", ".", "substring", "(", "0", ",", "index", ")", ";", "extension", "=", "filename", ".", "substring", "(", "index", ")", ";", "}", "for", "(", "int", "i", "=", "<NUM_LIT:2>", ";", "i", "<", "Integer", ".", "MAX_VALUE", ";", "i", "+", "+", ")", "{", "file", "=", "new", "File", "(", "directory", ",", "name", "+", "<CHAR_LIT:->", "+", "i", "+", "extension", ")", ";", "if", "(", "!", "file", ".", "exists", "(", ")", ")", "{", "return", "file", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "protected", "void", "getAttachment", "(", "PartRequest", "req", ")", "throws", "IOException", "{", "Attachment", "att", "=", "req", ".", "att", ";", "Message", "msg", "=", "Message", ".", "restoreMessageWithId", "(", "mContext", ",", "att", ".", "mMessageKey", ")", ";", "doProgressCallback", "(", "msg", ".", "mId", ",", "att", ".", "mId", ",", "0", ")", ";", "String", "cmd", "=", "\"", "<STR_LIT>", "\"", "+", "att", ".", "mLocation", ";", "HttpResponse", "res", "=", "sendHttpClientPost", "(", "cmd", ",", "null", ",", "COMMAND_TIMEOUT", ")", ";", "int", "status", "=", "res", ".", "getStatusLine", "(", ")", ".", "getStatusCode", "(", ")", ";", "if", "(", "status", "=", "=", "HttpStatus", ".", "SC_OK", ")", "{", "HttpEntity", "e", "=", "res", ".", "getEntity", "(", ")", ";", "int", "len", "=", "(", "int", ")", "e", ".", "getContentLength", "(", ")", ";", "InputStream", "is", "=", "res", ".", "getEntity", "(", ")", ".", "getContent", "(", ")", ";", "File", "f", "=", "(", "req", ".", "destination", "!", "=", "null", ")", "?", "new", "File", "(", "req", ".", "destination", ")", ":", "createUniqueFileInternal", "(", "req", ".", "destination", ",", "att", ".", "mFileName", ")", ";", "if", "(", "f", "!", "=", "null", ")", "{", "File", "destDir", "=", "f", ".", "getParentFile", "(", ")", ";", "if", "(", "!", "destDir", ".", "exists", "(", ")", ")", "{", "destDir", ".", "mkdirs", "(", ")", ";", "}", "FileOutputStream", "os", "=", "new", "FileOutputStream", "(", "f", ")", ";", "if", "(", "len", "!", "=", "0", ")", "{", "try", "{", "mPendingPartRequest", "=", "req", ";", "byte", "[", "]", "bytes", "=", "new", "byte", "[", "CHUNK_SIZE", "]", ";", "int", "length", "=", "len", ";", "int", "totalRead", "=", "0", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "len", ")", ";", "while", "(", "true", ")", "{", "int", "read", "=", "is", ".", "read", "(", "bytes", ",", "0", ",", "CHUNK_SIZE", ")", ";", "if", "(", "read", "<", "0", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "totalRead", ")", ";", "break", ";", "}", "totalRead", "+", "=", "read", ";", "os", ".", "write", "(", "bytes", ",", "0", ",", "read", ")", ";", "if", "(", "length", ">", "0", ")", "{", "if", "(", "totalRead", ">", "length", ")", "{", "errorLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "break", ";", "}", "int", "pct", "=", "(", "totalRead", "*", "<NUM_LIT:100>", "/", "length", ")", ";", "doProgressCallback", "(", "msg", ".", "mId", ",", "att", ".", "mId", ",", "pct", ")", ";", "}", "}", "}", "finally", "{", "mPendingPartRequest", "=", "null", ";", "}", "}", "os", ".", "flush", "(", ")", ";", "os", ".", "close", "(", ")", ";", "if", "(", "att", ".", "isSaved", "(", ")", ")", "{", "String", "contentUriString", "=", "(", "req", ".", "contentUriString", "!", "=", "null", ")", "?", "req", ".", "contentUriString", ":", "\"", "<STR_LIT>", "\"", "+", "f", ".", "getAbsolutePath", "(", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "AttachmentColumns", ".", "CONTENT_URI", ",", "contentUriString", ")", ";", "att", ".", "update", "(", "mContext", ",", "cv", ")", ";", "doStatusCallback", "(", "msg", ".", "mId", ",", "att", ".", "mId", ",", "EmailServiceStatus", ".", "SUCCESS", ")", ";", "}", "}", "}", "else", "{", "doStatusCallback", "(", "msg", ".", "mId", ",", "att", ".", "mId", ",", "EmailServiceStatus", ".", "MESSAGE_NOT_FOUND", ")", ";", "}", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "private", "String", "makeUriString", "(", "String", "cmd", ",", "String", "extra", ")", "throws", "IOException", "{", "String", "safeUserName", "=", "URLEncoder", ".", "encode", "(", "mUserName", ")", ";", "if", "(", "mAuthString", "=", "=", "null", ")", "{", "String", "cs", "=", "mUserName", "+", "<CHAR_LIT::>", "+", "mPassword", ";", "mAuthString", "=", "\"", "<STR_LIT>", "\"", "+", "new", "String", "(", "Base64", ".", "encodeBase64", "(", "cs", ".", "getBytes", "(", ")", ")", ")", ";", "mCmdString", "=", "\"", "<STR_LIT>", "\"", "+", "safeUserName", "+", "\"", "<STR_LIT>", "\"", "+", "mDeviceId", "+", "\"", "<STR_LIT>", "\"", "+", "mDeviceType", ";", "}", "String", "us", "=", "(", "mSsl", "?", "(", "mTrustSsl", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", ")", ":", "\"", "<STR_LIT>", "\"", ")", "+", "\"", "<STR_LIT>", "\"", "+", "mHostAddress", "+", "\"", "<STR_LIT>", "\"", ";", "if", "(", "cmd", "!", "=", "null", ")", "{", "us", "+", "=", "\"", "<STR_LIT>", "\"", "+", "cmd", "+", "mCmdString", ";", "}", "if", "(", "extra", "!", "=", "null", ")", "{", "us", "+", "=", "extra", ";", "}", "return", "us", ";", "}", "</s>"]
["<s>", "private", "void", "setHeaders", "(", "HttpRequestBase", "method", ")", "{", "method", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "mAuthString", ")", ";", "method", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "mProtocolVersion", ")", ";", "method", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "method", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "mDeviceType", "+", "<CHAR_LIT:/>", "+", "Eas", ".", "VERSION", ")", ";", "}", "</s>"]
["<s>", "private", "ClientConnectionManager", "getClientConnectionManager", "(", ")", "{", "return", "SyncManager", ".", "getClientConnectionManager", "(", ")", ";", "}", "</s>"]
["<s>", "private", "HttpClient", "getHttpClient", "(", "int", "timeout", ")", "{", "HttpParams", "params", "=", "new", "BasicHttpParams", "(", ")", ";", "HttpConnectionParams", ".", "setConnectionTimeout", "(", "params", ",", "<NUM_LIT:15>", "*", "SECONDS", ")", ";", "HttpConnectionParams", ".", "setSoTimeout", "(", "params", ",", "timeout", ")", ";", "HttpConnectionParams", ".", "setSocketBufferSize", "(", "params", ",", "<NUM_LIT>", ")", ";", "HttpClient", "client", "=", "new", "DefaultHttpClient", "(", "getClientConnectionManager", "(", ")", ",", "params", ")", ";", "return", "client", ";", "}", "</s>"]
["<s>", "protected", "HttpResponse", "sendHttpClientPost", "(", "String", "cmd", ",", "byte", "[", "]", "bytes", ")", "throws", "IOException", "{", "return", "sendHttpClientPost", "(", "cmd", ",", "new", "ByteArrayEntity", "(", "bytes", ")", ",", "COMMAND_TIMEOUT", ")", ";", "}", "</s>"]
["<s>", "protected", "HttpResponse", "sendHttpClientPost", "(", "String", "cmd", ",", "HttpEntity", "entity", ")", "throws", "IOException", "{", "return", "sendHttpClientPost", "(", "cmd", ",", "entity", ",", "COMMAND_TIMEOUT", ")", ";", "}", "</s>"]
["<s>", "protected", "HttpResponse", "sendPing", "(", "byte", "[", "]", "bytes", ",", "int", "heartbeat", ")", "throws", "IOException", "{", "Thread", ".", "currentThread", "(", ")", ".", "setName", "(", "mAccount", ".", "mDisplayName", "+", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "Eas", ".", "USER_LOG", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "heartbeat", "+", "\"", "<STR_LIT>", "\"", "+", "mPingHighWaterMark", "+", "<CHAR_LIT>", ")", ";", "}", "return", "sendHttpClientPost", "(", "PING_COMMAND", ",", "new", "ByteArrayEntity", "(", "bytes", ")", ",", "(", "heartbeat", "+", "<NUM_LIT:5>", ")", "*", "SECONDS", ")", ";", "}", "</s>"]
["<s>", "protected", "HttpResponse", "sendHttpClientPost", "(", "String", "cmd", ",", "HttpEntity", "entity", ",", "int", "timeout", ")", "throws", "IOException", "{", "HttpClient", "client", "=", "getHttpClient", "(", "timeout", ")", ";", "boolean", "sleepAllowed", "=", "cmd", ".", "equals", "(", "PING_COMMAND", ")", ";", "String", "extra", "=", "null", ";", "boolean", "msg", "=", "false", ";", "if", "(", "cmd", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", "|", "|", "cmd", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "int", "cmdLength", "=", "cmd", ".", "indexOf", "(", "<CHAR_LIT>", ")", ";", "extra", "=", "cmd", ".", "substring", "(", "cmdLength", ")", ";", "cmd", "=", "cmd", ".", "substring", "(", "0", ",", "cmdLength", ")", ";", "msg", "=", "true", ";", "}", "else", "if", "(", "cmd", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "msg", "=", "true", ";", "}", "String", "us", "=", "makeUriString", "(", "cmd", ",", "extra", ")", ";", "HttpPost", "method", "=", "new", "HttpPost", "(", "URI", ".", "create", "(", "us", ")", ")", ";", "if", "(", "msg", ")", "{", "method", ".", "setHeader", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "entity", "!", "=", "null", ")", "{", "method", ".", "setHeader", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "setHeaders", "(", "method", ")", ";", "method", ".", "setEntity", "(", "entity", ")", ";", "synchronized", "(", "getSynchronizer", "(", ")", ")", "{", "mPendingPost", "=", "method", ";", "if", "(", "sleepAllowed", ")", "{", "SyncManager", ".", "runAsleep", "(", "mMailboxId", ",", "timeout", "+", "(", "<NUM_LIT:10>", "*", "SECONDS", ")", ")", ";", "}", "}", "try", "{", "return", "client", ".", "execute", "(", "method", ")", ";", "}", "finally", "{", "synchronized", "(", "getSynchronizer", "(", ")", ")", "{", "if", "(", "sleepAllowed", ")", "{", "SyncManager", ".", "runAwake", "(", "mMailboxId", ")", ";", "}", "mPendingPost", "=", "null", ";", "}", "}", "}", "</s>"]
["<s>", "protected", "HttpResponse", "sendHttpClientOptions", "(", ")", "throws", "IOException", "{", "HttpClient", "client", "=", "getHttpClient", "(", "COMMAND_TIMEOUT", ")", ";", "String", "us", "=", "makeUriString", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "HttpOptions", "method", "=", "new", "HttpOptions", "(", "URI", ".", "create", "(", "us", ")", ")", ";", "setHeaders", "(", "method", ")", ";", "return", "client", ".", "execute", "(", "method", ")", ";", "}", "</s>"]
["<s>", "String", "getTargetCollectionClassFromCursor", "(", "Cursor", "c", ")", "{", "int", "type", "=", "c", ".", "getInt", "(", "Mailbox", ".", "CONTENT_TYPE_COLUMN", ")", ";", "if", "(", "type", "=", "=", "Mailbox", ".", "TYPE_CONTACTS", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "else", "if", "(", "type", "=", "=", "Mailbox", ".", "TYPE_CALENDAR", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "else", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "}", "</s>"]
["<s>", "public", "void", "runAccountMailbox", "(", ")", "throws", "IOException", ",", "EasParserException", "{", "mExitStatus", "=", "EmailServiceStatus", ".", "SUCCESS", ";", "try", "{", "try", "{", "SyncManager", ".", "callback", "(", ")", ".", "syncMailboxListStatus", "(", "mAccount", ".", "mId", ",", "EmailServiceStatus", ".", "IN_PROGRESS", ",", "0", ")", ";", "}", "catch", "(", "RemoteException", "e1", ")", "{", "}", "if", "(", "mAccount", ".", "mSyncKey", "=", "=", "null", ")", "{", "mAccount", ".", "mSyncKey", "=", "\"", "<STR_LIT:0>", "\"", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "AccountColumns", ".", "SYNC_KEY", ",", "mAccount", ".", "mSyncKey", ")", ";", "mAccount", ".", "update", "(", "mContext", ",", "cv", ")", ";", "}", "boolean", "firstSync", "=", "mAccount", ".", "mSyncKey", ".", "equals", "(", "\"", "<STR_LIT:0>", "\"", ")", ";", "if", "(", "firstSync", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "Mailbox", ".", "SYNC_INTERVAL", ",", "Mailbox", ".", "CHECK_INTERVAL_PUSH", ")", ";", "if", "(", "mContentResolver", ".", "update", "(", "Mailbox", ".", "CONTENT_URI", ",", "cv", ",", "WHERE_ACCOUNT_AND_SYNC_INTERVAL_PING", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mAccount", ".", "mId", ")", "}", ")", ">", "0", ")", "{", "SyncManager", ".", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "mAccount", ".", "mProtocolVersion", "=", "=", "null", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "HttpResponse", "resp", "=", "sendHttpClientOptions", "(", ")", ";", "int", "code", "=", "resp", ".", "getStatusLine", "(", ")", ".", "getStatusCode", "(", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "code", ")", ";", "if", "(", "code", "=", "=", "HttpStatus", ".", "SC_OK", ")", "{", "Header", "header", "=", "resp", ".", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "userLog", "(", "header", ".", "getValue", "(", ")", ")", ";", "header", "=", "resp", ".", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "versions", "=", "header", ".", "getValue", "(", ")", ";", "if", "(", "versions", "!", "=", "null", ")", "{", "if", "(", "versions", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "mProtocolVersion", "=", "\"", "<STR_LIT>", "\"", ";", "}", "mProtocolVersionDouble", "=", "Double", ".", "parseDouble", "(", "mProtocolVersion", ")", ";", "mAccount", ".", "mProtocolVersion", "=", "mProtocolVersion", ";", "userLog", "(", "versions", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "mProtocolVersion", ")", ";", "}", "else", "{", "errorLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "throw", "new", "IOException", "(", ")", ";", "}", "}", "else", "{", "errorLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "throw", "new", "IOException", "(", ")", ";", "}", "}", "if", "(", "mAccount", ".", "mSyncInterval", "=", "=", "Account", ".", "CHECK_INTERVAL_PUSH", ")", "{", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "Mailbox", ".", "SYNC_INTERVAL", ",", "Mailbox", ".", "CHECK_INTERVAL_PUSH", ")", ";", "if", "(", "mContentResolver", ".", "update", "(", "Mailbox", ".", "CONTENT_URI", ",", "cv", ",", "SyncManager", ".", "WHERE_IN_ACCOUNT_AND_PUSHABLE", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mAccount", ".", "mId", ")", "}", ")", ">", "0", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "while", "(", "!", "mStop", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "mAccount", ".", "mSyncKey", ")", ";", "Serializer", "s", "=", "new", "Serializer", "(", ")", ";", "s", ".", "start", "(", "Tags", ".", "FOLDER_FOLDER_SYNC", ")", ".", "start", "(", "Tags", ".", "FOLDER_SYNC_KEY", ")", ".", "text", "(", "mAccount", ".", "mSyncKey", ")", ".", "end", "(", ")", ".", "end", "(", ")", ".", "done", "(", ")", ";", "HttpResponse", "resp", "=", "sendHttpClientPost", "(", "\"", "<STR_LIT>", "\"", ",", "s", ".", "toByteArray", "(", ")", ")", ";", "if", "(", "mStop", ")", "break", ";", "int", "code", "=", "resp", ".", "getStatusLine", "(", ")", ".", "getStatusCode", "(", ")", ";", "if", "(", "code", "=", "=", "HttpStatus", ".", "SC_OK", ")", "{", "HttpEntity", "entity", "=", "resp", ".", "getEntity", "(", ")", ";", "int", "len", "=", "(", "int", ")", "entity", ".", "getContentLength", "(", ")", ";", "if", "(", "len", "!", "=", "0", ")", "{", "InputStream", "is", "=", "entity", ".", "getContent", "(", ")", ";", "if", "(", "new", "FolderSyncParser", "(", "is", ",", "new", "AccountSyncAdapter", "(", "mMailbox", ",", "this", ")", ")", ".", "parse", "(", ")", ")", "{", "continue", ";", "}", "}", "}", "else", "if", "(", "isAuthError", "(", "code", ")", ")", "{", "mExitStatus", "=", "EXIT_LOGIN_FAILURE", ";", "}", "else", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "code", ")", ";", "}", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "Mailbox", ".", "SYNC_INTERVAL", ",", "Account", ".", "CHECK_INTERVAL_PUSH", ")", ";", "if", "(", "mContentResolver", ".", "update", "(", "Mailbox", ".", "CONTENT_URI", ",", "cv", ",", "WHERE_PUSH_HOLD_NOT_ACCOUNT_MAILBOX", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mAccount", ".", "mId", ")", "}", ")", ">", "0", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "try", "{", "SyncManager", ".", "callback", "(", ")", ".", "syncMailboxListStatus", "(", "mAccount", ".", "mId", ",", "mExitStatus", ",", "0", ")", ";", "}", "catch", "(", "RemoteException", "e1", ")", "{", "}", "String", "threadName", "=", "Thread", ".", "currentThread", "(", ")", ".", "getName", "(", ")", ";", "try", "{", "runPingLoop", "(", ")", ";", "}", "catch", "(", "StaleFolderListException", "e", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "finally", "{", "Thread", ".", "currentThread", "(", ")", ".", "setName", "(", "threadName", ")", ";", "}", "}", "}", "catch", "(", "IOException", "e", ")", "{", "try", "{", "if", "(", "!", "mStop", ")", "{", "SyncManager", ".", "callback", "(", ")", ".", "syncMailboxListStatus", "(", "mAccount", ".", "mId", ",", "EmailServiceStatus", ".", "CONNECTION_ERROR", ",", "0", ")", ";", "}", "}", "catch", "(", "RemoteException", "e1", ")", "{", "}", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "void", "pushFallback", "(", "long", "mailboxId", ")", "{", "Mailbox", "mailbox", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "mContext", ",", "mailboxId", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "int", "mins", "=", "PING_FALLBACK_PIM", ";", "if", "(", "mailbox", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_INBOX", ")", "{", "mins", "=", "PING_FALLBACK_INBOX", ";", "}", "cv", ".", "put", "(", "Mailbox", ".", "SYNC_INTERVAL", ",", "mins", ")", ";", "mContentResolver", ".", "update", "(", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "CONTENT_URI", ",", "mailboxId", ")", ",", "cv", ",", "null", ",", "null", ")", ";", "errorLog", "(", "\"", "<STR_LIT>", "\"", "+", "mailbox", ".", "mDisplayName", "+", "\"", "<STR_LIT>", "\"", "+", "mins", "+", "\"", "<STR_LIT>", "\"", ")", ";", "SyncManager", ".", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "void", "runPingLoop", "(", ")", "throws", "IOException", ",", "StaleFolderListException", "{", "int", "pingHeartbeat", "=", "mPingHeartbeat", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "long", "endTime", "=", "System", ".", "currentTimeMillis", "(", ")", "+", "(", "<NUM_LIT:30>", "*", "MINUTES", ")", ";", "HashMap", "<", "String", ",", "Integer", ">", "pingErrorMap", "=", "new", "HashMap", "<", "String", ",", "Integer", ">", "(", ")", ";", "ArrayList", "<", "String", ">", "readyMailboxes", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "ArrayList", "<", "String", ">", "notReadyMailboxes", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "int", "pingWaitCount", "=", "0", ";", "while", "(", "(", "System", ".", "currentTimeMillis", "(", ")", "<", "endTime", ")", "&", "&", "!", "mStop", ")", "{", "int", "pushCount", "=", "0", ";", "int", "canPushCount", "=", "0", ";", "int", "uninitCount", "=", "0", ";", "Serializer", "s", "=", "new", "Serializer", "(", ")", ";", "Cursor", "c", "=", "mContentResolver", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "Mailbox", ".", "CONTENT_PROJECTION", ",", "MailboxColumns", ".", "ACCOUNT_KEY", "+", "<CHAR_LIT:=>", "+", "mAccount", ".", "mId", "+", "AND_FREQUENCY_PING_PUSH_AND_NOT_ACCOUNT_MAILBOX", ",", "null", ",", "null", ")", ";", "notReadyMailboxes", ".", "clear", "(", ")", ";", "readyMailboxes", ".", "clear", "(", ")", ";", "try", "{", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "pushCount", "+", "+", ";", "long", "mailboxId", "=", "c", ".", "getLong", "(", "Mailbox", ".", "CONTENT_ID_COLUMN", ")", ";", "int", "pingStatus", "=", "SyncManager", ".", "pingStatus", "(", "mailboxId", ")", ";", "String", "mailboxName", "=", "c", ".", "getString", "(", "Mailbox", ".", "CONTENT_DISPLAY_NAME_COLUMN", ")", ";", "if", "(", "pingStatus", "=", "=", "SyncManager", ".", "PING_STATUS_OK", ")", "{", "String", "syncKey", "=", "c", ".", "getString", "(", "Mailbox", ".", "CONTENT_SYNC_KEY_COLUMN", ")", ";", "if", "(", "(", "syncKey", "=", "=", "null", ")", "|", "|", "syncKey", ".", "equals", "(", "\"", "<STR_LIT:0>", "\"", ")", ")", "{", "pushCount", "-", "-", ";", "uninitCount", "+", "+", ";", "continue", ";", "}", "if", "(", "canPushCount", "+", "+", "=", "=", "0", ")", "{", "s", ".", "start", "(", "Tags", ".", "PING_PING", ")", ".", "data", "(", "Tags", ".", "PING_HEARTBEAT_INTERVAL", ",", "Integer", ".", "toString", "(", "pingHeartbeat", ")", ")", ".", "start", "(", "Tags", ".", "PING_FOLDERS", ")", ";", "}", "String", "folderClass", "=", "getTargetCollectionClassFromCursor", "(", "c", ")", ";", "s", ".", "start", "(", "Tags", ".", "PING_FOLDER", ")", ".", "data", "(", "Tags", ".", "PING_ID", ",", "c", ".", "getString", "(", "Mailbox", ".", "CONTENT_SERVER_ID_COLUMN", ")", ")", ".", "data", "(", "Tags", ".", "PING_CLASS", ",", "folderClass", ")", ".", "end", "(", ")", ";", "readyMailboxes", ".", "add", "(", "mailboxName", ")", ";", "}", "else", "if", "(", "(", "pingStatus", "=", "=", "SyncManager", ".", "PING_STATUS_RUNNING", ")", "|", "|", "(", "pingStatus", "=", "=", "SyncManager", ".", "PING_STATUS_WAITING", ")", ")", "{", "notReadyMailboxes", ".", "add", "(", "mailboxName", ")", ";", "}", "else", "if", "(", "pingStatus", "=", "=", "SyncManager", ".", "PING_STATUS_UNABLE", ")", "{", "pushCount", "-", "-", ";", "userLog", "(", "mailboxName", ",", "\"", "<STR_LIT>", "\"", ")", ";", "continue", ";", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "if", "(", "Eas", ".", "USER_LOG", ")", "{", "if", "(", "!", "notReadyMailboxes", ".", "isEmpty", "(", ")", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "notReadyMailboxes", ")", ";", "}", "if", "(", "!", "readyMailboxes", ".", "isEmpty", "(", ")", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "readyMailboxes", ")", ";", "}", "}", "boolean", "forcePing", "=", "!", "notReadyMailboxes", ".", "isEmpty", "(", ")", "&", "&", "(", "pingWaitCount", ">", "<NUM_LIT:5>", ")", ";", "if", "(", "(", "canPushCount", ">", "0", ")", "&", "&", "(", "(", "canPushCount", "=", "=", "pushCount", ")", "|", "|", "forcePing", ")", ")", "{", "s", ".", "end", "(", ")", ".", "end", "(", ")", ".", "done", "(", ")", ";", "pingWaitCount", "=", "0", ";", "if", "(", "mStop", ")", "return", ";", "long", "pingTime", "=", "SystemClock", ".", "elapsedRealtime", "(", ")", ";", "try", "{", "if", "(", "forcePing", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "HttpResponse", "res", "=", "sendPing", "(", "s", ".", "toByteArray", "(", ")", ",", "forcePing", "?", "PING_FORCE_HEARTBEAT", ":", "pingHeartbeat", ")", ";", "int", "code", "=", "res", ".", "getStatusLine", "(", ")", ".", "getStatusCode", "(", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "code", ")", ";", "if", "(", "mStop", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "if", "(", "code", "=", "=", "HttpStatus", ".", "SC_OK", ")", "{", "HttpEntity", "e", "=", "res", ".", "getEntity", "(", ")", ";", "int", "len", "=", "(", "int", ")", "e", ".", "getContentLength", "(", ")", ";", "InputStream", "is", "=", "res", ".", "getEntity", "(", ")", ".", "getContent", "(", ")", ";", "if", "(", "len", "!", "=", "0", ")", "{", "int", "pingResult", "=", "parsePingResult", "(", "is", ",", "mContentResolver", ",", "pingErrorMap", ")", ";", "if", "(", "pingResult", "=", "=", "PROTOCOL_PING_STATUS_COMPLETED", "&", "&", "!", "forcePing", ")", "{", "if", "(", "pingHeartbeat", ">", "mPingHighWaterMark", ")", "{", "mPingHighWaterMark", "=", "pingHeartbeat", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "mPingHighWaterMark", ")", ";", "}", "if", "(", "(", "pingHeartbeat", "<", "PING_MAX_HEARTBEAT", ")", "&", "&", "!", "mPingHeartbeatDropped", ")", "{", "pingHeartbeat", "+", "=", "PING_HEARTBEAT_INCREMENT", ";", "if", "(", "pingHeartbeat", ">", "PING_MAX_HEARTBEAT", ")", "{", "pingHeartbeat", "=", "PING_MAX_HEARTBEAT", ";", "}", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "pingHeartbeat", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "else", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "throw", "new", "IOException", "(", ")", ";", "}", "}", "else", "if", "(", "isAuthError", "(", "code", ")", ")", "{", "mExitStatus", "=", "EXIT_LOGIN_FAILURE", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "code", ")", ";", "throw", "new", "IOException", "(", ")", ";", "}", "}", "catch", "(", "IOException", "e", ")", "{", "String", "message", "=", "e", ".", "getMessage", "(", ")", ";", "boolean", "hasMessage", "=", "message", "!", "=", "null", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "(", "hasMessage", "?", "message", ":", "\"", "<STR_LIT>", "\"", ")", ")", ";", "if", "(", "mAborted", "|", "|", "(", "hasMessage", "&", "&", "message", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "long", "pingLength", "=", "SystemClock", ".", "elapsedRealtime", "(", ")", "-", "pingTime", ";", "if", "(", "(", "pingHeartbeat", ">", "PING_MIN_HEARTBEAT", ")", "&", "&", "(", "pingHeartbeat", ">", "mPingHighWaterMark", ")", ")", "{", "pingHeartbeat", "-", "=", "PING_HEARTBEAT_INCREMENT", ";", "mPingHeartbeatDropped", "=", "true", ";", "if", "(", "pingHeartbeat", "<", "PING_MIN_HEARTBEAT", ")", "{", "pingHeartbeat", "=", "PING_MIN_HEARTBEAT", ";", "}", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "pingHeartbeat", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "mAborted", "|", "|", "(", "pingLength", "<", "<NUM_LIT>", ")", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "throw", "e", ";", "}", "else", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "else", "{", "throw", "e", ";", "}", "}", "}", "else", "if", "(", "forcePing", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sleep", "(", "<NUM_LIT>", "*", "SECONDS", ",", "true", ")", ";", "}", "else", "if", "(", "pushCount", ">", "0", ")", "{", "sleep", "(", "<NUM_LIT:2>", "*", "SECONDS", ",", "false", ")", ";", "pingWaitCount", "+", "+", ";", "}", "else", "if", "(", "uninitCount", ">", "0", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "uninitCount", ",", "\"", "<STR_LIT>", "\"", ")", ";", "sleep", "(", "<NUM_LIT:10>", "*", "SECONDS", ",", "true", ")", ";", "}", "else", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sleep", "(", "<NUM_LIT:30>", "*", "MINUTES", ",", "true", ")", ";", "}", "}", "}", "</s>"]
["<s>", "void", "sleep", "(", "long", "ms", ",", "boolean", "runAsleep", ")", "{", "if", "(", "runAsleep", ")", "{", "SyncManager", ".", "runAsleep", "(", "mMailboxId", ",", "ms", "+", "(", "<NUM_LIT:5>", "*", "SECONDS", ")", ")", ";", "}", "try", "{", "Thread", ".", "sleep", "(", "ms", ")", ";", "}", "catch", "(", "InterruptedException", "e", ")", "{", "}", "finally", "{", "if", "(", "runAsleep", ")", "{", "SyncManager", ".", "runAwake", "(", "mMailboxId", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "int", "parsePingResult", "(", "InputStream", "is", ",", "ContentResolver", "cr", ",", "HashMap", "<", "String", ",", "Integer", ">", "errorMap", ")", "throws", "IOException", ",", "StaleFolderListException", "{", "PingParser", "pp", "=", "new", "PingParser", "(", "is", ",", "this", ")", ";", "if", "(", "pp", ".", "parse", "(", ")", ")", "{", "mBindArguments", "[", "0", "]", "=", "Long", ".", "toString", "(", "mAccount", ".", "mId", ")", ";", "mPingChangeList", "=", "pp", ".", "getSyncList", "(", ")", ";", "for", "(", "String", "serverId", ":", "mPingChangeList", ")", "{", "mBindArguments", "[", "1", "]", "=", "serverId", ";", "Cursor", "c", "=", "cr", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "Mailbox", ".", "CONTENT_PROJECTION", ",", "WHERE_ACCOUNT_KEY_AND_SERVER_ID", ",", "mBindArguments", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "String", "status", "=", "c", ".", "getString", "(", "Mailbox", ".", "CONTENT_SYNC_STATUS_COLUMN", ")", ";", "int", "type", "=", "SyncManager", ".", "getStatusType", "(", "status", ")", ";", "if", "(", "type", "=", "=", "SyncManager", ".", "SYNC_PING", ")", "{", "int", "changeCount", "=", "SyncManager", ".", "getStatusChangeCount", "(", "status", ")", ";", "if", "(", "changeCount", ">", "0", ")", "{", "errorMap", ".", "remove", "(", "serverId", ")", ";", "}", "else", "if", "(", "changeCount", "=", "=", "0", ")", "{", "String", "name", "=", "c", ".", "getString", "(", "Mailbox", ".", "CONTENT_DISPLAY_NAME_COLUMN", ")", ";", "Integer", "failures", "=", "errorMap", ".", "get", "(", "serverId", ")", ";", "if", "(", "failures", "=", "=", "null", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "name", ")", ";", "errorMap", ".", "put", "(", "serverId", ",", "1", ")", ";", "}", "else", "if", "(", "failures", ">", "MAX_PING_FAILURES", ")", "{", "pushFallback", "(", "c", ".", "getLong", "(", "Mailbox", ".", "CONTENT_ID_COLUMN", ")", ")", ";", "continue", ";", "}", "else", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "name", ")", ";", "errorMap", ".", "put", "(", "serverId", ",", "failures", "+", "1", ")", ";", "}", "}", "}", "SyncManager", ".", "startManualSync", "(", "c", ".", "getLong", "(", "Mailbox", ".", "CONTENT_ID_COLUMN", ")", ",", "SyncManager", ".", "SYNC_PING", ",", "null", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "}", "return", "pp", ".", "getSyncStatus", "(", ")", ";", "}", "</s>"]
["<s>", "private", "String", "getFilterType", "(", ")", "{", "String", "filter", "=", "Eas", ".", "FILTER_1_WEEK", ";", "switch", "(", "mAccount", ".", "mSyncLookback", ")", "{", "case", "com", ".", "android", ".", "email", ".", "Account", ".", "SYNC_WINDOW_1_DAY", ":", "{", "filter", "=", "Eas", ".", "FILTER_1_DAY", ";", "break", ";", "}", "case", "com", ".", "android", ".", "email", ".", "Account", ".", "SYNC_WINDOW_3_DAYS", ":", "{", "filter", "=", "Eas", ".", "FILTER_3_DAYS", ";", "break", ";", "}", "case", "com", ".", "android", ".", "email", ".", "Account", ".", "SYNC_WINDOW_1_WEEK", ":", "{", "filter", "=", "Eas", ".", "FILTER_1_WEEK", ";", "break", ";", "}", "case", "com", ".", "android", ".", "email", ".", "Account", ".", "SYNC_WINDOW_2_WEEKS", ":", "{", "filter", "=", "Eas", ".", "FILTER_2_WEEKS", ";", "break", ";", "}", "case", "com", ".", "android", ".", "email", ".", "Account", ".", "SYNC_WINDOW_1_MONTH", ":", "{", "filter", "=", "Eas", ".", "FILTER_1_MONTH", ";", "break", ";", "}", "case", "com", ".", "android", ".", "email", ".", "Account", ".", "SYNC_WINDOW_ALL", ":", "{", "filter", "=", "Eas", ".", "FILTER_ALL", ";", "break", ";", "}", "}", "return", "filter", ";", "}", "</s>"]
["<s>", "public", "void", "sync", "(", "AbstractSyncAdapter", "target", ")", "throws", "IOException", "{", "Mailbox", "mailbox", "=", "target", ".", "mMailbox", ";", "boolean", "moreAvailable", "=", "true", ";", "while", "(", "!", "mStop", "&", "&", "moreAvailable", ")", "{", "if", "(", "!", "hasConnectivity", "(", ")", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mExitStatus", "=", "EXIT_DONE", ";", "return", ";", "}", "while", "(", "true", ")", "{", "PartRequest", "req", "=", "null", ";", "synchronized", "(", "mPartRequests", ")", "{", "if", "(", "mPartRequests", ".", "isEmpty", "(", ")", ")", "{", "break", ";", "}", "else", "{", "req", "=", "mPartRequests", ".", "get", "(", "0", ")", ";", "}", "}", "getAttachment", "(", "req", ")", ";", "synchronized", "(", "mPartRequests", ")", "{", "mPartRequests", ".", "remove", "(", "req", ")", ";", "}", "}", "Serializer", "s", "=", "new", "Serializer", "(", ")", ";", "String", "className", "=", "target", ".", "getCollectionName", "(", ")", ";", "String", "syncKey", "=", "target", ".", "getSyncKey", "(", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "className", ",", "\"", "<STR_LIT>", "\"", ",", "syncKey", ")", ";", "s", ".", "start", "(", "Tags", ".", "SYNC_SYNC", ")", ".", "start", "(", "Tags", ".", "SYNC_COLLECTIONS", ")", ".", "start", "(", "Tags", ".", "SYNC_COLLECTION", ")", ".", "data", "(", "Tags", ".", "SYNC_CLASS", ",", "className", ")", ".", "data", "(", "Tags", ".", "SYNC_SYNC_KEY", ",", "syncKey", ")", ".", "data", "(", "Tags", ".", "SYNC_COLLECTION_ID", ",", "mailbox", ".", "mServerId", ")", ".", "tag", "(", "Tags", ".", "SYNC_DELETES_AS_MOVES", ")", ";", "if", "(", "!", "syncKey", ".", "equals", "(", "\"", "<STR_LIT:0>", "\"", ")", ")", "{", "s", ".", "tag", "(", "Tags", ".", "SYNC_GET_CHANGES", ")", ";", "}", "s", ".", "data", "(", "Tags", ".", "SYNC_WINDOW_SIZE", ",", "className", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", "?", "EMAIL_WINDOW_SIZE", ":", "PIM_WINDOW_SIZE", ")", ";", "s", ".", "start", "(", "Tags", ".", "SYNC_OPTIONS", ")", ";", "if", "(", "!", "className", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "SYNC_FILTER_TYPE", ",", "getFilterType", "(", ")", ")", ";", "}", "if", "(", "mProtocolVersionDouble", ">", "=", "<NUM_LIT>", ")", "{", "s", ".", "start", "(", "Tags", ".", "BASE_BODY_PREFERENCE", ")", ".", "data", "(", "Tags", ".", "BASE_TYPE", ",", "(", "className", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", "?", "Eas", ".", "BODY_PREFERENCE_HTML", ":", "Eas", ".", "BODY_PREFERENCE_TEXT", ")", ")", ".", "data", "(", "Tags", ".", "BASE_TRUNCATION_SIZE", ",", "Eas", ".", "EAS12_TRUNCATION_SIZE", ")", ".", "end", "(", ")", ";", "}", "else", "{", "s", ".", "data", "(", "Tags", ".", "SYNC_TRUNCATION", ",", "Eas", ".", "EAS2_5_TRUNCATION_SIZE", ")", ";", "}", "s", ".", "end", "(", ")", ";", "target", ".", "sendLocalChanges", "(", "s", ")", ";", "s", ".", "end", "(", ")", ".", "end", "(", ")", ".", "end", "(", ")", ".", "done", "(", ")", ";", "HttpResponse", "resp", "=", "sendHttpClientPost", "(", "\"", "<STR_LIT>", "\"", ",", "s", ".", "toByteArray", "(", ")", ")", ";", "int", "code", "=", "resp", ".", "getStatusLine", "(", ")", ".", "getStatusCode", "(", ")", ";", "if", "(", "code", "=", "=", "HttpStatus", ".", "SC_OK", ")", "{", "InputStream", "is", "=", "resp", ".", "getEntity", "(", ")", ".", "getContent", "(", ")", ";", "if", "(", "is", "!", "=", "null", ")", "{", "moreAvailable", "=", "target", ".", "parse", "(", "is", ")", ";", "target", ".", "cleanup", "(", ")", ";", "}", "else", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "else", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "code", ")", ";", "if", "(", "isAuthError", "(", "code", ")", ")", "{", "mExitStatus", "=", "EXIT_LOGIN_FAILURE", ";", "}", "else", "{", "mExitStatus", "=", "EXIT_IO_ERROR", ";", "}", "return", ";", "}", "}", "mExitStatus", "=", "EXIT_DONE", ";", "}", "</s>"]
["<s>", "protected", "void", "setupService", "(", ")", "{", "mAccount", "=", "Account", ".", "restoreAccountWithId", "(", "mContext", ",", "mAccount", ".", "mId", ")", ";", "mMailbox", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "mContext", ",", "mMailbox", ".", "mId", ")", ";", "mThread", "=", "Thread", ".", "currentThread", "(", ")", ";", "android", ".", "os", ".", "Process", ".", "setThreadPriority", "(", "android", ".", "os", ".", "Process", ".", "THREAD_PRIORITY_BACKGROUND", ")", ";", "TAG", "=", "mThread", ".", "getName", "(", ")", ";", "HostAuth", "ha", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "mContext", ",", "mAccount", ".", "mHostAuthKeyRecv", ")", ";", "mHostAddress", "=", "ha", ".", "mAddress", ";", "mUserName", "=", "ha", ".", "mLogin", ";", "mPassword", "=", "ha", ".", "mPassword", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "setupService", "(", ")", ";", "try", "{", "SyncManager", ".", "callback", "(", ")", ".", "syncMailboxStatus", "(", "mMailboxId", ",", "EmailServiceStatus", ".", "IN_PROGRESS", ",", "0", ")", ";", "}", "catch", "(", "RemoteException", "e1", ")", "{", "}", "try", "{", "mDeviceId", "=", "SyncManager", ".", "getDeviceId", "(", ")", ";", "if", "(", "(", "mMailbox", "=", "=", "null", ")", "|", "|", "(", "mAccount", "=", "=", "null", ")", ")", "{", "return", ";", "}", "else", "if", "(", "mMailbox", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_EAS_ACCOUNT_MAILBOX", ")", "{", "runAccountMailbox", "(", ")", ";", "}", "else", "{", "AbstractSyncAdapter", "target", ";", "mProtocolVersion", "=", "mAccount", ".", "mProtocolVersion", ";", "mProtocolVersionDouble", "=", "Double", ".", "parseDouble", "(", "mProtocolVersion", ")", ";", "if", "(", "mMailbox", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_CONTACTS", ")", "{", "target", "=", "new", "ContactsSyncAdapter", "(", "mMailbox", ",", "this", ")", ";", "}", "else", "{", "target", "=", "new", "EmailSyncAdapter", "(", "mMailbox", ",", "this", ")", ";", "}", "do", "{", "if", "(", "mRequestTime", "!", "=", "0", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mRequestTime", "=", "0", ";", "}", "sync", "(", "target", ")", ";", "}", "while", "(", "mRequestTime", "!", "=", "0", ")", ";", "}", "}", "catch", "(", "IOException", "e", ")", "{", "String", "message", "=", "e", ".", "getMessage", "(", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "(", "(", "message", "=", "=", "null", ")", "?", "\"", "<STR_LIT>", "\"", ":", "message", ")", ")", ";", "mExitStatus", "=", "EXIT_IO_ERROR", ";", "}", "catch", "(", "Exception", "e", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "finally", "{", "if", "(", "!", "mStop", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "SyncManager", ".", "done", "(", "this", ")", ";", "int", "status", ";", "switch", "(", "mExitStatus", ")", "{", "case", "EXIT_IO_ERROR", ":", "status", "=", "EmailServiceStatus", ".", "CONNECTION_ERROR", ";", "break", ";", "case", "EXIT_DONE", ":", "status", "=", "EmailServiceStatus", ".", "SUCCESS", ";", "break", ";", "case", "EXIT_LOGIN_FAILURE", ":", "status", "=", "EmailServiceStatus", ".", "LOGIN_FAILED", ";", "break", ";", "default", ":", "status", "=", "EmailServiceStatus", ".", "REMOTE_EXCEPTION", ";", "errorLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "break", ";", "}", "try", "{", "SyncManager", ".", "callback", "(", ")", ".", "syncMailboxStatus", "(", "mMailboxId", ",", "status", ",", "0", ")", ";", "}", "catch", "(", "RemoteException", "e1", ")", "{", "}", "if", "(", "mExitStatus", "=", "=", "EXIT_DONE", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "Mailbox", ".", "SYNC_TIME", ",", "System", ".", "currentTimeMillis", "(", ")", ")", ";", "String", "s", "=", "\"", "<STR_LIT:S>", "\"", "+", "mSyncReason", "+", "<CHAR_LIT::>", "+", "status", "+", "<CHAR_LIT::>", "+", "mChangeCount", ";", "cv", ".", "put", "(", "Mailbox", ".", "SYNC_STATUS", ",", "s", ")", ";", "mContentResolver", ".", "update", "(", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "CONTENT_URI", ",", "mMailboxId", ")", ",", "cv", ",", "null", ",", "null", ")", ";", "}", "}", "else", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "SyncManager", ".", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onReceive", "(", "Context", "context", ",", "Intent", "intent", ")", "{", "Log", ".", "v", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ArrayList", "<", "Long", ">", "mailboxesToNotify", "=", "new", "ArrayList", "<", "Long", ">", "(", ")", ";", "ContentResolver", "cr", "=", "context", ".", "getContentResolver", "(", ")", ";", "int", "messageCount", "=", "0", ";", "String", "selector", "=", "SyncManager", ".", "getEasAccountSelector", "(", ")", ";", "Cursor", "c", "=", "cr", ".", "query", "(", "Message", ".", "DELETED_CONTENT_URI", ",", "MAILBOX_DATA_PROJECTION", ",", "selector", ",", "null", ",", "null", ")", ";", "try", "{", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "messageCount", "+", "+", ";", "long", "mailboxId", "=", "c", ".", "getLong", "(", "0", ")", ";", "if", "(", "!", "mailboxesToNotify", ".", "contains", "(", "mailboxId", ")", ")", "{", "mailboxesToNotify", ".", "add", "(", "mailboxId", ")", ";", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "c", "=", "cr", ".", "query", "(", "Message", ".", "UPDATED_CONTENT_URI", ",", "MAILBOX_DATA_PROJECTION", ",", "selector", ",", "null", ",", "null", ")", ";", "try", "{", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "messageCount", "+", "+", ";", "long", "mailboxId", "=", "c", ".", "getLong", "(", "0", ")", ";", "if", "(", "!", "mailboxesToNotify", ".", "contains", "(", "mailboxId", ")", ")", "{", "mailboxesToNotify", ".", "add", "(", "mailboxId", ")", ";", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "for", "(", "Long", "mailboxId", ":", "mailboxesToNotify", ")", "{", "SyncManager", ".", "serviceRequest", "(", "mailboxId", ",", "SyncManager", ".", "SYNC_UPSYNC", ")", ";", "}", "Log", ".", "v", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "messageCount", "+", "\"", "<STR_LIT>", "\"", "+", "mailboxesToNotify", ".", "size", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "ContactsSyncAdapterService", "(", ")", "{", "super", "(", ")", ";", "}", "</s>"]
["<s>", "public", "SyncAdapterImpl", "(", "Context", "context", ")", "{", "super", "(", "context", ",", "true", ")", ";", "mContext", "=", "context", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onPerformSync", "(", "Account", "account", ",", "Bundle", "extras", ",", "String", "authority", ",", "ContentProviderClient", "provider", ",", "SyncResult", "syncResult", ")", "{", "try", "{", "ContactsSyncAdapterService", ".", "performSync", "(", "mContext", ",", "account", ",", "extras", ",", "authority", ",", "provider", ",", "syncResult", ")", ";", "}", "catch", "(", "OperationCanceledException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", ")", "{", "super", ".", "onCreate", "(", ")", ";", "synchronized", "(", "sSyncAdapterLock", ")", "{", "if", "(", "sSyncAdapter", "=", "=", "null", ")", "{", "sSyncAdapter", "=", "new", "SyncAdapterImpl", "(", "getApplicationContext", "(", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "IBinder", "onBind", "(", "Intent", "intent", ")", "{", "return", "sSyncAdapter", ".", "getSyncAdapterBinder", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "performSync", "(", "Context", "context", ",", "Account", "account", ",", "Bundle", "extras", ",", "String", "authority", ",", "ContentProviderClient", "provider", ",", "SyncResult", "syncResult", ")", "throws", "OperationCanceledException", "{", "ContentResolver", "cr", "=", "context", ".", "getContentResolver", "(", ")", ";", "Log", ".", "i", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "extras", ".", "getBoolean", "(", "ContentResolver", ".", "SYNC_EXTRAS_UPLOAD", ")", ")", "{", "Uri", "uri", "=", "RawContacts", ".", "CONTENT_URI", ".", "buildUpon", "(", ")", ".", "appendQueryParameter", "(", "RawContacts", ".", "ACCOUNT_NAME", ",", "account", ".", "name", ")", ".", "appendQueryParameter", "(", "RawContacts", ".", "ACCOUNT_TYPE", ",", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ")", ".", "build", "(", ")", ";", "Cursor", "c", "=", "cr", ".", "query", "(", "uri", ",", "new", "String", "[", "]", "{", "RawContacts", ".", "_ID", "}", ",", "RawContacts", ".", "DIRTY", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "!", "c", ".", "moveToFirst", "(", ")", ")", "{", "Log", ".", "i", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "Cursor", "accountCursor", "=", "cr", ".", "query", "(", "com", ".", "android", ".", "email", ".", "provider", ".", "EmailContent", ".", "Account", ".", "CONTENT_URI", ",", "ID_PROJECTION", ",", "AccountColumns", ".", "EMAIL_ADDRESS", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "account", ".", "name", "}", ",", "null", ")", ";", "try", "{", "if", "(", "accountCursor", ".", "moveToFirst", "(", ")", ")", "{", "long", "accountId", "=", "accountCursor", ".", "getLong", "(", "0", ")", ";", "Cursor", "mailboxCursor", "=", "cr", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "ID_PROJECTION", ",", "ACCOUNT_AND_TYPE_CONTACTS", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "accountId", ")", "}", ",", "null", ")", ";", "try", "{", "if", "(", "mailboxCursor", ".", "moveToFirst", "(", ")", ")", "{", "Log", ".", "i", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "account", ".", "name", ")", ";", "SyncManager", ".", "serviceRequest", "(", "mailboxCursor", ".", "getLong", "(", "0", ")", ",", "SyncManager", ".", "SYNC_UPSYNC", ")", ";", "}", "}", "finally", "{", "mailboxCursor", ".", "close", "(", ")", ";", "}", "}", "}", "finally", "{", "accountCursor", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "PartRequest", "(", "Attachment", "_att", ")", "{", "timeStamp", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "emailId", "=", "_att", ".", "mMessageKey", ";", "att", "=", "_att", ";", "loc", "=", "att", ".", "mLocation", ";", "}", "</s>"]
["<s>", "public", "PartRequest", "(", "Attachment", "_att", ",", "String", "_destination", ",", "String", "_contentUriString", ")", "{", "this", "(", "_att", ")", ";", "destination", "=", "_destination", ";", "contentUriString", "=", "_contentUriString", ";", "}", "</s>"]
["<s>", "public", "AbstractSyncParser", "(", "InputStream", "in", ",", "AbstractSyncAdapter", "adapter", ")", "throws", "IOException", "{", "super", "(", "in", ")", ";", "mAdapter", "=", "adapter", ";", "mService", "=", "adapter", ".", "mService", ";", "mContext", "=", "mService", ".", "mContext", ";", "mContentResolver", "=", "mContext", ".", "getContentResolver", "(", ")", ";", "mMailbox", "=", "mService", ".", "mMailbox", ";", "mAccount", "=", "mService", ".", "mAccount", ";", "}", "</s>"]
["<s>", "public", "abstract", "void", "commandsParser", "(", ")", "throws", "IOException", ";", "</s>"]
["<s>", "public", "abstract", "void", "responsesParser", "(", ")", "throws", "IOException", ";", "</s>"]
["<s>", "public", "abstract", "void", "commit", "(", ")", "throws", "IOException", ";", "</s>"]
["<s>", "public", "abstract", "void", "wipe", "(", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "boolean", "parse", "(", ")", "throws", "IOException", "{", "int", "status", ";", "boolean", "moreAvailable", "=", "false", ";", "boolean", "newSyncKey", "=", "false", ";", "int", "interval", "=", "mMailbox", ".", "mSyncInterval", ";", "if", "(", "nextTag", "(", "START_DOCUMENT", ")", "!", "=", "Tags", ".", "SYNC_SYNC", ")", "{", "throw", "new", "EasParserException", "(", ")", ";", "}", "boolean", "mailboxUpdated", "=", "false", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "while", "(", "nextTag", "(", "START_DOCUMENT", ")", "!", "=", "END_DOCUMENT", ")", "{", "if", "(", "tag", "=", "=", "Tags", ".", "SYNC_COLLECTION", "|", "|", "tag", "=", "=", "Tags", ".", "SYNC_COLLECTIONS", ")", "{", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "SYNC_STATUS", ")", "{", "status", "=", "getValueInt", "(", ")", ";", "if", "(", "status", "!", "=", "1", ")", "{", "mService", ".", "errorLog", "(", "\"", "<STR_LIT>", "\"", "+", "status", ")", ";", "if", "(", "status", "=", "=", "<NUM_LIT:3>", ")", "{", "mAdapter", ".", "setSyncKey", "(", "\"", "<STR_LIT:0>", "\"", ",", "false", ")", ";", "mMailbox", ".", "mSyncInterval", "=", "Mailbox", ".", "CHECK_INTERVAL_PUSH", ";", "mService", ".", "errorLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "wipe", "(", ")", ";", "moreAvailable", "=", "true", ";", "}", "else", "if", "(", "status", "=", "=", "<NUM_LIT:8>", ")", "{", "SyncManager", ".", "reloadFolderList", "(", "mContext", ",", "mAccount", ".", "mId", ",", "true", ")", ";", "}", "}", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "SYNC_COMMANDS", ")", "{", "commandsParser", "(", ")", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "SYNC_RESPONSES", ")", "{", "responsesParser", "(", ")", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "SYNC_MORE_AVAILABLE", ")", "{", "moreAvailable", "=", "true", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "SYNC_SYNC_KEY", ")", "{", "if", "(", "mAdapter", ".", "getSyncKey", "(", ")", ".", "equals", "(", "\"", "<STR_LIT:0>", "\"", ")", ")", "{", "moreAvailable", "=", "true", ";", "}", "String", "newKey", "=", "getValue", "(", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "mMailbox", ".", "mDisplayName", ",", "\"", "<STR_LIT>", "\"", ",", "newKey", ")", ";", "if", "(", "!", "newKey", ".", "equals", "(", "mMailbox", ".", "mSyncKey", ")", ")", "{", "mAdapter", ".", "setSyncKey", "(", "newKey", ",", "true", ")", ";", "cv", ".", "put", "(", "MailboxColumns", ".", "SYNC_KEY", ",", "newKey", ")", ";", "mailboxUpdated", "=", "true", ";", "newSyncKey", "=", "true", ";", "}", "if", "(", "mMailbox", ".", "mSyncInterval", "=", "=", "Mailbox", ".", "CHECK_INTERVAL_PUSH", ")", "{", "mMailbox", ".", "mSyncInterval", "=", "Mailbox", ".", "CHECK_INTERVAL_PING", ";", "}", "}", "else", "{", "skipTag", "(", ")", ";", "}", "}", "if", "(", "moreAvailable", "&", "&", "!", "newSyncKey", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "moreAvailable", "=", "false", ";", "}", "commit", "(", ")", ";", "boolean", "abortSyncs", "=", "false", ";", "if", "(", "mMailbox", ".", "mSyncInterval", "!", "=", "interval", ")", "{", "cv", ".", "put", "(", "MailboxColumns", ".", "SYNC_INTERVAL", ",", "mMailbox", ".", "mSyncInterval", ")", ";", "mailboxUpdated", "=", "true", ";", "}", "else", "if", "(", "mService", ".", "mChangeCount", ">", "0", "&", "&", "mAccount", ".", "mSyncInterval", "=", "=", "Account", ".", "CHECK_INTERVAL_PUSH", "&", "&", "mMailbox", ".", "mSyncInterval", ">", "0", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "mMailbox", ".", "mDisplayName", ",", "\"", "<STR_LIT>", "\"", ")", ";", "cv", ".", "put", "(", "MailboxColumns", ".", "SYNC_INTERVAL", ",", "Mailbox", ".", "CHECK_INTERVAL_PING", ")", ";", "mailboxUpdated", "=", "true", ";", "abortSyncs", "=", "true", ";", "}", "if", "(", "mailboxUpdated", ")", "{", "synchronized", "(", "mService", ".", "getSynchronizer", "(", ")", ")", "{", "if", "(", "!", "mService", ".", "isStopped", "(", ")", ")", "{", "mMailbox", ".", "update", "(", "mContext", ",", "cv", ")", ";", "}", "}", "}", "if", "(", "abortSyncs", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "SyncManager", ".", "stopAccountSyncs", "(", "mAccount", ".", "mId", ")", ";", "}", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "moreAvailable", ")", ";", "return", "moreAvailable", ";", "}", "</s>"]
["<s>", "void", "userLog", "(", "String", ".", ".", ".", "strings", ")", "{", "mService", ".", "userLog", "(", "strings", ")", ";", "}", "</s>"]
["<s>", "void", "userLog", "(", "String", "string", ",", "int", "num", ",", "String", "string2", ")", "{", "mService", ".", "userLog", "(", "string", ",", "num", ",", "string2", ")", ";", "}", "</s>"]
["<s>", "EasParserException", "(", ")", "{", "super", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "EasParserException", "(", "String", "reason", ")", "{", "super", "(", "reason", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "parse", "(", ")", "throws", "IOException", ",", "EasException", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "Parser", "(", "InputStream", "in", ")", "throws", "IOException", "{", "setInput", "(", "in", ")", ";", "logging", "=", "Eas", ".", "PARSER_LOG", ";", "}", "</s>"]
["<s>", "public", "void", "setDebug", "(", "boolean", "val", ")", "{", "logging", "=", "val", ";", "}", "</s>"]
["<s>", "public", "void", "captureOn", "(", ")", "{", "capture", "=", "true", ";", "captureArray", "=", "new", "ArrayList", "<", "Integer", ">", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "captureOff", "(", "Context", "context", ",", "String", "file", ")", "{", "try", "{", "FileOutputStream", "out", "=", "context", ".", "openFileOutput", "(", "file", ",", "Context", ".", "MODE_WORLD_WRITEABLE", ")", ";", "out", ".", "write", "(", "captureArray", ".", "toString", "(", ")", ".", "getBytes", "(", ")", ")", ";", "out", ".", "close", "(", ")", ";", "}", "catch", "(", "FileNotFoundException", "e", ")", "{", "}", "catch", "(", "IOException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "public", "String", "getValue", "(", ")", "throws", "IOException", "{", "getNext", "(", "false", ")", ";", "String", "val", "=", "text", ";", "getNext", "(", "false", ")", ";", "if", "(", "type", "!", "=", "END", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "endTag", "=", "startTag", ";", "return", "val", ";", "}", "</s>"]
["<s>", "public", "int", "getValueInt", "(", ")", "throws", "IOException", "{", "getNext", "(", "true", ")", ";", "int", "val", "=", "num", ";", "getNext", "(", "false", ")", ";", "if", "(", "type", "!", "=", "END", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "endTag", "=", "startTag", ";", "return", "val", ";", "}", "</s>"]
["<s>", "public", "int", "nextTag", "(", "int", "endingTag", ")", "throws", "IOException", "{", "endTag", "=", "endingTag", "&", "=", "Tags", ".", "PAGE_MASK", ";", "while", "(", "getNext", "(", "false", ")", "!", "=", "DONE", ")", "{", "if", "(", "type", "=", "=", "START", ")", "{", "tag", "=", "page", "|", "startTag", ";", "return", "tag", ";", "}", "else", "if", "(", "type", "=", "=", "END", "&", "&", "startTag", "=", "=", "endTag", ")", "{", "return", "END", ";", "}", "}", "if", "(", "endTag", "=", "=", "START_DOCUMENT", ")", "{", "return", "END_DOCUMENT", ";", "}", "throw", "new", "EodException", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "skipTag", "(", ")", "throws", "IOException", "{", "int", "thisTag", "=", "startTag", ";", "while", "(", "getNext", "(", "false", ")", "!", "=", "DONE", ")", "{", "if", "(", "type", "=", "=", "END", "&", "&", "startTag", "=", "=", "thisTag", ")", "{", "return", ";", "}", "}", "throw", "new", "EofException", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "nextToken", "(", ")", "throws", "IOException", "{", "getNext", "(", "false", ")", ";", "return", "type", ";", "}", "</s>"]
["<s>", "public", "void", "setInput", "(", "InputStream", "in", ")", "throws", "IOException", "{", "this", ".", "in", "=", "in", ";", "readByte", "(", ")", ";", "readInt", "(", ")", ";", "readInt", "(", ")", ";", "readInt", "(", ")", ";", "tagTable", "=", "tagTables", "[", "0", "]", ";", "}", "</s>"]
["<s>", "void", "log", "(", "String", "str", ")", "{", "int", "cr", "=", "str", ".", "indexOf", "(", "<STR_LIT:\\n>", ")", ";", "if", "(", "cr", ">", "0", ")", "{", "str", "=", "str", ".", "substring", "(", "0", ",", "cr", ")", ";", "}", "Log", ".", "v", "(", "TAG", ",", "str", ")", ";", "if", "(", "Eas", ".", "FILE_LOG", ")", "{", "FileLogger", ".", "log", "(", "TAG", ",", "str", ")", ";", "}", "}", "</s>"]
["<s>", "private", "final", "int", "getNext", "(", "boolean", "asInt", ")", "throws", "IOException", "{", "int", "savedEndTag", "=", "endTag", ";", "if", "(", "type", "=", "=", "END", ")", "{", "depth", "-", "-", ";", "}", "else", "{", "endTag", "=", "NOT_ENDED", ";", "}", "if", "(", "noContent", ")", "{", "type", "=", "END", ";", "noContent", "=", "false", ";", "endTag", "=", "savedEndTag", ";", "return", "type", ";", "}", "text", "=", "null", ";", "name", "=", "null", ";", "int", "id", "=", "nextId", "(", ")", ";", "while", "(", "id", "=", "=", "Wbxml", ".", "SWITCH_PAGE", ")", "{", "nextId", "=", "NOT_FETCHED", ";", "int", "pg", "=", "readByte", "(", ")", ";", "page", "=", "pg", "<", "<", "Tags", ".", "PAGE_SHIFT", ";", "tagTable", "=", "tagTables", "[", "pg", "]", ";", "id", "=", "nextId", "(", ")", ";", "}", "nextId", "=", "NOT_FETCHED", ";", "switch", "(", "id", ")", "{", "case", "EOF_BYTE", ":", "type", "=", "DONE", ";", "break", ";", "case", "Wbxml", ".", "END", ":", "type", "=", "END", ";", "if", "(", "logging", ")", "{", "name", "=", "nameArray", "[", "depth", "]", ";", "}", "startTag", "=", "endTag", "=", "startTagArray", "[", "depth", "]", ";", "break", ";", "case", "Wbxml", ".", "STR_I", ":", "type", "=", "TEXT", ";", "if", "(", "asInt", ")", "{", "num", "=", "readInlineInt", "(", ")", ";", "}", "else", "{", "text", "=", "readInlineString", "(", ")", ";", "}", "if", "(", "logging", ")", "{", "name", "=", "tagTable", "[", "startTag", "-", "<NUM_LIT:5>", "]", ";", "log", "(", "name", "+", "\"", "<STR_LIT>", "\"", "+", "(", "asInt", "?", "Integer", ".", "toString", "(", "num", ")", ":", "text", ")", ")", ";", "}", "break", ";", "default", ":", "type", "=", "START", ";", "startTag", "=", "id", "&", "<NUM_LIT>", ";", "noContent", "=", "(", "id", "&", "<NUM_LIT>", ")", "=", "=", "0", ";", "depth", "+", "+", ";", "if", "(", "logging", ")", "{", "name", "=", "tagTable", "[", "startTag", "-", "<NUM_LIT:5>", "]", ";", "nameArray", "[", "depth", "]", "=", "name", ";", "}", "startTagArray", "[", "depth", "]", "=", "startTag", ";", "}", "return", "type", ";", "}", "</s>"]
["<s>", "private", "int", "read", "(", ")", "throws", "IOException", "{", "int", "i", ";", "i", "=", "in", ".", "read", "(", ")", ";", "if", "(", "capture", ")", "{", "captureArray", ".", "add", "(", "i", ")", ";", "}", "return", "i", ";", "}", "</s>"]
["<s>", "private", "int", "nextId", "(", ")", "throws", "IOException", "{", "if", "(", "nextId", "=", "=", "NOT_FETCHED", ")", "{", "nextId", "=", "read", "(", ")", ";", "}", "return", "nextId", ";", "}", "</s>"]
["<s>", "private", "int", "readByte", "(", ")", "throws", "IOException", "{", "int", "i", "=", "read", "(", ")", ";", "if", "(", "i", "=", "=", "EOF_BYTE", ")", "{", "throw", "new", "EofException", "(", ")", ";", "}", "return", "i", ";", "}", "</s>"]
["<s>", "private", "int", "readInlineInt", "(", ")", "throws", "IOException", "{", "int", "result", "=", "0", ";", "while", "(", "true", ")", "{", "int", "i", "=", "readByte", "(", ")", ";", "if", "(", "i", "=", "=", "0", ")", "{", "return", "result", ";", "}", "if", "(", "i", ">", "=", "<CHAR_LIT:0>", "&", "&", "i", "<", "=", "<CHAR_LIT:9>", ")", "{", "result", "=", "(", "result", "*", "<NUM_LIT:10>", ")", "+", "(", "i", "-", "<CHAR_LIT:0>", ")", ";", "}", "else", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "int", "readInt", "(", ")", "throws", "IOException", "{", "int", "result", "=", "0", ";", "int", "i", ";", "do", "{", "i", "=", "readByte", "(", ")", ";", "result", "=", "(", "result", "<", "<", "<NUM_LIT:7>", ")", "|", "(", "i", "&", "<NUM_LIT>", ")", ";", "}", "while", "(", "(", "i", "&", "<NUM_LIT>", ")", "!", "=", "0", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "private", "String", "readInlineString", "(", ")", "throws", "IOException", "{", "ByteArrayOutputStream", "outputStream", "=", "new", "ByteArrayOutputStream", "(", "<NUM_LIT>", ")", ";", "while", "(", "true", ")", "{", "int", "i", "=", "read", "(", ")", ";", "if", "(", "i", "=", "=", "0", ")", "{", "break", ";", "}", "else", "if", "(", "i", "=", "=", "EOF_BYTE", ")", "{", "throw", "new", "EofException", "(", ")", ";", "}", "outputStream", ".", "write", "(", "i", ")", ";", "}", "outputStream", ".", "flush", "(", ")", ";", "String", "res", "=", "outputStream", ".", "toString", "(", "\"", "<STR_LIT:UTF-8>", "\"", ")", ";", "outputStream", ".", "close", "(", ")", ";", "return", "res", ";", "}", "</s>"]
["<s>", "public", "ContactsSyncAdapter", "(", "Mailbox", "mailbox", ",", "EasSyncService", "service", ")", "{", "super", "(", "mailbox", ",", "service", ")", ";", "}", "</s>"]
["<s>", "static", "Uri", "addCallerIsSyncAdapterParameter", "(", "Uri", "uri", ")", "{", "return", "uri", ".", "buildUpon", "(", ")", ".", "appendQueryParameter", "(", "ContactsContract", ".", "CALLER_IS_SYNCADAPTER", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "parse", "(", "InputStream", "is", ")", "throws", "IOException", "{", "EasContactsSyncParser", "p", "=", "new", "EasContactsSyncParser", "(", "is", ",", "this", ")", ";", "return", "p", ".", "parse", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addValues", "(", "RowBuilder", "builder", ")", ";", "</s>"]
["<s>", "public", "boolean", "isSameAs", "(", "int", "type", ",", "String", "value", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "String", "getSyncKey", "(", ")", "throws", "IOException", "{", "ContentProviderClient", "client", "=", "mService", ".", "mContentResolver", ".", "acquireContentProviderClient", "(", "ContactsContract", ".", "AUTHORITY_URI", ")", ";", "try", "{", "byte", "[", "]", "data", "=", "SyncStateContract", ".", "Helpers", ".", "get", "(", "client", ",", "ContactsContract", ".", "SyncState", ".", "CONTENT_URI", ",", "getAccountManagerAccount", "(", ")", ")", ";", "if", "(", "data", "=", "=", "null", "|", "|", "data", ".", "length", "=", "=", "0", ")", "{", "setSyncKey", "(", "\"", "<STR_LIT:0>", "\"", ",", "false", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "Groups", ".", "ACCOUNT_NAME", ",", "mAccount", ".", "mEmailAddress", ")", ";", "cv", ".", "put", "(", "Groups", ".", "ACCOUNT_TYPE", ",", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ")", ";", "cv", ".", "put", "(", "Settings", ".", "UNGROUPED_VISIBLE", ",", "true", ")", ";", "client", ".", "insert", "(", "addCallerIsSyncAdapterParameter", "(", "Settings", ".", "CONTENT_URI", ")", ",", "cv", ")", ";", "return", "\"", "<STR_LIT:0>", "\"", ";", "}", "else", "{", "return", "new", "String", "(", "data", ")", ";", "}", "}", "catch", "(", "RemoteException", "e", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setSyncKey", "(", "String", "syncKey", ",", "boolean", "inCommands", ")", "throws", "IOException", "{", "if", "(", "\"", "<STR_LIT:0>", "\"", ".", "equals", "(", "syncKey", ")", "|", "|", "!", "inCommands", ")", "{", "ContentProviderClient", "client", "=", "mService", ".", "mContentResolver", ".", "acquireContentProviderClient", "(", "ContactsContract", ".", "AUTHORITY_URI", ")", ";", "try", "{", "SyncStateContract", ".", "Helpers", ".", "set", "(", "client", ",", "ContactsContract", ".", "SyncState", ".", "CONTENT_URI", ",", "getAccountManagerAccount", "(", ")", ",", "syncKey", ".", "getBytes", "(", ")", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "syncKey", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "mMailbox", ".", "mSyncKey", "=", "syncKey", ";", "}", "</s>"]
["<s>", "public", "android", ".", "accounts", ".", "Account", "getAccountManagerAccount", "(", ")", "{", "if", "(", "mAccountManagerAccount", "=", "=", "null", ")", "{", "mAccountManagerAccount", "=", "new", "android", ".", "accounts", ".", "Account", "(", "mAccount", ".", "mEmailAddress", ",", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ")", ";", "}", "return", "mAccountManagerAccount", ";", "}", "</s>"]
["<s>", "private", "EasChildren", "(", ")", "{", "}", "</s>"]
["<s>", "boolean", "hasData", "(", ")", "{", "return", "anniversary", "!", "=", "null", "|", "|", "fileAs", "!", "=", "null", ";", "}", "</s>"]
["<s>", "boolean", "hasData", "(", ")", "{", "return", "customerId", "!", "=", "null", "|", "|", "governmentId", "!", "=", "null", "|", "|", "accountName", "!", "=", "null", ";", "}", "</s>"]
["<s>", "boolean", "hasData", "(", ")", "{", "return", "city", "!", "=", "null", "|", "|", "country", "!", "=", "null", "|", "|", "code", "!", "=", "null", "|", "|", "state", "!", "=", "null", "|", "|", "street", "!", "=", "null", ";", "}", "</s>"]
["<s>", "public", "EmailRow", "(", "String", "_email", ")", "{", "Rfc822Token", "[", "]", "tokens", "=", "Rfc822Tokenizer", ".", "tokenize", "(", "_email", ")", ";", "if", "(", "tokens", ".", "length", "=", "=", "0", ")", "{", "email", "=", "\"", "\"", ";", "displayName", "=", "\"", "\"", ";", "}", "else", "{", "Rfc822Token", "token", "=", "tokens", "[", "0", "]", ";", "email", "=", "token", ".", "getAddress", "(", ")", ";", "displayName", "=", "token", ".", "getName", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "addValues", "(", "RowBuilder", "builder", ")", "{", "builder", ".", "withValue", "(", "Email", ".", "DATA", ",", "email", ")", ";", "builder", ".", "withValue", "(", "Email", ".", "DISPLAY_NAME", ",", "displayName", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isSameAs", "(", "int", "type", ",", "String", "value", ")", "{", "return", "email", ".", "equalsIgnoreCase", "(", "value", ")", ";", "}", "</s>"]
["<s>", "public", "ImRow", "(", "String", "_im", ")", "{", "im", "=", "_im", ";", "}", "</s>"]
["<s>", "public", "void", "addValues", "(", "RowBuilder", "builder", ")", "{", "builder", ".", "withValue", "(", "Im", ".", "DATA", ",", "im", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isSameAs", "(", "int", "type", ",", "String", "value", ")", "{", "return", "im", ".", "equalsIgnoreCase", "(", "value", ")", ";", "}", "</s>"]
["<s>", "public", "PhoneRow", "(", "String", "_phone", ",", "int", "_type", ")", "{", "phone", "=", "_phone", ";", "type", "=", "_type", ";", "}", "</s>"]
["<s>", "public", "void", "addValues", "(", "RowBuilder", "builder", ")", "{", "builder", ".", "withValue", "(", "Im", ".", "DATA", ",", "phone", ")", ";", "builder", ".", "withValue", "(", "Phone", ".", "TYPE", ",", "type", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isSameAs", "(", "int", "_type", ",", "String", "value", ")", "{", "return", "type", "=", "=", "_type", "&", "&", "phone", ".", "equalsIgnoreCase", "(", "value", ")", ";", "}", "</s>"]
["<s>", "public", "EasContactsSyncParser", "(", "InputStream", "in", ",", "ContactsSyncAdapter", "adapter", ")", "throws", "IOException", "{", "super", "(", "in", ",", "adapter", ")", ";", "mAccountUri", "=", "uriWithAccountAndIsSyncAdapter", "(", "RawContacts", ".", "CONTENT_URI", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "wipe", "(", ")", "{", "mContentResolver", ".", "delete", "(", "mAccountUri", ",", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addData", "(", "String", "serverId", ",", "ContactOperations", "ops", ",", "Entity", "entity", ")", "throws", "IOException", "{", "String", "fileAs", "=", "null", ";", "String", "prefix", "=", "null", ";", "String", "firstName", "=", "null", ";", "String", "lastName", "=", "null", ";", "String", "middleName", "=", "null", ";", "String", "suffix", "=", "null", ";", "String", "companyName", "=", "null", ";", "String", "yomiFirstName", "=", "null", ";", "String", "yomiLastName", "=", "null", ";", "String", "yomiCompanyName", "=", "null", ";", "String", "title", "=", "null", ";", "String", "department", "=", "null", ";", "String", "officeLocation", "=", "null", ";", "Address", "home", "=", "new", "Address", "(", ")", ";", "Address", "work", "=", "new", "Address", "(", ")", ";", "Address", "other", "=", "new", "Address", "(", ")", ";", "EasBusiness", "business", "=", "new", "EasBusiness", "(", ")", ";", "EasPersonal", "personal", "=", "new", "EasPersonal", "(", ")", ";", "ArrayList", "<", "String", ">", "children", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "ArrayList", "<", "UntypedRow", ">", "emails", "=", "new", "ArrayList", "<", "UntypedRow", ">", "(", ")", ";", "ArrayList", "<", "UntypedRow", ">", "ims", "=", "new", "ArrayList", "<", "UntypedRow", ">", "(", ")", ";", "ArrayList", "<", "UntypedRow", ">", "homePhones", "=", "new", "ArrayList", "<", "UntypedRow", ">", "(", ")", ";", "ArrayList", "<", "UntypedRow", ">", "workPhones", "=", "new", "ArrayList", "<", "UntypedRow", ">", "(", ")", ";", "if", "(", "entity", "=", "=", "null", ")", "{", "ops", ".", "newContact", "(", "serverId", ")", ";", "}", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_APPLICATION_DATA", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "CONTACTS_FIRST_NAME", ":", "firstName", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_LAST_NAME", ":", "lastName", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_MIDDLE_NAME", ":", "middleName", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_FILE_AS", ":", "fileAs", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_SUFFIX", ":", "suffix", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_COMPANY_NAME", ":", "companyName", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_JOB_TITLE", ":", "title", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_EMAIL1_ADDRESS", ":", "case", "Tags", ".", "CONTACTS_EMAIL2_ADDRESS", ":", "case", "Tags", ".", "CONTACTS_EMAIL3_ADDRESS", ":", "emails", ".", "add", "(", "new", "EmailRow", "(", "getValue", "(", ")", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_BUSINESS2_TELEPHONE_NUMBER", ":", "case", "Tags", ".", "CONTACTS_BUSINESS_TELEPHONE_NUMBER", ":", "workPhones", ".", "add", "(", "new", "PhoneRow", "(", "getValue", "(", ")", ",", "Phone", ".", "TYPE_WORK", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS2_MMS", ":", "ops", ".", "addPhone", "(", "entity", ",", "Phone", ".", "TYPE_MMS", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_BUSINESS_FAX_NUMBER", ":", "ops", ".", "addPhone", "(", "entity", ",", "Phone", ".", "TYPE_FAX_WORK", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS2_COMPANY_MAIN_PHONE", ":", "ops", ".", "addPhone", "(", "entity", ",", "Phone", ".", "TYPE_COMPANY_MAIN", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_HOME_FAX_NUMBER", ":", "ops", ".", "addPhone", "(", "entity", ",", "Phone", ".", "TYPE_FAX_HOME", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_HOME_TELEPHONE_NUMBER", ":", "case", "Tags", ".", "CONTACTS_HOME2_TELEPHONE_NUMBER", ":", "homePhones", ".", "add", "(", "new", "PhoneRow", "(", "getValue", "(", ")", ",", "Phone", ".", "TYPE_HOME", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_MOBILE_TELEPHONE_NUMBER", ":", "ops", ".", "addPhone", "(", "entity", ",", "Phone", ".", "TYPE_MOBILE", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_CAR_TELEPHONE_NUMBER", ":", "ops", ".", "addPhone", "(", "entity", ",", "Phone", ".", "TYPE_CAR", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_RADIO_TELEPHONE_NUMBER", ":", "ops", ".", "addPhone", "(", "entity", ",", "Phone", ".", "TYPE_RADIO", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_PAGER_NUMBER", ":", "ops", ".", "addPhone", "(", "entity", ",", "Phone", ".", "TYPE_PAGER", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_ASSISTANT_TELEPHONE_NUMBER", ":", "ops", ".", "addPhone", "(", "entity", ",", "Phone", ".", "TYPE_ASSISTANT", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS2_IM_ADDRESS", ":", "case", "Tags", ".", "CONTACTS2_IM_ADDRESS_2", ":", "case", "Tags", ".", "CONTACTS2_IM_ADDRESS_3", ":", "ims", ".", "add", "(", "new", "ImRow", "(", "getValue", "(", ")", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_BUSINESS_ADDRESS_CITY", ":", "work", ".", "city", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_BUSINESS_ADDRESS_COUNTRY", ":", "work", ".", "country", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_BUSINESS_ADDRESS_POSTAL_CODE", ":", "work", ".", "code", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_BUSINESS_ADDRESS_STATE", ":", "work", ".", "state", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_BUSINESS_ADDRESS_STREET", ":", "work", ".", "street", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_HOME_ADDRESS_CITY", ":", "home", ".", "city", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_HOME_ADDRESS_COUNTRY", ":", "home", ".", "country", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_HOME_ADDRESS_POSTAL_CODE", ":", "home", ".", "code", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_HOME_ADDRESS_STATE", ":", "home", ".", "state", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_HOME_ADDRESS_STREET", ":", "home", ".", "street", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_OTHER_ADDRESS_CITY", ":", "other", ".", "city", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_OTHER_ADDRESS_COUNTRY", ":", "other", ".", "country", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_OTHER_ADDRESS_POSTAL_CODE", ":", "other", ".", "code", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_OTHER_ADDRESS_STATE", ":", "other", ".", "state", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_OTHER_ADDRESS_STREET", ":", "other", ".", "street", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_CHILDREN", ":", "childrenParser", "(", "children", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_YOMI_COMPANY_NAME", ":", "yomiCompanyName", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_YOMI_FIRST_NAME", ":", "yomiFirstName", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_YOMI_LAST_NAME", ":", "yomiLastName", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS2_NICKNAME", ":", "ops", ".", "addNickname", "(", "entity", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_ASSISTANT_NAME", ":", "ops", ".", "addRelation", "(", "entity", ",", "Relation", ".", "TYPE_ASSISTANT", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS2_MANAGER_NAME", ":", "ops", ".", "addRelation", "(", "entity", ",", "Relation", ".", "TYPE_MANAGER", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_SPOUSE", ":", "ops", ".", "addRelation", "(", "entity", ",", "Relation", ".", "TYPE_SPOUSE", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_DEPARTMENT", ":", "department", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_TITLE", ":", "prefix", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_OFFICE_LOCATION", ":", "officeLocation", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS2_CUSTOMER_ID", ":", "business", ".", "customerId", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS2_GOVERNMENT_ID", ":", "business", ".", "governmentId", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS2_ACCOUNT_NAME", ":", "business", ".", "accountName", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_ANNIVERSARY", ":", "personal", ".", "anniversary", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_BIRTHDAY", ":", "ops", ".", "addBirthday", "(", "entity", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_WEBPAGE", ":", "ops", ".", "addWebpage", "(", "entity", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_PICTURE", ":", "ops", ".", "addPhoto", "(", "entity", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "BASE_BODY", ":", "ops", ".", "addNote", "(", "entity", ",", "bodyParser", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_BODY", ":", "ops", ".", "addNote", "(", "entity", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_CATEGORIES", ":", "mGroupsUsed", "=", "true", ";", "categoriesParser", "(", "ops", ",", "entity", ")", ";", "break", ";", "case", "Tags", ".", "CONTACTS_COMPRESSED_RTF", ":", "skipTag", "(", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "String", "name", "=", "null", ";", "if", "(", "firstName", "!", "=", "null", "|", "|", "lastName", "!", "=", "null", ")", "{", "if", "(", "firstName", "=", "=", "null", ")", "{", "name", "=", "lastName", ";", "}", "else", "if", "(", "lastName", "=", "=", "null", ")", "{", "name", "=", "firstName", ";", "}", "else", "{", "name", "=", "firstName", "+", "<CHAR_LIT>", "+", "lastName", ";", "}", "}", "else", "if", "(", "companyName", "!", "=", "null", ")", "{", "name", "=", "companyName", ";", "}", "ops", ".", "addName", "(", "entity", ",", "prefix", ",", "firstName", ",", "lastName", ",", "middleName", ",", "suffix", ",", "name", ",", "yomiFirstName", ",", "yomiLastName", ",", "fileAs", ")", ";", "ops", ".", "addBusiness", "(", "entity", ",", "business", ")", ";", "ops", ".", "addPersonal", "(", "entity", ",", "personal", ")", ";", "ops", ".", "addUntyped", "(", "entity", ",", "emails", ",", "Email", ".", "CONTENT_ITEM_TYPE", ",", "-", "1", ",", "MAX_EMAIL_ROWS", ")", ";", "ops", ".", "addUntyped", "(", "entity", ",", "ims", ",", "Im", ".", "CONTENT_ITEM_TYPE", ",", "-", "1", ",", "MAX_IM_ROWS", ")", ";", "ops", ".", "addUntyped", "(", "entity", ",", "homePhones", ",", "Phone", ".", "CONTENT_ITEM_TYPE", ",", "Phone", ".", "TYPE_HOME", ",", "MAX_PHONE_ROWS", ")", ";", "ops", ".", "addUntyped", "(", "entity", ",", "workPhones", ",", "Phone", ".", "CONTENT_ITEM_TYPE", ",", "Phone", ".", "TYPE_WORK", ",", "MAX_PHONE_ROWS", ")", ";", "if", "(", "!", "children", ".", "isEmpty", "(", ")", ")", "{", "ops", ".", "addChildren", "(", "entity", ",", "children", ")", ";", "}", "if", "(", "work", ".", "hasData", "(", ")", ")", "{", "ops", ".", "addPostal", "(", "entity", ",", "StructuredPostal", ".", "TYPE_WORK", ",", "work", ".", "street", ",", "work", ".", "city", ",", "work", ".", "state", ",", "work", ".", "country", ",", "work", ".", "code", ")", ";", "}", "if", "(", "home", ".", "hasData", "(", ")", ")", "{", "ops", ".", "addPostal", "(", "entity", ",", "StructuredPostal", ".", "TYPE_HOME", ",", "home", ".", "street", ",", "home", ".", "city", ",", "home", ".", "state", ",", "home", ".", "country", ",", "home", ".", "code", ")", ";", "}", "if", "(", "other", ".", "hasData", "(", ")", ")", "{", "ops", ".", "addPostal", "(", "entity", ",", "StructuredPostal", ".", "TYPE_OTHER", ",", "other", ".", "street", ",", "other", ".", "city", ",", "other", ".", "state", ",", "other", ".", "country", ",", "other", ".", "code", ")", ";", "}", "if", "(", "companyName", "!", "=", "null", ")", "{", "ops", ".", "addOrganization", "(", "entity", ",", "Organization", ".", "TYPE_WORK", ",", "companyName", ",", "title", ",", "department", ",", "yomiCompanyName", ",", "officeLocation", ")", ";", "}", "if", "(", "entity", "!", "=", "null", ")", "{", "ArrayList", "<", "NamedContentValues", ">", "ncvList", "=", "entity", ".", "getSubValues", "(", ")", ";", "for", "(", "NamedContentValues", "ncv", ":", "ncvList", ")", "{", "Uri", "u", "=", "dataUriFromNamedContentValues", "(", "ncv", ")", ";", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newDelete", "(", "addCallerIsSyncAdapterParameter", "(", "u", ")", ")", ".", "build", "(", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "categoriesParser", "(", "ContactOperations", "ops", ",", "Entity", "entity", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "CONTACTS_CATEGORIES", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "CONTACTS_CATEGORY", ":", "ops", ".", "addGroup", "(", "entity", ",", "getValue", "(", ")", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "childrenParser", "(", "ArrayList", "<", "String", ">", "children", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "CONTACTS_CHILDREN", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "CONTACTS_CHILD", ":", "if", "(", "children", ".", "size", "(", ")", "<", "EasChildren", ".", "MAX_CHILDREN", ")", "{", "children", ".", "add", "(", "getValue", "(", ")", ")", ";", "}", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "String", "bodyParser", "(", ")", "throws", "IOException", "{", "String", "body", "=", "null", ";", "while", "(", "nextTag", "(", "Tags", ".", "BASE_BODY", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "BASE_DATA", ":", "body", "=", "getValue", "(", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "return", "body", ";", "}", "</s>"]
["<s>", "public", "void", "addParser", "(", "ContactOperations", "ops", ")", "throws", "IOException", "{", "String", "serverId", "=", "null", ";", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_ADD", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "SYNC_SERVER_ID", ":", "serverId", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "SYNC_APPLICATION_DATA", ":", "addData", "(", "serverId", ",", "ops", ",", "null", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "Cursor", "getServerIdCursor", "(", "String", "serverId", ")", "{", "mBindArgument", "[", "0", "]", "=", "serverId", ";", "return", "mContentResolver", ".", "query", "(", "mAccountUri", ",", "ID_PROJECTION", ",", "SERVER_ID_SELECTION", ",", "mBindArgument", ",", "null", ")", ";", "}", "</s>"]
["<s>", "private", "Cursor", "getClientIdCursor", "(", "String", "clientId", ")", "{", "mBindArgument", "[", "0", "]", "=", "clientId", ";", "return", "mContentResolver", ".", "query", "(", "mAccountUri", ",", "ID_PROJECTION", ",", "CLIENT_ID_SELECTION", ",", "mBindArgument", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "deleteParser", "(", "ContactOperations", "ops", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_DELETE", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "SYNC_SERVER_ID", ":", "String", "serverId", "=", "getValue", "(", ")", ";", "Cursor", "c", "=", "getServerIdCursor", "(", "serverId", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "serverId", ")", ";", "ops", ".", "delete", "(", "c", ".", "getLong", "(", "0", ")", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "ServerChange", "(", "long", "_id", ",", "boolean", "_read", ")", "{", "id", "=", "_id", ";", "read", "=", "_read", ";", "}", "</s>"]
["<s>", "public", "void", "changeParser", "(", "ContactOperations", "ops", ")", "throws", "IOException", "{", "String", "serverId", "=", "null", ";", "Entity", "entity", "=", "null", ";", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_CHANGE", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "SYNC_SERVER_ID", ":", "serverId", "=", "getValue", "(", ")", ";", "Cursor", "c", "=", "getServerIdCursor", "(", "serverId", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "try", "{", "EntityIterator", "entityIterator", "=", "mContentResolver", ".", "queryEntities", "(", "ContentUris", ".", "withAppendedId", "(", "RawContacts", ".", "CONTENT_URI", ",", "c", ".", "getLong", "(", "0", ")", ")", ",", "null", ",", "null", ",", "null", ")", ";", "if", "(", "entityIterator", ".", "hasNext", "(", ")", ")", "{", "entity", "=", "entityIterator", ".", "next", "(", ")", ";", "}", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "serverId", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "break", ";", "case", "Tags", ".", "SYNC_APPLICATION_DATA", ":", "addData", "(", "serverId", ",", "ops", ",", "entity", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "commandsParser", "(", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_COMMANDS", ")", "!", "=", "END", ")", "{", "if", "(", "tag", "=", "=", "Tags", ".", "SYNC_ADD", ")", "{", "addParser", "(", "ops", ")", ";", "incrementChangeCount", "(", ")", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "SYNC_DELETE", ")", "{", "deleteParser", "(", "ops", ")", ";", "incrementChangeCount", "(", ")", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "SYNC_CHANGE", ")", "{", "changeParser", "(", "ops", ")", ";", "incrementChangeCount", "(", ")", ";", "}", "else", "skipTag", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "commit", "(", ")", "throws", "IOException", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "mMailbox", ".", "mSyncKey", ")", ";", "ops", ".", "add", "(", "SyncStateContract", ".", "Helpers", ".", "newSetOperation", "(", "SyncState", ".", "CONTENT_URI", ",", "getAccountManagerAccount", "(", ")", ",", "mMailbox", ".", "mSyncKey", ".", "getBytes", "(", ")", ")", ")", ";", "ops", ".", "execute", "(", ")", ";", "if", "(", "ops", ".", "mResults", "!", "=", "null", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "RawContacts", ".", "DIRTY", ",", "0", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "ops", ".", "mContactIndexCount", ";", "i", "+", "+", ")", "{", "int", "index", "=", "ops", ".", "mContactIndexArray", "[", "i", "]", ";", "Uri", "u", "=", "ops", ".", "mResults", "[", "index", "]", ".", "uri", ";", "if", "(", "u", "!", "=", "null", ")", "{", "String", "idString", "=", "u", ".", "getLastPathSegment", "(", ")", ";", "mContentResolver", ".", "update", "(", "addCallerIsSyncAdapterParameter", "(", "RawContacts", ".", "CONTENT_URI", ")", ",", "cv", ",", "RawContacts", ".", "_ID", "+", "\"", "<STR_LIT:=>", "\"", "+", "idString", ",", "null", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "public", "void", "addResponsesParser", "(", ")", "throws", "IOException", "{", "String", "serverId", "=", "null", ";", "String", "clientId", "=", "null", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_ADD", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "SYNC_SERVER_ID", ":", "serverId", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "SYNC_CLIENT_ID", ":", "clientId", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "SYNC_STATUS", ":", "getValue", "(", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "if", "(", "clientId", "=", "=", "null", "|", "|", "serverId", "=", "=", "null", ")", "return", ";", "Cursor", "c", "=", "getClientIdCursor", "(", "clientId", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "cv", ".", "put", "(", "RawContacts", ".", "SOURCE_ID", ",", "serverId", ")", ";", "cv", ".", "put", "(", "RawContacts", ".", "DIRTY", ",", "0", ")", ";", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newUpdate", "(", "ContentUris", ".", "withAppendedId", "(", "addCallerIsSyncAdapterParameter", "(", "RawContacts", ".", "CONTENT_URI", ")", ",", "c", ".", "getLong", "(", "0", ")", ")", ")", ".", "withValues", "(", "cv", ")", ".", "build", "(", ")", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "clientId", "+", "\"", "<STR_LIT>", "\"", "+", "serverId", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "changeResponsesParser", "(", ")", "throws", "IOException", "{", "String", "serverId", "=", "null", ";", "String", "status", "=", "null", ";", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_CHANGE", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "SYNC_SERVER_ID", ":", "serverId", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "SYNC_STATUS", ":", "status", "=", "getValue", "(", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "if", "(", "serverId", "!", "=", "null", "&", "&", "status", "!", "=", "null", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "serverId", "+", "\"", "<STR_LIT>", "\"", "+", "status", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "responsesParser", "(", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_RESPONSES", ")", "!", "=", "END", ")", "{", "if", "(", "tag", "=", "=", "Tags", ".", "SYNC_ADD", ")", "{", "addResponsesParser", "(", ")", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "SYNC_CHANGE", ")", "{", "changeResponsesParser", "(", ")", ";", "}", "else", "skipTag", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "Uri", "uriWithAccountAndIsSyncAdapter", "(", "Uri", "uri", ")", "{", "return", "uri", ".", "buildUpon", "(", ")", ".", "appendQueryParameter", "(", "RawContacts", ".", "ACCOUNT_NAME", ",", "mAccount", ".", "mEmailAddress", ")", ".", "appendQueryParameter", "(", "RawContacts", ".", "ACCOUNT_TYPE", ",", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ")", ".", "appendQueryParameter", "(", "ContactsContract", ".", "CALLER_IS_SYNCADAPTER", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "RowBuilder", "(", "Builder", "_builder", ")", "{", "builder", "=", "_builder", ";", "}", "</s>"]
["<s>", "public", "RowBuilder", "(", "Builder", "_builder", ",", "NamedContentValues", "_ncv", ")", "{", "builder", "=", "_builder", ";", "cv", "=", "_ncv", ".", "values", ";", "}", "</s>"]
["<s>", "RowBuilder", "withValues", "(", "ContentValues", "values", ")", "{", "builder", ".", "withValues", "(", "values", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "RowBuilder", "withValueBackReference", "(", "String", "key", ",", "int", "previousResult", ")", "{", "builder", ".", "withValueBackReference", "(", "key", ",", "previousResult", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "ContentProviderOperation", "build", "(", ")", "{", "return", "builder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "RowBuilder", "withValue", "(", "String", "key", ",", "Object", "value", ")", "{", "builder", ".", "withValue", "(", "key", ",", "value", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "add", "(", "ContentProviderOperation", "op", ")", "{", "super", ".", "add", "(", "op", ")", ";", "mCount", "+", "+", ";", "return", "true", ";", "}", "</s>"]
["<s>", "public", "void", "newContact", "(", "String", "serverId", ")", "{", "Builder", "builder", "=", "ContentProviderOperation", ".", "newInsert", "(", "uriWithAccountAndIsSyncAdapter", "(", "RawContacts", ".", "CONTENT_URI", ")", ")", ";", "ContentValues", "values", "=", "new", "ContentValues", "(", ")", ";", "values", ".", "put", "(", "RawContacts", ".", "SOURCE_ID", ",", "serverId", ")", ";", "builder", ".", "withValues", "(", "values", ")", ";", "mContactBackValue", "=", "mCount", ";", "mContactIndexArray", "[", "mContactIndexCount", "+", "+", "]", "=", "mCount", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "delete", "(", "long", "id", ")", "{", "add", "(", "ContentProviderOperation", ".", "newDelete", "(", "ContentUris", ".", "withAppendedId", "(", "RawContacts", ".", "CONTENT_URI", ",", "id", ")", ".", "buildUpon", "(", ")", ".", "appendQueryParameter", "(", "ContactsContract", ".", "CALLER_IS_SYNCADAPTER", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "execute", "(", ")", "{", "synchronized", "(", "mService", ".", "getSynchronizer", "(", ")", ")", "{", "if", "(", "!", "mService", ".", "isStopped", "(", ")", ")", "{", "try", "{", "if", "(", "!", "isEmpty", "(", ")", ")", "{", "mService", ".", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "size", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mResults", "=", "mContext", ".", "getContentResolver", "(", ")", ".", "applyBatch", "(", "ContactsContract", ".", "AUTHORITY", ",", "this", ")", ";", "}", "}", "catch", "(", "RemoteException", "e", ")", "{", "Log", ".", "e", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "catch", "(", "OperationApplicationException", "e", ")", "{", "Log", ".", "e", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "private", "NamedContentValues", "findTypedData", "(", "ArrayList", "<", "NamedContentValues", ">", "list", ",", "String", "contentItemType", ",", "int", "type", ",", "String", "stringType", ")", "{", "NamedContentValues", "result", "=", "null", ";", "for", "(", "NamedContentValues", "namedContentValues", ":", "list", ")", "{", "Uri", "uri", "=", "namedContentValues", ".", "uri", ";", "ContentValues", "cv", "=", "namedContentValues", ".", "values", ";", "if", "(", "Data", ".", "CONTENT_URI", ".", "equals", "(", "uri", ")", ")", "{", "String", "mimeType", "=", "cv", ".", "getAsString", "(", "Data", ".", "MIMETYPE", ")", ";", "if", "(", "mimeType", ".", "equals", "(", "contentItemType", ")", ")", "{", "if", "(", "stringType", "!", "=", "null", ")", "{", "if", "(", "cv", ".", "getAsString", "(", "GroupMembership", ".", "GROUP_ROW_ID", ")", ".", "equals", "(", "stringType", ")", ")", "{", "result", "=", "namedContentValues", ";", "}", "}", "else", "if", "(", "type", "<", "0", "|", "|", "cv", ".", "getAsInteger", "(", "Email", ".", "TYPE", ")", "=", "=", "type", ")", "{", "result", "=", "namedContentValues", ";", "}", "}", "}", "}", "if", "(", "result", "!", "=", "null", ")", "{", "list", ".", "remove", "(", "result", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "private", "ArrayList", "<", "NamedContentValues", ">", "findUntypedData", "(", "ArrayList", "<", "NamedContentValues", ">", "list", ",", "int", "type", ",", "String", "contentItemType", ")", "{", "ArrayList", "<", "NamedContentValues", ">", "result", "=", "new", "ArrayList", "<", "NamedContentValues", ">", "(", ")", ";", "for", "(", "NamedContentValues", "namedContentValues", ":", "list", ")", "{", "Uri", "uri", "=", "namedContentValues", ".", "uri", ";", "ContentValues", "cv", "=", "namedContentValues", ".", "values", ";", "if", "(", "Data", ".", "CONTENT_URI", ".", "equals", "(", "uri", ")", ")", "{", "String", "mimeType", "=", "cv", ".", "getAsString", "(", "Data", ".", "MIMETYPE", ")", ";", "if", "(", "mimeType", ".", "equals", "(", "contentItemType", ")", ")", "{", "if", "(", "type", "!", "=", "-", "1", ")", "{", "int", "subtype", "=", "cv", ".", "getAsInteger", "(", "Phone", ".", "TYPE", ")", ";", "if", "(", "type", "!", "=", "subtype", ")", "{", "continue", ";", "}", "}", "result", ".", "add", "(", "namedContentValues", ")", ";", "}", "}", "}", "if", "(", "result", "!", "=", "null", ")", "{", "list", ".", "remove", "(", "result", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "public", "RowBuilder", "createBuilder", "(", "Entity", "entity", ",", "String", "mimeType", ",", "int", "type", ",", "String", "stringType", ")", "{", "RowBuilder", "builder", "=", "null", ";", "if", "(", "entity", "!", "=", "null", ")", "{", "NamedContentValues", "ncv", "=", "findTypedData", "(", "entity", ".", "getSubValues", "(", ")", ",", "mimeType", ",", "type", ",", "stringType", ")", ";", "if", "(", "ncv", "!", "=", "null", ")", "{", "builder", "=", "new", "RowBuilder", "(", "ContentProviderOperation", ".", "newUpdate", "(", "addCallerIsSyncAdapterParameter", "(", "dataUriFromNamedContentValues", "(", "ncv", ")", ")", ")", ",", "ncv", ")", ";", "}", "}", "if", "(", "builder", "=", "=", "null", ")", "{", "builder", "=", "newRowBuilder", "(", "entity", ",", "mimeType", ")", ";", "}", "return", "builder", ";", "}", "</s>"]
["<s>", "private", "RowBuilder", "typedRowBuilder", "(", "Entity", "entity", ",", "String", "mimeType", ",", "int", "type", ")", "{", "return", "createBuilder", "(", "entity", ",", "mimeType", ",", "type", ",", "null", ")", ";", "}", "</s>"]
["<s>", "private", "RowBuilder", "untypedRowBuilder", "(", "Entity", "entity", ",", "String", "mimeType", ")", "{", "return", "createBuilder", "(", "entity", ",", "mimeType", ",", "-", "1", ",", "null", ")", ";", "}", "</s>"]
["<s>", "private", "RowBuilder", "newRowBuilder", "(", "Entity", "entity", ",", "String", "mimeType", ")", "{", "int", "contactId", "=", "mContactBackValue", ";", "if", "(", "entity", "!", "=", "null", ")", "{", "contactId", "=", "entity", ".", "getEntityValues", "(", ")", ".", "getAsInteger", "(", "RawContacts", ".", "_ID", ")", ";", "}", "RowBuilder", "builder", "=", "new", "RowBuilder", "(", "ContentProviderOperation", ".", "newInsert", "(", "addCallerIsSyncAdapterParameter", "(", "Data", ".", "CONTENT_URI", ")", ")", ")", ";", "if", "(", "entity", "=", "=", "null", ")", "{", "builder", ".", "withValueBackReference", "(", "Data", ".", "RAW_CONTACT_ID", ",", "contactId", ")", ";", "}", "else", "{", "builder", ".", "withValue", "(", "Data", ".", "RAW_CONTACT_ID", ",", "contactId", ")", ";", "}", "builder", ".", "withValue", "(", "Data", ".", "MIMETYPE", ",", "mimeType", ")", ";", "return", "builder", ";", "}", "</s>"]
["<s>", "private", "boolean", "cvCompareString", "(", "ContentValues", "cv", ",", "String", "column", ",", "String", "oldValue", ")", "{", "if", "(", "cv", ".", "containsKey", "(", "column", ")", ")", "{", "if", "(", "oldValue", "!", "=", "null", "&", "&", "cv", ".", "getAsString", "(", "column", ")", ".", "equals", "(", "oldValue", ")", ")", "{", "return", "true", ";", "}", "}", "else", "if", "(", "oldValue", "=", "=", "null", "|", "|", "oldValue", ".", "length", "(", ")", "=", "=", "0", ")", "{", "return", "true", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "void", "addChildren", "(", "Entity", "entity", ",", "ArrayList", "<", "String", ">", "children", ")", "{", "RowBuilder", "builder", "=", "untypedRowBuilder", "(", "entity", ",", "EasChildren", ".", "CONTENT_ITEM_TYPE", ")", ";", "int", "i", "=", "0", ";", "for", "(", "String", "child", ":", "children", ")", "{", "builder", ".", "withValue", "(", "EasChildren", ".", "ROWS", "[", "i", "+", "+", "]", ",", "child", ")", ";", "}", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addGroup", "(", "Entity", "entity", ",", "String", "group", ")", "{", "RowBuilder", "builder", "=", "createBuilder", "(", "entity", ",", "GroupMembership", ".", "CONTENT_ITEM_TYPE", ",", "-", "1", ",", "group", ")", ";", "builder", ".", "withValue", "(", "GroupMembership", ".", "GROUP_SOURCE_ID", ",", "group", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addBirthday", "(", "Entity", "entity", ",", "String", "birthday", ")", "{", "RowBuilder", "builder", "=", "typedRowBuilder", "(", "entity", ",", "Event", ".", "CONTENT_ITEM_TYPE", ",", "Event", ".", "TYPE_BIRTHDAY", ")", ";", "ContentValues", "cv", "=", "builder", ".", "cv", ";", "if", "(", "cv", "!", "=", "null", "&", "&", "cvCompareString", "(", "cv", ",", "Event", ".", "START_DATE", ",", "birthday", ")", ")", "{", "return", ";", "}", "builder", ".", "withValue", "(", "Event", ".", "START_DATE", ",", "birthday", ")", ";", "builder", ".", "withValue", "(", "Event", ".", "TYPE", ",", "Event", ".", "TYPE_BIRTHDAY", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addName", "(", "Entity", "entity", ",", "String", "prefix", ",", "String", "givenName", ",", "String", "familyName", ",", "String", "middleName", ",", "String", "suffix", ",", "String", "displayName", ",", "String", "yomiFirstName", ",", "String", "yomiLastName", ",", "String", "fileAs", ")", "{", "RowBuilder", "builder", "=", "untypedRowBuilder", "(", "entity", ",", "StructuredName", ".", "CONTENT_ITEM_TYPE", ")", ";", "ContentValues", "cv", "=", "builder", ".", "cv", ";", "if", "(", "cv", "!", "=", "null", "&", "&", "cvCompareString", "(", "cv", ",", "StructuredName", ".", "GIVEN_NAME", ",", "givenName", ")", "&", "&", "cvCompareString", "(", "cv", ",", "StructuredName", ".", "FAMILY_NAME", ",", "familyName", ")", "&", "&", "cvCompareString", "(", "cv", ",", "StructuredName", ".", "MIDDLE_NAME", ",", "middleName", ")", "&", "&", "cvCompareString", "(", "cv", ",", "StructuredName", ".", "PREFIX", ",", "prefix", ")", "&", "&", "cvCompareString", "(", "cv", ",", "StructuredName", ".", "PHONETIC_GIVEN_NAME", ",", "yomiFirstName", ")", "&", "&", "cvCompareString", "(", "cv", ",", "StructuredName", ".", "PHONETIC_FAMILY_NAME", ",", "yomiLastName", ")", "&", "&", "cvCompareString", "(", "cv", ",", "StructuredName", ".", "SUFFIX", ",", "suffix", ")", ")", "{", "return", ";", "}", "builder", ".", "withValue", "(", "StructuredName", ".", "GIVEN_NAME", ",", "givenName", ")", ";", "builder", ".", "withValue", "(", "StructuredName", ".", "FAMILY_NAME", ",", "familyName", ")", ";", "builder", ".", "withValue", "(", "StructuredName", ".", "MIDDLE_NAME", ",", "middleName", ")", ";", "builder", ".", "withValue", "(", "StructuredName", ".", "SUFFIX", ",", "suffix", ")", ";", "builder", ".", "withValue", "(", "StructuredName", ".", "PHONETIC_GIVEN_NAME", ",", "yomiFirstName", ")", ";", "builder", ".", "withValue", "(", "StructuredName", ".", "PHONETIC_FAMILY_NAME", ",", "yomiLastName", ")", ";", "builder", ".", "withValue", "(", "StructuredName", ".", "PREFIX", ",", "prefix", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addPersonal", "(", "Entity", "entity", ",", "EasPersonal", "personal", ")", "{", "RowBuilder", "builder", "=", "untypedRowBuilder", "(", "entity", ",", "EasPersonal", ".", "CONTENT_ITEM_TYPE", ")", ";", "ContentValues", "cv", "=", "builder", ".", "cv", ";", "if", "(", "cv", "!", "=", "null", "&", "&", "cvCompareString", "(", "cv", ",", "EasPersonal", ".", "ANNIVERSARY", ",", "personal", ".", "anniversary", ")", "&", "&", "cvCompareString", "(", "cv", ",", "EasPersonal", ".", "FILE_AS", ",", "personal", ".", "fileAs", ")", ")", "{", "return", ";", "}", "if", "(", "!", "personal", ".", "hasData", "(", ")", ")", "{", "return", ";", "}", "builder", ".", "withValue", "(", "EasPersonal", ".", "FILE_AS", ",", "personal", ".", "fileAs", ")", ";", "builder", ".", "withValue", "(", "EasPersonal", ".", "ANNIVERSARY", ",", "personal", ".", "anniversary", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addBusiness", "(", "Entity", "entity", ",", "EasBusiness", "business", ")", "{", "RowBuilder", "builder", "=", "untypedRowBuilder", "(", "entity", ",", "EasBusiness", ".", "CONTENT_ITEM_TYPE", ")", ";", "ContentValues", "cv", "=", "builder", ".", "cv", ";", "if", "(", "cv", "!", "=", "null", "&", "&", "cvCompareString", "(", "cv", ",", "EasBusiness", ".", "ACCOUNT_NAME", ",", "business", ".", "accountName", ")", "&", "&", "cvCompareString", "(", "cv", ",", "EasBusiness", ".", "CUSTOMER_ID", ",", "business", ".", "customerId", ")", "&", "&", "cvCompareString", "(", "cv", ",", "EasBusiness", ".", "GOVERNMENT_ID", ",", "business", ".", "governmentId", ")", ")", "{", "return", ";", "}", "if", "(", "!", "business", ".", "hasData", "(", ")", ")", "{", "return", ";", "}", "builder", ".", "withValue", "(", "EasBusiness", ".", "ACCOUNT_NAME", ",", "business", ".", "accountName", ")", ";", "builder", ".", "withValue", "(", "EasBusiness", ".", "CUSTOMER_ID", ",", "business", ".", "customerId", ")", ";", "builder", ".", "withValue", "(", "EasBusiness", ".", "GOVERNMENT_ID", ",", "business", ".", "governmentId", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addPhoto", "(", "Entity", "entity", ",", "String", "photo", ")", "{", "RowBuilder", "builder", "=", "untypedRowBuilder", "(", "entity", ",", "Photo", ".", "CONTENT_ITEM_TYPE", ")", ";", "byte", "[", "]", "pic", "=", "Base64", ".", "decodeBase64", "(", "photo", ".", "getBytes", "(", ")", ")", ";", "builder", ".", "withValue", "(", "Photo", ".", "PHOTO", ",", "pic", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addPhone", "(", "Entity", "entity", ",", "int", "type", ",", "String", "phone", ")", "{", "RowBuilder", "builder", "=", "typedRowBuilder", "(", "entity", ",", "Phone", ".", "CONTENT_ITEM_TYPE", ",", "type", ")", ";", "ContentValues", "cv", "=", "builder", ".", "cv", ";", "if", "(", "cv", "!", "=", "null", "&", "&", "cvCompareString", "(", "cv", ",", "Phone", ".", "NUMBER", ",", "phone", ")", ")", "{", "return", ";", "}", "builder", ".", "withValue", "(", "Phone", ".", "TYPE", ",", "type", ")", ";", "builder", ".", "withValue", "(", "Phone", ".", "NUMBER", ",", "phone", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addWebpage", "(", "Entity", "entity", ",", "String", "url", ")", "{", "RowBuilder", "builder", "=", "untypedRowBuilder", "(", "entity", ",", "Website", ".", "CONTENT_ITEM_TYPE", ")", ";", "ContentValues", "cv", "=", "builder", ".", "cv", ";", "if", "(", "cv", "!", "=", "null", "&", "&", "cvCompareString", "(", "cv", ",", "Website", ".", "URL", ",", "url", ")", ")", "{", "return", ";", "}", "builder", ".", "withValue", "(", "Website", ".", "TYPE", ",", "Website", ".", "TYPE_WORK", ")", ";", "builder", ".", "withValue", "(", "Website", ".", "URL", ",", "url", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addRelation", "(", "Entity", "entity", ",", "int", "type", ",", "String", "value", ")", "{", "RowBuilder", "builder", "=", "typedRowBuilder", "(", "entity", ",", "Relation", ".", "CONTENT_ITEM_TYPE", ",", "type", ")", ";", "ContentValues", "cv", "=", "builder", ".", "cv", ";", "if", "(", "cv", "!", "=", "null", "&", "&", "cvCompareString", "(", "cv", ",", "Relation", ".", "DATA", ",", "value", ")", ")", "{", "return", ";", "}", "builder", ".", "withValue", "(", "Relation", ".", "TYPE", ",", "type", ")", ";", "builder", ".", "withValue", "(", "Relation", ".", "DATA", ",", "value", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addNickname", "(", "Entity", "entity", ",", "String", "name", ")", "{", "RowBuilder", "builder", "=", "typedRowBuilder", "(", "entity", ",", "Nickname", ".", "CONTENT_ITEM_TYPE", ",", "Nickname", ".", "TYPE_DEFAULT", ")", ";", "ContentValues", "cv", "=", "builder", ".", "cv", ";", "if", "(", "cv", "!", "=", "null", "&", "&", "cvCompareString", "(", "cv", ",", "Nickname", ".", "NAME", ",", "name", ")", ")", "{", "return", ";", "}", "builder", ".", "withValue", "(", "Nickname", ".", "TYPE", ",", "Nickname", ".", "TYPE_DEFAULT", ")", ";", "builder", ".", "withValue", "(", "Nickname", ".", "NAME", ",", "name", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addPostal", "(", "Entity", "entity", ",", "int", "type", ",", "String", "street", ",", "String", "city", ",", "String", "state", ",", "String", "country", ",", "String", "code", ")", "{", "RowBuilder", "builder", "=", "typedRowBuilder", "(", "entity", ",", "StructuredPostal", ".", "CONTENT_ITEM_TYPE", ",", "type", ")", ";", "ContentValues", "cv", "=", "builder", ".", "cv", ";", "if", "(", "cv", "!", "=", "null", "&", "&", "cvCompareString", "(", "cv", ",", "StructuredPostal", ".", "CITY", ",", "city", ")", "&", "&", "cvCompareString", "(", "cv", ",", "StructuredPostal", ".", "STREET", ",", "street", ")", "&", "&", "cvCompareString", "(", "cv", ",", "StructuredPostal", ".", "COUNTRY", ",", "country", ")", "&", "&", "cvCompareString", "(", "cv", ",", "StructuredPostal", ".", "POSTCODE", ",", "code", ")", "&", "&", "cvCompareString", "(", "cv", ",", "StructuredPostal", ".", "REGION", ",", "state", ")", ")", "{", "return", ";", "}", "builder", ".", "withValue", "(", "StructuredPostal", ".", "TYPE", ",", "type", ")", ";", "builder", ".", "withValue", "(", "StructuredPostal", ".", "CITY", ",", "city", ")", ";", "builder", ".", "withValue", "(", "StructuredPostal", ".", "STREET", ",", "street", ")", ";", "builder", ".", "withValue", "(", "StructuredPostal", ".", "COUNTRY", ",", "country", ")", ";", "builder", ".", "withValue", "(", "StructuredPostal", ".", "POSTCODE", ",", "code", ")", ";", "builder", ".", "withValue", "(", "StructuredPostal", ".", "REGION", ",", "state", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addUntyped", "(", "Entity", "entity", ",", "ArrayList", "<", "UntypedRow", ">", "rows", ",", "String", "mimeType", ",", "int", "type", ",", "int", "maxRows", ")", "{", "ArrayList", "<", "NamedContentValues", ">", "oldValues", "=", "EMPTY_ARRAY_NAMEDCONTENTVALUES", ";", "ArrayList", "<", "NamedContentValues", ">", "entityValues", "=", "EMPTY_ARRAY_NAMEDCONTENTVALUES", ";", "if", "(", "entity", "!", "=", "null", ")", "{", "oldValues", "=", "findUntypedData", "(", "entityValues", ",", "type", ",", "mimeType", ")", ";", "entityValues", "=", "entity", ".", "getSubValues", "(", ")", ";", "}", "ArrayList", "<", "UntypedRow", ">", "rowsToReplace", "=", "new", "ArrayList", "<", "UntypedRow", ">", "(", ")", ";", "int", "numRows", "=", "oldValues", ".", "size", "(", ")", ";", "for", "(", "UntypedRow", "row", ":", "rows", ")", "{", "boolean", "found", "=", "false", ";", "for", "(", "NamedContentValues", "ncv", ":", "oldValues", ")", "{", "ContentValues", "cv", "=", "ncv", ".", "values", ";", "String", "data", "=", "cv", ".", "getAsString", "(", "COMMON_DATA_ROW", ")", ";", "int", "rowType", "=", "-", "1", ";", "if", "(", "cv", ".", "containsKey", "(", "COMMON_TYPE_ROW", ")", ")", "{", "rowType", "=", "cv", ".", "getAsInteger", "(", "COMMON_TYPE_ROW", ")", ";", "}", "if", "(", "row", ".", "isSameAs", "(", "rowType", ",", "data", ")", ")", "{", "cv", ".", "put", "(", "FOUND_DATA_ROW", ",", "true", ")", ";", "entityValues", ".", "remove", "(", "ncv", ")", ";", "found", "=", "true", ";", "break", ";", "}", "}", "if", "(", "!", "found", ")", "{", "if", "(", "numRows", "<", "maxRows", ")", "{", "RowBuilder", "builder", "=", "newRowBuilder", "(", "entity", ",", "mimeType", ")", ";", "row", ".", "addValues", "(", "builder", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "numRows", "+", "+", ";", "}", "else", "{", "rowsToReplace", ".", "add", "(", "row", ")", ";", "}", "}", "}", "for", "(", "UntypedRow", "row", ":", "rowsToReplace", ")", "{", "for", "(", "NamedContentValues", "ncv", ":", "oldValues", ")", "{", "ContentValues", "cv", "=", "ncv", ".", "values", ";", "if", "(", "!", "cv", ".", "containsKey", "(", "FOUND_DATA_ROW", ")", ")", "{", "RowBuilder", "builder", "=", "new", "RowBuilder", "(", "ContentProviderOperation", ".", "newUpdate", "(", "addCallerIsSyncAdapterParameter", "(", "dataUriFromNamedContentValues", "(", "ncv", ")", ")", ")", ",", "ncv", ")", ";", "row", ".", "addValues", "(", "builder", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "public", "void", "addOrganization", "(", "Entity", "entity", ",", "int", "type", ",", "String", "company", ",", "String", "title", ",", "String", "department", ",", "String", "yomiCompanyName", ",", "String", "officeLocation", ")", "{", "RowBuilder", "builder", "=", "typedRowBuilder", "(", "entity", ",", "Organization", ".", "CONTENT_ITEM_TYPE", ",", "type", ")", ";", "ContentValues", "cv", "=", "builder", ".", "cv", ";", "if", "(", "cv", "!", "=", "null", "&", "&", "cvCompareString", "(", "cv", ",", "Organization", ".", "COMPANY", ",", "company", ")", "&", "&", "cvCompareString", "(", "cv", ",", "Organization", ".", "PHONETIC_NAME", ",", "yomiCompanyName", ")", "&", "&", "cvCompareString", "(", "cv", ",", "Organization", ".", "DEPARTMENT", ",", "department", ")", "&", "&", "cvCompareString", "(", "cv", ",", "Organization", ".", "TITLE", ",", "title", ")", "&", "&", "cvCompareString", "(", "cv", ",", "Organization", ".", "OFFICE_LOCATION", ",", "officeLocation", ")", ")", "{", "return", ";", "}", "builder", ".", "withValue", "(", "Organization", ".", "TYPE", ",", "type", ")", ";", "builder", ".", "withValue", "(", "Organization", ".", "COMPANY", ",", "company", ")", ";", "builder", ".", "withValue", "(", "Organization", ".", "TITLE", ",", "title", ")", ";", "builder", ".", "withValue", "(", "Organization", ".", "DEPARTMENT", ",", "department", ")", ";", "builder", ".", "withValue", "(", "Organization", ".", "PHONETIC_NAME", ",", "yomiCompanyName", ")", ";", "builder", ".", "withValue", "(", "Organization", ".", "OFFICE_LOCATION", ",", "officeLocation", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addNote", "(", "Entity", "entity", ",", "String", "note", ")", "{", "RowBuilder", "builder", "=", "typedRowBuilder", "(", "entity", ",", "Note", ".", "CONTENT_ITEM_TYPE", ",", "-", "1", ")", ";", "ContentValues", "cv", "=", "builder", ".", "cv", ";", "if", "(", "note", "=", "=", "null", ")", "return", ";", "note", "=", "note", ".", "replaceAll", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "if", "(", "cv", "!", "=", "null", "&", "&", "cvCompareString", "(", "cv", ",", "Note", ".", "NOTE", ",", "note", ")", ")", "{", "return", ";", "}", "int", "len", "=", "note", ".", "length", "(", ")", ";", "int", "i", "=", "0", ";", "for", "(", ";", "i", "<", "len", ";", "i", "+", "+", ")", "{", "char", "c", "=", "note", ".", "charAt", "(", "i", ")", ";", "if", "(", "!", "Character", ".", "isWhitespace", "(", "c", ")", ")", "{", "break", ";", "}", "}", "if", "(", "i", "=", "=", "len", ")", "return", ";", "builder", ".", "withValue", "(", "Note", ".", "NOTE", ",", "note", ")", ";", "add", "(", "builder", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Uri", "dataUriFromNamedContentValues", "(", "NamedContentValues", "ncv", ")", "{", "long", "id", "=", "ncv", ".", "values", ".", "getAsLong", "(", "RawContacts", ".", "_ID", ")", ";", "Uri", "dataUri", "=", "ContentUris", ".", "withAppendedId", "(", "ncv", ".", "uri", ",", "id", ")", ";", "return", "dataUri", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "cleanup", "(", ")", "{", "ContactOperations", "ops", "=", "new", "ContactOperations", "(", ")", ";", "for", "(", "Long", "id", ":", "mUpdatedIdList", ")", "{", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newUpdate", "(", "ContentUris", ".", "withAppendedId", "(", "RawContacts", ".", "CONTENT_URI", ",", "id", ")", ".", "buildUpon", "(", ")", ".", "appendQueryParameter", "(", "ContactsContract", ".", "CALLER_IS_SYNCADAPTER", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ")", ".", "withValue", "(", "RawContacts", ".", "DIRTY", ",", "0", ")", ".", "build", "(", ")", ")", ";", "}", "for", "(", "Long", "id", ":", "mDeletedIdList", ")", "{", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newDelete", "(", "ContentUris", ".", "withAppendedId", "(", "RawContacts", ".", "CONTENT_URI", ",", "id", ")", ".", "buildUpon", "(", ")", ".", "appendQueryParameter", "(", "ContactsContract", ".", "CALLER_IS_SYNCADAPTER", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ")", ".", "build", "(", ")", ")", ";", "}", "ops", ".", "execute", "(", ")", ";", "ContentResolver", "cr", "=", "mContext", ".", "getContentResolver", "(", ")", ";", "if", "(", "mGroupsUsed", ")", "{", "Uri", "groupsUri", "=", "uriWithAccountAndIsSyncAdapter", "(", "Groups", ".", "CONTENT_URI", ")", ";", "Cursor", "c", "=", "cr", ".", "query", "(", "groupsUri", ",", "new", "String", "[", "]", "{", "Groups", ".", "SOURCE_ID", ",", "Groups", ".", "TITLE", "}", ",", "Groups", ".", "TITLE", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ")", ";", "ContentValues", "values", "=", "new", "ContentValues", "(", ")", ";", "values", ".", "put", "(", "Groups", ".", "GROUP_VISIBLE", ",", "1", ")", ";", "try", "{", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "String", "sourceId", "=", "c", ".", "getString", "(", "0", ")", ";", "values", ".", "put", "(", "Groups", ".", "TITLE", ",", "sourceId", ")", ";", "cr", ".", "update", "(", "uriWithAccountAndIsSyncAdapter", "(", "groupsUri", ")", ",", "values", ",", "Groups", ".", "SOURCE_ID", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "sourceId", "}", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getCollectionName", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "private", "void", "sendEmail", "(", "Serializer", "s", ",", "ContentValues", "cv", ",", "int", "count", ",", "String", "displayName", ")", "throws", "IOException", "{", "String", "addr", "=", "cv", ".", "getAsString", "(", "Email", ".", "DATA", ")", ";", "String", "name", "=", "cv", ".", "getAsString", "(", "Email", ".", "DISPLAY_NAME", ")", ";", "if", "(", "name", "=", "=", "null", ")", "{", "if", "(", "displayName", "!", "=", "null", ")", "{", "name", "=", "displayName", ";", "}", "else", "{", "name", "=", "addr", ";", "}", "}", "if", "(", "addr", "!", "=", "null", ")", "{", "String", "value", "=", "<STR_LIT:\\\">", "+", "name", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "addr", "+", "<CHAR_LIT:>>", ";", "if", "(", "count", "<", "MAX_EMAIL_ROWS", ")", "{", "s", ".", "data", "(", "EMAIL_TAGS", "[", "count", "]", ",", "value", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "sendIm", "(", "Serializer", "s", ",", "ContentValues", "cv", ",", "int", "count", ")", "throws", "IOException", "{", "String", "value", "=", "cv", ".", "getAsString", "(", "Im", ".", "DATA", ")", ";", "if", "(", "value", "=", "=", "null", ")", "return", ";", "if", "(", "count", "<", "MAX_IM_ROWS", ")", "{", "s", ".", "data", "(", "IM_TAGS", "[", "count", "]", ",", "value", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "sendOnePostal", "(", "Serializer", "s", ",", "ContentValues", "cv", ",", "int", "[", "]", "fieldNames", ")", "throws", "IOException", "{", "if", "(", "cv", ".", "containsKey", "(", "StructuredPostal", ".", "CITY", ")", ")", "{", "s", ".", "data", "(", "fieldNames", "[", "0", "]", ",", "cv", ".", "getAsString", "(", "StructuredPostal", ".", "CITY", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "StructuredPostal", ".", "COUNTRY", ")", ")", "{", "s", ".", "data", "(", "fieldNames", "[", "1", "]", ",", "cv", ".", "getAsString", "(", "StructuredPostal", ".", "COUNTRY", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "StructuredPostal", ".", "POSTCODE", ")", ")", "{", "s", ".", "data", "(", "fieldNames", "[", "<NUM_LIT:2>", "]", ",", "cv", ".", "getAsString", "(", "StructuredPostal", ".", "POSTCODE", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "StructuredPostal", ".", "REGION", ")", ")", "{", "s", ".", "data", "(", "fieldNames", "[", "<NUM_LIT:3>", "]", ",", "cv", ".", "getAsString", "(", "StructuredPostal", ".", "REGION", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "StructuredPostal", ".", "STREET", ")", ")", "{", "s", ".", "data", "(", "fieldNames", "[", "<NUM_LIT:4>", "]", ",", "cv", ".", "getAsString", "(", "StructuredPostal", ".", "STREET", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "sendStructuredPostal", "(", "Serializer", "s", ",", "ContentValues", "cv", ")", "throws", "IOException", "{", "switch", "(", "cv", ".", "getAsInteger", "(", "StructuredPostal", ".", "TYPE", ")", ")", "{", "case", "StructuredPostal", ".", "TYPE_HOME", ":", "sendOnePostal", "(", "s", ",", "cv", ",", "HOME_ADDRESS_TAGS", ")", ";", "break", ";", "case", "StructuredPostal", ".", "TYPE_WORK", ":", "sendOnePostal", "(", "s", ",", "cv", ",", "WORK_ADDRESS_TAGS", ")", ";", "break", ";", "case", "StructuredPostal", ".", "TYPE_OTHER", ":", "sendOnePostal", "(", "s", ",", "cv", ",", "OTHER_ADDRESS_TAGS", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "</s>"]
["<s>", "private", "String", "sendStructuredName", "(", "Serializer", "s", ",", "ContentValues", "cv", ")", "throws", "IOException", "{", "String", "displayName", "=", "null", ";", "if", "(", "cv", ".", "containsKey", "(", "StructuredName", ".", "FAMILY_NAME", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_LAST_NAME", ",", "cv", ".", "getAsString", "(", "StructuredName", ".", "FAMILY_NAME", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "StructuredName", ".", "GIVEN_NAME", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_FIRST_NAME", ",", "cv", ".", "getAsString", "(", "StructuredName", ".", "GIVEN_NAME", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "StructuredName", ".", "MIDDLE_NAME", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_MIDDLE_NAME", ",", "cv", ".", "getAsString", "(", "StructuredName", ".", "MIDDLE_NAME", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "StructuredName", ".", "SUFFIX", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_SUFFIX", ",", "cv", ".", "getAsString", "(", "StructuredName", ".", "SUFFIX", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "StructuredName", ".", "PHONETIC_GIVEN_NAME", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_YOMI_FIRST_NAME", ",", "cv", ".", "getAsString", "(", "StructuredName", ".", "PHONETIC_GIVEN_NAME", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "StructuredName", ".", "PHONETIC_FAMILY_NAME", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_YOMI_LAST_NAME", ",", "cv", ".", "getAsString", "(", "StructuredName", ".", "PHONETIC_FAMILY_NAME", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "StructuredName", ".", "PREFIX", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_TITLE", ",", "cv", ".", "getAsString", "(", "StructuredName", ".", "PREFIX", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "StructuredName", ".", "DISPLAY_NAME", ")", ")", "{", "displayName", "=", "cv", ".", "getAsString", "(", "StructuredName", ".", "DISPLAY_NAME", ")", ";", "s", ".", "data", "(", "Tags", ".", "CONTACTS_FILE_AS", ",", "displayName", ")", ";", "}", "return", "displayName", ";", "}", "</s>"]
["<s>", "private", "void", "sendBusiness", "(", "Serializer", "s", ",", "ContentValues", "cv", ")", "throws", "IOException", "{", "if", "(", "cv", ".", "containsKey", "(", "EasBusiness", ".", "ACCOUNT_NAME", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS2_ACCOUNT_NAME", ",", "cv", ".", "getAsString", "(", "EasBusiness", ".", "ACCOUNT_NAME", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "EasBusiness", ".", "CUSTOMER_ID", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS2_CUSTOMER_ID", ",", "cv", ".", "getAsString", "(", "EasBusiness", ".", "CUSTOMER_ID", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "EasBusiness", ".", "GOVERNMENT_ID", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS2_GOVERNMENT_ID", ",", "cv", ".", "getAsString", "(", "EasBusiness", ".", "GOVERNMENT_ID", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "sendPersonal", "(", "Serializer", "s", ",", "ContentValues", "cv", ")", "throws", "IOException", "{", "if", "(", "cv", ".", "containsKey", "(", "EasPersonal", ".", "ANNIVERSARY", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_ANNIVERSARY", ",", "cv", ".", "getAsString", "(", "EasPersonal", ".", "ANNIVERSARY", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "EasPersonal", ".", "FILE_AS", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_FILE_AS", ",", "cv", ".", "getAsString", "(", "EasPersonal", ".", "FILE_AS", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "sendBirthday", "(", "Serializer", "s", ",", "ContentValues", "cv", ")", "throws", "IOException", "{", "if", "(", "cv", ".", "containsKey", "(", "Event", ".", "START_DATE", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_BIRTHDAY", ",", "cv", ".", "getAsString", "(", "Event", ".", "START_DATE", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "sendOrganization", "(", "Serializer", "s", ",", "ContentValues", "cv", ")", "throws", "IOException", "{", "if", "(", "cv", ".", "containsKey", "(", "Organization", ".", "TITLE", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_JOB_TITLE", ",", "cv", ".", "getAsString", "(", "Organization", ".", "TITLE", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "Organization", ".", "COMPANY", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_COMPANY_NAME", ",", "cv", ".", "getAsString", "(", "Organization", ".", "COMPANY", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "Organization", ".", "DEPARTMENT", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_DEPARTMENT", ",", "cv", ".", "getAsString", "(", "Organization", ".", "DEPARTMENT", ")", ")", ";", "}", "if", "(", "cv", ".", "containsKey", "(", "Organization", ".", "OFFICE_LOCATION", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_OFFICE_LOCATION", ",", "cv", ".", "getAsString", "(", "Organization", ".", "OFFICE_LOCATION", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "sendNickname", "(", "Serializer", "s", ",", "ContentValues", "cv", ")", "throws", "IOException", "{", "if", "(", "cv", ".", "containsKey", "(", "Nickname", ".", "NAME", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS2_NICKNAME", ",", "cv", ".", "getAsString", "(", "Nickname", ".", "NAME", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "sendWebpage", "(", "Serializer", "s", ",", "ContentValues", "cv", ")", "throws", "IOException", "{", "if", "(", "cv", ".", "containsKey", "(", "Website", ".", "URL", ")", ")", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_WEBPAGE", ",", "cv", ".", "getAsString", "(", "Website", ".", "URL", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "sendNote", "(", "Serializer", "s", ",", "ContentValues", "cv", ")", "throws", "IOException", "{", "if", "(", "cv", ".", "containsKey", "(", "Note", ".", "NOTE", ")", ")", "{", "String", "note", "=", "cv", ".", "getAsString", "(", "Note", ".", "NOTE", ")", ".", "replaceAll", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "if", "(", "mService", ".", "mProtocolVersionDouble", ">", "=", "<NUM_LIT>", ")", "{", "s", ".", "start", "(", "Tags", ".", "BASE_BODY", ")", ";", "s", ".", "data", "(", "Tags", ".", "BASE_TYPE", ",", "Eas", ".", "BODY_PREFERENCE_TEXT", ")", ".", "data", "(", "Tags", ".", "BASE_DATA", ",", "note", ")", ";", "s", ".", "end", "(", ")", ";", "}", "else", "{", "s", ".", "data", "(", "Tags", ".", "CONTACTS_BODY", ",", "note", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "sendChildren", "(", "Serializer", "s", ",", "ContentValues", "cv", ")", "throws", "IOException", "{", "boolean", "first", "=", "true", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "EasChildren", ".", "MAX_CHILDREN", ";", "i", "+", "+", ")", "{", "String", "row", "=", "EasChildren", ".", "ROWS", "[", "i", "]", ";", "if", "(", "cv", ".", "containsKey", "(", "row", ")", ")", "{", "if", "(", "first", ")", "{", "s", ".", "start", "(", "Tags", ".", "CONTACTS_CHILDREN", ")", ";", "first", "=", "false", ";", "}", "s", ".", "data", "(", "Tags", ".", "CONTACTS_CHILD", ",", "cv", ".", "getAsString", "(", "row", ")", ")", ";", "}", "}", "if", "(", "!", "first", ")", "{", "s", ".", "end", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "sendPhone", "(", "Serializer", "s", ",", "ContentValues", "cv", ",", "int", "workCount", ",", "int", "homeCount", ")", "throws", "IOException", "{", "String", "value", "=", "cv", ".", "getAsString", "(", "Phone", ".", "NUMBER", ")", ";", "if", "(", "value", "=", "=", "null", ")", "return", ";", "switch", "(", "cv", ".", "getAsInteger", "(", "Phone", ".", "TYPE", ")", ")", "{", "case", "Phone", ".", "TYPE_WORK", ":", "if", "(", "workCount", "<", "MAX_PHONE_ROWS", ")", "{", "s", ".", "data", "(", "WORK_PHONE_TAGS", "[", "workCount", "]", ",", "value", ")", ";", "}", "break", ";", "case", "Phone", ".", "TYPE_MMS", ":", "s", ".", "data", "(", "Tags", ".", "CONTACTS2_MMS", ",", "value", ")", ";", "break", ";", "case", "Phone", ".", "TYPE_ASSISTANT", ":", "s", ".", "data", "(", "Tags", ".", "CONTACTS_ASSISTANT_TELEPHONE_NUMBER", ",", "value", ")", ";", "break", ";", "case", "Phone", ".", "TYPE_FAX_WORK", ":", "s", ".", "data", "(", "Tags", ".", "CONTACTS_BUSINESS_FAX_NUMBER", ",", "value", ")", ";", "break", ";", "case", "Phone", ".", "TYPE_COMPANY_MAIN", ":", "s", ".", "data", "(", "Tags", ".", "CONTACTS2_COMPANY_MAIN_PHONE", ",", "value", ")", ";", "break", ";", "case", "Phone", ".", "TYPE_HOME", ":", "if", "(", "homeCount", "<", "MAX_PHONE_ROWS", ")", "{", "s", ".", "data", "(", "HOME_PHONE_TAGS", "[", "homeCount", "]", ",", "value", ")", ";", "}", "break", ";", "case", "Phone", ".", "TYPE_MOBILE", ":", "s", ".", "data", "(", "Tags", ".", "CONTACTS_MOBILE_TELEPHONE_NUMBER", ",", "value", ")", ";", "break", ";", "case", "Phone", ".", "TYPE_CAR", ":", "s", ".", "data", "(", "Tags", ".", "CONTACTS_CAR_TELEPHONE_NUMBER", ",", "value", ")", ";", "break", ";", "case", "Phone", ".", "TYPE_PAGER", ":", "s", ".", "data", "(", "Tags", ".", "CONTACTS_PAGER_NUMBER", ",", "value", ")", ";", "break", ";", "case", "Phone", ".", "TYPE_RADIO", ":", "s", ".", "data", "(", "Tags", ".", "CONTACTS_RADIO_TELEPHONE_NUMBER", ",", "value", ")", ";", "break", ";", "case", "Phone", ".", "TYPE_FAX_HOME", ":", "s", ".", "data", "(", "Tags", ".", "CONTACTS_HOME_FAX_NUMBER", ",", "value", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "</s>"]
["<s>", "private", "void", "sendRelation", "(", "Serializer", "s", ",", "ContentValues", "cv", ")", "throws", "IOException", "{", "String", "value", "=", "cv", ".", "getAsString", "(", "Relation", ".", "DATA", ")", ";", "if", "(", "value", "=", "=", "null", ")", "return", ";", "switch", "(", "cv", ".", "getAsInteger", "(", "Relation", ".", "TYPE", ")", ")", "{", "case", "Relation", ".", "TYPE_ASSISTANT", ":", "s", ".", "data", "(", "Tags", ".", "CONTACTS_ASSISTANT_NAME", ",", "value", ")", ";", "break", ";", "case", "Relation", ".", "TYPE_MANAGER", ":", "s", ".", "data", "(", "Tags", ".", "CONTACTS2_MANAGER_NAME", ",", "value", ")", ";", "break", ";", "case", "Relation", ".", "TYPE_SPOUSE", ":", "s", ".", "data", "(", "Tags", ".", "CONTACTS_SPOUSE", ",", "value", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "sendLocalChanges", "(", "Serializer", "s", ")", "throws", "IOException", "{", "ContentResolver", "cr", "=", "mService", ".", "mContentResolver", ";", "Uri", "uri", "=", "RawContacts", ".", "CONTENT_URI", ".", "buildUpon", "(", ")", ".", "appendQueryParameter", "(", "RawContacts", ".", "ACCOUNT_NAME", ",", "mAccount", ".", "mEmailAddress", ")", ".", "appendQueryParameter", "(", "RawContacts", ".", "ACCOUNT_TYPE", ",", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ")", ".", "appendQueryParameter", "(", "ContactsContract", ".", "CALLER_IS_SYNCADAPTER", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "if", "(", "getSyncKey", "(", ")", ".", "equals", "(", "\"", "<STR_LIT:0>", "\"", ")", ")", "{", "return", "false", ";", "}", "try", "{", "EntityIterator", "ei", "=", "cr", ".", "queryEntities", "(", "uri", ",", "RawContacts", ".", "DIRTY", "+", "\"", "<STR_LIT>", "\"", ",", "null", ",", "null", ")", ";", "ContentValues", "cidValues", "=", "new", "ContentValues", "(", ")", ";", "try", "{", "boolean", "first", "=", "true", ";", "final", "Uri", "rawContactUri", "=", "addCallerIsSyncAdapterParameter", "(", "RawContacts", ".", "CONTENT_URI", ")", ";", "while", "(", "ei", ".", "hasNext", "(", ")", ")", "{", "Entity", "entity", "=", "ei", ".", "next", "(", ")", ";", "ContentValues", "entityValues", "=", "entity", ".", "getEntityValues", "(", ")", ";", "String", "serverId", "=", "entityValues", ".", "getAsString", "(", "RawContacts", ".", "SOURCE_ID", ")", ";", "ArrayList", "<", "Integer", ">", "groupIds", "=", "new", "ArrayList", "<", "Integer", ">", "(", ")", ";", "if", "(", "first", ")", "{", "s", ".", "start", "(", "Tags", ".", "SYNC_COMMANDS", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "first", "=", "false", ";", "}", "if", "(", "serverId", "=", "=", "null", ")", "{", "String", "clientId", "=", "\"", "<STR_LIT:_>", "\"", "+", "mMailbox", ".", "mId", "+", "<CHAR_LIT:_>", "+", "System", ".", "currentTimeMillis", "(", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "clientId", ")", ";", "s", ".", "start", "(", "Tags", ".", "SYNC_ADD", ")", ".", "data", "(", "Tags", ".", "SYNC_CLIENT_ID", ",", "clientId", ")", ";", "cidValues", ".", "put", "(", "ContactsContract", ".", "RawContacts", ".", "SYNC1", ",", "clientId", ")", ";", "cr", ".", "update", "(", "ContentUris", ".", "withAppendedId", "(", "rawContactUri", ",", "entityValues", ".", "getAsLong", "(", "ContactsContract", ".", "RawContacts", ".", "_ID", ")", ")", ",", "cidValues", ",", "null", ",", "null", ")", ";", "}", "else", "{", "if", "(", "entityValues", ".", "getAsInteger", "(", "RawContacts", ".", "DELETED", ")", "=", "=", "1", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "serverId", ")", ";", "s", ".", "start", "(", "Tags", ".", "SYNC_DELETE", ")", ".", "data", "(", "Tags", ".", "SYNC_SERVER_ID", ",", "serverId", ")", ".", "end", "(", ")", ";", "mDeletedIdList", ".", "add", "(", "entityValues", ".", "getAsLong", "(", "RawContacts", ".", "_ID", ")", ")", ";", "continue", ";", "}", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "serverId", ")", ";", "s", ".", "start", "(", "Tags", ".", "SYNC_CHANGE", ")", ".", "data", "(", "Tags", ".", "SYNC_SERVER_ID", ",", "serverId", ")", ";", "}", "s", ".", "start", "(", "Tags", ".", "SYNC_APPLICATION_DATA", ")", ";", "int", "imCount", "=", "0", ";", "int", "emailCount", "=", "0", ";", "int", "homePhoneCount", "=", "0", ";", "int", "workPhoneCount", "=", "0", ";", "String", "displayName", "=", "null", ";", "ArrayList", "<", "ContentValues", ">", "emailValues", "=", "new", "ArrayList", "<", "ContentValues", ">", "(", ")", ";", "for", "(", "NamedContentValues", "ncv", ":", "entity", ".", "getSubValues", "(", ")", ")", "{", "ContentValues", "cv", "=", "ncv", ".", "values", ";", "String", "mimeType", "=", "cv", ".", "getAsString", "(", "Data", ".", "MIMETYPE", ")", ";", "if", "(", "mimeType", ".", "equals", "(", "Email", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "emailValues", ".", "add", "(", "cv", ")", ";", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "Nickname", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "sendNickname", "(", "s", ",", "cv", ")", ";", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "EasChildren", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "sendChildren", "(", "s", ",", "cv", ")", ";", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "EasBusiness", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "sendBusiness", "(", "s", ",", "cv", ")", ";", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "Website", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "sendWebpage", "(", "s", ",", "cv", ")", ";", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "EasPersonal", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "sendPersonal", "(", "s", ",", "cv", ")", ";", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "Phone", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "sendPhone", "(", "s", ",", "cv", ",", "workPhoneCount", ",", "homePhoneCount", ")", ";", "int", "type", "=", "cv", ".", "getAsInteger", "(", "Phone", ".", "TYPE", ")", ";", "if", "(", "type", "=", "=", "Phone", ".", "TYPE_HOME", ")", "homePhoneCount", "+", "+", ";", "if", "(", "type", "=", "=", "Phone", ".", "TYPE_WORK", ")", "workPhoneCount", "+", "+", ";", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "Relation", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "sendRelation", "(", "s", ",", "cv", ")", ";", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "StructuredName", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "displayName", "=", "sendStructuredName", "(", "s", ",", "cv", ")", ";", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "StructuredPostal", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "sendStructuredPostal", "(", "s", ",", "cv", ")", ";", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "Organization", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "sendOrganization", "(", "s", ",", "cv", ")", ";", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "Im", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "sendIm", "(", "s", ",", "cv", ",", "imCount", "+", "+", ")", ";", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "Event", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "Integer", "eventType", "=", "cv", ".", "getAsInteger", "(", "Event", ".", "TYPE", ")", ";", "if", "(", "eventType", "!", "=", "null", "&", "&", "eventType", ".", "equals", "(", "Event", ".", "TYPE_BIRTHDAY", ")", ")", "{", "sendBirthday", "(", "s", ",", "cv", ")", ";", "}", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "GroupMembership", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "groupIds", ".", "add", "(", "cv", ".", "getAsInteger", "(", "GroupMembership", ".", "GROUP_ROW_ID", ")", ")", ";", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "Note", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "sendNote", "(", "s", ",", "cv", ")", ";", "}", "else", "if", "(", "mimeType", ".", "equals", "(", "Photo", ".", "CONTENT_ITEM_TYPE", ")", ")", "{", "}", "else", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "mimeType", ")", ";", "}", "}", "for", "(", "ContentValues", "cv", ":", "emailValues", ")", "{", "sendEmail", "(", "s", ",", "cv", ",", "emailCount", "+", "+", ",", "displayName", ")", ";", "}", "if", "(", "!", "groupIds", ".", "isEmpty", "(", ")", ")", "{", "boolean", "groupFirst", "=", "true", ";", "for", "(", "int", "id", ":", "groupIds", ")", "{", "Cursor", "c", "=", "cr", ".", "query", "(", "ContentUris", ".", "withAppendedId", "(", "Groups", ".", "CONTENT_URI", ",", "id", ")", ",", "GROUP_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "if", "(", "groupFirst", ")", "{", "s", ".", "start", "(", "Tags", ".", "CONTACTS_CATEGORIES", ")", ";", "groupFirst", "=", "false", ";", "}", "s", ".", "data", "(", "Tags", ".", "CONTACTS_CATEGORY", ",", "c", ".", "getString", "(", "0", ")", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "if", "(", "!", "groupFirst", ")", "{", "s", ".", "end", "(", ")", ";", "}", "}", "s", ".", "end", "(", ")", ".", "end", "(", ")", ";", "mUpdatedIdList", ".", "add", "(", "entityValues", ".", "getAsLong", "(", "RawContacts", ".", "_ID", ")", ")", ";", "}", "if", "(", "!", "first", ")", "{", "s", ".", "end", "(", ")", ";", "}", "}", "finally", "{", "ei", ".", "close", "(", ")", ";", "}", "}", "catch", "(", "RemoteException", "e", ")", "{", "Log", ".", "e", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "CalendarSyncAdapter", "(", "Mailbox", "mailbox", ",", "EasSyncService", "service", ")", "{", "super", "(", "mailbox", ",", "service", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getCollectionName", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "sendLocalChanges", "(", "Serializer", "s", ")", "throws", "IOException", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "cleanup", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "parse", "(", "InputStream", "is", ")", "throws", "IOException", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "abstract", "boolean", "sendLocalChanges", "(", "Serializer", "s", ")", "throws", "IOException", ";", "</s>"]
["<s>", "public", "abstract", "boolean", "parse", "(", "InputStream", "is", ")", "throws", "IOException", ";", "</s>"]
["<s>", "public", "abstract", "String", "getCollectionName", "(", ")", ";", "</s>"]
["<s>", "public", "abstract", "void", "cleanup", "(", ")", ";", "</s>"]
["<s>", "public", "AbstractSyncAdapter", "(", "Mailbox", "mailbox", ",", "EasSyncService", "service", ")", "{", "mMailbox", "=", "mailbox", ";", "mService", "=", "service", ";", "mContext", "=", "service", ".", "mContext", ";", "mAccount", "=", "service", ".", "mAccount", ";", "}", "</s>"]
["<s>", "public", "void", "userLog", "(", "String", ".", ".", ".", "strings", ")", "{", "mService", ".", "userLog", "(", "strings", ")", ";", "}", "</s>"]
["<s>", "public", "void", "incrementChangeCount", "(", ")", "{", "mService", ".", "mChangeCount", "+", "+", ";", "}", "</s>"]
["<s>", "public", "String", "getSyncKey", "(", ")", "throws", "IOException", "{", "if", "(", "mMailbox", ".", "mSyncKey", "=", "=", "null", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mMailbox", ".", "mSyncKey", "=", "\"", "<STR_LIT:0>", "\"", ";", "}", "return", "mMailbox", ".", "mSyncKey", ";", "}", "</s>"]
["<s>", "public", "void", "setSyncKey", "(", "String", "syncKey", ",", "boolean", "inCommands", ")", "throws", "IOException", "{", "mMailbox", ".", "mSyncKey", "=", "syncKey", ";", "}", "</s>"]
["<s>", "public", "ArrayList", "<", "String", ">", "getSyncList", "(", ")", "{", "return", "syncList", ";", "}", "</s>"]
["<s>", "public", "int", "getSyncStatus", "(", ")", "{", "return", "mSyncStatus", ";", "}", "</s>"]
["<s>", "public", "PingParser", "(", "InputStream", "in", ",", "EasSyncService", "service", ")", "throws", "IOException", "{", "super", "(", "in", ")", ";", "mService", "=", "service", ";", "}", "</s>"]
["<s>", "public", "void", "parsePingFolders", "(", "ArrayList", "<", "String", ">", "syncList", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "PING_FOLDERS", ")", "!", "=", "END", ")", "{", "if", "(", "tag", "=", "=", "Tags", ".", "PING_FOLDER", ")", "{", "String", "serverId", "=", "getValue", "(", ")", ";", "syncList", ".", "add", "(", "serverId", ")", ";", "mService", ".", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "serverId", ")", ";", "}", "else", "{", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "parse", "(", ")", "throws", "IOException", ",", "StaleFolderListException", "{", "boolean", "res", "=", "false", ";", "if", "(", "nextTag", "(", "START_DOCUMENT", ")", "!", "=", "Tags", ".", "PING_PING", ")", "{", "throw", "new", "IOException", "(", ")", ";", "}", "while", "(", "nextTag", "(", "START_DOCUMENT", ")", "!", "=", "END_DOCUMENT", ")", "{", "if", "(", "tag", "=", "=", "Tags", ".", "PING_STATUS", ")", "{", "int", "status", "=", "getValueInt", "(", ")", ";", "mSyncStatus", "=", "status", ";", "mService", ".", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "status", ")", ";", "if", "(", "status", "=", "=", "<NUM_LIT:2>", ")", "{", "res", "=", "true", ";", "}", "else", "if", "(", "status", "=", "=", "<NUM_LIT:7>", "|", "|", "status", "=", "=", "<NUM_LIT:4>", ")", "{", "throw", "new", "StaleFolderListException", "(", ")", ";", "}", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "PING_FOLDERS", ")", "{", "parsePingFolders", "(", "syncList", ")", ";", "}", "else", "{", "skipTag", "(", ")", ";", "}", "}", "return", "res", ";", "}", "</s>"]
["<s>", "public", "EmailSyncAdapter", "(", "Mailbox", "mailbox", ",", "EasSyncService", "service", ")", "{", "super", "(", "mailbox", ",", "service", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "parse", "(", "InputStream", "is", ")", "throws", "IOException", "{", "EasEmailSyncParser", "p", "=", "new", "EasEmailSyncParser", "(", "is", ",", "this", ")", ";", "return", "p", ".", "parse", "(", ")", ";", "}", "</s>"]
["<s>", "public", "EasEmailSyncParser", "(", "InputStream", "in", ",", "EmailSyncAdapter", "adapter", ")", "throws", "IOException", "{", "super", "(", "in", ",", "adapter", ")", ";", "mMailboxIdAsString", "=", "Long", ".", "toString", "(", "mMailbox", ".", "mId", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "wipe", "(", ")", "{", "mContentResolver", ".", "delete", "(", "Message", ".", "CONTENT_URI", ",", "Message", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT:=>", "\"", "+", "mMailbox", ".", "mId", ",", "null", ")", ";", "mContentResolver", ".", "delete", "(", "Message", ".", "DELETED_CONTENT_URI", ",", "Message", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT:=>", "\"", "+", "mMailbox", ".", "mId", ",", "null", ")", ";", "mContentResolver", ".", "delete", "(", "Message", ".", "UPDATED_CONTENT_URI", ",", "Message", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT:=>", "\"", "+", "mMailbox", ".", "mId", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addData", "(", "Message", "msg", ")", "throws", "IOException", "{", "ArrayList", "<", "Attachment", ">", "atts", "=", "new", "ArrayList", "<", "Attachment", ">", "(", ")", ";", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_APPLICATION_DATA", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "EMAIL_ATTACHMENTS", ":", "case", "Tags", ".", "BASE_ATTACHMENTS", ":", "attachmentsParser", "(", "atts", ",", "msg", ")", ";", "break", ";", "case", "Tags", ".", "EMAIL_TO", ":", "msg", ".", "mTo", "=", "Address", ".", "pack", "(", "Address", ".", "parse", "(", "getValue", "(", ")", ")", ")", ";", "break", ";", "case", "Tags", ".", "EMAIL_FROM", ":", "Address", "[", "]", "froms", "=", "Address", ".", "parse", "(", "getValue", "(", ")", ")", ";", "if", "(", "froms", "!", "=", "null", "&", "&", "froms", ".", "length", ">", "0", ")", "{", "msg", ".", "mDisplayName", "=", "froms", "[", "0", "]", ".", "toFriendly", "(", ")", ";", "}", "msg", ".", "mFrom", "=", "Address", ".", "pack", "(", "froms", ")", ";", "break", ";", "case", "Tags", ".", "EMAIL_CC", ":", "msg", ".", "mCc", "=", "Address", ".", "pack", "(", "Address", ".", "parse", "(", "getValue", "(", ")", ")", ")", ";", "break", ";", "case", "Tags", ".", "EMAIL_REPLY_TO", ":", "msg", ".", "mReplyTo", "=", "Address", ".", "pack", "(", "Address", ".", "parse", "(", "getValue", "(", ")", ")", ")", ";", "break", ";", "case", "Tags", ".", "EMAIL_DATE_RECEIVED", ":", "String", "date", "=", "getValue", "(", ")", ";", "GregorianCalendar", "cal", "=", "new", "GregorianCalendar", "(", ")", ";", "cal", ".", "set", "(", "Integer", ".", "parseInt", "(", "date", ".", "substring", "(", "0", ",", "<NUM_LIT:4>", ")", ")", ",", "Integer", ".", "parseInt", "(", "date", ".", "substring", "(", "<NUM_LIT:5>", ",", "<NUM_LIT:7>", ")", ")", "-", "1", ",", "Integer", ".", "parseInt", "(", "date", ".", "substring", "(", "<NUM_LIT:8>", ",", "<NUM_LIT:10>", ")", ")", ",", "Integer", ".", "parseInt", "(", "date", ".", "substring", "(", "<NUM_LIT:11>", ",", "<NUM_LIT>", ")", ")", ",", "Integer", ".", "parseInt", "(", "date", ".", "substring", "(", "<NUM_LIT>", ",", "<NUM_LIT:16>", ")", ")", ",", "Integer", ".", "parseInt", "(", "date", ".", "substring", "(", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ")", ")", ";", "cal", ".", "setTimeZone", "(", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT:GMT>", "\"", ")", ")", ";", "msg", ".", "mTimeStamp", "=", "cal", ".", "getTimeInMillis", "(", ")", ";", "break", ";", "case", "Tags", ".", "EMAIL_SUBJECT", ":", "msg", ".", "mSubject", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "EMAIL_READ", ":", "msg", ".", "mFlagRead", "=", "getValueInt", "(", ")", "=", "=", "1", ";", "break", ";", "case", "Tags", ".", "BASE_BODY", ":", "bodyParser", "(", "msg", ")", ";", "break", ";", "case", "Tags", ".", "EMAIL_FLAG", ":", "msg", ".", "mFlagFavorite", "=", "flagParser", "(", ")", ";", "break", ";", "case", "Tags", ".", "EMAIL_BODY", ":", "String", "text", "=", "getValue", "(", ")", ";", "msg", ".", "mText", "=", "text", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "if", "(", "atts", ".", "size", "(", ")", ">", "0", ")", "{", "msg", ".", "mAttachments", "=", "atts", ";", "}", "}", "</s>"]
["<s>", "private", "void", "addParser", "(", "ArrayList", "<", "Message", ">", "emails", ")", "throws", "IOException", "{", "Message", "msg", "=", "new", "Message", "(", ")", ";", "msg", ".", "mAccountKey", "=", "mAccount", ".", "mId", ";", "msg", ".", "mMailboxKey", "=", "mMailbox", ".", "mId", ";", "msg", ".", "mFlagLoaded", "=", "Message", ".", "FLAG_LOADED_COMPLETE", ";", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_ADD", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "SYNC_SERVER_ID", ":", "msg", ".", "mServerId", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "SYNC_APPLICATION_DATA", ":", "addData", "(", "msg", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "emails", ".", "add", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "private", "Boolean", "flagParser", "(", ")", "throws", "IOException", "{", "Boolean", "state", "=", "false", ";", "while", "(", "nextTag", "(", "Tags", ".", "EMAIL_FLAG", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "EMAIL_FLAG_STATUS", ":", "state", "=", "getValueInt", "(", ")", "=", "=", "<NUM_LIT:2>", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "return", "state", ";", "}", "</s>"]
["<s>", "private", "void", "bodyParser", "(", "Message", "msg", ")", "throws", "IOException", "{", "String", "bodyType", "=", "Eas", ".", "BODY_PREFERENCE_TEXT", ";", "String", "body", "=", "\"", "\"", ";", "while", "(", "nextTag", "(", "Tags", ".", "EMAIL_BODY", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "BASE_TYPE", ":", "bodyType", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "BASE_DATA", ":", "body", "=", "getValue", "(", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "if", "(", "bodyType", ".", "equals", "(", "Eas", ".", "BODY_PREFERENCE_HTML", ")", ")", "{", "msg", ".", "mHtml", "=", "body", ";", "}", "else", "{", "msg", ".", "mText", "=", "body", ";", "}", "}", "</s>"]
["<s>", "private", "void", "attachmentsParser", "(", "ArrayList", "<", "Attachment", ">", "atts", ",", "Message", "msg", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "EMAIL_ATTACHMENTS", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "EMAIL_ATTACHMENT", ":", "case", "Tags", ".", "BASE_ATTACHMENT", ":", "attachmentParser", "(", "atts", ",", "msg", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "attachmentParser", "(", "ArrayList", "<", "Attachment", ">", "atts", ",", "Message", "msg", ")", "throws", "IOException", "{", "String", "fileName", "=", "null", ";", "String", "length", "=", "null", ";", "String", "location", "=", "null", ";", "while", "(", "nextTag", "(", "Tags", ".", "EMAIL_ATTACHMENT", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "EMAIL_DISPLAY_NAME", ":", "case", "Tags", ".", "BASE_DISPLAY_NAME", ":", "fileName", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "EMAIL_ATT_NAME", ":", "case", "Tags", ".", "BASE_FILE_REFERENCE", ":", "location", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "EMAIL_ATT_SIZE", ":", "case", "Tags", ".", "BASE_ESTIMATED_DATA_SIZE", ":", "length", "=", "getValue", "(", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "if", "(", "(", "fileName", "!", "=", "null", ")", "&", "&", "(", "length", "!", "=", "null", ")", "&", "&", "(", "location", "!", "=", "null", ")", ")", "{", "Attachment", "att", "=", "new", "Attachment", "(", ")", ";", "att", ".", "mEncoding", "=", "\"", "<STR_LIT>", "\"", ";", "att", ".", "mSize", "=", "Long", ".", "parseLong", "(", "length", ")", ";", "att", ".", "mFileName", "=", "fileName", ";", "att", ".", "mLocation", "=", "location", ";", "att", ".", "mMimeType", "=", "getMimeTypeFromFileName", "(", "fileName", ")", ";", "atts", ".", "add", "(", "att", ")", ";", "msg", ".", "mFlagAttachment", "=", "true", ";", "}", "}", "</s>"]
["<s>", "public", "String", "getMimeTypeFromFileName", "(", "String", "fileName", ")", "{", "String", "mimeType", ";", "int", "lastDot", "=", "fileName", ".", "lastIndexOf", "(", "<CHAR_LIT:.>", ")", ";", "String", "extension", "=", "null", ";", "if", "(", "(", "lastDot", ">", "0", ")", "&", "&", "(", "lastDot", "<", "fileName", ".", "length", "(", ")", "-", "1", ")", ")", "{", "extension", "=", "fileName", ".", "substring", "(", "lastDot", "+", "1", ")", ".", "toLowerCase", "(", ")", ";", "}", "if", "(", "extension", "=", "=", "null", ")", "{", "mimeType", "=", "\"", "<STR_LIT>", "\"", ";", "}", "else", "{", "mimeType", "=", "MimeTypeMap", ".", "getSingleton", "(", ")", ".", "getMimeTypeFromExtension", "(", "extension", ")", ";", "if", "(", "mimeType", "=", "=", "null", ")", "{", "mimeType", "=", "\"", "<STR_LIT:/>", "\"", "+", "extension", ";", "}", "}", "return", "mimeType", ";", "}", "</s>"]
["<s>", "private", "Cursor", "getServerIdCursor", "(", "String", "serverId", ",", "String", "[", "]", "projection", ")", "{", "bindArguments", "[", "0", "]", "=", "serverId", ";", "bindArguments", "[", "1", "]", "=", "mMailboxIdAsString", ";", "return", "mContentResolver", ".", "query", "(", "Message", ".", "CONTENT_URI", ",", "projection", ",", "WHERE_SERVER_ID_AND_MAILBOX_KEY", ",", "bindArguments", ",", "null", ")", ";", "}", "</s>"]
["<s>", "private", "void", "deleteParser", "(", "ArrayList", "<", "Long", ">", "deletes", ",", "int", "entryTag", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "entryTag", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "SYNC_SERVER_ID", ":", "String", "serverId", "=", "getValue", "(", ")", ";", "Cursor", "c", "=", "getServerIdCursor", "(", "serverId", ",", "MESSAGE_ID_SUBJECT_PROJECTION", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "deletes", ".", "add", "(", "c", ".", "getLong", "(", "0", ")", ")", ";", "if", "(", "Eas", ".", "USER_LOG", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "serverId", "+", "\"", "<STR_LIT>", "\"", "+", "c", ".", "getString", "(", "1", ")", ")", ";", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "ServerChange", "(", "long", "_id", ",", "Boolean", "_read", ",", "Boolean", "_flag", ")", "{", "id", "=", "_id", ";", "read", "=", "_read", ";", "flag", "=", "_flag", ";", "}", "</s>"]
["<s>", "private", "void", "changeParser", "(", "ArrayList", "<", "ServerChange", ">", "changes", ")", "throws", "IOException", "{", "String", "serverId", "=", "null", ";", "Boolean", "oldRead", "=", "false", ";", "Boolean", "oldFlag", "=", "false", ";", "long", "id", "=", "0", ";", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_CHANGE", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "SYNC_SERVER_ID", ":", "serverId", "=", "getValue", "(", ")", ";", "Cursor", "c", "=", "getServerIdCursor", "(", "serverId", ",", "Message", ".", "LIST_PROJECTION", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "serverId", ")", ";", "oldRead", "=", "c", ".", "getInt", "(", "Message", ".", "LIST_READ_COLUMN", ")", "=", "=", "Message", ".", "READ", ";", "oldFlag", "=", "c", ".", "getInt", "(", "Message", ".", "LIST_FAVORITE_COLUMN", ")", "=", "=", "1", ";", "id", "=", "c", ".", "getLong", "(", "Message", ".", "LIST_ID_COLUMN", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "break", ";", "case", "Tags", ".", "SYNC_APPLICATION_DATA", ":", "changeApplicationDataParser", "(", "changes", ",", "oldRead", ",", "oldFlag", ",", "id", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "changeApplicationDataParser", "(", "ArrayList", "<", "ServerChange", ">", "changes", ",", "Boolean", "oldRead", ",", "Boolean", "oldFlag", ",", "long", "id", ")", "throws", "IOException", "{", "Boolean", "read", "=", "null", ";", "Boolean", "flag", "=", "null", ";", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_APPLICATION_DATA", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "EMAIL_READ", ":", "read", "=", "getValueInt", "(", ")", "=", "=", "1", ";", "break", ";", "case", "Tags", ".", "EMAIL_FLAG", ":", "flag", "=", "flagParser", "(", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "if", "(", "(", "(", "read", "!", "=", "null", ")", "&", "&", "!", "oldRead", ".", "equals", "(", "read", ")", ")", "|", "|", "(", "(", "flag", "!", "=", "null", ")", "&", "&", "!", "oldFlag", ".", "equals", "(", "flag", ")", ")", ")", "{", "changes", ".", "add", "(", "new", "ServerChange", "(", "id", ",", "read", ",", "flag", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "commandsParser", "(", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_COMMANDS", ")", "!", "=", "END", ")", "{", "if", "(", "tag", "=", "=", "Tags", ".", "SYNC_ADD", ")", "{", "addParser", "(", "newEmails", ")", ";", "incrementChangeCount", "(", ")", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "SYNC_DELETE", "|", "|", "tag", "=", "=", "Tags", ".", "SYNC_SOFT_DELETE", ")", "{", "deleteParser", "(", "deletedEmails", ",", "tag", ")", ";", "incrementChangeCount", "(", ")", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "SYNC_CHANGE", ")", "{", "changeParser", "(", "changedEmails", ")", ";", "incrementChangeCount", "(", ")", ";", "}", "else", "skipTag", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "responsesParser", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "commit", "(", ")", "{", "int", "notifyCount", "=", "0", ";", "ArrayList", "<", "ContentProviderOperation", ">", "ops", "=", "new", "ArrayList", "<", "ContentProviderOperation", ">", "(", ")", ";", "for", "(", "Message", "msg", ":", "newEmails", ")", "{", "if", "(", "!", "msg", ".", "mFlagRead", ")", "{", "notifyCount", "+", "+", ";", "}", "msg", ".", "addSaveOps", "(", "ops", ")", ";", "}", "for", "(", "Long", "id", ":", "deletedEmails", ")", "{", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newDelete", "(", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "id", ")", ")", ".", "build", "(", ")", ")", ";", "AttachmentProvider", ".", "deleteAllAttachmentFiles", "(", "mContext", ",", "mAccount", ".", "mId", ",", "id", ")", ";", "}", "if", "(", "!", "changedEmails", ".", "isEmpty", "(", ")", ")", "{", "for", "(", "ServerChange", "change", ":", "changedEmails", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "if", "(", "change", ".", "read", "!", "=", "null", ")", "{", "cv", ".", "put", "(", "MessageColumns", ".", "FLAG_READ", ",", "change", ".", "read", ")", ";", "}", "if", "(", "change", ".", "flag", "!", "=", "null", ")", "{", "cv", ".", "put", "(", "MessageColumns", ".", "FLAG_FAVORITE", ",", "change", ".", "flag", ")", ";", "}", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newUpdate", "(", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "change", ".", "id", ")", ")", ".", "withValues", "(", "cv", ")", ".", "build", "(", ")", ")", ";", "}", "}", "ContentValues", "mailboxValues", "=", "new", "ContentValues", "(", ")", ";", "mailboxValues", ".", "put", "(", "Mailbox", ".", "SYNC_KEY", ",", "mMailbox", ".", "mSyncKey", ")", ";", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newUpdate", "(", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "CONTENT_URI", ",", "mMailbox", ".", "mId", ")", ")", ".", "withValues", "(", "mailboxValues", ")", ".", "build", "(", ")", ")", ";", "addCleanupOps", "(", "ops", ")", ";", "synchronized", "(", "mService", ".", "getSynchronizer", "(", ")", ")", "{", "if", "(", "mService", ".", "isStopped", "(", ")", ")", "return", ";", "try", "{", "mContentResolver", ".", "applyBatch", "(", "EmailProvider", ".", "EMAIL_AUTHORITY", ",", "ops", ")", ";", "userLog", "(", "mMailbox", ".", "mDisplayName", ",", "\"", "<STR_LIT>", "\"", ",", "mMailbox", ".", "mSyncKey", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "catch", "(", "OperationApplicationException", "e", ")", "{", "}", "}", "if", "(", "notifyCount", ">", "0", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "FIELD_COLUMN_NAME", ",", "AccountColumns", ".", "NEW_MESSAGE_COUNT", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "ADD_COLUMN_NAME", ",", "notifyCount", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "ADD_TO_FIELD_URI", ",", "mAccount", ".", "mId", ")", ";", "mContentResolver", ".", "update", "(", "uri", ",", "cv", ",", "null", ",", "null", ")", ";", "MailService", ".", "actionNotifyNewMessages", "(", "mContext", ",", "mAccount", ".", "mId", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getCollectionName", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "private", "void", "addCleanupOps", "(", "ArrayList", "<", "ContentProviderOperation", ">", "ops", ")", "{", "for", "(", "Long", "id", ":", "mDeletedIdList", ")", "{", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newDelete", "(", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "DELETED_CONTENT_URI", ",", "id", ")", ")", ".", "build", "(", ")", ")", ";", "}", "for", "(", "Long", "id", ":", "mUpdatedIdList", ")", "{", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newDelete", "(", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "UPDATED_CONTENT_URI", ",", "id", ")", ")", ".", "build", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "cleanup", "(", ")", "{", "if", "(", "!", "mDeletedIdList", ".", "isEmpty", "(", ")", "|", "|", "!", "mUpdatedIdList", ".", "isEmpty", "(", ")", ")", "{", "ArrayList", "<", "ContentProviderOperation", ">", "ops", "=", "new", "ArrayList", "<", "ContentProviderOperation", ">", "(", ")", ";", "addCleanupOps", "(", "ops", ")", ";", "try", "{", "mContext", ".", "getContentResolver", "(", ")", ".", "applyBatch", "(", "EmailProvider", ".", "EMAIL_AUTHORITY", ",", "ops", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "catch", "(", "OperationApplicationException", "e", ")", "{", "}", "}", "}", "</s>"]
["<s>", "private", "String", "formatTwo", "(", "int", "num", ")", "{", "if", "(", "num", "<", "<NUM_LIT:10>", ")", "{", "return", "\"", "<STR_LIT:0>", "\"", "+", "(", "char", ")", "(", "<CHAR_LIT:0>", "+", "num", ")", ";", "}", "else", "return", "Integer", ".", "toString", "(", "num", ")", ";", "}", "</s>"]
["<s>", "public", "String", "formatDateTime", "(", "Calendar", "calendar", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "sb", ".", "append", "(", "calendar", ".", "get", "(", "Calendar", ".", "YEAR", ")", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT:->", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "calendar", ".", "get", "(", "Calendar", ".", "MONTH", ")", "+", "1", ")", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT:->", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "calendar", ".", "get", "(", "Calendar", ".", "DAY_OF_MONTH", ")", ")", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT>", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "calendar", ".", "get", "(", "Calendar", ".", "HOUR_OF_DAY", ")", ")", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT::>", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "calendar", ".", "get", "(", "Calendar", ".", "MINUTE", ")", ")", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT::>", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "calendar", ".", "get", "(", "Calendar", ".", "SECOND", ")", ")", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "sendLocalChanges", "(", "Serializer", "s", ")", "throws", "IOException", "{", "ContentResolver", "cr", "=", "mContext", ".", "getContentResolver", "(", ")", ";", "if", "(", "mMailbox", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_DRAFTS", "|", "|", "mMailbox", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_OUTBOX", ")", "{", "return", "false", ";", "}", "Cursor", "c", "=", "cr", ".", "query", "(", "Message", ".", "DELETED_CONTENT_URI", ",", "Message", ".", "LIST_PROJECTION", ",", "MessageColumns", ".", "MAILBOX_KEY", "+", "<CHAR_LIT:=>", "+", "mMailbox", ".", "mId", ",", "null", ",", "null", ")", ";", "boolean", "first", "=", "true", ";", "mDeletedIdList", ".", "clear", "(", ")", ";", "try", "{", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "String", "serverId", "=", "c", ".", "getString", "(", "Message", ".", "LIST_SERVER_ID_COLUMN", ")", ";", "if", "(", "serverId", "=", "=", "null", ")", "{", "continue", ";", "}", "else", "if", "(", "first", ")", "{", "s", ".", "start", "(", "Tags", ".", "SYNC_COMMANDS", ")", ";", "first", "=", "false", ";", "}", "s", ".", "start", "(", "Tags", ".", "SYNC_DELETE", ")", ".", "data", "(", "Tags", ".", "SYNC_SERVER_ID", ",", "serverId", ")", ".", "end", "(", ")", ";", "mDeletedIdList", ".", "add", "(", "c", ".", "getLong", "(", "Message", ".", "LIST_ID_COLUMN", ")", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "long", "trashMailboxId", "=", "Mailbox", ".", "findMailboxOfType", "(", "mContext", ",", "mMailbox", ".", "mAccountKey", ",", "Mailbox", ".", "TYPE_TRASH", ")", ";", "c", "=", "cr", ".", "query", "(", "Message", ".", "UPDATED_CONTENT_URI", ",", "Message", ".", "LIST_PROJECTION", ",", "MessageColumns", ".", "MAILBOX_KEY", "+", "<CHAR_LIT:=>", "+", "mMailbox", ".", "mId", ",", "null", ",", "null", ")", ";", "mUpdatedIdList", ".", "clear", "(", ")", ";", "try", "{", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "id", "=", "c", ".", "getLong", "(", "Message", ".", "LIST_ID_COLUMN", ")", ";", "mUpdatedIdList", ".", "add", "(", "id", ")", ";", "Cursor", "currentCursor", "=", "cr", ".", "query", "(", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "id", ")", ",", "UPDATES_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "!", "currentCursor", ".", "moveToFirst", "(", ")", ")", "{", "continue", ";", "}", "String", "serverId", "=", "currentCursor", ".", "getString", "(", "UPDATES_SERVER_ID_COLUMN", ")", ";", "if", "(", "serverId", "=", "=", "null", ")", "{", "continue", ";", "}", "if", "(", "currentCursor", ".", "getLong", "(", "UPDATES_MAILBOX_KEY_COLUMN", ")", "=", "=", "trashMailboxId", ")", "{", "if", "(", "first", ")", "{", "s", ".", "start", "(", "Tags", ".", "SYNC_COMMANDS", ")", ";", "first", "=", "false", ";", "}", "s", ".", "start", "(", "Tags", ".", "SYNC_DELETE", ")", ".", "data", "(", "Tags", ".", "SYNC_SERVER_ID", ",", "serverId", ")", ".", "end", "(", ")", ";", "continue", ";", "}", "boolean", "flagChange", "=", "false", ";", "boolean", "readChange", "=", "false", ";", "int", "flag", "=", "0", ";", "if", "(", "mService", ".", "mProtocolVersionDouble", ">", "=", "<NUM_LIT>", ")", "{", "flag", "=", "currentCursor", ".", "getInt", "(", "UPDATES_FLAG_COLUMN", ")", ";", "if", "(", "flag", "!", "=", "c", ".", "getInt", "(", "Message", ".", "LIST_FAVORITE_COLUMN", ")", ")", "{", "flagChange", "=", "true", ";", "}", "}", "int", "read", "=", "currentCursor", ".", "getInt", "(", "UPDATES_READ_COLUMN", ")", ";", "if", "(", "read", "!", "=", "c", ".", "getInt", "(", "Message", ".", "LIST_READ_COLUMN", ")", ")", "{", "readChange", "=", "true", ";", "}", "if", "(", "!", "flagChange", "&", "&", "!", "readChange", ")", "{", "continue", ";", "}", "if", "(", "first", ")", "{", "s", ".", "start", "(", "Tags", ".", "SYNC_COMMANDS", ")", ";", "first", "=", "false", ";", "}", "s", ".", "start", "(", "Tags", ".", "SYNC_CHANGE", ")", ".", "data", "(", "Tags", ".", "SYNC_SERVER_ID", ",", "c", ".", "getString", "(", "Message", ".", "LIST_SERVER_ID_COLUMN", ")", ")", ".", "start", "(", "Tags", ".", "SYNC_APPLICATION_DATA", ")", ";", "if", "(", "readChange", ")", "{", "s", ".", "data", "(", "Tags", ".", "EMAIL_READ", ",", "Integer", ".", "toString", "(", "read", ")", ")", ";", "}", "if", "(", "flagChange", ")", "{", "if", "(", "flag", "!", "=", "0", ")", "{", "s", ".", "start", "(", "Tags", ".", "EMAIL_FLAG", ")", ".", "data", "(", "Tags", ".", "EMAIL_FLAG_STATUS", ",", "\"", "<STR_LIT:2>", "\"", ")", ";", "s", ".", "data", "(", "Tags", ".", "EMAIL_FLAG_TYPE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "long", "now", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "Calendar", "calendar", "=", "GregorianCalendar", ".", "getInstance", "(", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT:GMT>", "\"", ")", ")", ";", "calendar", ".", "setTimeInMillis", "(", "now", ")", ";", "String", "utc", "=", "formatDateTime", "(", "calendar", ")", ";", "s", ".", "data", "(", "Tags", ".", "TASK_START_DATE", ",", "utc", ")", ".", "data", "(", "Tags", ".", "TASK_UTC_START_DATE", ",", "utc", ")", ";", "calendar", ".", "setTimeInMillis", "(", "now", "+", "1", "*", "WEEKS", ")", ";", "utc", "=", "formatDateTime", "(", "calendar", ")", ";", "s", ".", "data", "(", "Tags", ".", "TASK_DUE_DATE", ",", "utc", ")", ".", "data", "(", "Tags", ".", "TASK_UTC_DUE_DATE", ",", "utc", ")", ";", "s", ".", "end", "(", ")", ";", "}", "else", "{", "s", ".", "tag", "(", "Tags", ".", "EMAIL_FLAG", ")", ";", "}", "}", "s", ".", "end", "(", ")", ".", "end", "(", ")", ";", "}", "finally", "{", "currentCursor", ".", "close", "(", ")", ";", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "if", "(", "!", "first", ")", "{", "s", ".", "end", "(", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "FolderSyncParser", "(", "InputStream", "in", ",", "AbstractSyncAdapter", "adapter", ")", "throws", "IOException", "{", "super", "(", "in", ",", "adapter", ")", ";", "mAccountId", "=", "mAccount", ".", "mId", ";", "mAccountIdAsString", "=", "Long", ".", "toString", "(", "mAccountId", ")", ";", "if", "(", "in", "instanceof", "MockParserStream", ")", "{", "mMock", "=", "(", "MockParserStream", ")", "in", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "parse", "(", ")", "throws", "IOException", "{", "int", "status", ";", "boolean", "res", "=", "false", ";", "boolean", "resetFolders", "=", "false", ";", "if", "(", "nextTag", "(", "START_DOCUMENT", ")", "!", "=", "Tags", ".", "FOLDER_FOLDER_SYNC", ")", "throw", "new", "EasParserException", "(", ")", ";", "while", "(", "nextTag", "(", "START_DOCUMENT", ")", "!", "=", "END_DOCUMENT", ")", "{", "if", "(", "tag", "=", "=", "Tags", ".", "FOLDER_STATUS", ")", "{", "status", "=", "getValueInt", "(", ")", ";", "if", "(", "status", "!", "=", "Eas", ".", "FOLDER_STATUS_OK", ")", "{", "mService", ".", "errorLog", "(", "\"", "<STR_LIT>", "\"", "+", "status", ")", ";", "if", "(", "status", "=", "=", "Eas", ".", "FOLDER_STATUS_INVALID_KEY", ")", "{", "mAccount", ".", "mSyncKey", "=", "\"", "<STR_LIT:0>", "\"", ";", "mService", ".", "errorLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mContentResolver", ".", "delete", "(", "Mailbox", ".", "CONTENT_URI", ",", "ALL_BUT_ACCOUNT_MAILBOX", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mAccountId", ")", "}", ")", ";", "SyncManager", ".", "folderListReloaded", "(", "mAccountId", ")", ";", "res", "=", "true", ";", "resetFolders", "=", "true", ";", "}", "else", "{", "mService", ".", "errorLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "throw", "new", "EasParserException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "FOLDER_SYNC_KEY", ")", "{", "mAccount", ".", "mSyncKey", "=", "getValue", "(", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "mAccount", ".", "mSyncKey", ")", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "FOLDER_CHANGES", ")", "{", "changesParser", "(", ")", ";", "}", "else", "skipTag", "(", ")", ";", "}", "synchronized", "(", "mService", ".", "getSynchronizer", "(", ")", ")", "{", "if", "(", "!", "mService", ".", "isStopped", "(", ")", "|", "|", "resetFolders", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "AccountColumns", ".", "SYNC_KEY", ",", "mAccount", ".", "mSyncKey", ")", ";", "mAccount", ".", "update", "(", "mContext", ",", "cv", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "mAccount", ".", "mSyncKey", ")", ";", "}", "}", "return", "res", ";", "}", "</s>"]
["<s>", "private", "Cursor", "getServerIdCursor", "(", "String", "serverId", ")", "{", "mBindArguments", "[", "0", "]", "=", "serverId", ";", "mBindArguments", "[", "1", "]", "=", "mAccountIdAsString", ";", "return", "mContentResolver", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "EmailContent", ".", "ID_PROJECTION", ",", "WHERE_SERVER_ID_AND_ACCOUNT", ",", "mBindArguments", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "deleteParser", "(", "ArrayList", "<", "ContentProviderOperation", ">", "ops", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "FOLDER_DELETE", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "FOLDER_SERVER_ID", ":", "String", "serverId", "=", "getValue", "(", ")", ";", "Cursor", "c", "=", "getServerIdCursor", "(", "serverId", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "serverId", ")", ";", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newDelete", "(", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "CONTENT_URI", ",", "c", ".", "getLong", "(", "0", ")", ")", ")", ".", "build", "(", ")", ")", ";", "AttachmentProvider", ".", "deleteAllMailboxAttachmentFiles", "(", "mContext", ",", "mAccountId", ",", "mMailbox", ".", "mId", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "addParser", "(", "ArrayList", "<", "ContentProviderOperation", ">", "ops", ")", "throws", "IOException", "{", "String", "name", "=", "null", ";", "String", "serverId", "=", "null", ";", "String", "parentId", "=", "null", ";", "int", "type", "=", "0", ";", "while", "(", "nextTag", "(", "Tags", ".", "FOLDER_ADD", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "FOLDER_DISPLAY_NAME", ":", "{", "name", "=", "getValue", "(", ")", ";", "break", ";", "}", "case", "Tags", ".", "FOLDER_TYPE", ":", "{", "type", "=", "getValueInt", "(", ")", ";", "break", ";", "}", "case", "Tags", ".", "FOLDER_PARENT_ID", ":", "{", "parentId", "=", "getValue", "(", ")", ";", "break", ";", "}", "case", "Tags", ".", "FOLDER_SERVER_ID", ":", "{", "serverId", "=", "getValue", "(", ")", ";", "break", ";", "}", "default", ":", "skipTag", "(", ")", ";", "}", "}", "if", "(", "mValidFolderTypes", ".", "contains", "(", "type", ")", ")", "{", "Mailbox", "m", "=", "new", "Mailbox", "(", ")", ";", "m", ".", "mDisplayName", "=", "name", ";", "m", ".", "mServerId", "=", "serverId", ";", "m", ".", "mAccountKey", "=", "mAccountId", ";", "m", ".", "mType", "=", "Mailbox", ".", "TYPE_MAIL", ";", "m", ".", "mSyncInterval", "=", "Mailbox", ".", "CHECK_INTERVAL_NEVER", ";", "switch", "(", "type", ")", "{", "case", "INBOX_TYPE", ":", "m", ".", "mType", "=", "Mailbox", ".", "TYPE_INBOX", ";", "m", ".", "mSyncInterval", "=", "mAccount", ".", "mSyncInterval", ";", "break", ";", "case", "CONTACTS_TYPE", ":", "m", ".", "mType", "=", "Mailbox", ".", "TYPE_CONTACTS", ";", "m", ".", "mSyncInterval", "=", "mAccount", ".", "mSyncInterval", ";", "break", ";", "case", "OUTBOX_TYPE", ":", "m", ".", "mType", "=", "Mailbox", ".", "TYPE_OUTBOX", ";", "break", ";", "case", "SENT_TYPE", ":", "m", ".", "mType", "=", "Mailbox", ".", "TYPE_SENT", ";", "break", ";", "case", "DRAFTS_TYPE", ":", "m", ".", "mType", "=", "Mailbox", ".", "TYPE_DRAFTS", ";", "break", ";", "case", "DELETED_TYPE", ":", "m", ".", "mType", "=", "Mailbox", ".", "TYPE_TRASH", ";", "break", ";", "case", "CALENDAR_TYPE", ":", "m", ".", "mType", "=", "Mailbox", ".", "TYPE_CALENDAR", ";", "break", ";", "}", "m", ".", "mFlagVisible", "=", "(", "m", ".", "mType", "<", "Mailbox", ".", "TYPE_NOT_EMAIL", ")", ";", "if", "(", "!", "parentId", ".", "equals", "(", "\"", "<STR_LIT:0>", "\"", ")", ")", "{", "m", ".", "mParentServerId", "=", "parentId", ";", "}", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "m", ".", "mDisplayName", ")", ";", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newInsert", "(", "Mailbox", ".", "CONTENT_URI", ")", ".", "withValues", "(", "m", ".", "toContentValues", "(", ")", ")", ".", "build", "(", ")", ")", ";", "}", "return", ";", "}", "</s>"]
["<s>", "public", "void", "updateParser", "(", "ArrayList", "<", "ContentProviderOperation", ">", "ops", ")", "throws", "IOException", "{", "String", "serverId", "=", "null", ";", "String", "displayName", "=", "null", ";", "String", "parentId", "=", "null", ";", "while", "(", "nextTag", "(", "Tags", ".", "FOLDER_UPDATE", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "FOLDER_SERVER_ID", ":", "serverId", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "FOLDER_DISPLAY_NAME", ":", "displayName", "=", "getValue", "(", ")", ";", "break", ";", "case", "Tags", ".", "FOLDER_PARENT_ID", ":", "parentId", "=", "getValue", "(", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "break", ";", "}", "}", "if", "(", "serverId", "!", "=", "null", "&", "&", "(", "displayName", "!", "=", "null", "|", "|", "parentId", "!", "=", "null", ")", ")", "{", "Cursor", "c", "=", "getServerIdCursor", "(", "serverId", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "serverId", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "if", "(", "displayName", "!", "=", "null", ")", "{", "cv", ".", "put", "(", "Mailbox", ".", "DISPLAY_NAME", ",", "displayName", ")", ";", "}", "if", "(", "parentId", "!", "=", "null", ")", "{", "cv", ".", "put", "(", "Mailbox", ".", "PARENT_SERVER_ID", ",", "parentId", ")", ";", "}", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newUpdate", "(", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "CONTENT_URI", ",", "c", ".", "getLong", "(", "0", ")", ")", ")", ".", "withValues", "(", "cv", ")", ".", "build", "(", ")", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "changesParser", "(", ")", "throws", "IOException", "{", "ArrayList", "<", "ContentProviderOperation", ">", "ops", "=", "new", "ArrayList", "<", "ContentProviderOperation", ">", "(", ")", ";", "while", "(", "nextTag", "(", "Tags", ".", "FOLDER_CHANGES", ")", "!", "=", "END", ")", "{", "if", "(", "tag", "=", "=", "Tags", ".", "FOLDER_ADD", ")", "{", "addParser", "(", "ops", ")", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "FOLDER_DELETE", ")", "{", "deleteParser", "(", "ops", ")", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "FOLDER_UPDATE", ")", "{", "updateParser", "(", "ops", ")", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "FOLDER_COUNT", ")", "{", "getValueInt", "(", ")", ";", "}", "else", "skipTag", "(", ")", ";", "}", "if", "(", "mMock", "!", "=", "null", ")", "{", "mMock", ".", "setResult", "(", "null", ")", ";", "return", ";", "}", "synchronized", "(", "mService", ".", "getSynchronizer", "(", ")", ")", "{", "if", "(", "!", "ops", ".", "isEmpty", "(", ")", "&", "&", "!", "mService", ".", "isStopped", "(", ")", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "ops", ".", "size", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newUpdate", "(", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "mAccountId", ")", ")", ".", "withValues", "(", "mAccount", ".", "toContentValues", "(", ")", ")", ".", "build", "(", ")", ")", ";", "try", "{", "mContentResolver", ".", "applyBatch", "(", "EmailProvider", ".", "EMAIL_AUTHORITY", ",", "ops", ")", ";", "userLog", "(", "\"", "<STR_LIT>", "\"", ",", "mAccount", ".", "mSyncKey", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "catch", "(", "OperationApplicationException", "e", ")", "{", "}", "mBindArguments", "[", "0", "]", "=", "\"", "<STR_LIT>", "\"", ";", "mBindArguments", "[", "1", "]", "=", "mAccountIdAsString", ";", "Cursor", "c", "=", "mContentResolver", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "MAILBOX_ID_COLUMNS_PROJECTION", ",", "WHERE_DISPLAY_NAME_AND_ACCOUNT", ",", "mBindArguments", ",", "null", ")", ";", "String", "parentServerId", "=", "null", ";", "long", "id", "=", "0", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "id", "=", "c", ".", "getLong", "(", "0", ")", ";", "parentServerId", "=", "c", ".", "getString", "(", "1", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "if", "(", "parentServerId", "!", "=", "null", ")", "{", "mContentResolver", ".", "delete", "(", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "CONTENT_URI", ",", "id", ")", ",", "null", ",", "null", ")", ";", "mBindArguments", "[", "0", "]", "=", "parentServerId", ";", "mContentResolver", ".", "delete", "(", "Mailbox", ".", "CONTENT_URI", ",", "WHERE_PARENT_SERVER_ID_AND_ACCOUNT", ",", "mBindArguments", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "commandsParser", "(", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "commit", "(", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "wipe", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "responsesParser", "(", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "public", "Serializer", "(", ")", "{", "super", "(", ")", ";", "try", "{", "startDocument", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "void", "log", "(", "String", "str", ")", "{", "int", "cr", "=", "str", ".", "indexOf", "(", "<STR_LIT:\\n>", ")", ";", "if", "(", "cr", ">", "0", ")", "{", "str", "=", "str", ".", "substring", "(", "0", ",", "cr", ")", ";", "}", "Log", ".", "v", "(", "TAG", ",", "str", ")", ";", "if", "(", "Eas", ".", "FILE_LOG", ")", "{", "FileLogger", ".", "log", "(", "TAG", ",", "str", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "done", "(", ")", "throws", "IOException", "{", "if", "(", "depth", "!", "=", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "writeInteger", "(", "out", ",", "0", ")", ";", "out", ".", "write", "(", "buf", ".", "toByteArray", "(", ")", ")", ";", "out", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "startDocument", "(", ")", "throws", "IOException", "{", "out", ".", "write", "(", "<NUM_LIT>", ")", ";", "out", ".", "write", "(", "<NUM_LIT>", ")", ";", "out", ".", "write", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "checkPendingTag", "(", "boolean", "degenerated", ")", "throws", "IOException", "{", "if", "(", "pendingTag", "=", "=", "NOT_PENDING", ")", "return", ";", "int", "page", "=", "pendingTag", ">", ">", "Tags", ".", "PAGE_SHIFT", ";", "int", "tag", "=", "pendingTag", "&", "Tags", ".", "PAGE_MASK", ";", "if", "(", "page", "!", "=", "tagPage", ")", "{", "tagPage", "=", "page", ";", "buf", ".", "write", "(", "Wbxml", ".", "SWITCH_PAGE", ")", ";", "buf", ".", "write", "(", "page", ")", ";", "}", "buf", ".", "write", "(", "degenerated", "?", "tag", ":", "tag", "|", "<NUM_LIT>", ")", ";", "if", "(", "logging", ")", "{", "String", "name", "=", "Tags", ".", "pages", "[", "page", "]", "[", "tag", "-", "<NUM_LIT:5>", "]", ";", "nameStack", "[", "depth", "]", "=", "name", ";", "log", "(", "\"", "<STR_LIT:<>", "\"", "+", "name", "+", "<CHAR_LIT:>>", ")", ";", "}", "pendingTag", "=", "NOT_PENDING", ";", "}", "</s>"]
["<s>", "public", "Serializer", "start", "(", "int", "tag", ")", "throws", "IOException", "{", "checkPendingTag", "(", "false", ")", ";", "pendingTag", "=", "tag", ";", "depth", "+", "+", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Serializer", "end", "(", ")", "throws", "IOException", "{", "if", "(", "pendingTag", ">", "=", "0", ")", "{", "checkPendingTag", "(", "true", ")", ";", "}", "else", "{", "buf", ".", "write", "(", "Wbxml", ".", "END", ")", ";", "if", "(", "logging", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", "+", "nameStack", "[", "depth", "]", "+", "<CHAR_LIT:>>", ")", ";", "}", "}", "depth", "-", "-", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Serializer", "tag", "(", "int", "t", ")", "throws", "IOException", "{", "start", "(", "t", ")", ";", "end", "(", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Serializer", "data", "(", "int", "tag", ",", "String", "value", ")", "throws", "IOException", "{", "start", "(", "tag", ")", ";", "text", "(", "value", ")", ";", "end", "(", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "out", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "byte", "[", "]", "toByteArray", "(", ")", "{", "return", "out", ".", "toByteArray", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Serializer", "text", "(", "String", "text", ")", "throws", "IOException", "{", "checkPendingTag", "(", "false", ")", ";", "buf", ".", "write", "(", "Wbxml", ".", "STR_I", ")", ";", "writeLiteralString", "(", "buf", ",", "text", ")", ";", "if", "(", "logging", ")", "{", "log", "(", "text", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "void", "writeInteger", "(", "OutputStream", "out", ",", "int", "i", ")", "throws", "IOException", "{", "byte", "[", "]", "buf", "=", "new", "byte", "[", "<NUM_LIT:5>", "]", ";", "int", "idx", "=", "0", ";", "do", "{", "buf", "[", "idx", "+", "+", "]", "=", "(", "byte", ")", "(", "i", "&", "<NUM_LIT>", ")", ";", "i", "=", "i", ">", ">", "<NUM_LIT:7>", ";", "}", "while", "(", "i", "!", "=", "0", ")", ";", "while", "(", "idx", ">", "1", ")", "{", "out", ".", "write", "(", "buf", "[", "-", "-", "idx", "]", "|", "<NUM_LIT>", ")", ";", "}", "out", ".", "write", "(", "buf", "[", "0", "]", ")", ";", "if", "(", "logging", ")", "{", "log", "(", "Integer", ".", "toString", "(", "i", ")", ")", ";", "}", "}", "</s>"]
["<s>", "void", "writeLiteralString", "(", "OutputStream", "out", ",", "String", "s", ")", "throws", "IOException", "{", "byte", "[", "]", "data", "=", "s", ".", "getBytes", "(", "\"", "<STR_LIT:UTF-8>", "\"", ")", ";", "out", ".", "write", "(", "data", ")", ";", "out", ".", "write", "(", "0", ")", ";", "}", "</s>"]
["<s>", "public", "AccountSyncAdapter", "(", "Mailbox", "mailbox", ",", "EasSyncService", "service", ")", "{", "super", "(", "mailbox", ",", "service", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "cleanup", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getCollectionName", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "parse", "(", "InputStream", "is", ")", "throws", "IOException", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "sendLocalChanges", "(", "Serializer", "s", ")", "throws", "IOException", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "synchronized", "static", "FileLogger", "getLogger", "(", "Context", "c", ")", "{", "LOGGER", "=", "new", "FileLogger", "(", ")", ";", "return", "LOGGER", ";", "}", "</s>"]
["<s>", "private", "FileLogger", "(", ")", "{", "try", "{", "mLogWriter", "=", "new", "FileWriter", "(", "LOG_FILE_NAME", ",", "true", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "static", "public", "synchronized", "void", "close", "(", ")", "{", "if", "(", "mLogWriter", "!", "=", "null", ")", "{", "try", "{", "mLogWriter", ".", "close", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "}", "mLogWriter", "=", "null", ";", "}", "}", "</s>"]
["<s>", "static", "public", "synchronized", "void", "log", "(", "Exception", "e", ")", "{", "if", "(", "mLogWriter", "!", "=", "null", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "PrintWriter", "pw", "=", "new", "PrintWriter", "(", "mLogWriter", ")", ";", "e", ".", "printStackTrace", "(", "pw", ")", ";", "pw", ".", "flush", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "static", "public", "synchronized", "void", "log", "(", "String", "prefix", ",", "String", "str", ")", "{", "if", "(", "LOGGER", "=", "=", "null", ")", "{", "LOGGER", "=", "new", "FileLogger", "(", ")", ";", "log", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "Date", "d", "=", "new", "Date", "(", ")", ";", "int", "hr", "=", "d", ".", "getHours", "(", ")", ";", "int", "min", "=", "d", ".", "getMinutes", "(", ")", ";", "int", "sec", "=", "d", ".", "getSeconds", "(", ")", ";", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", "<NUM_LIT>", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT:[>", ")", ";", "sb", ".", "append", "(", "hr", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT::>", ")", ";", "if", "(", "min", "<", "<NUM_LIT:10>", ")", "sb", ".", "append", "(", "<CHAR_LIT:0>", ")", ";", "sb", ".", "append", "(", "min", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT::>", ")", ";", "if", "(", "sec", "<", "<NUM_LIT:10>", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:0>", ")", ";", "}", "sb", ".", "append", "(", "sec", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "prefix", "!", "=", "null", ")", "{", "sb", ".", "append", "(", "prefix", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "sb", ".", "append", "(", "str", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "String", "s", "=", "sb", ".", "toString", "(", ")", ";", "if", "(", "mLogWriter", "!", "=", "null", ")", "{", "try", "{", "mLogWriter", ".", "write", "(", "s", ")", ";", "mLogWriter", ".", "flush", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "}", "}", "}", "</s>"]
["<s>", "private", "Preferences", "(", "Context", "context", ")", "{", "mSharedPreferences", "=", "context", ".", "getSharedPreferences", "(", "PREFERENCES_FILE", ",", "Context", ".", "MODE_PRIVATE", ")", ";", "}", "</s>"]
["<s>", "public", "static", "synchronized", "Preferences", "getPreferences", "(", "Context", "context", ")", "{", "if", "(", "preferences", "=", "=", "null", ")", "{", "preferences", "=", "new", "Preferences", "(", "context", ")", ";", "}", "return", "preferences", ";", "}", "</s>"]
["<s>", "public", "Account", "[", "]", "getAccounts", "(", ")", "{", "String", "accountUuids", "=", "mSharedPreferences", ".", "getString", "(", "ACCOUNT_UUIDS", ",", "null", ")", ";", "if", "(", "accountUuids", "=", "=", "null", "|", "|", "accountUuids", ".", "length", "(", ")", "=", "=", "0", ")", "{", "return", "new", "Account", "[", "]", "{", "}", ";", "}", "String", "[", "]", "uuids", "=", "accountUuids", ".", "split", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "Account", "[", "]", "accounts", "=", "new", "Account", "[", "uuids", ".", "length", "]", ";", "for", "(", "int", "i", "=", "0", ",", "length", "=", "uuids", ".", "length", ";", "i", "<", "length", ";", "i", "+", "+", ")", "{", "accounts", "[", "i", "]", "=", "new", "Account", "(", "this", ",", "uuids", "[", "i", "]", ")", ";", "}", "return", "accounts", ";", "}", "</s>"]
["<s>", "public", "Account", "getAccountByContentUri", "(", "Uri", "uri", ")", "{", "if", "(", "!", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "uri", ".", "getScheme", "(", ")", ")", "|", "|", "!", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "uri", ".", "getAuthority", "(", ")", ")", ")", "{", "return", "null", ";", "}", "String", "uuid", "=", "uri", ".", "getPath", "(", ")", ".", "substring", "(", "1", ")", ";", "if", "(", "uuid", "=", "=", "null", ")", "{", "return", "null", ";", "}", "String", "accountUuids", "=", "mSharedPreferences", ".", "getString", "(", "ACCOUNT_UUIDS", ",", "null", ")", ";", "if", "(", "accountUuids", "=", "=", "null", "|", "|", "accountUuids", ".", "length", "(", ")", "=", "=", "0", ")", "{", "return", "null", ";", "}", "String", "[", "]", "uuids", "=", "accountUuids", ".", "split", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "for", "(", "int", "i", "=", "0", ",", "length", "=", "uuids", ".", "length", ";", "i", "<", "length", ";", "i", "+", "+", ")", "{", "if", "(", "uuid", ".", "equals", "(", "uuids", "[", "i", "]", ")", ")", "{", "return", "new", "Account", "(", "this", ",", "uuid", ")", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "Account", "getDefaultAccount", "(", ")", "{", "String", "defaultAccountUuid", "=", "mSharedPreferences", ".", "getString", "(", "DEFAULT_ACCOUNT_UUID", ",", "null", ")", ";", "Account", "defaultAccount", "=", "null", ";", "Account", "[", "]", "accounts", "=", "getAccounts", "(", ")", ";", "if", "(", "defaultAccountUuid", "!", "=", "null", ")", "{", "for", "(", "Account", "account", ":", "accounts", ")", "{", "if", "(", "account", ".", "getUuid", "(", ")", ".", "equals", "(", "defaultAccountUuid", ")", ")", "{", "defaultAccount", "=", "account", ";", "break", ";", "}", "}", "}", "if", "(", "defaultAccount", "=", "=", "null", ")", "{", "if", "(", "accounts", ".", "length", ">", "0", ")", "{", "defaultAccount", "=", "accounts", "[", "0", "]", ";", "setDefaultAccount", "(", "defaultAccount", ")", ";", "}", "}", "return", "defaultAccount", ";", "}", "</s>"]
["<s>", "public", "void", "setDefaultAccount", "(", "Account", "account", ")", "{", "mSharedPreferences", ".", "edit", "(", ")", ".", "putString", "(", "DEFAULT_ACCOUNT_UUID", ",", "account", ".", "getUuid", "(", ")", ")", ".", "commit", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setEnableDebugLogging", "(", "boolean", "value", ")", "{", "mSharedPreferences", ".", "edit", "(", ")", ".", "putBoolean", "(", "ENABLE_DEBUG_LOGGING", ",", "value", ")", ".", "commit", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "getEnableDebugLogging", "(", ")", "{", "return", "mSharedPreferences", ".", "getBoolean", "(", "ENABLE_DEBUG_LOGGING", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setEnableSensitiveLogging", "(", "boolean", "value", ")", "{", "mSharedPreferences", ".", "edit", "(", ")", ".", "putBoolean", "(", "ENABLE_SENSITIVE_LOGGING", ",", "value", ")", ".", "commit", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "getEnableSensitiveLogging", "(", ")", "{", "return", "mSharedPreferences", ".", "getBoolean", "(", "ENABLE_SENSITIVE_LOGGING", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setEnableExchangeLogging", "(", "boolean", "value", ")", "{", "mSharedPreferences", ".", "edit", "(", ")", ".", "putBoolean", "(", "ENABLE_EXCHANGE_LOGGING", ",", "value", ")", ".", "commit", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "getEnableExchangeLogging", "(", ")", "{", "return", "mSharedPreferences", ".", "getBoolean", "(", "ENABLE_EXCHANGE_LOGGING", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setEnableExchangeFileLogging", "(", "boolean", "value", ")", "{", "mSharedPreferences", ".", "edit", "(", ")", ".", "putBoolean", "(", "ENABLE_EXCHANGE_FILE_LOGGING", ",", "value", ")", ".", "commit", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "getEnableExchangeFileLogging", "(", ")", "{", "return", "mSharedPreferences", ".", "getBoolean", "(", "ENABLE_EXCHANGE_FILE_LOGGING", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "save", "(", ")", "{", "}", "</s>"]
["<s>", "public", "void", "clear", "(", ")", "{", "mSharedPreferences", ".", "edit", "(", ")", ".", "clear", "(", ")", ".", "commit", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "dump", "(", ")", "{", "if", "(", "Email", ".", "LOGD", ")", "{", "for", "(", "String", "key", ":", "mSharedPreferences", ".", "getAll", "(", ")", ".", "keySet", "(", ")", ")", "{", "Log", ".", "v", "(", "Email", ".", "LOG_TAG", ",", "key", "+", "\"", "<STR_LIT>", "\"", "+", "mSharedPreferences", ".", "getAll", "(", ")", ".", "get", "(", "key", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "boolean", "setServicesEnabled", "(", "Context", "context", ")", "{", "Cursor", "c", "=", "null", ";", "try", "{", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "EmailContent", ".", "Account", ".", "CONTENT_URI", ",", "EmailContent", ".", "Account", ".", "ID_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "boolean", "enable", "=", "c", ".", "getCount", "(", ")", ">", "0", ";", "setServicesEnabled", "(", "context", ",", "enable", ")", ";", "return", "enable", ";", "}", "finally", "{", "if", "(", "c", "!", "=", "null", ")", "{", "c", ".", "close", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "void", "setServicesEnabled", "(", "Context", "context", ",", "boolean", "enabled", ")", "{", "PackageManager", "pm", "=", "context", ".", "getPackageManager", "(", ")", ";", "if", "(", "!", "enabled", "&", "&", "pm", ".", "getComponentEnabledSetting", "(", "new", "ComponentName", "(", "context", ",", "MailService", ".", "class", ")", ")", "=", "=", "PackageManager", ".", "COMPONENT_ENABLED_STATE_ENABLED", ")", "{", "MailService", ".", "actionReschedule", "(", "context", ")", ";", "}", "pm", ".", "setComponentEnabledSetting", "(", "new", "ComponentName", "(", "context", ",", "MessageCompose", ".", "class", ")", ",", "enabled", "?", "PackageManager", ".", "COMPONENT_ENABLED_STATE_ENABLED", ":", "PackageManager", ".", "COMPONENT_ENABLED_STATE_DISABLED", ",", "PackageManager", ".", "DONT_KILL_APP", ")", ";", "pm", ".", "setComponentEnabledSetting", "(", "new", "ComponentName", "(", "context", ",", "AccountShortcutPicker", ".", "class", ")", ",", "enabled", "?", "PackageManager", ".", "COMPONENT_ENABLED_STATE_ENABLED", ":", "PackageManager", ".", "COMPONENT_ENABLED_STATE_DISABLED", ",", "PackageManager", ".", "DONT_KILL_APP", ")", ";", "pm", ".", "setComponentEnabledSetting", "(", "new", "ComponentName", "(", "context", ",", "BootReceiver", ".", "class", ")", ",", "enabled", "?", "PackageManager", ".", "COMPONENT_ENABLED_STATE_ENABLED", ":", "PackageManager", ".", "COMPONENT_ENABLED_STATE_DISABLED", ",", "PackageManager", ".", "DONT_KILL_APP", ")", ";", "pm", ".", "setComponentEnabledSetting", "(", "new", "ComponentName", "(", "context", ",", "MailService", ".", "class", ")", ",", "enabled", "?", "PackageManager", ".", "COMPONENT_ENABLED_STATE_ENABLED", ":", "PackageManager", ".", "COMPONENT_ENABLED_STATE_DISABLED", ",", "PackageManager", ".", "DONT_KILL_APP", ")", ";", "if", "(", "enabled", "&", "&", "pm", ".", "getComponentEnabledSetting", "(", "new", "ComponentName", "(", "context", ",", "MailService", ".", "class", ")", ")", "=", "=", "PackageManager", ".", "COMPONENT_ENABLED_STATE_ENABLED", ")", "{", "MailService", ".", "actionReschedule", "(", "context", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", ")", "{", "super", ".", "onCreate", "(", ")", ";", "Preferences", "prefs", "=", "Preferences", ".", "getPreferences", "(", "this", ")", ";", "DEBUG", "=", "prefs", ".", "getEnableDebugLogging", "(", ")", ";", "DEBUG_SENSITIVE", "=", "prefs", ".", "getEnableSensitiveLogging", "(", ")", ";", "Controller", ".", "getInstance", "(", "this", ")", ".", "resetVisibleLimits", "(", ")", ";", "BinaryTempFileBody", ".", "setTempDirectory", "(", "getCacheDir", "(", ")", ")", ";", "int", "debugLogging", "=", "prefs", ".", "getEnableDebugLogging", "(", ")", "?", "Eas", ".", "DEBUG_BIT", ":", "0", ";", "int", "exchangeLogging", "=", "prefs", ".", "getEnableExchangeLogging", "(", ")", "?", "Eas", ".", "DEBUG_EXCHANGE_BIT", ":", "0", ";", "int", "fileLogging", "=", "prefs", ".", "getEnableExchangeFileLogging", "(", ")", "?", "Eas", ".", "DEBUG_FILE_BIT", ":", "0", ";", "int", "debugBits", "=", "debugLogging", "+", "exchangeLogging", "+", "fileLogging", ";", "Controller", ".", "getInstance", "(", "this", ")", ".", "serviceLogging", "(", "debugBits", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "log", "(", "String", "message", ")", "{", "Log", ".", "d", "(", "LOG_TAG", ",", "message", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "updateMailboxRefreshTime", "(", "long", "mailboxId", ")", "{", "synchronized", "(", "sMailboxSyncTimes", ")", "{", "sMailboxSyncTimes", ".", "put", "(", "mailboxId", ",", "System", ".", "currentTimeMillis", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "boolean", "mailboxRequiresRefresh", "(", "long", "mailboxId", ")", "{", "synchronized", "(", "sMailboxSyncTimes", ")", "{", "return", "!", "sMailboxSyncTimes", ".", "containsKey", "(", "mailboxId", ")", "|", "|", "(", "System", ".", "currentTimeMillis", "(", ")", "-", "sMailboxSyncTimes", ".", "get", "(", "mailboxId", ")", ">", "UPDATE_INTERVAL", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "MessagingController", "(", "Context", "_context", ")", "{", "mContext", "=", "_context", ";", "mServerMailboxNames", ".", "put", "(", "mContext", ".", "getString", "(", "R", ".", "string", ".", "mailbox_name_server_inbox", ")", ".", "toLowerCase", "(", ")", ",", "Mailbox", ".", "TYPE_INBOX", ")", ";", "mServerMailboxNames", ".", "put", "(", "mContext", ".", "getString", "(", "R", ".", "string", ".", "mailbox_name_server_outbox", ")", ".", "toLowerCase", "(", ")", ",", "Mailbox", ".", "TYPE_OUTBOX", ")", ";", "mServerMailboxNames", ".", "put", "(", "mContext", ".", "getString", "(", "R", ".", "string", ".", "mailbox_name_server_drafts", ")", ".", "toLowerCase", "(", ")", ",", "Mailbox", ".", "TYPE_DRAFTS", ")", ";", "mServerMailboxNames", ".", "put", "(", "mContext", ".", "getString", "(", "R", ".", "string", ".", "mailbox_name_server_trash", ")", ".", "toLowerCase", "(", ")", ",", "Mailbox", ".", "TYPE_TRASH", ")", ";", "mServerMailboxNames", ".", "put", "(", "mContext", ".", "getString", "(", "R", ".", "string", ".", "mailbox_name_server_sent", ")", ".", "toLowerCase", "(", ")", ",", "Mailbox", ".", "TYPE_SENT", ")", ";", "mServerMailboxNames", ".", "put", "(", "mContext", ".", "getString", "(", "R", ".", "string", ".", "mailbox_name_server_junk", ")", ".", "toLowerCase", "(", ")", ",", "Mailbox", ".", "TYPE_JUNK", ")", ";", "mThread", "=", "new", "Thread", "(", "this", ")", ";", "mThread", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "static", "MessagingController", "getInstance", "(", "Context", "_context", ")", "{", "if", "(", "inst", "=", "=", "null", ")", "{", "inst", "=", "new", "MessagingController", "(", "_context", ")", ";", "}", "return", "inst", ";", "}", "</s>"]
["<s>", "public", "static", "void", "injectMockController", "(", "MessagingController", "mockController", ")", "{", "inst", "=", "mockController", ";", "}", "</s>"]
["<s>", "public", "boolean", "isBusy", "(", ")", "{", "return", "mBusy", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "Process", ".", "setThreadPriority", "(", "Process", ".", "THREAD_PRIORITY_BACKGROUND", ")", ";", "while", "(", "true", ")", "{", "Command", "command", ";", "try", "{", "command", "=", "mCommands", ".", "take", "(", ")", ";", "}", "catch", "(", "InterruptedException", "e", ")", "{", "continue", ";", "}", "if", "(", "command", ".", "listener", "=", "=", "null", "|", "|", "isActiveListener", "(", "command", ".", "listener", ")", ")", "{", "mBusy", "=", "true", ";", "command", ".", "runnable", ".", "run", "(", ")", ";", "mListeners", ".", "controllerCommandCompleted", "(", "mCommands", ".", "size", "(", ")", ">", "0", ")", ";", "}", "mBusy", "=", "false", ";", "}", "}", "</s>"]
["<s>", "private", "void", "put", "(", "String", "description", ",", "MessagingListener", "listener", ",", "Runnable", "runnable", ")", "{", "try", "{", "Command", "command", "=", "new", "Command", "(", ")", ";", "command", ".", "listener", "=", "listener", ";", "command", ".", "runnable", "=", "runnable", ";", "command", ".", "description", "=", "description", ";", "mCommands", ".", "add", "(", "command", ")", ";", "}", "catch", "(", "IllegalStateException", "ie", ")", "{", "throw", "new", "Error", "(", "ie", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "addListener", "(", "MessagingListener", "listener", ")", "{", "mListeners", ".", "addListener", "(", "listener", ")", ";", "}", "</s>"]
["<s>", "public", "void", "removeListener", "(", "MessagingListener", "listener", ")", "{", "mListeners", ".", "removeListener", "(", "listener", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "isActiveListener", "(", "MessagingListener", "listener", ")", "{", "return", "mListeners", ".", "isActiveListener", "(", "listener", ")", ";", "}", "</s>"]
["<s>", "public", "LocalMailboxInfo", "(", "Cursor", "c", ")", "{", "mId", "=", "c", ".", "getLong", "(", "COLUMN_ID", ")", ";", "mDisplayName", "=", "c", ".", "getString", "(", "COLUMN_DISPLAY_NAME", ")", ";", "mAccountKey", "=", "c", ".", "getLong", "(", "COLUMN_ACCOUNT_KEY", ")", ";", "mType", "=", "c", ".", "getInt", "(", "COLUMN_TYPE", ")", ";", "}", "</s>"]
["<s>", "public", "void", "listFolders", "(", "final", "long", "accountId", ",", "MessagingListener", "listener", ")", "{", "final", "EmailContent", ".", "Account", "account", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mContext", ",", "accountId", ")", ";", "if", "(", "account", "=", "=", "null", ")", "{", "return", ";", "}", "mListeners", ".", "listFoldersStarted", "(", "accountId", ")", ";", "put", "(", "\"", "<STR_LIT>", "\"", ",", "listener", ",", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "Cursor", "localFolderCursor", "=", "null", ";", "try", "{", "Store", "store", "=", "Store", ".", "getInstance", "(", "account", ".", "getStoreUri", "(", "mContext", ")", ",", "mContext", ",", "null", ")", ";", "Folder", "[", "]", "remoteFolders", "=", "store", ".", "getPersonalNamespaces", "(", ")", ";", "HashSet", "<", "String", ">", "remoteFolderNames", "=", "new", "HashSet", "<", "String", ">", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "remoteFolders", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "remoteFolderNames", ".", "add", "(", "remoteFolders", "[", "i", "]", ".", "getName", "(", ")", ")", ";", "}", "HashMap", "<", "String", ",", "LocalMailboxInfo", ">", "localFolders", "=", "new", "HashMap", "<", "String", ",", "LocalMailboxInfo", ">", "(", ")", ";", "HashSet", "<", "String", ">", "localFolderNames", "=", "new", "HashSet", "<", "String", ">", "(", ")", ";", "localFolderCursor", "=", "mContext", ".", "getContentResolver", "(", ")", ".", "query", "(", "EmailContent", ".", "Mailbox", ".", "CONTENT_URI", ",", "LocalMailboxInfo", ".", "PROJECTION", ",", "EmailContent", ".", "MailboxColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "account", ".", "mId", ")", "}", ",", "null", ")", ";", "while", "(", "localFolderCursor", ".", "moveToNext", "(", ")", ")", "{", "LocalMailboxInfo", "info", "=", "new", "LocalMailboxInfo", "(", "localFolderCursor", ")", ";", "localFolders", ".", "put", "(", "info", ".", "mDisplayName", ",", "info", ")", ";", "localFolderNames", ".", "add", "(", "info", ".", "mDisplayName", ")", ";", "}", "if", "(", "!", "remoteFolderNames", ".", "equals", "(", "localFolderNames", ")", ")", "{", "HashSet", "<", "String", ">", "localsToDrop", "=", "new", "HashSet", "<", "String", ">", "(", "localFolderNames", ")", ";", "localsToDrop", ".", "removeAll", "(", "remoteFolderNames", ")", ";", "for", "(", "String", "localNameToDrop", ":", "localsToDrop", ")", "{", "LocalMailboxInfo", "localInfo", "=", "localFolders", ".", "get", "(", "localNameToDrop", ")", ";", "switch", "(", "localInfo", ".", "mType", ")", "{", "case", "Mailbox", ".", "TYPE_INBOX", ":", "case", "Mailbox", ".", "TYPE_DRAFTS", ":", "case", "Mailbox", ".", "TYPE_OUTBOX", ":", "case", "Mailbox", ".", "TYPE_SENT", ":", "case", "Mailbox", ".", "TYPE_TRASH", ":", "break", ";", "default", ":", "AttachmentProvider", ".", "deleteAllMailboxAttachmentFiles", "(", "mContext", ",", "accountId", ",", "localInfo", ".", "mId", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Mailbox", ".", "CONTENT_URI", ",", "localInfo", ".", "mId", ")", ";", "mContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "break", ";", "}", "}", "remoteFolderNames", ".", "removeAll", "(", "localFolderNames", ")", ";", "for", "(", "String", "remoteNameToAdd", ":", "remoteFolderNames", ")", "{", "EmailContent", ".", "Mailbox", "box", "=", "new", "EmailContent", ".", "Mailbox", "(", ")", ";", "box", ".", "mDisplayName", "=", "remoteNameToAdd", ";", "box", ".", "mAccountKey", "=", "account", ".", "mId", ";", "box", ".", "mType", "=", "inferMailboxTypeFromName", "(", "account", ",", "remoteNameToAdd", ")", ";", "box", ".", "mFlagVisible", "=", "true", ";", "box", ".", "mVisibleLimit", "=", "Email", ".", "VISIBLE_LIMIT_DEFAULT", ";", "box", ".", "save", "(", "mContext", ")", ";", "}", "}", "mListeners", ".", "listFoldersFinished", "(", "accountId", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "mListeners", ".", "listFoldersFailed", "(", "accountId", ",", "\"", "\"", ")", ";", "}", "finally", "{", "if", "(", "localFolderCursor", "!", "=", "null", ")", "{", "localFolderCursor", ".", "close", "(", ")", ";", "}", "}", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "Cursor", "localFolderCursor", "=", "null", ";", "try", "{", "Store", "store", "=", "Store", ".", "getInstance", "(", "account", ".", "getStoreUri", "(", "mContext", ")", ",", "mContext", ",", "null", ")", ";", "Folder", "[", "]", "remoteFolders", "=", "store", ".", "getPersonalNamespaces", "(", ")", ";", "HashSet", "<", "String", ">", "remoteFolderNames", "=", "new", "HashSet", "<", "String", ">", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "remoteFolders", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "remoteFolderNames", ".", "add", "(", "remoteFolders", "[", "i", "]", ".", "getName", "(", ")", ")", ";", "}", "HashMap", "<", "String", ",", "LocalMailboxInfo", ">", "localFolders", "=", "new", "HashMap", "<", "String", ",", "LocalMailboxInfo", ">", "(", ")", ";", "HashSet", "<", "String", ">", "localFolderNames", "=", "new", "HashSet", "<", "String", ">", "(", ")", ";", "localFolderCursor", "=", "mContext", ".", "getContentResolver", "(", ")", ".", "query", "(", "EmailContent", ".", "Mailbox", ".", "CONTENT_URI", ",", "LocalMailboxInfo", ".", "PROJECTION", ",", "EmailContent", ".", "MailboxColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "account", ".", "mId", ")", "}", ",", "null", ")", ";", "while", "(", "localFolderCursor", ".", "moveToNext", "(", ")", ")", "{", "LocalMailboxInfo", "info", "=", "new", "LocalMailboxInfo", "(", "localFolderCursor", ")", ";", "localFolders", ".", "put", "(", "info", ".", "mDisplayName", ",", "info", ")", ";", "localFolderNames", ".", "add", "(", "info", ".", "mDisplayName", ")", ";", "}", "if", "(", "!", "remoteFolderNames", ".", "equals", "(", "localFolderNames", ")", ")", "{", "HashSet", "<", "String", ">", "localsToDrop", "=", "new", "HashSet", "<", "String", ">", "(", "localFolderNames", ")", ";", "localsToDrop", ".", "removeAll", "(", "remoteFolderNames", ")", ";", "for", "(", "String", "localNameToDrop", ":", "localsToDrop", ")", "{", "LocalMailboxInfo", "localInfo", "=", "localFolders", ".", "get", "(", "localNameToDrop", ")", ";", "switch", "(", "localInfo", ".", "mType", ")", "{", "case", "Mailbox", ".", "TYPE_INBOX", ":", "case", "Mailbox", ".", "TYPE_DRAFTS", ":", "case", "Mailbox", ".", "TYPE_OUTBOX", ":", "case", "Mailbox", ".", "TYPE_SENT", ":", "case", "Mailbox", ".", "TYPE_TRASH", ":", "break", ";", "default", ":", "AttachmentProvider", ".", "deleteAllMailboxAttachmentFiles", "(", "mContext", ",", "accountId", ",", "localInfo", ".", "mId", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Mailbox", ".", "CONTENT_URI", ",", "localInfo", ".", "mId", ")", ";", "mContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "break", ";", "}", "}", "remoteFolderNames", ".", "removeAll", "(", "localFolderNames", ")", ";", "for", "(", "String", "remoteNameToAdd", ":", "remoteFolderNames", ")", "{", "EmailContent", ".", "Mailbox", "box", "=", "new", "EmailContent", ".", "Mailbox", "(", ")", ";", "box", ".", "mDisplayName", "=", "remoteNameToAdd", ";", "box", ".", "mAccountKey", "=", "account", ".", "mId", ";", "box", ".", "mType", "=", "inferMailboxTypeFromName", "(", "account", ",", "remoteNameToAdd", ")", ";", "box", ".", "mFlagVisible", "=", "true", ";", "box", ".", "mVisibleLimit", "=", "Email", ".", "VISIBLE_LIMIT_DEFAULT", ";", "box", ".", "save", "(", "mContext", ")", ";", "}", "}", "mListeners", ".", "listFoldersFinished", "(", "accountId", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "mListeners", ".", "listFoldersFailed", "(", "accountId", ",", "\"", "\"", ")", ";", "}", "finally", "{", "if", "(", "localFolderCursor", "!", "=", "null", ")", "{", "localFolderCursor", ".", "close", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "int", "inferMailboxTypeFromName", "(", "EmailContent", ".", "Account", "account", ",", "String", "mailboxName", ")", "{", "if", "(", "mailboxName", "=", "=", "null", "|", "|", "mailboxName", ".", "length", "(", ")", "=", "=", "0", ")", "{", "return", "EmailContent", ".", "Mailbox", ".", "TYPE_MAIL", ";", "}", "String", "lowerCaseName", "=", "mailboxName", ".", "toLowerCase", "(", ")", ";", "Integer", "type", "=", "mServerMailboxNames", ".", "get", "(", "lowerCaseName", ")", ";", "if", "(", "type", "!", "=", "null", ")", "{", "return", "type", ";", "}", "return", "EmailContent", ".", "Mailbox", ".", "TYPE_MAIL", ";", "}", "</s>"]
["<s>", "public", "void", "synchronizeMailbox", "(", "final", "EmailContent", ".", "Account", "account", ",", "final", "EmailContent", ".", "Mailbox", "folder", ",", "MessagingListener", "listener", ")", "{", "if", "(", "folder", ".", "mType", "=", "=", "EmailContent", ".", "Mailbox", ".", "TYPE_OUTBOX", ")", "{", "return", ";", "}", "mListeners", ".", "synchronizeMailboxStarted", "(", "account", ".", "mId", ",", "folder", ".", "mId", ")", ";", "put", "(", "\"", "<STR_LIT>", "\"", ",", "listener", ",", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "synchronizeMailboxSynchronous", "(", "account", ",", "folder", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "synchronizeMailboxSynchronous", "(", "account", ",", "folder", ")", ";", "}", "</s>"]
["<s>", "private", "void", "synchronizeMailboxSynchronous", "(", "final", "EmailContent", ".", "Account", "account", ",", "final", "EmailContent", ".", "Mailbox", "folder", ")", "{", "mListeners", ".", "synchronizeMailboxStarted", "(", "account", ".", "mId", ",", "folder", ".", "mId", ")", ";", "try", "{", "processPendingActionsSynchronous", "(", "account", ")", ";", "StoreSynchronizer", ".", "SyncResults", "results", ";", "Store", "remoteStore", "=", "Store", ".", "getInstance", "(", "account", ".", "getStoreUri", "(", "mContext", ")", ",", "mContext", ",", "null", ")", ";", "StoreSynchronizer", "customSync", "=", "remoteStore", ".", "getMessageSynchronizer", "(", ")", ";", "if", "(", "customSync", "=", "=", "null", ")", "{", "results", "=", "synchronizeMailboxGeneric", "(", "account", ",", "folder", ")", ";", "}", "else", "{", "results", "=", "customSync", ".", "SynchronizeMessagesSynchronous", "(", "account", ",", "folder", ",", "mListeners", ",", "mContext", ")", ";", "}", "mListeners", ".", "synchronizeMailboxFinished", "(", "account", ".", "mId", ",", "folder", ".", "mId", ",", "results", ".", "mTotalMessages", ",", "results", ".", "mNewMessages", ")", ";", "}", "catch", "(", "MessagingException", "e", ")", "{", "if", "(", "Email", ".", "LOGD", ")", "{", "Log", ".", "v", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "mListeners", ".", "synchronizeMailboxFailed", "(", "account", ".", "mId", ",", "folder", ".", "mId", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "LocalMessageInfo", "(", "Cursor", "c", ")", "{", "mCursorIndex", "=", "c", ".", "getPosition", "(", ")", ";", "mId", "=", "c", ".", "getLong", "(", "COLUMN_ID", ")", ";", "mFlagRead", "=", "c", ".", "getInt", "(", "COLUMN_FLAG_READ", ")", "!", "=", "0", ";", "mFlagFavorite", "=", "c", ".", "getInt", "(", "COLUMN_FLAG_FAVORITE", ")", "!", "=", "0", ";", "mFlagLoaded", "=", "c", ".", "getInt", "(", "COLUMN_FLAG_LOADED", ")", ";", "mServerId", "=", "c", ".", "getString", "(", "COLUMN_SERVER_ID", ")", ";", "}", "</s>"]
["<s>", "private", "void", "saveOrUpdate", "(", "EmailContent", "content", ")", "{", "if", "(", "content", ".", "isSaved", "(", ")", ")", "{", "content", ".", "update", "(", "mContext", ",", "content", ".", "toContentValues", "(", ")", ")", ";", "}", "else", "{", "content", ".", "save", "(", "mContext", ")", ";", "}", "}", "</s>"]
["<s>", "private", "StoreSynchronizer", ".", "SyncResults", "synchronizeMailboxGeneric", "(", "final", "EmailContent", ".", "Account", "account", ",", "final", "EmailContent", ".", "Mailbox", "folder", ")", "throws", "MessagingException", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ContentResolver", "resolver", "=", "mContext", ".", "getContentResolver", "(", ")", ";", "if", "(", "folder", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_DRAFTS", "|", "|", "folder", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_OUTBOX", ")", "{", "int", "totalMessages", "=", "EmailContent", ".", "count", "(", "mContext", ",", "folder", ".", "getUri", "(", ")", ",", "null", ",", "null", ")", ";", "return", "new", "StoreSynchronizer", ".", "SyncResults", "(", "totalMessages", ",", "0", ")", ";", "}", "Cursor", "localUidCursor", "=", "null", ";", "HashMap", "<", "String", ",", "LocalMessageInfo", ">", "localMessageMap", "=", "new", "HashMap", "<", "String", ",", "LocalMessageInfo", ">", "(", ")", ";", "try", "{", "localUidCursor", "=", "resolver", ".", "query", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "LocalMessageInfo", ".", "PROJECTION", ",", "EmailContent", ".", "MessageColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "account", ".", "mId", ")", ",", "String", ".", "valueOf", "(", "folder", ".", "mId", ")", "}", ",", "null", ")", ";", "while", "(", "localUidCursor", ".", "moveToNext", "(", ")", ")", "{", "LocalMessageInfo", "info", "=", "new", "LocalMessageInfo", "(", "localUidCursor", ")", ";", "localMessageMap", ".", "put", "(", "info", ".", "mServerId", ",", "info", ")", ";", "}", "}", "finally", "{", "if", "(", "localUidCursor", "!", "=", "null", ")", "{", "localUidCursor", ".", "close", "(", ")", ";", "}", "}", "int", "localUnreadCount", "=", "EmailContent", ".", "count", "(", "mContext", ",", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "EmailContent", ".", "MessageColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "FLAG_READ", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "account", ".", "mId", ")", ",", "String", ".", "valueOf", "(", "folder", ".", "mId", ")", "}", ")", ";", "Store", "remoteStore", "=", "Store", ".", "getInstance", "(", "account", ".", "getStoreUri", "(", "mContext", ")", ",", "mContext", ",", "null", ")", ";", "Folder", "remoteFolder", "=", "remoteStore", ".", "getFolder", "(", "folder", ".", "mDisplayName", ")", ";", "if", "(", "folder", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_TRASH", "|", "|", "folder", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_SENT", "|", "|", "folder", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_DRAFTS", ")", "{", "if", "(", "!", "remoteFolder", ".", "exists", "(", ")", ")", "{", "if", "(", "!", "remoteFolder", ".", "create", "(", "FolderType", ".", "HOLDS_MESSAGES", ")", ")", "{", "return", "new", "StoreSynchronizer", ".", "SyncResults", "(", "0", ",", "0", ")", ";", "}", "}", "}", "remoteFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "int", "remoteMessageCount", "=", "remoteFolder", ".", "getMessageCount", "(", ")", ";", "int", "visibleLimit", "=", "folder", ".", "mVisibleLimit", ";", "if", "(", "visibleLimit", "<", "=", "0", ")", "{", "Store", ".", "StoreInfo", "info", "=", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "account", ".", "getStoreUri", "(", "mContext", ")", ",", "mContext", ")", ";", "visibleLimit", "=", "info", ".", "mVisibleLimitDefault", ";", "}", "Message", "[", "]", "remoteMessages", "=", "new", "Message", "[", "0", "]", ";", "final", "ArrayList", "<", "Message", ">", "unsyncedMessages", "=", "new", "ArrayList", "<", "Message", ">", "(", ")", ";", "HashMap", "<", "String", ",", "Message", ">", "remoteUidMap", "=", "new", "HashMap", "<", "String", ",", "Message", ">", "(", ")", ";", "int", "newMessageCount", "=", "0", ";", "if", "(", "remoteMessageCount", ">", "0", ")", "{", "int", "remoteStart", "=", "Math", ".", "max", "(", "0", ",", "remoteMessageCount", "-", "visibleLimit", ")", "+", "1", ";", "int", "remoteEnd", "=", "remoteMessageCount", ";", "remoteMessages", "=", "remoteFolder", ".", "getMessages", "(", "remoteStart", ",", "remoteEnd", ",", "null", ")", ";", "for", "(", "Message", "message", ":", "remoteMessages", ")", "{", "remoteUidMap", ".", "put", "(", "message", ".", "getUid", "(", ")", ",", "message", ")", ";", "}", "for", "(", "Message", "message", ":", "remoteMessages", ")", "{", "LocalMessageInfo", "localMessage", "=", "localMessageMap", ".", "get", "(", "message", ".", "getUid", "(", ")", ")", ";", "if", "(", "localMessage", "=", "=", "null", ")", "{", "newMessageCount", "+", "+", ";", "}", "if", "(", "localMessage", "=", "=", "null", "|", "|", "(", "localMessage", ".", "mFlagLoaded", "=", "=", "EmailContent", ".", "Message", ".", "FLAG_LOADED_UNLOADED", ")", "|", "|", "(", "localMessage", ".", "mFlagLoaded", "=", "=", "EmailContent", ".", "Message", ".", "FLAG_LOADED_PARTIAL", ")", ")", "{", "unsyncedMessages", ".", "add", "(", "message", ")", ";", "}", "}", "}", "final", "ArrayList", "<", "Message", ">", "newMessages", "=", "new", "ArrayList", "<", "Message", ">", "(", ")", ";", "if", "(", "unsyncedMessages", ".", "size", "(", ")", ">", "0", ")", "{", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "FLAGS", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ";", "final", "HashMap", "<", "String", ",", "LocalMessageInfo", ">", "localMapCopy", "=", "new", "HashMap", "<", "String", ",", "LocalMessageInfo", ">", "(", "localMessageMap", ")", ";", "remoteFolder", ".", "fetch", "(", "unsyncedMessages", ".", "toArray", "(", "new", "Message", "[", "0", "]", ")", ",", "fp", ",", "new", "MessageRetrievalListener", "(", ")", "{", "public", "void", "messageFinished", "(", "Message", "message", ",", "int", "number", ",", "int", "ofTotal", ")", "{", "try", "{", "LocalMessageInfo", "localMessageInfo", "=", "localMapCopy", ".", "get", "(", "message", ".", "getUid", "(", ")", ")", ";", "EmailContent", ".", "Message", "localMessage", "=", "null", ";", "if", "(", "localMessageInfo", "=", "=", "null", ")", "{", "localMessage", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "}", "else", "{", "localMessage", "=", "EmailContent", ".", "Message", ".", "restoreMessageWithId", "(", "mContext", ",", "localMessageInfo", ".", "mId", ")", ";", "}", "if", "(", "localMessage", "!", "=", "null", ")", "{", "try", "{", "LegacyConversions", ".", "updateMessageFields", "(", "localMessage", ",", "message", ",", "account", ".", "mId", ",", "folder", ".", "mId", ")", ";", "saveOrUpdate", "(", "localMessage", ")", ";", "if", "(", "!", "message", ".", "isSet", "(", "Flag", ".", "SEEN", ")", ")", "{", "newMessages", ".", "add", "(", "message", ")", ";", "}", "}", "catch", "(", "MessagingException", "me", ")", "{", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "me", ")", ";", "}", "}", "}", "catch", "(", "Exception", "e", ")", "{", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "e", ".", "toString", "(", ")", ")", ";", "}", "}", "public", "void", "messageStarted", "(", "String", "uid", ",", "int", "number", ",", "int", "ofTotal", ")", "{", "}", "}", ")", ";", "}", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "FLAGS", ")", ";", "remoteFolder", ".", "fetch", "(", "remoteMessages", ",", "fp", ",", "null", ")", ";", "boolean", "remoteSupportsSeen", "=", "false", ";", "boolean", "remoteSupportsFlagged", "=", "false", ";", "for", "(", "Flag", "flag", ":", "remoteFolder", ".", "getPermanentFlags", "(", ")", ")", "{", "if", "(", "flag", "=", "=", "Flag", ".", "SEEN", ")", "{", "remoteSupportsSeen", "=", "true", ";", "}", "if", "(", "flag", "=", "=", "Flag", ".", "FLAGGED", ")", "{", "remoteSupportsFlagged", "=", "true", ";", "}", "}", "if", "(", "remoteSupportsSeen", "|", "|", "remoteSupportsFlagged", ")", "{", "for", "(", "Message", "remoteMessage", ":", "remoteMessages", ")", "{", "LocalMessageInfo", "localMessageInfo", "=", "localMessageMap", ".", "get", "(", "remoteMessage", ".", "getUid", "(", ")", ")", ";", "if", "(", "localMessageInfo", "=", "=", "null", ")", "{", "continue", ";", "}", "boolean", "localSeen", "=", "localMessageInfo", ".", "mFlagRead", ";", "boolean", "remoteSeen", "=", "remoteMessage", ".", "isSet", "(", "Flag", ".", "SEEN", ")", ";", "boolean", "newSeen", "=", "(", "remoteSupportsSeen", "&", "&", "(", "remoteSeen", "!", "=", "localSeen", ")", ")", ";", "boolean", "localFlagged", "=", "localMessageInfo", ".", "mFlagFavorite", ";", "boolean", "remoteFlagged", "=", "remoteMessage", ".", "isSet", "(", "Flag", ".", "FLAGGED", ")", ";", "boolean", "newFlagged", "=", "(", "remoteSupportsFlagged", "&", "&", "(", "localFlagged", "!", "=", "remoteFlagged", ")", ")", ";", "if", "(", "newSeen", "|", "|", "newFlagged", ")", "{", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "localMessageInfo", ".", "mId", ")", ";", "ContentValues", "updateValues", "=", "new", "ContentValues", "(", ")", ";", "updateValues", ".", "put", "(", "EmailContent", ".", "Message", ".", "FLAG_READ", ",", "remoteSeen", ")", ";", "updateValues", ".", "put", "(", "EmailContent", ".", "Message", ".", "FLAG_FAVORITE", ",", "remoteFlagged", ")", ";", "resolver", ".", "update", "(", "uri", ",", "updateValues", ",", "null", ",", "null", ")", ";", "}", "}", "}", "HashSet", "<", "String", ">", "localUidsToDelete", "=", "new", "HashSet", "<", "String", ">", "(", "localMessageMap", ".", "keySet", "(", ")", ")", ";", "localUidsToDelete", ".", "removeAll", "(", "remoteUidMap", ".", "keySet", "(", ")", ")", ";", "for", "(", "String", "uidToDelete", ":", "localUidsToDelete", ")", "{", "LocalMessageInfo", "infoToDelete", "=", "localMessageMap", ".", "get", "(", "uidToDelete", ")", ";", "AttachmentProvider", ".", "deleteAllAttachmentFiles", "(", "mContext", ",", "account", ".", "mId", ",", "infoToDelete", ".", "mId", ")", ";", "Uri", "uriToDelete", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "infoToDelete", ".", "mId", ")", ";", "resolver", ".", "delete", "(", "uriToDelete", ",", "null", ",", "null", ")", ";", "Uri", "syncRowToDelete", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "UPDATED_CONTENT_URI", ",", "infoToDelete", ".", "mId", ")", ";", "resolver", ".", "delete", "(", "syncRowToDelete", ",", "null", ",", "null", ")", ";", "Uri", "deletERowToDelete", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "UPDATED_CONTENT_URI", ",", "infoToDelete", ".", "mId", ")", ";", "resolver", ".", "delete", "(", "deletERowToDelete", ",", "null", ",", "null", ")", ";", "}", "ArrayList", "<", "Message", ">", "largeMessages", "=", "new", "ArrayList", "<", "Message", ">", "(", ")", ";", "ArrayList", "<", "Message", ">", "smallMessages", "=", "new", "ArrayList", "<", "Message", ">", "(", ")", ";", "for", "(", "Message", "message", ":", "unsyncedMessages", ")", "{", "if", "(", "message", ".", "getSize", "(", ")", ">", "(", "MAX_SMALL_MESSAGE_SIZE", ")", ")", "{", "largeMessages", ".", "add", "(", "message", ")", ";", "}", "else", "{", "smallMessages", ".", "add", "(", "message", ")", ";", "}", "}", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ";", "remoteFolder", ".", "fetch", "(", "smallMessages", ".", "toArray", "(", "new", "Message", "[", "smallMessages", ".", "size", "(", ")", "]", ")", ",", "fp", ",", "new", "MessageRetrievalListener", "(", ")", "{", "public", "void", "messageFinished", "(", "Message", "message", ",", "int", "number", ",", "int", "ofTotal", ")", "{", "copyOneMessageToProvider", "(", "message", ",", "account", ",", "folder", ",", "EmailContent", ".", "Message", ".", "FLAG_LOADED_COMPLETE", ")", ";", "}", "public", "void", "messageStarted", "(", "String", "uid", ",", "int", "number", ",", "int", "ofTotal", ")", "{", "}", "}", ")", ";", "fp", ".", "clear", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "STRUCTURE", ")", ";", "remoteFolder", ".", "fetch", "(", "largeMessages", ".", "toArray", "(", "new", "Message", "[", "largeMessages", ".", "size", "(", ")", "]", ")", ",", "fp", ",", "null", ")", ";", "for", "(", "Message", "message", ":", "largeMessages", ")", "{", "if", "(", "message", ".", "getBody", "(", ")", "=", "=", "null", ")", "{", "fp", ".", "clear", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "BODY_SANE", ")", ";", "remoteFolder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "message", "}", ",", "fp", ",", "null", ")", ";", "copyOneMessageToProvider", "(", "message", ",", "account", ",", "folder", ",", "EmailContent", ".", "Message", ".", "FLAG_LOADED_PARTIAL", ")", ";", "}", "else", "{", "ArrayList", "<", "Part", ">", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "ArrayList", "<", "Part", ">", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "message", ",", "viewables", ",", "attachments", ")", ";", "for", "(", "Part", "part", ":", "viewables", ")", "{", "fp", ".", "clear", "(", ")", ";", "fp", ".", "add", "(", "part", ")", ";", "remoteFolder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "message", "}", ",", "fp", ",", "null", ")", ";", "}", "copyOneMessageToProvider", "(", "message", ",", "account", ",", "folder", ",", "EmailContent", ".", "Message", ".", "FLAG_LOADED_COMPLETE", ")", ";", "}", "}", "remoteFolder", ".", "close", "(", "false", ")", ";", "if", "(", "false", ")", "{", "fp", ".", "clear", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "STRUCTURE", ")", ";", "remoteFolder", ".", "fetch", "(", "largeMessages", ".", "toArray", "(", "new", "Message", "[", "largeMessages", ".", "size", "(", ")", "]", ")", ",", "fp", ",", "null", ")", ";", "for", "(", "Message", "message", ":", "largeMessages", ")", "{", "if", "(", "message", ".", "getBody", "(", ")", "=", "=", "null", ")", "{", "fp", ".", "clear", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "BODY_SANE", ")", ";", "remoteFolder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "message", "}", ",", "fp", ",", "null", ")", ";", "}", "else", "{", "ArrayList", "<", "Part", ">", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "ArrayList", "<", "Part", ">", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "message", ",", "viewables", ",", "attachments", ")", ";", "for", "(", "Part", "part", ":", "viewables", ")", "{", "fp", ".", "clear", "(", ")", ";", "fp", ".", "add", "(", "part", ")", ";", "remoteFolder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "message", "}", ",", "fp", ",", "null", ")", ";", "}", "}", "}", "StoreSynchronizer", ".", "SyncResults", "results", "=", "new", "StoreSynchronizer", ".", "SyncResults", "(", "remoteFolder", ".", "getMessageCount", "(", ")", ",", "newMessages", ".", "size", "(", ")", ")", ";", "remoteFolder", ".", "close", "(", "false", ")", ";", "return", "results", ";", "}", "return", "new", "StoreSynchronizer", ".", "SyncResults", "(", "remoteMessageCount", ",", "newMessages", ".", "size", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "messageFinished", "(", "Message", "message", ",", "int", "number", ",", "int", "ofTotal", ")", "{", "try", "{", "LocalMessageInfo", "localMessageInfo", "=", "localMapCopy", ".", "get", "(", "message", ".", "getUid", "(", ")", ")", ";", "EmailContent", ".", "Message", "localMessage", "=", "null", ";", "if", "(", "localMessageInfo", "=", "=", "null", ")", "{", "localMessage", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "}", "else", "{", "localMessage", "=", "EmailContent", ".", "Message", ".", "restoreMessageWithId", "(", "mContext", ",", "localMessageInfo", ".", "mId", ")", ";", "}", "if", "(", "localMessage", "!", "=", "null", ")", "{", "try", "{", "LegacyConversions", ".", "updateMessageFields", "(", "localMessage", ",", "message", ",", "account", ".", "mId", ",", "folder", ".", "mId", ")", ";", "saveOrUpdate", "(", "localMessage", ")", ";", "if", "(", "!", "message", ".", "isSet", "(", "Flag", ".", "SEEN", ")", ")", "{", "newMessages", ".", "add", "(", "message", ")", ";", "}", "}", "catch", "(", "MessagingException", "me", ")", "{", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "me", ")", ";", "}", "}", "}", "catch", "(", "Exception", "e", ")", "{", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "e", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "messageStarted", "(", "String", "uid", ",", "int", "number", ",", "int", "ofTotal", ")", "{", "}", "</s>"]
["<s>", "public", "void", "messageFinished", "(", "Message", "message", ",", "int", "number", ",", "int", "ofTotal", ")", "{", "copyOneMessageToProvider", "(", "message", ",", "account", ",", "folder", ",", "EmailContent", ".", "Message", ".", "FLAG_LOADED_COMPLETE", ")", ";", "}", "</s>"]
["<s>", "public", "void", "messageStarted", "(", "String", "uid", ",", "int", "number", ",", "int", "ofTotal", ")", "{", "}", "</s>"]
["<s>", "private", "void", "copyOneMessageToProvider", "(", "Message", "message", ",", "EmailContent", ".", "Account", "account", ",", "EmailContent", ".", "Mailbox", "folder", ",", "int", "loadStatus", ")", "{", "try", "{", "EmailContent", ".", "Message", "localMessage", "=", "null", ";", "Cursor", "c", "=", "null", ";", "try", "{", "c", "=", "mContext", ".", "getContentResolver", "(", ")", ".", "query", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "EmailContent", ".", "Message", ".", "CONTENT_PROJECTION", ",", "EmailContent", ".", "MessageColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "SyncColumns", ".", "SERVER_ID", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "account", ".", "mId", ")", ",", "String", ".", "valueOf", "(", "folder", ".", "mId", ")", ",", "String", ".", "valueOf", "(", "message", ".", "getUid", "(", ")", ")", "}", ",", "null", ")", ";", "if", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "localMessage", "=", "EmailContent", ".", "getContent", "(", "c", ",", "EmailContent", ".", "Message", ".", "class", ")", ";", "}", "}", "finally", "{", "if", "(", "c", "!", "=", "null", ")", "{", "c", ".", "close", "(", ")", ";", "}", "}", "if", "(", "localMessage", "=", "=", "null", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "message", ".", "getUid", "(", ")", ")", ";", "return", ";", "}", "EmailContent", ".", "Body", "body", "=", "EmailContent", ".", "Body", ".", "restoreBodyWithMessageId", "(", "mContext", ",", "localMessage", ".", "mId", ")", ";", "if", "(", "body", "=", "=", "null", ")", "{", "body", "=", "new", "EmailContent", ".", "Body", "(", ")", ";", "}", "try", "{", "LegacyConversions", ".", "updateMessageFields", "(", "localMessage", ",", "message", ",", "account", ".", "mId", ",", "folder", ".", "mId", ")", ";", "ArrayList", "<", "Part", ">", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "ArrayList", "<", "Part", ">", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "message", ",", "viewables", ",", "attachments", ")", ";", "LegacyConversions", ".", "updateBodyFields", "(", "body", ",", "localMessage", ",", "viewables", ")", ";", "saveOrUpdate", "(", "localMessage", ")", ";", "saveOrUpdate", "(", "body", ")", ";", "LegacyConversions", ".", "updateAttachments", "(", "mContext", ",", "localMessage", ",", "attachments", ")", ";", "localMessage", ".", "mFlagLoaded", "=", "loadStatus", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "MessageColumns", ".", "FLAG_ATTACHMENT", ",", "localMessage", ".", "mFlagAttachment", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "MessageColumns", ".", "FLAG_LOADED", ",", "localMessage", ".", "mFlagLoaded", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "localMessage", ".", "mId", ")", ";", "mContext", ".", "getContentResolver", "(", ")", ".", "update", "(", "uri", ",", "cv", ",", "null", ",", "null", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "me", ")", ";", "}", "}", "catch", "(", "RuntimeException", "rte", ")", "{", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "rte", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "ioe", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "processPendingActions", "(", "final", "long", "accountId", ")", "{", "put", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "try", "{", "EmailContent", ".", "Account", "account", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mContext", ",", "accountId", ")", ";", "if", "(", "account", "=", "=", "null", ")", "{", "return", ";", "}", "processPendingActionsSynchronous", "(", "account", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "Email", ".", "LOGD", ")", "{", "Log", ".", "v", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ",", "me", ")", ";", "}", "}", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "try", "{", "EmailContent", ".", "Account", "account", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mContext", ",", "accountId", ")", ";", "if", "(", "account", "=", "=", "null", ")", "{", "return", ";", "}", "processPendingActionsSynchronous", "(", "account", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "Email", ".", "LOGD", ")", "{", "Log", ".", "v", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ",", "me", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "processPendingActionsSynchronous", "(", "EmailContent", ".", "Account", "account", ")", "throws", "MessagingException", "{", "ContentResolver", "resolver", "=", "mContext", ".", "getContentResolver", "(", ")", ";", "String", "[", "]", "accountIdArgs", "=", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "account", ".", "mId", ")", "}", ";", "processPendingDeletesSynchronous", "(", "account", ",", "resolver", ",", "accountIdArgs", ")", ";", "processPendingUploadsSynchronous", "(", "account", ",", "resolver", ",", "accountIdArgs", ")", ";", "processPendingUpdatesSynchronous", "(", "account", ",", "resolver", ",", "accountIdArgs", ")", ";", "}", "</s>"]
["<s>", "private", "void", "processPendingDeletesSynchronous", "(", "EmailContent", ".", "Account", "account", ",", "ContentResolver", "resolver", ",", "String", "[", "]", "accountIdArgs", ")", "{", "Cursor", "deletes", "=", "resolver", ".", "query", "(", "EmailContent", ".", "Message", ".", "DELETED_CONTENT_URI", ",", "EmailContent", ".", "Message", ".", "CONTENT_PROJECTION", ",", "EmailContent", ".", "MessageColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "accountIdArgs", ",", "EmailContent", ".", "MessageColumns", ".", "MAILBOX_KEY", ")", ";", "long", "lastMessageId", "=", "-", "1", ";", "try", "{", "Store", "remoteStore", "=", "null", ";", "Mailbox", "mailbox", "=", "null", ";", "while", "(", "deletes", ".", "moveToNext", "(", ")", ")", "{", "boolean", "deleteFromTrash", "=", "false", ";", "EmailContent", ".", "Message", "oldMessage", "=", "EmailContent", ".", "getContent", "(", "deletes", ",", "EmailContent", ".", "Message", ".", "class", ")", ";", "lastMessageId", "=", "oldMessage", ".", "mId", ";", "if", "(", "oldMessage", "!", "=", "null", ")", "{", "if", "(", "mailbox", "=", "=", "null", "|", "|", "mailbox", ".", "mId", "!", "=", "oldMessage", ".", "mMailboxKey", ")", "{", "mailbox", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "mContext", ",", "oldMessage", ".", "mMailboxKey", ")", ";", "}", "deleteFromTrash", "=", "mailbox", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_TRASH", ";", "}", "if", "(", "remoteStore", "=", "=", "null", "&", "&", "deleteFromTrash", ")", "{", "remoteStore", "=", "Store", ".", "getInstance", "(", "account", ".", "getStoreUri", "(", "mContext", ")", ",", "mContext", ",", "null", ")", ";", "}", "if", "(", "deleteFromTrash", ")", "{", "processPendingDeleteFromTrash", "(", "remoteStore", ",", "account", ",", "mailbox", ",", "oldMessage", ")", ";", "}", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "DELETED_CONTENT_URI", ",", "oldMessage", ".", "mId", ")", ";", "resolver", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "}", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "lastMessageId", "+", "\"", "<STR_LIT>", "\"", "+", "me", ")", ";", "}", "}", "finally", "{", "deletes", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "processPendingUploadsSynchronous", "(", "EmailContent", ".", "Account", "account", ",", "ContentResolver", "resolver", ",", "String", "[", "]", "accountIdArgs", ")", "throws", "MessagingException", "{", "Cursor", "mailboxes", "=", "resolver", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "Mailbox", ".", "ID_PROJECTION", ",", "MailboxColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "TYPE", "+", "\"", "<STR_LIT:=>", "\"", "+", "Mailbox", ".", "TYPE_SENT", ",", "accountIdArgs", ",", "null", ")", ";", "long", "lastMessageId", "=", "-", "1", ";", "try", "{", "Store", "remoteStore", "=", "null", ";", "while", "(", "mailboxes", ".", "moveToNext", "(", ")", ")", "{", "long", "mailboxId", "=", "mailboxes", ".", "getLong", "(", "Mailbox", ".", "ID_PROJECTION_COLUMN", ")", ";", "String", "[", "]", "mailboxKeyArgs", "=", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mailboxId", ")", "}", ";", "Mailbox", "mailbox", "=", "null", ";", "Cursor", "upsyncs1", "=", "resolver", ".", "query", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "EmailContent", ".", "Message", ".", "ID_PROJECTION", ",", "EmailContent", ".", "Message", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "Message", ".", "SERVER_ID", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "Message", ".", "SERVER_ID", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ",", "mailboxKeyArgs", ",", "null", ")", ";", "try", "{", "while", "(", "upsyncs1", ".", "moveToNext", "(", ")", ")", "{", "if", "(", "remoteStore", "=", "=", "null", ")", "{", "remoteStore", "=", "Store", ".", "getInstance", "(", "account", ".", "getStoreUri", "(", "mContext", ")", ",", "mContext", ",", "null", ")", ";", "}", "if", "(", "mailbox", "=", "=", "null", ")", "{", "mailbox", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "mContext", ",", "mailboxId", ")", ";", "}", "long", "id", "=", "upsyncs1", ".", "getLong", "(", "EmailContent", ".", "Message", ".", "ID_PROJECTION_COLUMN", ")", ";", "lastMessageId", "=", "id", ";", "processUploadMessage", "(", "resolver", ",", "remoteStore", ",", "account", ",", "mailbox", ",", "id", ")", ";", "}", "}", "finally", "{", "if", "(", "upsyncs1", "!", "=", "null", ")", "{", "upsyncs1", ".", "close", "(", ")", ";", "}", "}", "Cursor", "upsyncs2", "=", "resolver", ".", "query", "(", "EmailContent", ".", "Message", ".", "UPDATED_CONTENT_URI", ",", "EmailContent", ".", "Message", ".", "ID_PROJECTION", ",", "EmailContent", ".", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "mailboxKeyArgs", ",", "null", ")", ";", "try", "{", "while", "(", "upsyncs2", ".", "moveToNext", "(", ")", ")", "{", "if", "(", "remoteStore", "=", "=", "null", ")", "{", "remoteStore", "=", "Store", ".", "getInstance", "(", "account", ".", "getStoreUri", "(", "mContext", ")", ",", "mContext", ",", "null", ")", ";", "}", "if", "(", "mailbox", "=", "=", "null", ")", "{", "mailbox", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "mContext", ",", "mailboxId", ")", ";", "}", "long", "id", "=", "upsyncs2", ".", "getLong", "(", "EmailContent", ".", "Message", ".", "ID_PROJECTION_COLUMN", ")", ";", "lastMessageId", "=", "id", ";", "processUploadMessage", "(", "resolver", ",", "remoteStore", ",", "account", ",", "mailbox", ",", "id", ")", ";", "}", "}", "finally", "{", "if", "(", "upsyncs2", "!", "=", "null", ")", "{", "upsyncs2", ".", "close", "(", ")", ";", "}", "}", "}", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "lastMessageId", "+", "\"", "<STR_LIT>", "\"", "+", "me", ")", ";", "}", "}", "finally", "{", "if", "(", "mailboxes", "!", "=", "null", ")", "{", "mailboxes", ".", "close", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "processPendingUpdatesSynchronous", "(", "EmailContent", ".", "Account", "account", ",", "ContentResolver", "resolver", ",", "String", "[", "]", "accountIdArgs", ")", "{", "Cursor", "updates", "=", "resolver", ".", "query", "(", "EmailContent", ".", "Message", ".", "UPDATED_CONTENT_URI", ",", "EmailContent", ".", "Message", ".", "CONTENT_PROJECTION", ",", "EmailContent", ".", "MessageColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "accountIdArgs", ",", "EmailContent", ".", "MessageColumns", ".", "MAILBOX_KEY", ")", ";", "long", "lastMessageId", "=", "-", "1", ";", "try", "{", "Store", "remoteStore", "=", "null", ";", "Mailbox", "mailbox", "=", "null", ";", "while", "(", "updates", ".", "moveToNext", "(", ")", ")", "{", "boolean", "changeMoveToTrash", "=", "false", ";", "boolean", "changeRead", "=", "false", ";", "boolean", "changeFlagged", "=", "false", ";", "EmailContent", ".", "Message", "oldMessage", "=", "EmailContent", ".", "getContent", "(", "updates", ",", "EmailContent", ".", "Message", ".", "class", ")", ";", "lastMessageId", "=", "oldMessage", ".", "mId", ";", "EmailContent", ".", "Message", "newMessage", "=", "EmailContent", ".", "Message", ".", "restoreMessageWithId", "(", "mContext", ",", "oldMessage", ".", "mId", ")", ";", "if", "(", "newMessage", "!", "=", "null", ")", "{", "if", "(", "mailbox", "=", "=", "null", "|", "|", "mailbox", ".", "mId", "!", "=", "newMessage", ".", "mMailboxKey", ")", "{", "mailbox", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "mContext", ",", "newMessage", ".", "mMailboxKey", ")", ";", "}", "changeMoveToTrash", "=", "(", "oldMessage", ".", "mMailboxKey", "!", "=", "newMessage", ".", "mMailboxKey", ")", "&", "&", "(", "mailbox", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_TRASH", ")", ";", "changeRead", "=", "oldMessage", ".", "mFlagRead", "!", "=", "newMessage", ".", "mFlagRead", ";", "changeFlagged", "=", "oldMessage", ".", "mFlagFavorite", "!", "=", "newMessage", ".", "mFlagFavorite", ";", "}", "if", "(", "remoteStore", "=", "=", "null", "&", "&", "(", "changeMoveToTrash", "|", "|", "changeRead", "|", "|", "changeFlagged", ")", ")", "{", "remoteStore", "=", "Store", ".", "getInstance", "(", "account", ".", "getStoreUri", "(", "mContext", ")", ",", "mContext", ",", "null", ")", ";", "}", "if", "(", "changeMoveToTrash", ")", "{", "processPendingMoveToTrash", "(", "remoteStore", ",", "account", ",", "mailbox", ",", "oldMessage", ",", "newMessage", ")", ";", "}", "else", "if", "(", "changeRead", "|", "|", "changeFlagged", ")", "{", "processPendingFlagChange", "(", "remoteStore", ",", "mailbox", ",", "changeRead", ",", "changeFlagged", ",", "newMessage", ")", ";", "}", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "UPDATED_CONTENT_URI", ",", "oldMessage", ".", "mId", ")", ";", "resolver", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "}", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "lastMessageId", "+", "\"", "<STR_LIT>", "\"", "+", "me", ")", ";", "}", "}", "finally", "{", "updates", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "processUploadMessage", "(", "ContentResolver", "resolver", ",", "Store", "remoteStore", ",", "EmailContent", ".", "Account", "account", ",", "Mailbox", "mailbox", ",", "long", "messageId", ")", "throws", "MessagingException", "{", "EmailContent", ".", "Message", "message", "=", "EmailContent", ".", "Message", ".", "restoreMessageWithId", "(", "mContext", ",", "messageId", ")", ";", "boolean", "deleteUpdate", "=", "false", ";", "if", "(", "message", "=", "=", "null", ")", "{", "deleteUpdate", "=", "true", ";", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "messageId", ")", ";", "}", "else", "if", "(", "mailbox", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_DRAFTS", ")", "{", "deleteUpdate", "=", "false", ";", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "messageId", ")", ";", "}", "else", "if", "(", "mailbox", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_OUTBOX", ")", "{", "deleteUpdate", "=", "false", ";", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "messageId", ")", ";", "}", "else", "if", "(", "mailbox", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_TRASH", ")", "{", "deleteUpdate", "=", "false", ";", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "messageId", ")", ";", "}", "else", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "messageId", ")", ";", "deleteUpdate", "=", "processPendingAppend", "(", "remoteStore", ",", "account", ",", "mailbox", ",", "message", ")", ";", "}", "if", "(", "deleteUpdate", ")", "{", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "UPDATED_CONTENT_URI", ",", "messageId", ")", ";", "resolver", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "processPendingFlagChange", "(", "Store", "remoteStore", ",", "Mailbox", "mailbox", ",", "boolean", "changeRead", ",", "boolean", "changeFlagged", ",", "EmailContent", ".", "Message", "newMessage", ")", "throws", "MessagingException", "{", "if", "(", "newMessage", ".", "mServerId", "=", "=", "null", "|", "|", "newMessage", ".", "mServerId", ".", "equals", "(", "\"", "\"", ")", "|", "|", "newMessage", ".", "mServerId", ".", "startsWith", "(", "LOCAL_SERVERID_PREFIX", ")", ")", "{", "return", ";", "}", "if", "(", "mailbox", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_DRAFTS", "|", "|", "mailbox", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_OUTBOX", ")", "{", "return", ";", "}", "Folder", "remoteFolder", "=", "remoteStore", ".", "getFolder", "(", "mailbox", ".", "mDisplayName", ")", ";", "if", "(", "!", "remoteFolder", ".", "exists", "(", ")", ")", "{", "return", ";", "}", "remoteFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "if", "(", "remoteFolder", ".", "getMode", "(", ")", "!", "=", "OpenMode", ".", "READ_WRITE", ")", "{", "return", ";", "}", "Message", "remoteMessage", "=", "remoteFolder", ".", "getMessage", "(", "newMessage", ".", "mServerId", ")", ";", "if", "(", "remoteMessage", "=", "=", "null", ")", "{", "return", ";", "}", "if", "(", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "newMessage", ".", "mId", "+", "\"", "<STR_LIT>", "\"", "+", "newMessage", ".", "mFlagRead", "+", "\"", "<STR_LIT>", "\"", "+", "newMessage", ".", "mFlagFavorite", ")", ";", "}", "Message", "[", "]", "messages", "=", "new", "Message", "[", "]", "{", "remoteMessage", "}", ";", "if", "(", "changeRead", ")", "{", "remoteFolder", ".", "setFlags", "(", "messages", ",", "FLAG_LIST_SEEN", ",", "newMessage", ".", "mFlagRead", ")", ";", "}", "if", "(", "changeFlagged", ")", "{", "remoteFolder", ".", "setFlags", "(", "messages", ",", "FLAG_LIST_FLAGGED", ",", "newMessage", ".", "mFlagFavorite", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "processPendingMoveToTrash", "(", "Store", "remoteStore", ",", "EmailContent", ".", "Account", "account", ",", "Mailbox", "newMailbox", ",", "EmailContent", ".", "Message", "oldMessage", ",", "final", "EmailContent", ".", "Message", "newMessage", ")", "throws", "MessagingException", "{", "if", "(", "newMessage", ".", "mServerId", "=", "=", "null", "|", "|", "newMessage", ".", "mServerId", ".", "equals", "(", "\"", "\"", ")", "|", "|", "newMessage", ".", "mServerId", ".", "startsWith", "(", "LOCAL_SERVERID_PREFIX", ")", ")", "{", "return", ";", "}", "Mailbox", "oldMailbox", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "mContext", ",", "oldMessage", ".", "mMailboxKey", ")", ";", "if", "(", "oldMailbox", "=", "=", "null", ")", "{", "return", ";", "}", "if", "(", "oldMailbox", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_TRASH", ")", "{", "return", ";", "}", "if", "(", "account", ".", "getDeletePolicy", "(", ")", "=", "=", "Account", ".", "DELETE_POLICY_NEVER", ")", "{", "EmailContent", ".", "Message", "sentinel", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "sentinel", ".", "mAccountKey", "=", "oldMessage", ".", "mAccountKey", ";", "sentinel", ".", "mMailboxKey", "=", "oldMessage", ".", "mMailboxKey", ";", "sentinel", ".", "mFlagLoaded", "=", "EmailContent", ".", "Message", ".", "FLAG_LOADED_DELETED", ";", "sentinel", ".", "mFlagRead", "=", "true", ";", "sentinel", ".", "mServerId", "=", "oldMessage", ".", "mServerId", ";", "sentinel", ".", "save", "(", "mContext", ")", ";", "return", ";", "}", "Folder", "remoteFolder", "=", "remoteStore", ".", "getFolder", "(", "oldMailbox", ".", "mDisplayName", ")", ";", "if", "(", "!", "remoteFolder", ".", "exists", "(", ")", ")", "{", "return", ";", "}", "remoteFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "if", "(", "remoteFolder", ".", "getMode", "(", ")", "!", "=", "OpenMode", ".", "READ_WRITE", ")", "{", "remoteFolder", ".", "close", "(", "false", ")", ";", "return", ";", "}", "Message", "remoteMessage", "=", "remoteFolder", ".", "getMessage", "(", "oldMessage", ".", "mServerId", ")", ";", "if", "(", "remoteMessage", "=", "=", "null", ")", "{", "remoteFolder", ".", "close", "(", "false", ")", ";", "return", ";", "}", "Folder", "remoteTrashFolder", "=", "remoteStore", ".", "getFolder", "(", "newMailbox", ".", "mDisplayName", ")", ";", "if", "(", "!", "remoteTrashFolder", ".", "exists", "(", ")", ")", "{", "remoteTrashFolder", ".", "create", "(", "FolderType", ".", "HOLDS_MESSAGES", ")", ";", "}", "if", "(", "remoteTrashFolder", ".", "exists", "(", ")", ")", "{", "remoteTrashFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "if", "(", "remoteTrashFolder", ".", "getMode", "(", ")", "!", "=", "OpenMode", ".", "READ_WRITE", ")", "{", "remoteFolder", ".", "close", "(", "false", ")", ";", "remoteTrashFolder", ".", "close", "(", "false", ")", ";", "return", ";", "}", "remoteFolder", ".", "copyMessages", "(", "new", "Message", "[", "]", "{", "remoteMessage", "}", ",", "remoteTrashFolder", ",", "new", "Folder", ".", "MessageUpdateCallbacks", "(", ")", "{", "public", "void", "onMessageUidChange", "(", "Message", "message", ",", "String", "newUid", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "Message", ".", "SERVER_ID", ",", "newUid", ")", ";", "mContext", ".", "getContentResolver", "(", ")", ".", "update", "(", "newMessage", ".", "getUri", "(", ")", ",", "cv", ",", "null", ",", "null", ")", ";", "}", "public", "void", "onMessageNotFound", "(", "Message", "message", ")", "{", "mContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "newMessage", ".", "getUri", "(", ")", ",", "null", ",", "null", ")", ";", "}", "}", ")", ";", "remoteTrashFolder", ".", "close", "(", "false", ")", ";", "}", "remoteMessage", ".", "setFlag", "(", "Flag", ".", "DELETED", ",", "true", ")", ";", "remoteFolder", ".", "expunge", "(", ")", ";", "remoteFolder", ".", "close", "(", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onMessageUidChange", "(", "Message", "message", ",", "String", "newUid", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "Message", ".", "SERVER_ID", ",", "newUid", ")", ";", "mContext", ".", "getContentResolver", "(", ")", ".", "update", "(", "newMessage", ".", "getUri", "(", ")", ",", "cv", ",", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onMessageNotFound", "(", "Message", "message", ")", "{", "mContext", ".", "getContentResolver", "(", ")", ".", "delete", "(", "newMessage", ".", "getUri", "(", ")", ",", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "private", "void", "processPendingDeleteFromTrash", "(", "Store", "remoteStore", ",", "EmailContent", ".", "Account", "account", ",", "Mailbox", "oldMailbox", ",", "EmailContent", ".", "Message", "oldMessage", ")", "throws", "MessagingException", "{", "if", "(", "oldMailbox", ".", "mType", "!", "=", "Mailbox", ".", "TYPE_TRASH", ")", "{", "return", ";", "}", "Folder", "remoteTrashFolder", "=", "remoteStore", ".", "getFolder", "(", "oldMailbox", ".", "mDisplayName", ")", ";", "if", "(", "!", "remoteTrashFolder", ".", "exists", "(", ")", ")", "{", "return", ";", "}", "remoteTrashFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "if", "(", "remoteTrashFolder", ".", "getMode", "(", ")", "!", "=", "OpenMode", ".", "READ_WRITE", ")", "{", "remoteTrashFolder", ".", "close", "(", "false", ")", ";", "return", ";", "}", "Message", "remoteMessage", "=", "remoteTrashFolder", ".", "getMessage", "(", "oldMessage", ".", "mServerId", ")", ";", "if", "(", "remoteMessage", "=", "=", "null", ")", "{", "remoteTrashFolder", ".", "close", "(", "false", ")", ";", "return", ";", "}", "remoteMessage", ".", "setFlag", "(", "Flag", ".", "DELETED", ",", "true", ")", ";", "remoteTrashFolder", ".", "expunge", "(", ")", ";", "remoteTrashFolder", ".", "close", "(", "false", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "processPendingAppend", "(", "Store", "remoteStore", ",", "EmailContent", ".", "Account", "account", ",", "Mailbox", "newMailbox", ",", "EmailContent", ".", "Message", "message", ")", "throws", "MessagingException", "{", "boolean", "updateInternalDate", "=", "false", ";", "boolean", "updateMessage", "=", "false", ";", "boolean", "deleteMessage", "=", "false", ";", "Folder", "remoteFolder", "=", "remoteStore", ".", "getFolder", "(", "newMailbox", ".", "mDisplayName", ")", ";", "if", "(", "!", "remoteFolder", ".", "exists", "(", ")", ")", "{", "if", "(", "!", "remoteFolder", ".", "canCreate", "(", "FolderType", ".", "HOLDS_MESSAGES", ")", ")", "{", "if", "(", "message", ".", "mServerId", "=", "=", "null", "|", "|", "message", ".", "mServerId", ".", "length", "(", ")", "=", "=", "0", ")", "{", "message", ".", "mServerId", "=", "LOCAL_SERVERID_PREFIX", "+", "message", ".", "mId", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "message", ".", "mId", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "Message", ".", "SERVER_ID", ",", "message", ".", "mServerId", ")", ";", "mContext", ".", "getContentResolver", "(", ")", ".", "update", "(", "uri", ",", "cv", ",", "null", ",", "null", ")", ";", "}", "return", "true", ";", "}", "if", "(", "!", "remoteFolder", ".", "create", "(", "FolderType", ".", "HOLDS_MESSAGES", ")", ")", "{", "return", "false", ";", "}", "}", "remoteFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "if", "(", "remoteFolder", ".", "getMode", "(", ")", "!", "=", "OpenMode", ".", "READ_WRITE", ")", "{", "return", "false", ";", "}", "Message", "remoteMessage", "=", "null", ";", "if", "(", "message", ".", "mServerId", "!", "=", "null", "&", "&", "message", ".", "mServerId", ".", "length", "(", ")", ">", "0", ")", "{", "remoteMessage", "=", "remoteFolder", ".", "getMessage", "(", "message", ".", "mServerId", ")", ";", "}", "if", "(", "remoteMessage", "=", "=", "null", ")", "{", "Message", "localMessage", "=", "LegacyConversions", ".", "makeMessage", "(", "mContext", ",", "message", ")", ";", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ";", "remoteFolder", ".", "appendMessages", "(", "new", "Message", "[", "]", "{", "localMessage", "}", ")", ";", "message", ".", "mServerId", "=", "localMessage", ".", "getUid", "(", ")", ";", "updateInternalDate", "=", "true", ";", "updateMessage", "=", "true", ";", "}", "else", "{", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ";", "remoteFolder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "remoteMessage", "}", ",", "fp", ",", "null", ")", ";", "Date", "localDate", "=", "new", "Date", "(", "message", ".", "mServerTimeStamp", ")", ";", "Date", "remoteDate", "=", "remoteMessage", ".", "getInternalDate", "(", ")", ";", "if", "(", "remoteDate", ".", "compareTo", "(", "localDate", ")", ">", "0", ")", "{", "deleteMessage", "=", "true", ";", "}", "else", "{", "Message", "localMessage", "=", "LegacyConversions", ".", "makeMessage", "(", "mContext", ",", "message", ")", ";", "fp", ".", "clear", "(", ")", ";", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ";", "remoteFolder", ".", "appendMessages", "(", "new", "Message", "[", "]", "{", "localMessage", "}", ")", ";", "message", ".", "mServerId", "=", "localMessage", ".", "getUid", "(", ")", ";", "updateInternalDate", "=", "true", ";", "updateMessage", "=", "true", ";", "remoteMessage", ".", "setFlag", "(", "Flag", ".", "DELETED", ",", "true", ")", ";", "}", "}", "if", "(", "updateInternalDate", "&", "&", "message", ".", "mServerId", "!", "=", "null", ")", "{", "try", "{", "Message", "remoteMessage2", "=", "remoteFolder", ".", "getMessage", "(", "message", ".", "mServerId", ")", ";", "if", "(", "remoteMessage2", "!", "=", "null", ")", "{", "FetchProfile", "fp2", "=", "new", "FetchProfile", "(", ")", ";", "fp2", ".", "add", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ";", "remoteFolder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "remoteMessage2", "}", ",", "fp2", ",", "null", ")", ";", "message", ".", "mServerTimeStamp", "=", "remoteMessage2", ".", "getInternalDate", "(", ")", ".", "getTime", "(", ")", ";", "updateMessage", "=", "true", ";", "}", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "}", "if", "(", "deleteMessage", "|", "|", "updateMessage", ")", "{", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "message", ".", "mId", ")", ";", "ContentResolver", "resolver", "=", "mContext", ".", "getContentResolver", "(", ")", ";", "if", "(", "deleteMessage", ")", "{", "resolver", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "}", "else", "if", "(", "updateMessage", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "Message", ".", "SERVER_ID", ",", "message", ".", "mServerId", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "Message", ".", "SERVER_TIMESTAMP", ",", "message", ".", "mServerTimeStamp", ")", ";", "resolver", ".", "update", "(", "uri", ",", "cv", ",", "null", ",", "null", ")", ";", "}", "}", "return", "true", ";", "}", "</s>"]
["<s>", "public", "void", "loadMessageForView", "(", "final", "long", "messageId", ",", "MessagingListener", "listener", ")", "{", "mListeners", ".", "loadMessageForViewStarted", "(", "messageId", ")", ";", "put", "(", "\"", "<STR_LIT>", "\"", ",", "listener", ",", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "try", "{", "EmailContent", ".", "Message", "message", "=", "EmailContent", ".", "Message", ".", "restoreMessageWithId", "(", "mContext", ",", "messageId", ")", ";", "if", "(", "message", "=", "=", "null", ")", "{", "mListeners", ".", "loadMessageForViewFailed", "(", "messageId", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "if", "(", "message", ".", "mFlagLoaded", "=", "=", "EmailContent", ".", "Message", ".", "FLAG_LOADED_COMPLETE", ")", "{", "mListeners", ".", "loadMessageForViewFinished", "(", "messageId", ")", ";", "return", ";", "}", "EmailContent", ".", "Account", "account", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mContext", ",", "message", ".", "mAccountKey", ")", ";", "EmailContent", ".", "Mailbox", "mailbox", "=", "EmailContent", ".", "Mailbox", ".", "restoreMailboxWithId", "(", "mContext", ",", "message", ".", "mMailboxKey", ")", ";", "if", "(", "account", "=", "=", "null", "|", "|", "mailbox", "=", "=", "null", ")", "{", "mListeners", ".", "loadMessageForViewFailed", "(", "messageId", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "Store", "remoteStore", "=", "Store", ".", "getInstance", "(", "account", ".", "getStoreUri", "(", "mContext", ")", ",", "mContext", ",", "null", ")", ";", "Folder", "remoteFolder", "=", "remoteStore", ".", "getFolder", "(", "mailbox", ".", "mDisplayName", ")", ";", "remoteFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "Message", "remoteMessage", "=", "remoteFolder", ".", "getMessage", "(", "message", ".", "mServerId", ")", ";", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ";", "remoteFolder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "remoteMessage", "}", ",", "fp", ",", "null", ")", ";", "copyOneMessageToProvider", "(", "remoteMessage", ",", "account", ",", "mailbox", ",", "EmailContent", ".", "Message", ".", "FLAG_LOADED_COMPLETE", ")", ";", "mListeners", ".", "loadMessageForViewFinished", "(", "messageId", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "Email", ".", "LOGD", ")", "Log", ".", "v", "(", "Email", ".", "LOG_TAG", ",", "\"", "\"", ",", "me", ")", ";", "mListeners", ".", "loadMessageForViewFailed", "(", "messageId", ",", "me", ".", "getMessage", "(", ")", ")", ";", "}", "catch", "(", "RuntimeException", "rte", ")", "{", "mListeners", ".", "loadMessageForViewFailed", "(", "messageId", ",", "rte", ".", "getMessage", "(", ")", ")", ";", "}", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "try", "{", "EmailContent", ".", "Message", "message", "=", "EmailContent", ".", "Message", ".", "restoreMessageWithId", "(", "mContext", ",", "messageId", ")", ";", "if", "(", "message", "=", "=", "null", ")", "{", "mListeners", ".", "loadMessageForViewFailed", "(", "messageId", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "if", "(", "message", ".", "mFlagLoaded", "=", "=", "EmailContent", ".", "Message", ".", "FLAG_LOADED_COMPLETE", ")", "{", "mListeners", ".", "loadMessageForViewFinished", "(", "messageId", ")", ";", "return", ";", "}", "EmailContent", ".", "Account", "account", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mContext", ",", "message", ".", "mAccountKey", ")", ";", "EmailContent", ".", "Mailbox", "mailbox", "=", "EmailContent", ".", "Mailbox", ".", "restoreMailboxWithId", "(", "mContext", ",", "message", ".", "mMailboxKey", ")", ";", "if", "(", "account", "=", "=", "null", "|", "|", "mailbox", "=", "=", "null", ")", "{", "mListeners", ".", "loadMessageForViewFailed", "(", "messageId", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "Store", "remoteStore", "=", "Store", ".", "getInstance", "(", "account", ".", "getStoreUri", "(", "mContext", ")", ",", "mContext", ",", "null", ")", ";", "Folder", "remoteFolder", "=", "remoteStore", ".", "getFolder", "(", "mailbox", ".", "mDisplayName", ")", ";", "remoteFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "Message", "remoteMessage", "=", "remoteFolder", ".", "getMessage", "(", "message", ".", "mServerId", ")", ";", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ";", "remoteFolder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "remoteMessage", "}", ",", "fp", ",", "null", ")", ";", "copyOneMessageToProvider", "(", "remoteMessage", ",", "account", ",", "mailbox", ",", "EmailContent", ".", "Message", ".", "FLAG_LOADED_COMPLETE", ")", ";", "mListeners", ".", "loadMessageForViewFinished", "(", "messageId", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "Email", ".", "LOGD", ")", "Log", ".", "v", "(", "Email", ".", "LOG_TAG", ",", "\"", "\"", ",", "me", ")", ";", "mListeners", ".", "loadMessageForViewFailed", "(", "messageId", ",", "me", ".", "getMessage", "(", ")", ")", ";", "}", "catch", "(", "RuntimeException", "rte", ")", "{", "mListeners", ".", "loadMessageForViewFailed", "(", "messageId", ",", "rte", ".", "getMessage", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "loadAttachment", "(", "final", "long", "accountId", ",", "final", "long", "messageId", ",", "final", "long", "mailboxId", ",", "final", "long", "attachmentId", ",", "MessagingListener", "listener", ")", "{", "mListeners", ".", "loadAttachmentStarted", "(", "accountId", ",", "messageId", ",", "attachmentId", ",", "true", ")", ";", "put", "(", "\"", "<STR_LIT>", "\"", ",", "listener", ",", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "try", "{", "pruneCachedAttachments", "(", "accountId", ")", ";", "EmailContent", ".", "Account", "account", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mContext", ",", "accountId", ")", ";", "EmailContent", ".", "Mailbox", "mailbox", "=", "EmailContent", ".", "Mailbox", ".", "restoreMailboxWithId", "(", "mContext", ",", "mailboxId", ")", ";", "EmailContent", ".", "Message", "message", "=", "EmailContent", ".", "Message", ".", "restoreMessageWithId", "(", "mContext", ",", "messageId", ")", ";", "Attachment", "attachment", "=", "Attachment", ".", "restoreAttachmentWithId", "(", "mContext", ",", "attachmentId", ")", ";", "if", "(", "account", "=", "=", "null", "|", "|", "mailbox", "=", "=", "null", "|", "|", "message", "=", "=", "null", "|", "|", "attachment", "=", "=", "null", ")", "{", "mListeners", ".", "loadAttachmentFailed", "(", "accountId", ",", "messageId", ",", "attachmentId", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "Store", "remoteStore", "=", "Store", ".", "getInstance", "(", "account", ".", "getStoreUri", "(", "mContext", ")", ",", "mContext", ",", "null", ")", ";", "Folder", "remoteFolder", "=", "remoteStore", ".", "getFolder", "(", "mailbox", ".", "mDisplayName", ")", ";", "remoteFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "Message", "storeMessage", "=", "remoteFolder", ".", "createMessage", "(", "message", ".", "mServerId", ")", ";", "MimeBodyPart", "storePart", "=", "new", "MimeBodyPart", "(", ")", ";", "storePart", ".", "setSize", "(", "(", "int", ")", "attachment", ".", "mSize", ")", ";", "storePart", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_ATTACHMENT_STORE_DATA", ",", "attachment", ".", "mLocation", ")", ";", "storePart", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "\"", ",", "attachment", ".", "mMimeType", ",", "attachment", ".", "mFileName", ")", ")", ";", "storePart", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TRANSFER_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ";", "MimeMultipart", "multipart", "=", "new", "MimeMultipart", "(", ")", ";", "multipart", ".", "setSubType", "(", "\"", "<STR_LIT>", "\"", ")", ";", "multipart", ".", "addBodyPart", "(", "storePart", ")", ";", "storeMessage", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "storeMessage", ".", "setBody", "(", "multipart", ")", ";", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "storePart", ")", ";", "remoteFolder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "storeMessage", "}", ",", "fp", ",", "null", ")", ";", "LegacyConversions", ".", "saveAttachmentBody", "(", "mContext", ",", "storePart", ",", "attachment", ",", "accountId", ")", ";", "mListeners", ".", "loadAttachmentFinished", "(", "accountId", ",", "messageId", ",", "attachmentId", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "Email", ".", "LOGD", ")", "Log", ".", "v", "(", "Email", ".", "LOG_TAG", ",", "\"", "\"", ",", "me", ")", ";", "mListeners", ".", "loadAttachmentFailed", "(", "accountId", ",", "messageId", ",", "attachmentId", ",", "me", ".", "getMessage", "(", ")", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "ioe", ".", "toString", "(", ")", ")", ";", "}", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "try", "{", "pruneCachedAttachments", "(", "accountId", ")", ";", "EmailContent", ".", "Account", "account", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mContext", ",", "accountId", ")", ";", "EmailContent", ".", "Mailbox", "mailbox", "=", "EmailContent", ".", "Mailbox", ".", "restoreMailboxWithId", "(", "mContext", ",", "mailboxId", ")", ";", "EmailContent", ".", "Message", "message", "=", "EmailContent", ".", "Message", ".", "restoreMessageWithId", "(", "mContext", ",", "messageId", ")", ";", "Attachment", "attachment", "=", "Attachment", ".", "restoreAttachmentWithId", "(", "mContext", ",", "attachmentId", ")", ";", "if", "(", "account", "=", "=", "null", "|", "|", "mailbox", "=", "=", "null", "|", "|", "message", "=", "=", "null", "|", "|", "attachment", "=", "=", "null", ")", "{", "mListeners", ".", "loadAttachmentFailed", "(", "accountId", ",", "messageId", ",", "attachmentId", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "Store", "remoteStore", "=", "Store", ".", "getInstance", "(", "account", ".", "getStoreUri", "(", "mContext", ")", ",", "mContext", ",", "null", ")", ";", "Folder", "remoteFolder", "=", "remoteStore", ".", "getFolder", "(", "mailbox", ".", "mDisplayName", ")", ";", "remoteFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "Message", "storeMessage", "=", "remoteFolder", ".", "createMessage", "(", "message", ".", "mServerId", ")", ";", "MimeBodyPart", "storePart", "=", "new", "MimeBodyPart", "(", ")", ";", "storePart", ".", "setSize", "(", "(", "int", ")", "attachment", ".", "mSize", ")", ";", "storePart", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_ATTACHMENT_STORE_DATA", ",", "attachment", ".", "mLocation", ")", ";", "storePart", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "\"", ",", "attachment", ".", "mMimeType", ",", "attachment", ".", "mFileName", ")", ")", ";", "storePart", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TRANSFER_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ";", "MimeMultipart", "multipart", "=", "new", "MimeMultipart", "(", ")", ";", "multipart", ".", "setSubType", "(", "\"", "<STR_LIT>", "\"", ")", ";", "multipart", ".", "addBodyPart", "(", "storePart", ")", ";", "storeMessage", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "storeMessage", ".", "setBody", "(", "multipart", ")", ";", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "storePart", ")", ";", "remoteFolder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "storeMessage", "}", ",", "fp", ",", "null", ")", ";", "LegacyConversions", ".", "saveAttachmentBody", "(", "mContext", ",", "storePart", ",", "attachment", ",", "accountId", ")", ";", "mListeners", ".", "loadAttachmentFinished", "(", "accountId", ",", "messageId", ",", "attachmentId", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "Email", ".", "LOGD", ")", "Log", ".", "v", "(", "Email", ".", "LOG_TAG", ",", "\"", "\"", ",", "me", ")", ";", "mListeners", ".", "loadAttachmentFailed", "(", "accountId", ",", "messageId", ",", "attachmentId", ",", "me", ".", "getMessage", "(", ")", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "ioe", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "void", "pruneCachedAttachments", "(", "long", "accountId", ")", "{", "ContentResolver", "resolver", "=", "mContext", ".", "getContentResolver", "(", ")", ";", "File", "cacheDir", "=", "AttachmentProvider", ".", "getAttachmentDirectory", "(", "mContext", ",", "accountId", ")", ";", "File", "[", "]", "fileList", "=", "cacheDir", ".", "listFiles", "(", ")", ";", "if", "(", "fileList", "=", "=", "null", ")", "return", ";", "for", "(", "File", "file", ":", "fileList", ")", "{", "if", "(", "file", ".", "exists", "(", ")", ")", "{", "long", "id", ";", "try", "{", "id", "=", "Long", ".", "valueOf", "(", "file", ".", "getName", "(", ")", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "CONTENT_URI", ",", "id", ")", ";", "Cursor", "c", "=", "resolver", ".", "query", "(", "uri", ",", "PRUNE_ATTACHMENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "if", "(", "c", ".", "getString", "(", "0", ")", "=", "=", "null", ")", "{", "continue", ";", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "resolver", ".", "update", "(", "uri", ",", "PRUNE_ATTACHMENT_CV", ",", "null", ",", "null", ")", ";", "}", "catch", "(", "NumberFormatException", "nfe", ")", "{", "}", "if", "(", "!", "file", ".", "delete", "(", ")", ")", "{", "file", ".", "deleteOnExit", "(", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "public", "void", "sendPendingMessages", "(", "final", "EmailContent", ".", "Account", "account", ",", "final", "long", "sentFolderId", ",", "MessagingListener", "listener", ")", "{", "put", "(", "\"", "<STR_LIT>", "\"", ",", "listener", ",", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "sendPendingMessagesSynchronous", "(", "account", ",", "sentFolderId", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "sendPendingMessagesSynchronous", "(", "account", ",", "sentFolderId", ")", ";", "}", "</s>"]
["<s>", "public", "void", "sendPendingMessagesSynchronous", "(", "final", "EmailContent", ".", "Account", "account", ",", "long", "sentFolderId", ")", "{", "long", "outboxId", "=", "Mailbox", ".", "findMailboxOfType", "(", "mContext", ",", "account", ".", "mId", ",", "Mailbox", ".", "TYPE_OUTBOX", ")", ";", "if", "(", "outboxId", "=", "=", "Mailbox", ".", "NO_MAILBOX", ")", "{", "return", ";", "}", "ContentResolver", "resolver", "=", "mContext", ".", "getContentResolver", "(", ")", ";", "Cursor", "c", "=", "resolver", ".", "query", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "EmailContent", ".", "Message", ".", "ID_COLUMN_PROJECTION", ",", "EmailContent", ".", "Message", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "outboxId", ")", "}", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "getCount", "(", ")", "<", "=", "0", ")", "{", "return", ";", "}", "mListeners", ".", "sendPendingMessagesStarted", "(", "account", ".", "mId", ",", "-", "1", ")", ";", "Sender", "sender", "=", "Sender", ".", "getInstance", "(", "mContext", ",", "account", ".", "getSenderUri", "(", "mContext", ")", ")", ";", "Store", "remoteStore", "=", "Store", ".", "getInstance", "(", "account", ".", "getStoreUri", "(", "mContext", ")", ",", "mContext", ",", "null", ")", ";", "boolean", "requireMoveMessageToSentFolder", "=", "remoteStore", ".", "requireCopyMessageToSentFolder", "(", ")", ";", "ContentValues", "moveToSentValues", "=", "null", ";", "if", "(", "requireMoveMessageToSentFolder", ")", "{", "moveToSentValues", "=", "new", "ContentValues", "(", ")", ";", "moveToSentValues", ".", "put", "(", "MessageColumns", ".", "MAILBOX_KEY", ",", "sentFolderId", ")", ";", "}", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "messageId", "=", "-", "1", ";", "try", "{", "messageId", "=", "c", ".", "getLong", "(", "0", ")", ";", "mListeners", ".", "sendPendingMessagesStarted", "(", "account", ".", "mId", ",", "messageId", ")", ";", "sender", ".", "sendMessage", "(", "messageId", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "mListeners", ".", "sendPendingMessagesFailed", "(", "account", ".", "mId", ",", "messageId", ",", "me", ")", ";", "continue", ";", "}", "Uri", "syncedUri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "SYNCED_CONTENT_URI", ",", "messageId", ")", ";", "if", "(", "requireMoveMessageToSentFolder", ")", "{", "resolver", ".", "update", "(", "syncedUri", ",", "moveToSentValues", ",", "null", ",", "null", ")", ";", "}", "else", "{", "AttachmentProvider", ".", "deleteAllAttachmentFiles", "(", "mContext", ",", "account", ".", "mId", ",", "messageId", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "messageId", ")", ";", "resolver", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "resolver", ".", "delete", "(", "syncedUri", ",", "null", ",", "null", ")", ";", "}", "}", "mListeners", ".", "sendPendingMessagesCompleted", "(", "account", ".", "mId", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "mListeners", ".", "sendPendingMessagesFailed", "(", "account", ".", "mId", ",", "-", "1", ",", "me", ")", ";", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "checkMail", "(", "final", "long", "accountId", ",", "final", "long", "tag", ",", "final", "MessagingListener", "listener", ")", "{", "mListeners", ".", "checkMailStarted", "(", "mContext", ",", "accountId", ",", "tag", ")", ";", "listFolders", "(", "accountId", ",", "null", ")", ";", "put", "(", "\"", "<STR_LIT>", "\"", ",", "listener", ",", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "long", "inboxId", "=", "-", "1", ";", "EmailContent", ".", "Account", "account", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mContext", ",", "accountId", ")", ";", "if", "(", "account", "!", "=", "null", ")", "{", "long", "sentboxId", "=", "Mailbox", ".", "findMailboxOfType", "(", "mContext", ",", "accountId", ",", "Mailbox", ".", "TYPE_SENT", ")", ";", "if", "(", "sentboxId", "!", "=", "Mailbox", ".", "NO_MAILBOX", ")", "{", "sendPendingMessagesSynchronous", "(", "account", ",", "sentboxId", ")", ";", "}", "inboxId", "=", "Mailbox", ".", "findMailboxOfType", "(", "mContext", ",", "accountId", ",", "Mailbox", ".", "TYPE_INBOX", ")", ";", "if", "(", "inboxId", "!", "=", "Mailbox", ".", "NO_MAILBOX", ")", "{", "EmailContent", ".", "Mailbox", "mailbox", "=", "EmailContent", ".", "Mailbox", ".", "restoreMailboxWithId", "(", "mContext", ",", "inboxId", ")", ";", "if", "(", "mailbox", "!", "=", "null", ")", "{", "synchronizeMailboxSynchronous", "(", "account", ",", "mailbox", ")", ";", "}", "}", "}", "mListeners", ".", "checkMailFinished", "(", "mContext", ",", "accountId", ",", "tag", ",", "inboxId", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "long", "inboxId", "=", "-", "1", ";", "EmailContent", ".", "Account", "account", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mContext", ",", "accountId", ")", ";", "if", "(", "account", "!", "=", "null", ")", "{", "long", "sentboxId", "=", "Mailbox", ".", "findMailboxOfType", "(", "mContext", ",", "accountId", ",", "Mailbox", ".", "TYPE_SENT", ")", ";", "if", "(", "sentboxId", "!", "=", "Mailbox", ".", "NO_MAILBOX", ")", "{", "sendPendingMessagesSynchronous", "(", "account", ",", "sentboxId", ")", ";", "}", "inboxId", "=", "Mailbox", ".", "findMailboxOfType", "(", "mContext", ",", "accountId", ",", "Mailbox", ".", "TYPE_INBOX", ")", ";", "if", "(", "inboxId", "!", "=", "Mailbox", ".", "NO_MAILBOX", ")", "{", "EmailContent", ".", "Mailbox", "mailbox", "=", "EmailContent", ".", "Mailbox", ".", "restoreMailboxWithId", "(", "mContext", ",", "inboxId", ")", ";", "if", "(", "mailbox", "!", "=", "null", ")", "{", "synchronizeMailboxSynchronous", "(", "account", ",", "mailbox", ")", ";", "}", "}", "}", "mListeners", ".", "checkMailFinished", "(", "mContext", ",", "accountId", ",", "tag", ",", "inboxId", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "description", ";", "}", "</s>"]
["<s>", "public", "PeekableInputStream", "(", "InputStream", "in", ")", "{", "this", ".", "mIn", "=", "in", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", ")", "throws", "IOException", "{", "if", "(", "!", "mPeeked", ")", "{", "return", "mIn", ".", "read", "(", ")", ";", "}", "else", "{", "mPeeked", "=", "false", ";", "return", "mPeekedByte", ";", "}", "}", "</s>"]
["<s>", "public", "int", "peek", "(", ")", "throws", "IOException", "{", "if", "(", "!", "mPeeked", ")", "{", "mPeekedByte", "=", "read", "(", ")", ";", "mPeeked", "=", "true", ";", "}", "return", "mPeekedByte", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", "byte", "[", "]", "b", ",", "int", "offset", ",", "int", "length", ")", "throws", "IOException", "{", "if", "(", "!", "mPeeked", ")", "{", "return", "mIn", ".", "read", "(", "b", ",", "offset", ",", "length", ")", ";", "}", "else", "{", "b", "[", "0", "]", "=", "(", "byte", ")", "mPeekedByte", ";", "mPeeked", "=", "false", ";", "int", "r", "=", "mIn", ".", "read", "(", "b", ",", "offset", "+", "1", ",", "length", "-", "1", ")", ";", "if", "(", "r", "=", "=", "-", "1", ")", "{", "return", "1", ";", "}", "else", "{", "return", "r", "+", "1", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", "byte", "[", "]", "b", ")", "throws", "IOException", "{", "return", "read", "(", "b", ",", "0", ",", "b", ".", "length", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "mIn", ".", "toString", "(", ")", ",", "mPeeked", ",", "mPeekedByte", ")", ";", "}", "</s>"]
["<s>", "public", "void", "listFoldersStarted", "(", "long", "accountId", ")", "{", "}", "</s>"]
["<s>", "public", "void", "listFoldersFailed", "(", "long", "accountId", ",", "String", "message", ")", "{", "}", "</s>"]
["<s>", "public", "void", "listFoldersFinished", "(", "long", "accountId", ")", "{", "}", "</s>"]
["<s>", "public", "void", "synchronizeMailboxStarted", "(", "long", "accountId", ",", "long", "mailboxId", ")", "{", "}", "</s>"]
["<s>", "public", "void", "synchronizeMailboxFinished", "(", "long", "accountId", ",", "long", "mailboxId", ",", "int", "totalMessagesInMailbox", ",", "int", "numNewMessages", ")", "{", "}", "</s>"]
["<s>", "public", "void", "synchronizeMailboxFailed", "(", "long", "accountId", ",", "long", "mailboxId", ",", "Exception", "e", ")", "{", "}", "</s>"]
["<s>", "public", "void", "loadMessageForViewStarted", "(", "long", "messageId", ")", "{", "}", "</s>"]
["<s>", "public", "void", "loadMessageForViewFinished", "(", "long", "messageId", ")", "{", "}", "</s>"]
["<s>", "public", "void", "loadMessageForViewFailed", "(", "long", "messageId", ",", "String", "message", ")", "{", "}", "</s>"]
["<s>", "public", "void", "checkMailStarted", "(", "Context", "context", ",", "long", "accountId", ",", "long", "tag", ")", "{", "}", "</s>"]
["<s>", "public", "void", "checkMailFinished", "(", "Context", "context", ",", "long", "accountId", ",", "long", "mailboxId", ",", "long", "tag", ")", "{", "}", "</s>"]
["<s>", "public", "void", "sendPendingMessagesStarted", "(", "long", "accountId", ",", "long", "messageId", ")", "{", "}", "</s>"]
["<s>", "public", "void", "sendPendingMessagesCompleted", "(", "long", "accountId", ")", "{", "}", "</s>"]
["<s>", "public", "void", "sendPendingMessagesFailed", "(", "long", "accountId", ",", "long", "messageId", ",", "Exception", "reason", ")", "{", "}", "</s>"]
["<s>", "public", "void", "messageUidChanged", "(", "long", "accountId", ",", "long", "mailboxId", ",", "String", "oldUid", ",", "String", "newUid", ")", "{", "}", "</s>"]
["<s>", "public", "void", "loadAttachmentStarted", "(", "long", "accountId", ",", "long", "messageId", ",", "long", "attachmentId", ",", "boolean", "requiresDownload", ")", "{", "}", "</s>"]
["<s>", "public", "void", "loadAttachmentFinished", "(", "long", "accountId", ",", "long", "messageId", ",", "long", "attachmentId", ")", "{", "}", "</s>"]
["<s>", "public", "void", "loadAttachmentFailed", "(", "long", "accountId", ",", "long", "messageId", ",", "long", "attachmentId", ",", "String", "reason", ")", "{", "}", "</s>"]
["<s>", "public", "void", "controllerCommandCompleted", "(", "boolean", "moreCommandsToRun", ")", "{", "}", "</s>"]
["<s>", "public", "CharSequence", "fixText", "(", "CharSequence", "invalidText", ")", "{", "return", "\"", "\"", ";", "}", "</s>"]
["<s>", "public", "boolean", "isValid", "(", "CharSequence", "text", ")", "{", "return", "Address", ".", "parse", "(", "text", ".", "toString", "(", ")", ")", ".", "length", ">", "0", ";", "}", "</s>"]
["<s>", "public", "Account", "(", "Context", "context", ")", "{", "mUuid", "=", "UUID", ".", "randomUUID", "(", ")", ".", "toString", "(", ")", ";", "mLocalStoreUri", "=", "\"", "<STR_LIT>", "\"", "+", "context", ".", "getDatabasePath", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "mAutomaticCheckIntervalMinutes", "=", "-", "1", ";", "mAccountNumber", "=", "-", "1", ";", "mNotifyNewMail", "=", "true", ";", "mVibrate", "=", "false", ";", "mRingtoneUri", "=", "\"", "<STR_LIT>", "\"", ";", "mSyncWindow", "=", "SYNC_WINDOW_USER", ";", "}", "</s>"]
["<s>", "Account", "(", "Preferences", "preferences", ",", "String", "uuid", ")", "{", "this", ".", "mUuid", "=", "uuid", ";", "refresh", "(", "preferences", ")", ";", "}", "</s>"]
["<s>", "public", "void", "refresh", "(", "Preferences", "preferences", ")", "{", "mPreferences", "=", "preferences", ";", "mStoreUri", "=", "Utility", ".", "base64Decode", "(", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "null", ")", ")", ";", "mLocalStoreUri", "=", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "String", "senderText", "=", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "if", "(", "senderText", "=", "=", "null", ")", "{", "senderText", "=", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "}", "mSenderUri", "=", "Utility", ".", "base64Decode", "(", "senderText", ")", ";", "mDescription", "=", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "mName", "=", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mName", ")", ";", "mEmail", "=", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mEmail", ")", ";", "mAutomaticCheckIntervalMinutes", "=", "preferences", ".", "mSharedPreferences", ".", "getInt", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "-", "1", ")", ";", "mLastAutomaticCheckTime", "=", "preferences", ".", "mSharedPreferences", ".", "getLong", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "0", ")", ";", "mNotifyNewMail", "=", "preferences", ".", "mSharedPreferences", ".", "getBoolean", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "mDeletePolicy", "=", "preferences", ".", "mSharedPreferences", ".", "getInt", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "0", ")", ";", "if", "(", "mDeletePolicy", "=", "=", "DELETE_POLICY_NEVER", "&", "&", "mStoreUri", "!", "=", "null", "&", "&", "mStoreUri", ".", "toString", "(", ")", ".", "startsWith", "(", "Store", ".", "STORE_SCHEME_IMAP", ")", ")", "{", "mDeletePolicy", "=", "DELETE_POLICY_ON_DELETE", ";", "}", "mDraftsFolderName", "=", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mSentFolderName", "=", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mTrashFolderName", "=", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mOutboxFolderName", "=", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mAccountNumber", "=", "preferences", ".", "mSharedPreferences", ".", "getInt", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "0", ")", ";", "mVibrate", "=", "preferences", ".", "mSharedPreferences", ".", "getBoolean", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "mRingtoneUri", "=", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mSyncWindow", "=", "preferences", ".", "mSharedPreferences", ".", "getInt", "(", "mUuid", "+", "KEY_SYNC_WINDOW", ",", "SYNC_WINDOW_USER", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getUuid", "(", ")", "{", "return", "mUuid", ";", "}", "</s>"]
["<s>", "public", "String", "getStoreUri", "(", ")", "{", "return", "mStoreUri", ";", "}", "</s>"]
["<s>", "public", "void", "setStoreUri", "(", "String", "storeUri", ")", "{", "this", ".", "mStoreUri", "=", "storeUri", ";", "}", "</s>"]
["<s>", "public", "String", "getSenderUri", "(", ")", "{", "return", "mSenderUri", ";", "}", "</s>"]
["<s>", "public", "void", "setSenderUri", "(", "String", "senderUri", ")", "{", "this", ".", "mSenderUri", "=", "senderUri", ";", "}", "</s>"]
["<s>", "public", "String", "getDescription", "(", ")", "{", "return", "mDescription", ";", "}", "</s>"]
["<s>", "public", "void", "setDescription", "(", "String", "description", ")", "{", "this", ".", "mDescription", "=", "description", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "mName", ";", "}", "</s>"]
["<s>", "public", "void", "setName", "(", "String", "name", ")", "{", "this", ".", "mName", "=", "name", ";", "}", "</s>"]
["<s>", "public", "String", "getEmail", "(", ")", "{", "return", "mEmail", ";", "}", "</s>"]
["<s>", "public", "void", "setEmail", "(", "String", "email", ")", "{", "this", ".", "mEmail", "=", "email", ";", "}", "</s>"]
["<s>", "public", "boolean", "isVibrate", "(", ")", "{", "return", "mVibrate", ";", "}", "</s>"]
["<s>", "public", "void", "setVibrate", "(", "boolean", "vibrate", ")", "{", "mVibrate", "=", "vibrate", ";", "}", "</s>"]
["<s>", "public", "String", "getRingtone", "(", ")", "{", "return", "mRingtoneUri", ";", "}", "</s>"]
["<s>", "public", "void", "setRingtone", "(", "String", "ringtoneUri", ")", "{", "mRingtoneUri", "=", "ringtoneUri", ";", "}", "</s>"]
["<s>", "public", "void", "delete", "(", "Preferences", "preferences", ")", "{", "String", "[", "]", "uuids", "=", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "split", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "length", "=", "uuids", ".", "length", ";", "i", "<", "length", ";", "i", "+", "+", ")", "{", "if", "(", "!", "uuids", "[", "i", "]", ".", "equals", "(", "mUuid", ")", ")", "{", "if", "(", "sb", ".", "length", "(", ")", ">", "0", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:U+002C>", ")", ";", "}", "sb", ".", "append", "(", "uuids", "[", "i", "]", ")", ";", "}", "}", "String", "accountUuids", "=", "sb", ".", "toString", "(", ")", ";", "SharedPreferences", ".", "Editor", "editor", "=", "preferences", ".", "mSharedPreferences", ".", "edit", "(", ")", ";", "editor", ".", "putString", "(", "\"", "<STR_LIT>", "\"", ",", "accountUuids", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "KEY_SYNC_WINDOW", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "commit", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "save", "(", "Preferences", "preferences", ")", "{", "mPreferences", "=", "preferences", ";", "if", "(", "!", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "contains", "(", "mUuid", ")", ")", "{", "Account", "[", "]", "accounts", "=", "preferences", ".", "getAccounts", "(", ")", ";", "int", "[", "]", "accountNumbers", "=", "new", "int", "[", "accounts", ".", "length", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "accounts", ".", "length", ";", "i", "+", "+", ")", "{", "accountNumbers", "[", "i", "]", "=", "accounts", "[", "i", "]", ".", "getAccountNumber", "(", ")", ";", "}", "Arrays", ".", "sort", "(", "accountNumbers", ")", ";", "for", "(", "int", "accountNumber", ":", "accountNumbers", ")", "{", "if", "(", "accountNumber", ">", "mAccountNumber", "+", "1", ")", "{", "break", ";", "}", "mAccountNumber", "=", "accountNumber", ";", "}", "mAccountNumber", "+", "+", ";", "String", "accountUuids", "=", "preferences", ".", "mSharedPreferences", ".", "getString", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "accountUuids", "+", "=", "(", "accountUuids", ".", "length", "(", ")", "!", "=", "0", "?", "\"", "<STR_LIT:U+002C>", "\"", ":", "\"", "\"", ")", "+", "mUuid", ";", "SharedPreferences", ".", "Editor", "editor", "=", "preferences", ".", "mSharedPreferences", ".", "edit", "(", ")", ";", "editor", ".", "putString", "(", "\"", "<STR_LIT>", "\"", ",", "accountUuids", ")", ";", "editor", ".", "commit", "(", ")", ";", "}", "SharedPreferences", ".", "Editor", "editor", "=", "preferences", ".", "mSharedPreferences", ".", "edit", "(", ")", ";", "editor", ".", "putString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "Utility", ".", "base64Encode", "(", "mStoreUri", ")", ")", ";", "editor", ".", "putString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mLocalStoreUri", ")", ";", "editor", ".", "putString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "Utility", ".", "base64Encode", "(", "mSenderUri", ")", ")", ";", "editor", ".", "putString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mDescription", ")", ";", "editor", ".", "putString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mName", ")", ";", "editor", ".", "putString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mEmail", ")", ";", "editor", ".", "putInt", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mAutomaticCheckIntervalMinutes", ")", ";", "editor", ".", "putLong", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mLastAutomaticCheckTime", ")", ";", "editor", ".", "putBoolean", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mNotifyNewMail", ")", ";", "editor", ".", "putInt", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mDeletePolicy", ")", ";", "editor", ".", "putString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mDraftsFolderName", ")", ";", "editor", ".", "putString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mSentFolderName", ")", ";", "editor", ".", "putString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mTrashFolderName", ")", ";", "editor", ".", "putString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mOutboxFolderName", ")", ";", "editor", ".", "putInt", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mAccountNumber", ")", ";", "editor", ".", "putBoolean", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mVibrate", ")", ";", "editor", ".", "putString", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ",", "mRingtoneUri", ")", ";", "editor", ".", "putInt", "(", "mUuid", "+", "KEY_SYNC_WINDOW", ",", "mSyncWindow", ")", ";", "editor", ".", "remove", "(", "mUuid", "+", "\"", "<STR_LIT>", "\"", ")", ";", "editor", ".", "commit", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "mDescription", ";", "}", "</s>"]
["<s>", "public", "Uri", "getContentUri", "(", ")", "{", "return", "Uri", ".", "parse", "(", "\"", "<STR_LIT>", "\"", "+", "getUuid", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getLocalStoreUri", "(", ")", "{", "return", "mLocalStoreUri", ";", "}", "</s>"]
["<s>", "public", "void", "setLocalStoreUri", "(", "String", "localStoreUri", ")", "{", "this", ".", "mLocalStoreUri", "=", "localStoreUri", ";", "}", "</s>"]
["<s>", "public", "int", "getAutomaticCheckIntervalMinutes", "(", ")", "{", "return", "mAutomaticCheckIntervalMinutes", ";", "}", "</s>"]
["<s>", "public", "void", "setAutomaticCheckIntervalMinutes", "(", "int", "automaticCheckIntervalMinutes", ")", "{", "this", ".", "mAutomaticCheckIntervalMinutes", "=", "automaticCheckIntervalMinutes", ";", "}", "</s>"]
["<s>", "public", "long", "getLastAutomaticCheckTime", "(", ")", "{", "return", "mLastAutomaticCheckTime", ";", "}", "</s>"]
["<s>", "public", "void", "setLastAutomaticCheckTime", "(", "long", "lastAutomaticCheckTime", ")", "{", "this", ".", "mLastAutomaticCheckTime", "=", "lastAutomaticCheckTime", ";", "}", "</s>"]
["<s>", "public", "boolean", "isNotifyNewMail", "(", ")", "{", "return", "mNotifyNewMail", ";", "}", "</s>"]
["<s>", "public", "void", "setNotifyNewMail", "(", "boolean", "notifyNewMail", ")", "{", "this", ".", "mNotifyNewMail", "=", "notifyNewMail", ";", "}", "</s>"]
["<s>", "public", "int", "getDeletePolicy", "(", ")", "{", "return", "mDeletePolicy", ";", "}", "</s>"]
["<s>", "public", "void", "setDeletePolicy", "(", "int", "deletePolicy", ")", "{", "this", ".", "mDeletePolicy", "=", "deletePolicy", ";", "}", "</s>"]
["<s>", "public", "String", "getDraftsFolderName", "(", ")", "{", "return", "mDraftsFolderName", ";", "}", "</s>"]
["<s>", "public", "void", "setDraftsFolderName", "(", "String", "draftsFolderName", ")", "{", "mDraftsFolderName", "=", "draftsFolderName", ";", "}", "</s>"]
["<s>", "public", "String", "getSentFolderName", "(", ")", "{", "return", "mSentFolderName", ";", "}", "</s>"]
["<s>", "public", "void", "setSentFolderName", "(", "String", "sentFolderName", ")", "{", "mSentFolderName", "=", "sentFolderName", ";", "}", "</s>"]
["<s>", "public", "String", "getTrashFolderName", "(", ")", "{", "return", "mTrashFolderName", ";", "}", "</s>"]
["<s>", "public", "void", "setTrashFolderName", "(", "String", "trashFolderName", ")", "{", "mTrashFolderName", "=", "trashFolderName", ";", "}", "</s>"]
["<s>", "public", "String", "getOutboxFolderName", "(", ")", "{", "return", "mOutboxFolderName", ";", "}", "</s>"]
["<s>", "public", "void", "setOutboxFolderName", "(", "String", "outboxFolderName", ")", "{", "mOutboxFolderName", "=", "outboxFolderName", ";", "}", "</s>"]
["<s>", "public", "int", "getAccountNumber", "(", ")", "{", "return", "mAccountNumber", ";", "}", "</s>"]
["<s>", "public", "int", "getSyncWindow", "(", ")", "{", "return", "mSyncWindow", ";", "}", "</s>"]
["<s>", "public", "void", "setSyncWindow", "(", "int", "window", ")", "{", "mSyncWindow", "=", "window", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "o", ")", "{", "if", "(", "o", "instanceof", "Account", ")", "{", "return", "(", "(", "Account", ")", "o", ")", ".", "mUuid", ".", "equals", "(", "mUuid", ")", ";", "}", "return", "super", ".", "equals", "(", "o", ")", ";", "}", "</s>"]
["<s>", "public", "EmailAddressAdapter", "(", "Context", "context", ")", "{", "super", "(", "context", ",", "R", ".", "layout", ".", "recipient_dropdown_item", ",", "null", ")", ";", "mContentResolver", "=", "context", ".", "getContentResolver", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "final", "String", "convertToString", "(", "Cursor", "cursor", ")", "{", "String", "name", "=", "cursor", ".", "getString", "(", "NAME_INDEX", ")", ";", "String", "address", "=", "cursor", ".", "getString", "(", "DATA_INDEX", ")", ";", "return", "new", "Address", "(", "address", ",", "name", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "final", "void", "bindView", "(", "View", "view", ",", "Context", "context", ",", "Cursor", "cursor", ")", "{", "TextView", "text1", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "text1", ")", ";", "TextView", "text2", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "text2", ")", ";", "text1", ".", "setText", "(", "cursor", ".", "getString", "(", "NAME_INDEX", ")", ")", ";", "text2", ".", "setText", "(", "cursor", ".", "getString", "(", "DATA_INDEX", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Cursor", "runQueryOnBackgroundThread", "(", "CharSequence", "constraint", ")", "{", "String", "filter", "=", "constraint", "=", "=", "null", "?", "\"", "\"", ":", "constraint", ".", "toString", "(", ")", ";", "Uri", "uri", "=", "Uri", ".", "withAppendedPath", "(", "Email", ".", "CONTENT_FILTER_URI", ",", "Uri", ".", "encode", "(", "filter", ")", ")", ";", "Cursor", "c", "=", "mContentResolver", ".", "query", "(", "uri", ",", "PROJECTION", ",", "null", ",", "null", ",", "SORT_ORDER", ")", ";", "if", "(", "c", "!", "=", "null", ")", "{", "c", ".", "getCount", "(", ")", ";", "}", "return", "c", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "updateMessageFields", "(", "EmailContent", ".", "Message", "localMessage", ",", "Message", "message", ",", "long", "accountId", ",", "long", "mailboxId", ")", "throws", "MessagingException", "{", "Address", "[", "]", "from", "=", "message", ".", "getFrom", "(", ")", ";", "Address", "[", "]", "to", "=", "message", ".", "getRecipients", "(", "Message", ".", "RecipientType", ".", "TO", ")", ";", "Address", "[", "]", "cc", "=", "message", ".", "getRecipients", "(", "Message", ".", "RecipientType", ".", "CC", ")", ";", "Address", "[", "]", "bcc", "=", "message", ".", "getRecipients", "(", "Message", ".", "RecipientType", ".", "BCC", ")", ";", "Address", "[", "]", "replyTo", "=", "message", ".", "getReplyTo", "(", ")", ";", "String", "subject", "=", "message", ".", "getSubject", "(", ")", ";", "Date", "sentDate", "=", "message", ".", "getSentDate", "(", ")", ";", "Date", "internalDate", "=", "message", ".", "getInternalDate", "(", ")", ";", "if", "(", "from", "!", "=", "null", "&", "&", "from", ".", "length", ">", "0", ")", "{", "localMessage", ".", "mDisplayName", "=", "from", "[", "0", "]", ".", "toFriendly", "(", ")", ";", "}", "if", "(", "sentDate", "!", "=", "null", ")", "{", "localMessage", ".", "mTimeStamp", "=", "sentDate", ".", "getTime", "(", ")", ";", "}", "if", "(", "subject", "!", "=", "null", ")", "{", "localMessage", ".", "mSubject", "=", "subject", ";", "}", "localMessage", ".", "mFlagRead", "=", "message", ".", "isSet", "(", "Flag", ".", "SEEN", ")", ";", "if", "(", "localMessage", ".", "mFlagLoaded", "!", "=", "EmailContent", ".", "Message", ".", "FLAG_LOADED_COMPLETE", ")", "{", "if", "(", "localMessage", ".", "mDisplayName", "=", "=", "null", "|", "|", "\"", "\"", ".", "equals", "(", "localMessage", ".", "mDisplayName", ")", ")", "{", "localMessage", ".", "mFlagLoaded", "=", "EmailContent", ".", "Message", ".", "FLAG_LOADED_UNLOADED", ";", "}", "else", "{", "localMessage", ".", "mFlagLoaded", "=", "EmailContent", ".", "Message", ".", "FLAG_LOADED_PARTIAL", ";", "}", "}", "localMessage", ".", "mFlagFavorite", "=", "message", ".", "isSet", "(", "Flag", ".", "FLAGGED", ")", ";", "localMessage", ".", "mServerId", "=", "message", ".", "getUid", "(", ")", ";", "if", "(", "internalDate", "!", "=", "null", ")", "{", "localMessage", ".", "mServerTimeStamp", "=", "internalDate", ".", "getTime", "(", ")", ";", "}", "try", "{", "localMessage", ".", "mMessageId", "=", "(", "(", "MimeMessage", ")", "message", ")", ".", "getMessageId", "(", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "localMessage", ".", "mServerId", ")", ";", "}", "}", "localMessage", ".", "mMailboxKey", "=", "mailboxId", ";", "localMessage", ".", "mAccountKey", "=", "accountId", ";", "if", "(", "from", "!", "=", "null", "&", "&", "from", ".", "length", ">", "0", ")", "{", "localMessage", ".", "mFrom", "=", "Address", ".", "pack", "(", "from", ")", ";", "}", "localMessage", ".", "mTo", "=", "Address", ".", "pack", "(", "to", ")", ";", "localMessage", ".", "mCc", "=", "Address", ".", "pack", "(", "cc", ")", ";", "localMessage", ".", "mBcc", "=", "Address", ".", "pack", "(", "bcc", ")", ";", "localMessage", ".", "mReplyTo", "=", "Address", ".", "pack", "(", "replyTo", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "updateBodyFields", "(", "EmailContent", ".", "Body", "body", ",", "EmailContent", ".", "Message", "localMessage", ",", "ArrayList", "<", "Part", ">", "viewables", ")", "throws", "MessagingException", "{", "body", ".", "mMessageKey", "=", "localMessage", ".", "mId", ";", "StringBuffer", "sbHtml", "=", "null", ";", "StringBuffer", "sbText", "=", "null", ";", "StringBuffer", "sbHtmlReply", "=", "null", ";", "StringBuffer", "sbTextReply", "=", "null", ";", "StringBuffer", "sbIntroText", "=", "null", ";", "for", "(", "Part", "viewable", ":", "viewables", ")", "{", "String", "text", "=", "MimeUtility", ".", "getTextFromPart", "(", "viewable", ")", ";", "String", "[", "]", "replyTags", "=", "viewable", ".", "getHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_BODY_QUOTED_PART", ")", ";", "String", "replyTag", "=", "null", ";", "if", "(", "replyTags", "!", "=", "null", "&", "&", "replyTags", ".", "length", ">", "0", ")", "{", "replyTag", "=", "replyTags", "[", "0", "]", ";", "}", "boolean", "isHtml", "=", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "viewable", ".", "getMimeType", "(", ")", ")", ";", "if", "(", "replyTag", "!", "=", "null", ")", "{", "boolean", "isQuotedReply", "=", "BODY_QUOTED_PART_REPLY", ".", "equalsIgnoreCase", "(", "replyTag", ")", ";", "boolean", "isQuotedForward", "=", "BODY_QUOTED_PART_FORWARD", ".", "equalsIgnoreCase", "(", "replyTag", ")", ";", "boolean", "isQuotedIntro", "=", "BODY_QUOTED_PART_INTRO", ".", "equalsIgnoreCase", "(", "replyTag", ")", ";", "if", "(", "isQuotedReply", "|", "|", "isQuotedForward", ")", "{", "if", "(", "isHtml", ")", "{", "sbHtmlReply", "=", "appendTextPart", "(", "sbHtmlReply", ",", "text", ")", ";", "}", "else", "{", "sbTextReply", "=", "appendTextPart", "(", "sbTextReply", ",", "text", ")", ";", "}", "localMessage", ".", "mFlags", "&", "=", "~", "EmailContent", ".", "Message", ".", "FLAG_TYPE_MASK", ";", "localMessage", ".", "mFlags", "|", "=", "isQuotedReply", "?", "EmailContent", ".", "Message", ".", "FLAG_TYPE_REPLY", ":", "EmailContent", ".", "Message", ".", "FLAG_TYPE_FORWARD", ";", "continue", ";", "}", "if", "(", "isQuotedIntro", ")", "{", "sbIntroText", "=", "appendTextPart", "(", "sbIntroText", ",", "text", ")", ";", "continue", ";", "}", "}", "if", "(", "isHtml", ")", "{", "sbHtml", "=", "appendTextPart", "(", "sbHtml", ",", "text", ")", ";", "}", "else", "{", "sbText", "=", "appendTextPart", "(", "sbText", ",", "text", ")", ";", "}", "}", "if", "(", "sbText", "!", "=", "null", "&", "&", "sbText", ".", "length", "(", ")", "!", "=", "0", ")", "{", "body", ".", "mTextContent", "=", "sbText", ".", "toString", "(", ")", ";", "}", "if", "(", "sbHtml", "!", "=", "null", "&", "&", "sbHtml", ".", "length", "(", ")", "!", "=", "0", ")", "{", "body", ".", "mHtmlContent", "=", "sbHtml", ".", "toString", "(", ")", ";", "}", "if", "(", "sbHtmlReply", "!", "=", "null", "&", "&", "sbHtmlReply", ".", "length", "(", ")", "!", "=", "0", ")", "{", "body", ".", "mHtmlReply", "=", "sbHtmlReply", ".", "toString", "(", ")", ";", "}", "if", "(", "sbTextReply", "!", "=", "null", "&", "&", "sbTextReply", ".", "length", "(", ")", "!", "=", "0", ")", "{", "body", ".", "mTextReply", "=", "sbTextReply", ".", "toString", "(", ")", ";", "}", "if", "(", "sbIntroText", "!", "=", "null", "&", "&", "sbIntroText", ".", "length", "(", ")", "!", "=", "0", ")", "{", "body", ".", "mIntroText", "=", "sbIntroText", ".", "toString", "(", ")", ";", "}", "return", "true", ";", "}", "</s>"]
["<s>", "private", "static", "StringBuffer", "appendTextPart", "(", "StringBuffer", "sb", ",", "String", "newText", ")", "{", "if", "(", "newText", "=", "=", "null", ")", "{", "return", "sb", ";", "}", "else", "if", "(", "sb", "=", "=", "null", ")", "{", "sb", "=", "new", "StringBuffer", "(", "newText", ")", ";", "}", "else", "{", "if", "(", "sb", ".", "length", "(", ")", ">", "0", ")", "{", "sb", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "}", "sb", ".", "append", "(", "newText", ")", ";", "}", "return", "sb", ";", "}", "</s>"]
["<s>", "public", "static", "void", "updateAttachments", "(", "Context", "context", ",", "EmailContent", ".", "Message", "localMessage", ",", "ArrayList", "<", "Part", ">", "attachments", ")", "throws", "MessagingException", ",", "IOException", "{", "localMessage", ".", "mAttachments", "=", "null", ";", "for", "(", "Part", "attachmentPart", ":", "attachments", ")", "{", "addOneAttachment", "(", "context", ",", "localMessage", ",", "attachmentPart", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "void", "addOneAttachment", "(", "Context", "context", ",", "EmailContent", ".", "Message", "localMessage", ",", "Part", "part", ")", "throws", "MessagingException", ",", "IOException", "{", "Attachment", "localAttachment", "=", "new", "Attachment", "(", ")", ";", "String", "contentType", "=", "MimeUtility", ".", "unfoldAndDecode", "(", "part", ".", "getContentType", "(", ")", ")", ";", "String", "name", "=", "MimeUtility", ".", "getHeaderParameter", "(", "contentType", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "name", "=", "=", "null", ")", "{", "String", "contentDisposition", "=", "MimeUtility", ".", "unfoldAndDecode", "(", "part", ".", "getContentType", "(", ")", ")", ";", "name", "=", "MimeUtility", ".", "getHeaderParameter", "(", "contentDisposition", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "long", "size", "=", "0", ";", "String", "disposition", "=", "part", ".", "getDisposition", "(", ")", ";", "if", "(", "disposition", "!", "=", "null", ")", "{", "String", "s", "=", "MimeUtility", ".", "getHeaderParameter", "(", "disposition", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "s", "!", "=", "null", ")", "{", "size", "=", "Long", ".", "parseLong", "(", "s", ")", ";", "}", "}", "String", "[", "]", "partIds", "=", "part", ".", "getHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_ATTACHMENT_STORE_DATA", ")", ";", "String", "partId", "=", "partIds", "!", "=", "null", "?", "partIds", "[", "0", "]", ":", "null", ";", "localAttachment", ".", "mFileName", "=", "MimeUtility", ".", "getHeaderParameter", "(", "contentType", ",", "\"", "<STR_LIT>", "\"", ")", ";", "localAttachment", ".", "mMimeType", "=", "part", ".", "getMimeType", "(", ")", ";", "localAttachment", ".", "mSize", "=", "size", ";", "localAttachment", ".", "mContentId", "=", "part", ".", "getContentId", "(", ")", ";", "localAttachment", ".", "mContentUri", "=", "null", ";", "localAttachment", ".", "mMessageKey", "=", "localMessage", ".", "mId", ";", "localAttachment", ".", "mLocation", "=", "partId", ";", "localAttachment", ".", "mEncoding", "=", "\"", "<STR_LIT:B>", "\"", ";", "if", "(", "DEBUG_ATTACHMENTS", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "localAttachment", ")", ";", "}", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "MESSAGE_ID_URI", ",", "localMessage", ".", "mId", ")", ";", "Cursor", "cursor", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "Attachment", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "boolean", "attachmentFoundInDb", "=", "false", ";", "try", "{", "while", "(", "cursor", ".", "moveToNext", "(", ")", ")", "{", "Attachment", "dbAttachment", "=", "new", "Attachment", "(", ")", ".", "restore", "(", "cursor", ")", ";", "if", "(", "stringNotEqual", "(", "dbAttachment", ".", "mFileName", ",", "localAttachment", ".", "mFileName", ")", ")", "continue", ";", "if", "(", "stringNotEqual", "(", "dbAttachment", ".", "mMimeType", ",", "localAttachment", ".", "mMimeType", ")", ")", "continue", ";", "if", "(", "stringNotEqual", "(", "dbAttachment", ".", "mContentId", ",", "localAttachment", ".", "mContentId", ")", ")", "continue", ";", "if", "(", "stringNotEqual", "(", "dbAttachment", ".", "mLocation", ",", "localAttachment", ".", "mLocation", ")", ")", "continue", ";", "attachmentFoundInDb", "=", "true", ";", "localAttachment", ".", "mId", "=", "dbAttachment", ".", "mId", ";", "if", "(", "DEBUG_ATTACHMENTS", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "dbAttachment", ")", ";", "}", "break", ";", "}", "}", "finally", "{", "cursor", ".", "close", "(", ")", ";", "}", "if", "(", "!", "attachmentFoundInDb", ")", "{", "localAttachment", ".", "save", "(", "context", ")", ";", "}", "saveAttachmentBody", "(", "context", ",", "part", ",", "localAttachment", ",", "localMessage", ".", "mAccountKey", ")", ";", "if", "(", "localMessage", ".", "mAttachments", "=", "=", "null", ")", "{", "localMessage", ".", "mAttachments", "=", "new", "ArrayList", "<", "Attachment", ">", "(", ")", ";", "}", "localMessage", ".", "mAttachments", ".", "add", "(", "localAttachment", ")", ";", "localMessage", ".", "mFlagAttachment", "=", "true", ";", "}", "</s>"]
["<s>", "static", "boolean", "stringNotEqual", "(", "String", "a", ",", "String", "b", ")", "{", "if", "(", "a", "=", "=", "null", "&", "&", "b", "=", "=", "null", ")", "return", "false", ";", "if", "(", "a", "=", "=", "null", ")", "a", "=", "\"", "\"", ";", "if", "(", "b", "=", "=", "null", ")", "b", "=", "\"", "\"", ";", "return", "!", "a", ".", "equals", "(", "b", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "saveAttachmentBody", "(", "Context", "context", ",", "Part", "part", ",", "Attachment", "localAttachment", ",", "long", "accountId", ")", "throws", "MessagingException", ",", "IOException", "{", "if", "(", "part", ".", "getBody", "(", ")", "!", "=", "null", ")", "{", "long", "attachmentId", "=", "localAttachment", ".", "mId", ";", "InputStream", "in", "=", "part", ".", "getBody", "(", ")", ".", "getInputStream", "(", ")", ";", "File", "saveIn", "=", "AttachmentProvider", ".", "getAttachmentDirectory", "(", "context", ",", "accountId", ")", ";", "if", "(", "!", "saveIn", ".", "exists", "(", ")", ")", "{", "saveIn", ".", "mkdirs", "(", ")", ";", "}", "File", "saveAs", "=", "AttachmentProvider", ".", "getAttachmentFilename", "(", "context", ",", "accountId", ",", "attachmentId", ")", ";", "saveAs", ".", "createNewFile", "(", ")", ";", "FileOutputStream", "out", "=", "new", "FileOutputStream", "(", "saveAs", ")", ";", "long", "copySize", "=", "IOUtils", ".", "copy", "(", "in", ",", "out", ")", ";", "in", ".", "close", "(", ")", ";", "out", ".", "close", "(", ")", ";", "String", "contentUriString", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "accountId", ",", "attachmentId", ")", ".", "toString", "(", ")", ";", "localAttachment", ".", "mSize", "=", "copySize", ";", "localAttachment", ".", "mContentUri", "=", "contentUriString", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "AttachmentColumns", ".", "SIZE", ",", "copySize", ")", ";", "cv", ".", "put", "(", "AttachmentColumns", ".", "CONTENT_URI", ",", "contentUriString", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "CONTENT_URI", ",", "attachmentId", ")", ";", "context", ".", "getContentResolver", "(", ")", ".", "update", "(", "uri", ",", "cv", ",", "null", ",", "null", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "Message", "makeMessage", "(", "Context", "context", ",", "EmailContent", ".", "Message", "localMessage", ")", "throws", "MessagingException", "{", "MimeMessage", "message", "=", "new", "MimeMessage", "(", ")", ";", "message", ".", "setSubject", "(", "localMessage", ".", "mSubject", "=", "=", "null", "?", "\"", "\"", ":", "localMessage", ".", "mSubject", ")", ";", "Address", "[", "]", "from", "=", "Address", ".", "unpack", "(", "localMessage", ".", "mFrom", ")", ";", "if", "(", "from", ".", "length", ">", "0", ")", "{", "message", ".", "setFrom", "(", "from", "[", "0", "]", ")", ";", "}", "message", ".", "setSentDate", "(", "new", "Date", "(", "localMessage", ".", "mTimeStamp", ")", ")", ";", "message", ".", "setUid", "(", "localMessage", ".", "mServerId", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "DELETED", ",", "localMessage", ".", "mFlagLoaded", "=", "=", "EmailContent", ".", "Message", ".", "FLAG_LOADED_DELETED", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "SEEN", ",", "localMessage", ".", "mFlagRead", ")", ";", "message", ".", "setFlag", "(", "Flag", ".", "FLAGGED", ",", "localMessage", ".", "mFlagFavorite", ")", ";", "message", ".", "setRecipients", "(", "RecipientType", ".", "TO", ",", "Address", ".", "unpack", "(", "localMessage", ".", "mTo", ")", ")", ";", "message", ".", "setRecipients", "(", "RecipientType", ".", "CC", ",", "Address", ".", "unpack", "(", "localMessage", ".", "mCc", ")", ")", ";", "message", ".", "setRecipients", "(", "RecipientType", ".", "BCC", ",", "Address", ".", "unpack", "(", "localMessage", ".", "mBcc", ")", ")", ";", "message", ".", "setReplyTo", "(", "Address", ".", "unpack", "(", "localMessage", ".", "mReplyTo", ")", ")", ";", "message", ".", "setInternalDate", "(", "new", "Date", "(", "localMessage", ".", "mServerTimeStamp", ")", ")", ";", "message", ".", "setMessageId", "(", "localMessage", ".", "mMessageId", ")", ";", "message", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "MimeMultipart", "mp", "=", "new", "MimeMultipart", "(", ")", ";", "mp", ".", "setSubType", "(", "\"", "<STR_LIT>", "\"", ")", ";", "message", ".", "setBody", "(", "mp", ")", ";", "try", "{", "addTextBodyPart", "(", "mp", ",", "\"", "<STR_LIT>", "\"", ",", "null", ",", "EmailContent", ".", "Body", ".", "restoreBodyHtmlWithMessageId", "(", "context", ",", "localMessage", ".", "mId", ")", ")", ";", "}", "catch", "(", "RuntimeException", "rte", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "rte", ".", "toString", "(", ")", ")", ";", "}", "try", "{", "addTextBodyPart", "(", "mp", ",", "\"", "<STR_LIT>", "\"", ",", "null", ",", "EmailContent", ".", "Body", ".", "restoreBodyTextWithMessageId", "(", "context", ",", "localMessage", ".", "mId", ")", ")", ";", "}", "catch", "(", "RuntimeException", "rte", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "rte", ".", "toString", "(", ")", ")", ";", "}", "boolean", "isReply", "=", "(", "localMessage", ".", "mFlags", "&", "EmailContent", ".", "Message", ".", "FLAG_TYPE_REPLY", ")", "!", "=", "0", ";", "boolean", "isForward", "=", "(", "localMessage", ".", "mFlags", "&", "EmailContent", ".", "Message", ".", "FLAG_TYPE_FORWARD", ")", "!", "=", "0", ";", "if", "(", "isReply", "|", "|", "isForward", ")", "{", "try", "{", "addTextBodyPart", "(", "mp", ",", "\"", "<STR_LIT>", "\"", ",", "BODY_QUOTED_PART_INTRO", ",", "EmailContent", ".", "Body", ".", "restoreIntroTextWithMessageId", "(", "context", ",", "localMessage", ".", "mId", ")", ")", ";", "}", "catch", "(", "RuntimeException", "rte", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "rte", ".", "toString", "(", ")", ")", ";", "}", "String", "replyTag", "=", "isReply", "?", "BODY_QUOTED_PART_REPLY", ":", "BODY_QUOTED_PART_FORWARD", ";", "try", "{", "addTextBodyPart", "(", "mp", ",", "\"", "<STR_LIT>", "\"", ",", "replyTag", ",", "EmailContent", ".", "Body", ".", "restoreReplyHtmlWithMessageId", "(", "context", ",", "localMessage", ".", "mId", ")", ")", ";", "}", "catch", "(", "RuntimeException", "rte", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "rte", ".", "toString", "(", ")", ")", ";", "}", "try", "{", "addTextBodyPart", "(", "mp", ",", "\"", "<STR_LIT>", "\"", ",", "replyTag", ",", "EmailContent", ".", "Body", ".", "restoreReplyTextWithMessageId", "(", "context", ",", "localMessage", ".", "mId", ")", ")", ";", "}", "catch", "(", "RuntimeException", "rte", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "rte", ".", "toString", "(", ")", ")", ";", "}", "}", "return", "message", ";", "}", "</s>"]
["<s>", "private", "static", "void", "addTextBodyPart", "(", "MimeMultipart", "mp", ",", "String", "contentType", ",", "String", "quotedPartTag", ",", "String", "partText", ")", "throws", "MessagingException", "{", "if", "(", "partText", "=", "=", "null", ")", "{", "return", ";", "}", "TextBody", "body", "=", "new", "TextBody", "(", "partText", ")", ";", "MimeBodyPart", "bp", "=", "new", "MimeBodyPart", "(", "body", ",", "contentType", ")", ";", "if", "(", "quotedPartTag", "!", "=", "null", ")", "{", "bp", ".", "addHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_BODY_QUOTED_PART", ",", "quotedPartTag", ")", ";", "}", "mp", ".", "addBodyPart", "(", "bp", ")", ";", "}", "</s>"]
["<s>", "protected", "Controller", "(", "Context", "_context", ")", "{", "mContext", "=", "_context", ";", "mProviderContext", "=", "_context", ";", "mLegacyController", "=", "MessagingController", ".", "getInstance", "(", "mContext", ")", ";", "mLegacyController", ".", "addListener", "(", "mLegacyListener", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "static", "Controller", "getInstance", "(", "Context", "_context", ")", "{", "if", "(", "sInstance", "=", "=", "null", ")", "{", "sInstance", "=", "new", "Controller", "(", "_context", ")", ";", "}", "return", "sInstance", ";", "}", "</s>"]
["<s>", "public", "void", "setProviderContext", "(", "Context", "providerContext", ")", "{", "mProviderContext", "=", "providerContext", ";", "}", "</s>"]
["<s>", "public", "void", "addResultCallback", "(", "Result", "listener", ")", "{", "synchronized", "(", "mListeners", ")", "{", "mListeners", ".", "add", "(", "listener", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "removeResultCallback", "(", "Result", "listener", ")", "{", "synchronized", "(", "mListeners", ")", "{", "mListeners", ".", "remove", "(", "listener", ")", ";", "}", "}", "</s>"]
["<s>", "private", "boolean", "isActiveResultCallback", "(", "Result", "listener", ")", "{", "synchronized", "(", "mListeners", ")", "{", "return", "mListeners", ".", "contains", "(", "listener", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "serviceLogging", "(", "int", "debugEnabled", ")", "{", "IEmailService", "service", "=", "new", "EmailServiceProxy", "(", "mContext", ",", "SyncManager", ".", "class", ",", "mServiceCallback", ")", ";", "try", "{", "service", ".", "setLogging", "(", "debugEnabled", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "Log", ".", "d", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "updateMailboxList", "(", "final", "long", "accountId", ",", "final", "Result", "callback", ")", "{", "IEmailService", "service", "=", "getServiceForAccount", "(", "accountId", ")", ";", "if", "(", "service", "!", "=", "null", ")", "{", "try", "{", "service", ".", "updateFolderList", "(", "accountId", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "Log", ".", "d", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "}", "}", "else", "{", "new", "Thread", "(", ")", "{", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "listFolders", "(", "accountId", ",", "mLegacyListener", ")", ";", "}", "}", ".", "start", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "listFolders", "(", "accountId", ",", "mLegacyListener", ")", ";", "}", "</s>"]
["<s>", "public", "void", "serviceCheckMail", "(", "final", "long", "accountId", ",", "final", "long", "mailboxId", ",", "final", "long", "tag", ",", "final", "Result", "callback", ")", "{", "IEmailService", "service", "=", "getServiceForAccount", "(", "accountId", ")", ";", "if", "(", "service", "!", "=", "null", ")", "{", "callback", ".", "serviceCheckMailCallback", "(", "null", ",", "accountId", ",", "mailboxId", ",", "<NUM_LIT:100>", ",", "tag", ")", ";", "}", "else", "{", "new", "Thread", "(", ")", "{", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "checkMail", "(", "accountId", ",", "tag", ",", "mLegacyListener", ")", ";", "}", "}", ".", "start", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "checkMail", "(", "accountId", ",", "tag", ",", "mLegacyListener", ")", ";", "}", "</s>"]
["<s>", "public", "void", "updateMailbox", "(", "final", "long", "accountId", ",", "final", "long", "mailboxId", ",", "final", "Result", "callback", ")", "{", "IEmailService", "service", "=", "getServiceForAccount", "(", "accountId", ")", ";", "if", "(", "service", "!", "=", "null", ")", "{", "try", "{", "service", ".", "startSync", "(", "mailboxId", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "Log", ".", "d", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "}", "}", "else", "{", "new", "Thread", "(", ")", "{", "@", "Override", "public", "void", "run", "(", ")", "{", "Account", "account", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mProviderContext", ",", "accountId", ")", ";", "Mailbox", "mailbox", "=", "EmailContent", ".", "Mailbox", ".", "restoreMailboxWithId", "(", "mProviderContext", ",", "mailboxId", ")", ";", "mLegacyController", ".", "synchronizeMailbox", "(", "account", ",", "mailbox", ",", "mLegacyListener", ")", ";", "}", "}", ".", "start", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "Account", "account", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mProviderContext", ",", "accountId", ")", ";", "Mailbox", "mailbox", "=", "EmailContent", ".", "Mailbox", ".", "restoreMailboxWithId", "(", "mProviderContext", ",", "mailboxId", ")", ";", "mLegacyController", ".", "synchronizeMailbox", "(", "account", ",", "mailbox", ",", "mLegacyListener", ")", ";", "}", "</s>"]
["<s>", "public", "void", "loadMessageForView", "(", "final", "long", "messageId", ",", "final", "Result", "callback", ")", "{", "IEmailService", "service", "=", "getServiceForMessage", "(", "messageId", ")", ";", "if", "(", "service", "!", "=", "null", ")", "{", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "messageId", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "MessageColumns", ".", "FLAG_LOADED", ",", "Message", ".", "FLAG_LOADED_COMPLETE", ")", ";", "mProviderContext", ".", "getContentResolver", "(", ")", ".", "update", "(", "uri", ",", "cv", ",", "null", ",", "null", ")", ";", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "loadMessageForViewCallback", "(", "null", ",", "messageId", ",", "<NUM_LIT:100>", ")", ";", "}", "}", "}", "else", "{", "new", "Thread", "(", ")", "{", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "loadMessageForView", "(", "messageId", ",", "mLegacyListener", ")", ";", "}", "}", ".", "start", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "loadMessageForView", "(", "messageId", ",", "mLegacyListener", ")", ";", "}", "</s>"]
["<s>", "public", "void", "saveToMailbox", "(", "final", "EmailContent", ".", "Message", "message", ",", "final", "int", "mailboxType", ")", "{", "long", "accountId", "=", "message", ".", "mAccountKey", ";", "long", "mailboxId", "=", "findOrCreateMailboxOfType", "(", "accountId", ",", "mailboxType", ")", ";", "message", ".", "mMailboxKey", "=", "mailboxId", ";", "message", ".", "save", "(", "mProviderContext", ")", ";", "}", "</s>"]
["<s>", "public", "long", "findOrCreateMailboxOfType", "(", "long", "accountId", ",", "int", "mailboxType", ")", "{", "if", "(", "accountId", "<", "0", "|", "|", "mailboxType", "<", "0", ")", "{", "return", "Mailbox", ".", "NO_MAILBOX", ";", "}", "long", "mailboxId", "=", "Mailbox", ".", "findMailboxOfType", "(", "mProviderContext", ",", "accountId", ",", "mailboxType", ")", ";", "return", "mailboxId", "=", "=", "Mailbox", ".", "NO_MAILBOX", "?", "createMailbox", "(", "accountId", ",", "mailboxType", ")", ":", "mailboxId", ";", "}", "</s>"]
["<s>", "String", "getMailboxServerName", "(", "int", "mailboxType", ")", "{", "int", "resId", "=", "-", "1", ";", "switch", "(", "mailboxType", ")", "{", "case", "Mailbox", ".", "TYPE_INBOX", ":", "resId", "=", "R", ".", "string", ".", "mailbox_name_server_inbox", ";", "break", ";", "case", "Mailbox", ".", "TYPE_OUTBOX", ":", "resId", "=", "R", ".", "string", ".", "mailbox_name_server_outbox", ";", "break", ";", "case", "Mailbox", ".", "TYPE_DRAFTS", ":", "resId", "=", "R", ".", "string", ".", "mailbox_name_server_drafts", ";", "break", ";", "case", "Mailbox", ".", "TYPE_TRASH", ":", "resId", "=", "R", ".", "string", ".", "mailbox_name_server_trash", ";", "break", ";", "case", "Mailbox", ".", "TYPE_SENT", ":", "resId", "=", "R", ".", "string", ".", "mailbox_name_server_sent", ";", "break", ";", "case", "Mailbox", ".", "TYPE_JUNK", ":", "resId", "=", "R", ".", "string", ".", "mailbox_name_server_junk", ";", "break", ";", "}", "return", "resId", "!", "=", "-", "1", "?", "mContext", ".", "getString", "(", "resId", ")", ":", "\"", "\"", ";", "}", "</s>"]
["<s>", "long", "createMailbox", "(", "long", "accountId", ",", "int", "mailboxType", ")", "{", "if", "(", "accountId", "<", "0", "|", "|", "mailboxType", "<", "0", ")", "{", "String", "mes", "=", "\"", "<STR_LIT>", "\"", "+", "accountId", "+", "<CHAR_LIT>", "+", "mailboxType", ";", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "mes", ")", ";", "throw", "new", "RuntimeException", "(", "mes", ")", ";", "}", "Mailbox", "box", "=", "new", "Mailbox", "(", ")", ";", "box", ".", "mAccountKey", "=", "accountId", ";", "box", ".", "mType", "=", "mailboxType", ";", "box", ".", "mSyncInterval", "=", "EmailContent", ".", "Account", ".", "CHECK_INTERVAL_NEVER", ";", "box", ".", "mFlagVisible", "=", "true", ";", "box", ".", "mDisplayName", "=", "getMailboxServerName", "(", "mailboxType", ")", ";", "box", ".", "save", "(", "mProviderContext", ")", ";", "return", "box", ".", "mId", ";", "}", "</s>"]
["<s>", "public", "void", "sendMessage", "(", "long", "messageId", ",", "long", "accountId", ")", "{", "ContentResolver", "resolver", "=", "mProviderContext", ".", "getContentResolver", "(", ")", ";", "if", "(", "accountId", "=", "=", "-", "1", ")", "{", "accountId", "=", "lookupAccountForMessage", "(", "messageId", ")", ";", "}", "if", "(", "accountId", "=", "=", "-", "1", ")", "{", "if", "(", "Email", ".", "LOGD", ")", "{", "Email", ".", "log", "(", "\"", "<STR_LIT>", "\"", "+", "messageId", ")", ";", "}", "return", ";", "}", "long", "outboxId", "=", "findOrCreateMailboxOfType", "(", "accountId", ",", "Mailbox", ".", "TYPE_OUTBOX", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "MessageColumns", ".", "MAILBOX_KEY", ",", "outboxId", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "messageId", ")", ";", "resolver", ".", "update", "(", "uri", ",", "cv", ",", "null", ",", "null", ")", ";", "IEmailService", "service", "=", "getServiceForMessage", "(", "messageId", ")", ";", "if", "(", "service", "!", "=", "null", ")", "{", "try", "{", "service", ".", "setCallback", "(", "mServiceCallback", ")", ";", "}", "catch", "(", "RemoteException", "re", ")", "{", "}", "}", "else", "{", "final", "EmailContent", ".", "Account", "account", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mProviderContext", ",", "accountId", ")", ";", "final", "long", "sentboxId", "=", "findOrCreateMailboxOfType", "(", "accountId", ",", "Mailbox", ".", "TYPE_SENT", ")", ";", "new", "Thread", "(", ")", "{", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "sendPendingMessages", "(", "account", ",", "sentboxId", ",", "mLegacyListener", ")", ";", "}", "}", ".", "start", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "sendPendingMessages", "(", "account", ",", "sentboxId", ",", "mLegacyListener", ")", ";", "}", "</s>"]
["<s>", "public", "void", "sendPendingMessages", "(", "long", "accountId", ",", "Result", "callback", ")", "{", "final", "long", "outboxId", "=", "Mailbox", ".", "findMailboxOfType", "(", "mProviderContext", ",", "accountId", ",", "Mailbox", ".", "TYPE_OUTBOX", ")", ";", "if", "(", "outboxId", "=", "=", "Mailbox", ".", "NO_MAILBOX", ")", "{", "return", ";", "}", "IEmailService", "service", "=", "getServiceForAccount", "(", "accountId", ")", ";", "if", "(", "service", "!", "=", "null", ")", "{", "try", "{", "service", ".", "startSync", "(", "outboxId", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "Log", ".", "d", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "}", "}", "else", "{", "final", "EmailContent", ".", "Account", "account", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mProviderContext", ",", "accountId", ")", ";", "final", "long", "sentboxId", "=", "findOrCreateMailboxOfType", "(", "accountId", ",", "Mailbox", ".", "TYPE_SENT", ")", ";", "new", "Thread", "(", ")", "{", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "sendPendingMessages", "(", "account", ",", "sentboxId", ",", "mLegacyListener", ")", ";", "}", "}", ".", "start", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "sendPendingMessages", "(", "account", ",", "sentboxId", ",", "mLegacyListener", ")", ";", "}", "</s>"]
["<s>", "public", "void", "resetVisibleLimits", "(", ")", "{", "new", "Thread", "(", ")", "{", "@", "Override", "public", "void", "run", "(", ")", "{", "ContentResolver", "resolver", "=", "mProviderContext", ".", "getContentResolver", "(", ")", ";", "Cursor", "c", "=", "null", ";", "try", "{", "c", "=", "resolver", ".", "query", "(", "Account", ".", "CONTENT_URI", ",", "Account", ".", "ID_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "accountId", "=", "c", ".", "getLong", "(", "Account", ".", "ID_PROJECTION_COLUMN", ")", ";", "Account", "account", "=", "Account", ".", "restoreAccountWithId", "(", "mProviderContext", ",", "accountId", ")", ";", "if", "(", "account", "!", "=", "null", ")", "{", "Store", ".", "StoreInfo", "info", "=", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "account", ".", "getStoreUri", "(", "mProviderContext", ")", ",", "mContext", ")", ";", "if", "(", "info", "!", "=", "null", "&", "&", "info", ".", "mVisibleLimitDefault", ">", "0", ")", "{", "int", "limit", "=", "info", ".", "mVisibleLimitDefault", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "MailboxColumns", ".", "VISIBLE_LIMIT", ",", "limit", ")", ";", "resolver", ".", "update", "(", "Mailbox", ".", "CONTENT_URI", ",", "cv", ",", "MailboxColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "accountId", ")", "}", ")", ";", "}", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "}", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "ContentResolver", "resolver", "=", "mProviderContext", ".", "getContentResolver", "(", ")", ";", "Cursor", "c", "=", "null", ";", "try", "{", "c", "=", "resolver", ".", "query", "(", "Account", ".", "CONTENT_URI", ",", "Account", ".", "ID_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "accountId", "=", "c", ".", "getLong", "(", "Account", ".", "ID_PROJECTION_COLUMN", ")", ";", "Account", "account", "=", "Account", ".", "restoreAccountWithId", "(", "mProviderContext", ",", "accountId", ")", ";", "if", "(", "account", "!", "=", "null", ")", "{", "Store", ".", "StoreInfo", "info", "=", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "account", ".", "getStoreUri", "(", "mProviderContext", ")", ",", "mContext", ")", ";", "if", "(", "info", "!", "=", "null", "&", "&", "info", ".", "mVisibleLimitDefault", ">", "0", ")", "{", "int", "limit", "=", "info", ".", "mVisibleLimitDefault", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "MailboxColumns", ".", "VISIBLE_LIMIT", ",", "limit", ")", ";", "resolver", ".", "update", "(", "Mailbox", ".", "CONTENT_URI", ",", "cv", ",", "MailboxColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "accountId", ")", "}", ")", ";", "}", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "loadMoreMessages", "(", "final", "long", "mailboxId", ",", "Result", "callback", ")", "{", "new", "Thread", "(", ")", "{", "@", "Override", "public", "void", "run", "(", ")", "{", "Mailbox", "mailbox", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "mProviderContext", ",", "mailboxId", ")", ";", "if", "(", "mailbox", "=", "=", "null", ")", "{", "return", ";", "}", "Account", "account", "=", "Account", ".", "restoreAccountWithId", "(", "mProviderContext", ",", "mailbox", ".", "mAccountKey", ")", ";", "if", "(", "account", "=", "=", "null", ")", "{", "return", ";", "}", "Store", ".", "StoreInfo", "info", "=", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "account", ".", "getStoreUri", "(", "mProviderContext", ")", ",", "mContext", ")", ";", "if", "(", "info", "!", "=", "null", "&", "&", "info", ".", "mVisibleLimitIncrement", ">", "0", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", ";", "cv", ".", "put", "(", "EmailContent", ".", "FIELD_COLUMN_NAME", ",", "MailboxColumns", ".", "VISIBLE_LIMIT", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "ADD_COLUMN_NAME", ",", "info", ".", "mVisibleLimitIncrement", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "ADD_TO_FIELD_URI", ",", "mailboxId", ")", ";", "mProviderContext", ".", "getContentResolver", "(", ")", ".", "update", "(", "uri", ",", "cv", ",", "null", ",", "null", ")", ";", "mailbox", ".", "mVisibleLimit", "+", "=", "info", ".", "mVisibleLimitIncrement", ";", "mLegacyController", ".", "synchronizeMailbox", "(", "account", ",", "mailbox", ",", "mLegacyListener", ")", ";", "}", "}", "}", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "Mailbox", "mailbox", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "mProviderContext", ",", "mailboxId", ")", ";", "if", "(", "mailbox", "=", "=", "null", ")", "{", "return", ";", "}", "Account", "account", "=", "Account", ".", "restoreAccountWithId", "(", "mProviderContext", ",", "mailbox", ".", "mAccountKey", ")", ";", "if", "(", "account", "=", "=", "null", ")", "{", "return", ";", "}", "Store", ".", "StoreInfo", "info", "=", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "account", ".", "getStoreUri", "(", "mProviderContext", ")", ",", "mContext", ")", ";", "if", "(", "info", "!", "=", "null", "&", "&", "info", ".", "mVisibleLimitIncrement", ">", "0", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", ";", "cv", ".", "put", "(", "EmailContent", ".", "FIELD_COLUMN_NAME", ",", "MailboxColumns", ".", "VISIBLE_LIMIT", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "ADD_COLUMN_NAME", ",", "info", ".", "mVisibleLimitIncrement", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "ADD_TO_FIELD_URI", ",", "mailboxId", ")", ";", "mProviderContext", ".", "getContentResolver", "(", ")", ".", "update", "(", "uri", ",", "cv", ",", "null", ",", "null", ")", ";", "mailbox", ".", "mVisibleLimit", "+", "=", "info", ".", "mVisibleLimitIncrement", ";", "mLegacyController", ".", "synchronizeMailbox", "(", "account", ",", "mailbox", ",", "mLegacyListener", ")", ";", "}", "}", "</s>"]
["<s>", "private", "long", "lookupAccountForMessage", "(", "long", "messageId", ")", "{", "ContentResolver", "resolver", "=", "mProviderContext", ".", "getContentResolver", "(", ")", ";", "Cursor", "c", "=", "resolver", ".", "query", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "MESSAGEID_TO_ACCOUNTID_PROJECTION", ",", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "messageId", ")", "}", ",", "null", ")", ";", "try", "{", "return", "c", ".", "moveToFirst", "(", ")", "?", "c", ".", "getLong", "(", "MESSAGEID_TO_ACCOUNTID_COLUMN_ACCOUNTID", ")", ":", "-", "1", ";", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "deleteAttachment", "(", "long", "attachmentId", ")", "{", "ContentResolver", "resolver", "=", "mProviderContext", ".", "getContentResolver", "(", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "CONTENT_URI", ",", "attachmentId", ")", ";", "resolver", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "deleteMessage", "(", "long", "messageId", ",", "long", "accountId", ")", "{", "ContentResolver", "resolver", "=", "mProviderContext", ".", "getContentResolver", "(", ")", ";", "if", "(", "accountId", "=", "=", "-", "1", ")", "{", "accountId", "=", "lookupAccountForMessage", "(", "messageId", ")", ";", "}", "if", "(", "accountId", "=", "=", "-", "1", ")", "{", "return", ";", "}", "long", "trashMailboxId", "=", "findOrCreateMailboxOfType", "(", "accountId", ",", "Mailbox", ".", "TYPE_TRASH", ")", ";", "long", "sourceMailboxId", "=", "-", "1", ";", "Cursor", "c", "=", "resolver", ".", "query", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "MESSAGEID_TO_MAILBOXID_PROJECTION", ",", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "messageId", ")", "}", ",", "null", ")", ";", "try", "{", "sourceMailboxId", "=", "c", ".", "moveToFirst", "(", ")", "?", "c", ".", "getLong", "(", "MESSAGEID_TO_MAILBOXID_COLUMN_MAILBOXID", ")", ":", "-", "1", ";", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "AttachmentProvider", ".", "deleteAllAttachmentFiles", "(", "mProviderContext", ",", "accountId", ",", "messageId", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "SYNCED_CONTENT_URI", ",", "messageId", ")", ";", "if", "(", "sourceMailboxId", "=", "=", "trashMailboxId", ")", "{", "resolver", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "}", "else", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "MessageColumns", ".", "MAILBOX_KEY", ",", "trashMailboxId", ")", ";", "resolver", ".", "update", "(", "uri", ",", "cv", ",", "null", ",", "null", ")", ";", "}", "Account", "account", "=", "Account", ".", "restoreAccountWithId", "(", "mProviderContext", ",", "accountId", ")", ";", "if", "(", "isMessagingController", "(", "account", ")", ")", "{", "final", "long", "syncAccountId", "=", "accountId", ";", "new", "Thread", "(", ")", "{", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "processPendingActions", "(", "syncAccountId", ")", ";", "}", "}", ".", "start", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "processPendingActions", "(", "syncAccountId", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setMessageRead", "(", "final", "long", "messageId", ",", "boolean", "isRead", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "MessageColumns", ".", "FLAG_READ", ",", "isRead", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "SYNCED_CONTENT_URI", ",", "messageId", ")", ";", "mProviderContext", ".", "getContentResolver", "(", ")", ".", "update", "(", "uri", ",", "cv", ",", "null", ",", "null", ")", ";", "final", "Message", "message", "=", "Message", ".", "restoreMessageWithId", "(", "mProviderContext", ",", "messageId", ")", ";", "Account", "account", "=", "Account", ".", "restoreAccountWithId", "(", "mProviderContext", ",", "message", ".", "mAccountKey", ")", ";", "if", "(", "isMessagingController", "(", "account", ")", ")", "{", "new", "Thread", "(", ")", "{", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "processPendingActions", "(", "message", ".", "mAccountKey", ")", ";", "}", "}", ".", "start", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "processPendingActions", "(", "message", ".", "mAccountKey", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setMessageFavorite", "(", "final", "long", "messageId", ",", "boolean", "isFavorite", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "EmailContent", ".", "MessageColumns", ".", "FLAG_FAVORITE", ",", "isFavorite", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Message", ".", "SYNCED_CONTENT_URI", ",", "messageId", ")", ";", "mProviderContext", ".", "getContentResolver", "(", ")", ".", "update", "(", "uri", ",", "cv", ",", "null", ",", "null", ")", ";", "final", "Message", "message", "=", "Message", ".", "restoreMessageWithId", "(", "mProviderContext", ",", "messageId", ")", ";", "Account", "account", "=", "Account", ".", "restoreAccountWithId", "(", "mProviderContext", ",", "message", ".", "mAccountKey", ")", ";", "if", "(", "isMessagingController", "(", "account", ")", ")", "{", "new", "Thread", "(", ")", "{", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "processPendingActions", "(", "message", ".", "mAccountKey", ")", ";", "}", "}", ".", "start", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "processPendingActions", "(", "message", ".", "mAccountKey", ")", ";", "}", "</s>"]
["<s>", "public", "void", "loadAttachment", "(", "final", "long", "attachmentId", ",", "final", "long", "messageId", ",", "final", "long", "mailboxId", ",", "final", "long", "accountId", ",", "final", "Result", "callback", ")", "{", "File", "saveToFile", "=", "AttachmentProvider", ".", "getAttachmentFilename", "(", "mProviderContext", ",", "accountId", ",", "attachmentId", ")", ";", "if", "(", "saveToFile", ".", "exists", "(", ")", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "loadAttachmentCallback", "(", "null", ",", "messageId", ",", "attachmentId", ",", "0", ")", ";", "}", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "loadAttachmentCallback", "(", "null", ",", "messageId", ",", "attachmentId", ",", "<NUM_LIT:100>", ")", ";", "}", "}", "return", ";", "}", "Attachment", "attachInfo", "=", "Attachment", ".", "restoreAttachmentWithId", "(", "mProviderContext", ",", "attachmentId", ")", ";", "IEmailService", "service", "=", "getServiceForMessage", "(", "messageId", ")", ";", "if", "(", "service", "!", "=", "null", ")", "{", "try", "{", "service", ".", "loadAttachment", "(", "attachInfo", ".", "mId", ",", "saveToFile", ".", "getAbsolutePath", "(", ")", ",", "AttachmentProvider", ".", "getAttachmentUri", "(", "accountId", ",", "attachmentId", ")", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "Log", ".", "e", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "else", "{", "new", "Thread", "(", ")", "{", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "loadAttachment", "(", "accountId", ",", "messageId", ",", "mailboxId", ",", "attachmentId", ",", "mLegacyListener", ")", ";", "}", "}", ".", "start", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "mLegacyController", ".", "loadAttachment", "(", "accountId", ",", "messageId", ",", "mailboxId", ",", "attachmentId", ",", "mLegacyListener", ")", ";", "}", "</s>"]
["<s>", "private", "IEmailService", "getServiceForMessage", "(", "long", "messageId", ")", "{", "Message", "message", "=", "Message", ".", "restoreMessageWithId", "(", "mProviderContext", ",", "messageId", ")", ";", "return", "getServiceForAccount", "(", "message", ".", "mAccountKey", ")", ";", "}", "</s>"]
["<s>", "private", "IEmailService", "getServiceForAccount", "(", "long", "accountId", ")", "{", "Account", "account", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "mProviderContext", ",", "accountId", ")", ";", "if", "(", "account", "=", "=", "null", "|", "|", "isMessagingController", "(", "account", ")", ")", "{", "return", "null", ";", "}", "else", "{", "return", "new", "EmailServiceProxy", "(", "mContext", ",", "SyncManager", ".", "class", ",", "mServiceCallback", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "isMessagingController", "(", "EmailContent", ".", "Account", "account", ")", "{", "if", "(", "account", "=", "=", "null", ")", "return", "false", ";", "Store", ".", "StoreInfo", "info", "=", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "account", ".", "getStoreUri", "(", "mProviderContext", ")", ",", "mContext", ")", ";", "if", "(", "info", "=", "=", "null", ")", "{", "return", "false", ";", "}", "String", "scheme", "=", "info", ".", "mScheme", ";", "return", "(", "\"", "<STR_LIT:3>", "\"", ".", "equals", "(", "scheme", ")", "|", "|", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "scheme", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "updateMailboxListCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "int", "progress", ")", ";", "</s>"]
["<s>", "public", "void", "updateMailboxCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "mailboxId", ",", "int", "progress", ",", "int", "numNewMessages", ")", ";", "</s>"]
["<s>", "public", "void", "loadMessageForViewCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "int", "progress", ")", ";", "</s>"]
["<s>", "public", "void", "loadAttachmentCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "long", "attachmentId", ",", "int", "progress", ")", ";", "</s>"]
["<s>", "public", "void", "serviceCheckMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "mailboxId", ",", "int", "progress", ",", "long", "tag", ")", ";", "</s>"]
["<s>", "public", "void", "sendMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "messageId", ",", "int", "progress", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "void", "listFoldersStarted", "(", "long", "accountId", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "l", ":", "mListeners", ")", "{", "l", ".", "updateMailboxListCallback", "(", "null", ",", "accountId", ",", "0", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "listFoldersFailed", "(", "long", "accountId", ",", "String", "message", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "l", ":", "mListeners", ")", "{", "l", ".", "updateMailboxListCallback", "(", "new", "MessagingException", "(", "message", ")", ",", "accountId", ",", "0", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "listFoldersFinished", "(", "long", "accountId", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "l", ":", "mListeners", ")", "{", "l", ".", "updateMailboxListCallback", "(", "null", ",", "accountId", ",", "<NUM_LIT:100>", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "synchronizeMailboxStarted", "(", "long", "accountId", ",", "long", "mailboxId", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "l", ":", "mListeners", ")", "{", "l", ".", "updateMailboxCallback", "(", "null", ",", "accountId", ",", "mailboxId", ",", "0", ",", "0", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "synchronizeMailboxFinished", "(", "long", "accountId", ",", "long", "mailboxId", ",", "int", "totalMessagesInMailbox", ",", "int", "numNewMessages", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "l", ":", "mListeners", ")", "{", "l", ".", "updateMailboxCallback", "(", "null", ",", "accountId", ",", "mailboxId", ",", "<NUM_LIT:100>", ",", "numNewMessages", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "synchronizeMailboxFailed", "(", "long", "accountId", ",", "long", "mailboxId", ",", "Exception", "e", ")", "{", "MessagingException", "me", ";", "if", "(", "e", "instanceof", "MessagingException", ")", "{", "me", "=", "(", "MessagingException", ")", "e", ";", "}", "else", "{", "me", "=", "new", "MessagingException", "(", "e", ".", "toString", "(", ")", ")", ";", "}", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "l", ":", "mListeners", ")", "{", "l", ".", "updateMailboxCallback", "(", "me", ",", "accountId", ",", "mailboxId", ",", "0", ",", "0", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "checkMailStarted", "(", "Context", "context", ",", "long", "accountId", ",", "long", "tag", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "l", ":", "mListeners", ")", "{", "l", ".", "serviceCheckMailCallback", "(", "null", ",", "accountId", ",", "-", "1", ",", "0", ",", "tag", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "checkMailFinished", "(", "Context", "context", ",", "long", "accountId", ",", "long", "folderId", ",", "long", "tag", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "l", ":", "mListeners", ")", "{", "l", ".", "serviceCheckMailCallback", "(", "null", ",", "accountId", ",", "folderId", ",", "<NUM_LIT:100>", ",", "tag", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "loadMessageForViewStarted", "(", "long", "messageId", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "loadMessageForViewCallback", "(", "null", ",", "messageId", ",", "0", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "loadMessageForViewFinished", "(", "long", "messageId", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "loadMessageForViewCallback", "(", "null", ",", "messageId", ",", "<NUM_LIT:100>", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "loadMessageForViewFailed", "(", "long", "messageId", ",", "String", "message", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "loadMessageForViewCallback", "(", "new", "MessagingException", "(", "message", ")", ",", "messageId", ",", "0", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "loadAttachmentStarted", "(", "long", "accountId", ",", "long", "messageId", ",", "long", "attachmentId", ",", "boolean", "requiresDownload", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "loadAttachmentCallback", "(", "null", ",", "messageId", ",", "attachmentId", ",", "0", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "loadAttachmentFinished", "(", "long", "accountId", ",", "long", "messageId", ",", "long", "attachmentId", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "loadAttachmentCallback", "(", "null", ",", "messageId", ",", "attachmentId", ",", "<NUM_LIT:100>", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "loadAttachmentFailed", "(", "long", "accountId", ",", "long", "messageId", ",", "long", "attachmentId", ",", "String", "reason", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "loadAttachmentCallback", "(", "new", "MessagingException", "(", "reason", ")", ",", "messageId", ",", "attachmentId", ",", "0", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "sendPendingMessagesStarted", "(", "long", "accountId", ",", "long", "messageId", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "sendMailCallback", "(", "null", ",", "accountId", ",", "messageId", ",", "0", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "sendPendingMessagesCompleted", "(", "long", "accountId", ")", "{", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "sendMailCallback", "(", "null", ",", "accountId", ",", "-", "1", ",", "<NUM_LIT:100>", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "sendPendingMessagesFailed", "(", "long", "accountId", ",", "long", "messageId", ",", "Exception", "reason", ")", "{", "MessagingException", "me", ";", "if", "(", "reason", "instanceof", "MessagingException", ")", "{", "me", "=", "(", "MessagingException", ")", "reason", ";", "}", "else", "{", "me", "=", "new", "MessagingException", "(", "reason", ".", "toString", "(", ")", ")", ";", "}", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "sendMailCallback", "(", "me", ",", "accountId", ",", "messageId", ",", "0", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "loadAttachmentStatus", "(", "long", "messageId", ",", "long", "attachmentId", ",", "int", "statusCode", ",", "int", "progress", ")", "{", "MessagingException", "result", "=", "mapStatusToException", "(", "statusCode", ")", ";", "switch", "(", "statusCode", ")", "{", "case", "EmailServiceStatus", ".", "SUCCESS", ":", "progress", "=", "<NUM_LIT:100>", ";", "break", ";", "case", "EmailServiceStatus", ".", "IN_PROGRESS", ":", "if", "(", "DEBUG_FAIL_DOWNLOADS", "&", "&", "progress", ">", "<NUM_LIT>", ")", "{", "result", "=", "new", "MessagingException", "(", "String", ".", "valueOf", "(", "EmailServiceStatus", ".", "CONNECTION_ERROR", ")", ")", ";", "}", "if", "(", "progress", "<", "0", "|", "|", "progress", ">", "=", "<NUM_LIT:100>", ")", "{", "return", ";", "}", "break", ";", "}", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "loadAttachmentCallback", "(", "result", ",", "messageId", ",", "attachmentId", ",", "progress", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "sendMessageStatus", "(", "long", "messageId", ",", "String", "subject", ",", "int", "statusCode", ",", "int", "progress", ")", "{", "long", "accountId", "=", "-", "1", ";", "MessagingException", "result", "=", "mapStatusToException", "(", "statusCode", ")", ";", "switch", "(", "statusCode", ")", "{", "case", "EmailServiceStatus", ".", "SUCCESS", ":", "progress", "=", "<NUM_LIT:100>", ";", "break", ";", "case", "EmailServiceStatus", ".", "IN_PROGRESS", ":", "if", "(", "progress", "<", "0", "|", "|", "progress", ">", "=", "<NUM_LIT:100>", ")", "{", "return", ";", "}", "break", ";", "}", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "sendMailCallback", "(", "result", ",", "accountId", ",", "messageId", ",", "progress", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "syncMailboxListStatus", "(", "long", "accountId", ",", "int", "statusCode", ",", "int", "progress", ")", "{", "MessagingException", "result", "=", "mapStatusToException", "(", "statusCode", ")", ";", "switch", "(", "statusCode", ")", "{", "case", "EmailServiceStatus", ".", "SUCCESS", ":", "progress", "=", "<NUM_LIT:100>", ";", "break", ";", "case", "EmailServiceStatus", ".", "IN_PROGRESS", ":", "if", "(", "progress", "<", "0", "|", "|", "progress", ">", "=", "<NUM_LIT:100>", ")", "{", "return", ";", "}", "break", ";", "}", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "updateMailboxListCallback", "(", "result", ",", "accountId", ",", "progress", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "syncMailboxStatus", "(", "long", "mailboxId", ",", "int", "statusCode", ",", "int", "progress", ")", "{", "MessagingException", "result", "=", "mapStatusToException", "(", "statusCode", ")", ";", "switch", "(", "statusCode", ")", "{", "case", "EmailServiceStatus", ".", "SUCCESS", ":", "progress", "=", "<NUM_LIT:100>", ";", "break", ";", "case", "EmailServiceStatus", ".", "IN_PROGRESS", ":", "if", "(", "progress", "<", "0", "|", "|", "progress", ">", "=", "<NUM_LIT:100>", ")", "{", "return", ";", "}", "break", ";", "}", "Mailbox", "mbx", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "mProviderContext", ",", "mailboxId", ")", ";", "if", "(", "mbx", "=", "=", "null", ")", "return", ";", "long", "accountId", "=", "mbx", ".", "mAccountKey", ";", "synchronized", "(", "mListeners", ")", "{", "for", "(", "Result", "listener", ":", "mListeners", ")", "{", "listener", ".", "updateMailboxCallback", "(", "result", ",", "accountId", ",", "mailboxId", ",", "progress", ",", "0", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "MessagingException", "mapStatusToException", "(", "int", "statusCode", ")", "{", "switch", "(", "statusCode", ")", "{", "case", "EmailServiceStatus", ".", "SUCCESS", ":", "case", "EmailServiceStatus", ".", "IN_PROGRESS", ":", "return", "null", ";", "case", "EmailServiceStatus", ".", "LOGIN_FAILED", ":", "return", "new", "AuthenticationFailedException", "(", "\"", "\"", ")", ";", "case", "EmailServiceStatus", ".", "CONNECTION_ERROR", ":", "return", "new", "MessagingException", "(", "MessagingException", ".", "IOERROR", ")", ";", "case", "EmailServiceStatus", ".", "MESSAGE_NOT_FOUND", ":", "case", "EmailServiceStatus", ".", "ATTACHMENT_NOT_FOUND", ":", "case", "EmailServiceStatus", ".", "FOLDER_NOT_DELETED", ":", "case", "EmailServiceStatus", ".", "FOLDER_NOT_RENAMED", ":", "case", "EmailServiceStatus", ".", "FOLDER_NOT_CREATED", ":", "case", "EmailServiceStatus", ".", "REMOTE_EXCEPTION", ":", "default", ":", "return", "new", "MessagingException", "(", "String", ".", "valueOf", "(", "statusCode", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "final", "static", "String", "readInputStream", "(", "InputStream", "in", ",", "String", "encoding", ")", "throws", "IOException", "{", "InputStreamReader", "reader", "=", "new", "InputStreamReader", "(", "in", ",", "encoding", ")", ";", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "int", "count", ";", "char", "[", "]", "buf", "=", "new", "char", "[", "<NUM_LIT>", "]", ";", "while", "(", "(", "count", "=", "reader", ".", "read", "(", "buf", ")", ")", "!", "=", "-", "1", ")", "{", "sb", ".", "append", "(", "buf", ",", "0", ",", "count", ")", ";", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "final", "static", "boolean", "arrayContains", "(", "Object", "[", "]", "a", ",", "Object", "o", ")", "{", "for", "(", "int", "i", "=", "0", ",", "count", "=", "a", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "if", "(", "a", "[", "i", "]", ".", "equals", "(", "o", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "static", "String", "combine", "(", "Object", "[", "]", "parts", ",", "char", "seperator", ")", "{", "if", "(", "parts", "=", "=", "null", ")", "{", "return", "null", ";", "}", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "parts", ".", "length", ";", "i", "+", "+", ")", "{", "sb", ".", "append", "(", "parts", "[", "i", "]", ".", "toString", "(", ")", ")", ";", "if", "(", "i", "<", "parts", ".", "length", "-", "1", ")", "{", "sb", ".", "append", "(", "seperator", ")", ";", "}", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "base64Decode", "(", "String", "encoded", ")", "{", "if", "(", "encoded", "=", "=", "null", ")", "{", "return", "null", ";", "}", "byte", "[", "]", "decoded", "=", "new", "Base64", "(", ")", ".", "decode", "(", "encoded", ".", "getBytes", "(", ")", ")", ";", "return", "new", "String", "(", "decoded", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "base64Encode", "(", "String", "s", ")", "{", "if", "(", "s", "=", "=", "null", ")", "{", "return", "s", ";", "}", "byte", "[", "]", "encoded", "=", "new", "Base64", "(", ")", ".", "encode", "(", "s", ".", "getBytes", "(", ")", ")", ";", "return", "new", "String", "(", "encoded", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "requiredFieldValid", "(", "TextView", "view", ")", "{", "return", "view", ".", "getText", "(", ")", "!", "=", "null", "&", "&", "view", ".", "getText", "(", ")", ".", "length", "(", ")", ">", "0", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "requiredFieldValid", "(", "Editable", "s", ")", "{", "return", "s", "!", "=", "null", "&", "&", "s", ".", "length", "(", ")", ">", "0", ";", "}", "</s>"]
["<s>", "public", "static", "String", "quoteString", "(", "String", "s", ")", "{", "if", "(", "s", "=", "=", "null", ")", "{", "return", "null", ";", "}", "if", "(", "!", "s", ".", "matches", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:$>", "\"", ")", ")", "{", "return", "\"", "<STR_LIT:\\\">", "\"", "+", "s", "+", "\"", "<STR_LIT:\\\">", "\"", ";", "}", "else", "{", "return", "s", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "imapQuoted", "(", "String", "s", ")", "{", "String", "result", "=", "s", ".", "replaceAll", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "\"", ")", ";", "result", "=", "result", ".", "replaceAll", "(", "\"", "<STR_LIT:\\\">", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "\"", ")", ";", "return", "\"", "<STR_LIT:\\\">", "\"", "+", "result", "+", "\"", "<STR_LIT:\\\">", "\"", ";", "}", "</s>"]
["<s>", "public", "static", "String", "fastUrlDecode", "(", "String", "s", ")", "{", "try", "{", "byte", "[", "]", "bytes", "=", "s", ".", "getBytes", "(", "\"", "<STR_LIT:UTF-8>", "\"", ")", ";", "byte", "ch", ";", "int", "length", "=", "0", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "bytes", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "ch", "=", "bytes", "[", "i", "]", ";", "if", "(", "ch", "=", "=", "<CHAR_LIT>", ")", "{", "int", "h", "=", "(", "bytes", "[", "i", "+", "1", "]", "-", "<CHAR_LIT:0>", ")", ";", "int", "l", "=", "(", "bytes", "[", "i", "+", "<NUM_LIT:2>", "]", "-", "<CHAR_LIT:0>", ")", ";", "if", "(", "h", ">", "<NUM_LIT:9>", ")", "{", "h", "-", "=", "<NUM_LIT:7>", ";", "}", "if", "(", "l", ">", "<NUM_LIT:9>", ")", "{", "l", "-", "=", "<NUM_LIT:7>", ";", "}", "bytes", "[", "length", "]", "=", "(", "byte", ")", "(", "(", "h", "<", "<", "<NUM_LIT:4>", ")", "|", "l", ")", ";", "i", "+", "=", "<NUM_LIT:2>", ";", "}", "else", "if", "(", "ch", "=", "=", "<CHAR_LIT>", ")", "{", "bytes", "[", "length", "]", "=", "<CHAR_LIT>", ";", "}", "else", "{", "bytes", "[", "length", "]", "=", "bytes", "[", "i", "]", ";", "}", "length", "+", "+", ";", "}", "return", "new", "String", "(", "bytes", ",", "0", ",", "length", ",", "\"", "<STR_LIT:UTF-8>", "\"", ")", ";", "}", "catch", "(", "UnsupportedEncodingException", "uee", ")", "{", "return", "null", ";", "}", "}", "</s>"]
["<s>", "public", "static", "boolean", "isDateToday", "(", "Date", "date", ")", "{", "Date", "today", "=", "new", "Date", "(", ")", ";", "if", "(", "date", ".", "getYear", "(", ")", "=", "=", "today", ".", "getYear", "(", ")", "&", "&", "date", ".", "getMonth", "(", ")", "=", "=", "today", ".", "getMonth", "(", ")", "&", "&", "date", ".", "getDate", "(", ")", "=", "=", "today", ".", "getDate", "(", ")", ")", "{", "return", "true", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "static", "void", "setCompoundDrawablesAlpha", "(", "TextView", "view", ",", "int", "alpha", ")", "{", "}", "</s>"]
["<s>", "public", "static", "String", "buildMailboxIdSelection", "(", "ContentResolver", "resolver", ",", "long", "mailboxId", ")", "{", "StringBuilder", "selection", "=", "new", "StringBuilder", "(", "MessageColumns", ".", "FLAG_LOADED", "+", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "FLAG_LOADED_PARTIAL", "+", "\"", "<STR_LIT:U+002C>", "\"", "+", "Message", ".", "FLAG_LOADED_COMPLETE", "+", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "mailboxId", "=", "=", "Mailbox", ".", "QUERY_ALL_INBOXES", "|", "|", "mailboxId", "=", "=", "Mailbox", ".", "QUERY_ALL_DRAFTS", "|", "|", "mailboxId", "=", "=", "Mailbox", ".", "QUERY_ALL_OUTBOX", ")", "{", "int", "type", ";", "if", "(", "mailboxId", "=", "=", "Mailbox", ".", "QUERY_ALL_INBOXES", ")", "{", "type", "=", "Mailbox", ".", "TYPE_INBOX", ";", "}", "else", "if", "(", "mailboxId", "=", "=", "Mailbox", ".", "QUERY_ALL_DRAFTS", ")", "{", "type", "=", "Mailbox", ".", "TYPE_DRAFTS", ";", "}", "else", "{", "type", "=", "Mailbox", ".", "TYPE_OUTBOX", ";", "}", "StringBuilder", "inboxes", "=", "new", "StringBuilder", "(", ")", ";", "Cursor", "c", "=", "resolver", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "EmailContent", ".", "ID_PROJECTION", ",", "MailboxColumns", ".", "TYPE", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "FLAG_VISIBLE", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Integer", ".", "toString", "(", "type", ")", "}", ",", "null", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "if", "(", "inboxes", ".", "length", "(", ")", "!", "=", "0", ")", "{", "inboxes", ".", "append", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "}", "inboxes", ".", "append", "(", "c", ".", "getLong", "(", "EmailContent", ".", "ID_PROJECTION_COLUMN", ")", ")", ";", "}", "c", ".", "close", "(", ")", ";", "selection", ".", "append", "(", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", ")", ";", "selection", ".", "append", "(", "\"", "<STR_LIT:(>", "\"", ")", ".", "append", "(", "inboxes", ")", ".", "append", "(", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "else", "if", "(", "mailboxId", "=", "=", "Mailbox", ".", "QUERY_ALL_UNREAD", ")", "{", "selection", ".", "append", "(", "Message", ".", "FLAG_READ", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "mailboxId", "=", "=", "Mailbox", ".", "QUERY_ALL_FAVORITES", ")", "{", "selection", ".", "append", "(", "Message", ".", "FLAG_FAVORITE", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "selection", ".", "append", "(", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT:=>", "\"", "+", "mailboxId", ")", ";", "}", "return", "selection", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "private", "FolderProperties", "(", "Context", "context", ")", "{", "mSpecialMailbox", "=", "context", ".", "getResources", "(", ")", ".", "getStringArray", "(", "R", ".", "array", ".", "mailbox_display_names", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "mSpecialMailbox", ".", "length", ";", "+", "+", "i", ")", "{", "if", "(", "\"", "\"", ".", "equals", "(", "mSpecialMailbox", "[", "i", "]", ")", ")", "{", "mSpecialMailbox", "[", "i", "]", "=", "null", ";", "}", "}", "mSpecialMailboxDrawable", "=", "context", ".", "getResources", "(", ")", ".", "obtainTypedArray", "(", "R", ".", "array", ".", "mailbox_display_icons", ")", ";", "mDefaultMailboxDrawable", "=", "context", ".", "getResources", "(", ")", ".", "getDrawable", "(", "R", ".", "drawable", ".", "ic_list_folder", ")", ";", "mSummaryStarredMailboxDrawable", "=", "context", ".", "getResources", "(", ")", ".", "getDrawable", "(", "R", ".", "drawable", ".", "ic_list_starred", ")", ";", "mSummaryCombinedInboxDrawable", "=", "context", ".", "getResources", "(", ")", ".", "getDrawable", "(", "R", ".", "drawable", ".", "ic_list_combined_inbox", ")", ";", "}", "</s>"]
["<s>", "public", "static", "FolderProperties", "getInstance", "(", "Context", "context", ")", "{", "if", "(", "sInstance", "=", "=", "null", ")", "{", "synchronized", "(", "FolderProperties", ".", "class", ")", "{", "if", "(", "sInstance", "=", "=", "null", ")", "{", "sInstance", "=", "new", "FolderProperties", "(", "context", ")", ";", "}", "}", "}", "return", "sInstance", ";", "}", "</s>"]
["<s>", "public", "String", "getDisplayName", "(", "int", "type", ")", "{", "if", "(", "type", "<", "mSpecialMailbox", ".", "length", ")", "{", "return", "mSpecialMailbox", "[", "type", "]", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "Drawable", "getIconIds", "(", "int", "type", ")", "{", "if", "(", "type", "<", "mSpecialMailboxDrawable", ".", "length", "(", ")", ")", "{", "return", "mSpecialMailboxDrawable", ".", "getDrawable", "(", "type", ")", ";", "}", "return", "mDefaultMailboxDrawable", ";", "}", "</s>"]
["<s>", "public", "Drawable", "getSummaryMailboxIconIds", "(", "long", "mailboxKey", ")", "{", "if", "(", "mailboxKey", "=", "=", "Mailbox", ".", "QUERY_ALL_INBOXES", ")", "{", "return", "mSummaryCombinedInboxDrawable", ";", "}", "else", "if", "(", "mailboxKey", "=", "=", "Mailbox", ".", "QUERY_ALL_FAVORITES", ")", "{", "return", "mSummaryStarredMailboxDrawable", ";", "}", "else", "if", "(", "mailboxKey", "=", "=", "Mailbox", ".", "QUERY_ALL_DRAFTS", ")", "{", "return", "mSpecialMailboxDrawable", ".", "getDrawable", "(", "Mailbox", ".", "TYPE_DRAFTS", ")", ";", "}", "else", "if", "(", "mailboxKey", "=", "=", "Mailbox", ".", "QUERY_ALL_OUTBOX", ")", "{", "return", "mSpecialMailboxDrawable", ".", "getDrawable", "(", "Mailbox", ".", "TYPE_OUTBOX", ")", ";", "}", "return", "mDefaultMailboxDrawable", ";", "}", "</s>"]
["<s>", "public", "static", "String", "findDuplicateAccount", "(", "Context", "context", ",", "long", "allowAccountId", ",", "String", "hostName", ",", "String", "userLogin", ")", "{", "ContentResolver", "resolver", "=", "context", ".", "getContentResolver", "(", ")", ";", "Cursor", "c", "=", "resolver", ".", "query", "(", "HostAuth", ".", "CONTENT_URI", ",", "HostAuth", ".", "ID_PROJECTION", ",", "HOSTAUTH_WHERE_CREDENTIALS", ",", "new", "String", "[", "]", "{", "hostName", ",", "userLogin", "}", ",", "null", ")", ";", "try", "{", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "hostAuthId", "=", "c", ".", "getLong", "(", "HostAuth", ".", "ID_PROJECTION_COLUMN", ")", ";", "Cursor", "c2", "=", "resolver", ".", "query", "(", "Account", ".", "CONTENT_URI", ",", "Account", ".", "ID_PROJECTION", ",", "ACCOUNT_WHERE_HOSTAUTH", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "hostAuthId", ")", "}", ",", "null", ")", ";", "try", "{", "while", "(", "c2", ".", "moveToNext", "(", ")", ")", "{", "long", "accountId", "=", "c2", ".", "getLong", "(", "Account", ".", "ID_PROJECTION_COLUMN", ")", ";", "if", "(", "accountId", "!", "=", "allowAccountId", ")", "{", "Account", "account", "=", "Account", ".", "restoreAccountWithId", "(", "context", ",", "accountId", ")", ";", "if", "(", "account", "!", "=", "null", ")", "{", "return", "account", ".", "mDisplayName", ";", "}", "}", "}", "}", "finally", "{", "c2", ".", "close", "(", ")", ";", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "static", "String", "generateMessageId", "(", ")", "{", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT:<>", "\"", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:24>", ";", "i", "+", "+", ")", "{", "sb", ".", "append", "(", "Integer", ".", "toString", "(", "(", "int", ")", "(", "Math", ".", "random", "(", ")", "*", "<NUM_LIT>", ")", ",", "<NUM_LIT>", ")", ")", ";", "}", "sb", ".", "append", "(", "\"", "<STR_LIT:.>", "\"", ")", ";", "sb", ".", "append", "(", "Long", ".", "toString", "(", "System", ".", "currentTimeMillis", "(", ")", ")", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "FixedLengthInputStream", "(", "InputStream", "in", ",", "int", "length", ")", "{", "this", ".", "mIn", "=", "in", ";", "this", ".", "mLength", "=", "length", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "available", "(", ")", "throws", "IOException", "{", "return", "mLength", "-", "mCount", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", ")", "throws", "IOException", "{", "if", "(", "mCount", "<", "mLength", ")", "{", "mCount", "+", "+", ";", "return", "mIn", ".", "read", "(", ")", ";", "}", "else", "{", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", "byte", "[", "]", "b", ",", "int", "offset", ",", "int", "length", ")", "throws", "IOException", "{", "if", "(", "mCount", "<", "mLength", ")", "{", "int", "d", "=", "mIn", ".", "read", "(", "b", ",", "offset", ",", "Math", ".", "min", "(", "mLength", "-", "mCount", ",", "length", ")", ")", ";", "if", "(", "d", "=", "=", "-", "1", ")", "{", "return", "-", "1", ";", "}", "else", "{", "mCount", "+", "=", "d", ";", "return", "d", ";", "}", "}", "else", "{", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", "byte", "[", "]", "b", ")", "throws", "IOException", "{", "return", "read", "(", "b", ",", "0", ",", "b", ".", "length", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "mIn", ".", "toString", "(", ")", ",", "mLength", ")", ";", "}", "</s>"]
["<s>", "synchronized", "public", "void", "addListener", "(", "MessagingListener", "listener", ")", "{", "mListenersMap", ".", "put", "(", "listener", ",", "this", ")", ";", "}", "</s>"]
["<s>", "synchronized", "public", "void", "removeListener", "(", "MessagingListener", "listener", ")", "{", "mListenersMap", ".", "remove", "(", "listener", ")", ";", "}", "</s>"]
["<s>", "synchronized", "public", "boolean", "isActiveListener", "(", "MessagingListener", "listener", ")", "{", "return", "mListenersMap", ".", "containsKey", "(", "listener", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "listFoldersStarted", "(", "long", "accountId", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "listFoldersStarted", "(", "accountId", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "listFoldersFailed", "(", "long", "accountId", ",", "String", "message", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "listFoldersFailed", "(", "accountId", ",", "message", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "listFoldersFinished", "(", "long", "accountId", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "listFoldersFinished", "(", "accountId", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "synchronizeMailboxStarted", "(", "long", "accountId", ",", "long", "mailboxId", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "synchronizeMailboxStarted", "(", "accountId", ",", "mailboxId", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "synchronizeMailboxFinished", "(", "long", "accountId", ",", "long", "mailboxId", ",", "int", "totalMessagesInMailbox", ",", "int", "numNewMessages", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "synchronizeMailboxFinished", "(", "accountId", ",", "mailboxId", ",", "totalMessagesInMailbox", ",", "numNewMessages", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "synchronizeMailboxFailed", "(", "long", "accountId", ",", "long", "mailboxId", ",", "Exception", "e", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "synchronizeMailboxFailed", "(", "accountId", ",", "mailboxId", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "loadMessageForViewStarted", "(", "long", "messageId", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "loadMessageForViewStarted", "(", "messageId", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "loadMessageForViewFinished", "(", "long", "messageId", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "loadMessageForViewFinished", "(", "messageId", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "loadMessageForViewFailed", "(", "long", "messageId", ",", "String", "message", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "loadMessageForViewFailed", "(", "messageId", ",", "message", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "checkMailStarted", "(", "Context", "context", ",", "long", "accountId", ",", "long", "tag", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "checkMailStarted", "(", "context", ",", "accountId", ",", "tag", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "checkMailFinished", "(", "Context", "context", ",", "long", "accountId", ",", "long", "folderId", ",", "long", "tag", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "checkMailFinished", "(", "context", ",", "accountId", ",", "folderId", ",", "tag", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "sendPendingMessagesStarted", "(", "long", "accountId", ",", "long", "messageId", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "sendPendingMessagesStarted", "(", "accountId", ",", "messageId", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "sendPendingMessagesCompleted", "(", "long", "accountId", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "sendPendingMessagesCompleted", "(", "accountId", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "sendPendingMessagesFailed", "(", "long", "accountId", ",", "long", "messageId", ",", "Exception", "reason", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "sendPendingMessagesFailed", "(", "accountId", ",", "messageId", ",", "reason", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "messageUidChanged", "(", "long", "accountId", ",", "long", "mailboxId", ",", "String", "oldUid", ",", "String", "newUid", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "messageUidChanged", "(", "accountId", ",", "mailboxId", ",", "oldUid", ",", "newUid", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "loadAttachmentStarted", "(", "long", "accountId", ",", "long", "messageId", ",", "long", "attachmentId", ",", "boolean", "requiresDownload", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "loadAttachmentStarted", "(", "accountId", ",", "messageId", ",", "attachmentId", ",", "requiresDownload", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "loadAttachmentFinished", "(", "long", "accountId", ",", "long", "messageId", ",", "long", "attachmentId", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "loadAttachmentFinished", "(", "accountId", ",", "messageId", ",", "attachmentId", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "loadAttachmentFailed", "(", "long", "accountId", ",", "long", "messageId", ",", "long", "attachmentId", ",", "String", "reason", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "loadAttachmentFailed", "(", "accountId", ",", "messageId", ",", "attachmentId", ",", "reason", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "synchronized", "public", "void", "controllerCommandCompleted", "(", "boolean", "moreCommandsToRun", ")", "{", "for", "(", "MessagingListener", "l", ":", "mListeners", ")", "{", "l", ".", "controllerCommandCompleted", "(", "moreCommandsToRun", ")", ";", "}", "}", "</s>"]
["<s>", "void", "showProgress", "(", "Context", "context", ",", "String", "title", ",", "String", "message", ",", "long", "currentProgress", ",", "long", "maxProgress", ",", "boolean", "indeterminate", ")", ";", "</s>"]
["<s>", "void", "updateProgress", "(", "Context", "context", ",", "String", "title", ",", "String", "message", ",", "long", "currentProgress", ",", "long", "maxProgress", ",", "boolean", "indeterminate", ")", ";", "</s>"]
["<s>", "void", "hideProgress", "(", "Context", "context", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "void", "handleMessage", "(", "android", ".", "os", ".", "Message", "msg", ")", "{", "switch", "(", "msg", ".", "what", ")", "{", "case", "MSG_PROGRESS_ON", ":", "setProgressBarIndeterminateVisibility", "(", "true", ")", ";", "break", ";", "case", "MSG_PROGRESS_OFF", ":", "setProgressBarIndeterminateVisibility", "(", "false", ")", ";", "break", ";", "case", "MSG_UPDATE_TITLE", ":", "updateTitle", "(", ")", ";", "break", ";", "case", "MSG_SKIPPED_ATTACHMENTS", ":", "Toast", ".", "makeText", "(", "MessageCompose", ".", "this", ",", "getString", "(", "R", ".", "string", ".", "message_compose_attachments_skipped_toast", ")", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "break", ";", "default", ":", "super", ".", "handleMessage", "(", "msg", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "actionCompose", "(", "Context", "context", ",", "long", "accountId", ")", "{", "try", "{", "Intent", "i", "=", "new", "Intent", "(", "context", ",", "MessageCompose", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT_ID", ",", "accountId", ")", ";", "context", ".", "startActivity", "(", "i", ")", ";", "}", "catch", "(", "ActivityNotFoundException", "anfe", ")", "{", "Email", ".", "log", "(", "anfe", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "boolean", "actionCompose", "(", "Context", "context", ",", "String", "uriString", ",", "long", "accountId", ")", "{", "try", "{", "Intent", "i", "=", "new", "Intent", "(", "context", ",", "MessageCompose", ".", "class", ")", ";", "i", ".", "setAction", "(", "Intent", ".", "ACTION_SEND", ")", ";", "i", ".", "setData", "(", "Uri", ".", "parse", "(", "uriString", ")", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT_ID", ",", "accountId", ")", ";", "context", ".", "startActivity", "(", "i", ")", ";", "return", "true", ";", "}", "catch", "(", "ActivityNotFoundException", "anfe", ")", "{", "Email", ".", "log", "(", "anfe", ".", "toString", "(", ")", ")", ";", "return", "false", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "actionReply", "(", "Context", "context", ",", "long", "messageId", ",", "boolean", "replyAll", ")", "{", "startActivityWithMessage", "(", "context", ",", "replyAll", "?", "ACTION_REPLY_ALL", ":", "ACTION_REPLY", ",", "messageId", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionForward", "(", "Context", "context", ",", "long", "messageId", ")", "{", "startActivityWithMessage", "(", "context", ",", "ACTION_FORWARD", ",", "messageId", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionEditDraft", "(", "Context", "context", ",", "long", "messageId", ")", "{", "startActivityWithMessage", "(", "context", ",", "ACTION_EDIT_DRAFT", ",", "messageId", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "startActivityWithMessage", "(", "Context", "context", ",", "String", "action", ",", "long", "messageId", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "context", ",", "MessageCompose", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_MESSAGE_ID", ",", "messageId", ")", ";", "i", ".", "setAction", "(", "action", ")", ";", "context", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "private", "void", "setAccount", "(", "Intent", "intent", ")", "{", "long", "accountId", "=", "intent", ".", "getLongExtra", "(", "EXTRA_ACCOUNT_ID", ",", "-", "1", ")", ";", "if", "(", "accountId", "=", "=", "-", "1", ")", "{", "accountId", "=", "Account", ".", "getDefaultAccountId", "(", "this", ")", ";", "}", "if", "(", "accountId", "=", "=", "-", "1", ")", "{", "AccountFolderList", ".", "actionShowAccounts", "(", "this", ")", ";", "finish", "(", ")", ";", "}", "else", "{", "mAccount", "=", "Account", ".", "restoreAccountWithId", "(", "this", ",", "accountId", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onCreate", "(", "savedInstanceState", ")", ";", "requestWindowFeature", "(", "Window", ".", "FEATURE_INDETERMINATE_PROGRESS", ")", ";", "setContentView", "(", "R", ".", "layout", ".", "message_compose", ")", ";", "mController", "=", "Controller", ".", "getInstance", "(", "getApplication", "(", ")", ")", ";", "initViews", "(", ")", ";", "long", "draftId", "=", "-", "1", ";", "if", "(", "savedInstanceState", "!", "=", "null", ")", "{", "mSourceMessageProcessed", "=", "savedInstanceState", ".", "getBoolean", "(", "STATE_KEY_SOURCE_MESSAGE_PROCED", ",", "false", ")", ";", "draftId", "=", "savedInstanceState", ".", "getLong", "(", "STATE_KEY_DRAFT_ID", ",", "-", "1", ")", ";", "}", "Intent", "intent", "=", "getIntent", "(", ")", ";", "mAction", "=", "intent", ".", "getAction", "(", ")", ";", "if", "(", "draftId", "!", "=", "-", "1", ")", "{", "mAction", "=", "ACTION_EDIT_DRAFT", ";", "mDraft", ".", "mId", "=", "draftId", ";", "}", "if", "(", "Intent", ".", "ACTION_VIEW", ".", "equals", "(", "mAction", ")", "|", "|", "Intent", ".", "ACTION_SENDTO", ".", "equals", "(", "mAction", ")", "|", "|", "Intent", ".", "ACTION_SEND", ".", "equals", "(", "mAction", ")", "|", "|", "Intent", ".", "ACTION_SEND_MULTIPLE", ".", "equals", "(", "mAction", ")", ")", "{", "setAccount", "(", "intent", ")", ";", "initFromIntent", "(", "intent", ")", ";", "mDraftNeedsSaving", "=", "true", ";", "mMessageLoaded", "=", "true", ";", "mSourceMessageProcessed", "=", "true", ";", "}", "else", "{", "long", "messageId", "=", "draftId", "!", "=", "-", "1", "?", "draftId", ":", "intent", ".", "getLongExtra", "(", "EXTRA_MESSAGE_ID", ",", "-", "1", ")", ";", "if", "(", "messageId", "!", "=", "-", "1", ")", "{", "mLoadMessageTask", "=", "new", "LoadMessageTask", "(", ")", ".", "execute", "(", "messageId", ")", ";", "}", "else", "{", "setAccount", "(", "intent", ")", ";", "mMessageLoaded", "=", "true", ";", "mSourceMessageProcessed", "=", "true", ";", "}", "}", "if", "(", "ACTION_REPLY", ".", "equals", "(", "mAction", ")", "|", "|", "ACTION_REPLY_ALL", ".", "equals", "(", "mAction", ")", "|", "|", "ACTION_FORWARD", ".", "equals", "(", "mAction", ")", "|", "|", "ACTION_EDIT_DRAFT", ".", "equals", "(", "mAction", ")", ")", "{", "}", "updateTitle", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setIntent", "(", "Intent", "intent", ")", "{", "super", ".", "setIntent", "(", "intent", ")", ";", "mAction", "=", "intent", ".", "getAction", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onResume", "(", ")", "{", "super", ".", "onResume", "(", ")", ";", "mController", ".", "addResultCallback", "(", "mListener", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onPause", "(", ")", "{", "super", ".", "onPause", "(", ")", ";", "saveIfNeeded", "(", ")", ";", "mController", ".", "removeResultCallback", "(", "mListener", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "cancelTask", "(", "AsyncTask", "<", "?", ",", "?", ",", "?", ">", "task", ")", "{", "if", "(", "task", "!", "=", "null", "&", "&", "task", ".", "getStatus", "(", ")", "!", "=", "AsyncTask", ".", "Status", ".", "FINISHED", ")", "{", "task", ".", "cancel", "(", "true", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onDestroy", "(", ")", "{", "super", ".", "onDestroy", "(", ")", ";", "mQuotedText", ".", "destroy", "(", ")", ";", "mQuotedText", "=", "null", ";", "cancelTask", "(", "mLoadAttachmentsTask", ")", ";", "mLoadAttachmentsTask", "=", "null", ";", "cancelTask", "(", "mLoadMessageTask", ")", ";", "mLoadMessageTask", "=", "null", ";", "if", "(", "mAddressAdapter", "!", "=", "null", ")", "{", "mAddressAdapter", ".", "changeCursor", "(", "null", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onSaveInstanceState", "(", "Bundle", "outState", ")", "{", "super", ".", "onSaveInstanceState", "(", "outState", ")", ";", "long", "draftId", "=", "getOrCreateDraftId", "(", ")", ";", "if", "(", "draftId", "!", "=", "-", "1", ")", "{", "outState", ".", "putLong", "(", "STATE_KEY_DRAFT_ID", ",", "draftId", ")", ";", "}", "outState", ".", "putBoolean", "(", "STATE_KEY_CC_SHOWN", ",", "mCcView", ".", "getVisibility", "(", ")", "=", "=", "View", ".", "VISIBLE", ")", ";", "outState", ".", "putBoolean", "(", "STATE_KEY_BCC_SHOWN", ",", "mBccView", ".", "getVisibility", "(", ")", "=", "=", "View", ".", "VISIBLE", ")", ";", "outState", ".", "putBoolean", "(", "STATE_KEY_QUOTED_TEXT_SHOWN", ",", "mQuotedTextBar", ".", "getVisibility", "(", ")", "=", "=", "View", ".", "VISIBLE", ")", ";", "outState", ".", "putBoolean", "(", "STATE_KEY_SOURCE_MESSAGE_PROCED", ",", "mSourceMessageProcessed", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onRestoreInstanceState", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onRestoreInstanceState", "(", "savedInstanceState", ")", ";", "mCcView", ".", "setVisibility", "(", "savedInstanceState", ".", "getBoolean", "(", "STATE_KEY_CC_SHOWN", ")", "?", "View", ".", "VISIBLE", ":", "View", ".", "GONE", ")", ";", "mBccView", ".", "setVisibility", "(", "savedInstanceState", ".", "getBoolean", "(", "STATE_KEY_BCC_SHOWN", ")", "?", "View", ".", "VISIBLE", ":", "View", ".", "GONE", ")", ";", "mQuotedTextBar", ".", "setVisibility", "(", "savedInstanceState", ".", "getBoolean", "(", "STATE_KEY_QUOTED_TEXT_SHOWN", ")", "?", "View", ".", "VISIBLE", ":", "View", ".", "GONE", ")", ";", "mQuotedText", ".", "setVisibility", "(", "savedInstanceState", ".", "getBoolean", "(", "STATE_KEY_QUOTED_TEXT_SHOWN", ")", "?", "View", ".", "VISIBLE", ":", "View", ".", "GONE", ")", ";", "mDraftNeedsSaving", "=", "false", ";", "}", "</s>"]
["<s>", "private", "void", "initViews", "(", ")", "{", "mToView", "=", "(", "MultiAutoCompleteTextView", ")", "findViewById", "(", "R", ".", "id", ".", "to", ")", ";", "mCcView", "=", "(", "MultiAutoCompleteTextView", ")", "findViewById", "(", "R", ".", "id", ".", "cc", ")", ";", "mBccView", "=", "(", "MultiAutoCompleteTextView", ")", "findViewById", "(", "R", ".", "id", ".", "bcc", ")", ";", "mSubjectView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "subject", ")", ";", "mMessageContentView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "message_content", ")", ";", "mSendButton", "=", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "send", ")", ";", "mDiscardButton", "=", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "discard", ")", ";", "mSaveButton", "=", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "save", ")", ";", "mAttachments", "=", "(", "LinearLayout", ")", "findViewById", "(", "R", ".", "id", ".", "attachments", ")", ";", "mQuotedTextBar", "=", "findViewById", "(", "R", ".", "id", ".", "quoted_text_bar", ")", ";", "mQuotedTextDelete", "=", "(", "ImageButton", ")", "findViewById", "(", "R", ".", "id", ".", "quoted_text_delete", ")", ";", "mQuotedText", "=", "(", "WebView", ")", "findViewById", "(", "R", ".", "id", ".", "quoted_text", ")", ";", "TextWatcher", "watcher", "=", "new", "TextWatcher", "(", ")", "{", "public", "void", "beforeTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "before", ",", "int", "after", ")", "{", "}", "public", "void", "onTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "before", ",", "int", "count", ")", "{", "mDraftNeedsSaving", "=", "true", ";", "}", "public", "void", "afterTextChanged", "(", "android", ".", "text", ".", "Editable", "s", ")", "{", "}", "}", ";", "InputFilter", "recipientFilter", "=", "new", "InputFilter", "(", ")", "{", "public", "CharSequence", "filter", "(", "CharSequence", "source", ",", "int", "start", ",", "int", "end", ",", "Spanned", "dest", ",", "int", "dstart", ",", "int", "dend", ")", "{", "if", "(", "end", "-", "start", "!", "=", "1", "|", "|", "source", ".", "charAt", "(", "start", ")", "!", "=", "<CHAR_LIT>", ")", "{", "return", "null", ";", "}", "int", "scanBack", "=", "dstart", ";", "boolean", "dotFound", "=", "false", ";", "while", "(", "scanBack", ">", "0", ")", "{", "char", "c", "=", "dest", ".", "charAt", "(", "-", "-", "scanBack", ")", ";", "switch", "(", "c", ")", "{", "case", "<CHAR_LIT:.>", ":", "dotFound", "=", "true", ";", "break", ";", "case", "<CHAR_LIT:U+002C>", ":", "return", "null", ";", "case", "<CHAR_LIT>", ":", "if", "(", "!", "dotFound", ")", "{", "return", "null", ";", "}", "if", "(", "source", "instanceof", "Spanned", ")", "{", "SpannableStringBuilder", "sb", "=", "new", "SpannableStringBuilder", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "sb", ".", "append", "(", "source", ")", ";", "return", "sb", ";", "}", "else", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "default", ":", "}", "}", "return", "null", ";", "}", "}", ";", "InputFilter", "[", "]", "recipientFilters", "=", "new", "InputFilter", "[", "]", "{", "recipientFilter", "}", ";", "mToView", ".", "addTextChangedListener", "(", "watcher", ")", ";", "mCcView", ".", "addTextChangedListener", "(", "watcher", ")", ";", "mBccView", ".", "addTextChangedListener", "(", "watcher", ")", ";", "mSubjectView", ".", "addTextChangedListener", "(", "watcher", ")", ";", "mMessageContentView", ".", "addTextChangedListener", "(", "watcher", ")", ";", "mToView", ".", "setFilters", "(", "recipientFilters", ")", ";", "mCcView", ".", "setFilters", "(", "recipientFilters", ")", ";", "mBccView", ".", "setFilters", "(", "recipientFilters", ")", ";", "mQuotedTextBar", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "mQuotedText", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "mQuotedTextDelete", ".", "setOnClickListener", "(", "this", ")", ";", "mAddressAdapter", "=", "new", "EmailAddressAdapter", "(", "this", ")", ";", "EmailAddressValidator", "addressValidator", "=", "new", "EmailAddressValidator", "(", ")", ";", "mToView", ".", "setAdapter", "(", "mAddressAdapter", ")", ";", "mToView", ".", "setTokenizer", "(", "new", "Rfc822Tokenizer", "(", ")", ")", ";", "mToView", ".", "setValidator", "(", "addressValidator", ")", ";", "mCcView", ".", "setAdapter", "(", "mAddressAdapter", ")", ";", "mCcView", ".", "setTokenizer", "(", "new", "Rfc822Tokenizer", "(", ")", ")", ";", "mCcView", ".", "setValidator", "(", "addressValidator", ")", ";", "mBccView", ".", "setAdapter", "(", "mAddressAdapter", ")", ";", "mBccView", ".", "setTokenizer", "(", "new", "Rfc822Tokenizer", "(", ")", ")", ";", "mBccView", ".", "setValidator", "(", "addressValidator", ")", ";", "mSendButton", ".", "setOnClickListener", "(", "this", ")", ";", "mDiscardButton", ".", "setOnClickListener", "(", "this", ")", ";", "mSaveButton", ".", "setOnClickListener", "(", "this", ")", ";", "mSubjectView", ".", "setOnFocusChangeListener", "(", "this", ")", ";", "}", "</s>"]
["<s>", "public", "void", "beforeTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "before", ",", "int", "after", ")", "{", "}", "</s>"]
["<s>", "public", "void", "onTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "before", ",", "int", "count", ")", "{", "mDraftNeedsSaving", "=", "true", ";", "}", "</s>"]
["<s>", "public", "void", "afterTextChanged", "(", "android", ".", "text", ".", "Editable", "s", ")", "{", "}", "</s>"]
["<s>", "public", "CharSequence", "filter", "(", "CharSequence", "source", ",", "int", "start", ",", "int", "end", ",", "Spanned", "dest", ",", "int", "dstart", ",", "int", "dend", ")", "{", "if", "(", "end", "-", "start", "!", "=", "1", "|", "|", "source", ".", "charAt", "(", "start", ")", "!", "=", "<CHAR_LIT>", ")", "{", "return", "null", ";", "}", "int", "scanBack", "=", "dstart", ";", "boolean", "dotFound", "=", "false", ";", "while", "(", "scanBack", ">", "0", ")", "{", "char", "c", "=", "dest", ".", "charAt", "(", "-", "-", "scanBack", ")", ";", "switch", "(", "c", ")", "{", "case", "<CHAR_LIT:.>", ":", "dotFound", "=", "true", ";", "break", ";", "case", "<CHAR_LIT:U+002C>", ":", "return", "null", ";", "case", "<CHAR_LIT>", ":", "if", "(", "!", "dotFound", ")", "{", "return", "null", ";", "}", "if", "(", "source", "instanceof", "Spanned", ")", "{", "SpannableStringBuilder", "sb", "=", "new", "SpannableStringBuilder", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "sb", ".", "append", "(", "source", ")", ";", "return", "sb", ";", "}", "else", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "default", ":", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Object", "[", "]", "doInBackground", "(", "Long", ".", ".", ".", "messageIds", ")", "{", "Message", "message", "=", "Message", ".", "restoreMessageWithId", "(", "MessageCompose", ".", "this", ",", "messageIds", "[", "0", "]", ")", ";", "if", "(", "message", "=", "=", "null", ")", "{", "return", "new", "Object", "[", "]", "{", "null", ",", "null", "}", ";", "}", "long", "accountId", "=", "message", ".", "mAccountKey", ";", "Account", "account", "=", "Account", ".", "restoreAccountWithId", "(", "MessageCompose", ".", "this", ",", "accountId", ")", ";", "try", "{", "message", ".", "mHtml", "=", "Body", ".", "restoreBodyHtmlWithMessageId", "(", "MessageCompose", ".", "this", ",", "message", ".", "mId", ")", ";", "message", ".", "mText", "=", "Body", ".", "restoreBodyTextWithMessageId", "(", "MessageCompose", ".", "this", ",", "message", ".", "mId", ")", ";", "boolean", "isEditDraft", "=", "ACTION_EDIT_DRAFT", ".", "equals", "(", "mAction", ")", ";", "if", "(", "isEditDraft", ")", "{", "message", ".", "mHtmlReply", "=", "Body", ".", "restoreReplyHtmlWithMessageId", "(", "MessageCompose", ".", "this", ",", "message", ".", "mId", ")", ";", "message", ".", "mTextReply", "=", "Body", ".", "restoreReplyTextWithMessageId", "(", "MessageCompose", ".", "this", ",", "message", ".", "mId", ")", ";", "message", ".", "mIntroText", "=", "Body", ".", "restoreIntroTextWithMessageId", "(", "MessageCompose", ".", "this", ",", "message", ".", "mId", ")", ";", "}", "else", "{", "message", ".", "mHtmlReply", "=", "null", ";", "message", ".", "mTextReply", "=", "null", ";", "message", ".", "mIntroText", "=", "null", ";", "}", "}", "catch", "(", "RuntimeException", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "return", "new", "Object", "[", "]", "{", "null", ",", "null", "}", ";", "}", "return", "new", "Object", "[", "]", "{", "message", ",", "account", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Object", "[", "]", "messageAndAccount", ")", "{", "if", "(", "messageAndAccount", "=", "=", "null", ")", "{", "return", ";", "}", "final", "Message", "message", "=", "(", "Message", ")", "messageAndAccount", "[", "0", "]", ";", "final", "Account", "account", "=", "(", "Account", ")", "messageAndAccount", "[", "1", "]", ";", "if", "(", "message", "=", "=", "null", "&", "&", "account", "=", "=", "null", ")", "{", "Toast", ".", "makeText", "(", "MessageCompose", ".", "this", ",", "R", ".", "string", ".", "error_loading_message_body", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "finish", "(", ")", ";", "return", ";", "}", "if", "(", "ACTION_EDIT_DRAFT", ".", "equals", "(", "mAction", ")", ")", "{", "mDraft", "=", "message", ";", "mLoadAttachmentsTask", "=", "new", "AsyncTask", "<", "Long", ",", "Void", ",", "Attachment", "[", "]", ">", "(", ")", "{", "@", "Override", "protected", "Attachment", "[", "]", "doInBackground", "(", "Long", ".", ".", ".", "messageIds", ")", "{", "return", "Attachment", ".", "restoreAttachmentsWithMessageId", "(", "MessageCompose", ".", "this", ",", "messageIds", "[", "0", "]", ")", ";", "}", "@", "Override", "protected", "void", "onPostExecute", "(", "Attachment", "[", "]", "attachments", ")", "{", "if", "(", "attachments", "=", "=", "null", ")", "{", "return", ";", "}", "for", "(", "Attachment", "attachment", ":", "attachments", ")", "{", "addAttachment", "(", "attachment", ")", ";", "}", "}", "}", ".", "execute", "(", "message", ".", "mId", ")", ";", "}", "else", "if", "(", "ACTION_REPLY", ".", "equals", "(", "mAction", ")", "|", "|", "ACTION_REPLY_ALL", ".", "equals", "(", "mAction", ")", "|", "|", "ACTION_FORWARD", ".", "equals", "(", "mAction", ")", ")", "{", "mSource", "=", "message", ";", "}", "else", "if", "(", "Email", ".", "LOGD", ")", "{", "Email", ".", "log", "(", "\"", "<STR_LIT>", "\"", "+", "mAction", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mAccount", "=", "account", ";", "processSourceMessageGuarded", "(", "message", ",", "mAccount", ")", ";", "mMessageLoaded", "=", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Attachment", "[", "]", "doInBackground", "(", "Long", ".", ".", ".", "messageIds", ")", "{", "return", "Attachment", ".", "restoreAttachmentsWithMessageId", "(", "MessageCompose", ".", "this", ",", "messageIds", "[", "0", "]", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Attachment", "[", "]", "attachments", ")", "{", "if", "(", "attachments", "=", "=", "null", ")", "{", "return", ";", "}", "for", "(", "Attachment", "attachment", ":", "attachments", ")", "{", "addAttachment", "(", "attachment", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "updateTitle", "(", ")", "{", "if", "(", "mSubjectView", ".", "getText", "(", ")", ".", "length", "(", ")", "=", "=", "0", ")", "{", "setTitle", "(", "R", ".", "string", ".", "compose_title", ")", ";", "}", "else", "{", "setTitle", "(", "mSubjectView", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "onFocusChange", "(", "View", "view", ",", "boolean", "focused", ")", "{", "if", "(", "!", "focused", ")", "{", "updateTitle", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "addAddresses", "(", "MultiAutoCompleteTextView", "view", ",", "Address", "[", "]", "addresses", ")", "{", "if", "(", "addresses", "=", "=", "null", ")", "{", "return", ";", "}", "for", "(", "Address", "address", ":", "addresses", ")", "{", "addAddress", "(", "view", ",", "address", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "addAddresses", "(", "MultiAutoCompleteTextView", "view", ",", "String", "[", "]", "addresses", ")", "{", "if", "(", "addresses", "=", "=", "null", ")", "{", "return", ";", "}", "for", "(", "String", "oneAddress", ":", "addresses", ")", "{", "addAddress", "(", "view", ",", "oneAddress", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "addAddress", "(", "MultiAutoCompleteTextView", "view", ",", "String", "address", ")", "{", "view", ".", "append", "(", "address", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "String", "getPackedAddresses", "(", "TextView", "view", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "view", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ")", ";", "return", "Address", ".", "pack", "(", "addresses", ")", ";", "}", "</s>"]
["<s>", "private", "Address", "[", "]", "getAddresses", "(", "TextView", "view", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "parse", "(", "view", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ")", ";", "return", "addresses", ";", "}", "</s>"]
["<s>", "private", "String", "makeDisplayName", "(", "String", "packedTo", ",", "String", "packedCc", ",", "String", "packedBcc", ")", "{", "Address", "first", "=", "null", ";", "int", "nRecipients", "=", "0", ";", "for", "(", "String", "packed", ":", "new", "String", "[", "]", "{", "packedTo", ",", "packedCc", ",", "packedBcc", "}", ")", "{", "Address", "[", "]", "addresses", "=", "Address", ".", "unpack", "(", "packed", ")", ";", "nRecipients", "+", "=", "addresses", ".", "length", ";", "if", "(", "first", "=", "=", "null", "&", "&", "addresses", ".", "length", ">", "0", ")", "{", "first", "=", "addresses", "[", "0", "]", ";", "}", "}", "if", "(", "nRecipients", "=", "=", "0", ")", "{", "return", "\"", "\"", ";", "}", "String", "friendly", "=", "first", ".", "toFriendly", "(", ")", ";", "if", "(", "nRecipients", "=", "=", "1", ")", "{", "return", "friendly", ";", "}", "return", "this", ".", "getString", "(", "R", ".", "string", ".", "message_compose_display_name", ",", "friendly", ",", "nRecipients", "-", "1", ")", ";", "}", "</s>"]
["<s>", "private", "ContentValues", "getUpdateContentValues", "(", "Message", "message", ")", "{", "ContentValues", "values", "=", "new", "ContentValues", "(", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "TIMESTAMP", ",", "message", ".", "mTimeStamp", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "FROM_LIST", ",", "message", ".", "mFrom", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "TO_LIST", ",", "message", ".", "mTo", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "CC_LIST", ",", "message", ".", "mCc", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "BCC_LIST", ",", "message", ".", "mBcc", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "SUBJECT", ",", "message", ".", "mSubject", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "DISPLAY_NAME", ",", "message", ".", "mDisplayName", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "FLAG_READ", ",", "message", ".", "mFlagRead", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "FLAG_LOADED", ",", "message", ".", "mFlagLoaded", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "FLAG_ATTACHMENT", ",", "message", ".", "mFlagAttachment", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "FLAGS", ",", "message", ".", "mFlags", ")", ";", "return", "values", ";", "}", "</s>"]
["<s>", "private", "void", "updateMessage", "(", "Message", "message", ",", "Account", "account", ",", "boolean", "hasAttachments", ")", "{", "if", "(", "message", ".", "mMessageId", "=", "=", "null", "|", "|", "message", ".", "mMessageId", ".", "length", "(", ")", "=", "=", "0", ")", "{", "message", ".", "mMessageId", "=", "Utility", ".", "generateMessageId", "(", ")", ";", "}", "message", ".", "mTimeStamp", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "message", ".", "mFrom", "=", "new", "Address", "(", "account", ".", "getEmailAddress", "(", ")", ",", "account", ".", "getSenderName", "(", ")", ")", ".", "pack", "(", ")", ";", "message", ".", "mTo", "=", "getPackedAddresses", "(", "mToView", ")", ";", "message", ".", "mCc", "=", "getPackedAddresses", "(", "mCcView", ")", ";", "message", ".", "mBcc", "=", "getPackedAddresses", "(", "mBccView", ")", ";", "message", ".", "mSubject", "=", "mSubjectView", ".", "getText", "(", ")", ".", "toString", "(", ")", ";", "message", ".", "mText", "=", "mMessageContentView", ".", "getText", "(", ")", ".", "toString", "(", ")", ";", "message", ".", "mAccountKey", "=", "account", ".", "mId", ";", "message", ".", "mDisplayName", "=", "makeDisplayName", "(", "message", ".", "mTo", ",", "message", ".", "mCc", ",", "message", ".", "mBcc", ")", ";", "message", ".", "mFlagRead", "=", "true", ";", "message", ".", "mFlagLoaded", "=", "Message", ".", "FLAG_LOADED_COMPLETE", ";", "message", ".", "mFlagAttachment", "=", "hasAttachments", ";", "if", "(", "mSource", "!", "=", "null", "&", "&", "mQuotedTextBar", ".", "getVisibility", "(", ")", "=", "=", "View", ".", "VISIBLE", ")", "{", "if", "(", "ACTION_REPLY", ".", "equals", "(", "mAction", ")", "|", "|", "ACTION_REPLY_ALL", ".", "equals", "(", "mAction", ")", "|", "|", "ACTION_FORWARD", ".", "equals", "(", "mAction", ")", ")", "{", "message", ".", "mSourceKey", "=", "mSource", ".", "mId", ";", "message", ".", "mTextReply", "=", "mSource", ".", "mText", ";", "}", "String", "fromAsString", "=", "Address", ".", "unpackToString", "(", "mSource", ".", "mFrom", ")", ";", "if", "(", "ACTION_FORWARD", ".", "equals", "(", "mAction", ")", ")", "{", "message", ".", "mFlags", "|", "=", "Message", ".", "FLAG_TYPE_FORWARD", ";", "String", "subject", "=", "mSource", ".", "mSubject", ";", "String", "to", "=", "Address", ".", "unpackToString", "(", "mSource", ".", "mTo", ")", ";", "String", "cc", "=", "Address", ".", "unpackToString", "(", "mSource", ".", "mCc", ")", ";", "message", ".", "mIntroText", "=", "getString", "(", "R", ".", "string", ".", "message_compose_fwd_header_fmt", ",", "subject", ",", "fromAsString", ",", "to", "!", "=", "null", "?", "to", ":", "\"", "\"", ",", "cc", "!", "=", "null", "?", "cc", ":", "\"", "\"", ")", ";", "}", "else", "{", "message", ".", "mFlags", "|", "=", "Message", ".", "FLAG_TYPE_REPLY", ";", "message", ".", "mIntroText", "=", "getString", "(", "R", ".", "string", ".", "message_compose_reply_header_fmt", ",", "fromAsString", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "Attachment", "[", "]", "getAttachmentsFromUI", "(", ")", "{", "int", "count", "=", "mAttachments", ".", "getChildCount", "(", ")", ";", "Attachment", "[", "]", "attachments", "=", "new", "Attachment", "[", "count", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "count", ";", "+", "+", "i", ")", "{", "attachments", "[", "i", "]", "=", "(", "Attachment", ")", "mAttachments", ".", "getChildAt", "(", "i", ")", ".", "getTag", "(", ")", ";", "}", "return", "attachments", ";", "}", "</s>"]
["<s>", "private", "long", "getOrCreateDraftId", "(", ")", "{", "synchronized", "(", "mDraft", ")", "{", "if", "(", "mDraft", ".", "mId", ">", "0", ")", "{", "return", "mDraft", ".", "mId", ";", "}", "if", "(", "!", "mMessageLoaded", ")", "{", "return", "-", "1", ";", "}", "final", "Attachment", "[", "]", "attachments", "=", "getAttachmentsFromUI", "(", ")", ";", "updateMessage", "(", "mDraft", ",", "mAccount", ",", "attachments", ".", "length", ">", "0", ")", ";", "mController", ".", "saveToMailbox", "(", "mDraft", ",", "EmailContent", ".", "Mailbox", ".", "TYPE_DRAFTS", ")", ";", "return", "mDraft", ".", "mId", ";", "}", "}", "</s>"]
["<s>", "private", "void", "sendOrSaveMessage", "(", "final", "boolean", "send", ")", "{", "final", "Attachment", "[", "]", "attachments", "=", "getAttachmentsFromUI", "(", ")", ";", "if", "(", "!", "mMessageLoaded", ")", "{", "return", ";", "}", "updateMessage", "(", "mDraft", ",", "mAccount", ",", "attachments", ".", "length", ">", "0", ")", ";", "mSaveMessageTask", "=", "new", "AsyncTask", "<", "Void", ",", "Void", ",", "Void", ">", "(", ")", "{", "@", "Override", "protected", "Void", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "synchronized", "(", "mDraft", ")", "{", "if", "(", "mDraft", ".", "isSaved", "(", ")", ")", "{", "Uri", "draftUri", "=", "ContentUris", ".", "withAppendedId", "(", "mDraft", ".", "SYNCED_CONTENT_URI", ",", "mDraft", ".", "mId", ")", ";", "getContentResolver", "(", ")", ".", "update", "(", "draftUri", ",", "getUpdateContentValues", "(", "mDraft", ")", ",", "null", ",", "null", ")", ";", "ContentValues", "values", "=", "new", "ContentValues", "(", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "TEXT_CONTENT", ",", "mDraft", ".", "mText", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "TEXT_REPLY", ",", "mDraft", ".", "mTextReply", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "HTML_REPLY", ",", "mDraft", ".", "mHtmlReply", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "INTRO_TEXT", ",", "mDraft", ".", "mIntroText", ")", ";", "Body", ".", "updateBodyWithMessageId", "(", "MessageCompose", ".", "this", ",", "mDraft", ".", "mId", ",", "values", ")", ";", "}", "else", "{", "mController", ".", "saveToMailbox", "(", "mDraft", ",", "EmailContent", ".", "Mailbox", ".", "TYPE_DRAFTS", ")", ";", "}", "for", "(", "Attachment", "attachment", ":", "attachments", ")", "{", "if", "(", "!", "attachment", ".", "isSaved", "(", ")", ")", "{", "attachment", ".", "mMessageKey", "=", "mDraft", ".", "mId", ";", "attachment", ".", "save", "(", "MessageCompose", ".", "this", ")", ";", "}", "}", "if", "(", "send", ")", "{", "mController", ".", "sendMessage", "(", "mDraft", ".", "mId", ",", "mDraft", ".", "mAccountKey", ")", ";", "}", "return", "null", ";", "}", "}", "@", "Override", "protected", "void", "onPostExecute", "(", "Void", "dummy", ")", "{", "if", "(", "isCancelled", "(", ")", ")", "{", "return", ";", "}", "if", "(", "!", "send", "&", "&", "(", "getChangingConfigurations", "(", ")", "&", "ActivityInfo", ".", "CONFIG_ORIENTATION", ")", "=", "=", "0", ")", "{", "Toast", ".", "makeText", "(", "MessageCompose", ".", "this", ",", "R", ".", "string", ".", "message_saved_toast", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "}", "}", "}", ".", "execute", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Void", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "synchronized", "(", "mDraft", ")", "{", "if", "(", "mDraft", ".", "isSaved", "(", ")", ")", "{", "Uri", "draftUri", "=", "ContentUris", ".", "withAppendedId", "(", "mDraft", ".", "SYNCED_CONTENT_URI", ",", "mDraft", ".", "mId", ")", ";", "getContentResolver", "(", ")", ".", "update", "(", "draftUri", ",", "getUpdateContentValues", "(", "mDraft", ")", ",", "null", ",", "null", ")", ";", "ContentValues", "values", "=", "new", "ContentValues", "(", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "TEXT_CONTENT", ",", "mDraft", ".", "mText", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "TEXT_REPLY", ",", "mDraft", ".", "mTextReply", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "HTML_REPLY", ",", "mDraft", ".", "mHtmlReply", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "INTRO_TEXT", ",", "mDraft", ".", "mIntroText", ")", ";", "Body", ".", "updateBodyWithMessageId", "(", "MessageCompose", ".", "this", ",", "mDraft", ".", "mId", ",", "values", ")", ";", "}", "else", "{", "mController", ".", "saveToMailbox", "(", "mDraft", ",", "EmailContent", ".", "Mailbox", ".", "TYPE_DRAFTS", ")", ";", "}", "for", "(", "Attachment", "attachment", ":", "attachments", ")", "{", "if", "(", "!", "attachment", ".", "isSaved", "(", ")", ")", "{", "attachment", ".", "mMessageKey", "=", "mDraft", ".", "mId", ";", "attachment", ".", "save", "(", "MessageCompose", ".", "this", ")", ";", "}", "}", "if", "(", "send", ")", "{", "mController", ".", "sendMessage", "(", "mDraft", ".", "mId", ",", "mDraft", ".", "mAccountKey", ")", ";", "}", "return", "null", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Void", "dummy", ")", "{", "if", "(", "isCancelled", "(", ")", ")", "{", "return", ";", "}", "if", "(", "!", "send", "&", "&", "(", "getChangingConfigurations", "(", ")", "&", "ActivityInfo", ".", "CONFIG_ORIENTATION", ")", "=", "=", "0", ")", "{", "Toast", ".", "makeText", "(", "MessageCompose", ".", "this", ",", "R", ".", "string", ".", "message_saved_toast", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "saveIfNeeded", "(", ")", "{", "if", "(", "!", "mDraftNeedsSaving", ")", "{", "return", ";", "}", "mDraftNeedsSaving", "=", "false", ";", "sendOrSaveMessage", "(", "false", ")", ";", "}", "</s>"]
["<s>", "boolean", "isAddressAllValid", "(", ")", "{", "for", "(", "TextView", "view", ":", "new", "TextView", "[", "]", "{", "mToView", ",", "mCcView", ",", "mBccView", "}", ")", "{", "String", "addresses", "=", "view", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ";", "if", "(", "!", "Address", ".", "isAllValid", "(", "addresses", ")", ")", "{", "view", ".", "setError", "(", "getString", "(", "R", ".", "string", ".", "message_compose_error_invalid_email", ")", ")", ";", "return", "false", ";", "}", "}", "return", "true", ";", "}", "</s>"]
["<s>", "private", "void", "onSend", "(", ")", "{", "if", "(", "!", "isAddressAllValid", "(", ")", ")", "{", "Toast", ".", "makeText", "(", "this", ",", "getString", "(", "R", ".", "string", ".", "message_compose_error_invalid_email", ")", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "}", "else", "if", "(", "getAddresses", "(", "mToView", ")", ".", "length", "=", "=", "0", "&", "&", "getAddresses", "(", "mCcView", ")", ".", "length", "=", "=", "0", "&", "&", "getAddresses", "(", "mBccView", ")", ".", "length", "=", "=", "0", ")", "{", "mToView", ".", "setError", "(", "getString", "(", "R", ".", "string", ".", "message_compose_error_no_recipients", ")", ")", ";", "Toast", ".", "makeText", "(", "this", ",", "getString", "(", "R", ".", "string", ".", "message_compose_error_no_recipients", ")", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "}", "else", "{", "sendOrSaveMessage", "(", "true", ")", ";", "mDraftNeedsSaving", "=", "false", ";", "finish", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onDiscard", "(", ")", "{", "if", "(", "mDraft", ".", "mId", ">", "0", ")", "{", "mController", ".", "deleteMessage", "(", "mDraft", ".", "mId", ",", "mDraft", ".", "mAccountKey", ")", ";", "}", "Toast", ".", "makeText", "(", "this", ",", "getString", "(", "R", ".", "string", ".", "message_discarded_toast", ")", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "mDraftNeedsSaving", "=", "false", ";", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onSave", "(", ")", "{", "saveIfNeeded", "(", ")", ";", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onAddCcBcc", "(", ")", "{", "mCcView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "mBccView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onAddAttachment", "(", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "Intent", ".", "ACTION_GET_CONTENT", ")", ";", "i", ".", "addCategory", "(", "Intent", ".", "CATEGORY_OPENABLE", ")", ";", "i", ".", "setType", "(", "Email", ".", "ACCEPTABLE_ATTACHMENT_SEND_UI_TYPES", "[", "0", "]", ")", ";", "startActivityForResult", "(", "Intent", ".", "createChooser", "(", "i", ",", "getString", "(", "R", ".", "string", ".", "choose_attachment_dialog_title", ")", ")", ",", "ACTIVITY_REQUEST_PICK_ATTACHMENT", ")", ";", "}", "</s>"]
["<s>", "private", "Attachment", "loadAttachmentInfo", "(", "Uri", "uri", ")", "{", "int", "size", "=", "-", "1", ";", "String", "name", "=", "null", ";", "ContentResolver", "contentResolver", "=", "getContentResolver", "(", ")", ";", "Cursor", "metadataCursor", "=", "contentResolver", ".", "query", "(", "uri", ",", "ATTACHMENT_META_COLUMNS", ",", "null", ",", "null", ",", "null", ")", ";", "if", "(", "metadataCursor", "!", "=", "null", ")", "{", "try", "{", "if", "(", "metadataCursor", ".", "moveToFirst", "(", ")", ")", "{", "name", "=", "metadataCursor", ".", "getString", "(", "0", ")", ";", "size", "=", "metadataCursor", ".", "getInt", "(", "1", ")", ";", "}", "}", "finally", "{", "metadataCursor", ".", "close", "(", ")", ";", "}", "}", "if", "(", "name", "=", "=", "null", ")", "{", "name", "=", "uri", ".", "getLastPathSegment", "(", ")", ";", "}", "String", "contentType", "=", "contentResolver", ".", "getType", "(", "uri", ")", ";", "if", "(", "contentType", "=", "=", "null", ")", "{", "contentType", "=", "\"", "\"", ";", "}", "Attachment", "attachment", "=", "new", "Attachment", "(", ")", ";", "attachment", ".", "mFileName", "=", "name", ";", "attachment", ".", "mContentUri", "=", "uri", ".", "toString", "(", ")", ";", "attachment", ".", "mSize", "=", "size", ";", "attachment", ".", "mMimeType", "=", "contentType", ";", "return", "attachment", ";", "}", "</s>"]
["<s>", "private", "void", "addAttachment", "(", "Attachment", "attachment", ")", "{", "if", "(", "attachment", ".", "mSize", ">", "Email", ".", "MAX_ATTACHMENT_UPLOAD_SIZE", ")", "{", "Toast", ".", "makeText", "(", "this", ",", "R", ".", "string", ".", "message_compose_attachment_size", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "return", ";", "}", "View", "view", "=", "getLayoutInflater", "(", ")", ".", "inflate", "(", "R", ".", "layout", ".", "message_compose_attachment", ",", "mAttachments", ",", "false", ")", ";", "TextView", "nameView", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "attachment_name", ")", ";", "ImageButton", "delete", "=", "(", "ImageButton", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "attachment_delete", ")", ";", "nameView", ".", "setText", "(", "attachment", ".", "mFileName", ")", ";", "delete", ".", "setOnClickListener", "(", "this", ")", ";", "delete", ".", "setTag", "(", "view", ")", ";", "view", ".", "setTag", "(", "attachment", ")", ";", "mAttachments", ".", "addView", "(", "view", ")", ";", "}", "</s>"]
["<s>", "private", "void", "addAttachment", "(", "Uri", "uri", ")", "{", "addAttachment", "(", "loadAttachmentInfo", "(", "uri", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onActivityResult", "(", "int", "requestCode", ",", "int", "resultCode", ",", "Intent", "data", ")", "{", "if", "(", "data", "=", "=", "null", ")", "{", "return", ";", "}", "addAttachment", "(", "data", ".", "getData", "(", ")", ")", ";", "mDraftNeedsSaving", "=", "true", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "View", "view", ")", "{", "switch", "(", "view", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "send", ":", "onSend", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "save", ":", "onSave", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "discard", ":", "onDiscard", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "attachment_delete", ":", "onDeleteAttachment", "(", "view", ")", ";", "break", ";", "case", "R", ".", "id", ".", "quoted_text_delete", ":", "mQuotedTextBar", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "mQuotedText", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "mDraftNeedsSaving", "=", "true", ";", "break", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onDeleteAttachment", "(", "View", "delButtonView", ")", "{", "View", "attachmentView", "=", "(", "View", ")", "delButtonView", ".", "getTag", "(", ")", ";", "Attachment", "attachment", "=", "(", "Attachment", ")", "attachmentView", ".", "getTag", "(", ")", ";", "mAttachments", ".", "removeView", "(", "attachmentView", ")", ";", "if", "(", "attachment", ".", "isSaved", "(", ")", ")", "{", "new", "AsyncTask", "<", "Long", ",", "Void", ",", "Void", ">", "(", ")", "{", "@", "Override", "protected", "Void", "doInBackground", "(", "Long", ".", ".", ".", "attachmentIds", ")", "{", "mController", ".", "deleteAttachment", "(", "attachmentIds", "[", "0", "]", ")", ";", "return", "null", ";", "}", "}", ".", "execute", "(", "attachment", ".", "mId", ")", ";", "}", "mDraftNeedsSaving", "=", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Void", "doInBackground", "(", "Long", ".", ".", ".", "attachmentIds", ")", "{", "mController", ".", "deleteAttachment", "(", "attachmentIds", "[", "0", "]", ")", ";", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onOptionsItemSelected", "(", "MenuItem", "item", ")", "{", "switch", "(", "item", ".", "getItemId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "send", ":", "onSend", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "save", ":", "onSave", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "discard", ":", "onDiscard", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "add_cc_bcc", ":", "onAddCcBcc", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "add_attachment", ":", "onAddAttachment", "(", ")", ";", "break", ";", "default", ":", "return", "super", ".", "onOptionsItemSelected", "(", "item", ")", ";", "}", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onCreateOptionsMenu", "(", "Menu", "menu", ")", "{", "super", ".", "onCreateOptionsMenu", "(", "menu", ")", ";", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "message_compose_option", ",", "menu", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "void", "initFromIntent", "(", "Intent", "intent", ")", "{", "String", "[", "]", "extraStrings", "=", "intent", ".", "getStringArrayExtra", "(", "Intent", ".", "EXTRA_EMAIL", ")", ";", "if", "(", "extraStrings", "!", "=", "null", ")", "{", "addAddresses", "(", "mToView", ",", "extraStrings", ")", ";", "}", "extraStrings", "=", "intent", ".", "getStringArrayExtra", "(", "Intent", ".", "EXTRA_CC", ")", ";", "if", "(", "extraStrings", "!", "=", "null", ")", "{", "addAddresses", "(", "mCcView", ",", "extraStrings", ")", ";", "}", "extraStrings", "=", "intent", ".", "getStringArrayExtra", "(", "Intent", ".", "EXTRA_BCC", ")", ";", "if", "(", "extraStrings", "!", "=", "null", ")", "{", "addAddresses", "(", "mBccView", ",", "extraStrings", ")", ";", "}", "String", "extraString", "=", "intent", ".", "getStringExtra", "(", "Intent", ".", "EXTRA_SUBJECT", ")", ";", "if", "(", "extraString", "!", "=", "null", ")", "{", "mSubjectView", ".", "setText", "(", "extraString", ")", ";", "}", "final", "Uri", "dataUri", "=", "intent", ".", "getData", "(", ")", ";", "if", "(", "dataUri", "!", "=", "null", ")", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "dataUri", ".", "getScheme", "(", ")", ")", ")", "{", "initializeFromMailTo", "(", "dataUri", ".", "toString", "(", ")", ")", ";", "}", "else", "{", "String", "toText", "=", "dataUri", ".", "getSchemeSpecificPart", "(", ")", ";", "if", "(", "toText", "!", "=", "null", ")", "{", "addAddresses", "(", "mToView", ",", "toText", ".", "split", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ")", ";", "}", "}", "}", "CharSequence", "text", "=", "intent", ".", "getCharSequenceExtra", "(", "Intent", ".", "EXTRA_TEXT", ")", ";", "if", "(", "text", "!", "=", "null", ")", "{", "mMessageContentView", ".", "setText", "(", "text", ")", ";", "}", "if", "(", "Intent", ".", "ACTION_SEND", ".", "equals", "(", "mAction", ")", "&", "&", "intent", ".", "hasExtra", "(", "Intent", ".", "EXTRA_STREAM", ")", ")", "{", "String", "type", "=", "intent", ".", "getType", "(", ")", ";", "Uri", "stream", "=", "(", "Uri", ")", "intent", ".", "getParcelableExtra", "(", "Intent", ".", "EXTRA_STREAM", ")", ";", "if", "(", "stream", "!", "=", "null", "&", "&", "type", "!", "=", "null", ")", "{", "if", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "type", ",", "Email", ".", "ACCEPTABLE_ATTACHMENT_SEND_INTENT_TYPES", ")", ")", "{", "addAttachment", "(", "stream", ")", ";", "}", "}", "}", "if", "(", "Intent", ".", "ACTION_SEND_MULTIPLE", ".", "equals", "(", "mAction", ")", "&", "&", "intent", ".", "hasExtra", "(", "Intent", ".", "EXTRA_STREAM", ")", ")", "{", "ArrayList", "<", "Parcelable", ">", "list", "=", "intent", ".", "getParcelableArrayListExtra", "(", "Intent", ".", "EXTRA_STREAM", ")", ";", "if", "(", "list", "!", "=", "null", ")", "{", "for", "(", "Parcelable", "parcelable", ":", "list", ")", "{", "Uri", "uri", "=", "(", "Uri", ")", "parcelable", ";", "if", "(", "uri", "!", "=", "null", ")", "{", "Attachment", "attachment", "=", "loadAttachmentInfo", "(", "uri", ")", ";", "if", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "attachment", ".", "mMimeType", ",", "Email", ".", "ACCEPTABLE_ATTACHMENT_SEND_INTENT_TYPES", ")", ")", "{", "addAttachment", "(", "attachment", ")", ";", "}", "}", "}", "}", "}", "if", "(", "mCcView", ".", "length", "(", ")", ">", "0", ")", "{", "mCcView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "if", "(", "mBccView", ".", "length", "(", ")", ">", "0", ")", "{", "mBccView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "setNewMessageFocus", "(", ")", ";", "mDraftNeedsSaving", "=", "false", ";", "}", "</s>"]
["<s>", "private", "void", "initializeFromMailTo", "(", "String", "mailToString", ")", "{", "int", "index", "=", "mailToString", ".", "indexOf", "(", "\"", "<STR_LIT:?>", "\"", ")", ";", "int", "length", "=", "\"", "<STR_LIT>", "\"", ".", "length", "(", ")", "+", "1", ";", "String", "to", ";", "try", "{", "if", "(", "index", "=", "=", "-", "1", ")", "{", "to", "=", "decode", "(", "mailToString", ".", "substring", "(", "length", ")", ")", ";", "}", "else", "{", "to", "=", "decode", "(", "mailToString", ".", "substring", "(", "length", ",", "index", ")", ")", ";", "}", "addAddresses", "(", "mToView", ",", "to", ".", "split", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "catch", "(", "UnsupportedEncodingException", "e", ")", "{", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "e", ".", "getMessage", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "mailToString", "+", "\"", "'", "\"", ")", ";", "}", "Uri", "uri", "=", "Uri", ".", "parse", "(", "\"", "<STR_LIT>", "\"", "+", "mailToString", ")", ";", "List", "<", "String", ">", "cc", "=", "uri", ".", "getQueryParameters", "(", "\"", "<STR_LIT>", "\"", ")", ";", "addAddresses", "(", "mCcView", ",", "cc", ".", "toArray", "(", "new", "String", "[", "cc", ".", "size", "(", ")", "]", ")", ")", ";", "List", "<", "String", ">", "otherTo", "=", "uri", ".", "getQueryParameters", "(", "\"", "<STR_LIT>", "\"", ")", ";", "addAddresses", "(", "mCcView", ",", "otherTo", ".", "toArray", "(", "new", "String", "[", "otherTo", ".", "size", "(", ")", "]", ")", ")", ";", "List", "<", "String", ">", "bcc", "=", "uri", ".", "getQueryParameters", "(", "\"", "<STR_LIT>", "\"", ")", ";", "addAddresses", "(", "mBccView", ",", "bcc", ".", "toArray", "(", "new", "String", "[", "bcc", ".", "size", "(", ")", "]", ")", ")", ";", "List", "<", "String", ">", "subject", "=", "uri", ".", "getQueryParameters", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "subject", ".", "size", "(", ")", ">", "0", ")", "{", "mSubjectView", ".", "setText", "(", "subject", ".", "get", "(", "0", ")", ")", ";", "}", "List", "<", "String", ">", "body", "=", "uri", ".", "getQueryParameters", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "body", ".", "size", "(", ")", ">", "0", ")", "{", "mMessageContentView", ".", "setText", "(", "body", ".", "get", "(", "0", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "String", "decode", "(", "String", "s", ")", "throws", "UnsupportedEncodingException", "{", "return", "URLDecoder", ".", "decode", "(", "s", ",", "\"", "<STR_LIT:UTF-8>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "void", "displayQuotedText", "(", "String", "textBody", ",", "String", "htmlBody", ")", "{", "boolean", "plainTextFlag", "=", "textBody", "!", "=", "null", ";", "String", "text", "=", "plainTextFlag", "?", "textBody", ":", "htmlBody", ";", "if", "(", "text", "!", "=", "null", ")", "{", "text", "=", "plainTextFlag", "?", "EmailHtmlUtil", ".", "escapeCharacterToDisplay", "(", "text", ")", ":", "text", ";", "mQuotedTextBar", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "mQuotedText", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "mQuotedText", ".", "loadDataWithBaseURL", "(", "\"", "<STR_LIT>", "\"", ",", "text", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "}", "}", "</s>"]
["<s>", "private", "boolean", "safeAddAddresses", "(", "String", "addrs", ",", "String", "ourAddress", ",", "MultiAutoCompleteTextView", "view", ",", "ArrayList", "<", "Address", ">", "addrList", ")", "{", "boolean", "added", "=", "false", ";", "for", "(", "Address", "address", ":", "Address", ".", "unpack", "(", "addrs", ")", ")", "{", "if", "(", "!", "address", ".", "getAddress", "(", ")", ".", "equalsIgnoreCase", "(", "ourAddress", ")", "&", "&", "!", "addrList", ".", "contains", "(", "address", ")", ")", "{", "addrList", ".", "add", "(", "address", ")", ";", "addAddress", "(", "view", ",", "address", ".", "toString", "(", ")", ")", ";", "added", "=", "true", ";", "}", "}", "return", "added", ";", "}", "</s>"]
["<s>", "void", "setupAddressViews", "(", "Message", "message", ",", "Account", "account", ",", "MultiAutoCompleteTextView", "toView", ",", "MultiAutoCompleteTextView", "ccView", ",", "boolean", "replyAll", ")", "{", "Address", "[", "]", "replyToAddresses", "=", "Address", ".", "unpack", "(", "message", ".", "mReplyTo", ")", ";", "if", "(", "replyToAddresses", ".", "length", "=", "=", "0", ")", "{", "replyToAddresses", "=", "Address", ".", "unpack", "(", "message", ".", "mFrom", ")", ";", "}", "addAddresses", "(", "mToView", ",", "replyToAddresses", ")", ";", "if", "(", "replyAll", ")", "{", "ArrayList", "<", "Address", ">", "allAddresses", "=", "new", "ArrayList", "<", "Address", ">", "(", ")", ";", "String", "ourAddress", "=", "account", ".", "mEmailAddress", ";", "for", "(", "Address", "address", ":", "replyToAddresses", ")", "{", "allAddresses", ".", "add", "(", "address", ")", ";", "}", "safeAddAddresses", "(", "message", ".", "mTo", ",", "ourAddress", ",", "mToView", ",", "allAddresses", ")", ";", "if", "(", "safeAddAddresses", "(", "message", ".", "mCc", ",", "ourAddress", ",", "mCcView", ",", "allAddresses", ")", ")", "{", "mCcView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "}", "}", "</s>"]
["<s>", "void", "processSourceMessageGuarded", "(", "Message", "message", ",", "Account", "account", ")", "{", "if", "(", "!", "mSourceMessageProcessed", ")", "{", "processSourceMessage", "(", "message", ",", "account", ")", ";", "mSourceMessageProcessed", "=", "true", ";", "}", "if", "(", "ACTION_EDIT_DRAFT", ".", "equals", "(", "mAction", ")", ")", "{", "displayQuotedText", "(", "message", ".", "mTextReply", ",", "message", ".", "mHtmlReply", ")", ";", "}", "}", "</s>"]
["<s>", "void", "processSourceMessage", "(", "Message", "message", ",", "Account", "account", ")", "{", "mDraftNeedsSaving", "=", "true", ";", "final", "String", "subject", "=", "message", ".", "mSubject", ";", "if", "(", "ACTION_REPLY", ".", "equals", "(", "mAction", ")", "|", "|", "ACTION_REPLY_ALL", ".", "equals", "(", "mAction", ")", ")", "{", "setupAddressViews", "(", "message", ",", "account", ",", "mToView", ",", "mCcView", ",", "ACTION_REPLY_ALL", ".", "equals", "(", "mAction", ")", ")", ";", "if", "(", "subject", "!", "=", "null", "&", "&", "!", "subject", ".", "toLowerCase", "(", ")", ".", "startsWith", "(", "\"", "<STR_LIT::>", "\"", ")", ")", "{", "mSubjectView", ".", "setText", "(", "\"", "<STR_LIT>", "\"", "+", "subject", ")", ";", "}", "else", "{", "mSubjectView", ".", "setText", "(", "subject", ")", ";", "}", "displayQuotedText", "(", "message", ".", "mText", ",", "message", ".", "mHtml", ")", ";", "}", "else", "if", "(", "ACTION_FORWARD", ".", "equals", "(", "mAction", ")", ")", "{", "mSubjectView", ".", "setText", "(", "subject", "!", "=", "null", "&", "&", "!", "subject", ".", "toLowerCase", "(", ")", ".", "startsWith", "(", "\"", "<STR_LIT::>", "\"", ")", "?", "\"", "<STR_LIT>", "\"", "+", "subject", ":", "subject", ")", ";", "displayQuotedText", "(", "message", ".", "mText", ",", "message", ".", "mHtml", ")", ";", "}", "else", "if", "(", "ACTION_EDIT_DRAFT", ".", "equals", "(", "mAction", ")", ")", "{", "mSubjectView", ".", "setText", "(", "subject", ")", ";", "addAddresses", "(", "mToView", ",", "Address", ".", "unpack", "(", "message", ".", "mTo", ")", ")", ";", "Address", "[", "]", "cc", "=", "Address", ".", "unpack", "(", "message", ".", "mCc", ")", ";", "if", "(", "cc", ".", "length", ">", "0", ")", "{", "addAddresses", "(", "mCcView", ",", "cc", ")", ";", "mCcView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "Address", "[", "]", "bcc", "=", "Address", ".", "unpack", "(", "message", ".", "mBcc", ")", ";", "if", "(", "bcc", ".", "length", ">", "0", ")", "{", "addAddresses", "(", "mBccView", ",", "bcc", ")", ";", "mBccView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "mMessageContentView", ".", "setText", "(", "message", ".", "mText", ")", ";", "mDraftNeedsSaving", "=", "false", ";", "}", "setNewMessageFocus", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "setNewMessageFocus", "(", ")", "{", "if", "(", "mToView", ".", "length", "(", ")", "=", "=", "0", ")", "{", "mToView", ".", "requestFocus", "(", ")", ";", "}", "else", "if", "(", "mSubjectView", ".", "length", "(", ")", "=", "=", "0", ")", "{", "mSubjectView", ".", "requestFocus", "(", ")", ";", "}", "else", "{", "mMessageContentView", ".", "requestFocus", "(", ")", ";", "int", "selection", "=", "mMessageContentView", ".", "length", "(", ")", ";", "mMessageContentView", ".", "setSelection", "(", "selection", ",", "selection", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "updateMailboxListCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "updateMailboxCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "mailboxId", ",", "int", "progress", ",", "int", "numNewMessages", ")", "{", "if", "(", "result", "!", "=", "null", "|", "|", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "Email", ".", "updateMailboxRefreshTime", "(", "mailboxId", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "loadMessageForViewCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "loadAttachmentCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "long", "attachmentId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "serviceCheckMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "mailboxId", ",", "int", "progress", ",", "long", "tag", ")", "{", "}", "</s>"]
["<s>", "public", "void", "sendMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "messageId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "AccountFolderListItem", "(", "Context", "context", ")", "{", "super", "(", "context", ")", ";", "}", "</s>"]
["<s>", "public", "AccountFolderListItem", "(", "Context", "context", ",", "AttributeSet", "attrs", ")", "{", "super", "(", "context", ",", "attrs", ")", ";", "}", "</s>"]
["<s>", "public", "void", "bindViewInit", "(", "AccountFolderList", ".", "AccountsAdapter", "adapter", ",", "boolean", "hasFolderButton", ")", "{", "mAdapter", "=", "adapter", ";", "mCachedViewPositions", "=", "false", ";", "mHasFolderButton", "=", "hasFolderButton", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onTouchEvent", "(", "MotionEvent", "event", ")", "{", "if", "(", "!", "mHasFolderButton", ")", "{", "return", "super", ".", "onTouchEvent", "(", "event", ")", ";", "}", "boolean", "handled", "=", "false", ";", "int", "touchX", "=", "(", "int", ")", "event", ".", "getX", "(", ")", ";", "if", "(", "!", "mCachedViewPositions", ")", "{", "float", "paddingScale", "=", "getContext", "(", ")", ".", "getResources", "(", ")", ".", "getDisplayMetrics", "(", ")", ".", "density", ";", "int", "folderPadding", "=", "(", "int", ")", "(", "(", "FOLDER_PAD", "*", "paddingScale", ")", "+", "<NUM_LIT>", ")", ";", "mFolderLeft", "=", "findViewById", "(", "R", ".", "id", ".", "folder_button", ")", ".", "getLeft", "(", ")", "-", "folderPadding", ";", "mCachedViewPositions", "=", "true", ";", "}", "switch", "(", "event", ".", "getAction", "(", ")", ")", "{", "case", "MotionEvent", ".", "ACTION_DOWN", ":", "mDownEvent", "=", "true", ";", "if", "(", "touchX", ">", "mFolderLeft", ")", "{", "handled", "=", "true", ";", "}", "break", ";", "case", "MotionEvent", ".", "ACTION_CANCEL", ":", "mDownEvent", "=", "false", ";", "break", ";", "case", "MotionEvent", ".", "ACTION_UP", ":", "if", "(", "mDownEvent", ")", "{", "if", "(", "touchX", ">", "mFolderLeft", ")", "{", "mAdapter", ".", "onClickFolder", "(", "this", ")", ";", "handled", "=", "true", ";", "}", "}", "break", ";", "}", "if", "(", "handled", ")", "{", "postInvalidate", "(", ")", ";", "}", "else", "{", "handled", "=", "super", ".", "onTouchEvent", "(", "event", ")", ";", "}", "return", "handled", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "handleMessage", "(", "android", ".", "os", ".", "Message", "msg", ")", "{", "switch", "(", "msg", ".", "what", ")", "{", "case", "MSG_PROGRESS", ":", "setProgressBarIndeterminateVisibility", "(", "msg", ".", "arg1", "!", "=", "0", ")", ";", "break", ";", "case", "MSG_ATTACHMENT_PROGRESS", ":", "boolean", "progress", "=", "(", "msg", ".", "arg1", "!", "=", "0", ")", ";", "if", "(", "progress", ")", "{", "mProgressDialog", ".", "setMessage", "(", "getString", "(", "R", ".", "string", ".", "message_view_fetching_attachment_progress", ",", "mLoadAttachmentName", ")", ")", ";", "mProgressDialog", ".", "show", "(", ")", ";", "}", "else", "{", "mProgressDialog", ".", "dismiss", "(", ")", ";", "}", "setProgressBarIndeterminateVisibility", "(", "progress", ")", ";", "break", ";", "case", "MSG_LOAD_CONTENT_URI", ":", "String", "uriString", "=", "(", "String", ")", "msg", ".", "obj", ";", "if", "(", "mMessageContentView", "!", "=", "null", ")", "{", "mMessageContentView", ".", "loadUrl", "(", "uriString", ")", ";", "}", "break", ";", "case", "MSG_SET_ATTACHMENTS_ENABLED", ":", "for", "(", "int", "i", "=", "0", ",", "count", "=", "mAttachments", ".", "getChildCount", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "AttachmentInfo", "attachment", "=", "(", "AttachmentInfo", ")", "mAttachments", ".", "getChildAt", "(", "i", ")", ".", "getTag", "(", ")", ";", "attachment", ".", "viewButton", ".", "setEnabled", "(", "msg", ".", "arg1", "=", "=", "1", ")", ";", "attachment", ".", "downloadButton", ".", "setEnabled", "(", "msg", ".", "arg1", "=", "=", "1", ")", ";", "}", "break", ";", "case", "MSG_LOAD_BODY_ERROR", ":", "Toast", ".", "makeText", "(", "MessageView", ".", "this", ",", "R", ".", "string", ".", "error_loading_message_body", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "break", ";", "case", "MSG_NETWORK_ERROR", ":", "Toast", ".", "makeText", "(", "MessageView", ".", "this", ",", "R", ".", "string", ".", "status_network_error", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "break", ";", "case", "MSG_FETCHING_ATTACHMENT", ":", "Toast", ".", "makeText", "(", "MessageView", ".", "this", ",", "getString", "(", "R", ".", "string", ".", "message_view_fetching_attachment_toast", ")", ",", "Toast", ".", "LENGTH_SHORT", ")", ".", "show", "(", ")", ";", "break", ";", "case", "MSG_VIEW_ATTACHMENT_ERROR", ":", "Toast", ".", "makeText", "(", "MessageView", ".", "this", ",", "getString", "(", "R", ".", "string", ".", "message_view_display_attachment_toast", ")", ",", "Toast", ".", "LENGTH_SHORT", ")", ".", "show", "(", ")", ";", "break", ";", "case", "MSG_UPDATE_ATTACHMENT_ICON", ":", "(", "(", "AttachmentInfo", ")", "mAttachments", ".", "getChildAt", "(", "msg", ".", "arg1", ")", ".", "getTag", "(", ")", ")", ".", "iconView", ".", "setImageBitmap", "(", "(", "Bitmap", ")", "msg", ".", "obj", ")", ";", "break", ";", "case", "MSG_FINISH_LOAD_ATTACHMENT", ":", "long", "attachmentId", "=", "(", "Long", ")", "msg", ".", "obj", ";", "doFinishLoadAttachment", "(", "attachmentId", ")", ";", "break", ";", "default", ":", "super", ".", "handleMessage", "(", "msg", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "attachmentProgress", "(", "boolean", "progress", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", "this", ",", "MSG_ATTACHMENT_PROGRESS", ")", ";", "msg", ".", "arg1", "=", "progress", "?", "1", ":", "0", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "progress", "(", "boolean", "progress", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", "this", ",", "MSG_PROGRESS", ")", ";", "msg", ".", "arg1", "=", "progress", "?", "1", ":", "0", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "loadContentUri", "(", "String", "uriString", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", "this", ",", "MSG_LOAD_CONTENT_URI", ")", ";", "msg", ".", "obj", "=", "uriString", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setAttachmentsEnabled", "(", "boolean", "enabled", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", "this", ",", "MSG_SET_ATTACHMENTS_ENABLED", ")", ";", "msg", ".", "arg1", "=", "enabled", "?", "1", ":", "0", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "loadBodyError", "(", ")", "{", "sendEmptyMessage", "(", "MSG_LOAD_BODY_ERROR", ")", ";", "}", "</s>"]
["<s>", "public", "void", "networkError", "(", ")", "{", "sendEmptyMessage", "(", "MSG_NETWORK_ERROR", ")", ";", "}", "</s>"]
["<s>", "public", "void", "fetchingAttachment", "(", ")", "{", "sendEmptyMessage", "(", "MSG_FETCHING_ATTACHMENT", ")", ";", "}", "</s>"]
["<s>", "public", "void", "attachmentViewError", "(", ")", "{", "sendEmptyMessage", "(", "MSG_VIEW_ATTACHMENT_ERROR", ")", ";", "}", "</s>"]
["<s>", "public", "void", "updateAttachmentIcon", "(", "int", "pos", ",", "Bitmap", "icon", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", "this", ",", "MSG_UPDATE_ATTACHMENT_ICON", ")", ";", "msg", ".", "arg1", "=", "pos", ";", "msg", ".", "obj", "=", "icon", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "finishLoadAttachment", "(", "long", "attachmentId", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", "this", ",", "MSG_FINISH_LOAD_ATTACHMENT", ")", ";", "msg", ".", "obj", "=", "Long", ".", "valueOf", "(", "attachmentId", ")", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionView", "(", "Context", "context", ",", "long", "messageId", ",", "long", "mailboxId", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "context", ",", "MessageView", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_MESSAGE_ID", ",", "messageId", ")", ";", "i", ".", "putExtra", "(", "EXTRA_MAILBOX_ID", ",", "mailboxId", ")", ";", "context", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "icicle", ")", "{", "super", ".", "onCreate", "(", "icicle", ")", ";", "setContentView", "(", "R", ".", "layout", ".", "message_view", ")", ";", "mSubjectView", "=", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "subject", ")", ";", "mFromView", "=", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "from", ")", ";", "mToView", "=", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "to", ")", ";", "mCcView", "=", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "cc", ")", ";", "mCcContainerView", "=", "findViewById", "(", "R", ".", "id", ".", "cc_container", ")", ";", "mDateView", "=", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "date", ")", ";", "mTimeView", "=", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "time", ")", ";", "mMessageContentView", "=", "(", "WebView", ")", "findViewById", "(", "R", ".", "id", ".", "message_content", ")", ";", "mAttachments", "=", "(", "LinearLayout", ")", "findViewById", "(", "R", ".", "id", ".", "attachments", ")", ";", "mAttachmentIcon", "=", "(", "ImageView", ")", "findViewById", "(", "R", ".", "id", ".", "attachment", ")", ";", "mFavoriteIcon", "=", "(", "ImageView", ")", "findViewById", "(", "R", ".", "id", ".", "favorite", ")", ";", "mShowPicturesSection", "=", "findViewById", "(", "R", ".", "id", ".", "show_pictures_section", ")", ";", "mSenderPresenceView", "=", "(", "ImageView", ")", "findViewById", "(", "R", ".", "id", ".", "presence", ")", ";", "mNext", "=", "findViewById", "(", "R", ".", "id", ".", "next", ")", ";", "mPrevious", "=", "findViewById", "(", "R", ".", "id", ".", "previous", ")", ";", "mScrollView", "=", "findViewById", "(", "R", ".", "id", ".", "scrollview", ")", ";", "mNext", ".", "setOnClickListener", "(", "this", ")", ";", "mPrevious", ".", "setOnClickListener", "(", "this", ")", ";", "mFromView", ".", "setOnClickListener", "(", "this", ")", ";", "mSenderPresenceView", ".", "setOnClickListener", "(", "this", ")", ";", "mFavoriteIcon", ".", "setOnClickListener", "(", "this", ")", ";", "findViewById", "(", "R", ".", "id", ".", "reply", ")", ".", "setOnClickListener", "(", "this", ")", ";", "findViewById", "(", "R", ".", "id", ".", "reply_all", ")", ".", "setOnClickListener", "(", "this", ")", ";", "findViewById", "(", "R", ".", "id", ".", "delete", ")", ".", "setOnClickListener", "(", "this", ")", ";", "findViewById", "(", "R", ".", "id", ".", "show_pictures", ")", ".", "setOnClickListener", "(", "this", ")", ";", "mMessageContentView", ".", "setVerticalScrollBarEnabled", "(", "false", ")", ";", "mMessageContentView", ".", "getSettings", "(", ")", ".", "setBlockNetworkImage", "(", "true", ")", ";", "mMessageContentView", ".", "getSettings", "(", ")", ".", "setSupportZoom", "(", "false", ")", ";", "mMessageContentView", ".", "setWebViewClient", "(", "new", "CustomWebViewClient", "(", ")", ")", ";", "mProgressDialog", "=", "new", "ProgressDialog", "(", "this", ")", ";", "mProgressDialog", ".", "setIndeterminate", "(", "true", ")", ";", "mProgressDialog", ".", "setProgressStyle", "(", "ProgressDialog", ".", "STYLE_SPINNER", ")", ";", "mDateFormat", "=", "android", ".", "text", ".", "format", ".", "DateFormat", ".", "getDateFormat", "(", "this", ")", ";", "mTimeFormat", "=", "android", ".", "text", ".", "format", ".", "DateFormat", ".", "getTimeFormat", "(", "this", ")", ";", "mFavoriteIconOn", "=", "getResources", "(", ")", ".", "getDrawable", "(", "R", ".", "drawable", ".", "btn_star_big_buttonless_on", ")", ";", "mFavoriteIconOff", "=", "getResources", "(", ")", ".", "getDrawable", "(", "R", ".", "drawable", ".", "btn_star_big_buttonless_off", ")", ";", "Intent", "intent", "=", "getIntent", "(", ")", ";", "mMessageId", "=", "intent", ".", "getLongExtra", "(", "EXTRA_MESSAGE_ID", ",", "-", "1", ")", ";", "if", "(", "icicle", "!", "=", "null", ")", "{", "mMessageId", "=", "icicle", ".", "getLong", "(", "STATE_MESSAGE_ID", ",", "mMessageId", ")", ";", "}", "mMailboxId", "=", "intent", ".", "getLongExtra", "(", "EXTRA_MAILBOX_ID", ",", "-", "1", ")", ";", "mController", "=", "Controller", ".", "getInstance", "(", "getApplication", "(", ")", ")", ";", "mNextPrevObserver", "=", "new", "NextPrevObserver", "(", "mHandler", ")", ";", "messageChanged", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onSaveInstanceState", "(", "Bundle", "state", ")", "{", "super", ".", "onSaveInstanceState", "(", "state", ")", ";", "if", "(", "mMessageId", "!", "=", "-", "1", ")", "{", "state", ".", "putLong", "(", "STATE_MESSAGE_ID", ",", "mMessageId", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onResume", "(", ")", "{", "super", ".", "onResume", "(", ")", ";", "mWaitForLoadMessageId", "=", "-", "1", ";", "mController", ".", "addResultCallback", "(", "mControllerCallback", ")", ";", "if", "(", "mMessage", "!", "=", "null", ")", "{", "startPresenceCheck", "(", ")", ";", "if", "(", "mLoadPrevNextTask", "=", "=", "null", "&", "&", "mMailboxId", "!", "=", "-", "1", ")", "{", "mLoadPrevNextTask", "=", "new", "LoadPrevNextTask", "(", "mMailboxId", ")", ";", "mLoadPrevNextTask", ".", "execute", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onPause", "(", ")", "{", "super", ".", "onPause", "(", ")", ";", "mController", ".", "removeResultCallback", "(", "mControllerCallback", ")", ";", "closePrevNextCursor", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "closePrevNextCursor", "(", ")", "{", "if", "(", "mPrevNextCursor", "!", "=", "null", ")", "{", "mPrevNextCursor", ".", "unregisterContentObserver", "(", "mNextPrevObserver", ")", ";", "mPrevNextCursor", ".", "close", "(", ")", ";", "mPrevNextCursor", "=", "null", ";", "}", "}", "</s>"]
["<s>", "private", "static", "void", "cancelTask", "(", "AsyncTask", "<", "?", ",", "?", ",", "?", ">", "task", ")", "{", "if", "(", "task", "!", "=", "null", "&", "&", "task", ".", "getStatus", "(", ")", "!", "=", "AsyncTask", ".", "Status", ".", "FINISHED", ")", "{", "task", ".", "cancel", "(", "true", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "cancelAllTasks", "(", ")", "{", "cancelTask", "(", "mLoadMessageTask", ")", ";", "mLoadMessageTask", "=", "null", ";", "cancelTask", "(", "mLoadBodyTask", ")", ";", "mLoadBodyTask", "=", "null", ";", "cancelTask", "(", "mLoadAttachmentsTask", ")", ";", "mLoadAttachmentsTask", "=", "null", ";", "cancelTask", "(", "mLoadPrevNextTask", ")", ";", "mLoadPrevNextTask", "=", "null", ";", "cancelTask", "(", "mPresenceCheckTask", ")", ";", "mPresenceCheckTask", "=", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onDestroy", "(", ")", "{", "super", ".", "onDestroy", "(", ")", ";", "cancelAllTasks", "(", ")", ";", "synchronized", "(", "this", ")", "{", "mMessageContentView", ".", "destroy", "(", ")", ";", "mMessageContentView", "=", "null", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onDelete", "(", ")", "{", "if", "(", "mMessage", "!", "=", "null", ")", "{", "long", "messageIdToDelete", "=", "mMessageId", ";", "boolean", "moved", "=", "onPrevious", "(", ")", "|", "|", "onNext", "(", ")", ";", "mController", ".", "deleteMessage", "(", "messageIdToDelete", ",", "mMessage", ".", "mAccountKey", ")", ";", "Toast", ".", "makeText", "(", "this", ",", "R", ".", "string", ".", "message_deleted_toast", ",", "Toast", ".", "LENGTH_SHORT", ")", ".", "show", "(", ")", ";", "if", "(", "!", "moved", ")", "{", "finish", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "shouldOverrideUrlLoading", "(", "WebView", "view", ",", "String", "url", ")", "{", "if", "(", "url", "!", "=", "null", "&", "&", "url", ".", "toLowerCase", "(", ")", ".", "startsWith", "(", "\"", "<STR_LIT::>", "\"", ")", ")", "{", "return", "MessageCompose", ".", "actionCompose", "(", "MessageView", ".", "this", ",", "url", ",", "mAccountId", ")", ";", "}", "boolean", "result", "=", "false", ";", "Intent", "intent", "=", "new", "Intent", "(", "Intent", ".", "ACTION_VIEW", ",", "Uri", ".", "parse", "(", "url", ")", ")", ";", "intent", ".", "addCategory", "(", "Intent", ".", "CATEGORY_BROWSABLE", ")", ";", "intent", ".", "putExtra", "(", "Browser", ".", "EXTRA_APPLICATION_ID", ",", "getPackageName", "(", ")", ")", ";", "intent", ".", "setFlags", "(", "Intent", ".", "FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET", ")", ";", "try", "{", "startActivity", "(", "intent", ")", ";", "result", "=", "true", ";", "}", "catch", "(", "ActivityNotFoundException", "ex", ")", "{", "}", "return", "result", ";", "}", "</s>"]
["<s>", "private", "void", "onClickSender", "(", ")", "{", "if", "(", "mMessage", "=", "=", "null", ")", "return", ";", "final", "Address", "senderEmail", "=", "Address", ".", "unpackFirst", "(", "mMessage", ".", "mFrom", ")", ";", "if", "(", "senderEmail", "=", "=", "null", ")", "return", ";", "final", "ContentResolver", "resolver", "=", "getContentResolver", "(", ")", ";", "final", "String", "address", "=", "senderEmail", ".", "getAddress", "(", ")", ";", "final", "Uri", "dataUri", "=", "Uri", ".", "withAppendedPath", "(", "CommonDataKinds", ".", "Email", ".", "CONTENT_FILTER_URI", ",", "Uri", ".", "encode", "(", "address", ")", ")", ";", "final", "Uri", "lookupUri", "=", "ContactsContract", ".", "Data", ".", "getContactLookupUri", "(", "resolver", ",", "dataUri", ")", ";", "if", "(", "lookupUri", "!", "=", "null", ")", "{", "QuickContact", ".", "showQuickContact", "(", "this", ",", "mSenderPresenceView", ",", "lookupUri", ",", "QuickContact", ".", "MODE_LARGE", ",", "null", ")", ";", "}", "else", "{", "final", "Uri", "mailUri", "=", "Uri", ".", "fromParts", "(", "\"", "<STR_LIT>", "\"", ",", "address", ",", "null", ")", ";", "final", "Intent", "intent", "=", "new", "Intent", "(", "ContactsContract", ".", "Intents", ".", "SHOW_OR_CREATE_CONTACT", ",", "mailUri", ")", ";", "intent", ".", "putExtra", "(", "ContactsContract", ".", "Intents", ".", "EXTRA_CREATE_DESCRIPTION", ",", "senderEmail", ".", "toString", "(", ")", ")", ";", "final", "String", "senderPersonal", "=", "senderEmail", ".", "getPersonal", "(", ")", ";", "if", "(", "!", "TextUtils", ".", "isEmpty", "(", "senderPersonal", ")", ")", "{", "intent", ".", "putExtra", "(", "ContactsContract", ".", "Intents", ".", "Insert", ".", "NAME", ",", "senderPersonal", ")", ";", "}", "startActivity", "(", "intent", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onClickFavorite", "(", ")", "{", "if", "(", "mMessage", "!", "=", "null", ")", "{", "boolean", "newFavorite", "=", "!", "mMessage", ".", "mFlagFavorite", ";", "mFavoriteIcon", ".", "setImageDrawable", "(", "newFavorite", "?", "mFavoriteIconOn", ":", "mFavoriteIconOff", ")", ";", "mMessage", ".", "mFlagFavorite", "=", "newFavorite", ";", "mController", ".", "setMessageFavorite", "(", "mMessageId", ",", "newFavorite", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onReply", "(", ")", "{", "if", "(", "mMessage", "!", "=", "null", ")", "{", "MessageCompose", ".", "actionReply", "(", "this", ",", "mMessage", ".", "mId", ",", "false", ")", ";", "finish", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onReplyAll", "(", ")", "{", "if", "(", "mMessage", "!", "=", "null", ")", "{", "MessageCompose", ".", "actionReply", "(", "this", ",", "mMessage", ".", "mId", ",", "true", ")", ";", "finish", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onForward", "(", ")", "{", "if", "(", "mMessage", "!", "=", "null", ")", "{", "MessageCompose", ".", "actionForward", "(", "this", ",", "mMessage", ".", "mId", ")", ";", "finish", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "boolean", "onNext", "(", ")", "{", "if", "(", "mPrevNextCursor", "!", "=", "null", "&", "&", "mPrevNextCursor", ".", "moveToNext", "(", ")", ")", "{", "mMessageId", "=", "mPrevNextCursor", ".", "getLong", "(", "0", ")", ";", "messageChanged", "(", ")", ";", "return", "true", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "private", "boolean", "onPrevious", "(", ")", "{", "if", "(", "mPrevNextCursor", "!", "=", "null", "&", "&", "mPrevNextCursor", ".", "getPosition", "(", ")", ">", "0", ")", "{", "mPrevNextCursor", ".", "moveToPrevious", "(", ")", ";", "mMessageId", "=", "mPrevNextCursor", ".", "getLong", "(", "0", ")", ";", "messageChanged", "(", ")", ";", "return", "true", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "private", "void", "onMarkAsRead", "(", "boolean", "isRead", ")", "{", "if", "(", "mMessage", "!", "=", "null", "&", "&", "mMessage", ".", "mFlagRead", "!", "=", "isRead", ")", "{", "mMessage", ".", "mFlagRead", "=", "isRead", ";", "mController", ".", "setMessageRead", "(", "mMessageId", ",", "isRead", ")", ";", "}", "}", "</s>"]
["<s>", "static", "File", "createUniqueFile", "(", "File", "directory", ",", "String", "filename", ")", "{", "File", "file", "=", "new", "File", "(", "directory", ",", "filename", ")", ";", "if", "(", "!", "file", ".", "exists", "(", ")", ")", "{", "return", "file", ";", "}", "int", "index", "=", "filename", ".", "lastIndexOf", "(", "<CHAR_LIT:.>", ")", ";", "String", "format", ";", "if", "(", "index", "!", "=", "-", "1", ")", "{", "String", "name", "=", "filename", ".", "substring", "(", "0", ",", "index", ")", ";", "String", "extension", "=", "filename", ".", "substring", "(", "index", ")", ";", "format", "=", "name", "+", "\"", "<STR_LIT>", "\"", "+", "extension", ";", "}", "else", "{", "format", "=", "filename", "+", "\"", "<STR_LIT>", "\"", ";", "}", "for", "(", "int", "i", "=", "<NUM_LIT:2>", ";", "i", "<", "Integer", ".", "MAX_VALUE", ";", "i", "+", "+", ")", "{", "file", "=", "new", "File", "(", "directory", ",", "String", ".", "format", "(", "format", ",", "i", ")", ")", ";", "if", "(", "!", "file", ".", "exists", "(", ")", ")", "{", "return", "file", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "private", "void", "onDownloadAttachment", "(", "AttachmentInfo", "attachment", ")", "{", "if", "(", "!", "Environment", ".", "getExternalStorageState", "(", ")", ".", "equals", "(", "Environment", ".", "MEDIA_MOUNTED", ")", ")", "{", "Toast", ".", "makeText", "(", "this", ",", "getString", "(", "R", ".", "string", ".", "message_view_status_attachment_not_saved", ")", ",", "Toast", ".", "LENGTH_SHORT", ")", ".", "show", "(", ")", ";", "return", ";", "}", "mLoadAttachmentId", "=", "attachment", ".", "attachmentId", ";", "mLoadAttachmentSave", "=", "true", ";", "mLoadAttachmentName", "=", "attachment", ".", "name", ";", "mController", ".", "loadAttachment", "(", "attachment", ".", "attachmentId", ",", "mMessageId", ",", "mMessage", ".", "mMailboxKey", ",", "mAccountId", ",", "mControllerCallback", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onViewAttachment", "(", "AttachmentInfo", "attachment", ")", "{", "mLoadAttachmentId", "=", "attachment", ".", "attachmentId", ";", "mLoadAttachmentSave", "=", "false", ";", "mLoadAttachmentName", "=", "attachment", ".", "name", ";", "mController", ".", "loadAttachment", "(", "attachment", ".", "attachmentId", ",", "mMessageId", ",", "mMessage", ".", "mMailboxKey", ",", "mAccountId", ",", "mControllerCallback", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onShowPictures", "(", ")", "{", "if", "(", "mMessage", "!", "=", "null", ")", "{", "if", "(", "mMessageContentView", "!", "=", "null", ")", "{", "mMessageContentView", ".", "getSettings", "(", ")", ".", "setBlockNetworkImage", "(", "false", ")", ";", "}", "mShowPicturesSection", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "View", "view", ")", "{", "switch", "(", "view", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "from", ":", "case", "R", ".", "id", ".", "presence", ":", "onClickSender", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "favorite", ":", "onClickFavorite", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "reply", ":", "onReply", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "reply_all", ":", "onReplyAll", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "delete", ":", "onDelete", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "next", ":", "onNext", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "previous", ":", "onPrevious", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "download", ":", "onDownloadAttachment", "(", "(", "AttachmentInfo", ")", "view", ".", "getTag", "(", ")", ")", ";", "break", ";", "case", "R", ".", "id", ".", "view", ":", "onViewAttachment", "(", "(", "AttachmentInfo", ")", "view", ".", "getTag", "(", ")", ")", ";", "break", ";", "case", "R", ".", "id", ".", "show_pictures", ":", "onShowPictures", "(", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onOptionsItemSelected", "(", "MenuItem", "item", ")", "{", "boolean", "handled", "=", "handleMenuItem", "(", "item", ".", "getItemId", "(", ")", ")", ";", "if", "(", "!", "handled", ")", "{", "handled", "=", "super", ".", "onOptionsItemSelected", "(", "item", ")", ";", "}", "return", "handled", ";", "}", "</s>"]
["<s>", "boolean", "handleMenuItem", "(", "int", "menuItemId", ")", "{", "switch", "(", "menuItemId", ")", "{", "case", "R", ".", "id", ".", "delete", ":", "onDelete", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "reply", ":", "onReply", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "reply_all", ":", "onReplyAll", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "forward", ":", "onForward", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "mark_as_unread", ":", "onMarkAsRead", "(", "false", ")", ";", "finish", "(", ")", ";", "break", ";", "default", ":", "return", "false", ";", "}", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onCreateOptionsMenu", "(", "Menu", "menu", ")", "{", "super", ".", "onCreateOptionsMenu", "(", "menu", ")", ";", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "message_view_option", ",", "menu", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "private", "void", "messageChanged", "(", ")", "{", "if", "(", "Email", ".", "DEBUG", ")", "{", "Email", ".", "log", "(", "\"", "<STR_LIT>", "\"", "+", "mMessageId", ")", ";", "}", "cancelAllTasks", "(", ")", ";", "setTitle", "(", "\"", "\"", ")", ";", "if", "(", "mMessageContentView", "!", "=", "null", ")", "{", "mMessageContentView", ".", "scrollTo", "(", "0", ",", "0", ")", ";", "mMessageContentView", ".", "loadUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mScrollView", ".", "scrollTo", "(", "0", ",", "0", ")", ";", "mAttachments", ".", "removeAllViews", "(", ")", ";", "mAttachments", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "mAttachmentIcon", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "mLoadMessageTask", "=", "new", "LoadMessageTask", "(", "mMessageId", ",", "true", ")", ";", "mLoadMessageTask", ".", "execute", "(", ")", ";", "updatePrevNextArrows", "(", "mPrevNextCursor", ")", ";", "}", "</s>"]
["<s>", "private", "void", "repositionPrevNextCursor", "(", ")", "{", "if", "(", "Email", ".", "DEBUG", ")", "{", "Email", ".", "log", "(", "\"", "<STR_LIT>", "\"", "+", "mMessageId", ")", ";", "}", "mPrevNextCursor", ".", "moveToPosition", "(", "-", "1", ")", ";", "while", "(", "mPrevNextCursor", ".", "moveToNext", "(", ")", "&", "&", "mPrevNextCursor", ".", "getLong", "(", "0", ")", "!", "=", "mMessageId", ")", "{", "}", "if", "(", "mPrevNextCursor", ".", "isAfterLast", "(", ")", ")", "{", "finish", "(", ")", ";", "}", "updatePrevNextArrows", "(", "mPrevNextCursor", ")", ";", "}", "</s>"]
["<s>", "private", "void", "updatePrevNextArrows", "(", "Cursor", "cursor", ")", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "boolean", "hasPrev", ",", "hasNext", ";", "if", "(", "cursor", ".", "isAfterLast", "(", ")", "|", "|", "cursor", ".", "isBeforeFirst", "(", ")", ")", "{", "hasPrev", "=", "hasNext", "=", "false", ";", "}", "else", "{", "hasPrev", "=", "!", "cursor", ".", "isFirst", "(", ")", ";", "hasNext", "=", "!", "cursor", ".", "isLast", "(", ")", ";", "}", "mPrevious", ".", "setVisibility", "(", "hasPrev", "?", "View", ".", "VISIBLE", ":", "View", ".", "GONE", ")", ";", "mNext", ".", "setVisibility", "(", "hasNext", "?", "View", ".", "VISIBLE", ":", "View", ".", "GONE", ")", ";", "}", "}", "</s>"]
["<s>", "public", "NextPrevObserver", "(", "Handler", "handler", ")", "{", "super", "(", "handler", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onChange", "(", "boolean", "selfChange", ")", "{", "if", "(", "mLoadPrevNextTask", "=", "=", "null", "&", "&", "mPrevNextCursor", "!", "=", "null", ")", "{", "mLoadPrevNextTask", "=", "new", "LoadPrevNextTask", "(", "mMailboxId", ")", ";", "mLoadPrevNextTask", ".", "execute", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "Bitmap", "getPreviewIcon", "(", "AttachmentInfo", "attachment", ")", "{", "try", "{", "return", "BitmapFactory", ".", "decodeStream", "(", "getContentResolver", "(", ")", ".", "openInputStream", "(", "AttachmentProvider", ".", "getAttachmentThumbnailUri", "(", "mAccountId", ",", "attachment", ".", "attachmentId", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ")", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "return", "null", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "formatSize", "(", "float", "size", ")", "{", "long", "kb", "=", "<NUM_LIT>", ";", "long", "mb", "=", "(", "kb", "*", "<NUM_LIT>", ")", ";", "long", "gb", "=", "(", "mb", "*", "<NUM_LIT>", ")", ";", "if", "(", "size", "<", "kb", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "(", "int", ")", "size", ")", ";", "}", "else", "if", "(", "size", "<", "mb", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "size", "/", "kb", ")", ";", "}", "else", "if", "(", "size", "<", "gb", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "size", "/", "mb", ")", ";", "}", "else", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "size", "/", "gb", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "updateAttachmentThumbnail", "(", "long", "attachmentId", ")", "{", "for", "(", "int", "i", "=", "0", ",", "count", "=", "mAttachments", ".", "getChildCount", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "AttachmentInfo", "attachment", "=", "(", "AttachmentInfo", ")", "mAttachments", ".", "getChildAt", "(", "i", ")", ".", "getTag", "(", ")", ";", "if", "(", "attachment", ".", "attachmentId", "=", "=", "attachmentId", ")", "{", "Bitmap", "previewIcon", "=", "getPreviewIcon", "(", "attachment", ")", ";", "if", "(", "previewIcon", "!", "=", "null", ")", "{", "mHandler", ".", "updateAttachmentIcon", "(", "i", ",", "previewIcon", ")", ";", "}", "return", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "addAttachment", "(", "Attachment", "attachment", ")", "{", "AttachmentInfo", "attachmentInfo", "=", "new", "AttachmentInfo", "(", ")", ";", "attachmentInfo", ".", "size", "=", "attachment", ".", "mSize", ";", "attachmentInfo", ".", "contentType", "=", "attachment", ".", "mMimeType", ";", "attachmentInfo", ".", "name", "=", "attachment", ".", "mFileName", ";", "attachmentInfo", ".", "attachmentId", "=", "attachment", ".", "mId", ";", "if", "(", "attachmentInfo", ".", "contentType", "=", "=", "null", "|", "|", "attachmentInfo", ".", "contentType", ".", "length", "(", ")", "=", "=", "0", ")", "{", "attachmentInfo", ".", "contentType", "=", "\"", "<STR_LIT>", "\"", ";", "}", "LayoutInflater", "inflater", "=", "getLayoutInflater", "(", ")", ";", "View", "view", "=", "inflater", ".", "inflate", "(", "R", ".", "layout", ".", "message_view_attachment", ",", "null", ")", ";", "TextView", "attachmentName", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "attachment_name", ")", ";", "TextView", "attachmentInfoView", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "attachment_info", ")", ";", "ImageView", "attachmentIcon", "=", "(", "ImageView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "attachment_icon", ")", ";", "Button", "attachmentView", "=", "(", "Button", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "view", ")", ";", "Button", "attachmentDownload", "=", "(", "Button", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "download", ")", ";", "if", "(", "(", "!", "MimeUtility", ".", "mimeTypeMatches", "(", "attachmentInfo", ".", "contentType", ",", "Email", ".", "ACCEPTABLE_ATTACHMENT_VIEW_TYPES", ")", ")", "|", "|", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "attachmentInfo", ".", "contentType", ",", "Email", ".", "UNACCEPTABLE_ATTACHMENT_VIEW_TYPES", ")", ")", ")", "{", "attachmentView", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "if", "(", "(", "!", "MimeUtility", ".", "mimeTypeMatches", "(", "attachmentInfo", ".", "contentType", ",", "Email", ".", "ACCEPTABLE_ATTACHMENT_DOWNLOAD_TYPES", ")", ")", "|", "|", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "attachmentInfo", ".", "contentType", ",", "Email", ".", "UNACCEPTABLE_ATTACHMENT_DOWNLOAD_TYPES", ")", ")", ")", "{", "attachmentDownload", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "if", "(", "attachmentInfo", ".", "size", ">", "Email", ".", "MAX_ATTACHMENT_DOWNLOAD_SIZE", ")", "{", "attachmentView", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "attachmentDownload", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "attachmentInfo", ".", "viewButton", "=", "attachmentView", ";", "attachmentInfo", ".", "downloadButton", "=", "attachmentDownload", ";", "attachmentInfo", ".", "iconView", "=", "attachmentIcon", ";", "view", ".", "setTag", "(", "attachmentInfo", ")", ";", "attachmentView", ".", "setOnClickListener", "(", "this", ")", ";", "attachmentView", ".", "setTag", "(", "attachmentInfo", ")", ";", "attachmentDownload", ".", "setOnClickListener", "(", "this", ")", ";", "attachmentDownload", ".", "setTag", "(", "attachmentInfo", ")", ";", "attachmentName", ".", "setText", "(", "attachmentInfo", ".", "name", ")", ";", "attachmentInfoView", ".", "setText", "(", "formatSize", "(", "attachmentInfo", ".", "size", ")", ")", ";", "Bitmap", "previewIcon", "=", "getPreviewIcon", "(", "attachmentInfo", ")", ";", "if", "(", "previewIcon", "!", "=", "null", ")", "{", "attachmentIcon", ".", "setImageBitmap", "(", "previewIcon", ")", ";", "}", "mAttachments", ".", "addView", "(", "view", ")", ";", "mAttachments", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Integer", "doInBackground", "(", "String", ".", ".", ".", "emails", ")", "{", "Cursor", "cursor", "=", "getContentResolver", "(", ")", ".", "query", "(", "ContactsContract", ".", "Data", ".", "CONTENT_URI", ",", "PRESENCE_STATUS_PROJECTION", ",", "CommonDataKinds", ".", "Email", ".", "DATA", "+", "\"", "<STR_LIT>", "\"", ",", "emails", ",", "null", ")", ";", "if", "(", "cursor", "!", "=", "null", ")", "{", "try", "{", "if", "(", "cursor", ".", "moveToFirst", "(", ")", ")", "{", "int", "status", "=", "cursor", ".", "getInt", "(", "0", ")", ";", "int", "icon", "=", "StatusUpdates", ".", "getPresenceIconResourceId", "(", "status", ")", ";", "return", "icon", ";", "}", "}", "finally", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "return", "0", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Integer", "icon", ")", "{", "if", "(", "icon", "=", "=", "null", ")", "{", "return", ";", "}", "updateSenderPresence", "(", "icon", ")", ";", "}", "</s>"]
["<s>", "private", "void", "startPresenceCheck", "(", ")", "{", "if", "(", "mMessage", "!", "=", "null", ")", "{", "Address", "sender", "=", "Address", ".", "unpackFirst", "(", "mMessage", ".", "mFrom", ")", ";", "if", "(", "sender", "!", "=", "null", ")", "{", "String", "email", "=", "sender", ".", "getAddress", "(", ")", ";", "if", "(", "email", "!", "=", "null", ")", "{", "mPresenceCheckTask", "=", "new", "PresenceCheckTask", "(", ")", ";", "mPresenceCheckTask", ".", "execute", "(", "email", ")", ";", "return", ";", "}", "}", "}", "updateSenderPresence", "(", "0", ")", ";", "}", "</s>"]
["<s>", "private", "void", "updateSenderPresence", "(", "int", "presenceIconId", ")", "{", "if", "(", "presenceIconId", "=", "=", "0", ")", "{", "presenceIconId", "=", "R", ".", "drawable", ".", "presence_inactive", ";", "}", "mSenderPresenceView", ".", "setImageResource", "(", "presenceIconId", ")", ";", "}", "</s>"]
["<s>", "public", "LoadPrevNextTask", "(", "long", "mailboxId", ")", "{", "mLocalMailboxId", "=", "mailboxId", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Cursor", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "String", "selection", "=", "Utility", ".", "buildMailboxIdSelection", "(", "getContentResolver", "(", ")", ",", "mLocalMailboxId", ")", ";", "Cursor", "c", "=", "getContentResolver", "(", ")", ".", "query", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "EmailContent", ".", "ID_PROJECTION", ",", "selection", ",", "null", ",", "EmailContent", ".", "MessageColumns", ".", "TIMESTAMP", "+", "\"", "<STR_LIT>", "\"", ")", ";", "return", "c", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Cursor", "cursor", ")", "{", "if", "(", "cursor", "=", "=", "null", ")", "{", "return", ";", "}", "MessageView", ".", "this", ".", "mLoadPrevNextTask", "=", "null", ";", "if", "(", "cursor", ".", "isClosed", "(", ")", ")", "{", "return", ";", "}", "closePrevNextCursor", "(", ")", ";", "mPrevNextCursor", "=", "cursor", ";", "mPrevNextCursor", ".", "registerContentObserver", "(", "MessageView", ".", "this", ".", "mNextPrevObserver", ")", ";", "repositionPrevNextCursor", "(", ")", ";", "}", "</s>"]
["<s>", "public", "LoadMessageTask", "(", "long", "messageId", ",", "boolean", "okToFetch", ")", "{", "mId", "=", "messageId", ";", "mOkToFetch", "=", "okToFetch", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Message", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "if", "(", "mId", "=", "=", "Long", ".", "MIN_VALUE", ")", "{", "return", "null", ";", "}", "return", "Message", ".", "restoreMessageWithId", "(", "MessageView", ".", "this", ",", "mId", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Message", "message", ")", "{", "if", "(", "isCancelled", "(", ")", ")", "{", "return", ";", "}", "if", "(", "message", "=", "=", "null", ")", "{", "if", "(", "mId", "!", "=", "Long", ".", "MIN_VALUE", ")", "{", "finish", "(", ")", ";", "}", "return", ";", "}", "reloadUiFromMessage", "(", "message", ",", "mOkToFetch", ")", ";", "startPresenceCheck", "(", ")", ";", "}", "</s>"]
["<s>", "public", "LoadBodyTask", "(", "long", "messageId", ")", "{", "mId", "=", "messageId", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "[", "]", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "try", "{", "String", "text", "=", "null", ";", "String", "html", "=", "Body", ".", "restoreBodyHtmlWithMessageId", "(", "MessageView", ".", "this", ",", "mId", ")", ";", "if", "(", "html", "=", "=", "null", ")", "{", "text", "=", "Body", ".", "restoreBodyTextWithMessageId", "(", "MessageView", ".", "this", ",", "mId", ")", ";", "}", "return", "new", "String", "[", "]", "{", "text", ",", "html", "}", ";", "}", "catch", "(", "RuntimeException", "re", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "re", ".", "toString", "(", ")", ")", ";", "mHandler", ".", "loadBodyError", "(", ")", ";", "return", "new", "String", "[", "]", "{", "null", ",", "null", "}", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "String", "[", "]", "results", ")", "{", "if", "(", "results", "=", "=", "null", ")", "{", "return", ";", "}", "reloadUiFromBody", "(", "results", "[", "0", "]", ",", "results", "[", "1", "]", ")", ";", "onMarkAsRead", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Attachment", "[", "]", "doInBackground", "(", "Long", ".", ".", ".", "messageIds", ")", "{", "return", "Attachment", ".", "restoreAttachmentsWithMessageId", "(", "MessageView", ".", "this", ",", "messageIds", "[", "0", "]", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Attachment", "[", "]", "attachments", ")", "{", "if", "(", "attachments", "=", "=", "null", ")", "{", "return", ";", "}", "boolean", "htmlChanged", "=", "false", ";", "for", "(", "Attachment", "attachment", ":", "attachments", ")", "{", "if", "(", "mHtmlText", "!", "=", "null", "&", "&", "attachment", ".", "mContentId", "!", "=", "null", "&", "&", "attachment", ".", "mContentUri", "!", "=", "null", ")", "{", "String", "contentIdRe", "=", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "attachment", ".", "mContentId", "+", "\"", "<STR_LIT:\\\\>", "<STR_LIT:E>", "<STR_LIT:\\\">", "\"", ";", "String", "srcContentUri", "=", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "attachment", ".", "mContentUri", "+", "\"", "<STR_LIT:\\\">", "\"", ";", "mHtmlText", "=", "mHtmlText", ".", "replaceAll", "(", "contentIdRe", ",", "srcContentUri", ")", ";", "htmlChanged", "=", "true", ";", "}", "else", "{", "addAttachment", "(", "attachment", ")", ";", "}", "}", "if", "(", "htmlChanged", "&", "&", "mMessageContentView", "!", "=", "null", ")", "{", "mMessageContentView", ".", "loadDataWithBaseURL", "(", "\"", "<STR_LIT>", "\"", ",", "mHtmlText", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "}", "mHtmlText", "=", "null", ";", "}", "</s>"]
["<s>", "private", "void", "reloadUiFromMessage", "(", "Message", "message", ",", "boolean", "okToFetch", ")", "{", "mMessage", "=", "message", ";", "mAccountId", "=", "message", ".", "mAccountKey", ";", "if", "(", "mMailboxId", "=", "=", "-", "1", ")", "{", "mMailboxId", "=", "message", ".", "mMailboxKey", ";", "}", "if", "(", "mPrevNextCursor", "=", "=", "null", ")", "{", "mLoadPrevNextTask", "=", "new", "LoadPrevNextTask", "(", "mMailboxId", ")", ";", "mLoadPrevNextTask", ".", "execute", "(", ")", ";", "}", "mSubjectView", ".", "setText", "(", "message", ".", "mSubject", ")", ";", "mFromView", ".", "setText", "(", "Address", ".", "toFriendly", "(", "Address", ".", "unpack", "(", "message", ".", "mFrom", ")", ")", ")", ";", "Date", "date", "=", "new", "Date", "(", "message", ".", "mTimeStamp", ")", ";", "mTimeView", ".", "setText", "(", "mTimeFormat", ".", "format", "(", "date", ")", ")", ";", "mDateView", ".", "setText", "(", "Utility", ".", "isDateToday", "(", "date", ")", "?", "null", ":", "mDateFormat", ".", "format", "(", "date", ")", ")", ";", "mToView", ".", "setText", "(", "Address", ".", "toFriendly", "(", "Address", ".", "unpack", "(", "message", ".", "mTo", ")", ")", ")", ";", "String", "friendlyCc", "=", "Address", ".", "toFriendly", "(", "Address", ".", "unpack", "(", "message", ".", "mCc", ")", ")", ";", "mCcView", ".", "setText", "(", "friendlyCc", ")", ";", "mCcContainerView", ".", "setVisibility", "(", "(", "friendlyCc", "!", "=", "null", ")", "?", "View", ".", "VISIBLE", ":", "View", ".", "GONE", ")", ";", "mAttachmentIcon", ".", "setVisibility", "(", "message", ".", "mAttachments", "!", "=", "null", "?", "View", ".", "VISIBLE", ":", "View", ".", "GONE", ")", ";", "mFavoriteIcon", ".", "setImageDrawable", "(", "message", ".", "mFlagFavorite", "?", "mFavoriteIconOn", ":", "mFavoriteIconOff", ")", ";", "if", "(", "okToFetch", "&", "&", "message", ".", "mFlagLoaded", "!", "=", "Message", ".", "FLAG_LOADED_COMPLETE", ")", "{", "mWaitForLoadMessageId", "=", "message", ".", "mId", ";", "mController", ".", "loadMessageForView", "(", "message", ".", "mId", ",", "mControllerCallback", ")", ";", "}", "else", "{", "mWaitForLoadMessageId", "=", "-", "1", ";", "mLoadBodyTask", "=", "new", "LoadBodyTask", "(", "message", ".", "mId", ")", ";", "mLoadBodyTask", ".", "execute", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "reloadUiFromBody", "(", "String", "bodyText", ",", "String", "bodyHtml", ")", "{", "String", "text", "=", "null", ";", "mHtmlText", "=", "null", ";", "boolean", "hasImages", "=", "false", ";", "if", "(", "bodyHtml", "=", "=", "null", ")", "{", "text", "=", "bodyText", ";", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "text", "!", "=", "null", ")", "{", "text", "=", "EmailHtmlUtil", ".", "escapeCharacterToDisplay", "(", "text", ")", ";", "Matcher", "m", "=", "Regex", ".", "WEB_URL_PATTERN", ".", "matcher", "(", "text", ")", ";", "while", "(", "m", ".", "find", "(", ")", ")", "{", "int", "start", "=", "m", ".", "start", "(", ")", ";", "if", "(", "start", "=", "=", "0", "|", "|", "text", ".", "charAt", "(", "start", "-", "1", ")", "!", "=", "<CHAR_LIT>", ")", "{", "String", "url", "=", "m", ".", "group", "(", ")", ";", "Matcher", "proto", "=", "WEB_URL_PROTOCOL", ".", "matcher", "(", "url", ")", ";", "String", "link", ";", "if", "(", "proto", ".", "find", "(", ")", ")", "{", "link", "=", "proto", ".", "group", "(", ")", ".", "toLowerCase", "(", ")", "+", "url", ".", "substring", "(", "proto", ".", "end", "(", ")", ")", ";", "}", "else", "{", "link", "=", "\"", "<STR_LIT>", "\"", "+", "url", ";", "}", "String", "href", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "link", ",", "url", ")", ";", "m", ".", "appendReplacement", "(", "sb", ",", "href", ")", ";", "}", "else", "{", "m", ".", "appendReplacement", "(", "sb", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "m", ".", "appendTail", "(", "sb", ")", ";", "}", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "text", "=", "sb", ".", "toString", "(", ")", ";", "}", "else", "{", "text", "=", "bodyHtml", ";", "mHtmlText", "=", "bodyHtml", ";", "hasImages", "=", "IMG_TAG_START_REGEX", ".", "matcher", "(", "text", ")", ".", "find", "(", ")", ";", "}", "mShowPicturesSection", ".", "setVisibility", "(", "hasImages", "?", "View", ".", "VISIBLE", ":", "View", ".", "GONE", ")", ";", "if", "(", "mMessageContentView", "!", "=", "null", ")", "{", "mMessageContentView", ".", "loadDataWithBaseURL", "(", "\"", "<STR_LIT>", "\"", ",", "text", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "}", "mLoadAttachmentsTask", "=", "new", "LoadAttachmentsTask", "(", ")", ";", "mLoadAttachmentsTask", ".", "execute", "(", "mMessage", ".", "mId", ")", ";", "}", "</s>"]
["<s>", "public", "void", "loadMessageForViewCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "int", "progress", ")", "{", "if", "(", "messageId", "!", "=", "MessageView", ".", "this", ".", "mMessageId", "|", "|", "messageId", "!", "=", "MessageView", ".", "this", ".", "mWaitForLoadMessageId", ")", "{", "return", ";", "}", "if", "(", "result", "=", "=", "null", ")", "{", "switch", "(", "progress", ")", "{", "case", "0", ":", "mHandler", ".", "progress", "(", "true", ")", ";", "mHandler", ".", "loadContentUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "break", ";", "case", "<NUM_LIT:100>", ":", "mWaitForLoadMessageId", "=", "-", "1", ";", "mHandler", ".", "progress", "(", "false", ")", ";", "cancelAllTasks", "(", ")", ";", "mLoadMessageTask", "=", "new", "LoadMessageTask", "(", "mMessageId", ",", "false", ")", ";", "mLoadMessageTask", ".", "execute", "(", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "else", "{", "mWaitForLoadMessageId", "=", "-", "1", ";", "mHandler", ".", "progress", "(", "false", ")", ";", "mHandler", ".", "networkError", "(", ")", ";", "mHandler", ".", "loadContentUri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "loadAttachmentCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "long", "attachmentId", ",", "int", "progress", ")", "{", "if", "(", "messageId", "=", "=", "MessageView", ".", "this", ".", "mMessageId", ")", "{", "if", "(", "result", "=", "=", "null", ")", "{", "switch", "(", "progress", ")", "{", "case", "0", ":", "mHandler", ".", "setAttachmentsEnabled", "(", "false", ")", ";", "mHandler", ".", "attachmentProgress", "(", "true", ")", ";", "mHandler", ".", "fetchingAttachment", "(", ")", ";", "break", ";", "case", "<NUM_LIT:100>", ":", "mHandler", ".", "setAttachmentsEnabled", "(", "true", ")", ";", "mHandler", ".", "attachmentProgress", "(", "false", ")", ";", "updateAttachmentThumbnail", "(", "attachmentId", ")", ";", "mHandler", ".", "finishLoadAttachment", "(", "attachmentId", ")", ";", "break", ";", "default", ":", "break", ";", "}", "}", "else", "{", "mHandler", ".", "setAttachmentsEnabled", "(", "true", ")", ";", "mHandler", ".", "attachmentProgress", "(", "false", ")", ";", "mHandler", ".", "networkError", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "updateMailboxCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "mailboxId", ",", "int", "progress", ",", "int", "numNewMessages", ")", "{", "if", "(", "result", "!", "=", "null", "|", "|", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "Email", ".", "updateMailboxRefreshTime", "(", "mailboxId", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "updateMailboxListCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "serviceCheckMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "mailboxId", ",", "int", "progress", ",", "long", "tag", ")", "{", "}", "</s>"]
["<s>", "public", "void", "sendMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "messageId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "private", "void", "doFinishLoadAttachment", "(", "long", "attachmentId", ")", "{", "if", "(", "attachmentId", "!", "=", "mLoadAttachmentId", ")", "{", "return", ";", "}", "Attachment", "attachment", "=", "Attachment", ".", "restoreAttachmentWithId", "(", "MessageView", ".", "this", ",", "attachmentId", ")", ";", "Uri", "attachmentUri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "mAccountId", ",", "attachment", ".", "mId", ")", ";", "Uri", "contentUri", "=", "AttachmentProvider", ".", "resolveAttachmentIdToContentUri", "(", "getContentResolver", "(", ")", ",", "attachmentUri", ")", ";", "if", "(", "mLoadAttachmentSave", ")", "{", "try", "{", "File", "file", "=", "createUniqueFile", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "attachment", ".", "mFileName", ")", ";", "InputStream", "in", "=", "getContentResolver", "(", ")", ".", "openInputStream", "(", "contentUri", ")", ";", "OutputStream", "out", "=", "new", "FileOutputStream", "(", "file", ")", ";", "IOUtils", ".", "copy", "(", "in", ",", "out", ")", ";", "out", ".", "flush", "(", ")", ";", "out", ".", "close", "(", ")", ";", "in", ".", "close", "(", ")", ";", "Toast", ".", "makeText", "(", "MessageView", ".", "this", ",", "String", ".", "format", "(", "getString", "(", "R", ".", "string", ".", "message_view_status_attachment_saved", ")", ",", "file", ".", "getName", "(", ")", ")", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "new", "MediaScannerNotifier", "(", "this", ",", "file", ",", "mHandler", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "Toast", ".", "makeText", "(", "MessageView", ".", "this", ",", "getString", "(", "R", ".", "string", ".", "message_view_status_attachment_not_saved", ")", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "}", "}", "else", "{", "try", "{", "Intent", "intent", "=", "new", "Intent", "(", "Intent", ".", "ACTION_VIEW", ")", ";", "intent", ".", "setData", "(", "contentUri", ")", ";", "intent", ".", "addFlags", "(", "Intent", ".", "FLAG_GRANT_READ_URI_PERMISSION", ")", ";", "startActivity", "(", "intent", ")", ";", "}", "catch", "(", "ActivityNotFoundException", "e", ")", "{", "mHandler", ".", "attachmentViewError", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "MediaScannerNotifier", "(", "Context", "context", ",", "File", "file", ",", "MessageViewHandler", "handler", ")", "{", "mContext", "=", "context", ";", "mFile", "=", "file", ";", "mHandler", "=", "handler", ";", "mConnection", "=", "new", "MediaScannerConnection", "(", "context", ",", "this", ")", ";", "mConnection", ".", "connect", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onMediaScannerConnected", "(", ")", "{", "mConnection", ".", "scanFile", "(", "mFile", ".", "getAbsolutePath", "(", ")", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onScanCompleted", "(", "String", "path", ",", "Uri", "uri", ")", "{", "try", "{", "if", "(", "uri", "!", "=", "null", ")", "{", "Intent", "intent", "=", "new", "Intent", "(", "Intent", ".", "ACTION_VIEW", ")", ";", "intent", ".", "setData", "(", "uri", ")", ";", "mContext", ".", "startActivity", "(", "intent", ")", ";", "}", "}", "catch", "(", "ActivityNotFoundException", "e", ")", "{", "mHandler", ".", "attachmentViewError", "(", ")", ";", "}", "finally", "{", "mConnection", ".", "disconnect", "(", ")", ";", "mContext", "=", "null", ";", "mHandler", "=", "null", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "actionShowAccounts", "(", "Context", "context", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "context", ",", "AccountFolderList", ".", "class", ")", ";", "i", ".", "setFlags", "(", "Intent", ".", "FLAG_ACTIVITY_CLEAR_TOP", ")", ";", "context", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "icicle", ")", "{", "super", ".", "onCreate", "(", "icicle", ")", ";", "requestWindowFeature", "(", "Window", ".", "FEATURE_CUSTOM_TITLE", ")", ";", "setContentView", "(", "R", ".", "layout", ".", "account_folder_list", ")", ";", "getWindow", "(", ")", ".", "setFeatureInt", "(", "Window", ".", "FEATURE_CUSTOM_TITLE", ",", "R", ".", "layout", ".", "list_title", ")", ";", "mProgressIcon", "=", "(", "ProgressBar", ")", "findViewById", "(", "R", ".", "id", ".", "title_progress_icon", ")", ";", "mListView", "=", "getListView", "(", ")", ";", "mListView", ".", "setItemsCanFocus", "(", "false", ")", ";", "mListView", ".", "setScrollBarStyle", "(", "View", ".", "SCROLLBARS_OUTSIDE_INSET", ")", ";", "mListView", ".", "setOnItemClickListener", "(", "this", ")", ";", "mListView", ".", "setLongClickable", "(", "true", ")", ";", "registerForContextMenu", "(", "mListView", ")", ";", "if", "(", "icicle", "!", "=", "null", "&", "&", "icicle", ".", "containsKey", "(", "ICICLE_SELECTED_ACCOUNT", ")", ")", "{", "mSelectedContextAccount", "=", "(", "Account", ")", "icicle", ".", "getParcelable", "(", "ICICLE_SELECTED_ACCOUNT", ")", ";", "}", "(", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "title_left_text", ")", ")", ".", "setText", "(", "R", ".", "string", ".", "app_name", ")", ";", "mLoadAccountsTask", "=", "(", "LoadAccountsTask", ")", "new", "LoadAccountsTask", "(", ")", ".", "execute", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onSaveInstanceState", "(", "Bundle", "outState", ")", "{", "super", ".", "onSaveInstanceState", "(", "outState", ")", ";", "if", "(", "mSelectedContextAccount", "!", "=", "null", ")", "{", "outState", ".", "putParcelable", "(", "ICICLE_SELECTED_ACCOUNT", ",", "mSelectedContextAccount", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onPause", "(", ")", "{", "super", ".", "onPause", "(", ")", ";", "Controller", ".", "getInstance", "(", "getApplication", "(", ")", ")", ".", "removeResultCallback", "(", "mControllerCallback", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onResume", "(", ")", "{", "super", ".", "onResume", "(", ")", ";", "NotificationManager", "notifMgr", "=", "(", "NotificationManager", ")", "getSystemService", "(", "Context", ".", "NOTIFICATION_SERVICE", ")", ";", "notifMgr", ".", "cancel", "(", "1", ")", ";", "Controller", ".", "getInstance", "(", "getApplication", "(", ")", ")", ".", "addResultCallback", "(", "mControllerCallback", ")", ";", "updateAccounts", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onDestroy", "(", ")", "{", "super", ".", "onDestroy", "(", ")", ";", "if", "(", "mLoadAccountsTask", "!", "=", "null", "&", "&", "mLoadAccountsTask", ".", "getStatus", "(", ")", "!", "=", "LoadAccountsTask", ".", "Status", ".", "FINISHED", ")", "{", "mLoadAccountsTask", ".", "cancel", "(", "true", ")", ";", "mLoadAccountsTask", "=", "null", ";", "}", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "View", "v", ")", "{", "switch", "(", "v", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "button_compose", ":", "onCompose", "(", "-", "1", ")", ";", "break", ";", "case", "R", ".", "id", ".", "button_refresh", ":", "onRefresh", "(", "-", "1", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "public", "void", "onItemClick", "(", "AdapterView", "<", "?", ">", "parent", ",", "View", "view", ",", "int", "position", ",", "long", "id", ")", "{", "if", "(", "mListAdapter", ".", "isMailbox", "(", "position", ")", ")", "{", "MessageList", ".", "actionHandleMailbox", "(", "this", ",", "id", ")", ";", "}", "else", "if", "(", "mListAdapter", ".", "isAccount", "(", "position", ")", ")", "{", "MessageList", ".", "actionHandleAccount", "(", "this", ",", "id", ",", "Mailbox", ".", "TYPE_INBOX", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "int", "getUnreadCountByMailboxType", "(", "Context", "context", ",", "int", "type", ")", "{", "int", "count", "=", "0", ";", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "MAILBOX_SUM_OF_UNREAD_COUNT_PROJECTION", ",", "MAILBOX_TYPE_SELECTION", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "type", ")", "}", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "return", "c", ".", "getInt", "(", "0", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "return", "count", ";", "}", "</s>"]
["<s>", "private", "static", "int", "getCountByMailboxType", "(", "Context", "context", ",", "int", "type", ")", "{", "int", "count", "=", "0", ";", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "EmailContent", ".", "ID_PROJECTION", ",", "MAILBOX_TYPE_SELECTION", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "type", ")", "}", ",", "null", ")", ";", "try", "{", "c", ".", "moveToPosition", "(", "-", "1", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "count", "+", "=", "EmailContent", ".", "count", "(", "context", ",", "Message", ".", "CONTENT_URI", ",", "MAILBOX_ID_SELECTION", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "c", ".", "getLong", "(", "EmailContent", ".", "ID_PROJECTION_COLUMN", ")", ")", "}", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "return", "count", ";", "}", "</s>"]
["<s>", "private", "MatrixCursor", "getSummaryChildCursor", "(", ")", "{", "MatrixCursor", "childCursor", "=", "new", "MatrixCursor", "(", "MAILBOX_PROJECTION", ")", ";", "int", "count", ";", "RowBuilder", "row", ";", "count", "=", "getUnreadCountByMailboxType", "(", "this", ",", "Mailbox", ".", "TYPE_INBOX", ")", ";", "row", "=", "childCursor", ".", "newRow", "(", ")", ";", "row", ".", "add", "(", "Long", ".", "valueOf", "(", "Mailbox", ".", "QUERY_ALL_INBOXES", ")", ")", ";", "row", ".", "add", "(", "getString", "(", "R", ".", "string", ".", "account_folder_list_summary_inbox", ")", ")", ";", "row", ".", "add", "(", "null", ")", ";", "row", ".", "add", "(", "Integer", ".", "valueOf", "(", "Mailbox", ".", "TYPE_INBOX", ")", ")", ";", "row", ".", "add", "(", "Integer", ".", "valueOf", "(", "count", ")", ")", ";", "count", "=", "EmailContent", ".", "count", "(", "this", ",", "Message", ".", "CONTENT_URI", ",", "FAVORITE_COUNT_SELECTION", ",", "null", ")", ";", "if", "(", "count", ">", "0", ")", "{", "row", "=", "childCursor", ".", "newRow", "(", ")", ";", "row", ".", "add", "(", "Long", ".", "valueOf", "(", "Mailbox", ".", "QUERY_ALL_FAVORITES", ")", ")", ";", "row", ".", "add", "(", "getString", "(", "R", ".", "string", ".", "account_folder_list_summary_starred", ")", ")", ";", "row", ".", "add", "(", "null", ")", ";", "row", ".", "add", "(", "Integer", ".", "valueOf", "(", "Mailbox", ".", "TYPE_MAIL", ")", ")", ";", "row", ".", "add", "(", "Integer", ".", "valueOf", "(", "count", ")", ")", ";", "}", "count", "=", "getCountByMailboxType", "(", "this", ",", "Mailbox", ".", "TYPE_DRAFTS", ")", ";", "if", "(", "count", ">", "0", ")", "{", "row", "=", "childCursor", ".", "newRow", "(", ")", ";", "row", ".", "add", "(", "Long", ".", "valueOf", "(", "Mailbox", ".", "QUERY_ALL_DRAFTS", ")", ")", ";", "row", ".", "add", "(", "getString", "(", "R", ".", "string", ".", "account_folder_list_summary_drafts", ")", ")", ";", "row", ".", "add", "(", "null", ")", ";", "row", ".", "add", "(", "Integer", ".", "valueOf", "(", "Mailbox", ".", "TYPE_DRAFTS", ")", ")", ";", "row", ".", "add", "(", "Integer", ".", "valueOf", "(", "count", ")", ")", ";", "}", "count", "=", "getCountByMailboxType", "(", "this", ",", "Mailbox", ".", "TYPE_OUTBOX", ")", ";", "if", "(", "count", ">", "0", ")", "{", "row", "=", "childCursor", ".", "newRow", "(", ")", ";", "row", ".", "add", "(", "Long", ".", "valueOf", "(", "Mailbox", ".", "QUERY_ALL_OUTBOX", ")", ")", ";", "row", ".", "add", "(", "getString", "(", "R", ".", "string", ".", "account_folder_list_summary_outbox", ")", ")", ";", "row", ".", "add", "(", "null", ")", ";", "row", ".", "add", "(", "Integer", ".", "valueOf", "(", "Mailbox", ".", "TYPE_OUTBOX", ")", ")", ";", "row", ".", "add", "(", "Integer", ".", "valueOf", "(", "count", ")", ")", ";", "}", "return", "childCursor", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Object", "[", "]", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "Cursor", "c1", "=", "getSummaryChildCursor", "(", ")", ";", "Cursor", "c2", "=", "AccountFolderList", ".", "this", ".", "managedQuery", "(", "EmailContent", ".", "Account", ".", "CONTENT_URI", ",", "EmailContent", ".", "Account", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "Long", "defaultAccount", "=", "Account", ".", "getDefaultAccountId", "(", "AccountFolderList", ".", "this", ")", ";", "return", "new", "Object", "[", "]", "{", "c1", ",", "c2", ",", "defaultAccount", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Object", "[", "]", "params", ")", "{", "if", "(", "params", "=", "=", "null", "|", "|", "(", "(", "Cursor", ")", "params", "[", "1", "]", ")", ".", "isClosed", "(", ")", ")", "{", "return", ";", "}", "mListAdapter", "=", "AccountsAdapter", ".", "getInstance", "(", "(", "Cursor", ")", "params", "[", "0", "]", ",", "(", "Cursor", ")", "params", "[", "1", "]", ",", "AccountFolderList", ".", "this", ",", "(", "Long", ")", "params", "[", "<NUM_LIT:2>", "]", ")", ";", "mListView", ".", "setAdapter", "(", "mListAdapter", ")", ";", "}", "</s>"]
["<s>", "private", "void", "updateAccounts", "(", ")", "{", "if", "(", "mLoadAccountsTask", "!", "=", "null", "&", "&", "mLoadAccountsTask", ".", "getStatus", "(", ")", "!", "=", "LoadAccountsTask", ".", "Status", ".", "FINISHED", ")", "{", "mLoadAccountsTask", ".", "cancel", "(", "true", ")", ";", "}", "mLoadAccountsTask", "=", "(", "LoadAccountsTask", ")", "new", "LoadAccountsTask", "(", ")", ".", "execute", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onAddNewAccount", "(", ")", "{", "AccountSetupBasics", ".", "actionNewAccount", "(", "this", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onEditAccount", "(", "long", "accountId", ")", "{", "AccountSettings", ".", "actionSettings", "(", "this", ",", "accountId", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onRefresh", "(", "long", "accountId", ")", "{", "if", "(", "accountId", "=", "=", "-", "1", ")", "{", "Toast", ".", "makeText", "(", "this", ",", "\"", "<STR_LIT>", "\"", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "}", "else", "{", "mHandler", ".", "progress", "(", "true", ")", ";", "Controller", ".", "getInstance", "(", "getApplication", "(", ")", ")", ".", "updateMailboxList", "(", "accountId", ",", "mControllerCallback", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onCompose", "(", "long", "accountId", ")", "{", "if", "(", "accountId", "=", "=", "-", "1", ")", "{", "accountId", "=", "Account", ".", "getDefaultAccountId", "(", "this", ")", ";", "}", "if", "(", "accountId", "!", "=", "-", "1", ")", "{", "MessageCompose", ".", "actionCompose", "(", "this", ",", "accountId", ")", ";", "}", "else", "{", "onAddNewAccount", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onDeleteAccount", "(", "long", "accountId", ")", "{", "mSelectedContextAccount", "=", "Account", ".", "restoreAccountWithId", "(", "this", ",", "accountId", ")", ";", "showDialog", "(", "DIALOG_REMOVE_ACCOUNT", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Dialog", "onCreateDialog", "(", "int", "id", ")", "{", "switch", "(", "id", ")", "{", "case", "DIALOG_REMOVE_ACCOUNT", ":", "return", "createRemoveAccountDialog", "(", ")", ";", "}", "return", "super", ".", "onCreateDialog", "(", "id", ")", ";", "}", "</s>"]
["<s>", "private", "Dialog", "createRemoveAccountDialog", "(", ")", "{", "return", "new", "AlertDialog", ".", "Builder", "(", "this", ")", ".", "setIcon", "(", "android", ".", "R", ".", "drawable", ".", "ic_dialog_alert", ")", ".", "setTitle", "(", "R", ".", "string", ".", "account_delete_dlg_title", ")", ".", "setMessage", "(", "getString", "(", "R", ".", "string", ".", "account_delete_dlg_instructions_fmt", ",", "mSelectedContextAccount", ".", "getDisplayName", "(", ")", ")", ")", ".", "setPositiveButton", "(", "R", ".", "string", ".", "okay_action", ",", "new", "DialogInterface", ".", "OnClickListener", "(", ")", "{", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "whichButton", ")", "{", "dismissDialog", "(", "DIALOG_REMOVE_ACCOUNT", ")", ";", "try", "{", "Store", ".", "getInstance", "(", "mSelectedContextAccount", ".", "getStoreUri", "(", "AccountFolderList", ".", "this", ")", ",", "getApplication", "(", ")", ",", "null", ")", ".", "delete", "(", ")", ";", "Store", ".", "removeInstance", "(", "mSelectedContextAccount", ".", "getStoreUri", "(", "AccountFolderList", ".", "this", ")", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Account", ".", "CONTENT_URI", ",", "mSelectedContextAccount", ".", "mId", ")", ";", "AccountFolderList", ".", "this", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "}", "Email", ".", "setServicesEnabled", "(", "AccountFolderList", ".", "this", ")", ";", "int", "numAccounts", "=", "EmailContent", ".", "count", "(", "AccountFolderList", ".", "this", ",", "Account", ".", "CONTENT_URI", ",", "null", ",", "null", ")", ";", "if", "(", "numAccounts", "=", "=", "0", ")", "{", "AccountSetupBasics", ".", "actionNewAccount", "(", "AccountFolderList", ".", "this", ")", ";", "finish", "(", ")", ";", "}", "updateAccounts", "(", ")", ";", "}", "}", ")", ".", "setNegativeButton", "(", "R", ".", "string", ".", "cancel_action", ",", "new", "DialogInterface", ".", "OnClickListener", "(", ")", "{", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "whichButton", ")", "{", "dismissDialog", "(", "DIALOG_REMOVE_ACCOUNT", ")", ";", "}", "}", ")", ".", "create", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "whichButton", ")", "{", "dismissDialog", "(", "DIALOG_REMOVE_ACCOUNT", ")", ";", "try", "{", "Store", ".", "getInstance", "(", "mSelectedContextAccount", ".", "getStoreUri", "(", "AccountFolderList", ".", "this", ")", ",", "getApplication", "(", ")", ",", "null", ")", ".", "delete", "(", ")", ";", "Store", ".", "removeInstance", "(", "mSelectedContextAccount", ".", "getStoreUri", "(", "AccountFolderList", ".", "this", ")", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Account", ".", "CONTENT_URI", ",", "mSelectedContextAccount", ".", "mId", ")", ";", "AccountFolderList", ".", "this", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "}", "Email", ".", "setServicesEnabled", "(", "AccountFolderList", ".", "this", ")", ";", "int", "numAccounts", "=", "EmailContent", ".", "count", "(", "AccountFolderList", ".", "this", ",", "Account", ".", "CONTENT_URI", ",", "null", ",", "null", ")", ";", "if", "(", "numAccounts", "=", "=", "0", ")", "{", "AccountSetupBasics", ".", "actionNewAccount", "(", "AccountFolderList", ".", "this", ")", ";", "finish", "(", ")", ";", "}", "updateAccounts", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "whichButton", ")", "{", "dismissDialog", "(", "DIALOG_REMOVE_ACCOUNT", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onPrepareDialog", "(", "int", "id", ",", "Dialog", "dialog", ")", "{", "switch", "(", "id", ")", "{", "case", "DIALOG_REMOVE_ACCOUNT", ":", "AlertDialog", "alert", "=", "(", "AlertDialog", ")", "dialog", ";", "alert", ".", "setMessage", "(", "getString", "(", "R", ".", "string", ".", "account_delete_dlg_instructions_fmt", ",", "mSelectedContextAccount", ".", "getDisplayName", "(", ")", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onContextItemSelected", "(", "MenuItem", "item", ")", "{", "AdapterView", ".", "AdapterContextMenuInfo", "menuInfo", "=", "(", "AdapterView", ".", "AdapterContextMenuInfo", ")", "item", ".", "getMenuInfo", "(", ")", ";", "if", "(", "mListAdapter", ".", "isMailbox", "(", "menuInfo", ".", "position", ")", ")", "{", "Cursor", "c", "=", "(", "Cursor", ")", "mListView", ".", "getItemAtPosition", "(", "menuInfo", ".", "position", ")", ";", "long", "id", "=", "c", ".", "getLong", "(", "MAILBOX_COLUMN_ID", ")", ";", "switch", "(", "item", ".", "getItemId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "open_folder", ":", "MessageList", ".", "actionHandleMailbox", "(", "this", ",", "id", ")", ";", "break", ";", "case", "R", ".", "id", ".", "check_mail", ":", "onRefresh", "(", "-", "1", ")", ";", "break", ";", "}", "return", "false", ";", "}", "else", "if", "(", "mListAdapter", ".", "isAccount", "(", "menuInfo", ".", "position", ")", ")", "{", "Cursor", "c", "=", "(", "Cursor", ")", "mListView", ".", "getItemAtPosition", "(", "menuInfo", ".", "position", ")", ";", "long", "accountId", "=", "c", ".", "getLong", "(", "Account", ".", "CONTENT_ID_COLUMN", ")", ";", "switch", "(", "item", ".", "getItemId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "open_folder", ":", "MailboxList", ".", "actionHandleAccount", "(", "this", ",", "accountId", ")", ";", "break", ";", "case", "R", ".", "id", ".", "compose", ":", "onCompose", "(", "accountId", ")", ";", "break", ";", "case", "R", ".", "id", ".", "refresh_account", ":", "onRefresh", "(", "accountId", ")", ";", "break", ";", "case", "R", ".", "id", ".", "edit_account", ":", "onEditAccount", "(", "accountId", ")", ";", "break", ";", "case", "R", ".", "id", ".", "delete_account", ":", "onDeleteAccount", "(", "accountId", ")", ";", "break", ";", "}", "return", "true", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onOptionsItemSelected", "(", "MenuItem", "item", ")", "{", "switch", "(", "item", ".", "getItemId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "add_new_account", ":", "onAddNewAccount", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "check_mail", ":", "onRefresh", "(", "-", "1", ")", ";", "break", ";", "case", "R", ".", "id", ".", "compose", ":", "onCompose", "(", "-", "1", ")", ";", "break", ";", "default", ":", "return", "super", ".", "onOptionsItemSelected", "(", "item", ")", ";", "}", "return", "true", ";", "}", "</s>"]
["<s>", "public", "boolean", "onItemLongClick", "(", "AdapterView", "<", "?", ">", "parent", ",", "View", "view", ",", "int", "position", ",", "long", "id", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onCreateOptionsMenu", "(", "Menu", "menu", ")", "{", "super", ".", "onCreateOptionsMenu", "(", "menu", ")", ";", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "account_folder_list_option", ",", "menu", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreateContextMenu", "(", "ContextMenu", "menu", ",", "View", "v", ",", "ContextMenuInfo", "info", ")", "{", "super", ".", "onCreateContextMenu", "(", "menu", ",", "v", ",", "info", ")", ";", "AdapterView", ".", "AdapterContextMenuInfo", "menuInfo", "=", "(", "AdapterView", ".", "AdapterContextMenuInfo", ")", "info", ";", "if", "(", "mListAdapter", ".", "isMailbox", "(", "menuInfo", ".", "position", ")", ")", "{", "Cursor", "c", "=", "(", "Cursor", ")", "mListView", ".", "getItemAtPosition", "(", "menuInfo", ".", "position", ")", ";", "String", "displayName", "=", "c", ".", "getString", "(", "Account", ".", "CONTENT_DISPLAY_NAME_COLUMN", ")", ";", "menu", ".", "setHeaderTitle", "(", "displayName", ")", ";", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "account_folder_list_smart_folder_context", ",", "menu", ")", ";", "}", "else", "if", "(", "mListAdapter", ".", "isAccount", "(", "menuInfo", ".", "position", ")", ")", "{", "Cursor", "c", "=", "(", "Cursor", ")", "mListView", ".", "getItemAtPosition", "(", "menuInfo", ".", "position", ")", ";", "String", "accountName", "=", "c", ".", "getString", "(", "Account", ".", "CONTENT_DISPLAY_NAME_COLUMN", ")", ";", "menu", ".", "setHeaderTitle", "(", "accountName", ")", ";", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "account_folder_list_context", ",", "menu", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onKeyDown", "(", "int", "keyCode", ",", "KeyEvent", "event", ")", "{", "if", "(", "event", ".", "getKeyCode", "(", ")", "=", "=", "secretKeyCodes", "[", "mSecretKeyCodeIndex", "]", ")", "{", "mSecretKeyCodeIndex", "+", "+", ";", "if", "(", "mSecretKeyCodeIndex", "=", "=", "secretKeyCodes", ".", "length", ")", "{", "mSecretKeyCodeIndex", "=", "0", ";", "startActivity", "(", "new", "Intent", "(", "this", ",", "Debug", ".", "class", ")", ")", ";", "}", "}", "else", "{", "mSecretKeyCodeIndex", "=", "0", ";", "}", "return", "super", ".", "onKeyDown", "(", "keyCode", ",", "event", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "handleMessage", "(", "android", ".", "os", ".", "Message", "msg", ")", "{", "switch", "(", "msg", ".", "what", ")", "{", "case", "MSG_PROGRESS", ":", "boolean", "showProgress", "=", "(", "msg", ".", "arg1", "!", "=", "0", ")", ";", "if", "(", "showProgress", ")", "{", "mProgressIcon", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "else", "{", "mProgressIcon", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "break", ";", "default", ":", "super", ".", "handleMessage", "(", "msg", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "progress", "(", "boolean", "progress", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", ")", ";", "msg", ".", "what", "=", "MSG_PROGRESS", ";", "msg", ".", "arg1", "=", "progress", "?", "1", ":", "0", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "updateMailboxListCallback", "(", "MessagingException", "result", ",", "long", "accountKey", ",", "int", "progress", ")", "{", "updateProgress", "(", "result", ",", "progress", ")", ";", "}", "</s>"]
["<s>", "public", "void", "updateMailboxCallback", "(", "MessagingException", "result", ",", "long", "accountKey", ",", "long", "mailboxKey", ",", "int", "progress", ",", "int", "numNewMessages", ")", "{", "if", "(", "result", "!", "=", "null", "|", "|", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "Email", ".", "updateMailboxRefreshTime", "(", "mailboxKey", ")", ";", "}", "if", "(", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "updateAccounts", "(", ")", ";", "}", "updateProgress", "(", "result", ",", "progress", ")", ";", "}", "</s>"]
["<s>", "public", "void", "loadMessageForViewCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "loadAttachmentCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "long", "attachmentId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "serviceCheckMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "mailboxId", ",", "int", "progress", ",", "long", "tag", ")", "{", "updateProgress", "(", "result", ",", "progress", ")", ";", "}", "</s>"]
["<s>", "public", "void", "sendMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "messageId", ",", "int", "progress", ")", "{", "if", "(", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "updateAccounts", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "updateProgress", "(", "MessagingException", "result", ",", "int", "progress", ")", "{", "if", "(", "result", "!", "=", "null", "|", "|", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "mHandler", ".", "progress", "(", "false", ")", ";", "}", "else", "if", "(", "progress", "=", "=", "0", ")", "{", "mHandler", ".", "progress", "(", "true", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "AccountsAdapter", "getInstance", "(", "Cursor", "mailboxesCursor", ",", "Cursor", "accountsCursor", ",", "Context", "context", ",", "long", "defaultAccountId", ")", "{", "Cursor", "[", "]", "cursors", "=", "new", "Cursor", "[", "]", "{", "mailboxesCursor", ",", "accountsCursor", "}", ";", "Cursor", "mc", "=", "new", "MergeCursor", "(", "cursors", ")", ";", "return", "new", "AccountsAdapter", "(", "mc", ",", "context", ",", "mailboxesCursor", ".", "getCount", "(", ")", ",", "defaultAccountId", ")", ";", "}", "</s>"]
["<s>", "public", "AccountsAdapter", "(", "Cursor", "c", ",", "Context", "context", ",", "int", "mailboxesCount", ",", "long", "defaultAccountId", ")", "{", "super", "(", "context", ",", "c", ",", "true", ")", ";", "mContext", "=", "context", ";", "mInflater", "=", "(", "LayoutInflater", ")", "context", ".", "getSystemService", "(", "Context", ".", "LAYOUT_INFLATER_SERVICE", ")", ";", "mMailboxesCount", "=", "mailboxesCount", ";", "mSeparatorPosition", "=", "mailboxesCount", ";", "mDefaultAccountId", "=", "defaultAccountId", ";", "}", "</s>"]
["<s>", "public", "boolean", "isMailbox", "(", "int", "position", ")", "{", "return", "position", "<", "mMailboxesCount", ";", "}", "</s>"]
["<s>", "public", "boolean", "isAccount", "(", "int", "position", ")", "{", "return", "position", ">", "=", "mMailboxesCount", ";", "}", "</s>"]
["<s>", "public", "void", "onClickFolder", "(", "AccountFolderListItem", "itemView", ")", "{", "MailboxList", ".", "actionHandleAccount", "(", "mContext", ",", "itemView", ".", "mAccountId", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "bindView", "(", "View", "view", ",", "Context", "context", ",", "Cursor", "cursor", ")", "{", "if", "(", "cursor", ".", "getPosition", "(", ")", "<", "mMailboxesCount", ")", "{", "bindMailboxItem", "(", "view", ",", "context", ",", "cursor", ",", "false", ")", ";", "}", "else", "{", "bindAccountItem", "(", "view", ",", "context", ",", "cursor", ",", "false", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "bindMailboxItem", "(", "View", "view", ",", "Context", "context", ",", "Cursor", "cursor", ",", "boolean", "isLastChild", ")", "{", "AccountFolderListItem", "itemView", "=", "(", "AccountFolderListItem", ")", "view", ";", "itemView", ".", "bindViewInit", "(", "this", ",", "false", ")", ";", "view", ".", "findViewById", "(", "R", ".", "id", ".", "chip", ")", ".", "setVisibility", "(", "View", ".", "INVISIBLE", ")", ";", "String", "text", "=", "cursor", ".", "getString", "(", "MAILBOX_DISPLAY_NAME", ")", ";", "if", "(", "text", "!", "=", "null", ")", "{", "TextView", "nameView", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "name", ")", ";", "nameView", ".", "setText", "(", "text", ")", ";", "}", "text", "=", "null", ";", "TextView", "statusView", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "status", ")", ";", "if", "(", "text", "!", "=", "null", ")", "{", "statusView", ".", "setText", "(", "text", ")", ";", "statusView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "else", "{", "statusView", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "int", "count", "=", "-", "1", ";", "text", "=", "cursor", ".", "getString", "(", "MAILBOX_UNREAD_COUNT", ")", ";", "if", "(", "text", "!", "=", "null", ")", "{", "count", "=", "Integer", ".", "valueOf", "(", "text", ")", ";", "}", "TextView", "countView", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "new_message_count", ")", ";", "if", "(", "count", ">", "0", ")", "{", "countView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "countView", ".", "setText", "(", "text", ")", ";", "}", "else", "{", "countView", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "int", "id", "=", "cursor", ".", "getInt", "(", "MAILBOX_COLUMN_ID", ")", ";", "if", "(", "id", "=", "=", "Mailbox", ".", "QUERY_ALL_FAVORITES", "|", "|", "id", "=", "=", "Mailbox", ".", "QUERY_ALL_DRAFTS", "|", "|", "id", "=", "=", "Mailbox", ".", "QUERY_ALL_OUTBOX", ")", "{", "countView", ".", "setBackgroundResource", "(", "R", ".", "drawable", ".", "ind_sum", ")", ";", "}", "else", "{", "countView", ".", "setBackgroundResource", "(", "R", ".", "drawable", ".", "ind_unread", ")", ";", "}", "countView", ".", "setPadding", "(", "<NUM_LIT:2>", ",", "0", ",", "<NUM_LIT:2>", ",", "0", ")", ";", "view", ".", "findViewById", "(", "R", ".", "id", ".", "folder_button", ")", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "view", ".", "findViewById", "(", "R", ".", "id", ".", "folder_separator", ")", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "view", ".", "findViewById", "(", "R", ".", "id", ".", "default_sender", ")", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "view", ".", "findViewById", "(", "R", ".", "id", ".", "folder_icon", ")", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "(", "(", "ImageView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "folder_icon", ")", ")", ".", "setImageDrawable", "(", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "context", ")", ".", "getSummaryMailboxIconIds", "(", "id", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "bindAccountItem", "(", "View", "view", ",", "Context", "context", ",", "Cursor", "cursor", ",", "boolean", "isExpanded", ")", "{", "AccountFolderListItem", "itemView", "=", "(", "AccountFolderListItem", ")", "view", ";", "itemView", ".", "bindViewInit", "(", "this", ",", "true", ")", ";", "itemView", ".", "mAccountId", "=", "cursor", ".", "getLong", "(", "Account", ".", "CONTENT_ID_COLUMN", ")", ";", "long", "accountId", "=", "cursor", ".", "getLong", "(", "Account", ".", "CONTENT_ID_COLUMN", ")", ";", "View", "chipView", "=", "view", ".", "findViewById", "(", "R", ".", "id", ".", "chip", ")", ";", "int", "chipResId", "=", "mColorChipResIds", "[", "(", "int", ")", "accountId", "%", "mColorChipResIds", ".", "length", "]", ";", "chipView", ".", "setBackgroundResource", "(", "chipResId", ")", ";", "chipView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "String", "text", "=", "cursor", ".", "getString", "(", "Account", ".", "CONTENT_DISPLAY_NAME_COLUMN", ")", ";", "if", "(", "text", "!", "=", "null", ")", "{", "TextView", "descriptionView", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "name", ")", ";", "descriptionView", ".", "setText", "(", "text", ")", ";", "}", "text", "=", "cursor", ".", "getString", "(", "Account", ".", "CONTENT_EMAIL_ADDRESS_COLUMN", ")", ";", "if", "(", "text", "!", "=", "null", ")", "{", "TextView", "emailView", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "status", ")", ";", "emailView", ".", "setText", "(", "text", ")", ";", "emailView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "int", "unreadMessageCount", "=", "0", ";", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "MAILBOX_UNREAD_COUNT_PROJECTION", ",", "MAILBOX_INBOX_SELECTION", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "accountId", ")", "}", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "String", "count", "=", "c", ".", "getString", "(", "MAILBOX_UNREAD_COUNT_COLUMN_UNREAD_COUNT", ")", ";", "if", "(", "count", "!", "=", "null", ")", "{", "unreadMessageCount", "=", "Integer", ".", "valueOf", "(", "count", ")", ";", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "TextView", "countView", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "new_message_count", ")", ";", "if", "(", "unreadMessageCount", ">", "0", ")", "{", "countView", ".", "setText", "(", "String", ".", "valueOf", "(", "unreadMessageCount", ")", ")", ";", "countView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "else", "{", "countView", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "countView", ".", "setBackgroundResource", "(", "R", ".", "drawable", ".", "ind_unread", ")", ";", "countView", ".", "setPadding", "(", "<NUM_LIT:2>", ",", "0", ",", "<NUM_LIT:2>", ",", "0", ")", ";", "view", ".", "findViewById", "(", "R", ".", "id", ".", "folder_icon", ")", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "view", ".", "findViewById", "(", "R", ".", "id", ".", "folder_button", ")", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "view", ".", "findViewById", "(", "R", ".", "id", ".", "folder_separator", ")", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "if", "(", "accountId", "=", "=", "mDefaultAccountId", ")", "{", "view", ".", "findViewById", "(", "R", ".", "id", ".", "default_sender", ")", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "else", "{", "view", ".", "findViewById", "(", "R", ".", "id", ".", "default_sender", ")", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "View", "newView", "(", "Context", "context", ",", "Cursor", "cursor", ",", "ViewGroup", "parent", ")", "{", "return", "mInflater", ".", "inflate", "(", "R", ".", "layout", ".", "account_folder_list_item", ",", "parent", ",", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getItemViewType", "(", "int", "position", ")", "{", "if", "(", "position", "=", "=", "mSeparatorPosition", ")", "{", "return", "IGNORE_ITEM_VIEW_TYPE", ";", "}", "return", "super", ".", "getItemViewType", "(", "position", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "View", "getView", "(", "int", "position", ",", "View", "convertView", ",", "ViewGroup", "parent", ")", "{", "if", "(", "!", "mDataValid", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "position", "=", "=", "mSeparatorPosition", ")", "{", "TextView", "view", ";", "view", "=", "(", "TextView", ")", "mInflater", ".", "inflate", "(", "R", ".", "layout", ".", "list_separator", ",", "parent", ",", "false", ")", ";", "view", ".", "setText", "(", "R", ".", "string", ".", "account_folder_list_separator_accounts", ")", ";", "return", "view", ";", "}", "if", "(", "!", "mCursor", ".", "moveToPosition", "(", "getRealPosition", "(", "position", ")", ")", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", "+", "position", ")", ";", "}", "View", "v", ";", "if", "(", "convertView", "=", "=", "null", ")", "{", "v", "=", "newView", "(", "mContext", ",", "mCursor", ",", "parent", ")", ";", "}", "else", "{", "v", "=", "convertView", ";", "}", "bindView", "(", "v", ",", "mContext", ",", "mCursor", ")", ";", "return", "v", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "areAllItemsEnabled", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isEnabled", "(", "int", "position", ")", "{", "return", "position", "!", "=", "mSeparatorPosition", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getCount", "(", ")", "{", "int", "count", "=", "super", ".", "getCount", "(", ")", ";", "if", "(", "mDataValid", "&", "&", "(", "mSeparatorPosition", "!", "=", "ListView", ".", "INVALID_POSITION", ")", ")", "{", "count", "+", "=", "1", ";", "}", "return", "count", ";", "}", "</s>"]
["<s>", "private", "int", "getRealPosition", "(", "int", "pos", ")", "{", "if", "(", "mSeparatorPosition", "=", "=", "ListView", ".", "INVALID_POSITION", ")", "{", "return", "pos", ";", "}", "else", "if", "(", "pos", "<", "=", "mSeparatorPosition", ")", "{", "return", "pos", ";", "}", "else", "{", "return", "pos", "-", "1", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "getItem", "(", "int", "pos", ")", "{", "return", "super", ".", "getItem", "(", "getRealPosition", "(", "pos", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getItemId", "(", "int", "pos", ")", "{", "return", "super", ".", "getItemId", "(", "getRealPosition", "(", "pos", ")", ")", ";", "}", "</s>"]
["<s>", "public", "CharSequence", "fixText", "(", "CharSequence", "invalidText", ")", "{", "mIsValid", "=", "false", ";", "return", "invalidText", ";", "}", "</s>"]
["<s>", "public", "boolean", "isValid", "(", "CharSequence", "text", ")", "{", "return", "mValidator", "!", "=", "null", "?", "mValidator", ".", "isValid", "(", "text", ")", ":", "true", ";", "}", "</s>"]
["<s>", "public", "void", "setValidator", "(", "Validator", "validator", ")", "{", "mValidator", "=", "validator", ";", "}", "</s>"]
["<s>", "public", "AddressTextView", "(", "Context", "context", ",", "AttributeSet", "attrs", ")", "{", "super", "(", "context", ",", "attrs", ")", ";", "super", ".", "setValidator", "(", "mInternalValidator", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setValidator", "(", "Validator", "validator", ")", "{", "mInternalValidator", ".", "setValidator", "(", "validator", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "performValidation", "(", ")", "{", "mIsValid", "=", "true", ";", "super", ".", "performValidation", "(", ")", ";", "markError", "(", "!", "mIsValid", ")", ";", "}", "</s>"]
["<s>", "private", "void", "markError", "(", "boolean", "enable", ")", "{", "if", "(", "enable", ")", "{", "setError", "(", "getContext", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "message_compose_error_invalid_email", ")", ")", ";", "}", "else", "{", "setError", "(", "null", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "actionHandleMailbox", "(", "Context", "context", ",", "long", "id", ")", "{", "Intent", "intent", "=", "new", "Intent", "(", "context", ",", "MessageList", ".", "class", ")", ";", "intent", ".", "addFlags", "(", "Intent", ".", "FLAG_ACTIVITY_CLEAR_TOP", ")", ";", "intent", ".", "putExtra", "(", "EXTRA_MAILBOX_ID", ",", "id", ")", ";", "context", ".", "startActivity", "(", "intent", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionHandleAccount", "(", "Context", "context", ",", "long", "accountId", ",", "int", "mailboxType", ")", "{", "Intent", "intent", "=", "new", "Intent", "(", "context", ",", "MessageList", ".", "class", ")", ";", "intent", ".", "addFlags", "(", "Intent", ".", "FLAG_ACTIVITY_CLEAR_TOP", ")", ";", "intent", ".", "putExtra", "(", "EXTRA_ACCOUNT_ID", ",", "accountId", ")", ";", "intent", ".", "putExtra", "(", "EXTRA_MAILBOX_TYPE", ",", "mailboxType", ")", ";", "context", ".", "startActivity", "(", "intent", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Intent", "actionHandleAccountIntent", "(", "Context", "context", ",", "long", "accountId", ",", "long", "mailboxId", ",", "int", "mailboxType", ")", "{", "Intent", "intent", "=", "new", "Intent", "(", "context", ",", "MessageList", ".", "class", ")", ";", "intent", ".", "addFlags", "(", "Intent", ".", "FLAG_ACTIVITY_CLEAR_TOP", ")", ";", "intent", ".", "putExtra", "(", "EXTRA_ACCOUNT_ID", ",", "accountId", ")", ";", "intent", ".", "putExtra", "(", "EXTRA_MAILBOX_ID", ",", "mailboxId", ")", ";", "intent", ".", "putExtra", "(", "EXTRA_MAILBOX_TYPE", ",", "mailboxType", ")", ";", "return", "intent", ";", "}", "</s>"]
["<s>", "public", "static", "Intent", "actionHandleAccountUriIntent", "(", "Context", "context", ",", "long", "accountId", ",", "int", "mailboxType", ")", "{", "Intent", "i", "=", "actionHandleAccountIntent", "(", "context", ",", "accountId", ",", "-", "1", ",", "mailboxType", ")", ";", "i", ".", "removeExtra", "(", "EXTRA_ACCOUNT_ID", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "accountId", ")", ";", "i", ".", "setData", "(", "uri", ")", ";", "return", "i", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "icicle", ")", "{", "super", ".", "onCreate", "(", "icicle", ")", ";", "requestWindowFeature", "(", "Window", ".", "FEATURE_CUSTOM_TITLE", ")", ";", "setContentView", "(", "R", ".", "layout", ".", "message_list", ")", ";", "getWindow", "(", ")", ".", "setFeatureInt", "(", "Window", ".", "FEATURE_CUSTOM_TITLE", ",", "R", ".", "layout", ".", "list_title", ")", ";", "mCanAutoRefresh", "=", "true", ";", "mListView", "=", "getListView", "(", ")", ";", "mMultiSelectPanel", "=", "findViewById", "(", "R", ".", "id", ".", "footer_organize", ")", ";", "mReadUnreadButton", "=", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "btn_read_unread", ")", ";", "mFavoriteButton", "=", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "btn_multi_favorite", ")", ";", "mDeleteButton", "=", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "btn_multi_delete", ")", ";", "mLeftTitle", "=", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "title_left_text", ")", ";", "mRightTitle", "=", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "title_right_text", ")", ";", "mProgressIcon", "=", "(", "ProgressBar", ")", "findViewById", "(", "R", ".", "id", ".", "title_progress_icon", ")", ";", "mErrorBanner", "=", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "connection_error_text", ")", ";", "mReadUnreadButton", ".", "setOnClickListener", "(", "this", ")", ";", "mFavoriteButton", ".", "setOnClickListener", "(", "this", ")", ";", "mDeleteButton", ".", "setOnClickListener", "(", "this", ")", ";", "mListView", ".", "setOnItemClickListener", "(", "this", ")", ";", "mListView", ".", "setItemsCanFocus", "(", "false", ")", ";", "registerForContextMenu", "(", "mListView", ")", ";", "mListAdapter", "=", "new", "MessageListAdapter", "(", "this", ")", ";", "setListAdapter", "(", "mListAdapter", ")", ";", "mResolver", "=", "getContentResolver", "(", ")", ";", "mMailboxId", "=", "getIntent", "(", ")", ".", "getLongExtra", "(", "EXTRA_MAILBOX_ID", ",", "-", "1", ")", ";", "if", "(", "mMailboxId", "!", "=", "-", "1", ")", "{", "mSetTitleTask", "=", "new", "SetTitleTask", "(", "mMailboxId", ")", ";", "mSetTitleTask", ".", "execute", "(", ")", ";", "mLoadMessagesTask", "=", "new", "LoadMessagesTask", "(", "mMailboxId", ",", "-", "1", ")", ";", "mLoadMessagesTask", ".", "execute", "(", ")", ";", "addFooterView", "(", "mMailboxId", ",", "-", "1", ",", "-", "1", ")", ";", "}", "else", "{", "long", "accountId", "=", "-", "1", ";", "int", "mailboxType", "=", "getIntent", "(", ")", ".", "getIntExtra", "(", "EXTRA_MAILBOX_TYPE", ",", "Mailbox", ".", "TYPE_INBOX", ")", ";", "Uri", "uri", "=", "getIntent", "(", ")", ".", "getData", "(", ")", ";", "if", "(", "uri", "!", "=", "null", "&", "&", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "uri", ".", "getScheme", "(", ")", ")", "&", "&", "EmailContent", ".", "AUTHORITY", ".", "equals", "(", "uri", ".", "getAuthority", "(", ")", ")", ")", "{", "String", "accountIdString", "=", "uri", ".", "getPathSegments", "(", ")", ".", "get", "(", "1", ")", ";", "if", "(", "accountIdString", "!", "=", "null", ")", "{", "accountId", "=", "Long", ".", "parseLong", "(", "accountIdString", ")", ";", "}", "mFindMailboxTask", "=", "new", "FindMailboxTask", "(", "accountId", ",", "mailboxType", ",", "false", ")", ";", "mFindMailboxTask", ".", "execute", "(", ")", ";", "}", "else", "{", "accountId", "=", "getIntent", "(", ")", ".", "getLongExtra", "(", "EXTRA_ACCOUNT_ID", ",", "-", "1", ")", ";", "mFindMailboxTask", "=", "new", "FindMailboxTask", "(", "accountId", ",", "mailboxType", ",", "true", ")", ";", "mFindMailboxTask", ".", "execute", "(", ")", ";", "}", "addFooterView", "(", "-", "1", ",", "accountId", ",", "mailboxType", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onPause", "(", ")", "{", "super", ".", "onPause", "(", ")", ";", "mController", ".", "removeResultCallback", "(", "mControllerCallback", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onResume", "(", ")", "{", "super", ".", "onResume", "(", ")", ";", "mController", ".", "addResultCallback", "(", "mControllerCallback", ")", ";", "NotificationManager", "notificationManager", "=", "(", "NotificationManager", ")", "getSystemService", "(", "Context", ".", "NOTIFICATION_SERVICE", ")", ";", "notificationManager", ".", "cancel", "(", "MailService", ".", "NEW_MESSAGE_NOTIFICATION_ID", ")", ";", "restoreListPosition", "(", ")", ";", "autoRefreshStaleMailbox", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onDestroy", "(", ")", "{", "super", ".", "onDestroy", "(", ")", ";", "if", "(", "mLoadMessagesTask", "!", "=", "null", "&", "&", "mLoadMessagesTask", ".", "getStatus", "(", ")", "!", "=", "LoadMessagesTask", ".", "Status", ".", "FINISHED", ")", "{", "mLoadMessagesTask", ".", "cancel", "(", "true", ")", ";", "mLoadMessagesTask", "=", "null", ";", "}", "if", "(", "mFindMailboxTask", "!", "=", "null", "&", "&", "mFindMailboxTask", ".", "getStatus", "(", ")", "!", "=", "FindMailboxTask", ".", "Status", ".", "FINISHED", ")", "{", "mFindMailboxTask", ".", "cancel", "(", "true", ")", ";", "mFindMailboxTask", "=", "null", ";", "}", "if", "(", "mSetTitleTask", "!", "=", "null", "&", "&", "mSetTitleTask", ".", "getStatus", "(", ")", "!", "=", "SetTitleTask", ".", "Status", ".", "FINISHED", ")", "{", "mSetTitleTask", ".", "cancel", "(", "true", ")", ";", "mSetTitleTask", "=", "null", ";", "}", "if", "(", "mSetFooterTask", "!", "=", "null", "&", "&", "mSetFooterTask", ".", "getStatus", "(", ")", "!", "=", "SetTitleTask", ".", "Status", ".", "FINISHED", ")", "{", "mSetFooterTask", ".", "cancel", "(", "true", ")", ";", "mSetFooterTask", "=", "null", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onSaveInstanceState", "(", "Bundle", "outState", ")", "{", "super", ".", "onSaveInstanceState", "(", "outState", ")", ";", "saveListPosition", "(", ")", ";", "outState", ".", "putInt", "(", "STATE_SELECTED_POSITION", ",", "mSavedItemPosition", ")", ";", "outState", ".", "putInt", "(", "STATE_SELECTED_ITEM_TOP", ",", "mSavedItemTop", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onRestoreInstanceState", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onRestoreInstanceState", "(", "savedInstanceState", ")", ";", "mSavedItemTop", "=", "savedInstanceState", ".", "getInt", "(", "STATE_SELECTED_ITEM_TOP", ",", "0", ")", ";", "mSavedItemPosition", "=", "savedInstanceState", ".", "getInt", "(", "STATE_SELECTED_POSITION", ",", "-", "1", ")", ";", "}", "</s>"]
["<s>", "private", "void", "saveListPosition", "(", ")", "{", "mSavedItemPosition", "=", "getListView", "(", ")", ".", "getSelectedItemPosition", "(", ")", ";", "if", "(", "mSavedItemPosition", ">", "=", "0", ")", "{", "mSavedItemTop", "=", "getListView", "(", ")", ".", "getSelectedView", "(", ")", ".", "getTop", "(", ")", ";", "}", "else", "{", "mSavedItemPosition", "=", "getListView", "(", ")", ".", "getFirstVisiblePosition", "(", ")", ";", "if", "(", "mSavedItemPosition", ">", "=", "0", ")", "{", "mSavedItemTop", "=", "0", ";", "View", "topChild", "=", "getListView", "(", ")", ".", "getChildAt", "(", "0", ")", ";", "if", "(", "topChild", "!", "=", "null", ")", "{", "mSavedItemTop", "=", "topChild", ".", "getTop", "(", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "private", "void", "restoreListPosition", "(", ")", "{", "if", "(", "mSavedItemPosition", ">", "=", "0", "&", "&", "mSavedItemPosition", "<", "getListView", "(", ")", ".", "getCount", "(", ")", ")", "{", "getListView", "(", ")", ".", "setSelectionFromTop", "(", "mSavedItemPosition", ",", "mSavedItemTop", ")", ";", "mSavedItemPosition", "=", "-", "1", ";", "mSavedItemTop", "=", "0", ";", "}", "}", "</s>"]
["<s>", "public", "void", "onItemClick", "(", "AdapterView", "<", "?", ">", "parent", ",", "View", "view", ",", "int", "position", ",", "long", "id", ")", "{", "if", "(", "view", "!", "=", "mListFooterView", ")", "{", "MessageListItem", "itemView", "=", "(", "MessageListItem", ")", "view", ";", "onOpenMessage", "(", "id", ",", "itemView", ".", "mMailboxId", ")", ";", "}", "else", "{", "doFooterClick", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "View", "v", ")", "{", "switch", "(", "v", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "btn_read_unread", ":", "onMultiToggleRead", "(", "mListAdapter", ".", "getSelectedSet", "(", ")", ")", ";", "break", ";", "case", "R", ".", "id", ".", "btn_multi_favorite", ":", "onMultiToggleFavorite", "(", "mListAdapter", ".", "getSelectedSet", "(", ")", ")", ";", "break", ";", "case", "R", ".", "id", ".", "btn_multi_delete", ":", "onMultiDelete", "(", "mListAdapter", ".", "getSelectedSet", "(", ")", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onCreateOptionsMenu", "(", "Menu", "menu", ")", "{", "super", ".", "onCreateOptionsMenu", "(", "menu", ")", ";", "if", "(", "mMailboxId", "<", "0", ")", "{", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "message_list_option_smart_folder", ",", "menu", ")", ";", "}", "else", "{", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "message_list_option", ",", "menu", ")", ";", "}", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onPrepareOptionsMenu", "(", "Menu", "menu", ")", "{", "boolean", "showDeselect", "=", "mListAdapter", ".", "getSelectedSet", "(", ")", ".", "size", "(", ")", ">", "0", ";", "menu", ".", "setGroupVisible", "(", "R", ".", "id", ".", "deselect_all_group", ",", "showDeselect", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onOptionsItemSelected", "(", "MenuItem", "item", ")", "{", "switch", "(", "item", ".", "getItemId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "refresh", ":", "onRefresh", "(", ")", ";", "return", "true", ";", "case", "R", ".", "id", ".", "folders", ":", "onFolders", "(", ")", ";", "return", "true", ";", "case", "R", ".", "id", ".", "accounts", ":", "onAccounts", "(", ")", ";", "return", "true", ";", "case", "R", ".", "id", ".", "compose", ":", "onCompose", "(", ")", ";", "return", "true", ";", "case", "R", ".", "id", ".", "account_settings", ":", "onEditAccount", "(", ")", ";", "return", "true", ";", "case", "R", ".", "id", ".", "deselect_all", ":", "onDeselectAll", "(", ")", ";", "return", "true", ";", "default", ":", "return", "super", ".", "onOptionsItemSelected", "(", "item", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreateContextMenu", "(", "ContextMenu", "menu", ",", "View", "v", ",", "ContextMenuInfo", "menuInfo", ")", "{", "super", ".", "onCreateContextMenu", "(", "menu", ",", "v", ",", "menuInfo", ")", ";", "AdapterView", ".", "AdapterContextMenuInfo", "info", "=", "(", "AdapterView", ".", "AdapterContextMenuInfo", ")", "menuInfo", ";", "if", "(", "info", ".", "targetView", "=", "=", "mListFooterView", ")", "{", "return", ";", "}", "MessageListItem", "itemView", "=", "(", "MessageListItem", ")", "info", ".", "targetView", ";", "Cursor", "c", "=", "(", "Cursor", ")", "mListView", ".", "getItemAtPosition", "(", "info", ".", "position", ")", ";", "String", "messageName", "=", "c", ".", "getString", "(", "MessageListAdapter", ".", "COLUMN_SUBJECT", ")", ";", "menu", ".", "setHeaderTitle", "(", "messageName", ")", ";", "Mailbox", "mailbox", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "this", ",", "itemView", ".", "mMailboxId", ")", ";", "switch", "(", "mailbox", ".", "mType", ")", "{", "case", "EmailContent", ".", "Mailbox", ".", "TYPE_DRAFTS", ":", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "message_list_context_drafts", ",", "menu", ")", ";", "break", ";", "case", "EmailContent", ".", "Mailbox", ".", "TYPE_OUTBOX", ":", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "message_list_context_outbox", ",", "menu", ")", ";", "break", ";", "case", "EmailContent", ".", "Mailbox", ".", "TYPE_TRASH", ":", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "message_list_context_trash", ",", "menu", ")", ";", "break", ";", "default", ":", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "message_list_context", ",", "menu", ")", ";", "if", "(", "itemView", ".", "mRead", ")", "{", "menu", ".", "findItem", "(", "R", ".", "id", ".", "mark_as_read", ")", ".", "setTitle", "(", "R", ".", "string", ".", "mark_as_unread_action", ")", ";", "}", "break", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onContextItemSelected", "(", "MenuItem", "item", ")", "{", "AdapterView", ".", "AdapterContextMenuInfo", "info", "=", "(", "AdapterView", ".", "AdapterContextMenuInfo", ")", "item", ".", "getMenuInfo", "(", ")", ";", "MessageListItem", "itemView", "=", "(", "MessageListItem", ")", "info", ".", "targetView", ";", "switch", "(", "item", ".", "getItemId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "open", ":", "onOpenMessage", "(", "info", ".", "id", ",", "itemView", ".", "mMailboxId", ")", ";", "break", ";", "case", "R", ".", "id", ".", "delete", ":", "onDelete", "(", "info", ".", "id", ",", "itemView", ".", "mAccountId", ")", ";", "break", ";", "case", "R", ".", "id", ".", "reply", ":", "onReply", "(", "itemView", ".", "mMessageId", ")", ";", "break", ";", "case", "R", ".", "id", ".", "reply_all", ":", "onReplyAll", "(", "itemView", ".", "mMessageId", ")", ";", "break", ";", "case", "R", ".", "id", ".", "forward", ":", "onForward", "(", "itemView", ".", "mMessageId", ")", ";", "break", ";", "case", "R", ".", "id", ".", "mark_as_read", ":", "onSetMessageRead", "(", "info", ".", "id", ",", "!", "itemView", ".", "mRead", ")", ";", "break", ";", "}", "return", "super", ".", "onContextItemSelected", "(", "item", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onRefresh", "(", ")", "{", "if", "(", "mMailboxId", ">", "=", "0", ")", "{", "Mailbox", "mailbox", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "this", ",", "mMailboxId", ")", ";", "if", "(", "mailbox", "!", "=", "null", ")", "{", "mController", ".", "updateMailbox", "(", "mailbox", ".", "mAccountKey", ",", "mMailboxId", ",", "mControllerCallback", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "onFolders", "(", ")", "{", "if", "(", "mMailboxId", ">", "=", "0", ")", "{", "Mailbox", "mailbox", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "this", ",", "mMailboxId", ")", ";", "MailboxList", ".", "actionHandleAccount", "(", "this", ",", "mailbox", ".", "mAccountKey", ")", ";", "finish", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onAccounts", "(", ")", "{", "AccountFolderList", ".", "actionShowAccounts", "(", "this", ")", ";", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "private", "long", "lookupAccountIdFromMailboxId", "(", "long", "mailboxId", ")", "{", "if", "(", "mailboxId", "<", "0", ")", "{", "return", "-", "1", ";", "}", "EmailContent", ".", "Mailbox", "mailbox", "=", "EmailContent", ".", "Mailbox", ".", "restoreMailboxWithId", "(", "this", ",", "mailboxId", ")", ";", "return", "mailbox", ".", "mAccountKey", ";", "}", "</s>"]
["<s>", "private", "void", "onCompose", "(", ")", "{", "MessageCompose", ".", "actionCompose", "(", "this", ",", "lookupAccountIdFromMailboxId", "(", "mMailboxId", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onEditAccount", "(", ")", "{", "AccountSettings", ".", "actionSettings", "(", "this", ",", "lookupAccountIdFromMailboxId", "(", "mMailboxId", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onDeselectAll", "(", ")", "{", "mListAdapter", ".", "getSelectedSet", "(", ")", ".", "clear", "(", ")", ";", "mListView", ".", "invalidateViews", "(", ")", ";", "showMultiPanel", "(", "false", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onOpenMessage", "(", "long", "messageId", ",", "long", "mailboxId", ")", "{", "EmailContent", ".", "Mailbox", "mailbox", "=", "EmailContent", ".", "Mailbox", ".", "restoreMailboxWithId", "(", "this", ",", "mailboxId", ")", ";", "if", "(", "mailbox", ".", "mType", "=", "=", "EmailContent", ".", "Mailbox", ".", "TYPE_DRAFTS", ")", "{", "MessageCompose", ".", "actionEditDraft", "(", "this", ",", "messageId", ")", ";", "}", "else", "{", "MessageView", ".", "actionView", "(", "this", ",", "messageId", ",", "mMailboxId", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onReply", "(", "long", "messageId", ")", "{", "MessageCompose", ".", "actionReply", "(", "this", ",", "messageId", ",", "false", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onReplyAll", "(", "long", "messageId", ")", "{", "MessageCompose", ".", "actionReply", "(", "this", ",", "messageId", ",", "true", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onForward", "(", "long", "messageId", ")", "{", "MessageCompose", ".", "actionForward", "(", "this", ",", "messageId", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onLoadMoreMessages", "(", ")", "{", "if", "(", "mMailboxId", ">", "=", "0", ")", "{", "mController", ".", "loadMoreMessages", "(", "mMailboxId", ",", "mControllerCallback", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onSendPendingMessages", "(", ")", "{", "long", "accountId", "=", "lookupAccountIdFromMailboxId", "(", "mMailboxId", ")", ";", "mController", ".", "sendPendingMessages", "(", "accountId", ",", "mControllerCallback", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onDelete", "(", "long", "messageId", ",", "long", "accountId", ")", "{", "mController", ".", "deleteMessage", "(", "messageId", ",", "accountId", ")", ";", "Toast", ".", "makeText", "(", "this", ",", "R", ".", "string", ".", "message_deleted_toast", ",", "Toast", ".", "LENGTH_SHORT", ")", ".", "show", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onSetMessageRead", "(", "long", "messageId", ",", "boolean", "newRead", ")", "{", "mController", ".", "setMessageRead", "(", "messageId", ",", "newRead", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onSetMessageFavorite", "(", "long", "messageId", ",", "boolean", "newFavorite", ")", "{", "mController", ".", "setMessageFavorite", "(", "messageId", ",", "newFavorite", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onMultiToggleRead", "(", "Set", "<", "Long", ">", "selectedSet", ")", "{", "toggleMultiple", "(", "selectedSet", ",", "new", "MultiToggleHelper", "(", ")", "{", "public", "boolean", "getField", "(", "long", "messageId", ",", "Cursor", "c", ")", "{", "return", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_READ", ")", "=", "=", "0", ";", "}", "public", "boolean", "setField", "(", "long", "messageId", ",", "Cursor", "c", ",", "boolean", "newValue", ")", "{", "boolean", "oldValue", "=", "getField", "(", "messageId", ",", "c", ")", ";", "if", "(", "oldValue", "!", "=", "newValue", ")", "{", "onSetMessageRead", "(", "messageId", ",", "!", "newValue", ")", ";", "return", "true", ";", "}", "return", "false", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "getField", "(", "long", "messageId", ",", "Cursor", "c", ")", "{", "return", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_READ", ")", "=", "=", "0", ";", "}", "</s>"]
["<s>", "public", "boolean", "setField", "(", "long", "messageId", ",", "Cursor", "c", ",", "boolean", "newValue", ")", "{", "boolean", "oldValue", "=", "getField", "(", "messageId", ",", "c", ")", ";", "if", "(", "oldValue", "!", "=", "newValue", ")", "{", "onSetMessageRead", "(", "messageId", ",", "!", "newValue", ")", ";", "return", "true", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "private", "void", "onMultiToggleFavorite", "(", "Set", "<", "Long", ">", "selectedSet", ")", "{", "toggleMultiple", "(", "selectedSet", ",", "new", "MultiToggleHelper", "(", ")", "{", "public", "boolean", "getField", "(", "long", "messageId", ",", "Cursor", "c", ")", "{", "return", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_FAVORITE", ")", "!", "=", "0", ";", "}", "public", "boolean", "setField", "(", "long", "messageId", ",", "Cursor", "c", ",", "boolean", "newValue", ")", "{", "boolean", "oldValue", "=", "getField", "(", "messageId", ",", "c", ")", ";", "if", "(", "oldValue", "!", "=", "newValue", ")", "{", "onSetMessageFavorite", "(", "messageId", ",", "newValue", ")", ";", "return", "true", ";", "}", "return", "false", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "getField", "(", "long", "messageId", ",", "Cursor", "c", ")", "{", "return", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_FAVORITE", ")", "!", "=", "0", ";", "}", "</s>"]
["<s>", "public", "boolean", "setField", "(", "long", "messageId", ",", "Cursor", "c", ",", "boolean", "newValue", ")", "{", "boolean", "oldValue", "=", "getField", "(", "messageId", ",", "c", ")", ";", "if", "(", "oldValue", "!", "=", "newValue", ")", "{", "onSetMessageFavorite", "(", "messageId", ",", "newValue", ")", ";", "return", "true", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "private", "void", "onMultiDelete", "(", "Set", "<", "Long", ">", "selectedSet", ")", "{", "HashSet", "<", "Long", ">", "cloneSet", "=", "new", "HashSet", "<", "Long", ">", "(", "selectedSet", ")", ";", "for", "(", "Long", "id", ":", "cloneSet", ")", "{", "mController", ".", "deleteMessage", "(", "id", ",", "-", "1", ")", ";", "}", "Toast", ".", "makeText", "(", "this", ",", "R", ".", "string", ".", "message_deleted_toast", ",", "Toast", ".", "LENGTH_SHORT", ")", ".", "show", "(", ")", ";", "selectedSet", ".", "clear", "(", ")", ";", "showMultiPanel", "(", "false", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "getField", "(", "long", "messageId", ",", "Cursor", "c", ")", ";", "</s>"]
["<s>", "public", "boolean", "setField", "(", "long", "messageId", ",", "Cursor", "c", ",", "boolean", "newValue", ")", ";", "</s>"]
["<s>", "private", "int", "toggleMultiple", "(", "Set", "<", "Long", ">", "selectedSet", ",", "MultiToggleHelper", "helper", ")", "{", "Cursor", "c", "=", "mListAdapter", ".", "getCursor", "(", ")", ";", "boolean", "anyWereFound", "=", "false", ";", "boolean", "allWereSet", "=", "true", ";", "c", ".", "moveToPosition", "(", "-", "1", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "id", "=", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_ID", ")", ";", "if", "(", "selectedSet", ".", "contains", "(", "Long", ".", "valueOf", "(", "id", ")", ")", ")", "{", "anyWereFound", "=", "true", ";", "if", "(", "!", "helper", ".", "getField", "(", "id", ",", "c", ")", ")", "{", "allWereSet", "=", "false", ";", "break", ";", "}", "}", "}", "int", "numChanged", "=", "0", ";", "if", "(", "anyWereFound", ")", "{", "boolean", "newValue", "=", "!", "allWereSet", ";", "c", ".", "moveToPosition", "(", "-", "1", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "id", "=", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_ID", ")", ";", "if", "(", "selectedSet", ".", "contains", "(", "Long", ".", "valueOf", "(", "id", ")", ")", ")", "{", "if", "(", "helper", ".", "setField", "(", "id", ",", "c", ",", "newValue", ")", ")", "{", "+", "+", "numChanged", ";", "}", "}", "}", "}", "return", "numChanged", ";", "}", "</s>"]
["<s>", "private", "boolean", "testMultiple", "(", "Set", "<", "Long", ">", "selectedSet", ",", "int", "column_id", ",", "boolean", "defaultflag", ")", "{", "Cursor", "c", "=", "mListAdapter", ".", "getCursor", "(", ")", ";", "if", "(", "c", "=", "=", "null", "|", "|", "c", ".", "isClosed", "(", ")", ")", "{", "return", "false", ";", "}", "c", ".", "moveToPosition", "(", "-", "1", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "id", "=", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_ID", ")", ";", "if", "(", "selectedSet", ".", "contains", "(", "Long", ".", "valueOf", "(", "id", ")", ")", ")", "{", "if", "(", "c", ".", "getInt", "(", "column_id", ")", "=", "=", "(", "defaultflag", "?", "1", ":", "0", ")", ")", "{", "return", "true", ";", "}", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "private", "void", "autoRefreshStaleMailbox", "(", ")", "{", "if", "(", "!", "mCanAutoRefresh", "|", "|", "(", "mListAdapter", ".", "getCursor", "(", ")", "=", "=", "null", ")", "|", "|", "(", "mPushModeMailbox", "!", "=", "null", "&", "&", "mPushModeMailbox", ")", "|", "|", "(", "mMailboxId", "<", "0", ")", ")", "{", "return", ";", "}", "mCanAutoRefresh", "=", "false", ";", "if", "(", "!", "Email", ".", "mailboxRequiresRefresh", "(", "mMailboxId", ")", ")", "{", "return", ";", "}", "onRefresh", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "updateFooterButtonNames", "(", ")", "{", "if", "(", "testMultiple", "(", "mListAdapter", ".", "getSelectedSet", "(", ")", ",", "MessageListAdapter", ".", "COLUMN_READ", ",", "true", ")", ")", "{", "mReadUnreadButton", ".", "setText", "(", "R", ".", "string", ".", "unread_action", ")", ";", "}", "else", "{", "mReadUnreadButton", ".", "setText", "(", "R", ".", "string", ".", "read_action", ")", ";", "}", "if", "(", "testMultiple", "(", "mListAdapter", ".", "getSelectedSet", "(", ")", ",", "MessageListAdapter", ".", "COLUMN_FAVORITE", ",", "false", ")", ")", "{", "mFavoriteButton", ".", "setText", "(", "R", ".", "string", ".", "set_star_action", ")", ";", "}", "else", "{", "mFavoriteButton", ".", "setText", "(", "R", ".", "string", ".", "remove_star_action", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "showMultiPanel", "(", "boolean", "show", ")", "{", "if", "(", "show", "&", "&", "mMultiSelectPanel", ".", "getVisibility", "(", ")", "!", "=", "View", ".", "VISIBLE", ")", "{", "mMultiSelectPanel", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "mMultiSelectPanel", ".", "startAnimation", "(", "AnimationUtils", ".", "loadAnimation", "(", "this", ",", "R", ".", "anim", ".", "footer_appear", ")", ")", ";", "}", "else", "if", "(", "!", "show", "&", "&", "mMultiSelectPanel", ".", "getVisibility", "(", ")", "!", "=", "View", ".", "GONE", ")", "{", "mMultiSelectPanel", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "mMultiSelectPanel", ".", "startAnimation", "(", "AnimationUtils", ".", "loadAnimation", "(", "this", ",", "R", ".", "anim", ".", "footer_disappear", ")", ")", ";", "}", "if", "(", "show", ")", "{", "updateFooterButtonNames", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "addFooterView", "(", "long", "mailboxId", ",", "long", "accountId", ",", "int", "mailboxType", ")", "{", "if", "(", "mailboxId", "=", "=", "Mailbox", ".", "QUERY_ALL_INBOXES", "|", "|", "mailboxId", "=", "=", "Mailbox", ".", "QUERY_ALL_UNREAD", "|", "|", "mailboxId", "=", "=", "Mailbox", ".", "QUERY_ALL_FAVORITES", ")", "{", "finishFooterView", "(", "LIST_FOOTER_MODE_REFRESH", ")", ";", "return", ";", "}", "if", "(", "mailboxId", "=", "=", "Mailbox", ".", "QUERY_ALL_DRAFTS", "|", "|", "mailboxType", "=", "=", "Mailbox", ".", "TYPE_DRAFTS", ")", "{", "finishFooterView", "(", "LIST_FOOTER_MODE_NONE", ")", ";", "return", ";", "}", "if", "(", "mailboxId", "=", "=", "Mailbox", ".", "QUERY_ALL_OUTBOX", "|", "|", "mailboxType", "=", "=", "Mailbox", ".", "TYPE_OUTBOX", ")", "{", "finishFooterView", "(", "LIST_FOOTER_MODE_SEND", ")", ";", "return", ";", "}", "mSetFooterTask", "=", "new", "SetFooterTask", "(", ")", ";", "mSetFooterTask", ".", "execute", "(", "mailboxId", ",", "accountId", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Integer", "doInBackground", "(", "Long", ".", ".", ".", "params", ")", "{", "long", "mailboxId", "=", "params", "[", "0", "]", ";", "long", "accountId", "=", "params", "[", "1", "]", ";", "int", "mailboxType", "=", "-", "1", ";", "if", "(", "mailboxId", "!", "=", "-", "1", ")", "{", "try", "{", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "CONTENT_URI", ",", "mailboxId", ")", ";", "Cursor", "c", "=", "mResolver", ".", "query", "(", "uri", ",", "MAILBOX_ACCOUNT_AND_TYPE_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "try", "{", "accountId", "=", "c", ".", "getLong", "(", "0", ")", ";", "mailboxType", "=", "c", ".", "getInt", "(", "1", ")", ";", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "}", "catch", "(", "IllegalArgumentException", "iae", ")", "{", "return", "LIST_FOOTER_MODE_NONE", ";", "}", "}", "switch", "(", "mailboxType", ")", "{", "case", "Mailbox", ".", "TYPE_OUTBOX", ":", "return", "LIST_FOOTER_MODE_SEND", ";", "case", "Mailbox", ".", "TYPE_DRAFTS", ":", "return", "LIST_FOOTER_MODE_NONE", ";", "}", "if", "(", "accountId", "!", "=", "-", "1", ")", "{", "Account", "account", "=", "Account", ".", "restoreAccountWithId", "(", "MessageList", ".", "this", ",", "accountId", ")", ";", "if", "(", "account", "!", "=", "null", ")", "{", "mPushModeMailbox", "=", "account", ".", "mSyncInterval", "=", "=", "Account", ".", "CHECK_INTERVAL_PUSH", ";", "if", "(", "MessageList", ".", "this", ".", "mController", ".", "isMessagingController", "(", "account", ")", ")", "{", "return", "LIST_FOOTER_MODE_MORE", ";", "}", "else", "{", "return", "LIST_FOOTER_MODE_NONE", ";", "}", "}", "}", "return", "LIST_FOOTER_MODE_NONE", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Integer", "listFooterMode", ")", "{", "if", "(", "listFooterMode", "=", "=", "null", ")", "{", "return", ";", "}", "finishFooterView", "(", "listFooterMode", ")", ";", "}", "</s>"]
["<s>", "private", "void", "finishFooterView", "(", "int", "listFooterMode", ")", "{", "mListFooterMode", "=", "listFooterMode", ";", "if", "(", "mListFooterMode", "!", "=", "LIST_FOOTER_MODE_NONE", ")", "{", "mListFooterView", "=", "(", "(", "LayoutInflater", ")", "getSystemService", "(", "Context", ".", "LAYOUT_INFLATER_SERVICE", ")", ")", ".", "inflate", "(", "R", ".", "layout", ".", "message_list_item_footer", ",", "mListView", ",", "false", ")", ";", "mList", ".", "addFooterView", "(", "mListFooterView", ")", ";", "setListAdapter", "(", "mListAdapter", ")", ";", "mListFooterProgress", "=", "mListFooterView", ".", "findViewById", "(", "R", ".", "id", ".", "progress", ")", ";", "mListFooterText", "=", "(", "TextView", ")", "mListFooterView", ".", "findViewById", "(", "R", ".", "id", ".", "main_text", ")", ";", "setListFooterText", "(", "false", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "setListFooterText", "(", "boolean", "active", ")", "{", "if", "(", "mListFooterMode", "!", "=", "LIST_FOOTER_MODE_NONE", ")", "{", "int", "footerTextId", "=", "0", ";", "switch", "(", "mListFooterMode", ")", "{", "case", "LIST_FOOTER_MODE_REFRESH", ":", "footerTextId", "=", "active", "?", "R", ".", "string", ".", "status_loading_more", ":", "R", ".", "string", ".", "refresh_action", ";", "break", ";", "case", "LIST_FOOTER_MODE_MORE", ":", "footerTextId", "=", "active", "?", "R", ".", "string", ".", "status_loading_more", ":", "R", ".", "string", ".", "message_list_load_more_messages_action", ";", "break", ";", "case", "LIST_FOOTER_MODE_SEND", ":", "footerTextId", "=", "active", "?", "R", ".", "string", ".", "status_sending_messages", ":", "R", ".", "string", ".", "message_list_send_pending_messages_action", ";", "break", ";", "}", "mListFooterText", ".", "setText", "(", "footerTextId", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "doFooterClick", "(", ")", "{", "switch", "(", "mListFooterMode", ")", "{", "case", "LIST_FOOTER_MODE_NONE", ":", "break", ";", "case", "LIST_FOOTER_MODE_REFRESH", ":", "onRefresh", "(", ")", ";", "break", ";", "case", "LIST_FOOTER_MODE_MORE", ":", "onLoadMoreMessages", "(", ")", ";", "break", ";", "case", "LIST_FOOTER_MODE_SEND", ":", "onSendPendingMessages", "(", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "public", "FindMailboxTask", "(", "long", "accountId", ",", "int", "mailboxType", ",", "boolean", "okToRecurse", ")", "{", "mAccountId", "=", "accountId", ";", "mMailboxType", "=", "mailboxType", ";", "mOkToRecurse", "=", "okToRecurse", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Long", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "long", "mailboxId", "=", "Mailbox", ".", "findMailboxOfType", "(", "MessageList", ".", "this", ",", "mAccountId", ",", "mMailboxType", ")", ";", "if", "(", "mailboxId", "=", "=", "Mailbox", ".", "NO_MAILBOX", "&", "&", "mOkToRecurse", ")", "{", "mControllerCallback", ".", "mWaitForMailboxType", "=", "mMailboxType", ";", "mController", ".", "updateMailboxList", "(", "mAccountId", ",", "mControllerCallback", ")", ";", "}", "return", "mailboxId", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Long", "mailboxId", ")", "{", "if", "(", "mailboxId", "=", "=", "null", ")", "{", "return", ";", "}", "if", "(", "mailboxId", "!", "=", "Mailbox", ".", "NO_MAILBOX", ")", "{", "mMailboxId", "=", "mailboxId", ";", "mSetTitleTask", "=", "new", "SetTitleTask", "(", "mMailboxId", ")", ";", "mSetTitleTask", ".", "execute", "(", ")", ";", "mLoadMessagesTask", "=", "new", "LoadMessagesTask", "(", "mMailboxId", ",", "mAccountId", ")", ";", "mLoadMessagesTask", ".", "execute", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "LoadMessagesTask", "(", "long", "mailboxKey", ",", "long", "accountKey", ")", "{", "mMailboxKey", "=", "mailboxKey", ";", "mAccountKey", "=", "accountKey", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Cursor", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "String", "selection", "=", "Utility", ".", "buildMailboxIdSelection", "(", "MessageList", ".", "this", ".", "mResolver", ",", "mMailboxKey", ")", ";", "Cursor", "c", "=", "MessageList", ".", "this", ".", "managedQuery", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "MessageList", ".", "this", ".", "mListAdapter", ".", "PROJECTION", ",", "selection", ",", "null", ",", "EmailContent", ".", "MessageColumns", ".", "TIMESTAMP", "+", "\"", "<STR_LIT>", "\"", ")", ";", "return", "c", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Cursor", "cursor", ")", "{", "if", "(", "cursor", "=", "=", "null", "|", "|", "cursor", ".", "isClosed", "(", ")", ")", "{", "return", ";", "}", "MessageList", ".", "this", ".", "mListAdapter", ".", "changeCursor", "(", "cursor", ")", ";", "restoreListPosition", "(", ")", ";", "autoRefreshStaleMailbox", "(", ")", ";", "if", "(", "mMailboxKey", "=", "=", "Mailbox", ".", "QUERY_ALL_INBOXES", ")", "{", "MailService", ".", "resetNewMessageCount", "(", "MessageList", ".", "this", ",", "-", "1", ")", ";", "}", "else", "if", "(", "mMailboxKey", ">", "=", "0", "&", "&", "mAccountKey", "!", "=", "-", "1", ")", "{", "MailService", ".", "resetNewMessageCount", "(", "MessageList", ".", "this", ",", "mAccountKey", ")", ";", "}", "}", "</s>"]
["<s>", "public", "SetTitleTask", "(", "long", "mailboxKey", ")", "{", "mMailboxKey", "=", "mailboxKey", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "[", "]", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "if", "(", "mMailboxKey", "=", "=", "Mailbox", ".", "QUERY_ALL_INBOXES", ")", "{", "return", "new", "String", "[", "]", "{", "null", ",", "getString", "(", "R", ".", "string", ".", "account_folder_list_summary_inbox", ")", "}", ";", "}", "else", "if", "(", "mMailboxKey", "=", "=", "Mailbox", ".", "QUERY_ALL_FAVORITES", ")", "{", "return", "new", "String", "[", "]", "{", "null", ",", "getString", "(", "R", ".", "string", ".", "account_folder_list_summary_starred", ")", "}", ";", "}", "else", "if", "(", "mMailboxKey", "=", "=", "Mailbox", ".", "QUERY_ALL_DRAFTS", ")", "{", "return", "new", "String", "[", "]", "{", "null", ",", "getString", "(", "R", ".", "string", ".", "account_folder_list_summary_drafts", ")", "}", ";", "}", "else", "if", "(", "mMailboxKey", "=", "=", "Mailbox", ".", "QUERY_ALL_OUTBOX", ")", "{", "return", "new", "String", "[", "]", "{", "null", ",", "getString", "(", "R", ".", "string", ".", "account_folder_list_summary_outbox", ")", "}", ";", "}", "String", "accountName", "=", "null", ";", "String", "mailboxName", "=", "null", ";", "String", "accountKey", "=", "null", ";", "Cursor", "c", "=", "MessageList", ".", "this", ".", "mResolver", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "MAILBOX_NAME_PROJECTION", ",", "ID_SELECTION", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mMailboxKey", ")", "}", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "mailboxName", "=", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "MessageList", ".", "this", ")", ".", "getDisplayName", "(", "c", ".", "getInt", "(", "MAILBOX_NAME_COLUMN_TYPE", ")", ")", ";", "if", "(", "mailboxName", "=", "=", "null", ")", "{", "mailboxName", "=", "c", ".", "getString", "(", "MAILBOX_NAME_COLUMN_ID", ")", ";", "}", "accountKey", "=", "c", ".", "getString", "(", "MAILBOX_NAME_COLUMN_ACCOUNT_KEY", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "if", "(", "accountKey", "!", "=", "null", ")", "{", "c", "=", "MessageList", ".", "this", ".", "mResolver", ".", "query", "(", "Account", ".", "CONTENT_URI", ",", "ACCOUNT_NAME_PROJECTION", ",", "ID_SELECTION", ",", "new", "String", "[", "]", "{", "accountKey", "}", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "accountName", "=", "c", ".", "getString", "(", "ACCOUNT_DISPLAY_NAME_COLUMN_ID", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "return", "new", "String", "[", "]", "{", "accountName", ",", "mailboxName", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "String", "[", "]", "names", ")", "{", "if", "(", "names", "=", "=", "null", ")", "{", "return", ";", "}", "if", "(", "names", "[", "0", "]", "!", "=", "null", ")", "{", "mRightTitle", ".", "setText", "(", "names", "[", "0", "]", ")", ";", "}", "if", "(", "names", "[", "1", "]", "!", "=", "null", ")", "{", "mLeftTitle", ".", "setText", "(", "names", "[", "1", "]", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "handleMessage", "(", "android", ".", "os", ".", "Message", "msg", ")", "{", "switch", "(", "msg", ".", "what", ")", "{", "case", "MSG_PROGRESS", ":", "boolean", "visible", "=", "(", "msg", ".", "arg1", "!", "=", "0", ")", ";", "if", "(", "visible", ")", "{", "mProgressIcon", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "else", "{", "mProgressIcon", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "if", "(", "mListFooterProgress", "!", "=", "null", ")", "{", "mListFooterProgress", ".", "setVisibility", "(", "visible", "?", "View", ".", "VISIBLE", ":", "View", ".", "GONE", ")", ";", "}", "setListFooterText", "(", "visible", ")", ";", "break", ";", "case", "MSG_LOOKUP_MAILBOX_TYPE", ":", "if", "(", "mFindMailboxTask", "!", "=", "null", "&", "&", "mFindMailboxTask", ".", "getStatus", "(", ")", "!", "=", "FindMailboxTask", ".", "Status", ".", "FINISHED", ")", "{", "mFindMailboxTask", ".", "cancel", "(", "true", ")", ";", "mFindMailboxTask", "=", "null", ";", "}", "long", "accountId", "=", "(", "(", "Long", ")", "msg", ".", "obj", ")", ".", "longValue", "(", ")", ";", "int", "mailboxType", "=", "msg", ".", "arg1", ";", "mFindMailboxTask", "=", "new", "FindMailboxTask", "(", "accountId", ",", "mailboxType", ",", "false", ")", ";", "mFindMailboxTask", ".", "execute", "(", ")", ";", "break", ";", "case", "MSG_ERROR_BANNER", ":", "String", "message", "=", "(", "String", ")", "msg", ".", "obj", ";", "boolean", "isVisible", "=", "mErrorBanner", ".", "getVisibility", "(", ")", "=", "=", "View", ".", "VISIBLE", ";", "if", "(", "message", "!", "=", "null", ")", "{", "mErrorBanner", ".", "setText", "(", "message", ")", ";", "if", "(", "!", "isVisible", ")", "{", "mErrorBanner", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "mErrorBanner", ".", "startAnimation", "(", "AnimationUtils", ".", "loadAnimation", "(", "MessageList", ".", "this", ",", "R", ".", "anim", ".", "header_appear", ")", ")", ";", "}", "}", "else", "{", "if", "(", "isVisible", ")", "{", "mErrorBanner", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "mErrorBanner", ".", "startAnimation", "(", "AnimationUtils", ".", "loadAnimation", "(", "MessageList", ".", "this", ",", "R", ".", "anim", ".", "header_disappear", ")", ")", ";", "}", "}", "break", ";", "case", "MSG_REQUERY_LIST", ":", "mListAdapter", ".", "doRequery", "(", ")", ";", "if", "(", "mMultiSelectPanel", ".", "getVisibility", "(", ")", "=", "=", "View", ".", "VISIBLE", ")", "{", "updateFooterButtonNames", "(", ")", ";", "}", "break", ";", "default", ":", "super", ".", "handleMessage", "(", "msg", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "progress", "(", "boolean", "progress", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", ")", ";", "msg", ".", "what", "=", "MSG_PROGRESS", ";", "msg", ".", "arg1", "=", "progress", "?", "1", ":", "0", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "lookupMailboxType", "(", "long", "accountId", ",", "int", "mailboxType", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", ")", ";", "msg", ".", "what", "=", "MSG_LOOKUP_MAILBOX_TYPE", ";", "msg", ".", "arg1", "=", "mailboxType", ";", "msg", ".", "obj", "=", "Long", ".", "valueOf", "(", "accountId", ")", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "showErrorBanner", "(", "String", "message", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", ")", ";", "msg", ".", "what", "=", "MSG_ERROR_BANNER", ";", "msg", ".", "obj", "=", "message", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "requeryList", "(", ")", "{", "sendEmptyMessage", "(", "MSG_REQUERY_LIST", ")", ";", "}", "</s>"]
["<s>", "public", "void", "updateMailboxListCallback", "(", "MessagingException", "result", ",", "long", "accountKey", ",", "int", "progress", ")", "{", "updateProgress", "(", "result", ",", "progress", ")", ";", "if", "(", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "mHandler", ".", "lookupMailboxType", "(", "accountKey", ",", "mWaitForMailboxType", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "updateMailboxCallback", "(", "MessagingException", "result", ",", "long", "accountKey", ",", "long", "mailboxKey", ",", "int", "progress", ",", "int", "numNewMessages", ")", "{", "updateBanner", "(", "result", ",", "progress", ",", "mailboxKey", ")", ";", "if", "(", "result", "!", "=", "null", "|", "|", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "Email", ".", "updateMailboxRefreshTime", "(", "mMailboxId", ")", ";", "}", "updateProgress", "(", "result", ",", "progress", ")", ";", "}", "</s>"]
["<s>", "public", "void", "loadMessageForViewCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "loadAttachmentCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "long", "attachmentId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "serviceCheckMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "mailboxId", ",", "int", "progress", ",", "long", "tag", ")", "{", "}", "</s>"]
["<s>", "public", "void", "sendMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "messageId", ",", "int", "progress", ")", "{", "if", "(", "mListFooterMode", "=", "=", "LIST_FOOTER_MODE_SEND", ")", "{", "if", "(", "messageId", "=", "=", "-", "1", "&", "&", "result", "=", "=", "null", "&", "&", "progress", "=", "=", "0", ")", "{", "mSendMessageException", "=", "null", ";", "}", "if", "(", "result", "!", "=", "null", "&", "&", "mSendMessageException", "=", "=", "null", ")", "{", "mSendMessageException", "=", "result", ";", "}", "if", "(", "messageId", "=", "=", "-", "1", "&", "&", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "updateBanner", "(", "mSendMessageException", ",", "progress", ",", "mMailboxId", ")", ";", "}", "updateProgress", "(", "result", ",", "progress", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "updateProgress", "(", "MessagingException", "result", ",", "int", "progress", ")", "{", "if", "(", "result", "!", "=", "null", "|", "|", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "mHandler", ".", "progress", "(", "false", ")", ";", "}", "else", "if", "(", "progress", "=", "=", "0", ")", "{", "mHandler", ".", "progress", "(", "true", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "updateBanner", "(", "MessagingException", "result", ",", "int", "progress", ",", "long", "mailboxKey", ")", "{", "if", "(", "mailboxKey", "!", "=", "mMailboxId", ")", "{", "return", ";", "}", "if", "(", "result", "!", "=", "null", ")", "{", "int", "id", "=", "R", ".", "string", ".", "status_network_error", ";", "if", "(", "result", "instanceof", "AuthenticationFailedException", ")", "{", "id", "=", "R", ".", "string", ".", "account_setup_failed_dlg_auth_message", ";", "}", "else", "if", "(", "result", "instanceof", "CertificateValidationException", ")", "{", "id", "=", "R", ".", "string", ".", "account_setup_failed_dlg_certificate_message", ";", "}", "else", "{", "switch", "(", "result", ".", "getExceptionType", "(", ")", ")", "{", "case", "MessagingException", ".", "IOERROR", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_ioerror", ";", "break", ";", "case", "MessagingException", ".", "TLS_REQUIRED", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_tls_required", ";", "break", ";", "case", "MessagingException", ".", "AUTH_REQUIRED", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_auth_required", ";", "break", ";", "case", "MessagingException", ".", "GENERAL_SECURITY", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_security", ";", "break", ";", "}", "}", "mHandler", ".", "showErrorBanner", "(", "getString", "(", "id", ")", ")", ";", "}", "else", "if", "(", "progress", ">", "0", ")", "{", "mHandler", ".", "showErrorBanner", "(", "null", ")", ";", "}", "}", "</s>"]
["<s>", "public", "MessageListAdapter", "(", "Context", "context", ")", "{", "super", "(", "context", ",", "null", ",", "true", ")", ";", "mContext", "=", "context", ";", "mInflater", "=", "(", "LayoutInflater", ")", "context", ".", "getSystemService", "(", "Context", ".", "LAYOUT_INFLATER_SERVICE", ")", ";", "Resources", "resources", "=", "context", ".", "getResources", "(", ")", ";", "mAttachmentIcon", "=", "resources", ".", "getDrawable", "(", "R", ".", "drawable", ".", "ic_mms_attachment_small", ")", ";", "mFavoriteIconOn", "=", "resources", ".", "getDrawable", "(", "R", ".", "drawable", ".", "btn_star_big_buttonless_dark_on", ")", ";", "mFavoriteIconOff", "=", "resources", ".", "getDrawable", "(", "R", ".", "drawable", ".", "btn_star_big_buttonless_dark_off", ")", ";", "mSelectedIconOn", "=", "resources", ".", "getDrawable", "(", "R", ".", "drawable", ".", "btn_check_buttonless_dark_on", ")", ";", "mSelectedIconOff", "=", "resources", ".", "getDrawable", "(", "R", ".", "drawable", ".", "btn_check_buttonless_dark_off", ")", ";", "Theme", "theme", "=", "context", ".", "getTheme", "(", ")", ";", "TypedArray", "array", ";", "array", "=", "theme", ".", "obtainStyledAttributes", "(", "new", "int", "[", "]", "{", "android", ".", "R", ".", "attr", ".", "textColorPrimary", "}", ")", ";", "mTextColorPrimary", "=", "resources", ".", "getColorStateList", "(", "array", ".", "getResourceId", "(", "0", ",", "0", ")", ")", ";", "array", "=", "theme", ".", "obtainStyledAttributes", "(", "new", "int", "[", "]", "{", "android", ".", "R", ".", "attr", ".", "textColorSecondary", "}", ")", ";", "mTextColorSecondary", "=", "resources", ".", "getColorStateList", "(", "array", ".", "getResourceId", "(", "0", ",", "0", ")", ")", ";", "mDateFormat", "=", "android", ".", "text", ".", "format", ".", "DateFormat", ".", "getDateFormat", "(", "context", ")", ";", "mDayFormat", "=", "android", ".", "text", ".", "format", ".", "DateFormat", ".", "getDateFormat", "(", "context", ")", ";", "mTimeFormat", "=", "android", ".", "text", ".", "format", ".", "DateFormat", ".", "getTimeFormat", "(", "context", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "synchronized", "void", "onContentChanged", "(", ")", "{", "if", "(", "mCursor", "!", "=", "null", "&", "&", "!", "mCursor", ".", "isClosed", "(", ")", ")", "{", "long", "sinceRefresh", "=", "SystemClock", ".", "elapsedRealtime", "(", ")", "-", "mLastRefreshTime", ";", "mRefreshTimer", ".", "schedule", "(", "REFRESH_INTERVAL_MS", "-", "sinceRefresh", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "doRequery", "(", ")", "{", "if", "(", "mCursor", "!", "=", "null", "&", "&", "!", "mCursor", ".", "isClosed", "(", ")", ")", "{", "mDataValid", "=", "mCursor", ".", "requery", "(", ")", ";", "notifyDataSetChanged", "(", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "void", "clear", "(", ")", "{", "timerTask", "=", "null", ";", "}", "</s>"]
["<s>", "protected", "synchronized", "void", "schedule", "(", "long", "delay", ")", "{", "if", "(", "timerTask", "!", "=", "null", ")", "return", ";", "if", "(", "delay", "<", "0", ")", "{", "refreshList", "(", ")", ";", "}", "else", "{", "timerTask", "=", "new", "RefreshTimerTask", "(", ")", ";", "schedule", "(", "timerTask", ",", "delay", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "refreshList", "(", ")", ";", "}", "</s>"]
["<s>", "private", "synchronized", "void", "refreshList", "(", ")", "{", "if", "(", "Email", ".", "LOGD", ")", "{", "Log", ".", "d", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "(", "SystemClock", ".", "elapsedRealtime", "(", ")", "-", "mLastRefreshTime", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mHandler", ".", "requeryList", "(", ")", ";", "mLastRefreshTime", "=", "SystemClock", ".", "elapsedRealtime", "(", ")", ";", "mRefreshTimer", ".", "clear", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Set", "<", "Long", ">", "getSelectedSet", "(", ")", "{", "return", "mChecked", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "bindView", "(", "View", "view", ",", "Context", "context", ",", "Cursor", "cursor", ")", "{", "MessageListItem", "itemView", "=", "(", "MessageListItem", ")", "view", ";", "itemView", ".", "bindViewInit", "(", "this", ",", "true", ")", ";", "itemView", ".", "mMessageId", "=", "cursor", ".", "getLong", "(", "COLUMN_ID", ")", ";", "itemView", ".", "mMailboxId", "=", "cursor", ".", "getLong", "(", "COLUMN_MAILBOX_KEY", ")", ";", "itemView", ".", "mAccountId", "=", "cursor", ".", "getLong", "(", "COLUMN_ACCOUNT_KEY", ")", ";", "itemView", ".", "mRead", "=", "cursor", ".", "getInt", "(", "COLUMN_READ", ")", "!", "=", "0", ";", "itemView", ".", "mFavorite", "=", "cursor", ".", "getInt", "(", "COLUMN_FAVORITE", ")", "!", "=", "0", ";", "itemView", ".", "mSelected", "=", "mChecked", ".", "contains", "(", "Long", ".", "valueOf", "(", "itemView", ".", "mMessageId", ")", ")", ";", "View", "chipView", "=", "view", ".", "findViewById", "(", "R", ".", "id", ".", "chip", ")", ";", "int", "chipResId", "=", "mColorChipResIds", "[", "(", "int", ")", "itemView", ".", "mAccountId", "%", "mColorChipResIds", ".", "length", "]", ";", "chipView", ".", "setBackgroundResource", "(", "chipResId", ")", ";", "TextView", "fromView", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "from", ")", ";", "String", "text", "=", "cursor", ".", "getString", "(", "COLUMN_DISPLAY_NAME", ")", ";", "fromView", ".", "setText", "(", "text", ")", ";", "TextView", "subjectView", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "subject", ")", ";", "text", "=", "cursor", ".", "getString", "(", "COLUMN_SUBJECT", ")", ";", "subjectView", ".", "setText", "(", "text", ")", ";", "boolean", "hasAttachments", "=", "cursor", ".", "getInt", "(", "COLUMN_ATTACHMENTS", ")", "!", "=", "0", ";", "subjectView", ".", "setCompoundDrawablesWithIntrinsicBounds", "(", "null", ",", "null", ",", "hasAttachments", "?", "mAttachmentIcon", ":", "null", ",", "null", ")", ";", "TextView", "dateView", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "date", ")", ";", "long", "timestamp", "=", "cursor", ".", "getLong", "(", "COLUMN_DATE", ")", ";", "Date", "date", "=", "new", "Date", "(", "timestamp", ")", ";", "if", "(", "Utility", ".", "isDateToday", "(", "date", ")", ")", "{", "text", "=", "mTimeFormat", ".", "format", "(", "date", ")", ";", "}", "else", "{", "text", "=", "mDateFormat", ".", "format", "(", "date", ")", ";", "}", "dateView", ".", "setText", "(", "text", ")", ";", "if", "(", "itemView", ".", "mRead", ")", "{", "subjectView", ".", "setTypeface", "(", "Typeface", ".", "DEFAULT", ")", ";", "fromView", ".", "setTypeface", "(", "Typeface", ".", "DEFAULT", ")", ";", "fromView", ".", "setTextColor", "(", "mTextColorSecondary", ")", ";", "view", ".", "setBackgroundDrawable", "(", "context", ".", "getResources", "(", ")", ".", "getDrawable", "(", "R", ".", "drawable", ".", "message_list_item_background_read", ")", ")", ";", "}", "else", "{", "subjectView", ".", "setTypeface", "(", "Typeface", ".", "DEFAULT_BOLD", ")", ";", "fromView", ".", "setTypeface", "(", "Typeface", ".", "DEFAULT_BOLD", ")", ";", "fromView", ".", "setTextColor", "(", "mTextColorPrimary", ")", ";", "view", ".", "setBackgroundDrawable", "(", "context", ".", "getResources", "(", ")", ".", "getDrawable", "(", "R", ".", "drawable", ".", "message_list_item_background_unread", ")", ")", ";", "}", "ImageView", "selectedView", "=", "(", "ImageView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "selected", ")", ";", "selectedView", ".", "setImageDrawable", "(", "itemView", ".", "mSelected", "?", "mSelectedIconOn", ":", "mSelectedIconOff", ")", ";", "ImageView", "favoriteView", "=", "(", "ImageView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "favorite", ")", ";", "favoriteView", ".", "setImageDrawable", "(", "itemView", ".", "mFavorite", "?", "mFavoriteIconOn", ":", "mFavoriteIconOff", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "View", "newView", "(", "Context", "context", ",", "Cursor", "cursor", ",", "ViewGroup", "parent", ")", "{", "return", "mInflater", ".", "inflate", "(", "R", ".", "layout", ".", "message_list_item", ",", "parent", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "updateSelected", "(", "MessageListItem", "itemView", ",", "boolean", "newSelected", ")", "{", "ImageView", "selectedView", "=", "(", "ImageView", ")", "itemView", ".", "findViewById", "(", "R", ".", "id", ".", "selected", ")", ";", "selectedView", ".", "setImageDrawable", "(", "newSelected", "?", "mSelectedIconOn", ":", "mSelectedIconOff", ")", ";", "Long", "id", "=", "Long", ".", "valueOf", "(", "itemView", ".", "mMessageId", ")", ";", "if", "(", "newSelected", ")", "{", "mChecked", ".", "add", "(", "id", ")", ";", "}", "else", "{", "mChecked", ".", "remove", "(", "id", ")", ";", "}", "MessageList", ".", "this", ".", "showMultiPanel", "(", "mChecked", ".", "size", "(", ")", ">", "0", ")", ";", "}", "</s>"]
["<s>", "public", "void", "updateFavorite", "(", "MessageListItem", "itemView", ",", "boolean", "newFavorite", ")", "{", "ImageView", "favoriteView", "=", "(", "ImageView", ")", "itemView", ".", "findViewById", "(", "R", ".", "id", ".", "favorite", ")", ";", "favoriteView", ".", "setImageDrawable", "(", "newFavorite", "?", "mFavoriteIconOn", ":", "mFavoriteIconOff", ")", ";", "onSetMessageFavorite", "(", "itemView", ".", "mMessageId", ",", "newFavorite", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "icicle", ")", "{", "super", ".", "onCreate", "(", "icicle", ")", ";", "startService", "(", "new", "Intent", "(", "this", ",", "SyncManager", ".", "class", ")", ")", ";", "Cursor", "c", "=", "null", ";", "try", "{", "c", "=", "getContentResolver", "(", ")", ".", "query", "(", "Account", ".", "CONTENT_URI", ",", "Account", ".", "ID_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "switch", "(", "c", ".", "getCount", "(", ")", ")", "{", "case", "0", ":", "AccountSetupBasics", ".", "actionNewAccount", "(", "this", ")", ";", "break", ";", "case", "1", ":", "c", ".", "moveToFirst", "(", ")", ";", "long", "accountId", "=", "c", ".", "getLong", "(", "Account", ".", "CONTENT_ID_COLUMN", ")", ";", "MessageList", ".", "actionHandleAccount", "(", "this", ",", "accountId", ",", "Mailbox", ".", "TYPE_INBOX", ")", ";", "break", ";", "default", ":", "AccountFolderList", ".", "actionShowAccounts", "(", "this", ")", ";", "break", ";", "}", "}", "finally", "{", "if", "(", "c", "!", "=", "null", ")", "{", "c", ".", "close", "(", ")", ";", "}", "}", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onCreate", "(", "savedInstanceState", ")", ";", "setContentView", "(", "R", ".", "layout", ".", "debug", ")", ";", "mPreferences", "=", "Preferences", ".", "getPreferences", "(", "this", ")", ";", "mVersionView", "=", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "version", ")", ";", "mEnableDebugLoggingView", "=", "(", "CheckBox", ")", "findViewById", "(", "R", ".", "id", ".", "debug_logging", ")", ";", "mEnableSensitiveLoggingView", "=", "(", "CheckBox", ")", "findViewById", "(", "R", ".", "id", ".", "sensitive_logging", ")", ";", "mEnableExchangeLoggingView", "=", "(", "CheckBox", ")", "findViewById", "(", "R", ".", "id", ".", "exchange_logging", ")", ";", "mEnableExchangeFileLoggingView", "=", "(", "CheckBox", ")", "findViewById", "(", "R", ".", "id", ".", "exchange_file_logging", ")", ";", "mEnableDebugLoggingView", ".", "setOnCheckedChangeListener", "(", "this", ")", ";", "mEnableSensitiveLoggingView", ".", "setOnCheckedChangeListener", "(", "this", ")", ";", "mEnableExchangeLoggingView", ".", "setOnCheckedChangeListener", "(", "this", ")", ";", "mEnableExchangeFileLoggingView", ".", "setOnCheckedChangeListener", "(", "this", ")", ";", "mVersionView", ".", "setText", "(", "String", ".", "format", "(", "getString", "(", "R", ".", "string", ".", "debug_version_fmt", ")", ".", "toString", "(", ")", ",", "getString", "(", "R", ".", "string", ".", "build_number", ")", ")", ")", ";", "mEnableDebugLoggingView", ".", "setChecked", "(", "Email", ".", "DEBUG", ")", ";", "mEnableSensitiveLoggingView", ".", "setChecked", "(", "Email", ".", "DEBUG_SENSITIVE", ")", ";", "mEnableExchangeLoggingView", ".", "setChecked", "(", "Eas", ".", "USER_LOG", ")", ";", "mEnableExchangeFileLoggingView", ".", "setChecked", "(", "Eas", ".", "FILE_LOG", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onCheckedChanged", "(", "CompoundButton", "buttonView", ",", "boolean", "isChecked", ")", "{", "switch", "(", "buttonView", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "debug_logging", ":", "Email", ".", "DEBUG", "=", "isChecked", ";", "mPreferences", ".", "setEnableDebugLogging", "(", "Email", ".", "DEBUG", ")", ";", "break", ";", "case", "R", ".", "id", ".", "sensitive_logging", ":", "Email", ".", "DEBUG_SENSITIVE", "=", "isChecked", ";", "mPreferences", ".", "setEnableSensitiveLogging", "(", "Email", ".", "DEBUG_SENSITIVE", ")", ";", "break", ";", "case", "R", ".", "id", ".", "exchange_logging", ":", "mPreferences", ".", "setEnableExchangeLogging", "(", "isChecked", ")", ";", "break", ";", "case", "R", ".", "id", ".", "exchange_file_logging", ":", "mPreferences", ".", "setEnableExchangeFileLogging", "(", "isChecked", ")", ";", "if", "(", "!", "isChecked", ")", "{", "FileLogger", ".", "close", "(", ")", ";", "}", "break", ";", "}", "int", "debugLogging", "=", "mPreferences", ".", "getEnableDebugLogging", "(", ")", "?", "Eas", ".", "DEBUG_BIT", ":", "0", ";", "int", "exchangeLogging", "=", "mPreferences", ".", "getEnableExchangeLogging", "(", ")", "?", "Eas", ".", "DEBUG_EXCHANGE_BIT", ":", "0", ";", "int", "fileLogging", "=", "mPreferences", ".", "getEnableExchangeFileLogging", "(", ")", "?", "Eas", ".", "DEBUG_FILE_BIT", ":", "0", ";", "int", "debugBits", "=", "debugLogging", "|", "exchangeLogging", "|", "fileLogging", ";", "Controller", ".", "getInstance", "(", "getApplication", "(", ")", ")", ".", "serviceLogging", "(", "debugBits", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onOptionsItemSelected", "(", "MenuItem", "item", ")", "{", "int", "id", "=", "item", ".", "getItemId", "(", ")", ";", "if", "(", "id", "=", "=", "R", ".", "id", ".", "dump_settings", ")", "{", "Preferences", ".", "getPreferences", "(", "this", ")", ".", "dump", "(", ")", ";", "return", "true", ";", "}", "return", "super", ".", "onOptionsItemSelected", "(", "item", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onCreateOptionsMenu", "(", "Menu", "menu", ")", "{", "super", ".", "onCreateOptionsMenu", "(", "menu", ")", ";", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "debug_option", ",", "menu", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "icicle", ")", "{", "super", ".", "onCreate", "(", "icicle", ")", ";", "if", "(", "!", "Intent", ".", "ACTION_CREATE_SHORTCUT", ".", "equals", "(", "getIntent", "(", ")", ".", "getAction", "(", ")", ")", ")", "{", "finish", "(", ")", ";", "return", ";", "}", "Cursor", "c", "=", "this", ".", "managedQuery", "(", "EmailContent", ".", "Account", ".", "CONTENT_URI", ",", "EmailContent", ".", "Account", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "if", "(", "c", ".", "getCount", "(", ")", "=", "=", "0", ")", "{", "finish", "(", ")", ";", "return", ";", "}", "setContentView", "(", "R", ".", "layout", ".", "accounts", ")", ";", "ListView", "listView", "=", "getListView", "(", ")", ";", "listView", ".", "setOnItemClickListener", "(", "this", ")", ";", "listView", ".", "setItemsCanFocus", "(", "false", ")", ";", "listView", ".", "setEmptyView", "(", "findViewById", "(", "R", ".", "id", ".", "empty", ")", ")", ";", "AccountsAdapter", "a", "=", "new", "AccountsAdapter", "(", "this", ",", "R", ".", "layout", ".", "accounts_item", ",", "c", ",", "sFromColumns", ",", "sToIds", ")", ";", "listView", ".", "setAdapter", "(", "a", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onItemClick", "(", "AdapterView", "<", "?", ">", "parent", ",", "View", "view", ",", "int", "position", ",", "long", "id", ")", "{", "Cursor", "cursor", "=", "(", "Cursor", ")", "parent", ".", "getItemAtPosition", "(", "position", ")", ";", "Account", "account", "=", "new", "Account", "(", ")", ".", "restore", "(", "cursor", ")", ";", "setupShortcut", "(", "account", ")", ";", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "public", "AccountsAdapter", "(", "Context", "context", ",", "int", "layout", ",", "Cursor", "c", ",", "String", "[", "]", "from", ",", "int", "[", "]", "to", ")", "{", "super", "(", "context", ",", "layout", ",", "c", ",", "from", ",", "to", ")", ";", "setViewBinder", "(", "new", "MyViewBinder", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "setViewValue", "(", "View", "view", ",", "Cursor", "cursor", ",", "int", "columnIndex", ")", "{", "if", "(", "view", ".", "getId", "(", ")", "=", "=", "R", ".", "id", ".", "new_message_count", ")", "{", "int", "unreadMessageCount", "=", "0", ";", "if", "(", "unreadMessageCount", "<", "=", "0", ")", "{", "view", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "else", "{", "(", "(", "TextView", ")", "view", ")", ".", "setText", "(", "String", ".", "valueOf", "(", "unreadMessageCount", ")", ")", ";", "}", "return", "true", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "private", "void", "setupShortcut", "(", "Account", "account", ")", "{", "Intent", "shortcutIntent", "=", "MessageList", ".", "actionHandleAccountUriIntent", "(", "this", ",", "account", ".", "mId", ",", "Mailbox", ".", "TYPE_INBOX", ")", ";", "Intent", "intent", "=", "new", "Intent", "(", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_SHORTCUT_INTENT", ",", "shortcutIntent", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_SHORTCUT_NAME", ",", "account", ".", "getDisplayName", "(", ")", ")", ";", "Parcelable", "iconResource", "=", "Intent", ".", "ShortcutIconResource", ".", "fromContext", "(", "this", ",", "R", ".", "drawable", ".", "icon", ")", ";", "intent", ".", "putExtra", "(", "Intent", ".", "EXTRA_SHORTCUT_ICON_RESOURCE", ",", "iconResource", ")", ";", "setResult", "(", "RESULT_OK", ",", "intent", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionHandleAccount", "(", "Context", "context", ",", "long", "accountId", ")", "{", "Intent", "intent", "=", "new", "Intent", "(", "context", ",", "MailboxList", ".", "class", ")", ";", "intent", ".", "addFlags", "(", "Intent", ".", "FLAG_ACTIVITY_CLEAR_TOP", ")", ";", "intent", ".", "putExtra", "(", "EXTRA_ACCOUNT_ID", ",", "accountId", ")", ";", "context", ".", "startActivity", "(", "intent", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "icicle", ")", "{", "super", ".", "onCreate", "(", "icicle", ")", ";", "requestWindowFeature", "(", "Window", ".", "FEATURE_CUSTOM_TITLE", ")", ";", "setContentView", "(", "R", ".", "layout", ".", "mailbox_list", ")", ";", "getWindow", "(", ")", ".", "setFeatureInt", "(", "Window", ".", "FEATURE_CUSTOM_TITLE", ",", "R", ".", "layout", ".", "list_title", ")", ";", "mListView", "=", "getListView", "(", ")", ";", "mProgressIcon", "=", "(", "ProgressBar", ")", "findViewById", "(", "R", ".", "id", ".", "title_progress_icon", ")", ";", "mErrorBanner", "=", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "connection_error_text", ")", ";", "mListView", ".", "setOnItemClickListener", "(", "this", ")", ";", "mListView", ".", "setItemsCanFocus", "(", "false", ")", ";", "registerForContextMenu", "(", "mListView", ")", ";", "mListAdapter", "=", "new", "MailboxListAdapter", "(", "this", ")", ";", "setListAdapter", "(", "mListAdapter", ")", ";", "mAccountId", "=", "getIntent", "(", ")", ".", "getLongExtra", "(", "EXTRA_ACCOUNT_ID", ",", "-", "1", ")", ";", "if", "(", "mAccountId", "!", "=", "-", "1", ")", "{", "mLoadMailboxesTask", "=", "new", "LoadMailboxesTask", "(", "mAccountId", ")", ";", "mLoadMailboxesTask", ".", "execute", "(", ")", ";", "}", "else", "{", "finish", "(", ")", ";", "}", "(", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "title_left_text", ")", ")", ".", "setText", "(", "R", ".", "string", ".", "mailbox_list_title", ")", ";", "mLoadAccountNameTask", "=", "new", "AsyncTask", "<", "Void", ",", "Void", ",", "String", ">", "(", ")", "{", "@", "Override", "protected", "String", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "String", "result", "=", "null", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "mAccountId", ")", ";", "Cursor", "c", "=", "MailboxList", ".", "this", ".", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "new", "String", "[", "]", "{", "AccountColumns", ".", "DISPLAY_NAME", "}", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "result", "=", "c", ".", "getString", "(", "0", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "return", "result", ";", "}", "@", "Override", "protected", "void", "onPostExecute", "(", "String", "result", ")", "{", "if", "(", "isCancelled", "(", ")", ")", "{", "return", ";", "}", "if", "(", "result", "=", "=", "null", ")", "{", "finish", "(", ")", ";", "}", "(", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "title_right_text", ")", ")", ".", "setText", "(", "result", ")", ";", "}", "}", ".", "execute", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "String", "result", "=", "null", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "mAccountId", ")", ";", "Cursor", "c", "=", "MailboxList", ".", "this", ".", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "new", "String", "[", "]", "{", "AccountColumns", ".", "DISPLAY_NAME", "}", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "result", "=", "c", ".", "getString", "(", "0", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "String", "result", ")", "{", "if", "(", "isCancelled", "(", ")", ")", "{", "return", ";", "}", "if", "(", "result", "=", "=", "null", ")", "{", "finish", "(", ")", ";", "}", "(", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "title_right_text", ")", ")", ".", "setText", "(", "result", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onPause", "(", ")", "{", "super", ".", "onPause", "(", ")", ";", "Controller", ".", "getInstance", "(", "getApplication", "(", ")", ")", ".", "removeResultCallback", "(", "mControllerCallback", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onResume", "(", ")", "{", "super", ".", "onResume", "(", ")", ";", "Controller", ".", "getInstance", "(", "getApplication", "(", ")", ")", ".", "addResultCallback", "(", "mControllerCallback", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onDestroy", "(", ")", "{", "super", ".", "onDestroy", "(", ")", ";", "if", "(", "mLoadMailboxesTask", "!", "=", "null", "&", "&", "mLoadMailboxesTask", ".", "getStatus", "(", ")", "!", "=", "LoadMailboxesTask", ".", "Status", ".", "FINISHED", ")", "{", "mLoadMailboxesTask", ".", "cancel", "(", "true", ")", ";", "mLoadMailboxesTask", "=", "null", ";", "}", "if", "(", "mLoadAccountNameTask", "!", "=", "null", "&", "&", "mLoadAccountNameTask", ".", "getStatus", "(", ")", "!", "=", "LoadMailboxesTask", ".", "Status", ".", "FINISHED", ")", "{", "mLoadAccountNameTask", ".", "cancel", "(", "true", ")", ";", "mLoadAccountNameTask", "=", "null", ";", "}", "}", "</s>"]
["<s>", "public", "void", "onItemClick", "(", "AdapterView", "<", "?", ">", "parent", ",", "View", "view", ",", "int", "position", ",", "long", "id", ")", "{", "onOpenMailbox", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "View", "v", ")", "{", "switch", "(", "v", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "button_compose", ":", "onCompose", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "button_refresh", ":", "onRefresh", "(", "-", "1", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onCreateOptionsMenu", "(", "Menu", "menu", ")", "{", "super", ".", "onCreateOptionsMenu", "(", "menu", ")", ";", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "mailbox_list_option", ",", "menu", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onOptionsItemSelected", "(", "MenuItem", "item", ")", "{", "switch", "(", "item", ".", "getItemId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "refresh", ":", "onRefresh", "(", "-", "1", ")", ";", "return", "true", ";", "case", "R", ".", "id", ".", "accounts", ":", "onAccounts", "(", ")", ";", "return", "true", ";", "case", "R", ".", "id", ".", "compose", ":", "onCompose", "(", ")", ";", "return", "true", ";", "case", "R", ".", "id", ".", "account_settings", ":", "onEditAccount", "(", ")", ";", "return", "true", ";", "default", ":", "return", "super", ".", "onOptionsItemSelected", "(", "item", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreateContextMenu", "(", "ContextMenu", "menu", ",", "View", "v", ",", "ContextMenuInfo", "info", ")", "{", "super", ".", "onCreateContextMenu", "(", "menu", ",", "v", ",", "info", ")", ";", "AdapterView", ".", "AdapterContextMenuInfo", "menuInfo", "=", "(", "AdapterView", ".", "AdapterContextMenuInfo", ")", "info", ";", "Cursor", "c", "=", "(", "Cursor", ")", "mListView", ".", "getItemAtPosition", "(", "menuInfo", ".", "position", ")", ";", "String", "folderName", "=", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "MailboxList", ".", "this", ")", ".", "getDisplayName", "(", "Integer", ".", "valueOf", "(", "c", ".", "getString", "(", "mListAdapter", ".", "COLUMN_TYPE", ")", ")", ")", ";", "if", "(", "folderName", "=", "=", "null", ")", "{", "folderName", "=", "c", ".", "getString", "(", "mListAdapter", ".", "COLUMN_DISPLAY_NAME", ")", ";", "}", "menu", ".", "setHeaderTitle", "(", "folderName", ")", ";", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "mailbox_list_context", ",", "menu", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onContextItemSelected", "(", "MenuItem", "item", ")", "{", "AdapterView", ".", "AdapterContextMenuInfo", "info", "=", "(", "AdapterView", ".", "AdapterContextMenuInfo", ")", "item", ".", "getMenuInfo", "(", ")", ";", "switch", "(", "item", ".", "getItemId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "refresh", ":", "onRefresh", "(", "info", ".", "id", ")", ";", "break", ";", "case", "R", ".", "id", ".", "open", ":", "onOpenMailbox", "(", "info", ".", "id", ")", ";", "break", ";", "}", "return", "super", ".", "onContextItemSelected", "(", "item", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onRefresh", "(", "long", "mailboxId", ")", "{", "Controller", "controller", "=", "Controller", ".", "getInstance", "(", "getApplication", "(", ")", ")", ";", "mHandler", ".", "progress", "(", "true", ")", ";", "if", "(", "mailboxId", ">", "=", "0", ")", "{", "controller", ".", "updateMailbox", "(", "mAccountId", ",", "mailboxId", ",", "mControllerCallback", ")", ";", "}", "else", "{", "controller", ".", "updateMailboxList", "(", "mAccountId", ",", "mControllerCallback", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onAccounts", "(", ")", "{", "AccountFolderList", ".", "actionShowAccounts", "(", "this", ")", ";", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onEditAccount", "(", ")", "{", "AccountSettings", ".", "actionSettings", "(", "this", ",", "mAccountId", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onOpenMailbox", "(", "long", "mailboxId", ")", "{", "MessageList", ".", "actionHandleMailbox", "(", "this", ",", "mailboxId", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onCompose", "(", ")", "{", "MessageCompose", ".", "actionCompose", "(", "this", ",", "mAccountId", ")", ";", "}", "</s>"]
["<s>", "public", "LoadMailboxesTask", "(", "long", "accountId", ")", "{", "mAccountKey", "=", "accountId", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Cursor", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "return", "MailboxList", ".", "this", ".", "managedQuery", "(", "EmailContent", ".", "Mailbox", ".", "CONTENT_URI", ",", "MailboxList", ".", "this", ".", "mListAdapter", ".", "PROJECTION", ",", "MAILBOX_SELECTION", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "mAccountKey", ")", "}", ",", "MailboxColumns", ".", "TYPE", "+", "\"", "<STR_LIT:U+002C>", "\"", "+", "MailboxColumns", ".", "DISPLAY_NAME", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Cursor", "cursor", ")", "{", "if", "(", "cursor", "=", "=", "null", "|", "|", "cursor", ".", "isClosed", "(", ")", ")", "{", "return", ";", "}", "MailboxList", ".", "this", ".", "mListAdapter", ".", "changeCursor", "(", "cursor", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "handleMessage", "(", "android", ".", "os", ".", "Message", "msg", ")", "{", "switch", "(", "msg", ".", "what", ")", "{", "case", "MSG_PROGRESS", ":", "boolean", "showProgress", "=", "(", "msg", ".", "arg1", "!", "=", "0", ")", ";", "if", "(", "showProgress", ")", "{", "mProgressIcon", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "else", "{", "mProgressIcon", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "break", ";", "case", "MSG_ERROR_BANNER", ":", "String", "message", "=", "(", "String", ")", "msg", ".", "obj", ";", "boolean", "isVisible", "=", "mErrorBanner", ".", "getVisibility", "(", ")", "=", "=", "View", ".", "VISIBLE", ";", "if", "(", "message", "!", "=", "null", ")", "{", "mErrorBanner", ".", "setText", "(", "message", ")", ";", "if", "(", "!", "isVisible", ")", "{", "mErrorBanner", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "mErrorBanner", ".", "startAnimation", "(", "AnimationUtils", ".", "loadAnimation", "(", "MailboxList", ".", "this", ",", "R", ".", "anim", ".", "header_appear", ")", ")", ";", "}", "}", "else", "{", "if", "(", "isVisible", ")", "{", "mErrorBanner", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "mErrorBanner", ".", "startAnimation", "(", "AnimationUtils", ".", "loadAnimation", "(", "MailboxList", ".", "this", ",", "R", ".", "anim", ".", "header_disappear", ")", ")", ";", "}", "}", "break", ";", "default", ":", "super", ".", "handleMessage", "(", "msg", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "progress", "(", "boolean", "progress", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", ")", ";", "msg", ".", "what", "=", "MSG_PROGRESS", ";", "msg", ".", "arg1", "=", "progress", "?", "1", ":", "0", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "showErrorBanner", "(", "String", "message", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", ")", ";", "msg", ".", "what", "=", "MSG_ERROR_BANNER", ";", "msg", ".", "obj", "=", "message", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "updateMailboxListCallback", "(", "MessagingException", "result", ",", "long", "accountKey", ",", "int", "progress", ")", "{", "if", "(", "accountKey", "=", "=", "mAccountId", ")", "{", "updateBanner", "(", "result", ",", "progress", ")", ";", "updateProgress", "(", "result", ",", "progress", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "updateMailboxCallback", "(", "MessagingException", "result", ",", "long", "accountKey", ",", "long", "mailboxKey", ",", "int", "progress", ",", "int", "numNewMessages", ")", "{", "if", "(", "accountKey", "=", "=", "mAccountId", ")", "{", "updateBanner", "(", "result", ",", "progress", ")", ";", "updateProgress", "(", "result", ",", "progress", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "loadMessageForViewCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "loadAttachmentCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "long", "attachmentId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "serviceCheckMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "mailboxId", ",", "int", "progress", ",", "long", "tag", ")", "{", "}", "</s>"]
["<s>", "public", "void", "sendMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "messageId", ",", "int", "progress", ")", "{", "if", "(", "accountId", "=", "=", "mAccountId", ")", "{", "updateBanner", "(", "result", ",", "progress", ")", ";", "updateProgress", "(", "result", ",", "progress", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "updateProgress", "(", "MessagingException", "result", ",", "int", "progress", ")", "{", "if", "(", "result", "!", "=", "null", "|", "|", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "mHandler", ".", "progress", "(", "false", ")", ";", "}", "else", "if", "(", "progress", "=", "=", "0", ")", "{", "mHandler", ".", "progress", "(", "true", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "updateBanner", "(", "MessagingException", "result", ",", "int", "progress", ")", "{", "if", "(", "result", "!", "=", "null", ")", "{", "int", "id", "=", "R", ".", "string", ".", "status_network_error", ";", "if", "(", "result", "instanceof", "AuthenticationFailedException", ")", "{", "id", "=", "R", ".", "string", ".", "account_setup_failed_dlg_auth_message", ";", "}", "else", "if", "(", "result", "instanceof", "CertificateValidationException", ")", "{", "id", "=", "R", ".", "string", ".", "account_setup_failed_dlg_certificate_message", ";", "}", "else", "{", "switch", "(", "result", ".", "getExceptionType", "(", ")", ")", "{", "case", "MessagingException", ".", "IOERROR", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_ioerror", ";", "break", ";", "case", "MessagingException", ".", "TLS_REQUIRED", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_tls_required", ";", "break", ";", "case", "MessagingException", ".", "AUTH_REQUIRED", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_auth_required", ";", "break", ";", "case", "MessagingException", ".", "GENERAL_SECURITY", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_security", ";", "break", ";", "}", "}", "mHandler", ".", "showErrorBanner", "(", "getString", "(", "id", ")", ")", ";", "}", "else", "if", "(", "progress", ">", "0", ")", "{", "mHandler", ".", "showErrorBanner", "(", "null", ")", ";", "}", "}", "</s>"]
["<s>", "public", "MailboxListAdapter", "(", "Context", "context", ")", "{", "super", "(", "context", ",", "null", ")", ";", "mContext", "=", "context", ";", "mInflater", "=", "(", "LayoutInflater", ")", "context", ".", "getSystemService", "(", "Context", ".", "LAYOUT_INFLATER_SERVICE", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "bindView", "(", "View", "view", ",", "Context", "context", ",", "Cursor", "cursor", ")", "{", "int", "type", "=", "cursor", ".", "getInt", "(", "COLUMN_TYPE", ")", ";", "String", "text", "=", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "context", ")", ".", "getDisplayName", "(", "type", ")", ";", "if", "(", "text", "=", "=", "null", ")", "{", "text", "=", "cursor", ".", "getString", "(", "COLUMN_DISPLAY_NAME", ")", ";", "}", "TextView", "nameView", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "mailbox_name", ")", ";", "if", "(", "text", "!", "=", "null", ")", "{", "nameView", ".", "setText", "(", "text", ")", ";", "}", "text", "=", "null", ";", "TextView", "statusView", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "mailbox_status", ")", ";", "if", "(", "text", "!", "=", "null", ")", "{", "statusView", ".", "setText", "(", "text", ")", ";", "statusView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "else", "{", "statusView", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "View", "chipView", "=", "view", ".", "findViewById", "(", "R", ".", "id", ".", "chip", ")", ";", "int", "chipResId", "=", "mColorChipResIds", "[", "(", "int", ")", "mAccountId", "%", "mColorChipResIds", ".", "length", "]", ";", "chipView", ".", "setBackgroundResource", "(", "chipResId", ")", ";", "int", "count", "=", "-", "1", ";", "text", "=", "cursor", ".", "getString", "(", "COLUMN_UNREAD_COUNT", ")", ";", "if", "(", "text", "!", "=", "null", ")", "{", "count", "=", "Integer", ".", "valueOf", "(", "text", ")", ";", "}", "TextView", "countView", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "new_message_count", ")", ";", "if", "(", "count", ">", "0", ")", "{", "nameView", ".", "setTypeface", "(", "Typeface", ".", "DEFAULT_BOLD", ")", ";", "countView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "countView", ".", "setText", "(", "text", ")", ";", "}", "else", "{", "nameView", ".", "setTypeface", "(", "Typeface", ".", "DEFAULT", ")", ";", "countView", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "switch", "(", "type", ")", "{", "case", "Mailbox", ".", "TYPE_DRAFTS", ":", "case", "Mailbox", ".", "TYPE_OUTBOX", ":", "case", "Mailbox", ".", "TYPE_SENT", ":", "case", "Mailbox", ".", "TYPE_TRASH", ":", "countView", ".", "setBackgroundResource", "(", "R", ".", "drawable", ".", "ind_sum", ")", ";", "break", ";", "default", ":", "countView", ".", "setBackgroundResource", "(", "R", ".", "drawable", ".", "ind_unread", ")", ";", "break", ";", "}", "countView", ".", "setPadding", "(", "<NUM_LIT:2>", ",", "0", ",", "<NUM_LIT:2>", ",", "0", ")", ";", "ImageView", "folderIcon", "=", "(", "ImageView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "folder_icon", ")", ";", "folderIcon", ".", "setImageDrawable", "(", "Utility", ".", "FolderProperties", ".", "getInstance", "(", "context", ")", ".", "getIconIds", "(", "type", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "View", "newView", "(", "Context", "context", ",", "Cursor", "cursor", ",", "ViewGroup", "parent", ")", "{", "return", "mInflater", ".", "inflate", "(", "R", ".", "layout", ".", "mailbox_list_item", ",", "parent", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "MessageListItem", "(", "Context", "context", ")", "{", "super", "(", "context", ")", ";", "}", "</s>"]
["<s>", "public", "MessageListItem", "(", "Context", "context", ",", "AttributeSet", "attrs", ")", "{", "super", "(", "context", ",", "attrs", ")", ";", "}", "</s>"]
["<s>", "public", "MessageListItem", "(", "Context", "context", ",", "AttributeSet", "attrs", ",", "int", "defStyle", ")", "{", "super", "(", "context", ",", "attrs", ",", "defStyle", ")", ";", "}", "</s>"]
["<s>", "public", "void", "bindViewInit", "(", "MessageList", ".", "MessageListAdapter", "adapter", ",", "boolean", "allowBatch", ")", "{", "mAdapter", "=", "adapter", ";", "mAllowBatch", "=", "allowBatch", ";", "mCachedViewPositions", "=", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onTouchEvent", "(", "MotionEvent", "event", ")", "{", "boolean", "handled", "=", "false", ";", "int", "touchX", "=", "(", "int", ")", "event", ".", "getX", "(", ")", ";", "if", "(", "!", "mCachedViewPositions", ")", "{", "float", "paddingScale", "=", "getContext", "(", ")", ".", "getResources", "(", ")", ".", "getDisplayMetrics", "(", ")", ".", "density", ";", "int", "checkPadding", "=", "(", "int", ")", "(", "(", "CHECKMARK_PAD", "*", "paddingScale", ")", "+", "<NUM_LIT>", ")", ";", "int", "starPadding", "=", "(", "int", ")", "(", "(", "STAR_PAD", "*", "paddingScale", ")", "+", "<NUM_LIT>", ")", ";", "mCheckRight", "=", "findViewById", "(", "R", ".", "id", ".", "selected", ")", ".", "getRight", "(", ")", "+", "checkPadding", ";", "mStarLeft", "=", "findViewById", "(", "R", ".", "id", ".", "favorite", ")", ".", "getLeft", "(", ")", "-", "starPadding", ";", "mCachedViewPositions", "=", "true", ";", "}", "switch", "(", "event", ".", "getAction", "(", ")", ")", "{", "case", "MotionEvent", ".", "ACTION_DOWN", ":", "mDownEvent", "=", "true", ";", "if", "(", "(", "mAllowBatch", "&", "&", "touchX", "<", "mCheckRight", ")", "|", "|", "touchX", ">", "mStarLeft", ")", "{", "handled", "=", "true", ";", "}", "break", ";", "case", "MotionEvent", ".", "ACTION_CANCEL", ":", "mDownEvent", "=", "false", ";", "break", ";", "case", "MotionEvent", ".", "ACTION_UP", ":", "if", "(", "mDownEvent", ")", "{", "if", "(", "mAllowBatch", "&", "&", "touchX", "<", "mCheckRight", ")", "{", "mSelected", "=", "!", "mSelected", ";", "mAdapter", ".", "updateSelected", "(", "this", ",", "mSelected", ")", ";", "handled", "=", "true", ";", "}", "else", "if", "(", "touchX", ">", "mStarLeft", ")", "{", "mFavorite", "=", "!", "mFavorite", ";", "mAdapter", ".", "updateFavorite", "(", "this", ",", "mFavorite", ")", ";", "handled", "=", "true", ";", "}", "}", "break", ";", "}", "if", "(", "handled", ")", "{", "postInvalidate", "(", ")", ";", "}", "else", "{", "handled", "=", "super", ".", "onTouchEvent", "(", "event", ")", ";", "}", "return", "handled", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "handleMessage", "(", "android", ".", "os", ".", "Message", "msg", ")", "{", "switch", "(", "msg", ".", "what", ")", "{", "case", "MSG_PROGRESS", ":", "setProgressBarIndeterminateVisibility", "(", "msg", ".", "arg1", "!", "=", "0", ")", ";", "break", ";", "case", "MSG_DATA_CHANGED", ":", "mAdapter", ".", "notifyDataSetChanged", "(", ")", ";", "break", ";", "case", "MSG_FOLDER_LOADING", ":", "{", "FolderInfoHolder", "folder", "=", "mAdapter", ".", "getFolder", "(", "(", "String", ")", "msg", ".", "obj", ")", ";", "if", "(", "folder", "!", "=", "null", ")", "{", "folder", ".", "loading", "=", "msg", ".", "arg1", "!", "=", "0", ";", "mAdapter", ".", "notifyDataSetChanged", "(", ")", ";", "}", "break", ";", "}", "case", "MSG_REMOVE_MESSAGE", ":", "{", "FolderInfoHolder", "folder", "=", "(", "FolderInfoHolder", ")", "(", "(", "Object", "[", "]", ")", "msg", ".", "obj", ")", "[", "0", "]", ";", "MessageInfoHolder", "message", "=", "(", "MessageInfoHolder", ")", "(", "(", "Object", "[", "]", ")", "msg", ".", "obj", ")", "[", "1", "]", ";", "folder", ".", "messages", ".", "remove", "(", "message", ")", ";", "mAdapter", ".", "notifyDataSetChanged", "(", ")", ";", "break", ";", "}", "case", "MSG_SYNC_MESSAGES", ":", "{", "String", "folderName", "=", "(", "String", ")", "(", "(", "Object", "[", "]", ")", "msg", ".", "obj", ")", "[", "0", "]", ";", "Message", "[", "]", "messages", "=", "(", "Message", "[", "]", ")", "(", "(", "Object", "[", "]", ")", "msg", ".", "obj", ")", "[", "1", "]", ";", "FolderInfoHolder", "folder", "=", "mAdapter", ".", "getFolder", "(", "folderName", ")", ";", "if", "(", "folder", "=", "=", "null", ")", "{", "return", ";", "}", "folder", ".", "messages", ".", "clear", "(", ")", ";", "for", "(", "Message", "message", ":", "messages", ")", "{", "mAdapter", ".", "addOrUpdateMessage", "(", "folder", ",", "message", ",", "false", ",", "false", ")", ";", "}", "Collections", ".", "sort", "(", "folder", ".", "messages", ")", ";", "mAdapter", ".", "notifyDataSetChanged", "(", ")", ";", "break", ";", "}", "case", "MSG_FOLDER_STATUS", ":", "{", "String", "folderName", "=", "(", "String", ")", "(", "(", "Object", "[", "]", ")", "msg", ".", "obj", ")", "[", "0", "]", ";", "String", "status", "=", "(", "String", ")", "(", "(", "Object", "[", "]", ")", "msg", ".", "obj", ")", "[", "1", "]", ";", "int", "forceRefresh", "=", "msg", ".", "arg1", ";", "FolderInfoHolder", "folder", "=", "mAdapter", ".", "getFolder", "(", "folderName", ")", ";", "if", "(", "folder", "!", "=", "null", ")", "{", "folder", ".", "status", "=", "status", ";", "if", "(", "forceRefresh", "!", "=", "0", ")", "{", "folder", ".", "lastChecked", "=", "0", ";", "}", "mAdapter", ".", "notifyDataSetChanged", "(", ")", ";", "}", "break", ";", "}", "case", "MSG_NEW_MESSAGE", ":", "{", "String", "folder", "=", "(", "String", ")", "(", "(", "Object", "[", "]", ")", "msg", ".", "obj", ")", "[", "0", "]", ";", "Message", "message", "=", "(", "Message", ")", "(", "(", "Object", "[", "]", ")", "msg", ".", "obj", ")", "[", "1", "]", ";", "mAdapter", ".", "addOrUpdateMessage", "(", "folder", ",", "message", ")", ";", "break", ";", "}", "case", "MSG_REMOVE_MESSAGE_UID", ":", "{", "String", "folder", "=", "(", "String", ")", "(", "(", "Object", "[", "]", ")", "msg", ".", "obj", ")", "[", "0", "]", ";", "String", "messageUid", "=", "(", "String", ")", "(", "(", "Object", "[", "]", ")", "msg", ".", "obj", ")", "[", "1", "]", ";", "mAdapter", ".", "removeMessage", "(", "folder", ",", "messageUid", ")", ";", "break", ";", "}", "case", "MSG_MESSAGE_UID_CHANGED", ":", "{", "String", "folder", "=", "(", "String", ")", "(", "(", "Object", "[", "]", ")", "msg", ".", "obj", ")", "[", "0", "]", ";", "String", "oldUid", "=", "(", "String", ")", "(", "(", "Object", "[", "]", ")", "msg", ".", "obj", ")", "[", "1", "]", ";", "String", "newUid", "=", "(", "String", ")", "(", "(", "Object", "[", "]", ")", "msg", ".", "obj", ")", "[", "<NUM_LIT:2>", "]", ";", "FolderInfoHolder", "holder", "=", "mAdapter", ".", "getFolder", "(", "folder", ")", ";", "if", "(", "folder", "!", "=", "null", ")", "{", "for", "(", "MessageInfoHolder", "message", ":", "holder", ".", "messages", ")", "{", "if", "(", "message", ".", "uid", ".", "equals", "(", "oldUid", ")", ")", "{", "message", ".", "uid", "=", "newUid", ";", "message", ".", "message", ".", "setUid", "(", "newUid", ")", ";", "}", "}", "}", "break", ";", "}", "case", "MSG_LIST_FOLDERS_FINISHED", ":", "{", "doRefreshOpenMailbox", "(", ")", ";", "break", ";", "}", "default", ":", "super", ".", "handleMessage", "(", "msg", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "synchronizeMessages", "(", "String", "folder", ",", "Message", "[", "]", "messages", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", ")", ";", "msg", ".", "what", "=", "MSG_SYNC_MESSAGES", ";", "msg", ".", "obj", "=", "new", "Object", "[", "]", "{", "folder", ",", "messages", "}", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "removeMessage", "(", "FolderInfoHolder", "folder", ",", "MessageInfoHolder", "message", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "new", "android", ".", "os", ".", "Message", "(", ")", ";", "msg", ".", "what", "=", "MSG_REMOVE_MESSAGE", ";", "msg", ".", "obj", "=", "new", "Object", "[", "]", "{", "folder", ",", "message", "}", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "folderLoading", "(", "String", "folder", ",", "boolean", "loading", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "new", "android", ".", "os", ".", "Message", "(", ")", ";", "msg", ".", "what", "=", "MSG_FOLDER_LOADING", ";", "msg", ".", "arg1", "=", "loading", "?", "1", ":", "0", ";", "msg", ".", "obj", "=", "folder", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "progress", "(", "boolean", "progress", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "new", "android", ".", "os", ".", "Message", "(", ")", ";", "msg", ".", "what", "=", "MSG_PROGRESS", ";", "msg", ".", "arg1", "=", "progress", "?", "1", ":", "0", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "dataChanged", "(", ")", "{", "sendEmptyMessage", "(", "MSG_DATA_CHANGED", ")", ";", "}", "</s>"]
["<s>", "public", "void", "folderStatus", "(", "String", "folder", ",", "String", "status", ",", "boolean", "forceRefresh", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "new", "android", ".", "os", ".", "Message", "(", ")", ";", "msg", ".", "what", "=", "MSG_FOLDER_STATUS", ";", "msg", ".", "obj", "=", "new", "String", "[", "]", "{", "folder", ",", "status", "}", ";", "msg", ".", "arg1", "=", "forceRefresh", "?", "1", ":", "0", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "newMessage", "(", "String", "folder", ",", "Message", "message", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", ")", ";", "msg", ".", "what", "=", "MSG_NEW_MESSAGE", ";", "msg", ".", "obj", "=", "new", "Object", "[", "]", "{", "folder", ",", "message", "}", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "removeMessageByUid", "(", "String", "folder", ",", "String", "messageUid", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", ")", ";", "msg", ".", "what", "=", "MSG_REMOVE_MESSAGE_UID", ";", "msg", ".", "obj", "=", "new", "Object", "[", "]", "{", "folder", ",", "messageUid", "}", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "messageUidChanged", "(", "String", "folder", ",", "String", "oldUid", ",", "String", "newUid", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", ")", ";", "msg", ".", "what", "=", "MSG_MESSAGE_UID_CHANGED", ";", "msg", ".", "obj", "=", "new", "Object", "[", "]", "{", "folder", ",", "oldUid", ",", "newUid", "}", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "listFoldersFinished", "(", ")", "{", "sendEmptyMessage", "(", "MSG_LIST_FOLDERS_FINISHED", ")", ";", "}", "</s>"]
["<s>", "public", "FolderUpdateWorker", "(", "String", "folder", ",", "boolean", "synchronizeRemote", ",", "MessagingListener", "listener", ",", "EmailContent", ".", "Account", "account", ",", "MessagingController", "controller", ")", "{", "mFolder", "=", "folder", ";", "mSynchronizeRemote", "=", "synchronizeRemote", ";", "mListener", "=", "listener", ";", "mAccount", "=", "account", ";", "mController", "=", "controller", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "static", "void", "actionHandleAccount", "(", "Context", "context", ",", "long", "id", ")", "{", "actionHandleAccount", "(", "context", ",", "id", ",", "null", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "static", "void", "actionHandleAccount", "(", "Context", "context", ",", "long", "id", ",", "String", "initialFolder", ")", "{", "Intent", "intent", "=", "new", "Intent", "(", "context", ",", "FolderMessageList", ".", "class", ")", ";", "intent", ".", "putExtra", "(", "EXTRA_ACCOUNT_ID", ",", "id", ")", ";", "if", "(", "initialFolder", "!", "=", "null", ")", "{", "intent", ".", "putExtra", "(", "EXTRA_INITIAL_FOLDER", ",", "initialFolder", ")", ";", "}", "context", ".", "startActivity", "(", "intent", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "static", "Intent", "actionHandleAccountIntent", "(", "Context", "context", ",", "long", "id", ",", "String", "initialFolder", ")", "{", "Intent", "intent", "=", "new", "Intent", "(", "context", ",", "FolderMessageList", ".", "class", ")", ";", "intent", ".", "putExtra", "(", "EXTRA_ACCOUNT_ID", ",", "id", ")", ";", "intent", ".", "putExtra", "(", "EXTRA_CLEAR_NOTIFICATION", ",", "true", ")", ";", "if", "(", "initialFolder", "!", "=", "null", ")", "{", "intent", ".", "putExtra", "(", "EXTRA_INITIAL_FOLDER", ",", "initialFolder", ")", ";", "}", "return", "intent", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "static", "Intent", "actionHandleAccountUriIntent", "(", "Context", "context", ",", "long", "id", ",", "String", "initialFolder", ")", "{", "Intent", "i", "=", "actionHandleAccountIntent", "(", "context", ",", "id", ",", "initialFolder", ")", ";", "i", ".", "removeExtra", "(", "EXTRA_ACCOUNT_ID", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Account", ".", "CONTENT_URI", ",", "id", ")", ";", "i", ".", "setData", "(", "uri", ")", ";", "return", "i", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onCreate", "(", "savedInstanceState", ")", ";", "requestWindowFeature", "(", "Window", ".", "FEATURE_INDETERMINATE_PROGRESS", ")", ";", "mDateFormat", "=", "android", ".", "text", ".", "format", ".", "DateFormat", ".", "getDateFormat", "(", "this", ")", ";", "mTimeFormat", "=", "android", ".", "text", ".", "format", ".", "DateFormat", ".", "getTimeFormat", "(", "this", ")", ";", "mListView", "=", "getExpandableListView", "(", ")", ";", "mListView", ".", "setScrollBarStyle", "(", "View", ".", "SCROLLBARS_OUTSIDE_INSET", ")", ";", "mListView", ".", "setLongClickable", "(", "true", ")", ";", "registerForContextMenu", "(", "mListView", ")", ";", "mListView", ".", "setSaveEnabled", "(", "false", ")", ";", "getExpandableListView", "(", ")", ".", "setGroupIndicator", "(", "getResources", "(", ")", ".", "getDrawable", "(", "R", ".", "drawable", ".", "expander_ic_folder", ")", ")", ";", "mInflater", "=", "getLayoutInflater", "(", ")", ";", "Intent", "intent", "=", "getIntent", "(", ")", ";", "mAccountId", "=", "intent", ".", "getLongExtra", "(", "EXTRA_ACCOUNT_ID", ",", "-", "1", ")", ";", "mAccount", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "this", ",", "mAccountId", ")", ";", "if", "(", "mAccount", "=", "=", "null", ")", "{", "Uri", "uri", "=", "intent", ".", "getData", "(", ")", ";", "if", "(", "uri", "!", "=", "null", ")", "{", "}", "}", "if", "(", "mAccount", "=", "=", "null", ")", "{", "AccountFolderList", ".", "actionShowAccounts", "(", "this", ")", ";", "finish", "(", ")", ";", "return", ";", "}", "if", "(", "savedInstanceState", "=", "=", "null", ")", "{", "mInitialFolder", "=", "intent", ".", "getStringExtra", "(", "EXTRA_INITIAL_FOLDER", ")", ";", "}", "colorChipResId", "=", "colorChipResIds", "[", "(", "int", ")", "mAccountId", "%", "colorChipResIds", ".", "length", "]", ";", "mSyncWindowUser", "=", "mAccount", ".", "getSyncLookback", "(", ")", "=", "=", "EmailContent", ".", "Account", ".", "SYNC_WINDOW_USER", ";", "mControllerCallback", "=", "new", "ControllerResults", "(", ")", ";", "mMessagingListener", "=", "new", "NewMessagingListener", "(", ")", ";", "mLoadMailboxesTask", "=", "(", "LoadMailBoxesTask", ")", "new", "LoadMailBoxesTask", "(", "savedInstanceState", ")", ";", "mLoadMailboxesTask", ".", "execute", "(", ")", ";", "setTitle", "(", "mAccount", ".", "getDisplayName", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onRestoreListState", "(", "Bundle", "savedInstanceState", ")", "{", "final", "int", "expandedGroup", "=", "savedInstanceState", ".", "getInt", "(", "STATE_KEY_EXPANDED_GROUP", ",", "-", "1", ")", ";", "if", "(", "expandedGroup", ">", "=", "0", "&", "&", "mAdapter", ".", "getGroupCount", "(", ")", ">", "expandedGroup", ")", "{", "mListView", ".", "expandGroup", "(", "expandedGroup", ")", ";", "long", "selectedChild", "=", "savedInstanceState", ".", "getLong", "(", "STATE_KEY_EXPANDED_GROUP_SELECTION", ",", "-", "1", ")", ";", "if", "(", "selectedChild", "!", "=", "ExpandableListView", ".", "PACKED_POSITION_VALUE_NULL", ")", "{", "mListView", ".", "setSelection", "(", "mListView", ".", "getFlatListPosition", "(", "selectedChild", ")", ")", ";", "}", "}", "mListView", ".", "onRestoreInstanceState", "(", "savedInstanceState", ".", "getParcelable", "(", "STATE_KEY_LIST", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "onRetainNonConfigurationInstance", "(", ")", "{", "return", "mAdapter", "!", "=", "null", "?", "mAdapter", ".", "mFolders", ":", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onPause", "(", ")", "{", "super", ".", "onPause", "(", ")", ";", "MessagingController", ".", "getInstance", "(", "getApplication", "(", ")", ")", ".", "removeListener", "(", "mMessagingListener", ")", ";", "Controller", ".", "getInstance", "(", "getApplication", "(", ")", ")", ".", "removeResultCallback", "(", "mControllerCallback", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onResume", "(", ")", "{", "super", ".", "onResume", "(", ")", ";", "NotificationManager", "notifMgr", "=", "(", "NotificationManager", ")", "getSystemService", "(", "Context", ".", "NOTIFICATION_SERVICE", ")", ";", "notifMgr", ".", "cancel", "(", "1", ")", ";", "Controller", ".", "getInstance", "(", "getApplication", "(", ")", ")", ".", "addResultCallback", "(", "mControllerCallback", ")", ";", "MessagingController", ".", "getInstance", "(", "getApplication", "(", ")", ")", ".", "addListener", "(", "mMessagingListener", ")", ";", "mAccount", ".", "refresh", "(", "this", ")", ";", "onRefresh", "(", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onSaveInstanceState", "(", "Bundle", "outState", ")", "{", "super", ".", "onSaveInstanceState", "(", "outState", ")", ";", "outState", ".", "putParcelable", "(", "STATE_KEY_LIST", ",", "mListView", ".", "onSaveInstanceState", "(", ")", ")", ";", "outState", ".", "putInt", "(", "STATE_KEY_EXPANDED_GROUP", ",", "mExpandedGroup", ")", ";", "outState", ".", "putLong", "(", "STATE_KEY_EXPANDED_GROUP_SELECTION", ",", "mListView", ".", "getSelectedPosition", "(", ")", ")", ";", "outState", ".", "putBoolean", "(", "STATE_KEY_REFRESH_REMOTE", ",", "mRefreshRemote", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onDestroy", "(", ")", "{", "super", ".", "onDestroy", "(", ")", ";", "if", "(", "mLoadMailboxesTask", "!", "=", "null", "&", "&", "mLoadMailboxesTask", ".", "getStatus", "(", ")", "!", "=", "AsyncTask", ".", "Status", ".", "FINISHED", ")", "{", "mLoadMailboxesTask", ".", "cancel", "(", "true", ")", ";", "mLoadMailboxesTask", "=", "null", ";", "}", "if", "(", "mLoadMessagesTask", "!", "=", "null", "&", "&", "mLoadMessagesTask", ".", "getStatus", "(", ")", "!", "=", "AsyncTask", ".", "Status", ".", "FINISHED", ")", "{", "mLoadMessagesTask", ".", "cancel", "(", "true", ")", ";", "mLoadMessagesTask", "=", "null", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onGroupCollapse", "(", "int", "groupPosition", ")", "{", "super", ".", "onGroupCollapse", "(", "groupPosition", ")", ";", "mExpandedGroup", "=", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onGroupExpand", "(", "int", "groupPosition", ")", "{", "super", ".", "onGroupExpand", "(", "groupPosition", ")", ";", "Cursor", "groupCursor", "=", "mNewAdapter", ".", "getGroup", "(", "groupPosition", ")", ";", "long", "mailboxKey", "=", "groupCursor", ".", "getLong", "(", "EmailContent", ".", "Mailbox", ".", "CONTENT_ID_COLUMN", ")", ";", "MessageList", ".", "actionHandleMailbox", "(", "this", ",", "mailboxKey", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onChildClick", "(", "ExpandableListView", "parent", ",", "View", "v", ",", "int", "groupPosition", ",", "int", "childPosition", ",", "long", "id", ")", "{", "onOpenMessage", "(", "groupPosition", ",", "childPosition", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "private", "void", "onRefresh", "(", "final", "boolean", "forceRemote", ")", "{", "if", "(", "forceRemote", ")", "{", "mRefreshRemote", "=", "true", ";", "}", "if", "(", "mRefreshRemote", ")", "{", "mHandler", ".", "progress", "(", "true", ")", ";", "Controller", ".", "getInstance", "(", "getApplication", "(", ")", ")", ".", "updateMailboxList", "(", "mAccount", ".", "mId", ",", "mControllerCallback", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "doRefreshOpenMailbox", "(", ")", "{", "if", "(", "this", ".", "mExpandedGroup", "!", "=", "-", "1", ")", "{", "Cursor", "mailboxCursor", "=", "mNewAdapter", ".", "getGroup", "(", "mExpandedGroup", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "updateMailboxListCallback", "(", "MessagingException", "result", ",", "long", "accountKey", ",", "int", "progress", ")", "{", "mHandler", ".", "progress", "(", "false", ")", ";", "mHandler", ".", "listFoldersFinished", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "updateMailboxCallback", "(", "MessagingException", "result", ",", "long", "accountKey", ",", "long", "mailboxKey", ",", "int", "progress", ",", "int", "numNewMessages", ")", "{", "mHandler", ".", "progress", "(", "false", ")", ";", "if", "(", "result", "!", "=", "null", "|", "|", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "Email", ".", "updateMailboxRefreshTime", "(", "mailboxKey", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "loadMessageForViewCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "loadAttachmentCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "long", "attachmentId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "serviceCheckMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "mailboxId", ",", "int", "progress", ",", "long", "tag", ")", "{", "}", "</s>"]
["<s>", "public", "void", "sendMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "messageId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "@", "Deprecated", "private", "void", "onOpenMessage", "(", "FolderInfoHolder", "folder", ",", "MessageInfoHolder", "message", ")", "{", "if", "(", "!", "message", ".", "read", ")", "{", "message", ".", "read", "=", "true", ";", "mHandler", ".", "dataChanged", "(", ")", ";", "}", "if", "(", "folder", ".", "drafts", ")", "{", "}", "else", "{", "ArrayList", "<", "String", ">", "folderUids", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "for", "(", "MessageInfoHolder", "holder", ":", "folder", ".", "messages", ")", "{", "folderUids", ".", "add", "(", "holder", ".", "uid", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "onOpenMessage", "(", "int", "groupPosition", ",", "int", "childPosition", ")", "{", "Cursor", "mailboxCursor", "=", "mNewAdapter", ".", "getGroup", "(", "groupPosition", ")", ";", "Cursor", "messageCursor", "=", "mNewAdapter", ".", "getChild", "(", "groupPosition", ",", "childPosition", ")", ";", "int", "mailboxTypeColumn", "=", "mailboxCursor", ".", "getColumnIndex", "(", "EmailContent", ".", "MailboxColumns", ".", "TYPE", ")", ";", "int", "mailboxType", "=", "mailboxCursor", ".", "getInt", "(", "mailboxTypeColumn", ")", ";", "if", "(", "mailboxType", "=", "=", "EmailContent", ".", "Mailbox", ".", "TYPE_DRAFTS", ")", "{", "}", "else", "{", "int", "messageIdColumn", "=", "messageCursor", ".", "getColumnIndex", "(", "EmailContent", ".", "RECORD_ID", ")", ";", "long", "messageId", "=", "messageCursor", ".", "getLong", "(", "messageIdColumn", ")", ";", "MessageView", ".", "actionView", "(", "this", ",", "messageId", ",", "-", "1", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onEditAccount", "(", ")", "{", "mRefreshRemote", "=", "true", ";", "AccountSettings", ".", "actionSettings", "(", "this", ",", "mAccountId", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onAccounts", "(", ")", "{", "AccountFolderList", ".", "actionShowAccounts", "(", "this", ")", ";", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onCompose", "(", ")", "{", "MessageCompose", ".", "actionCompose", "(", "this", ",", "mAccountId", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onDelete", "(", "MessageInfoHolder", "holder", ")", "{", "mAdapter", ".", "removeMessage", "(", "holder", ".", "message", ".", "getFolder", "(", ")", ".", "getName", "(", ")", ",", "holder", ".", "uid", ")", ";", "Toast", ".", "makeText", "(", "this", ",", "R", ".", "string", ".", "message_deleted_toast", ",", "Toast", ".", "LENGTH_SHORT", ")", ".", "show", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onReply", "(", "MessageInfoHolder", "holder", ")", "{", "}", "</s>"]
["<s>", "private", "void", "onReplyAll", "(", "MessageInfoHolder", "holder", ")", "{", "}", "</s>"]
["<s>", "private", "void", "onForward", "(", "MessageInfoHolder", "holder", ")", "{", "}", "</s>"]
["<s>", "private", "void", "onToggleRead", "(", "MessageInfoHolder", "holder", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onOptionsItemSelected", "(", "MenuItem", "item", ")", "{", "switch", "(", "item", ".", "getItemId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "refresh", ":", "onRefresh", "(", "true", ")", ";", "return", "true", ";", "case", "R", ".", "id", ".", "accounts", ":", "onAccounts", "(", ")", ";", "return", "true", ";", "case", "R", ".", "id", ".", "compose", ":", "onCompose", "(", ")", ";", "return", "true", ";", "case", "R", ".", "id", ".", "account_settings", ":", "onEditAccount", "(", ")", ";", "return", "true", ";", "default", ":", "return", "super", ".", "onOptionsItemSelected", "(", "item", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onCreateOptionsMenu", "(", "Menu", "menu", ")", "{", "super", ".", "onCreateOptionsMenu", "(", "menu", ")", ";", "getMenuInflater", "(", ")", ".", "inflate", "(", "R", ".", "menu", ".", "folder_message_list_option", ",", "menu", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onContextItemSelected", "(", "MenuItem", "item", ")", "{", "ExpandableListContextMenuInfo", "info", "=", "(", "ExpandableListContextMenuInfo", ")", "item", ".", "getMenuInfo", "(", ")", ";", "int", "groupPosition", "=", "ExpandableListView", ".", "getPackedPositionGroup", "(", "info", ".", "packedPosition", ")", ";", "int", "childPosition", "=", "ExpandableListView", ".", "getPackedPositionChild", "(", "info", ".", "packedPosition", ")", ";", "if", "(", "childPosition", "<", "mAdapter", ".", "getChildrenCount", "(", "groupPosition", ")", ")", "{", "switch", "(", "item", ".", "getItemId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "open", ":", "onOpenMessage", "(", "groupPosition", ",", "childPosition", ")", ";", "break", ";", "}", "}", "return", "super", ".", "onContextItemSelected", "(", "item", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreateContextMenu", "(", "ContextMenu", "menu", ",", "View", "v", ",", "ContextMenuInfo", "menuInfo", ")", "{", "super", ".", "onCreateContextMenu", "(", "menu", ",", "v", ",", "menuInfo", ")", ";", "ExpandableListContextMenuInfo", "info", "=", "(", "ExpandableListContextMenuInfo", ")", "menuInfo", ";", "if", "(", "ExpandableListView", ".", "getPackedPositionType", "(", "info", ".", "packedPosition", ")", "=", "=", "ExpandableListView", ".", "PACKED_POSITION_TYPE_CHILD", ")", "{", "long", "packedPosition", "=", "info", ".", "packedPosition", ";", "int", "groupPosition", "=", "ExpandableListView", ".", "getPackedPositionGroup", "(", "packedPosition", ")", ";", "int", "childPosition", "=", "ExpandableListView", ".", "getPackedPositionChild", "(", "packedPosition", ")", ";", "}", "}", "</s>"]
["<s>", "public", "LoadMailBoxesTask", "(", "Bundle", "savedInstanceState", ")", "{", "super", "(", ")", ";", "mSavedInstanceState", "=", "savedInstanceState", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Cursor", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "return", "FolderMessageList", ".", "this", ".", "managedQuery", "(", "Mailbox", ".", "CONTENT_URI", ",", "Mailbox", ".", "CONTENT_PROJECTION", ",", "MailboxColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "TYPE", "+", "<CHAR_LIT>", "+", "Mailbox", ".", "TYPE_NOT_EMAIL", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "FolderMessageList", ".", "this", ".", "mAccountId", ")", "}", ",", "MailboxColumns", ".", "TYPE", "+", "<CHAR_LIT:U+002C>", "+", "MailboxColumns", ".", "DISPLAY_NAME", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Cursor", "cursor", ")", "{", "if", "(", "DBG_LOG_CURSORS", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "String", ".", "valueOf", "(", "cursor", ".", "getCount", "(", ")", ")", ")", ";", "}", "FolderMessageList", ".", "this", ".", "mNewAdapter", "=", "new", "NewFolderMessageListAdapter", "(", "cursor", ",", "FolderMessageList", ".", "this", ",", "mDateFormat", ",", "mTimeFormat", ")", ";", "mListView", ".", "setAdapter", "(", "FolderMessageList", ".", "this", ".", "mNewAdapter", ")", ";", "if", "(", "mSavedInstanceState", "!", "=", "null", ")", "{", "mRestoringState", "=", "true", ";", "onRestoreListState", "(", "mSavedInstanceState", ")", ";", "mRestoringState", "=", "false", ";", "mRefreshRemote", "|", "=", "mSavedInstanceState", ".", "getBoolean", "(", "STATE_KEY_REFRESH_REMOTE", ")", ";", "}", "if", "(", "cursor", ".", "getCount", "(", ")", "=", "=", "0", ")", "{", "FolderMessageList", ".", "this", ".", "onRefresh", "(", "true", ")", ";", "}", "if", "(", "DBG_ADD_CONTENT", ")", "{", "if", "(", "cursor", ".", "getCount", "(", ")", "<", "<NUM_LIT:4>", ")", "{", "EmailContent", ".", "Mailbox", "box", "=", "new", "EmailContent", ".", "Mailbox", "(", ")", ";", "box", ".", "mDisplayName", "=", "\"", "<STR_LIT>", "\"", ";", "box", ".", "mAccountKey", "=", "FolderMessageList", ".", "this", ".", "mAccountId", ";", "box", ".", "mType", "=", "EmailContent", ".", "Mailbox", ".", "TYPE_INBOX", ";", "box", ".", "mUnreadCount", "=", "<NUM_LIT:100>", ";", "box", ".", "mFlagVisible", "=", "true", ";", "box", ".", "save", "(", "FolderMessageList", ".", "this", ")", ";", "long", "mailbox1Id", "=", "box", ".", "mId", ";", "box", "=", "new", "EmailContent", ".", "Mailbox", "(", ")", ";", "box", ".", "mDisplayName", "=", "\"", "<STR_LIT>", "\"", ";", "box", ".", "mAccountKey", "=", "FolderMessageList", ".", "this", ".", "mAccountId", ";", "box", ".", "mType", "=", "EmailContent", ".", "Mailbox", ".", "TYPE_MAIL", ";", "box", ".", "mUnreadCount", "=", "<NUM_LIT>", ";", "box", ".", "mFlagVisible", "=", "true", ";", "box", ".", "save", "(", "FolderMessageList", ".", "this", ")", ";", "long", "mailbox2Id", "=", "box", ".", "mId", ";", "box", "=", "new", "EmailContent", ".", "Mailbox", "(", ")", ";", "box", ".", "mDisplayName", "=", "\"", "<STR_LIT>", "\"", ";", "box", ".", "mAccountKey", "=", "FolderMessageList", ".", "this", ".", "mAccountId", ";", "box", ".", "mType", "=", "EmailContent", ".", "Mailbox", ".", "TYPE_MAIL", ";", "box", ".", "mUnreadCount", "=", "<NUM_LIT>", ";", "box", ".", "mFlagVisible", "=", "true", ";", "box", ".", "save", "(", "FolderMessageList", ".", "this", ")", ";", "long", "mailbox3Id", "=", "box", ".", "mId", ";", "box", "=", "new", "EmailContent", ".", "Mailbox", "(", ")", ";", "box", ".", "mDisplayName", "=", "\"", "<STR_LIT>", "\"", ";", "box", ".", "mAccountKey", "=", "FolderMessageList", ".", "this", ".", "mAccountId", "+", "1", ";", "box", ".", "mType", "=", "EmailContent", ".", "Mailbox", ".", "TYPE_INBOX", ";", "box", ".", "mUnreadCount", "=", "<NUM_LIT>", ";", "box", ".", "mFlagVisible", "=", "true", ";", "box", ".", "save", "(", "FolderMessageList", ".", "this", ")", ";", "EmailContent", ".", "Message", "msg", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "msg", ".", "mDisplayName", "=", "\"", "<STR_LIT>", "\"", ";", "msg", ".", "mTimeStamp", "=", "<NUM_LIT>", ";", "msg", ".", "mSubject", "=", "\"", "<STR_LIT>", "\"", ";", "msg", ".", "mMailboxKey", "=", "mailbox1Id", ";", "msg", ".", "mAccountKey", "=", "FolderMessageList", ".", "this", ".", "mAccountId", ";", "msg", ".", "mFrom", "=", "\"", "<STR_LIT>", "\"", ";", "msg", ".", "save", "(", "FolderMessageList", ".", "this", ")", ";", "msg", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "msg", ".", "mDisplayName", "=", "\"", "<STR_LIT>", "\"", ";", "msg", ".", "mTimeStamp", "=", "<NUM_LIT>", ";", "msg", ".", "mSubject", "=", "\"", "<STR_LIT>", "\"", ";", "msg", ".", "mMailboxKey", "=", "mailbox1Id", ";", "msg", ".", "mAccountKey", "=", "FolderMessageList", ".", "this", ".", "mAccountId", ";", "msg", ".", "mFrom", "=", "\"", "<STR_LIT>", "\"", ";", "msg", ".", "save", "(", "FolderMessageList", ".", "this", ")", ";", "msg", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "msg", ".", "mDisplayName", "=", "\"", "<STR_LIT>", "\"", ";", "msg", ".", "mTimeStamp", "=", "<NUM_LIT>", ";", "msg", ".", "mSubject", "=", "\"", "<STR_LIT>", "\"", ";", "msg", ".", "mMailboxKey", "=", "mailbox1Id", ";", "msg", ".", "mAccountKey", "=", "FolderMessageList", ".", "this", ".", "mAccountId", ";", "msg", ".", "mFrom", "=", "\"", "<STR_LIT>", "\"", ";", "msg", ".", "save", "(", "FolderMessageList", ".", "this", ")", ";", "msg", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "msg", ".", "mDisplayName", "=", "\"", "<STR_LIT>", "\"", ";", "msg", ".", "mTimeStamp", "=", "<NUM_LIT>", ";", "msg", ".", "mSubject", "=", "\"", "<STR_LIT>", "\"", ";", "msg", ".", "mMailboxKey", "=", "mailbox2Id", ";", "msg", ".", "mAccountKey", "=", "FolderMessageList", ".", "this", ".", "mAccountId", ";", "msg", ".", "mFrom", "=", "\"", "<STR_LIT>", "\"", ";", "msg", ".", "save", "(", "FolderMessageList", ".", "this", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "LoadMessagesTask", "(", "int", "groupNumber", ",", "long", "mailboxKey", ")", "{", "mGroupNumber", "=", "groupNumber", ";", "mMailboxKey", "=", "mailboxKey", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Cursor", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "return", "FolderMessageList", ".", "this", ".", "managedQuery", "(", "EmailContent", ".", "Message", ".", "CONTENT_URI", ",", "EmailContent", ".", "Message", ".", "CONTENT_PROJECTION", ",", "EmailContent", ".", "MessageColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "String", ".", "valueOf", "(", "FolderMessageList", ".", "this", ".", "mAccountId", ")", ",", "String", ".", "valueOf", "(", "mMailboxKey", ")", "}", ",", "EmailContent", ".", "MessageColumns", ".", "TIMESTAMP", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Cursor", "cursor", ")", "{", "if", "(", "DBG_LOG_CURSORS", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "String", ".", "valueOf", "(", "cursor", ".", "getCount", "(", ")", ")", ")", ";", "}", "if", "(", "mGroupNumber", "=", "=", "FolderMessageList", ".", "this", ".", "mExpandedGroup", ")", "{", "FolderMessageList", ".", "this", ".", "mNewAdapter", ".", "setChildrenCursor", "(", "mGroupNumber", ",", "cursor", ")", ";", "doRefreshOpenMailbox", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "NewFolderMessageListAdapter", "(", "Cursor", "cursor", ",", "Context", "context", ",", "DateFormat", "dateFormat", ",", "DateFormat", "timeFormat", ")", "{", "super", "(", "cursor", ",", "context", ")", ";", "mContext", "=", "context", ";", "mInflater", "=", "(", "LayoutInflater", ")", "context", ".", "getSystemService", "(", "Context", ".", "LAYOUT_INFLATER_SERVICE", ")", ";", "mDateFormat", "=", "dateFormat", ";", "mTimeFormat", "=", "timeFormat", ";", "mFolderNameColumn", "=", "cursor", ".", "getColumnIndexOrThrow", "(", "EmailContent", ".", "MailboxColumns", ".", "DISPLAY_NAME", ")", ";", "mFolderUnreadCountColumn", "=", "cursor", ".", "getColumnIndexOrThrow", "(", "EmailContent", ".", "MailboxColumns", ".", "UNREAD_COUNT", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Cursor", "getChildrenCursor", "(", "Cursor", "groupCursor", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "notifyDataSetChanged", "(", ")", "{", "notifyDataSetChanged", "(", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "bindChildView", "(", "View", "view", ",", "Context", "context", ",", "Cursor", "cursor", ",", "boolean", "isLastChild", ")", "{", "if", "(", "!", "haveChildColumns", ")", "{", "mChildReadFlagColumn", "=", "cursor", ".", "getColumnIndexOrThrow", "(", "EmailContent", ".", "MessageColumns", ".", "FLAG_READ", ")", ";", "mChildDisplayNameColumn", "=", "cursor", ".", "getColumnIndexOrThrow", "(", "EmailContent", ".", "MessageColumns", ".", "DISPLAY_NAME", ")", ";", "mChildDateColumn", "=", "cursor", ".", "getColumnIndexOrThrow", "(", "EmailContent", ".", "MessageColumns", ".", "TIMESTAMP", ")", ";", "mChildSubjectColumn", "=", "cursor", ".", "getColumnIndexOrThrow", "(", "EmailContent", ".", "MessageColumns", ".", "SUBJECT", ")", ";", "haveChildColumns", "=", "true", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "sChildToIds", ".", "length", ";", "i", "+", "+", ")", "{", "View", "v", "=", "view", ".", "findViewById", "(", "sChildToIds", "[", "i", "]", ")", ";", "String", "text", "=", "null", ";", "switch", "(", "v", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "chip", ":", "boolean", "readFlag", "=", "cursor", ".", "getInt", "(", "mChildReadFlagColumn", ")", "!", "=", "0", ";", "v", ".", "getBackground", "(", ")", ".", "setAlpha", "(", "readFlag", "?", "0", ":", "<NUM_LIT:255>", ")", ";", "break", ";", "case", "R", ".", "id", ".", "from", ":", "text", "=", "cursor", ".", "getString", "(", "mChildDisplayNameColumn", ")", ";", "break", ";", "case", "R", ".", "id", ".", "date", ":", "long", "timestamp", "=", "cursor", ".", "getLong", "(", "mChildDateColumn", ")", ";", "Date", "date", "=", "new", "Date", "(", "timestamp", ")", ";", "if", "(", "Utility", ".", "isDateToday", "(", "date", ")", ")", "{", "text", "=", "mTimeFormat", ".", "format", "(", "date", ")", ";", "}", "else", "{", "text", "=", "mDateFormat", ".", "format", "(", "date", ")", ";", "}", "break", ";", "case", "R", ".", "id", ".", "subject", ":", "text", "=", "cursor", ".", "getString", "(", "mChildSubjectColumn", ")", ";", "break", ";", "}", "if", "(", "text", "!", "=", "null", ")", "(", "(", "TextView", ")", "v", ")", ".", "setText", "(", "text", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "bindGroupView", "(", "View", "view", ",", "Context", "context", ",", "Cursor", "cursor", ",", "boolean", "isExpanded", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "sGroupToIds", ".", "length", ";", "i", "+", "+", ")", "{", "View", "v", "=", "view", ".", "findViewById", "(", "sGroupToIds", "[", "i", "]", ")", ";", "String", "text", "=", "null", ";", "switch", "(", "v", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "folder_name", ":", "text", "=", "cursor", ".", "getString", "(", "mFolderNameColumn", ")", ";", "break", ";", "case", "R", ".", "id", ".", "folder_status", ":", "v", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "break", ";", "case", "R", ".", "id", ".", "new_message_count", ":", "text", "=", "cursor", ".", "getString", "(", "mFolderUnreadCountColumn", ")", ";", "break", ";", "}", "if", "(", "text", "!", "=", "null", ")", "(", "(", "TextView", ")", "v", ")", ".", "setText", "(", "text", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "View", "newChildView", "(", "Context", "context", ",", "Cursor", "cursor", ",", "boolean", "isLastChild", ",", "ViewGroup", "parent", ")", "{", "return", "mInflater", ".", "inflate", "(", "R", ".", "layout", ".", "folder_message_list_child", ",", "parent", ",", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "View", "newGroupView", "(", "Context", "context", ",", "Cursor", "cursor", ",", "boolean", "isExpanded", ",", "ViewGroup", "parent", ")", "{", "return", "mInflater", ".", "inflate", "(", "R", ".", "layout", ".", "folder_message_list_group", ",", "parent", ",", "false", ")", ";", "}", "</s>"]
["<s>", "FolderMessageListAdapter", "(", ")", "{", "mAttachmentIcon", "=", "getResources", "(", ")", ".", "getDrawable", "(", "R", ".", "drawable", ".", "ic_mms_attachment_small", ")", ";", "}", "</s>"]
["<s>", "private", "void", "setSpecialFolderInfo", "(", "FolderInfoHolder", "holder", ")", "{", "String", "folderName", "=", "holder", ".", "name", ";", "holder", ".", "special", "=", "true", ";", "}", "</s>"]
["<s>", "public", "void", "doListFoldersFinished", "(", ")", "{", "if", "(", "mInitialFolder", "!", "=", "null", ")", "{", "int", "groupPosition", "=", "getFolderPosition", "(", "mInitialFolder", ")", ";", "mInitialFolder", "=", "null", ";", "if", "(", "groupPosition", "!", "=", "-", "1", ")", "{", "mListView", ".", "expandGroup", "(", "groupPosition", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "removeMessage", "(", "String", "folder", ",", "String", "messageUid", ")", "{", "FolderInfoHolder", "f", "=", "getFolder", "(", "folder", ")", ";", "if", "(", "f", "=", "=", "null", ")", "{", "return", ";", "}", "MessageInfoHolder", "m", "=", "getMessage", "(", "f", ",", "messageUid", ")", ";", "if", "(", "m", "=", "=", "null", ")", "{", "return", ";", "}", "mHandler", ".", "removeMessage", "(", "f", ",", "m", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addOrUpdateMessage", "(", "String", "folder", ",", "Message", "message", ")", "{", "addOrUpdateMessage", "(", "folder", ",", "message", ",", "true", ",", "true", ")", ";", "}", "</s>"]
["<s>", "private", "void", "addOrUpdateMessage", "(", "FolderInfoHolder", "folder", ",", "Message", "message", ",", "boolean", "sort", ",", "boolean", "notify", ")", "{", "MessageInfoHolder", "m", "=", "getMessage", "(", "folder", ",", "message", ".", "getUid", "(", ")", ")", ";", "if", "(", "m", "=", "=", "null", ")", "{", "m", "=", "new", "MessageInfoHolder", "(", "message", ",", "folder", ",", "mDateFormat", ",", "mTimeFormat", ")", ";", "folder", ".", "messages", ".", "add", "(", "m", ")", ";", "}", "else", "{", "m", ".", "populate", "(", "message", ",", "folder", ")", ";", "}", "if", "(", "sort", ")", "{", "Collections", ".", "sort", "(", "folder", ".", "messages", ")", ";", "}", "if", "(", "notify", ")", "{", "mHandler", ".", "dataChanged", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "addOrUpdateMessage", "(", "String", "folder", ",", "Message", "message", ",", "boolean", "sort", ",", "boolean", "notify", ")", "{", "FolderInfoHolder", "f", "=", "getFolder", "(", "folder", ")", ";", "if", "(", "f", "=", "=", "null", ")", "{", "return", ";", "}", "addOrUpdateMessage", "(", "f", ",", "message", ",", "sort", ",", "notify", ")", ";", "}", "</s>"]
["<s>", "public", "MessageInfoHolder", "getMessage", "(", "FolderInfoHolder", "folder", ",", "String", "messageUid", ")", "{", "for", "(", "MessageInfoHolder", "message", ":", "folder", ".", "messages", ")", "{", "if", "(", "message", ".", "uid", ".", "equals", "(", "messageUid", ")", ")", "{", "return", "message", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "int", "getGroupCount", "(", ")", "{", "return", "mFolders", ".", "size", "(", ")", ";", "}", "</s>"]
["<s>", "public", "long", "getGroupId", "(", "int", "groupPosition", ")", "{", "return", "groupPosition", ";", "}", "</s>"]
["<s>", "public", "Object", "getGroup", "(", "int", "groupPosition", ")", "{", "return", "mFolders", ".", "get", "(", "groupPosition", ")", ";", "}", "</s>"]
["<s>", "public", "FolderInfoHolder", "getFolder", "(", "String", "folder", ")", "{", "FolderInfoHolder", "folderHolder", "=", "null", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "getGroupCount", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "FolderInfoHolder", "holder", "=", "(", "FolderInfoHolder", ")", "getGroup", "(", "i", ")", ";", "if", "(", "holder", ".", "name", ".", "equals", "(", "folder", ")", ")", "{", "folderHolder", "=", "holder", ";", "}", "}", "return", "folderHolder", ";", "}", "</s>"]
["<s>", "public", "int", "getFolderPosition", "(", "String", "folder", ")", "{", "for", "(", "int", "i", "=", "0", ",", "count", "=", "getGroupCount", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "FolderInfoHolder", "holder", "=", "(", "FolderInfoHolder", ")", "getGroup", "(", "i", ")", ";", "if", "(", "holder", ".", "name", ".", "equals", "(", "folder", ")", ")", "{", "return", "i", ";", "}", "}", "return", "-", "1", ";", "}", "</s>"]
["<s>", "public", "View", "getGroupView", "(", "int", "groupPosition", ",", "boolean", "isExpanded", ",", "View", "convertView", ",", "ViewGroup", "parent", ")", "{", "FolderInfoHolder", "folder", "=", "(", "FolderInfoHolder", ")", "getGroup", "(", "groupPosition", ")", ";", "View", "view", ";", "if", "(", "convertView", "!", "=", "null", ")", "{", "view", "=", "convertView", ";", "}", "else", "{", "view", "=", "mInflater", ".", "inflate", "(", "R", ".", "layout", ".", "folder_message_list_group", ",", "parent", ",", "false", ")", ";", "}", "FolderViewHolder", "holder", "=", "(", "FolderViewHolder", ")", "view", ".", "getTag", "(", ")", ";", "if", "(", "holder", "=", "=", "null", ")", "{", "holder", "=", "new", "FolderViewHolder", "(", ")", ";", "holder", ".", "folderName", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "folder_name", ")", ";", "holder", ".", "newMessageCount", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "new_message_count", ")", ";", "holder", ".", "folderStatus", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "folder_status", ")", ";", "view", ".", "setTag", "(", "holder", ")", ";", "}", "holder", ".", "folderName", ".", "setText", "(", "folder", ".", "displayName", ")", ";", "if", "(", "folder", ".", "status", "=", "=", "null", ")", "{", "holder", ".", "folderStatus", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "else", "{", "holder", ".", "folderStatus", ".", "setText", "(", "folder", ".", "status", ")", ";", "holder", ".", "folderStatus", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "if", "(", "(", "folder", ".", "inbox", "|", "|", "!", "folder", ".", "special", ")", "&", "&", "folder", ".", "unreadMessageCount", "!", "=", "0", ")", "{", "holder", ".", "newMessageCount", ".", "setText", "(", "Integer", ".", "toString", "(", "folder", ".", "unreadMessageCount", ")", ")", ";", "holder", ".", "newMessageCount", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "else", "if", "(", "(", "folder", ".", "outbox", "|", "|", "folder", ".", "drafts", ")", "&", "&", "folder", ".", "messageCount", ">", "0", ")", "{", "holder", ".", "newMessageCount", ".", "setText", "(", "Integer", ".", "toString", "(", "folder", ".", "messageCount", ")", ")", ";", "holder", ".", "newMessageCount", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "else", "{", "holder", ".", "newMessageCount", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "return", "view", ";", "}", "</s>"]
["<s>", "public", "int", "getChildrenCount", "(", "int", "groupPosition", ")", "{", "FolderInfoHolder", "folder", "=", "(", "FolderInfoHolder", ")", "getGroup", "(", "groupPosition", ")", ";", "return", "folder", ".", "messages", ".", "size", "(", ")", "+", "1", ";", "}", "</s>"]
["<s>", "public", "long", "getChildId", "(", "int", "groupPosition", ",", "int", "childPosition", ")", "{", "FolderInfoHolder", "folder", "=", "(", "FolderInfoHolder", ")", "getGroup", "(", "groupPosition", ")", ";", "if", "(", "childPosition", "<", "folder", ".", "messages", ".", "size", "(", ")", ")", "{", "MessageInfoHolder", "holder", "=", "folder", ".", "messages", ".", "get", "(", "childPosition", ")", ";", "return", "(", "(", "LocalStore", ".", "LocalMessage", ")", "holder", ".", "message", ")", ".", "getId", "(", ")", ";", "}", "else", "{", "return", "-", "1", ";", "}", "}", "</s>"]
["<s>", "public", "Object", "getChild", "(", "int", "groupPosition", ",", "int", "childPosition", ")", "{", "FolderInfoHolder", "folder", "=", "(", "FolderInfoHolder", ")", "getGroup", "(", "groupPosition", ")", ";", "return", "folder", ".", "messages", ".", "get", "(", "childPosition", ")", ";", "}", "</s>"]
["<s>", "public", "View", "getChildView", "(", "int", "groupPosition", ",", "int", "childPosition", ",", "boolean", "isLastChild", ",", "View", "convertView", ",", "ViewGroup", "parent", ")", "{", "FolderInfoHolder", "folder", "=", "(", "FolderInfoHolder", ")", "getGroup", "(", "groupPosition", ")", ";", "if", "(", "isLastChild", ")", "{", "View", "view", ";", "if", "(", "(", "convertView", "!", "=", "null", ")", "&", "&", "(", "convertView", ".", "getId", "(", ")", "=", "=", "R", ".", "layout", ".", "folder_message_list_child_footer", ")", ")", "{", "view", "=", "convertView", ";", "}", "else", "{", "view", "=", "mInflater", ".", "inflate", "(", "R", ".", "layout", ".", "folder_message_list_child_footer", ",", "parent", ",", "false", ")", ";", "view", ".", "setId", "(", "R", ".", "layout", ".", "folder_message_list_child_footer", ")", ";", "}", "FooterViewHolder", "holder", "=", "(", "FooterViewHolder", ")", "view", ".", "getTag", "(", ")", ";", "if", "(", "holder", "=", "=", "null", ")", "{", "holder", "=", "new", "FooterViewHolder", "(", ")", ";", "holder", ".", "progress", "=", "(", "ProgressBar", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "progress", ")", ";", "holder", ".", "main", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "main_text", ")", ";", "view", ".", "setTag", "(", "holder", ")", ";", "}", "if", "(", "folder", ".", "loading", ")", "{", "if", "(", "folder", ".", "outbox", ")", "{", "holder", ".", "main", ".", "setText", "(", "R", ".", "string", ".", "status_sending_messages", ")", ";", "}", "else", "{", "holder", ".", "main", ".", "setText", "(", "R", ".", "string", ".", "status_loading_more", ")", ";", "}", "holder", ".", "progress", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "else", "{", "if", "(", "folder", ".", "status", "=", "=", "null", ")", "{", "if", "(", "folder", ".", "outbox", ")", "{", "holder", ".", "main", ".", "setText", "(", "R", ".", "string", ".", "message_list_send_pending_messages_action", ")", ";", "}", "else", "{", "if", "(", "mSyncWindowUser", ")", "{", "holder", ".", "main", ".", "setText", "(", "R", ".", "string", ".", "message_list_load_more_messages_action", ")", ";", "}", "else", "{", "holder", ".", "main", ".", "setText", "(", "R", ".", "string", ".", "refresh_action", ")", ";", "}", "}", "}", "else", "{", "if", "(", "folder", ".", "outbox", ")", "{", "holder", ".", "main", ".", "setText", "(", "R", ".", "string", ".", "status_sending_messages_failed", ")", ";", "}", "else", "{", "holder", ".", "main", ".", "setText", "(", "R", ".", "string", ".", "status_loading_more_failed", ")", ";", "}", "}", "holder", ".", "progress", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "return", "view", ";", "}", "else", "{", "MessageInfoHolder", "message", "=", "(", "MessageInfoHolder", ")", "getChild", "(", "groupPosition", ",", "childPosition", ")", ";", "View", "view", ";", "if", "(", "(", "convertView", "!", "=", "null", ")", "&", "&", "(", "convertView", ".", "getId", "(", ")", "!", "=", "R", ".", "layout", ".", "folder_message_list_child_footer", ")", ")", "{", "view", "=", "convertView", ";", "}", "else", "{", "view", "=", "mInflater", ".", "inflate", "(", "R", ".", "layout", ".", "folder_message_list_child", ",", "parent", ",", "false", ")", ";", "}", "MessageViewHolder", "holder", "=", "(", "MessageViewHolder", ")", "view", ".", "getTag", "(", ")", ";", "if", "(", "holder", "=", "=", "null", ")", "{", "holder", "=", "new", "MessageViewHolder", "(", ")", ";", "holder", ".", "subject", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "subject", ")", ";", "holder", ".", "from", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "from", ")", ";", "holder", ".", "date", "=", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "date", ")", ";", "holder", ".", "chip", "=", "view", ".", "findViewById", "(", "R", ".", "id", ".", "chip", ")", ";", "holder", ".", "chip", ".", "setBackgroundResource", "(", "colorChipResId", ")", ";", "view", ".", "setTag", "(", "holder", ")", ";", "}", "holder", ".", "chip", ".", "getBackground", "(", ")", ".", "setAlpha", "(", "message", ".", "read", "?", "0", ":", "<NUM_LIT:255>", ")", ";", "holder", ".", "subject", ".", "setText", "(", "message", ".", "subject", ")", ";", "holder", ".", "subject", ".", "setTypeface", "(", "null", ",", "message", ".", "read", "?", "Typeface", ".", "NORMAL", ":", "Typeface", ".", "BOLD", ")", ";", "holder", ".", "from", ".", "setText", "(", "message", ".", "sender", ")", ";", "holder", ".", "from", ".", "setTypeface", "(", "null", ",", "message", ".", "read", "?", "Typeface", ".", "NORMAL", ":", "Typeface", ".", "BOLD", ")", ";", "holder", ".", "date", ".", "setText", "(", "message", ".", "date", ")", ";", "holder", ".", "from", ".", "setCompoundDrawablesWithIntrinsicBounds", "(", "null", ",", "null", ",", "message", ".", "hasAttachments", "?", "mAttachmentIcon", ":", "null", ",", "null", ")", ";", "return", "view", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "hasStableIds", "(", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "public", "boolean", "isChildSelectable", "(", "int", "groupPosition", ",", "int", "childPosition", ")", "{", "return", "childPosition", "<", "getChildrenCount", "(", "groupPosition", ")", ";", "}", "</s>"]
["<s>", "public", "int", "compareTo", "(", "FolderInfoHolder", "o", ")", "{", "String", "s1", "=", "this", ".", "name", ";", "String", "s2", "=", "o", ".", "name", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "s1", ")", ")", "{", "return", "-", "1", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "s2", ")", ")", "{", "return", "1", ";", "}", "else", "return", "s1", ".", "toUpperCase", "(", ")", ".", "compareTo", "(", "s2", ".", "toUpperCase", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MessageInfoHolder", "(", "Message", "m", ",", "FolderInfoHolder", "folder", ",", "DateFormat", "formatForDate", ",", "DateFormat", "formatForTime", ")", "{", "mDateFormat", "=", "formatForDate", ";", "mTimeFormat", "=", "formatForTime", ";", "populate", "(", "m", ",", "folder", ")", ";", "}", "</s>"]
["<s>", "public", "void", "populate", "(", "Message", "m", ",", "FolderInfoHolder", "folder", ")", "{", "try", "{", "LocalMessage", "message", "=", "(", "LocalMessage", ")", "m", ";", "Date", "date", "=", "message", ".", "getSentDate", "(", ")", ";", "this", ".", "compareDate", "=", "date", ";", "if", "(", "Utility", ".", "isDateToday", "(", "date", ")", ")", "{", "this", ".", "date", "=", "mTimeFormat", ".", "format", "(", "date", ")", ";", "}", "else", "{", "this", ".", "date", "=", "mDateFormat", ".", "format", "(", "date", ")", ";", "}", "this", ".", "hasAttachments", "=", "message", ".", "getAttachmentCount", "(", ")", ">", "0", ";", "this", ".", "read", "=", "message", ".", "isSet", "(", "Flag", ".", "SEEN", ")", ";", "if", "(", "folder", ".", "outbox", "|", "|", "folder", ".", "drafts", "|", "|", "folder", ".", "sent", ")", "{", "this", ".", "sender", "=", "Address", ".", "toFriendly", "(", "message", ".", "getRecipients", "(", "RecipientType", ".", "TO", ")", ")", ";", "}", "else", "{", "this", ".", "sender", "=", "Address", ".", "toFriendly", "(", "message", ".", "getFrom", "(", ")", ")", ";", "}", "this", ".", "subject", "=", "message", ".", "getSubject", "(", ")", ";", "this", ".", "uid", "=", "message", ".", "getUid", "(", ")", ";", "this", ".", "message", "=", "m", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "Email", ".", "LOGD", ")", "{", "Log", ".", "v", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ",", "me", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "int", "compareTo", "(", "MessageInfoHolder", "o", ")", "{", "return", "this", ".", "compareDate", ".", "compareTo", "(", "o", ".", "compareDate", ")", "*", "-", "1", ";", "}", "</s>"]
["<s>", "public", "static", "void", "commitSettings", "(", "Context", "context", ",", "EmailContent", ".", "Account", "account", ")", "{", "if", "(", "!", "account", ".", "isSaved", "(", ")", ")", "{", "account", ".", "save", "(", "context", ")", ";", "}", "else", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "AccountColumns", ".", "IS_DEFAULT", ",", "account", ".", "mIsDefault", ")", ";", "cv", ".", "put", "(", "AccountColumns", ".", "DISPLAY_NAME", ",", "account", ".", "getDisplayName", "(", ")", ")", ";", "cv", ".", "put", "(", "AccountColumns", ".", "SENDER_NAME", ",", "account", ".", "getSenderName", "(", ")", ")", ";", "cv", ".", "put", "(", "AccountColumns", ".", "SYNC_INTERVAL", ",", "account", ".", "mSyncInterval", ")", ";", "cv", ".", "put", "(", "AccountColumns", ".", "RINGTONE_URI", ",", "account", ".", "mRingtoneUri", ")", ";", "cv", ".", "put", "(", "AccountColumns", ".", "FLAGS", ",", "account", ".", "mFlags", ")", ";", "cv", ".", "put", "(", "AccountColumns", ".", "SYNC_LOOKBACK", ",", "account", ".", "mSyncLookback", ")", ";", "account", ".", "update", "(", "context", ",", "cv", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "actionOutgoingSettings", "(", "Activity", "fromActivity", ",", "EmailContent", ".", "Account", "account", ",", "boolean", "makeDefault", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSetupOutgoing", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "i", ".", "putExtra", "(", "EXTRA_MAKE_DEFAULT", ",", "makeDefault", ")", ";", "fromActivity", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionEditOutgoingSettings", "(", "Activity", "fromActivity", ",", "EmailContent", ".", "Account", "account", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSetupOutgoing", ".", "class", ")", ";", "i", ".", "setAction", "(", "Intent", ".", "ACTION_EDIT", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "fromActivity", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onCreate", "(", "savedInstanceState", ")", ";", "setContentView", "(", "R", ".", "layout", ".", "account_setup_outgoing", ")", ";", "mUsernameView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_username", ")", ";", "mPasswordView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_password", ")", ";", "mServerView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_server", ")", ";", "mPortView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_port", ")", ";", "mRequireLoginView", "=", "(", "CheckBox", ")", "findViewById", "(", "R", ".", "id", ".", "account_require_login", ")", ";", "mRequireLoginSettingsView", "=", "(", "ViewGroup", ")", "findViewById", "(", "R", ".", "id", ".", "account_require_login_settings", ")", ";", "mSecurityTypeView", "=", "(", "Spinner", ")", "findViewById", "(", "R", ".", "id", ".", "account_security_type", ")", ";", "mNextButton", "=", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "next", ")", ";", "mNextButton", ".", "setOnClickListener", "(", "this", ")", ";", "mRequireLoginView", ".", "setOnCheckedChangeListener", "(", "this", ")", ";", "SpinnerOption", "securityTypes", "[", "]", "=", "{", "new", "SpinnerOption", "(", "0", ",", "getString", "(", "R", ".", "string", ".", "account_setup_incoming_security_none_label", ")", ")", ",", "new", "SpinnerOption", "(", "1", ",", "getString", "(", "R", ".", "string", ".", "account_setup_incoming_security_ssl_label", ")", ")", ",", "new", "SpinnerOption", "(", "<NUM_LIT:2>", ",", "getString", "(", "R", ".", "string", ".", "account_setup_incoming_security_ssl_trust_certificates_label", ")", ")", ",", "new", "SpinnerOption", "(", "<NUM_LIT:3>", ",", "getString", "(", "R", ".", "string", ".", "account_setup_incoming_security_tls_label", ")", ")", ",", "new", "SpinnerOption", "(", "<NUM_LIT:4>", ",", "getString", "(", "R", ".", "string", ".", "account_setup_incoming_security_tls_trust_certificates_label", ")", ")", ",", "}", ";", "ArrayAdapter", "<", "SpinnerOption", ">", "securityTypesAdapter", "=", "new", "ArrayAdapter", "<", "SpinnerOption", ">", "(", "this", ",", "android", ".", "R", ".", "layout", ".", "simple_spinner_item", ",", "securityTypes", ")", ";", "securityTypesAdapter", ".", "setDropDownViewResource", "(", "android", ".", "R", ".", "layout", ".", "simple_spinner_dropdown_item", ")", ";", "mSecurityTypeView", ".", "setAdapter", "(", "securityTypesAdapter", ")", ";", "mSecurityTypeView", ".", "setOnItemSelectedListener", "(", "new", "AdapterView", ".", "OnItemSelectedListener", "(", ")", "{", "public", "void", "onItemSelected", "(", "AdapterView", "arg0", ",", "View", "arg1", ",", "int", "arg2", ",", "long", "arg3", ")", "{", "updatePortFromSecurityType", "(", ")", ";", "}", "public", "void", "onNothingSelected", "(", "AdapterView", "<", "?", ">", "arg0", ")", "{", "}", "}", ")", ";", "TextWatcher", "validationTextWatcher", "=", "new", "TextWatcher", "(", ")", "{", "public", "void", "afterTextChanged", "(", "Editable", "s", ")", "{", "validateFields", "(", ")", ";", "}", "public", "void", "beforeTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "count", ",", "int", "after", ")", "{", "}", "public", "void", "onTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "before", ",", "int", "count", ")", "{", "}", "}", ";", "mUsernameView", ".", "addTextChangedListener", "(", "validationTextWatcher", ")", ";", "mPasswordView", ".", "addTextChangedListener", "(", "validationTextWatcher", ")", ";", "mServerView", ".", "addTextChangedListener", "(", "validationTextWatcher", ")", ";", "mPortView", ".", "addTextChangedListener", "(", "validationTextWatcher", ")", ";", "mPortView", ".", "setKeyListener", "(", "DigitsKeyListener", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "mAccount", "=", "(", "EmailContent", ".", "Account", ")", "getIntent", "(", ")", ".", "getParcelableExtra", "(", "EXTRA_ACCOUNT", ")", ";", "mMakeDefault", "=", "getIntent", "(", ")", ".", "getBooleanExtra", "(", "EXTRA_MAKE_DEFAULT", ",", "false", ")", ";", "if", "(", "savedInstanceState", "!", "=", "null", "&", "&", "savedInstanceState", ".", "containsKey", "(", "EXTRA_ACCOUNT", ")", ")", "{", "mAccount", "=", "(", "EmailContent", ".", "Account", ")", "savedInstanceState", ".", "getParcelable", "(", "EXTRA_ACCOUNT", ")", ";", "}", "try", "{", "URI", "uri", "=", "new", "URI", "(", "mAccount", ".", "getSenderUri", "(", "this", ")", ")", ";", "String", "username", "=", "null", ";", "String", "password", "=", "null", ";", "if", "(", "uri", ".", "getUserInfo", "(", ")", "!", "=", "null", ")", "{", "String", "[", "]", "userInfoParts", "=", "uri", ".", "getUserInfo", "(", ")", ".", "split", "(", "\"", "<STR_LIT::>", "\"", ",", "<NUM_LIT:2>", ")", ";", "username", "=", "userInfoParts", "[", "0", "]", ";", "if", "(", "userInfoParts", ".", "length", ">", "1", ")", "{", "password", "=", "userInfoParts", "[", "1", "]", ";", "}", "}", "if", "(", "username", "!", "=", "null", ")", "{", "mUsernameView", ".", "setText", "(", "username", ")", ";", "mRequireLoginView", ".", "setChecked", "(", "true", ")", ";", "}", "if", "(", "password", "!", "=", "null", ")", "{", "mPasswordView", ".", "setText", "(", "password", ")", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "smtpSchemes", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "smtpSchemes", "[", "i", "]", ".", "equals", "(", "uri", ".", "getScheme", "(", ")", ")", ")", "{", "SpinnerOption", ".", "setSpinnerOptionValue", "(", "mSecurityTypeView", ",", "i", ")", ";", "}", "}", "if", "(", "uri", ".", "getHost", "(", ")", "!", "=", "null", ")", "{", "mServerView", ".", "setText", "(", "uri", ".", "getHost", "(", ")", ")", ";", "}", "if", "(", "uri", ".", "getPort", "(", ")", "!", "=", "-", "1", ")", "{", "mPortView", ".", "setText", "(", "Integer", ".", "toString", "(", "uri", ".", "getPort", "(", ")", ")", ")", ";", "}", "else", "{", "updatePortFromSecurityType", "(", ")", ";", "}", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "throw", "new", "Error", "(", "use", ")", ";", "}", "validateFields", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onItemSelected", "(", "AdapterView", "arg0", ",", "View", "arg1", ",", "int", "arg2", ",", "long", "arg3", ")", "{", "updatePortFromSecurityType", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onNothingSelected", "(", "AdapterView", "<", "?", ">", "arg0", ")", "{", "}", "</s>"]
["<s>", "public", "void", "afterTextChanged", "(", "Editable", "s", ")", "{", "validateFields", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "beforeTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "count", ",", "int", "after", ")", "{", "}", "</s>"]
["<s>", "public", "void", "onTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "before", ",", "int", "count", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onSaveInstanceState", "(", "Bundle", "outState", ")", "{", "super", ".", "onSaveInstanceState", "(", "outState", ")", ";", "outState", ".", "putParcelable", "(", "EXTRA_ACCOUNT", ",", "mAccount", ")", ";", "}", "</s>"]
["<s>", "private", "void", "validateFields", "(", ")", "{", "boolean", "enabled", "=", "Utility", ".", "requiredFieldValid", "(", "mServerView", ")", "&", "&", "Utility", ".", "requiredFieldValid", "(", "mPortView", ")", ";", "if", "(", "enabled", "&", "&", "mRequireLoginView", ".", "isChecked", "(", ")", ")", "{", "enabled", "=", "(", "Utility", ".", "requiredFieldValid", "(", "mUsernameView", ")", "&", "&", "Utility", ".", "requiredFieldValid", "(", "mPasswordView", ")", ")", ";", "}", "if", "(", "enabled", ")", "{", "try", "{", "URI", "uri", "=", "getUri", "(", ")", ";", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "enabled", "=", "false", ";", "}", "}", "mNextButton", ".", "setEnabled", "(", "enabled", ")", ";", "Utility", ".", "setCompoundDrawablesAlpha", "(", "mNextButton", ",", "enabled", "?", "<NUM_LIT:255>", ":", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "private", "void", "updatePortFromSecurityType", "(", ")", "{", "int", "securityType", "=", "(", "Integer", ")", "(", "(", "SpinnerOption", ")", "mSecurityTypeView", ".", "getSelectedItem", "(", ")", ")", ".", "value", ";", "mPortView", ".", "setText", "(", "Integer", ".", "toString", "(", "smtpPorts", "[", "securityType", "]", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onActivityResult", "(", "int", "requestCode", ",", "int", "resultCode", ",", "Intent", "data", ")", "{", "if", "(", "resultCode", "=", "=", "RESULT_OK", ")", "{", "if", "(", "Intent", ".", "ACTION_EDIT", ".", "equals", "(", "getIntent", "(", ")", ".", "getAction", "(", ")", ")", ")", "{", "if", "(", "mAccount", ".", "isSaved", "(", ")", ")", "{", "mAccount", ".", "update", "(", "this", ",", "mAccount", ".", "toContentValues", "(", ")", ")", ";", "mAccount", ".", "mHostAuthSend", ".", "update", "(", "this", ",", "mAccount", ".", "mHostAuthSend", ".", "toContentValues", "(", ")", ")", ";", "}", "else", "{", "mAccount", ".", "save", "(", "this", ")", ";", "}", "finish", "(", ")", ";", "}", "else", "{", "AccountSetupOptions", ".", "actionOptions", "(", "this", ",", "mAccount", ",", "mMakeDefault", ",", "false", ")", ";", "finish", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "URI", "getUri", "(", ")", "throws", "URISyntaxException", "{", "int", "securityType", "=", "(", "Integer", ")", "(", "(", "SpinnerOption", ")", "mSecurityTypeView", ".", "getSelectedItem", "(", ")", ")", ".", "value", ";", "String", "userInfo", "=", "null", ";", "if", "(", "mRequireLoginView", ".", "isChecked", "(", ")", ")", "{", "userInfo", "=", "mUsernameView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", "+", "\"", "<STR_LIT::>", "\"", "+", "mPasswordView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ";", "}", "URI", "uri", "=", "new", "URI", "(", "smtpSchemes", "[", "securityType", "]", ",", "userInfo", ",", "mServerView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ",", "Integer", ".", "parseInt", "(", "mPortView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ")", ",", "null", ",", "null", ",", "null", ")", ";", "return", "uri", ";", "}", "</s>"]
["<s>", "private", "void", "onNext", "(", ")", "{", "try", "{", "URI", "uri", "=", "getUri", "(", ")", ";", "mAccount", ".", "setSenderUri", "(", "this", ",", "uri", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "throw", "new", "Error", "(", "use", ")", ";", "}", "AccountSetupCheckSettings", ".", "actionCheckSettings", "(", "this", ",", "mAccount", ",", "false", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "View", "v", ")", "{", "switch", "(", "v", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "next", ":", "onNext", "(", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "public", "void", "onCheckedChanged", "(", "CompoundButton", "buttonView", ",", "boolean", "isChecked", ")", "{", "mRequireLoginSettingsView", ".", "setVisibility", "(", "isChecked", "?", "View", ".", "VISIBLE", ":", "View", ".", "GONE", ")", ";", "validateFields", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionSetNames", "(", "Activity", "fromActivity", ",", "long", "accountId", ",", "boolean", "easFlowMode", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSetupNames", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT_ID", ",", "accountId", ")", ";", "i", ".", "putExtra", "(", "EXTRA_EAS_FLOW", ",", "easFlowMode", ")", ";", "fromActivity", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onCreate", "(", "savedInstanceState", ")", ";", "setContentView", "(", "R", ".", "layout", ".", "account_setup_names", ")", ";", "mDescription", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_description", ")", ";", "mName", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_name", ")", ";", "mDoneButton", "=", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "done", ")", ";", "mDoneButton", ".", "setOnClickListener", "(", "this", ")", ";", "TextWatcher", "validationTextWatcher", "=", "new", "TextWatcher", "(", ")", "{", "public", "void", "afterTextChanged", "(", "Editable", "s", ")", "{", "validateFields", "(", ")", ";", "}", "public", "void", "beforeTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "count", ",", "int", "after", ")", "{", "}", "public", "void", "onTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "before", ",", "int", "count", ")", "{", "}", "}", ";", "mName", ".", "addTextChangedListener", "(", "validationTextWatcher", ")", ";", "mName", ".", "setKeyListener", "(", "TextKeyListener", ".", "getInstance", "(", "false", ",", "Capitalize", ".", "WORDS", ")", ")", ";", "long", "accountId", "=", "getIntent", "(", ")", ".", "getLongExtra", "(", "EXTRA_ACCOUNT_ID", ",", "-", "1", ")", ";", "mAccount", "=", "EmailContent", ".", "Account", ".", "restoreAccountWithId", "(", "this", ",", "accountId", ")", ";", "if", "(", "mAccount", ".", "getSenderName", "(", ")", "!", "=", "null", ")", "{", "mName", ".", "setText", "(", "mAccount", ".", "getSenderName", "(", ")", ")", ";", "}", "if", "(", "!", "Utility", ".", "requiredFieldValid", "(", "mName", ")", ")", "{", "mDoneButton", ".", "setEnabled", "(", "false", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "afterTextChanged", "(", "Editable", "s", ")", "{", "validateFields", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "beforeTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "count", ",", "int", "after", ")", "{", "}", "</s>"]
["<s>", "public", "void", "onTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "before", ",", "int", "count", ")", "{", "}", "</s>"]
["<s>", "private", "void", "validateFields", "(", ")", "{", "mDoneButton", ".", "setEnabled", "(", "Utility", ".", "requiredFieldValid", "(", "mName", ")", ")", ";", "Utility", ".", "setCompoundDrawablesAlpha", "(", "mDoneButton", ",", "mDoneButton", ".", "isEnabled", "(", ")", "?", "<NUM_LIT:255>", ":", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onNext", "(", ")", "{", "if", "(", "Utility", ".", "requiredFieldValid", "(", "mDescription", ")", ")", "{", "mAccount", ".", "setDisplayName", "(", "mDescription", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "}", "String", "name", "=", "mName", ".", "getText", "(", ")", ".", "toString", "(", ")", ";", "mAccount", ".", "setSenderName", "(", "name", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "AccountColumns", ".", "DISPLAY_NAME", ",", "mAccount", ".", "getDisplayName", "(", ")", ")", ";", "cv", ".", "put", "(", "AccountColumns", ".", "SENDER_NAME", ",", "name", ")", ";", "mAccount", ".", "update", "(", "this", ",", "cv", ")", ";", "if", "(", "getIntent", "(", ")", ".", "getBooleanExtra", "(", "EXTRA_EAS_FLOW", ",", "false", ")", ")", "{", "}", "else", "{", "MessageList", ".", "actionHandleAccount", "(", "this", ",", "mAccount", ".", "mId", ",", "EmailContent", ".", "Mailbox", ".", "TYPE_INBOX", ")", ";", "}", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "View", "v", ")", "{", "switch", "(", "v", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "done", ":", "onNext", "(", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "actionIncomingSettings", "(", "Activity", "fromActivity", ",", "Account", "account", ",", "boolean", "makeDefault", ",", "boolean", "easFlowMode", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSetupExchange", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "i", ".", "putExtra", "(", "EXTRA_MAKE_DEFAULT", ",", "makeDefault", ")", ";", "i", ".", "putExtra", "(", "EXTRA_EAS_FLOW", ",", "easFlowMode", ")", ";", "fromActivity", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionEditIncomingSettings", "(", "Activity", "fromActivity", ",", "Account", "account", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSetupExchange", ".", "class", ")", ";", "i", ".", "setAction", "(", "Intent", ".", "ACTION_EDIT", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "fromActivity", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionEditOutgoingSettings", "(", "Activity", "fromActivity", ",", "Account", "account", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSetupExchange", ".", "class", ")", ";", "i", ".", "setAction", "(", "Intent", ".", "ACTION_EDIT", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "fromActivity", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onCreate", "(", "savedInstanceState", ")", ";", "setContentView", "(", "R", ".", "layout", ".", "account_setup_exchange", ")", ";", "mUsernameView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_username", ")", ";", "mPasswordView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_password", ")", ";", "mServerView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_server", ")", ";", "mSslSecurityView", "=", "(", "CheckBox", ")", "findViewById", "(", "R", ".", "id", ".", "account_ssl", ")", ";", "mSslSecurityView", ".", "setOnCheckedChangeListener", "(", "this", ")", ";", "mTrustCertificatesView", "=", "(", "CheckBox", ")", "findViewById", "(", "R", ".", "id", ".", "account_trust_certificates", ")", ";", "mNextButton", "=", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "next", ")", ";", "mNextButton", ".", "setOnClickListener", "(", "this", ")", ";", "TextWatcher", "validationTextWatcher", "=", "new", "TextWatcher", "(", ")", "{", "public", "void", "afterTextChanged", "(", "Editable", "s", ")", "{", "validateFields", "(", ")", ";", "}", "public", "void", "beforeTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "count", ",", "int", "after", ")", "{", "}", "public", "void", "onTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "before", ",", "int", "count", ")", "{", "}", "}", ";", "mUsernameView", ".", "addTextChangedListener", "(", "validationTextWatcher", ")", ";", "mPasswordView", ".", "addTextChangedListener", "(", "validationTextWatcher", ")", ";", "mServerView", ".", "addTextChangedListener", "(", "validationTextWatcher", ")", ";", "mAccount", "=", "(", "EmailContent", ".", "Account", ")", "getIntent", "(", ")", ".", "getParcelableExtra", "(", "EXTRA_ACCOUNT", ")", ";", "mMakeDefault", "=", "getIntent", "(", ")", ".", "getBooleanExtra", "(", "EXTRA_MAKE_DEFAULT", ",", "false", ")", ";", "if", "(", "savedInstanceState", "!", "=", "null", "&", "&", "savedInstanceState", ".", "containsKey", "(", "EXTRA_ACCOUNT", ")", ")", "{", "mAccount", "=", "(", "EmailContent", ".", "Account", ")", "savedInstanceState", ".", "getParcelable", "(", "EXTRA_ACCOUNT", ")", ";", "}", "try", "{", "URI", "uri", "=", "new", "URI", "(", "mAccount", ".", "getStoreUri", "(", "this", ")", ")", ";", "String", "username", "=", "null", ";", "String", "password", "=", "null", ";", "if", "(", "uri", ".", "getUserInfo", "(", ")", "!", "=", "null", ")", "{", "String", "[", "]", "userInfoParts", "=", "uri", ".", "getUserInfo", "(", ")", ".", "split", "(", "\"", "<STR_LIT::>", "\"", ",", "<NUM_LIT:2>", ")", ";", "username", "=", "userInfoParts", "[", "0", "]", ";", "if", "(", "userInfoParts", ".", "length", ">", "1", ")", "{", "password", "=", "userInfoParts", "[", "1", "]", ";", "}", "}", "if", "(", "username", "!", "=", "null", ")", "{", "if", "(", "username", ".", "indexOf", "(", "<STR_LIT:\\\\>", ")", "<", "0", ")", "{", "username", "=", "\"", "<STR_LIT:\\\\>", "\"", "+", "username", ";", "}", "mUsernameView", ".", "setText", "(", "username", ")", ";", "}", "if", "(", "password", "!", "=", "null", ")", "{", "mPasswordView", ".", "setText", "(", "password", ")", ";", "}", "if", "(", "uri", ".", "getScheme", "(", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "}", "else", "{", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", "+", "mAccount", ".", "getStoreUri", "(", "this", ")", ")", ";", "}", "if", "(", "uri", ".", "getHost", "(", ")", "!", "=", "null", ")", "{", "mServerView", ".", "setText", "(", "uri", ".", "getHost", "(", ")", ")", ";", "}", "boolean", "ssl", "=", "uri", ".", "getScheme", "(", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mSslSecurityView", ".", "setChecked", "(", "ssl", ")", ";", "mTrustCertificatesView", ".", "setChecked", "(", "uri", ".", "getScheme", "(", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "mTrustCertificatesView", ".", "setVisibility", "(", "ssl", "?", "View", ".", "VISIBLE", ":", "View", ".", "GONE", ")", ";", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "throw", "new", "Error", "(", "use", ")", ";", "}", "validateFields", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "afterTextChanged", "(", "Editable", "s", ")", "{", "validateFields", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "beforeTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "count", ",", "int", "after", ")", "{", "}", "</s>"]
["<s>", "public", "void", "onTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "before", ",", "int", "count", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onSaveInstanceState", "(", "Bundle", "outState", ")", "{", "super", ".", "onSaveInstanceState", "(", "outState", ")", ";", "outState", ".", "putParcelable", "(", "EXTRA_ACCOUNT", ",", "mAccount", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "usernameFieldValid", "(", "EditText", "usernameView", ")", "{", "return", "Utility", ".", "requiredFieldValid", "(", "usernameView", ")", "&", "&", "!", "usernameView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "equals", "(", "\"", "<STR_LIT:\\\\>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Dialog", "onCreateDialog", "(", "int", "id", ")", "{", "switch", "(", "id", ")", "{", "case", "DIALOG_DUPLICATE_ACCOUNT", ":", "return", "new", "AlertDialog", ".", "Builder", "(", "this", ")", ".", "setIcon", "(", "android", ".", "R", ".", "drawable", ".", "ic_dialog_alert", ")", ".", "setTitle", "(", "R", ".", "string", ".", "account_duplicate_dlg_title", ")", ".", "setMessage", "(", "getString", "(", "R", ".", "string", ".", "account_duplicate_dlg_message_fmt", ",", "mDuplicateAccountName", ")", ")", ".", "setPositiveButton", "(", "R", ".", "string", ".", "okay_action", ",", "new", "DialogInterface", ".", "OnClickListener", "(", ")", "{", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "which", ")", "{", "dismissDialog", "(", "DIALOG_DUPLICATE_ACCOUNT", ")", ";", "}", "}", ")", ".", "create", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "which", ")", "{", "dismissDialog", "(", "DIALOG_DUPLICATE_ACCOUNT", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onPrepareDialog", "(", "int", "id", ",", "Dialog", "dialog", ")", "{", "switch", "(", "id", ")", "{", "case", "DIALOG_DUPLICATE_ACCOUNT", ":", "if", "(", "mDuplicateAccountName", "!", "=", "null", ")", "{", "AlertDialog", "alert", "=", "(", "AlertDialog", ")", "dialog", ";", "alert", ".", "setMessage", "(", "getString", "(", "R", ".", "string", ".", "account_duplicate_dlg_message_fmt", ",", "mDuplicateAccountName", ")", ")", ";", "}", "break", ";", "}", "}", "</s>"]
["<s>", "private", "void", "validateFields", "(", ")", "{", "boolean", "enabled", "=", "usernameFieldValid", "(", "mUsernameView", ")", "&", "&", "Utility", ".", "requiredFieldValid", "(", "mPasswordView", ")", "&", "&", "Utility", ".", "requiredFieldValid", "(", "mServerView", ")", ";", "if", "(", "enabled", ")", "{", "try", "{", "URI", "uri", "=", "getUri", "(", ")", ";", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "enabled", "=", "false", ";", "}", "}", "mNextButton", ".", "setEnabled", "(", "enabled", ")", ";", "Utility", ".", "setCompoundDrawablesAlpha", "(", "mNextButton", ",", "enabled", "?", "<NUM_LIT:255>", ":", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onActivityResult", "(", "int", "requestCode", ",", "int", "resultCode", ",", "Intent", "data", ")", "{", "if", "(", "resultCode", "=", "=", "RESULT_OK", ")", "{", "if", "(", "Intent", ".", "ACTION_EDIT", ".", "equals", "(", "getIntent", "(", ")", ".", "getAction", "(", ")", ")", ")", "{", "if", "(", "mAccount", ".", "isSaved", "(", ")", ")", "{", "mAccount", ".", "update", "(", "this", ",", "mAccount", ".", "toContentValues", "(", ")", ")", ";", "mAccount", ".", "mHostAuthRecv", ".", "update", "(", "this", ",", "mAccount", ".", "mHostAuthRecv", ".", "toContentValues", "(", ")", ")", ";", "mAccount", ".", "mHostAuthSend", ".", "update", "(", "this", ",", "mAccount", ".", "mHostAuthSend", ".", "toContentValues", "(", ")", ")", ";", "if", "(", "mAccount", ".", "mHostAuthRecv", ".", "mProtocol", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "try", "{", "new", "EmailServiceProxy", "(", "this", ",", "SyncManager", ".", "class", ")", ".", "hostChanged", "(", "mAccount", ".", "mId", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "}", "else", "{", "mAccount", ".", "save", "(", "this", ")", ";", "}", "finish", "(", ")", ";", "}", "else", "{", "boolean", "easFlowMode", "=", "getIntent", "(", ")", ".", "getBooleanExtra", "(", "EXTRA_EAS_FLOW", ",", "false", ")", ";", "AccountSetupOptions", ".", "actionOptions", "(", "this", ",", "mAccount", ",", "mMakeDefault", ",", "easFlowMode", ")", ";", "finish", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "URI", "getUri", "(", ")", "throws", "URISyntaxException", "{", "boolean", "sslRequired", "=", "mSslSecurityView", ".", "isChecked", "(", ")", ";", "boolean", "trustCertificates", "=", "mTrustCertificatesView", ".", "isChecked", "(", ")", ";", "String", "scheme", "=", "(", "sslRequired", ")", "?", "(", "trustCertificates", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", ")", ":", "\"", "<STR_LIT>", "\"", ";", "String", "userName", "=", "mUsernameView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ";", "if", "(", "userName", ".", "startsWith", "(", "\"", "<STR_LIT:\\\\>", "\"", ")", ")", "{", "userName", "=", "userName", ".", "substring", "(", "1", ")", ";", "}", "mCacheLoginCredential", "=", "userName", ";", "String", "userInfo", "=", "userName", "+", "\"", "<STR_LIT::>", "\"", "+", "mPasswordView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ";", "String", "host", "=", "mServerView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ";", "String", "path", "=", "null", ";", "URI", "uri", "=", "new", "URI", "(", "scheme", ",", "userInfo", ",", "host", ",", "0", ",", "path", ",", "null", ",", "null", ")", ";", "return", "uri", ";", "}", "</s>"]
["<s>", "private", "void", "onNext", "(", ")", "{", "try", "{", "URI", "uri", "=", "getUri", "(", ")", ";", "mAccount", ".", "setStoreUri", "(", "this", ",", "uri", ".", "toString", "(", ")", ")", ";", "mAccount", ".", "setSenderUri", "(", "this", ",", "uri", ".", "toString", "(", ")", ")", ";", "mDuplicateAccountName", "=", "Utility", ".", "findDuplicateAccount", "(", "this", ",", "mAccount", ".", "mId", ",", "uri", ".", "getHost", "(", ")", ",", "mCacheLoginCredential", ")", ";", "if", "(", "mDuplicateAccountName", "!", "=", "null", ")", "{", "this", ".", "showDialog", "(", "DIALOG_DUPLICATE_ACCOUNT", ")", ";", "return", ";", "}", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "throw", "new", "Error", "(", "use", ")", ";", "}", "AccountSetupCheckSettings", ".", "actionCheckSettings", "(", "this", ",", "mAccount", ",", "true", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "View", "v", ")", "{", "switch", "(", "v", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "next", ":", "onNext", "(", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "public", "void", "onCheckedChanged", "(", "CompoundButton", "buttonView", ",", "boolean", "isChecked", ")", "{", "if", "(", "buttonView", ".", "getId", "(", ")", "=", "=", "R", ".", "id", ".", "account_ssl", ")", "{", "mTrustCertificatesView", ".", "setVisibility", "(", "isChecked", "?", "View", ".", "VISIBLE", ":", "View", ".", "GONE", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "actionIncomingSettings", "(", "Activity", "fromActivity", ",", "EmailContent", ".", "Account", "account", ",", "boolean", "makeDefault", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSetupIncoming", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "i", ".", "putExtra", "(", "EXTRA_MAKE_DEFAULT", ",", "makeDefault", ")", ";", "fromActivity", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionEditIncomingSettings", "(", "Activity", "fromActivity", ",", "EmailContent", ".", "Account", "account", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSetupIncoming", ".", "class", ")", ";", "i", ".", "setAction", "(", "Intent", ".", "ACTION_EDIT", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "fromActivity", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onCreate", "(", "savedInstanceState", ")", ";", "setContentView", "(", "R", ".", "layout", ".", "account_setup_incoming", ")", ";", "mUsernameView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_username", ")", ";", "mPasswordView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_password", ")", ";", "TextView", "serverLabelView", "=", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "account_server_label", ")", ";", "mServerView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_server", ")", ";", "mPortView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_port", ")", ";", "mSecurityTypeView", "=", "(", "Spinner", ")", "findViewById", "(", "R", ".", "id", ".", "account_security_type", ")", ";", "mDeletePolicyView", "=", "(", "Spinner", ")", "findViewById", "(", "R", ".", "id", ".", "account_delete_policy", ")", ";", "mImapPathPrefixView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "imap_path_prefix", ")", ";", "mNextButton", "=", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "next", ")", ";", "mNextButton", ".", "setOnClickListener", "(", "this", ")", ";", "SpinnerOption", "securityTypes", "[", "]", "=", "{", "new", "SpinnerOption", "(", "0", ",", "getString", "(", "R", ".", "string", ".", "account_setup_incoming_security_none_label", ")", ")", ",", "new", "SpinnerOption", "(", "1", ",", "getString", "(", "R", ".", "string", ".", "account_setup_incoming_security_ssl_label", ")", ")", ",", "new", "SpinnerOption", "(", "<NUM_LIT:2>", ",", "getString", "(", "R", ".", "string", ".", "account_setup_incoming_security_ssl_trust_certificates_label", ")", ")", ",", "new", "SpinnerOption", "(", "<NUM_LIT:3>", ",", "getString", "(", "R", ".", "string", ".", "account_setup_incoming_security_tls_label", ")", ")", ",", "new", "SpinnerOption", "(", "<NUM_LIT:4>", ",", "getString", "(", "R", ".", "string", ".", "account_setup_incoming_security_tls_trust_certificates_label", ")", ")", ",", "}", ";", "SpinnerOption", "deletePolicies", "[", "]", "=", "{", "new", "SpinnerOption", "(", "Account", ".", "DELETE_POLICY_NEVER", ",", "getString", "(", "R", ".", "string", ".", "account_setup_incoming_delete_policy_never_label", ")", ")", ",", "new", "SpinnerOption", "(", "Account", ".", "DELETE_POLICY_ON_DELETE", ",", "getString", "(", "R", ".", "string", ".", "account_setup_incoming_delete_policy_delete_label", ")", ")", ",", "}", ";", "ArrayAdapter", "<", "SpinnerOption", ">", "securityTypesAdapter", "=", "new", "ArrayAdapter", "<", "SpinnerOption", ">", "(", "this", ",", "android", ".", "R", ".", "layout", ".", "simple_spinner_item", ",", "securityTypes", ")", ";", "securityTypesAdapter", ".", "setDropDownViewResource", "(", "android", ".", "R", ".", "layout", ".", "simple_spinner_dropdown_item", ")", ";", "mSecurityTypeView", ".", "setAdapter", "(", "securityTypesAdapter", ")", ";", "ArrayAdapter", "<", "SpinnerOption", ">", "deletePoliciesAdapter", "=", "new", "ArrayAdapter", "<", "SpinnerOption", ">", "(", "this", ",", "android", ".", "R", ".", "layout", ".", "simple_spinner_item", ",", "deletePolicies", ")", ";", "deletePoliciesAdapter", ".", "setDropDownViewResource", "(", "android", ".", "R", ".", "layout", ".", "simple_spinner_dropdown_item", ")", ";", "mDeletePolicyView", ".", "setAdapter", "(", "deletePoliciesAdapter", ")", ";", "mSecurityTypeView", ".", "setOnItemSelectedListener", "(", "new", "AdapterView", ".", "OnItemSelectedListener", "(", ")", "{", "public", "void", "onItemSelected", "(", "AdapterView", "arg0", ",", "View", "arg1", ",", "int", "arg2", ",", "long", "arg3", ")", "{", "updatePortFromSecurityType", "(", ")", ";", "}", "public", "void", "onNothingSelected", "(", "AdapterView", "<", "?", ">", "arg0", ")", "{", "}", "}", ")", ";", "TextWatcher", "validationTextWatcher", "=", "new", "TextWatcher", "(", ")", "{", "public", "void", "afterTextChanged", "(", "Editable", "s", ")", "{", "validateFields", "(", ")", ";", "}", "public", "void", "beforeTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "count", ",", "int", "after", ")", "{", "}", "public", "void", "onTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "before", ",", "int", "count", ")", "{", "}", "}", ";", "mUsernameView", ".", "addTextChangedListener", "(", "validationTextWatcher", ")", ";", "mPasswordView", ".", "addTextChangedListener", "(", "validationTextWatcher", ")", ";", "mServerView", ".", "addTextChangedListener", "(", "validationTextWatcher", ")", ";", "mPortView", ".", "addTextChangedListener", "(", "validationTextWatcher", ")", ";", "mPortView", ".", "setKeyListener", "(", "DigitsKeyListener", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "mAccount", "=", "(", "EmailContent", ".", "Account", ")", "getIntent", "(", ")", ".", "getParcelableExtra", "(", "EXTRA_ACCOUNT", ")", ";", "mMakeDefault", "=", "getIntent", "(", ")", ".", "getBooleanExtra", "(", "EXTRA_MAKE_DEFAULT", ",", "false", ")", ";", "if", "(", "savedInstanceState", "!", "=", "null", "&", "&", "savedInstanceState", ".", "containsKey", "(", "EXTRA_ACCOUNT", ")", ")", "{", "mAccount", "=", "(", "EmailContent", ".", "Account", ")", "savedInstanceState", ".", "getParcelable", "(", "EXTRA_ACCOUNT", ")", ";", "}", "try", "{", "URI", "uri", "=", "new", "URI", "(", "mAccount", ".", "getStoreUri", "(", "this", ")", ")", ";", "String", "username", "=", "null", ";", "String", "password", "=", "null", ";", "if", "(", "uri", ".", "getUserInfo", "(", ")", "!", "=", "null", ")", "{", "String", "[", "]", "userInfoParts", "=", "uri", ".", "getUserInfo", "(", ")", ".", "split", "(", "\"", "<STR_LIT::>", "\"", ",", "<NUM_LIT:2>", ")", ";", "username", "=", "userInfoParts", "[", "0", "]", ";", "if", "(", "userInfoParts", ".", "length", ">", "1", ")", "{", "password", "=", "userInfoParts", "[", "1", "]", ";", "}", "}", "if", "(", "username", "!", "=", "null", ")", "{", "mUsernameView", ".", "setText", "(", "username", ")", ";", "}", "if", "(", "password", "!", "=", "null", ")", "{", "mPasswordView", ".", "setText", "(", "password", ")", ";", "}", "if", "(", "uri", ".", "getScheme", "(", ")", ".", "startsWith", "(", "\"", "<STR_LIT:3>", "\"", ")", ")", "{", "serverLabelView", ".", "setText", "(", "R", ".", "string", ".", "account_setup_incoming_pop_server_label", ")", ";", "mAccountPorts", "=", "popPorts", ";", "mAccountSchemes", "=", "popSchemes", ";", "findViewById", "(", "R", ".", "id", ".", "imap_path_prefix_section", ")", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "else", "if", "(", "uri", ".", "getScheme", "(", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "serverLabelView", ".", "setText", "(", "R", ".", "string", ".", "account_setup_incoming_imap_server_label", ")", ";", "mAccountPorts", "=", "imapPorts", ";", "mAccountSchemes", "=", "imapSchemes", ";", "findViewById", "(", "R", ".", "id", ".", "account_delete_policy_label", ")", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "mDeletePolicyView", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "if", "(", "uri", ".", "getPath", "(", ")", "!", "=", "null", "&", "&", "uri", ".", "getPath", "(", ")", ".", "length", "(", ")", ">", "0", ")", "{", "mImapPathPrefixView", ".", "setText", "(", "uri", ".", "getPath", "(", ")", ".", "substring", "(", "1", ")", ")", ";", "}", "}", "else", "{", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", "+", "mAccount", ".", "getStoreUri", "(", "this", ")", ")", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "mAccountSchemes", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "mAccountSchemes", "[", "i", "]", ".", "equals", "(", "uri", ".", "getScheme", "(", ")", ")", ")", "{", "SpinnerOption", ".", "setSpinnerOptionValue", "(", "mSecurityTypeView", ",", "i", ")", ";", "}", "}", "SpinnerOption", ".", "setSpinnerOptionValue", "(", "mDeletePolicyView", ",", "mAccount", ".", "getDeletePolicy", "(", ")", ")", ";", "if", "(", "uri", ".", "getHost", "(", ")", "!", "=", "null", ")", "{", "mServerView", ".", "setText", "(", "uri", ".", "getHost", "(", ")", ")", ";", "}", "if", "(", "uri", ".", "getPort", "(", ")", "!", "=", "-", "1", ")", "{", "mPortView", ".", "setText", "(", "Integer", ".", "toString", "(", "uri", ".", "getPort", "(", ")", ")", ")", ";", "}", "else", "{", "updatePortFromSecurityType", "(", ")", ";", "}", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "throw", "new", "Error", "(", "use", ")", ";", "}", "validateFields", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onItemSelected", "(", "AdapterView", "arg0", ",", "View", "arg1", ",", "int", "arg2", ",", "long", "arg3", ")", "{", "updatePortFromSecurityType", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onNothingSelected", "(", "AdapterView", "<", "?", ">", "arg0", ")", "{", "}", "</s>"]
["<s>", "public", "void", "afterTextChanged", "(", "Editable", "s", ")", "{", "validateFields", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "beforeTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "count", ",", "int", "after", ")", "{", "}", "</s>"]
["<s>", "public", "void", "onTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "before", ",", "int", "count", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onSaveInstanceState", "(", "Bundle", "outState", ")", "{", "super", ".", "onSaveInstanceState", "(", "outState", ")", ";", "outState", ".", "putParcelable", "(", "EXTRA_ACCOUNT", ",", "mAccount", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Dialog", "onCreateDialog", "(", "int", "id", ")", "{", "switch", "(", "id", ")", "{", "case", "DIALOG_DUPLICATE_ACCOUNT", ":", "return", "new", "AlertDialog", ".", "Builder", "(", "this", ")", ".", "setIcon", "(", "android", ".", "R", ".", "drawable", ".", "ic_dialog_alert", ")", ".", "setTitle", "(", "R", ".", "string", ".", "account_duplicate_dlg_title", ")", ".", "setMessage", "(", "getString", "(", "R", ".", "string", ".", "account_duplicate_dlg_message_fmt", ",", "mDuplicateAccountName", ")", ")", ".", "setPositiveButton", "(", "R", ".", "string", ".", "okay_action", ",", "new", "DialogInterface", ".", "OnClickListener", "(", ")", "{", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "which", ")", "{", "dismissDialog", "(", "DIALOG_DUPLICATE_ACCOUNT", ")", ";", "}", "}", ")", ".", "create", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "which", ")", "{", "dismissDialog", "(", "DIALOG_DUPLICATE_ACCOUNT", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onPrepareDialog", "(", "int", "id", ",", "Dialog", "dialog", ")", "{", "switch", "(", "id", ")", "{", "case", "DIALOG_DUPLICATE_ACCOUNT", ":", "if", "(", "mDuplicateAccountName", "!", "=", "null", ")", "{", "AlertDialog", "alert", "=", "(", "AlertDialog", ")", "dialog", ";", "alert", ".", "setMessage", "(", "getString", "(", "R", ".", "string", ".", "account_duplicate_dlg_message_fmt", ",", "mDuplicateAccountName", ")", ")", ";", "}", "break", ";", "}", "}", "</s>"]
["<s>", "private", "void", "validateFields", "(", ")", "{", "boolean", "enabled", "=", "Utility", ".", "requiredFieldValid", "(", "mUsernameView", ")", "&", "&", "Utility", ".", "requiredFieldValid", "(", "mPasswordView", ")", "&", "&", "Utility", ".", "requiredFieldValid", "(", "mServerView", ")", "&", "&", "Utility", ".", "requiredFieldValid", "(", "mPortView", ")", ";", "if", "(", "enabled", ")", "{", "try", "{", "URI", "uri", "=", "getUri", "(", ")", ";", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "enabled", "=", "false", ";", "}", "}", "mNextButton", ".", "setEnabled", "(", "enabled", ")", ";", "Utility", ".", "setCompoundDrawablesAlpha", "(", "mNextButton", ",", "enabled", "?", "<NUM_LIT:255>", ":", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "private", "void", "updatePortFromSecurityType", "(", ")", "{", "int", "securityType", "=", "(", "Integer", ")", "(", "(", "SpinnerOption", ")", "mSecurityTypeView", ".", "getSelectedItem", "(", ")", ")", ".", "value", ";", "mPortView", ".", "setText", "(", "Integer", ".", "toString", "(", "mAccountPorts", "[", "securityType", "]", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onActivityResult", "(", "int", "requestCode", ",", "int", "resultCode", ",", "Intent", "data", ")", "{", "if", "(", "resultCode", "=", "=", "RESULT_OK", ")", "{", "if", "(", "Intent", ".", "ACTION_EDIT", ".", "equals", "(", "getIntent", "(", ")", ".", "getAction", "(", ")", ")", ")", "{", "if", "(", "mAccount", ".", "isSaved", "(", ")", ")", "{", "mAccount", ".", "update", "(", "this", ",", "mAccount", ".", "toContentValues", "(", ")", ")", ";", "mAccount", ".", "mHostAuthRecv", ".", "update", "(", "this", ",", "mAccount", ".", "mHostAuthRecv", ".", "toContentValues", "(", ")", ")", ";", "}", "else", "{", "mAccount", ".", "save", "(", "this", ")", ";", "}", "finish", "(", ")", ";", "}", "else", "{", "try", "{", "URI", "oldUri", "=", "new", "URI", "(", "mAccount", ".", "getSenderUri", "(", "this", ")", ")", ";", "URI", "uri", "=", "new", "URI", "(", "oldUri", ".", "getScheme", "(", ")", ",", "mUsernameView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", "+", "\"", "<STR_LIT::>", "\"", "+", "mPasswordView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ",", "oldUri", ".", "getHost", "(", ")", ",", "oldUri", ".", "getPort", "(", ")", ",", "null", ",", "null", ",", "null", ")", ";", "mAccount", ".", "setSenderUri", "(", "this", ",", "uri", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "}", "AccountSetupOutgoing", ".", "actionOutgoingSettings", "(", "this", ",", "mAccount", ",", "mMakeDefault", ")", ";", "finish", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "URI", "getUri", "(", ")", "throws", "URISyntaxException", "{", "int", "securityType", "=", "(", "Integer", ")", "(", "(", "SpinnerOption", ")", "mSecurityTypeView", ".", "getSelectedItem", "(", ")", ")", ".", "value", ";", "String", "path", "=", "null", ";", "if", "(", "mAccountSchemes", "[", "securityType", "]", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "path", "=", "\"", "<STR_LIT:/>", "\"", "+", "mImapPathPrefixView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ";", "}", "String", "userName", "=", "mUsernameView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ";", "mCacheLoginCredential", "=", "userName", ";", "URI", "uri", "=", "new", "URI", "(", "mAccountSchemes", "[", "securityType", "]", ",", "userName", "+", "\"", "<STR_LIT::>", "\"", "+", "mPasswordView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ",", "mServerView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ",", "Integer", ".", "parseInt", "(", "mPortView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ")", ",", "path", ",", "null", ",", "null", ")", ";", "return", "uri", ";", "}", "</s>"]
["<s>", "private", "void", "onNext", "(", ")", "{", "try", "{", "URI", "uri", "=", "getUri", "(", ")", ";", "mAccount", ".", "setStoreUri", "(", "this", ",", "uri", ".", "toString", "(", ")", ")", ";", "mDuplicateAccountName", "=", "Utility", ".", "findDuplicateAccount", "(", "this", ",", "mAccount", ".", "mId", ",", "uri", ".", "getHost", "(", ")", ",", "mCacheLoginCredential", ")", ";", "if", "(", "mDuplicateAccountName", "!", "=", "null", ")", "{", "this", ".", "showDialog", "(", "DIALOG_DUPLICATE_ACCOUNT", ")", ";", "return", ";", "}", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "throw", "new", "Error", "(", "use", ")", ";", "}", "mAccount", ".", "setDeletePolicy", "(", "(", "Integer", ")", "(", "(", "SpinnerOption", ")", "mDeletePolicyView", ".", "getSelectedItem", "(", ")", ")", ".", "value", ")", ";", "AccountSetupCheckSettings", ".", "actionCheckSettings", "(", "this", ",", "mAccount", ",", "true", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "View", "v", ")", "{", "switch", "(", "v", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "next", ":", "onNext", "(", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "actionOptions", "(", "Activity", "fromActivity", ",", "EmailContent", ".", "Account", "account", ",", "boolean", "makeDefault", ",", "boolean", "easFlowMode", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSetupOptions", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "i", ".", "putExtra", "(", "EXTRA_MAKE_DEFAULT", ",", "makeDefault", ")", ";", "i", ".", "putExtra", "(", "EXTRA_EAS_FLOW", ",", "easFlowMode", ")", ";", "fromActivity", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onCreate", "(", "savedInstanceState", ")", ";", "setContentView", "(", "R", ".", "layout", ".", "account_setup_options", ")", ";", "mCheckFrequencyView", "=", "(", "Spinner", ")", "findViewById", "(", "R", ".", "id", ".", "account_check_frequency", ")", ";", "mSyncWindowView", "=", "(", "Spinner", ")", "findViewById", "(", "R", ".", "id", ".", "account_sync_window", ")", ";", "mDefaultView", "=", "(", "CheckBox", ")", "findViewById", "(", "R", ".", "id", ".", "account_default", ")", ";", "mNotifyView", "=", "(", "CheckBox", ")", "findViewById", "(", "R", ".", "id", ".", "account_notify", ")", ";", "mSyncContactsView", "=", "(", "CheckBox", ")", "findViewById", "(", "R", ".", "id", ".", "account_sync_contacts", ")", ";", "findViewById", "(", "R", ".", "id", ".", "next", ")", ".", "setOnClickListener", "(", "this", ")", ";", "mAccount", "=", "(", "EmailContent", ".", "Account", ")", "getIntent", "(", ")", ".", "getParcelableExtra", "(", "EXTRA_ACCOUNT", ")", ";", "boolean", "makeDefault", "=", "getIntent", "(", ")", ".", "getBooleanExtra", "(", "EXTRA_MAKE_DEFAULT", ",", "false", ")", ";", "int", "frequencyValuesId", ";", "int", "frequencyEntriesId", ";", "Store", ".", "StoreInfo", "info", "=", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "mAccount", ".", "getStoreUri", "(", "this", ")", ",", "this", ")", ";", "if", "(", "info", ".", "mPushSupported", ")", "{", "frequencyValuesId", "=", "R", ".", "array", ".", "account_settings_check_frequency_values_push", ";", "frequencyEntriesId", "=", "R", ".", "array", ".", "account_settings_check_frequency_entries_push", ";", "}", "else", "{", "frequencyValuesId", "=", "R", ".", "array", ".", "account_settings_check_frequency_values", ";", "frequencyEntriesId", "=", "R", ".", "array", ".", "account_settings_check_frequency_entries", ";", "}", "CharSequence", "[", "]", "frequencyValues", "=", "getResources", "(", ")", ".", "getTextArray", "(", "frequencyValuesId", ")", ";", "CharSequence", "[", "]", "frequencyEntries", "=", "getResources", "(", ")", ".", "getTextArray", "(", "frequencyEntriesId", ")", ";", "SpinnerOption", "[", "]", "checkFrequencies", "=", "new", "SpinnerOption", "[", "frequencyEntries", ".", "length", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "frequencyEntries", ".", "length", ";", "i", "+", "+", ")", "{", "checkFrequencies", "[", "i", "]", "=", "new", "SpinnerOption", "(", "Integer", ".", "valueOf", "(", "frequencyValues", "[", "i", "]", ".", "toString", "(", ")", ")", ",", "frequencyEntries", "[", "i", "]", ".", "toString", "(", ")", ")", ";", "}", "ArrayAdapter", "<", "SpinnerOption", ">", "checkFrequenciesAdapter", "=", "new", "ArrayAdapter", "<", "SpinnerOption", ">", "(", "this", ",", "android", ".", "R", ".", "layout", ".", "simple_spinner_item", ",", "checkFrequencies", ")", ";", "checkFrequenciesAdapter", ".", "setDropDownViewResource", "(", "android", ".", "R", ".", "layout", ".", "simple_spinner_dropdown_item", ")", ";", "mCheckFrequencyView", ".", "setAdapter", "(", "checkFrequenciesAdapter", ")", ";", "if", "(", "info", ".", "mVisibleLimitDefault", "=", "=", "-", "1", ")", "{", "enableEASSyncWindowSpinner", "(", ")", ";", "}", "if", "(", "mAccount", ".", "mIsDefault", "|", "|", "makeDefault", ")", "{", "mDefaultView", ".", "setChecked", "(", "true", ")", ";", "}", "mNotifyView", ".", "setChecked", "(", "(", "mAccount", ".", "getFlags", "(", ")", "&", "EmailContent", ".", "Account", ".", "FLAGS_NOTIFY_NEW_MAIL", ")", "!", "=", "0", ")", ";", "SpinnerOption", ".", "setSpinnerOptionValue", "(", "mCheckFrequencyView", ",", "mAccount", ".", "getSyncInterval", "(", ")", ")", ";", "mEasFlowMode", "=", "getIntent", "(", ")", ".", "getBooleanExtra", "(", "EXTRA_EAS_FLOW", ",", "false", ")", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "info", ".", "mScheme", ")", ")", "{", "mSyncContactsView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "mSyncContactsView", ".", "setChecked", "(", "true", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "run", "(", "AccountManagerFuture", "<", "Bundle", ">", "future", ")", "{", "try", "{", "Bundle", "bundle", "=", "future", ".", "getResult", "(", ")", ";", "bundle", ".", "keySet", "(", ")", ";", "mHandler", ".", "post", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "finishOnDone", "(", ")", ";", "}", "}", ")", ";", "return", ";", "}", "catch", "(", "OperationCanceledException", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "}", "catch", "(", "AuthenticatorException", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "}", "showErrorDialog", "(", "R", ".", "string", ".", "account_setup_failed_dlg_auth_message", ",", "R", ".", "string", ".", "system_account_create_failed", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "finishOnDone", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "showErrorDialog", "(", "final", "int", "msgResId", ",", "final", "Object", ".", ".", ".", "args", ")", "{", "mHandler", ".", "post", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "new", "AlertDialog", ".", "Builder", "(", "AccountSetupOptions", ".", "this", ")", ".", "setIcon", "(", "android", ".", "R", ".", "drawable", ".", "ic_dialog_alert", ")", ".", "setTitle", "(", "getString", "(", "R", ".", "string", ".", "account_setup_failed_dlg_title", ")", ")", ".", "setMessage", "(", "getString", "(", "msgResId", ",", "args", ")", ")", ".", "setCancelable", "(", "true", ")", ".", "setPositiveButton", "(", "getString", "(", "R", ".", "string", ".", "account_setup_failed_dlg_edit_details_action", ")", ",", "new", "DialogInterface", ".", "OnClickListener", "(", ")", "{", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "which", ")", "{", "finish", "(", ")", ";", "}", "}", ")", ".", "show", "(", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "new", "AlertDialog", ".", "Builder", "(", "AccountSetupOptions", ".", "this", ")", ".", "setIcon", "(", "android", ".", "R", ".", "drawable", ".", "ic_dialog_alert", ")", ".", "setTitle", "(", "getString", "(", "R", ".", "string", ".", "account_setup_failed_dlg_title", ")", ")", ".", "setMessage", "(", "getString", "(", "msgResId", ",", "args", ")", ")", ".", "setCancelable", "(", "true", ")", ".", "setPositiveButton", "(", "getString", "(", "R", ".", "string", ".", "account_setup_failed_dlg_edit_details_action", ")", ",", "new", "DialogInterface", ".", "OnClickListener", "(", ")", "{", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "which", ")", "{", "finish", "(", ")", ";", "}", "}", ")", ".", "show", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "which", ")", "{", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "finishOnDone", "(", ")", "{", "AccountSettingsUtils", ".", "commitSettings", "(", "this", ",", "mAccount", ")", ";", "Email", ".", "setServicesEnabled", "(", "this", ")", ";", "AccountSetupNames", ".", "actionSetNames", "(", "this", ",", "mAccount", ".", "mId", ",", "mEasFlowMode", ")", ";", "startService", "(", "new", "Intent", "(", "getApplicationContext", "(", ")", ",", "com", ".", "android", ".", "exchange", ".", "SyncManager", ".", "class", ")", ")", ";", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onDone", "(", ")", "{", "mAccount", ".", "setDisplayName", "(", "mAccount", ".", "getEmailAddress", "(", ")", ")", ";", "int", "newFlags", "=", "mAccount", ".", "getFlags", "(", ")", "&", "~", "(", "EmailContent", ".", "Account", ".", "FLAGS_NOTIFY_NEW_MAIL", ")", ";", "if", "(", "mNotifyView", ".", "isChecked", "(", ")", ")", "{", "newFlags", "|", "=", "EmailContent", ".", "Account", ".", "FLAGS_NOTIFY_NEW_MAIL", ";", "}", "mAccount", ".", "setFlags", "(", "newFlags", ")", ";", "mAccount", ".", "setSyncInterval", "(", "(", "Integer", ")", "(", "(", "SpinnerOption", ")", "mCheckFrequencyView", ".", "getSelectedItem", "(", ")", ")", ".", "value", ")", ";", "if", "(", "mSyncWindowView", ".", "getVisibility", "(", ")", "=", "=", "View", ".", "VISIBLE", ")", "{", "int", "window", "=", "(", "Integer", ")", "(", "(", "SpinnerOption", ")", "mSyncWindowView", ".", "getSelectedItem", "(", ")", ")", ".", "value", ";", "mAccount", ".", "setSyncLookback", "(", "window", ")", ";", "}", "mAccount", ".", "setDefaultAccount", "(", "mDefaultView", ".", "isChecked", "(", ")", ")", ";", "if", "(", "!", "mAccount", ".", "isSaved", "(", ")", "&", "&", "mAccount", ".", "mHostAuthRecv", "!", "=", "null", "&", "&", "mAccount", ".", "mHostAuthRecv", ".", "mProtocol", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "boolean", "alsoSyncContacts", "=", "mSyncContactsView", ".", "isChecked", "(", ")", ";", "ExchangeStore", ".", "addSystemAccount", "(", "getApplication", "(", ")", ",", "mAccount", ",", "alsoSyncContacts", ",", "mAccountManagerCallback", ")", ";", "}", "else", "{", "finishOnDone", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "View", "v", ")", "{", "switch", "(", "v", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "next", ":", "onDone", "(", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "private", "void", "enableEASSyncWindowSpinner", "(", ")", "{", "findViewById", "(", "R", ".", "id", ".", "account_sync_window_label", ")", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "mSyncWindowView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "CharSequence", "[", "]", "windowValues", "=", "getResources", "(", ")", ".", "getTextArray", "(", "R", ".", "array", ".", "account_settings_mail_window_values", ")", ";", "CharSequence", "[", "]", "windowEntries", "=", "getResources", "(", ")", ".", "getTextArray", "(", "R", ".", "array", ".", "account_settings_mail_window_entries", ")", ";", "SpinnerOption", "[", "]", "windowOptions", "=", "new", "SpinnerOption", "[", "windowEntries", ".", "length", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "windowEntries", ".", "length", ";", "i", "+", "+", ")", "{", "windowOptions", "[", "i", "]", "=", "new", "SpinnerOption", "(", "Integer", ".", "valueOf", "(", "windowValues", "[", "i", "]", ".", "toString", "(", ")", ")", ",", "windowEntries", "[", "i", "]", ".", "toString", "(", ")", ")", ";", "}", "ArrayAdapter", "<", "SpinnerOption", ">", "windowOptionsAdapter", "=", "new", "ArrayAdapter", "<", "SpinnerOption", ">", "(", "this", ",", "android", ".", "R", ".", "layout", ".", "simple_spinner_item", ",", "windowOptions", ")", ";", "windowOptionsAdapter", ".", "setDropDownViewResource", "(", "android", ".", "R", ".", "layout", ".", "simple_spinner_dropdown_item", ")", ";", "mSyncWindowView", ".", "setAdapter", "(", "windowOptionsAdapter", ")", ";", "SpinnerOption", ".", "setSpinnerOptionValue", "(", "mSyncWindowView", ",", "mAccount", ".", "getSyncLookback", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionCheckSettings", "(", "Activity", "fromActivity", ",", "EmailContent", ".", "Account", "account", ",", "boolean", "checkIncoming", ",", "boolean", "checkOutgoing", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSetupCheckSettings", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "i", ".", "putExtra", "(", "EXTRA_CHECK_INCOMING", ",", "checkIncoming", ")", ";", "i", ".", "putExtra", "(", "EXTRA_CHECK_OUTGOING", ",", "checkOutgoing", ")", ";", "fromActivity", ".", "startActivityForResult", "(", "i", ",", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onCreate", "(", "savedInstanceState", ")", ";", "setContentView", "(", "R", ".", "layout", ".", "account_setup_check_settings", ")", ";", "mMessageView", "=", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "message", ")", ";", "mProgressBar", "=", "(", "ProgressBar", ")", "findViewById", "(", "R", ".", "id", ".", "progress", ")", ";", "(", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "cancel", ")", ")", ".", "setOnClickListener", "(", "this", ")", ";", "setMessage", "(", "R", ".", "string", ".", "account_setup_check_settings_retr_info_msg", ")", ";", "mProgressBar", ".", "setIndeterminate", "(", "true", ")", ";", "if", "(", "DBG_SKIP_CHECK_OK", "|", "|", "DBG_SKIP_CHECK_ERR", ")", "{", "setResult", "(", "DBG_SKIP_CHECK_OK", "?", "RESULT_OK", ":", "RESULT_CANCELED", ")", ";", "finish", "(", ")", ";", "return", ";", "}", "mAccount", "=", "(", "EmailContent", ".", "Account", ")", "getIntent", "(", ")", ".", "getParcelableExtra", "(", "EXTRA_ACCOUNT", ")", ";", "mCheckIncoming", "=", "getIntent", "(", ")", ".", "getBooleanExtra", "(", "EXTRA_CHECK_INCOMING", ",", "false", ")", ";", "mCheckOutgoing", "=", "getIntent", "(", ")", ".", "getBooleanExtra", "(", "EXTRA_CHECK_OUTGOING", ",", "false", ")", ";", "new", "Thread", "(", ")", "{", "@", "Override", "public", "void", "run", "(", ")", "{", "Process", ".", "setThreadPriority", "(", "Process", ".", "THREAD_PRIORITY_BACKGROUND", ")", ";", "try", "{", "if", "(", "mDestroyed", ")", "{", "return", ";", "}", "if", "(", "mCanceled", ")", "{", "finish", "(", ")", ";", "return", ";", "}", "if", "(", "mCheckIncoming", ")", "{", "setMessage", "(", "R", ".", "string", ".", "account_setup_check_settings_check_incoming_msg", ")", ";", "Store", "store", "=", "Store", ".", "getInstance", "(", "mAccount", ".", "getStoreUri", "(", "AccountSetupCheckSettings", ".", "this", ")", ",", "getApplication", "(", ")", ",", "null", ")", ";", "store", ".", "checkSettings", "(", ")", ";", "}", "if", "(", "mDestroyed", ")", "{", "return", ";", "}", "if", "(", "mCanceled", ")", "{", "finish", "(", ")", ";", "return", ";", "}", "if", "(", "mCheckOutgoing", ")", "{", "setMessage", "(", "R", ".", "string", ".", "account_setup_check_settings_check_outgoing_msg", ")", ";", "Sender", "sender", "=", "Sender", ".", "getInstance", "(", "getApplication", "(", ")", ",", "mAccount", ".", "getSenderUri", "(", "AccountSetupCheckSettings", ".", "this", ")", ")", ";", "sender", ".", "close", "(", ")", ";", "sender", ".", "open", "(", ")", ";", "sender", ".", "close", "(", ")", ";", "}", "if", "(", "mDestroyed", ")", "{", "return", ";", "}", "if", "(", "mCanceled", ")", "{", "finish", "(", ")", ";", "return", ";", "}", "setResult", "(", "RESULT_OK", ")", ";", "finish", "(", ")", ";", "}", "catch", "(", "final", "AuthenticationFailedException", "afe", ")", "{", "String", "message", "=", "afe", ".", "getMessage", "(", ")", ";", "int", "id", "=", "(", "message", "=", "=", "null", ")", "?", "R", ".", "string", ".", "account_setup_failed_dlg_auth_message", ":", "R", ".", "string", ".", "account_setup_failed_dlg_auth_message_fmt", ";", "showErrorDialog", "(", "id", ",", "message", ")", ";", "}", "catch", "(", "final", "CertificateValidationException", "cve", ")", "{", "String", "message", "=", "cve", ".", "getMessage", "(", ")", ";", "int", "id", "=", "(", "message", "=", "=", "null", ")", "?", "R", ".", "string", ".", "account_setup_failed_dlg_certificate_message", ":", "R", ".", "string", ".", "account_setup_failed_dlg_certificate_message_fmt", ";", "showErrorDialog", "(", "id", ",", "message", ")", ";", "}", "catch", "(", "final", "MessagingException", "me", ")", "{", "int", "id", ";", "String", "message", "=", "me", ".", "getMessage", "(", ")", ";", "switch", "(", "me", ".", "getExceptionType", "(", ")", ")", "{", "case", "MessagingException", ".", "IOERROR", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_ioerror", ";", "break", ";", "case", "MessagingException", ".", "TLS_REQUIRED", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_tls_required", ";", "break", ";", "case", "MessagingException", ".", "AUTH_REQUIRED", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_auth_required", ";", "break", ";", "case", "MessagingException", ".", "GENERAL_SECURITY", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_security", ";", "break", ";", "default", ":", "id", "=", "(", "message", "=", "=", "null", ")", "?", "R", ".", "string", ".", "account_setup_failed_dlg_server_message", ":", "R", ".", "string", ".", "account_setup_failed_dlg_server_message_fmt", ";", "break", ";", "}", "showErrorDialog", "(", "id", ",", "message", ")", ";", "}", "}", "}", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "Process", ".", "setThreadPriority", "(", "Process", ".", "THREAD_PRIORITY_BACKGROUND", ")", ";", "try", "{", "if", "(", "mDestroyed", ")", "{", "return", ";", "}", "if", "(", "mCanceled", ")", "{", "finish", "(", ")", ";", "return", ";", "}", "if", "(", "mCheckIncoming", ")", "{", "setMessage", "(", "R", ".", "string", ".", "account_setup_check_settings_check_incoming_msg", ")", ";", "Store", "store", "=", "Store", ".", "getInstance", "(", "mAccount", ".", "getStoreUri", "(", "AccountSetupCheckSettings", ".", "this", ")", ",", "getApplication", "(", ")", ",", "null", ")", ";", "store", ".", "checkSettings", "(", ")", ";", "}", "if", "(", "mDestroyed", ")", "{", "return", ";", "}", "if", "(", "mCanceled", ")", "{", "finish", "(", ")", ";", "return", ";", "}", "if", "(", "mCheckOutgoing", ")", "{", "setMessage", "(", "R", ".", "string", ".", "account_setup_check_settings_check_outgoing_msg", ")", ";", "Sender", "sender", "=", "Sender", ".", "getInstance", "(", "getApplication", "(", ")", ",", "mAccount", ".", "getSenderUri", "(", "AccountSetupCheckSettings", ".", "this", ")", ")", ";", "sender", ".", "close", "(", ")", ";", "sender", ".", "open", "(", ")", ";", "sender", ".", "close", "(", ")", ";", "}", "if", "(", "mDestroyed", ")", "{", "return", ";", "}", "if", "(", "mCanceled", ")", "{", "finish", "(", ")", ";", "return", ";", "}", "setResult", "(", "RESULT_OK", ")", ";", "finish", "(", ")", ";", "}", "catch", "(", "final", "AuthenticationFailedException", "afe", ")", "{", "String", "message", "=", "afe", ".", "getMessage", "(", ")", ";", "int", "id", "=", "(", "message", "=", "=", "null", ")", "?", "R", ".", "string", ".", "account_setup_failed_dlg_auth_message", ":", "R", ".", "string", ".", "account_setup_failed_dlg_auth_message_fmt", ";", "showErrorDialog", "(", "id", ",", "message", ")", ";", "}", "catch", "(", "final", "CertificateValidationException", "cve", ")", "{", "String", "message", "=", "cve", ".", "getMessage", "(", ")", ";", "int", "id", "=", "(", "message", "=", "=", "null", ")", "?", "R", ".", "string", ".", "account_setup_failed_dlg_certificate_message", ":", "R", ".", "string", ".", "account_setup_failed_dlg_certificate_message_fmt", ";", "showErrorDialog", "(", "id", ",", "message", ")", ";", "}", "catch", "(", "final", "MessagingException", "me", ")", "{", "int", "id", ";", "String", "message", "=", "me", ".", "getMessage", "(", ")", ";", "switch", "(", "me", ".", "getExceptionType", "(", ")", ")", "{", "case", "MessagingException", ".", "IOERROR", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_ioerror", ";", "break", ";", "case", "MessagingException", ".", "TLS_REQUIRED", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_tls_required", ";", "break", ";", "case", "MessagingException", ".", "AUTH_REQUIRED", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_auth_required", ";", "break", ";", "case", "MessagingException", ".", "GENERAL_SECURITY", ":", "id", "=", "R", ".", "string", ".", "account_setup_failed_security", ";", "break", ";", "default", ":", "id", "=", "(", "message", "=", "=", "null", ")", "?", "R", ".", "string", ".", "account_setup_failed_dlg_server_message", ":", "R", ".", "string", ".", "account_setup_failed_dlg_server_message_fmt", ";", "break", ";", "}", "showErrorDialog", "(", "id", ",", "message", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onDestroy", "(", ")", "{", "super", ".", "onDestroy", "(", ")", ";", "mDestroyed", "=", "true", ";", "mCanceled", "=", "true", ";", "}", "</s>"]
["<s>", "private", "void", "setMessage", "(", "final", "int", "resId", ")", "{", "mHandler", ".", "post", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "if", "(", "mDestroyed", ")", "{", "return", ";", "}", "mMessageView", ".", "setText", "(", "getString", "(", "resId", ")", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "if", "(", "mDestroyed", ")", "{", "return", ";", "}", "mMessageView", ".", "setText", "(", "getString", "(", "resId", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "showErrorDialog", "(", "final", "int", "msgResId", ",", "final", "Object", ".", ".", ".", "args", ")", "{", "mHandler", ".", "post", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "if", "(", "mDestroyed", ")", "{", "return", ";", "}", "mProgressBar", ".", "setIndeterminate", "(", "false", ")", ";", "new", "AlertDialog", ".", "Builder", "(", "AccountSetupCheckSettings", ".", "this", ")", ".", "setIcon", "(", "android", ".", "R", ".", "drawable", ".", "ic_dialog_alert", ")", ".", "setTitle", "(", "getString", "(", "R", ".", "string", ".", "account_setup_failed_dlg_title", ")", ")", ".", "setMessage", "(", "getString", "(", "msgResId", ",", "args", ")", ")", ".", "setCancelable", "(", "true", ")", ".", "setPositiveButton", "(", "getString", "(", "R", ".", "string", ".", "account_setup_failed_dlg_edit_details_action", ")", ",", "new", "DialogInterface", ".", "OnClickListener", "(", ")", "{", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "which", ")", "{", "if", "(", "DBG_FORCE_RESULT_OK", ")", "{", "setResult", "(", "RESULT_OK", ")", ";", "}", "finish", "(", ")", ";", "}", "}", ")", ".", "show", "(", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "if", "(", "mDestroyed", ")", "{", "return", ";", "}", "mProgressBar", ".", "setIndeterminate", "(", "false", ")", ";", "new", "AlertDialog", ".", "Builder", "(", "AccountSetupCheckSettings", ".", "this", ")", ".", "setIcon", "(", "android", ".", "R", ".", "drawable", ".", "ic_dialog_alert", ")", ".", "setTitle", "(", "getString", "(", "R", ".", "string", ".", "account_setup_failed_dlg_title", ")", ")", ".", "setMessage", "(", "getString", "(", "msgResId", ",", "args", ")", ")", ".", "setCancelable", "(", "true", ")", ".", "setPositiveButton", "(", "getString", "(", "R", ".", "string", ".", "account_setup_failed_dlg_edit_details_action", ")", ",", "new", "DialogInterface", ".", "OnClickListener", "(", ")", "{", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "which", ")", "{", "if", "(", "DBG_FORCE_RESULT_OK", ")", "{", "setResult", "(", "RESULT_OK", ")", ";", "}", "finish", "(", ")", ";", "}", "}", ")", ".", "show", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "which", ")", "{", "if", "(", "DBG_FORCE_RESULT_OK", ")", "{", "setResult", "(", "RESULT_OK", ")", ";", "}", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onCancel", "(", ")", "{", "mCanceled", "=", "true", ";", "setMessage", "(", "R", ".", "string", ".", "account_setup_check_settings_canceling_msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "View", "v", ")", "{", "switch", "(", "v", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "cancel", ":", "onCancel", "(", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "setSpinnerOptionValue", "(", "Spinner", "spinner", ",", "Object", "value", ")", "{", "for", "(", "int", "i", "=", "0", ",", "count", "=", "spinner", ".", "getCount", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "SpinnerOption", "so", "=", "(", "SpinnerOption", ")", "spinner", ".", "getItemAtPosition", "(", "i", ")", ";", "if", "(", "so", ".", "value", ".", "equals", "(", "value", ")", ")", "{", "spinner", ".", "setSelection", "(", "i", ",", "true", ")", ";", "return", ";", "}", "}", "}", "</s>"]
["<s>", "public", "SpinnerOption", "(", "Object", "value", ",", "String", "label", ")", "{", "this", ".", "value", "=", "value", ";", "this", ".", "label", "=", "label", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "label", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionSelectAccountType", "(", "Activity", "fromActivity", ",", "Account", "account", ",", "boolean", "makeDefault", ",", "boolean", "easFlowMode", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSetupAccountType", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "i", ".", "putExtra", "(", "EXTRA_MAKE_DEFAULT", ",", "makeDefault", ")", ";", "i", ".", "putExtra", "(", "EXTRA_EAS_FLOW", ",", "easFlowMode", ")", ";", "fromActivity", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onCreate", "(", "savedInstanceState", ")", ";", "mAccount", "=", "(", "Account", ")", "getIntent", "(", ")", ".", "getParcelableExtra", "(", "EXTRA_ACCOUNT", ")", ";", "mMakeDefault", "=", "getIntent", "(", ")", ".", "getBooleanExtra", "(", "EXTRA_MAKE_DEFAULT", ",", "false", ")", ";", "boolean", "easFlowMode", "=", "getIntent", "(", ")", ".", "getBooleanExtra", "(", "EXTRA_EAS_FLOW", ",", "false", ")", ";", "if", "(", "easFlowMode", ")", "{", "onExchange", "(", "true", ")", ";", "return", ";", "}", "setContentView", "(", "R", ".", "layout", ".", "account_setup_account_type", ")", ";", "(", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "pop", ")", ")", ".", "setOnClickListener", "(", "this", ")", ";", "(", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "imap", ")", ")", ".", "setOnClickListener", "(", "this", ")", ";", "(", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "exchange", ")", ")", ".", "setOnClickListener", "(", "this", ")", ";", "if", "(", "isExchangeAvailable", "(", ")", ")", "{", "findViewById", "(", "R", ".", "id", ".", "exchange", ")", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onPop", "(", ")", "{", "try", "{", "URI", "uri", "=", "new", "URI", "(", "mAccount", ".", "getStoreUri", "(", "this", ")", ")", ";", "uri", "=", "new", "URI", "(", "\"", "<STR_LIT:3>", "\"", ",", "uri", ".", "getUserInfo", "(", ")", ",", "uri", ".", "getHost", "(", ")", ",", "uri", ".", "getPort", "(", ")", ",", "null", ",", "null", ",", "null", ")", ";", "mAccount", ".", "setStoreUri", "(", "this", ",", "uri", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "throw", "new", "Error", "(", "use", ")", ";", "}", "AccountSetupIncoming", ".", "actionIncomingSettings", "(", "this", ",", "mAccount", ",", "mMakeDefault", ")", ";", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onImap", "(", ")", "{", "try", "{", "URI", "uri", "=", "new", "URI", "(", "mAccount", ".", "getStoreUri", "(", "this", ")", ")", ";", "uri", "=", "new", "URI", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ".", "getUserInfo", "(", ")", ",", "uri", ".", "getHost", "(", ")", ",", "uri", ".", "getPort", "(", ")", ",", "null", ",", "null", ",", "null", ")", ";", "mAccount", ".", "setStoreUri", "(", "this", ",", "uri", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "throw", "new", "Error", "(", "use", ")", ";", "}", "mAccount", ".", "setDeletePolicy", "(", "Account", ".", "DELETE_POLICY_ON_DELETE", ")", ";", "AccountSetupIncoming", ".", "actionIncomingSettings", "(", "this", ",", "mAccount", ",", "mMakeDefault", ")", ";", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onExchange", "(", "boolean", "easFlowMode", ")", "{", "try", "{", "URI", "uri", "=", "new", "URI", "(", "mAccount", ".", "getStoreUri", "(", "this", ")", ")", ";", "uri", "=", "new", "URI", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ".", "getUserInfo", "(", ")", ",", "uri", ".", "getHost", "(", ")", ",", "uri", ".", "getPort", "(", ")", ",", "null", ",", "null", ",", "null", ")", ";", "mAccount", ".", "setStoreUri", "(", "this", ",", "uri", ".", "toString", "(", ")", ")", ";", "mAccount", ".", "setSenderUri", "(", "this", ",", "uri", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "throw", "new", "Error", "(", "use", ")", ";", "}", "mAccount", ".", "setDeletePolicy", "(", "Account", ".", "DELETE_POLICY_ON_DELETE", ")", ";", "mAccount", ".", "setSyncInterval", "(", "Account", ".", "CHECK_INTERVAL_PUSH", ")", ";", "mAccount", ".", "setSyncLookback", "(", "1", ")", ";", "AccountSetupExchange", ".", "actionIncomingSettings", "(", "this", ",", "mAccount", ",", "mMakeDefault", ",", "easFlowMode", ")", ";", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "isExchangeAvailable", "(", ")", "{", "try", "{", "URI", "uri", "=", "new", "URI", "(", "mAccount", ".", "getStoreUri", "(", "this", ")", ")", ";", "uri", "=", "new", "URI", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ".", "getUserInfo", "(", ")", ",", "uri", ".", "getHost", "(", ")", ",", "uri", ".", "getPort", "(", ")", ",", "null", ",", "null", ",", "null", ")", ";", "Store", ".", "StoreInfo", "storeInfo", "=", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "uri", ".", "toString", "(", ")", ",", "this", ")", ";", "return", "(", "storeInfo", "!", "=", "null", "&", "&", "checkAccountInstanceLimit", "(", "storeInfo", ")", ")", ";", "}", "catch", "(", "URISyntaxException", "e", ")", "{", "return", "false", ";", "}", "}", "</s>"]
["<s>", "boolean", "checkAccountInstanceLimit", "(", "Store", ".", "StoreInfo", "storeInfo", ")", "{", "if", "(", "storeInfo", ".", "mAccountInstanceLimit", "<", "0", ")", "{", "return", "true", ";", "}", "int", "currentAccountsCount", "=", "0", ";", "Cursor", "c", "=", "null", ";", "try", "{", "c", "=", "this", ".", "getContentResolver", "(", ")", ".", "query", "(", "Account", ".", "CONTENT_URI", ",", "Account", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "Account", "account", "=", "EmailContent", ".", "getContent", "(", "c", ",", "Account", ".", "class", ")", ";", "String", "storeUri", "=", "account", ".", "getStoreUri", "(", "this", ")", ";", "if", "(", "storeUri", "!", "=", "null", "&", "&", "storeUri", ".", "startsWith", "(", "storeInfo", ".", "mScheme", ")", ")", "{", "currentAccountsCount", "+", "+", ";", "}", "}", "}", "finally", "{", "if", "(", "c", "!", "=", "null", ")", "{", "c", ".", "close", "(", ")", ";", "}", "}", "return", "(", "currentAccountsCount", "<", "storeInfo", ".", "mAccountInstanceLimit", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "View", "v", ")", "{", "switch", "(", "v", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "pop", ":", "onPop", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "imap", ":", "onImap", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "exchange", ":", "onExchange", "(", "false", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "actionNewAccount", "(", "Activity", "fromActivity", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSetupBasics", ".", "class", ")", ";", "fromActivity", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Intent", "actionSetupExchangeIntent", "(", "Context", "context", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "context", ",", "AccountSetupBasics", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_EAS_FLOW", ",", "true", ")", ";", "return", "i", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onCreate", "(", "savedInstanceState", ")", ";", "setContentView", "(", "R", ".", "layout", ".", "account_setup_basics", ")", ";", "mEmailView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_email", ")", ";", "mPasswordView", "=", "(", "EditText", ")", "findViewById", "(", "R", ".", "id", ".", "account_password", ")", ";", "mDefaultView", "=", "(", "CheckBox", ")", "findViewById", "(", "R", ".", "id", ".", "account_default", ")", ";", "mNextButton", "=", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "next", ")", ";", "mManualSetupButton", "=", "(", "Button", ")", "findViewById", "(", "R", ".", "id", ".", "manual_setup", ")", ";", "mNextButton", ".", "setOnClickListener", "(", "this", ")", ";", "mManualSetupButton", ".", "setOnClickListener", "(", "this", ")", ";", "mEmailView", ".", "addTextChangedListener", "(", "this", ")", ";", "mPasswordView", ".", "addTextChangedListener", "(", "this", ")", ";", "Cursor", "c", "=", "null", ";", "try", "{", "c", "=", "getContentResolver", "(", ")", ".", "query", "(", "EmailContent", ".", "Account", ".", "CONTENT_URI", ",", "EmailContent", ".", "Account", ".", "ID_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "if", "(", "c", ".", "getCount", "(", ")", ">", "0", ")", "{", "mDefaultView", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "}", "finally", "{", "if", "(", "c", "!", "=", "null", ")", "{", "c", ".", "close", "(", ")", ";", "}", "}", "mEasFlowMode", "=", "getIntent", "(", ")", ".", "getBooleanExtra", "(", "EXTRA_EAS_FLOW", ",", "false", ")", ";", "if", "(", "mEasFlowMode", ")", "{", "mManualSetupButton", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "TextView", "welcomeView", "=", "(", "TextView", ")", "findViewById", "(", "R", ".", "id", ".", "instructions", ")", ";", "welcomeView", ".", "setText", "(", "R", ".", "string", ".", "accounts_welcome_exchange", ")", ";", "}", "if", "(", "savedInstanceState", "!", "=", "null", "&", "&", "savedInstanceState", ".", "containsKey", "(", "EXTRA_ACCOUNT", ")", ")", "{", "mAccount", "=", "(", "EmailContent", ".", "Account", ")", "savedInstanceState", ".", "getParcelable", "(", "EXTRA_ACCOUNT", ")", ";", "}", "if", "(", "savedInstanceState", "!", "=", "null", "&", "&", "savedInstanceState", ".", "containsKey", "(", "STATE_KEY_PROVIDER", ")", ")", "{", "mProvider", "=", "(", "Provider", ")", "savedInstanceState", ".", "getSerializable", "(", "STATE_KEY_PROVIDER", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onResume", "(", ")", "{", "super", ".", "onResume", "(", ")", ";", "validateFields", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onSaveInstanceState", "(", "Bundle", "outState", ")", "{", "super", ".", "onSaveInstanceState", "(", "outState", ")", ";", "outState", ".", "putParcelable", "(", "EXTRA_ACCOUNT", ",", "mAccount", ")", ";", "if", "(", "mProvider", "!", "=", "null", ")", "{", "outState", ".", "putSerializable", "(", "STATE_KEY_PROVIDER", ",", "mProvider", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "afterTextChanged", "(", "Editable", "s", ")", "{", "validateFields", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "beforeTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "count", ",", "int", "after", ")", "{", "}", "</s>"]
["<s>", "public", "void", "onTextChanged", "(", "CharSequence", "s", ",", "int", "start", ",", "int", "before", ",", "int", "count", ")", "{", "}", "</s>"]
["<s>", "private", "void", "validateFields", "(", ")", "{", "boolean", "valid", "=", "Utility", ".", "requiredFieldValid", "(", "mEmailView", ")", "&", "&", "Utility", ".", "requiredFieldValid", "(", "mPasswordView", ")", "&", "&", "mEmailValidator", ".", "isValid", "(", "mEmailView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ")", ";", "mNextButton", ".", "setEnabled", "(", "valid", ")", ";", "mManualSetupButton", ".", "setEnabled", "(", "valid", ")", ";", "Utility", ".", "setCompoundDrawablesAlpha", "(", "mNextButton", ",", "mNextButton", ".", "isEnabled", "(", ")", "?", "<NUM_LIT:255>", ":", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "private", "String", "getOwnerName", "(", ")", "{", "String", "name", "=", "null", ";", "if", "(", "name", "=", "=", "null", "|", "|", "name", ".", "length", "(", ")", "=", "=", "0", ")", "{", "long", "defaultId", "=", "Account", ".", "getDefaultAccountId", "(", "this", ")", ";", "if", "(", "defaultId", "!", "=", "-", "1", ")", "{", "Account", "account", "=", "Account", ".", "restoreAccountWithId", "(", "this", ",", "defaultId", ")", ";", "if", "(", "account", "!", "=", "null", ")", "{", "name", "=", "account", ".", "getSenderName", "(", ")", ";", "}", "}", "}", "return", "name", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Dialog", "onCreateDialog", "(", "int", "id", ")", "{", "if", "(", "id", "=", "=", "DIALOG_NOTE", ")", "{", "if", "(", "mProvider", "!", "=", "null", "&", "&", "mProvider", ".", "note", "!", "=", "null", ")", "{", "return", "new", "AlertDialog", ".", "Builder", "(", "this", ")", ".", "setIcon", "(", "android", ".", "R", ".", "drawable", ".", "ic_dialog_alert", ")", ".", "setTitle", "(", "android", ".", "R", ".", "string", ".", "dialog_alert_title", ")", ".", "setMessage", "(", "mProvider", ".", "note", ")", ".", "setPositiveButton", "(", "getString", "(", "R", ".", "string", ".", "okay_action", ")", ",", "new", "DialogInterface", ".", "OnClickListener", "(", ")", "{", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "which", ")", "{", "finishAutoSetup", "(", ")", ";", "}", "}", ")", ".", "setNegativeButton", "(", "getString", "(", "R", ".", "string", ".", "cancel_action", ")", ",", "null", ")", ".", "create", "(", ")", ";", "}", "}", "else", "if", "(", "id", "=", "=", "DIALOG_DUPLICATE_ACCOUNT", ")", "{", "return", "new", "AlertDialog", ".", "Builder", "(", "this", ")", ".", "setIcon", "(", "android", ".", "R", ".", "drawable", ".", "ic_dialog_alert", ")", ".", "setTitle", "(", "R", ".", "string", ".", "account_duplicate_dlg_title", ")", ".", "setMessage", "(", "getString", "(", "R", ".", "string", ".", "account_duplicate_dlg_message_fmt", ",", "mDuplicateAccountName", ")", ")", ".", "setPositiveButton", "(", "R", ".", "string", ".", "okay_action", ",", "new", "DialogInterface", ".", "OnClickListener", "(", ")", "{", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "which", ")", "{", "dismissDialog", "(", "DIALOG_DUPLICATE_ACCOUNT", ")", ";", "}", "}", ")", ".", "create", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "which", ")", "{", "finishAutoSetup", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "which", ")", "{", "dismissDialog", "(", "DIALOG_DUPLICATE_ACCOUNT", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onPrepareDialog", "(", "int", "id", ",", "Dialog", "dialog", ")", "{", "switch", "(", "id", ")", "{", "case", "DIALOG_NOTE", ":", "if", "(", "mProvider", "!", "=", "null", "&", "&", "mProvider", ".", "note", "!", "=", "null", ")", "{", "AlertDialog", "alert", "=", "(", "AlertDialog", ")", "dialog", ";", "alert", ".", "setMessage", "(", "mProvider", ".", "note", ")", ";", "}", "break", ";", "case", "DIALOG_DUPLICATE_ACCOUNT", ":", "if", "(", "mDuplicateAccountName", "!", "=", "null", ")", "{", "AlertDialog", "alert", "=", "(", "AlertDialog", ")", "dialog", ";", "alert", ".", "setMessage", "(", "getString", "(", "R", ".", "string", ".", "account_duplicate_dlg_message_fmt", ",", "mDuplicateAccountName", ")", ")", ";", "}", "break", ";", "}", "}", "</s>"]
["<s>", "private", "void", "finishAutoSetup", "(", ")", "{", "String", "email", "=", "mEmailView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ";", "String", "password", "=", "mPasswordView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ";", "String", "[", "]", "emailParts", "=", "email", ".", "split", "(", "\"", "<STR_LIT:@>", "\"", ")", ";", "String", "user", "=", "emailParts", "[", "0", "]", ";", "String", "domain", "=", "emailParts", "[", "1", "]", ";", "URI", "incomingUri", "=", "null", ";", "URI", "outgoingUri", "=", "null", ";", "try", "{", "String", "incomingUsername", "=", "mProvider", ".", "incomingUsernameTemplate", ";", "incomingUsername", "=", "incomingUsername", ".", "replaceAll", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "email", ")", ";", "incomingUsername", "=", "incomingUsername", ".", "replaceAll", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "user", ")", ";", "incomingUsername", "=", "incomingUsername", ".", "replaceAll", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "domain", ")", ";", "URI", "incomingUriTemplate", "=", "mProvider", ".", "incomingUriTemplate", ";", "incomingUri", "=", "new", "URI", "(", "incomingUriTemplate", ".", "getScheme", "(", ")", ",", "incomingUsername", "+", "\"", "<STR_LIT::>", "\"", "+", "password", ",", "incomingUriTemplate", ".", "getHost", "(", ")", ",", "incomingUriTemplate", ".", "getPort", "(", ")", ",", "incomingUriTemplate", ".", "getPath", "(", ")", ",", "null", ",", "null", ")", ";", "String", "outgoingUsername", "=", "mProvider", ".", "outgoingUsernameTemplate", ";", "outgoingUsername", "=", "outgoingUsername", ".", "replaceAll", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "email", ")", ";", "outgoingUsername", "=", "outgoingUsername", ".", "replaceAll", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "user", ")", ";", "outgoingUsername", "=", "outgoingUsername", ".", "replaceAll", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "domain", ")", ";", "URI", "outgoingUriTemplate", "=", "mProvider", ".", "outgoingUriTemplate", ";", "outgoingUri", "=", "new", "URI", "(", "outgoingUriTemplate", ".", "getScheme", "(", ")", ",", "outgoingUsername", "+", "\"", "<STR_LIT::>", "\"", "+", "password", ",", "outgoingUriTemplate", ".", "getHost", "(", ")", ",", "outgoingUriTemplate", ".", "getPort", "(", ")", ",", "outgoingUriTemplate", ".", "getPath", "(", ")", ",", "null", ",", "null", ")", ";", "mDuplicateAccountName", "=", "Utility", ".", "findDuplicateAccount", "(", "this", ",", "-", "1", ",", "incomingUri", ".", "getHost", "(", ")", ",", "incomingUsername", ")", ";", "if", "(", "mDuplicateAccountName", "!", "=", "null", ")", "{", "this", ".", "showDialog", "(", "DIALOG_DUPLICATE_ACCOUNT", ")", ";", "return", ";", "}", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "onManualSetup", "(", ")", ";", "return", ";", "}", "mAccount", "=", "new", "EmailContent", ".", "Account", "(", ")", ";", "mAccount", ".", "setSenderName", "(", "getOwnerName", "(", ")", ")", ";", "mAccount", ".", "setEmailAddress", "(", "email", ")", ";", "mAccount", ".", "setStoreUri", "(", "this", ",", "incomingUri", ".", "toString", "(", ")", ")", ";", "mAccount", ".", "setSenderUri", "(", "this", ",", "outgoingUri", ".", "toString", "(", ")", ")", ";", "if", "(", "incomingUri", ".", "toString", "(", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "mAccount", ".", "setDeletePolicy", "(", "EmailContent", ".", "Account", ".", "DELETE_POLICY_ON_DELETE", ")", ";", "}", "mAccount", ".", "setSyncInterval", "(", "DEFAULT_ACCOUNT_CHECK_INTERVAL", ")", ";", "AccountSetupCheckSettings", ".", "actionCheckSettings", "(", "this", ",", "mAccount", ",", "true", ",", "true", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onNext", "(", ")", "{", "if", "(", "!", "mEasFlowMode", ")", "{", "String", "email", "=", "mEmailView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ";", "String", "[", "]", "emailParts", "=", "email", ".", "split", "(", "\"", "<STR_LIT:@>", "\"", ")", ";", "String", "domain", "=", "emailParts", "[", "1", "]", ".", "trim", "(", ")", ";", "mProvider", "=", "findProviderForDomain", "(", "domain", ")", ";", "if", "(", "mProvider", "!", "=", "null", ")", "{", "if", "(", "mProvider", ".", "note", "!", "=", "null", ")", "{", "showDialog", "(", "DIALOG_NOTE", ")", ";", "}", "else", "{", "finishAutoSetup", "(", ")", ";", "}", "return", ";", "}", "}", "onManualSetup", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onActivityResult", "(", "int", "requestCode", ",", "int", "resultCode", ",", "Intent", "data", ")", "{", "if", "(", "resultCode", "=", "=", "RESULT_OK", ")", "{", "String", "email", "=", "mAccount", ".", "getEmailAddress", "(", ")", ";", "boolean", "isDefault", "=", "mDefaultView", ".", "isChecked", "(", ")", ";", "mAccount", ".", "setDisplayName", "(", "email", ")", ";", "mAccount", ".", "setDefaultAccount", "(", "isDefault", ")", ";", "mAccount", ".", "save", "(", "this", ")", ";", "Email", ".", "setServicesEnabled", "(", "this", ")", ";", "AccountSetupNames", ".", "actionSetNames", "(", "this", ",", "mAccount", ".", "mId", ",", "false", ")", ";", "finish", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onManualSetup", "(", ")", "{", "String", "email", "=", "mEmailView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ";", "String", "password", "=", "mPasswordView", ".", "getText", "(", ")", ".", "toString", "(", ")", ".", "trim", "(", ")", ";", "String", "[", "]", "emailParts", "=", "email", ".", "split", "(", "\"", "<STR_LIT:@>", "\"", ")", ";", "String", "user", "=", "emailParts", "[", "0", "]", ".", "trim", "(", ")", ";", "String", "domain", "=", "emailParts", "[", "1", "]", ".", "trim", "(", ")", ";", "if", "(", "ENTER_DEBUG_SCREEN", "&", "&", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "email", ")", "&", "&", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "password", ")", ")", "{", "mEmailView", ".", "setText", "(", "\"", "\"", ")", ";", "mPasswordView", ".", "setText", "(", "\"", "\"", ")", ";", "startActivity", "(", "new", "Intent", "(", "this", ",", "Debug", ".", "class", ")", ")", ";", "return", ";", "}", "mAccount", "=", "new", "EmailContent", ".", "Account", "(", ")", ";", "mAccount", ".", "setSenderName", "(", "getOwnerName", "(", ")", ")", ";", "mAccount", ".", "setEmailAddress", "(", "email", ")", ";", "try", "{", "URI", "uri", "=", "new", "URI", "(", "\"", "<STR_LIT>", "\"", ",", "user", "+", "\"", "<STR_LIT::>", "\"", "+", "password", ",", "domain", ",", "-", "1", ",", "null", ",", "null", ",", "null", ")", ";", "mAccount", ".", "setStoreUri", "(", "this", ",", "uri", ".", "toString", "(", ")", ")", ";", "mAccount", ".", "setSenderUri", "(", "this", ",", "uri", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "Toast", ".", "makeText", "(", "this", ",", "R", ".", "string", ".", "account_setup_username_password_toast", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "mAccount", "=", "null", ";", "return", ";", "}", "mAccount", ".", "setSyncInterval", "(", "DEFAULT_ACCOUNT_CHECK_INTERVAL", ")", ";", "AccountSetupAccountType", ".", "actionSelectAccountType", "(", "this", ",", "mAccount", ",", "mDefaultView", ".", "isChecked", "(", ")", ",", "mEasFlowMode", ")", ";", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "View", "v", ")", "{", "switch", "(", "v", ".", "getId", "(", ")", ")", "{", "case", "R", ".", "id", ".", "next", ":", "onNext", "(", ")", ";", "break", ";", "case", "R", ".", "id", ".", "manual_setup", ":", "onManualSetup", "(", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "private", "String", "getXmlAttribute", "(", "XmlResourceParser", "xml", ",", "String", "name", ")", "{", "int", "resId", "=", "xml", ".", "getAttributeResourceValue", "(", "null", ",", "name", ",", "0", ")", ";", "if", "(", "resId", "=", "=", "0", ")", "{", "return", "xml", ".", "getAttributeValue", "(", "null", ",", "name", ")", ";", "}", "else", "{", "return", "getString", "(", "resId", ")", ";", "}", "}", "</s>"]
["<s>", "private", "Provider", "findProviderForDomain", "(", "String", "domain", ")", "{", "Provider", "p", "=", "findProviderForDomain", "(", "domain", ",", "R", ".", "xml", ".", "providers_product", ")", ";", "if", "(", "p", "=", "=", "null", ")", "{", "p", "=", "findProviderForDomain", "(", "domain", ",", "R", ".", "xml", ".", "providers", ")", ";", "}", "return", "p", ";", "}", "</s>"]
["<s>", "private", "Provider", "findProviderForDomain", "(", "String", "domain", ",", "int", "resourceId", ")", "{", "try", "{", "XmlResourceParser", "xml", "=", "getResources", "(", ")", ".", "getXml", "(", "resourceId", ")", ";", "int", "xmlEventType", ";", "Provider", "provider", "=", "null", ";", "while", "(", "(", "xmlEventType", "=", "xml", ".", "next", "(", ")", ")", "!", "=", "XmlResourceParser", ".", "END_DOCUMENT", ")", "{", "if", "(", "xmlEventType", "=", "=", "XmlResourceParser", ".", "START_TAG", "&", "&", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "xml", ".", "getName", "(", ")", ")", "&", "&", "domain", ".", "equalsIgnoreCase", "(", "getXmlAttribute", "(", "xml", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "provider", "=", "new", "Provider", "(", ")", ";", "provider", ".", "id", "=", "getXmlAttribute", "(", "xml", ",", "\"", "<STR_LIT>", "\"", ")", ";", "provider", ".", "label", "=", "getXmlAttribute", "(", "xml", ",", "\"", "<STR_LIT>", "\"", ")", ";", "provider", ".", "domain", "=", "getXmlAttribute", "(", "xml", ",", "\"", "<STR_LIT>", "\"", ")", ";", "provider", ".", "note", "=", "getXmlAttribute", "(", "xml", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "xmlEventType", "=", "=", "XmlResourceParser", ".", "START_TAG", "&", "&", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "xml", ".", "getName", "(", ")", ")", "&", "&", "provider", "!", "=", "null", ")", "{", "provider", ".", "incomingUriTemplate", "=", "new", "URI", "(", "getXmlAttribute", "(", "xml", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "provider", ".", "incomingUsernameTemplate", "=", "getXmlAttribute", "(", "xml", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "xmlEventType", "=", "=", "XmlResourceParser", ".", "START_TAG", "&", "&", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "xml", ".", "getName", "(", ")", ")", "&", "&", "provider", "!", "=", "null", ")", "{", "provider", ".", "outgoingUriTemplate", "=", "new", "URI", "(", "getXmlAttribute", "(", "xml", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "provider", ".", "outgoingUsernameTemplate", "=", "getXmlAttribute", "(", "xml", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "xmlEventType", "=", "=", "XmlResourceParser", ".", "END_TAG", "&", "&", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "xml", ".", "getName", "(", ")", ")", "&", "&", "provider", "!", "=", "null", ")", "{", "return", "provider", ";", "}", "}", "}", "catch", "(", "Exception", "e", ")", "{", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionSettings", "(", "Activity", "fromActivity", ",", "long", "accountId", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSettings", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT_ID", ",", "accountId", ")", ";", "fromActivity", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onCreate", "(", "savedInstanceState", ")", ";", "Intent", "i", "=", "getIntent", "(", ")", ";", "if", "(", "ACTION_ACCOUNT_MANAGER_ENTRY", ".", "equals", "(", "i", ".", "getAction", "(", ")", ")", ")", "{", "setAccountIdFromAccountManagerIntent", "(", ")", ";", "}", "else", "{", "mAccountId", "=", "i", ".", "getLongExtra", "(", "EXTRA_ACCOUNT_ID", ",", "-", "1", ")", ";", "}", "if", "(", "mAccountId", "=", "=", "-", "1", ")", "{", "finish", "(", ")", ";", "return", ";", "}", "mAccount", "=", "Account", ".", "restoreAccountWithId", "(", "this", ",", "mAccountId", ")", ";", "if", "(", "mAccount", "=", "=", "null", ")", "{", "finish", "(", ")", ";", "return", ";", "}", "mAccount", ".", "mHostAuthRecv", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "this", ",", "mAccount", ".", "mHostAuthKeyRecv", ")", ";", "mAccount", ".", "mHostAuthSend", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "this", ",", "mAccount", ".", "mHostAuthKeySend", ")", ";", "if", "(", "mAccount", ".", "mHostAuthRecv", "=", "=", "null", "|", "|", "mAccount", ".", "mHostAuthSend", "=", "=", "null", ")", "{", "finish", "(", ")", ";", "return", ";", "}", "mAccountDirty", "=", "false", ";", "addPreferencesFromResource", "(", "R", ".", "xml", ".", "account_settings_preferences", ")", ";", "PreferenceCategory", "topCategory", "=", "(", "PreferenceCategory", ")", "findPreference", "(", "PREFERENCE_TOP_CATEGORY", ")", ";", "topCategory", ".", "setTitle", "(", "getString", "(", "R", ".", "string", ".", "account_settings_title_fmt", ")", ")", ";", "mAccountDescription", "=", "(", "EditTextPreference", ")", "findPreference", "(", "PREFERENCE_DESCRIPTION", ")", ";", "mAccountDescription", ".", "setSummary", "(", "mAccount", ".", "getDisplayName", "(", ")", ")", ";", "mAccountDescription", ".", "setText", "(", "mAccount", ".", "getDisplayName", "(", ")", ")", ";", "mAccountDescription", ".", "setOnPreferenceChangeListener", "(", "new", "Preference", ".", "OnPreferenceChangeListener", "(", ")", "{", "public", "boolean", "onPreferenceChange", "(", "Preference", "preference", ",", "Object", "newValue", ")", "{", "final", "String", "summary", "=", "newValue", ".", "toString", "(", ")", ";", "mAccountDescription", ".", "setSummary", "(", "summary", ")", ";", "mAccountDescription", ".", "setText", "(", "summary", ")", ";", "return", "false", ";", "}", "}", ")", ";", "mAccountName", "=", "(", "EditTextPreference", ")", "findPreference", "(", "PREFERENCE_NAME", ")", ";", "mAccountName", ".", "setSummary", "(", "mAccount", ".", "getSenderName", "(", ")", ")", ";", "mAccountName", ".", "setText", "(", "mAccount", ".", "getSenderName", "(", ")", ")", ";", "mAccountName", ".", "setOnPreferenceChangeListener", "(", "new", "Preference", ".", "OnPreferenceChangeListener", "(", ")", "{", "public", "boolean", "onPreferenceChange", "(", "Preference", "preference", ",", "Object", "newValue", ")", "{", "final", "String", "summary", "=", "newValue", ".", "toString", "(", ")", ";", "mAccountName", ".", "setSummary", "(", "summary", ")", ";", "mAccountName", ".", "setText", "(", "summary", ")", ";", "return", "false", ";", "}", "}", ")", ";", "mCheckFrequency", "=", "(", "ListPreference", ")", "findPreference", "(", "PREFERENCE_FREQUENCY", ")", ";", "Store", ".", "StoreInfo", "info", "=", "Store", ".", "StoreInfo", ".", "getStoreInfo", "(", "mAccount", ".", "getStoreUri", "(", "this", ")", ",", "this", ")", ";", "if", "(", "info", ".", "mPushSupported", ")", "{", "mCheckFrequency", ".", "setEntries", "(", "R", ".", "array", ".", "account_settings_check_frequency_entries_push", ")", ";", "mCheckFrequency", ".", "setEntryValues", "(", "R", ".", "array", ".", "account_settings_check_frequency_values_push", ")", ";", "}", "mCheckFrequency", ".", "setValue", "(", "String", ".", "valueOf", "(", "mAccount", ".", "getSyncInterval", "(", ")", ")", ")", ";", "mCheckFrequency", ".", "setSummary", "(", "mCheckFrequency", ".", "getEntry", "(", ")", ")", ";", "mCheckFrequency", ".", "setOnPreferenceChangeListener", "(", "new", "Preference", ".", "OnPreferenceChangeListener", "(", ")", "{", "public", "boolean", "onPreferenceChange", "(", "Preference", "preference", ",", "Object", "newValue", ")", "{", "final", "String", "summary", "=", "newValue", ".", "toString", "(", ")", ";", "int", "index", "=", "mCheckFrequency", ".", "findIndexOfValue", "(", "summary", ")", ";", "mCheckFrequency", ".", "setSummary", "(", "mCheckFrequency", ".", "getEntries", "(", ")", "[", "index", "]", ")", ";", "mCheckFrequency", ".", "setValue", "(", "summary", ")", ";", "return", "false", ";", "}", "}", ")", ";", "mSyncWindow", "=", "null", ";", "if", "(", "info", ".", "mVisibleLimitDefault", "=", "=", "-", "1", ")", "{", "mSyncWindow", "=", "new", "ListPreference", "(", "this", ")", ";", "mSyncWindow", ".", "setTitle", "(", "R", ".", "string", ".", "account_setup_options_mail_window_label", ")", ";", "mSyncWindow", ".", "setEntries", "(", "R", ".", "array", ".", "account_settings_mail_window_entries", ")", ";", "mSyncWindow", ".", "setEntryValues", "(", "R", ".", "array", ".", "account_settings_mail_window_values", ")", ";", "mSyncWindow", ".", "setValue", "(", "String", ".", "valueOf", "(", "mAccount", ".", "getSyncLookback", "(", ")", ")", ")", ";", "mSyncWindow", ".", "setSummary", "(", "mSyncWindow", ".", "getEntry", "(", ")", ")", ";", "mSyncWindow", ".", "setOrder", "(", "<NUM_LIT:4>", ")", ";", "mSyncWindow", ".", "setOnPreferenceChangeListener", "(", "new", "Preference", ".", "OnPreferenceChangeListener", "(", ")", "{", "public", "boolean", "onPreferenceChange", "(", "Preference", "preference", ",", "Object", "newValue", ")", "{", "final", "String", "summary", "=", "newValue", ".", "toString", "(", ")", ";", "int", "index", "=", "mSyncWindow", ".", "findIndexOfValue", "(", "summary", ")", ";", "mSyncWindow", ".", "setSummary", "(", "mSyncWindow", ".", "getEntries", "(", ")", "[", "index", "]", ")", ";", "mSyncWindow", ".", "setValue", "(", "summary", ")", ";", "return", "false", ";", "}", "}", ")", ";", "topCategory", ".", "addPreference", "(", "mSyncWindow", ")", ";", "}", "mAccountDefault", "=", "(", "CheckBoxPreference", ")", "findPreference", "(", "PREFERENCE_DEFAULT", ")", ";", "mAccountDefault", ".", "setChecked", "(", "mAccount", ".", "mId", "=", "=", "Account", ".", "getDefaultAccountId", "(", "this", ")", ")", ";", "mAccountNotify", "=", "(", "CheckBoxPreference", ")", "findPreference", "(", "PREFERENCE_NOTIFY", ")", ";", "mAccountNotify", ".", "setChecked", "(", "0", "!", "=", "(", "mAccount", ".", "getFlags", "(", ")", "&", "Account", ".", "FLAGS_NOTIFY_NEW_MAIL", ")", ")", ";", "mAccountRingtone", "=", "(", "RingtonePreference", ")", "findPreference", "(", "PREFERENCE_RINGTONE", ")", ";", "SharedPreferences", "prefs", "=", "mAccountRingtone", ".", "getPreferenceManager", "(", ")", ".", "getSharedPreferences", "(", ")", ";", "prefs", ".", "edit", "(", ")", ".", "putString", "(", "PREFERENCE_RINGTONE", ",", "mAccount", ".", "getRingtone", "(", ")", ")", ".", "commit", "(", ")", ";", "mAccountVibrate", "=", "(", "CheckBoxPreference", ")", "findPreference", "(", "PREFERENCE_VIBRATE", ")", ";", "mAccountVibrate", ".", "setChecked", "(", "0", "!", "=", "(", "mAccount", ".", "getFlags", "(", ")", "&", "Account", ".", "FLAGS_VIBRATE", ")", ")", ";", "findPreference", "(", "PREFERENCE_INCOMING", ")", ".", "setOnPreferenceClickListener", "(", "new", "Preference", ".", "OnPreferenceClickListener", "(", ")", "{", "public", "boolean", "onPreferenceClick", "(", "Preference", "preference", ")", "{", "onIncomingSettings", "(", ")", ";", "return", "true", ";", "}", "}", ")", ";", "Preference", "prefOutgoing", "=", "findPreference", "(", "PREFERENCE_OUTGOING", ")", ";", "boolean", "showOutgoing", "=", "true", ";", "try", "{", "Sender", "sender", "=", "Sender", ".", "getInstance", "(", "getApplication", "(", ")", ",", "mAccount", ".", "getSenderUri", "(", "this", ")", ")", ";", "if", "(", "sender", "!", "=", "null", ")", "{", "Class", "<", "?", "extends", "android", ".", "app", ".", "Activity", ">", "setting", "=", "sender", ".", "getSettingActivityClass", "(", ")", ";", "showOutgoing", "=", "(", "setting", "!", "=", "null", ")", ";", "}", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "if", "(", "showOutgoing", ")", "{", "prefOutgoing", ".", "setOnPreferenceClickListener", "(", "new", "Preference", ".", "OnPreferenceClickListener", "(", ")", "{", "public", "boolean", "onPreferenceClick", "(", "Preference", "preference", ")", "{", "onOutgoingSettings", "(", ")", ";", "return", "true", ";", "}", "}", ")", ";", "}", "else", "{", "PreferenceCategory", "serverCategory", "=", "(", "PreferenceCategory", ")", "findPreference", "(", "PREFERENCE_SERVER_CATERGORY", ")", ";", "serverCategory", ".", "removePreference", "(", "prefOutgoing", ")", ";", "}", "mSyncContacts", "=", "(", "CheckBoxPreference", ")", "findPreference", "(", "PREFERENCE_SYNC_CONTACTS", ")", ";", "if", "(", "mAccount", ".", "mHostAuthRecv", ".", "mProtocol", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "android", ".", "accounts", ".", "Account", "acct", "=", "new", "android", ".", "accounts", ".", "Account", "(", "mAccount", ".", "mEmailAddress", ",", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ")", ";", "mSyncContacts", ".", "setChecked", "(", "ContentResolver", ".", "getSyncAutomatically", "(", "acct", ",", "ContactsContract", ".", "AUTHORITY", ")", ")", ";", "}", "else", "{", "PreferenceCategory", "serverCategory", "=", "(", "PreferenceCategory", ")", "findPreference", "(", "PREFERENCE_SERVER_CATERGORY", ")", ";", "serverCategory", ".", "removePreference", "(", "mSyncContacts", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "onPreferenceChange", "(", "Preference", "preference", ",", "Object", "newValue", ")", "{", "final", "String", "summary", "=", "newValue", ".", "toString", "(", ")", ";", "mAccountDescription", ".", "setSummary", "(", "summary", ")", ";", "mAccountDescription", ".", "setText", "(", "summary", ")", ";", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "onPreferenceChange", "(", "Preference", "preference", ",", "Object", "newValue", ")", "{", "final", "String", "summary", "=", "newValue", ".", "toString", "(", ")", ";", "mAccountName", ".", "setSummary", "(", "summary", ")", ";", "mAccountName", ".", "setText", "(", "summary", ")", ";", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "onPreferenceChange", "(", "Preference", "preference", ",", "Object", "newValue", ")", "{", "final", "String", "summary", "=", "newValue", ".", "toString", "(", ")", ";", "int", "index", "=", "mCheckFrequency", ".", "findIndexOfValue", "(", "summary", ")", ";", "mCheckFrequency", ".", "setSummary", "(", "mCheckFrequency", ".", "getEntries", "(", ")", "[", "index", "]", ")", ";", "mCheckFrequency", ".", "setValue", "(", "summary", ")", ";", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "onPreferenceChange", "(", "Preference", "preference", ",", "Object", "newValue", ")", "{", "final", "String", "summary", "=", "newValue", ".", "toString", "(", ")", ";", "int", "index", "=", "mSyncWindow", ".", "findIndexOfValue", "(", "summary", ")", ";", "mSyncWindow", ".", "setSummary", "(", "mSyncWindow", ".", "getEntries", "(", ")", "[", "index", "]", ")", ";", "mSyncWindow", ".", "setValue", "(", "summary", ")", ";", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "onPreferenceClick", "(", "Preference", "preference", ")", "{", "onIncomingSettings", "(", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "public", "boolean", "onPreferenceClick", "(", "Preference", "preference", ")", "{", "onOutgoingSettings", "(", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "private", "void", "setAccountIdFromAccountManagerIntent", "(", ")", "{", "android", ".", "accounts", ".", "Account", "acct", "=", "(", "android", ".", "accounts", ".", "Account", ")", "getIntent", "(", ")", ".", "getParcelableExtra", "(", "ACCOUNT_MANAGER_EXTRA_ACCOUNT", ")", ";", "Cursor", "c", "=", "getContentResolver", "(", ")", ".", "query", "(", "Account", ".", "CONTENT_URI", ",", "new", "String", "[", "]", "{", "AccountColumns", ".", "ID", "}", ",", "AccountColumns", ".", "EMAIL_ADDRESS", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "acct", ".", "name", "}", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "mAccountId", "=", "c", ".", "getLong", "(", "0", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onResume", "(", ")", "{", "super", ".", "onResume", "(", ")", ";", "if", "(", "mAccountDirty", ")", "{", "mAccount", ".", "mHostAuthRecv", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "this", ",", "mAccount", ".", "mHostAuthKeyRecv", ")", ";", "mAccount", ".", "mHostAuthSend", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "this", ",", "mAccount", ".", "mHostAuthKeySend", ")", ";", "Account", "refreshedAccount", "=", "Account", ".", "restoreAccountWithId", "(", "this", ",", "mAccount", ".", "mId", ")", ";", "if", "(", "refreshedAccount", "=", "=", "null", "|", "|", "mAccount", ".", "mHostAuthRecv", "=", "=", "null", "|", "|", "mAccount", ".", "mHostAuthSend", "=", "=", "null", ")", "{", "finish", "(", ")", ";", "return", ";", "}", "mAccount", ".", "setDeletePolicy", "(", "refreshedAccount", ".", "getDeletePolicy", "(", ")", ")", ";", "mAccountDirty", "=", "false", ";", "}", "}", "</s>"]
["<s>", "private", "void", "saveSettings", "(", ")", "{", "int", "newFlags", "=", "mAccount", ".", "getFlags", "(", ")", "&", "~", "(", "Account", ".", "FLAGS_NOTIFY_NEW_MAIL", "|", "Account", ".", "FLAGS_VIBRATE", ")", ";", "mAccount", ".", "setDefaultAccount", "(", "mAccountDefault", ".", "isChecked", "(", ")", ")", ";", "mAccount", ".", "setDisplayName", "(", "mAccountDescription", ".", "getText", "(", ")", ")", ";", "mAccount", ".", "setSenderName", "(", "mAccountName", ".", "getText", "(", ")", ")", ";", "newFlags", "|", "=", "mAccountNotify", ".", "isChecked", "(", ")", "?", "Account", ".", "FLAGS_NOTIFY_NEW_MAIL", ":", "0", ";", "mAccount", ".", "setSyncInterval", "(", "Integer", ".", "parseInt", "(", "mCheckFrequency", ".", "getValue", "(", ")", ")", ")", ";", "if", "(", "mSyncWindow", "!", "=", "null", ")", "{", "mAccount", ".", "setSyncLookback", "(", "Integer", ".", "parseInt", "(", "mSyncWindow", ".", "getValue", "(", ")", ")", ")", ";", "}", "newFlags", "|", "=", "mAccountVibrate", ".", "isChecked", "(", ")", "?", "Account", ".", "FLAGS_VIBRATE", ":", "0", ";", "SharedPreferences", "prefs", "=", "mAccountRingtone", ".", "getPreferenceManager", "(", ")", ".", "getSharedPreferences", "(", ")", ";", "mAccount", ".", "setRingtone", "(", "prefs", ".", "getString", "(", "PREFERENCE_RINGTONE", ",", "null", ")", ")", ";", "mAccount", ".", "setFlags", "(", "newFlags", ")", ";", "if", "(", "mAccount", ".", "mHostAuthRecv", ".", "mProtocol", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "android", ".", "accounts", ".", "Account", "acct", "=", "new", "android", ".", "accounts", ".", "Account", "(", "mAccount", ".", "mEmailAddress", ",", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ")", ";", "ContentResolver", ".", "setSyncAutomatically", "(", "acct", ",", "ContactsContract", ".", "AUTHORITY", ",", "mSyncContacts", ".", "isChecked", "(", ")", ")", ";", "}", "AccountSettingsUtils", ".", "commitSettings", "(", "this", ",", "mAccount", ")", ";", "Email", ".", "setServicesEnabled", "(", "this", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onKeyDown", "(", "int", "keyCode", ",", "KeyEvent", "event", ")", "{", "if", "(", "keyCode", "=", "=", "KeyEvent", ".", "KEYCODE_BACK", ")", "{", "saveSettings", "(", ")", ";", "}", "return", "super", ".", "onKeyDown", "(", "keyCode", ",", "event", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onIncomingSettings", "(", ")", "{", "try", "{", "Store", "store", "=", "Store", ".", "getInstance", "(", "mAccount", ".", "getStoreUri", "(", "this", ")", ",", "getApplication", "(", ")", ",", "null", ")", ";", "if", "(", "store", "!", "=", "null", ")", "{", "Class", "<", "?", "extends", "android", ".", "app", ".", "Activity", ">", "setting", "=", "store", ".", "getSettingActivityClass", "(", ")", ";", "if", "(", "setting", "!", "=", "null", ")", "{", "java", ".", "lang", ".", "reflect", ".", "Method", "m", "=", "setting", ".", "getMethod", "(", "\"", "<STR_LIT>", "\"", ",", "android", ".", "app", ".", "Activity", ".", "class", ",", "Account", ".", "class", ")", ";", "m", ".", "invoke", "(", "null", ",", "this", ",", "mAccount", ")", ";", "mAccountDirty", "=", "true", ";", "}", "}", "}", "catch", "(", "Exception", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onOutgoingSettings", "(", ")", "{", "try", "{", "Sender", "sender", "=", "Sender", ".", "getInstance", "(", "getApplication", "(", ")", ",", "mAccount", ".", "getSenderUri", "(", "this", ")", ")", ";", "if", "(", "sender", "!", "=", "null", ")", "{", "Class", "<", "?", "extends", "android", ".", "app", ".", "Activity", ">", "setting", "=", "sender", ".", "getSettingActivityClass", "(", ")", ";", "if", "(", "setting", "!", "=", "null", ")", "{", "java", ".", "lang", ".", "reflect", ".", "Method", "m", "=", "setting", ".", "getMethod", "(", "\"", "<STR_LIT>", "\"", ",", "android", ".", "app", ".", "Activity", ".", "class", ",", "Account", ".", "class", ")", ";", "m", ".", "invoke", "(", "null", ",", "this", ",", "mAccount", ")", ";", "mAccountDirty", "=", "true", ";", "}", "}", "}", "catch", "(", "Exception", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "int", "compare", "(", "Message", "o1", ",", "Message", "o2", ")", "{", "try", "{", "if", "(", "o1", ".", "getSentDate", "(", ")", "=", "=", "null", ")", "{", "return", "1", ";", "}", "else", "if", "(", "o2", ".", "getSentDate", "(", ")", "=", "=", "null", ")", "{", "return", "-", "1", ";", "}", "else", "return", "o2", ".", "getSentDate", "(", ")", ".", "compareTo", "(", "o1", ".", "getSentDate", "(", ")", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "return", "0", ";", "}", "}", "</s>"]
["<s>", "public", "Multipart", "getParent", "(", ")", "{", "return", "mParent", ";", "}", "</s>"]
["<s>", "public", "String", "getUid", "(", ")", "{", "return", "mUid", ";", "}", "</s>"]
["<s>", "public", "void", "setUid", "(", "String", "uid", ")", "{", "this", ".", "mUid", "=", "uid", ";", "}", "</s>"]
["<s>", "public", "Folder", "getFolder", "(", ")", "{", "return", "mFolder", ";", "}", "</s>"]
["<s>", "public", "abstract", "String", "getSubject", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "setSubject", "(", "String", "subject", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "Date", "getInternalDate", "(", ")", "{", "return", "mInternalDate", ";", "}", "</s>"]
["<s>", "public", "void", "setInternalDate", "(", "Date", "internalDate", ")", "{", "this", ".", "mInternalDate", "=", "internalDate", ";", "}", "</s>"]
["<s>", "public", "abstract", "Date", "getReceivedDate", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "Date", "getSentDate", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "setSentDate", "(", "Date", "sentDate", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "Address", "[", "]", "getRecipients", "(", "RecipientType", "type", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "setRecipients", "(", "RecipientType", "type", ",", "Address", "[", "]", "addresses", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "void", "setRecipient", "(", "RecipientType", "type", ",", "Address", "address", ")", "throws", "MessagingException", "{", "setRecipients", "(", "type", ",", "new", "Address", "[", "]", "{", "address", "}", ")", ";", "}", "</s>"]
["<s>", "public", "abstract", "Address", "[", "]", "getFrom", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "setFrom", "(", "Address", "from", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "Address", "[", "]", "getReplyTo", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "setReplyTo", "(", "Address", "[", "]", "from", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "Body", "getBody", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "String", "getContentType", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "addHeader", "(", "String", "name", ",", "String", "value", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "setHeader", "(", "String", "name", ",", "String", "value", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "String", "[", "]", "getHeader", "(", "String", "name", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "removeHeader", "(", "String", "name", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "setBody", "(", "Body", "body", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "boolean", "isMimeType", "(", "String", "mimeType", ")", "throws", "MessagingException", "{", "return", "getContentType", "(", ")", ".", "startsWith", "(", "mimeType", ")", ";", "}", "</s>"]
["<s>", "public", "Flag", "[", "]", "getFlags", "(", ")", "{", "return", "mFlags", ".", "toArray", "(", "new", "Flag", "[", "]", "{", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setFlag", "(", "Flag", "flag", ",", "boolean", "set", ")", "throws", "MessagingException", "{", "if", "(", "set", ")", "{", "mFlags", ".", "add", "(", "flag", ")", ";", "}", "else", "{", "mFlags", ".", "remove", "(", "flag", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "setFlags", "(", "Flag", "[", "]", "flags", ",", "boolean", "set", ")", "throws", "MessagingException", "{", "for", "(", "Flag", "flag", ":", "flags", ")", "{", "setFlag", "(", "flag", ",", "set", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "isSet", "(", "Flag", "flag", ")", "{", "return", "mFlags", ".", "contains", "(", "flag", ")", ";", "}", "</s>"]
["<s>", "public", "abstract", "void", "saveChanges", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "getClass", "(", ")", ".", "getSimpleName", "(", ")", "+", "<CHAR_LIT::>", "+", "mUid", ";", "}", "</s>"]
["<s>", "public", "SyncResults", "(", "int", "totalMessages", ",", "int", "newMessages", ")", "{", "mTotalMessages", "=", "totalMessages", ";", "mNewMessages", "=", "newMessages", ";", "}", "</s>"]
["<s>", "public", "SyncResults", "SynchronizeMessagesSynchronous", "(", "EmailContent", ".", "Account", "account", ",", "EmailContent", ".", "Mailbox", "folder", ",", "GroupMessagingListener", "listeners", ",", "Context", "context", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "void", "messageStarted", "(", "String", "uid", ",", "int", "number", ",", "int", "ofTotal", ")", ";", "</s>"]
["<s>", "public", "void", "messageFinished", "(", "Message", "message", ",", "int", "number", ",", "int", "ofTotal", ")", ";", "</s>"]
["<s>", "public", "MessagingException", "(", "String", "message", ")", "{", "super", "(", "message", ")", ";", "mExceptionType", "=", "UNSPECIFIED_EXCEPTION", ";", "}", "</s>"]
["<s>", "public", "MessagingException", "(", "String", "message", ",", "Throwable", "throwable", ")", "{", "super", "(", "message", ",", "throwable", ")", ";", "mExceptionType", "=", "UNSPECIFIED_EXCEPTION", ";", "}", "</s>"]
["<s>", "public", "MessagingException", "(", "int", "exceptionType", ")", "{", "super", "(", ")", ";", "mExceptionType", "=", "exceptionType", ";", "}", "</s>"]
["<s>", "public", "MessagingException", "(", "int", "exceptionType", ",", "String", "message", ")", "{", "super", "(", "message", ")", ";", "mExceptionType", "=", "exceptionType", ";", "}", "</s>"]
["<s>", "public", "int", "getExceptionType", "(", ")", "{", "return", "mExceptionType", ";", "}", "</s>"]
["<s>", "public", "CertificateValidationException", "(", "String", "message", ")", "{", "super", "(", "message", ")", ";", "}", "</s>"]
["<s>", "public", "CertificateValidationException", "(", "String", "message", ",", "Throwable", "throwable", ")", "{", "super", "(", "message", ",", "throwable", ")", ";", "}", "</s>"]
["<s>", "public", "NoSuchProviderException", "(", "String", "message", ")", "{", "super", "(", "message", ")", ";", "}", "</s>"]
["<s>", "public", "NoSuchProviderException", "(", "String", "message", ",", "Throwable", "throwable", ")", "{", "super", "(", "message", ",", "throwable", ")", ";", "}", "</s>"]
["<s>", "public", "InputStream", "getInputStream", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", ",", "MessagingException", ";", "</s>"]
["<s>", "public", "void", "addHeader", "(", "String", "name", ",", "String", "value", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "void", "removeHeader", "(", "String", "name", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "void", "setHeader", "(", "String", "name", ",", "String", "value", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "Body", "getBody", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "String", "getContentType", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "String", "getDisposition", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "String", "getContentId", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "String", "[", "]", "getHeader", "(", "String", "name", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "void", "setExtendedHeader", "(", "String", "name", ",", "String", "value", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "String", "getExtendedHeader", "(", "String", "name", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "int", "getSize", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "boolean", "isMimeType", "(", "String", "mimeType", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "String", "getMimeType", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "void", "setBody", "(", "Body", "body", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", ",", "MessagingException", ";", "</s>"]
["<s>", "public", "Transport", "newInstanceWithConfiguration", "(", ")", ";", "</s>"]
["<s>", "public", "void", "setUri", "(", "URI", "uri", ",", "int", "defaultPort", ")", ";", "</s>"]
["<s>", "public", "String", "getHost", "(", ")", ";", "</s>"]
["<s>", "public", "int", "getPort", "(", ")", ";", "</s>"]
["<s>", "public", "String", "[", "]", "getUserInfoParts", "(", ")", ";", "</s>"]
["<s>", "public", "void", "setSecurity", "(", "int", "connectionSecurity", ",", "boolean", "trustAllCertificates", ")", ";", "</s>"]
["<s>", "public", "int", "getSecurity", "(", ")", ";", "</s>"]
["<s>", "public", "boolean", "canTrySslSecurity", "(", ")", ";", "</s>"]
["<s>", "public", "boolean", "canTryTlsSecurity", "(", ")", ";", "</s>"]
["<s>", "public", "boolean", "canTrustAllCertificates", "(", ")", ";", "</s>"]
["<s>", "public", "void", "setSoTimeout", "(", "int", "timeoutMilliseconds", ")", "throws", "SocketException", ";", "</s>"]
["<s>", "public", "void", "open", "(", ")", "throws", "MessagingException", ",", "CertificateValidationException", ";", "</s>"]
["<s>", "public", "void", "reopenTls", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "boolean", "isOpen", "(", ")", ";", "</s>"]
["<s>", "public", "void", "close", "(", ")", ";", "</s>"]
["<s>", "public", "InputStream", "getInputStream", "(", ")", ";", "</s>"]
["<s>", "public", "OutputStream", "getOutputStream", "(", ")", ";", "</s>"]
["<s>", "void", "writeLine", "(", "String", "s", ",", "String", "sensitiveReplacement", ")", "throws", "IOException", ";", "</s>"]
["<s>", "String", "readLine", "(", ")", "throws", "IOException", ";", "</s>"]
["<s>", "public", "Address", "(", "String", "address", ",", "String", "personal", ")", "{", "setAddress", "(", "address", ")", ";", "setPersonal", "(", "personal", ")", ";", "}", "</s>"]
["<s>", "public", "Address", "(", "String", "address", ")", "{", "setAddress", "(", "address", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getAddress", "(", ")", "{", "return", "mAddress", ";", "}", "</s>"]
["<s>", "public", "void", "setAddress", "(", "String", "address", ")", "{", "this", ".", "mAddress", "=", "REMOVE_OPTIONAL_BRACKET", ".", "matcher", "(", "address", ")", ".", "replaceAll", "(", "\"", "<STR_LIT>", "\"", ")", ";", ";", "}", "</s>"]
["<s>", "public", "String", "getPersonal", "(", ")", "{", "return", "mPersonal", ";", "}", "</s>"]
["<s>", "public", "void", "setPersonal", "(", "String", "personal", ")", "{", "if", "(", "personal", "!", "=", "null", ")", "{", "personal", "=", "REMOVE_OPTIONAL_DQUOTE", ".", "matcher", "(", "personal", ")", ".", "replaceAll", "(", "\"", "<STR_LIT>", "\"", ")", ";", "personal", "=", "UNQUOTE", ".", "matcher", "(", "personal", ")", ".", "replaceAll", "(", "\"", "<STR_LIT>", "\"", ")", ";", "personal", "=", "DecoderUtil", ".", "decodeEncodedWords", "(", "personal", ")", ";", "if", "(", "personal", ".", "length", "(", ")", "=", "=", "0", ")", "{", "personal", "=", "null", ";", "}", "}", "this", ".", "mPersonal", "=", "personal", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isAllValid", "(", "String", "addressList", ")", "{", "if", "(", "addressList", "!", "=", "null", "&", "&", "addressList", ".", "length", "(", ")", ">", "0", ")", "{", "Rfc822Token", "[", "]", "tokens", "=", "Rfc822Tokenizer", ".", "tokenize", "(", "addressList", ")", ";", "for", "(", "int", "i", "=", "0", ",", "length", "=", "tokens", ".", "length", ";", "i", "<", "length", ";", "+", "+", "i", ")", "{", "Rfc822Token", "token", "=", "tokens", "[", "i", "]", ";", "String", "address", "=", "token", ".", "getAddress", "(", ")", ";", "if", "(", "!", "TextUtils", ".", "isEmpty", "(", "address", ")", "&", "&", "!", "isValidAddress", "(", "address", ")", ")", "{", "return", "false", ";", "}", "}", "}", "return", "true", ";", "}", "</s>"]
["<s>", "public", "static", "Address", "[", "]", "parse", "(", "String", "addressList", ")", "{", "if", "(", "addressList", "=", "=", "null", "|", "|", "addressList", ".", "length", "(", ")", "=", "=", "0", ")", "{", "return", "EMPTY_ADDRESS_ARRAY", ";", "}", "Rfc822Token", "[", "]", "tokens", "=", "Rfc822Tokenizer", ".", "tokenize", "(", "addressList", ")", ";", "ArrayList", "<", "Address", ">", "addresses", "=", "new", "ArrayList", "<", "Address", ">", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "length", "=", "tokens", ".", "length", ";", "i", "<", "length", ";", "+", "+", "i", ")", "{", "Rfc822Token", "token", "=", "tokens", "[", "i", "]", ";", "String", "address", "=", "token", ".", "getAddress", "(", ")", ";", "if", "(", "!", "TextUtils", ".", "isEmpty", "(", "address", ")", ")", "{", "if", "(", "isValidAddress", "(", "address", ")", ")", "{", "String", "name", "=", "token", ".", "getName", "(", ")", ";", "if", "(", "TextUtils", ".", "isEmpty", "(", "name", ")", ")", "{", "name", "=", "null", ";", "}", "addresses", ".", "add", "(", "new", "Address", "(", "address", ",", "name", ")", ")", ";", "}", "}", "}", "return", "addresses", ".", "toArray", "(", "new", "Address", "[", "]", "{", "}", ")", ";", "}", "</s>"]
["<s>", "static", "boolean", "isValidAddress", "(", "String", "address", ")", "{", "int", "len", "=", "address", ".", "length", "(", ")", ";", "int", "firstAt", "=", "address", ".", "indexOf", "(", "<CHAR_LIT>", ")", ";", "int", "lastAt", "=", "address", ".", "lastIndexOf", "(", "<CHAR_LIT>", ")", ";", "int", "firstDot", "=", "address", ".", "indexOf", "(", "<CHAR_LIT:.>", ",", "lastAt", "+", "1", ")", ";", "int", "lastDot", "=", "address", ".", "lastIndexOf", "(", "<CHAR_LIT:.>", ")", ";", "return", "firstAt", ">", "0", "&", "&", "firstAt", "=", "=", "lastAt", "&", "&", "lastAt", "+", "1", "<", "firstDot", "&", "&", "firstDot", "<", "=", "lastDot", "&", "&", "lastDot", "<", "len", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "o", ")", "{", "if", "(", "o", "instanceof", "Address", ")", "{", "return", "getAddress", "(", ")", ".", "equals", "(", "(", "(", "Address", ")", "o", ")", ".", "getAddress", "(", ")", ")", ";", "}", "return", "super", ".", "equals", "(", "o", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "if", "(", "mPersonal", "!", "=", "null", ")", "{", "if", "(", "mPersonal", ".", "matches", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:(>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT:.>", "<STR_LIT:\\\\>", "<STR_LIT:[>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", "{", "return", "Utility", ".", "quoteString", "(", "mPersonal", ")", "+", "\"", "<STR_LIT>", "\"", "+", "mAddress", "+", "\"", "<STR_LIT:>>", "\"", ";", "}", "else", "{", "return", "mPersonal", "+", "\"", "<STR_LIT>", "\"", "+", "mAddress", "+", "\"", "<STR_LIT:>>", "\"", ";", "}", "}", "else", "{", "return", "mAddress", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "toString", "(", "Address", "[", "]", "addresses", ")", "{", "if", "(", "addresses", "=", "=", "null", "|", "|", "addresses", ".", "length", "=", "=", "0", ")", "{", "return", "null", ";", "}", "if", "(", "addresses", ".", "length", "=", "=", "1", ")", "{", "return", "addresses", "[", "0", "]", ".", "toString", "(", ")", ";", "}", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", "addresses", "[", "0", "]", ".", "toString", "(", ")", ")", ";", "for", "(", "int", "i", "=", "1", ";", "i", "<", "addresses", ".", "length", ";", "i", "+", "+", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:U+002C>", ")", ";", "sb", ".", "append", "(", "addresses", "[", "i", "]", ".", "toString", "(", ")", ")", ";", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toHeader", "(", ")", "{", "if", "(", "mPersonal", "!", "=", "null", ")", "{", "return", "EncoderUtil", ".", "encodeAddressDisplayName", "(", "mPersonal", ")", "+", "\"", "<STR_LIT>", "\"", "+", "mAddress", "+", "\"", "<STR_LIT:>>", "\"", ";", "}", "else", "{", "return", "mAddress", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "toHeader", "(", "Address", "[", "]", "addresses", ")", "{", "if", "(", "addresses", "=", "=", "null", "|", "|", "addresses", ".", "length", "=", "=", "0", ")", "{", "return", "null", ";", "}", "if", "(", "addresses", ".", "length", "=", "=", "1", ")", "{", "return", "addresses", "[", "0", "]", ".", "toHeader", "(", ")", ";", "}", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", "addresses", "[", "0", "]", ".", "toHeader", "(", ")", ")", ";", "for", "(", "int", "i", "=", "1", ";", "i", "<", "addresses", ".", "length", ";", "i", "+", "+", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sb", ".", "append", "(", "addresses", "[", "i", "]", ".", "toHeader", "(", ")", ")", ";", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toFriendly", "(", ")", "{", "if", "(", "mPersonal", "!", "=", "null", "&", "&", "mPersonal", ".", "length", "(", ")", ">", "0", ")", "{", "return", "mPersonal", ";", "}", "else", "{", "return", "mAddress", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "toFriendly", "(", "Address", "[", "]", "addresses", ")", "{", "if", "(", "addresses", "=", "=", "null", "|", "|", "addresses", ".", "length", "=", "=", "0", ")", "{", "return", "null", ";", "}", "if", "(", "addresses", ".", "length", "=", "=", "1", ")", "{", "return", "addresses", "[", "0", "]", ".", "toFriendly", "(", ")", ";", "}", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", "addresses", "[", "0", "]", ".", "toFriendly", "(", ")", ")", ";", "for", "(", "int", "i", "=", "1", ";", "i", "<", "addresses", ".", "length", ";", "i", "+", "+", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:U+002C>", ")", ";", "sb", ".", "append", "(", "addresses", "[", "i", "]", ".", "toFriendly", "(", ")", ")", ";", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "unpackToString", "(", "String", "packedList", ")", "{", "return", "toString", "(", "unpack", "(", "packedList", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "parseAndPack", "(", "String", "textList", ")", "{", "return", "Address", ".", "pack", "(", "Address", ".", "parse", "(", "textList", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Address", "unpackFirst", "(", "String", "packedList", ")", "{", "Address", "[", "]", "array", "=", "unpack", "(", "packedList", ")", ";", "return", "array", ".", "length", ">", "0", "?", "array", "[", "0", "]", ":", "null", ";", "}", "</s>"]
["<s>", "public", "static", "String", "packedToHeader", "(", "String", "packedList", ")", "{", "return", "toHeader", "(", "unpack", "(", "packedList", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Address", "[", "]", "unpack", "(", "String", "addressList", ")", "{", "if", "(", "addressList", "=", "=", "null", "|", "|", "addressList", ".", "length", "(", ")", "=", "=", "0", ")", "{", "return", "EMPTY_ADDRESS_ARRAY", ";", "}", "ArrayList", "<", "Address", ">", "addresses", "=", "new", "ArrayList", "<", "Address", ">", "(", ")", ";", "int", "length", "=", "addressList", ".", "length", "(", ")", ";", "int", "pairStartIndex", "=", "0", ";", "int", "pairEndIndex", "=", "0", ";", "int", "addressEndIndex", "=", "addressList", ".", "indexOf", "(", "LIST_DELIMITER_PERSONAL", ")", ";", "while", "(", "pairStartIndex", "<", "length", ")", "{", "pairEndIndex", "=", "addressList", ".", "indexOf", "(", "LIST_DELIMITER_EMAIL", ",", "pairStartIndex", ")", ";", "if", "(", "pairEndIndex", "=", "=", "-", "1", ")", "{", "pairEndIndex", "=", "length", ";", "}", "Address", "address", ";", "if", "(", "addressEndIndex", "=", "=", "-", "1", "|", "|", "pairEndIndex", "<", "=", "addressEndIndex", ")", "{", "address", "=", "new", "Address", "(", "addressList", ".", "substring", "(", "pairStartIndex", ",", "pairEndIndex", ")", ",", "null", ")", ";", "}", "else", "{", "address", "=", "new", "Address", "(", "addressList", ".", "substring", "(", "pairStartIndex", ",", "addressEndIndex", ")", ",", "addressList", ".", "substring", "(", "addressEndIndex", "+", "1", ",", "pairEndIndex", ")", ")", ";", "addressEndIndex", "=", "addressList", ".", "indexOf", "(", "LIST_DELIMITER_PERSONAL", ",", "pairEndIndex", "+", "1", ")", ";", "}", "addresses", ".", "add", "(", "address", ")", ";", "pairStartIndex", "=", "pairEndIndex", "+", "1", ";", "}", "return", "addresses", ".", "toArray", "(", "EMPTY_ADDRESS_ARRAY", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "pack", "(", "Address", "[", "]", "addresses", ")", "{", "if", "(", "addresses", "=", "=", "null", ")", "{", "return", "null", ";", "}", "final", "int", "nAddr", "=", "addresses", ".", "length", ";", "if", "(", "nAddr", "=", "=", "0", ")", "{", "return", "\"", "\"", ";", "}", "if", "(", "nAddr", "=", "=", "1", "&", "&", "addresses", "[", "0", "]", ".", "getPersonal", "(", ")", "=", "=", "null", ")", "{", "return", "addresses", "[", "0", "]", ".", "getAddress", "(", ")", ";", "}", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "nAddr", ";", "i", "+", "+", ")", "{", "if", "(", "i", "!", "=", "0", ")", "{", "sb", ".", "append", "(", "LIST_DELIMITER_EMAIL", ")", ";", "}", "final", "Address", "address", "=", "addresses", "[", "i", "]", ";", "sb", ".", "append", "(", "address", ".", "getAddress", "(", ")", ")", ";", "final", "String", "displayName", "=", "address", ".", "getPersonal", "(", ")", ";", "if", "(", "displayName", "!", "=", "null", ")", "{", "sb", ".", "append", "(", "LIST_DELIMITER_PERSONAL", ")", ";", "sb", ".", "append", "(", "displayName", ")", ";", "}", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "pack", "(", ")", "{", "final", "String", "address", "=", "getAddress", "(", ")", ";", "final", "String", "personal", "=", "getPersonal", "(", ")", ";", "if", "(", "personal", "=", "=", "null", ")", "{", "return", "address", ";", "}", "else", "{", "return", "address", "+", "LIST_DELIMITER_PERSONAL", "+", "personal", ";", "}", "}", "</s>"]
["<s>", "static", "Address", "[", "]", "legacyUnpack", "(", "String", "addressList", ")", "{", "if", "(", "addressList", "=", "=", "null", "|", "|", "addressList", ".", "length", "(", ")", "=", "=", "0", ")", "{", "return", "new", "Address", "[", "]", "{", "}", ";", "}", "ArrayList", "<", "Address", ">", "addresses", "=", "new", "ArrayList", "<", "Address", ">", "(", ")", ";", "int", "length", "=", "addressList", ".", "length", "(", ")", ";", "int", "pairStartIndex", "=", "0", ";", "int", "pairEndIndex", "=", "0", ";", "int", "addressEndIndex", "=", "0", ";", "while", "(", "pairStartIndex", "<", "length", ")", "{", "pairEndIndex", "=", "addressList", ".", "indexOf", "(", "<CHAR_LIT:U+002C>", ",", "pairStartIndex", ")", ";", "if", "(", "pairEndIndex", "=", "=", "-", "1", ")", "{", "pairEndIndex", "=", "length", ";", "}", "addressEndIndex", "=", "addressList", ".", "indexOf", "(", "<CHAR_LIT:;>", ",", "pairStartIndex", ")", ";", "String", "address", "=", "null", ";", "String", "personal", "=", "null", ";", "if", "(", "addressEndIndex", "=", "=", "-", "1", "|", "|", "addressEndIndex", ">", "pairEndIndex", ")", "{", "address", "=", "Utility", ".", "fastUrlDecode", "(", "addressList", ".", "substring", "(", "pairStartIndex", ",", "pairEndIndex", ")", ")", ";", "}", "else", "{", "address", "=", "Utility", ".", "fastUrlDecode", "(", "addressList", ".", "substring", "(", "pairStartIndex", ",", "addressEndIndex", ")", ")", ";", "personal", "=", "Utility", ".", "fastUrlDecode", "(", "addressList", ".", "substring", "(", "addressEndIndex", "+", "1", ",", "pairEndIndex", ")", ")", ";", "}", "addresses", ".", "add", "(", "new", "Address", "(", "address", ",", "personal", ")", ")", ";", "pairStartIndex", "=", "pairEndIndex", "+", "1", ";", "}", "return", "addresses", ".", "toArray", "(", "new", "Address", "[", "]", "{", "}", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Sender", "newInstance", "(", "Context", "context", ",", "String", "uri", ")", "throws", "MessagingException", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "uri", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Sender", "instantiateSender", "(", "Context", "context", ",", "String", "className", ",", "String", "uri", ")", "throws", "MessagingException", "{", "Object", "o", "=", "null", ";", "try", "{", "Class", "<", "?", ">", "c", "=", "Class", ".", "forName", "(", "className", ")", ";", "java", ".", "lang", ".", "reflect", ".", "Method", "m", "=", "c", ".", "getMethod", "(", "\"", "<STR_LIT>", "\"", ",", "Context", ".", "class", ",", "String", ".", "class", ")", ";", "o", "=", "m", ".", "invoke", "(", "null", ",", "context", ",", "uri", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "e", ".", "toString", "(", ")", ",", "className", ",", "uri", ")", ")", ";", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "uri", ")", ";", "}", "if", "(", "!", "(", "o", "instanceof", "Sender", ")", ")", "{", "throw", "new", "MessagingException", "(", "uri", "+", "\"", "<STR_LIT>", "\"", "+", "className", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "(", "Sender", ")", "o", ";", "}", "</s>"]
["<s>", "private", "static", "Sender", "findSender", "(", "Context", "context", ",", "int", "resourceId", ",", "String", "uri", ")", "throws", "MessagingException", "{", "Sender", "sender", "=", "null", ";", "try", "{", "XmlResourceParser", "xml", "=", "context", ".", "getResources", "(", ")", ".", "getXml", "(", "resourceId", ")", ";", "int", "xmlEventType", ";", "while", "(", "(", "xmlEventType", "=", "xml", ".", "next", "(", ")", ")", "!", "=", "XmlResourceParser", ".", "END_DOCUMENT", ")", "{", "if", "(", "xmlEventType", "=", "=", "XmlResourceParser", ".", "START_TAG", "&", "&", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "xml", ".", "getName", "(", ")", ")", ")", "{", "String", "scheme", "=", "xml", ".", "getAttributeValue", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "uri", ".", "startsWith", "(", "scheme", ")", ")", "{", "String", "className", "=", "xml", ".", "getAttributeValue", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "sender", "=", "instantiateSender", "(", "context", ",", "className", ",", "uri", ")", ";", "}", "}", "}", "}", "catch", "(", "XmlPullParserException", "e", ")", "{", "}", "catch", "(", "IOException", "e", ")", "{", "}", "return", "sender", ";", "}", "</s>"]
["<s>", "public", "synchronized", "static", "Sender", "getInstance", "(", "Context", "context", ",", "String", "uri", ")", "throws", "MessagingException", "{", "Sender", "sender", "=", "mSenders", ".", "get", "(", "uri", ")", ";", "if", "(", "sender", "=", "=", "null", ")", "{", "sender", "=", "findSender", "(", "context", ",", "R", ".", "xml", ".", "senders_product", ",", "uri", ")", ";", "if", "(", "sender", "=", "=", "null", ")", "{", "sender", "=", "findSender", "(", "context", ",", "R", ".", "xml", ".", "senders", ",", "uri", ")", ";", "}", "if", "(", "sender", "!", "=", "null", ")", "{", "mSenders", ".", "put", "(", "uri", ",", "sender", ")", ";", "}", "}", "if", "(", "sender", "=", "=", "null", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "uri", ")", ";", "}", "return", "sender", ";", "}", "</s>"]
["<s>", "public", "Class", "<", "?", "extends", "android", ".", "app", ".", "Activity", ">", "getSettingActivityClass", "(", ")", "{", "return", "com", ".", "android", ".", "email", ".", "activity", ".", "setup", ".", "AccountSetupOutgoing", ".", "class", ";", "}", "</s>"]
["<s>", "public", "abstract", "void", "open", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "String", "validateSenderLimit", "(", "long", "messageId", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "public", "void", "checkSenderLimitation", "(", "long", "messageId", ")", "throws", "LimitViolationException", "{", "}", "</s>"]
["<s>", "private", "LimitViolationException", "(", "int", "msgResourceId", ",", "long", "actual", ",", "long", "limit", ")", "{", "super", "(", "UNSPECIFIED_EXCEPTION", ")", ";", "mMsgResourceId", "=", "msgResourceId", ";", "mActual", "=", "actual", ";", "mLimit", "=", "limit", ";", "}", "</s>"]
["<s>", "public", "static", "void", "check", "(", "int", "msgResourceId", ",", "long", "actual", ",", "long", "limit", ")", "throws", "LimitViolationException", "{", "if", "(", "actual", ">", "limit", ")", "{", "throw", "new", "LimitViolationException", "(", "msgResourceId", ",", "actual", ",", "limit", ")", ";", "}", "}", "</s>"]
["<s>", "public", "abstract", "void", "sendMessage", "(", "long", "messageId", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "close", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "AuthenticationFailedException", "(", "String", "message", ")", "{", "super", "(", "MessagingException", ".", "AUTHENTICATION_FAILED", ",", "message", ")", ";", "}", "</s>"]
["<s>", "public", "AuthenticationFailedException", "(", "String", "message", ",", "Throwable", "throwable", ")", "{", "super", "(", "message", ",", "throwable", ")", ";", "mExceptionType", "=", "MessagingException", ".", "AUTHENTICATION_FAILED", ";", "}", "</s>"]
["<s>", "public", "static", "Store", "newInstance", "(", "String", "uri", ",", "Context", "context", ",", "PersistentDataCallbacks", "callbacks", ")", "throws", "MessagingException", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "uri", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Store", "instantiateStore", "(", "String", "className", ",", "String", "uri", ",", "Context", "context", ",", "PersistentDataCallbacks", "callbacks", ")", "throws", "MessagingException", "{", "Object", "o", "=", "null", ";", "try", "{", "Class", "<", "?", ">", "c", "=", "Class", ".", "forName", "(", "className", ")", ";", "java", ".", "lang", ".", "reflect", ".", "Method", "m", "=", "c", ".", "getMethod", "(", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "Context", ".", "class", ",", "PersistentDataCallbacks", ".", "class", ")", ";", "o", "=", "m", ".", "invoke", "(", "null", ",", "uri", ",", "context", ",", "callbacks", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "e", ".", "toString", "(", ")", ",", "className", ",", "uri", ")", ")", ";", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "uri", ")", ";", "}", "if", "(", "!", "(", "o", "instanceof", "Store", ")", ")", "{", "throw", "new", "MessagingException", "(", "uri", "+", "\"", "<STR_LIT>", "\"", "+", "className", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "(", "Store", ")", "o", ";", "}", "</s>"]
["<s>", "public", "static", "StoreInfo", "getStoreInfo", "(", "String", "scheme", ",", "Context", "context", ")", "{", "StoreInfo", "result", "=", "getStoreInfo", "(", "R", ".", "xml", ".", "stores_product", ",", "scheme", ",", "context", ")", ";", "if", "(", "result", "=", "=", "null", ")", "{", "result", "=", "getStoreInfo", "(", "R", ".", "xml", ".", "stores", ",", "scheme", ",", "context", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "public", "static", "StoreInfo", "getStoreInfo", "(", "int", "resourceId", ",", "String", "scheme", ",", "Context", "context", ")", "{", "try", "{", "XmlResourceParser", "xml", "=", "context", ".", "getResources", "(", ")", ".", "getXml", "(", "resourceId", ")", ";", "int", "xmlEventType", ";", "while", "(", "(", "xmlEventType", "=", "xml", ".", "next", "(", ")", ")", "!", "=", "XmlResourceParser", ".", "END_DOCUMENT", ")", "{", "if", "(", "xmlEventType", "=", "=", "XmlResourceParser", ".", "START_TAG", "&", "&", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "xml", ".", "getName", "(", ")", ")", ")", "{", "String", "xmlScheme", "=", "xml", ".", "getAttributeValue", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "scheme", "!", "=", "null", "&", "&", "scheme", ".", "startsWith", "(", "xmlScheme", ")", ")", "{", "StoreInfo", "result", "=", "new", "StoreInfo", "(", ")", ";", "result", ".", "mScheme", "=", "xmlScheme", ";", "result", ".", "mClassName", "=", "xml", ".", "getAttributeValue", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "result", ".", "mPushSupported", "=", "xml", ".", "getAttributeBooleanValue", "(", "null", ",", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "result", ".", "mVisibleLimitDefault", "=", "xml", ".", "getAttributeIntValue", "(", "null", ",", "\"", "<STR_LIT>", "\"", ",", "Email", ".", "VISIBLE_LIMIT_DEFAULT", ")", ";", "result", ".", "mVisibleLimitIncrement", "=", "xml", ".", "getAttributeIntValue", "(", "null", ",", "\"", "<STR_LIT>", "\"", ",", "Email", ".", "VISIBLE_LIMIT_INCREMENT", ")", ";", "result", ".", "mAccountInstanceLimit", "=", "xml", ".", "getAttributeIntValue", "(", "null", ",", "\"", "<STR_LIT>", "\"", ",", "-", "1", ")", ";", "return", "result", ";", "}", "}", "}", "}", "catch", "(", "XmlPullParserException", "e", ")", "{", "}", "catch", "(", "IOException", "e", ")", "{", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "synchronized", "static", "Store", "getInstance", "(", "String", "uri", ",", "Context", "context", ",", "PersistentDataCallbacks", "callbacks", ")", "throws", "MessagingException", "{", "Store", "store", "=", "mStores", ".", "get", "(", "uri", ")", ";", "if", "(", "store", "=", "=", "null", ")", "{", "StoreInfo", "info", "=", "StoreInfo", ".", "getStoreInfo", "(", "uri", ",", "context", ")", ";", "if", "(", "info", "!", "=", "null", ")", "{", "store", "=", "instantiateStore", "(", "info", ".", "mClassName", ",", "uri", ",", "context", ",", "callbacks", ")", ";", "}", "if", "(", "store", "!", "=", "null", ")", "{", "mStores", ".", "put", "(", "uri", ",", "store", ")", ";", "}", "}", "else", "{", "store", ".", "setPersistentDataCallbacks", "(", "callbacks", ")", ";", "}", "if", "(", "store", "=", "=", "null", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "uri", ")", ";", "}", "return", "store", ";", "}", "</s>"]
["<s>", "public", "synchronized", "static", "void", "removeInstance", "(", "String", "storeUri", ")", "{", "mStores", ".", "remove", "(", "storeUri", ")", ";", "}", "</s>"]
["<s>", "public", "Class", "<", "?", "extends", "android", ".", "app", ".", "Activity", ">", "getSettingActivityClass", "(", ")", "{", "return", "com", ".", "android", ".", "email", ".", "activity", ".", "setup", ".", "AccountSetupIncoming", ".", "class", ";", "}", "</s>"]
["<s>", "public", "StoreSynchronizer", "getMessageSynchronizer", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "public", "boolean", "requireStructurePrefetch", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "requireCopyMessageToSentFolder", "(", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "public", "abstract", "Folder", "getFolder", "(", "String", "name", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "Folder", "[", "]", "getPersonalNamespaces", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "checkSettings", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "void", "delete", "(", ")", "throws", "MessagingException", "{", "}", "</s>"]
["<s>", "protected", "void", "setPersistentDataCallbacks", "(", "PersistentDataCallbacks", "callbacks", ")", "{", "}", "</s>"]
["<s>", "public", "void", "setPersistentString", "(", "String", "key", ",", "String", "value", ")", ";", "</s>"]
["<s>", "public", "String", "getPersistentString", "(", "String", "key", ",", "String", "defaultValue", ")", ";", "</s>"]
["<s>", "public", "abstract", "void", "open", "(", "OpenMode", "mode", ",", "PersistentDataCallbacks", "callbacks", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "close", "(", "boolean", "expunge", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "boolean", "isOpen", "(", ")", ";", "</s>"]
["<s>", "public", "abstract", "OpenMode", "getMode", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "boolean", "canCreate", "(", "FolderType", "type", ")", ";", "</s>"]
["<s>", "public", "abstract", "boolean", "create", "(", "FolderType", "type", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "boolean", "exists", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "int", "getMessageCount", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "int", "getUnreadMessageCount", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "Message", "getMessage", "(", "String", "uid", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "Message", "[", "]", "getMessages", "(", "int", "start", ",", "int", "end", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "Message", "[", "]", "getMessages", "(", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "Message", "[", "]", "getMessages", "(", "String", "[", "]", "uids", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "Message", "[", "]", "getMessages", "(", "Flag", "[", "]", "setFlags", ",", "Flag", "[", "]", "clearFlags", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "abstract", "void", "appendMessages", "(", "Message", "[", "]", "messages", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "copyMessages", "(", "Message", "[", "]", "msgs", ",", "Folder", "folder", ",", "MessageUpdateCallbacks", "callbacks", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "setFlags", "(", "Message", "[", "]", "messages", ",", "Flag", "[", "]", "flags", ",", "boolean", "value", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "Message", "[", "]", "expunge", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "fetch", "(", "Message", "[", "]", "messages", ",", "FetchProfile", "fp", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "void", "delete", "(", "boolean", "recurse", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "abstract", "String", "getName", "(", ")", ";", "</s>"]
["<s>", "public", "abstract", "Flag", "[", "]", "getPermanentFlags", "(", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "FolderRole", "getRole", "(", ")", "{", "return", "FolderRole", ".", "UNKNOWN", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "localFolderSetupComplete", "(", "Folder", "localFolder", ")", "throws", "MessagingException", "{", "}", "</s>"]
["<s>", "public", "abstract", "Message", "createMessage", "(", "String", "uid", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "void", "setPersistentString", "(", "String", "key", ",", "String", "value", ")", ";", "</s>"]
["<s>", "public", "String", "getPersistentString", "(", "String", "key", ",", "String", "defaultValue", ")", ";", "</s>"]
["<s>", "public", "void", "setPersistentStringAndMessageFlags", "(", "String", "key", ",", "String", "value", ",", "Flag", "[", "]", "setFlags", ",", "Flag", "[", "]", "clearFlags", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "void", "onMessageUidChange", "(", "Message", "message", ",", "String", "newUid", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "public", "void", "onMessageNotFound", "(", "Message", "message", ")", "throws", "MessagingException", ";", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addBodyPart", "(", "BodyPart", "part", ")", "throws", "MessagingException", "{", "mParts", ".", "add", "(", "part", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addBodyPart", "(", "BodyPart", "part", ",", "int", "index", ")", "throws", "MessagingException", "{", "mParts", ".", "add", "(", "index", ",", "part", ")", ";", "}", "</s>"]
["<s>", "public", "BodyPart", "getBodyPart", "(", "int", "index", ")", "throws", "MessagingException", "{", "return", "mParts", ".", "get", "(", "index", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getContentType", "(", ")", "throws", "MessagingException", "{", "return", "mContentType", ";", "}", "</s>"]
["<s>", "public", "int", "getCount", "(", ")", "throws", "MessagingException", "{", "return", "mParts", ".", "size", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "removeBodyPart", "(", "BodyPart", "part", ")", "throws", "MessagingException", "{", "return", "mParts", ".", "remove", "(", "part", ")", ";", "}", "</s>"]
["<s>", "public", "void", "removeBodyPart", "(", "int", "index", ")", "throws", "MessagingException", "{", "mParts", ".", "remove", "(", "index", ")", ";", "}", "</s>"]
["<s>", "public", "Part", "getParent", "(", ")", "throws", "MessagingException", "{", "return", "mParent", ";", "}", "</s>"]
["<s>", "public", "void", "setParent", "(", "Part", "parent", ")", "throws", "MessagingException", "{", "this", ".", "mParent", "=", "parent", ";", "}", "</s>"]
["<s>", "public", "EOLConvertingOutputStream", "(", "OutputStream", "out", ")", "{", "super", "(", "out", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "write", "(", "int", "oneByte", ")", "throws", "IOException", "{", "if", "(", "oneByte", "=", "=", "<STR_LIT:\\n>", ")", "{", "if", "(", "lastChar", "!", "=", "<STR_LIT>", ")", "{", "super", ".", "write", "(", "<STR_LIT>", ")", ";", "}", "}", "super", ".", "write", "(", "oneByte", ")", ";", "lastChar", "=", "oneByte", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "flush", "(", ")", "throws", "IOException", "{", "if", "(", "lastChar", "=", "=", "<STR_LIT>", ")", "{", "super", ".", "write", "(", "<STR_LIT:\\n>", ")", ";", "lastChar", "=", "<STR_LIT:\\n>", ";", "}", "super", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "LoggingInputStream", "(", "InputStream", "in", ")", "{", "super", "(", ")", ";", "mIn", "=", "in", ";", "mSb", "=", "new", "StringBuilder", "(", "LINE_TAG", ")", ";", "mBufferDirty", "=", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", ")", "throws", "IOException", "{", "int", "oneByte", "=", "mIn", ".", "read", "(", ")", ";", "logRaw", "(", "oneByte", ")", ";", "return", "oneByte", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", "byte", "[", "]", "b", ",", "int", "offset", ",", "int", "length", ")", "throws", "IOException", "{", "int", "bytesRead", "=", "mIn", ".", "read", "(", "b", ",", "offset", ",", "length", ")", ";", "int", "copyBytes", "=", "bytesRead", ";", "while", "(", "copyBytes", ">", "0", ")", "{", "logRaw", "(", "(", "char", ")", "b", "[", "offset", "]", ")", ";", "copyBytes", "-", "-", ";", "offset", "+", "+", ";", "}", "return", "bytesRead", ";", "}", "</s>"]
["<s>", "private", "void", "logRaw", "(", "int", "oneByte", ")", "{", "if", "(", "oneByte", "=", "=", "<STR_LIT>", "|", "|", "oneByte", "=", "=", "<STR_LIT:\\n>", ")", "{", "if", "(", "mBufferDirty", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "mSb", ".", "toString", "(", ")", ")", ";", "mSb", "=", "new", "StringBuilder", "(", "LINE_TAG", ")", ";", "mBufferDirty", "=", "false", ";", "}", "}", "else", "{", "mSb", ".", "append", "(", "(", "char", ")", "oneByte", ")", ";", "mBufferDirty", "=", "true", ";", "}", "}", "</s>"]
["<s>", "public", "static", "Sender", "newInstance", "(", "Context", "context", ",", "String", "uri", ")", "{", "return", "new", "ExchangeSender", "(", "context", ",", "uri", ")", ";", "}", "</s>"]
["<s>", "private", "ExchangeSender", "(", "Context", "context", ",", "String", "_uri", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "open", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "sendMessage", "(", "long", "messageId", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "Class", "<", "?", "extends", "android", ".", "app", ".", "Activity", ">", "getSettingActivityClass", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "public", "MailTransport", "(", "String", "debugLabel", ")", "{", "super", "(", ")", ";", "mDebugLabel", "=", "debugLabel", ";", "}", "</s>"]
["<s>", "public", "Transport", "newInstanceWithConfiguration", "(", ")", "{", "MailTransport", "newObject", "=", "new", "MailTransport", "(", "mDebugLabel", ")", ";", "newObject", ".", "mDebugLabel", "=", "mDebugLabel", ";", "newObject", ".", "mHost", "=", "mHost", ";", "newObject", ".", "mPort", "=", "mPort", ";", "if", "(", "mUserInfoParts", "!", "=", "null", ")", "{", "newObject", ".", "mUserInfoParts", "=", "mUserInfoParts", ".", "clone", "(", ")", ";", "}", "newObject", ".", "mConnectionSecurity", "=", "mConnectionSecurity", ";", "newObject", ".", "mTrustCertificates", "=", "mTrustCertificates", ";", "return", "newObject", ";", "}", "</s>"]
["<s>", "public", "void", "setUri", "(", "URI", "uri", ",", "int", "defaultPort", ")", "{", "mHost", "=", "uri", ".", "getHost", "(", ")", ";", "mPort", "=", "defaultPort", ";", "if", "(", "uri", ".", "getPort", "(", ")", "!", "=", "-", "1", ")", "{", "mPort", "=", "uri", ".", "getPort", "(", ")", ";", "}", "if", "(", "uri", ".", "getUserInfo", "(", ")", "!", "=", "null", ")", "{", "mUserInfoParts", "=", "uri", ".", "getUserInfo", "(", ")", ".", "split", "(", "\"", "<STR_LIT::>", "\"", ",", "<NUM_LIT:2>", ")", ";", "}", "}", "</s>"]
["<s>", "public", "String", "[", "]", "getUserInfoParts", "(", ")", "{", "return", "mUserInfoParts", ";", "}", "</s>"]
["<s>", "public", "String", "getHost", "(", ")", "{", "return", "mHost", ";", "}", "</s>"]
["<s>", "public", "int", "getPort", "(", ")", "{", "return", "mPort", ";", "}", "</s>"]
["<s>", "public", "void", "setSecurity", "(", "int", "connectionSecurity", ",", "boolean", "trustAllCertificates", ")", "{", "mConnectionSecurity", "=", "connectionSecurity", ";", "mTrustCertificates", "=", "trustAllCertificates", ";", "}", "</s>"]
["<s>", "public", "int", "getSecurity", "(", ")", "{", "return", "mConnectionSecurity", ";", "}", "</s>"]
["<s>", "public", "boolean", "canTrySslSecurity", "(", ")", "{", "return", "mConnectionSecurity", "=", "=", "CONNECTION_SECURITY_SSL", ";", "}", "</s>"]
["<s>", "public", "boolean", "canTryTlsSecurity", "(", ")", "{", "return", "mConnectionSecurity", "=", "=", "Transport", ".", "CONNECTION_SECURITY_TLS", ";", "}", "</s>"]
["<s>", "public", "boolean", "canTrustAllCertificates", "(", ")", "{", "return", "mTrustCertificates", ";", "}", "</s>"]
["<s>", "public", "void", "open", "(", ")", "throws", "MessagingException", ",", "CertificateValidationException", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "mDebugLabel", "+", "\"", "<STR_LIT>", "\"", "+", "getHost", "(", ")", "+", "\"", "<STR_LIT::>", "\"", "+", "String", ".", "valueOf", "(", "getPort", "(", ")", ")", ")", ";", "}", "try", "{", "SocketAddress", "socketAddress", "=", "new", "InetSocketAddress", "(", "getHost", "(", ")", ",", "getPort", "(", ")", ")", ";", "if", "(", "canTrySslSecurity", "(", ")", ")", "{", "SSLContext", "sslContext", "=", "SSLContext", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sslContext", ".", "init", "(", "null", ",", "new", "TrustManager", "[", "]", "{", "TrustManagerFactory", ".", "get", "(", "getHost", "(", ")", ",", "!", "canTrustAllCertificates", "(", ")", ")", "}", ",", "new", "SecureRandom", "(", ")", ")", ";", "mSocket", "=", "sslContext", ".", "getSocketFactory", "(", ")", ".", "createSocket", "(", ")", ";", "}", "else", "{", "mSocket", "=", "new", "Socket", "(", ")", ";", "}", "mSocket", ".", "connect", "(", "socketAddress", ",", "SOCKET_CONNECT_TIMEOUT", ")", ";", "mIn", "=", "new", "BufferedInputStream", "(", "mSocket", ".", "getInputStream", "(", ")", ",", "<NUM_LIT>", ")", ";", "mOut", "=", "new", "BufferedOutputStream", "(", "mSocket", ".", "getOutputStream", "(", ")", ",", "<NUM_LIT>", ")", ";", "}", "catch", "(", "SSLException", "e", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "e", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "CertificateValidationException", "(", "e", ".", "getMessage", "(", ")", ",", "e", ")", ";", "}", "catch", "(", "GeneralSecurityException", "gse", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "gse", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "MessagingException", "(", "MessagingException", ".", "GENERAL_SECURITY", ",", "gse", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "ioe", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "MessagingException", "(", "MessagingException", ".", "IOERROR", ",", "ioe", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "reopenTls", "(", ")", "throws", "MessagingException", "{", "try", "{", "SSLContext", "sslContext", "=", "SSLContext", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sslContext", ".", "init", "(", "null", ",", "new", "TrustManager", "[", "]", "{", "TrustManagerFactory", ".", "get", "(", "getHost", "(", ")", ",", "!", "canTrustAllCertificates", "(", ")", ")", "}", ",", "new", "SecureRandom", "(", ")", ")", ";", "mSocket", "=", "sslContext", ".", "getSocketFactory", "(", ")", ".", "createSocket", "(", "mSocket", ",", "getHost", "(", ")", ",", "getPort", "(", ")", ",", "true", ")", ";", "mSocket", ".", "setSoTimeout", "(", "SOCKET_READ_TIMEOUT", ")", ";", "mIn", "=", "new", "BufferedInputStream", "(", "mSocket", ".", "getInputStream", "(", ")", ",", "<NUM_LIT>", ")", ";", "mOut", "=", "new", "BufferedOutputStream", "(", "mSocket", ".", "getOutputStream", "(", ")", ",", "<NUM_LIT>", ")", ";", "}", "catch", "(", "SSLException", "e", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "e", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "CertificateValidationException", "(", "e", ".", "getMessage", "(", ")", ",", "e", ")", ";", "}", "catch", "(", "GeneralSecurityException", "gse", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "gse", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "MessagingException", "(", "MessagingException", ".", "GENERAL_SECURITY", ",", "gse", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "ioe", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "MessagingException", "(", "MessagingException", ".", "IOERROR", ",", "ioe", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "setSoTimeout", "(", "int", "timeoutMilliseconds", ")", "throws", "SocketException", "{", "mSocket", ".", "setSoTimeout", "(", "timeoutMilliseconds", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isOpen", "(", ")", "{", "return", "(", "mIn", "!", "=", "null", "&", "&", "mOut", "!", "=", "null", "&", "&", "mSocket", "!", "=", "null", "&", "&", "mSocket", ".", "isConnected", "(", ")", "&", "&", "!", "mSocket", ".", "isClosed", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "{", "try", "{", "mIn", ".", "close", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "}", "try", "{", "mOut", ".", "close", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "}", "try", "{", "mSocket", ".", "close", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "}", "mIn", "=", "null", ";", "mOut", "=", "null", ";", "mSocket", "=", "null", ";", "}", "</s>"]
["<s>", "public", "InputStream", "getInputStream", "(", ")", "{", "return", "mIn", ";", "}", "</s>"]
["<s>", "public", "OutputStream", "getOutputStream", "(", ")", "{", "return", "mOut", ";", "}", "</s>"]
["<s>", "public", "void", "writeLine", "(", "String", "s", ",", "String", "sensitiveReplacement", ")", "throws", "IOException", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "if", "(", "sensitiveReplacement", "!", "=", "null", "&", "&", "!", "Email", ".", "DEBUG_SENSITIVE", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "sensitiveReplacement", ")", ";", "}", "else", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "s", ")", ";", "}", "}", "OutputStream", "out", "=", "getOutputStream", "(", ")", ";", "out", ".", "write", "(", "s", ".", "getBytes", "(", ")", ")", ";", "out", ".", "write", "(", "<STR_LIT>", ")", ";", "out", ".", "write", "(", "<STR_LIT:\\n>", ")", ";", "out", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "readLine", "(", ")", "throws", "IOException", "{", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "InputStream", "in", "=", "getInputStream", "(", ")", ";", "int", "d", ";", "while", "(", "(", "d", "=", "in", ".", "read", "(", ")", ")", "!", "=", "-", "1", ")", "{", "if", "(", "(", "(", "char", ")", "d", ")", "=", "=", "<STR_LIT>", ")", "{", "continue", ";", "}", "else", "if", "(", "(", "(", "char", ")", "d", ")", "=", "=", "<STR_LIT:\\n>", ")", "{", "break", ";", "}", "else", "{", "sb", ".", "append", "(", "(", "char", ")", "d", ")", ";", "}", "}", "if", "(", "d", "=", "=", "-", "1", "&", "&", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "String", "ret", "=", "sb", ".", "toString", "(", ")", ";", "if", "(", "Config", ".", "LOGD", ")", "{", "if", "(", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "ret", ")", ";", "}", "}", "return", "ret", ";", "}", "</s>"]
["<s>", "public", "static", "Sender", "newInstance", "(", "Context", "context", ",", "String", "uri", ")", "throws", "MessagingException", "{", "return", "new", "SmtpSender", "(", "context", ",", "uri", ")", ";", "}", "</s>"]
["<s>", "private", "SmtpSender", "(", "Context", "context", ",", "String", "uriString", ")", "throws", "MessagingException", "{", "mContext", "=", "context", ";", "URI", "uri", ";", "try", "{", "uri", "=", "new", "URI", "(", "uriString", ")", ";", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "use", ")", ";", "}", "String", "scheme", "=", "uri", ".", "getScheme", "(", ")", ";", "if", "(", "scheme", "=", "=", "null", "|", "|", "!", "scheme", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "int", "connectionSecurity", "=", "Transport", ".", "CONNECTION_SECURITY_NONE", ";", "int", "defaultPort", "=", "<NUM_LIT>", ";", "if", "(", "scheme", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "connectionSecurity", "=", "Transport", ".", "CONNECTION_SECURITY_SSL", ";", "defaultPort", "=", "<NUM_LIT>", ";", "}", "else", "if", "(", "scheme", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "connectionSecurity", "=", "Transport", ".", "CONNECTION_SECURITY_TLS", ";", "}", "boolean", "trustCertificates", "=", "scheme", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mTransport", "=", "new", "MailTransport", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mTransport", ".", "setUri", "(", "uri", ",", "defaultPort", ")", ";", "mTransport", ".", "setSecurity", "(", "connectionSecurity", ",", "trustCertificates", ")", ";", "String", "[", "]", "userInfoParts", "=", "mTransport", ".", "getUserInfoParts", "(", ")", ";", "if", "(", "userInfoParts", "!", "=", "null", ")", "{", "mUsername", "=", "userInfoParts", "[", "0", "]", ";", "if", "(", "userInfoParts", ".", "length", ">", "1", ")", "{", "mPassword", "=", "userInfoParts", "[", "1", "]", ";", "}", "}", "}", "</s>"]
["<s>", "void", "setTransport", "(", "Transport", "testTransport", ")", "{", "mTransport", "=", "testTransport", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "open", "(", ")", "throws", "MessagingException", "{", "try", "{", "mTransport", ".", "open", "(", ")", ";", "executeSimpleCommand", "(", "null", ")", ";", "String", "localHost", "=", "\"", "<STR_LIT>", "\"", ";", "try", "{", "InetAddress", "localAddress", "=", "InetAddress", ".", "getLocalHost", "(", ")", ";", "localHost", "=", "localAddress", ".", "getHostName", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "String", "result", "=", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", "+", "localHost", ")", ";", "if", "(", "mTransport", ".", "canTryTlsSecurity", "(", ")", ")", "{", "if", "(", "result", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mTransport", ".", "reopenTls", "(", ")", ";", "result", "=", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", "+", "localHost", ")", ";", "}", "else", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "throw", "new", "MessagingException", "(", "MessagingException", ".", "TLS_REQUIRED", ")", ";", "}", "}", "boolean", "authLoginSupported", "=", "result", ".", "matches", "(", "\"", "<STR_LIT>", "\"", ")", ";", "boolean", "authPlainSupported", "=", "result", ".", "matches", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "mUsername", "!", "=", "null", "&", "&", "mUsername", ".", "length", "(", ")", ">", "0", "&", "&", "mPassword", "!", "=", "null", "&", "&", "mPassword", ".", "length", "(", ")", ">", "0", ")", "{", "if", "(", "authPlainSupported", ")", "{", "saslAuthPlain", "(", "mUsername", ",", "mPassword", ")", ";", "}", "else", "if", "(", "authLoginSupported", ")", "{", "saslAuthLogin", "(", "mUsername", ",", "mPassword", ")", ";", "}", "else", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "throw", "new", "MessagingException", "(", "MessagingException", ".", "AUTH_REQUIRED", ")", ";", "}", "}", "}", "catch", "(", "SSLException", "e", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "e", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "CertificateValidationException", "(", "e", ".", "getMessage", "(", ")", ",", "e", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "ioe", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "MessagingException", "(", "MessagingException", ".", "IOERROR", ",", "ioe", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "sendMessage", "(", "long", "messageId", ")", "throws", "MessagingException", "{", "close", "(", ")", ";", "open", "(", ")", ";", "Message", "message", "=", "Message", ".", "restoreMessageWithId", "(", "mContext", ",", "messageId", ")", ";", "if", "(", "message", "=", "=", "null", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "Long", ".", "toString", "(", "messageId", ")", ")", ";", "}", "Address", "from", "=", "Address", ".", "unpackFirst", "(", "message", ".", "mFrom", ")", ";", "Address", "[", "]", "to", "=", "Address", ".", "unpack", "(", "message", ".", "mTo", ")", ";", "Address", "[", "]", "cc", "=", "Address", ".", "unpack", "(", "message", ".", "mCc", ")", ";", "Address", "[", "]", "bcc", "=", "Address", ".", "unpack", "(", "message", ".", "mBcc", ")", ";", "try", "{", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:<>", "\"", "+", "from", ".", "getAddress", "(", ")", "+", "\"", "<STR_LIT:>>", "\"", ")", ";", "for", "(", "Address", "address", ":", "to", ")", "{", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:<>", "\"", "+", "address", ".", "getAddress", "(", ")", "+", "\"", "<STR_LIT:>>", "\"", ")", ";", "}", "for", "(", "Address", "address", ":", "cc", ")", "{", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:<>", "\"", "+", "address", ".", "getAddress", "(", ")", "+", "\"", "<STR_LIT:>>", "\"", ")", ";", "}", "for", "(", "Address", "address", ":", "bcc", ")", "{", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:<>", "\"", "+", "address", ".", "getAddress", "(", ")", "+", "\"", "<STR_LIT:>>", "\"", ")", ";", "}", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Rfc822Output", ".", "writeTo", "(", "mContext", ",", "messageId", ",", "new", "EOLConvertingOutputStream", "(", "mTransport", ".", "getOutputStream", "(", ")", ")", ",", "true", ",", "false", ")", ";", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:.>", "\"", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "ioe", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "{", "mTransport", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "private", "String", "executeSimpleCommand", "(", "String", "command", ")", "throws", "IOException", ",", "MessagingException", "{", "return", "executeSensitiveCommand", "(", "command", ",", "null", ")", ";", "}", "</s>"]
["<s>", "private", "String", "executeSensitiveCommand", "(", "String", "command", ",", "String", "sensitiveReplacement", ")", "throws", "IOException", ",", "MessagingException", "{", "if", "(", "command", "!", "=", "null", ")", "{", "mTransport", ".", "writeLine", "(", "command", ",", "sensitiveReplacement", ")", ";", "}", "String", "line", "=", "mTransport", ".", "readLine", "(", ")", ";", "String", "result", "=", "line", ";", "while", "(", "line", ".", "length", "(", ")", ">", "=", "<NUM_LIT:4>", "&", "&", "line", ".", "charAt", "(", "<NUM_LIT:3>", ")", "=", "=", "<CHAR_LIT:->", ")", "{", "line", "=", "mTransport", ".", "readLine", "(", ")", ";", "result", "+", "=", "line", ".", "substring", "(", "<NUM_LIT:3>", ")", ";", "}", "if", "(", "result", ".", "length", "(", ")", ">", "0", ")", "{", "char", "c", "=", "result", ".", "charAt", "(", "0", ")", ";", "if", "(", "(", "c", "=", "=", "<CHAR_LIT>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT>", ")", ")", "{", "throw", "new", "MessagingException", "(", "result", ")", ";", "}", "}", "return", "result", ";", "}", "</s>"]
["<s>", "private", "void", "saslAuthLogin", "(", "String", "username", ",", "String", "password", ")", "throws", "MessagingException", ",", "AuthenticationFailedException", ",", "IOException", "{", "try", "{", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "executeSensitiveCommand", "(", "new", "String", "(", "Base64", ".", "encodeBase64", "(", "username", ".", "getBytes", "(", ")", ")", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "executeSensitiveCommand", "(", "new", "String", "(", "Base64", ".", "encodeBase64", "(", "password", ".", "getBytes", "(", ")", ")", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "me", ".", "getMessage", "(", ")", ".", "length", "(", ")", ">", "1", "&", "&", "me", ".", "getMessage", "(", ")", ".", "charAt", "(", "1", ")", "=", "=", "<CHAR_LIT>", ")", "{", "throw", "new", "AuthenticationFailedException", "(", "me", ".", "getMessage", "(", ")", ")", ";", "}", "throw", "me", ";", "}", "}", "</s>"]
["<s>", "private", "void", "saslAuthPlain", "(", "String", "username", ",", "String", "password", ")", "throws", "MessagingException", ",", "AuthenticationFailedException", ",", "IOException", "{", "byte", "[", "]", "data", "=", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", "+", "username", "+", "\"", "<STR_LIT>", "<STR_LIT>", "\"", "+", "password", ")", ".", "getBytes", "(", ")", ";", "data", "=", "new", "Base64", "(", ")", ".", "encode", "(", "data", ")", ";", "try", "{", "executeSensitiveCommand", "(", "\"", "<STR_LIT>", "\"", "+", "new", "String", "(", "data", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "me", ".", "getMessage", "(", ")", ".", "length", "(", ")", ">", "1", "&", "&", "me", ".", "getMessage", "(", ")", ".", "charAt", "(", "1", ")", "=", "=", "<CHAR_LIT>", ")", "{", "throw", "new", "AuthenticationFailedException", "(", "me", ".", "getMessage", "(", ")", ")", ";", "}", "throw", "me", ";", "}", "}", "</s>"]
["<s>", "public", "StatusOutputStream", "(", "OutputStream", "out", ")", "{", "super", "(", "out", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "write", "(", "int", "oneByte", ")", "throws", "IOException", "{", "super", ".", "write", "(", "oneByte", ")", ";", "mCount", "+", "+", ";", "if", "(", "Email", ".", "LOGD", ")", "{", "if", "(", "mCount", "%", "<NUM_LIT>", "=", "=", "0", ")", "{", "Log", ".", "v", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "mCount", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "CountingOutputStream", "(", ")", "{", "}", "</s>"]
["<s>", "public", "long", "getCount", "(", ")", "{", "return", "mCount", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "write", "(", "int", "oneByte", ")", "throws", "IOException", "{", "mCount", "+", "+", ";", "}", "</s>"]
["<s>", "static", "String", "buildBodyText", "(", "Context", "context", ",", "Message", "message", ",", "boolean", "appendQuotedText", ")", "{", "Body", "body", "=", "Body", ".", "restoreBodyWithMessageId", "(", "context", ",", "message", ".", "mId", ")", ";", "if", "(", "body", "=", "=", "null", ")", "{", "return", "null", ";", "}", "String", "text", "=", "body", ".", "mTextContent", ";", "int", "flags", "=", "message", ".", "mFlags", ";", "boolean", "isReply", "=", "(", "flags", "&", "Message", ".", "FLAG_TYPE_REPLY", ")", "!", "=", "0", ";", "boolean", "isForward", "=", "(", "flags", "&", "Message", ".", "FLAG_TYPE_FORWARD", ")", "!", "=", "0", ";", "String", "intro", "=", "body", ".", "mIntroText", "=", "=", "null", "?", "\"", "\"", ":", "body", ".", "mIntroText", ";", "if", "(", "!", "appendQuotedText", ")", "{", "if", "(", "isReply", ")", "{", "text", "+", "=", "intro", ";", "}", "else", "if", "(", "isForward", ")", "{", "text", "+", "=", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ";", "}", "return", "text", ";", "}", "String", "quotedText", "=", "body", ".", "mTextReply", ";", "if", "(", "quotedText", "!", "=", "null", ")", "{", "Matcher", "matcher", "=", "PATTERN_ENDLINE_CRLF", ".", "matcher", "(", "quotedText", ")", ";", "quotedText", "=", "matcher", ".", "replaceAll", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "isReply", ")", "{", "text", "+", "=", "intro", ";", "if", "(", "quotedText", "!", "=", "null", ")", "{", "Matcher", "matcher", "=", "PATTERN_START_OF_LINE", ".", "matcher", "(", "quotedText", ")", ";", "text", "+", "=", "matcher", ".", "replaceAll", "(", "\"", "<STR_LIT:>>", "\"", ")", ";", "}", "}", "else", "if", "(", "isForward", ")", "{", "text", "+", "=", "intro", ";", "if", "(", "quotedText", "!", "=", "null", ")", "{", "text", "+", "=", "quotedText", ";", "}", "}", "return", "text", ";", "}", "</s>"]
["<s>", "public", "static", "void", "writeTo", "(", "Context", "context", ",", "long", "messageId", ",", "OutputStream", "out", ",", "boolean", "appendQuotedText", ",", "boolean", "sendBcc", ")", "throws", "IOException", ",", "MessagingException", "{", "Message", "message", "=", "Message", ".", "restoreMessageWithId", "(", "context", ",", "messageId", ")", ";", "if", "(", "message", "=", "=", "null", ")", "{", "return", ";", "}", "OutputStream", "stream", "=", "new", "BufferedOutputStream", "(", "out", ",", "<NUM_LIT>", ")", ";", "Writer", "writer", "=", "new", "OutputStreamWriter", "(", "stream", ")", ";", "String", "date", "=", "mDateFormat", ".", "format", "(", "new", "Date", "(", "message", ".", "mTimeStamp", ")", ")", ";", "writeHeader", "(", "writer", ",", "\"", "<STR_LIT>", "\"", ",", "date", ")", ";", "writeEncodedHeader", "(", "writer", ",", "\"", "<STR_LIT>", "\"", ",", "message", ".", "mSubject", ")", ";", "writeHeader", "(", "writer", ",", "\"", "<STR_LIT>", "\"", ",", "message", ".", "mMessageId", ")", ";", "writeAddressHeader", "(", "writer", ",", "\"", "<STR_LIT>", "\"", ",", "message", ".", "mFrom", ")", ";", "writeAddressHeader", "(", "writer", ",", "\"", "<STR_LIT>", "\"", ",", "message", ".", "mTo", ")", ";", "writeAddressHeader", "(", "writer", ",", "\"", "<STR_LIT>", "\"", ",", "message", ".", "mCc", ")", ";", "if", "(", "sendBcc", ")", "{", "writeAddressHeader", "(", "writer", ",", "\"", "<STR_LIT>", "\"", ",", "message", ".", "mBcc", ")", ";", "}", "writeAddressHeader", "(", "writer", ",", "\"", "<STR_LIT>", "\"", ",", "message", ".", "mReplyTo", ")", ";", "String", "text", "=", "buildBodyText", "(", "context", ",", "message", ",", "appendQuotedText", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "MESSAGE_ID_URI", ",", "messageId", ")", ";", "Cursor", "attachmentsCursor", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "Attachment", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "boolean", "mixedParts", "=", "attachmentsCursor", ".", "getCount", "(", ")", ">", "0", ";", "String", "mixedBoundary", "=", "null", ";", "if", "(", "!", "mixedParts", ")", "{", "if", "(", "text", "!", "=", "null", ")", "{", "writeTextWithHeaders", "(", "writer", ",", "stream", ",", "text", ")", ";", "}", "else", "{", "writer", ".", "write", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "}", "else", "{", "writeHeader", "(", "writer", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1.0>", "\"", ")", ";", "mixedBoundary", "=", "\"", "<STR_LIT>", "\"", "+", "System", ".", "nanoTime", "(", ")", ";", "writeHeader", "(", "writer", ",", "\"", "<STR_LIT:Content-Type>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "mixedBoundary", "+", "\"", "<STR_LIT:\\\">", "\"", ")", ";", "writer", ".", "write", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "if", "(", "text", "!", "=", "null", ")", "{", "writeBoundary", "(", "writer", ",", "mixedBoundary", ",", "false", ")", ";", "writeTextWithHeaders", "(", "writer", ",", "stream", ",", "text", ")", ";", "}", "while", "(", "attachmentsCursor", ".", "moveToNext", "(", ")", ")", "{", "writeBoundary", "(", "writer", ",", "mixedBoundary", ",", "false", ")", ";", "Attachment", "attachment", "=", "Attachment", ".", "getContent", "(", "attachmentsCursor", ",", "Attachment", ".", "class", ")", ";", "writeOneAttachment", "(", "context", ",", "writer", ",", "stream", ",", "attachment", ")", ";", "writer", ".", "write", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "writeBoundary", "(", "writer", ",", "mixedBoundary", ",", "true", ")", ";", "}", "}", "finally", "{", "attachmentsCursor", ".", "close", "(", ")", ";", "}", "writer", ".", "flush", "(", ")", ";", "out", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "writeOneAttachment", "(", "Context", "context", ",", "Writer", "writer", ",", "OutputStream", "out", ",", "Attachment", "attachment", ")", "throws", "IOException", ",", "MessagingException", "{", "writeHeader", "(", "writer", ",", "\"", "<STR_LIT:Content-Type>", "\"", ",", "attachment", ".", "mMimeType", "+", "\"", "<STR_LIT:;>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "attachment", ".", "mFileName", "+", "\"", "<STR_LIT:\\\">", "\"", ")", ";", "writeHeader", "(", "writer", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "writeHeader", "(", "writer", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:;>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "attachment", ".", "mFileName", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT:;>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "\"", "+", "Long", ".", "toString", "(", "attachment", ".", "mSize", ")", ")", ";", "writeHeader", "(", "writer", ",", "\"", "<STR_LIT>", "\"", ",", "attachment", ".", "mContentId", ")", ";", "writer", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "InputStream", "inStream", "=", "null", ";", "try", "{", "Uri", "fileUri", "=", "Uri", ".", "parse", "(", "attachment", ".", "mContentUri", ")", ";", "inStream", "=", "context", ".", "getContentResolver", "(", ")", ".", "openInputStream", "(", "fileUri", ")", ";", "writer", ".", "flush", "(", ")", ";", "Base64OutputStream", "base64Out", "=", "new", "Base64OutputStream", "(", "out", ")", ";", "IOUtils", ".", "copy", "(", "inStream", ",", "base64Out", ")", ";", "base64Out", ".", "close", "(", ")", ";", "}", "catch", "(", "FileNotFoundException", "fnfe", ")", "{", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "ioe", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "void", "writeHeader", "(", "Writer", "writer", ",", "String", "name", ",", "String", "value", ")", "throws", "IOException", "{", "if", "(", "value", "!", "=", "null", "&", "&", "value", ".", "length", "(", ")", ">", "0", ")", "{", "writer", ".", "append", "(", "name", ")", ";", "writer", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "writer", ".", "append", "(", "value", ")", ";", "writer", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "void", "writeEncodedHeader", "(", "Writer", "writer", ",", "String", "name", ",", "String", "value", ")", "throws", "IOException", "{", "if", "(", "value", "!", "=", "null", "&", "&", "value", ".", "length", "(", ")", ">", "0", ")", "{", "writer", ".", "append", "(", "name", ")", ";", "writer", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "writer", ".", "append", "(", "MimeUtility", ".", "foldAndEncode2", "(", "value", ",", "name", ".", "length", "(", ")", "+", "<NUM_LIT:2>", ")", ")", ";", "writer", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "void", "writeAddressHeader", "(", "Writer", "writer", ",", "String", "name", ",", "String", "value", ")", "throws", "IOException", "{", "if", "(", "value", "!", "=", "null", "&", "&", "value", ".", "length", "(", ")", ">", "0", ")", "{", "writer", ".", "append", "(", "name", ")", ";", "writer", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "writer", ".", "append", "(", "MimeUtility", ".", "fold", "(", "Address", ".", "packedToHeader", "(", "value", ")", ",", "name", ".", "length", "(", ")", "+", "<NUM_LIT:2>", ")", ")", ";", "writer", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "void", "writeBoundary", "(", "Writer", "writer", ",", "String", "boundary", ",", "boolean", "end", ")", "throws", "IOException", "{", "writer", ".", "append", "(", "\"", "<STR_LIT:-->", "\"", ")", ";", "writer", ".", "append", "(", "boundary", ")", ";", "if", "(", "end", ")", "{", "writer", ".", "append", "(", "\"", "<STR_LIT:-->", "\"", ")", ";", "}", "writer", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "writeTextWithHeaders", "(", "Writer", "writer", ",", "OutputStream", "out", ",", "String", "text", ")", "throws", "IOException", "{", "writeHeader", "(", "writer", ",", "\"", "<STR_LIT:Content-Type>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "writeHeader", "(", "writer", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "writer", ".", "write", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "byte", "[", "]", "bytes", "=", "text", ".", "getBytes", "(", "\"", "<STR_LIT:UTF-8>", "\"", ")", ";", "writer", ".", "flush", "(", ")", ";", "out", ".", "write", "(", "Base64", ".", "encodeBase64Chunked", "(", "bytes", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MimeBodyPart", "(", ")", "throws", "MessagingException", "{", "this", "(", "null", ")", ";", "}", "</s>"]
["<s>", "public", "MimeBodyPart", "(", "Body", "body", ")", "throws", "MessagingException", "{", "this", "(", "body", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "MimeBodyPart", "(", "Body", "body", ",", "String", "mimeType", ")", "throws", "MessagingException", "{", "if", "(", "mimeType", "!", "=", "null", ")", "{", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "mimeType", ")", ";", "}", "setBody", "(", "body", ")", ";", "}", "</s>"]
["<s>", "protected", "String", "getFirstHeader", "(", "String", "name", ")", "throws", "MessagingException", "{", "return", "mHeader", ".", "getFirstHeader", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addHeader", "(", "String", "name", ",", "String", "value", ")", "throws", "MessagingException", "{", "mHeader", ".", "addHeader", "(", "name", ",", "value", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setHeader", "(", "String", "name", ",", "String", "value", ")", "throws", "MessagingException", "{", "mHeader", ".", "setHeader", "(", "name", ",", "value", ")", ";", "}", "</s>"]
["<s>", "public", "String", "[", "]", "getHeader", "(", "String", "name", ")", "throws", "MessagingException", "{", "return", "mHeader", ".", "getHeader", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "void", "removeHeader", "(", "String", "name", ")", "throws", "MessagingException", "{", "mHeader", ".", "removeHeader", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "Body", "getBody", "(", ")", "throws", "MessagingException", "{", "return", "mBody", ";", "}", "</s>"]
["<s>", "public", "void", "setBody", "(", "Body", "body", ")", "throws", "MessagingException", "{", "this", ".", "mBody", "=", "body", ";", "if", "(", "body", "instanceof", "com", ".", "android", ".", "email", ".", "mail", ".", "Multipart", ")", "{", "com", ".", "android", ".", "email", ".", "mail", ".", "Multipart", "multipart", "=", "(", "(", "com", ".", "android", ".", "email", ".", "mail", ".", "Multipart", ")", "body", ")", ";", "multipart", ".", "setParent", "(", "this", ")", ";", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "multipart", ".", "getContentType", "(", ")", ")", ";", "}", "else", "if", "(", "body", "instanceof", "TextBody", ")", "{", "String", "contentType", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "getMimeType", "(", ")", ")", ";", "String", "name", "=", "MimeUtility", ".", "getHeaderParameter", "(", "getContentType", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "name", "!", "=", "null", ")", "{", "contentType", "+", "=", "String", ".", "format", "(", "\"", "<STR_LIT:;>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "\"", ",", "name", ")", ";", "}", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "contentType", ")", ";", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TRANSFER_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "String", "getContentType", "(", ")", "throws", "MessagingException", "{", "String", "contentType", "=", "getFirstHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ")", ";", "if", "(", "contentType", "=", "=", "null", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "else", "{", "return", "contentType", ";", "}", "}", "</s>"]
["<s>", "public", "String", "getDisposition", "(", ")", "throws", "MessagingException", "{", "String", "contentDisposition", "=", "getFirstHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_DISPOSITION", ")", ";", "if", "(", "contentDisposition", "=", "=", "null", ")", "{", "return", "null", ";", "}", "else", "{", "return", "contentDisposition", ";", "}", "}", "</s>"]
["<s>", "public", "String", "getContentId", "(", ")", "throws", "MessagingException", "{", "String", "contentId", "=", "getFirstHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_ID", ")", ";", "if", "(", "contentId", "=", "=", "null", ")", "{", "return", "null", ";", "}", "else", "{", "return", "REMOVE_OPTIONAL_BRACKETS", ".", "matcher", "(", "contentId", ")", ".", "replaceAll", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "String", "getMimeType", "(", ")", "throws", "MessagingException", "{", "return", "MimeUtility", ".", "getHeaderParameter", "(", "getContentType", "(", ")", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isMimeType", "(", "String", "mimeType", ")", "throws", "MessagingException", "{", "return", "getMimeType", "(", ")", ".", "equals", "(", "mimeType", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setSize", "(", "int", "size", ")", "{", "this", ".", "mSize", "=", "size", ";", "}", "</s>"]
["<s>", "public", "int", "getSize", "(", ")", "throws", "MessagingException", "{", "return", "mSize", ";", "}", "</s>"]
["<s>", "public", "void", "setExtendedHeader", "(", "String", "name", ",", "String", "value", ")", "throws", "MessagingException", "{", "if", "(", "value", "=", "=", "null", ")", "{", "if", "(", "mExtendedHeader", "!", "=", "null", ")", "{", "mExtendedHeader", ".", "removeHeader", "(", "name", ")", ";", "}", "return", ";", "}", "if", "(", "mExtendedHeader", "=", "=", "null", ")", "{", "mExtendedHeader", "=", "new", "MimeHeader", "(", ")", ";", "}", "mExtendedHeader", ".", "setHeader", "(", "name", ",", "END_OF_LINE", ".", "matcher", "(", "value", ")", ".", "replaceAll", "(", "\"", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getExtendedHeader", "(", "String", "name", ")", "throws", "MessagingException", "{", "if", "(", "mExtendedHeader", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "mExtendedHeader", ".", "getFirstHeader", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", ",", "MessagingException", "{", "BufferedWriter", "writer", "=", "new", "BufferedWriter", "(", "new", "OutputStreamWriter", "(", "out", ")", ",", "<NUM_LIT>", ")", ";", "mHeader", ".", "writeTo", "(", "out", ")", ";", "writer", ".", "write", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "writer", ".", "flush", "(", ")", ";", "if", "(", "mBody", "!", "=", "null", ")", "{", "mBody", ".", "writeTo", "(", "out", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "unfold", "(", "String", "s", ")", "{", "if", "(", "s", "=", "=", "null", ")", "{", "return", "null", ";", "}", "Matcher", "patternMatcher", "=", "PATTERN_CR_OR_LF", ".", "matcher", "(", "s", ")", ";", "if", "(", "patternMatcher", ".", "find", "(", ")", ")", "{", "patternMatcher", ".", "reset", "(", ")", ";", "s", "=", "patternMatcher", ".", "replaceAll", "(", "\"", "\"", ")", ";", "}", "return", "s", ";", "}", "</s>"]
["<s>", "public", "static", "String", "decode", "(", "String", "s", ")", "{", "if", "(", "s", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "DecoderUtil", ".", "decodeEncodedWords", "(", "s", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "unfoldAndDecode", "(", "String", "s", ")", "{", "return", "decode", "(", "unfold", "(", "s", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "foldAndEncode", "(", "String", "s", ")", "{", "return", "s", ";", "}", "</s>"]
["<s>", "public", "static", "String", "foldAndEncode2", "(", "String", "s", ",", "int", "usedCharacters", ")", "{", "String", "encoded", "=", "EncoderUtil", ".", "encodeIfNecessary", "(", "s", ",", "EncoderUtil", ".", "Usage", ".", "TEXT_TOKEN", ",", "usedCharacters", ")", ";", "return", "fold", "(", "encoded", ",", "usedCharacters", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "fold", "(", "String", "s", ",", "int", "usedCharacters", ")", "{", "final", "int", "maxCharacters", "=", "<NUM_LIT>", ";", "final", "int", "length", "=", "s", ".", "length", "(", ")", ";", "if", "(", "usedCharacters", "+", "length", "<", "=", "maxCharacters", ")", "return", "s", ";", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "int", "lastLineBreak", "=", "-", "usedCharacters", ";", "int", "wspIdx", "=", "indexOfWsp", "(", "s", ",", "0", ")", ";", "while", "(", "true", ")", "{", "if", "(", "wspIdx", "=", "=", "length", ")", "{", "sb", ".", "append", "(", "s", ".", "substring", "(", "Math", ".", "max", "(", "0", ",", "lastLineBreak", ")", ")", ")", ";", "return", "sb", ".", "toString", "(", ")", ";", "}", "int", "nextWspIdx", "=", "indexOfWsp", "(", "s", ",", "wspIdx", "+", "1", ")", ";", "if", "(", "nextWspIdx", "-", "lastLineBreak", ">", "maxCharacters", ")", "{", "sb", ".", "append", "(", "s", ".", "substring", "(", "Math", ".", "max", "(", "0", ",", "lastLineBreak", ")", ",", "wspIdx", ")", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "lastLineBreak", "=", "wspIdx", ";", "}", "wspIdx", "=", "nextWspIdx", ";", "}", "}", "</s>"]
["<s>", "private", "static", "int", "indexOfWsp", "(", "String", "s", ",", "int", "fromIndex", ")", "{", "final", "int", "len", "=", "s", ".", "length", "(", ")", ";", "for", "(", "int", "index", "=", "fromIndex", ";", "index", "<", "len", ";", "index", "+", "+", ")", "{", "char", "c", "=", "s", ".", "charAt", "(", "index", ")", ";", "if", "(", "c", "=", "=", "<CHAR_LIT>", "|", "|", "c", "=", "=", "<STR_LIT:\\t>", ")", "return", "index", ";", "}", "return", "len", ";", "}", "</s>"]
["<s>", "public", "static", "String", "getHeaderParameter", "(", "String", "header", ",", "String", "name", ")", "{", "if", "(", "header", "=", "=", "null", ")", "{", "return", "null", ";", "}", "String", "[", "]", "parts", "=", "unfold", "(", "header", ")", ".", "split", "(", "\"", "<STR_LIT:;>", "\"", ")", ";", "if", "(", "name", "=", "=", "null", ")", "{", "return", "parts", "[", "0", "]", ";", "}", "String", "lowerCaseName", "=", "name", ".", "toLowerCase", "(", ")", ";", "for", "(", "String", "part", ":", "parts", ")", "{", "if", "(", "part", ".", "trim", "(", ")", ".", "toLowerCase", "(", ")", ".", "startsWith", "(", "lowerCaseName", ")", ")", "{", "String", "parameter", "=", "part", ".", "split", "(", "\"", "<STR_LIT:=>", "\"", ",", "<NUM_LIT:2>", ")", "[", "1", "]", ".", "trim", "(", ")", ";", "if", "(", "parameter", ".", "startsWith", "(", "\"", "<STR_LIT:\\\">", "\"", ")", "&", "&", "parameter", ".", "endsWith", "(", "\"", "<STR_LIT:\\\">", "\"", ")", ")", "{", "return", "parameter", ".", "substring", "(", "1", ",", "parameter", ".", "length", "(", ")", "-", "1", ")", ";", "}", "else", "{", "return", "parameter", ";", "}", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "static", "Part", "findFirstPartByMimeType", "(", "Part", "part", ",", "String", "mimeType", ")", "throws", "MessagingException", "{", "if", "(", "part", ".", "getBody", "(", ")", "instanceof", "Multipart", ")", "{", "Multipart", "multipart", "=", "(", "Multipart", ")", "part", ".", "getBody", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "multipart", ".", "getCount", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "BodyPart", "bodyPart", "=", "multipart", ".", "getBodyPart", "(", "i", ")", ";", "Part", "ret", "=", "findFirstPartByMimeType", "(", "bodyPart", ",", "mimeType", ")", ";", "if", "(", "ret", "!", "=", "null", ")", "{", "return", "ret", ";", "}", "}", "}", "else", "if", "(", "part", ".", "getMimeType", "(", ")", ".", "equalsIgnoreCase", "(", "mimeType", ")", ")", "{", "return", "part", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "static", "Part", "findPartByContentId", "(", "Part", "part", ",", "String", "contentId", ")", "throws", "Exception", "{", "if", "(", "part", ".", "getBody", "(", ")", "instanceof", "Multipart", ")", "{", "Multipart", "multipart", "=", "(", "Multipart", ")", "part", ".", "getBody", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "multipart", ".", "getCount", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "BodyPart", "bodyPart", "=", "multipart", ".", "getBodyPart", "(", "i", ")", ";", "Part", "ret", "=", "findPartByContentId", "(", "bodyPart", ",", "contentId", ")", ";", "if", "(", "ret", "!", "=", "null", ")", "{", "return", "ret", ";", "}", "}", "}", "String", "cid", "=", "part", ".", "getContentId", "(", ")", ";", "if", "(", "contentId", ".", "equals", "(", "cid", ")", ")", "{", "return", "part", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "static", "String", "getTextFromPart", "(", "Part", "part", ")", "{", "try", "{", "if", "(", "part", "!", "=", "null", "&", "&", "part", ".", "getBody", "(", ")", "!", "=", "null", ")", "{", "InputStream", "in", "=", "part", ".", "getBody", "(", ")", ".", "getInputStream", "(", ")", ";", "String", "mimeType", "=", "part", ".", "getMimeType", "(", ")", ";", "if", "(", "mimeType", "!", "=", "null", "&", "&", "MimeUtility", ".", "mimeTypeMatches", "(", "mimeType", ",", "\"", "<STR_LIT>", "\"", ")", ")", "{", "ByteArrayOutputStream", "out", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "IOUtils", ".", "copy", "(", "in", ",", "out", ")", ";", "in", ".", "close", "(", ")", ";", "in", "=", "null", ";", "String", "charset", "=", "getHeaderParameter", "(", "part", ".", "getContentType", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "charset", "!", "=", "null", ")", "{", "charset", "=", "CharsetUtil", ".", "toJavaCharset", "(", "charset", ")", ";", "}", "if", "(", "charset", "=", "=", "null", ")", "{", "charset", "=", "\"", "<STR_LIT>", "\"", ";", "}", "String", "result", "=", "out", ".", "toString", "(", "charset", ")", ";", "out", ".", "close", "(", ")", ";", "return", "result", ";", "}", "}", "}", "catch", "(", "OutOfMemoryError", "oom", ")", "{", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "oom", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "e", ".", "toString", "(", ")", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "mimeTypeMatches", "(", "String", "mimeType", ",", "String", "matchAgainst", ")", "{", "Pattern", "p", "=", "Pattern", ".", "compile", "(", "matchAgainst", ".", "replaceAll", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:*>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT:.>", "<STR_LIT:\\\\>", "<STR_LIT:*>", "\"", ")", ",", "Pattern", ".", "CASE_INSENSITIVE", ")", ";", "return", "p", ".", "matcher", "(", "mimeType", ")", ".", "matches", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "mimeTypeMatches", "(", "String", "mimeType", ",", "String", "[", "]", "matchAgainst", ")", "{", "for", "(", "String", "matchType", ":", "matchAgainst", ")", "{", "if", "(", "mimeTypeMatches", "(", "mimeType", ",", "matchType", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "static", "Body", "decodeBody", "(", "InputStream", "in", ",", "String", "contentTransferEncoding", ")", "throws", "IOException", "{", "if", "(", "contentTransferEncoding", "!", "=", "null", ")", "{", "contentTransferEncoding", "=", "MimeUtility", ".", "getHeaderParameter", "(", "contentTransferEncoding", ",", "null", ")", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "contentTransferEncoding", ")", ")", "{", "in", "=", "new", "QuotedPrintableInputStream", "(", "in", ")", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "contentTransferEncoding", ")", ")", "{", "in", "=", "new", "Base64InputStream", "(", "in", ")", ";", "}", "}", "BinaryTempFileBody", "tempBody", "=", "new", "BinaryTempFileBody", "(", ")", ";", "OutputStream", "out", "=", "tempBody", ".", "getOutputStream", "(", ")", ";", "IOUtils", ".", "copy", "(", "in", ",", "out", ")", ";", "out", ".", "close", "(", ")", ";", "return", "tempBody", ";", "}", "</s>"]
["<s>", "public", "static", "void", "collectParts", "(", "Part", "part", ",", "ArrayList", "<", "Part", ">", "viewables", ",", "ArrayList", "<", "Part", ">", "attachments", ")", "throws", "MessagingException", "{", "String", "disposition", "=", "part", ".", "getDisposition", "(", ")", ";", "String", "dispositionType", "=", "null", ";", "String", "dispositionFilename", "=", "null", ";", "if", "(", "disposition", "!", "=", "null", ")", "{", "dispositionType", "=", "MimeUtility", ".", "getHeaderParameter", "(", "disposition", ",", "null", ")", ";", "dispositionFilename", "=", "MimeUtility", ".", "getHeaderParameter", "(", "disposition", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "boolean", "attachment", "=", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "dispositionType", ")", ")", "|", "|", "(", "dispositionFilename", "!", "=", "null", ")", "&", "&", "(", "!", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "dispositionType", ")", ")", ";", "if", "(", "part", ".", "getBody", "(", ")", "instanceof", "Multipart", ")", "{", "Multipart", "mp", "=", "(", "Multipart", ")", "part", ".", "getBody", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "mp", ".", "getCount", "(", ")", ";", "i", "+", "+", ")", "{", "collectParts", "(", "mp", ".", "getBodyPart", "(", "i", ")", ",", "viewables", ",", "attachments", ")", ";", "}", "}", "else", "if", "(", "part", ".", "getBody", "(", ")", "instanceof", "Message", ")", "{", "Message", "message", "=", "(", "Message", ")", "part", ".", "getBody", "(", ")", ";", "collectParts", "(", "message", ",", "viewables", ",", "attachments", ")", ";", "}", "else", "if", "(", "(", "!", "attachment", ")", "&", "&", "(", "part", ".", "getMimeType", "(", ")", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "viewables", ".", "add", "(", "part", ")", ";", "}", "else", "if", "(", "(", "!", "attachment", ")", "&", "&", "(", "part", ".", "getMimeType", "(", ")", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", "{", "viewables", ".", "add", "(", "part", ")", ";", "}", "else", "{", "attachments", ".", "add", "(", "part", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "resolveInlineImage", "(", "ContentResolver", "resolver", ",", "long", "accountId", ",", "String", "text", ",", "Part", "part", ",", "int", "depth", ")", "throws", "MessagingException", "{", "if", "(", "depth", ">", "=", "<NUM_LIT:10>", "|", "|", "text", "=", "=", "null", ")", "{", "return", "text", ";", "}", "String", "contentType", "=", "MimeUtility", ".", "unfoldAndDecode", "(", "part", ".", "getContentType", "(", ")", ")", ";", "String", "contentId", "=", "part", ".", "getContentId", "(", ")", ";", "if", "(", "contentType", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", "&", "&", "contentId", "!", "=", "null", "&", "&", "part", "instanceof", "LocalAttachmentBodyPart", ")", "{", "LocalAttachmentBodyPart", "attachment", "=", "(", "LocalAttachmentBodyPart", ")", "part", ";", "Uri", "attachmentUri", "=", "AttachmentProvider", ".", "getAttachmentUri", "(", "accountId", ",", "attachment", ".", "getAttachmentId", "(", ")", ")", ";", "Uri", "contentUri", "=", "AttachmentProvider", ".", "resolveAttachmentIdToContentUri", "(", "resolver", ",", "attachmentUri", ")", ";", "String", "contentIdRe", "=", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "contentId", "+", "\"", "<STR_LIT:\\\\>", "<STR_LIT:E>", "<STR_LIT:\\\">", "\"", ";", "text", "=", "text", ".", "replaceAll", "(", "contentIdRe", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "contentUri", "+", "\"", "<STR_LIT:\\\">", "\"", ")", ";", "}", "if", "(", "part", ".", "getBody", "(", ")", "instanceof", "Multipart", ")", "{", "Multipart", "mp", "=", "(", "Multipart", ")", "part", ".", "getBody", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "mp", ".", "getCount", "(", ")", ";", "i", "+", "+", ")", "{", "text", "=", "resolveInlineImage", "(", "resolver", ",", "accountId", ",", "text", ",", "mp", ".", "getBodyPart", "(", "i", ")", ",", "depth", "+", "1", ")", ";", "}", "}", "return", "text", ";", "}", "</s>"]
["<s>", "public", "static", "String", "escapeCharacterToDisplay", "(", "String", "text", ")", "{", "Pattern", "pattern", "=", "PLAIN_TEXT_TO_ESCAPE", ";", "Matcher", "match", "=", "pattern", ".", "matcher", "(", "text", ")", ";", "if", "(", "match", ".", "find", "(", ")", ")", "{", "StringBuilder", "out", "=", "new", "StringBuilder", "(", ")", ";", "int", "end", "=", "0", ";", "do", "{", "int", "start", "=", "match", ".", "start", "(", ")", ";", "out", ".", "append", "(", "text", ".", "substring", "(", "end", ",", "start", ")", ")", ";", "end", "=", "match", ".", "end", "(", ")", ";", "int", "c", "=", "text", ".", "codePointAt", "(", "start", ")", ";", "if", "(", "c", "=", "=", "<CHAR_LIT>", ")", "{", "for", "(", "int", "i", "=", "1", ",", "n", "=", "end", "-", "start", ";", "i", "<", "n", ";", "+", "+", "i", ")", "{", "out", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "out", ".", "append", "(", "<CHAR_LIT>", ")", ";", "}", "else", "if", "(", "c", "=", "=", "<STR_LIT>", "|", "|", "c", "=", "=", "<STR_LIT:\\n>", ")", "{", "out", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "c", "=", "=", "<CHAR_LIT>", ")", "{", "out", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "c", "=", "=", "<CHAR_LIT:>>", ")", "{", "out", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "c", "=", "=", "<CHAR_LIT>", ")", "{", "out", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "while", "(", "match", ".", "find", "(", ")", ")", ";", "out", ".", "append", "(", "text", ".", "substring", "(", "end", ")", ")", ";", "text", "=", "out", ".", "toString", "(", ")", ";", "}", "return", "text", ";", "}", "</s>"]
["<s>", "public", "TextBody", "(", "String", "body", ")", "{", "this", ".", "mBody", "=", "body", ";", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", ",", "MessagingException", "{", "byte", "[", "]", "bytes", "=", "mBody", ".", "getBytes", "(", "\"", "<STR_LIT:UTF-8>", "\"", ")", ";", "out", ".", "write", "(", "Base64", ".", "encodeBase64Chunked", "(", "bytes", ")", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getText", "(", ")", "{", "return", "mBody", ";", "}", "</s>"]
["<s>", "public", "InputStream", "getInputStream", "(", ")", "throws", "MessagingException", "{", "try", "{", "byte", "[", "]", "b", "=", "mBody", ".", "getBytes", "(", "\"", "<STR_LIT:UTF-8>", "\"", ")", ";", "return", "new", "ByteArrayInputStream", "(", "b", ")", ";", "}", "catch", "(", "UnsupportedEncodingException", "usee", ")", "{", "return", "null", ";", "}", "}", "</s>"]
["<s>", "public", "MimeMessage", "(", ")", "{", "try", "{", "setMessageId", "(", "generateMessageId", "(", ")", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ",", "me", ")", ";", "}", "}", "</s>"]
["<s>", "private", "String", "generateMessageId", "(", ")", "{", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT:<>", "\"", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:24>", ";", "i", "+", "+", ")", "{", "sb", ".", "append", "(", "Integer", ".", "toString", "(", "(", "int", ")", "(", "Math", ".", "random", "(", ")", "*", "<NUM_LIT>", ")", ",", "<NUM_LIT>", ")", ")", ";", "}", "sb", ".", "append", "(", "\"", "<STR_LIT:.>", "\"", ")", ";", "sb", ".", "append", "(", "Long", ".", "toString", "(", "System", ".", "currentTimeMillis", "(", ")", ")", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "MimeMessage", "(", "InputStream", "in", ")", "throws", "IOException", ",", "MessagingException", "{", "parse", "(", "in", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "parse", "(", "InputStream", "in", ")", "throws", "IOException", ",", "MessagingException", "{", "mHeader", ".", "clear", "(", ")", ";", "mFrom", "=", "null", ";", "mTo", "=", "null", ";", "mCc", "=", "null", ";", "mBcc", "=", "null", ";", "mReplyTo", "=", "null", ";", "mSentDate", "=", "null", ";", "mBody", "=", "null", ";", "MimeStreamParser", "parser", "=", "new", "MimeStreamParser", "(", ")", ";", "parser", ".", "setContentHandler", "(", "new", "MimeMessageBuilder", "(", ")", ")", ";", "parser", ".", "parse", "(", "new", "EOLConvertingInputStream", "(", "in", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Date", "getReceivedDate", "(", ")", "throws", "MessagingException", "{", "return", "null", ";", "}", "</s>"]
["<s>", "public", "Date", "getSentDate", "(", ")", "throws", "MessagingException", "{", "if", "(", "mSentDate", "=", "=", "null", ")", "{", "try", "{", "DateTimeField", "field", "=", "(", "DateTimeField", ")", "Field", ".", "parse", "(", "\"", "<STR_LIT>", "\"", "+", "MimeUtility", ".", "unfoldAndDecode", "(", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "mSentDate", "=", "field", ".", "getDate", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "}", "}", "return", "mSentDate", ";", "}", "</s>"]
["<s>", "public", "void", "setSentDate", "(", "Date", "sentDate", ")", "throws", "MessagingException", "{", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "mDateFormat", ".", "format", "(", "sentDate", ")", ")", ";", "this", ".", "mSentDate", "=", "sentDate", ";", "}", "</s>"]
["<s>", "public", "String", "getContentType", "(", ")", "throws", "MessagingException", "{", "String", "contentType", "=", "getFirstHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ")", ";", "if", "(", "contentType", "=", "=", "null", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "else", "{", "return", "contentType", ";", "}", "}", "</s>"]
["<s>", "public", "String", "getDisposition", "(", ")", "throws", "MessagingException", "{", "String", "contentDisposition", "=", "getFirstHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_DISPOSITION", ")", ";", "if", "(", "contentDisposition", "=", "=", "null", ")", "{", "return", "null", ";", "}", "else", "{", "return", "contentDisposition", ";", "}", "}", "</s>"]
["<s>", "public", "String", "getContentId", "(", ")", "throws", "MessagingException", "{", "String", "contentId", "=", "getFirstHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_ID", ")", ";", "if", "(", "contentId", "=", "=", "null", ")", "{", "return", "null", ";", "}", "else", "{", "return", "REMOVE_OPTIONAL_BRACKETS", ".", "matcher", "(", "contentId", ")", ".", "replaceAll", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "String", "getMimeType", "(", ")", "throws", "MessagingException", "{", "return", "MimeUtility", ".", "getHeaderParameter", "(", "getContentType", "(", ")", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getSize", "(", ")", "throws", "MessagingException", "{", "return", "mSize", ";", "}", "</s>"]
["<s>", "public", "Address", "[", "]", "getRecipients", "(", "RecipientType", "type", ")", "throws", "MessagingException", "{", "if", "(", "type", "=", "=", "RecipientType", ".", "TO", ")", "{", "if", "(", "mTo", "=", "=", "null", ")", "{", "mTo", "=", "Address", ".", "parse", "(", "MimeUtility", ".", "unfold", "(", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "return", "mTo", ";", "}", "else", "if", "(", "type", "=", "=", "RecipientType", ".", "CC", ")", "{", "if", "(", "mCc", "=", "=", "null", ")", "{", "mCc", "=", "Address", ".", "parse", "(", "MimeUtility", ".", "unfold", "(", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "return", "mCc", ";", "}", "else", "if", "(", "type", "=", "=", "RecipientType", ".", "BCC", ")", "{", "if", "(", "mBcc", "=", "=", "null", ")", "{", "mBcc", "=", "Address", ".", "parse", "(", "MimeUtility", ".", "unfold", "(", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "return", "mBcc", ";", "}", "else", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "setRecipients", "(", "RecipientType", "type", ",", "Address", "[", "]", "addresses", ")", "throws", "MessagingException", "{", "final", "int", "TO_LENGTH", "=", "<NUM_LIT:4>", ";", "final", "int", "CC_LENGTH", "=", "<NUM_LIT:4>", ";", "final", "int", "BCC_LENGTH", "=", "<NUM_LIT:5>", ";", "if", "(", "type", "=", "=", "RecipientType", ".", "TO", ")", "{", "if", "(", "addresses", "=", "=", "null", "|", "|", "addresses", ".", "length", "=", "=", "0", ")", "{", "removeHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "mTo", "=", "null", ";", "}", "else", "{", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "MimeUtility", ".", "fold", "(", "Address", ".", "toHeader", "(", "addresses", ")", ",", "TO_LENGTH", ")", ")", ";", "this", ".", "mTo", "=", "addresses", ";", "}", "}", "else", "if", "(", "type", "=", "=", "RecipientType", ".", "CC", ")", "{", "if", "(", "addresses", "=", "=", "null", "|", "|", "addresses", ".", "length", "=", "=", "0", ")", "{", "removeHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "mCc", "=", "null", ";", "}", "else", "{", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "MimeUtility", ".", "fold", "(", "Address", ".", "toHeader", "(", "addresses", ")", ",", "CC_LENGTH", ")", ")", ";", "this", ".", "mCc", "=", "addresses", ";", "}", "}", "else", "if", "(", "type", "=", "=", "RecipientType", ".", "BCC", ")", "{", "if", "(", "addresses", "=", "=", "null", "|", "|", "addresses", ".", "length", "=", "=", "0", ")", "{", "removeHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "mBcc", "=", "null", ";", "}", "else", "{", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "MimeUtility", ".", "fold", "(", "Address", ".", "toHeader", "(", "addresses", ")", ",", "BCC_LENGTH", ")", ")", ";", "this", ".", "mBcc", "=", "addresses", ";", "}", "}", "else", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "String", "getSubject", "(", ")", "throws", "MessagingException", "{", "return", "MimeUtility", ".", "unfoldAndDecode", "(", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setSubject", "(", "String", "subject", ")", "throws", "MessagingException", "{", "final", "int", "HEADER_NAME_LENGTH", "=", "<NUM_LIT:9>", ";", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "MimeUtility", ".", "foldAndEncode2", "(", "subject", ",", "HEADER_NAME_LENGTH", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Address", "[", "]", "getFrom", "(", ")", "throws", "MessagingException", "{", "if", "(", "mFrom", "=", "=", "null", ")", "{", "String", "list", "=", "MimeUtility", ".", "unfold", "(", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "if", "(", "list", "=", "=", "null", "|", "|", "list", ".", "length", "(", ")", "=", "=", "0", ")", "{", "list", "=", "MimeUtility", ".", "unfold", "(", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "mFrom", "=", "Address", ".", "parse", "(", "list", ")", ";", "}", "return", "mFrom", ";", "}", "</s>"]
["<s>", "public", "void", "setFrom", "(", "Address", "from", ")", "throws", "MessagingException", "{", "final", "int", "FROM_LENGTH", "=", "<NUM_LIT:6>", ";", "if", "(", "from", "!", "=", "null", ")", "{", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "MimeUtility", ".", "fold", "(", "from", ".", "toHeader", "(", ")", ",", "FROM_LENGTH", ")", ")", ";", "this", ".", "mFrom", "=", "new", "Address", "[", "]", "{", "from", "}", ";", "}", "else", "{", "this", ".", "mFrom", "=", "null", ";", "}", "}", "</s>"]
["<s>", "public", "Address", "[", "]", "getReplyTo", "(", ")", "throws", "MessagingException", "{", "if", "(", "mReplyTo", "=", "=", "null", ")", "{", "mReplyTo", "=", "Address", ".", "parse", "(", "MimeUtility", ".", "unfold", "(", "getFirstHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "return", "mReplyTo", ";", "}", "</s>"]
["<s>", "public", "void", "setReplyTo", "(", "Address", "[", "]", "replyTo", ")", "throws", "MessagingException", "{", "final", "int", "REPLY_TO_LENGTH", "=", "<NUM_LIT:10>", ";", "if", "(", "replyTo", "=", "=", "null", "|", "|", "replyTo", ".", "length", "=", "=", "0", ")", "{", "removeHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mReplyTo", "=", "null", ";", "}", "else", "{", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "MimeUtility", ".", "fold", "(", "Address", ".", "toHeader", "(", "replyTo", ")", ",", "REPLY_TO_LENGTH", ")", ")", ";", "mReplyTo", "=", "replyTo", ";", "}", "}", "</s>"]
["<s>", "public", "void", "setMessageId", "(", "String", "messageId", ")", "throws", "MessagingException", "{", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "messageId", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getMessageId", "(", ")", "throws", "MessagingException", "{", "String", "[", "]", "headers", "=", "getHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "headers", "!", "=", "null", ")", "{", "return", "headers", "[", "0", "]", ";", "}", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "void", "saveChanges", "(", ")", "throws", "MessagingException", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "Body", "getBody", "(", ")", "throws", "MessagingException", "{", "return", "mBody", ";", "}", "</s>"]
["<s>", "public", "void", "setBody", "(", "Body", "body", ")", "throws", "MessagingException", "{", "this", ".", "mBody", "=", "body", ";", "if", "(", "body", "instanceof", "com", ".", "android", ".", "email", ".", "mail", ".", "Multipart", ")", "{", "com", ".", "android", ".", "email", ".", "mail", ".", "Multipart", "multipart", "=", "(", "(", "com", ".", "android", ".", "email", ".", "mail", ".", "Multipart", ")", "body", ")", ";", "multipart", ".", "setParent", "(", "this", ")", ";", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "multipart", ".", "getContentType", "(", ")", ")", ";", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:1.0>", "\"", ")", ";", "}", "else", "if", "(", "body", "instanceof", "TextBody", ")", "{", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "getMimeType", "(", ")", ")", ")", ";", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TRANSFER_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "String", "getFirstHeader", "(", "String", "name", ")", "throws", "MessagingException", "{", "return", "mHeader", ".", "getFirstHeader", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "void", "addHeader", "(", "String", "name", ",", "String", "value", ")", "throws", "MessagingException", "{", "mHeader", ".", "addHeader", "(", "name", ",", "value", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setHeader", "(", "String", "name", ",", "String", "value", ")", "throws", "MessagingException", "{", "mHeader", ".", "setHeader", "(", "name", ",", "value", ")", ";", "}", "</s>"]
["<s>", "public", "String", "[", "]", "getHeader", "(", "String", "name", ")", "throws", "MessagingException", "{", "return", "mHeader", ".", "getHeader", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "void", "removeHeader", "(", "String", "name", ")", "throws", "MessagingException", "{", "mHeader", ".", "removeHeader", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setExtendedHeader", "(", "String", "name", ",", "String", "value", ")", "throws", "MessagingException", "{", "if", "(", "value", "=", "=", "null", ")", "{", "if", "(", "mExtendedHeader", "!", "=", "null", ")", "{", "mExtendedHeader", ".", "removeHeader", "(", "name", ")", ";", "}", "return", ";", "}", "if", "(", "mExtendedHeader", "=", "=", "null", ")", "{", "mExtendedHeader", "=", "new", "MimeHeader", "(", ")", ";", "}", "mExtendedHeader", ".", "setHeader", "(", "name", ",", "END_OF_LINE", ".", "matcher", "(", "value", ")", ".", "replaceAll", "(", "\"", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getExtendedHeader", "(", "String", "name", ")", "throws", "MessagingException", "{", "if", "(", "mExtendedHeader", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "mExtendedHeader", ".", "getFirstHeader", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setExtendedHeaders", "(", "String", "headers", ")", "throws", "MessagingException", "{", "if", "(", "TextUtils", ".", "isEmpty", "(", "headers", ")", ")", "{", "mExtendedHeader", "=", "null", ";", "}", "else", "{", "mExtendedHeader", "=", "new", "MimeHeader", "(", ")", ";", "for", "(", "String", "header", ":", "END_OF_LINE", ".", "split", "(", "headers", ")", ")", "{", "String", "[", "]", "tokens", "=", "header", ".", "split", "(", "\"", "<STR_LIT::>", "\"", ",", "<NUM_LIT:2>", ")", ";", "if", "(", "tokens", ".", "length", "!", "=", "<NUM_LIT:2>", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "headers", ")", ";", "}", "mExtendedHeader", ".", "setHeader", "(", "tokens", "[", "0", "]", ".", "trim", "(", ")", ",", "tokens", "[", "1", "]", ".", "trim", "(", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "String", "getExtendedHeaders", "(", ")", "{", "if", "(", "mExtendedHeader", "!", "=", "null", ")", "{", "return", "mExtendedHeader", ".", "writeToString", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", ",", "MessagingException", "{", "BufferedWriter", "writer", "=", "new", "BufferedWriter", "(", "new", "OutputStreamWriter", "(", "out", ")", ",", "<NUM_LIT>", ")", ";", "mHeader", ".", "writeTo", "(", "out", ")", ";", "writer", ".", "write", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "writer", ".", "flush", "(", ")", ";", "if", "(", "mBody", "!", "=", "null", ")", "{", "mBody", ".", "writeTo", "(", "out", ")", ";", "}", "}", "</s>"]
["<s>", "public", "InputStream", "getInputStream", "(", ")", "throws", "MessagingException", "{", "return", "null", ";", "}", "</s>"]
["<s>", "public", "MimeMessageBuilder", "(", ")", "{", "}", "</s>"]
["<s>", "private", "void", "expect", "(", "Class", "c", ")", "{", "if", "(", "!", "c", ".", "isInstance", "(", "stack", ".", "peek", "(", ")", ")", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "c", ".", "getName", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "stack", ".", "peek", "(", ")", ".", "getClass", "(", ")", ".", "getName", "(", ")", "+", "\"", "'", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "startMessage", "(", ")", "{", "if", "(", "stack", ".", "isEmpty", "(", ")", ")", "{", "stack", ".", "push", "(", "MimeMessage", ".", "this", ")", ";", "}", "else", "{", "expect", "(", "Part", ".", "class", ")", ";", "try", "{", "MimeMessage", "m", "=", "new", "MimeMessage", "(", ")", ";", "(", "(", "Part", ")", "stack", ".", "peek", "(", ")", ")", ".", "setBody", "(", "m", ")", ";", "stack", ".", "push", "(", "m", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "throw", "new", "Error", "(", "me", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "endMessage", "(", ")", "{", "expect", "(", "MimeMessage", ".", "class", ")", ";", "stack", ".", "pop", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "startHeader", "(", ")", "{", "expect", "(", "Part", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "void", "field", "(", "String", "fieldData", ")", "{", "expect", "(", "Part", ".", "class", ")", ";", "try", "{", "String", "[", "]", "tokens", "=", "fieldData", ".", "split", "(", "\"", "<STR_LIT::>", "\"", ",", "<NUM_LIT:2>", ")", ";", "(", "(", "Part", ")", "stack", ".", "peek", "(", ")", ")", ".", "addHeader", "(", "tokens", "[", "0", "]", ",", "tokens", "[", "1", "]", ".", "trim", "(", ")", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "throw", "new", "Error", "(", "me", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "endHeader", "(", ")", "{", "expect", "(", "Part", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "void", "startMultipart", "(", "BodyDescriptor", "bd", ")", "{", "expect", "(", "Part", ".", "class", ")", ";", "Part", "e", "=", "(", "Part", ")", "stack", ".", "peek", "(", ")", ";", "try", "{", "MimeMultipart", "multiPart", "=", "new", "MimeMultipart", "(", "e", ".", "getContentType", "(", ")", ")", ";", "e", ".", "setBody", "(", "multiPart", ")", ";", "stack", ".", "push", "(", "multiPart", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "throw", "new", "Error", "(", "me", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "body", "(", "BodyDescriptor", "bd", ",", "InputStream", "in", ")", "throws", "IOException", "{", "expect", "(", "Part", ".", "class", ")", ";", "Body", "body", "=", "MimeUtility", ".", "decodeBody", "(", "in", ",", "bd", ".", "getTransferEncoding", "(", ")", ")", ";", "try", "{", "(", "(", "Part", ")", "stack", ".", "peek", "(", ")", ")", ".", "setBody", "(", "body", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "throw", "new", "Error", "(", "me", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "endMultipart", "(", ")", "{", "stack", ".", "pop", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "startBodyPart", "(", ")", "{", "expect", "(", "MimeMultipart", ".", "class", ")", ";", "try", "{", "MimeBodyPart", "bodyPart", "=", "new", "MimeBodyPart", "(", ")", ";", "(", "(", "MimeMultipart", ")", "stack", ".", "peek", "(", ")", ")", ".", "addBodyPart", "(", "bodyPart", ")", ";", "stack", ".", "push", "(", "bodyPart", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "throw", "new", "Error", "(", "me", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "endBodyPart", "(", ")", "{", "expect", "(", "BodyPart", ".", "class", ")", ";", "stack", ".", "pop", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "epilogue", "(", "InputStream", "is", ")", "throws", "IOException", "{", "expect", "(", "MimeMultipart", ".", "class", ")", ";", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "int", "b", ";", "while", "(", "(", "b", "=", "is", ".", "read", "(", ")", ")", "!", "=", "-", "1", ")", "{", "sb", ".", "append", "(", "(", "char", ")", "b", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "preamble", "(", "InputStream", "is", ")", "throws", "IOException", "{", "expect", "(", "MimeMultipart", ".", "class", ")", ";", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "int", "b", ";", "while", "(", "(", "b", "=", "is", ".", "read", "(", ")", ")", "!", "=", "-", "1", ")", "{", "sb", ".", "append", "(", "(", "char", ")", "b", ")", ";", "}", "try", "{", "(", "(", "MimeMultipart", ")", "stack", ".", "peek", "(", ")", ")", ".", "setPreamble", "(", "sb", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "throw", "new", "Error", "(", "me", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "raw", "(", "InputStream", "is", ")", "throws", "IOException", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "setTempDirectory", "(", "File", "tempDirectory", ")", "{", "mTempDirectory", "=", "tempDirectory", ";", "}", "</s>"]
["<s>", "public", "BinaryTempFileBody", "(", ")", "throws", "IOException", "{", "if", "(", "mTempDirectory", "=", "=", "null", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "setFile", "(", "String", "filePath", ")", "{", "mFile", "=", "new", "File", "(", "filePath", ")", ";", "}", "</s>"]
["<s>", "public", "OutputStream", "getOutputStream", "(", ")", "throws", "IOException", "{", "mFile", "=", "File", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "mTempDirectory", ")", ";", "mFile", ".", "deleteOnExit", "(", ")", ";", "return", "new", "FileOutputStream", "(", "mFile", ")", ";", "}", "</s>"]
["<s>", "public", "InputStream", "getInputStream", "(", ")", "throws", "MessagingException", "{", "try", "{", "return", "new", "BinaryTempFileBodyInputStream", "(", "new", "FileInputStream", "(", "mFile", ")", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "ioe", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", ",", "MessagingException", "{", "InputStream", "in", "=", "getInputStream", "(", ")", ";", "Base64OutputStream", "base64Out", "=", "new", "Base64OutputStream", "(", "out", ")", ";", "IOUtils", ".", "copy", "(", "in", ",", "base64Out", ")", ";", "base64Out", ".", "close", "(", ")", ";", "mFile", ".", "delete", "(", ")", ";", "}", "</s>"]
["<s>", "public", "BinaryTempFileBodyInputStream", "(", "InputStream", "in", ")", "{", "super", "(", "in", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "super", ".", "close", "(", ")", ";", "mFile", ".", "delete", "(", ")", ";", "}", "</s>"]
["<s>", "public", "MimeMultipart", "(", ")", "throws", "MessagingException", "{", "mBoundary", "=", "generateBoundary", "(", ")", ";", "setSubType", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "MimeMultipart", "(", "String", "contentType", ")", "throws", "MessagingException", "{", "this", ".", "mContentType", "=", "contentType", ";", "try", "{", "mSubType", "=", "MimeUtility", ".", "getHeaderParameter", "(", "contentType", ",", "null", ")", ".", "split", "(", "\"", "<STR_LIT:/>", "\"", ")", "[", "1", "]", ";", "mBoundary", "=", "MimeUtility", ".", "getHeaderParameter", "(", "contentType", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "mBoundary", "=", "=", "null", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "contentType", ")", ";", "}", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "contentType", "+", "\"", "<STR_LIT:)>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "String", "generateBoundary", "(", ")", "{", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:30>", ";", "i", "+", "+", ")", "{", "sb", ".", "append", "(", "Integer", ".", "toString", "(", "(", "int", ")", "(", "Math", ".", "random", "(", ")", "*", "<NUM_LIT>", ")", ",", "<NUM_LIT>", ")", ")", ";", "}", "return", "sb", ".", "toString", "(", ")", ".", "toUpperCase", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getPreamble", "(", ")", "throws", "MessagingException", "{", "return", "mPreamble", ";", "}", "</s>"]
["<s>", "public", "void", "setPreamble", "(", "String", "preamble", ")", "throws", "MessagingException", "{", "this", ".", "mPreamble", "=", "preamble", ";", "}", "</s>"]
["<s>", "public", "String", "getContentType", "(", ")", "throws", "MessagingException", "{", "return", "mContentType", ";", "}", "</s>"]
["<s>", "public", "void", "setSubType", "(", "String", "subType", ")", "throws", "MessagingException", "{", "this", ".", "mSubType", "=", "subType", ";", "mContentType", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "\"", ",", "subType", ",", "mBoundary", ")", ";", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", ",", "MessagingException", "{", "BufferedWriter", "writer", "=", "new", "BufferedWriter", "(", "new", "OutputStreamWriter", "(", "out", ")", ",", "<NUM_LIT>", ")", ";", "if", "(", "mPreamble", "!", "=", "null", ")", "{", "writer", ".", "write", "(", "mPreamble", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "for", "(", "int", "i", "=", "0", ",", "count", "=", "mParts", ".", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "BodyPart", "bodyPart", "=", "(", "BodyPart", ")", "mParts", ".", "get", "(", "i", ")", ";", "writer", ".", "write", "(", "\"", "<STR_LIT:-->", "\"", "+", "mBoundary", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "writer", ".", "flush", "(", ")", ";", "bodyPart", ".", "writeTo", "(", "out", ")", ";", "writer", ".", "write", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "writer", ".", "write", "(", "\"", "<STR_LIT:-->", "\"", "+", "mBoundary", "+", "\"", "<STR_LIT:-->", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "writer", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "InputStream", "getInputStream", "(", ")", "throws", "MessagingException", "{", "return", "null", ";", "}", "</s>"]
["<s>", "public", "void", "clear", "(", ")", "{", "mFields", ".", "clear", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getFirstHeader", "(", "String", "name", ")", "throws", "MessagingException", "{", "String", "[", "]", "header", "=", "getHeader", "(", "name", ")", ";", "if", "(", "header", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "header", "[", "0", "]", ";", "}", "</s>"]
["<s>", "public", "void", "addHeader", "(", "String", "name", ",", "String", "value", ")", "throws", "MessagingException", "{", "mFields", ".", "add", "(", "new", "Field", "(", "name", ",", "value", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setHeader", "(", "String", "name", ",", "String", "value", ")", "throws", "MessagingException", "{", "if", "(", "name", "=", "=", "null", "|", "|", "value", "=", "=", "null", ")", "{", "return", ";", "}", "removeHeader", "(", "name", ")", ";", "addHeader", "(", "name", ",", "value", ")", ";", "}", "</s>"]
["<s>", "public", "String", "[", "]", "getHeader", "(", "String", "name", ")", "throws", "MessagingException", "{", "ArrayList", "<", "String", ">", "values", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "for", "(", "Field", "field", ":", "mFields", ")", "{", "if", "(", "field", ".", "name", ".", "equalsIgnoreCase", "(", "name", ")", ")", "{", "values", ".", "add", "(", "field", ".", "value", ")", ";", "}", "}", "if", "(", "values", ".", "size", "(", ")", "=", "=", "0", ")", "{", "return", "null", ";", "}", "return", "values", ".", "toArray", "(", "new", "String", "[", "]", "{", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "removeHeader", "(", "String", "name", ")", "throws", "MessagingException", "{", "ArrayList", "<", "Field", ">", "removeFields", "=", "new", "ArrayList", "<", "Field", ">", "(", ")", ";", "for", "(", "Field", "field", ":", "mFields", ")", "{", "if", "(", "field", ".", "name", ".", "equalsIgnoreCase", "(", "name", ")", ")", "{", "removeFields", ".", "add", "(", "field", ")", ";", "}", "}", "mFields", ".", "removeAll", "(", "removeFields", ")", ";", "}", "</s>"]
["<s>", "public", "String", "writeToString", "(", ")", "{", "if", "(", "mFields", ".", "size", "(", ")", "=", "=", "0", ")", "{", "return", "null", ";", "}", "StringBuilder", "builder", "=", "new", "StringBuilder", "(", ")", ";", "for", "(", "Field", "field", ":", "mFields", ")", "{", "if", "(", "!", "Utility", ".", "arrayContains", "(", "writeOmitFields", ",", "field", ".", "name", ")", ")", "{", "builder", ".", "append", "(", "field", ".", "name", "+", "\"", "<STR_LIT>", "\"", "+", "field", ".", "value", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "}", "return", "builder", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", ",", "MessagingException", "{", "BufferedWriter", "writer", "=", "new", "BufferedWriter", "(", "new", "OutputStreamWriter", "(", "out", ")", ",", "<NUM_LIT>", ")", ";", "for", "(", "Field", "field", ":", "mFields", ")", "{", "if", "(", "!", "Utility", ".", "arrayContains", "(", "writeOmitFields", ",", "field", ".", "name", ")", ")", "{", "writer", ".", "write", "(", "field", ".", "name", "+", "\"", "<STR_LIT>", "\"", "+", "field", ".", "value", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "}", "writer", ".", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Field", "(", "String", "name", ",", "String", "value", ")", "{", "this", ".", "name", "=", "name", ";", "this", ".", "value", "=", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "name", "+", "\"", "<STR_LIT:=>", "\"", "+", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "(", "mFields", "=", "=", "null", ")", "?", "null", ":", "mFields", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Store", "newInstance", "(", "String", "uri", ",", "Context", "context", ",", "PersistentDataCallbacks", "callbacks", ")", "throws", "MessagingException", "{", "return", "new", "Pop3Store", "(", "uri", ")", ";", "}", "</s>"]
["<s>", "private", "Pop3Store", "(", "String", "_uri", ")", "throws", "MessagingException", "{", "URI", "uri", ";", "try", "{", "uri", "=", "new", "URI", "(", "_uri", ")", ";", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "use", ")", ";", "}", "String", "scheme", "=", "uri", ".", "getScheme", "(", ")", ";", "if", "(", "scheme", "=", "=", "null", "|", "|", "!", "scheme", ".", "startsWith", "(", "STORE_SCHEME_POP3", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "int", "connectionSecurity", "=", "Transport", ".", "CONNECTION_SECURITY_NONE", ";", "int", "defaultPort", "=", "<NUM_LIT>", ";", "if", "(", "scheme", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "connectionSecurity", "=", "Transport", ".", "CONNECTION_SECURITY_SSL", ";", "defaultPort", "=", "<NUM_LIT>", ";", "}", "else", "if", "(", "scheme", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "connectionSecurity", "=", "Transport", ".", "CONNECTION_SECURITY_TLS", ";", "}", "boolean", "trustCertificates", "=", "scheme", ".", "contains", "(", "STORE_SECURITY_TRUST_CERTIFICATES", ")", ";", "mTransport", "=", "new", "MailTransport", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mTransport", ".", "setUri", "(", "uri", ",", "defaultPort", ")", ";", "mTransport", ".", "setSecurity", "(", "connectionSecurity", ",", "trustCertificates", ")", ";", "String", "[", "]", "userInfoParts", "=", "mTransport", ".", "getUserInfoParts", "(", ")", ";", "if", "(", "userInfoParts", "!", "=", "null", ")", "{", "mUsername", "=", "userInfoParts", "[", "0", "]", ";", "if", "(", "userInfoParts", ".", "length", ">", "1", ")", "{", "mPassword", "=", "userInfoParts", "[", "1", "]", ";", "}", "}", "}", "</s>"]
["<s>", "void", "setTransport", "(", "Transport", "testTransport", ")", "{", "mTransport", "=", "testTransport", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Folder", "getFolder", "(", "String", "name", ")", "throws", "MessagingException", "{", "Folder", "folder", "=", "mFolders", ".", "get", "(", "name", ")", ";", "if", "(", "folder", "=", "=", "null", ")", "{", "folder", "=", "new", "Pop3Folder", "(", "name", ")", ";", "mFolders", ".", "put", "(", "folder", ".", "getName", "(", ")", ",", "folder", ")", ";", "}", "return", "folder", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Folder", "[", "]", "getPersonalNamespaces", "(", ")", "throws", "MessagingException", "{", "return", "new", "Folder", "[", "]", "{", "getFolder", "(", "\"", "<STR_LIT>", "\"", ")", ",", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "checkSettings", "(", ")", "throws", "MessagingException", "{", "Pop3Folder", "folder", "=", "new", "Pop3Folder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "folder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "folder", ".", "checkSettings", "(", ")", ";", "}", "finally", "{", "folder", ".", "close", "(", "false", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Pop3Folder", "(", "String", "name", ")", "{", "this", ".", "mName", "=", "name", ";", "if", "(", "mName", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "mName", "=", "\"", "<STR_LIT>", "\"", ";", "}", "}", "</s>"]
["<s>", "public", "void", "checkSettings", "(", ")", "throws", "MessagingException", "{", "if", "(", "!", "mCapabilities", ".", "uidl", ")", "{", "try", "{", "UidlParser", "parser", "=", "new", "UidlParser", "(", ")", ";", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "response", ";", "while", "(", "(", "response", "=", "mTransport", ".", "readLine", "(", ")", ")", "!", "=", "null", ")", "{", "parser", ".", "parseMultiLine", "(", "response", ")", ";", "if", "(", "parser", ".", "mEndOfMessage", ")", "{", "break", ";", "}", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "mTransport", ".", "close", "(", ")", ";", "throw", "new", "MessagingException", "(", "null", ",", "ioe", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "synchronized", "void", "open", "(", "OpenMode", "mode", ",", "PersistentDataCallbacks", "callbacks", ")", "throws", "MessagingException", "{", "if", "(", "mTransport", ".", "isOpen", "(", ")", ")", "{", "return", ";", "}", "if", "(", "!", "mName", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "try", "{", "mTransport", ".", "open", "(", ")", ";", "executeSimpleCommand", "(", "null", ")", ";", "mCapabilities", "=", "getCapabilities", "(", ")", ";", "if", "(", "mTransport", ".", "canTryTlsSecurity", "(", ")", ")", "{", "if", "(", "mCapabilities", ".", "stls", ")", "{", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mTransport", ".", "reopenTls", "(", ")", ";", "}", "else", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "throw", "new", "MessagingException", "(", "MessagingException", ".", "TLS_REQUIRED", ")", ";", "}", "}", "try", "{", "executeSensitiveCommand", "(", "\"", "<STR_LIT>", "\"", "+", "mUsername", ",", "\"", "<STR_LIT>", "\"", ")", ";", "executeSensitiveCommand", "(", "\"", "<STR_LIT>", "\"", "+", "mPassword", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "me", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "AuthenticationFailedException", "(", "null", ",", "me", ")", ";", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "mTransport", ".", "close", "(", ")", ";", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "ioe", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "MessagingException", "(", "MessagingException", ".", "IOERROR", ",", "ioe", ".", "toString", "(", ")", ")", ";", "}", "Exception", "statException", "=", "null", ";", "try", "{", "String", "response", "=", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "[", "]", "parts", "=", "response", ".", "split", "(", "\"", "\"", ")", ";", "if", "(", "parts", ".", "length", "<", "<NUM_LIT:2>", ")", "{", "statException", "=", "new", "IOException", "(", ")", ";", "}", "else", "{", "mMessageCount", "=", "Integer", ".", "parseInt", "(", "parts", "[", "1", "]", ")", ";", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "statException", "=", "ioe", ";", "}", "catch", "(", "NumberFormatException", "nfe", ")", "{", "statException", "=", "nfe", ";", "}", "if", "(", "statException", "!", "=", "null", ")", "{", "mTransport", ".", "close", "(", ")", ";", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "statException", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "statException", ")", ";", "}", "mUidToMsgMap", ".", "clear", "(", ")", ";", "mMsgNumToMsgMap", ".", "clear", "(", ")", ";", "mUidToMsgNumMap", ".", "clear", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "OpenMode", "getMode", "(", ")", "throws", "MessagingException", "{", "return", "OpenMode", ".", "READ_WRITE", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", "boolean", "expunge", ")", "{", "try", "{", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "}", "mTransport", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getName", "(", ")", "{", "return", "mName", ";", "}", "</s>"]
["<s>", "public", "boolean", "canCreate", "(", "FolderType", "type", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "create", "(", "FolderType", "type", ")", "throws", "MessagingException", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "exists", "(", ")", "throws", "MessagingException", "{", "return", "mName", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getMessageCount", "(", ")", "{", "return", "mMessageCount", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getUnreadMessageCount", "(", ")", "throws", "MessagingException", "{", "return", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "getMessage", "(", "String", "uid", ")", "throws", "MessagingException", "{", "if", "(", "mUidToMsgNumMap", ".", "size", "(", ")", "=", "=", "0", ")", "{", "try", "{", "indexMsgNums", "(", "1", ",", "mMessageCount", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "mTransport", ".", "close", "(", ")", ";", "if", "(", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "ioe", ")", ";", "}", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "ioe", ")", ";", "}", "}", "Pop3Message", "message", "=", "mUidToMsgMap", ".", "get", "(", "uid", ")", ";", "return", "message", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "[", "]", "getMessages", "(", "int", "start", ",", "int", "end", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "if", "(", "start", "<", "1", "|", "|", "end", "<", "1", "|", "|", "end", "<", "start", ")", "{", "throw", "new", "MessagingException", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "start", ",", "end", ")", ")", ";", "}", "try", "{", "indexMsgNums", "(", "start", ",", "end", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "mTransport", ".", "close", "(", ")", ";", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "ioe", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "ioe", ")", ";", "}", "ArrayList", "<", "Message", ">", "messages", "=", "new", "ArrayList", "<", "Message", ">", "(", ")", ";", "int", "i", "=", "0", ";", "for", "(", "int", "msgNum", "=", "start", ";", "msgNum", "<", "=", "end", ";", "msgNum", "+", "+", ")", "{", "Pop3Message", "message", "=", "mMsgNumToMsgMap", ".", "get", "(", "msgNum", ")", ";", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageStarted", "(", "message", ".", "getUid", "(", ")", ",", "i", "+", "+", ",", "(", "end", "-", "start", ")", "+", "1", ")", ";", "}", "messages", ".", "add", "(", "message", ")", ";", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageFinished", "(", "message", ",", "i", "+", "+", ",", "(", "end", "-", "start", ")", "+", "1", ")", ";", "}", "}", "return", "messages", ".", "toArray", "(", "new", "Message", "[", "messages", ".", "size", "(", ")", "]", ")", ";", "}", "</s>"]
["<s>", "private", "void", "indexMsgNums", "(", "int", "start", ",", "int", "end", ")", "throws", "MessagingException", ",", "IOException", "{", "int", "unindexedMessageCount", "=", "0", ";", "for", "(", "int", "msgNum", "=", "start", ";", "msgNum", "<", "=", "end", ";", "msgNum", "+", "+", ")", "{", "if", "(", "mMsgNumToMsgMap", ".", "get", "(", "msgNum", ")", "=", "=", "null", ")", "{", "unindexedMessageCount", "+", "+", ";", "}", "}", "if", "(", "unindexedMessageCount", "=", "=", "0", ")", "{", "return", ";", "}", "UidlParser", "parser", "=", "new", "UidlParser", "(", ")", ";", "if", "(", "DEBUG_FORCE_SINGLE_LINE_UIDL", "|", "|", "(", "unindexedMessageCount", "<", "<NUM_LIT>", "&", "&", "mMessageCount", ">", "<NUM_LIT>", ")", ")", "{", "for", "(", "int", "msgNum", "=", "start", ";", "msgNum", "<", "=", "end", ";", "msgNum", "+", "+", ")", "{", "Pop3Message", "message", "=", "mMsgNumToMsgMap", ".", "get", "(", "msgNum", ")", ";", "if", "(", "message", "=", "=", "null", ")", "{", "String", "response", "=", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", "+", "msgNum", ")", ";", "if", "(", "!", "parser", ".", "parseSingleLine", "(", "response", ")", ")", "{", "throw", "new", "IOException", "(", ")", ";", "}", "message", "=", "new", "Pop3Message", "(", "parser", ".", "mUniqueId", ",", "this", ")", ";", "indexMessage", "(", "msgNum", ",", "message", ")", ";", "}", "}", "}", "else", "{", "String", "response", "=", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "while", "(", "(", "response", "=", "mTransport", ".", "readLine", "(", ")", ")", "!", "=", "null", ")", "{", "if", "(", "!", "parser", ".", "parseMultiLine", "(", "response", ")", ")", "{", "throw", "new", "IOException", "(", ")", ";", "}", "if", "(", "parser", ".", "mEndOfMessage", ")", "{", "break", ";", "}", "int", "msgNum", "=", "parser", ".", "mMessageNumber", ";", "if", "(", "msgNum", ">", "=", "start", "&", "&", "msgNum", "<", "=", "end", ")", "{", "Pop3Message", "message", "=", "mMsgNumToMsgMap", ".", "get", "(", "msgNum", ")", ";", "if", "(", "message", "=", "=", "null", ")", "{", "message", "=", "new", "Pop3Message", "(", "parser", ".", "mUniqueId", ",", "this", ")", ";", "indexMessage", "(", "msgNum", ",", "message", ")", ";", "}", "}", "}", "}", "}", "</s>"]
["<s>", "private", "void", "indexUids", "(", "ArrayList", "<", "String", ">", "uids", ")", "throws", "MessagingException", ",", "IOException", "{", "HashSet", "<", "String", ">", "unindexedUids", "=", "new", "HashSet", "<", "String", ">", "(", ")", ";", "for", "(", "String", "uid", ":", "uids", ")", "{", "if", "(", "mUidToMsgMap", ".", "get", "(", "uid", ")", "=", "=", "null", ")", "{", "unindexedUids", ".", "add", "(", "uid", ")", ";", "}", "}", "if", "(", "unindexedUids", ".", "size", "(", ")", "=", "=", "0", ")", "{", "return", ";", "}", "UidlParser", "parser", "=", "new", "UidlParser", "(", ")", ";", "String", "response", "=", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "while", "(", "(", "response", "=", "mTransport", ".", "readLine", "(", ")", ")", "!", "=", "null", ")", "{", "parser", ".", "parseMultiLine", "(", "response", ")", ";", "if", "(", "parser", ".", "mEndOfMessage", ")", "{", "break", ";", "}", "if", "(", "unindexedUids", ".", "contains", "(", "parser", ".", "mUniqueId", ")", ")", "{", "Pop3Message", "message", "=", "mUidToMsgMap", ".", "get", "(", "parser", ".", "mUniqueId", ")", ";", "if", "(", "message", "=", "=", "null", ")", "{", "message", "=", "new", "Pop3Message", "(", "parser", ".", "mUniqueId", ",", "this", ")", ";", "}", "indexMessage", "(", "parser", ".", "mMessageNumber", ",", "message", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "UidlParser", "(", ")", "{", "mErr", "=", "true", ";", "}", "</s>"]
["<s>", "public", "boolean", "parseSingleLine", "(", "String", "response", ")", "{", "mErr", "=", "false", ";", "if", "(", "response", "=", "=", "null", "|", "|", "response", ".", "length", "(", ")", "=", "=", "0", ")", "{", "return", "false", ";", "}", "char", "first", "=", "response", ".", "charAt", "(", "0", ")", ";", "if", "(", "first", "=", "=", "<CHAR_LIT>", ")", "{", "String", "[", "]", "uidParts", "=", "response", ".", "split", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "uidParts", ".", "length", ">", "=", "<NUM_LIT:3>", ")", "{", "try", "{", "mMessageNumber", "=", "Integer", ".", "parseInt", "(", "uidParts", "[", "1", "]", ")", ";", "}", "catch", "(", "NumberFormatException", "nfe", ")", "{", "return", "false", ";", "}", "mUniqueId", "=", "uidParts", "[", "<NUM_LIT:2>", "]", ";", "mEndOfMessage", "=", "true", ";", "return", "true", ";", "}", "}", "else", "if", "(", "first", "=", "=", "<CHAR_LIT:->", ")", "{", "mErr", "=", "true", ";", "return", "true", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "parseMultiLine", "(", "String", "response", ")", "{", "mErr", "=", "false", ";", "if", "(", "response", "=", "=", "null", "|", "|", "response", ".", "length", "(", ")", "=", "=", "0", ")", "{", "return", "false", ";", "}", "char", "first", "=", "response", ".", "charAt", "(", "0", ")", ";", "if", "(", "first", "=", "=", "<CHAR_LIT:.>", ")", "{", "mEndOfMessage", "=", "true", ";", "return", "true", ";", "}", "else", "{", "String", "[", "]", "uidParts", "=", "response", ".", "split", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "uidParts", ".", "length", ">", "=", "<NUM_LIT:2>", ")", "{", "try", "{", "mMessageNumber", "=", "Integer", ".", "parseInt", "(", "uidParts", "[", "0", "]", ")", ";", "}", "catch", "(", "NumberFormatException", "nfe", ")", "{", "return", "false", ";", "}", "mUniqueId", "=", "uidParts", "[", "1", "]", ";", "mEndOfMessage", "=", "false", ";", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "private", "void", "indexMessage", "(", "int", "msgNum", ",", "Pop3Message", "message", ")", "{", "mMsgNumToMsgMap", ".", "put", "(", "msgNum", ",", "message", ")", ";", "mUidToMsgMap", ".", "put", "(", "message", ".", "getUid", "(", ")", ",", "message", ")", ";", "mUidToMsgNumMap", ".", "put", "(", "message", ".", "getUid", "(", ")", ",", "msgNum", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "[", "]", "getMessages", "(", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "[", "]", "getMessages", "(", "String", "[", "]", "uids", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "void", "fetch", "(", "Message", "[", "]", "messages", ",", "FetchProfile", "fp", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "if", "(", "messages", "=", "=", "null", "|", "|", "messages", ".", "length", "=", "=", "0", ")", "{", "return", ";", "}", "ArrayList", "<", "String", ">", "uids", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "for", "(", "Message", "message", ":", "messages", ")", "{", "uids", ".", "add", "(", "message", ".", "getUid", "(", ")", ")", ";", "}", "try", "{", "indexUids", "(", "uids", ")", ";", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ")", "{", "fetchEnvelope", "(", "messages", ",", "null", ")", ";", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "mTransport", ".", "close", "(", ")", ";", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "ioe", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "ioe", ")", ";", "}", "for", "(", "int", "i", "=", "0", ",", "count", "=", "messages", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "Message", "message", "=", "messages", "[", "i", "]", ";", "if", "(", "!", "(", "message", "instanceof", "Pop3Message", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "Pop3Message", "pop3Message", "=", "(", "Pop3Message", ")", "message", ";", "try", "{", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageStarted", "(", "pop3Message", ".", "getUid", "(", ")", ",", "i", ",", "count", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ")", "{", "fetchBody", "(", "pop3Message", ",", "-", "1", ")", ";", "}", "else", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "BODY_SANE", ")", ")", "{", "fetchBody", "(", "pop3Message", ",", "FETCH_BODY_SANE_SUGGESTED_SIZE", "/", "<NUM_LIT>", ")", ";", "}", "else", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "STRUCTURE", ")", ")", "{", "pop3Message", ".", "setBody", "(", "null", ")", ";", "}", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageFinished", "(", "message", ",", "i", ",", "count", ")", ";", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "mTransport", ".", "close", "(", ")", ";", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "ioe", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "ioe", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "fetchEnvelope", "(", "Message", "[", "]", "messages", ",", "MessageRetrievalListener", "listener", ")", "throws", "IOException", ",", "MessagingException", "{", "int", "unsizedMessages", "=", "0", ";", "for", "(", "Message", "message", ":", "messages", ")", "{", "if", "(", "message", ".", "getSize", "(", ")", "=", "=", "-", "1", ")", "{", "unsizedMessages", "+", "+", ";", "}", "}", "if", "(", "unsizedMessages", "=", "=", "0", ")", "{", "return", ";", "}", "if", "(", "unsizedMessages", "<", "<NUM_LIT>", "&", "&", "mMessageCount", ">", "<NUM_LIT>", ")", "{", "for", "(", "int", "i", "=", "0", ",", "count", "=", "messages", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "Message", "message", "=", "messages", "[", "i", "]", ";", "if", "(", "!", "(", "message", "instanceof", "Pop3Message", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "Pop3Message", "pop3Message", "=", "(", "Pop3Message", ")", "message", ";", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageStarted", "(", "pop3Message", ".", "getUid", "(", ")", ",", "i", ",", "count", ")", ";", "}", "String", "response", "=", "executeSimpleCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "mUidToMsgNumMap", ".", "get", "(", "pop3Message", ".", "getUid", "(", ")", ")", ")", ")", ";", "try", "{", "String", "[", "]", "listParts", "=", "response", ".", "split", "(", "\"", "\"", ")", ";", "int", "msgNum", "=", "Integer", ".", "parseInt", "(", "listParts", "[", "1", "]", ")", ";", "int", "msgSize", "=", "Integer", ".", "parseInt", "(", "listParts", "[", "<NUM_LIT:2>", "]", ")", ";", "pop3Message", ".", "setSize", "(", "msgSize", ")", ";", "}", "catch", "(", "NumberFormatException", "nfe", ")", "{", "throw", "new", "IOException", "(", ")", ";", "}", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageFinished", "(", "pop3Message", ",", "i", ",", "count", ")", ";", "}", "}", "}", "else", "{", "HashSet", "<", "String", ">", "msgUidIndex", "=", "new", "HashSet", "<", "String", ">", "(", ")", ";", "for", "(", "Message", "message", ":", "messages", ")", "{", "msgUidIndex", ".", "add", "(", "message", ".", "getUid", "(", ")", ")", ";", "}", "int", "i", "=", "0", ",", "count", "=", "messages", ".", "length", ";", "String", "response", "=", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "while", "(", "(", "response", "=", "mTransport", ".", "readLine", "(", ")", ")", "!", "=", "null", ")", "{", "if", "(", "response", ".", "equals", "(", "\"", "<STR_LIT:.>", "\"", ")", ")", "{", "break", ";", "}", "Pop3Message", "pop3Message", "=", "null", ";", "int", "msgSize", "=", "0", ";", "try", "{", "String", "[", "]", "listParts", "=", "response", ".", "split", "(", "\"", "\"", ")", ";", "int", "msgNum", "=", "Integer", ".", "parseInt", "(", "listParts", "[", "0", "]", ")", ";", "msgSize", "=", "Integer", ".", "parseInt", "(", "listParts", "[", "1", "]", ")", ";", "pop3Message", "=", "mMsgNumToMsgMap", ".", "get", "(", "msgNum", ")", ";", "}", "catch", "(", "NumberFormatException", "nfe", ")", "{", "throw", "new", "IOException", "(", ")", ";", "}", "if", "(", "pop3Message", "!", "=", "null", "&", "&", "msgUidIndex", ".", "contains", "(", "pop3Message", ".", "getUid", "(", ")", ")", ")", "{", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageStarted", "(", "pop3Message", ".", "getUid", "(", ")", ",", "i", ",", "count", ")", ";", "}", "pop3Message", ".", "setSize", "(", "msgSize", ")", ";", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageFinished", "(", "pop3Message", ",", "i", ",", "count", ")", ";", "}", "i", "+", "+", ";", "}", "}", "}", "}", "</s>"]
["<s>", "private", "void", "fetchBody", "(", "Pop3Message", "message", ",", "int", "lines", ")", "throws", "IOException", ",", "MessagingException", "{", "String", "response", "=", "null", ";", "if", "(", "lines", "=", "=", "-", "1", "|", "|", "!", "mCapabilities", ".", "top", ")", "{", "response", "=", "executeSimpleCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "mUidToMsgNumMap", ".", "get", "(", "message", ".", "getUid", "(", ")", ")", ")", ")", ";", "}", "else", "{", "response", "=", "executeSimpleCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "mUidToMsgNumMap", ".", "get", "(", "message", ".", "getUid", "(", ")", ")", ",", "lines", ")", ")", ";", "}", "if", "(", "response", "!", "=", "null", ")", "{", "try", "{", "InputStream", "in", "=", "mTransport", ".", "getInputStream", "(", ")", ";", "if", "(", "DEBUG_LOG_RAW_STREAM", "&", "&", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "in", "=", "new", "LoggingInputStream", "(", "in", ")", ";", "}", "message", ".", "parse", "(", "new", "Pop3ResponseInputStream", "(", "in", ")", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "if", "(", "lines", "=", "=", "-", "1", ")", "{", "throw", "me", ";", "}", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "Flag", "[", "]", "getPermanentFlags", "(", ")", "throws", "MessagingException", "{", "return", "PERMANENT_FLAGS", ";", "}", "</s>"]
["<s>", "public", "void", "appendMessages", "(", "Message", "[", "]", "messages", ")", "throws", "MessagingException", "{", "}", "</s>"]
["<s>", "public", "void", "delete", "(", "boolean", "recurse", ")", "throws", "MessagingException", "{", "}", "</s>"]
["<s>", "public", "Message", "[", "]", "expunge", "(", ")", "throws", "MessagingException", "{", "return", "null", ";", "}", "</s>"]
["<s>", "public", "void", "setFlags", "(", "Message", "[", "]", "messages", ",", "Flag", "[", "]", "flags", ",", "boolean", "value", ")", "throws", "MessagingException", "{", "if", "(", "!", "value", "|", "|", "!", "Utility", ".", "arrayContains", "(", "flags", ",", "Flag", ".", "DELETED", ")", ")", "{", "return", ";", "}", "try", "{", "for", "(", "Message", "message", ":", "messages", ")", "{", "executeSimpleCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "mUidToMsgNumMap", ".", "get", "(", "message", ".", "getUid", "(", ")", ")", ")", ")", ";", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "mTransport", ".", "close", "(", ")", ";", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "ioe", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "ioe", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "copyMessages", "(", "Message", "[", "]", "msgs", ",", "Folder", "folder", ",", "MessageUpdateCallbacks", "callbacks", ")", "throws", "MessagingException", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "Pop3Capabilities", "getCapabilities", "(", ")", "throws", "IOException", ",", "MessagingException", "{", "Pop3Capabilities", "capabilities", "=", "new", "Pop3Capabilities", "(", ")", ";", "try", "{", "String", "response", "=", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "while", "(", "(", "response", "=", "mTransport", ".", "readLine", "(", ")", ")", "!", "=", "null", ")", "{", "if", "(", "response", ".", "equals", "(", "\"", "<STR_LIT:.>", "\"", ")", ")", "{", "break", ";", "}", "if", "(", "response", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "capabilities", ".", "stls", "=", "true", ";", "}", "else", "if", "(", "response", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "capabilities", ".", "uidl", "=", "true", ";", "}", "else", "if", "(", "response", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "capabilities", ".", "pipelining", "=", "true", ";", "}", "else", "if", "(", "response", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "capabilities", ".", "user", "=", "true", ";", "}", "else", "if", "(", "response", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "capabilities", ".", "top", "=", "true", ";", "}", "}", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "return", "capabilities", ";", "}", "</s>"]
["<s>", "private", "String", "executeSimpleCommand", "(", "String", "command", ")", "throws", "IOException", ",", "MessagingException", "{", "return", "executeSensitiveCommand", "(", "command", ",", "null", ")", ";", "}", "</s>"]
["<s>", "private", "String", "executeSensitiveCommand", "(", "String", "command", ",", "String", "sensitiveReplacement", ")", "throws", "IOException", ",", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "if", "(", "command", "!", "=", "null", ")", "{", "mTransport", ".", "writeLine", "(", "command", ",", "sensitiveReplacement", ")", ";", "}", "String", "response", "=", "mTransport", ".", "readLine", "(", ")", ";", "if", "(", "response", ".", "length", "(", ")", ">", "1", "&", "&", "response", ".", "charAt", "(", "0", ")", "=", "=", "<CHAR_LIT:->", ")", "{", "throw", "new", "MessagingException", "(", "response", ")", ";", "}", "return", "response", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "o", ")", "{", "if", "(", "o", "instanceof", "Pop3Folder", ")", "{", "return", "(", "(", "Pop3Folder", ")", "o", ")", ".", "mName", ".", "equals", "(", "mName", ")", ";", "}", "return", "super", ".", "equals", "(", "o", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isOpen", "(", ")", "{", "return", "mTransport", ".", "isOpen", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "createMessage", "(", "String", "uid", ")", "throws", "MessagingException", "{", "return", "new", "Pop3Message", "(", "uid", ",", "this", ")", ";", "}", "</s>"]
["<s>", "public", "Pop3Message", "(", "String", "uid", ",", "Pop3Folder", "folder", ")", "throws", "MessagingException", "{", "mUid", "=", "uid", ";", "mFolder", "=", "folder", ";", "mSize", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "void", "setSize", "(", "int", "size", ")", "{", "mSize", "=", "size", ";", "}", "</s>"]
["<s>", "protected", "void", "parse", "(", "InputStream", "in", ")", "throws", "IOException", ",", "MessagingException", "{", "super", ".", "parse", "(", "in", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setFlag", "(", "Flag", "flag", ",", "boolean", "set", ")", "throws", "MessagingException", "{", "super", ".", "setFlag", "(", "flag", ",", "set", ")", ";", "mFolder", ".", "setFlags", "(", "new", "Message", "[", "]", "{", "this", "}", ",", "new", "Flag", "[", "]", "{", "flag", "}", ",", "set", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "stls", ",", "top", ",", "user", ",", "uidl", ",", "pipelining", ")", ";", "}", "</s>"]
["<s>", "public", "Pop3ResponseInputStream", "(", "InputStream", "in", ")", "{", "mIn", "=", "in", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", ")", "throws", "IOException", "{", "if", "(", "mFinished", ")", "{", "return", "-", "1", ";", "}", "int", "d", "=", "mIn", ".", "read", "(", ")", ";", "if", "(", "mStartOfLine", "&", "&", "d", "=", "=", "<CHAR_LIT:.>", ")", "{", "d", "=", "mIn", ".", "read", "(", ")", ";", "if", "(", "d", "=", "=", "<STR_LIT>", ")", "{", "mFinished", "=", "true", ";", "mIn", ".", "read", "(", ")", ";", "return", "-", "1", ";", "}", "}", "mStartOfLine", "=", "(", "d", "=", "=", "<STR_LIT:\\n>", ")", ";", "return", "d", ";", "}", "</s>"]
["<s>", "public", "static", "Store", "newInstance", "(", "String", "uri", ",", "Context", "context", ",", "PersistentDataCallbacks", "callbacks", ")", "throws", "MessagingException", "{", "return", "new", "LocalStore", "(", "uri", ",", "context", ")", ";", "}", "</s>"]
["<s>", "private", "LocalStore", "(", "String", "_uri", ",", "Context", "context", ")", "throws", "MessagingException", "{", "mContext", "=", "context", ";", "URI", "uri", "=", "null", ";", "try", "{", "uri", "=", "new", "URI", "(", "_uri", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "!", "uri", ".", "getScheme", "(", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mPath", "=", "uri", ".", "getPath", "(", ")", ";", "File", "parentDir", "=", "new", "File", "(", "mPath", ")", ".", "getParentFile", "(", ")", ";", "if", "(", "!", "parentDir", ".", "exists", "(", ")", ")", "{", "parentDir", ".", "mkdirs", "(", ")", ";", "}", "mDb", "=", "SQLiteDatabase", ".", "openOrCreateDatabase", "(", "mPath", ",", "null", ")", ";", "int", "oldVersion", "=", "mDb", ".", "getVersion", "(", ")", ";", "if", "(", "oldVersion", "!", "=", "DB_VERSION", ")", "{", "if", "(", "Email", ".", "LOGD", ")", "{", "Log", ".", "v", "(", "Email", ".", "LOG_TAG", ",", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "oldVersion", ",", "DB_VERSION", ")", ")", ";", "}", "if", "(", "oldVersion", "<", "<NUM_LIT>", ")", "{", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "addRemoteStoreDataTable", "(", ")", ";", "addFolderDeleteTrigger", "(", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "setVersion", "(", "DB_VERSION", ")", ";", "}", "else", "{", "if", "(", "oldVersion", "<", "<NUM_LIT>", ")", "{", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "setVersion", "(", "<NUM_LIT>", ")", ";", "}", "if", "(", "oldVersion", "<", "<NUM_LIT:20>", ")", "{", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "setVersion", "(", "<NUM_LIT:20>", ")", ";", "}", "if", "(", "oldVersion", "<", "<NUM_LIT>", ")", "{", "addRemoteStoreDataTable", "(", ")", ";", "addFolderDeleteTrigger", "(", ")", ";", "mDb", ".", "setVersion", "(", "<NUM_LIT>", ")", ";", "}", "if", "(", "oldVersion", "<", "<NUM_LIT>", ")", "{", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "setVersion", "(", "<NUM_LIT>", ")", ";", "}", "if", "(", "oldVersion", "<", "<NUM_LIT>", ")", "{", "mDb", ".", "beginTransaction", "(", ")", ";", "try", "{", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "migrateMessageFlags", "(", ")", ";", "mDb", ".", "setVersion", "(", "<NUM_LIT>", ")", ";", "mDb", ".", "setTransactionSuccessful", "(", ")", ";", "}", "finally", "{", "mDb", ".", "endTransaction", "(", ")", ";", "}", "}", "if", "(", "oldVersion", "<", "<NUM_LIT:24>", ")", "{", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "setVersion", "(", "<NUM_LIT:24>", ")", ";", "}", "}", "if", "(", "mDb", ".", "getVersion", "(", ")", "!", "=", "DB_VERSION", ")", "{", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "mAttachmentsDir", "=", "new", "File", "(", "mPath", "+", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "!", "mAttachmentsDir", ".", "exists", "(", ")", ")", "{", "mAttachmentsDir", ".", "mkdirs", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "addRemoteStoreDataTable", "(", ")", "{", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "void", "addFolderDeleteTrigger", "(", ")", "{", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "void", "migrateMessageFlags", "(", ")", "{", "Cursor", "cursor", "=", "mDb", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ",", "null", ",", "null", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "int", "columnId", "=", "cursor", ".", "getColumnIndexOrThrow", "(", "\"", "<STR_LIT>", "\"", ")", ";", "int", "columnFlags", "=", "cursor", ".", "getColumnIndexOrThrow", "(", "\"", "<STR_LIT>", "\"", ")", ";", "while", "(", "cursor", ".", "moveToNext", "(", ")", ")", "{", "String", "oldFlags", "=", "cursor", ".", "getString", "(", "columnFlags", ")", ";", "ContentValues", "values", "=", "new", "ContentValues", "(", ")", ";", "int", "newFlagDlFull", "=", "0", ";", "int", "newFlagDlPartial", "=", "0", ";", "int", "newFlagDeleted", "=", "0", ";", "if", "(", "oldFlags", "!", "=", "null", ")", "{", "if", "(", "oldFlags", ".", "contains", "(", "Flag", ".", "X_DOWNLOADED_FULL", ".", "toString", "(", ")", ")", ")", "{", "newFlagDlFull", "=", "1", ";", "}", "if", "(", "oldFlags", ".", "contains", "(", "Flag", ".", "X_DOWNLOADED_PARTIAL", ".", "toString", "(", ")", ")", ")", "{", "newFlagDlPartial", "=", "1", ";", "}", "if", "(", "oldFlags", ".", "contains", "(", "Flag", ".", "DELETED", ".", "toString", "(", ")", ")", ")", "{", "newFlagDeleted", "=", "1", ";", "}", "}", "values", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "newFlagDlFull", ")", ";", "values", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "newFlagDlPartial", ")", ";", "values", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "newFlagDeleted", ")", ";", "int", "rowId", "=", "cursor", ".", "getInt", "(", "columnId", ")", ";", "mDb", ".", "update", "(", "\"", "<STR_LIT>", "\"", ",", "values", ",", "\"", "<STR_LIT:=>", "\"", "+", "rowId", ",", "null", ")", ";", "}", "}", "finally", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "Folder", "getFolder", "(", "String", "name", ")", "throws", "MessagingException", "{", "return", "new", "LocalFolder", "(", "name", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Folder", "[", "]", "getPersonalNamespaces", "(", ")", "throws", "MessagingException", "{", "ArrayList", "<", "Folder", ">", "folders", "=", "new", "ArrayList", "<", "Folder", ">", "(", ")", ";", "Cursor", "cursor", "=", "null", ";", "try", "{", "cursor", "=", "mDb", ".", "rawQuery", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "while", "(", "cursor", ".", "moveToNext", "(", ")", ")", "{", "folders", ".", "add", "(", "new", "LocalFolder", "(", "cursor", ".", "getString", "(", "0", ")", ")", ")", ";", "}", "}", "finally", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "return", "folders", ".", "toArray", "(", "new", "Folder", "[", "]", "{", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "checkSettings", "(", ")", "throws", "MessagingException", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "delete", "(", ")", "{", "try", "{", "mDb", ".", "close", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "}", "try", "{", "File", "[", "]", "attachments", "=", "mAttachmentsDir", ".", "listFiles", "(", ")", ";", "for", "(", "File", "attachment", ":", "attachments", ")", "{", "if", "(", "attachment", ".", "exists", "(", ")", ")", "{", "attachment", ".", "delete", "(", ")", ";", "}", "}", "if", "(", "mAttachmentsDir", ".", "exists", "(", ")", ")", "{", "mAttachmentsDir", ".", "delete", "(", ")", ";", "}", "}", "catch", "(", "Exception", "e", ")", "{", "}", "try", "{", "new", "File", "(", "mPath", ")", ".", "delete", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "}", "}", "</s>"]
["<s>", "public", "void", "pruneCachedAttachments", "(", ")", "throws", "MessagingException", "{", "File", "[", "]", "files", "=", "mAttachmentsDir", ".", "listFiles", "(", ")", ";", "for", "(", "File", "file", ":", "files", ")", "{", "if", "(", "file", ".", "exists", "(", ")", ")", "{", "try", "{", "Cursor", "cursor", "=", "null", ";", "try", "{", "cursor", "=", "mDb", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", "}", ",", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "file", ".", "getName", "(", ")", "}", ",", "null", ",", "null", ",", "null", ")", ";", "if", "(", "cursor", ".", "moveToNext", "(", ")", ")", "{", "if", "(", "cursor", ".", "getString", "(", "0", ")", "=", "=", "null", ")", "{", "continue", ";", "}", "}", "}", "finally", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "putNull", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mDb", ".", "update", "(", "\"", "<STR_LIT>", "\"", ",", "cv", ",", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "file", ".", "getName", "(", ")", "}", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "}", "if", "(", "!", "file", ".", "delete", "(", ")", ")", "{", "file", ".", "deleteOnExit", "(", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "public", "void", "resetVisibleLimits", "(", "int", "visibleLimit", ")", "{", "mVisibleLimitDefault", "=", "visibleLimit", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Integer", ".", "toString", "(", "visibleLimit", ")", ")", ";", "mDb", ".", "update", "(", "\"", "<STR_LIT>", "\"", ",", "cv", ",", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "ArrayList", "<", "PendingCommand", ">", "getPendingCommands", "(", ")", "{", "Cursor", "cursor", "=", "null", ";", "try", "{", "cursor", "=", "mDb", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ",", "null", ",", "null", ",", "null", ",", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ArrayList", "<", "PendingCommand", ">", "commands", "=", "new", "ArrayList", "<", "PendingCommand", ">", "(", ")", ";", "while", "(", "cursor", ".", "moveToNext", "(", ")", ")", "{", "PendingCommand", "command", "=", "new", "PendingCommand", "(", ")", ";", "command", ".", "mId", "=", "cursor", ".", "getLong", "(", "0", ")", ";", "command", ".", "command", "=", "cursor", ".", "getString", "(", "1", ")", ";", "String", "arguments", "=", "cursor", ".", "getString", "(", "<NUM_LIT:2>", ")", ";", "command", ".", "arguments", "=", "arguments", ".", "split", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "command", ".", "arguments", ".", "length", ";", "i", "+", "+", ")", "{", "command", ".", "arguments", "[", "i", "]", "=", "Utility", ".", "fastUrlDecode", "(", "command", ".", "arguments", "[", "i", "]", ")", ";", "}", "commands", ".", "add", "(", "command", ")", ";", "}", "return", "commands", ";", "}", "finally", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "addPendingCommand", "(", "PendingCommand", "command", ")", "{", "try", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "command", ".", "arguments", ".", "length", ";", "i", "+", "+", ")", "{", "command", ".", "arguments", "[", "i", "]", "=", "URLEncoder", ".", "encode", "(", "command", ".", "arguments", "[", "i", "]", ",", "\"", "<STR_LIT:UTF-8>", "\"", ")", ";", "}", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "command", ".", "command", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Utility", ".", "combine", "(", "command", ".", "arguments", ",", "<CHAR_LIT:U+002C>", ")", ")", ";", "mDb", ".", "insert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "cv", ")", ";", "}", "catch", "(", "UnsupportedEncodingException", "usee", ")", "{", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "removePendingCommand", "(", "PendingCommand", "command", ")", "{", "mDb", ".", "delete", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "command", ".", "mId", ")", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "sb", ".", "append", "(", "command", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "for", "(", "String", "argument", ":", "arguments", ")", "{", "sb", ".", "append", "(", "\"", "\"", ")", ";", "sb", ".", "append", "(", "argument", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "PersistentDataCallbacks", "getPersistentCallbacks", "(", ")", "throws", "MessagingException", "{", "return", "this", ";", "}", "</s>"]
["<s>", "public", "String", "getPersistentString", "(", "String", "key", ",", "String", "defaultValue", ")", "{", "return", "getPersistentString", "(", "-", "1", ",", "key", ",", "defaultValue", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setPersistentString", "(", "String", "key", ",", "String", "value", ")", "{", "setPersistentString", "(", "-", "1", ",", "key", ",", "value", ")", ";", "}", "</s>"]
["<s>", "private", "String", "getPersistentString", "(", "long", "folderId", ",", "String", "key", ",", "String", "defaultValue", ")", "{", "String", "result", "=", "defaultValue", ";", "Cursor", "cursor", "=", "null", ";", "try", "{", "cursor", "=", "mDb", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", "}", ",", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "folderId", ")", ",", "key", "}", ",", "null", ",", "null", ",", "null", ")", ";", "if", "(", "cursor", "!", "=", "null", "&", "&", "cursor", ".", "moveToNext", "(", ")", ")", "{", "result", "=", "cursor", ".", "getString", "(", "0", ")", ";", "}", "}", "finally", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "return", "result", ";", "}", "</s>"]
["<s>", "private", "void", "setPersistentString", "(", "long", "folderId", ",", "String", "key", ",", "String", "value", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Long", ".", "toString", "(", "folderId", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "key", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "value", ")", ";", "mDb", ".", "insert", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "cv", ")", ";", "}", "</s>"]
["<s>", "public", "LocalFolder", "(", "String", "name", ")", "{", "this", ".", "mName", "=", "name", ";", "}", "</s>"]
["<s>", "public", "long", "getId", "(", ")", "{", "return", "mFolderId", ";", "}", "</s>"]
["<s>", "private", "void", "open", "(", "OpenMode", "mode", ")", "throws", "MessagingException", "{", "open", "(", "mode", ",", "null", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "open", "(", "OpenMode", "mode", ",", "PersistentDataCallbacks", "callbacks", ")", "throws", "MessagingException", "{", "if", "(", "isOpen", "(", ")", ")", "{", "return", ";", "}", "if", "(", "!", "exists", "(", ")", ")", "{", "create", "(", "FolderType", ".", "HOLDS_MESSAGES", ")", ";", "}", "Cursor", "cursor", "=", "null", ";", "try", "{", "cursor", "=", "mDb", ".", "rawQuery", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "mName", "}", ")", ";", "if", "(", "!", "cursor", ".", "moveToFirst", "(", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mFolderId", "=", "cursor", ".", "getInt", "(", "0", ")", ";", "mUnreadMessageCount", "=", "cursor", ".", "getInt", "(", "1", ")", ";", "mVisibleLimit", "=", "cursor", ".", "getInt", "(", "<NUM_LIT:2>", ")", ";", "}", "finally", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isOpen", "(", ")", "{", "return", "mFolderId", "!", "=", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "OpenMode", "getMode", "(", ")", "throws", "MessagingException", "{", "return", "OpenMode", ".", "READ_WRITE", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getName", "(", ")", "{", "return", "mName", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "exists", "(", ")", "throws", "MessagingException", "{", "return", "Utility", ".", "arrayContains", "(", "getPersonalNamespaces", "(", ")", ",", "this", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "canCreate", "(", "FolderType", "type", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "create", "(", "FolderType", "type", ")", "throws", "MessagingException", "{", "if", "(", "exists", "(", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "mName", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Object", "[", "]", "{", "mName", ",", "mVisibleLimitDefault", "}", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", "boolean", "expunge", ")", "throws", "MessagingException", "{", "if", "(", "expunge", ")", "{", "expunge", "(", ")", ";", "}", "mFolderId", "=", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getMessageCount", "(", ")", "throws", "MessagingException", "{", "return", "getMessageCount", "(", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getMessageCount", "(", "Flag", "[", "]", "setFlags", ",", "Flag", "[", "]", "clearFlags", ")", "throws", "MessagingException", "{", "StringBuilder", "sql", "=", "new", "StringBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "buildFlagPredicates", "(", "sql", ",", "setFlags", ",", "clearFlags", ")", ";", "sql", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "Cursor", "cursor", "=", "null", ";", "try", "{", "cursor", "=", "mDb", ".", "rawQuery", "(", "sql", ".", "toString", "(", ")", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mFolderId", ")", "}", ")", ";", "cursor", ".", "moveToFirst", "(", ")", ";", "int", "messageCount", "=", "cursor", ".", "getInt", "(", "0", ")", ";", "return", "messageCount", ";", "}", "finally", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getUnreadMessageCount", "(", ")", "throws", "MessagingException", "{", "if", "(", "!", "isOpen", "(", ")", ")", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "}", "else", "{", "Cursor", "cursor", "=", "null", ";", "try", "{", "cursor", "=", "mDb", ".", "rawQuery", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "mName", "}", ")", ";", "if", "(", "!", "cursor", ".", "moveToFirst", "(", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mUnreadMessageCount", "=", "cursor", ".", "getInt", "(", "0", ")", ";", "}", "finally", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "}", "return", "mUnreadMessageCount", ";", "}", "</s>"]
["<s>", "public", "void", "setUnreadMessageCount", "(", "int", "unreadMessageCount", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "mUnreadMessageCount", "=", "Math", ".", "max", "(", "0", ",", "unreadMessageCount", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Object", "[", "]", "{", "mUnreadMessageCount", ",", "mFolderId", "}", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getVisibleLimit", "(", ")", "throws", "MessagingException", "{", "if", "(", "!", "isOpen", "(", ")", ")", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "}", "else", "{", "Cursor", "cursor", "=", "null", ";", "try", "{", "cursor", "=", "mDb", ".", "rawQuery", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "mName", "}", ")", ";", "if", "(", "!", "cursor", ".", "moveToFirst", "(", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mVisibleLimit", "=", "cursor", ".", "getInt", "(", "0", ")", ";", "}", "finally", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "}", "return", "mVisibleLimit", ";", "}", "</s>"]
["<s>", "public", "void", "setVisibleLimit", "(", "int", "visibleLimit", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "mVisibleLimit", "=", "visibleLimit", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Object", "[", "]", "{", "mVisibleLimit", ",", "mFolderId", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "fetch", "(", "Message", "[", "]", "messages", ",", "FetchProfile", "fp", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", "|", "|", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "STRUCTURE", ")", ")", "{", "for", "(", "Message", "message", ":", "messages", ")", "{", "LocalMessage", "localMessage", "=", "(", "LocalMessage", ")", "message", ";", "Cursor", "cursor", "=", "null", ";", "localMessage", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "MimeMultipart", "mp", "=", "new", "MimeMultipart", "(", ")", ";", "mp", ".", "setSubType", "(", "\"", "<STR_LIT>", "\"", ")", ";", "localMessage", ".", "setBody", "(", "mp", ")", ";", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ")", "{", "try", "{", "cursor", "=", "mDb", ".", "rawQuery", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "localMessage", ".", "mId", ")", "}", ")", ";", "cursor", ".", "moveToNext", "(", ")", ";", "String", "htmlContent", "=", "cursor", ".", "getString", "(", "0", ")", ";", "String", "textContent", "=", "cursor", ".", "getString", "(", "1", ")", ";", "if", "(", "htmlContent", "!", "=", "null", ")", "{", "TextBody", "body", "=", "new", "TextBody", "(", "htmlContent", ")", ";", "MimeBodyPart", "bp", "=", "new", "MimeBodyPart", "(", "body", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mp", ".", "addBodyPart", "(", "bp", ")", ";", "}", "if", "(", "textContent", "!", "=", "null", ")", "{", "TextBody", "body", "=", "new", "TextBody", "(", "textContent", ")", ";", "MimeBodyPart", "bp", "=", "new", "MimeBodyPart", "(", "body", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mp", ".", "addBodyPart", "(", "bp", ")", ";", "}", "}", "finally", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "}", "else", "{", "MimeBodyPart", "bp", "=", "new", "MimeBodyPart", "(", ")", ";", "bp", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "\"", ")", ";", "mp", ".", "addBodyPart", "(", "bp", ")", ";", "bp", "=", "new", "MimeBodyPart", "(", ")", ";", "bp", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "\"", ")", ";", "mp", ".", "addBodyPart", "(", "bp", ")", ";", "}", "try", "{", "cursor", "=", "mDb", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ",", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "localMessage", ".", "mId", ")", "}", ",", "null", ",", "null", ",", "null", ")", ";", "while", "(", "cursor", ".", "moveToNext", "(", ")", ")", "{", "long", "id", "=", "cursor", ".", "getLong", "(", "0", ")", ";", "int", "size", "=", "cursor", ".", "getInt", "(", "1", ")", ";", "String", "name", "=", "cursor", ".", "getString", "(", "<NUM_LIT:2>", ")", ";", "String", "type", "=", "cursor", ".", "getString", "(", "<NUM_LIT:3>", ")", ";", "String", "storeData", "=", "cursor", ".", "getString", "(", "<NUM_LIT:4>", ")", ";", "String", "contentUri", "=", "cursor", ".", "getString", "(", "<NUM_LIT:5>", ")", ";", "String", "contentId", "=", "cursor", ".", "getString", "(", "<NUM_LIT:6>", ")", ";", "Body", "body", "=", "null", ";", "if", "(", "contentUri", "!", "=", "null", ")", "{", "body", "=", "new", "LocalAttachmentBody", "(", "Uri", ".", "parse", "(", "contentUri", ")", ",", "mContext", ")", ";", "}", "MimeBodyPart", "bp", "=", "new", "LocalAttachmentBodyPart", "(", "body", ",", "id", ")", ";", "bp", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "\"", ",", "type", ",", "name", ")", ")", ";", "bp", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TRANSFER_ENCODING", ",", "\"", "<STR_LIT>", "\"", ")", ";", "bp", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_DISPOSITION", ",", "String", ".", "format", "(", "\"", "<STR_LIT:;>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "<STR_LIT:;>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "name", ",", "size", ")", ")", ";", "bp", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_ID", ",", "contentId", ")", ";", "bp", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_ATTACHMENT_STORE_DATA", ",", "storeData", ")", ";", "mp", ".", "addBodyPart", "(", "bp", ")", ";", "}", "}", "finally", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "}", "}", "}", "</s>"]
["<s>", "private", "void", "populateMessageFromGetMessageCursor", "(", "LocalMessage", "message", ",", "Cursor", "cursor", ")", "throws", "MessagingException", "{", "message", ".", "setSubject", "(", "cursor", ".", "getString", "(", "0", ")", "=", "=", "null", "?", "\"", "\"", ":", "cursor", ".", "getString", "(", "0", ")", ")", ";", "Address", "[", "]", "from", "=", "Address", ".", "unpack", "(", "cursor", ".", "getString", "(", "1", ")", ")", ";", "if", "(", "from", ".", "length", ">", "0", ")", "{", "message", ".", "setFrom", "(", "from", "[", "0", "]", ")", ";", "}", "message", ".", "setSentDate", "(", "new", "Date", "(", "cursor", ".", "getLong", "(", "<NUM_LIT:2>", ")", ")", ")", ";", "message", ".", "setUid", "(", "cursor", ".", "getString", "(", "<NUM_LIT:3>", ")", ")", ";", "String", "flagList", "=", "cursor", ".", "getString", "(", "<NUM_LIT:4>", ")", ";", "if", "(", "flagList", "!", "=", "null", "&", "&", "flagList", ".", "length", "(", ")", ">", "0", ")", "{", "String", "[", "]", "flags", "=", "flagList", ".", "split", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "try", "{", "for", "(", "String", "flag", ":", "flags", ")", "{", "message", ".", "setFlagInternal", "(", "Flag", ".", "valueOf", "(", "flag", ".", "toUpperCase", "(", ")", ")", ",", "true", ")", ";", "}", "}", "catch", "(", "Exception", "e", ")", "{", "}", "}", "message", ".", "mId", "=", "cursor", ".", "getLong", "(", "<NUM_LIT:5>", ")", ";", "message", ".", "setRecipients", "(", "RecipientType", ".", "TO", ",", "Address", ".", "unpack", "(", "cursor", ".", "getString", "(", "<NUM_LIT:6>", ")", ")", ")", ";", "message", ".", "setRecipients", "(", "RecipientType", ".", "CC", ",", "Address", ".", "unpack", "(", "cursor", ".", "getString", "(", "<NUM_LIT:7>", ")", ")", ")", ";", "message", ".", "setRecipients", "(", "RecipientType", ".", "BCC", ",", "Address", ".", "unpack", "(", "cursor", ".", "getString", "(", "<NUM_LIT:8>", ")", ")", ")", ";", "message", ".", "setReplyTo", "(", "Address", ".", "unpack", "(", "cursor", ".", "getString", "(", "<NUM_LIT:9>", ")", ")", ")", ";", "message", ".", "mAttachmentCount", "=", "cursor", ".", "getInt", "(", "<NUM_LIT:10>", ")", ";", "message", ".", "setInternalDate", "(", "new", "Date", "(", "cursor", ".", "getLong", "(", "<NUM_LIT:11>", ")", ")", ")", ";", "message", ".", "setMessageId", "(", "cursor", ".", "getString", "(", "<NUM_LIT:12>", ")", ")", ";", "message", ".", "setFlagInternal", "(", "Flag", ".", "X_STORE_1", ",", "(", "0", "!", "=", "cursor", ".", "getInt", "(", "<NUM_LIT>", ")", ")", ")", ";", "message", ".", "setFlagInternal", "(", "Flag", ".", "X_STORE_2", ",", "(", "0", "!", "=", "cursor", ".", "getInt", "(", "<NUM_LIT>", ")", ")", ")", ";", "message", ".", "setFlagInternal", "(", "Flag", ".", "X_DOWNLOADED_FULL", ",", "(", "0", "!", "=", "cursor", ".", "getInt", "(", "<NUM_LIT:15>", ")", ")", ")", ";", "message", ".", "setFlagInternal", "(", "Flag", ".", "X_DOWNLOADED_PARTIAL", ",", "(", "0", "!", "=", "cursor", ".", "getInt", "(", "<NUM_LIT:16>", ")", ")", ")", ";", "message", ".", "setFlagInternal", "(", "Flag", ".", "DELETED", ",", "(", "0", "!", "=", "cursor", ".", "getInt", "(", "<NUM_LIT>", ")", ")", ")", ";", "message", ".", "setExtendedHeaders", "(", "cursor", ".", "getString", "(", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "[", "]", "getMessages", "(", "int", "start", ",", "int", "end", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "getMessage", "(", "String", "uid", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "LocalMessage", "message", "=", "new", "LocalMessage", "(", "uid", ",", "this", ")", ";", "Cursor", "cursor", "=", "null", ";", "try", "{", "cursor", "=", "mDb", ".", "rawQuery", "(", "\"", "<STR_LIT>", "\"", "+", "POPULATE_MESSAGE_SELECT_COLUMNS", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "message", ".", "getUid", "(", ")", ",", "Long", ".", "toString", "(", "mFolderId", ")", "}", ")", ";", "if", "(", "!", "cursor", ".", "moveToNext", "(", ")", ")", "{", "return", "null", ";", "}", "populateMessageFromGetMessageCursor", "(", "message", ",", "cursor", ")", ";", "}", "finally", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "return", "message", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "[", "]", "getMessages", "(", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "ArrayList", "<", "Message", ">", "messages", "=", "new", "ArrayList", "<", "Message", ">", "(", ")", ";", "Cursor", "cursor", "=", "null", ";", "try", "{", "cursor", "=", "mDb", ".", "rawQuery", "(", "\"", "<STR_LIT>", "\"", "+", "POPULATE_MESSAGE_SELECT_COLUMNS", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mFolderId", ")", "}", ")", ";", "while", "(", "cursor", ".", "moveToNext", "(", ")", ")", "{", "LocalMessage", "message", "=", "new", "LocalMessage", "(", "null", ",", "this", ")", ";", "populateMessageFromGetMessageCursor", "(", "message", ",", "cursor", ")", ";", "messages", ".", "add", "(", "message", ")", ";", "}", "}", "finally", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "return", "messages", ".", "toArray", "(", "new", "Message", "[", "]", "{", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "[", "]", "getMessages", "(", "String", "[", "]", "uids", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "if", "(", "uids", "=", "=", "null", ")", "{", "return", "getMessages", "(", "listener", ")", ";", "}", "ArrayList", "<", "Message", ">", "messages", "=", "new", "ArrayList", "<", "Message", ">", "(", ")", ";", "for", "(", "String", "uid", ":", "uids", ")", "{", "messages", ".", "add", "(", "getMessage", "(", "uid", ")", ")", ";", "}", "return", "messages", ".", "toArray", "(", "new", "Message", "[", "]", "{", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "[", "]", "getMessages", "(", "Flag", "[", "]", "setFlags", ",", "Flag", "[", "]", "clearFlags", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "StringBuilder", "sql", "=", "new", "StringBuilder", "(", "\"", "<STR_LIT>", "\"", "+", "POPULATE_MESSAGE_SELECT_COLUMNS", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "buildFlagPredicates", "(", "sql", ",", "setFlags", ",", "clearFlags", ")", ";", "sql", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "ArrayList", "<", "Message", ">", "messages", "=", "new", "ArrayList", "<", "Message", ">", "(", ")", ";", "Cursor", "cursor", "=", "null", ";", "try", "{", "cursor", "=", "mDb", ".", "rawQuery", "(", "sql", ".", "toString", "(", ")", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mFolderId", ")", "}", ")", ";", "while", "(", "cursor", ".", "moveToNext", "(", ")", ")", "{", "LocalMessage", "message", "=", "new", "LocalMessage", "(", "null", ",", "this", ")", ";", "populateMessageFromGetMessageCursor", "(", "message", ",", "cursor", ")", ";", "messages", ".", "add", "(", "message", ")", ";", "}", "}", "finally", "{", "if", "(", "cursor", "!", "=", "null", ")", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "return", "messages", ".", "toArray", "(", "new", "Message", "[", "]", "{", "}", ")", ";", "}", "</s>"]
["<s>", "private", "void", "buildFlagPredicates", "(", "StringBuilder", "sql", ",", "Flag", "[", "]", "setFlags", ",", "Flag", "[", "]", "clearFlags", ")", "throws", "MessagingException", "{", "if", "(", "setFlags", "!", "=", "null", ")", "{", "for", "(", "Flag", "flag", ":", "setFlags", ")", "{", "if", "(", "flag", "=", "=", "Flag", ".", "X_STORE_1", ")", "{", "sql", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "X_STORE_2", ")", "{", "sql", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "X_DOWNLOADED_FULL", ")", "{", "sql", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "X_DOWNLOADED_PARTIAL", ")", "{", "sql", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "DELETED", ")", "{", "sql", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "flag", ")", ";", "}", "}", "}", "if", "(", "clearFlags", "!", "=", "null", ")", "{", "for", "(", "Flag", "flag", ":", "clearFlags", ")", "{", "if", "(", "flag", "=", "=", "Flag", ".", "X_STORE_1", ")", "{", "sql", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "X_STORE_2", ")", "{", "sql", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "X_DOWNLOADED_FULL", ")", "{", "sql", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "X_DOWNLOADED_PARTIAL", ")", "{", "sql", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "DELETED", ")", "{", "sql", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "flag", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "copyMessages", "(", "Message", "[", "]", "msgs", ",", "Folder", "folder", ",", "MessageUpdateCallbacks", "callbacks", ")", "throws", "MessagingException", "{", "if", "(", "!", "(", "folder", "instanceof", "LocalFolder", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "(", "(", "LocalFolder", ")", "folder", ")", ".", "appendMessages", "(", "msgs", ",", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "appendMessages", "(", "Message", "[", "]", "messages", ")", "throws", "MessagingException", "{", "appendMessages", "(", "messages", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "appendMessages", "(", "Message", "[", "]", "messages", ",", "boolean", "copy", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "for", "(", "Message", "message", ":", "messages", ")", "{", "if", "(", "!", "(", "message", "instanceof", "MimeMessage", ")", ")", "{", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "String", "uid", "=", "message", ".", "getUid", "(", ")", ";", "if", "(", "uid", "=", "=", "null", ")", "{", "message", ".", "setUid", "(", "\"", "<STR_LIT>", "\"", "+", "UUID", ".", "randomUUID", "(", ")", ".", "toString", "(", ")", ")", ";", "}", "else", "{", "deleteAttachments", "(", "message", ".", "getUid", "(", ")", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Object", "[", "]", "{", "mFolderId", ",", "message", ".", "getUid", "(", ")", "}", ")", ";", "}", "ArrayList", "<", "Part", ">", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "ArrayList", "<", "Part", ">", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "message", ",", "viewables", ",", "attachments", ")", ";", "StringBuffer", "sbHtml", "=", "new", "StringBuffer", "(", ")", ";", "StringBuffer", "sbText", "=", "new", "StringBuffer", "(", ")", ";", "for", "(", "Part", "viewable", ":", "viewables", ")", "{", "try", "{", "String", "text", "=", "MimeUtility", ".", "getTextFromPart", "(", "viewable", ")", ";", "if", "(", "viewable", ".", "getMimeType", "(", ")", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "sbHtml", ".", "append", "(", "text", ")", ";", "}", "else", "{", "sbText", ".", "append", "(", "text", ")", ";", "}", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "try", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "message", ".", "getUid", "(", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "message", ".", "getSubject", "(", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Address", ".", "pack", "(", "message", ".", "getFrom", "(", ")", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "message", ".", "getSentDate", "(", ")", "=", "=", "null", "?", "System", ".", "currentTimeMillis", "(", ")", ":", "message", ".", "getSentDate", "(", ")", ".", "getTime", "(", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "makeFlagsString", "(", "message", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "mFolderId", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Address", ".", "pack", "(", "message", ".", "getRecipients", "(", "RecipientType", ".", "TO", ")", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Address", ".", "pack", "(", "message", ".", "getRecipients", "(", "RecipientType", ".", "CC", ")", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Address", ".", "pack", "(", "message", ".", "getRecipients", "(", "RecipientType", ".", "BCC", ")", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "sbHtml", ".", "length", "(", ")", ">", "0", "?", "sbHtml", ".", "toString", "(", ")", ":", "null", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "sbText", ".", "length", "(", ")", ">", "0", "?", "sbText", ".", "toString", "(", ")", ":", "null", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Address", ".", "pack", "(", "message", ".", "getReplyTo", "(", ")", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "attachments", ".", "size", "(", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "message", ".", "getInternalDate", "(", ")", "=", "=", "null", "?", "System", ".", "currentTimeMillis", "(", ")", ":", "message", ".", "getInternalDate", "(", ")", ".", "getTime", "(", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "(", "MimeMessage", ")", "message", ")", ".", "getMessageId", "(", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "makeFlagNumeric", "(", "message", ",", "Flag", ".", "X_STORE_1", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "makeFlagNumeric", "(", "message", ",", "Flag", ".", "X_STORE_2", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "makeFlagNumeric", "(", "message", ",", "Flag", ".", "X_DOWNLOADED_FULL", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "makeFlagNumeric", "(", "message", ",", "Flag", ".", "X_DOWNLOADED_PARTIAL", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "makeFlagNumeric", "(", "message", ",", "Flag", ".", "DELETED", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "(", "(", "MimeMessage", ")", "message", ")", ".", "getExtendedHeaders", "(", ")", ")", ";", "long", "messageId", "=", "mDb", ".", "insert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "cv", ")", ";", "for", "(", "Part", "attachment", ":", "attachments", ")", "{", "saveAttachment", "(", "messageId", ",", "attachment", ",", "copy", ")", ";", "}", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "updateMessage", "(", "LocalMessage", "message", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "ArrayList", "<", "Part", ">", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "ArrayList", "<", "Part", ">", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "message", ",", "viewables", ",", "attachments", ")", ";", "StringBuffer", "sbHtml", "=", "new", "StringBuffer", "(", ")", ";", "StringBuffer", "sbText", "=", "new", "StringBuffer", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "viewables", ".", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "Part", "viewable", "=", "viewables", ".", "get", "(", "i", ")", ";", "try", "{", "String", "text", "=", "MimeUtility", ".", "getTextFromPart", "(", "viewable", ")", ";", "if", "(", "viewable", ".", "getMimeType", "(", ")", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "sbHtml", ".", "append", "(", "text", ")", ";", "}", "else", "{", "sbText", ".", "append", "(", "text", ")", ";", "}", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "try", "{", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "new", "Object", "[", "]", "{", "message", ".", "getUid", "(", ")", ",", "message", ".", "getSubject", "(", ")", ",", "Address", ".", "pack", "(", "message", ".", "getFrom", "(", ")", ")", ",", "message", ".", "getSentDate", "(", ")", "=", "=", "null", "?", "System", ".", "currentTimeMillis", "(", ")", ":", "message", ".", "getSentDate", "(", ")", ".", "getTime", "(", ")", ",", "makeFlagsString", "(", "message", ")", ",", "mFolderId", ",", "Address", ".", "pack", "(", "message", ".", "getRecipients", "(", "RecipientType", ".", "TO", ")", ")", ",", "Address", ".", "pack", "(", "message", ".", "getRecipients", "(", "RecipientType", ".", "CC", ")", ")", ",", "Address", ".", "pack", "(", "message", ".", "getRecipients", "(", "RecipientType", ".", "BCC", ")", ")", ",", "sbHtml", ".", "length", "(", ")", ">", "0", "?", "sbHtml", ".", "toString", "(", ")", ":", "null", ",", "sbText", ".", "length", "(", ")", ">", "0", "?", "sbText", ".", "toString", "(", ")", ":", "null", ",", "Address", ".", "pack", "(", "message", ".", "getReplyTo", "(", ")", ")", ",", "attachments", ".", "size", "(", ")", ",", "message", ".", "getMessageId", "(", ")", ",", "makeFlagNumeric", "(", "message", ",", "Flag", ".", "X_STORE_1", ")", ",", "makeFlagNumeric", "(", "message", ",", "Flag", ".", "X_STORE_2", ")", ",", "makeFlagNumeric", "(", "message", ",", "Flag", ".", "X_DOWNLOADED_FULL", ")", ",", "makeFlagNumeric", "(", "message", ",", "Flag", ".", "X_DOWNLOADED_PARTIAL", ")", ",", "makeFlagNumeric", "(", "message", ",", "Flag", ".", "DELETED", ")", ",", "message", ".", "getExtendedHeaders", "(", ")", ",", "message", ".", "mId", "}", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "attachments", ".", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "Part", "attachment", "=", "attachments", ".", "get", "(", "i", ")", ";", "saveAttachment", "(", "message", ".", "mId", ",", "attachment", ",", "false", ")", ";", "}", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "saveAttachment", "(", "long", "messageId", ",", "Part", "attachment", ",", "boolean", "saveAsNew", ")", "throws", "IOException", ",", "MessagingException", "{", "long", "attachmentId", "=", "-", "1", ";", "Uri", "contentUri", "=", "null", ";", "int", "size", "=", "-", "1", ";", "File", "tempAttachmentFile", "=", "null", ";", "if", "(", "(", "!", "saveAsNew", ")", "&", "&", "(", "attachment", "instanceof", "LocalAttachmentBodyPart", ")", ")", "{", "attachmentId", "=", "(", "(", "LocalAttachmentBodyPart", ")", "attachment", ")", ".", "getAttachmentId", "(", ")", ";", "}", "if", "(", "attachment", ".", "getBody", "(", ")", "!", "=", "null", ")", "{", "Body", "body", "=", "attachment", ".", "getBody", "(", ")", ";", "if", "(", "body", "instanceof", "LocalAttachmentBody", ")", "{", "contentUri", "=", "(", "(", "LocalAttachmentBody", ")", "body", ")", ".", "getContentUri", "(", ")", ";", "}", "else", "{", "InputStream", "in", "=", "attachment", ".", "getBody", "(", ")", ".", "getInputStream", "(", ")", ";", "tempAttachmentFile", "=", "File", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "mAttachmentsDir", ")", ";", "FileOutputStream", "out", "=", "new", "FileOutputStream", "(", "tempAttachmentFile", ")", ";", "size", "=", "IOUtils", ".", "copy", "(", "in", ",", "out", ")", ";", "in", ".", "close", "(", ")", ";", "out", ".", "close", "(", ")", ";", "}", "}", "if", "(", "size", "=", "=", "-", "1", ")", "{", "String", "disposition", "=", "attachment", ".", "getDisposition", "(", ")", ";", "if", "(", "disposition", "!", "=", "null", ")", "{", "String", "s", "=", "MimeUtility", ".", "getHeaderParameter", "(", "disposition", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "s", "!", "=", "null", ")", "{", "size", "=", "Integer", ".", "parseInt", "(", "s", ")", ";", "}", "}", "}", "if", "(", "size", "=", "=", "-", "1", ")", "{", "size", "=", "0", ";", "}", "String", "storeData", "=", "Utility", ".", "combine", "(", "attachment", ".", "getHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_ATTACHMENT_STORE_DATA", ")", ",", "<CHAR_LIT:U+002C>", ")", ";", "String", "name", "=", "MimeUtility", ".", "getHeaderParameter", "(", "attachment", ".", "getContentType", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "String", "contentId", "=", "attachment", ".", "getContentId", "(", ")", ";", "if", "(", "attachmentId", "=", "=", "-", "1", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "messageId", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "contentUri", "!", "=", "null", "?", "contentUri", ".", "toString", "(", ")", ":", "null", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "storeData", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "size", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "name", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "attachment", ".", "getMimeType", "(", ")", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "contentId", ")", ";", "attachmentId", "=", "mDb", ".", "insert", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "cv", ")", ";", "}", "else", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "contentUri", "!", "=", "null", "?", "contentUri", ".", "toString", "(", ")", ":", "null", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "size", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "contentId", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "messageId", ")", ";", "mDb", ".", "update", "(", "\"", "<STR_LIT>", "\"", ",", "cv", ",", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "attachmentId", ")", "}", ")", ";", "}", "if", "(", "tempAttachmentFile", "!", "=", "null", ")", "{", "File", "attachmentFile", "=", "new", "File", "(", "mAttachmentsDir", ",", "Long", ".", "toString", "(", "attachmentId", ")", ")", ";", "tempAttachmentFile", ".", "renameTo", "(", "attachmentFile", ")", ";", "attachment", ".", "setBody", "(", "new", "LocalAttachmentBody", "(", "contentUri", ",", "mContext", ")", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "contentUri", "!", "=", "null", "?", "contentUri", ".", "toString", "(", ")", ":", "null", ")", ";", "mDb", ".", "update", "(", "\"", "<STR_LIT>", "\"", ",", "cv", ",", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "attachmentId", ")", "}", ")", ";", "}", "if", "(", "attachment", "instanceof", "LocalAttachmentBodyPart", ")", "{", "(", "(", "LocalAttachmentBodyPart", ")", "attachment", ")", ".", "setAttachmentId", "(", "attachmentId", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "changeUid", "(", "LocalMessage", "message", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "message", ".", "getUid", "(", ")", ")", ";", "mDb", ".", "update", "(", "\"", "<STR_LIT>", "\"", ",", "cv", ",", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "message", ".", "mId", ")", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setFlags", "(", "Message", "[", "]", "messages", ",", "Flag", "[", "]", "flags", ",", "boolean", "value", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "for", "(", "Message", "message", ":", "messages", ")", "{", "message", ".", "setFlags", "(", "flags", ",", "value", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "[", "]", "expunge", "(", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "ArrayList", "<", "Message", ">", "expungedMessages", "=", "new", "ArrayList", "<", "Message", ">", "(", ")", ";", "return", "expungedMessages", ".", "toArray", "(", "new", "Message", "[", "]", "{", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "delete", "(", "boolean", "recurse", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_ONLY", ")", ";", "Message", "[", "]", "messages", "=", "getMessages", "(", "null", ")", ";", "for", "(", "Message", "message", ":", "messages", ")", "{", "deleteAttachments", "(", "message", ".", "getUid", "(", ")", ")", ";", "}", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Object", "[", "]", "{", "Long", ".", "toString", "(", "mFolderId", ")", ",", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "o", ")", "{", "if", "(", "o", "instanceof", "LocalFolder", ")", "{", "return", "(", "(", "LocalFolder", ")", "o", ")", ".", "mName", ".", "equals", "(", "mName", ")", ";", "}", "return", "super", ".", "equals", "(", "o", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Flag", "[", "]", "getPermanentFlags", "(", ")", "throws", "MessagingException", "{", "return", "PERMANENT_FLAGS", ";", "}", "</s>"]
["<s>", "private", "void", "deleteAttachments", "(", "String", "uid", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "Cursor", "messagesCursor", "=", "null", ";", "try", "{", "messagesCursor", "=", "mDb", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", "}", ",", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mFolderId", ")", ",", "uid", "}", ",", "null", ",", "null", ",", "null", ")", ";", "while", "(", "messagesCursor", ".", "moveToNext", "(", ")", ")", "{", "long", "messageId", "=", "messagesCursor", ".", "getLong", "(", "0", ")", ";", "Cursor", "attachmentsCursor", "=", "null", ";", "try", "{", "attachmentsCursor", "=", "mDb", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", "}", ",", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "messageId", ")", "}", ",", "null", ",", "null", ",", "null", ")", ";", "while", "(", "attachmentsCursor", ".", "moveToNext", "(", ")", ")", "{", "long", "attachmentId", "=", "attachmentsCursor", ".", "getLong", "(", "0", ")", ";", "try", "{", "File", "file", "=", "new", "File", "(", "mAttachmentsDir", ",", "Long", ".", "toString", "(", "attachmentId", ")", ")", ";", "if", "(", "file", ".", "exists", "(", ")", ")", "{", "file", ".", "delete", "(", ")", ";", "}", "}", "catch", "(", "Exception", "e", ")", "{", "}", "}", "}", "finally", "{", "if", "(", "attachmentsCursor", "!", "=", "null", ")", "{", "attachmentsCursor", ".", "close", "(", ")", ";", "}", "}", "}", "}", "finally", "{", "if", "(", "messagesCursor", "!", "=", "null", ")", "{", "messagesCursor", ".", "close", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "Folder", ".", "PersistentDataCallbacks", "getPersistentCallbacks", "(", ")", "throws", "MessagingException", "{", "open", "(", "OpenMode", ".", "READ_WRITE", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "String", "getPersistentString", "(", "String", "key", ",", "String", "defaultValue", ")", "{", "return", "LocalStore", ".", "this", ".", "getPersistentString", "(", "mFolderId", ",", "key", ",", "defaultValue", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setPersistentString", "(", "String", "key", ",", "String", "value", ")", "{", "LocalStore", ".", "this", ".", "setPersistentString", "(", "mFolderId", ",", "key", ",", "value", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setPersistentStringAndMessageFlags", "(", "String", "key", ",", "String", "value", ",", "Flag", "[", "]", "setFlags", ",", "Flag", "[", "]", "clearFlags", ")", "throws", "MessagingException", "{", "mDb", ".", "beginTransaction", "(", ")", ";", "try", "{", "if", "(", "key", "!", "=", "null", ")", "{", "setPersistentString", "(", "key", ",", "value", ")", ";", "}", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "if", "(", "setFlags", "!", "=", "null", ")", "{", "for", "(", "Flag", "flag", ":", "setFlags", ")", "{", "if", "(", "flag", "=", "=", "Flag", ".", "X_STORE_1", ")", "{", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "X_STORE_2", ")", "{", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "X_DOWNLOADED_FULL", ")", "{", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "X_DOWNLOADED_PARTIAL", ")", "{", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "}", "else", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "flag", ")", ";", "}", "}", "}", "if", "(", "clearFlags", "!", "=", "null", ")", "{", "for", "(", "Flag", "flag", ":", "clearFlags", ")", "{", "if", "(", "flag", "=", "=", "Flag", ".", "X_STORE_1", ")", "{", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "0", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "X_STORE_2", ")", "{", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "0", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "X_DOWNLOADED_FULL", ")", "{", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "0", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "X_DOWNLOADED_PARTIAL", ")", "{", "cv", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "0", ")", ";", "}", "else", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "flag", ")", ";", "}", "}", "}", "mDb", ".", "update", "(", "\"", "<STR_LIT>", "\"", ",", "cv", ",", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mFolderId", ")", "}", ")", ";", "mDb", ".", "setTransactionSuccessful", "(", ")", ";", "}", "finally", "{", "mDb", ".", "endTransaction", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "createMessage", "(", "String", "uid", ")", "throws", "MessagingException", "{", "return", "new", "LocalMessage", "(", "uid", ",", "this", ")", ";", "}", "</s>"]
["<s>", "LocalMessage", "(", "String", "uid", ",", "Folder", "folder", ")", "throws", "MessagingException", "{", "this", ".", "mUid", "=", "uid", ";", "this", ".", "mFolder", "=", "folder", ";", "}", "</s>"]
["<s>", "public", "int", "getAttachmentCount", "(", ")", "{", "return", "mAttachmentCount", ";", "}", "</s>"]
["<s>", "public", "void", "parse", "(", "InputStream", "in", ")", "throws", "IOException", ",", "MessagingException", "{", "super", ".", "parse", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setFlagInternal", "(", "Flag", "flag", ",", "boolean", "set", ")", "throws", "MessagingException", "{", "super", ".", "setFlag", "(", "flag", ",", "set", ")", ";", "}", "</s>"]
["<s>", "public", "long", "getId", "(", ")", "{", "return", "mId", ";", "}", "</s>"]
["<s>", "public", "void", "setFlag", "(", "Flag", "flag", ",", "boolean", "set", ")", "throws", "MessagingException", "{", "if", "(", "flag", "=", "=", "Flag", ".", "DELETED", "&", "&", "set", ")", "{", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "new", "Object", "[", "]", "{", "mId", "}", ")", ";", "(", "(", "LocalFolder", ")", "mFolder", ")", ".", "deleteAttachments", "(", "getUid", "(", ")", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Object", "[", "]", "{", "mId", "}", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "X_DESTROYED", "&", "&", "set", ")", "{", "(", "(", "LocalFolder", ")", "mFolder", ")", ".", "deleteAttachments", "(", "getUid", "(", ")", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", ",", "new", "Object", "[", "]", "{", "mId", "}", ")", ";", "}", "try", "{", "if", "(", "flag", "=", "=", "Flag", ".", "DELETED", "|", "|", "flag", "=", "=", "Flag", ".", "X_DESTROYED", "|", "|", "flag", "=", "=", "Flag", ".", "SEEN", ")", "{", "LocalFolder", "folder", "=", "(", "LocalFolder", ")", "mFolder", ";", "if", "(", "set", "&", "&", "!", "isSet", "(", "Flag", ".", "SEEN", ")", ")", "{", "folder", ".", "setUnreadMessageCount", "(", "folder", ".", "getUnreadMessageCount", "(", ")", "-", "1", ")", ";", "}", "else", "if", "(", "!", "set", "&", "&", "isSet", "(", "Flag", ".", "SEEN", ")", ")", "{", "folder", ".", "setUnreadMessageCount", "(", "folder", ".", "getUnreadMessageCount", "(", ")", "+", "1", ")", ";", "}", "}", "}", "catch", "(", "MessagingException", "me", ")", "{", "Log", ".", "e", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ",", "me", ")", ";", "throw", "new", "RuntimeException", "(", "me", ")", ";", "}", "super", ".", "setFlag", "(", "flag", ",", "set", ")", ";", "mDb", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "new", "Object", "[", "]", "{", "makeFlagsString", "(", "this", ")", ",", "makeFlagNumeric", "(", "this", ",", "Flag", ".", "X_STORE_1", ")", ",", "makeFlagNumeric", "(", "this", ",", "Flag", ".", "X_STORE_2", ")", ",", "makeFlagNumeric", "(", "this", ",", "Flag", ".", "X_DOWNLOADED_FULL", ")", ",", "makeFlagNumeric", "(", "this", ",", "Flag", ".", "X_DOWNLOADED_PARTIAL", ")", ",", "makeFlagNumeric", "(", "this", ",", "Flag", ".", "DELETED", ")", ",", "mId", "}", ")", ";", "}", "</s>"]
["<s>", "String", "makeFlagsString", "(", "Message", "message", ")", "{", "StringBuilder", "sb", "=", "null", ";", "boolean", "nonEmpty", "=", "false", ";", "for", "(", "Flag", "flag", ":", "Flag", ".", "values", "(", ")", ")", "{", "if", "(", "flag", "!", "=", "Flag", ".", "X_STORE_1", "&", "&", "flag", "!", "=", "Flag", ".", "X_STORE_2", "&", "&", "flag", "!", "=", "Flag", ".", "X_DOWNLOADED_FULL", "&", "&", "flag", "!", "=", "Flag", ".", "X_DOWNLOADED_PARTIAL", "&", "&", "flag", "!", "=", "Flag", ".", "DELETED", "&", "&", "message", ".", "isSet", "(", "flag", ")", ")", "{", "if", "(", "sb", "=", "=", "null", ")", "{", "sb", "=", "new", "StringBuilder", "(", ")", ";", "}", "if", "(", "nonEmpty", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:U+002C>", ")", ";", "}", "sb", ".", "append", "(", "flag", ".", "toString", "(", ")", ")", ";", "nonEmpty", "=", "true", ";", "}", "}", "return", "(", "sb", "=", "=", "null", ")", "?", "null", ":", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "int", "makeFlagNumeric", "(", "Message", "message", ",", "Flag", "flag", ")", "{", "return", "message", ".", "isSet", "(", "flag", ")", "?", "1", ":", "0", ";", "}", "</s>"]
["<s>", "public", "LocalAttachmentBodyPart", "(", "Body", "body", ",", "long", "attachmentId", ")", "throws", "MessagingException", "{", "super", "(", "body", ")", ";", "mAttachmentId", "=", "attachmentId", ";", "}", "</s>"]
["<s>", "public", "long", "getAttachmentId", "(", ")", "{", "return", "mAttachmentId", ";", "}", "</s>"]
["<s>", "public", "void", "setAttachmentId", "(", "long", "attachmentId", ")", "{", "mAttachmentId", "=", "attachmentId", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "\"", "\"", "+", "mAttachmentId", ";", "}", "</s>"]
["<s>", "public", "LocalAttachmentBody", "(", "Uri", "uri", ",", "Context", "context", ")", "{", "mContext", "=", "context", ";", "mUri", "=", "uri", ";", "}", "</s>"]
["<s>", "public", "InputStream", "getInputStream", "(", ")", "throws", "MessagingException", "{", "try", "{", "return", "mContext", ".", "getContentResolver", "(", ")", ".", "openInputStream", "(", "mUri", ")", ";", "}", "catch", "(", "FileNotFoundException", "fnfe", ")", "{", "return", "new", "ByteArrayInputStream", "(", "new", "byte", "[", "0", "]", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "ioe", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "writeTo", "(", "OutputStream", "out", ")", "throws", "IOException", ",", "MessagingException", "{", "InputStream", "in", "=", "getInputStream", "(", ")", ";", "Base64OutputStream", "base64Out", "=", "new", "Base64OutputStream", "(", "out", ")", ";", "IOUtils", ".", "copy", "(", "in", ",", "base64Out", ")", ";", "base64Out", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Uri", "getContentUri", "(", ")", "{", "return", "mUri", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Class", "<", "?", "extends", "android", ".", "app", ".", "Activity", ">", "getSettingActivityClass", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "public", "void", "checkClientTrusted", "(", "X509Certificate", "[", "]", "chain", ",", "String", "authType", ")", "{", "logCertificates", "(", "chain", ",", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "void", "checkServerTrusted", "(", "X509Certificate", "[", "]", "chain", ",", "String", "authType", ")", "{", "logCertificates", "(", "chain", ",", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "X509Certificate", "[", "]", "getAcceptedIssuers", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "SecureX509TrustManager", "(", "X509TrustManager", "trustManager", ",", "String", "host", ")", "{", "mTrustManager", "=", "trustManager", ";", "mHost", "=", "host", ";", "}", "</s>"]
["<s>", "public", "void", "checkClientTrusted", "(", "X509Certificate", "[", "]", "chain", ",", "String", "authType", ")", "throws", "CertificateException", "{", "try", "{", "mTrustManager", ".", "checkClientTrusted", "(", "chain", ",", "authType", ")", ";", "}", "catch", "(", "CertificateException", "ce", ")", "{", "logCertificates", "(", "chain", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "throw", "ce", ";", "}", "}", "</s>"]
["<s>", "public", "void", "checkServerTrusted", "(", "X509Certificate", "[", "]", "chain", ",", "String", "authType", ")", "throws", "CertificateException", "{", "try", "{", "mTrustManager", ".", "checkServerTrusted", "(", "chain", ",", "authType", ")", ";", "}", "catch", "(", "CertificateException", "ce", ")", "{", "logCertificates", "(", "chain", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "throw", "ce", ";", "}", "if", "(", "!", "DomainNameChecker", ".", "match", "(", "chain", "[", "0", "]", ",", "mHost", ")", ")", "{", "logCertificates", "(", "chain", ",", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "throw", "new", "CertificateException", "(", "\"", "<STR_LIT>", "\"", "+", "mHost", ")", ";", "}", "}", "</s>"]
["<s>", "public", "X509Certificate", "[", "]", "getAcceptedIssuers", "(", ")", "{", "return", "mTrustManager", ".", "getAcceptedIssuers", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "logCertificates", "(", "X509Certificate", "[", "]", "chain", ",", "String", "caller", ",", "boolean", "verbose", ")", "{", "if", "(", "Email", ".", "DEBUG", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "chain", ".", "length", ";", "+", "+", "i", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "caller", "+", "\"", "<STR_LIT>", "\"", "+", "i", ")", ";", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "chain", "[", "i", "]", ".", "getSubjectDN", "(", ")", ")", ";", "if", "(", "verbose", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "chain", "[", "i", "]", ".", "getIssuerDN", "(", ")", ")", ";", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "chain", "[", "i", "]", ".", "getNotBefore", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "chain", "[", "i", "]", ".", "getNotAfter", "(", ")", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "private", "TrustManagerFactory", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "X509TrustManager", "get", "(", "String", "host", ",", "boolean", "secure", ")", "{", "if", "(", "secure", ")", "{", "return", "new", "SecureX509TrustManager", "(", "SSLParameters", ".", "getDefaultTrustManager", "(", ")", ",", "host", ")", ";", "}", "else", "{", "return", "sUnsecureTrustManager", ";", "}", "}", "</s>"]
["<s>", "public", "static", "Store", "newInstance", "(", "String", "uri", ",", "Context", "context", ",", "PersistentDataCallbacks", "callbacks", ")", "throws", "MessagingException", "{", "return", "new", "ExchangeStore", "(", "uri", ",", "context", ",", "callbacks", ")", ";", "}", "</s>"]
["<s>", "private", "ExchangeStore", "(", "String", "_uri", ",", "Context", "context", ",", "PersistentDataCallbacks", "callbacks", ")", "throws", "MessagingException", "{", "try", "{", "mUri", "=", "new", "URI", "(", "_uri", ")", ";", "}", "catch", "(", "URISyntaxException", "e", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mTransport", "=", "ExchangeTransport", ".", "getInstance", "(", "mUri", ",", "context", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "checkSettings", "(", ")", "throws", "MessagingException", "{", "mTransport", ".", "checkSettings", "(", "mUri", ")", ";", "}", "</s>"]
["<s>", "static", "public", "void", "addSystemAccount", "(", "Context", "context", ",", "Account", "acct", ",", "boolean", "syncContacts", ",", "AccountManagerCallback", "<", "Bundle", ">", "callback", ")", "{", "Bundle", "options", "=", "new", "Bundle", "(", ")", ";", "options", ".", "putString", "(", "EasAuthenticatorService", ".", "OPTIONS_USERNAME", ",", "acct", ".", "mEmailAddress", ")", ";", "options", ".", "putString", "(", "EasAuthenticatorService", ".", "OPTIONS_PASSWORD", ",", "acct", ".", "mHostAuthRecv", ".", "mPassword", ")", ";", "options", ".", "putBoolean", "(", "EasAuthenticatorService", ".", "OPTIONS_CONTACTS_SYNC_ENABLED", ",", "syncContacts", ")", ";", "AccountManager", ".", "get", "(", "context", ")", ".", "addAccount", "(", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ",", "null", ",", "null", ",", "options", ",", "null", ",", "callback", ",", "null", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Folder", "getFolder", "(", "String", "name", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Folder", "[", "]", "getPersonalNamespaces", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Class", "<", "?", "extends", "android", ".", "app", ".", "Activity", ">", "getSettingActivityClass", "(", ")", "{", "return", "com", ".", "android", ".", "email", ".", "activity", ".", "setup", ".", "AccountSetupExchange", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "StoreSynchronizer", "getMessageSynchronizer", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "requireStructurePrefetch", "(", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "requireCopyMessageToSentFolder", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "synchronized", "static", "ExchangeTransport", "getInstance", "(", "URI", "uri", ",", "Context", "context", ")", "throws", "MessagingException", "{", "if", "(", "!", "uri", ".", "getScheme", "(", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", "&", "&", "!", "uri", ".", "getScheme", "(", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", "&", "&", "!", "uri", ".", "getScheme", "(", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "final", "String", "key", "=", "uri", ".", "toString", "(", ")", ";", "ExchangeTransport", "transport", "=", "sUriToInstanceMap", ".", "get", "(", "key", ")", ";", "if", "(", "transport", "=", "=", "null", ")", "{", "transport", "=", "new", "ExchangeTransport", "(", "uri", ",", "context", ")", ";", "sUriToInstanceMap", ".", "put", "(", "key", ",", "transport", ")", ";", "}", "return", "transport", ";", "}", "</s>"]
["<s>", "private", "ExchangeTransport", "(", "URI", "uri", ",", "Context", "context", ")", "throws", "MessagingException", "{", "mContext", "=", "context", ";", "setUri", "(", "uri", ")", ";", "}", "</s>"]
["<s>", "private", "void", "setUri", "(", "final", "URI", "uri", ")", "throws", "MessagingException", "{", "mHost", "=", "uri", ".", "getHost", "(", ")", ";", "if", "(", "mHost", "=", "=", "null", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mDomain", "=", "uri", ".", "getPath", "(", ")", ";", "if", "(", "!", "TextUtils", ".", "isEmpty", "(", "mDomain", ")", ")", "{", "mDomain", "=", "mDomain", ".", "substring", "(", "1", ")", ";", "}", "final", "String", "userInfo", "=", "uri", ".", "getUserInfo", "(", ")", ";", "if", "(", "userInfo", "=", "=", "null", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "final", "String", "[", "]", "uinfo", "=", "userInfo", ".", "split", "(", "\"", "<STR_LIT::>", "\"", ",", "<NUM_LIT:2>", ")", ";", "if", "(", "uinfo", ".", "length", "!", "=", "<NUM_LIT:2>", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mUsername", "=", "uinfo", "[", "0", "]", ";", "mPassword", "=", "uinfo", "[", "1", "]", ";", "}", "</s>"]
["<s>", "public", "void", "checkSettings", "(", "URI", "uri", ")", "throws", "MessagingException", "{", "setUri", "(", "uri", ")", ";", "boolean", "ssl", "=", "uri", ".", "getScheme", "(", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "boolean", "tssl", "=", "uri", ".", "getScheme", "(", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "int", "port", "=", "ssl", "?", "<NUM_LIT>", ":", "<NUM_LIT>", ";", "int", "result", "=", "new", "EmailServiceProxy", "(", "mContext", ",", "SyncManager", ".", "class", ")", ".", "validate", "(", "\"", "<STR_LIT>", "\"", ",", "mHost", ",", "mUsername", ",", "mPassword", ",", "port", ",", "ssl", ",", "tssl", ")", ";", "if", "(", "result", "!", "=", "MessagingException", ".", "NO_ERROR", ")", "{", "if", "(", "result", "=", "=", "MessagingException", ".", "AUTHENTICATION_FAILED", ")", "{", "throw", "new", "AuthenticationFailedException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "throw", "new", "MessagingException", "(", "result", ")", ";", "}", "}", "}", "catch", "(", "RemoteException", "e", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "ImapResponseParser", "(", "InputStream", "in", ")", "{", "if", "(", "DEBUG_LOG_RAW_STREAM", "&", "&", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "in", "=", "new", "LoggingInputStream", "(", "in", ")", ";", "}", "this", ".", "mIn", "=", "new", "PeekableInputStream", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "ImapResponse", "readResponse", "(", ")", "throws", "IOException", "{", "ImapResponse", "response", "=", "new", "ImapResponse", "(", ")", ";", "if", "(", "mActiveLiteral", "!", "=", "null", ")", "{", "while", "(", "mActiveLiteral", ".", "read", "(", ")", "!", "=", "-", "1", ")", ";", "mActiveLiteral", "=", "null", ";", "}", "int", "ch", "=", "mIn", ".", "peek", "(", ")", ";", "if", "(", "ch", "=", "=", "<CHAR_LIT>", ")", "{", "parseUntaggedResponse", "(", ")", ";", "readTokens", "(", "response", ")", ";", "}", "else", "if", "(", "ch", "=", "=", "<CHAR_LIT>", ")", "{", "response", ".", "mCommandContinuationRequested", "=", "parseCommandContinuationRequest", "(", ")", ";", "readTokens", "(", "response", ")", ";", "}", "else", "{", "response", ".", "mTag", "=", "parseTaggedResponse", "(", ")", ";", "readTokens", "(", "response", ")", ";", "}", "if", "(", "Config", ".", "LOGD", ")", "{", "if", "(", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "response", ".", "toString", "(", ")", ")", ";", "}", "}", "return", "response", ";", "}", "</s>"]
["<s>", "private", "void", "readTokens", "(", "ImapResponse", "response", ")", "throws", "IOException", "{", "response", ".", "clear", "(", ")", ";", "Object", "token", ";", "while", "(", "(", "token", "=", "readToken", "(", ")", ")", "!", "=", "null", ")", "{", "if", "(", "response", "!", "=", "null", ")", "{", "response", ".", "add", "(", "token", ")", ";", "}", "if", "(", "mActiveLiteral", "!", "=", "null", ")", "{", "break", ";", "}", "}", "response", ".", "mCompleted", "=", "token", "=", "=", "null", ";", "}", "</s>"]
["<s>", "public", "Object", "readToken", "(", ")", "throws", "IOException", "{", "while", "(", "true", ")", "{", "Object", "token", "=", "parseToken", "(", ")", ";", "if", "(", "token", "=", "=", "null", "|", "|", "!", "token", ".", "equals", "(", "\"", "<STR_LIT:)>", "\"", ")", ")", "{", "return", "token", ";", "}", "}", "}", "</s>"]
["<s>", "private", "Object", "parseToken", "(", ")", "throws", "IOException", "{", "if", "(", "mActiveLiteral", "!", "=", "null", ")", "{", "while", "(", "mActiveLiteral", ".", "read", "(", ")", "!", "=", "-", "1", ")", ";", "mActiveLiteral", "=", "null", ";", "}", "while", "(", "true", ")", "{", "int", "ch", "=", "mIn", ".", "peek", "(", ")", ";", "if", "(", "ch", "=", "=", "<CHAR_LIT:(>", ")", "{", "return", "parseList", "(", ")", ";", "}", "else", "if", "(", "ch", "=", "=", "<CHAR_LIT:)>", ")", "{", "expect", "(", "<CHAR_LIT:)>", ")", ";", "return", "\"", "<STR_LIT:)>", "\"", ";", "}", "else", "if", "(", "ch", "=", "=", "<CHAR_LIT:\">", ")", "{", "return", "parseQuoted", "(", ")", ";", "}", "else", "if", "(", "ch", "=", "=", "<CHAR_LIT>", ")", "{", "mActiveLiteral", "=", "parseLiteral", "(", ")", ";", "return", "mActiveLiteral", ";", "}", "else", "if", "(", "ch", "=", "=", "<CHAR_LIT>", ")", "{", "expect", "(", "<CHAR_LIT>", ")", ";", "}", "else", "if", "(", "ch", "=", "=", "<STR_LIT>", ")", "{", "expect", "(", "<STR_LIT>", ")", ";", "expect", "(", "<STR_LIT:\\n>", ")", ";", "return", "null", ";", "}", "else", "if", "(", "ch", "=", "=", "<STR_LIT:\\n>", ")", "{", "expect", "(", "<STR_LIT:\\n>", ")", ";", "return", "null", ";", "}", "else", "{", "return", "parseAtom", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "boolean", "parseCommandContinuationRequest", "(", ")", "throws", "IOException", "{", "expect", "(", "<CHAR_LIT>", ")", ";", "expect", "(", "<CHAR_LIT>", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "private", "void", "parseUntaggedResponse", "(", ")", "throws", "IOException", "{", "expect", "(", "<CHAR_LIT>", ")", ";", "expect", "(", "<CHAR_LIT>", ")", ";", "}", "</s>"]
["<s>", "private", "String", "parseTaggedResponse", "(", ")", "throws", "IOException", "{", "String", "tag", "=", "readStringUntil", "(", "<CHAR_LIT>", ")", ";", "return", "tag", ";", "}", "</s>"]
["<s>", "private", "ImapList", "parseList", "(", ")", "throws", "IOException", "{", "expect", "(", "<CHAR_LIT:(>", ")", ";", "ImapList", "list", "=", "new", "ImapList", "(", ")", ";", "Object", "token", ";", "while", "(", "true", ")", "{", "token", "=", "parseToken", "(", ")", ";", "if", "(", "token", "=", "=", "null", ")", "{", "break", ";", "}", "else", "if", "(", "token", "instanceof", "InputStream", ")", "{", "list", ".", "add", "(", "token", ")", ";", "break", ";", "}", "else", "if", "(", "token", ".", "equals", "(", "\"", "<STR_LIT:)>", "\"", ")", ")", "{", "break", ";", "}", "else", "{", "list", ".", "add", "(", "token", ")", ";", "}", "}", "return", "list", ";", "}", "</s>"]
["<s>", "private", "String", "parseAtom", "(", ")", "throws", "IOException", "{", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "int", "ch", ";", "while", "(", "true", ")", "{", "ch", "=", "mIn", ".", "peek", "(", ")", ";", "if", "(", "ch", "=", "=", "-", "1", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "ch", "=", "=", "<CHAR_LIT:(>", "|", "|", "ch", "=", "=", "<CHAR_LIT:)>", "|", "|", "ch", "=", "=", "<CHAR_LIT>", "|", "|", "ch", "=", "=", "<CHAR_LIT>", "|", "|", "ch", "=", "=", "<CHAR_LIT>", "|", "|", "ch", "=", "=", "<CHAR_LIT:\">", "|", "|", "(", "ch", ">", "=", "<NUM_LIT:0x00>", "&", "&", "ch", "<", "=", "<NUM_LIT>", ")", "|", "|", "ch", "=", "=", "<NUM_LIT>", ")", "{", "if", "(", "sb", ".", "length", "(", ")", "=", "=", "0", ")", "{", "throw", "new", "IOException", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "(", "int", ")", "ch", ",", "ch", ")", ")", ";", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "else", "{", "sb", ".", "append", "(", "(", "char", ")", "mIn", ".", "read", "(", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "InputStream", "parseLiteral", "(", ")", "throws", "IOException", "{", "expect", "(", "<CHAR_LIT>", ")", ";", "int", "size", "=", "Integer", ".", "parseInt", "(", "readStringUntil", "(", "<CHAR_LIT:}>", ")", ")", ";", "expect", "(", "<STR_LIT>", ")", ";", "expect", "(", "<STR_LIT:\\n>", ")", ";", "FixedLengthInputStream", "fixed", "=", "new", "FixedLengthInputStream", "(", "mIn", ",", "size", ")", ";", "return", "fixed", ";", "}", "</s>"]
["<s>", "private", "String", "parseQuoted", "(", ")", "throws", "IOException", "{", "expect", "(", "<CHAR_LIT:\">", ")", ";", "return", "readStringUntil", "(", "<CHAR_LIT:\">", ")", ";", "}", "</s>"]
["<s>", "private", "String", "readStringUntil", "(", "char", "end", ")", "throws", "IOException", "{", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "int", "ch", ";", "while", "(", "(", "ch", "=", "mIn", ".", "read", "(", ")", ")", "!", "=", "-", "1", ")", "{", "if", "(", "ch", "=", "=", "end", ")", "{", "return", "sb", ".", "toString", "(", ")", ";", "}", "else", "{", "sb", ".", "append", "(", "(", "char", ")", "ch", ")", ";", "}", "}", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "int", "expect", "(", "char", "ch", ")", "throws", "IOException", "{", "int", "d", ";", "if", "(", "(", "d", "=", "mIn", ".", "read", "(", ")", ")", "!", "=", "ch", ")", "{", "if", "(", "d", "=", "=", "-", "1", "&", "&", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "throw", "new", "IOException", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "(", "int", ")", "ch", ",", "ch", ",", "d", ",", "(", "char", ")", "d", ")", ")", ";", "}", "return", "d", ";", "}", "</s>"]
["<s>", "public", "ImapList", "getList", "(", "int", "index", ")", "{", "return", "(", "ImapList", ")", "get", "(", "index", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getString", "(", "int", "index", ")", "{", "return", "(", "String", ")", "get", "(", "index", ")", ";", "}", "</s>"]
["<s>", "public", "InputStream", "getLiteral", "(", "int", "index", ")", "{", "return", "(", "InputStream", ")", "get", "(", "index", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getNumber", "(", "int", "index", ")", "{", "return", "Integer", ".", "parseInt", "(", "getString", "(", "index", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Date", "getDate", "(", "int", "index", ")", "throws", "MessagingException", "{", "try", "{", "return", "mDateTimeFormat", ".", "parse", "(", "getString", "(", "index", ")", ")", ";", "}", "catch", "(", "ParseException", "pe", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "pe", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Object", "getKeyedValue", "(", "Object", "key", ")", "{", "for", "(", "int", "i", "=", "0", ",", "count", "=", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "if", "(", "get", "(", "i", ")", ".", "equals", "(", "key", ")", ")", "{", "return", "get", "(", "i", "+", "1", ")", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "ImapList", "getKeyedList", "(", "Object", "key", ")", "{", "return", "(", "ImapList", ")", "getKeyedValue", "(", "key", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getKeyedString", "(", "Object", "key", ")", "{", "return", "(", "String", ")", "getKeyedValue", "(", "key", ")", ";", "}", "</s>"]
["<s>", "public", "InputStream", "getKeyedLiteral", "(", "Object", "key", ")", "{", "return", "(", "InputStream", ")", "getKeyedValue", "(", "key", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getKeyedNumber", "(", "Object", "key", ")", "{", "return", "Integer", ".", "parseInt", "(", "getKeyedString", "(", "key", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Date", "getKeyedDate", "(", "Object", "key", ")", "throws", "MessagingException", "{", "try", "{", "String", "value", "=", "getKeyedString", "(", "key", ")", ";", "if", "(", "value", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "mDateTimeFormat", ".", "parse", "(", "value", ")", ";", "}", "catch", "(", "ParseException", "pe", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "pe", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "completed", "(", ")", "{", "return", "mCompleted", ";", "}", "</s>"]
["<s>", "public", "void", "nailDown", "(", ")", "throws", "IOException", "{", "int", "last", "=", "size", "(", ")", "-", "1", ";", "if", "(", "last", ">", "=", "0", ")", "{", "Object", "o", "=", "get", "(", "last", ")", ";", "if", "(", "o", "instanceof", "FixedLengthInputStream", ")", "{", "FixedLengthInputStream", "is", "=", "(", "FixedLengthInputStream", ")", "o", ";", "byte", "[", "]", "buffer", "=", "new", "byte", "[", "is", ".", "available", "(", ")", "]", ";", "is", ".", "read", "(", "buffer", ")", ";", "set", "(", "last", ",", "(", "Object", ")", "new", "String", "(", "buffer", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "appendAll", "(", "ImapResponse", "other", ")", "{", "addAll", "(", "other", ")", ";", "mCompleted", "=", "other", ".", "mCompleted", ";", "}", "</s>"]
["<s>", "public", "boolean", "more", "(", ")", "throws", "IOException", "{", "if", "(", "mCompleted", ")", "{", "return", "false", ";", "}", "readTokens", "(", "this", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "public", "String", "getAlertText", "(", ")", "{", "if", "(", "size", "(", ")", ">", "1", "&", "&", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "getString", "(", "1", ")", ")", ")", "{", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "for", "(", "int", "i", "=", "<NUM_LIT:2>", ",", "count", "=", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "sb", ".", "append", "(", "get", "(", "i", ")", ".", "toString", "(", ")", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT>", ")", ";", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "else", "{", "return", "null", ";", "}", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "return", "\"", "<STR_LIT:#>", "\"", "+", "mTag", "+", "\"", "<STR_LIT>", "\"", "+", "super", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Store", "newInstance", "(", "String", "uri", ",", "Context", "context", ",", "PersistentDataCallbacks", "callbacks", ")", "throws", "MessagingException", "{", "return", "new", "ImapStore", "(", "uri", ")", ";", "}", "</s>"]
["<s>", "private", "ImapStore", "(", "String", "uriString", ")", "throws", "MessagingException", "{", "URI", "uri", ";", "try", "{", "uri", "=", "new", "URI", "(", "uriString", ")", ";", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "use", ")", ";", "}", "String", "scheme", "=", "uri", ".", "getScheme", "(", ")", ";", "if", "(", "scheme", "=", "=", "null", "|", "|", "!", "scheme", ".", "startsWith", "(", "STORE_SCHEME_IMAP", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "int", "connectionSecurity", "=", "Transport", ".", "CONNECTION_SECURITY_NONE", ";", "int", "defaultPort", "=", "<NUM_LIT>", ";", "if", "(", "scheme", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "connectionSecurity", "=", "Transport", ".", "CONNECTION_SECURITY_SSL", ";", "defaultPort", "=", "<NUM_LIT>", ";", "}", "else", "if", "(", "scheme", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "connectionSecurity", "=", "Transport", ".", "CONNECTION_SECURITY_TLS", ";", "}", "boolean", "trustCertificates", "=", "scheme", ".", "contains", "(", "STORE_SECURITY_TRUST_CERTIFICATES", ")", ";", "mRootTransport", "=", "new", "MailTransport", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mRootTransport", ".", "setUri", "(", "uri", ",", "defaultPort", ")", ";", "mRootTransport", ".", "setSecurity", "(", "connectionSecurity", ",", "trustCertificates", ")", ";", "String", "[", "]", "userInfoParts", "=", "mRootTransport", ".", "getUserInfoParts", "(", ")", ";", "if", "(", "userInfoParts", "!", "=", "null", ")", "{", "mUsername", "=", "userInfoParts", "[", "0", "]", ";", "if", "(", "userInfoParts", ".", "length", ">", "1", ")", "{", "mPassword", "=", "userInfoParts", "[", "1", "]", ";", "mLoginPhrase", "=", "\"", "<STR_LIT>", "\"", "+", "mUsername", "+", "\"", "\"", "+", "Utility", ".", "imapQuoted", "(", "mPassword", ")", ";", "}", "}", "if", "(", "(", "uri", ".", "getPath", "(", ")", "!", "=", "null", ")", "&", "&", "(", "uri", ".", "getPath", "(", ")", ".", "length", "(", ")", ">", "0", ")", ")", "{", "mPathPrefix", "=", "uri", ".", "getPath", "(", ")", ".", "substring", "(", "1", ")", ";", "}", "mModifiedUtf7Charset", "=", "new", "CharsetProvider", "(", ")", ".", "charsetForName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "void", "setTransport", "(", "Transport", "testTransport", ")", "{", "mRootTransport", "=", "testTransport", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Folder", "getFolder", "(", "String", "name", ")", "throws", "MessagingException", "{", "ImapFolder", "folder", ";", "synchronized", "(", "mFolderCache", ")", "{", "folder", "=", "mFolderCache", ".", "get", "(", "name", ")", ";", "if", "(", "folder", "=", "=", "null", ")", "{", "folder", "=", "new", "ImapFolder", "(", "name", ")", ";", "mFolderCache", ".", "put", "(", "name", ",", "folder", ")", ";", "}", "}", "return", "folder", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Folder", "[", "]", "getPersonalNamespaces", "(", ")", "throws", "MessagingException", "{", "ImapConnection", "connection", "=", "getConnection", "(", ")", ";", "try", "{", "ArrayList", "<", "Folder", ">", "folders", "=", "new", "ArrayList", "<", "Folder", ">", "(", ")", ";", "List", "<", "ImapResponse", ">", "responses", "=", "connection", ".", "executeSimpleCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "mPathPrefix", "=", "=", "null", "?", "\"", "\"", ":", "mPathPrefix", ")", ")", ";", "for", "(", "ImapResponse", "response", ":", "responses", ")", "{", "if", "(", "response", ".", "get", "(", "0", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "boolean", "includeFolder", "=", "true", ";", "String", "folder", "=", "decodeFolderName", "(", "response", ".", "getString", "(", "<NUM_LIT:3>", ")", ")", ";", "if", "(", "folder", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "continue", ";", "}", "ImapList", "attributes", "=", "response", ".", "getList", "(", "1", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "attributes", ".", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "String", "attribute", "=", "attributes", ".", "getString", "(", "i", ")", ";", "if", "(", "attribute", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", "{", "includeFolder", "=", "false", ";", "}", "}", "if", "(", "includeFolder", ")", "{", "folders", ".", "add", "(", "getFolder", "(", "folder", ")", ")", ";", "}", "}", "}", "folders", ".", "add", "(", "getFolder", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "return", "folders", ".", "toArray", "(", "new", "Folder", "[", "]", "{", "}", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "connection", ".", "close", "(", ")", ";", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "ioe", ")", ";", "}", "finally", "{", "releaseConnection", "(", "connection", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "checkSettings", "(", ")", "throws", "MessagingException", "{", "try", "{", "ImapConnection", "connection", "=", "new", "ImapConnection", "(", ")", ";", "connection", ".", "open", "(", ")", ";", "connection", ".", "close", "(", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "new", "MessagingException", "(", "MessagingException", ".", "IOERROR", ",", "ioe", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "ImapConnection", "getConnection", "(", ")", "throws", "MessagingException", "{", "synchronized", "(", "mConnections", ")", "{", "ImapConnection", "connection", "=", "null", ";", "while", "(", "(", "connection", "=", "mConnections", ".", "poll", "(", ")", ")", "!", "=", "null", ")", "{", "try", "{", "connection", ".", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "break", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "connection", ".", "close", "(", ")", ";", "}", "}", "if", "(", "connection", "=", "=", "null", ")", "{", "connection", "=", "new", "ImapConnection", "(", ")", ";", "}", "return", "connection", ";", "}", "}", "</s>"]
["<s>", "private", "void", "releaseConnection", "(", "ImapConnection", "connection", ")", "{", "mConnections", ".", "offer", "(", "connection", ")", ";", "}", "</s>"]
["<s>", "private", "String", "encodeFolderName", "(", "String", "name", ")", "{", "try", "{", "ByteBuffer", "bb", "=", "mModifiedUtf7Charset", ".", "encode", "(", "name", ")", ";", "byte", "[", "]", "b", "=", "new", "byte", "[", "bb", ".", "limit", "(", ")", "]", ";", "bb", ".", "get", "(", "b", ")", ";", "return", "new", "String", "(", "b", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "UnsupportedEncodingException", "uee", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", "+", "name", ",", "uee", ")", ";", "}", "}", "</s>"]
["<s>", "private", "String", "decodeFolderName", "(", "String", "name", ")", "{", "try", "{", "byte", "[", "]", "encoded", "=", "name", ".", "getBytes", "(", "\"", "<STR_LIT>", "\"", ")", ";", "CharBuffer", "cb", "=", "mModifiedUtf7Charset", ".", "decode", "(", "ByteBuffer", ".", "wrap", "(", "encoded", ")", ")", ";", "return", "cb", ".", "toString", "(", ")", ";", "}", "catch", "(", "UnsupportedEncodingException", "uee", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", "+", "name", ",", "uee", ")", ";", "}", "}", "</s>"]
["<s>", "public", "ImapFolder", "(", "String", "name", ")", "{", "this", ".", "mName", "=", "name", ";", "}", "</s>"]
["<s>", "public", "void", "open", "(", "OpenMode", "mode", ",", "PersistentDataCallbacks", "callbacks", ")", "throws", "MessagingException", "{", "if", "(", "isOpen", "(", ")", "&", "&", "mMode", "=", "=", "mode", ")", "{", "try", "{", "mConnection", ".", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "ioExceptionHandler", "(", "mConnection", ",", "ioe", ")", ";", "}", "}", "synchronized", "(", "this", ")", "{", "mConnection", "=", "getConnection", "(", ")", ";", "}", "try", "{", "List", "<", "ImapResponse", ">", "responses", "=", "mConnection", ".", "executeSimpleCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "\"", ",", "encodeFolderName", "(", "mName", ")", ")", ")", ";", "mMode", "=", "OpenMode", ".", "READ_WRITE", ";", "for", "(", "ImapResponse", "response", ":", "responses", ")", "{", "if", "(", "response", ".", "mTag", "=", "=", "null", "&", "&", "response", ".", "get", "(", "1", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "mMessageCount", "=", "response", ".", "getNumber", "(", "0", ")", ";", "}", "else", "if", "(", "response", ".", "mTag", "!", "=", "null", "&", "&", "response", ".", "size", "(", ")", ">", "=", "<NUM_LIT:2>", ")", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "response", ".", "getString", "(", "1", ")", ")", ")", "{", "mMode", "=", "OpenMode", ".", "READ_ONLY", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "response", ".", "getString", "(", "1", ")", ")", ")", "{", "mMode", "=", "OpenMode", ".", "READ_WRITE", ";", "}", "}", "}", "if", "(", "mMessageCount", "=", "=", "-", "1", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mExists", "=", "true", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "ioExceptionHandler", "(", "mConnection", ",", "ioe", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "isOpen", "(", ")", "{", "return", "mConnection", "!", "=", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "OpenMode", "getMode", "(", ")", "throws", "MessagingException", "{", "return", "mMode", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", "boolean", "expunge", ")", "{", "if", "(", "!", "isOpen", "(", ")", ")", "{", "return", ";", "}", "mMessageCount", "=", "-", "1", ";", "synchronized", "(", "this", ")", "{", "releaseConnection", "(", "mConnection", ")", ";", "mConnection", "=", "null", ";", "}", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "mName", ";", "}", "</s>"]
["<s>", "public", "boolean", "exists", "(", ")", "throws", "MessagingException", "{", "if", "(", "mExists", ")", "{", "return", "true", ";", "}", "ImapConnection", "connection", "=", "null", ";", "synchronized", "(", "this", ")", "{", "if", "(", "mConnection", "=", "=", "null", ")", "{", "connection", "=", "getConnection", "(", ")", ";", "}", "else", "{", "connection", "=", "mConnection", ";", "}", "}", "try", "{", "connection", ".", "executeSimpleCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "encodeFolderName", "(", "mName", ")", ")", ")", ";", "mExists", "=", "true", ";", "return", "true", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "return", "false", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "ioExceptionHandler", "(", "connection", ",", "ioe", ")", ";", "}", "finally", "{", "if", "(", "mConnection", "=", "=", "null", ")", "{", "releaseConnection", "(", "connection", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "boolean", "canCreate", "(", "FolderType", "type", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "public", "boolean", "create", "(", "FolderType", "type", ")", "throws", "MessagingException", "{", "ImapConnection", "connection", "=", "null", ";", "synchronized", "(", "this", ")", "{", "if", "(", "mConnection", "=", "=", "null", ")", "{", "connection", "=", "getConnection", "(", ")", ";", "}", "else", "{", "connection", "=", "mConnection", ";", "}", "}", "try", "{", "connection", ".", "executeSimpleCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "\"", ",", "encodeFolderName", "(", "mName", ")", ")", ")", ";", "return", "true", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "return", "false", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "ioExceptionHandler", "(", "mConnection", ",", "ioe", ")", ";", "}", "finally", "{", "if", "(", "mConnection", "=", "=", "null", ")", "{", "releaseConnection", "(", "connection", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "copyMessages", "(", "Message", "[", "]", "messages", ",", "Folder", "folder", ",", "MessageUpdateCallbacks", "callbacks", ")", "throws", "MessagingException", "{", "checkOpen", "(", ")", ";", "String", "[", "]", "uids", "=", "new", "String", "[", "messages", ".", "length", "]", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "messages", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "uids", "[", "i", "]", "=", "messages", "[", "i", "]", ".", "getUid", "(", ")", ";", "}", "try", "{", "mConnection", ".", "executeSimpleCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "\"", ",", "Utility", ".", "combine", "(", "uids", ",", "<CHAR_LIT:U+002C>", ")", ",", "encodeFolderName", "(", "folder", ".", "getName", "(", ")", ")", ")", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "ioExceptionHandler", "(", "mConnection", ",", "ioe", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getMessageCount", "(", ")", "{", "return", "mMessageCount", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getUnreadMessageCount", "(", ")", "throws", "MessagingException", "{", "checkOpen", "(", ")", ";", "try", "{", "int", "unreadMessageCount", "=", "0", ";", "List", "<", "ImapResponse", ">", "responses", "=", "mConnection", ".", "executeSimpleCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "encodeFolderName", "(", "mName", ")", ")", ")", ";", "for", "(", "ImapResponse", "response", ":", "responses", ")", "{", "if", "(", "response", ".", "mTag", "=", "=", "null", "&", "&", "response", ".", "get", "(", "0", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "ImapList", "status", "=", "response", ".", "getList", "(", "<NUM_LIT:2>", ")", ";", "unreadMessageCount", "=", "status", ".", "getKeyedNumber", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "return", "unreadMessageCount", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "ioExceptionHandler", "(", "mConnection", ",", "ioe", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "delete", "(", "boolean", "recurse", ")", "throws", "MessagingException", "{", "throw", "new", "Error", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "getMessage", "(", "String", "uid", ")", "throws", "MessagingException", "{", "checkOpen", "(", ")", ";", "try", "{", "try", "{", "List", "<", "ImapResponse", ">", "responses", "=", "mConnection", ".", "executeSimpleCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "uid", ")", ")", ";", "for", "(", "ImapResponse", "response", ":", "responses", ")", "{", "if", "(", "response", ".", "mTag", "=", "=", "null", "&", "&", "response", ".", "get", "(", "0", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "for", "(", "int", "i", "=", "1", ",", "count", "=", "response", ".", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "if", "(", "uid", ".", "equals", "(", "response", ".", "get", "(", "i", ")", ")", ")", "{", "return", "new", "ImapMessage", "(", "uid", ",", "this", ")", ";", "}", "}", "}", "}", "}", "catch", "(", "MessagingException", "me", ")", "{", "return", "null", ";", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "ioExceptionHandler", "(", "mConnection", ",", "ioe", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "[", "]", "getMessages", "(", "int", "start", ",", "int", "end", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "if", "(", "start", "<", "1", "|", "|", "end", "<", "1", "|", "|", "end", "<", "start", ")", "{", "throw", "new", "MessagingException", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "start", ",", "end", ")", ")", ";", "}", "checkOpen", "(", ")", ";", "ArrayList", "<", "Message", ">", "messages", "=", "new", "ArrayList", "<", "Message", ">", "(", ")", ";", "try", "{", "ArrayList", "<", "String", ">", "uids", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "List", "<", "ImapResponse", ">", "responses", "=", "mConnection", ".", "executeSimpleCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "start", ",", "end", ")", ")", ";", "for", "(", "ImapResponse", "response", ":", "responses", ")", "{", "if", "(", "response", ".", "get", "(", "0", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "for", "(", "int", "i", "=", "1", ",", "count", "=", "response", ".", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "uids", ".", "add", "(", "response", ".", "getString", "(", "i", ")", ")", ";", "}", "}", "}", "for", "(", "int", "i", "=", "0", ",", "count", "=", "uids", ".", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageStarted", "(", "uids", ".", "get", "(", "i", ")", ",", "i", ",", "count", ")", ";", "}", "ImapMessage", "message", "=", "new", "ImapMessage", "(", "uids", ".", "get", "(", "i", ")", ",", "this", ")", ";", "messages", ".", "add", "(", "message", ")", ";", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageFinished", "(", "message", ",", "i", ",", "count", ")", ";", "}", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "ioExceptionHandler", "(", "mConnection", ",", "ioe", ")", ";", "}", "return", "messages", ".", "toArray", "(", "new", "Message", "[", "]", "{", "}", ")", ";", "}", "</s>"]
["<s>", "public", "Message", "[", "]", "getMessages", "(", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "return", "getMessages", "(", "null", ",", "listener", ")", ";", "}", "</s>"]
["<s>", "public", "Message", "[", "]", "getMessages", "(", "String", "[", "]", "uids", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "checkOpen", "(", ")", ";", "ArrayList", "<", "Message", ">", "messages", "=", "new", "ArrayList", "<", "Message", ">", "(", ")", ";", "try", "{", "if", "(", "uids", "=", "=", "null", ")", "{", "List", "<", "ImapResponse", ">", "responses", "=", "mConnection", ".", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ArrayList", "<", "String", ">", "tempUids", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "for", "(", "ImapResponse", "response", ":", "responses", ")", "{", "if", "(", "response", ".", "get", "(", "0", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "for", "(", "int", "i", "=", "1", ",", "count", "=", "response", ".", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "tempUids", ".", "add", "(", "response", ".", "getString", "(", "i", ")", ")", ";", "}", "}", "}", "uids", "=", "tempUids", ".", "toArray", "(", "new", "String", "[", "]", "{", "}", ")", ";", "}", "for", "(", "int", "i", "=", "0", ",", "count", "=", "uids", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageStarted", "(", "uids", "[", "i", "]", ",", "i", ",", "count", ")", ";", "}", "ImapMessage", "message", "=", "new", "ImapMessage", "(", "uids", "[", "i", "]", ",", "this", ")", ";", "messages", ".", "add", "(", "message", ")", ";", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageFinished", "(", "message", ",", "i", ",", "count", ")", ";", "}", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "ioExceptionHandler", "(", "mConnection", ",", "ioe", ")", ";", "}", "return", "messages", ".", "toArray", "(", "new", "Message", "[", "]", "{", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "fetch", "(", "Message", "[", "]", "messages", ",", "FetchProfile", "fp", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "if", "(", "messages", "=", "=", "null", "|", "|", "messages", ".", "length", "=", "=", "0", ")", "{", "return", ";", "}", "checkOpen", "(", ")", ";", "String", "[", "]", "uids", "=", "new", "String", "[", "messages", ".", "length", "]", ";", "HashMap", "<", "String", ",", "Message", ">", "messageMap", "=", "new", "HashMap", "<", "String", ",", "Message", ">", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "messages", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "uids", "[", "i", "]", "=", "messages", "[", "i", "]", ".", "getUid", "(", ")", ";", "messageMap", ".", "put", "(", "uids", "[", "i", "]", ",", "messages", "[", "i", "]", ")", ";", "}", "LinkedHashSet", "<", "String", ">", "fetchFields", "=", "new", "LinkedHashSet", "<", "String", ">", "(", ")", ";", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "FLAGS", ")", ")", "{", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ")", "{", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "STRUCTURE", ")", ")", "{", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "BODY_SANE", ")", ")", "{", "fetchFields", ".", "add", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "FETCH_BODY_SANE_SUGGESTED_SIZE", ")", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ")", "{", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "for", "(", "Object", "o", ":", "fp", ")", "{", "if", "(", "o", "instanceof", "Part", ")", "{", "Part", "part", "=", "(", "Part", ")", "o", ";", "String", "[", "]", "partIds", "=", "part", ".", "getHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_ATTACHMENT_STORE_DATA", ")", ";", "if", "(", "partIds", "!", "=", "null", ")", "{", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", "+", "partIds", "[", "0", "]", "+", "\"", "<STR_LIT:]>", "\"", ")", ";", "}", "}", "}", "try", "{", "String", "tag", "=", "mConnection", ".", "sendCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "Utility", ".", "combine", "(", "uids", ",", "<CHAR_LIT:U+002C>", ")", ",", "Utility", ".", "combine", "(", "fetchFields", ".", "toArray", "(", "new", "String", "[", "fetchFields", ".", "size", "(", ")", "]", ")", ",", "<CHAR_LIT>", ")", ")", ",", "false", ")", ";", "ImapResponse", "response", ";", "int", "messageNumber", "=", "0", ";", "do", "{", "response", "=", "mConnection", ".", "readResponse", "(", ")", ";", "if", "(", "response", ".", "mTag", "=", "=", "null", "&", "&", "response", ".", "get", "(", "1", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "ImapList", "fetchList", "=", "(", "ImapList", ")", "response", ".", "getKeyedValue", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "uid", "=", "fetchList", ".", "getKeyedString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Message", "message", "=", "messageMap", ".", "get", "(", "uid", ")", ";", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageStarted", "(", "uid", ",", "messageNumber", "+", "+", ",", "messageMap", ".", "size", "(", ")", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "FLAGS", ")", ")", "{", "ImapList", "flags", "=", "fetchList", ".", "getKeyedList", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ImapMessage", "imapMessage", "=", "(", "ImapMessage", ")", "message", ";", "if", "(", "flags", "!", "=", "null", ")", "{", "for", "(", "int", "i", "=", "0", ",", "count", "=", "flags", ".", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "String", "flag", "=", "flags", ".", "getString", "(", "i", ")", ";", "if", "(", "flag", ".", "equals", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", "{", "imapMessage", ".", "setFlagInternal", "(", "Flag", ".", "DELETED", ",", "true", ")", ";", "}", "else", "if", "(", "flag", ".", "equals", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", "{", "imapMessage", ".", "setFlagInternal", "(", "Flag", ".", "ANSWERED", ",", "true", ")", ";", "}", "else", "if", "(", "flag", ".", "equals", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", "{", "imapMessage", ".", "setFlagInternal", "(", "Flag", ".", "SEEN", ",", "true", ")", ";", "}", "else", "if", "(", "flag", ".", "equals", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", "{", "imapMessage", ".", "setFlagInternal", "(", "Flag", ".", "FLAGGED", ",", "true", ")", ";", "}", "}", "}", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ")", "{", "Date", "internalDate", "=", "fetchList", ".", "getKeyedDate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "int", "size", "=", "fetchList", ".", "getKeyedNumber", "(", "\"", "<STR_LIT>", "\"", ")", ";", "InputStream", "headerStream", "=", "fetchList", ".", "getLiteral", "(", "fetchList", ".", "size", "(", ")", "-", "1", ")", ";", "ImapMessage", "imapMessage", "=", "(", "ImapMessage", ")", "message", ";", "message", ".", "setInternalDate", "(", "internalDate", ")", ";", "imapMessage", ".", "setSize", "(", "size", ")", ";", "imapMessage", ".", "parse", "(", "headerStream", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "STRUCTURE", ")", ")", "{", "ImapList", "bs", "=", "fetchList", ".", "getKeyedList", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "bs", "!", "=", "null", ")", "{", "try", "{", "parseBodyStructure", "(", "bs", ",", "message", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "e", ")", "{", "if", "(", "Email", ".", "LOGD", ")", "{", "Log", ".", "v", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "message", ".", "setBody", "(", "null", ")", ";", "}", "}", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ")", "{", "InputStream", "bodyStream", "=", "fetchList", ".", "getLiteral", "(", "fetchList", ".", "size", "(", ")", "-", "1", ")", ";", "ImapMessage", "imapMessage", "=", "(", "ImapMessage", ")", "message", ";", "imapMessage", ".", "parse", "(", "bodyStream", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "BODY_SANE", ")", ")", "{", "InputStream", "bodyStream", "=", "fetchList", ".", "getLiteral", "(", "fetchList", ".", "size", "(", ")", "-", "1", ")", ";", "ImapMessage", "imapMessage", "=", "(", "ImapMessage", ")", "message", ";", "imapMessage", ".", "parse", "(", "bodyStream", ")", ";", "}", "for", "(", "Object", "o", ":", "fp", ")", "{", "if", "(", "o", "instanceof", "Part", ")", "{", "Part", "part", "=", "(", "Part", ")", "o", ";", "if", "(", "part", ".", "getSize", "(", ")", ">", "0", ")", "{", "InputStream", "bodyStream", "=", "fetchList", ".", "getLiteral", "(", "fetchList", ".", "size", "(", ")", "-", "1", ")", ";", "String", "contentType", "=", "part", ".", "getContentType", "(", ")", ";", "String", "contentTransferEncoding", "=", "part", ".", "getHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TRANSFER_ENCODING", ")", "[", "0", "]", ";", "part", ".", "setBody", "(", "MimeUtility", ".", "decodeBody", "(", "bodyStream", ",", "contentTransferEncoding", ")", ")", ";", "}", "}", "}", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageFinished", "(", "message", ",", "messageNumber", ",", "messageMap", ".", "size", "(", ")", ")", ";", "}", "}", "while", "(", "response", ".", "more", "(", ")", ")", ";", "}", "while", "(", "response", ".", "mTag", "=", "=", "null", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "ioExceptionHandler", "(", "mConnection", ",", "ioe", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "Flag", "[", "]", "getPermanentFlags", "(", ")", "throws", "MessagingException", "{", "return", "PERMANENT_FLAGS", ";", "}", "</s>"]
["<s>", "private", "void", "handleUntaggedResponses", "(", "List", "<", "ImapResponse", ">", "responses", ")", "{", "for", "(", "ImapResponse", "response", ":", "responses", ")", "{", "handleUntaggedResponse", "(", "response", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "handleUntaggedResponse", "(", "ImapResponse", "response", ")", "{", "if", "(", "response", ".", "mTag", "=", "=", "null", "&", "&", "response", ".", "get", "(", "1", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "mMessageCount", "=", "response", ".", "getNumber", "(", "0", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "parseBodyStructure", "(", "ImapList", "bs", ",", "Part", "part", ",", "String", "id", ")", "throws", "MessagingException", "{", "if", "(", "bs", ".", "get", "(", "0", ")", "instanceof", "ImapList", ")", "{", "MimeMultipart", "mp", "=", "new", "MimeMultipart", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "bs", ".", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "if", "(", "bs", ".", "get", "(", "i", ")", "instanceof", "ImapList", ")", "{", "ImapBodyPart", "bp", "=", "new", "ImapBodyPart", "(", ")", ";", "if", "(", "id", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "parseBodyStructure", "(", "bs", ".", "getList", "(", "i", ")", ",", "bp", ",", "Integer", ".", "toString", "(", "i", "+", "1", ")", ")", ";", "}", "else", "{", "parseBodyStructure", "(", "bs", ".", "getList", "(", "i", ")", ",", "bp", ",", "id", "+", "\"", "<STR_LIT:.>", "\"", "+", "(", "i", "+", "1", ")", ")", ";", "}", "mp", ".", "addBodyPart", "(", "bp", ")", ";", "}", "else", "{", "String", "subType", "=", "bs", ".", "getString", "(", "i", ")", ";", "mp", ".", "setSubType", "(", "subType", ".", "toLowerCase", "(", ")", ")", ";", "break", ";", "}", "}", "part", ".", "setBody", "(", "mp", ")", ";", "}", "else", "{", "String", "type", "=", "bs", ".", "getString", "(", "0", ")", ";", "String", "subType", "=", "bs", ".", "getString", "(", "1", ")", ";", "String", "mimeType", "=", "(", "type", "+", "\"", "<STR_LIT:/>", "\"", "+", "subType", ")", ".", "toLowerCase", "(", ")", ";", "ImapList", "bodyParams", "=", "null", ";", "if", "(", "bs", ".", "get", "(", "<NUM_LIT:2>", ")", "instanceof", "ImapList", ")", "{", "bodyParams", "=", "bs", ".", "getList", "(", "<NUM_LIT:2>", ")", ";", "}", "String", "cid", "=", "bs", ".", "getString", "(", "<NUM_LIT:3>", ")", ";", "String", "encoding", "=", "bs", ".", "getString", "(", "<NUM_LIT:5>", ")", ";", "int", "size", "=", "bs", ".", "getNumber", "(", "<NUM_LIT:6>", ")", ";", "if", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "mimeType", ",", "\"", "<STR_LIT>", "\"", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "String", "contentType", "=", "String", ".", "format", "(", "\"", "<STR_LIT:%s>", "\"", ",", "mimeType", ")", ";", "if", "(", "bodyParams", "!", "=", "null", ")", "{", "for", "(", "int", "i", "=", "0", ",", "count", "=", "bodyParams", ".", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "=", "<NUM_LIT:2>", ")", "{", "contentType", "+", "=", "String", ".", "format", "(", "\"", "<STR_LIT:;>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "\"", ",", "bodyParams", ".", "getString", "(", "i", ")", ",", "bodyParams", ".", "getString", "(", "i", "+", "1", ")", ")", ";", "}", "}", "part", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TYPE", ",", "contentType", ")", ";", "ImapList", "bodyDisposition", "=", "null", ";", "if", "(", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "type", ")", ")", "&", "&", "(", "bs", ".", "size", "(", ")", ">", "<NUM_LIT:8>", ")", "&", "&", "(", "bs", ".", "get", "(", "<NUM_LIT:9>", ")", "instanceof", "ImapList", ")", ")", "{", "bodyDisposition", "=", "bs", ".", "getList", "(", "<NUM_LIT:9>", ")", ";", "}", "else", "if", "(", "!", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "type", ")", ")", "&", "&", "(", "bs", ".", "size", "(", ")", ">", "<NUM_LIT:7>", ")", "&", "&", "(", "bs", ".", "get", "(", "<NUM_LIT:8>", ")", "instanceof", "ImapList", ")", ")", "{", "bodyDisposition", "=", "bs", ".", "getList", "(", "<NUM_LIT:8>", ")", ";", "}", "String", "contentDisposition", "=", "\"", "\"", ";", "if", "(", "bodyDisposition", "!", "=", "null", "&", "&", "bodyDisposition", ".", "size", "(", ")", ">", "0", ")", "{", "if", "(", "!", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "bodyDisposition", ".", "getString", "(", "0", ")", ")", ")", "{", "contentDisposition", "=", "bodyDisposition", ".", "getString", "(", "0", ")", ".", "toLowerCase", "(", ")", ";", "}", "if", "(", "(", "bodyDisposition", ".", "size", "(", ")", ">", "1", ")", "&", "&", "(", "bodyDisposition", ".", "get", "(", "1", ")", "instanceof", "ImapList", ")", ")", "{", "ImapList", "bodyDispositionParams", "=", "bodyDisposition", ".", "getList", "(", "1", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "bodyDispositionParams", ".", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "=", "<NUM_LIT:2>", ")", "{", "contentDisposition", "+", "=", "String", ".", "format", "(", "\"", "<STR_LIT:;>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "\"", ",", "bodyDispositionParams", ".", "getString", "(", "i", ")", ".", "toLowerCase", "(", ")", ",", "bodyDispositionParams", ".", "getString", "(", "i", "+", "1", ")", ")", ";", "}", "}", "}", "if", "(", "MimeUtility", ".", "getHeaderParameter", "(", "contentDisposition", ",", "\"", "<STR_LIT>", "\"", ")", "=", "=", "null", ")", "{", "contentDisposition", "+", "=", "String", ".", "format", "(", "\"", "<STR_LIT:;>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "size", ")", ";", "}", "part", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_DISPOSITION", ",", "contentDisposition", ")", ";", "part", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TRANSFER_ENCODING", ",", "encoding", ")", ";", "if", "(", "!", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "cid", ")", ")", "{", "part", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_ID", ",", "cid", ")", ";", "}", "if", "(", "part", "instanceof", "ImapMessage", ")", "{", "(", "(", "ImapMessage", ")", "part", ")", ".", "setSize", "(", "size", ")", ";", "}", "else", "if", "(", "part", "instanceof", "ImapBodyPart", ")", "{", "(", "(", "ImapBodyPart", ")", "part", ")", ".", "setSize", "(", "size", ")", ";", "}", "else", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "part", ".", "toString", "(", ")", ")", ";", "}", "part", ".", "setHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_ATTACHMENT_STORE_DATA", ",", "id", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "appendMessages", "(", "Message", "[", "]", "messages", ")", "throws", "MessagingException", "{", "checkOpen", "(", ")", ";", "try", "{", "for", "(", "Message", "message", ":", "messages", ")", "{", "CountingOutputStream", "out", "=", "new", "CountingOutputStream", "(", ")", ";", "EOLConvertingOutputStream", "eolOut", "=", "new", "EOLConvertingOutputStream", "(", "out", ")", ";", "message", ".", "writeTo", "(", "eolOut", ")", ";", "eolOut", ".", "flush", "(", ")", ";", "String", "flagList", "=", "\"", "\"", ";", "Flag", "[", "]", "flags", "=", "message", ".", "getFlags", "(", ")", ";", "if", "(", "flags", ".", "length", ">", "0", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "flags", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "Flag", "flag", "=", "flags", "[", "i", "]", ";", "if", "(", "flag", "=", "=", "Flag", ".", "SEEN", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "FLAGGED", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "}", "}", "if", "(", "sb", ".", "length", "(", ")", ">", "0", ")", "{", "flagList", "=", "sb", ".", "substring", "(", "1", ")", ";", "}", "}", "mConnection", ".", "sendCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:%s>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "encodeFolderName", "(", "mName", ")", ",", "flagList", ",", "out", ".", "getCount", "(", ")", ")", ",", "false", ")", ";", "ImapResponse", "response", ";", "do", "{", "response", "=", "mConnection", ".", "readResponse", "(", ")", ";", "if", "(", "response", ".", "mCommandContinuationRequested", ")", "{", "eolOut", "=", "new", "EOLConvertingOutputStream", "(", "mConnection", ".", "mTransport", ".", "getOutputStream", "(", ")", ")", ";", "message", ".", "writeTo", "(", "eolOut", ")", ";", "eolOut", ".", "write", "(", "<STR_LIT>", ")", ";", "eolOut", ".", "write", "(", "<STR_LIT:\\n>", ")", ";", "eolOut", ".", "flush", "(", ")", ";", "}", "else", "if", "(", "response", ".", "mTag", "=", "=", "null", ")", "{", "handleUntaggedResponse", "(", "response", ")", ";", "}", "while", "(", "response", ".", "more", "(", ")", ")", ";", "}", "while", "(", "response", ".", "mTag", "=", "=", "null", ")", ";", "String", "[", "]", "messageIdHeader", "=", "message", ".", "getHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "messageIdHeader", "=", "=", "null", "|", "|", "messageIdHeader", ".", "length", "=", "=", "0", ")", "{", "continue", ";", "}", "String", "messageId", "=", "messageIdHeader", "[", "0", "]", ";", "List", "<", "ImapResponse", ">", "responses", "=", "mConnection", ".", "executeSimpleCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "messageId", ")", ")", ";", "for", "(", "ImapResponse", "response1", ":", "responses", ")", "{", "if", "(", "response1", ".", "mTag", "=", "=", "null", "&", "&", "response1", ".", "get", "(", "0", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", "&", "&", "response1", ".", "size", "(", ")", ">", "1", ")", "{", "message", ".", "setUid", "(", "response1", ".", "getString", "(", "response1", ".", "size", "(", ")", "-", "1", ")", ")", ";", "}", "}", "}", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "ioExceptionHandler", "(", "mConnection", ",", "ioe", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Message", "[", "]", "expunge", "(", ")", "throws", "MessagingException", "{", "checkOpen", "(", ")", ";", "try", "{", "handleUntaggedResponses", "(", "mConnection", ".", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "ioExceptionHandler", "(", "mConnection", ",", "ioe", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "void", "setFlags", "(", "Message", "[", "]", "messages", ",", "Flag", "[", "]", "flags", ",", "boolean", "value", ")", "throws", "MessagingException", "{", "checkOpen", "(", ")", ";", "StringBuilder", "uidList", "=", "new", "StringBuilder", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "messages", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "if", "(", "i", ">", "0", ")", "uidList", ".", "append", "(", "<CHAR_LIT:U+002C>", ")", ";", "uidList", ".", "append", "(", "messages", "[", "i", "]", ".", "getUid", "(", ")", ")", ";", "}", "StringBuilder", "flagList", "=", "new", "StringBuilder", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "flags", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "Flag", "flag", "=", "flags", "[", "i", "]", ";", "if", "(", "flag", "=", "=", "Flag", ".", "SEEN", ")", "{", "flagList", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "DELETED", ")", "{", "flagList", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "flag", "=", "=", "Flag", ".", "FLAGGED", ")", "{", "flagList", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "}", "}", "try", "{", "mConnection", ".", "executeSimpleCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "uidList", ",", "value", "?", "\"", "<STR_LIT:+>", "\"", ":", "\"", "<STR_LIT:->", "\"", ",", "flagList", ".", "substring", "(", "1", ")", ")", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "ioExceptionHandler", "(", "mConnection", ",", "ioe", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "checkOpen", "(", ")", "throws", "MessagingException", "{", "if", "(", "!", "isOpen", "(", ")", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", "+", "mName", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "private", "MessagingException", "ioExceptionHandler", "(", "ImapConnection", "connection", ",", "IOException", "ioe", ")", "throws", "MessagingException", "{", "connection", ".", "close", "(", ")", ";", "close", "(", "false", ")", ";", "return", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ",", "ioe", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "o", ")", "{", "if", "(", "o", "instanceof", "ImapFolder", ")", "{", "return", "(", "(", "ImapFolder", ")", "o", ")", ".", "mName", ".", "equals", "(", "mName", ")", ";", "}", "return", "super", ".", "equals", "(", "o", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Message", "createMessage", "(", "String", "uid", ")", "throws", "MessagingException", "{", "return", "new", "ImapMessage", "(", "uid", ",", "this", ")", ";", "}", "</s>"]
["<s>", "public", "void", "open", "(", ")", "throws", "IOException", ",", "MessagingException", "{", "if", "(", "mTransport", "!", "=", "null", "&", "&", "mTransport", ".", "isOpen", "(", ")", ")", "{", "return", ";", "}", "mNextCommandTag", "=", "1", ";", "try", "{", "if", "(", "mTransport", "=", "=", "null", ")", "{", "mTransport", "=", "mRootTransport", ".", "newInstanceWithConfiguration", "(", ")", ";", "}", "mTransport", ".", "open", "(", ")", ";", "mTransport", ".", "setSoTimeout", "(", "MailTransport", ".", "SOCKET_READ_TIMEOUT", ")", ";", "mParser", "=", "new", "ImapResponseParser", "(", "mTransport", ".", "getInputStream", "(", ")", ")", ";", "mParser", ".", "readResponse", "(", ")", ";", "if", "(", "mTransport", ".", "canTryTlsSecurity", "(", ")", ")", "{", "List", "<", "ImapResponse", ">", "responses", "=", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "responses", ".", "size", "(", ")", "!", "=", "<NUM_LIT:2>", ")", "{", "throw", "new", "MessagingException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "responses", ".", "get", "(", "0", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "executeSimpleCommand", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mTransport", ".", "reopenTls", "(", ")", ";", "mTransport", ".", "setSoTimeout", "(", "MailTransport", ".", "SOCKET_READ_TIMEOUT", ")", ";", "mParser", "=", "new", "ImapResponseParser", "(", "mTransport", ".", "getInputStream", "(", ")", ")", ";", "}", "else", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "throw", "new", "MessagingException", "(", "MessagingException", ".", "TLS_REQUIRED", ")", ";", "}", "}", "try", "{", "executeSimpleCommand", "(", "mLoginPhrase", ",", "true", ")", ";", "}", "catch", "(", "ImapException", "ie", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "ie", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "AuthenticationFailedException", "(", "ie", ".", "getAlertText", "(", ")", ",", "ie", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "throw", "new", "AuthenticationFailedException", "(", "null", ",", "me", ")", ";", "}", "}", "catch", "(", "SSLException", "e", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "e", ".", "toString", "(", ")", ")", ";", "}", "throw", "new", "CertificateValidationException", "(", "e", ".", "getMessage", "(", ")", ",", "e", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "ioe", ".", "toString", "(", ")", ")", ";", "}", "throw", "ioe", ";", "}", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "{", "if", "(", "mTransport", "!", "=", "null", ")", "{", "mTransport", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "ImapResponse", "readResponse", "(", ")", "throws", "IOException", ",", "MessagingException", "{", "return", "mParser", ".", "readResponse", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "sendCommand", "(", "String", "command", ",", "boolean", "sensitive", ")", "throws", "MessagingException", ",", "IOException", "{", "open", "(", ")", ";", "String", "tag", "=", "Integer", ".", "toString", "(", "mNextCommandTag", "+", "+", ")", ";", "String", "commandToSend", "=", "tag", "+", "\"", "\"", "+", "command", ";", "mTransport", ".", "writeLine", "(", "commandToSend", ",", "sensitive", "?", "\"", "<STR_LIT>", "\"", ":", "null", ")", ";", "return", "tag", ";", "}", "</s>"]
["<s>", "public", "List", "<", "ImapResponse", ">", "executeSimpleCommand", "(", "String", "command", ")", "throws", "IOException", ",", "ImapException", ",", "MessagingException", "{", "return", "executeSimpleCommand", "(", "command", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "List", "<", "ImapResponse", ">", "executeSimpleCommand", "(", "String", "command", ",", "boolean", "sensitive", ")", "throws", "IOException", ",", "ImapException", ",", "MessagingException", "{", "String", "tag", "=", "sendCommand", "(", "command", ",", "sensitive", ")", ";", "ArrayList", "<", "ImapResponse", ">", "responses", "=", "new", "ArrayList", "<", "ImapResponse", ">", "(", ")", ";", "ImapResponse", "response", ";", "ImapResponse", "previous", "=", "null", ";", "do", "{", "if", "(", "previous", "!", "=", "null", "&", "&", "!", "previous", ".", "completed", "(", ")", ")", "{", "previous", ".", "nailDown", "(", ")", ";", "}", "response", "=", "mParser", ".", "readResponse", "(", ")", ";", "if", "(", "response", ".", "mTag", "!", "=", "null", "&", "&", "!", "response", ".", "mTag", ".", "equals", "(", "tag", ")", "&", "&", "previous", "!", "=", "null", "&", "&", "!", "previous", ".", "completed", "(", ")", ")", "{", "previous", ".", "appendAll", "(", "response", ")", ";", "response", ".", "mTag", "=", "null", ";", "continue", ";", "}", "responses", ".", "add", "(", "response", ")", ";", "previous", "=", "response", ";", "}", "while", "(", "response", ".", "mTag", "=", "=", "null", ")", ";", "if", "(", "response", ".", "size", "(", ")", "<", "1", "|", "|", "!", "response", ".", "get", "(", "0", ")", ".", "equals", "(", "\"", "<STR_LIT:OK>", "\"", ")", ")", "{", "throw", "new", "ImapException", "(", "response", ".", "toString", "(", ")", ",", "response", ".", "getAlertText", "(", ")", ")", ";", "}", "return", "responses", ";", "}", "</s>"]
["<s>", "ImapMessage", "(", "String", "uid", ",", "Folder", "folder", ")", "throws", "MessagingException", "{", "this", ".", "mUid", "=", "uid", ";", "this", ".", "mFolder", "=", "folder", ";", "}", "</s>"]
["<s>", "public", "void", "setSize", "(", "int", "size", ")", "{", "this", ".", "mSize", "=", "size", ";", "}", "</s>"]
["<s>", "public", "void", "parse", "(", "InputStream", "in", ")", "throws", "IOException", ",", "MessagingException", "{", "super", ".", "parse", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setFlagInternal", "(", "Flag", "flag", ",", "boolean", "set", ")", "throws", "MessagingException", "{", "super", ".", "setFlag", "(", "flag", ",", "set", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setFlag", "(", "Flag", "flag", ",", "boolean", "set", ")", "throws", "MessagingException", "{", "super", ".", "setFlag", "(", "flag", ",", "set", ")", ";", "mFolder", ".", "setFlags", "(", "new", "Message", "[", "]", "{", "this", "}", ",", "new", "Flag", "[", "]", "{", "flag", "}", ",", "set", ")", ";", "}", "</s>"]
["<s>", "public", "ImapBodyPart", "(", ")", "throws", "MessagingException", "{", "super", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ImapException", "(", "String", "message", ",", "String", "alertText", ",", "Throwable", "throwable", ")", "{", "super", "(", "message", ",", "throwable", ")", ";", "this", ".", "mAlertText", "=", "alertText", ";", "}", "</s>"]
["<s>", "public", "ImapException", "(", "String", "message", ",", "String", "alertText", ")", "{", "super", "(", "message", ")", ";", "this", ".", "mAlertText", "=", "alertText", ";", "}", "</s>"]
["<s>", "public", "String", "getAlertText", "(", ")", "{", "return", "mAlertText", ";", "}", "</s>"]
["<s>", "public", "void", "setAlertText", "(", "String", "alertText", ")", "{", "mAlertText", "=", "alertText", ";", "}", "</s>"]
["<s>", "public", "Base64OutputStream", "(", "OutputStream", "out", ")", "{", "this", "(", "out", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "Base64OutputStream", "(", "OutputStream", "out", ",", "boolean", "doEncode", ")", "{", "super", "(", "out", ")", ";", "this", ".", "doEncode", "=", "doEncode", ";", "this", ".", "base64", "=", "new", "Base64", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Base64OutputStream", "(", "OutputStream", "out", ",", "boolean", "doEncode", ",", "int", "lineLength", ",", "byte", "[", "]", "lineSeparator", ")", "{", "super", "(", "out", ")", ";", "this", ".", "doEncode", "=", "doEncode", ";", "this", ".", "base64", "=", "new", "Base64", "(", "lineLength", ",", "lineSeparator", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "int", "i", ")", "throws", "IOException", "{", "singleByte", "[", "0", "]", "=", "(", "byte", ")", "i", ";", "write", "(", "singleByte", ",", "0", ",", "1", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "byte", "b", "[", "]", ",", "int", "offset", ",", "int", "len", ")", "throws", "IOException", "{", "if", "(", "b", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", ")", ";", "}", "else", "if", "(", "offset", "<", "0", "|", "|", "len", "<", "0", "|", "|", "offset", "+", "len", "<", "0", ")", "{", "throw", "new", "IndexOutOfBoundsException", "(", ")", ";", "}", "else", "if", "(", "offset", ">", "b", ".", "length", "|", "|", "offset", "+", "len", ">", "b", ".", "length", ")", "{", "throw", "new", "IndexOutOfBoundsException", "(", ")", ";", "}", "else", "if", "(", "len", ">", "0", ")", "{", "if", "(", "doEncode", ")", "{", "base64", ".", "encode", "(", "b", ",", "offset", ",", "len", ")", ";", "}", "else", "{", "base64", ".", "decode", "(", "b", ",", "offset", ",", "len", ")", ";", "}", "flush", "(", "false", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "flush", "(", "boolean", "propogate", ")", "throws", "IOException", "{", "int", "avail", "=", "base64", ".", "avail", "(", ")", ";", "if", "(", "avail", ">", "0", ")", "{", "byte", "[", "]", "buf", "=", "new", "byte", "[", "avail", "]", ";", "int", "c", "=", "base64", ".", "readResults", "(", "buf", ",", "0", ",", "avail", ")", ";", "if", "(", "c", ">", "0", ")", "{", "out", ".", "write", "(", "buf", ",", "0", ",", "c", ")", ";", "}", "}", "if", "(", "propogate", ")", "{", "out", ".", "flush", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "flush", "(", ")", "throws", "IOException", "{", "flush", "(", "true", ")", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "throws", "IOException", "{", "if", "(", "doEncode", ")", "{", "base64", ".", "encode", "(", "singleByte", ",", "0", ",", "-", "1", ")", ";", "}", "else", "{", "base64", ".", "decode", "(", "singleByte", ",", "0", ",", "-", "1", ")", ";", "}", "flush", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Base64", "(", ")", "{", "this", "(", "CHUNK_SIZE", ",", "CHUNK_SEPARATOR", ")", ";", "}", "</s>"]
["<s>", "public", "Base64", "(", "int", "lineLength", ")", "{", "this", "(", "lineLength", ",", "CHUNK_SEPARATOR", ")", ";", "}", "</s>"]
["<s>", "public", "Base64", "(", "int", "lineLength", ",", "byte", "[", "]", "lineSeparator", ")", "{", "this", ".", "lineLength", "=", "lineLength", ";", "this", ".", "lineSeparator", "=", "new", "byte", "[", "lineSeparator", ".", "length", "]", ";", "System", ".", "arraycopy", "(", "lineSeparator", ",", "0", ",", "this", ".", "lineSeparator", ",", "0", ",", "lineSeparator", ".", "length", ")", ";", "if", "(", "lineLength", ">", "0", ")", "{", "this", ".", "encodeSize", "=", "<NUM_LIT:4>", "+", "lineSeparator", ".", "length", ";", "}", "else", "{", "this", ".", "encodeSize", "=", "<NUM_LIT:4>", ";", "}", "this", ".", "decodeSize", "=", "encodeSize", "-", "1", ";", "if", "(", "containsBase64Byte", "(", "lineSeparator", ")", ")", "{", "String", "sep", ";", "try", "{", "sep", "=", "new", "String", "(", "lineSeparator", ",", "\"", "<STR_LIT:UTF-8>", "\"", ")", ";", "}", "catch", "(", "UnsupportedEncodingException", "uee", ")", "{", "sep", "=", "new", "String", "(", "lineSeparator", ")", ";", "}", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "sep", "+", "\"", "<STR_LIT:]>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "boolean", "hasData", "(", ")", "{", "return", "buf", "!", "=", "null", ";", "}", "</s>"]
["<s>", "int", "avail", "(", ")", "{", "return", "buf", "!", "=", "null", "?", "pos", "-", "readPos", ":", "0", ";", "}", "</s>"]
["<s>", "private", "void", "resizeBuf", "(", ")", "{", "if", "(", "buf", "=", "=", "null", ")", "{", "buf", "=", "new", "byte", "[", "<NUM_LIT>", "]", ";", "pos", "=", "0", ";", "readPos", "=", "0", ";", "}", "else", "{", "byte", "[", "]", "b", "=", "new", "byte", "[", "buf", ".", "length", "*", "<NUM_LIT:2>", "]", ";", "System", ".", "arraycopy", "(", "buf", ",", "0", ",", "b", ",", "0", ",", "buf", ".", "length", ")", ";", "buf", "=", "b", ";", "}", "}", "</s>"]
["<s>", "int", "readResults", "(", "byte", "[", "]", "b", ",", "int", "bPos", ",", "int", "bAvail", ")", "{", "if", "(", "buf", "!", "=", "null", ")", "{", "int", "len", "=", "Math", ".", "min", "(", "avail", "(", ")", ",", "bAvail", ")", ";", "if", "(", "buf", "!", "=", "b", ")", "{", "System", ".", "arraycopy", "(", "buf", ",", "readPos", ",", "b", ",", "bPos", ",", "len", ")", ";", "readPos", "+", "=", "len", ";", "if", "(", "readPos", ">", "=", "pos", ")", "{", "buf", "=", "null", ";", "}", "}", "else", "{", "buf", "=", "null", ";", "}", "return", "len", ";", "}", "else", "{", "return", "eof", "?", "-", "1", ":", "0", ";", "}", "}", "</s>"]
["<s>", "void", "setInitialBuffer", "(", "byte", "[", "]", "out", ",", "int", "outPos", ",", "int", "outAvail", ")", "{", "if", "(", "out", "!", "=", "null", "&", "&", "out", ".", "length", "=", "=", "outAvail", ")", "{", "buf", "=", "out", ";", "pos", "=", "outPos", ";", "readPos", "=", "outPos", ";", "}", "}", "</s>"]
["<s>", "void", "encode", "(", "byte", "[", "]", "in", ",", "int", "inPos", ",", "int", "inAvail", ")", "{", "if", "(", "eof", ")", "{", "return", ";", "}", "if", "(", "inAvail", "<", "0", ")", "{", "eof", "=", "true", ";", "if", "(", "buf", "=", "=", "null", "|", "|", "buf", ".", "length", "-", "pos", "<", "encodeSize", ")", "{", "resizeBuf", "(", ")", ";", "}", "switch", "(", "modulus", ")", "{", "case", "1", ":", "buf", "[", "pos", "+", "+", "]", "=", "intToBase64", "[", "(", "x", ">", ">", "<NUM_LIT:2>", ")", "&", "MASK_6BITS", "]", ";", "buf", "[", "pos", "+", "+", "]", "=", "intToBase64", "[", "(", "x", "<", "<", "<NUM_LIT:4>", ")", "&", "MASK_6BITS", "]", ";", "buf", "[", "pos", "+", "+", "]", "=", "PAD", ";", "buf", "[", "pos", "+", "+", "]", "=", "PAD", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "buf", "[", "pos", "+", "+", "]", "=", "intToBase64", "[", "(", "x", ">", ">", "<NUM_LIT:10>", ")", "&", "MASK_6BITS", "]", ";", "buf", "[", "pos", "+", "+", "]", "=", "intToBase64", "[", "(", "x", ">", ">", "<NUM_LIT:4>", ")", "&", "MASK_6BITS", "]", ";", "buf", "[", "pos", "+", "+", "]", "=", "intToBase64", "[", "(", "x", "<", "<", "<NUM_LIT:2>", ")", "&", "MASK_6BITS", "]", ";", "buf", "[", "pos", "+", "+", "]", "=", "PAD", ";", "break", ";", "}", "if", "(", "lineLength", ">", "0", ")", "{", "System", ".", "arraycopy", "(", "lineSeparator", ",", "0", ",", "buf", ",", "pos", ",", "lineSeparator", ".", "length", ")", ";", "pos", "+", "=", "lineSeparator", ".", "length", ";", "}", "}", "else", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "inAvail", ";", "i", "+", "+", ")", "{", "if", "(", "buf", "=", "=", "null", "|", "|", "buf", ".", "length", "-", "pos", "<", "encodeSize", ")", "{", "resizeBuf", "(", ")", ";", "}", "modulus", "=", "(", "+", "+", "modulus", ")", "%", "<NUM_LIT:3>", ";", "int", "b", "=", "in", "[", "inPos", "+", "+", "]", ";", "if", "(", "b", "<", "0", ")", "{", "b", "+", "=", "<NUM_LIT>", ";", "}", "x", "=", "(", "x", "<", "<", "<NUM_LIT:8>", ")", "+", "b", ";", "if", "(", "0", "=", "=", "modulus", ")", "{", "buf", "[", "pos", "+", "+", "]", "=", "intToBase64", "[", "(", "x", ">", ">", "<NUM_LIT>", ")", "&", "MASK_6BITS", "]", ";", "buf", "[", "pos", "+", "+", "]", "=", "intToBase64", "[", "(", "x", ">", ">", "<NUM_LIT:12>", ")", "&", "MASK_6BITS", "]", ";", "buf", "[", "pos", "+", "+", "]", "=", "intToBase64", "[", "(", "x", ">", ">", "<NUM_LIT:6>", ")", "&", "MASK_6BITS", "]", ";", "buf", "[", "pos", "+", "+", "]", "=", "intToBase64", "[", "x", "&", "MASK_6BITS", "]", ";", "currentLinePos", "+", "=", "<NUM_LIT:4>", ";", "if", "(", "lineLength", ">", "0", "&", "&", "lineLength", "<", "=", "currentLinePos", ")", "{", "System", ".", "arraycopy", "(", "lineSeparator", ",", "0", ",", "buf", ",", "pos", ",", "lineSeparator", ".", "length", ")", ";", "pos", "+", "=", "lineSeparator", ".", "length", ";", "currentLinePos", "=", "0", ";", "}", "}", "}", "}", "}", "</s>"]
["<s>", "void", "decode", "(", "byte", "[", "]", "in", ",", "int", "inPos", ",", "int", "inAvail", ")", "{", "if", "(", "eof", ")", "{", "return", ";", "}", "if", "(", "inAvail", "<", "0", ")", "{", "eof", "=", "true", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "inAvail", ";", "i", "+", "+", ")", "{", "if", "(", "buf", "=", "=", "null", "|", "|", "buf", ".", "length", "-", "pos", "<", "decodeSize", ")", "{", "resizeBuf", "(", ")", ";", "}", "byte", "b", "=", "in", "[", "inPos", "+", "+", "]", ";", "if", "(", "b", "=", "=", "PAD", ")", "{", "x", "=", "x", "<", "<", "<NUM_LIT:6>", ";", "switch", "(", "modulus", ")", "{", "case", "<NUM_LIT:2>", ":", "x", "=", "x", "<", "<", "<NUM_LIT:6>", ";", "buf", "[", "pos", "+", "+", "]", "=", "(", "byte", ")", "(", "(", "x", ">", ">", "<NUM_LIT:16>", ")", "&", "MASK_8BITS", ")", ";", "break", ";", "case", "<NUM_LIT:3>", ":", "buf", "[", "pos", "+", "+", "]", "=", "(", "byte", ")", "(", "(", "x", ">", ">", "<NUM_LIT:16>", ")", "&", "MASK_8BITS", ")", ";", "buf", "[", "pos", "+", "+", "]", "=", "(", "byte", ")", "(", "(", "x", ">", ">", "<NUM_LIT:8>", ")", "&", "MASK_8BITS", ")", ";", "break", ";", "}", "eof", "=", "true", ";", "return", ";", "}", "else", "{", "if", "(", "b", ">", "=", "0", "&", "&", "b", "<", "base64ToInt", ".", "length", ")", "{", "int", "result", "=", "base64ToInt", "[", "b", "]", ";", "if", "(", "result", ">", "=", "0", ")", "{", "modulus", "=", "(", "+", "+", "modulus", ")", "%", "<NUM_LIT:4>", ";", "x", "=", "(", "x", "<", "<", "<NUM_LIT:6>", ")", "+", "result", ";", "if", "(", "modulus", "=", "=", "0", ")", "{", "buf", "[", "pos", "+", "+", "]", "=", "(", "byte", ")", "(", "(", "x", ">", ">", "<NUM_LIT:16>", ")", "&", "MASK_8BITS", ")", ";", "buf", "[", "pos", "+", "+", "]", "=", "(", "byte", ")", "(", "(", "x", ">", ">", "<NUM_LIT:8>", ")", "&", "MASK_8BITS", ")", ";", "buf", "[", "pos", "+", "+", "]", "=", "(", "byte", ")", "(", "x", "&", "MASK_8BITS", ")", ";", "}", "}", "}", "}", "}", "}", "</s>"]
["<s>", "public", "static", "boolean", "isBase64", "(", "byte", "octet", ")", "{", "return", "octet", "=", "=", "PAD", "|", "|", "(", "octet", ">", "=", "0", "&", "&", "octet", "<", "base64ToInt", ".", "length", "&", "&", "base64ToInt", "[", "octet", "]", "!", "=", "-", "1", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isArrayByteBase64", "(", "byte", "[", "]", "arrayOctet", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "arrayOctet", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "!", "isBase64", "(", "arrayOctet", "[", "i", "]", ")", "&", "&", "!", "isWhiteSpace", "(", "arrayOctet", "[", "i", "]", ")", ")", "{", "return", "false", ";", "}", "}", "return", "true", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "containsBase64Byte", "(", "byte", "[", "]", "arrayOctet", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "arrayOctet", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "isBase64", "(", "arrayOctet", "[", "i", "]", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "encodeBase64", "(", "byte", "[", "]", "binaryData", ")", "{", "return", "encodeBase64", "(", "binaryData", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "encodeBase64Chunked", "(", "byte", "[", "]", "binaryData", ")", "{", "return", "encodeBase64", "(", "binaryData", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "Object", "decode", "(", "Object", "pObject", ")", "throws", "DecoderException", "{", "if", "(", "!", "(", "pObject", "instanceof", "byte", "[", "]", ")", ")", "{", "throw", "new", "DecoderException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "decode", "(", "(", "byte", "[", "]", ")", "pObject", ")", ";", "}", "</s>"]
["<s>", "public", "byte", "[", "]", "decode", "(", "byte", "[", "]", "pArray", ")", "{", "return", "decodeBase64", "(", "pArray", ")", ";", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "encodeBase64", "(", "byte", "[", "]", "binaryData", ",", "boolean", "isChunked", ")", "{", "if", "(", "binaryData", "=", "=", "null", "|", "|", "binaryData", ".", "length", "=", "=", "0", ")", "{", "return", "binaryData", ";", "}", "Base64", "b64", "=", "isChunked", "?", "new", "Base64", "(", ")", ":", "new", "Base64", "(", "0", ")", ";", "long", "len", "=", "(", "binaryData", ".", "length", "*", "<NUM_LIT:4>", ")", "/", "<NUM_LIT:3>", ";", "long", "mod", "=", "len", "%", "<NUM_LIT:4>", ";", "if", "(", "mod", "!", "=", "0", ")", "{", "len", "+", "=", "<NUM_LIT:4>", "-", "mod", ";", "}", "if", "(", "isChunked", ")", "{", "len", "+", "=", "(", "(", "len", "+", "CHUNK_SIZE", "-", "1", ")", "/", "CHUNK_SIZE", ")", "*", "CHUNK_SEPARATOR", ".", "length", ";", "}", "if", "(", "len", ">", "Integer", ".", "MAX_VALUE", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "Integer", ".", "MAX_VALUE", ")", ";", "}", "byte", "[", "]", "buf", "=", "new", "byte", "[", "(", "int", ")", "len", "]", ";", "b64", ".", "setInitialBuffer", "(", "buf", ",", "0", ",", "buf", ".", "length", ")", ";", "b64", ".", "encode", "(", "binaryData", ",", "0", ",", "binaryData", ".", "length", ")", ";", "b64", ".", "encode", "(", "binaryData", ",", "0", ",", "-", "1", ")", ";", "if", "(", "b64", ".", "buf", "!", "=", "buf", ")", "{", "b64", ".", "readResults", "(", "buf", ",", "0", ",", "buf", ".", "length", ")", ";", "}", "return", "buf", ";", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "decodeBase64", "(", "byte", "[", "]", "base64Data", ")", "{", "if", "(", "base64Data", "=", "=", "null", "|", "|", "base64Data", ".", "length", "=", "=", "0", ")", "{", "return", "base64Data", ";", "}", "Base64", "b64", "=", "new", "Base64", "(", ")", ";", "long", "len", "=", "(", "base64Data", ".", "length", "*", "<NUM_LIT:3>", ")", "/", "<NUM_LIT:4>", ";", "byte", "[", "]", "buf", "=", "new", "byte", "[", "(", "int", ")", "len", "]", ";", "b64", ".", "setInitialBuffer", "(", "buf", ",", "0", ",", "buf", ".", "length", ")", ";", "b64", ".", "decode", "(", "base64Data", ",", "0", ",", "base64Data", ".", "length", ")", ";", "b64", ".", "decode", "(", "base64Data", ",", "0", ",", "-", "1", ")", ";", "byte", "[", "]", "result", "=", "new", "byte", "[", "b64", ".", "pos", "]", ";", "b64", ".", "readResults", "(", "result", ",", "0", ",", "result", ".", "length", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "static", "byte", "[", "]", "discardWhitespace", "(", "byte", "[", "]", "data", ")", "{", "byte", "groomedData", "[", "]", "=", "new", "byte", "[", "data", ".", "length", "]", ";", "int", "bytesCopied", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "data", ".", "length", ";", "i", "+", "+", ")", "{", "switch", "(", "data", "[", "i", "]", ")", "{", "case", "<CHAR_LIT>", ":", "case", "<STR_LIT:\\n>", ":", "case", "<STR_LIT>", ":", "case", "<STR_LIT:\\t>", ":", "break", ";", "default", ":", "groomedData", "[", "bytesCopied", "+", "+", "]", "=", "data", "[", "i", "]", ";", "}", "}", "byte", "packedData", "[", "]", "=", "new", "byte", "[", "bytesCopied", "]", ";", "System", ".", "arraycopy", "(", "groomedData", ",", "0", ",", "packedData", ",", "0", ",", "bytesCopied", ")", ";", "return", "packedData", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "isWhiteSpace", "(", "byte", "byteToCheck", ")", "{", "switch", "(", "byteToCheck", ")", "{", "case", "<CHAR_LIT>", ":", "case", "<STR_LIT:\\n>", ":", "case", "<STR_LIT>", ":", "case", "<STR_LIT:\\t>", ":", "return", "true", ";", "default", ":", "return", "false", ";", "}", "}", "</s>"]
["<s>", "static", "byte", "[", "]", "discardNonBase64", "(", "byte", "[", "]", "data", ")", "{", "byte", "groomedData", "[", "]", "=", "new", "byte", "[", "data", ".", "length", "]", ";", "int", "bytesCopied", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "data", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "isBase64", "(", "data", "[", "i", "]", ")", ")", "{", "groomedData", "[", "bytesCopied", "+", "+", "]", "=", "data", "[", "i", "]", ";", "}", "}", "byte", "packedData", "[", "]", "=", "new", "byte", "[", "bytesCopied", "]", ";", "System", ".", "arraycopy", "(", "groomedData", ",", "0", ",", "packedData", ",", "0", ",", "bytesCopied", ")", ";", "return", "packedData", ";", "}", "</s>"]
["<s>", "public", "Object", "encode", "(", "Object", "pObject", ")", "throws", "EncoderException", "{", "if", "(", "!", "(", "pObject", "instanceof", "byte", "[", "]", ")", ")", "{", "throw", "new", "EncoderException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "encode", "(", "(", "byte", "[", "]", ")", "pObject", ")", ";", "}", "</s>"]
["<s>", "public", "byte", "[", "]", "encode", "(", "byte", "[", "]", "pArray", ")", "{", "return", "encodeBase64", "(", "pArray", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "static", "BigInteger", "decodeInteger", "(", "byte", "[", "]", "pArray", ")", "{", "return", "new", "BigInteger", "(", "1", ",", "decodeBase64", "(", "pArray", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "encodeInteger", "(", "BigInteger", "bigInt", ")", "{", "if", "(", "bigInt", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "encodeBase64", "(", "toIntegerBytes", "(", "bigInt", ")", ",", "false", ")", ";", "}", "</s>"]
["<s>", "static", "byte", "[", "]", "toIntegerBytes", "(", "BigInteger", "bigInt", ")", "{", "int", "bitlen", "=", "bigInt", ".", "bitLength", "(", ")", ";", "bitlen", "=", "(", "(", "bitlen", "+", "<NUM_LIT:7>", ")", ">", ">", "<NUM_LIT:3>", ")", "<", "<", "<NUM_LIT:3>", ";", "byte", "[", "]", "bigBytes", "=", "bigInt", ".", "toByteArray", "(", ")", ";", "if", "(", "(", "(", "bigInt", ".", "bitLength", "(", ")", "%", "<NUM_LIT:8>", ")", "!", "=", "0", ")", "&", "&", "(", "(", "(", "bigInt", ".", "bitLength", "(", ")", "/", "<NUM_LIT:8>", ")", "+", "1", ")", "=", "=", "(", "bitlen", "/", "<NUM_LIT:8>", ")", ")", ")", "{", "return", "bigBytes", ";", "}", "int", "startSrc", "=", "0", ";", "int", "len", "=", "bigBytes", ".", "length", ";", "if", "(", "(", "bigInt", ".", "bitLength", "(", ")", "%", "<NUM_LIT:8>", ")", "=", "=", "0", ")", "{", "startSrc", "=", "1", ";", "len", "-", "-", ";", "}", "int", "startDst", "=", "bitlen", "/", "<NUM_LIT:8>", "-", "len", ";", "byte", "[", "]", "resizedBytes", "=", "new", "byte", "[", "bitlen", "/", "<NUM_LIT:8>", "]", ";", "System", ".", "arraycopy", "(", "bigBytes", ",", "startSrc", ",", "resizedBytes", ",", "startDst", ",", "len", ")", ";", "return", "resizedBytes", ";", "}", "</s>"]
["<s>", "static", "String", "createIndex", "(", "String", "tableName", ",", "String", "columnName", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "tableName", ".", "toLowerCase", "(", ")", "+", "<CHAR_LIT:_>", "+", "columnName", "+", "\"", "<STR_LIT>", "\"", "+", "tableName", "+", "\"", "<STR_LIT>", "\"", "+", "columnName", "+", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "static", "void", "createMessageTable", "(", "SQLiteDatabase", "db", ")", "{", "String", "messageColumns", "=", "MessageColumns", ".", "DISPLAY_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "TIMESTAMP", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "SUBJECT", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "FLAG_READ", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "FLAG_LOADED", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "FLAG_FAVORITE", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "FLAG_ATTACHMENT", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "FLAGS", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "CLIENT_ID", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "MESSAGE_ID", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "FROM_LIST", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "TO_LIST", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "CC_LIST", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "BCC_LIST", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "REPLY_TO_LIST", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "String", "createString", "=", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "SyncColumns", ".", "SERVER_ID", "+", "\"", "<STR_LIT>", "\"", "+", "SyncColumns", ".", "SERVER_TIMESTAMP", "+", "\"", "<STR_LIT>", "\"", "+", "messageColumns", ";", "String", "altCreateString", "=", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "SyncColumns", ".", "SERVER_ID", "+", "\"", "<STR_LIT>", "\"", "+", "SyncColumns", ".", "SERVER_TIMESTAMP", "+", "\"", "<STR_LIT>", "\"", "+", "messageColumns", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "TABLE_NAME", "+", "createString", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "UPDATED_TABLE_NAME", "+", "altCreateString", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "DELETED_TABLE_NAME", "+", "altCreateString", ")", ";", "String", "indexColumns", "[", "]", "=", "{", "MessageColumns", ".", "TIMESTAMP", ",", "MessageColumns", ".", "FLAG_READ", ",", "MessageColumns", ".", "FLAG_LOADED", ",", "MessageColumns", ".", "MAILBOX_KEY", ",", "SyncColumns", ".", "SERVER_ID", "}", ";", "for", "(", "String", "columnName", ":", "indexColumns", ")", "{", "db", ".", "execSQL", "(", "createIndex", "(", "Message", ".", "TABLE_NAME", ",", "columnName", ")", ")", ";", "}", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "Attachment", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "AttachmentColumns", ".", "MESSAGE_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "FLAG_READ", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "Mailbox", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "UNREAD_COUNT", "+", "<CHAR_LIT:=>", "+", "MailboxColumns", ".", "UNREAD_COUNT", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "FLAG_READ", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "Mailbox", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "UNREAD_COUNT", "+", "<CHAR_LIT:=>", "+", "MailboxColumns", ".", "UNREAD_COUNT", "+", "\"", "<STR_LIT:-1>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "FLAG_READ", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "Mailbox", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "UNREAD_COUNT", "+", "<CHAR_LIT:=>", "+", "MailboxColumns", ".", "UNREAD_COUNT", "+", "\"", "<STR_LIT:-1>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "Mailbox", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "UNREAD_COUNT", "+", "<CHAR_LIT:=>", "+", "MailboxColumns", ".", "UNREAD_COUNT", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "FLAG_READ", "+", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "FLAG_READ", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "FLAG_READ", "+", "\"", "<STR_LIT>", "\"", "+", "Mailbox", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "UNREAD_COUNT", "+", "<CHAR_LIT:=>", "+", "MailboxColumns", ".", "UNREAD_COUNT", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "FLAG_READ", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "static", "void", "resetMessageTable", "(", "SQLiteDatabase", "db", ",", "int", "oldVersion", ",", "int", "newVersion", ")", "{", "try", "{", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "TABLE_NAME", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "UPDATED_TABLE_NAME", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "DELETED_TABLE_NAME", ")", ";", "}", "catch", "(", "SQLException", "e", ")", "{", "}", "createMessageTable", "(", "db", ")", ";", "}", "</s>"]
["<s>", "static", "void", "createAccountTable", "(", "SQLiteDatabase", "db", ")", "{", "String", "s", "=", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "DISPLAY_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "EMAIL_ADDRESS", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "SYNC_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "SYNC_LOOKBACK", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "SYNC_INTERVAL", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "HOST_AUTH_KEY_RECV", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "HOST_AUTH_KEY_SEND", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "FLAGS", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "IS_DEFAULT", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "COMPATIBILITY_UUID", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "SENDER_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "RINGTONE_URI", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "PROTOCOL_VERSION", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "NEW_MESSAGE_COUNT", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Account", ".", "TABLE_NAME", "+", "s", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Account", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "Mailbox", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "HostAuth", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "HOST_AUTH_KEY_RECV", "+", "\"", "<STR_LIT>", "\"", "+", "HostAuth", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "AccountColumns", ".", "HOST_AUTH_KEY_SEND", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "static", "void", "resetAccountTable", "(", "SQLiteDatabase", "db", ",", "int", "oldVersion", ",", "int", "newVersion", ")", "{", "try", "{", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Account", ".", "TABLE_NAME", ")", ";", "}", "catch", "(", "SQLException", "e", ")", "{", "}", "createAccountTable", "(", "db", ")", ";", "}", "</s>"]
["<s>", "static", "void", "createHostAuthTable", "(", "SQLiteDatabase", "db", ")", "{", "String", "s", "=", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "HostAuthColumns", ".", "PROTOCOL", "+", "\"", "<STR_LIT>", "\"", "+", "HostAuthColumns", ".", "ADDRESS", "+", "\"", "<STR_LIT>", "\"", "+", "HostAuthColumns", ".", "PORT", "+", "\"", "<STR_LIT>", "\"", "+", "HostAuthColumns", ".", "FLAGS", "+", "\"", "<STR_LIT>", "\"", "+", "HostAuthColumns", ".", "LOGIN", "+", "\"", "<STR_LIT>", "\"", "+", "HostAuthColumns", ".", "PASSWORD", "+", "\"", "<STR_LIT>", "\"", "+", "HostAuthColumns", ".", "DOMAIN", "+", "\"", "<STR_LIT>", "\"", "+", "HostAuthColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "HostAuth", ".", "TABLE_NAME", "+", "s", ")", ";", "}", "</s>"]
["<s>", "static", "void", "resetHostAuthTable", "(", "SQLiteDatabase", "db", ",", "int", "oldVersion", ",", "int", "newVersion", ")", "{", "try", "{", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "HostAuth", ".", "TABLE_NAME", ")", ";", "}", "catch", "(", "SQLException", "e", ")", "{", "}", "createHostAuthTable", "(", "db", ")", ";", "}", "</s>"]
["<s>", "static", "void", "createMailboxTable", "(", "SQLiteDatabase", "db", ")", "{", "String", "s", "=", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "DISPLAY_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "SERVER_ID", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "PARENT_SERVER_ID", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "TYPE", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "DELIMITER", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "SYNC_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "SYNC_LOOKBACK", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "SYNC_INTERVAL", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "SYNC_TIME", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "UNREAD_COUNT", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "FLAG_VISIBLE", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "FLAGS", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "VISIBLE_LIMIT", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "SYNC_STATUS", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Mailbox", ".", "TABLE_NAME", "+", "s", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "SERVER_ID", "+", "\"", "<STR_LIT>", "\"", "+", "Mailbox", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "SERVER_ID", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "Mailbox", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MailboxColumns", ".", "ACCOUNT_KEY", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Mailbox", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "static", "void", "resetMailboxTable", "(", "SQLiteDatabase", "db", ",", "int", "oldVersion", ",", "int", "newVersion", ")", "{", "try", "{", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Mailbox", ".", "TABLE_NAME", ")", ";", "}", "catch", "(", "SQLException", "e", ")", "{", "}", "createMailboxTable", "(", "db", ")", ";", "}", "</s>"]
["<s>", "static", "void", "createAttachmentTable", "(", "SQLiteDatabase", "db", ")", "{", "String", "s", "=", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "AttachmentColumns", ".", "FILENAME", "+", "\"", "<STR_LIT>", "\"", "+", "AttachmentColumns", ".", "MIME_TYPE", "+", "\"", "<STR_LIT>", "\"", "+", "AttachmentColumns", ".", "SIZE", "+", "\"", "<STR_LIT>", "\"", "+", "AttachmentColumns", ".", "CONTENT_ID", "+", "\"", "<STR_LIT>", "\"", "+", "AttachmentColumns", ".", "CONTENT_URI", "+", "\"", "<STR_LIT>", "\"", "+", "AttachmentColumns", ".", "MESSAGE_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "AttachmentColumns", ".", "LOCATION", "+", "\"", "<STR_LIT>", "\"", "+", "AttachmentColumns", ".", "ENCODING", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Attachment", ".", "TABLE_NAME", "+", "s", ")", ";", "db", ".", "execSQL", "(", "createIndex", "(", "Attachment", ".", "TABLE_NAME", ",", "AttachmentColumns", ".", "MESSAGE_KEY", ")", ")", ";", "}", "</s>"]
["<s>", "static", "void", "resetAttachmentTable", "(", "SQLiteDatabase", "db", ",", "int", "oldVersion", ",", "int", "newVersion", ")", "{", "try", "{", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Attachment", ".", "TABLE_NAME", ")", ";", "}", "catch", "(", "SQLException", "e", ")", "{", "}", "createAttachmentTable", "(", "db", ")", ";", "}", "</s>"]
["<s>", "static", "void", "createBodyTable", "(", "SQLiteDatabase", "db", ")", "{", "String", "s", "=", "\"", "<STR_LIT>", "\"", "+", "EmailContent", ".", "RECORD_ID", "+", "\"", "<STR_LIT>", "\"", "+", "BodyColumns", ".", "MESSAGE_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "BodyColumns", ".", "HTML_CONTENT", "+", "\"", "<STR_LIT>", "\"", "+", "BodyColumns", ".", "TEXT_CONTENT", "+", "\"", "<STR_LIT>", "\"", "+", "BodyColumns", ".", "HTML_REPLY", "+", "\"", "<STR_LIT>", "\"", "+", "BodyColumns", ".", "TEXT_REPLY", "+", "\"", "<STR_LIT>", "\"", "+", "BodyColumns", ".", "SOURCE_MESSAGE_KEY", "+", "\"", "<STR_LIT>", "\"", "+", "BodyColumns", ".", "INTRO_TEXT", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Body", ".", "TABLE_NAME", "+", "s", ")", ";", "db", ".", "execSQL", "(", "createIndex", "(", "Body", ".", "TABLE_NAME", ",", "BodyColumns", ".", "MESSAGE_KEY", ")", ")", ";", "}", "</s>"]
["<s>", "static", "void", "upgradeBodyTable", "(", "SQLiteDatabase", "db", ",", "int", "oldVersion", ",", "int", "newVersion", ")", "{", "if", "(", "oldVersion", "<", "<NUM_LIT:5>", ")", "{", "try", "{", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Body", ".", "TABLE_NAME", ")", ";", "createBodyTable", "(", "db", ")", ";", "}", "catch", "(", "SQLException", "e", ")", "{", "}", "}", "else", "if", "(", "oldVersion", "=", "=", "<NUM_LIT:5>", ")", "{", "try", "{", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Body", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "BodyColumns", ".", "INTRO_TEXT", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "SQLException", "e", ")", "{", "Log", ".", "w", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "oldVersion", "=", "<NUM_LIT:6>", ";", "}", "}", "</s>"]
["<s>", "public", "synchronized", "SQLiteDatabase", "getDatabase", "(", "Context", "context", ")", "{", "if", "(", "mDatabase", "!", "=", "null", ")", "{", "return", "mDatabase", ";", "}", "DatabaseHelper", "helper", "=", "new", "DatabaseHelper", "(", "context", ",", "DATABASE_NAME", ")", ";", "mDatabase", "=", "helper", ".", "getWritableDatabase", "(", ")", ";", "if", "(", "mDatabase", "!", "=", "null", ")", "{", "mDatabase", ".", "setLockingEnabled", "(", "true", ")", ";", "BodyDatabaseHelper", "bodyHelper", "=", "new", "BodyDatabaseHelper", "(", "context", ",", "BODY_DATABASE_NAME", ")", ";", "mBodyDatabase", "=", "bodyHelper", ".", "getWritableDatabase", "(", ")", ";", "if", "(", "mBodyDatabase", "!", "=", "null", ")", "{", "mBodyDatabase", ".", "setLockingEnabled", "(", "true", ")", ";", "String", "bodyFileName", "=", "mBodyDatabase", ".", "getPath", "(", ")", ";", "mDatabase", ".", "execSQL", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "bodyFileName", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "}", "return", "mDatabase", ";", "}", "</s>"]
["<s>", "BodyDatabaseHelper", "(", "Context", "context", ",", "String", "name", ")", "{", "super", "(", "context", ",", "name", ",", "null", ",", "BODY_DATABASE_VERSION", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "SQLiteDatabase", "db", ")", "{", "createBodyTable", "(", "db", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onUpgrade", "(", "SQLiteDatabase", "db", ",", "int", "oldVersion", ",", "int", "newVersion", ")", "{", "upgradeBodyTable", "(", "db", ",", "oldVersion", ",", "newVersion", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onOpen", "(", "SQLiteDatabase", "db", ")", "{", "}", "</s>"]
["<s>", "DatabaseHelper", "(", "Context", "context", ",", "String", "name", ")", "{", "super", "(", "context", ",", "name", ",", "null", ",", "DATABASE_VERSION", ")", ";", "mContext", "=", "context", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onCreate", "(", "SQLiteDatabase", "db", ")", "{", "createMessageTable", "(", "db", ")", ";", "createAttachmentTable", "(", "db", ")", ";", "createMailboxTable", "(", "db", ")", ";", "createHostAuthTable", "(", "db", ")", ";", "createAccountTable", "(", "db", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onUpgrade", "(", "SQLiteDatabase", "db", ",", "int", "oldVersion", ",", "int", "newVersion", ")", "{", "if", "(", "oldVersion", "<", "<NUM_LIT:5>", ")", "{", "android", ".", "accounts", ".", "Account", "[", "]", "accounts", "=", "AccountManager", ".", "get", "(", "mContext", ")", ".", "getAccountsByType", "(", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ")", ";", "for", "(", "android", ".", "accounts", ".", "Account", "account", ":", "accounts", ")", "{", "AccountManager", ".", "get", "(", "mContext", ")", ".", "removeAccount", "(", "account", ",", "null", ",", "null", ")", ";", "}", "resetMessageTable", "(", "db", ",", "oldVersion", ",", "newVersion", ")", ";", "resetAttachmentTable", "(", "db", ",", "oldVersion", ",", "newVersion", ")", ";", "resetMailboxTable", "(", "db", ",", "oldVersion", ",", "newVersion", ")", ";", "resetHostAuthTable", "(", "db", ",", "oldVersion", ",", "newVersion", ")", ";", "resetAccountTable", "(", "db", ",", "oldVersion", ",", "newVersion", ")", ";", "return", ";", "}", "if", "(", "oldVersion", "=", "=", "<NUM_LIT:5>", ")", "{", "try", "{", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "SyncColumns", ".", "SERVER_TIMESTAMP", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:;>", "\"", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "UPDATED_TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "SyncColumns", ".", "SERVER_TIMESTAMP", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:;>", "\"", ")", ";", "db", ".", "execSQL", "(", "\"", "<STR_LIT>", "\"", "+", "Message", ".", "DELETED_TABLE_NAME", "+", "\"", "<STR_LIT>", "\"", "+", "SyncColumns", ".", "SERVER_TIMESTAMP", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:;>", "\"", ")", ";", "}", "catch", "(", "SQLException", "e", ")", "{", "Log", ".", "w", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "oldVersion", "=", "<NUM_LIT:6>", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onOpen", "(", "SQLiteDatabase", "db", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "delete", "(", "Uri", "uri", ",", "String", "selection", ",", "String", "[", "]", "selectionArgs", ")", "{", "final", "int", "match", "=", "sURIMatcher", ".", "match", "(", "uri", ")", ";", "Context", "context", "=", "getContext", "(", ")", ";", "SQLiteDatabase", "db", "=", "getDatabase", "(", "context", ")", ";", "int", "table", "=", "match", ">", ">", "BASE_SHIFT", ";", "String", "id", "=", "\"", "<STR_LIT:0>", "\"", ";", "boolean", "messageDeletion", "=", "false", ";", "if", "(", "Email", ".", "LOGD", ")", "{", "Log", ".", "v", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "uri", "+", "\"", "<STR_LIT>", "\"", "+", "match", ")", ";", "}", "int", "result", "=", "-", "1", ";", "try", "{", "switch", "(", "match", ")", "{", "case", "MAILBOX_ID", ":", "case", "MAILBOX", ":", "case", "ACCOUNT_ID", ":", "case", "ACCOUNT", ":", "case", "MESSAGE", ":", "case", "SYNCED_MESSAGE_ID", ":", "case", "MESSAGE_ID", ":", "messageDeletion", "=", "true", ";", "db", ".", "beginTransaction", "(", ")", ";", "break", ";", "}", "switch", "(", "match", ")", "{", "case", "BODY_ID", ":", "case", "DELETED_MESSAGE_ID", ":", "case", "SYNCED_MESSAGE_ID", ":", "case", "MESSAGE_ID", ":", "case", "UPDATED_MESSAGE_ID", ":", "case", "ATTACHMENT_ID", ":", "case", "MAILBOX_ID", ":", "case", "ACCOUNT_ID", ":", "case", "HOSTAUTH_ID", ":", "id", "=", "uri", ".", "getPathSegments", "(", ")", ".", "get", "(", "1", ")", ";", "if", "(", "match", "=", "=", "SYNCED_MESSAGE_ID", ")", "{", "db", ".", "execSQL", "(", "DELETED_MESSAGE_INSERT", "+", "id", ")", ";", "db", ".", "execSQL", "(", "UPDATED_MESSAGE_DELETE", "+", "id", ")", ";", "}", "result", "=", "db", ".", "delete", "(", "TABLE_NAMES", "[", "table", "]", ",", "whereWithId", "(", "id", ",", "selection", ")", ",", "selectionArgs", ")", ";", "break", ";", "case", "ATTACHMENTS_MESSAGE_ID", ":", "id", "=", "uri", ".", "getPathSegments", "(", ")", ".", "get", "(", "<NUM_LIT:2>", ")", ";", "result", "=", "db", ".", "delete", "(", "TABLE_NAMES", "[", "table", "]", ",", "whereWith", "(", "Attachment", ".", "MESSAGE_KEY", "+", "\"", "<STR_LIT:=>", "\"", "+", "id", ",", "selection", ")", ",", "selectionArgs", ")", ";", "break", ";", "case", "BODY", ":", "case", "MESSAGE", ":", "case", "DELETED_MESSAGE", ":", "case", "UPDATED_MESSAGE", ":", "case", "ATTACHMENT", ":", "case", "MAILBOX", ":", "case", "ACCOUNT", ":", "case", "HOSTAUTH", ":", "result", "=", "db", ".", "delete", "(", "TABLE_NAMES", "[", "table", "]", ",", "selection", ",", "selectionArgs", ")", ";", "break", ";", "default", ":", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "uri", ")", ";", "}", "if", "(", "messageDeletion", ")", "{", "if", "(", "match", "=", "=", "MESSAGE_ID", ")", "{", "db", ".", "execSQL", "(", "DELETE_BODY", "+", "id", ")", ";", "}", "else", "{", "db", ".", "execSQL", "(", "DELETE_ORPHAN_BODIES", ")", ";", "}", "db", ".", "setTransactionSuccessful", "(", ")", ";", "}", "}", "finally", "{", "if", "(", "messageDeletion", ")", "{", "db", ".", "endTransaction", "(", ")", ";", "}", "}", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ".", "notifyChange", "(", "uri", ",", "null", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getType", "(", "Uri", "uri", ")", "{", "int", "match", "=", "sURIMatcher", ".", "match", "(", "uri", ")", ";", "switch", "(", "match", ")", "{", "case", "BODY_ID", ":", "return", "\"", "<STR_LIT>", "\"", ";", "case", "BODY", ":", "return", "\"", "<STR_LIT>", "\"", ";", "case", "UPDATED_MESSAGE_ID", ":", "case", "MESSAGE_ID", ":", "return", "\"", "<STR_LIT>", "\"", ";", "case", "MAILBOX_MESSAGES", ":", "case", "UPDATED_MESSAGE", ":", "case", "MESSAGE", ":", "return", "\"", "<STR_LIT>", "\"", ";", "case", "ACCOUNT_MAILBOXES", ":", "case", "MAILBOX", ":", "return", "\"", "<STR_LIT>", "\"", ";", "case", "MAILBOX_ID", ":", "return", "\"", "<STR_LIT>", "\"", ";", "case", "ACCOUNT", ":", "return", "\"", "<STR_LIT>", "\"", ";", "case", "ACCOUNT_ID", ":", "return", "\"", "<STR_LIT>", "\"", ";", "case", "ATTACHMENTS_MESSAGE_ID", ":", "case", "ATTACHMENT", ":", "return", "\"", "<STR_LIT>", "\"", ";", "case", "ATTACHMENT_ID", ":", "return", "\"", "<STR_LIT>", "\"", ";", "case", "HOSTAUTH", ":", "return", "\"", "<STR_LIT>", "\"", ";", "case", "HOSTAUTH_ID", ":", "return", "\"", "<STR_LIT>", "\"", ";", "default", ":", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "uri", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "Uri", "insert", "(", "Uri", "uri", ",", "ContentValues", "values", ")", "{", "int", "match", "=", "sURIMatcher", ".", "match", "(", "uri", ")", ";", "Context", "context", "=", "getContext", "(", ")", ";", "SQLiteDatabase", "db", "=", "getDatabase", "(", "context", ")", ";", "int", "table", "=", "match", ">", ">", "BASE_SHIFT", ";", "long", "id", ";", "if", "(", "Email", ".", "LOGD", ")", "{", "Log", ".", "v", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "uri", "+", "\"", "<STR_LIT>", "\"", "+", "match", ")", ";", "}", "Uri", "resultUri", "=", "null", ";", "switch", "(", "match", ")", "{", "case", "BODY", ":", "case", "MESSAGE", ":", "case", "ATTACHMENT", ":", "case", "MAILBOX", ":", "case", "ACCOUNT", ":", "case", "HOSTAUTH", ":", "id", "=", "db", ".", "insert", "(", "TABLE_NAMES", "[", "table", "]", ",", "\"", "<STR_LIT>", "\"", ",", "values", ")", ";", "resultUri", "=", "ContentUris", ".", "withAppendedId", "(", "uri", ",", "id", ")", ";", "break", ";", "case", "MAILBOX_ID", ":", "id", "=", "Long", ".", "parseLong", "(", "uri", ".", "getPathSegments", "(", ")", ".", "get", "(", "1", ")", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "MAILBOX_KEY", ",", "id", ")", ";", "resultUri", "=", "insert", "(", "Message", ".", "CONTENT_URI", ",", "values", ")", ";", "break", ";", "case", "MESSAGE_ID", ":", "id", "=", "Long", ".", "parseLong", "(", "uri", ".", "getPathSegments", "(", ")", ".", "get", "(", "1", ")", ")", ";", "values", ".", "put", "(", "AttachmentColumns", ".", "MESSAGE_KEY", ",", "id", ")", ";", "resultUri", "=", "insert", "(", "Attachment", ".", "CONTENT_URI", ",", "values", ")", ";", "break", ";", "case", "ACCOUNT_ID", ":", "id", "=", "Long", ".", "parseLong", "(", "uri", ".", "getPathSegments", "(", ")", ".", "get", "(", "1", ")", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "ACCOUNT_KEY", ",", "id", ")", ";", "resultUri", "=", "insert", "(", "Mailbox", ".", "CONTENT_URI", ",", "values", ")", ";", "break", ";", "case", "ATTACHMENTS_MESSAGE_ID", ":", "id", "=", "db", ".", "insert", "(", "TABLE_NAMES", "[", "table", "]", ",", "\"", "<STR_LIT>", "\"", ",", "values", ")", ";", "resultUri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "CONTENT_URI", ",", "id", ")", ";", "break", ";", "default", ":", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "uri", ")", ";", "}", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ".", "notifyChange", "(", "uri", ",", "null", ")", ";", "return", "resultUri", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onCreate", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Cursor", "query", "(", "Uri", "uri", ",", "String", "[", "]", "projection", ",", "String", "selection", ",", "String", "[", "]", "selectionArgs", ",", "String", "sortOrder", ")", "{", "Cursor", "c", "=", "null", ";", "Uri", "notificationUri", "=", "EmailContent", ".", "CONTENT_URI", ";", "int", "match", "=", "sURIMatcher", ".", "match", "(", "uri", ")", ";", "Context", "context", "=", "getContext", "(", ")", ";", "SQLiteDatabase", "db", "=", "getDatabase", "(", "context", ")", ";", "int", "table", "=", "match", ">", ">", "BASE_SHIFT", ";", "String", "id", ";", "if", "(", "Email", ".", "LOGD", ")", "{", "Log", ".", "v", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "uri", "+", "\"", "<STR_LIT>", "\"", "+", "match", ")", ";", "}", "switch", "(", "match", ")", "{", "case", "BODY", ":", "case", "MESSAGE", ":", "case", "UPDATED_MESSAGE", ":", "case", "DELETED_MESSAGE", ":", "case", "ATTACHMENT", ":", "case", "MAILBOX", ":", "case", "ACCOUNT", ":", "case", "HOSTAUTH", ":", "c", "=", "db", ".", "query", "(", "TABLE_NAMES", "[", "table", "]", ",", "projection", ",", "selection", ",", "selectionArgs", ",", "null", ",", "null", ",", "sortOrder", ")", ";", "break", ";", "case", "BODY_ID", ":", "case", "MESSAGE_ID", ":", "case", "DELETED_MESSAGE_ID", ":", "case", "UPDATED_MESSAGE_ID", ":", "case", "ATTACHMENT_ID", ":", "case", "MAILBOX_ID", ":", "case", "ACCOUNT_ID", ":", "case", "HOSTAUTH_ID", ":", "id", "=", "uri", ".", "getPathSegments", "(", ")", ".", "get", "(", "1", ")", ";", "c", "=", "db", ".", "query", "(", "TABLE_NAMES", "[", "table", "]", ",", "projection", ",", "whereWithId", "(", "id", ",", "selection", ")", ",", "selectionArgs", ",", "null", ",", "null", ",", "sortOrder", ")", ";", "break", ";", "case", "ATTACHMENTS_MESSAGE_ID", ":", "id", "=", "uri", ".", "getPathSegments", "(", ")", ".", "get", "(", "<NUM_LIT:2>", ")", ";", "c", "=", "db", ".", "query", "(", "Attachment", ".", "TABLE_NAME", ",", "projection", ",", "whereWith", "(", "Attachment", ".", "MESSAGE_KEY", "+", "\"", "<STR_LIT:=>", "\"", "+", "id", ",", "selection", ")", ",", "selectionArgs", ",", "null", ",", "null", ",", "sortOrder", ")", ";", "break", ";", "default", ":", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "uri", ")", ";", "}", "if", "(", "(", "c", "!", "=", "null", ")", "&", "&", "!", "isTemporary", "(", ")", ")", "{", "c", ".", "setNotificationUri", "(", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ",", "notificationUri", ")", ";", "}", "return", "c", ";", "}", "</s>"]
["<s>", "private", "String", "whereWithId", "(", "String", "id", ",", "String", "selection", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", "<NUM_LIT>", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sb", ".", "append", "(", "id", ")", ";", "if", "(", "selection", "!", "=", "null", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sb", ".", "append", "(", "selection", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT:)>", ")", ";", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "private", "String", "whereWith", "(", "String", "where", ",", "String", "selection", ")", "{", "if", "(", "selection", "=", "=", "null", ")", "{", "return", "where", ";", "}", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", "where", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sb", ".", "append", "(", "selection", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT:)>", ")", ";", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "update", "(", "Uri", "uri", ",", "ContentValues", "values", ",", "String", "selection", ",", "String", "[", "]", "selectionArgs", ")", "{", "int", "match", "=", "sURIMatcher", ".", "match", "(", "uri", ")", ";", "Context", "context", "=", "getContext", "(", ")", ";", "SQLiteDatabase", "db", "=", "getDatabase", "(", "context", ")", ";", "int", "table", "=", "match", ">", ">", "BASE_SHIFT", ";", "int", "result", ";", "if", "(", "Email", ".", "LOGD", ")", "{", "Log", ".", "v", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "uri", "+", "\"", "<STR_LIT>", "\"", "+", "match", ")", ";", "}", "if", "(", "match", "=", "=", "MAILBOX_ID", "|", "|", "match", "=", "=", "MAILBOX", ")", "{", "values", ".", "remove", "(", "MailboxColumns", ".", "UNREAD_COUNT", ")", ";", "}", "String", "id", ";", "switch", "(", "match", ")", "{", "case", "MAILBOX_ID_ADD_TO_FIELD", ":", "case", "ACCOUNT_ID_ADD_TO_FIELD", ":", "db", ".", "beginTransaction", "(", ")", ";", "id", "=", "uri", ".", "getPathSegments", "(", ")", ".", "get", "(", "1", ")", ";", "String", "field", "=", "values", ".", "getAsString", "(", "EmailContent", ".", "FIELD_COLUMN_NAME", ")", ";", "Long", "add", "=", "values", ".", "getAsLong", "(", "EmailContent", ".", "ADD_COLUMN_NAME", ")", ";", "if", "(", "field", "=", "=", "null", "|", "|", "add", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "uri", ")", ";", "}", "Cursor", "c", "=", "db", ".", "query", "(", "TABLE_NAMES", "[", "table", "]", ",", "new", "String", "[", "]", "{", "EmailContent", ".", "RECORD_ID", ",", "field", "}", ",", "whereWithId", "(", "id", ",", "selection", ")", ",", "selectionArgs", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "result", "=", "0", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "String", "[", "]", "bind", "=", "new", "String", "[", "1", "]", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "bind", "[", "0", "]", "=", "c", ".", "getString", "(", "0", ")", ";", "long", "value", "=", "c", ".", "getLong", "(", "1", ")", "+", "add", ";", "cv", ".", "put", "(", "field", ",", "value", ")", ";", "result", "=", "db", ".", "update", "(", "TABLE_NAMES", "[", "table", "]", ",", "cv", ",", "ID_EQUALS", ",", "bind", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "db", ".", "setTransactionSuccessful", "(", ")", ";", "db", ".", "endTransaction", "(", ")", ";", "break", ";", "case", "BODY_ID", ":", "case", "MESSAGE_ID", ":", "case", "SYNCED_MESSAGE_ID", ":", "case", "UPDATED_MESSAGE_ID", ":", "case", "ATTACHMENT_ID", ":", "case", "MAILBOX_ID", ":", "case", "ACCOUNT_ID", ":", "case", "HOSTAUTH_ID", ":", "id", "=", "uri", ".", "getPathSegments", "(", ")", ".", "get", "(", "1", ")", ";", "if", "(", "match", "=", "=", "SYNCED_MESSAGE_ID", ")", "{", "db", ".", "execSQL", "(", "UPDATED_MESSAGE_INSERT", "+", "id", ")", ";", "}", "else", "if", "(", "match", "=", "=", "MESSAGE_ID", ")", "{", "db", ".", "execSQL", "(", "UPDATED_MESSAGE_DELETE", "+", "id", ")", ";", "}", "result", "=", "db", ".", "update", "(", "TABLE_NAMES", "[", "table", "]", ",", "values", ",", "whereWithId", "(", "id", ",", "selection", ")", ",", "selectionArgs", ")", ";", "break", ";", "case", "BODY", ":", "case", "MESSAGE", ":", "case", "UPDATED_MESSAGE", ":", "case", "ATTACHMENT", ":", "case", "MAILBOX", ":", "case", "ACCOUNT", ":", "case", "HOSTAUTH", ":", "result", "=", "db", ".", "update", "(", "TABLE_NAMES", "[", "table", "]", ",", "values", ",", "selection", ",", "selectionArgs", ")", ";", "break", ";", "default", ":", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "uri", ")", ";", "}", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ".", "notifyChange", "(", "uri", ",", "null", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContentProviderResult", "[", "]", "applyBatch", "(", "ArrayList", "<", "ContentProviderOperation", ">", "operations", ")", "throws", "OperationApplicationException", "{", "Context", "context", "=", "getContext", "(", ")", ";", "SQLiteDatabase", "db", "=", "getDatabase", "(", "context", ")", ";", "db", ".", "beginTransaction", "(", ")", ";", "try", "{", "ContentProviderResult", "[", "]", "results", "=", "super", ".", "applyBatch", "(", "operations", ")", ";", "db", ".", "setTransactionSuccessful", "(", ")", ";", "return", "results", ";", "}", "finally", "{", "db", ".", "endTransaction", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "Uri", "getAttachmentUri", "(", "long", "accountId", ",", "long", "id", ")", "{", "return", "CONTENT_URI", ".", "buildUpon", "(", ")", ".", "appendPath", "(", "Long", ".", "toString", "(", "accountId", ")", ")", ".", "appendPath", "(", "Long", ".", "toString", "(", "id", ")", ")", ".", "appendPath", "(", "FORMAT_RAW", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Uri", "getAttachmentThumbnailUri", "(", "long", "accountId", ",", "long", "id", ",", "int", "width", ",", "int", "height", ")", "{", "return", "CONTENT_URI", ".", "buildUpon", "(", ")", ".", "appendPath", "(", "Long", ".", "toString", "(", "accountId", ")", ")", ".", "appendPath", "(", "Long", ".", "toString", "(", "id", ")", ")", ".", "appendPath", "(", "FORMAT_THUMBNAIL", ")", ".", "appendPath", "(", "Integer", ".", "toString", "(", "width", ")", ")", ".", "appendPath", "(", "Integer", ".", "toString", "(", "height", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "File", "getAttachmentFilename", "(", "Context", "context", ",", "long", "accountId", ",", "long", "attachmentId", ")", "{", "return", "new", "File", "(", "getAttachmentDirectory", "(", "context", ",", "accountId", ")", ",", "Long", ".", "toString", "(", "attachmentId", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "File", "getAttachmentDirectory", "(", "Context", "context", ",", "long", "accountId", ")", "{", "return", "context", ".", "getDatabasePath", "(", "accountId", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onCreate", "(", ")", "{", "File", "[", "]", "files", "=", "getContext", "(", ")", ".", "getCacheDir", "(", ")", ".", "listFiles", "(", ")", ";", "for", "(", "File", "file", ":", "files", ")", "{", "String", "filename", "=", "file", ".", "getName", "(", ")", ";", "if", "(", "filename", ".", "endsWith", "(", "\"", "<STR_LIT>", "\"", ")", "|", "|", "filename", ".", "startsWith", "(", "\"", "<STR_LIT:_>", "\"", ")", ")", "{", "file", ".", "delete", "(", ")", ";", "}", "}", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getType", "(", "Uri", "uri", ")", "{", "List", "<", "String", ">", "segments", "=", "uri", ".", "getPathSegments", "(", ")", ";", "String", "accountId", "=", "segments", ".", "get", "(", "0", ")", ";", "String", "id", "=", "segments", ".", "get", "(", "1", ")", ";", "String", "format", "=", "segments", ".", "get", "(", "<NUM_LIT:2>", ")", ";", "if", "(", "FORMAT_THUMBNAIL", ".", "equals", "(", "format", ")", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "else", "{", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "CONTENT_URI", ",", "Long", ".", "parseLong", "(", "id", ")", ")", ";", "Cursor", "c", "=", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "PROJECTION_MIME_TYPE", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "return", "c", ".", "getString", "(", "0", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "return", "null", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "ParcelFileDescriptor", "openFile", "(", "Uri", "uri", ",", "String", "mode", ")", "throws", "FileNotFoundException", "{", "List", "<", "String", ">", "segments", "=", "uri", ".", "getPathSegments", "(", ")", ";", "String", "accountId", "=", "segments", ".", "get", "(", "0", ")", ";", "String", "id", "=", "segments", ".", "get", "(", "1", ")", ";", "String", "format", "=", "segments", ".", "get", "(", "<NUM_LIT:2>", ")", ";", "if", "(", "FORMAT_THUMBNAIL", ".", "equals", "(", "format", ")", ")", "{", "int", "width", "=", "Integer", ".", "parseInt", "(", "segments", ".", "get", "(", "<NUM_LIT:3>", ")", ")", ";", "int", "height", "=", "Integer", ".", "parseInt", "(", "segments", ".", "get", "(", "<NUM_LIT:4>", ")", ")", ";", "String", "filename", "=", "\"", "<STR_LIT:_>", "\"", "+", "accountId", "+", "\"", "<STR_LIT:_>", "\"", "+", "id", ";", "File", "dir", "=", "getContext", "(", ")", ".", "getCacheDir", "(", ")", ";", "File", "file", "=", "new", "File", "(", "dir", ",", "filename", ")", ";", "if", "(", "!", "file", ".", "exists", "(", ")", ")", "{", "Uri", "attachmentUri", "=", "getAttachmentUri", "(", "Long", ".", "parseLong", "(", "accountId", ")", ",", "Long", ".", "parseLong", "(", "id", ")", ")", ";", "Cursor", "c", "=", "query", "(", "attachmentUri", ",", "new", "String", "[", "]", "{", "AttachmentProviderColumns", ".", "DATA", "}", ",", "null", ",", "null", ",", "null", ")", ";", "if", "(", "c", "!", "=", "null", ")", "{", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "attachmentUri", "=", "Uri", ".", "parse", "(", "c", ".", "getString", "(", "0", ")", ")", ";", "}", "else", "{", "return", "null", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "String", "type", "=", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ".", "getType", "(", "attachmentUri", ")", ";", "try", "{", "InputStream", "in", "=", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ".", "openInputStream", "(", "attachmentUri", ")", ";", "Bitmap", "thumbnail", "=", "createThumbnail", "(", "type", ",", "in", ")", ";", "thumbnail", "=", "Bitmap", ".", "createScaledBitmap", "(", "thumbnail", ",", "width", ",", "height", ",", "true", ")", ";", "FileOutputStream", "out", "=", "new", "FileOutputStream", "(", "file", ")", ";", "thumbnail", ".", "compress", "(", "Bitmap", ".", "CompressFormat", ".", "PNG", ",", "<NUM_LIT:100>", ",", "out", ")", ";", "out", ".", "close", "(", ")", ";", "in", ".", "close", "(", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "return", "null", ";", "}", "}", "return", "ParcelFileDescriptor", ".", "open", "(", "file", ",", "ParcelFileDescriptor", ".", "MODE_READ_ONLY", ")", ";", "}", "else", "{", "return", "ParcelFileDescriptor", ".", "open", "(", "new", "File", "(", "getContext", "(", ")", ".", "getDatabasePath", "(", "accountId", "+", "\"", "<STR_LIT>", "\"", ")", ",", "id", ")", ",", "ParcelFileDescriptor", ".", "MODE_READ_ONLY", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "delete", "(", "Uri", "uri", ",", "String", "arg1", ",", "String", "[", "]", "arg2", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Uri", "insert", "(", "Uri", "uri", ",", "ContentValues", "values", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Cursor", "query", "(", "Uri", "uri", ",", "String", "[", "]", "projection", ",", "String", "selection", ",", "String", "[", "]", "selectionArgs", ",", "String", "sortOrder", ")", "{", "if", "(", "projection", "=", "=", "null", ")", "{", "projection", "=", "new", "String", "[", "]", "{", "AttachmentProviderColumns", ".", "_ID", ",", "AttachmentProviderColumns", ".", "DATA", ",", "}", ";", "}", "List", "<", "String", ">", "segments", "=", "uri", ".", "getPathSegments", "(", ")", ";", "String", "accountId", "=", "segments", ".", "get", "(", "0", ")", ";", "String", "id", "=", "segments", ".", "get", "(", "1", ")", ";", "String", "format", "=", "segments", ".", "get", "(", "<NUM_LIT:2>", ")", ";", "String", "name", "=", "null", ";", "int", "size", "=", "-", "1", ";", "String", "contentUri", "=", "null", ";", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "CONTENT_URI", ",", "Long", ".", "parseLong", "(", "id", ")", ")", ";", "Cursor", "c", "=", "getContext", "(", ")", ".", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "PROJECTION_QUERY", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "name", "=", "c", ".", "getString", "(", "0", ")", ";", "size", "=", "c", ".", "getInt", "(", "1", ")", ";", "contentUri", "=", "c", ".", "getString", "(", "<NUM_LIT:2>", ")", ";", "}", "else", "{", "return", "null", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "MatrixCursor", "ret", "=", "new", "MatrixCursor", "(", "projection", ")", ";", "Object", "[", "]", "values", "=", "new", "Object", "[", "projection", ".", "length", "]", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "projection", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "String", "column", "=", "projection", "[", "i", "]", ";", "if", "(", "AttachmentProviderColumns", ".", "_ID", ".", "equals", "(", "column", ")", ")", "{", "values", "[", "i", "]", "=", "id", ";", "}", "else", "if", "(", "AttachmentProviderColumns", ".", "DATA", ".", "equals", "(", "column", ")", ")", "{", "values", "[", "i", "]", "=", "contentUri", ";", "}", "else", "if", "(", "AttachmentProviderColumns", ".", "DISPLAY_NAME", ".", "equals", "(", "column", ")", ")", "{", "values", "[", "i", "]", "=", "name", ";", "}", "else", "if", "(", "AttachmentProviderColumns", ".", "SIZE", ".", "equals", "(", "column", ")", ")", "{", "values", "[", "i", "]", "=", "size", ";", "}", "}", "ret", ".", "addRow", "(", "values", ")", ";", "return", "ret", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "update", "(", "Uri", "uri", ",", "ContentValues", "values", ",", "String", "selection", ",", "String", "[", "]", "selectionArgs", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "private", "Bitmap", "createThumbnail", "(", "String", "type", ",", "InputStream", "data", ")", "{", "if", "(", "MimeUtility", ".", "mimeTypeMatches", "(", "type", ",", "\"", "<STR_LIT>", "\"", ")", ")", "{", "return", "createImageThumbnail", "(", "data", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "private", "Bitmap", "createImageThumbnail", "(", "InputStream", "data", ")", "{", "try", "{", "Bitmap", "bitmap", "=", "BitmapFactory", ".", "decodeStream", "(", "data", ")", ";", "return", "bitmap", ";", "}", "catch", "(", "OutOfMemoryError", "oome", ")", "{", "return", "null", ";", "}", "catch", "(", "Exception", "e", ")", "{", "return", "null", ";", "}", "}", "</s>"]
["<s>", "public", "static", "Uri", "resolveAttachmentIdToContentUri", "(", "ContentResolver", "resolver", ",", "Uri", "attachmentUri", ")", "{", "Cursor", "c", "=", "resolver", ".", "query", "(", "attachmentUri", ",", "new", "String", "[", "]", "{", "AttachmentProvider", ".", "AttachmentProviderColumns", ".", "DATA", "}", ",", "null", ",", "null", ",", "null", ")", ";", "if", "(", "c", "!", "=", "null", ")", "{", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "return", "Uri", ".", "parse", "(", "c", ".", "getString", "(", "0", ")", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "return", "attachmentUri", ";", "}", "</s>"]
["<s>", "public", "static", "void", "deleteAllAttachmentFiles", "(", "Context", "context", ",", "long", "accountId", ",", "long", "messageId", ")", "{", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "MESSAGE_ID_URI", ",", "messageId", ")", ";", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "Attachment", ".", "ID_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "attachmentId", "=", "c", ".", "getLong", "(", "Attachment", ".", "ID_PROJECTION_COLUMN", ")", ";", "File", "attachmentFile", "=", "getAttachmentFilename", "(", "context", ",", "accountId", ",", "attachmentId", ")", ";", "attachmentFile", ".", "delete", "(", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "deleteAllMailboxAttachmentFiles", "(", "Context", "context", ",", "long", "accountId", ",", "long", "mailboxId", ")", "{", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "Message", ".", "CONTENT_URI", ",", "Message", ".", "ID_COLUMN_PROJECTION", ",", "MessageColumns", ".", "MAILBOX_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "mailboxId", ")", "}", ",", "null", ")", ";", "try", "{", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "messageId", "=", "c", ".", "getLong", "(", "Message", ".", "ID_PROJECTION_COLUMN", ")", ";", "deleteAllAttachmentFiles", "(", "context", ",", "accountId", ",", "messageId", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "abstract", "ContentValues", "toContentValues", "(", ")", ";", "</s>"]
["<s>", "public", "abstract", "<", "T", "extends", "EmailContent", ">", "T", "restore", "(", "Cursor", "cursor", ")", ";", "</s>"]
["<s>", "public", "Uri", "getUri", "(", ")", "{", "if", "(", "mUri", "=", "=", "null", ")", "{", "mUri", "=", "ContentUris", ".", "withAppendedId", "(", "mBaseUri", ",", "mId", ")", ";", "}", "return", "mUri", ";", "}", "</s>"]
["<s>", "public", "boolean", "isSaved", "(", ")", "{", "return", "mId", "!", "=", "NOT_SAVED", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "static", "public", "<", "T", "extends", "EmailContent", ">", "T", "getContent", "(", "Cursor", "cursor", ",", "Class", "<", "T", ">", "klass", ")", "{", "try", "{", "T", "content", "=", "klass", ".", "newInstance", "(", ")", ";", "content", ".", "mId", "=", "cursor", ".", "getLong", "(", "0", ")", ";", "return", "(", "T", ")", "content", ".", "restore", "(", "cursor", ")", ";", "}", "catch", "(", "IllegalAccessException", "e", ")", "{", "e", ".", "printStackTrace", "(", ")", ";", "}", "catch", "(", "InstantiationException", "e", ")", "{", "e", ".", "printStackTrace", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "Uri", "save", "(", "Context", "context", ")", "{", "if", "(", "isSaved", "(", ")", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "Uri", "res", "=", "context", ".", "getContentResolver", "(", ")", ".", "insert", "(", "mBaseUri", ",", "toContentValues", "(", ")", ")", ";", "mId", "=", "Long", ".", "parseLong", "(", "res", ".", "getPathSegments", "(", ")", ".", "get", "(", "1", ")", ")", ";", "return", "res", ";", "}", "</s>"]
["<s>", "public", "int", "update", "(", "Context", "context", ",", "ContentValues", "contentValues", ")", "{", "if", "(", "!", "isSaved", "(", ")", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "return", "context", ".", "getContentResolver", "(", ")", ".", "update", "(", "getUri", "(", ")", ",", "contentValues", ",", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "static", "public", "int", "update", "(", "Context", "context", ",", "Uri", "baseUri", ",", "long", "id", ",", "ContentValues", "contentValues", ")", "{", "return", "context", ".", "getContentResolver", "(", ")", ".", "update", "(", "ContentUris", ".", "withAppendedId", "(", "baseUri", ",", "id", ")", ",", "contentValues", ",", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "static", "public", "int", "count", "(", "Context", "context", ",", "Uri", "uri", ",", "String", "selection", ",", "String", "[", "]", "selectionArgs", ")", "{", "Cursor", "cursor", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "COUNT_COLUMNS", ",", "selection", ",", "selectionArgs", ",", "null", ")", ";", "try", "{", "if", "(", "!", "cursor", ".", "moveToFirst", "(", ")", ")", "{", "return", "0", ";", "}", "return", "cursor", ".", "getInt", "(", "0", ")", ";", "}", "finally", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "EmailContent", "(", ")", "{", "}", "</s>"]
["<s>", "public", "Body", "(", ")", "{", "mBaseUri", "=", "CONTENT_URI", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContentValues", "toContentValues", "(", ")", "{", "ContentValues", "values", "=", "new", "ContentValues", "(", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "MESSAGE_KEY", ",", "mMessageKey", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "HTML_CONTENT", ",", "mHtmlContent", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "TEXT_CONTENT", ",", "mTextContent", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "HTML_REPLY", ",", "mHtmlReply", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "TEXT_REPLY", ",", "mTextReply", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "SOURCE_MESSAGE_KEY", ",", "mSourceKey", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "INTRO_TEXT", ",", "mIntroText", ")", ";", "return", "values", ";", "}", "</s>"]
["<s>", "private", "static", "Body", "restoreBodyWithCursor", "(", "Cursor", "cursor", ")", "{", "try", "{", "if", "(", "cursor", ".", "moveToFirst", "(", ")", ")", "{", "return", "getContent", "(", "cursor", ",", "Body", ".", "class", ")", ";", "}", "else", "{", "return", "null", ";", "}", "}", "finally", "{", "cursor", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "Body", "restoreBodyWithId", "(", "Context", "context", ",", "long", "id", ")", "{", "Uri", "u", "=", "ContentUris", ".", "withAppendedId", "(", "Body", ".", "CONTENT_URI", ",", "id", ")", ";", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "u", ",", "Body", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "return", "restoreBodyWithCursor", "(", "c", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Body", "restoreBodyWithMessageId", "(", "Context", "context", ",", "long", "messageId", ")", "{", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "Body", ".", "CONTENT_URI", ",", "Body", ".", "CONTENT_PROJECTION", ",", "Body", ".", "MESSAGE_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "messageId", ")", "}", ",", "null", ")", ";", "return", "restoreBodyWithCursor", "(", "c", ")", ";", "}", "</s>"]
["<s>", "public", "static", "long", "lookupBodyIdWithMessageId", "(", "ContentResolver", "resolver", ",", "long", "messageId", ")", "{", "Cursor", "c", "=", "resolver", ".", "query", "(", "Body", ".", "CONTENT_URI", ",", "ID_PROJECTION", ",", "Body", ".", "MESSAGE_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "messageId", ")", "}", ",", "null", ")", ";", "try", "{", "return", "c", ".", "moveToFirst", "(", ")", "?", "c", ".", "getLong", "(", "ID_PROJECTION_COLUMN", ")", ":", "-", "1", ";", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "updateBodyWithMessageId", "(", "Context", "context", ",", "long", "messageId", ",", "ContentValues", "values", ")", "{", "ContentResolver", "resolver", "=", "context", ".", "getContentResolver", "(", ")", ";", "long", "bodyId", "=", "lookupBodyIdWithMessageId", "(", "resolver", ",", "messageId", ")", ";", "values", ".", "put", "(", "BodyColumns", ".", "MESSAGE_KEY", ",", "messageId", ")", ";", "if", "(", "bodyId", "=", "=", "-", "1", ")", "{", "resolver", ".", "insert", "(", "CONTENT_URI", ",", "values", ")", ";", "}", "else", "{", "final", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "CONTENT_URI", ",", "bodyId", ")", ";", "resolver", ".", "update", "(", "uri", ",", "values", ",", "null", ",", "null", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "String", "restoreTextWithMessageId", "(", "Context", "context", ",", "long", "messageId", ",", "String", "[", "]", "projection", ")", "{", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "Body", ".", "CONTENT_URI", ",", "projection", ",", "Body", ".", "MESSAGE_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "messageId", ")", "}", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "return", "c", ".", "getString", "(", "COMMON_PROJECTION_COLUMN_TEXT", ")", ";", "}", "else", "{", "return", "null", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "restoreBodyTextWithMessageId", "(", "Context", "context", ",", "long", "messageId", ")", "{", "return", "restoreTextWithMessageId", "(", "context", ",", "messageId", ",", "Body", ".", "COMMON_PROJECTION_TEXT", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "restoreBodyHtmlWithMessageId", "(", "Context", "context", ",", "long", "messageId", ")", "{", "return", "restoreTextWithMessageId", "(", "context", ",", "messageId", ",", "Body", ".", "COMMON_PROJECTION_HTML", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "restoreReplyTextWithMessageId", "(", "Context", "context", ",", "long", "messageId", ")", "{", "return", "restoreTextWithMessageId", "(", "context", ",", "messageId", ",", "Body", ".", "COMMON_PROJECTION_REPLY_TEXT", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "restoreReplyHtmlWithMessageId", "(", "Context", "context", ",", "long", "messageId", ")", "{", "return", "restoreTextWithMessageId", "(", "context", ",", "messageId", ",", "Body", ".", "COMMON_PROJECTION_REPLY_HTML", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "restoreIntroTextWithMessageId", "(", "Context", "context", ",", "long", "messageId", ")", "{", "return", "restoreTextWithMessageId", "(", "context", ",", "messageId", ",", "Body", ".", "COMMON_PROJECTION_INTRO", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "EmailContent", ".", "Body", "restore", "(", "Cursor", "c", ")", "{", "mBaseUri", "=", "EmailContent", ".", "Body", ".", "CONTENT_URI", ";", "mMessageKey", "=", "c", ".", "getLong", "(", "CONTENT_MESSAGE_KEY_COLUMN", ")", ";", "mHtmlContent", "=", "c", ".", "getString", "(", "CONTENT_HTML_CONTENT_COLUMN", ")", ";", "mTextContent", "=", "c", ".", "getString", "(", "CONTENT_TEXT_CONTENT_COLUMN", ")", ";", "mHtmlReply", "=", "c", ".", "getString", "(", "CONTENT_HTML_REPLY_COLUMN", ")", ";", "mTextReply", "=", "c", ".", "getString", "(", "CONTENT_TEXT_REPLY_COLUMN", ")", ";", "mSourceKey", "=", "c", ".", "getLong", "(", "CONTENT_SOURCE_KEY_COLUMN", ")", ";", "mIntroText", "=", "c", ".", "getString", "(", "CONTENT_INTRO_TEXT_COLUMN", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "boolean", "update", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "Message", "(", ")", "{", "mBaseUri", "=", "CONTENT_URI", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContentValues", "toContentValues", "(", ")", "{", "ContentValues", "values", "=", "new", "ContentValues", "(", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "DISPLAY_NAME", ",", "mDisplayName", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "TIMESTAMP", ",", "mTimeStamp", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "SUBJECT", ",", "mSubject", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "FLAG_READ", ",", "mFlagRead", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "FLAG_LOADED", ",", "mFlagLoaded", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "FLAG_FAVORITE", ",", "mFlagFavorite", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "FLAG_ATTACHMENT", ",", "mFlagAttachment", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "FLAGS", ",", "mFlags", ")", ";", "values", ".", "put", "(", "SyncColumns", ".", "SERVER_ID", ",", "mServerId", ")", ";", "values", ".", "put", "(", "SyncColumns", ".", "SERVER_TIMESTAMP", ",", "mServerTimeStamp", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "CLIENT_ID", ",", "mClientId", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "MESSAGE_ID", ",", "mMessageId", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "MAILBOX_KEY", ",", "mMailboxKey", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "ACCOUNT_KEY", ",", "mAccountKey", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "FROM_LIST", ",", "mFrom", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "TO_LIST", ",", "mTo", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "CC_LIST", ",", "mCc", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "BCC_LIST", ",", "mBcc", ")", ";", "values", ".", "put", "(", "MessageColumns", ".", "REPLY_TO_LIST", ",", "mReplyTo", ")", ";", "return", "values", ";", "}", "</s>"]
["<s>", "public", "static", "Message", "restoreMessageWithId", "(", "Context", "context", ",", "long", "id", ")", "{", "Uri", "u", "=", "ContentUris", ".", "withAppendedId", "(", "Message", ".", "CONTENT_URI", ",", "id", ")", ";", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "u", ",", "Message", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "return", "getContent", "(", "c", ",", "Message", ".", "class", ")", ";", "}", "else", "{", "return", "null", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "EmailContent", ".", "Message", "restore", "(", "Cursor", "c", ")", "{", "mBaseUri", "=", "CONTENT_URI", ";", "mId", "=", "c", ".", "getLong", "(", "CONTENT_ID_COLUMN", ")", ";", "mDisplayName", "=", "c", ".", "getString", "(", "CONTENT_DISPLAY_NAME_COLUMN", ")", ";", "mTimeStamp", "=", "c", ".", "getLong", "(", "CONTENT_TIMESTAMP_COLUMN", ")", ";", "mSubject", "=", "c", ".", "getString", "(", "CONTENT_SUBJECT_COLUMN", ")", ";", "mFlagRead", "=", "c", ".", "getInt", "(", "CONTENT_FLAG_READ_COLUMN", ")", "=", "=", "1", ";", "mFlagLoaded", "=", "c", ".", "getInt", "(", "CONTENT_FLAG_LOADED_COLUMN", ")", ";", "mFlagFavorite", "=", "c", ".", "getInt", "(", "CONTENT_FLAG_FAVORITE_COLUMN", ")", "=", "=", "1", ";", "mFlagAttachment", "=", "c", ".", "getInt", "(", "CONTENT_FLAG_ATTACHMENT_COLUMN", ")", "=", "=", "1", ";", "mFlags", "=", "c", ".", "getInt", "(", "CONTENT_FLAGS_COLUMN", ")", ";", "mServerId", "=", "c", ".", "getString", "(", "CONTENT_SERVER_ID_COLUMN", ")", ";", "mServerTimeStamp", "=", "c", ".", "getLong", "(", "CONTENT_SERVER_TIMESTAMP_COLUMN", ")", ";", "mClientId", "=", "c", ".", "getString", "(", "CONTENT_CLIENT_ID_COLUMN", ")", ";", "mMessageId", "=", "c", ".", "getString", "(", "CONTENT_MESSAGE_ID_COLUMN", ")", ";", "mMailboxKey", "=", "c", ".", "getLong", "(", "CONTENT_MAILBOX_KEY_COLUMN", ")", ";", "mAccountKey", "=", "c", ".", "getLong", "(", "CONTENT_ACCOUNT_KEY_COLUMN", ")", ";", "mFrom", "=", "c", ".", "getString", "(", "CONTENT_FROM_LIST_COLUMN", ")", ";", "mTo", "=", "c", ".", "getString", "(", "CONTENT_TO_LIST_COLUMN", ")", ";", "mCc", "=", "c", ".", "getString", "(", "CONTENT_CC_LIST_COLUMN", ")", ";", "mBcc", "=", "c", ".", "getString", "(", "CONTENT_BCC_LIST_COLUMN", ")", ";", "mReplyTo", "=", "c", ".", "getString", "(", "CONTENT_REPLY_TO_COLUMN", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "boolean", "update", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Uri", "save", "(", "Context", "context", ")", "{", "boolean", "doSave", "=", "!", "isSaved", "(", ")", ";", "if", "(", "mText", "=", "=", "null", "&", "&", "mHtml", "=", "=", "null", "&", "&", "mTextReply", "=", "=", "null", "&", "&", "mHtmlReply", "=", "=", "null", "&", "&", "(", "mAttachments", "=", "=", "null", "|", "|", "mAttachments", ".", "isEmpty", "(", ")", ")", ")", "{", "if", "(", "doSave", ")", "{", "return", "super", ".", "save", "(", "context", ")", ";", "}", "else", "{", "if", "(", "update", "(", "context", ",", "toContentValues", "(", ")", ")", "=", "=", "1", ")", "{", "return", "getUri", "(", ")", ";", "}", "return", "null", ";", "}", "}", "ArrayList", "<", "ContentProviderOperation", ">", "ops", "=", "new", "ArrayList", "<", "ContentProviderOperation", ">", "(", ")", ";", "addSaveOps", "(", "ops", ")", ";", "try", "{", "ContentProviderResult", "[", "]", "results", "=", "context", ".", "getContentResolver", "(", ")", ".", "applyBatch", "(", "EmailProvider", ".", "EMAIL_AUTHORITY", ",", "ops", ")", ";", "if", "(", "doSave", ")", "{", "Uri", "u", "=", "results", "[", "0", "]", ".", "uri", ";", "mId", "=", "Long", ".", "parseLong", "(", "u", ".", "getPathSegments", "(", ")", ".", "get", "(", "1", ")", ")", ";", "if", "(", "mAttachments", "!", "=", "null", ")", "{", "int", "resultOffset", "=", "<NUM_LIT:2>", ";", "for", "(", "Attachment", "a", ":", "mAttachments", ")", "{", "u", "=", "results", "[", "resultOffset", "+", "+", "]", ".", "uri", ";", "if", "(", "u", "!", "=", "null", ")", "{", "a", ".", "mId", "=", "Long", ".", "parseLong", "(", "u", ".", "getPathSegments", "(", ")", ".", "get", "(", "1", ")", ")", ";", "}", "a", ".", "mMessageKey", "=", "mId", ";", "}", "}", "return", "u", ";", "}", "else", "{", "return", "null", ";", "}", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "catch", "(", "OperationApplicationException", "e", ")", "{", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "void", "addSaveOps", "(", "ArrayList", "<", "ContentProviderOperation", ">", "ops", ")", "{", "ContentProviderOperation", ".", "Builder", "b", "=", "ContentProviderOperation", ".", "newInsert", "(", "mBaseUri", ")", ";", "ops", ".", "add", "(", "b", ".", "withValues", "(", "toContentValues", "(", ")", ")", ".", "build", "(", ")", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "if", "(", "mText", "!", "=", "null", ")", "{", "cv", ".", "put", "(", "Body", ".", "TEXT_CONTENT", ",", "mText", ")", ";", "}", "if", "(", "mHtml", "!", "=", "null", ")", "{", "cv", ".", "put", "(", "Body", ".", "HTML_CONTENT", ",", "mHtml", ")", ";", "}", "if", "(", "mTextReply", "!", "=", "null", ")", "{", "cv", ".", "put", "(", "Body", ".", "TEXT_REPLY", ",", "mTextReply", ")", ";", "}", "if", "(", "mHtmlReply", "!", "=", "null", ")", "{", "cv", ".", "put", "(", "Body", ".", "HTML_REPLY", ",", "mHtmlReply", ")", ";", "}", "if", "(", "mSourceKey", "!", "=", "0", ")", "{", "cv", ".", "put", "(", "Body", ".", "SOURCE_MESSAGE_KEY", ",", "mSourceKey", ")", ";", "}", "if", "(", "mIntroText", "!", "=", "null", ")", "{", "cv", ".", "put", "(", "Body", ".", "INTRO_TEXT", ",", "mIntroText", ")", ";", "}", "b", "=", "ContentProviderOperation", ".", "newInsert", "(", "Body", ".", "CONTENT_URI", ")", ";", "b", ".", "withValues", "(", "cv", ")", ";", "ContentValues", "backValues", "=", "new", "ContentValues", "(", ")", ";", "int", "messageBackValue", "=", "ops", ".", "size", "(", ")", "-", "1", ";", "backValues", ".", "put", "(", "Body", ".", "MESSAGE_KEY", ",", "messageBackValue", ")", ";", "ops", ".", "add", "(", "b", ".", "withValueBackReferences", "(", "backValues", ")", ".", "build", "(", ")", ")", ";", "if", "(", "mAttachments", "!", "=", "null", ")", "{", "for", "(", "Attachment", "att", ":", "mAttachments", ")", "{", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newInsert", "(", "Attachment", ".", "CONTENT_URI", ")", ".", "withValues", "(", "att", ".", "toContentValues", "(", ")", ")", ".", "withValueBackReference", "(", "Attachment", ".", "MESSAGE_KEY", ",", "messageBackValue", ")", ".", "build", "(", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "Account", "(", ")", "{", "mBaseUri", "=", "CONTENT_URI", ";", "mRingtoneUri", "=", "\"", "<STR_LIT>", "\"", ";", "mSyncInterval", "=", "-", "1", ";", "mSyncLookback", "=", "-", "1", ";", "mFlags", "=", "FLAGS_NOTIFY_NEW_MAIL", ";", "mCompatibilityUuid", "=", "UUID", ".", "randomUUID", "(", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Account", "restoreAccountWithId", "(", "Context", "context", ",", "long", "id", ")", "{", "Uri", "u", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "id", ")", ";", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "u", ",", "Account", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "return", "getContent", "(", "c", ",", "Account", ".", "class", ")", ";", "}", "else", "{", "return", "null", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "refresh", "(", "Context", "context", ")", "{", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "this", ".", "getUri", "(", ")", ",", "Account", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "c", ".", "moveToFirst", "(", ")", ";", "restore", "(", "c", ")", ";", "}", "finally", "{", "if", "(", "c", "!", "=", "null", ")", "{", "c", ".", "close", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "EmailContent", ".", "Account", "restore", "(", "Cursor", "cursor", ")", "{", "mId", "=", "cursor", ".", "getLong", "(", "CONTENT_ID_COLUMN", ")", ";", "mBaseUri", "=", "CONTENT_URI", ";", "mDisplayName", "=", "cursor", ".", "getString", "(", "CONTENT_DISPLAY_NAME_COLUMN", ")", ";", "mEmailAddress", "=", "cursor", ".", "getString", "(", "CONTENT_EMAIL_ADDRESS_COLUMN", ")", ";", "mSyncKey", "=", "cursor", ".", "getString", "(", "CONTENT_SYNC_KEY_COLUMN", ")", ";", "mSyncLookback", "=", "cursor", ".", "getInt", "(", "CONTENT_SYNC_LOOKBACK_COLUMN", ")", ";", "mSyncInterval", "=", "cursor", ".", "getInt", "(", "CONTENT_SYNC_INTERVAL_COLUMN", ")", ";", "mHostAuthKeyRecv", "=", "cursor", ".", "getLong", "(", "CONTENT_HOST_AUTH_KEY_RECV_COLUMN", ")", ";", "mHostAuthKeySend", "=", "cursor", ".", "getLong", "(", "CONTENT_HOST_AUTH_KEY_SEND_COLUMN", ")", ";", "mFlags", "=", "cursor", ".", "getInt", "(", "CONTENT_FLAGS_COLUMN", ")", ";", "mIsDefault", "=", "cursor", ".", "getInt", "(", "CONTENT_IS_DEFAULT_COLUMN", ")", "=", "=", "1", ";", "mCompatibilityUuid", "=", "cursor", ".", "getString", "(", "CONTENT_COMPATIBILITY_UUID_COLUMN", ")", ";", "mSenderName", "=", "cursor", ".", "getString", "(", "CONTENT_SENDER_NAME_COLUMN", ")", ";", "mRingtoneUri", "=", "cursor", ".", "getString", "(", "CONTENT_RINGTONE_URI_COLUMN", ")", ";", "mProtocolVersion", "=", "cursor", ".", "getString", "(", "CONTENT_PROTOCOL_VERSION_COLUMN", ")", ";", "mNewMessageCount", "=", "cursor", ".", "getInt", "(", "CONTENT_NEW_MESSAGE_COUNT_COLUMN", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "private", "long", "getId", "(", "Uri", "u", ")", "{", "return", "Long", ".", "parseLong", "(", "u", ".", "getPathSegments", "(", ")", ".", "get", "(", "1", ")", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getDisplayName", "(", ")", "{", "return", "mDisplayName", ";", "}", "</s>"]
["<s>", "public", "void", "setDisplayName", "(", "String", "description", ")", "{", "mDisplayName", "=", "description", ";", "}", "</s>"]
["<s>", "public", "String", "getEmailAddress", "(", ")", "{", "return", "mEmailAddress", ";", "}", "</s>"]
["<s>", "public", "void", "setEmailAddress", "(", "String", "emailAddress", ")", "{", "mEmailAddress", "=", "emailAddress", ";", "}", "</s>"]
["<s>", "public", "String", "getSenderName", "(", ")", "{", "return", "mSenderName", ";", "}", "</s>"]
["<s>", "public", "void", "setSenderName", "(", "String", "name", ")", "{", "mSenderName", "=", "name", ";", "}", "</s>"]
["<s>", "public", "int", "getSyncInterval", "(", ")", "{", "return", "mSyncInterval", ";", "}", "</s>"]
["<s>", "public", "void", "setSyncInterval", "(", "int", "minutes", ")", "{", "mSyncInterval", "=", "minutes", ";", "}", "</s>"]
["<s>", "public", "int", "getSyncLookback", "(", ")", "{", "return", "mSyncLookback", ";", "}", "</s>"]
["<s>", "public", "void", "setSyncLookback", "(", "int", "days", ")", "{", "mSyncLookback", "=", "days", ";", "}", "</s>"]
["<s>", "public", "int", "getFlags", "(", ")", "{", "return", "mFlags", ";", "}", "</s>"]
["<s>", "public", "void", "setFlags", "(", "int", "newFlags", ")", "{", "mFlags", "=", "newFlags", ";", "}", "</s>"]
["<s>", "public", "String", "getRingtone", "(", ")", "{", "return", "mRingtoneUri", ";", "}", "</s>"]
["<s>", "public", "void", "setRingtone", "(", "String", "newUri", ")", "{", "mRingtoneUri", "=", "newUri", ";", "}", "</s>"]
["<s>", "public", "void", "setDeletePolicy", "(", "int", "newPolicy", ")", "{", "mFlags", "&", "=", "~", "FLAGS_DELETE_POLICY_MASK", ";", "mFlags", "|", "=", "(", "newPolicy", "<", "<", "FLAGS_DELETE_POLICY_SHIFT", ")", "&", "FLAGS_DELETE_POLICY_MASK", ";", "}", "</s>"]
["<s>", "public", "int", "getDeletePolicy", "(", ")", "{", "return", "(", "mFlags", "&", "FLAGS_DELETE_POLICY_MASK", ")", ">", ">", "FLAGS_DELETE_POLICY_SHIFT", ";", "}", "</s>"]
["<s>", "String", "getUuid", "(", ")", "{", "return", "mCompatibilityUuid", ";", "}", "</s>"]
["<s>", "public", "String", "getStoreUri", "(", "Context", "context", ")", "{", "if", "(", "mHostAuthRecv", "=", "=", "null", ")", "{", "mHostAuthRecv", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "context", ",", "mHostAuthKeyRecv", ")", ";", "}", "if", "(", "mHostAuthRecv", "!", "=", "null", ")", "{", "String", "storeUri", "=", "mHostAuthRecv", ".", "getStoreUri", "(", ")", ";", "if", "(", "storeUri", "!", "=", "null", ")", "{", "return", "storeUri", ";", "}", "}", "return", "\"", "\"", ";", "}", "</s>"]
["<s>", "public", "String", "getSenderUri", "(", "Context", "context", ")", "{", "if", "(", "mHostAuthSend", "=", "=", "null", ")", "{", "mHostAuthSend", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "context", ",", "mHostAuthKeySend", ")", ";", "}", "if", "(", "mHostAuthSend", "!", "=", "null", ")", "{", "String", "senderUri", "=", "mHostAuthSend", ".", "getStoreUri", "(", ")", ";", "if", "(", "senderUri", "!", "=", "null", ")", "{", "return", "senderUri", ";", "}", "}", "return", "\"", "\"", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "void", "setStoreUri", "(", "Context", "context", ",", "String", "storeUri", ")", "{", "if", "(", "mHostAuthRecv", "=", "=", "null", ")", "{", "if", "(", "mHostAuthKeyRecv", "!", "=", "0", ")", "{", "mHostAuthRecv", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "context", ",", "mHostAuthKeyRecv", ")", ";", "}", "else", "{", "mHostAuthRecv", "=", "new", "EmailContent", ".", "HostAuth", "(", ")", ";", "}", "}", "if", "(", "mHostAuthRecv", "!", "=", "null", ")", "{", "mHostAuthRecv", ".", "setStoreUri", "(", "storeUri", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "void", "setSenderUri", "(", "Context", "context", ",", "String", "senderUri", ")", "{", "if", "(", "mHostAuthSend", "=", "=", "null", ")", "{", "if", "(", "mHostAuthKeySend", "!", "=", "0", ")", "{", "mHostAuthSend", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "context", ",", "mHostAuthKeySend", ")", ";", "}", "else", "{", "mHostAuthSend", "=", "new", "EmailContent", ".", "HostAuth", "(", ")", ";", "}", "}", "if", "(", "mHostAuthSend", "!", "=", "null", ")", "{", "mHostAuthSend", ".", "setStoreUri", "(", "senderUri", ")", ";", "}", "}", "</s>"]
["<s>", "public", "String", "getLocalStoreUri", "(", "Context", "context", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "context", ".", "getDatabasePath", "(", "getUuid", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setDefaultAccount", "(", "boolean", "newDefaultState", ")", "{", "mIsDefault", "=", "newDefaultState", ";", "}", "</s>"]
["<s>", "static", "private", "long", "getDefaultAccountWhere", "(", "Context", "context", ",", "String", "where", ")", "{", "Cursor", "cursor", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "CONTENT_URI", ",", "DEFAULT_ID_PROJECTION", ",", "where", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "cursor", ".", "moveToFirst", "(", ")", ")", "{", "return", "cursor", ".", "getLong", "(", "0", ")", ";", "}", "}", "finally", "{", "cursor", ".", "close", "(", ")", ";", "}", "return", "-", "1", ";", "}", "</s>"]
["<s>", "static", "public", "long", "getDefaultAccountId", "(", "Context", "context", ")", "{", "long", "id", "=", "getDefaultAccountWhere", "(", "context", ",", "AccountColumns", ".", "IS_DEFAULT", "+", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "id", "=", "=", "-", "1", ")", "{", "id", "=", "getDefaultAccountWhere", "(", "context", ",", "null", ")", ";", "}", "return", "id", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "update", "(", "Context", "context", ",", "ContentValues", "cv", ")", "{", "if", "(", "cv", ".", "containsKey", "(", "AccountColumns", ".", "IS_DEFAULT", ")", "&", "&", "cv", ".", "getAsBoolean", "(", "AccountColumns", ".", "IS_DEFAULT", ")", ")", "{", "ArrayList", "<", "ContentProviderOperation", ">", "ops", "=", "new", "ArrayList", "<", "ContentProviderOperation", ">", "(", ")", ";", "ContentValues", "cv1", "=", "new", "ContentValues", "(", ")", ";", "cv1", ".", "put", "(", "AccountColumns", ".", "IS_DEFAULT", ",", "false", ")", ";", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newUpdate", "(", "CONTENT_URI", ")", ".", "withValues", "(", "cv1", ")", ".", "build", "(", ")", ")", ";", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newUpdate", "(", "ContentUris", ".", "withAppendedId", "(", "CONTENT_URI", ",", "mId", ")", ")", ".", "withValues", "(", "cv", ")", ".", "build", "(", ")", ")", ";", "try", "{", "context", ".", "getContentResolver", "(", ")", ".", "applyBatch", "(", "EmailProvider", ".", "EMAIL_AUTHORITY", ",", "ops", ")", ";", "return", "1", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "catch", "(", "OperationApplicationException", "e", ")", "{", "}", "return", "0", ";", "}", "return", "super", ".", "update", "(", "context", ",", "cv", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Uri", "save", "(", "Context", "context", ")", "{", "if", "(", "isSaved", "(", ")", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "if", "(", "mHostAuthRecv", "=", "=", "null", "&", "&", "mHostAuthSend", "=", "=", "null", "&", "&", "mIsDefault", "=", "=", "false", ")", "{", "return", "super", ".", "save", "(", "context", ")", ";", "}", "int", "index", "=", "0", ";", "int", "recvIndex", "=", "-", "1", ";", "int", "sendIndex", "=", "-", "1", ";", "ArrayList", "<", "ContentProviderOperation", ">", "ops", "=", "new", "ArrayList", "<", "ContentProviderOperation", ">", "(", ")", ";", "if", "(", "mHostAuthRecv", "!", "=", "null", ")", "{", "recvIndex", "=", "index", "+", "+", ";", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newInsert", "(", "mHostAuthRecv", ".", "mBaseUri", ")", ".", "withValues", "(", "mHostAuthRecv", ".", "toContentValues", "(", ")", ")", ".", "build", "(", ")", ")", ";", "}", "if", "(", "mHostAuthSend", "!", "=", "null", ")", "{", "sendIndex", "=", "index", "+", "+", ";", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newInsert", "(", "mHostAuthRecv", ".", "mBaseUri", ")", ".", "withValues", "(", "mHostAuthSend", ".", "toContentValues", "(", ")", ")", ".", "build", "(", ")", ")", ";", "}", "if", "(", "mIsDefault", ")", "{", "index", "+", "+", ";", "ContentValues", "cv1", "=", "new", "ContentValues", "(", ")", ";", "cv1", ".", "put", "(", "AccountColumns", ".", "IS_DEFAULT", ",", "0", ")", ";", "ops", ".", "add", "(", "ContentProviderOperation", ".", "newUpdate", "(", "CONTENT_URI", ")", ".", "withValues", "(", "cv1", ")", ".", "build", "(", ")", ")", ";", "}", "ContentValues", "cv", "=", "null", ";", "if", "(", "recvIndex", ">", "=", "0", "|", "|", "sendIndex", ">", "=", "0", ")", "{", "cv", "=", "new", "ContentValues", "(", ")", ";", "if", "(", "recvIndex", ">", "=", "0", ")", "{", "cv", ".", "put", "(", "Account", ".", "HOST_AUTH_KEY_RECV", ",", "recvIndex", ")", ";", "}", "if", "(", "sendIndex", ">", "=", "0", ")", "{", "cv", ".", "put", "(", "Account", ".", "HOST_AUTH_KEY_SEND", ",", "sendIndex", ")", ";", "}", "}", "ContentProviderOperation", ".", "Builder", "b", "=", "ContentProviderOperation", ".", "newInsert", "(", "mBaseUri", ")", ";", "b", ".", "withValues", "(", "toContentValues", "(", ")", ")", ";", "if", "(", "cv", "!", "=", "null", ")", "{", "b", ".", "withValueBackReferences", "(", "cv", ")", ";", "}", "ops", ".", "add", "(", "b", ".", "build", "(", ")", ")", ";", "try", "{", "ContentProviderResult", "[", "]", "results", "=", "context", ".", "getContentResolver", "(", ")", ".", "applyBatch", "(", "EmailProvider", ".", "EMAIL_AUTHORITY", ",", "ops", ")", ";", "if", "(", "recvIndex", ">", "=", "0", ")", "{", "long", "newId", "=", "getId", "(", "results", "[", "recvIndex", "]", ".", "uri", ")", ";", "mHostAuthKeyRecv", "=", "newId", ";", "mHostAuthRecv", ".", "mId", "=", "newId", ";", "}", "if", "(", "sendIndex", ">", "=", "0", ")", "{", "long", "newId", "=", "getId", "(", "results", "[", "sendIndex", "]", ".", "uri", ")", ";", "mHostAuthKeySend", "=", "newId", ";", "mHostAuthSend", ".", "mId", "=", "newId", ";", "}", "Uri", "u", "=", "results", "[", "index", "]", ".", "uri", ";", "mId", "=", "getId", "(", "u", ")", ";", "return", "u", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "catch", "(", "OperationApplicationException", "e", ")", "{", "}", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContentValues", "toContentValues", "(", ")", "{", "ContentValues", "values", "=", "new", "ContentValues", "(", ")", ";", "values", ".", "put", "(", "AccountColumns", ".", "DISPLAY_NAME", ",", "mDisplayName", ")", ";", "values", ".", "put", "(", "AccountColumns", ".", "EMAIL_ADDRESS", ",", "mEmailAddress", ")", ";", "values", ".", "put", "(", "AccountColumns", ".", "SYNC_KEY", ",", "mSyncKey", ")", ";", "values", ".", "put", "(", "AccountColumns", ".", "SYNC_LOOKBACK", ",", "mSyncLookback", ")", ";", "values", ".", "put", "(", "AccountColumns", ".", "SYNC_INTERVAL", ",", "mSyncInterval", ")", ";", "values", ".", "put", "(", "AccountColumns", ".", "HOST_AUTH_KEY_RECV", ",", "mHostAuthKeyRecv", ")", ";", "values", ".", "put", "(", "AccountColumns", ".", "HOST_AUTH_KEY_SEND", ",", "mHostAuthKeySend", ")", ";", "values", ".", "put", "(", "AccountColumns", ".", "FLAGS", ",", "mFlags", ")", ";", "values", ".", "put", "(", "AccountColumns", ".", "IS_DEFAULT", ",", "mIsDefault", ")", ";", "values", ".", "put", "(", "AccountColumns", ".", "COMPATIBILITY_UUID", ",", "mCompatibilityUuid", ")", ";", "values", ".", "put", "(", "AccountColumns", ".", "SENDER_NAME", ",", "mSenderName", ")", ";", "values", ".", "put", "(", "AccountColumns", ".", "RINGTONE_URI", ",", "mRingtoneUri", ")", ";", "values", ".", "put", "(", "AccountColumns", ".", "PROTOCOL_VERSION", ",", "mProtocolVersion", ")", ";", "values", ".", "put", "(", "AccountColumns", ".", "NEW_MESSAGE_COUNT", ",", "mNewMessageCount", ")", ";", "return", "values", ";", "}", "</s>"]
["<s>", "public", "int", "describeContents", "(", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "public", "EmailContent", ".", "Account", "createFromParcel", "(", "Parcel", "in", ")", "{", "return", "new", "EmailContent", ".", "Account", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "EmailContent", ".", "Account", "[", "]", "newArray", "(", "int", "size", ")", "{", "return", "new", "EmailContent", ".", "Account", "[", "size", "]", ";", "}", "</s>"]
["<s>", "public", "void", "writeToParcel", "(", "Parcel", "dest", ",", "int", "flags", ")", "{", "dest", ".", "writeLong", "(", "mId", ")", ";", "dest", ".", "writeString", "(", "mDisplayName", ")", ";", "dest", ".", "writeString", "(", "mEmailAddress", ")", ";", "dest", ".", "writeString", "(", "mSyncKey", ")", ";", "dest", ".", "writeInt", "(", "mSyncLookback", ")", ";", "dest", ".", "writeInt", "(", "mSyncInterval", ")", ";", "dest", ".", "writeLong", "(", "mHostAuthKeyRecv", ")", ";", "dest", ".", "writeLong", "(", "mHostAuthKeySend", ")", ";", "dest", ".", "writeInt", "(", "mFlags", ")", ";", "dest", ".", "writeByte", "(", "mIsDefault", "?", "(", "byte", ")", "1", ":", "(", "byte", ")", "0", ")", ";", "dest", ".", "writeString", "(", "mCompatibilityUuid", ")", ";", "dest", ".", "writeString", "(", "mSenderName", ")", ";", "dest", ".", "writeString", "(", "mRingtoneUri", ")", ";", "dest", ".", "writeString", "(", "mProtocolVersion", ")", ";", "dest", ".", "writeInt", "(", "mNewMessageCount", ")", ";", "if", "(", "mHostAuthRecv", "!", "=", "null", ")", "{", "dest", ".", "writeByte", "(", "(", "byte", ")", "1", ")", ";", "mHostAuthRecv", ".", "writeToParcel", "(", "dest", ",", "flags", ")", ";", "}", "else", "{", "dest", ".", "writeByte", "(", "(", "byte", ")", "0", ")", ";", "}", "if", "(", "mHostAuthSend", "!", "=", "null", ")", "{", "dest", ".", "writeByte", "(", "(", "byte", ")", "1", ")", ";", "mHostAuthSend", ".", "writeToParcel", "(", "dest", ",", "flags", ")", ";", "}", "else", "{", "dest", ".", "writeByte", "(", "(", "byte", ")", "0", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Account", "(", "Parcel", "in", ")", "{", "mBaseUri", "=", "EmailContent", ".", "Account", ".", "CONTENT_URI", ";", "mId", "=", "in", ".", "readLong", "(", ")", ";", "mDisplayName", "=", "in", ".", "readString", "(", ")", ";", "mEmailAddress", "=", "in", ".", "readString", "(", ")", ";", "mSyncKey", "=", "in", ".", "readString", "(", ")", ";", "mSyncLookback", "=", "in", ".", "readInt", "(", ")", ";", "mSyncInterval", "=", "in", ".", "readInt", "(", ")", ";", "mHostAuthKeyRecv", "=", "in", ".", "readLong", "(", ")", ";", "mHostAuthKeySend", "=", "in", ".", "readLong", "(", ")", ";", "mFlags", "=", "in", ".", "readInt", "(", ")", ";", "mIsDefault", "=", "in", ".", "readByte", "(", ")", "=", "=", "1", ";", "mCompatibilityUuid", "=", "in", ".", "readString", "(", ")", ";", "mSenderName", "=", "in", ".", "readString", "(", ")", ";", "mRingtoneUri", "=", "in", ".", "readString", "(", ")", ";", "mProtocolVersion", "=", "in", ".", "readString", "(", ")", ";", "mNewMessageCount", "=", "in", ".", "readInt", "(", ")", ";", "mHostAuthRecv", "=", "null", ";", "if", "(", "in", ".", "readByte", "(", ")", "=", "=", "1", ")", "{", "mHostAuthRecv", "=", "new", "EmailContent", ".", "HostAuth", "(", "in", ")", ";", "}", "mHostAuthSend", "=", "null", ";", "if", "(", "in", ".", "readByte", "(", ")", "=", "=", "1", ")", "{", "mHostAuthSend", "=", "new", "EmailContent", ".", "HostAuth", "(", "in", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", "<CHAR_LIT:[>", ")", ";", "if", "(", "mHostAuthRecv", "!", "=", "null", "&", "&", "mHostAuthRecv", ".", "mProtocol", "!", "=", "null", ")", "{", "sb", ".", "append", "(", "mHostAuthRecv", ".", "mProtocol", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT::>", ")", ";", "}", "if", "(", "mDisplayName", "!", "=", "null", ")", "sb", ".", "append", "(", "mDisplayName", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT::>", ")", ";", "if", "(", "mEmailAddress", "!", "=", "null", ")", "sb", ".", "append", "(", "mEmailAddress", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT::>", ")", ";", "if", "(", "mSenderName", "!", "=", "null", ")", "sb", ".", "append", "(", "mSenderName", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT:]>", ")", ";", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Attachment", "(", ")", "{", "mBaseUri", "=", "CONTENT_URI", ";", "}", "</s>"]
["<s>", "public", "static", "Attachment", "restoreAttachmentWithId", "(", "Context", "context", ",", "long", "id", ")", "{", "Uri", "u", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "CONTENT_URI", ",", "id", ")", ";", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "u", ",", "Attachment", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "return", "getContent", "(", "c", ",", "Attachment", ".", "class", ")", ";", "}", "else", "{", "return", "null", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "Attachment", "[", "]", "restoreAttachmentsWithMessageId", "(", "Context", "context", ",", "long", "messageId", ")", "{", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "MESSAGE_ID_URI", ",", "messageId", ")", ";", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "int", "count", "=", "c", ".", "getCount", "(", ")", ";", "Attachment", "[", "]", "attachments", "=", "new", "Attachment", "[", "count", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "count", ";", "+", "+", "i", ")", "{", "c", ".", "moveToNext", "(", ")", ";", "attachments", "[", "i", "]", "=", "new", "Attachment", "(", ")", ".", "restore", "(", "c", ")", ";", "}", "return", "attachments", ";", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "File", "createUniqueFile", "(", "String", "filename", ")", "{", "if", "(", "Environment", ".", "getExternalStorageState", "(", ")", ".", "equals", "(", "Environment", ".", "MEDIA_MOUNTED", ")", ")", "{", "File", "directory", "=", "Environment", ".", "getExternalStorageDirectory", "(", ")", ";", "File", "file", "=", "new", "File", "(", "directory", ",", "filename", ")", ";", "if", "(", "!", "file", ".", "exists", "(", ")", ")", "{", "return", "file", ";", "}", "int", "index", "=", "filename", ".", "lastIndexOf", "(", "<CHAR_LIT:.>", ")", ";", "String", "name", "=", "filename", ";", "String", "extension", "=", "\"", "\"", ";", "if", "(", "index", "!", "=", "-", "1", ")", "{", "name", "=", "filename", ".", "substring", "(", "0", ",", "index", ")", ";", "extension", "=", "filename", ".", "substring", "(", "index", ")", ";", "}", "for", "(", "int", "i", "=", "<NUM_LIT:2>", ";", "i", "<", "Integer", ".", "MAX_VALUE", ";", "i", "+", "+", ")", "{", "file", "=", "new", "File", "(", "directory", ",", "name", "+", "<CHAR_LIT:->", "+", "i", "+", "extension", ")", ";", "if", "(", "!", "file", ".", "exists", "(", ")", ")", "{", "return", "file", ";", "}", "}", "return", "null", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "EmailContent", ".", "Attachment", "restore", "(", "Cursor", "cursor", ")", "{", "mBaseUri", "=", "CONTENT_URI", ";", "mId", "=", "cursor", ".", "getLong", "(", "CONTENT_ID_COLUMN", ")", ";", "mFileName", "=", "cursor", ".", "getString", "(", "CONTENT_FILENAME_COLUMN", ")", ";", "mMimeType", "=", "cursor", ".", "getString", "(", "CONTENT_MIME_TYPE_COLUMN", ")", ";", "mSize", "=", "cursor", ".", "getLong", "(", "CONTENT_SIZE_COLUMN", ")", ";", "mContentId", "=", "cursor", ".", "getString", "(", "CONTENT_CONTENT_ID_COLUMN", ")", ";", "mContentUri", "=", "cursor", ".", "getString", "(", "CONTENT_CONTENT_URI_COLUMN", ")", ";", "mMessageKey", "=", "cursor", ".", "getLong", "(", "CONTENT_MESSAGE_ID_COLUMN", ")", ";", "mLocation", "=", "cursor", ".", "getString", "(", "CONTENT_LOCATION_COLUMN", ")", ";", "mEncoding", "=", "cursor", ".", "getString", "(", "CONTENT_ENCODING_COLUMN", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContentValues", "toContentValues", "(", ")", "{", "ContentValues", "values", "=", "new", "ContentValues", "(", ")", ";", "values", ".", "put", "(", "AttachmentColumns", ".", "FILENAME", ",", "mFileName", ")", ";", "values", ".", "put", "(", "AttachmentColumns", ".", "MIME_TYPE", ",", "mMimeType", ")", ";", "values", ".", "put", "(", "AttachmentColumns", ".", "SIZE", ",", "mSize", ")", ";", "values", ".", "put", "(", "AttachmentColumns", ".", "CONTENT_ID", ",", "mContentId", ")", ";", "values", ".", "put", "(", "AttachmentColumns", ".", "CONTENT_URI", ",", "mContentUri", ")", ";", "values", ".", "put", "(", "AttachmentColumns", ".", "MESSAGE_KEY", ",", "mMessageKey", ")", ";", "values", ".", "put", "(", "AttachmentColumns", ".", "LOCATION", ",", "mLocation", ")", ";", "values", ".", "put", "(", "AttachmentColumns", ".", "ENCODING", ",", "mEncoding", ")", ";", "return", "values", ";", "}", "</s>"]
["<s>", "public", "int", "describeContents", "(", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "public", "void", "writeToParcel", "(", "Parcel", "dest", ",", "int", "flags", ")", "{", "dest", ".", "writeLong", "(", "mId", ")", ";", "dest", ".", "writeString", "(", "mFileName", ")", ";", "dest", ".", "writeString", "(", "mMimeType", ")", ";", "dest", ".", "writeLong", "(", "mSize", ")", ";", "dest", ".", "writeString", "(", "mContentId", ")", ";", "dest", ".", "writeString", "(", "mContentUri", ")", ";", "dest", ".", "writeLong", "(", "mMessageKey", ")", ";", "dest", ".", "writeString", "(", "mLocation", ")", ";", "dest", ".", "writeString", "(", "mEncoding", ")", ";", "}", "</s>"]
["<s>", "public", "Attachment", "(", "Parcel", "in", ")", "{", "mBaseUri", "=", "EmailContent", ".", "Attachment", ".", "CONTENT_URI", ";", "mId", "=", "in", ".", "readLong", "(", ")", ";", "mFileName", "=", "in", ".", "readString", "(", ")", ";", "mMimeType", "=", "in", ".", "readString", "(", ")", ";", "mSize", "=", "in", ".", "readLong", "(", ")", ";", "mContentId", "=", "in", ".", "readString", "(", ")", ";", "mContentUri", "=", "in", ".", "readString", "(", ")", ";", "mMessageKey", "=", "in", ".", "readLong", "(", ")", ";", "mLocation", "=", "in", ".", "readString", "(", ")", ";", "mEncoding", "=", "in", ".", "readString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "EmailContent", ".", "Attachment", "createFromParcel", "(", "Parcel", "in", ")", "{", "return", "new", "EmailContent", ".", "Attachment", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "EmailContent", ".", "Attachment", "[", "]", "newArray", "(", "int", "size", ")", "{", "return", "new", "EmailContent", ".", "Attachment", "[", "size", "]", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "\"", "<STR_LIT:[>", "\"", "+", "mFileName", "+", "\"", "<STR_LIT>", "\"", "+", "mMimeType", "+", "\"", "<STR_LIT>", "\"", "+", "mSize", "+", "\"", "<STR_LIT>", "\"", "+", "mContentId", "+", "\"", "<STR_LIT>", "\"", "+", "mContentUri", "+", "\"", "<STR_LIT>", "\"", "+", "mMessageKey", "+", "\"", "<STR_LIT>", "\"", "+", "mLocation", "+", "\"", "<STR_LIT>", "\"", "+", "mEncoding", "+", "\"", "<STR_LIT:]>", "\"", ";", "}", "</s>"]
["<s>", "public", "Mailbox", "(", ")", "{", "mBaseUri", "=", "CONTENT_URI", ";", "}", "</s>"]
["<s>", "public", "static", "Mailbox", "restoreMailboxWithId", "(", "Context", "context", ",", "long", "id", ")", "{", "Uri", "u", "=", "ContentUris", ".", "withAppendedId", "(", "Mailbox", ".", "CONTENT_URI", ",", "id", ")", ";", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "u", ",", "Mailbox", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "return", "EmailContent", ".", "getContent", "(", "c", ",", "Mailbox", ".", "class", ")", ";", "}", "else", "{", "return", "null", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "EmailContent", ".", "Mailbox", "restore", "(", "Cursor", "cursor", ")", "{", "mBaseUri", "=", "CONTENT_URI", ";", "mId", "=", "cursor", ".", "getLong", "(", "CONTENT_ID_COLUMN", ")", ";", "mDisplayName", "=", "cursor", ".", "getString", "(", "CONTENT_DISPLAY_NAME_COLUMN", ")", ";", "mServerId", "=", "cursor", ".", "getString", "(", "CONTENT_SERVER_ID_COLUMN", ")", ";", "mParentServerId", "=", "cursor", ".", "getString", "(", "CONTENT_PARENT_SERVER_ID_COLUMN", ")", ";", "mAccountKey", "=", "cursor", ".", "getLong", "(", "CONTENT_ACCOUNT_KEY_COLUMN", ")", ";", "mType", "=", "cursor", ".", "getInt", "(", "CONTENT_TYPE_COLUMN", ")", ";", "mDelimiter", "=", "cursor", ".", "getInt", "(", "CONTENT_DELIMITER_COLUMN", ")", ";", "mSyncKey", "=", "cursor", ".", "getString", "(", "CONTENT_SYNC_KEY_COLUMN", ")", ";", "mSyncLookback", "=", "cursor", ".", "getInt", "(", "CONTENT_SYNC_LOOKBACK_COLUMN", ")", ";", "mSyncInterval", "=", "cursor", ".", "getInt", "(", "CONTENT_SYNC_INTERVAL_COLUMN", ")", ";", "mSyncTime", "=", "cursor", ".", "getLong", "(", "CONTENT_SYNC_TIME_COLUMN", ")", ";", "mUnreadCount", "=", "cursor", ".", "getInt", "(", "CONTENT_UNREAD_COUNT_COLUMN", ")", ";", "mFlagVisible", "=", "cursor", ".", "getInt", "(", "CONTENT_FLAG_VISIBLE_COLUMN", ")", "=", "=", "1", ";", "mFlags", "=", "cursor", ".", "getInt", "(", "CONTENT_FLAGS_COLUMN", ")", ";", "mVisibleLimit", "=", "cursor", ".", "getInt", "(", "CONTENT_VISIBLE_LIMIT_COLUMN", ")", ";", "mSyncStatus", "=", "cursor", ".", "getString", "(", "CONTENT_SYNC_STATUS_COLUMN", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContentValues", "toContentValues", "(", ")", "{", "ContentValues", "values", "=", "new", "ContentValues", "(", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "DISPLAY_NAME", ",", "mDisplayName", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "SERVER_ID", ",", "mServerId", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "PARENT_SERVER_ID", ",", "mParentServerId", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "ACCOUNT_KEY", ",", "mAccountKey", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "TYPE", ",", "mType", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "DELIMITER", ",", "mDelimiter", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "SYNC_KEY", ",", "mSyncKey", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "SYNC_LOOKBACK", ",", "mSyncLookback", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "SYNC_INTERVAL", ",", "mSyncInterval", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "SYNC_TIME", ",", "mSyncTime", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "UNREAD_COUNT", ",", "mUnreadCount", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "FLAG_VISIBLE", ",", "mFlagVisible", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "FLAGS", ",", "mFlags", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "VISIBLE_LIMIT", ",", "mVisibleLimit", ")", ";", "values", ".", "put", "(", "MailboxColumns", ".", "SYNC_STATUS", ",", "mSyncStatus", ")", ";", "return", "values", ";", "}", "</s>"]
["<s>", "public", "static", "long", "findMailboxOfType", "(", "Context", "context", ",", "long", "accountId", ",", "int", "type", ")", "{", "long", "mailboxId", "=", "NO_MAILBOX", ";", "String", "[", "]", "bindArguments", "=", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "type", ")", ",", "Long", ".", "toString", "(", "accountId", ")", "}", ";", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "Mailbox", ".", "CONTENT_URI", ",", "ID_PROJECTION", ",", "WHERE_TYPE_AND_ACCOUNT_KEY", ",", "bindArguments", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "mailboxId", "=", "c", ".", "getLong", "(", "ID_PROJECTION_COLUMN", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "return", "mailboxId", ";", "}", "</s>"]
["<s>", "public", "HostAuth", "(", ")", "{", "mBaseUri", "=", "CONTENT_URI", ";", "mPort", "=", "-", "1", ";", "}", "</s>"]
["<s>", "public", "static", "HostAuth", "restoreHostAuthWithId", "(", "Context", "context", ",", "long", "id", ")", "{", "Uri", "u", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "HostAuth", ".", "CONTENT_URI", ",", "id", ")", ";", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "u", ",", "HostAuth", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "return", "getContent", "(", "c", ",", "HostAuth", ".", "class", ")", ";", "}", "else", "{", "return", "null", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "EmailContent", ".", "HostAuth", "restore", "(", "Cursor", "cursor", ")", "{", "mBaseUri", "=", "CONTENT_URI", ";", "mId", "=", "cursor", ".", "getLong", "(", "CONTENT_ID_COLUMN", ")", ";", "mProtocol", "=", "cursor", ".", "getString", "(", "CONTENT_PROTOCOL_COLUMN", ")", ";", "mAddress", "=", "cursor", ".", "getString", "(", "CONTENT_ADDRESS_COLUMN", ")", ";", "mPort", "=", "cursor", ".", "getInt", "(", "CONTENT_PORT_COLUMN", ")", ";", "mFlags", "=", "cursor", ".", "getInt", "(", "CONTENT_FLAGS_COLUMN", ")", ";", "mLogin", "=", "cursor", ".", "getString", "(", "CONTENT_LOGIN_COLUMN", ")", ";", "mPassword", "=", "cursor", ".", "getString", "(", "CONTENT_PASSWORD_COLUMN", ")", ";", "mDomain", "=", "cursor", ".", "getString", "(", "CONTENT_DOMAIN_COLUMN", ")", ";", "mAccountKey", "=", "cursor", ".", "getLong", "(", "CONTENT_ACCOUNT_KEY_COLUMN", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "ContentValues", "toContentValues", "(", ")", "{", "ContentValues", "values", "=", "new", "ContentValues", "(", ")", ";", "values", ".", "put", "(", "HostAuthColumns", ".", "PROTOCOL", ",", "mProtocol", ")", ";", "values", ".", "put", "(", "HostAuthColumns", ".", "ADDRESS", ",", "mAddress", ")", ";", "values", ".", "put", "(", "HostAuthColumns", ".", "PORT", ",", "mPort", ")", ";", "values", ".", "put", "(", "HostAuthColumns", ".", "FLAGS", ",", "mFlags", ")", ";", "values", ".", "put", "(", "HostAuthColumns", ".", "LOGIN", ",", "mLogin", ")", ";", "values", ".", "put", "(", "HostAuthColumns", ".", "PASSWORD", ",", "mPassword", ")", ";", "values", ".", "put", "(", "HostAuthColumns", ".", "DOMAIN", ",", "mDomain", ")", ";", "values", ".", "put", "(", "HostAuthColumns", ".", "ACCOUNT_KEY", ",", "mAccountKey", ")", ";", "return", "values", ";", "}", "</s>"]
["<s>", "public", "String", "getStoreUri", "(", ")", "{", "String", "security", ";", "switch", "(", "mFlags", "&", "(", "FLAG_SSL", "|", "FLAG_TLS", "|", "FLAG_TRUST_ALL_CERTIFICATES", ")", ")", "{", "case", "FLAG_SSL", ":", "security", "=", "\"", "<STR_LIT>", "\"", ";", "break", ";", "case", "FLAG_SSL", "|", "FLAG_TRUST_ALL_CERTIFICATES", ":", "security", "=", "\"", "<STR_LIT>", "\"", ";", "break", ";", "case", "FLAG_TLS", ":", "security", "=", "\"", "<STR_LIT>", "\"", ";", "break", ";", "case", "FLAG_TLS", "|", "FLAG_TRUST_ALL_CERTIFICATES", ":", "security", "=", "\"", "<STR_LIT>", "\"", ";", "break", ";", "default", ":", "security", "=", "\"", "\"", ";", "break", ";", "}", "String", "userInfo", "=", "null", ";", "if", "(", "(", "mFlags", "&", "FLAG_AUTHENTICATE", ")", "!", "=", "0", ")", "{", "String", "trimUser", "=", "(", "mLogin", "!", "=", "null", ")", "?", "mLogin", ".", "trim", "(", ")", ":", "\"", "\"", ";", "String", "trimPassword", "=", "(", "mPassword", "!", "=", "null", ")", "?", "mPassword", ".", "trim", "(", ")", ":", "\"", "\"", ";", "userInfo", "=", "trimUser", "+", "\"", "<STR_LIT::>", "\"", "+", "trimPassword", ";", "}", "String", "address", "=", "(", "mAddress", "!", "=", "null", ")", "?", "mAddress", ".", "trim", "(", ")", ":", "null", ";", "String", "path", "=", "(", "mDomain", "!", "=", "null", ")", "?", "\"", "<STR_LIT:/>", "\"", "+", "mDomain", ":", "null", ";", "URI", "uri", ";", "try", "{", "uri", "=", "new", "URI", "(", "mProtocol", "+", "security", ",", "userInfo", ",", "address", ",", "mPort", ",", "path", ",", "null", ",", "null", ")", ";", "return", "uri", ".", "toString", "(", ")", ";", "}", "catch", "(", "URISyntaxException", "e", ")", "{", "return", "null", ";", "}", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "void", "setStoreUri", "(", "String", "uriString", ")", "{", "try", "{", "URI", "uri", "=", "new", "URI", "(", "uriString", ")", ";", "mLogin", "=", "null", ";", "mPassword", "=", "null", ";", "mFlags", "&", "=", "~", "FLAG_AUTHENTICATE", ";", "if", "(", "uri", ".", "getUserInfo", "(", ")", "!", "=", "null", ")", "{", "String", "[", "]", "userInfoParts", "=", "uri", ".", "getUserInfo", "(", ")", ".", "split", "(", "\"", "<STR_LIT::>", "\"", ",", "<NUM_LIT:2>", ")", ";", "mLogin", "=", "userInfoParts", "[", "0", "]", ";", "mFlags", "|", "=", "FLAG_AUTHENTICATE", ";", "if", "(", "userInfoParts", ".", "length", ">", "1", ")", "{", "mPassword", "=", "userInfoParts", "[", "1", "]", ";", "}", "}", "String", "[", "]", "schemeParts", "=", "uri", ".", "getScheme", "(", ")", ".", "split", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:+>", "\"", ")", ";", "mProtocol", "=", "(", "schemeParts", ".", "length", ">", "=", "1", ")", "?", "schemeParts", "[", "0", "]", ":", "null", ";", "mFlags", "&", "=", "~", "(", "FLAG_SSL", "|", "FLAG_TLS", "|", "FLAG_TRUST_ALL_CERTIFICATES", ")", ";", "boolean", "ssl", "=", "false", ";", "if", "(", "schemeParts", ".", "length", ">", "=", "<NUM_LIT:2>", ")", "{", "String", "part1", "=", "schemeParts", "[", "1", "]", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "part1", ")", ")", "{", "ssl", "=", "true", ";", "mFlags", "|", "=", "FLAG_SSL", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "part1", ")", ")", "{", "mFlags", "|", "=", "FLAG_TLS", ";", "}", "if", "(", "schemeParts", ".", "length", ">", "=", "<NUM_LIT:3>", ")", "{", "String", "part2", "=", "schemeParts", "[", "<NUM_LIT:2>", "]", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "part2", ")", ")", "{", "mFlags", "|", "=", "FLAG_TRUST_ALL_CERTIFICATES", ";", "}", "}", "}", "mAddress", "=", "uri", ".", "getHost", "(", ")", ";", "mPort", "=", "uri", ".", "getPort", "(", ")", ";", "if", "(", "mPort", "=", "=", "-", "1", ")", "{", "if", "(", "\"", "<STR_LIT:3>", "\"", ".", "equals", "(", "mProtocol", ")", ")", "{", "mPort", "=", "ssl", "?", "<NUM_LIT>", ":", "<NUM_LIT>", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "mProtocol", ")", ")", "{", "mPort", "=", "ssl", "?", "<NUM_LIT>", ":", "<NUM_LIT>", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "mProtocol", ")", ")", "{", "mPort", "=", "ssl", "?", "<NUM_LIT>", ":", "<NUM_LIT>", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "mProtocol", ")", ")", "{", "mPort", "=", "ssl", "?", "<NUM_LIT>", ":", "<NUM_LIT>", ";", "}", "}", "if", "(", "uri", ".", "getPath", "(", ")", "!", "=", "null", "&", "&", "uri", ".", "getPath", "(", ")", ".", "length", "(", ")", ">", "0", ")", "{", "mDomain", "=", "uri", ".", "getPath", "(", ")", ".", "substring", "(", "1", ")", ";", "}", "}", "catch", "(", "URISyntaxException", "use", ")", "{", "throw", "new", "Error", "(", "use", ")", ";", "}", "}", "</s>"]
["<s>", "public", "int", "describeContents", "(", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "public", "EmailContent", ".", "HostAuth", "createFromParcel", "(", "Parcel", "in", ")", "{", "return", "new", "EmailContent", ".", "HostAuth", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "EmailContent", ".", "HostAuth", "[", "]", "newArray", "(", "int", "size", ")", "{", "return", "new", "EmailContent", ".", "HostAuth", "[", "size", "]", ";", "}", "</s>"]
["<s>", "public", "void", "writeToParcel", "(", "Parcel", "dest", ",", "int", "flags", ")", "{", "dest", ".", "writeLong", "(", "mId", ")", ";", "dest", ".", "writeString", "(", "mProtocol", ")", ";", "dest", ".", "writeString", "(", "mAddress", ")", ";", "dest", ".", "writeInt", "(", "mPort", ")", ";", "dest", ".", "writeInt", "(", "mFlags", ")", ";", "dest", ".", "writeString", "(", "mLogin", ")", ";", "dest", ".", "writeString", "(", "mPassword", ")", ";", "dest", ".", "writeString", "(", "mDomain", ")", ";", "dest", ".", "writeLong", "(", "mAccountKey", ")", ";", "}", "</s>"]
["<s>", "public", "HostAuth", "(", "Parcel", "in", ")", "{", "mBaseUri", "=", "CONTENT_URI", ";", "mId", "=", "in", ".", "readLong", "(", ")", ";", "mProtocol", "=", "in", ".", "readString", "(", ")", ";", "mAddress", "=", "in", ".", "readString", "(", ")", ";", "mPort", "=", "in", ".", "readInt", "(", ")", ";", "mFlags", "=", "in", ".", "readInt", "(", ")", ";", "mLogin", "=", "in", ".", "readString", "(", ")", ";", "mPassword", "=", "in", ".", "readString", "(", ")", ";", "mDomain", "=", "in", ".", "readString", "(", ")", ";", "mAccountKey", "=", "in", ".", "readLong", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "getStoreUri", "(", ")", ";", "}", "</s>"]
["<s>", "public", "EasAuthenticator", "(", "Context", "context", ")", "{", "super", "(", "context", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Bundle", "addAccount", "(", "AccountAuthenticatorResponse", "response", ",", "String", "accountType", ",", "String", "authTokenType", ",", "String", "[", "]", "requiredFeatures", ",", "Bundle", "options", ")", "throws", "NetworkErrorException", "{", "if", "(", "options", "!", "=", "null", "&", "&", "options", ".", "containsKey", "(", "OPTIONS_PASSWORD", ")", "&", "&", "options", ".", "containsKey", "(", "OPTIONS_USERNAME", ")", ")", "{", "final", "Account", "account", "=", "new", "Account", "(", "options", ".", "getString", "(", "OPTIONS_USERNAME", ")", ",", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ")", ";", "AccountManager", ".", "get", "(", "EasAuthenticatorService", ".", "this", ")", ".", "addAccountExplicitly", "(", "account", ",", "options", ".", "getString", "(", "OPTIONS_PASSWORD", ")", ",", "null", ")", ";", "boolean", "syncContacts", "=", "false", ";", "if", "(", "options", ".", "containsKey", "(", "OPTIONS_CONTACTS_SYNC_ENABLED", ")", "&", "&", "options", ".", "getBoolean", "(", "OPTIONS_CONTACTS_SYNC_ENABLED", ")", ")", "{", "syncContacts", "=", "true", ";", "}", "ContentResolver", ".", "setIsSyncable", "(", "account", ",", "ContactsContract", ".", "AUTHORITY", ",", "1", ")", ";", "ContentResolver", ".", "setSyncAutomatically", "(", "account", ",", "ContactsContract", ".", "AUTHORITY", ",", "syncContacts", ")", ";", "Bundle", "b", "=", "new", "Bundle", "(", ")", ";", "b", ".", "putString", "(", "AccountManager", ".", "KEY_ACCOUNT_NAME", ",", "options", ".", "getString", "(", "OPTIONS_USERNAME", ")", ")", ";", "b", ".", "putString", "(", "AccountManager", ".", "KEY_ACCOUNT_TYPE", ",", "Eas", ".", "ACCOUNT_MANAGER_TYPE", ")", ";", "return", "b", ";", "}", "else", "{", "Bundle", "b", "=", "new", "Bundle", "(", ")", ";", "Intent", "intent", "=", "AccountSetupBasics", ".", "actionSetupExchangeIntent", "(", "EasAuthenticatorService", ".", "this", ")", ";", "intent", ".", "putExtra", "(", "AccountManager", ".", "KEY_ACCOUNT_AUTHENTICATOR_RESPONSE", ",", "response", ")", ";", "b", ".", "putParcelable", "(", "AccountManager", ".", "KEY_INTENT", ",", "intent", ")", ";", "return", "b", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "Bundle", "confirmCredentials", "(", "AccountAuthenticatorResponse", "response", ",", "Account", "account", ",", "Bundle", "options", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Bundle", "editProperties", "(", "AccountAuthenticatorResponse", "response", ",", "String", "accountType", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Bundle", "getAuthToken", "(", "AccountAuthenticatorResponse", "response", ",", "Account", "account", ",", "String", "authTokenType", ",", "Bundle", "loginOptions", ")", "throws", "NetworkErrorException", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getAuthTokenLabel", "(", "String", "authTokenType", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Bundle", "hasFeatures", "(", "AccountAuthenticatorResponse", "response", ",", "Account", "account", ",", "String", "[", "]", "features", ")", "throws", "NetworkErrorException", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Bundle", "updateCredentials", "(", "AccountAuthenticatorResponse", "response", ",", "Account", "account", ",", "String", "authTokenType", ",", "Bundle", "loginOptions", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "IBinder", "onBind", "(", "Intent", "intent", ")", "{", "String", "authenticatorIntent", "=", "\"", "<STR_LIT>", "\"", ";", "if", "(", "authenticatorIntent", ".", "equals", "(", "intent", ".", "getAction", "(", ")", ")", ")", "{", "return", "new", "EasAuthenticator", "(", "this", ")", ".", "getIBinder", "(", ")", ";", "}", "else", "{", "return", "null", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "actionReschedule", "(", "Context", "context", ")", "{", "Intent", "i", "=", "new", "Intent", "(", ")", ";", "i", ".", "setClass", "(", "context", ",", "MailService", ".", "class", ")", ";", "i", ".", "setAction", "(", "MailService", ".", "ACTION_RESCHEDULE", ")", ";", "context", ".", "startService", "(", "i", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionCancel", "(", "Context", "context", ")", "{", "Intent", "i", "=", "new", "Intent", "(", ")", ";", "i", ".", "setClass", "(", "context", ",", "MailService", ".", "class", ")", ";", "i", ".", "setAction", "(", "MailService", ".", "ACTION_CANCEL", ")", ";", "context", ".", "startService", "(", "i", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "resetNewMessageCount", "(", "Context", "context", ",", "long", "accountId", ")", "{", "synchronized", "(", "mSyncReports", ")", "{", "for", "(", "AccountSyncReport", "report", ":", "mSyncReports", ".", "values", "(", ")", ")", "{", "if", "(", "accountId", "=", "=", "-", "1", "|", "|", "accountId", "=", "=", "report", ".", "accountId", ")", "{", "report", ".", "numNewMessages", "=", "0", ";", "}", "}", "}", "Uri", "uri", ";", "if", "(", "accountId", "=", "=", "-", "1", ")", "{", "uri", "=", "Account", ".", "CONTENT_URI", ";", "}", "else", "{", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "accountId", ")", ";", "}", "context", ".", "getContentResolver", "(", ")", ".", "update", "(", "uri", ",", "mClearNewMessages", ",", "null", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionNotifyNewMessages", "(", "Context", "context", ",", "long", "accountId", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "ACTION_NOTIFY_MAIL", ")", ";", "i", ".", "setClass", "(", "context", ",", "MailService", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_CHECK_ACCOUNT", ",", "accountId", ")", ";", "context", ".", "startService", "(", "i", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "onStartCommand", "(", "Intent", "intent", ",", "int", "flags", ",", "int", "startId", ")", "{", "super", ".", "onStartCommand", "(", "intent", ",", "flags", ",", "startId", ")", ";", "this", ".", "mStartId", "=", "startId", ";", "String", "action", "=", "intent", ".", "getAction", "(", ")", ";", "Controller", "controller", "=", "Controller", ".", "getInstance", "(", "getApplication", "(", ")", ")", ";", "controller", ".", "addResultCallback", "(", "mControllerCallback", ")", ";", "if", "(", "ACTION_CHECK_MAIL", ".", "equals", "(", "action", ")", ")", "{", "restoreSyncReports", "(", "intent", ")", ";", "AlarmManager", "alarmManager", "=", "(", "AlarmManager", ")", "getSystemService", "(", "Context", ".", "ALARM_SERVICE", ")", ";", "long", "checkAccountId", "=", "intent", ".", "getLongExtra", "(", "EXTRA_CHECK_ACCOUNT", ",", "-", "1", ")", ";", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "checkAccountId", ")", ";", "}", "if", "(", "checkAccountId", ">", "=", "0", ")", "{", "setWatchdog", "(", "checkAccountId", ",", "alarmManager", ")", ";", "}", "if", "(", "checkAccountId", "=", "=", "-", "1", "|", "|", "!", "syncOneAccount", "(", "controller", ",", "checkAccountId", ",", "startId", ")", ")", "{", "if", "(", "checkAccountId", "!", "=", "-", "1", ")", "{", "updateAccountReport", "(", "checkAccountId", ",", "0", ")", ";", "}", "reschedule", "(", "alarmManager", ")", ";", "stopSelf", "(", "startId", ")", ";", "}", "}", "else", "if", "(", "ACTION_CANCEL", ".", "equals", "(", "action", ")", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "cancel", "(", ")", ";", "stopSelf", "(", "startId", ")", ";", "}", "else", "if", "(", "ACTION_RESCHEDULE", ".", "equals", "(", "action", ")", ")", "{", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "NotificationManager", "notificationManager", "=", "(", "NotificationManager", ")", "getSystemService", "(", "Context", ".", "NOTIFICATION_SERVICE", ")", ";", "notificationManager", ".", "cancel", "(", "NEW_MESSAGE_NOTIFICATION_ID", ")", ";", "refreshSyncReports", "(", ")", ";", "AlarmManager", "alarmManager", "=", "(", "AlarmManager", ")", "getSystemService", "(", "Context", ".", "ALARM_SERVICE", ")", ";", "reschedule", "(", "alarmManager", ")", ";", "stopSelf", "(", "startId", ")", ";", "}", "else", "if", "(", "ACTION_NOTIFY_MAIL", ".", "equals", "(", "action", ")", ")", "{", "long", "accountId", "=", "intent", ".", "getLongExtra", "(", "EXTRA_CHECK_ACCOUNT", ",", "-", "1", ")", ";", "Cursor", "c", "=", "getContentResolver", "(", ")", ".", "query", "(", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "accountId", ")", ",", "NEW_MESSAGE_COUNT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "int", "newMessageCount", "=", "0", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "newMessageCount", "=", "c", ".", "getInt", "(", "0", ")", ";", "}", "else", "{", "accountId", "=", "-", "1", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "Long", ".", "toString", "(", "accountId", ")", "+", "\"", "<STR_LIT>", "\"", "+", "newMessageCount", ")", ";", "}", "if", "(", "accountId", "!", "=", "-", "1", ")", "{", "updateAccountReport", "(", "accountId", ",", "newMessageCount", ")", ";", "notifyNewMessages", "(", "accountId", ")", ";", "}", "stopSelf", "(", "startId", ")", ";", "}", "return", "START_NOT_STICKY", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "IBinder", "onBind", "(", "Intent", "intent", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onDestroy", "(", ")", "{", "super", ".", "onDestroy", "(", ")", ";", "Controller", ".", "getInstance", "(", "getApplication", "(", ")", ")", ".", "removeResultCallback", "(", "mControllerCallback", ")", ";", "}", "</s>"]
["<s>", "private", "void", "cancel", "(", ")", "{", "AlarmManager", "alarmMgr", "=", "(", "AlarmManager", ")", "getSystemService", "(", "Context", ".", "ALARM_SERVICE", ")", ";", "PendingIntent", "pi", "=", "createAlarmIntent", "(", "-", "1", ",", "null", ",", "false", ")", ";", "alarmMgr", ".", "cancel", "(", "pi", ")", ";", "}", "</s>"]
["<s>", "private", "void", "refreshSyncReports", "(", ")", "{", "synchronized", "(", "mSyncReports", ")", "{", "HashMap", "<", "Long", ",", "AccountSyncReport", ">", "oldSyncReports", "=", "new", "HashMap", "<", "Long", ",", "AccountSyncReport", ">", "(", "mSyncReports", ")", ";", "mSyncReports", ".", "clear", "(", ")", ";", "setupSyncReportsLocked", "(", "-", "1", ")", ";", "for", "(", "AccountSyncReport", "newReport", ":", "mSyncReports", ".", "values", "(", ")", ")", "{", "AccountSyncReport", "oldReport", "=", "oldSyncReports", ".", "get", "(", "newReport", ".", "accountId", ")", ";", "if", "(", "oldReport", "!", "=", "null", ")", "{", "newReport", ".", "prevSyncTime", "=", "oldReport", ".", "prevSyncTime", ";", "if", "(", "newReport", ".", "syncInterval", ">", "0", "&", "&", "newReport", ".", "prevSyncTime", "!", "=", "0", ")", "{", "newReport", ".", "nextSyncTime", "=", "newReport", ".", "prevSyncTime", "+", "(", "newReport", ".", "syncInterval", "*", "<NUM_LIT:1000>", "*", "<NUM_LIT>", ")", ";", "}", "}", "}", "}", "}", "</s>"]
["<s>", "void", "reschedule", "(", "AlarmManager", "alarmMgr", ")", "{", "setupSyncReports", "(", "-", "1", ")", ";", "synchronized", "(", "mSyncReports", ")", "{", "int", "numAccounts", "=", "mSyncReports", ".", "size", "(", ")", ";", "long", "[", "]", "accountInfo", "=", "new", "long", "[", "numAccounts", "*", "<NUM_LIT:2>", "]", ";", "int", "accountInfoIndex", "=", "0", ";", "long", "nextCheckTime", "=", "Long", ".", "MAX_VALUE", ";", "AccountSyncReport", "nextAccount", "=", "null", ";", "long", "timeNow", "=", "SystemClock", ".", "elapsedRealtime", "(", ")", ";", "for", "(", "AccountSyncReport", "report", ":", "mSyncReports", ".", "values", "(", ")", ")", "{", "if", "(", "report", ".", "syncInterval", "<", "=", "0", ")", "{", "continue", ";", "}", "long", "prevSyncTime", "=", "report", ".", "prevSyncTime", ";", "long", "nextSyncTime", "=", "report", ".", "nextSyncTime", ";", "if", "(", "(", "prevSyncTime", "=", "=", "0", ")", "|", "|", "(", "nextSyncTime", "<", "timeNow", ")", ")", "{", "nextCheckTime", "=", "0", ";", "nextAccount", "=", "report", ";", "}", "else", "if", "(", "nextSyncTime", "<", "nextCheckTime", ")", "{", "nextCheckTime", "=", "nextSyncTime", ";", "nextAccount", "=", "report", ";", "}", "accountInfo", "[", "accountInfoIndex", "+", "+", "]", "=", "report", ".", "accountId", ";", "accountInfo", "[", "accountInfoIndex", "+", "+", "]", "=", "report", ".", "prevSyncTime", ";", "}", "while", "(", "accountInfoIndex", "<", "accountInfo", ".", "length", ")", "{", "accountInfo", "[", "accountInfoIndex", "+", "+", "]", "=", "-", "1", ";", "}", "long", "idToCheck", "=", "(", "nextAccount", "=", "=", "null", ")", "?", "-", "1", ":", "nextAccount", ".", "accountId", ";", "PendingIntent", "pi", "=", "createAlarmIntent", "(", "idToCheck", ",", "accountInfo", ",", "false", ")", ";", "if", "(", "nextAccount", "=", "=", "null", ")", "{", "alarmMgr", ".", "cancel", "(", "pi", ")", ";", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "else", "{", "alarmMgr", ".", "set", "(", "AlarmManager", ".", "ELAPSED_REALTIME_WAKEUP", ",", "nextCheckTime", ",", "pi", ")", ";", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "nextCheckTime", "+", "\"", "<STR_LIT>", "\"", "+", "nextAccount", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "private", "void", "setWatchdog", "(", "long", "accountId", ",", "AlarmManager", "alarmMgr", ")", "{", "PendingIntent", "pi", "=", "createAlarmIntent", "(", "accountId", ",", "null", ",", "true", ")", ";", "long", "timeNow", "=", "SystemClock", ".", "elapsedRealtime", "(", ")", ";", "long", "nextCheckTime", "=", "timeNow", "+", "WATCHDOG_DELAY", ";", "alarmMgr", ".", "set", "(", "AlarmManager", ".", "ELAPSED_REALTIME_WAKEUP", ",", "nextCheckTime", ",", "pi", ")", ";", "}", "</s>"]
["<s>", "PendingIntent", "createAlarmIntent", "(", "long", "checkId", ",", "long", "[", "]", "accountInfo", ",", "boolean", "isWatchdog", ")", "{", "Intent", "i", "=", "new", "Intent", "(", ")", ";", "i", ".", "setClassName", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "i", ".", "setAction", "(", "ACTION_CHECK_MAIL", ")", ";", "i", ".", "putExtra", "(", "EXTRA_CHECK_ACCOUNT", ",", "checkId", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT_INFO", ",", "accountInfo", ")", ";", "if", "(", "isWatchdog", ")", "{", "i", ".", "putExtra", "(", "EXTRA_DEBUG_WATCHDOG", ",", "true", ")", ";", "}", "PendingIntent", "pi", "=", "PendingIntent", ".", "getService", "(", "this", ",", "0", ",", "i", ",", "PendingIntent", ".", "FLAG_UPDATE_CURRENT", ")", ";", "return", "pi", ";", "}", "</s>"]
["<s>", "private", "boolean", "syncOneAccount", "(", "Controller", "controller", ",", "long", "checkAccountId", ",", "int", "startId", ")", "{", "long", "inboxId", "=", "Mailbox", ".", "findMailboxOfType", "(", "this", ",", "checkAccountId", ",", "Mailbox", ".", "TYPE_INBOX", ")", ";", "if", "(", "inboxId", "=", "=", "Mailbox", ".", "NO_MAILBOX", ")", "{", "return", "false", ";", "}", "else", "{", "controller", ".", "serviceCheckMail", "(", "checkAccountId", ",", "inboxId", ",", "startId", ",", "mControllerCallback", ")", ";", "return", "true", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "displayName", "+", "\"", "<STR_LIT>", "\"", "+", "accountId", "+", "\"", "<STR_LIT>", "\"", "+", "prevSyncTime", "+", "\"", "<STR_LIT>", "\"", "+", "nextSyncTime", "+", "\"", "<STR_LIT>", "\"", "+", "numNewMessages", ";", "}", "</s>"]
["<s>", "void", "setupSyncReports", "(", "long", "accountId", ")", "{", "synchronized", "(", "mSyncReports", ")", "{", "setupSyncReportsLocked", "(", "accountId", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "setupSyncReportsLocked", "(", "long", "accountId", ")", "{", "if", "(", "accountId", "=", "=", "-", "1", ")", "{", "if", "(", "mSyncReports", ".", "size", "(", ")", ">", "0", ")", "{", "return", ";", "}", "}", "else", "{", "if", "(", "mSyncReports", ".", "containsKey", "(", "accountId", ")", ")", "{", "return", ";", "}", "}", "Uri", "uri", ";", "if", "(", "accountId", "=", "=", "-", "1", ")", "{", "uri", "=", "Account", ".", "CONTENT_URI", ";", "}", "else", "{", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "accountId", ")", ";", "}", "Cursor", "c", "=", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "Account", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "AccountSyncReport", "report", "=", "new", "AccountSyncReport", "(", ")", ";", "int", "syncInterval", "=", "c", ".", "getInt", "(", "Account", ".", "CONTENT_SYNC_INTERVAL_COLUMN", ")", ";", "int", "flags", "=", "c", ".", "getInt", "(", "Account", ".", "CONTENT_FLAGS_COLUMN", ")", ";", "String", "ringtoneString", "=", "c", ".", "getString", "(", "Account", ".", "CONTENT_RINGTONE_URI_COLUMN", ")", ";", "if", "(", "DEBUG_FORCE_QUICK_REFRESH", "&", "&", "syncInterval", ">", "=", "0", ")", "{", "syncInterval", "=", "1", ";", "}", "report", ".", "accountId", "=", "c", ".", "getLong", "(", "Account", ".", "CONTENT_ID_COLUMN", ")", ";", "report", ".", "prevSyncTime", "=", "0", ";", "report", ".", "nextSyncTime", "=", "(", "syncInterval", ">", "0", ")", "?", "0", ":", "-", "1", ";", "report", ".", "numNewMessages", "=", "0", ";", "report", ".", "syncInterval", "=", "syncInterval", ";", "report", ".", "notify", "=", "(", "flags", "&", "Account", ".", "FLAGS_NOTIFY_NEW_MAIL", ")", "!", "=", "0", ";", "report", ".", "vibrate", "=", "(", "flags", "&", "Account", ".", "FLAGS_VIBRATE", ")", "!", "=", "0", ";", "report", ".", "ringtoneUri", "=", "(", "ringtoneString", "=", "=", "null", ")", "?", "null", ":", "Uri", ".", "parse", "(", "ringtoneString", ")", ";", "report", ".", "displayName", "=", "c", ".", "getString", "(", "Account", ".", "CONTENT_DISPLAY_NAME_COLUMN", ")", ";", "mSyncReports", ".", "put", "(", "report", ".", "accountId", ",", "report", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "AccountSyncReport", "updateAccountReport", "(", "long", "accountId", ",", "int", "newCount", ")", "{", "setupSyncReports", "(", "accountId", ")", ";", "synchronized", "(", "mSyncReports", ")", "{", "AccountSyncReport", "report", "=", "mSyncReports", ".", "get", "(", "accountId", ")", ";", "if", "(", "report", "=", "=", "null", ")", "{", "Log", ".", "d", "(", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "Long", ".", "toString", "(", "accountId", ")", ")", ";", "return", "null", ";", "}", "report", ".", "prevSyncTime", "=", "SystemClock", ".", "elapsedRealtime", "(", ")", ";", "if", "(", "report", ".", "syncInterval", ">", "0", ")", "{", "report", ".", "nextSyncTime", "=", "report", ".", "prevSyncTime", "+", "(", "report", ".", "syncInterval", "*", "<NUM_LIT:1000>", "*", "<NUM_LIT>", ")", ";", "}", "if", "(", "newCount", "!", "=", "-", "1", ")", "{", "report", ".", "numNewMessages", "=", "newCount", ";", "}", "if", "(", "Config", ".", "LOGD", "&", "&", "Email", ".", "DEBUG", ")", "{", "Log", ".", "d", "(", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "report", ".", "toString", "(", ")", ")", ";", "}", "return", "report", ";", "}", "}", "</s>"]
["<s>", "void", "restoreSyncReports", "(", "Intent", "restoreIntent", ")", "{", "setupSyncReports", "(", "-", "1", ")", ";", "synchronized", "(", "mSyncReports", ")", "{", "long", "[", "]", "accountInfo", "=", "restoreIntent", ".", "getLongArrayExtra", "(", "EXTRA_ACCOUNT_INFO", ")", ";", "if", "(", "accountInfo", "=", "=", "null", ")", "{", "Log", ".", "d", "(", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "int", "accountInfoIndex", "=", "0", ";", "int", "accountInfoLimit", "=", "accountInfo", ".", "length", ";", "while", "(", "accountInfoIndex", "<", "accountInfoLimit", ")", "{", "long", "accountId", "=", "accountInfo", "[", "accountInfoIndex", "+", "+", "]", ";", "long", "prevSync", "=", "accountInfo", "[", "accountInfoIndex", "+", "+", "]", ";", "AccountSyncReport", "report", "=", "mSyncReports", ".", "get", "(", "accountId", ")", ";", "if", "(", "report", "!", "=", "null", ")", "{", "if", "(", "report", ".", "prevSyncTime", "=", "=", "0", ")", "{", "report", ".", "prevSyncTime", "=", "prevSync", ";", "if", "(", "report", ".", "syncInterval", ">", "0", "&", "&", "report", ".", "prevSyncTime", "!", "=", "0", ")", "{", "report", ".", "nextSyncTime", "=", "report", ".", "prevSyncTime", "+", "(", "report", ".", "syncInterval", "*", "<NUM_LIT:1000>", "*", "<NUM_LIT>", ")", ";", "}", "}", "}", "}", "}", "}", "</s>"]
["<s>", "public", "void", "loadMessageForViewCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "loadAttachmentCallback", "(", "MessagingException", "result", ",", "long", "messageId", ",", "long", "attachmentId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "updateMailboxCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "mailboxId", ",", "int", "progress", ",", "int", "numNewMessages", ")", "{", "if", "(", "result", "!", "=", "null", "|", "|", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "long", "inboxId", "=", "Mailbox", ".", "findMailboxOfType", "(", "MailService", ".", "this", ",", "accountId", ",", "Mailbox", ".", "TYPE_INBOX", ")", ";", "if", "(", "mailboxId", "=", "=", "inboxId", ")", "{", "if", "(", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "updateAccountReport", "(", "accountId", ",", "numNewMessages", ")", ";", "if", "(", "numNewMessages", ">", "0", ")", "{", "notifyNewMessages", "(", "accountId", ")", ";", "}", "}", "else", "{", "updateAccountReport", "(", "accountId", ",", "-", "1", ")", ";", "}", "}", "Email", ".", "updateMailboxRefreshTime", "(", "mailboxId", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "updateMailboxListCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "public", "void", "serviceCheckMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "mailboxId", ",", "int", "progress", ",", "long", "tag", ")", "{", "if", "(", "result", "!", "=", "null", "|", "|", "progress", "=", "=", "<NUM_LIT:100>", ")", "{", "if", "(", "result", "!", "=", "null", ")", "{", "updateAccountReport", "(", "accountId", ",", "-", "1", ")", ";", "}", "AlarmManager", "alarmManager", "=", "(", "AlarmManager", ")", "getSystemService", "(", "Context", ".", "ALARM_SERVICE", ")", ";", "reschedule", "(", "alarmManager", ")", ";", "int", "serviceId", "=", "MailService", ".", "this", ".", "mStartId", ";", "if", "(", "tag", "!", "=", "0", ")", "{", "serviceId", "=", "(", "int", ")", "tag", ";", "}", "stopSelf", "(", "serviceId", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "sendMailCallback", "(", "MessagingException", "result", ",", "long", "accountId", ",", "long", "messageId", ",", "int", "progress", ")", "{", "}", "</s>"]
["<s>", "private", "void", "notifyNewMessages", "(", "long", "accountId", ")", "{", "boolean", "notify", "=", "false", ";", "boolean", "vibrate", "=", "false", ";", "Uri", "ringtone", "=", "null", ";", "int", "accountsWithNewMessages", "=", "0", ";", "int", "numNewMessages", "=", "0", ";", "String", "reportName", "=", "null", ";", "synchronized", "(", "mSyncReports", ")", "{", "for", "(", "AccountSyncReport", "report", ":", "mSyncReports", ".", "values", "(", ")", ")", "{", "if", "(", "report", ".", "numNewMessages", "=", "=", "0", ")", "{", "continue", ";", "}", "numNewMessages", "+", "=", "report", ".", "numNewMessages", ";", "accountsWithNewMessages", "+", "=", "1", ";", "if", "(", "report", ".", "accountId", "=", "=", "accountId", ")", "{", "notify", "=", "report", ".", "notify", ";", "vibrate", "=", "report", ".", "vibrate", ";", "ringtone", "=", "report", ".", "ringtoneUri", ";", "reportName", "=", "report", ".", "displayName", ";", "}", "}", "}", "if", "(", "!", "notify", ")", "{", "return", ";", "}", "Intent", "intent", ";", "String", "reportString", ";", "if", "(", "accountsWithNewMessages", "=", "=", "1", ")", "{", "reportString", "=", "getResources", "(", ")", ".", "getQuantityString", "(", "R", ".", "plurals", ".", "notification_new_one_account_fmt", ",", "numNewMessages", ",", "numNewMessages", ",", "reportName", ")", ";", "intent", "=", "MessageList", ".", "actionHandleAccountIntent", "(", "this", ",", "accountId", ",", "-", "1", ",", "Mailbox", ".", "TYPE_INBOX", ")", ";", "}", "else", "{", "reportString", "=", "getResources", "(", ")", ".", "getQuantityString", "(", "R", ".", "plurals", ".", "notification_new_multi_account_fmt", ",", "accountsWithNewMessages", ",", "accountsWithNewMessages", ")", ";", "intent", "=", "MessageList", ".", "actionHandleAccountIntent", "(", "this", ",", "-", "1", ",", "Mailbox", ".", "QUERY_ALL_INBOXES", ",", "-", "1", ")", ";", "}", "PendingIntent", "pending", "=", "PendingIntent", ".", "getActivity", "(", "this", ",", "0", ",", "intent", ",", "PendingIntent", ".", "FLAG_UPDATE_CURRENT", ")", ";", "Notification", "notification", "=", "new", "Notification", "(", "R", ".", "drawable", ".", "stat_notify_email_generic", ",", "getString", "(", "R", ".", "string", ".", "notification_new_title", ")", ",", "System", ".", "currentTimeMillis", "(", ")", ")", ";", "notification", ".", "setLatestEventInfo", "(", "this", ",", "getString", "(", "R", ".", "string", ".", "notification_new_title", ")", ",", "reportString", ",", "pending", ")", ";", "notification", ".", "sound", "=", "ringtone", ";", "if", "(", "vibrate", ")", "{", "notification", ".", "defaults", "|", "=", "Notification", ".", "DEFAULT_VIBRATE", ";", "}", "notification", ".", "flags", "|", "=", "Notification", ".", "FLAG_SHOW_LIGHTS", ";", "notification", ".", "ledARGB", "=", "<NUM_LIT>", ";", "notification", ".", "ledOnMS", "=", "<NUM_LIT>", ";", "notification", ".", "ledOffMS", "=", "<NUM_LIT>", ";", "NotificationManager", "notificationManager", "=", "(", "NotificationManager", ")", "getSystemService", "(", "Context", ".", "NOTIFICATION_SERVICE", ")", ";", "notificationManager", ".", "notify", "(", "NEW_MESSAGE_NOTIFICATION_ID", ",", "notification", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onReceive", "(", "Context", "context", ",", "Intent", "intent", ")", "{", "if", "(", "Intent", ".", "ACTION_BOOT_COMPLETED", ".", "equals", "(", "intent", ".", "getAction", "(", ")", ")", ")", "{", "if", "(", "Email", ".", "setServicesEnabled", "(", "context", ")", ")", "{", "MailService", ".", "actionReschedule", "(", "context", ")", ";", "}", "}", "else", "if", "(", "Intent", ".", "ACTION_DEVICE_STORAGE_LOW", ".", "equals", "(", "intent", ".", "getAction", "(", ")", ")", ")", "{", "MailService", ".", "actionCancel", "(", "context", ")", ";", "}", "else", "if", "(", "Intent", ".", "ACTION_DEVICE_STORAGE_OK", ".", "equals", "(", "intent", ".", "getAction", "(", ")", ")", ")", "{", "MailService", ".", "actionReschedule", "(", "context", ")", ";", "}", "}", "</s>"]
["<s>", "public", "EmailServiceProxy", "(", "Context", "_context", ",", "Class", "<", "?", ">", "_class", ")", "{", "mContext", "=", "_context", ";", "mClass", "=", "_class", ";", "if", "(", "Debug", ".", "isDebuggerConnected", "(", ")", ")", "{", "mTimeout", "<", "<", "=", "<NUM_LIT:2>", ";", "}", "}", "</s>"]
["<s>", "public", "EmailServiceProxy", "(", "Context", "_context", ",", "Class", "<", "?", ">", "_class", ",", "IEmailServiceCallback", "_callback", ")", "{", "mContext", "=", "_context", ";", "mClass", "=", "_class", ";", "mCallback", "=", "_callback", ";", "if", "(", "Debug", ".", "isDebuggerConnected", "(", ")", ")", "{", "mTimeout", "<", "<", "=", "<NUM_LIT:2>", ";", "}", "}", "</s>"]
["<s>", "public", "void", "onServiceConnected", "(", "ComponentName", "name", ",", "IBinder", "binder", ")", "{", "mService", "=", "IEmailService", ".", "Stub", ".", "asInterface", "(", "binder", ")", ";", "if", "(", "DEBUG_PROXY", ")", "{", "Log", ".", "v", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "mClass", ".", "getSimpleName", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "runTask", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onServiceDisconnected", "(", "ComponentName", "name", ")", "{", "if", "(", "DEBUG_PROXY", ")", "{", "Log", ".", "v", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "mClass", ".", "getSimpleName", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "public", "EmailServiceProxy", "setTimeout", "(", "int", "secs", ")", "{", "mTimeout", "=", "secs", ";", "return", "this", ";", "}", "</s>"]
["<s>", "private", "void", "runTask", "(", ")", "{", "Thread", "thread", "=", "new", "Thread", "(", "mRunnable", ")", ";", "thread", ".", "start", "(", ")", ";", "try", "{", "thread", ".", "join", "(", ")", ";", "}", "catch", "(", "InterruptedException", "e", ")", "{", "}", "mContext", ".", "unbindService", "(", "mSyncManagerConnection", ")", ";", "mDead", "=", "true", ";", "synchronized", "(", "mSyncManagerConnection", ")", "{", "if", "(", "DEBUG_PROXY", ")", "{", "Log", ".", "v", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mSyncManagerConnection", ".", "notify", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "setTask", "(", "Runnable", "runnable", ")", "throws", "RemoteException", "{", "if", "(", "mDead", ")", "{", "throw", "new", "RemoteException", "(", ")", ";", "}", "mRunnable", "=", "runnable", ";", "if", "(", "DEBUG_PROXY", ")", "{", "Log", ".", "v", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "mClass", ".", "getSimpleName", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mContext", ".", "bindService", "(", "new", "Intent", "(", "mContext", ",", "mClass", ")", ",", "mSyncManagerConnection", ",", "Context", ".", "BIND_AUTO_CREATE", ")", ";", "}", "</s>"]
["<s>", "public", "void", "waitForCompletion", "(", ")", "{", "synchronized", "(", "mSyncManagerConnection", ")", "{", "long", "time", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "try", "{", "if", "(", "DEBUG_PROXY", ")", "{", "Log", ".", "v", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "mSyncManagerConnection", ".", "wait", "(", "mTimeout", "*", "<NUM_LIT>", ")", ";", "}", "catch", "(", "InterruptedException", "e", ")", "{", "}", "if", "(", "DEBUG_PROXY", ")", "{", "Log", ".", "v", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "(", "System", ".", "currentTimeMillis", "(", ")", "-", "time", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "loadAttachment", "(", "final", "long", "attachmentId", ",", "final", "String", "destinationFile", ",", "final", "String", "contentUriString", ")", "throws", "RemoteException", "{", "setTask", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "try", "{", "if", "(", "mCallback", "!", "=", "null", ")", "mService", ".", "setCallback", "(", "mCallback", ")", ";", "mService", ".", "loadAttachment", "(", "attachmentId", ",", "destinationFile", ",", "contentUriString", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "try", "{", "if", "(", "mCallback", "!", "=", "null", ")", "mService", ".", "setCallback", "(", "mCallback", ")", ";", "mService", ".", "loadAttachment", "(", "attachmentId", ",", "destinationFile", ",", "contentUriString", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "public", "void", "startSync", "(", "final", "long", "mailboxId", ")", "throws", "RemoteException", "{", "setTask", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "try", "{", "if", "(", "mCallback", "!", "=", "null", ")", "mService", ".", "setCallback", "(", "mCallback", ")", ";", "mService", ".", "startSync", "(", "mailboxId", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "try", "{", "if", "(", "mCallback", "!", "=", "null", ")", "mService", ".", "setCallback", "(", "mCallback", ")", ";", "mService", ".", "startSync", "(", "mailboxId", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "public", "void", "stopSync", "(", "final", "long", "mailboxId", ")", "throws", "RemoteException", "{", "setTask", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "try", "{", "if", "(", "mCallback", "!", "=", "null", ")", "mService", ".", "setCallback", "(", "mCallback", ")", ";", "mService", ".", "stopSync", "(", "mailboxId", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "try", "{", "if", "(", "mCallback", "!", "=", "null", ")", "mService", ".", "setCallback", "(", "mCallback", ")", ";", "mService", ".", "stopSync", "(", "mailboxId", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "public", "int", "validate", "(", "final", "String", "protocol", ",", "final", "String", "host", ",", "final", "String", "userName", ",", "final", "String", "password", ",", "final", "int", "port", ",", "final", "boolean", "ssl", ",", "final", "boolean", "trustCertificates", ")", "throws", "RemoteException", "{", "setTask", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "try", "{", "if", "(", "mCallback", "!", "=", "null", ")", "mService", ".", "setCallback", "(", "mCallback", ")", ";", "mReturn", "=", "mService", ".", "validate", "(", "protocol", ",", "host", ",", "userName", ",", "password", ",", "port", ",", "ssl", ",", "trustCertificates", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "}", ")", ";", "waitForCompletion", "(", ")", ";", "if", "(", "mReturn", "=", "=", "null", ")", "{", "return", "MessagingException", ".", "UNSPECIFIED_EXCEPTION", ";", "}", "else", "{", "Log", ".", "v", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "mReturn", ")", ";", "return", "(", "Integer", ")", "mReturn", ";", "}", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "try", "{", "if", "(", "mCallback", "!", "=", "null", ")", "mService", ".", "setCallback", "(", "mCallback", ")", ";", "mReturn", "=", "mService", ".", "validate", "(", "protocol", ",", "host", ",", "userName", ",", "password", ",", "port", ",", "ssl", ",", "trustCertificates", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "public", "void", "updateFolderList", "(", "final", "long", "accountId", ")", "throws", "RemoteException", "{", "setTask", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "try", "{", "if", "(", "mCallback", "!", "=", "null", ")", "mService", ".", "setCallback", "(", "mCallback", ")", ";", "mService", ".", "updateFolderList", "(", "accountId", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "try", "{", "if", "(", "mCallback", "!", "=", "null", ")", "mService", ".", "setCallback", "(", "mCallback", ")", ";", "mService", ".", "updateFolderList", "(", "accountId", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "public", "void", "setLogging", "(", "final", "int", "on", ")", "throws", "RemoteException", "{", "setTask", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "try", "{", "if", "(", "mCallback", "!", "=", "null", ")", "mService", ".", "setCallback", "(", "mCallback", ")", ";", "mService", ".", "setLogging", "(", "on", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "try", "{", "if", "(", "mCallback", "!", "=", "null", ")", "mService", ".", "setCallback", "(", "mCallback", ")", ";", "mService", ".", "setLogging", "(", "on", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "public", "void", "setCallback", "(", "final", "IEmailServiceCallback", "cb", ")", "throws", "RemoteException", "{", "setTask", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "try", "{", "mService", ".", "setCallback", "(", "cb", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "try", "{", "mService", ".", "setCallback", "(", "cb", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "public", "void", "hostChanged", "(", "final", "long", "accountId", ")", "throws", "RemoteException", "{", "setTask", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "try", "{", "mService", ".", "hostChanged", "(", "accountId", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "try", "{", "mService", ".", "hostChanged", "(", "accountId", ")", ";", "}", "catch", "(", "RemoteException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "public", "void", "loadMore", "(", "long", "messageId", ")", "throws", "RemoteException", "{", "}", "</s>"]
["<s>", "public", "boolean", "createFolder", "(", "long", "accountId", ",", "String", "name", ")", "throws", "RemoteException", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "deleteFolder", "(", "long", "accountId", ",", "String", "name", ")", "throws", "RemoteException", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "renameFolder", "(", "long", "accountId", ",", "String", "oldName", ",", "String", "newName", ")", "throws", "RemoteException", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "IBinder", "asBinder", "(", ")", "{", "return", "null", ";", "}", "</s>"]
