["<s>", "public", "void", "testParseDateTimeToMillis", "(", "String", "date", ")", "{", "String", "dateString", "=", "\"", "<STR_LIT>", "\"", ";", "long", "dateTime", "=", "CalendarUtilities", ".", "parseDateTimeToMillis", "(", "dateString", ")", ";", "GregorianCalendar", "cal", "=", "new", "GregorianCalendar", "(", ")", ";", "cal", ".", "setTimeInMillis", "(", "dateTime", ")", ";", "cal", ".", "setTimeZone", "(", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT:GMT>", "\"", ")", ")", ";", "assertEquals", "(", "cal", ".", "get", "(", "Calendar", ".", "YEAR", ")", ",", "<NUM_LIT>", ")", ";", "assertEquals", "(", "cal", ".", "get", "(", "Calendar", ".", "MONTH", ")", ",", "1", ")", ";", "assertEquals", "(", "cal", ".", "get", "(", "Calendar", ".", "DAY_OF_MONTH", ")", ",", "<NUM_LIT>", ")", ";", "assertEquals", "(", "cal", ".", "get", "(", "Calendar", ".", "HOUR_OF_DAY", ")", ",", "<NUM_LIT:16>", ")", ";", "assertEquals", "(", "cal", ".", "get", "(", "Calendar", ".", "MINUTE", ")", ",", "<NUM_LIT:16>", ")", ";", "assertEquals", "(", "cal", ".", "get", "(", "Calendar", ".", "SECOND", ")", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testDisableAdmin", "(", ")", "{", "Account", "a1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT:-1>", "\"", ",", "false", ",", "mMockContext", ")", ";", "PolicySet", "p1", "=", "new", "PolicySet", "(", "<NUM_LIT:10>", ",", "PolicySet", ".", "PASSWORD_MODE_SIMPLE", ",", "0", ",", "0", ",", "false", ")", ";", "p1", ".", "writeAccount", "(", "a1", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "Account", "a2", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "mMockContext", ")", ";", "PolicySet", "p2", "=", "new", "PolicySet", "(", "<NUM_LIT:20>", ",", "PolicySet", ".", "PASSWORD_MODE_STRONG", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "false", ")", ";", "p2", ".", "writeAccount", "(", "a2", ",", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "Account", "a3", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "false", ",", "mMockContext", ")", ";", "a3", ".", "mSecurityFlags", "=", "0", ";", "a3", ".", "mSecuritySyncKey", "=", "null", ";", "a3", ".", "save", "(", "mMockContext", ")", ";", "SecurityPolicy", "sp", "=", "getSecurityPolicy", "(", ")", ";", "PolicySet", "before", "=", "sp", ".", "getAggregatePolicy", "(", ")", ";", "sp", ".", "onAdminEnabled", "(", "true", ")", ";", "PolicySet", "after1", "=", "sp", ".", "getAggregatePolicy", "(", ")", ";", "assertEquals", "(", "before", ",", "after1", ")", ";", "Account", "a1a", "=", "Account", ".", "restoreAccountWithId", "(", "mMockContext", ",", "a1", ".", "mId", ")", ";", "assertNotNull", "(", "a1a", ".", "mSecuritySyncKey", ")", ";", "Account", "a2a", "=", "Account", ".", "restoreAccountWithId", "(", "mMockContext", ",", "a2", ".", "mId", ")", ";", "assertNotNull", "(", "a2a", ".", "mSecuritySyncKey", ")", ";", "Account", "a3a", "=", "Account", ".", "restoreAccountWithId", "(", "mMockContext", ",", "a3", ".", "mId", ")", ";", "assertNull", "(", "a3a", ".", "mSecuritySyncKey", ")", ";", "sp", ".", "onAdminEnabled", "(", "false", ")", ";", "PolicySet", "after2", "=", "sp", ".", "getAggregatePolicy", "(", ")", ";", "assertEquals", "(", "SecurityPolicy", ".", "NO_POLICY_SET", ",", "after2", ")", ";", "Account", "a1b", "=", "Account", ".", "restoreAccountWithId", "(", "mMockContext", ",", "a1", ".", "mId", ")", ";", "assertNull", "(", "a1b", ".", "mSecuritySyncKey", ")", ";", "Account", "a2b", "=", "Account", ".", "restoreAccountWithId", "(", "mMockContext", ",", "a2", ".", "mId", ")", ";", "assertNull", "(", "a2b", ".", "mSecuritySyncKey", ")", ";", "Account", "a3b", "=", "Account", ".", "restoreAccountWithId", "(", "mMockContext", ",", "a3", ".", "mId", ")", ";", "assertNull", "(", "a3b", ".", "mSecuritySyncKey", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "static", "final", "SSLSocketFactory", "getSSLSocketFactory", "(", "boolean", "insecure", ")", "{", "if", "(", "insecure", ")", "{", "if", "(", "sInsecureFactory", "=", "=", "null", ")", "{", "sInsecureFactory", "=", "SSLCertificateSocketFactory", ".", "getInsecure", "(", "0", ",", "null", ")", ";", "}", "return", "sInsecureFactory", ";", "}", "else", "{", "if", "(", "sSecureFactory", "=", "=", "null", ")", "{", "sSecureFactory", "=", "SSLCertificateSocketFactory", ".", "getDefault", "(", "0", ",", "null", ")", ";", "}", "return", "sSecureFactory", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onAccept", "(", "int", "response", ")", "{", "mController", ".", "sendMeetingResponse", "(", "mMessageId", ",", "response", ",", "mControllerCallback", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onAnimationEnd", "(", "Animation", "animation", ")", "{", "updateListPosition", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "updateListPosition", "(", ")", "{", "if", "(", "mListAdapter", ".", "getSelectedSet", "(", ")", ".", "size", "(", ")", "=", "=", "1", "&", "&", "mFirstSelectedItemPosition", ">", "=", "0", "&", "&", "mFirstSelectedItemPosition", "<", "getListView", "(", ")", ".", "getCount", "(", ")", "&", "&", "getListView", "(", ")", ".", "getHeight", "(", ")", "<", "mFirstSelectedItemTop", ")", "{", "getListView", "(", ")", ".", "setSelectionFromTop", "(", "mFirstSelectedItemPosition", ",", "getListView", "(", ")", ".", "getHeight", "(", ")", "-", "mFirstSelectedItemHeight", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "long", "restoreBodySourceKey", "(", "Context", "context", ",", "long", "messageId", ")", "{", "Cursor", "c", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "Body", ".", "CONTENT_URI", ",", "Body", ".", "PROJECTION_SOURCE_KEY", ",", "Body", ".", "MESSAGE_KEY", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "messageId", ")", "}", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "return", "c", ".", "getLong", "(", "0", ")", ";", "}", "else", "{", "return", "0", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "static", "public", "long", "createCalendar", "(", "EasSyncService", "service", ",", "Account", "account", ",", "Mailbox", "mailbox", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "Calendars", ".", "DISPLAY_NAME", ",", "account", ".", "mDisplayName", ")", ";", "cv", ".", "put", "(", "Calendars", ".", "_SYNC_ACCOUNT", ",", "account", ".", "mEmailAddress", ")", ";", "cv", ".", "put", "(", "Calendars", ".", "_SYNC_ACCOUNT_TYPE", ",", "Email", ".", "EXCHANGE_ACCOUNT_MANAGER_TYPE", ")", ";", "cv", ".", "put", "(", "Calendars", ".", "SYNC_EVENTS", ",", "1", ")", ";", "cv", ".", "put", "(", "Calendars", ".", "SELECTED", ",", "1", ")", ";", "cv", ".", "put", "(", "Calendars", ".", "HIDDEN", ",", "0", ")", ";", "cv", ".", "put", "(", "Calendars", ".", "COLOR", ",", "<NUM_LIT>", "|", "Email", ".", "getAccountColor", "(", "account", ".", "mId", ")", ")", ";", "cv", ".", "put", "(", "Calendars", ".", "TIMEZONE", ",", "Time", ".", "getCurrentTimezone", "(", ")", ")", ";", "cv", ".", "put", "(", "Calendars", ".", "ACCESS_LEVEL", ",", "Calendars", ".", "OWNER_ACCESS", ")", ";", "cv", ".", "put", "(", "Calendars", ".", "OWNER_ACCOUNT", ",", "account", ".", "mEmailAddress", ")", ";", "Uri", "uri", "=", "service", ".", "mContentResolver", ".", "insert", "(", "Calendars", ".", "CONTENT_URI", ",", "cv", ")", ";", "if", "(", "uri", "!", "=", "null", ")", "{", "String", "stringId", "=", "uri", ".", "getPathSegments", "(", ")", ".", "get", "(", "1", ")", ";", "mailbox", ".", "mSyncStatus", "=", "stringId", ";", "return", "Long", ".", "parseLong", "(", "stringId", ")", ";", "}", "return", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "android", ".", "accounts", ".", "Account", "[", "]", "accountMgrList", "=", "AccountManager", ".", "get", "(", "INSTANCE", ")", ".", "getAccountsByType", "(", "Email", ".", "EXCHANGE_ACCOUNT_MANAGER_TYPE", ")", ";", "AccountList", "providerList", "=", "getAccountList", "(", ")", ";", "reconcileAccountsWithAccountManager", "(", "INSTANCE", ",", "providerList", ",", "accountMgrList", ",", "false", ",", "mResolver", ")", ";", "}", "</s>"]
["<s>", "void", "reconcileAccountsWithAccountManager", "(", "Context", "context", ",", "List", "<", "Account", ">", "cachedEasAccounts", ",", "android", ".", "accounts", ".", "Account", "[", "]", "accountManagerAccounts", ",", "boolean", "blockExternalChanges", ",", "ContentResolver", "resolver", ")", "{", "boolean", "accountsDeleted", "=", "false", ";", "for", "(", "Account", "providerAccount", ":", "cachedEasAccounts", ")", "{", "String", "providerAccountName", "=", "providerAccount", ".", "mEmailAddress", ";", "boolean", "found", "=", "false", ";", "for", "(", "android", ".", "accounts", ".", "Account", "accountManagerAccount", ":", "accountManagerAccounts", ")", "{", "if", "(", "accountManagerAccount", ".", "name", ".", "equalsIgnoreCase", "(", "providerAccountName", ")", ")", "{", "found", "=", "true", ";", "break", ";", "}", "}", "if", "(", "!", "found", ")", "{", "if", "(", "(", "providerAccount", ".", "mFlags", "&", "Account", ".", "FLAGS_INCOMPLETE", ")", "!", "=", "0", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "continue", ";", "}", "alwaysLog", "(", "\"", "<STR_LIT>", "\"", "+", "providerAccountName", ")", ";", "resolver", ".", "delete", "(", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "providerAccount", ".", "mId", ")", ",", "null", ",", "null", ")", ";", "accountsDeleted", "=", "true", ";", "}", "}", "for", "(", "android", ".", "accounts", ".", "Account", "accountManagerAccount", ":", "accountManagerAccounts", ")", "{", "String", "accountManagerAccountName", "=", "accountManagerAccount", ".", "name", ";", "boolean", "found", "=", "false", ";", "for", "(", "Account", "cachedEasAccount", ":", "cachedEasAccounts", ")", "{", "if", "(", "cachedEasAccount", ".", "mEmailAddress", ".", "equalsIgnoreCase", "(", "accountManagerAccountName", ")", ")", "{", "found", "=", "true", ";", "}", "}", "if", "(", "!", "found", ")", "{", "alwaysLog", "(", "\"", "<STR_LIT>", "\"", "+", "accountManagerAccountName", ")", ";", "AccountManagerFuture", "<", "Boolean", ">", "blockingResult", ";", "blockingResult", "=", "AccountManager", ".", "get", "(", "context", ")", ".", "removeAccount", "(", "accountManagerAccount", ",", "null", ",", "null", ")", ";", "try", "{", "blockingResult", ".", "getResult", "(", ")", ";", "}", "catch", "(", "OperationCanceledException", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "e", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "AuthenticatorException", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "e", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "e", ".", "toString", "(", ")", ")", ";", "}", "accountsDeleted", "=", "true", ";", "}", "}", "if", "(", "!", "blockExternalChanges", "&", "&", "accountsDeleted", ")", "{", "AccountBackupRestore", ".", "backupAccounts", "(", "context", ")", ";", "SecurityPolicy", ".", "getInstance", "(", "context", ")", ".", "reducePolicies", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testTestReconcileAccounts", "(", ")", "{", "Account", "firstAccount", "=", "null", ";", "final", "String", "TEST_USER_ACCOUNT", "=", "\"", "<STR_LIT>", "\"", ";", "Context", "context", "=", "getContext", "(", ")", ";", "try", "{", "createAccountManagerAccount", "(", "TEST_USER_ACCOUNT", "+", "TEST_ACCOUNT_SUFFIX", ")", ";", "firstAccount", "=", "ProviderTestUtils", ".", "setupAccount", "(", "TEST_USER_ACCOUNT", ",", "true", ",", "context", ")", ";", "testReconcileAccounts", "(", ")", ";", "}", "finally", "{", "if", "(", "firstAccount", "!", "=", "null", ")", "{", "boolean", "firstAccountFound", "=", "false", ";", "context", ".", "getContentResolver", "(", ")", ".", "delete", "(", "firstAccount", ".", "getUri", "(", ")", ",", "null", ",", "null", ")", ";", "android", ".", "accounts", ".", "Account", "[", "]", "accountManagerAccounts", "=", "AccountManager", ".", "get", "(", "context", ")", ".", "getAccountsByType", "(", "Email", ".", "EXCHANGE_ACCOUNT_MANAGER_TYPE", ")", ";", "for", "(", "android", ".", "accounts", ".", "Account", "accountManagerAccount", ":", "accountManagerAccounts", ")", "{", "if", "(", "(", "TEST_USER_ACCOUNT", "+", "TEST_ACCOUNT_SUFFIX", ")", ".", "equals", "(", "accountManagerAccount", ".", "name", ")", ")", "{", "deleteAccountManagerAccount", "(", "context", ",", "accountManagerAccount", ")", ";", "firstAccountFound", "=", "true", ";", "}", "}", "assertTrue", "(", "firstAccountFound", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "android", ".", "accounts", ".", "Account", "[", "]", "getAccountManagerAccounts", "(", "Context", "context", ",", "android", ".", "accounts", ".", "Account", "[", "]", "baseline", ")", "{", "android", ".", "accounts", ".", "Account", "[", "]", "rawList", "=", "AccountManager", ".", "get", "(", "context", ")", ".", "getAccountsByType", "(", "Email", ".", "EXCHANGE_ACCOUNT_MANAGER_TYPE", ")", ";", "if", "(", "baseline", ".", "length", "=", "=", "0", ")", "{", "return", "rawList", ";", "}", "HashSet", "<", "android", ".", "accounts", ".", "Account", ">", "set", "=", "new", "HashSet", "<", "android", ".", "accounts", ".", "Account", ">", "(", ")", ";", "for", "(", "android", ".", "accounts", ".", "Account", "addAccount", ":", "rawList", ")", "{", "set", ".", "add", "(", "addAccount", ")", ";", "}", "for", "(", "android", ".", "accounts", ".", "Account", "removeAccount", ":", "baseline", ")", "{", "set", ".", "remove", "(", "removeAccount", ")", ";", "}", "return", "set", ".", "toArray", "(", "new", "android", ".", "accounts", ".", "Account", "[", "0", "]", ")", ";", "}", "</s>"]
["<s>", "private", "void", "attendeesParser", "(", "CalendarOperations", "ops", ",", "long", "eventId", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "CALENDAR_ATTENDEES", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "CALENDAR_ATTENDEE", ":", "attendeeParser", "(", "ops", ",", "eventId", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "testEasAccountName", "(", ")", "{", "Intent", "i", "=", "getTestIntent", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "this", ".", "setActivityIntent", "(", "i", ")", ";", "getActivityAndFields", "(", ")", ";", "assertTrue", "(", "mDoneButton", ".", "isEnabled", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "Intent", "getTestIntent", "(", "String", "protocol", ",", "String", "name", ")", "{", "mAccount", "=", "new", "EmailContent", ".", "Account", "(", ")", ";", "mAccount", ".", "setSenderName", "(", "name", ")", ";", "HostAuth", "hostAuth", "=", "new", "HostAuth", "(", ")", ";", "hostAuth", ".", "mProtocol", "=", "protocol", ";", "mAccount", ".", "mHostAuthRecv", "=", "hostAuth", ";", "mAccount", ".", "save", "(", "mContext", ")", ";", "mAccountId", "=", "mAccount", ".", "mId", ";", "Intent", "i", "=", "new", "Intent", "(", "Intent", ".", "ACTION_MAIN", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT_ID", ",", "mAccountId", ")", ";", "return", "i", ";", "}", "</s>"]
["<s>", "public", "String", "get", "(", "String", "tag", ")", "{", "if", "(", "mExploded", "=", "=", "null", ")", "{", "mExploded", "=", "explode", "(", "mString", ")", ";", "}", "return", "mExploded", ".", "get", "(", "tag", ")", ";", "}", "</s>"]
["<s>", "public", "Map", "<", "String", ",", "String", ">", "unpack", "(", ")", "{", "if", "(", "mExploded", "=", "=", "null", ")", "{", "mExploded", "=", "explode", "(", "mString", ")", ";", "}", "return", "new", "HashMap", "<", "String", ",", "String", ">", "(", "mExploded", ")", ";", "}", "</s>"]
["<s>", "private", "static", "HashMap", "<", "String", ",", "String", ">", "explode", "(", "String", "packed", ")", "{", "if", "(", "packed", "=", "=", "null", "|", "|", "packed", ".", "length", "(", ")", "=", "=", "0", ")", "{", "return", "EMPTY_MAP", ";", "}", "HashMap", "<", "String", ",", "String", ">", "map", "=", "new", "HashMap", "<", "String", ",", "String", ">", "(", ")", ";", "int", "length", "=", "packed", ".", "length", "(", ")", ";", "int", "elementStartIndex", "=", "0", ";", "int", "elementEndIndex", "=", "0", ";", "int", "tagEndIndex", "=", "packed", ".", "indexOf", "(", "DELIMITER_TAG", ")", ";", "while", "(", "elementStartIndex", "<", "length", ")", "{", "elementEndIndex", "=", "packed", ".", "indexOf", "(", "DELIMITER_ELEMENT", ",", "elementStartIndex", ")", ";", "if", "(", "elementEndIndex", "=", "=", "-", "1", ")", "{", "elementEndIndex", "=", "length", ";", "}", "String", "tag", ";", "String", "value", ";", "if", "(", "tagEndIndex", "=", "=", "-", "1", "|", "|", "elementEndIndex", "<", "=", "tagEndIndex", ")", "{", "value", "=", "packed", ".", "substring", "(", "elementStartIndex", ",", "elementEndIndex", ")", ";", "tag", "=", "Integer", ".", "toString", "(", "map", ".", "size", "(", ")", ")", ";", "}", "else", "{", "value", "=", "packed", ".", "substring", "(", "elementStartIndex", ",", "tagEndIndex", ")", ";", "tag", "=", "packed", ".", "substring", "(", "tagEndIndex", "+", "1", ",", "elementEndIndex", ")", ";", "tagEndIndex", "=", "packed", ".", "indexOf", "(", "DELIMITER_TAG", ",", "elementEndIndex", "+", "1", ")", ";", "}", "map", ".", "put", "(", "tag", ",", "value", ")", ";", "elementStartIndex", "=", "elementEndIndex", "+", "1", ";", "}", "return", "map", ";", "}", "</s>"]
["<s>", "public", "void", "put", "(", "String", "tag", ",", "String", "value", ")", "{", "if", "(", "value", "=", "=", "null", ")", "{", "mMap", ".", "remove", "(", "tag", ")", ";", "}", "else", "{", "mMap", ".", "put", "(", "tag", ",", "value", ")", ";", "}", "}", "</s>"]
["<s>", "public", "String", "get", "(", "String", "tag", ")", "{", "return", "mMap", ".", "get", "(", "tag", ")", ";", "}", "</s>"]
["<s>", "public", "String", "toString", "(", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "String", ">", "entry", ":", "mMap", ".", "entrySet", "(", ")", ")", "{", "if", "(", "sb", ".", "length", "(", ")", ">", "0", ")", "{", "sb", ".", "append", "(", "DELIMITER_ELEMENT", ")", ";", "}", "sb", ".", "append", "(", "entry", ".", "getValue", "(", ")", ")", ";", "sb", ".", "append", "(", "DELIMITER_TAG", ")", ";", "sb", ".", "append", "(", "entry", ".", "getKey", "(", ")", ")", ";", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testPackedString", "(", ")", "{", "PackedString", "ps", "=", "new", "PackedString", "(", "PACKED_STRING_TAGGED", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:1>", "\"", ",", "ps", ".", "get", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:2>", "\"", ",", "ps", ".", "get", "(", "\"", "<STR_LIT:2>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:3>", "\"", ",", "ps", ".", "get", "(", "\"", "<STR_LIT:3>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:4>", "\"", ",", "ps", ".", "get", "(", "\"", "<STR_LIT:4>", "\"", ")", ")", ";", "assertNull", "(", "ps", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testPackedStringBuilderCreate", "(", ")", "{", "PackedString", ".", "Builder", "b", "=", "new", "PackedString", ".", "Builder", "(", ")", ";", "b", ".", "put", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ";", "b", ".", "put", "(", "\"", "<STR_LIT:2>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ")", ";", "b", ".", "put", "(", "\"", "<STR_LIT:3>", "\"", ",", "\"", "<STR_LIT:3>", "\"", ")", ";", "b", ".", "put", "(", "\"", "<STR_LIT:4>", "\"", ",", "\"", "<STR_LIT:4>", "\"", ")", ";", "String", "packedOut", "=", "b", ".", "toString", "(", ")", ";", "PackedString", ".", "Builder", "b2", "=", "new", "PackedString", ".", "Builder", "(", "packedOut", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:1>", "\"", ",", "b2", ".", "get", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:2>", "\"", ",", "b2", ".", "get", "(", "\"", "<STR_LIT:2>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:3>", "\"", ",", "b2", ".", "get", "(", "\"", "<STR_LIT:3>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:4>", "\"", ",", "b2", ".", "get", "(", "\"", "<STR_LIT:4>", "\"", ")", ")", ";", "assertNull", "(", "b2", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testPackedStringBuilderEdit", "(", ")", "{", "PackedString", ".", "Builder", "b", "=", "new", "PackedString", ".", "Builder", "(", "PACKED_STRING_TAGGED", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:1>", "\"", ",", "b", ".", "get", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:2>", "\"", ",", "b", ".", "get", "(", "\"", "<STR_LIT:2>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:3>", "\"", ",", "b", ".", "get", "(", "\"", "<STR_LIT:3>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:4>", "\"", ",", "b", ".", "get", "(", "\"", "<STR_LIT:4>", "\"", ")", ")", ";", "assertNull", "(", "b", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "b", ".", "put", "(", "\"", "<STR_LIT:2>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "b", ".", "put", "(", "\"", "<STR_LIT:3>", "\"", ",", "null", ")", ";", "b", ".", "put", "(", "\"", "<STR_LIT:5>", "\"", ",", "\"", "<STR_LIT:5>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:1>", "\"", ",", "b", ".", "get", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "b", ".", "get", "(", "\"", "<STR_LIT:2>", "\"", ")", ")", ";", "assertEquals", "(", "null", ",", "b", ".", "get", "(", "\"", "<STR_LIT:3>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:4>", "\"", ",", "b", ".", "get", "(", "\"", "<STR_LIT:4>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:5>", "\"", ",", "b", ".", "get", "(", "\"", "<STR_LIT:5>", "\"", ")", ")", ";", "assertNull", "(", "b", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "packedOut", "=", "b", ".", "toString", "(", ")", ";", "PackedString", ".", "Builder", "b2", "=", "new", "PackedString", ".", "Builder", "(", "packedOut", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:1>", "\"", ",", "b2", ".", "get", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "b2", ".", "get", "(", "\"", "<STR_LIT:2>", "\"", ")", ")", ";", "assertEquals", "(", "null", ",", "b2", ".", "get", "(", "\"", "<STR_LIT:3>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:4>", "\"", ",", "b2", ".", "get", "(", "\"", "<STR_LIT:4>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:5>", "\"", ",", "b2", ".", "get", "(", "\"", "<STR_LIT:5>", "\"", ")", ")", ";", "assertNull", "(", "b2", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "sendMessage", "(", "Context", "context", ",", "long", "accountId", ",", "Message", "msg", ")", "{", "Mailbox", "mailbox", "=", "Mailbox", ".", "restoreMailboxOfType", "(", "context", ",", "accountId", ",", "Mailbox", ".", "TYPE_OUTBOX", ")", ";", "if", "(", "mailbox", "!", "=", "null", ")", "{", "msg", ".", "mMailboxKey", "=", "mailbox", ".", "mId", ";", "msg", ".", "mAccountKey", "=", "accountId", ";", "msg", ".", "save", "(", "context", ")", ";", "}", "}", "</s>"]
["<s>", "static", "public", "EmailContent", ".", "Message", "createMessageForEntity", "(", "Entity", "entity", ",", "int", "messageFlag", ",", "String", "uid", ",", "Account", "account", ")", "{", "ContentValues", "entityValues", "=", "entity", ".", "getEntityValues", "(", ")", ";", "EmailContent", ".", "Message", "msg", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "msg", ".", "mFlags", "=", "messageFlag", ";", "msg", ".", "mTimeStamp", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "String", "method", ";", "if", "(", "messageFlag", "=", "=", "EmailContent", ".", "Message", ".", "FLAG_OUTGOING_MEETING_INVITE", ")", "{", "method", "=", "\"", "<STR_LIT>", "\"", ";", "}", "else", "{", "method", "=", "\"", "<STR_LIT>", "\"", ";", "}", "SimpleIcsWriter", "ics", "=", "new", "SimpleIcsWriter", "(", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "method", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2.0>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:5>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:0>", "\"", ")", ";", "if", "(", "uid", "=", "=", "null", ")", "{", "uid", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "_SYNC_LOCAL_ID", ")", ";", "}", "if", "(", "uid", "!", "=", "null", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "uid", ")", ";", "}", "if", "(", "entityValues", ".", "containsKey", "(", "Events", ".", "ALL_DAY", ")", ")", "{", "Integer", "ade", "=", "entityValues", ".", "getAsInteger", "(", "Events", ".", "ALL_DAY", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "ade", "=", "=", "0", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", ")", ";", "}", "long", "startTime", "=", "entityValues", ".", "getAsLong", "(", "Events", ".", "DTSTART", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "CalendarUtilities", ".", "millisToEasDateTime", "(", "startTime", ")", ")", ";", "if", "(", "!", "entityValues", ".", "containsKey", "(", "Events", ".", "DURATION", ")", ")", "{", "if", "(", "entityValues", ".", "containsKey", "(", "Events", ".", "DTEND", ")", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "CalendarUtilities", ".", "millisToEasDateTime", "(", "entityValues", ".", "getAsLong", "(", "Events", ".", "DTEND", ")", ")", ")", ";", "}", "}", "else", "{", "long", "durationMillis", "=", "HOURS", ";", "Duration", "duration", "=", "new", "Duration", "(", ")", ";", "try", "{", "duration", ".", "parse", "(", "entityValues", ".", "getAsString", "(", "Events", ".", "DURATION", ")", ")", ";", "}", "catch", "(", "ParseException", "e", ")", "{", "}", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "CalendarUtilities", ".", "millisToEasDateTime", "(", "startTime", "+", "durationMillis", ")", ")", ";", "}", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "CalendarUtilities", ".", "millisToEasDateTime", "(", "System", ".", "currentTimeMillis", "(", ")", ")", ")", ";", "if", "(", "entityValues", ".", "containsKey", "(", "Events", ".", "EVENT_LOCATION", ")", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "entityValues", ".", "getAsString", "(", "Events", ".", "EVENT_LOCATION", ")", ")", ";", "}", "String", "title", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "TITLE", ")", ";", "if", "(", "title", "!", "=", "null", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "title", ")", ";", "msg", ".", "mSubject", "=", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "title", ";", "}", "else", "{", "msg", ".", "mSubject", "=", "\"", "<STR_LIT>", "\"", ";", "}", "String", "desc", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "DESCRIPTION", ")", ";", "if", "(", "desc", "!", "=", "null", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "desc", ")", ";", "msg", ".", "mText", "=", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "desc", ";", "}", "else", "{", "msg", ".", "mText", "=", "\"", "<STR_LIT>", "\"", ";", "}", "String", "rrule", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "RRULE", ")", ";", "if", "(", "rrule", "!", "=", "null", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "rrule", ")", ";", "}", "ArrayList", "<", "NamedContentValues", ">", "subValues", "=", "entity", ".", "getSubValues", "(", ")", ";", "for", "(", "NamedContentValues", "ncv", ":", "subValues", ")", "{", "Uri", "ncvUri", "=", "ncv", ".", "uri", ";", "if", "(", "ncvUri", ".", "equals", "(", "Reminders", ".", "CONTENT_URI", ")", ")", "{", "}", "}", "String", "organizerName", "=", "null", ";", "String", "organizerEmail", "=", "null", ";", "ArrayList", "<", "Address", ">", "toList", "=", "new", "ArrayList", "<", "Address", ">", "(", ")", ";", "for", "(", "NamedContentValues", "ncv", ":", "subValues", ")", "{", "Uri", "ncvUri", "=", "ncv", ".", "uri", ";", "ContentValues", "ncvValues", "=", "ncv", ".", "values", ";", "if", "(", "ncvUri", ".", "equals", "(", "Attendees", ".", "CONTENT_URI", ")", ")", "{", "Integer", "relationship", "=", "ncvValues", ".", "getAsInteger", "(", "Attendees", ".", "ATTENDEE_RELATIONSHIP", ")", ";", "if", "(", "relationship", "!", "=", "null", "&", "&", "ncvValues", ".", "containsKey", "(", "Attendees", ".", "ATTENDEE_EMAIL", ")", ")", "{", "if", "(", "relationship", "=", "=", "Attendees", ".", "RELATIONSHIP_ORGANIZER", ")", "{", "organizerName", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_NAME", ")", ";", "organizerEmail", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_EMAIL", ")", ";", "continue", ";", "}", "String", "attendeeEmail", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_EMAIL", ")", ";", "String", "attendeeName", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_NAME", ")", ";", "if", "(", "attendeeEmail", "=", "=", "null", ")", "continue", ";", "if", "(", "messageFlag", "=", "=", "Message", ".", "FLAG_OUTGOING_MEETING_INVITE", ")", "{", "String", "icalTag", "=", "ICALENDAR_ATTENDEE_INVITE", ";", "if", "(", "attendeeName", "!", "=", "null", ")", "{", "icalTag", "+", "=", "\"", "<STR_LIT>", "\"", "+", "attendeeName", ";", "}", "ics", ".", "writeTag", "(", "icalTag", ",", "\"", "<STR_LIT>", "\"", "+", "attendeeEmail", ")", ";", "toList", ".", "add", "(", "attendeeName", "=", "=", "null", "?", "new", "Address", "(", "attendeeEmail", ")", ":", "new", "Address", "(", "attendeeEmail", ",", "attendeeName", ")", ")", ";", "}", "else", "if", "(", "attendeeEmail", ".", "equalsIgnoreCase", "(", "account", ".", "mEmailAddress", ")", ")", "{", "String", "icalTag", "=", "null", ";", "switch", "(", "messageFlag", ")", "{", "case", "Message", ".", "FLAG_OUTGOING_MEETING_ACCEPT", ":", "icalTag", "=", "ICALENDAR_ATTENDEE_ACCEPT", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_DECLINE", ":", "icalTag", "=", "ICALENDAR_ATTENDEE_DECLINE", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_TENTATIVE", ":", "icalTag", "=", "ICALENDAR_ATTENDEE_TENTATIVE", ";", "break", ";", "}", "if", "(", "icalTag", "!", "=", "null", ")", "{", "if", "(", "attendeeName", "!", "=", "null", ")", "{", "icalTag", "+", "=", "\"", "<STR_LIT>", "\"", "+", "attendeeName", ";", "}", "ics", ".", "writeTag", "(", "icalTag", ",", "\"", "<STR_LIT>", "\"", "+", "attendeeEmail", ")", ";", "}", "}", "}", "}", "}", "if", "(", "organizerEmail", "!", "=", "null", ")", "{", "String", "icalTag", "=", "\"", "<STR_LIT>", "\"", ";", "if", "(", "organizerName", "!", "=", "null", ")", "{", "icalTag", "+", "=", "\"", "<STR_LIT>", "\"", "+", "organizerName", ";", "}", "ics", ".", "writeTag", "(", "icalTag", ",", "\"", "<STR_LIT>", "\"", "+", "organizerEmail", ")", ";", "if", "(", "method", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "toList", ".", "add", "(", "organizerName", "=", "=", "null", "?", "new", "Address", "(", "organizerEmail", ")", ":", "new", "Address", "(", "organizerEmail", ",", "organizerName", ")", ")", ";", "}", "}", "if", "(", "toList", ".", "isEmpty", "(", ")", ")", "return", "null", ";", "Address", "[", "]", "toArray", "=", "new", "Address", "[", "toList", ".", "size", "(", ")", "]", ";", "int", "i", "=", "0", ";", "for", "(", "Address", "address", ":", "toList", ")", "{", "toArray", "[", "i", "+", "+", "]", "=", "address", ";", "}", "msg", ".", "mTo", "=", "Address", ".", "pack", "(", "toArray", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "flush", "(", ")", ";", "ics", ".", "close", "(", ")", ";", "Attachment", "att", "=", "new", "Attachment", "(", ")", ";", "att", ".", "mContent", "=", "ics", ".", "toString", "(", ")", ";", "att", ".", "mMimeType", "=", "\"", "<STR_LIT>", "\"", "+", "method", ";", "att", ".", "mFileName", "=", "\"", "<STR_LIT>", "\"", ";", "att", ".", "mSize", "=", "att", ".", "mContent", ".", "length", "(", ")", ";", "att", ".", "mFlags", "=", "Attachment", ".", "FLAG_SUPPRESS_DISPOSITION", ";", "msg", ".", "mAttachments", "=", "new", "ArrayList", "<", "Attachment", ">", "(", ")", ";", "msg", ".", "mAttachments", ".", "add", "(", "att", ")", ";", "return", "msg", ";", "}", "</s>"]
["<s>", "static", "public", "EmailContent", ".", "Message", "createMessageForEventId", "(", "ContentResolver", "cr", ",", "long", "eventId", ",", "int", "messageFlag", ",", "String", "uid", ",", "Account", "account", ")", "throws", "RemoteException", "{", "EntityIterator", "eventIterator", "=", "EventsEntity", ".", "newEntityIterator", "(", "cr", ".", "query", "(", "ContentUris", ".", "withAppendedId", "(", "Events", ".", "CONTENT_URI", ".", "buildUpon", "(", ")", ".", "appendQueryParameter", "(", "android", ".", "provider", ".", "Calendar", ".", "CALLER_IS_SYNCADAPTER", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ",", "eventId", ")", ",", "null", ",", "null", ",", "null", ",", "null", ")", ",", "cr", ")", ";", "try", "{", "while", "(", "eventIterator", ".", "hasNext", "(", ")", ")", "{", "Entity", "entity", "=", "eventIterator", ".", "next", "(", ")", ";", "return", "createMessageForEntity", "(", "entity", ",", "messageFlag", ",", "uid", ",", "account", ")", ";", "}", "}", "finally", "{", "eventIterator", ".", "close", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "private", "void", "newLine", "(", ")", "{", "write", "(", "<STR_LIT>", ")", ";", "write", "(", "<STR_LIT:\\n>", ")", ";", "mLineCount", "=", "0", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "write", "(", "String", "str", ")", "{", "int", "len", "=", "str", ".", "length", "(", ")", ";", "if", "(", "mLineCount", "+", "len", "<", "MAX_LINE_LENGTH", ")", "{", "mLineCount", "+", "=", "len", ";", "write", "(", "str", ")", ";", "return", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "len", ";", "i", "+", "+", ",", "mLineCount", "+", "+", ")", "{", "if", "(", "mLineCount", "=", "=", "MAX_LINE_LENGTH", ")", "{", "write", "(", "<STR_LIT>", ")", ";", "write", "(", "<STR_LIT:\\n>", ")", ";", "write", "(", "<STR_LIT:\\t>", ")", ";", "mLineCount", "=", "0", ";", "}", "write", "(", "str", ".", "charAt", "(", "i", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "writeTag", "(", "String", "name", ",", "String", "value", ")", "{", "write", "(", "name", ")", ";", "write", "(", "\"", "<STR_LIT::>", "\"", ")", ";", "write", "(", "value", ")", ";", "newLine", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testWriter", "(", ")", "{", "assertEquals", "(", "<NUM_LIT>", ",", "string63Chars", ".", "length", "(", ")", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "string80Chars", ".", "length", "(", ")", ")", ";", "assertEquals", "(", "SimpleIcsWriter", ".", "MAX_LINE_LENGTH", ",", "tag11Chars", ".", "length", "(", ")", "+", "1", "+", "string63Chars", ".", "length", "(", ")", ")", ";", "SimpleIcsWriter", "w", "=", "new", "SimpleIcsWriter", "(", ")", ";", "w", ".", "writeTag", "(", "tag11Chars", ",", "string63Chars", "+", "string80Chars", ")", ";", "assertEquals", "(", "0", ",", "w", ".", "mLineCount", ")", ";", "String", "str", "=", "w", ".", "toString", "(", ")", ";", "assertEquals", "(", "SimpleIcsWriter", ".", "MAX_LINE_LENGTH", "-", "1", ",", "str", ".", "indexOf", "(", "expectedFirstLineBreak", ")", ")", ";", "assertEquals", "(", "SimpleIcsWriter", ".", "MAX_LINE_LENGTH", "+", "SimpleIcsWriter", ".", "LINE_BREAK_LENGTH", "+", "(", "SimpleIcsWriter", ".", "MAX_LINE_LENGTH", "-", "1", ")", ",", "str", ".", "indexOf", "(", "expectedSecondLineBreak", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "sendMeetingResponseMail", "(", "Message", "msg", ")", "{", "PackedString", "meetingInfo", "=", "new", "PackedString", "(", "msg", ".", "mMeetingInfo", ")", ";", "if", "(", "meetingInfo", "=", "=", "null", ")", "return", ";", "Address", "[", "]", "addrs", "=", "Address", ".", "parse", "(", "meetingInfo", ".", "get", "(", "MeetingInfo", ".", "MEETING_ORGANIZER_EMAIL", ")", ")", ";", "if", "(", "addrs", ".", "length", "!", "=", "1", ")", "return", ";", "String", "organizerEmail", "=", "addrs", "[", "0", "]", ".", "getAddress", "(", ")", ";", "String", "dtStamp", "=", "meetingInfo", ".", "get", "(", "MeetingInfo", ".", "MEETING_DTSTAMP", ")", ";", "String", "dtStart", "=", "meetingInfo", ".", "get", "(", "MeetingInfo", ".", "MEETING_DTSTART", ")", ";", "String", "dtEnd", "=", "meetingInfo", ".", "get", "(", "MeetingInfo", ".", "MEETING_DTEND", ")", ";", "ContentValues", "entityValues", "=", "new", "ContentValues", "(", ")", ";", "Entity", "entity", "=", "new", "Entity", "(", "entityValues", ")", ";", "entityValues", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "CalendarUtilities", ".", "convertEmailDateTimeToCalendarDateTime", "(", "dtStamp", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "DTSTART", ",", "CalendarUtilities", ".", "parseEmailDateTimeToMillis", "(", "dtStart", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "DTEND", ",", "CalendarUtilities", ".", "parseEmailDateTimeToMillis", "(", "dtEnd", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "EVENT_LOCATION", ",", "meetingInfo", ".", "get", "(", "MeetingInfo", ".", "MEETING_LOCATION", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "TITLE", ",", "meetingInfo", ".", "get", "(", "MeetingInfo", ".", "MEETING_TITLE", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "ORGANIZER", ",", "organizerEmail", ")", ";", "ContentValues", "attendeeValues", "=", "new", "ContentValues", "(", ")", ";", "attendeeValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_RELATIONSHIP", ",", "Attendees", ".", "RELATIONSHIP_ATTENDEE", ")", ";", "attendeeValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_EMAIL", ",", "mAccount", ".", "mEmailAddress", ")", ";", "entity", ".", "addSubValue", "(", "Attendees", ".", "CONTENT_URI", ",", "attendeeValues", ")", ";", "ContentValues", "organizerValues", "=", "new", "ContentValues", "(", ")", ";", "organizerValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_RELATIONSHIP", ",", "Attendees", ".", "RELATIONSHIP_ORGANIZER", ")", ";", "organizerValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_EMAIL", ",", "organizerEmail", ")", ";", "entity", ".", "addSubValue", "(", "Attendees", ".", "CONTENT_URI", ",", "organizerValues", ")", ";", "Message", "outgoingMsg", "=", "CalendarUtilities", ".", "createMessageForEntity", "(", "mContext", ",", "entity", ",", "Message", ".", "FLAG_OUTGOING_MEETING_ACCEPT", ",", "meetingInfo", ".", "get", "(", "MeetingInfo", ".", "MEETING_UID", ")", ",", "mAccount", ")", ";", "if", "(", "outgoingMsg", "!", "=", "null", ")", "{", "EasOutboxService", ".", "sendMessage", "(", "mContext", ",", "mAccount", ".", "mId", ",", "outgoingMsg", ")", ";", "}", "}", "</s>"]
["<s>", "static", "public", "String", "convertEmailDateTimeToCalendarDateTime", "(", "String", "date", ")", "{", "return", "date", ".", "substring", "(", "0", ",", "<NUM_LIT:4>", ")", "+", "date", ".", "substring", "(", "<NUM_LIT:5>", ",", "<NUM_LIT:7>", ")", "+", "date", ".", "substring", "(", "<NUM_LIT:8>", ",", "<NUM_LIT>", ")", "+", "date", ".", "substring", "(", "<NUM_LIT>", ",", "<NUM_LIT:16>", ")", "+", "date", ".", "substring", "(", "<NUM_LIT>", ",", "<NUM_LIT>", ")", "+", "<CHAR_LIT:Z>", ";", "}", "</s>"]
["<s>", "static", "public", "EmailContent", ".", "Message", "createMessageForEntity", "(", "Context", "context", ",", "Entity", "entity", ",", "int", "messageFlag", ",", "String", "uid", ",", "Account", "account", ")", "{", "ContentValues", "entityValues", "=", "entity", ".", "getEntityValues", "(", ")", ";", "ArrayList", "<", "NamedContentValues", ">", "subValues", "=", "entity", ".", "getSubValues", "(", ")", ";", "EmailContent", ".", "Message", "msg", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "msg", ".", "mFlags", "=", "messageFlag", ";", "msg", ".", "mTimeStamp", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "String", "method", ";", "if", "(", "messageFlag", "=", "=", "EmailContent", ".", "Message", ".", "FLAG_OUTGOING_MEETING_INVITE", ")", "{", "method", "=", "\"", "<STR_LIT>", "\"", ";", "}", "else", "{", "method", "=", "\"", "<STR_LIT>", "\"", ";", "}", "try", "{", "SimpleIcsWriter", "ics", "=", "new", "SimpleIcsWriter", "(", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "method", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2.0>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:5>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:0>", "\"", ")", ";", "if", "(", "uid", "=", "=", "null", ")", "{", "uid", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "_SYNC_LOCAL_ID", ")", ";", "}", "if", "(", "uid", "!", "=", "null", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "uid", ")", ";", "}", "if", "(", "entityValues", ".", "containsKey", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "entityValues", ".", "getAsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "else", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "CalendarUtilities", ".", "millisToEasDateTime", "(", "System", ".", "currentTimeMillis", "(", ")", ")", ")", ";", "}", "long", "startTime", "=", "entityValues", ".", "getAsLong", "(", "Events", ".", "DTSTART", ")", ";", "if", "(", "startTime", "!", "=", "0", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "CalendarUtilities", ".", "millisToEasDateTime", "(", "startTime", ")", ")", ";", "}", "if", "(", "!", "entityValues", ".", "containsKey", "(", "Events", ".", "DURATION", ")", ")", "{", "if", "(", "entityValues", ".", "containsKey", "(", "Events", ".", "DTEND", ")", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "CalendarUtilities", ".", "millisToEasDateTime", "(", "entityValues", ".", "getAsLong", "(", "Events", ".", "DTEND", ")", ")", ")", ";", "}", "}", "else", "{", "long", "durationMillis", "=", "HOURS", ";", "Duration", "duration", "=", "new", "Duration", "(", ")", ";", "try", "{", "duration", ".", "parse", "(", "entityValues", ".", "getAsString", "(", "Events", ".", "DURATION", ")", ")", ";", "}", "catch", "(", "ParseException", "e", ")", "{", "}", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "CalendarUtilities", ".", "millisToEasDateTime", "(", "startTime", "+", "durationMillis", ")", ")", ";", "}", "if", "(", "entityValues", ".", "containsKey", "(", "Events", ".", "EVENT_LOCATION", ")", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "entityValues", ".", "getAsString", "(", "Events", ".", "EVENT_LOCATION", ")", ")", ";", "}", "int", "titleId", "=", "0", ";", "switch", "(", "messageFlag", ")", "{", "case", "Message", ".", "FLAG_OUTGOING_MEETING_INVITE", ":", "titleId", "=", "R", ".", "string", ".", "meeting_invitation", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_ACCEPT", ":", "titleId", "=", "R", ".", "string", ".", "meeting_accepted", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_DECLINE", ":", "titleId", "=", "R", ".", "string", ".", "meeting_declined", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_TENTATIVE", ":", "titleId", "=", "R", ".", "string", ".", "meeting_tentative", ";", "break", ";", "}", "String", "title", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "TITLE", ")", ";", "if", "(", "title", "=", "=", "null", ")", "{", "title", "=", "\"", "\"", ";", "}", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "title", ")", ";", "msg", ".", "mSubject", "=", "context", ".", "getResources", "(", ")", ".", "getString", "(", "titleId", ",", "title", ")", ";", "if", "(", "method", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "if", "(", "entityValues", ".", "containsKey", "(", "Events", ".", "ALL_DAY", ")", ")", "{", "Integer", "ade", "=", "entityValues", ".", "getAsInteger", "(", "Events", ".", "ALL_DAY", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "ade", "=", "=", "0", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", ")", ";", "}", "String", "desc", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "DESCRIPTION", ")", ";", "if", "(", "desc", "!", "=", "null", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "desc", ")", ";", "msg", ".", "mText", "=", "desc", ";", "}", "else", "{", "msg", ".", "mText", "=", "\"", "\"", ";", "}", "String", "rrule", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "RRULE", ")", ";", "if", "(", "rrule", "!", "=", "null", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "rrule", ")", ";", "}", "for", "(", "NamedContentValues", "ncv", ":", "subValues", ")", "{", "Uri", "ncvUri", "=", "ncv", ".", "uri", ";", "if", "(", "ncvUri", ".", "equals", "(", "Reminders", ".", "CONTENT_URI", ")", ")", "{", "}", "}", "}", "String", "organizerName", "=", "null", ";", "String", "organizerEmail", "=", "null", ";", "ArrayList", "<", "Address", ">", "toList", "=", "new", "ArrayList", "<", "Address", ">", "(", ")", ";", "for", "(", "NamedContentValues", "ncv", ":", "subValues", ")", "{", "Uri", "ncvUri", "=", "ncv", ".", "uri", ";", "ContentValues", "ncvValues", "=", "ncv", ".", "values", ";", "if", "(", "ncvUri", ".", "equals", "(", "Attendees", ".", "CONTENT_URI", ")", ")", "{", "Integer", "relationship", "=", "ncvValues", ".", "getAsInteger", "(", "Attendees", ".", "ATTENDEE_RELATIONSHIP", ")", ";", "if", "(", "relationship", "!", "=", "null", "&", "&", "ncvValues", ".", "containsKey", "(", "Attendees", ".", "ATTENDEE_EMAIL", ")", ")", "{", "if", "(", "relationship", "=", "=", "Attendees", ".", "RELATIONSHIP_ORGANIZER", ")", "{", "organizerName", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_NAME", ")", ";", "organizerEmail", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_EMAIL", ")", ";", "continue", ";", "}", "String", "attendeeEmail", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_EMAIL", ")", ";", "String", "attendeeName", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_NAME", ")", ";", "if", "(", "attendeeEmail", "=", "=", "null", ")", "continue", ";", "if", "(", "messageFlag", "=", "=", "Message", ".", "FLAG_OUTGOING_MEETING_INVITE", ")", "{", "String", "icalTag", "=", "ICALENDAR_ATTENDEE_INVITE", ";", "if", "(", "attendeeName", "!", "=", "null", ")", "{", "icalTag", "+", "=", "\"", "<STR_LIT>", "\"", "+", "attendeeName", ";", "}", "ics", ".", "writeTag", "(", "icalTag", ",", "\"", "<STR_LIT>", "\"", "+", "attendeeEmail", ")", ";", "toList", ".", "add", "(", "attendeeName", "=", "=", "null", "?", "new", "Address", "(", "attendeeEmail", ")", ":", "new", "Address", "(", "attendeeEmail", ",", "attendeeName", ")", ")", ";", "}", "else", "if", "(", "attendeeEmail", ".", "equalsIgnoreCase", "(", "account", ".", "mEmailAddress", ")", ")", "{", "String", "icalTag", "=", "null", ";", "switch", "(", "messageFlag", ")", "{", "case", "Message", ".", "FLAG_OUTGOING_MEETING_ACCEPT", ":", "icalTag", "=", "ICALENDAR_ATTENDEE_ACCEPT", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_DECLINE", ":", "icalTag", "=", "ICALENDAR_ATTENDEE_DECLINE", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_TENTATIVE", ":", "icalTag", "=", "ICALENDAR_ATTENDEE_TENTATIVE", ";", "break", ";", "}", "if", "(", "icalTag", "!", "=", "null", ")", "{", "if", "(", "attendeeName", "!", "=", "null", ")", "{", "icalTag", "+", "=", "\"", "<STR_LIT>", "\"", "+", "attendeeName", ";", "}", "ics", ".", "writeTag", "(", "icalTag", ",", "\"", "<STR_LIT>", "\"", "+", "attendeeEmail", ")", ";", "}", "}", "}", "}", "}", "if", "(", "organizerEmail", "!", "=", "null", ")", "{", "String", "icalTag", "=", "\"", "<STR_LIT>", "\"", ";", "if", "(", "organizerName", "!", "=", "null", ")", "{", "icalTag", "+", "=", "\"", "<STR_LIT>", "\"", "+", "organizerName", ";", "}", "ics", ".", "writeTag", "(", "icalTag", ",", "\"", "<STR_LIT>", "\"", "+", "organizerEmail", ")", ";", "if", "(", "method", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "toList", ".", "add", "(", "organizerName", "=", "=", "null", "?", "new", "Address", "(", "organizerEmail", ")", ":", "new", "Address", "(", "organizerEmail", ",", "organizerName", ")", ")", ";", "}", "}", "if", "(", "toList", ".", "isEmpty", "(", ")", ")", "return", "null", ";", "Address", "[", "]", "toArray", "=", "new", "Address", "[", "toList", ".", "size", "(", ")", "]", ";", "int", "i", "=", "0", ";", "for", "(", "Address", "address", ":", "toList", ")", "{", "toArray", "[", "i", "+", "+", "]", "=", "address", ";", "}", "msg", ".", "mTo", "=", "Address", ".", "pack", "(", "toArray", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "flush", "(", ")", ";", "ics", ".", "close", "(", ")", ";", "Attachment", "att", "=", "new", "Attachment", "(", ")", ";", "att", ".", "mContent", "=", "ics", ".", "toString", "(", ")", ";", "att", ".", "mMimeType", "=", "\"", "<STR_LIT>", "\"", "+", "method", ";", "att", ".", "mFileName", "=", "\"", "<STR_LIT>", "\"", ";", "att", ".", "mSize", "=", "att", ".", "mContent", ".", "length", "(", ")", ";", "att", ".", "mFlags", "=", "Attachment", ".", "FLAG_SUPPRESS_DISPOSITION", ";", "msg", ".", "mAttachments", "=", "new", "ArrayList", "<", "Attachment", ">", "(", ")", ";", "msg", ".", "mAttachments", ".", "add", "(", "att", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "Log", ".", "w", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "null", ";", "}", "return", "msg", ";", "}", "</s>"]
["<s>", "static", "public", "EmailContent", ".", "Message", "createMessageForEventId", "(", "Context", "context", ",", "long", "eventId", ",", "int", "messageFlag", ",", "String", "uid", ",", "Account", "account", ")", "throws", "RemoteException", "{", "ContentResolver", "cr", "=", "context", ".", "getContentResolver", "(", ")", ";", "EntityIterator", "eventIterator", "=", "EventsEntity", ".", "newEntityIterator", "(", "cr", ".", "query", "(", "ContentUris", ".", "withAppendedId", "(", "Events", ".", "CONTENT_URI", ".", "buildUpon", "(", ")", ".", "appendQueryParameter", "(", "android", ".", "provider", ".", "Calendar", ".", "CALLER_IS_SYNCADAPTER", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ",", "eventId", ")", ",", "null", ",", "null", ",", "null", ",", "null", ")", ",", "cr", ")", ";", "try", "{", "while", "(", "eventIterator", ".", "hasNext", "(", ")", ")", "{", "Entity", "entity", "=", "eventIterator", ".", "next", "(", ")", ";", "return", "createMessageForEntity", "(", "context", ",", "entity", ",", "messageFlag", ",", "uid", ",", "account", ")", ";", "}", "}", "finally", "{", "eventIterator", ".", "close", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "void", "testCreateMessageForEntity_Reply", "(", ")", "{", "ContentValues", "entityValues", "=", "new", "ContentValues", "(", ")", ";", "Entity", "entity", "=", "new", "Entity", "(", "entityValues", ")", ";", "String", "attendee", "=", "\"", "<STR_LIT>", "\"", ";", "String", "organizer", "=", "\"", "<STR_LIT>", "\"", ";", "String", "location", "=", "\"", "<STR_LIT>", "\"", ";", "String", "title", "=", "\"", "<STR_LIT>", "\"", ";", "entityValues", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "CalendarUtilities", ".", "convertEmailDateTimeToCalendarDateTime", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "DTSTART", ",", "CalendarUtilities", ".", "parseEmailDateTimeToMillis", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "DTEND", ",", "CalendarUtilities", ".", "parseEmailDateTimeToMillis", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "EVENT_LOCATION", ",", "location", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "TITLE", ",", "title", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "ORGANIZER", ",", "organizer", ")", ";", "ContentValues", "attendeeValues", "=", "new", "ContentValues", "(", ")", ";", "attendeeValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_RELATIONSHIP", ",", "Attendees", ".", "RELATIONSHIP_ATTENDEE", ")", ";", "attendeeValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_EMAIL", ",", "attendee", ")", ";", "entity", ".", "addSubValue", "(", "Attendees", ".", "CONTENT_URI", ",", "attendeeValues", ")", ";", "ContentValues", "organizerValues", "=", "new", "ContentValues", "(", ")", ";", "organizerValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_RELATIONSHIP", ",", "Attendees", ".", "RELATIONSHIP_ORGANIZER", ")", ";", "organizerValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_EMAIL", ",", "organizer", ")", ";", "entity", ".", "addSubValue", "(", "Attendees", ".", "CONTENT_URI", ",", "organizerValues", ")", ";", "String", "uid", "=", "\"", "<STR_LIT>", "\"", ";", "Account", "account", "=", "new", "Account", "(", ")", ";", "account", ".", "mEmailAddress", "=", "attendee", ";", "Message", "msg", "=", "CalendarUtilities", ".", "createMessageForEntity", "(", "mContext", ",", "entity", ",", "Message", ".", "FLAG_OUTGOING_MEETING_ACCEPT", ",", "uid", ",", "account", ")", ";", "assertNotNull", "(", "msg", ")", ";", "assertEquals", "(", "Address", ".", "pack", "(", "new", "Address", "[", "]", "{", "new", "Address", "(", "organizer", ")", "}", ")", ",", "msg", ".", "mTo", ")", ";", "String", "accept", "=", "getContext", "(", ")", ".", "getResources", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "meeting_accepted", ")", ";", "assertEquals", "(", "accept", "+", "\"", "<STR_LIT>", "\"", "+", "title", ",", "msg", ".", "mSubject", ")", ";", "assertNotNull", "(", "msg", ".", "mAttachments", ")", ";", "assertEquals", "(", "1", ",", "msg", ".", "mAttachments", ".", "size", "(", ")", ")", ";", "Attachment", "att", "=", "msg", ".", "mAttachments", ".", "get", "(", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "att", ".", "mFileName", ")", ";", "assertEquals", "(", "Attachment", ".", "FLAG_SUPPRESS_DISPOSITION", ",", "att", ".", "mFlags", "&", "Attachment", ".", "FLAG_SUPPRESS_DISPOSITION", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "att", ".", "mMimeType", ")", ";", "assertNotNull", "(", "att", ".", "mContent", ")", ";", "}", "</s>"]
["<s>", "protected", "android", ".", "accounts", ".", "Account", "makeAccountManagerAccount", "(", "String", "username", ")", "{", "return", "new", "android", ".", "accounts", ".", "Account", "(", "username", ",", "Email", ".", "EXCHANGE_ACCOUNT_MANAGER_TYPE", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "createAccountManagerAccount", "(", "String", "username", ")", "{", "final", "android", ".", "accounts", ".", "Account", "account", "=", "makeAccountManagerAccount", "(", "username", ")", ";", "AccountManager", ".", "get", "(", "getContext", "(", ")", ")", ".", "addAccountExplicitly", "(", "account", ",", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "}", "</s>"]
["<s>", "protected", "Account", "setupProviderAndAccountManagerAccount", "(", "String", "username", ")", "{", "createAccountManagerAccount", "(", "username", "+", "TEST_ACCOUNT_SUFFIX", ")", ";", "return", "ProviderTestUtils", ".", "setupAccount", "(", "username", ",", "true", ",", "getMockContext", "(", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "ArrayList", "<", "Account", ">", "makeSyncManagerAccountList", "(", ")", "{", "ArrayList", "<", "Account", ">", "accountList", "=", "new", "ArrayList", "<", "Account", ">", "(", ")", ";", "Cursor", "c", "=", "getMockContext", "(", ")", ".", "getContentResolver", "(", ")", ".", "query", "(", "Account", ".", "CONTENT_URI", ",", "Account", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "accountList", ".", "add", "(", "new", "Account", "(", ")", ".", "restore", "(", "c", ")", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "return", "accountList", ";", "}", "</s>"]
["<s>", "protected", "void", "deleteAccountManagerAccount", "(", "Context", "context", ",", "android", ".", "accounts", ".", "Account", "account", ")", "{", "AccountManagerFuture", "<", "Boolean", ">", "future", "=", "AccountManager", ".", "get", "(", "context", ")", ".", "removeAccount", "(", "account", ",", "null", ",", "null", ")", ";", "try", "{", "future", ".", "getResult", "(", ")", ";", "}", "catch", "(", "OperationCanceledException", "e", ")", "{", "}", "catch", "(", "AuthenticatorException", "e", ")", "{", "}", "catch", "(", "IOException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "protected", "void", "deleteTemporaryAccountManagerAccounts", "(", "Context", "context", ")", "{", "android", ".", "accounts", ".", "Account", "[", "]", "accountManagerAccounts", "=", "AccountManager", ".", "get", "(", "context", ")", ".", "getAccountsByType", "(", "Email", ".", "EXCHANGE_ACCOUNT_MANAGER_TYPE", ")", ";", "for", "(", "android", ".", "accounts", ".", "Account", "accountManagerAccount", ":", "accountManagerAccounts", ")", "{", "if", "(", "accountManagerAccount", ".", "name", ".", "startsWith", "(", "TEST_ACCOUNT_PREFIX", ")", "&", "&", "accountManagerAccount", ".", "name", ".", "endsWith", "(", "TEST_ACCOUNT_SUFFIX", ")", ")", "{", "deleteAccountManagerAccount", "(", "context", ",", "accountManagerAccount", ")", ";", "}", "}", "}", "</s>"]
["<s>", "protected", "String", "getTestAccountName", "(", "String", "name", ")", "{", "return", "TEST_ACCOUNT_PREFIX", "+", "name", ";", "}", "</s>"]
["<s>", "protected", "String", "getTestAccountEmailAddress", "(", "String", "name", ")", "{", "return", "TEST_ACCOUNT_PREFIX", "+", "name", "+", "TEST_ACCOUNT_SUFFIX", ";", "}", "</s>"]
["<s>", "protected", "android", ".", "accounts", ".", "Account", "[", "]", "getAccountManagerAccounts", "(", "Context", "context", ",", "android", ".", "accounts", ".", "Account", "[", "]", "baseline", ")", "{", "android", ".", "accounts", ".", "Account", "[", "]", "rawList", "=", "AccountManager", ".", "get", "(", "context", ")", ".", "getAccountsByType", "(", "Email", ".", "EXCHANGE_ACCOUNT_MANAGER_TYPE", ")", ";", "if", "(", "baseline", ".", "length", "=", "=", "0", ")", "{", "return", "rawList", ";", "}", "HashSet", "<", "android", ".", "accounts", ".", "Account", ">", "set", "=", "new", "HashSet", "<", "android", ".", "accounts", ".", "Account", ">", "(", ")", ";", "for", "(", "android", ".", "accounts", ".", "Account", "addAccount", ":", "rawList", ")", "{", "set", ".", "add", "(", "addAccount", ")", ";", "}", "for", "(", "android", ".", "accounts", ".", "Account", "removeAccount", ":", "baseline", ")", "{", "set", ".", "remove", "(", "removeAccount", ")", ";", "}", "return", "set", ".", "toArray", "(", "new", "android", ".", "accounts", ".", "Account", "[", "0", "]", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getImapId", "(", "Context", "context", ",", "String", "userName", ",", "String", "host", ",", "String", "capability", ")", "{", "synchronized", "(", "ImapStore", ".", "class", ")", "{", "if", "(", "sImapId", "=", "=", "null", ")", "{", "TelephonyManager", "tm", "=", "(", "TelephonyManager", ")", "context", ".", "getSystemService", "(", "Context", ".", "TELEPHONY_SERVICE", ")", ";", "String", "networkOperator", "=", "tm", ".", "getNetworkOperatorName", "(", ")", ";", "if", "(", "networkOperator", "=", "=", "null", ")", "networkOperator", "=", "\"", "\"", ";", "sImapId", "=", "makeCommonImapId", "(", "context", ".", "getPackageName", "(", ")", ",", "Build", ".", "VERSION", ".", "RELEASE", ",", "Build", ".", "VERSION", ".", "CODENAME", ",", "Build", ".", "MODEL", ",", "Build", ".", "ID", ",", "Build", ".", "MANUFACTURER", ",", "networkOperator", ")", ";", "}", "}", "StringBuilder", "id", "=", "new", "StringBuilder", "(", "sImapId", ")", ";", "String", "vendorId", "=", "VendorPolicyLoader", ".", "getInstance", "(", "context", ")", ".", "getImapIdValues", "(", "userName", ",", "host", ",", "capability", ")", ";", "if", "(", "vendorId", "!", "=", "null", ")", "{", "id", ".", "append", "(", "<CHAR_LIT>", ")", ";", "id", ".", "append", "(", "vendorId", ")", ";", "}", "try", "{", "String", "devUID", "=", "Preferences", ".", "getPreferences", "(", "context", ")", ".", "getDeviceUID", "(", ")", ";", "MessageDigest", "messageDigest", ";", "messageDigest", "=", "MessageDigest", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ";", "messageDigest", ".", "update", "(", "userName", ".", "getBytes", "(", ")", ")", ";", "messageDigest", ".", "update", "(", "devUID", ".", "getBytes", "(", ")", ")", ";", "byte", "[", "]", "uid", "=", "messageDigest", ".", "digest", "(", ")", ";", "String", "hexUid", "=", "Base64", ".", "encodeToString", "(", "uid", ",", "Base64", ".", "NO_WRAP", ")", ";", "id", ".", "append", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "\"", ")", ";", "id", ".", "append", "(", "hexUid", ")", ";", "id", ".", "append", "(", "<STR_LIT:\\\">", ")", ";", "}", "catch", "(", "NoSuchAlgorithmException", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "id", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getNextTag", "(", "boolean", "advance", ")", "{", "if", "(", "advance", ")", "+", "+", "mNextTag", ";", "return", "Integer", ".", "toString", "(", "mNextTag", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setMockHost", "(", "String", "host", ")", "{", "mHost", "=", "host", ";", "}", "</s>"]
["<s>", "private", "void", "onAccept", "(", "int", "response", ",", "int", "toastResId", ")", "{", "if", "(", "mPreviousMeetingResponse", "!", "=", "response", ")", "{", "mController", ".", "sendMeetingResponse", "(", "mMessageId", ",", "response", ",", "mControllerCallback", ")", ";", "mPreviousMeetingResponse", "=", "response", ";", "}", "Toast", ".", "makeText", "(", "this", ",", "toastResId", ",", "Toast", ".", "LENGTH_SHORT", ")", ".", "show", "(", ")", ";", "if", "(", "!", "moveToOlder", "(", ")", "&", "&", "!", "moveToNewer", "(", ")", ")", "{", "finish", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "enableEasCalendarSync", "(", "Context", "context", ")", "{", "new", "CalendarSyncEnabler", "(", "context", ")", ".", "enableEasCalendarSync", "(", ")", ";", "}", "</s>"]
["<s>", "public", "final", "void", "enableEasCalendarSync", "(", ")", "{", "String", "emailAddresses", "=", "enableEasCalendarSyncInternal", "(", ")", ";", "if", "(", "emailAddresses", ".", "length", "(", ")", ">", "0", ")", "{", "showNotification", "(", "emailAddresses", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "final", "String", "enableEasCalendarSyncInternal", "(", ")", "{", "StringBuilder", "emailAddresses", "=", "new", "StringBuilder", "(", ")", ";", "Account", "[", "]", "exchangeAccounts", "=", "AccountManager", ".", "get", "(", "mContext", ")", ".", "getAccountsByType", "(", "Email", ".", "EXCHANGE_ACCOUNT_MANAGER_TYPE", ")", ";", "for", "(", "Account", "account", ":", "exchangeAccounts", ")", "{", "final", "String", "emailAddress", "=", "account", ".", "name", ";", "Log", ".", "i", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "emailAddress", ")", ";", "ContentResolver", ".", "setIsSyncable", "(", "account", ",", "Calendar", ".", "AUTHORITY", ",", "1", ")", ";", "ContentResolver", ".", "setSyncAutomatically", "(", "account", ",", "Calendar", ".", "AUTHORITY", ",", "true", ")", ";", "if", "(", "emailAddresses", ".", "length", "(", ")", ">", "0", ")", "{", "emailAddresses", ".", "append", "(", "<CHAR_LIT>", ")", ";", "}", "emailAddresses", ".", "append", "(", "emailAddress", ")", ";", "}", "return", "emailAddresses", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "void", "showNotification", "(", "String", "emailAddresses", ")", "{", "Intent", "calendarIntent", "=", "new", "Intent", "(", ")", ".", "setAction", "(", "\"", "<STR_LIT>", "\"", ")", ";", "PendingIntent", "launchCalendarPendingIntent", "=", "PendingIntent", ".", "getActivity", "(", "mContext", ",", "0", ",", "calendarIntent", ",", "0", ")", ";", "String", "tickerText", "=", "mContext", ".", "getString", "(", "R", ".", "string", ".", "notification_exchange_calendar_added", ")", ";", "Notification", "n", "=", "new", "Notification", "(", "R", ".", "drawable", ".", "stat_notify_calendar", ",", "tickerText", ",", "System", ".", "currentTimeMillis", "(", ")", ")", ";", "n", ".", "setLatestEventInfo", "(", "mContext", ",", "tickerText", ",", "emailAddresses", ",", "launchCalendarPendingIntent", ")", ";", "n", ".", "flags", "=", "Notification", ".", "FLAG_AUTO_CANCEL", ";", "NotificationManager", "nm", "=", "(", "NotificationManager", ")", "mContext", ".", "getSystemService", "(", "Context", ".", "NOTIFICATION_SERVICE", ")", ";", "nm", ".", "notify", "(", "MailService", ".", "NOTIFICATION_ID_EXCHANGE_CALENDAR_ADDED", ",", "n", ")", ";", "}", "</s>"]
["<s>", "protected", "android", ".", "accounts", ".", "Account", "[", "]", "getExchangeAccounts", "(", ")", "{", "return", "AccountManager", ".", "get", "(", "getContext", "(", ")", ")", ".", "getAccountsByType", "(", "Email", ".", "EXCHANGE_ACCOUNT_MANAGER_TYPE", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setUp", "(", ")", "throws", "Exception", "{", "super", ".", "setUp", "(", ")", ";", "deleteTemporaryAccountManagerAccounts", "(", ")", ";", "for", "(", "Account", "account", ":", "AccountManager", ".", "get", "(", "getContext", "(", ")", ")", ".", "getAccounts", "(", ")", ")", "{", "origCalendarSyncStates", ".", "put", "(", "account", ",", "ContentResolver", ".", "getSyncAutomatically", "(", "account", ",", "Calendar", ".", "AUTHORITY", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "tearDown", "(", ")", "throws", "Exception", "{", "super", ".", "tearDown", "(", ")", ";", "deleteTemporaryAccountManagerAccounts", "(", ")", ";", "for", "(", "Account", "account", ":", "getExchangeAccounts", "(", ")", ")", "{", "Boolean", "state", "=", "origCalendarSyncStates", ".", "get", "(", "account", ")", ";", "if", "(", "state", "=", "=", "null", ")", "continue", ";", "ContentResolver", ".", "setSyncAutomatically", "(", "account", ",", "Calendar", ".", "AUTHORITY", ",", "state", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testEnableEasCalendarSync", "(", ")", "{", "final", "Account", "[", "]", "baseAccounts", "=", "getExchangeAccounts", "(", ")", ";", "String", "a1", "=", "getTestAccountEmailAddress", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "String", "a2", "=", "getTestAccountEmailAddress", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "CalendarSyncEnabler", "enabler", "=", "new", "CalendarSyncEnabler", "(", "getContext", "(", ")", ")", ";", "createAccountManagerAccount", "(", "a1", ")", ";", "String", "emailAddresses", "=", "enabler", ".", "enableEasCalendarSyncInternal", "(", ")", ";", "verifyCalendarSyncState", "(", ")", ";", "checkNotificationEmailAddresses", "(", "emailAddresses", ",", "baseAccounts", ",", "a1", ")", ";", "deleteTemporaryAccountManagerAccounts", "(", ")", ";", "enabler", "=", "new", "CalendarSyncEnabler", "(", "getContext", "(", ")", ")", ";", "createAccountManagerAccount", "(", "a1", ")", ";", "createAccountManagerAccount", "(", "a2", ")", ";", "emailAddresses", "=", "enabler", ".", "enableEasCalendarSyncInternal", "(", ")", ";", "verifyCalendarSyncState", "(", ")", ";", "checkNotificationEmailAddresses", "(", "emailAddresses", ",", "baseAccounts", ",", "a1", ",", "a2", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "checkNotificationEmailAddresses", "(", "String", "actual", ",", "Account", "[", "]", "baseAccounts", ",", "String", ".", ".", ".", "addedAddresses", ")", "{", "final", "String", "[", "]", "actualArray", "=", "TextUtils", ".", "split", "(", "actual", ",", "\"", "\"", ")", ";", "Arrays", ".", "sort", "(", "actualArray", ")", ";", "ArrayList", "<", "String", ">", "expected", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "for", "(", "Account", "account", ":", "baseAccounts", ")", "{", "expected", ".", "add", "(", "account", ".", "name", ")", ";", "}", "for", "(", "String", "address", ":", "addedAddresses", ")", "{", "expected", ".", "add", "(", "address", ")", ";", "}", "final", "String", "[", "]", "expectedArray", "=", "new", "String", "[", "expected", ".", "size", "(", ")", "]", ";", "expected", ".", "toArray", "(", "expectedArray", ")", ";", "Arrays", ".", "sort", "(", "expectedArray", ")", ";", "MoreAsserts", ".", "assertEquals", "(", "expectedArray", ",", "actualArray", ")", ";", "}", "</s>"]
["<s>", "private", "void", "verifyCalendarSyncState", "(", ")", "{", "for", "(", "Account", "account", ":", "AccountManager", ".", "get", "(", "getContext", "(", ")", ")", ".", "getAccounts", "(", ")", ")", "{", "String", "message", "=", "\"", "<STR_LIT:=>", "\"", "+", "account", ".", "name", "+", "\"", "<STR_LIT:(>", "\"", "+", "account", ".", "type", "+", "\"", "<STR_LIT:)>", "\"", ";", "boolean", "enabled", "=", "ContentResolver", ".", "getSyncAutomatically", "(", "account", ",", "Calendar", ".", "AUTHORITY", ")", ";", "int", "syncable", "=", "ContentResolver", ".", "getIsSyncable", "(", "account", ",", "Calendar", ".", "AUTHORITY", ")", ";", "if", "(", "EAT", ".", "equals", "(", "account", ".", "type", ")", ")", "{", "}", "else", "{", "assertEquals", "(", "message", ",", "origCalendarSyncStates", ".", "get", "(", "account", ")", ",", "(", "Boolean", ")", "enabled", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "testEnableEasCalendarSyncWithNoExchangeAccounts", "(", ")", "{", "if", "(", "AccountManager", ".", "get", "(", "getContext", "(", ")", ")", ".", "getAccountsByType", "(", "EAT", ")", ".", "length", ">", "0", ")", "{", "Log", ".", "w", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "CalendarSyncEnabler", "enabler", "=", "new", "CalendarSyncEnabler", "(", "getContext", "(", ")", ")", ";", "String", "emailAddresses", "=", "enabler", ".", "enableEasCalendarSyncInternal", "(", ")", ";", "verifyCalendarSyncState", "(", ")", ";", "assertEquals", "(", "0", ",", "emailAddresses", ".", "length", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testShowNotification", "(", ")", "{", "CalendarSyncEnabler", "enabler", "=", "new", "CalendarSyncEnabler", "(", "getContext", "(", ")", ")", ";", "enabler", ".", "showNotification", "(", "\"", "<STR_LIT>", "\"", ")", ";", "(", "(", "NotificationManager", ")", "getContext", "(", ")", ".", "getSystemService", "(", "Context", ".", "NOTIFICATION_SERVICE", ")", ")", ".", "cancel", "(", "MailService", ".", "NOTIFICATION_ID_EXCHANGE_CALENDAR_ADDED", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isSyncable", "(", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isSyncable", "(", ")", "{", "return", "ContentResolver", ".", "getSyncAutomatically", "(", "mAccountManagerAccount", ",", "Calendar", ".", "AUTHORITY", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isSyncable", "(", ")", "{", "return", "ContentResolver", ".", "getSyncAutomatically", "(", "mAccountManagerAccount", ",", "ContactsContract", ".", "AUTHORITY", ")", ";", "}", "</s>"]
["<s>", "private", "Intent", "createLaunchCalendarIntent", "(", ")", "{", "return", "new", "Intent", "(", "Intent", ".", "ACTION_VIEW", ",", "Uri", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testExcessFetchResult", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mock", "=", "openAndInjectMockTransport", "(", ")", ";", "setupOpenFolder", "(", "mock", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "Message", "message1", "=", "mFolder", ".", "createMessage", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "assertFalse", "(", "message1", ".", "isSet", "(", "Flag", ".", "SEEN", ")", ")", ";", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "clear", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "FLAGS", ")", ";", "mock", ".", "expect", "(", "getNextTag", "(", "false", ")", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "getNextTag", "(", "true", ")", "+", "\"", "<STR_LIT>", "\"", "}", ")", ";", "mFolder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "message1", "}", ",", "fp", ",", "null", ")", ";", "assertTrue", "(", "message1", ".", "isSet", "(", "Flag", ".", "SEEN", ")", ")", ";", "}", "</s>"]
["<s>", "static", "void", "putRuleIntoTimeZoneInformation", "(", "byte", "[", "]", "bytes", ",", "int", "offset", ",", "RRule", "rrule", ",", "int", "hour", ",", "int", "minute", ")", "{", "setWord", "(", "bytes", ",", "offset", "+", "MSFT_SYSTEMTIME_MONTH", ",", "rrule", ".", "month", ")", ";", "setWord", "(", "bytes", ",", "offset", "+", "MSFT_SYSTEMTIME_DAY_OF_WEEK", ",", "rrule", ".", "dayOfWeek", "-", "1", ")", ";", "setWord", "(", "bytes", ",", "offset", "+", "MSFT_SYSTEMTIME_DAY", ",", "rrule", ".", "week", "<", "0", "?", "<NUM_LIT:5>", ":", "rrule", ".", "week", ")", ";", "setWord", "(", "bytes", ",", "offset", "+", "MSFT_SYSTEMTIME_HOUR", ",", "hour", ")", ";", "setWord", "(", "bytes", ",", "offset", "+", "MSFT_SYSTEMTIME_MINUTE", ",", "minute", ")", ";", "}", "</s>"]
["<s>", "static", "GregorianCalendar", "findTransitionDate", "(", "TimeZone", "tz", ",", "long", "startTime", ",", "long", "endTime", ",", "boolean", "startInDaylightTime", ")", "{", "long", "startingEndTime", "=", "endTime", ";", "Date", "date", "=", "null", ";", "while", "(", "(", "endTime", "-", "startTime", ")", ">", "MINUTES", ")", "{", "long", "checkTime", "=", "(", "(", "startTime", "+", "endTime", ")", "/", "<NUM_LIT:2>", ")", "+", "1", ";", "date", "=", "new", "Date", "(", "checkTime", ")", ";", "if", "(", "tz", ".", "inDaylightTime", "(", "date", ")", "!", "=", "startInDaylightTime", ")", "{", "endTime", "=", "checkTime", ";", "}", "else", "{", "startTime", "=", "checkTime", ";", "}", "}", "if", "(", "endTime", "=", "=", "startingEndTime", ")", "{", "return", "null", ";", "}", "GregorianCalendar", "calendar", "=", "new", "GregorianCalendar", "(", "tz", ")", ";", "calendar", ".", "setTimeInMillis", "(", "startInDaylightTime", "?", "startTime", ":", "endTime", ")", ";", "int", "min", "=", "calendar", ".", "get", "(", "Calendar", ".", "MINUTE", ")", ";", "if", "(", "min", "=", "=", "<NUM_LIT>", ")", "{", "calendar", ".", "add", "(", "Calendar", ".", "SECOND", ",", "<NUM_LIT>", "-", "calendar", ".", "get", "(", "Calendar", ".", "SECOND", ")", ")", ";", "}", "else", "if", "(", "min", "=", "=", "0", ")", "{", "calendar", ".", "add", "(", "Calendar", ".", "SECOND", ",", "-", "calendar", ".", "get", "(", "Calendar", ".", "SECOND", ")", ")", ";", "}", "return", "calendar", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "if", "(", "type", "=", "=", "RRULE_DAY_WEEK", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "month", "+", "\"", "<STR_LIT>", "\"", "+", "week", "+", "sDayTokens", "[", "dayOfWeek", "-", "1", "]", ";", "}", "else", "{", "return", "\"", "<STR_LIT>", "\"", "+", "month", "+", "\"", "<STR_LIT>", "\"", "+", "date", ";", "}", "}", "</s>"]
["<s>", "static", "private", "RRule", "inferRRuleFromCalendars", "(", "GregorianCalendar", "[", "]", "calendars", ")", "{", "GregorianCalendar", "calendar", "=", "calendars", "[", "0", "]", ";", "if", "(", "calendar", "=", "=", "null", ")", "return", "null", ";", "int", "month", "=", "calendar", ".", "get", "(", "Calendar", ".", "MONTH", ")", ";", "int", "date", "=", "calendar", ".", "get", "(", "Calendar", ".", "DAY_OF_MONTH", ")", ";", "int", "dayOfWeek", "=", "calendar", ".", "get", "(", "Calendar", ".", "DAY_OF_WEEK", ")", ";", "int", "week", "=", "calendar", ".", "get", "(", "Calendar", ".", "DAY_OF_WEEK_IN_MONTH", ")", ";", "int", "maxWeek", "=", "calendar", ".", "getActualMaximum", "(", "Calendar", ".", "DAY_OF_WEEK_IN_MONTH", ")", ";", "boolean", "dateRule", "=", "false", ";", "boolean", "dayOfWeekRule", "=", "false", ";", "for", "(", "int", "i", "=", "1", ";", "i", "<", "calendars", ".", "length", ";", "i", "+", "+", ")", "{", "GregorianCalendar", "cal", "=", "calendars", "[", "i", "]", ";", "if", "(", "cal", "=", "=", "null", ")", "return", "null", ";", "if", "(", "cal", ".", "get", "(", "Calendar", ".", "MONTH", ")", "!", "=", "month", ")", "{", "return", "null", ";", "}", "else", "if", "(", "dayOfWeek", "=", "=", "cal", ".", "get", "(", "Calendar", ".", "DAY_OF_WEEK", ")", ")", "{", "if", "(", "dateRule", ")", "{", "return", "null", ";", "}", "dayOfWeekRule", "=", "true", ";", "int", "thisWeek", "=", "cal", ".", "get", "(", "Calendar", ".", "DAY_OF_WEEK_IN_MONTH", ")", ";", "if", "(", "week", "!", "=", "thisWeek", ")", "{", "if", "(", "week", "<", "0", "|", "|", "week", "=", "=", "maxWeek", ")", "{", "int", "thisMaxWeek", "=", "cal", ".", "getActualMaximum", "(", "Calendar", ".", "DAY_OF_WEEK_IN_MONTH", ")", ";", "if", "(", "thisWeek", "=", "=", "thisMaxWeek", ")", "{", "week", "=", "-", "1", ";", "continue", ";", "}", "}", "return", "null", ";", "}", "}", "else", "if", "(", "date", "=", "=", "cal", ".", "get", "(", "Calendar", ".", "DAY_OF_MONTH", ")", ")", "{", "if", "(", "dayOfWeekRule", ")", "{", "return", "null", ";", "}", "dateRule", "=", "true", ";", "}", "else", "{", "return", "null", ";", "}", "}", "if", "(", "dateRule", ")", "{", "return", "new", "RRule", "(", "month", "+", "1", ",", "date", ")", ";", "}", "return", "new", "RRule", "(", "month", "+", "1", ",", "dayOfWeek", ",", "week", ")", ";", "}", "</s>"]
["<s>", "static", "String", "utcOffsetString", "(", "int", "offsetMinutes", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "int", "hours", "=", "offsetMinutes", "/", "<NUM_LIT>", ";", "if", "(", "hours", "<", "0", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:->", ")", ";", "hours", "=", "0", "-", "hours", ";", "}", "else", "{", "sb", ".", "append", "(", "<CHAR_LIT>", ")", ";", "}", "int", "minutes", "=", "offsetMinutes", "%", "<NUM_LIT>", ";", "if", "(", "hours", "<", "<NUM_LIT:10>", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:0>", ")", ";", "}", "sb", ".", "append", "(", "hours", ")", ";", "if", "(", "minutes", "<", "<NUM_LIT:10>", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:0>", ")", ";", "}", "sb", ".", "append", "(", "minutes", ")", ";", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "static", "boolean", "getDSTCalendars", "(", "TimeZone", "tz", ",", "GregorianCalendar", "[", "]", "toDaylightCalendars", ",", "GregorianCalendar", "[", "]", "toStandardCalendars", ")", "{", "int", "maxYears", "=", "toDaylightCalendars", ".", "length", ";", "if", "(", "toStandardCalendars", ".", "length", "!", "=", "maxYears", ")", "{", "return", "false", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "maxYears", ";", "i", "+", "+", ")", "{", "GregorianCalendar", "cal", "=", "new", "GregorianCalendar", "(", "tz", ")", ";", "cal", ".", "set", "(", "sCurrentYear", "+", "i", ",", "Calendar", ".", "JANUARY", ",", "1", ",", "0", ",", "0", ",", "0", ")", ";", "long", "startTime", "=", "cal", ".", "getTimeInMillis", "(", ")", ";", "long", "endOfYearTime", "=", "startTime", "+", "(", "<NUM_LIT>", "*", "DAYS", ")", "+", "(", "DAYS", ">", ">", "<NUM_LIT:2>", ")", ";", "Date", "date", "=", "new", "Date", "(", "startTime", ")", ";", "boolean", "startInDaylightTime", "=", "tz", ".", "inDaylightTime", "(", "date", ")", ";", "cal", "=", "findTransitionDate", "(", "tz", ",", "startTime", ",", "endOfYearTime", ",", "startInDaylightTime", ")", ";", "if", "(", "cal", "=", "=", "null", ")", "{", "return", "false", ";", "}", "else", "if", "(", "startInDaylightTime", ")", "{", "toStandardCalendars", "[", "i", "]", "=", "cal", ";", "}", "else", "{", "toDaylightCalendars", "[", "i", "]", "=", "cal", ";", "}", "cal", "=", "findTransitionDate", "(", "tz", ",", "startTime", ",", "endOfYearTime", ",", "!", "startInDaylightTime", ")", ";", "if", "(", "cal", "=", "=", "null", ")", "{", "return", "false", ";", "}", "else", "if", "(", "startInDaylightTime", ")", "{", "toDaylightCalendars", "[", "i", "]", "=", "cal", ";", "}", "else", "{", "toStandardCalendars", "[", "i", "]", "=", "cal", ";", "}", "}", "return", "true", ";", "}", "</s>"]
["<s>", "static", "private", "void", "writeNoDST", "(", "SimpleIcsWriter", "writer", ",", "TimeZone", "tz", ",", "String", "offsetString", ")", "throws", "IOException", "{", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "offsetString", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "offsetString", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "millisToEasDateTime", "(", "0", "L", ")", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "static", "public", "void", "timeZoneToVTimezone", "(", "TimeZone", "tz", ",", "SimpleIcsWriter", "writer", ")", "throws", "IOException", "{", "int", "rawOffsetMinutes", "=", "tz", ".", "getRawOffset", "(", ")", "/", "MINUTES", ";", "String", "standardOffsetString", "=", "utcOffsetString", "(", "rawOffsetMinutes", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "tz", ".", "getID", "(", ")", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "tz", ".", "getDisplayName", "(", ")", ")", ";", "if", "(", "!", "tz", ".", "useDaylightTime", "(", ")", ")", "{", "writeNoDST", "(", "writer", ",", "tz", ",", "standardOffsetString", ")", ";", "return", ";", "}", "int", "maxYears", "=", "<NUM_LIT:3>", ";", "GregorianCalendar", "[", "]", "toDaylightCalendars", "=", "new", "GregorianCalendar", "[", "maxYears", "]", ";", "GregorianCalendar", "[", "]", "toStandardCalendars", "=", "new", "GregorianCalendar", "[", "maxYears", "]", ";", "if", "(", "!", "getDSTCalendars", "(", "tz", ",", "toDaylightCalendars", ",", "toStandardCalendars", ")", ")", "{", "writeNoDST", "(", "writer", ",", "tz", ",", "standardOffsetString", ")", ";", "return", ";", "}", "RRule", "daylightRule", "=", "inferRRuleFromCalendars", "(", "toDaylightCalendars", ")", ";", "RRule", "standardRule", "=", "inferRRuleFromCalendars", "(", "toStandardCalendars", ")", ";", "String", "daylightOffsetString", "=", "utcOffsetString", "(", "rawOffsetMinutes", "+", "(", "tz", ".", "getDSTSavings", "(", ")", "/", "MINUTES", ")", ")", ";", "boolean", "hasRule", "=", "daylightRule", "!", "=", "null", "&", "&", "standardRule", "!", "=", "null", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "standardOffsetString", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "daylightOffsetString", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "millisToVCalendarTime", "(", "toDaylightCalendars", "[", "0", "]", ".", "getTimeInMillis", "(", ")", ",", "tz", ",", "true", ")", ")", ";", "if", "(", "hasRule", ")", "{", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "daylightRule", ".", "toString", "(", ")", ")", ";", "}", "else", "{", "for", "(", "int", "i", "=", "1", ";", "i", "<", "maxYears", ";", "i", "+", "+", ")", "{", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "millisToVCalendarTime", "(", "toDaylightCalendars", "[", "i", "]", ".", "getTimeInMillis", "(", ")", ",", "tz", ",", "true", ")", ")", ";", "}", "}", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "daylightOffsetString", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "standardOffsetString", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "millisToVCalendarTime", "(", "toStandardCalendars", "[", "0", "]", ".", "getTimeInMillis", "(", ")", ",", "tz", ",", "false", ")", ")", ";", "if", "(", "hasRule", ")", "{", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "standardRule", ".", "toString", "(", ")", ")", ";", "}", "else", "{", "for", "(", "int", "i", "=", "1", ";", "i", "<", "maxYears", ";", "i", "+", "+", ")", "{", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "millisToVCalendarTime", "(", "toStandardCalendars", "[", "i", "]", ".", "getTimeInMillis", "(", ")", ",", "tz", ",", "true", ")", ")", ";", "}", "}", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "writer", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "static", "private", "long", "findNextTransition", "(", "long", "startingMillis", ",", "GregorianCalendar", "[", "]", "transitions", ")", "{", "for", "(", "GregorianCalendar", "transition", ":", "transitions", ")", "{", "long", "transitionMillis", "=", "transition", ".", "getTimeInMillis", "(", ")", ";", "if", "(", "transitionMillis", ">", "startingMillis", ")", "{", "return", "transitionMillis", ";", "}", "}", "return", "0", ";", "}", "</s>"]
["<s>", "static", "public", "String", "millisToVCalendarTime", "(", "long", "millis", ",", "TimeZone", "tz", ",", "boolean", "dst", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "GregorianCalendar", "cal", "=", "new", "GregorianCalendar", "(", "tz", ")", ";", "cal", ".", "setTimeInMillis", "(", "millis", ")", ";", "sb", ".", "append", "(", "cal", ".", "get", "(", "Calendar", ".", "YEAR", ")", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "cal", ".", "get", "(", "Calendar", ".", "MONTH", ")", "+", "1", ")", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "cal", ".", "get", "(", "Calendar", ".", "DAY_OF_MONTH", ")", ")", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT>", ")", ";", "if", "(", "dst", "&", "&", "(", "tz", ".", "getDSTSavings", "(", ")", "=", "=", "HOURS", ")", ")", "{", "int", "hour", "=", "cal", ".", "get", "(", "Calendar", ".", "HOUR_OF_DAY", ")", ";", "if", "(", "hour", ">", "0", ")", "{", "hour", "-", "-", ";", "}", "sb", ".", "append", "(", "formatTwo", "(", "hour", ")", ")", ";", "}", "else", "{", "sb", ".", "append", "(", "formatTwo", "(", "cal", ".", "get", "(", "Calendar", ".", "HOUR_OF_DAY", ")", ")", ")", ";", "}", "sb", ".", "append", "(", "formatTwo", "(", "cal", ".", "get", "(", "Calendar", ".", "MINUTE", ")", ")", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "cal", ".", "get", "(", "Calendar", ".", "SECOND", ")", ")", ")", ";", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testUtcOffsetString", "(", ")", "{", "assertEquals", "(", "CalendarUtilities", ".", "utcOffsetString", "(", "<NUM_LIT>", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "CalendarUtilities", ".", "utcOffsetString", "(", "-", "<NUM_LIT>", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "CalendarUtilities", ".", "utcOffsetString", "(", "0", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testFindTransitionDate", "(", ")", "{", "TimeZone", "tz", "=", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ";", "GregorianCalendar", "calendar", "=", "new", "GregorianCalendar", "(", "tz", ")", ";", "calendar", ".", "set", "(", "CalendarUtilities", ".", "sCurrentYear", ",", "Calendar", ".", "JANUARY", ",", "1", ")", ";", "long", "startTime", "=", "calendar", ".", "getTimeInMillis", "(", ")", ";", "long", "endTime", "=", "startTime", "+", "(", "<NUM_LIT>", "*", "CalendarUtilities", ".", "DAYS", ")", ";", "GregorianCalendar", "transitionCalendar", "=", "CalendarUtilities", ".", "findTransitionDate", "(", "tz", ",", "startTime", ",", "endTime", ",", "false", ")", ";", "long", "transitionTime", "=", "transitionCalendar", ".", "getTimeInMillis", "(", ")", ";", "Date", "beforeDate", "=", "new", "Date", "(", "transitionTime", "-", "CalendarUtilities", ".", "HOURS", ")", ";", "Date", "afterDate", "=", "new", "Date", "(", "transitionTime", "+", "CalendarUtilities", ".", "HOURS", ")", ";", "assertFalse", "(", "tz", ".", "inDaylightTime", "(", "beforeDate", ")", ")", ";", "assertTrue", "(", "tz", ".", "inDaylightTime", "(", "afterDate", ")", ")", ";", "transitionCalendar", "=", "CalendarUtilities", ".", "findTransitionDate", "(", "tz", ",", "transitionTime", "+", "CalendarUtilities", ".", "DAYS", ",", "endTime", ",", "true", ")", ";", "transitionTime", "=", "transitionCalendar", ".", "getTimeInMillis", "(", ")", ";", "beforeDate", "=", "new", "Date", "(", "transitionTime", "-", "CalendarUtilities", ".", "HOURS", ")", ";", "afterDate", "=", "new", "Date", "(", "transitionTime", "+", "CalendarUtilities", ".", "HOURS", ")", ";", "assertTrue", "(", "tz", ".", "inDaylightTime", "(", "beforeDate", ")", ")", ";", "assertFalse", "(", "tz", ".", "inDaylightTime", "(", "afterDate", ")", ")", ";", "tz", "=", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ";", "calendar", "=", "new", "GregorianCalendar", "(", "tz", ")", ";", "calendar", ".", "set", "(", "CalendarUtilities", ".", "sCurrentYear", ",", "Calendar", ".", "JANUARY", ",", "1", ")", ";", "startTime", "=", "calendar", ".", "getTimeInMillis", "(", ")", ";", "endTime", "=", "startTime", "+", "(", "<NUM_LIT>", "*", "CalendarUtilities", ".", "DAYS", ")", ";", "transitionCalendar", "=", "CalendarUtilities", ".", "findTransitionDate", "(", "tz", ",", "startTime", ",", "endTime", ",", "false", ")", ";", "assertNull", "(", "transitionCalendar", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testRruleFromRecurrence", "(", ")", "{", "String", "rrule", "=", "CalendarUtilities", ".", "rruleFromRecurrence", "(", "1", ",", "<NUM_LIT:2>", ",", "1", ",", "<NUM_LIT:2>", ",", "0", ",", "0", ",", "0", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "rrule", ")", ";", "rrule", "=", "CalendarUtilities", ".", "rruleFromRecurrence", "(", "1", ",", "0", ",", "0", ",", "<NUM_LIT>", ",", "0", ",", "0", ",", "0", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "rrule", ")", ";", "rrule", "=", "CalendarUtilities", ".", "rruleFromRecurrence", "(", "<NUM_LIT:3>", ",", "0", ",", "0", ",", "<NUM_LIT>", ",", "0", ",", "<NUM_LIT:5>", ",", "0", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "rrule", ")", ";", "rrule", "=", "CalendarUtilities", ".", "rruleFromRecurrence", "(", "<NUM_LIT:3>", ",", "0", ",", "0", ",", "<NUM_LIT:24>", ",", "0", ",", "<NUM_LIT:3>", ",", "0", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "rrule", ")", ";", "rrule", "=", "CalendarUtilities", ".", "rruleFromRecurrence", "(", "<NUM_LIT:2>", ",", "0", ",", "0", ",", "0", ",", "<NUM_LIT>", ",", "0", ",", "0", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "rrule", ")", ";", "rrule", "=", "CalendarUtilities", ".", "rruleFromRecurrence", "(", "<NUM_LIT:5>", ",", "0", ",", "0", ",", "0", ",", "<NUM_LIT:31>", ",", "0", ",", "<NUM_LIT:10>", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "rrule", ")", ";", "rrule", "=", "CalendarUtilities", ".", "rruleFromRecurrence", "(", "<NUM_LIT:6>", ",", "0", ",", "0", ",", "<NUM_LIT:4>", ",", "0", ",", "1", ",", "<NUM_LIT:6>", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "rrule", ")", ";", "}", "</s>"]
["<s>", "private", "Entity", "setupTestEventEntity", "(", "String", "organizer", ",", "String", "attendee", ",", "String", "title", ")", "{", "ContentValues", "entityValues", "=", "new", "ContentValues", "(", ")", ";", "Entity", "entity", "=", "new", "Entity", "(", "entityValues", ")", ";", "String", "location", "=", "\"", "<STR_LIT>", "\"", ";", "entityValues", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "CalendarUtilities", ".", "convertEmailDateTimeToCalendarDateTime", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "DTSTART", ",", "CalendarUtilities", ".", "parseEmailDateTimeToMillis", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "DTEND", ",", "CalendarUtilities", ".", "parseEmailDateTimeToMillis", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "EVENT_LOCATION", ",", "location", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "TITLE", ",", "title", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "ORGANIZER", ",", "organizer", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "_SYNC_DATA", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ContentValues", "attendeeValues", "=", "new", "ContentValues", "(", ")", ";", "attendeeValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_RELATIONSHIP", ",", "Attendees", ".", "RELATIONSHIP_ATTENDEE", ")", ";", "attendeeValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_EMAIL", ",", "attendee", ")", ";", "entity", ".", "addSubValue", "(", "Attendees", ".", "CONTENT_URI", ",", "attendeeValues", ")", ";", "ContentValues", "organizerValues", "=", "new", "ContentValues", "(", ")", ";", "organizerValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_RELATIONSHIP", ",", "Attendees", ".", "RELATIONSHIP_ORGANIZER", ")", ";", "organizerValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_EMAIL", ",", "organizer", ")", ";", "entity", ".", "addSubValue", "(", "Attendees", ".", "CONTENT_URI", ",", "organizerValues", ")", ";", "return", "entity", ";", "}", "</s>"]
["<s>", "public", "void", "testCreateMessageForEntity_Invite", "(", ")", "throws", "IOException", "{", "String", "attendee", "=", "\"", "<STR_LIT>", "\"", ";", "String", "organizer", "=", "\"", "<STR_LIT>", "\"", ";", "String", "title", "=", "\"", "<STR_LIT>", "\"", ";", "Entity", "entity", "=", "setupTestEventEntity", "(", "organizer", ",", "attendee", ",", "title", ")", ";", "Account", "account", "=", "new", "Account", "(", ")", ";", "account", ".", "mEmailAddress", "=", "organizer", ";", "String", "uid", "=", "\"", "<STR_LIT>", "\"", ";", "Message", "msg", "=", "CalendarUtilities", ".", "createMessageForEntity", "(", "mContext", ",", "entity", ",", "Message", ".", "FLAG_OUTGOING_MEETING_INVITE", ",", "uid", ",", "account", ")", ";", "assertNotNull", "(", "msg", ")", ";", "assertEquals", "(", "Address", ".", "pack", "(", "new", "Address", "[", "]", "{", "new", "Address", "(", "attendee", ")", "}", ")", ",", "msg", ".", "mTo", ")", ";", "String", "accept", "=", "getContext", "(", ")", ".", "getResources", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "meeting_invitation", ",", "title", ")", ";", "assertEquals", "(", "accept", ",", "msg", ".", "mSubject", ")", ";", "assertNotNull", "(", "msg", ".", "mAttachments", ")", ";", "assertEquals", "(", "1", ",", "msg", ".", "mAttachments", ".", "size", "(", ")", ")", ";", "Attachment", "att", "=", "msg", ".", "mAttachments", ".", "get", "(", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "att", ".", "mFileName", ")", ";", "assertEquals", "(", "Attachment", ".", "FLAG_SUPPRESS_DISPOSITION", ",", "att", ".", "mFlags", "&", "Attachment", ".", "FLAG_SUPPRESS_DISPOSITION", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "att", ".", "mMimeType", ")", ";", "assertNotNull", "(", "att", ".", "mContent", ")", ";", "BlockHash", "vcalendar", "=", "parseIcsContent", "(", "att", ".", "mContent", ")", ";", "assertNotNull", "(", "vcalendar", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vcalendar", ".", "name", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vcalendar", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "1", ",", "vcalendar", ".", "blocks", ".", "size", "(", ")", ")", ";", "BlockHash", "vevent", "=", "vcalendar", ".", "blocks", ".", "get", "(", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "name", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", "+", "organizer", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:0>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "uid", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", "+", "attendee", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "String", "get", "(", "String", "field", ")", "{", "return", "hash", ".", "get", "(", "field", ")", ";", "}", "</s>"]
["<s>", "private", "BlockHash", "parseIcsContent", "(", "String", "s", ")", "throws", "IOException", "{", "BufferedReader", "reader", "=", "new", "BufferedReader", "(", "new", "StringReader", "(", "s", ")", ")", ";", "String", "line", "=", "reader", ".", "readLine", "(", ")", ";", "if", "(", "!", "line", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", ")", ";", "}", "return", "new", "BlockHash", "(", "\"", "<STR_LIT>", "\"", ",", "reader", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Intent", "createIntent", "(", "Context", "context", ",", "long", "accountId", ",", "long", "mailboxId", ",", "int", "mailboxType", ")", "{", "Intent", "intent", "=", "new", "Intent", "(", "context", ",", "MessageList", ".", "class", ")", ";", "intent", ".", "addFlags", "(", "Intent", ".", "FLAG_ACTIVITY_CLEAR_TOP", ")", ";", "if", "(", "accountId", "!", "=", "-", "1", ")", "intent", ".", "putExtra", "(", "EXTRA_ACCOUNT_ID", ",", "accountId", ")", ";", "if", "(", "mailboxId", "!", "=", "-", "1", ")", "intent", ".", "putExtra", "(", "EXTRA_MAILBOX_ID", ",", "mailboxId", ")", ";", "if", "(", "mailboxType", "!", "=", "-", "1", ")", "intent", ".", "putExtra", "(", "EXTRA_MAILBOX_TYPE", ",", "mailboxType", ")", ";", "return", "intent", ";", "}", "</s>"]
["<s>", "public", "static", "Intent", "createAccountIntentForShortcut", "(", "Context", "context", ",", "Account", "account", ",", "int", "mailboxType", ")", "{", "Intent", "i", "=", "createIntent", "(", "context", ",", "-", "1", ",", "-", "1", ",", "mailboxType", ")", ";", "i", ".", "setData", "(", "account", ".", "getShortcutSafeUri", "(", ")", ")", ";", "return", "i", ";", "}", "</s>"]
["<s>", "private", "void", "selectAccountAndMailbox", "(", "Intent", "intent", ")", "{", "mMailboxId", "=", "intent", ".", "getLongExtra", "(", "EXTRA_MAILBOX_ID", ",", "-", "1", ")", ";", "if", "(", "mMailboxId", "!", "=", "-", "1", ")", "{", "mSetTitleTask", "=", "new", "SetTitleTask", "(", "mMailboxId", ")", ";", "mSetTitleTask", ".", "execute", "(", ")", ";", "mLoadMessagesTask", "=", "new", "LoadMessagesTask", "(", "mMailboxId", ",", "-", "1", ")", ";", "mLoadMessagesTask", ".", "execute", "(", ")", ";", "addFooterView", "(", "mMailboxId", ",", "-", "1", ",", "-", "1", ")", ";", "}", "else", "{", "int", "mailboxType", "=", "intent", ".", "getIntExtra", "(", "EXTRA_MAILBOX_TYPE", ",", "Mailbox", ".", "TYPE_INBOX", ")", ";", "Uri", "uri", "=", "intent", ".", "getData", "(", ")", ";", "long", "accountId", "=", "(", "uri", "=", "=", "null", ")", "?", "-", "1", ":", "Account", ".", "getAccountIdFromShortcutSafeUri", "(", "this", ",", "uri", ")", ";", "if", "(", "accountId", "!", "=", "-", "1", ")", "{", "mFindMailboxTask", "=", "new", "FindMailboxTask", "(", "accountId", ",", "mailboxType", ",", "false", ")", ";", "mFindMailboxTask", ".", "execute", "(", ")", ";", "}", "else", "{", "accountId", "=", "intent", ".", "getLongExtra", "(", "EXTRA_ACCOUNT_ID", ",", "-", "1", ")", ";", "mFindMailboxTask", "=", "new", "FindMailboxTask", "(", "accountId", ",", "mailboxType", ",", "true", ")", ";", "mFindMailboxTask", ".", "execute", "(", ")", ";", "}", "addFooterView", "(", "-", "1", ",", "accountId", ",", "mailboxType", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Uri", "getShortcutSafeUri", "(", ")", "{", "return", "CONTENT_URI", ".", "buildUpon", "(", ")", ".", "appendEncodedPath", "(", "mCompatibilityUuid", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "long", "getAccountIdFromShortcutSafeUri", "(", "Context", "context", ",", "Uri", "uri", ")", "{", "if", "(", "!", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "uri", ".", "getScheme", "(", ")", ")", "|", "|", "!", "EmailContent", ".", "AUTHORITY", ".", "equals", "(", "uri", ".", "getAuthority", "(", ")", ")", ")", "{", "return", "-", "1", ";", "}", "final", "List", "<", "String", ">", "ps", "=", "uri", ".", "getPathSegments", "(", ")", ";", "if", "(", "ps", ".", "size", "(", ")", "!", "=", "<NUM_LIT:2>", "|", "|", "!", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "ps", ".", "get", "(", "0", ")", ")", ")", "{", "return", "-", "1", ";", "}", "final", "String", "id", "=", "ps", ".", "get", "(", "1", ")", ";", "try", "{", "return", "Long", ".", "parseLong", "(", "id", ")", ";", "}", "catch", "(", "NumberFormatException", "ok", ")", "{", "}", "Cursor", "cursor", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "CONTENT_URI", ",", "ID_PROJECTION", ",", "UUID_SELECTION", ",", "new", "String", "[", "]", "{", "id", "}", ",", "null", ")", ";", "try", "{", "if", "(", "cursor", ".", "moveToFirst", "(", ")", ")", "{", "return", "cursor", ".", "getLong", "(", "0", ")", ";", "}", "}", "finally", "{", "cursor", ".", "close", "(", ")", ";", "}", "return", "-", "1", ";", "}", "</s>"]
["<s>", "public", "void", "testAccountShortcutSafeUri", "(", ")", "{", "final", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT:-1>", "\"", ",", "true", ",", "mMockContext", ")", ";", "final", "Account", "account2", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "final", "long", "account1Id", "=", "account1", ".", "mId", ";", "final", "long", "account2Id", "=", "account2", ".", "mId", ";", "final", "Uri", "uri1", "=", "account1", ".", "getShortcutSafeUri", "(", ")", ";", "final", "Uri", "uri2", "=", "account2", ".", "getShortcutSafeUri", "(", ")", ";", "MoreAsserts", ".", "assertEquals", "(", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "account1", ".", "mCompatibilityUuid", "}", ",", "uri1", ".", "getPathSegments", "(", ")", ".", "toArray", "(", ")", ")", ";", "MoreAsserts", ".", "assertEquals", "(", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "account2", ".", "mCompatibilityUuid", "}", ",", "uri2", ".", "getPathSegments", "(", ")", ".", "toArray", "(", ")", ")", ";", "assertEquals", "(", "account1Id", ",", "Account", ".", "getAccountIdFromShortcutSafeUri", "(", "mMockContext", ",", "uri1", ")", ")", ";", "assertEquals", "(", "account2Id", ",", "Account", ".", "getAccountIdFromShortcutSafeUri", "(", "mMockContext", ",", "uri2", ")", ")", ";", "assertEquals", "(", "account1Id", ",", "Account", ".", "getAccountIdFromShortcutSafeUri", "(", "mMockContext", ",", "getEclairStyleShortcutUri", "(", "account1", ")", ")", ")", ";", "assertEquals", "(", "account2Id", ",", "Account", ".", "getAccountIdFromShortcutSafeUri", "(", "mMockContext", ",", "getEclairStyleShortcutUri", "(", "account2", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Uri", "getEclairStyleShortcutUri", "(", "Account", "account", ")", "{", "return", "Account", ".", "CONTENT_URI", ".", "buildUpon", "(", ")", ".", "appendEncodedPath", "(", "\"", "\"", "+", "account", ".", "mId", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isValidId", "(", "Context", "context", ",", "long", "accountId", ")", "{", "Cursor", "cursor", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "ContentUris", ".", "withAppendedId", "(", "CONTENT_URI", ",", "accountId", ")", ",", "ID_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "cursor", ".", "moveToFirst", "(", ")", ")", "{", "return", "true", ";", "}", "}", "finally", "{", "cursor", ".", "close", "(", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "void", "testAccountIsValidId", "(", ")", "{", "final", "Account", "account1", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT:-1>", "\"", ",", "true", ",", "mMockContext", ")", ";", "final", "Account", "account2", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mMockContext", ")", ";", "assertTrue", "(", "Account", ".", "isValidId", "(", "mMockContext", ",", "account1", ".", "mId", ")", ")", ";", "assertTrue", "(", "Account", ".", "isValidId", "(", "mMockContext", ",", "account2", ".", "mId", ")", ")", ";", "assertFalse", "(", "Account", ".", "isValidId", "(", "mMockContext", ",", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "incProgress", "(", "int", "accountNum", ",", "int", "incrementBy", ")", "{", "if", "(", "incrementBy", "=", "=", "0", ")", "return", ";", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", ")", ";", "msg", ".", "what", "=", "MSG_INC_PROGRESS", ";", "msg", ".", "arg1", "=", "accountNum", ";", "msg", ".", "arg2", "=", "incrementBy", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "static", "void", "scrubAccount", "(", "Context", "context", ",", "Account", "account", ",", "int", "accountNum", ",", "UIHandler", "handler", ")", "{", "String", "storeUri", "=", "account", ".", "getStoreUri", "(", ")", ";", "boolean", "isImap", "=", "storeUri", ".", "startsWith", "(", "Store", ".", "STORE_SCHEME_IMAP", ")", ";", "try", "{", "Store", "store", "=", "LocalStore", ".", "newInstance", "(", "account", ".", "getLocalStoreUri", "(", ")", ",", "context", ",", "null", ")", ";", "Folder", "[", "]", "folders", "=", "store", ".", "getPersonalNamespaces", "(", ")", ";", "for", "(", "Folder", "folder", ":", "folders", ")", "{", "folder", ".", "open", "(", "Folder", ".", "OpenMode", ".", "READ_ONLY", ",", "null", ")", ";", "String", "folderName", "=", "folder", ".", "getName", "(", ")", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "folderName", ")", ")", "{", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "folderName", ")", ")", "{", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "folderName", ")", ")", "{", "}", "else", "if", "(", "isImap", "|", "|", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "folderName", ")", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "account", ".", "getDescription", "(", ")", "+", "\"", "<STR_LIT:.>", "\"", "+", "folderName", ")", ";", "int", "messageCount", "=", "folder", ".", "getMessageCount", "(", ")", ";", "folder", ".", "delete", "(", "true", ")", ";", "if", "(", "handler", "!", "=", "null", ")", "{", "handler", ".", "incProgress", "(", "accountNum", ",", "1", "+", "messageCount", ")", ";", "}", "}", "}", "int", "pruned", "=", "(", "(", "LocalStore", ")", "store", ")", ".", "pruneCachedAttachments", "(", ")", ";", "if", "(", "handler", "!", "=", "null", ")", "{", "handler", ".", "incProgress", "(", "accountNum", ",", "pruned", ")", ";", "}", "}", "catch", "(", "MessagingException", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "}", "}", "</s>"]
["<s>", "static", "void", "cleanupConnections", "(", "Context", "context", ",", "EmailContent", ".", "Account", "newAccount", ",", "Account", "account", ")", "{", "String", "email", "=", "newAccount", ".", "mEmailAddress", ";", "int", "atSignPos", "=", "email", ".", "lastIndexOf", "(", "<CHAR_LIT>", ")", ";", "String", "domain", "=", "email", ".", "substring", "(", "atSignPos", "+", "1", ")", ";", "Provider", "p", "=", "AccountSettingsUtils", ".", "findProviderForDomain", "(", "context", ",", "domain", ")", ";", "if", "(", "p", "!", "=", "null", ")", "{", "try", "{", "URI", "incomingUriTemplate", "=", "p", ".", "incomingUriTemplate", ";", "String", "incomingUsername", "=", "newAccount", ".", "mHostAuthRecv", ".", "mLogin", ";", "String", "incomingPassword", "=", "newAccount", ".", "mHostAuthRecv", ".", "mPassword", ";", "URI", "incomingUri", "=", "new", "URI", "(", "incomingUriTemplate", ".", "getScheme", "(", ")", ",", "incomingUsername", "+", "\"", "<STR_LIT::>", "\"", "+", "incomingPassword", ",", "incomingUriTemplate", ".", "getHost", "(", ")", ",", "incomingUriTemplate", ".", "getPort", "(", ")", ",", "incomingUriTemplate", ".", "getPath", "(", ")", ",", "null", ",", "null", ")", ";", "newAccount", ".", "mHostAuthRecv", ".", "setStoreUri", "(", "incomingUri", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "URISyntaxException", "e", ")", "{", "}", "try", "{", "URI", "outgoingUriTemplate", "=", "p", ".", "outgoingUriTemplate", ";", "String", "outgoingUsername", "=", "newAccount", ".", "mHostAuthSend", ".", "mLogin", ";", "String", "outgoingPassword", "=", "newAccount", ".", "mHostAuthSend", ".", "mPassword", ";", "URI", "outgoingUri", "=", "new", "URI", "(", "outgoingUriTemplate", ".", "getScheme", "(", ")", ",", "outgoingUsername", "+", "\"", "<STR_LIT::>", "\"", "+", "outgoingPassword", ",", "outgoingUriTemplate", ".", "getHost", "(", ")", ",", "outgoingUriTemplate", ".", "getPort", "(", ")", ",", "outgoingUriTemplate", ".", "getPath", "(", ")", ",", "null", ",", "null", ")", ";", "newAccount", ".", "mHostAuthSend", ".", "setStoreUri", "(", "outgoingUri", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "URISyntaxException", "e", ")", "{", "}", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "account", ".", "getDescription", "(", ")", ")", ";", "return", ";", "}", "newAccount", ".", "mHostAuthRecv", ".", "mFlags", "|", "=", "HostAuth", ".", "FLAG_TRUST_ALL_CERTIFICATES", ";", "String", "receiveUri", "=", "account", ".", "getStoreUri", "(", ")", ";", "if", "(", "receiveUri", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "}", "else", "if", "(", "receiveUri", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "}", "else", "if", "(", "receiveUri", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "}", "else", "if", "(", "receiveUri", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "}", "newAccount", ".", "mHostAuthSend", ".", "mFlags", "|", "=", "HostAuth", ".", "FLAG_TRUST_ALL_CERTIFICATES", ";", "String", "sendUri", "=", "account", ".", "getSenderUri", "(", ")", ";", "if", "(", "sendUri", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "}", "else", "if", "(", "sendUri", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "}", "else", "if", "(", "sendUri", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "}", "else", "if", "(", "sendUri", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "}", "}", "</s>"]
["<s>", "public", "static", "long", "parseDateTimeToMillis", "(", "String", "date", ")", "{", "GregorianCalendar", "cal", "=", "parseDateTimeToCalendar", "(", "date", ")", ";", "return", "cal", ".", "getTimeInMillis", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "reset", "(", ")", "{", "synchronized", "(", "getSynchronizer", "(", ")", ")", "{", "if", "(", "mPendingPost", "!", "=", "null", ")", "{", "URI", "uri", "=", "mPendingPost", ".", "getURI", "(", ")", ";", "if", "(", "uri", "!", "=", "null", ")", "{", "String", "query", "=", "uri", ".", "getQuery", "(", ")", ";", "if", "(", "query", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", ")", ";", "mPostReset", "=", "true", ";", "mPendingPost", ".", "abort", "(", ")", ";", "}", "}", "}", "}", "}", "</s>"]
["<s>", "static", "public", "void", "alert", "(", "Context", "context", ",", "long", "id", ")", "{", "checkSyncManagerServiceRunning", "(", ")", ";", "if", "(", "id", "<", "0", ")", "{", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "INSTANCE", "=", "=", "null", ")", "{", "context", ".", "startService", "(", "new", "Intent", "(", "context", ",", "SyncManager", ".", "class", ")", ")", ";", "}", "else", "{", "AbstractSyncService", "service", "=", "INSTANCE", ".", "mServiceMap", ".", "get", "(", "id", ")", ";", "if", "(", "service", "!", "=", "null", ")", "{", "Mailbox", "m", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "INSTANCE", ",", "id", ")", ";", "if", "(", "m", "!", "=", "null", ")", "{", "if", "(", "m", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_DRAFTS", "|", "|", "m", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_OUTBOX", ")", "{", "String", "[", "]", "args", "=", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "m", ".", "mId", ")", "}", ";", "ContentResolver", "resolver", "=", "INSTANCE", ".", "mResolver", ";", "resolver", ".", "delete", "(", "Message", ".", "DELETED_CONTENT_URI", ",", "WHERE_MAILBOX_KEY", ",", "args", ")", ";", "resolver", ".", "delete", "(", "Message", ".", "UPDATED_CONTENT_URI", ",", "WHERE_MAILBOX_KEY", ",", "args", ")", ";", "return", ";", "}", "service", ".", "mAccount", "=", "Account", ".", "restoreAccountWithId", "(", "INSTANCE", ",", "m", ".", "mAccountKey", ")", ";", "service", ".", "mMailbox", "=", "m", ";", "service", ".", "alarm", "(", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "private", "void", "startServiceThread", "(", "AbstractSyncService", "service", ",", "Mailbox", "m", ")", "{", "synchronized", "(", "sSyncToken", ")", "{", "String", "mailboxName", "=", "m", ".", "mDisplayName", ";", "String", "accountName", "=", "service", ".", "mAccount", ".", "mDisplayName", ";", "Thread", "thread", "=", "new", "Thread", "(", "service", ",", "mailboxName", "+", "\"", "<STR_LIT:(>", "\"", "+", "accountName", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "log", "(", "\"", "<STR_LIT>", "\"", "+", "mailboxName", "+", "\"", "<STR_LIT>", "\"", "+", "accountName", ")", ";", "thread", ".", "start", "(", ")", ";", "mServiceMap", ".", "put", "(", "m", ".", "mId", ",", "service", ")", ";", "runAwake", "(", "m", ".", "mId", ")", ";", "if", "(", "!", "m", ".", "mServerId", ".", "startsWith", "(", "Eas", ".", "ACCOUNT_MAILBOX_PREFIX", ")", ")", "{", "stopPing", "(", "m", ".", "mAccountKey", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "stopPing", "(", "long", "accountId", ")", "{", "for", "(", "long", "mailboxId", ":", "mServiceMap", ".", "keySet", "(", ")", ")", "{", "Mailbox", "m", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "this", ",", "mailboxId", ")", ";", "if", "(", "m", ".", "mAccountKey", "=", "=", "accountId", "&", "&", "m", ".", "mServerId", ".", "startsWith", "(", "Eas", ".", "ACCOUNT_MAILBOX_PREFIX", ")", ")", "{", "AbstractSyncService", "svc", "=", "mServiceMap", ".", "get", "(", "mailboxId", ")", ";", "svc", ".", "reset", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "requestSync", "(", "Mailbox", "m", ",", "int", "reason", ",", "Request", "req", ")", "{", "if", "(", "sConnectivityHold", ")", "return", ";", "synchronized", "(", "sSyncToken", ")", "{", "Account", "acct", "=", "Account", ".", "restoreAccountWithId", "(", "this", ",", "m", ".", "mAccountKey", ")", ";", "if", "(", "acct", "!", "=", "null", ")", "{", "AbstractSyncService", "service", "=", "mServiceMap", ".", "get", "(", "m", ".", "mId", ")", ";", "if", "(", "service", "=", "=", "null", ")", "{", "service", "=", "new", "EasSyncService", "(", "this", ",", "m", ")", ";", "if", "(", "!", "(", "(", "EasSyncService", ")", "service", ")", ".", "mIsValid", ")", "return", ";", "service", ".", "mSyncReason", "=", "reason", ";", "if", "(", "req", "!", "=", "null", ")", "{", "service", ".", "addRequest", "(", "req", ")", ";", "}", "startServiceThread", "(", "service", ",", "m", ")", ";", "}", "}", "}", "}", "</s>"]
["<s>", "static", "public", "void", "clearWatchdogAlarm", "(", "long", "id", ")", "{", "SyncManager", "syncManager", "=", "INSTANCE", ";", "if", "(", "syncManager", "!", "=", "null", ")", "{", "syncManager", ".", "clearAlarm", "(", "id", ")", ";", "}", "}", "</s>"]
["<s>", "static", "public", "void", "setWatchdogAlarm", "(", "long", "id", ",", "long", "millis", ")", "{", "SyncManager", "syncManager", "=", "INSTANCE", ";", "if", "(", "syncManager", "!", "=", "null", ")", "{", "syncManager", ".", "setAlarm", "(", "id", ",", "millis", ")", ";", "}", "}", "</s>"]
["<s>", "private", "boolean", "isValidEventValues", "(", "ContentValues", "cv", ",", "boolean", "update", ")", "{", "if", "(", "!", "cv", ".", "containsKey", "(", "Events", ".", "DTSTART", ")", "|", "|", "!", "cv", ".", "containsKey", "(", "Events", ".", "_SYNC_DATA", ")", ")", "{", "userLog", "(", "TAG", ",", "(", "update", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "Entry", "<", "String", ",", "Object", ">", "entry", ":", "cv", ".", "valueSet", "(", ")", ")", "{", "sb", ".", "append", "(", "entry", ".", "getKey", "(", ")", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT>", ")", ";", "}", "userLog", "(", "TAG", ",", "sb", ".", "toString", "(", ")", ")", ";", "return", "false", ";", "}", "return", "true", ";", "}", "</s>"]
["<s>", "public", "int", "newDelete", "(", "long", "id", ")", "{", "int", "offset", "=", "mCount", ";", "delete", "(", "id", ")", ";", "return", "offset", ";", "}", "</s>"]
["<s>", "static", "public", "void", "removeFromSyncErrorMap", "(", "long", "mailboxId", ")", "{", "SyncManager", "syncManager", "=", "INSTANCE", ";", "if", "(", "syncManager", "=", "=", "null", ")", "return", ";", "synchronized", "(", "sSyncToken", ")", "{", "syncManager", ".", "mSyncErrorMap", ".", "remove", "(", "mailboxId", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "updateAttachments", "(", "Context", "context", ",", "EmailContent", ".", "Message", "localMessage", ",", "ArrayList", "<", "Part", ">", "attachments", ",", "boolean", "upgrading", ")", "throws", "MessagingException", ",", "IOException", "{", "localMessage", ".", "mAttachments", "=", "null", ";", "for", "(", "Part", "attachmentPart", ":", "attachments", ")", "{", "addOneAttachment", "(", "context", ",", "localMessage", ",", "attachmentPart", ",", "upgrading", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "void", "addOneAttachment", "(", "Context", "context", ",", "EmailContent", ".", "Message", "localMessage", ",", "Part", "part", ",", "boolean", "upgrading", ")", "throws", "MessagingException", ",", "IOException", "{", "Attachment", "localAttachment", "=", "new", "Attachment", "(", ")", ";", "String", "contentType", "=", "MimeUtility", ".", "unfoldAndDecode", "(", "part", ".", "getContentType", "(", ")", ")", ";", "String", "name", "=", "MimeUtility", ".", "getHeaderParameter", "(", "contentType", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "name", "=", "=", "null", ")", "{", "String", "contentDisposition", "=", "MimeUtility", ".", "unfoldAndDecode", "(", "part", ".", "getContentType", "(", ")", ")", ";", "name", "=", "MimeUtility", ".", "getHeaderParameter", "(", "contentDisposition", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "Uri", "contentUri", "=", "null", ";", "String", "contentUriString", "=", "null", ";", "if", "(", "upgrading", ")", "{", "Body", "body", "=", "part", ".", "getBody", "(", ")", ";", "if", "(", "body", "instanceof", "LocalStore", ".", "LocalAttachmentBody", ")", "{", "LocalStore", ".", "LocalAttachmentBody", "localBody", "=", "(", "LocalStore", ".", "LocalAttachmentBody", ")", "body", ";", "contentUri", "=", "localBody", ".", "getContentUri", "(", ")", ";", "if", "(", "contentUri", "!", "=", "null", ")", "{", "contentUriString", "=", "contentUri", ".", "toString", "(", ")", ";", "}", "}", "}", "long", "size", "=", "0", ";", "if", "(", "upgrading", ")", "{", "if", "(", "contentUri", "!", "=", "null", ")", "{", "Cursor", "metadataCursor", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "contentUri", ",", "ATTACHMENT_META_COLUMNS_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "if", "(", "metadataCursor", "!", "=", "null", ")", "{", "try", "{", "if", "(", "metadataCursor", ".", "moveToFirst", "(", ")", ")", "{", "size", "=", "metadataCursor", ".", "getInt", "(", "ATTACHMENT_META_COLUMNS_SIZE", ")", ";", "}", "}", "finally", "{", "metadataCursor", ".", "close", "(", ")", ";", "}", "}", "}", "}", "else", "{", "String", "disposition", "=", "part", ".", "getDisposition", "(", ")", ";", "if", "(", "disposition", "!", "=", "null", ")", "{", "String", "s", "=", "MimeUtility", ".", "getHeaderParameter", "(", "disposition", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "s", "!", "=", "null", ")", "{", "size", "=", "Long", ".", "parseLong", "(", "s", ")", ";", "}", "}", "}", "String", "[", "]", "partIds", "=", "part", ".", "getHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_ATTACHMENT_STORE_DATA", ")", ";", "String", "partId", "=", "partIds", "!", "=", "null", "?", "partIds", "[", "0", "]", ":", "null", ";", "localAttachment", ".", "mFileName", "=", "MimeUtility", ".", "getHeaderParameter", "(", "contentType", ",", "\"", "<STR_LIT>", "\"", ")", ";", "localAttachment", ".", "mMimeType", "=", "part", ".", "getMimeType", "(", ")", ";", "localAttachment", ".", "mSize", "=", "size", ";", "localAttachment", ".", "mContentId", "=", "part", ".", "getContentId", "(", ")", ";", "localAttachment", ".", "mContentUri", "=", "contentUriString", ";", "localAttachment", ".", "mMessageKey", "=", "localMessage", ".", "mId", ";", "localAttachment", ".", "mLocation", "=", "partId", ";", "localAttachment", ".", "mEncoding", "=", "\"", "<STR_LIT:B>", "\"", ";", "if", "(", "DEBUG_ATTACHMENTS", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "localAttachment", ")", ";", "}", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "MESSAGE_ID_URI", ",", "localMessage", ".", "mId", ")", ";", "Cursor", "cursor", "=", "context", ".", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "Attachment", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "boolean", "attachmentFoundInDb", "=", "false", ";", "try", "{", "while", "(", "cursor", ".", "moveToNext", "(", ")", ")", "{", "Attachment", "dbAttachment", "=", "new", "Attachment", "(", ")", ".", "restore", "(", "cursor", ")", ";", "if", "(", "stringNotEqual", "(", "dbAttachment", ".", "mFileName", ",", "localAttachment", ".", "mFileName", ")", ")", "continue", ";", "if", "(", "stringNotEqual", "(", "dbAttachment", ".", "mMimeType", ",", "localAttachment", ".", "mMimeType", ")", ")", "continue", ";", "if", "(", "stringNotEqual", "(", "dbAttachment", ".", "mContentId", ",", "localAttachment", ".", "mContentId", ")", ")", "continue", ";", "if", "(", "stringNotEqual", "(", "dbAttachment", ".", "mLocation", ",", "localAttachment", ".", "mLocation", ")", ")", "continue", ";", "attachmentFoundInDb", "=", "true", ";", "localAttachment", ".", "mId", "=", "dbAttachment", ".", "mId", ";", "if", "(", "DEBUG_ATTACHMENTS", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "dbAttachment", ")", ";", "}", "break", ";", "}", "}", "finally", "{", "cursor", ".", "close", "(", ")", ";", "}", "if", "(", "!", "attachmentFoundInDb", ")", "{", "localAttachment", ".", "save", "(", "context", ")", ";", "}", "if", "(", "!", "upgrading", ")", "{", "saveAttachmentBody", "(", "context", ",", "part", ",", "localAttachment", ",", "localMessage", ".", "mAccountKey", ")", ";", "}", "if", "(", "localMessage", ".", "mAttachments", "=", "=", "null", ")", "{", "localMessage", ".", "mAttachments", "=", "new", "ArrayList", "<", "Attachment", ">", "(", ")", ";", "}", "localMessage", ".", "mAttachments", ".", "add", "(", "localAttachment", ")", ";", "localMessage", ".", "mFlagAttachment", "=", "true", ";", "}", "</s>"]
["<s>", "public", "static", "EmailContent", ".", "Mailbox", "makeMailbox", "(", "Context", "context", ",", "EmailContent", ".", "Account", "toAccount", ",", "Folder", "fromFolder", ")", "throws", "MessagingException", "{", "EmailContent", ".", "Mailbox", "result", "=", "new", "EmailContent", ".", "Mailbox", "(", ")", ";", "result", ".", "mDisplayName", "=", "fromFolder", ".", "getName", "(", ")", ";", "result", ".", "mAccountKey", "=", "toAccount", ".", "mId", ";", "result", ".", "mType", "=", "inferMailboxTypeFromName", "(", "context", ",", "fromFolder", ".", "getName", "(", ")", ")", ";", "result", ".", "mSyncTime", "=", "0", ";", "result", ".", "mUnreadCount", "=", "fromFolder", ".", "getUnreadMessageCount", "(", ")", ";", "result", ".", "mFlagVisible", "=", "true", ";", "result", ".", "mFlags", "=", "0", ";", "result", ".", "mVisibleLimit", "=", "Email", ".", "VISIBLE_LIMIT_DEFAULT", ";", "return", "result", ";", "}", "</s>"]
["<s>", "private", "void", "copyAndDeleteAccount", "(", "AccountInfo", "info", ",", "int", "i", ",", "UIHandler", "handler", ",", "String", "type", ")", "{", "if", "(", "type", "!", "=", "null", ")", "{", "String", "storeUri", "=", "info", ".", "account", ".", "getStoreUri", "(", ")", ";", "boolean", "isType", "=", "storeUri", ".", "startsWith", "(", "type", ")", ";", "if", "(", "!", "isType", ")", "{", "return", ";", "}", "}", "if", "(", "info", ".", "error", "=", "=", "null", ")", "{", "copyAccount", "(", "mContext", ",", "info", ".", "account", ",", "i", ",", "handler", ")", ";", "}", "deleteAccountStore", "(", "mContext", ",", "info", ".", "account", ",", "handler", ")", ";", "info", ".", "account", ".", "delete", "(", "mPreferences", ")", ";", "handler", ".", "setMaxProgress", "(", "i", ",", "<NUM_LIT:100>", ")", ";", "handler", ".", "setProgress", "(", "i", ",", "<NUM_LIT:100>", ")", ";", "}", "</s>"]
["<s>", "static", "void", "copyMessages", "(", "Context", "context", ",", "FolderConversion", "conversion", ",", "boolean", "localAttachments", ",", "long", "newAccountId", ",", "int", "accountNum", ",", "UIHandler", "handler", ")", "{", "try", "{", "conversion", ".", "folder", ".", "open", "(", "Folder", ".", "OpenMode", ".", "READ_ONLY", ",", "null", ")", ";", "Message", "[", "]", "oldMessages", "=", "conversion", ".", "folder", ".", "getMessages", "(", "null", ")", ";", "for", "(", "Message", "oldMessage", ":", "oldMessages", ")", "{", "Exception", "e", "=", "null", ";", "try", "{", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ";", "conversion", ".", "folder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "oldMessage", "}", ",", "fp", ",", "null", ")", ";", "EmailContent", ".", "Message", "newMessage", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "LegacyConversions", ".", "updateMessageFields", "(", "newMessage", ",", "oldMessage", ",", "newAccountId", ",", "conversion", ".", "mailbox", ".", "mId", ")", ";", "EmailContent", ".", "Body", "newBody", "=", "new", "EmailContent", ".", "Body", "(", ")", ";", "ArrayList", "<", "Part", ">", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "ArrayList", "<", "Part", ">", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "oldMessage", ",", "viewables", ",", "attachments", ")", ";", "LegacyConversions", ".", "updateBodyFields", "(", "newBody", ",", "newMessage", ",", "viewables", ")", ";", "newMessage", ".", "save", "(", "context", ")", ";", "newBody", ".", "save", "(", "context", ")", ";", "if", "(", "localAttachments", ")", "{", "LegacyConversions", ".", "updateAttachments", "(", "context", ",", "newMessage", ",", "attachments", ",", "true", ")", ";", "}", "else", "{", "}", "if", "(", "handler", "!", "=", "null", ")", "{", "handler", ".", "incProgress", "(", "accountNum", ")", ";", "}", "}", "catch", "(", "MessagingException", "me", ")", "{", "e", "=", "me", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "e", "=", "ioe", ";", "}", "if", "(", "e", "!", "=", "null", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "oldMessage", ".", "getSubject", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "if", "(", "handler", "!", "=", "null", ")", "{", "handler", ".", "error", "(", "context", ".", "getString", "(", "R", ".", "string", ".", "upgrade_accounts_error", ")", ")", ";", "}", "}", "}", "}", "catch", "(", "MessagingException", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "if", "(", "handler", "!", "=", "null", ")", "{", "handler", ".", "error", "(", "context", ".", "getString", "(", "R", ".", "string", ".", "upgrade_accounts_error", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "String", "legacyPack", "(", "Address", "[", "]", "addresses", ")", "{", "if", "(", "addresses", "=", "=", "null", ")", "{", "return", "null", ";", "}", "else", "if", "(", "addresses", ".", "length", "=", "=", "0", ")", "{", "return", "\"", "\"", ";", "}", "StringBuffer", "sb", "=", "new", "StringBuffer", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "addresses", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "Address", "address", "=", "addresses", "[", "i", "]", ";", "try", "{", "sb", ".", "append", "(", "URLEncoder", ".", "encode", "(", "address", ".", "getAddress", "(", ")", ",", "\"", "<STR_LIT:UTF-8>", "\"", ")", ")", ";", "if", "(", "address", ".", "getPersonal", "(", ")", "!", "=", "null", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:;>", ")", ";", "sb", ".", "append", "(", "URLEncoder", ".", "encode", "(", "address", ".", "getPersonal", "(", ")", ",", "\"", "<STR_LIT:UTF-8>", "\"", ")", ")", ";", "}", "if", "(", "i", "<", "count", "-", "1", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:U+002C>", ")", ";", "}", "}", "catch", "(", "UnsupportedEncodingException", "uee", ")", "{", "return", "null", ";", "}", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testLocalUpgradeAttachments", "(", ")", "throws", "MessagingException", ",", "IOException", "{", "final", "long", "accountId", "=", "1", ";", "final", "long", "mailboxId", "=", "1", ";", "final", "EmailContent", ".", "Message", "localMessage", "=", "ProviderTestUtils", ".", "setupMessage", "(", "\"", "<STR_LIT>", "\"", ",", "accountId", ",", "mailboxId", ",", "false", ",", "true", ",", "mProviderContext", ")", ";", "final", "Message", "legacyMessage", "=", "prepareLegacyMessageWithAttachments", "(", "<NUM_LIT:2>", ",", "true", ")", ";", "ArrayList", "<", "Part", ">", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "ArrayList", "<", "Part", ">", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "legacyMessage", ",", "viewables", ",", "attachments", ")", ";", "LegacyConversions", ".", "updateAttachments", "(", "mProviderContext", ",", "localMessage", ",", "attachments", ",", "true", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "MESSAGE_ID_URI", ",", "localMessage", ".", "mId", ")", ";", "Cursor", "c", "=", "mProviderContext", ".", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "Attachment", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "assertEquals", "(", "<NUM_LIT:2>", ",", "c", ".", "getCount", "(", ")", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "Attachment", "attachment", "=", "Attachment", ".", "getContent", "(", "c", ",", "Attachment", ".", "class", ")", ";", "Part", "fromPart", "=", "null", ";", "for", "(", "Part", "from", ":", "attachments", ")", "{", "String", "contentType", "=", "MimeUtility", ".", "unfoldAndDecode", "(", "from", ".", "getContentType", "(", ")", ")", ";", "String", "name", "=", "MimeUtility", ".", "getHeaderParameter", "(", "contentType", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "name", ".", "equals", "(", "attachment", ".", "mFileName", ")", ")", "{", "fromPart", "=", "from", ";", "break", ";", "}", "}", "assertTrue", "(", "fromPart", "!", "=", "null", ")", ";", "checkAttachment", "(", "attachment", ".", "mFileName", ",", "fromPart", ",", "attachment", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testMakeProviderMailbox", "(", ")", "throws", "MessagingException", "{", "EmailContent", ".", "Account", "toAccount", "=", "ProviderTestUtils", ".", "setupAccount", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "mProviderContext", ")", ";", "Folder", "fromFolder", "=", "buildTestFolder", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Mailbox", "toMailbox", "=", "LegacyConversions", ".", "makeMailbox", "(", "mProviderContext", ",", "toAccount", ",", "fromFolder", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "toMailbox", ".", "mDisplayName", ")", ";", "assertNull", "(", "toMailbox", ".", "mServerId", ")", ";", "assertNull", "(", "toMailbox", ".", "mParentServerId", ")", ";", "assertEquals", "(", "toAccount", ".", "mId", ",", "toMailbox", ".", "mAccountKey", ")", ";", "assertEquals", "(", "Mailbox", ".", "TYPE_INBOX", ",", "toMailbox", ".", "mType", ")", ";", "assertEquals", "(", "0", ",", "toMailbox", ".", "mDelimiter", ")", ";", "assertNull", "(", "toMailbox", ".", "mSyncKey", ")", ";", "assertEquals", "(", "0", ",", "toMailbox", ".", "mSyncLookback", ")", ";", "assertEquals", "(", "0", ",", "toMailbox", ".", "mSyncInterval", ")", ";", "assertEquals", "(", "0", ",", "toMailbox", ".", "mSyncTime", ")", ";", "assertEquals", "(", "<NUM_LIT:100>", ",", "toMailbox", ".", "mUnreadCount", ")", ";", "assertTrue", "(", "toMailbox", ".", "mFlagVisible", ")", ";", "assertEquals", "(", "0", ",", "toMailbox", ".", "mFlags", ")", ";", "assertEquals", "(", "Email", ".", "VISIBLE_LIMIT_DEFAULT", ",", "toMailbox", ".", "mVisibleLimit", ")", ";", "assertNull", "(", "toMailbox", ".", "mSyncStatus", ")", ";", "}", "</s>"]
["<s>", "private", "Folder", "buildTestFolder", "(", "String", "folderName", ")", "throws", "MessagingException", "{", "String", "localStoreUri", "=", "\"", "<STR_LIT>", "\"", "+", "mProviderContext", ".", "getDatabasePath", "(", "LocalStoreUnitTests", ".", "DB_NAME", ")", ";", "LocalStore", "store", "=", "(", "LocalStore", ")", "LocalStore", ".", "newInstance", "(", "localStoreUri", ",", "getContext", "(", ")", ",", "null", ")", ";", "LocalStore", ".", "LocalFolder", "folder", "=", "(", "LocalStore", ".", "LocalFolder", ")", "store", ".", "getFolder", "(", "folderName", ")", ";", "folder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "folder", ".", "setUnreadMessageCount", "(", "<NUM_LIT:100>", ")", ";", "return", "folder", ";", "}", "</s>"]
["<s>", "public", "static", "HostAuth", "setupHostAuth", "(", "String", "protocol", ",", "String", "name", ",", "long", "accountId", ",", "boolean", "saveIt", ",", "Context", "context", ")", "{", "HostAuth", "hostAuth", "=", "new", "HostAuth", "(", ")", ";", "hostAuth", ".", "mProtocol", "=", "protocol", "+", "\"", "<STR_LIT:->", "\"", "+", "name", ";", "hostAuth", ".", "mAddress", "=", "\"", "<STR_LIT:->", "\"", "+", "name", ";", "hostAuth", ".", "mPort", "=", "<NUM_LIT:100>", ";", "hostAuth", ".", "mFlags", "=", "<NUM_LIT>", ";", "hostAuth", ".", "mLogin", "=", "\"", "<STR_LIT:->", "\"", "+", "name", ";", "hostAuth", ".", "mPassword", "=", "\"", "<STR_LIT:->", "\"", "+", "name", ";", "hostAuth", ".", "mDomain", "=", "\"", "<STR_LIT:->", "\"", "+", "name", ";", "hostAuth", ".", "mAccountKey", "=", "accountId", ";", "if", "(", "saveIt", ")", "{", "hostAuth", ".", "save", "(", "context", ")", ";", "}", "return", "hostAuth", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onBackPressed", "(", ")", "{", "if", "(", "!", "mProceedButton", ".", "isEnabled", "(", ")", ")", "{", "finish", "(", ")", ";", "}", "}", "</s>"]
["<s>", "static", "void", "copyMessages", "(", "Context", "context", ",", "FolderConversion", "conversion", ",", "boolean", "localAttachments", ",", "EmailContent", ".", "Account", "newAccount", ",", "int", "accountNum", ",", "UIHandler", "handler", ")", "{", "try", "{", "boolean", "makeDeleteSentinels", "=", "(", "conversion", ".", "mailbox", ".", "mType", "=", "=", "Mailbox", ".", "TYPE_INBOX", ")", "&", "&", "(", "newAccount", ".", "getDeletePolicy", "(", ")", "=", "=", "EmailContent", ".", "Account", ".", "DELETE_POLICY_NEVER", ")", ";", "conversion", ".", "folder", ".", "open", "(", "Folder", ".", "OpenMode", ".", "READ_ONLY", ",", "null", ")", ";", "Message", "[", "]", "oldMessages", "=", "conversion", ".", "folder", ".", "getMessages", "(", "null", ")", ";", "for", "(", "Message", "oldMessage", ":", "oldMessages", ")", "{", "Exception", "e", "=", "null", ";", "try", "{", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ";", "conversion", ".", "folder", ".", "fetch", "(", "new", "Message", "[", "]", "{", "oldMessage", "}", ",", "fp", ",", "null", ")", ";", "EmailContent", ".", "Message", "newMessage", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "if", "(", "makeDeleteSentinels", "&", "&", "oldMessage", ".", "isSet", "(", "Flag", ".", "DELETED", ")", ")", "{", "newMessage", ".", "mAccountKey", "=", "newAccount", ".", "mId", ";", "newMessage", ".", "mMailboxKey", "=", "conversion", ".", "mailbox", ".", "mId", ";", "newMessage", ".", "mFlagLoaded", "=", "EmailContent", ".", "Message", ".", "FLAG_LOADED_DELETED", ";", "newMessage", ".", "mFlagRead", "=", "true", ";", "newMessage", ".", "mServerId", "=", "oldMessage", ".", "getUid", "(", ")", ";", "newMessage", ".", "save", "(", "context", ")", ";", "}", "else", "{", "LegacyConversions", ".", "updateMessageFields", "(", "newMessage", ",", "oldMessage", ",", "newAccount", ".", "mId", ",", "conversion", ".", "mailbox", ".", "mId", ")", ";", "EmailContent", ".", "Body", "newBody", "=", "new", "EmailContent", ".", "Body", "(", ")", ";", "ArrayList", "<", "Part", ">", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "ArrayList", "<", "Part", ">", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "oldMessage", ",", "viewables", ",", "attachments", ")", ";", "LegacyConversions", ".", "updateBodyFields", "(", "newBody", ",", "newMessage", ",", "viewables", ")", ";", "newMessage", ".", "save", "(", "context", ")", ";", "newBody", ".", "save", "(", "context", ")", ";", "if", "(", "localAttachments", ")", "{", "LegacyConversions", ".", "updateAttachments", "(", "context", ",", "newMessage", ",", "attachments", ",", "true", ")", ";", "}", "}", "if", "(", "handler", "!", "=", "null", ")", "{", "handler", ".", "incProgress", "(", "accountNum", ")", ";", "}", "}", "catch", "(", "MessagingException", "me", ")", "{", "e", "=", "me", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "e", "=", "ioe", ";", "}", "if", "(", "e", "!", "=", "null", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "oldMessage", ".", "getSubject", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "if", "(", "handler", "!", "=", "null", ")", "{", "handler", ".", "error", "(", "context", ".", "getString", "(", "R", ".", "string", ".", "upgrade_accounts_error", ")", ")", ";", "}", "}", "}", "}", "catch", "(", "MessagingException", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "conversion", ".", "folder", ".", "toString", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "if", "(", "handler", "!", "=", "null", ")", "{", "handler", ".", "error", "(", "context", ".", "getString", "(", "R", ".", "string", ".", "upgrade_accounts_error", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "{", "try", "{", "mDb", ".", "close", "(", ")", ";", "mDb", "=", "null", ";", "}", "catch", "(", "Exception", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "HashSet", "<", "Flag", ">", "getFlagSet", "(", ")", "{", "if", "(", "mFlags", "=", "=", "null", ")", "{", "mFlags", "=", "new", "HashSet", "<", "Flag", ">", "(", ")", ";", "}", "return", "mFlags", ";", "}", "</s>"]
["<s>", "private", "MimeHeader", "getMimeHeaders", "(", ")", "{", "if", "(", "mHeader", "=", "=", "null", ")", "{", "mHeader", "=", "new", "MimeHeader", "(", ")", ";", "}", "return", "mHeader", ";", "}", "</s>"]
["<s>", "private", "int", "readByte", "(", ")", "throws", "IOException", "{", "int", "ret", "=", "mIn", ".", "read", "(", ")", ";", "if", "(", "ret", "!", "=", "-", "1", ")", "{", "mDiscourseLogger", ".", "addReceivedByte", "(", "ret", ")", ";", "}", "return", "ret", ";", "}", "</s>"]
["<s>", "private", "void", "onParseError", "(", "Exception", "e", ")", "{", "try", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:4>", ";", "i", "+", "+", ")", "{", "int", "b", "=", "readByte", "(", ")", ";", "if", "(", "b", "=", "=", "-", "1", "|", "|", "b", "=", "=", "<STR_LIT:\\n>", ")", "{", "break", ";", "}", "}", "}", "catch", "(", "IOException", "ignore", ")", "{", "}", "Log", ".", "w", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "e", ".", "getMessage", "(", ")", ")", ";", "mDiscourseLogger", ".", "logLastDiscourse", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "fetchInternal", "(", "Message", "[", "]", "messages", ",", "FetchProfile", "fp", ",", "MessageRetrievalListener", "listener", ")", "throws", "MessagingException", "{", "if", "(", "messages", "=", "=", "null", "|", "|", "messages", ".", "length", "=", "=", "0", ")", "{", "return", ";", "}", "checkOpen", "(", ")", ";", "String", "[", "]", "uids", "=", "new", "String", "[", "messages", ".", "length", "]", ";", "HashMap", "<", "String", ",", "Message", ">", "messageMap", "=", "new", "HashMap", "<", "String", ",", "Message", ">", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "count", "=", "messages", ".", "length", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "uids", "[", "i", "]", "=", "messages", "[", "i", "]", ".", "getUid", "(", ")", ";", "messageMap", ".", "put", "(", "uids", "[", "i", "]", ",", "messages", "[", "i", "]", ")", ";", "}", "LinkedHashSet", "<", "String", ">", "fetchFields", "=", "new", "LinkedHashSet", "<", "String", ">", "(", ")", ";", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "FLAGS", ")", ")", "{", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ")", "{", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "STRUCTURE", ")", ")", "{", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "BODY_SANE", ")", ")", "{", "fetchFields", ".", "add", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "FETCH_BODY_SANE_SUGGESTED_SIZE", ")", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ")", "{", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "for", "(", "Object", "o", ":", "fp", ")", "{", "if", "(", "o", "instanceof", "Part", ")", "{", "Part", "part", "=", "(", "Part", ")", "o", ";", "String", "[", "]", "partIds", "=", "part", ".", "getHeader", "(", "MimeHeader", ".", "HEADER_ANDROID_ATTACHMENT_STORE_DATA", ")", ";", "if", "(", "partIds", "!", "=", "null", ")", "{", "fetchFields", ".", "add", "(", "\"", "<STR_LIT>", "\"", "+", "partIds", "[", "0", "]", "+", "\"", "<STR_LIT:]>", "\"", ")", ";", "}", "}", "}", "try", "{", "String", "tag", "=", "mConnection", ".", "sendCommand", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "Utility", ".", "combine", "(", "uids", ",", "<CHAR_LIT:U+002C>", ")", ",", "Utility", ".", "combine", "(", "fetchFields", ".", "toArray", "(", "new", "String", "[", "fetchFields", ".", "size", "(", ")", "]", ")", ",", "<CHAR_LIT>", ")", ")", ",", "false", ")", ";", "ImapResponse", "response", ";", "int", "messageNumber", "=", "0", ";", "do", "{", "response", "=", "mConnection", ".", "readResponse", "(", ")", ";", "if", "(", "response", ".", "mTag", "=", "=", "null", "&", "&", "response", ".", "get", "(", "1", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "ImapList", "fetchList", "=", "(", "ImapList", ")", "response", ".", "getKeyedValue", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "uid", "=", "fetchList", ".", "getKeyedString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "uid", "=", "=", "null", ")", "continue", ";", "Message", "message", "=", "messageMap", ".", "get", "(", "uid", ")", ";", "if", "(", "message", "=", "=", "null", ")", "continue", ";", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageStarted", "(", "uid", ",", "messageNumber", "+", "+", ",", "messageMap", ".", "size", "(", ")", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "FLAGS", ")", ")", "{", "ImapList", "flags", "=", "fetchList", ".", "getKeyedList", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ImapMessage", "imapMessage", "=", "(", "ImapMessage", ")", "message", ";", "if", "(", "flags", "!", "=", "null", ")", "{", "for", "(", "int", "i", "=", "0", ",", "count", "=", "flags", ".", "size", "(", ")", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "String", "flag", "=", "flags", ".", "getString", "(", "i", ")", ";", "if", "(", "flag", ".", "equals", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", "{", "imapMessage", ".", "setFlagInternal", "(", "Flag", ".", "DELETED", ",", "true", ")", ";", "}", "else", "if", "(", "flag", ".", "equals", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", "{", "imapMessage", ".", "setFlagInternal", "(", "Flag", ".", "ANSWERED", ",", "true", ")", ";", "}", "else", "if", "(", "flag", ".", "equals", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", "{", "imapMessage", ".", "setFlagInternal", "(", "Flag", ".", "SEEN", ",", "true", ")", ";", "}", "else", "if", "(", "flag", ".", "equals", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", "{", "imapMessage", ".", "setFlagInternal", "(", "Flag", ".", "FLAGGED", ",", "true", ")", ";", "}", "}", "}", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ")", "{", "Date", "internalDate", "=", "fetchList", ".", "getKeyedDate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "int", "size", "=", "fetchList", ".", "getKeyedNumber", "(", "\"", "<STR_LIT>", "\"", ")", ";", "InputStream", "headerStream", "=", "fetchList", ".", "getLiteral", "(", "fetchList", ".", "size", "(", ")", "-", "1", ")", ";", "ImapMessage", "imapMessage", "=", "(", "ImapMessage", ")", "message", ";", "message", ".", "setInternalDate", "(", "internalDate", ")", ";", "imapMessage", ".", "setSize", "(", "size", ")", ";", "imapMessage", ".", "parse", "(", "headerStream", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "STRUCTURE", ")", ")", "{", "ImapList", "bs", "=", "fetchList", ".", "getKeyedList", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "bs", "!", "=", "null", ")", "{", "try", "{", "parseBodyStructure", "(", "bs", ",", "message", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "e", ")", "{", "if", "(", "Email", ".", "LOGD", ")", "{", "Log", ".", "v", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "message", ".", "setBody", "(", "null", ")", ";", "}", "}", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "BODY", ")", ")", "{", "InputStream", "bodyStream", "=", "fetchList", ".", "getLiteral", "(", "fetchList", ".", "size", "(", ")", "-", "1", ")", ";", "ImapMessage", "imapMessage", "=", "(", "ImapMessage", ")", "message", ";", "imapMessage", ".", "parse", "(", "bodyStream", ")", ";", "}", "if", "(", "fp", ".", "contains", "(", "FetchProfile", ".", "Item", ".", "BODY_SANE", ")", ")", "{", "InputStream", "bodyStream", "=", "fetchList", ".", "getLiteral", "(", "fetchList", ".", "size", "(", ")", "-", "1", ")", ";", "ImapMessage", "imapMessage", "=", "(", "ImapMessage", ")", "message", ";", "imapMessage", ".", "parse", "(", "bodyStream", ")", ";", "}", "for", "(", "Object", "o", ":", "fp", ")", "{", "if", "(", "o", "instanceof", "Part", ")", "{", "Part", "part", "=", "(", "Part", ")", "o", ";", "if", "(", "part", ".", "getSize", "(", ")", ">", "0", ")", "{", "InputStream", "bodyStream", "=", "fetchList", ".", "getLiteral", "(", "fetchList", ".", "size", "(", ")", "-", "1", ")", ";", "String", "contentType", "=", "part", ".", "getContentType", "(", ")", ";", "String", "contentTransferEncoding", "=", "part", ".", "getHeader", "(", "MimeHeader", ".", "HEADER_CONTENT_TRANSFER_ENCODING", ")", "[", "0", "]", ";", "part", ".", "setBody", "(", "MimeUtility", ".", "decodeBody", "(", "bodyStream", ",", "contentTransferEncoding", ")", ")", ";", "}", "}", "}", "if", "(", "listener", "!", "=", "null", ")", "{", "listener", ".", "messageFinished", "(", "message", ",", "messageNumber", ",", "messageMap", ".", "size", "(", ")", ")", ";", "}", "}", "while", "(", "response", ".", "more", "(", ")", ")", ";", "}", "while", "(", "response", ".", "mTag", "=", "=", "null", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "ioExceptionHandler", "(", "mConnection", ",", "ioe", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "logLastDiscourse", "(", ")", "{", "mDiscourse", ".", "logLastDiscourse", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "initBuffer", "(", ")", "{", "mBuffer", "=", "new", "String", "[", "mBufferSize", "]", ";", "}", "</s>"]
["<s>", "private", "void", "addLine", "(", "String", "s", ")", "{", "mBuffer", "[", "mPos", "]", "=", "s", ";", "mPos", "+", "+", ";", "if", "(", "mPos", ">", "=", "mBufferSize", ")", "{", "mPos", "=", "0", ";", "}", "}", "</s>"]
["<s>", "private", "void", "addReceivingLineToBuffer", "(", ")", "{", "if", "(", "mReceivingLine", ".", "length", "(", ")", ">", "0", ")", "{", "addLine", "(", "mReceivingLine", ".", "toString", "(", ")", ")", ";", "mReceivingLine", ".", "delete", "(", "0", ",", "Integer", ".", "MAX_VALUE", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "addReceivedByte", "(", "int", "b", ")", "{", "if", "(", "<NUM_LIT>", "<", "=", "b", "&", "&", "b", "<", "=", "<NUM_LIT>", ")", "{", "mReceivingLine", ".", "append", "(", "(", "char", ")", "b", ")", ";", "}", "else", "if", "(", "b", "=", "=", "<STR_LIT:\\n>", ")", "{", "addReceivingLineToBuffer", "(", ")", ";", "}", "else", "if", "(", "b", "=", "=", "<STR_LIT>", ")", "{", "}", "else", "{", "final", "String", "hex", "=", "\"", "<STR_LIT>", "\"", "+", "Integer", ".", "toHexString", "(", "b", ")", ";", "mReceivingLine", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "hex", ".", "substring", "(", "hex", ".", "length", "(", ")", "-", "<NUM_LIT:2>", ",", "hex", ".", "length", "(", ")", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "addSentCommand", "(", "String", "command", ")", "{", "addLine", "(", "command", ")", ";", "}", "</s>"]
["<s>", "String", "[", "]", "getLines", "(", ")", "{", "addReceivingLineToBuffer", "(", ")", ";", "ArrayList", "<", "String", ">", "list", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "final", "int", "start", "=", "mPos", ";", "int", "pos", "=", "mPos", ";", "do", "{", "String", "s", "=", "mBuffer", "[", "pos", "]", ";", "if", "(", "s", "!", "=", "null", ")", "{", "list", ".", "add", "(", "s", ")", ";", "}", "pos", "=", "(", "pos", "+", "1", ")", "%", "mBufferSize", ";", "}", "while", "(", "pos", "!", "=", "start", ")", ";", "String", "[", "]", "ret", "=", "new", "String", "[", "list", ".", "size", "(", ")", "]", ";", "list", ".", "toArray", "(", "ret", ")", ";", "return", "ret", ";", "}", "</s>"]
["<s>", "public", "void", "logLastDiscourse", "(", ")", "{", "String", "[", "]", "lines", "=", "getLines", "(", ")", ";", "if", "(", "lines", ".", "length", "=", "=", "0", ")", "{", "return", ";", "}", "Log", ".", "w", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "String", "r", ":", "getLines", "(", ")", ")", "{", "Log", ".", "w", "(", "Email", ".", "LOG_TAG", ",", "r", ")", ";", "}", "initBuffer", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "byte", "[", "]", "b", "(", "String", "chars", ")", "{", "byte", "[", "]", "ret", "=", "new", "byte", "[", "chars", ".", "length", "(", ")", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "chars", ".", "length", "(", ")", ";", "i", "+", "+", ")", "{", "ret", "[", "i", "]", "=", "(", "byte", ")", "chars", ".", "charAt", "(", "i", ")", ";", "}", "return", "ret", ";", "}", "</s>"]
["<s>", "private", "static", "String", "[", "]", "s", "(", "String", ".", ".", ".", "strings", ")", "{", "return", "strings", ";", "}", "</s>"]
["<s>", "private", "static", "Object", "[", "]", "o", "(", "Object", ".", ".", ".", "objects", ")", "{", "return", "objects", ";", "}", "</s>"]
["<s>", "public", "void", "testDiscourseLogger", "(", ")", "{", "checkDiscourseStore", "(", "<NUM_LIT:4>", ",", "o", "(", ")", ",", "s", "(", ")", ")", ";", "checkDiscourseStore", "(", "<NUM_LIT:4>", ",", "o", "(", "\"", "<STR_LIT>", "\"", ")", ",", "s", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "checkDiscourseStore", "(", "<NUM_LIT:4>", ",", "o", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:3>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "s", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:3>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "checkDiscourseStore", "(", "<NUM_LIT:4>", ",", "o", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ",", "\"", "<STR_LIT:3>", "\"", ",", "\"", "<STR_LIT:4>", "\"", ",", "\"", "<STR_LIT:5>", "\"", ")", ",", "s", "(", "\"", "<STR_LIT:2>", "\"", ",", "\"", "<STR_LIT:3>", "\"", ",", "\"", "<STR_LIT:4>", "\"", ",", "\"", "<STR_LIT:5>", "\"", ")", ")", ";", "checkDiscourseStore", "(", "<NUM_LIT:4>", ",", "o", "(", "b", "(", "\"", "<STR_LIT:A>", "\"", ")", ")", ",", "s", "(", "\"", "<STR_LIT:A>", "\"", ")", ")", ";", "checkDiscourseStore", "(", "<NUM_LIT:4>", ",", "o", "(", "b", "(", "\"", "<STR_LIT:A>", "<STR_LIT>", "<STR_LIT:B>", "<STR_LIT>", "<STR_LIT:C>", "\"", ")", ")", ",", "s", "(", "\"", "<STR_LIT:A>", "\"", ",", "\"", "<STR_LIT:B>", "\"", ",", "\"", "<STR_LIT:C>", "\"", ")", ")", ";", "checkDiscourseStore", "(", "<NUM_LIT:4>", ",", "o", "(", "b", "(", "\"", "<STR_LIT:A>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:C>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ")", ",", "s", "(", "\"", "<STR_LIT:A>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:C>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", ";", "checkDiscourseStore", "(", "<NUM_LIT:4>", ",", "o", "(", "\"", "<STR_LIT:1>", "\"", ",", "b", "(", "\"", "<STR_LIT:2>", "\"", ")", ",", "\"", "<STR_LIT:3>", "\"", ",", "b", "(", "\"", "<STR_LIT:4>", "<STR_LIT>", "<STR_LIT:5>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "b", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ")", ",", "s", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkDiscourseStore", "(", "int", "storeSize", ",", "Object", "[", "]", "discource", ",", "String", "[", "]", "expected", ")", "{", "DiscourseLogger", "store", "=", "new", "DiscourseLogger", "(", "storeSize", ")", ";", "for", "(", "Object", "o", ":", "discource", ")", "{", "if", "(", "o", "instanceof", "String", ")", "{", "store", ".", "addSentCommand", "(", "(", "String", ")", "o", ")", ";", "}", "else", "if", "(", "o", "instanceof", "byte", "[", "]", ")", "{", "for", "(", "byte", "b", ":", "(", "byte", "[", "]", ")", "o", ")", "{", "store", ".", "addReceivedByte", "(", "b", ")", ";", "}", "}", "else", "{", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "MoreAsserts", ".", "assertEquals", "(", "expected", ",", "store", ".", "getLines", "(", ")", ")", ";", "store", ".", "logLastDiscourse", "(", ")", ";", "assertEquals", "(", "0", ",", "store", ".", "getLines", "(", ")", ".", "length", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testParseNoMessageId", "(", ")", "throws", "MessagingException", ",", "IOException", "{", "String", "entireMessage", "=", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ";", "MimeMessage", "mm", "=", "null", ";", "mm", "=", "new", "MimeMessage", "(", "new", "ByteArrayInputStream", "(", "entireMessage", ".", "getBytes", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertNull", "(", "mm", ".", "getMessageId", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCrlf", "(", ")", "throws", "IOException", "{", "SimpleIcsWriter", "w", "=", "new", "SimpleIcsWriter", "(", ")", ";", "w", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:A>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:B>", "<STR_LIT>", "<STR_LIT:C>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:D>", "\"", ")", ";", "String", "str", "=", "w", ".", "toString", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:B>", "<STR_LIT:\\\\>", "<STR_LIT:C>", "<STR_LIT:\\\\>", "<STR_LIT:D>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "str", ")", ";", "}", "</s>"]
["<s>", "private", "int", "getInt", "(", "ContentValues", "cv", ",", "String", "column", ")", "{", "Integer", "i", "=", "cv", ".", "getAsInteger", "(", "column", ")", ";", "if", "(", "i", "=", "=", "null", ")", "return", "0", ";", "return", "i", ";", "}", "</s>"]
["<s>", "static", "public", "String", "buildMessageTextFromEntityValues", "(", "Context", "context", ",", "ContentValues", "entityValues", ",", "StringBuilder", "sb", ")", "{", "if", "(", "sb", "=", "=", "null", ")", "{", "sb", "=", "new", "StringBuilder", "(", ")", ";", "}", "Resources", "resources", "=", "context", ".", "getResources", "(", ")", ";", "Date", "date", "=", "new", "Date", "(", "entityValues", ".", "getAsLong", "(", "Events", ".", "DTSTART", ")", ")", ";", "String", "dateTimeString", "=", "DateFormat", ".", "getDateTimeInstance", "(", ")", ".", "format", "(", "date", ")", ";", "sb", ".", "append", "(", "resources", ".", "getString", "(", "R", ".", "string", ".", "meeting_when", ",", "dateTimeString", ")", ")", ";", "String", "location", "=", "null", ";", "if", "(", "entityValues", ".", "containsKey", "(", "Events", ".", "EVENT_LOCATION", ")", ")", "{", "location", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "EVENT_LOCATION", ")", ";", "if", "(", "location", "!", "=", "null", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "sb", ".", "append", "(", "resources", ".", "getString", "(", "R", ".", "string", ".", "meeting_where", ",", "location", ")", ")", ";", "}", "}", "String", "desc", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "DESCRIPTION", ")", ";", "if", "(", "desc", "!", "=", "null", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT:-->", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "sb", ".", "append", "(", "desc", ")", ";", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Entity", "setupTestExceptionEntity", "(", "String", "organizer", ",", "String", "attendee", ",", "String", "title", ")", "{", "Entity", "entity", "=", "setupTestEventEntity", "(", "organizer", ",", "attendee", ",", "title", ")", ";", "ContentValues", "entityValues", "=", "entity", ".", "getEntityValues", "(", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "ORIGINAL_EVENT", ",", "<NUM_LIT>", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "RRULE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "ORIGINAL_INSTANCE_TIME", ",", "Utility", ".", "parseEmailDateTimeToMillis", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "return", "entity", ";", "}", "</s>"]
["<s>", "public", "void", "testCreateMessageForEntity_Exception_Cancel", "(", ")", "throws", "IOException", "{", "String", "attendee", "=", "\"", "<STR_LIT>", "\"", ";", "String", "organizer", "=", "\"", "<STR_LIT>", "\"", ";", "String", "title", "=", "\"", "<STR_LIT>", "\"", ";", "Entity", "entity", "=", "setupTestExceptionEntity", "(", "organizer", ",", "attendee", ",", "title", ")", ";", "ContentValues", "entityValues", "=", "entity", ".", "getEntityValues", "(", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "_SYNC_DIRTY", ",", "1", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "STATUS", ",", "Events", ".", "STATUS_CANCELED", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "RRULE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Account", "account", "=", "new", "Account", "(", ")", ";", "account", ".", "mEmailAddress", "=", "organizer", ";", "String", "uid", "=", "\"", "<STR_LIT>", "\"", ";", "Message", "msg", "=", "CalendarUtilities", ".", "createMessageForEntity", "(", "mContext", ",", "entity", ",", "Message", ".", "FLAG_OUTGOING_MEETING_INVITE", ",", "uid", ",", "account", ")", ";", "assertNotNull", "(", "msg", ")", ";", "assertEquals", "(", "Address", ".", "pack", "(", "new", "Address", "[", "]", "{", "new", "Address", "(", "attendee", ")", "}", ")", ",", "msg", ".", "mTo", ")", ";", "String", "accept", "=", "getContext", "(", ")", ".", "getResources", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "meeting_invitation", ",", "title", ")", ";", "assertEquals", "(", "accept", ",", "msg", ".", "mSubject", ")", ";", "assertNotNull", "(", "msg", ".", "mAttachments", ")", ";", "assertEquals", "(", "1", ",", "msg", ".", "mAttachments", ".", "size", "(", ")", ")", ";", "Attachment", "att", "=", "msg", ".", "mAttachments", ".", "get", "(", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "att", ".", "mFileName", ")", ";", "assertEquals", "(", "Attachment", ".", "FLAG_SUPPRESS_DISPOSITION", ",", "att", ".", "mFlags", "&", "Attachment", ".", "FLAG_SUPPRESS_DISPOSITION", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "att", ".", "mMimeType", ")", ";", "assertNotNull", "(", "att", ".", "mContent", ")", ";", "BlockHash", "vcalendar", "=", "parseIcsContent", "(", "att", ".", "mContent", ")", ";", "assertNotNull", "(", "vcalendar", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vcalendar", ".", "name", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vcalendar", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TimeZone", "timeZone", "=", "TimeZone", ".", "getDefault", "(", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "vcalendar", ".", "blocks", ".", "size", "(", ")", ")", ";", "BlockHash", "vtimezone", "=", "vcalendar", ".", "blocks", ".", "get", "(", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vtimezone", ".", "name", ")", ";", "assertEquals", "(", "timeZone", ".", "getID", "(", ")", ",", "vtimezone", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "BlockHash", "vevent", "=", "vcalendar", ".", "blocks", ".", "get", "(", "1", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "name", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", "+", "organizer", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:0>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "uid", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", "+", "attendee", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "long", "originalTime", "=", "entityValues", ".", "getAsLong", "(", "Events", ".", "ORIGINAL_INSTANCE_TIME", ")", ";", "assertNotSame", "(", "0", ",", "originalTime", ")", ";", "assertEquals", "(", "CalendarUtilities", ".", "millisToEasDateTime", "(", "originalTime", ",", "timeZone", ")", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "timeZone", ".", "getID", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "exceptionParser", "(", "CalendarOperations", "ops", ",", "ContentValues", "parentCv", ",", "ArrayList", "<", "ContentValues", ">", "attendeeValues", ",", "int", "reminderMins", ")", "throws", "IOException", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "Events", ".", "CALENDAR_ID", ",", "mCalendarId", ")", ";", "cv", ".", "put", "(", "Events", ".", "_SYNC_ACCOUNT", ",", "mAccount", ".", "mEmailAddress", ")", ";", "cv", ".", "put", "(", "Events", ".", "_SYNC_ACCOUNT_TYPE", ",", "Email", ".", "EXCHANGE_ACCOUNT_MANAGER_TYPE", ")", ";", "cv", ".", "put", "(", "Events", ".", "ORGANIZER", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "ORGANIZER", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "TITLE", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "TITLE", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "DESCRIPTION", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "DESCRIPTION", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "ORIGINAL_ALL_DAY", ",", "parentCv", ".", "getAsInteger", "(", "Events", ".", "ALL_DAY", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "EVENT_LOCATION", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "EVENT_LOCATION", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "VISIBILITY", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "VISIBILITY", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "ORIGINAL_EVENT", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "_SYNC_ID", ")", ")", ";", "String", "exceptionStartTime", "=", "\"", "<STR_LIT>", "\"", ";", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_APPLICATION_DATA", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "CALENDAR_EXCEPTION_START_TIME", ":", "exceptionStartTime", "=", "getValue", "(", ")", ";", "cv", ".", "put", "(", "Events", ".", "ORIGINAL_INSTANCE_TIME", ",", "Utility", ".", "parseDateTimeToMillis", "(", "exceptionStartTime", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_EXCEPTION_IS_DELETED", ":", "if", "(", "getValueInt", "(", ")", "=", "=", "1", ")", "{", "cv", ".", "put", "(", "Events", ".", "STATUS", ",", "Events", ".", "STATUS_CANCELED", ")", ";", "}", "break", ";", "case", "Tags", ".", "CALENDAR_ALL_DAY_EVENT", ":", "cv", ".", "put", "(", "Events", ".", "ALL_DAY", ",", "getValueInt", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "BASE_BODY", ":", "cv", ".", "put", "(", "Events", ".", "DESCRIPTION", ",", "bodyParser", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_BODY", ":", "cv", ".", "put", "(", "Events", ".", "DESCRIPTION", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_START_TIME", ":", "cv", ".", "put", "(", "Events", ".", "DTSTART", ",", "Utility", ".", "parseDateTimeToMillis", "(", "getValue", "(", ")", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_END_TIME", ":", "cv", ".", "put", "(", "Events", ".", "DTEND", ",", "Utility", ".", "parseDateTimeToMillis", "(", "getValue", "(", ")", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_LOCATION", ":", "cv", ".", "put", "(", "Events", ".", "EVENT_LOCATION", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_RECURRENCE", ":", "String", "rrule", "=", "recurrenceParser", "(", "ops", ")", ";", "if", "(", "rrule", "!", "=", "null", ")", "{", "cv", ".", "put", "(", "Events", ".", "RRULE", ",", "rrule", ")", ";", "}", "break", ";", "case", "Tags", ".", "CALENDAR_SUBJECT", ":", "cv", ".", "put", "(", "Events", ".", "TITLE", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_SENSITIVITY", ":", "cv", ".", "put", "(", "Events", ".", "VISIBILITY", ",", "encodeVisibility", "(", "getValueInt", "(", ")", ")", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "cv", ".", "put", "(", "Events", ".", "_SYNC_ID", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "_SYNC_ID", ")", "+", "<CHAR_LIT:_>", "+", "exceptionStartTime", ")", ";", "if", "(", "!", "cv", ".", "containsKey", "(", "Events", ".", "DTSTART", ")", ")", "{", "cv", ".", "put", "(", "Events", ".", "DTSTART", ",", "parentCv", ".", "getAsLong", "(", "Events", ".", "DTSTART", ")", ")", ";", "}", "if", "(", "!", "cv", ".", "containsKey", "(", "Events", ".", "DTEND", ")", ")", "{", "cv", ".", "put", "(", "Events", ".", "DTEND", ",", "parentCv", ".", "getAsLong", "(", "Events", ".", "DTEND", ")", ")", ";", "}", "int", "exceptionStart", "=", "ops", ".", "mCount", ";", "ops", ".", "newException", "(", "cv", ")", ";", "for", "(", "ContentValues", "attValues", ":", "attendeeValues", ")", "{", "ops", ".", "newAttendee", "(", "attValues", ",", "exceptionStart", ")", ";", "}", "if", "(", "reminderMins", ">", "0", ")", "{", "ops", ".", "newReminder", "(", "reminderMins", ",", "exceptionStart", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "exceptionsParser", "(", "CalendarOperations", "ops", ",", "ContentValues", "cv", ",", "ArrayList", "<", "ContentValues", ">", "attendeeValues", ",", "int", "reminderMins", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "CALENDAR_EXCEPTIONS", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "CALENDAR_EXCEPTION", ":", "exceptionParser", "(", "ops", ",", "cv", ",", "attendeeValues", ",", "reminderMins", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "newAttendee", "(", "ContentValues", "cv", ",", "int", "eventStart", ")", "{", "add", "(", "ContentProviderOperation", ".", "newInsert", "(", "sAttendeesUri", ")", ".", "withValues", "(", "cv", ")", ".", "withValueBackReference", "(", "Attendees", ".", "EVENT_ID", ",", "eventStart", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "newReminder", "(", "int", "mins", ",", "int", "eventStart", ")", "{", "add", "(", "ContentProviderOperation", ".", "newInsert", "(", "sRemindersUri", ")", ".", "withValue", "(", "Reminders", ".", "MINUTES", ",", "mins", ")", ".", "withValue", "(", "Reminders", ".", "METHOD", ",", "Reminders", ".", "METHOD_DEFAULT", ")", ".", "withValueBackReference", "(", "ExtendedProperties", ".", "EVENT_ID", ",", "eventStart", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "int", "newDelete", "(", "long", "id", ",", "String", "serverId", ")", "{", "int", "offset", "=", "mCount", ";", "delete", "(", "id", ",", "serverId", ")", ";", "return", "offset", ";", "}", "</s>"]
["<s>", "public", "void", "delete", "(", "long", "id", ",", "String", "syncId", ")", "{", "add", "(", "ContentProviderOperation", ".", "newDelete", "(", "ContentUris", ".", "withAppendedId", "(", "sEventsUri", ",", "id", ")", ")", ".", "build", "(", ")", ")", ";", "add", "(", "ContentProviderOperation", ".", "newDelete", "(", "sEventsUri", ")", ".", "withSelection", "(", "Events", ".", "ORIGINAL_EVENT", "+", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "syncId", "}", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "toUtf8", "(", "String", "s", ")", "{", "if", "(", "s", "=", "=", "null", ")", "{", "return", "null", ";", "}", "final", "ByteBuffer", "buffer", "=", "UTF_8", ".", "encode", "(", "CharBuffer", ".", "wrap", "(", "s", ")", ")", ";", "final", "byte", "[", "]", "bytes", "=", "new", "byte", "[", "buffer", ".", "limit", "(", ")", "]", ";", "buffer", ".", "get", "(", "bytes", ")", ";", "return", "bytes", ";", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "b", "(", "int", ".", ".", ".", "array", ")", "{", "if", "(", "array", "=", "=", "null", ")", "{", "return", "null", ";", "}", "byte", "[", "]", "ret", "=", "new", "byte", "[", "array", ".", "length", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "ret", ".", "length", ";", "i", "+", "+", ")", "{", "ret", "[", "i", "]", "=", "(", "byte", ")", "array", "[", "i", "]", ";", "}", "return", "ret", ";", "}", "</s>"]
["<s>", "public", "static", "String", "fromUtf8", "(", "byte", "[", "]", "b", ")", "{", "if", "(", "b", "=", "=", "null", ")", "{", "return", "null", ";", "}", "final", "CharBuffer", "cb", "=", "Utility", ".", "UTF_8", ".", "decode", "(", "ByteBuffer", ".", "wrap", "(", "b", ")", ")", ";", "return", "new", "String", "(", "cb", ".", "array", "(", ")", ",", "0", ",", "cb", ".", "length", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testUtf8", "(", ")", "{", "assertNull", "(", "fromUtf8", "(", "null", ")", ")", ";", "assertEquals", "(", "\"", "\"", ",", "fromUtf8", "(", "new", "byte", "[", "]", "{", "}", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "fromUtf8", "(", "b", "(", "<CHAR_LIT:a>", ")", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "fromUtf8", "(", "b", "(", "<CHAR_LIT:A>", ",", "<CHAR_LIT>", ",", "<CHAR_LIT>", ")", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "fromUtf8", "(", "b", "(", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testUtf8", "(", ")", "{", "assertNull", "(", "Utility", ".", "toUtf8", "(", "null", ")", ")", ";", "MoreAsserts", ".", "assertEquals", "(", "new", "byte", "[", "]", "{", "}", ",", "Utility", ".", "toUtf8", "(", "\"", "\"", ")", ")", ";", "MoreAsserts", ".", "assertEquals", "(", "TestUtils", ".", "b", "(", "<CHAR_LIT:a>", ")", ",", "Utility", ".", "toUtf8", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "MoreAsserts", ".", "assertEquals", "(", "TestUtils", ".", "b", "(", "<CHAR_LIT:A>", ",", "<CHAR_LIT>", ",", "<CHAR_LIT>", ")", ",", "Utility", ".", "toUtf8", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "MoreAsserts", ".", "assertEquals", "(", "TestUtils", ".", "b", "(", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ",", "Utility", ".", "toUtf8", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "private", "BlockHash", "parseIcsContent", "(", "byte", "[", "]", "bytes", ")", "throws", "IOException", "{", "BufferedReader", "reader", "=", "new", "BufferedReader", "(", "new", "StringReader", "(", "TestUtils", ".", "fromUtf8", "(", "bytes", ")", ")", ")", ";", "String", "line", "=", "reader", ".", "readLine", "(", ")", ";", "if", "(", "!", "line", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", ")", ";", "}", "return", "new", "BlockHash", "(", "\"", "<STR_LIT>", "\"", ",", "reader", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "private", "void", "setupAddressAdapters", "(", ")", "{", "if", "(", "true", ")", "{", "mAddressAdapterTo", "=", "new", "GalEmailAddressAdapter", "(", "this", ",", "mToView", ")", ";", "mAddressAdapterCc", "=", "new", "GalEmailAddressAdapter", "(", "this", ",", "mCcView", ")", ";", "mAddressAdapterBcc", "=", "new", "GalEmailAddressAdapter", "(", "this", ",", "mBccView", ")", ";", "}", "else", "{", "mAddressAdapterTo", "=", "new", "EmailAddressAdapter", "(", "this", ")", ";", "mAddressAdapterCc", "=", "new", "EmailAddressAdapter", "(", "this", ")", ";", "mAddressAdapterBcc", "=", "new", "EmailAddressAdapter", "(", "this", ")", ";", "}", "}", "</s>"]
["<s>", "static", "public", "GalResult", "searchGal", "(", "Context", "context", ",", "long", "accountId", ",", "String", "filter", ")", "{", "Account", "acct", "=", "SyncManager", ".", "getAccountList", "(", ")", ".", "getById", "(", "accountId", ")", ";", "if", "(", "acct", "!", "=", "null", ")", "{", "HostAuth", "ha", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "context", ",", "acct", ".", "mHostAuthKeyRecv", ")", ";", "try", "{", "EasSyncService", "svc", "=", "new", "EasSyncService", "(", "\"", "<STR_LIT>", "\"", ")", ";", "svc", ".", "mContext", "=", "context", ";", "svc", ".", "mHostAddress", "=", "ha", ".", "mAddress", ";", "svc", ".", "mUserName", "=", "ha", ".", "mLogin", ";", "svc", ".", "mPassword", "=", "ha", ".", "mPassword", ";", "svc", ".", "mSsl", "=", "(", "ha", ".", "mFlags", "&", "HostAuth", ".", "FLAG_SSL", ")", "!", "=", "0", ";", "svc", ".", "mTrustSsl", "=", "(", "ha", ".", "mFlags", "&", "HostAuth", ".", "FLAG_TRUST_ALL_CERTIFICATES", ")", "!", "=", "0", ";", "svc", ".", "mDeviceId", "=", "SyncManager", ".", "getDeviceId", "(", ")", ";", "Serializer", "s", "=", "new", "Serializer", "(", ")", ";", "s", ".", "start", "(", "Tags", ".", "SEARCH_SEARCH", ")", ".", "start", "(", "Tags", ".", "SEARCH_STORE", ")", ";", "s", ".", "data", "(", "Tags", ".", "SEARCH_NAME", ",", "\"", "<STR_LIT>", "\"", ")", ".", "data", "(", "Tags", ".", "SEARCH_QUERY", ",", "filter", ")", ";", "s", ".", "start", "(", "Tags", ".", "SEARCH_OPTIONS", ")", ";", "s", ".", "data", "(", "Tags", ".", "SEARCH_RANGE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "s", ".", "end", "(", ")", ".", "end", "(", ")", ".", "end", "(", ")", ".", "done", "(", ")", ";", "svc", ".", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "ha", ".", "mAddress", ")", ";", "HttpResponse", "resp", "=", "svc", ".", "sendHttpClientPost", "(", "\"", "<STR_LIT>", "\"", ",", "s", ".", "toByteArray", "(", ")", ")", ";", "int", "code", "=", "resp", ".", "getStatusLine", "(", ")", ".", "getStatusCode", "(", ")", ";", "svc", ".", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "code", ")", ";", "if", "(", "code", "=", "=", "HttpStatus", ".", "SC_OK", ")", "{", "InputStream", "is", "=", "resp", ".", "getEntity", "(", ")", ".", "getContent", "(", ")", ";", "GalParser", "gp", "=", "new", "GalParser", "(", "is", ",", "svc", ")", ";", "if", "(", "gp", ".", "parse", "(", ")", ")", "{", "svc", ".", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "ha", ".", "mAddress", ")", ";", "return", "gp", ".", "getGalResult", "(", ")", ";", "}", "}", "}", "catch", "(", "IOException", "e", ")", "{", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "GalResult", "getGalResult", "(", ")", "{", "return", "mGalResult", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "parse", "(", ")", "throws", "IOException", "{", "if", "(", "nextTag", "(", "START_DOCUMENT", ")", "!", "=", "Tags", ".", "SEARCH_SEARCH", ")", "{", "throw", "new", "IOException", "(", ")", ";", "}", "while", "(", "nextTag", "(", "START_DOCUMENT", ")", "!", "=", "END_DOCUMENT", ")", "{", "if", "(", "tag", "=", "=", "Tags", ".", "SEARCH_RESPONSE", ")", "{", "parseResponse", "(", "mGalResult", ")", ";", "}", "else", "{", "skipTag", "(", ")", ";", "}", "}", "return", "mGalResult", ".", "total", ">", "0", ";", "}", "</s>"]
["<s>", "public", "void", "parseProperties", "(", "GalResult", "galResult", ")", "throws", "IOException", "{", "String", "displayName", "=", "null", ";", "String", "email", "=", "null", ";", "while", "(", "nextTag", "(", "Tags", ".", "SEARCH_STORE", ")", "!", "=", "END", ")", "{", "if", "(", "tag", "=", "=", "Tags", ".", "GAL_DISPLAY_NAME", ")", "{", "displayName", "=", "getValue", "(", ")", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "GAL_EMAIL_ADDRESS", ")", "{", "email", "=", "getValue", "(", ")", ";", "}", "else", "{", "skipTag", "(", ")", ";", "}", "}", "if", "(", "displayName", "!", "=", "null", "&", "&", "email", "!", "=", "null", ")", "{", "galResult", ".", "addGalData", "(", "0", ",", "displayName", ",", "email", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "parseResult", "(", "GalResult", "galResult", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "SEARCH_STORE", ")", "!", "=", "END", ")", "{", "if", "(", "tag", "=", "=", "Tags", ".", "SEARCH_PROPERTIES", ")", "{", "parseProperties", "(", "galResult", ")", ";", "}", "else", "{", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "parseResponse", "(", "GalResult", "galResult", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "SEARCH_RESPONSE", ")", "!", "=", "END", ")", "{", "if", "(", "tag", "=", "=", "Tags", ".", "SEARCH_STORE", ")", "{", "parseStore", "(", "galResult", ")", ";", "}", "else", "{", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "parseStore", "(", "GalResult", "galResult", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "SEARCH_STORE", ")", "!", "=", "END", ")", "{", "if", "(", "tag", "=", "=", "Tags", ".", "SEARCH_RESULT", ")", "{", "parseResult", "(", "galResult", ")", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "SEARCH_RANGE", ")", "{", "mService", ".", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "getValue", "(", ")", ")", ";", "}", "else", "if", "(", "tag", "=", "=", "Tags", ".", "SEARCH_TOTAL", ")", "{", "galResult", ".", "total", "=", "getValueInt", "(", ")", ";", "}", "else", "{", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "static", "void", "addGalDataRow", "(", "MatrixCursor", "mc", ",", "long", "id", ",", "String", "name", ",", "String", "address", ")", "{", "mc", ".", "newRow", "(", ")", ".", "add", "(", "id", ")", ".", "add", "(", "name", ")", ".", "add", "(", "address", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Cursor", "query", "(", "Uri", "uri", ",", "String", "[", "]", "projection", ",", "String", "selection", ",", "String", "[", "]", "selectionArgs", ",", "String", "sortOrder", ")", "{", "int", "match", "=", "sURIMatcher", ".", "match", "(", "uri", ")", ";", "switch", "(", "match", ")", "{", "case", "GAL_FILTER", ":", "long", "accountId", "=", "-", "1", ";", "MatrixCursor", "c", "=", "new", "MatrixCursor", "(", "GAL_PROJECTION", ")", ";", "String", "accountIdString", "=", "uri", ".", "getPathSegments", "(", ")", ".", "get", "(", "1", ")", ";", "String", "filter", "=", "uri", ".", "getPathSegments", "(", ")", ".", "get", "(", "<NUM_LIT:2>", ")", ";", "String", "time", "=", "uri", ".", "getPathSegments", "(", ")", ".", "get", "(", "<NUM_LIT:3>", ")", ";", "try", "{", "accountId", "=", "Long", ".", "parseLong", "(", "accountIdString", ")", ";", "sQueryTimeStamp", "=", "Long", ".", "parseLong", "(", "time", ")", ";", "}", "catch", "(", "NumberFormatException", "e", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "long", "timeStamp", "=", "sQueryTimeStamp", ";", "GalResult", "galResult", "=", "EasSyncService", ".", "searchGal", "(", "getContext", "(", ")", ",", "accountId", ",", "filter", ")", ";", "if", "(", "timeStamp", "!", "=", "sQueryTimeStamp", ")", "{", "Log", ".", "d", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "uri", ")", ";", "return", "null", ";", "}", "else", "if", "(", "galResult", "!", "=", "null", ")", "{", "int", "count", "=", "galResult", ".", "galData", ".", "size", "(", ")", ";", "Log", ".", "d", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "count", "+", "\"", "<STR_LIT>", "\"", ")", ";", "String", "header", "=", "(", "count", "=", "=", "0", ")", "?", "\"", "<STR_LIT>", "\"", ":", "(", "count", "=", "=", "1", ")", "?", "\"", "<STR_LIT>", "\"", ":", "count", "+", "\"", "<STR_LIT>", "\"", ";", "if", "(", "galResult", ".", "total", "!", "=", "count", ")", "{", "header", "+", "=", "\"", "<STR_LIT>", "\"", "+", "galResult", ".", "total", "+", "\"", "<STR_LIT:)>", "\"", ";", "}", "addGalDataRow", "(", "c", ",", "GAL_START_ID", ",", "header", ",", "\"", "\"", ")", ";", "int", "i", "=", "1", ";", "for", "(", "GalData", "data", ":", "galResult", ".", "galData", ")", "{", "addGalDataRow", "(", "c", ",", "data", ".", "_id", "|", "GAL_START_ID", "+", "i", ",", "data", ".", "displayName", ",", "data", ".", "emailAddress", ")", ";", "i", "+", "+", ";", "}", "}", "return", "c", ";", "default", ":", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "uri", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "delete", "(", "Uri", "uri", ",", "String", "selection", ",", "String", "[", "]", "selectionArgs", ")", "{", "return", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getType", "(", "Uri", "uri", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "onCreate", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "update", "(", "Uri", "uri", ",", "ContentValues", "values", ",", "String", "selection", ",", "String", "[", "]", "selectionArgs", ")", "{", "return", "-", "1", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "setAccount", "(", "Account", "account", ")", "{", "mAccount", "=", "account", ";", "mAccountHasGal", "=", "false", ";", "}", "</s>"]
["<s>", "public", "static", "Cursor", "getProgressCursor", "(", ")", "{", "MatrixCursor", "c", "=", "new", "MatrixCursor", "(", "ExchangeProvider", ".", "GAL_PROJECTION", ")", ";", "c", ".", "newRow", "(", ")", ".", "add", "(", "ExchangeProvider", ".", "GAL_START_ID", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ".", "add", "(", "SEARCHING_TAG", ")", ";", "return", "c", ";", "}", "</s>"]
["<s>", "private", "void", "checkGalAccount", "(", "Account", "account", ")", "{", "HostAuth", "ha", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "mActivity", ",", "account", ".", "mHostAuthKeyRecv", ")", ";", "if", "(", "ha", "!", "=", "null", ")", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "ha", ".", "mProtocol", ")", ")", "{", "mAccountHasGal", "=", "true", ";", "return", ";", "}", "}", "mAccount", "=", "null", ";", "mAccountHasGal", "=", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Cursor", "runQueryOnBackgroundThread", "(", "final", "CharSequence", "constraint", ")", "{", "if", "(", "mAccount", "!", "=", "null", "&", "&", "mAccountHasGal", "=", "=", "false", ")", "{", "checkGalAccount", "(", "mAccount", ")", ";", "}", "Cursor", "initialCursor", "=", "super", ".", "runQueryOnBackgroundThread", "(", "constraint", ")", ";", "if", "(", "mAccountHasGal", "&", "&", "constraint", "!", "=", "null", "&", "&", "constraint", ".", "length", "(", ")", ">", "=", "MINIMUM_GAL_CONSTRAINT_LENGTH", ")", "{", "MergeCursor", "mc", "=", "new", "MergeCursor", "(", "new", "Cursor", "[", "]", "{", "initialCursor", ",", "getProgressCursor", "(", ")", "}", ")", ";", "final", "Cursor", "contactsCursor", "=", "super", ".", "runQueryOnBackgroundThread", "(", "constraint", ")", ";", "new", "Thread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "Uri", "galUri", "=", "ExchangeProvider", ".", "GAL_URI", ".", "buildUpon", "(", ")", ".", "appendPath", "(", "Long", ".", "toString", "(", "mAccount", ".", "mId", ")", ")", ".", "appendPath", "(", "constraint", ".", "toString", "(", ")", ")", ".", "appendPath", "(", "(", "(", "Long", ")", "System", ".", "currentTimeMillis", "(", ")", ")", ".", "toString", "(", ")", ")", ".", "build", "(", ")", ";", "Log", ".", "d", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "galUri", ")", ";", "final", "Cursor", "galCursor", "=", "mContentResolver", ".", "query", "(", "galUri", ",", "ExchangeProvider", ".", "GAL_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "if", "(", "galCursor", "=", "=", "null", ")", "return", ";", "mActivity", ".", "runOnUiThread", "(", "new", "Runnable", "(", ")", "{", "public", "void", "run", "(", ")", "{", "MergeCursor", "mergeCursor", "=", "new", "MergeCursor", "(", "new", "Cursor", "[", "]", "{", "contactsCursor", ",", "galCursor", "}", ")", ";", "changeCursor", "(", "mergeCursor", ")", ";", "mAutoCompleteTextView", ".", "onFilterComplete", "(", "mergeCursor", ".", "getCount", "(", ")", ")", ";", "}", "}", ")", ";", "}", "}", ")", ".", "start", "(", ")", ";", "return", "mc", ";", "}", "return", "initialCursor", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "MergeCursor", "mergeCursor", "=", "new", "MergeCursor", "(", "new", "Cursor", "[", "]", "{", "contactsCursor", ",", "galCursor", "}", ")", ";", "changeCursor", "(", "mergeCursor", ")", ";", "mAutoCompleteTextView", ".", "onFilterComplete", "(", "mergeCursor", ".", "getCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "final", "void", "bindView", "(", "View", "view", ",", "Context", "context", ",", "Cursor", "cursor", ")", "{", "if", "(", "cursor", ".", "getLong", "(", "ID_INDEX", ")", "=", "=", "ExchangeProvider", ".", "GAL_START_ID", ")", "{", "(", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "account", ")", ")", ".", "setText", "(", "cursor", ".", "getString", "(", "NAME_INDEX", ")", ")", ";", "view", ".", "findViewById", "(", "R", ".", "id", ".", "status_divider", ")", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "view", ".", "findViewById", "(", "R", ".", "id", ".", "address", ")", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "view", ".", "findViewById", "(", "R", ".", "id", ".", "progress", ")", ".", "setVisibility", "(", "cursor", ".", "getString", "(", "DATA_INDEX", ")", ".", "equals", "(", "SEARCHING_TAG", ")", "?", "View", ".", "VISIBLE", ":", "View", ".", "GONE", ")", ";", "}", "else", "{", "(", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "text1", ")", ")", ".", "setText", "(", "cursor", ".", "getString", "(", "NAME_INDEX", ")", ")", ";", "(", "(", "TextView", ")", "view", ".", "findViewById", "(", "R", ".", "id", ".", "text2", ")", ")", ".", "setText", "(", "cursor", ".", "getString", "(", "DATA_INDEX", ")", ")", ";", "view", ".", "findViewById", "(", "R", ".", "id", ".", "address", ")", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "view", ".", "findViewById", "(", "R", ".", "id", ".", "status_divider", ")", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "addGalData", "(", "long", "id", ",", "String", "displayName", ",", "String", "emailAddress", ")", "{", "galData", ".", "add", "(", "new", "GalData", "(", "id", ",", "displayName", ",", "emailAddress", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "quoteParamValue", "(", "String", "paramValue", ")", "{", "if", "(", "paramValue", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "\"", "<STR_LIT:\\\">", "\"", "+", "paramValue", ".", "replace", "(", "\"", "<STR_LIT:\\\">", "\"", ",", "\"", "\"", ")", "+", "\"", "<STR_LIT:\\\">", "\"", ";", "}", "</s>"]
["<s>", "public", "void", "testQuoteParamValue", "(", ")", "{", "assertNull", "(", "SimpleIcsWriter", ".", "quoteParamValue", "(", "null", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "\"", ",", "SimpleIcsWriter", ".", "quoteParamValue", "(", "\"", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "SimpleIcsWriter", ".", "quoteParamValue", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT:\\\">", "\"", ",", "SimpleIcsWriter", ".", "quoteParamValue", "(", "\"", "<STR_LIT:\\\">", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "SimpleIcsWriter", ".", "quoteParamValue", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "SimpleIcsWriter", ".", "quoteParamValue", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setExtras", "(", "Bundle", "extras", ")", "{", "mExtras", "=", "extras", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Bundle", "getExtras", "(", ")", "{", "return", "mExtras", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "View", "getView", "(", "int", "position", ",", "View", "convertView", ",", "ViewGroup", "parent", ")", "{", "if", "(", "position", "=", "=", "mSeparatorPosition", ")", "{", "View", "separator", ";", "separator", "=", "mInflater", ".", "inflate", "(", "R", ".", "layout", ".", "recipient_dropdown_separator", ",", "parent", ",", "false", ")", ";", "TextView", "text1", "=", "(", "TextView", ")", "separator", ".", "findViewById", "(", "R", ".", "id", ".", "text1", ")", ";", "View", "progress", "=", "separator", ".", "findViewById", "(", "R", ".", "id", ".", "progress", ")", ";", "if", "(", "mSeparatorDisplayCount", "=", "=", "-", "1", ")", "{", "text1", ".", "setText", "(", "\"", "<STR_LIT>", "\"", "+", "mAccountEmailDomain", ")", ";", "progress", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "else", "{", "if", "(", "mSeparatorDisplayCount", "=", "=", "mSeparatorTotalCount", ")", "{", "text1", ".", "setText", "(", "mSeparatorDisplayCount", "+", "\"", "<STR_LIT>", "\"", "+", "mAccountEmailDomain", ")", ";", "}", "else", "{", "text1", ".", "setText", "(", "\"", "<STR_LIT>", "\"", "+", "mSeparatorTotalCount", "+", "\"", "<STR_LIT>", "\"", "+", "mAccountEmailDomain", ")", ";", "}", "progress", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "}", "return", "separator", ";", "}", "return", "super", ".", "getView", "(", "getRealPosition", "(", "position", ")", ",", "convertView", ",", "parent", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getCount", "(", ")", "{", "int", "count", "=", "super", ".", "getCount", "(", ")", ";", "if", "(", "mSeparatorPosition", "!", "=", "ListView", ".", "INVALID_POSITION", ")", "{", "count", "+", "=", "1", ";", "}", "return", "count", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "getItemId", "(", "int", "pos", ")", "{", "if", "(", "pos", "=", "=", "mSeparatorPosition", ")", "{", "return", "View", ".", "NO_ID", ";", "}", "return", "super", ".", "getItemId", "(", "getRealPosition", "(", "pos", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "synchronized", "void", "close", "(", ")", "{", "super", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "synchronized", "boolean", "isClosed", "(", ")", "{", "return", "super", ".", "isClosed", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testBuildMessageTextFromEntityValues", "(", ")", "{", "String", "title", "=", "\"", "<STR_LIT>", "\"", ";", "Entity", "entity", "=", "setupTestEventEntity", "(", "ORGANIZER", ",", "ATTENDEE", ",", "title", ")", ";", "ContentValues", "entityValues", "=", "entity", ".", "getEntityValues", "(", ")", ";", "Resources", "resources", "=", "mContext", ".", "getResources", "(", ")", ";", "Date", "date", "=", "new", "Date", "(", "entityValues", ".", "getAsLong", "(", "Events", ".", "DTSTART", ")", ")", ";", "String", "dateTimeString", "=", "DateFormat", ".", "getDateTimeInstance", "(", ")", ".", "format", "(", "date", ")", ";", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "CalendarUtilities", ".", "buildMessageTextFromEntityValues", "(", "mContext", ",", "entityValues", ",", "sb", ")", ";", "String", "text", "=", "sb", ".", "toString", "(", ")", ";", "assertTrue", "(", "text", ".", "contains", "(", "resources", ".", "getString", "(", "R", ".", "string", ".", "meeting_when", ",", "dateTimeString", ")", ")", ")", ";", "String", "location", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "EVENT_LOCATION", ")", ";", "assertTrue", "(", "text", ".", "contains", "(", "resources", ".", "getString", "(", "R", ".", "string", ".", "meeting_where", ",", "location", ")", ")", ")", ";", "entity", ".", "getEntityValues", "(", ")", ".", "put", "(", "Events", ".", "RRULE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "sb", "=", "new", "StringBuilder", "(", ")", ";", "CalendarUtilities", ".", "buildMessageTextFromEntityValues", "(", "mContext", ",", "entityValues", ",", "sb", ")", ";", "text", "=", "sb", ".", "toString", "(", ")", ";", "assertTrue", "(", "text", ".", "contains", "(", "resources", ".", "getString", "(", "R", ".", "string", ".", "meeting_recurring", ",", "dateTimeString", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "sendMeetingResponseMail", "(", "Message", "msg", ",", "int", "response", ")", "{", "PackedString", "meetingInfo", "=", "new", "PackedString", "(", "msg", ".", "mMeetingInfo", ")", ";", "if", "(", "meetingInfo", "=", "=", "null", ")", "return", ";", "Address", "[", "]", "addrs", "=", "Address", ".", "parse", "(", "meetingInfo", ".", "get", "(", "MeetingInfo", ".", "MEETING_ORGANIZER_EMAIL", ")", ")", ";", "if", "(", "addrs", ".", "length", "!", "=", "1", ")", "return", ";", "String", "organizerEmail", "=", "addrs", "[", "0", "]", ".", "getAddress", "(", ")", ";", "String", "dtStamp", "=", "meetingInfo", ".", "get", "(", "MeetingInfo", ".", "MEETING_DTSTAMP", ")", ";", "String", "dtStart", "=", "meetingInfo", ".", "get", "(", "MeetingInfo", ".", "MEETING_DTSTART", ")", ";", "String", "dtEnd", "=", "meetingInfo", ".", "get", "(", "MeetingInfo", ".", "MEETING_DTEND", ")", ";", "ContentValues", "entityValues", "=", "new", "ContentValues", "(", ")", ";", "Entity", "entity", "=", "new", "Entity", "(", "entityValues", ")", ";", "entityValues", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "CalendarUtilities", ".", "convertEmailDateTimeToCalendarDateTime", "(", "dtStamp", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "DTSTART", ",", "Utility", ".", "parseEmailDateTimeToMillis", "(", "dtStart", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "DTEND", ",", "Utility", ".", "parseEmailDateTimeToMillis", "(", "dtEnd", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "EVENT_LOCATION", ",", "meetingInfo", ".", "get", "(", "MeetingInfo", ".", "MEETING_LOCATION", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "TITLE", ",", "meetingInfo", ".", "get", "(", "MeetingInfo", ".", "MEETING_TITLE", ")", ")", ";", "entityValues", ".", "put", "(", "Events", ".", "ORGANIZER", ",", "organizerEmail", ")", ";", "ContentValues", "attendeeValues", "=", "new", "ContentValues", "(", ")", ";", "attendeeValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_RELATIONSHIP", ",", "Attendees", ".", "RELATIONSHIP_ATTENDEE", ")", ";", "attendeeValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_EMAIL", ",", "mAccount", ".", "mEmailAddress", ")", ";", "entity", ".", "addSubValue", "(", "Attendees", ".", "CONTENT_URI", ",", "attendeeValues", ")", ";", "ContentValues", "organizerValues", "=", "new", "ContentValues", "(", ")", ";", "organizerValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_RELATIONSHIP", ",", "Attendees", ".", "RELATIONSHIP_ORGANIZER", ")", ";", "organizerValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_EMAIL", ",", "organizerEmail", ")", ";", "entity", ".", "addSubValue", "(", "Attendees", ".", "CONTENT_URI", ",", "organizerValues", ")", ";", "int", "flag", ";", "switch", "(", "response", ")", "{", "case", "EmailServiceConstants", ".", "MEETING_REQUEST_ACCEPTED", ":", "flag", "=", "Message", ".", "FLAG_OUTGOING_MEETING_ACCEPT", ";", "break", ";", "case", "EmailServiceConstants", ".", "MEETING_REQUEST_DECLINED", ":", "flag", "=", "Message", ".", "FLAG_OUTGOING_MEETING_DECLINE", ";", "break", ";", "case", "EmailServiceConstants", ".", "MEETING_REQUEST_TENTATIVE", ":", "default", ":", "flag", "=", "Message", ".", "FLAG_OUTGOING_MEETING_TENTATIVE", ";", "break", ";", "}", "Message", "outgoingMsg", "=", "CalendarUtilities", ".", "createMessageForEntity", "(", "mContext", ",", "entity", ",", "flag", ",", "meetingInfo", ".", "get", "(", "MeetingInfo", ".", "MEETING_UID", ")", ",", "mAccount", ")", ";", "if", "(", "outgoingMsg", "!", "=", "null", ")", "{", "EasOutboxService", ".", "sendMessage", "(", "mContext", ",", "mAccount", ".", "mId", ",", "outgoingMsg", ")", ";", "}", "}", "</s>"]
["<s>", "private", "int", "getSeparatorPosition", "(", ")", "{", "Cursor", "c", "=", "this", ".", "getCursor", "(", ")", ";", "if", "(", "c", "instanceof", "MyMergeCursor", ")", "{", "return", "(", "(", "MyMergeCursor", ")", "c", ")", ".", "getSeparatorPosition", "(", ")", ";", "}", "else", "{", "return", "ListView", ".", "INVALID_POSITION", ";", "}", "}", "</s>"]
["<s>", "void", "setSeparatorPosition", "(", "int", "newPos", ")", "{", "mSeparatorPosition", "=", "newPos", ";", "}", "</s>"]
["<s>", "int", "getSeparatorPosition", "(", ")", "{", "return", "mSeparatorPosition", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isFirstUtf8Byte", "(", "byte", "b", ")", "{", "return", "(", "b", "&", "<NUM_LIT>", ")", "!", "=", "<NUM_LIT>", ";", "}", "</s>"]
["<s>", "void", "writeLine", "(", "String", "string", ")", "{", "int", "numBytes", "=", "0", ";", "for", "(", "byte", "b", ":", "Utility", ".", "toUtf8", "(", "string", ")", ")", "{", "if", "(", "numBytes", ">", "(", "MAX_LINE_LENGTH", "-", "CHAR_MAX_BYTES_IN_UTF8", ")", "&", "&", "Utility", ".", "isFirstUtf8Byte", "(", "b", ")", ")", "{", "mOut", ".", "write", "(", "(", "byte", ")", "<STR_LIT>", ")", ";", "mOut", ".", "write", "(", "(", "byte", ")", "<STR_LIT:\\n>", ")", ";", "mOut", ".", "write", "(", "(", "byte", ")", "<STR_LIT:\\t>", ")", ";", "numBytes", "=", "1", ";", "}", "mOut", ".", "write", "(", "b", ")", ";", "numBytes", "+", "+", ";", "}", "mOut", ".", "write", "(", "(", "byte", ")", "<STR_LIT>", ")", ";", "mOut", ".", "write", "(", "(", "byte", ")", "<STR_LIT:\\n>", ")", ";", "}", "</s>"]
["<s>", "public", "byte", "[", "]", "getBytes", "(", ")", "{", "try", "{", "mOut", ".", "flush", "(", ")", ";", "}", "catch", "(", "IOException", "wonthappen", ")", "{", "}", "return", "mOut", ".", "toByteArray", "(", ")", ";", "}", "</s>"]
["<s>", "static", "String", "escapeTextValue", "(", "String", "s", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", "s", ".", "length", "(", ")", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "s", ".", "length", "(", ")", ";", "i", "+", "+", ")", "{", "char", "ch", "=", "s", ".", "charAt", "(", "i", ")", ";", "if", "(", "ch", "=", "=", "<STR_LIT:\\n>", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "ch", "=", "=", "<STR_LIT>", ")", "{", "}", "else", "if", "(", "ch", "=", "=", "<CHAR_LIT:U+002C>", "|", "|", "ch", "=", "=", "<CHAR_LIT:;>", "|", "|", "ch", "=", "=", "<STR_LIT:\\\\>", ")", "{", "sb", ".", "append", "(", "<STR_LIT:\\\\>", ")", ";", "sb", ".", "append", "(", "ch", ")", ";", "}", "else", "{", "sb", ".", "append", "(", "ch", ")", ";", "}", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testIsFirstUtf8Byte", "(", ")", "{", "checkIsFirstUtf8Byte", "(", "\"", "<STR_LIT:0>", "\"", ")", ";", "checkIsFirstUtf8Byte", "(", "\"", "<STR_LIT:A>", "\"", ")", ";", "checkIsFirstUtf8Byte", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "checkIsFirstUtf8Byte", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "checkIsFirstUtf8Byte", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkIsFirstUtf8Byte", "(", "String", "aChar", ")", "{", "byte", "[", "]", "bytes", "=", "Utility", ".", "toUtf8", "(", "aChar", ")", ";", "assertTrue", "(", "\"", "<STR_LIT:0>", "\"", ",", "Utility", ".", "isFirstUtf8Byte", "(", "bytes", "[", "0", "]", ")", ")", ";", "for", "(", "int", "i", "=", "1", ";", "i", "<", "bytes", ".", "length", ";", "i", "+", "+", ")", "{", "assertFalse", "(", "Integer", ".", "toString", "(", "i", ")", ",", "Utility", ".", "isFirstUtf8Byte", "(", "bytes", "[", "i", "]", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testWriteTag", "(", ")", "{", "final", "SimpleIcsWriter", "ics", "=", "new", "SimpleIcsWriter", "(", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "final", "String", "actual", "=", "TestUtils", ".", "fromUtf8", "(", "ics", ".", "getBytes", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", "+", "CRLF", "+", "\"", "<STR_LIT>", "\"", "+", "CRLF", "+", "\"", "<STR_LIT>", "\"", "+", "CRLF", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:U+002C>", "<STR_LIT:\\\\>", "<STR_LIT:;>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "CRLF", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", "+", "CRLF", ",", "actual", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testWriteLine", "(", ")", "{", "for", "(", "String", "last", ":", "new", "String", "[", "]", "{", "UTF8_1_BYTE", ",", "UTF8_2_BYTES", ",", "UTF8_3_BYTES", ",", "UTF8_4_BYTES", "}", ")", "{", "for", "(", "int", "i", "=", "<NUM_LIT>", ";", "i", "<", "<NUM_LIT>", ";", "i", "+", "+", ")", "{", "String", "input", "=", "stringOfLength", "(", "i", ")", "+", "last", ";", "checkWriteLine", "(", "input", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "static", "String", "stringOfLength", "(", "int", "length", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "length", ";", "i", "+", "+", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:0>", "+", "(", "i", "%", "<NUM_LIT:10>", ")", ")", ";", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkWriteLine", "(", "String", "input", ")", "{", "final", "SimpleIcsWriter", "ics", "=", "new", "SimpleIcsWriter", "(", ")", ";", "ics", ".", "writeLine", "(", "input", ")", ";", "final", "byte", "[", "]", "bytes", "=", "ics", ".", "getBytes", "(", ")", ";", "int", "numBytes", "=", "0", ";", "for", "(", "byte", "b", ":", "bytes", ")", "{", "if", "(", "b", "=", "=", "<STR_LIT>", ")", "{", "continue", ";", "}", "if", "(", "b", "=", "=", "<STR_LIT:\\n>", ")", "{", "assertTrue", "(", "\"", "<STR_LIT:=>", "\"", "+", "input", ",", "numBytes", "<", "=", "<NUM_LIT>", ")", ";", "numBytes", "=", "0", ";", "continue", ";", "}", "numBytes", "+", "+", ";", "}", "assertTrue", "(", "\"", "<STR_LIT:=>", "\"", "+", "input", ",", "numBytes", "<", "=", "<NUM_LIT>", ")", ";", "final", "String", "actual", "=", "TestUtils", ".", "fromUtf8", "(", "bytes", ")", ";", "final", "String", "unfolded", "=", "actual", ".", "replace", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:=>", "\"", "+", "input", ",", "input", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "unfolded", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testWriteToText", "(", ")", "throws", "IOException", ",", "MessagingException", "{", "Message", "msg", "=", "new", "Message", "(", ")", ";", "msg", ".", "mText", "=", "TEXT", ";", "msg", ".", "mFrom", "=", "SENDER", ";", "msg", ".", "save", "(", "mMockContext", ")", ";", "ByteArrayOutputStream", "byteStream", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "Rfc822Output", ".", "writeTo", "(", "mMockContext", ",", "msg", ".", "mId", ",", "byteStream", ",", "false", ",", "false", ")", ";", "ByteArrayInputStream", "messageInputStream", "=", "new", "ByteArrayInputStream", "(", "byteStream", ".", "toByteArray", "(", ")", ")", ";", "org", ".", "apache", ".", "james", ".", "mime4j", ".", "message", ".", "Message", "mimeMessage", "=", "new", "org", ".", "apache", ".", "james", ".", "mime4j", ".", "message", ".", "Message", "(", "messageInputStream", ")", ";", "assertFalse", "(", "mimeMessage", ".", "isMultipart", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mimeMessage", ".", "getMimeType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "testWriteToAlternativePart", "(", ")", "throws", "IOException", ",", "MessagingException", "{", "Message", "msg", "=", "new", "Message", "(", ")", ";", "msg", ".", "mText", "=", "TEXT", ";", "msg", ".", "mFrom", "=", "SENDER", ";", "msg", ".", "mAttachments", "=", "new", "ArrayList", "<", "Attachment", ">", "(", ")", ";", "Attachment", "att", "=", "new", "Attachment", "(", ")", ";", "att", ".", "mContentBytes", "=", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "\"", "<STR_LIT:UTF-8>", "\"", ")", ";", "att", ".", "mFlags", "=", "Attachment", ".", "FLAG_ICS_ALTERNATIVE_PART", ";", "att", ".", "mMimeType", "=", "\"", "<STR_LIT>", "\"", ";", "att", ".", "mFileName", "=", "\"", "<STR_LIT>", "\"", ";", "msg", ".", "mAttachments", ".", "add", "(", "att", ")", ";", "msg", ".", "save", "(", "mMockContext", ")", ";", "ByteArrayOutputStream", "byteStream", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "Rfc822Output", ".", "writeTo", "(", "mMockContext", ",", "msg", ".", "mId", ",", "byteStream", ",", "false", ",", "false", ")", ";", "ByteArrayInputStream", "messageInputStream", "=", "new", "ByteArrayInputStream", "(", "byteStream", ".", "toByteArray", "(", ")", ")", ";", "org", ".", "apache", ".", "james", ".", "mime4j", ".", "message", ".", "Message", "mimeMessage", "=", "new", "org", ".", "apache", ".", "james", ".", "mime4j", ".", "message", ".", "Message", "(", "messageInputStream", ")", ";", "assertTrue", "(", "mimeMessage", ".", "isMultipart", "(", ")", ")", ";", "Header", "header", "=", "mimeMessage", ".", "getHeader", "(", ")", ";", "Field", "contentType", "=", "header", ".", "getField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertTrue", "(", "contentType", ".", "getBody", "(", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Multipart", "multipart", "=", "(", "Multipart", ")", "mimeMessage", ".", "getBody", "(", ")", ";", "List", "<", "Body", ">", "partList", "=", "multipart", ".", "getBodyParts", "(", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "partList", ".", "size", "(", ")", ")", ";", "Entity", "part", "=", "(", "Entity", ")", "partList", ".", "get", "(", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "part", ".", "getMimeType", "(", ")", ")", ";", "part", "=", "(", "Entity", ")", "partList", ".", "get", "(", "1", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "part", ".", "getMimeType", "(", ")", ")", ";", "header", "=", "part", ".", "getHeader", "(", ")", ";", "assertNull", "(", "header", ".", "getField", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testWriteToMixedPart", "(", ")", "throws", "IOException", ",", "MessagingException", "{", "Message", "msg", "=", "new", "Message", "(", ")", ";", "msg", ".", "mText", "=", "TEXT", ";", "msg", ".", "mFrom", "=", "SENDER", ";", "msg", ".", "mAttachments", "=", "new", "ArrayList", "<", "Attachment", ">", "(", ")", ";", "Attachment", "att", "=", "new", "Attachment", "(", ")", ";", "att", ".", "mContentBytes", "=", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "\"", "<STR_LIT:UTF-8>", "\"", ")", ";", "att", ".", "mMimeType", "=", "\"", "<STR_LIT>", "\"", ";", "att", ".", "mFileName", "=", "\"", "<STR_LIT>", "\"", ";", "msg", ".", "mAttachments", ".", "add", "(", "att", ")", ";", "msg", ".", "save", "(", "mMockContext", ")", ";", "ByteArrayOutputStream", "byteStream", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "Rfc822Output", ".", "writeTo", "(", "mMockContext", ",", "msg", ".", "mId", ",", "byteStream", ",", "false", ",", "false", ")", ";", "ByteArrayInputStream", "messageInputStream", "=", "new", "ByteArrayInputStream", "(", "byteStream", ".", "toByteArray", "(", ")", ")", ";", "org", ".", "apache", ".", "james", ".", "mime4j", ".", "message", ".", "Message", "mimeMessage", "=", "new", "org", ".", "apache", ".", "james", ".", "mime4j", ".", "message", ".", "Message", "(", "messageInputStream", ")", ";", "assertTrue", "(", "mimeMessage", ".", "isMultipart", "(", ")", ")", ";", "Header", "header", "=", "mimeMessage", ".", "getHeader", "(", ")", ";", "Field", "contentType", "=", "header", ".", "getField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertTrue", "(", "contentType", ".", "getBody", "(", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Multipart", "multipart", "=", "(", "Multipart", ")", "mimeMessage", ".", "getBody", "(", ")", ";", "List", "<", "Body", ">", "partList", "=", "multipart", ".", "getBodyParts", "(", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "partList", ".", "size", "(", ")", ")", ";", "Entity", "part", "=", "(", "Entity", ")", "partList", ".", "get", "(", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "part", ".", "getMimeType", "(", ")", ")", ";", "part", "=", "(", "Entity", ")", "partList", ".", "get", "(", "1", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "part", ".", "getMimeType", "(", ")", ")", ";", "header", "=", "part", ".", "getHeader", "(", ")", ";", "assertNotNull", "(", "header", ".", "getField", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "toString", "(", "Object", "o", ",", "Throwable", "t", ")", "{", "String", "m", "=", "(", "o", "=", "=", "null", ")", "?", "\"", "<STR_LIT>", "\"", ":", "o", ".", "toString", "(", ")", ";", "if", "(", "t", "=", "=", "null", ")", "{", "return", "m", ";", "}", "else", "{", "return", "m", "+", "\"", "\"", "+", "t", ".", "getMessage", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "byteToHex", "(", "int", "b", ")", "{", "return", "byteToHex", "(", "new", "StringBuilder", "(", ")", ",", "b", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "StringBuilder", "byteToHex", "(", "StringBuilder", "sb", ",", "int", "b", ")", "{", "b", "&", "=", "<NUM_LIT>", ";", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ".", "charAt", "(", "b", ">", ">", "<NUM_LIT:4>", ")", ")", ";", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ".", "charAt", "(", "b", "&", "<NUM_LIT>", ")", ")", ";", "return", "sb", ";", "}", "</s>"]
["<s>", "private", "void", "initBuffer", "(", ")", "{", "mSb", "=", "new", "StringBuilder", "(", "mTag", ")", ";", "}", "</s>"]
["<s>", "private", "void", "flushLog", "(", ")", "{", "if", "(", "mDumpEmptyLines", "|", "|", "(", "mSb", ".", "length", "(", ")", ">", "mTag", ".", "length", "(", ")", ")", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "mSb", ".", "toString", "(", ")", ")", ";", "initBuffer", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "super", ".", "close", "(", ")", ";", "flushLog", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testByteToHex", "(", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "=", "<NUM_LIT>", ";", "i", "+", "+", ")", "{", "String", "hex", "=", "Utility", ".", "byteToHex", "(", "(", "byte", ")", "i", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:=>", "\"", "+", "i", ",", "<NUM_LIT:2>", ",", "hex", ".", "length", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:=>", "\"", "+", "i", ",", "i", ",", "Integer", ".", "parseInt", "(", "hex", ",", "<NUM_LIT:16>", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "convertAndCheckcheckAddedAttachments", "(", "final", "EmailContent", ".", "Message", "localMessage", ",", "final", "Message", "legacyMessage", ")", "throws", "MessagingException", ",", "IOException", "{", "ArrayList", "<", "Part", ">", "viewables", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "ArrayList", "<", "Part", ">", "attachments", "=", "new", "ArrayList", "<", "Part", ">", "(", ")", ";", "MimeUtility", ".", "collectParts", "(", "legacyMessage", ",", "viewables", ",", "attachments", ")", ";", "LegacyConversions", ".", "updateAttachments", "(", "mProviderContext", ",", "localMessage", ",", "attachments", ",", "false", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "Attachment", ".", "MESSAGE_ID_URI", ",", "localMessage", ".", "mId", ")", ";", "Cursor", "c", "=", "mProviderContext", ".", "getContentResolver", "(", ")", ".", "query", "(", "uri", ",", "Attachment", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "assertEquals", "(", "<NUM_LIT:2>", ",", "c", ".", "getCount", "(", ")", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "Attachment", "attachment", "=", "Attachment", ".", "getContent", "(", "c", ",", "Attachment", ".", "class", ")", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "attachment", ".", "mLocation", ")", ")", "{", "checkAttachment", "(", "\"", "<STR_LIT>", "\"", ",", "attachments", ".", "get", "(", "0", ")", ",", "attachment", ")", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "attachment", ".", "mLocation", ")", ")", "{", "checkAttachment", "(", "\"", "<STR_LIT>", "\"", ",", "attachments", ".", "get", "(", "1", ")", ",", "attachment", ")", ";", "}", "else", "{", "fail", "(", "\"", "<STR_LIT>", "\"", "+", "attachment", ".", "mLocation", ")", ";", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "private", "ImapList", "parseList", "(", "char", "opener", ",", "String", "closer", ")", "throws", "IOException", "{", "expect", "(", "opener", ")", ";", "ImapList", "list", "=", "new", "ImapList", "(", ")", ";", "Object", "token", ";", "while", "(", "true", ")", "{", "token", "=", "parseToken", "(", ")", ";", "if", "(", "token", "=", "=", "null", ")", "{", "break", ";", "}", "else", "if", "(", "token", "instanceof", "InputStream", ")", "{", "list", ".", "add", "(", "token", ")", ";", "break", ";", "}", "else", "if", "(", "token", ".", "equals", "(", "closer", ")", ")", "{", "break", ";", "}", "else", "{", "list", ".", "add", "(", "token", ")", ";", "}", "}", "return", "list", ";", "}", "</s>"]
["<s>", "public", "ImapList", "getListOrNull", "(", "int", "index", ")", "{", "Object", "list", "=", "get", "(", "index", ")", ";", "if", "(", "list", "instanceof", "ImapList", ")", "{", "return", "(", "ImapList", ")", "list", ";", "}", "else", "{", "return", "null", ";", "}", "}", "</s>"]
["<s>", "public", "String", "getStringOrNull", "(", "int", "index", ")", "{", "if", "(", "index", "<", "size", "(", ")", ")", "{", "Object", "string", "=", "get", "(", "index", ")", ";", "if", "(", "string", "instanceof", "String", ")", "{", "return", "(", "String", ")", "string", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "void", "testParseResponseText", "(", ")", "throws", "Exception", "{", "ByteArrayInputStream", "is", "=", "new", "ByteArrayInputStream", "(", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ".", "getBytes", "(", ")", ")", ";", "ImapResponseParser", "parser", "=", "new", "ImapResponseParser", "(", "is", ",", "new", "DiscourseLogger", "(", "<NUM_LIT:4>", ")", ")", ";", "ImapResponse", "line1", "=", "parser", ".", "readResponse", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "line1", ".", "mTag", ")", ";", "assertTrue", "(", "line1", ".", "completed", "(", ")", ")", ";", "assertEquals", "(", "<NUM_LIT:3>", ",", "line1", ".", "size", "(", ")", ")", ";", "ImapResponse", "line2", "=", "parser", ".", "readResponse", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "line2", ".", "mTag", ")", ";", "assertTrue", "(", "line2", ".", "completed", "(", ")", ")", ";", "assertEquals", "(", "<NUM_LIT:4>", ",", "line2", ".", "size", "(", ")", ")", ";", "Object", "responseList", "=", "line2", ".", "get", "(", "1", ")", ";", "assertEquals", "(", "<NUM_LIT:3>", ",", "(", "(", "ImapList", ")", "responseList", ")", ".", "size", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testAlertText", "(", ")", "throws", "IOException", "{", "ByteArrayInputStream", "is", "=", "new", "ByteArrayInputStream", "(", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ".", "getBytes", "(", ")", ")", ";", "ImapResponseParser", "parser", "=", "new", "ImapResponseParser", "(", "is", ",", "new", "DiscourseLogger", "(", "<NUM_LIT:4>", ")", ")", ";", "ImapResponse", "line1", "=", "parser", ".", "readResponse", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "line1", ".", "getAlertText", "(", ")", ")", ";", "ImapResponse", "line2", "=", "parser", ".", "readResponse", "(", ")", ";", "assertEquals", "(", "\"", "\"", ",", "line2", ".", "getAlertText", "(", ")", ")", ";", "ImapResponse", "line3", "=", "parser", ".", "readResponse", "(", ")", ";", "assertNull", "(", "line3", ".", "getAlertText", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "setupOpenFolder", "(", "MockTransport", "mockTransport", ",", "String", "readWriteMode", ")", "{", "setupOpenFolder", "(", "mockTransport", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:OK>", "\"", "}", ",", "readWriteMode", ")", ";", "}", "</s>"]
["<s>", "private", "void", "setupOpenFolder", "(", "MockTransport", "mockTransport", ",", "String", "[", "]", "imapIdResponse", ",", "String", "readWriteMode", ")", "{", "String", "last", "=", "imapIdResponse", "[", "imapIdResponse", ".", "length", "-", "1", "]", ";", "last", "=", "\"", "<STR_LIT>", "\"", "+", "last", ";", "imapIdResponse", "[", "imapIdResponse", ".", "length", "-", "1", "]", "=", "last", ";", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "imapIdResponse", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "readWriteMode", "+", "\"", "<STR_LIT>", "\"", "}", ")", ";", "mNextTag", "=", "<NUM_LIT:5>", ";", "}", "</s>"]
["<s>", "public", "void", "testReadWrite", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mock", "=", "openAndInjectMockTransport", "(", ")", ";", "setupOpenFolder", "(", "mock", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "assertEquals", "(", "OpenMode", ".", "READ_WRITE", ",", "mFolder", ".", "getMode", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testReadOnly", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mock", "=", "openAndInjectMockTransport", "(", ")", ";", "setupOpenFolder", "(", "mock", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_ONLY", ",", "null", ")", ";", "assertEquals", "(", "OpenMode", ".", "READ_ONLY", ",", "mFolder", ".", "getMode", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isVibrateWhenSilent", "(", ")", "{", "return", "mVibrateWhenSilent", ";", "}", "</s>"]
["<s>", "public", "void", "setVibrateWhenSilent", "(", "boolean", "vibrateWhenSilent", ")", "{", "mVibrateWhenSilent", "=", "vibrateWhenSilent", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Void", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "try", "{", "Store", ".", "getInstance", "(", "mAccountUri", ",", "getApplication", "(", ")", ",", "null", ")", ".", "delete", "(", ")", ";", "Store", ".", "removeInstance", "(", "mAccountUri", ")", ";", "Uri", "uri", "=", "ContentUris", ".", "withAppendedId", "(", "EmailContent", ".", "Account", ".", "CONTENT_URI", ",", "mAccountId", ")", ";", "AccountFolderList", ".", "this", ".", "getContentResolver", "(", ")", ".", "delete", "(", "uri", ",", "null", ",", "null", ")", ";", "AccountBackupRestore", ".", "backupAccounts", "(", "AccountFolderList", ".", "this", ")", ";", "SecurityPolicy", ".", "getInstance", "(", "AccountFolderList", ".", "this", ")", ".", "reducePolicies", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "}", "Email", ".", "setServicesEnabled", "(", "AccountFolderList", ".", "this", ")", ";", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Void", "v", ")", "{", "if", "(", "!", "isCancelled", "(", ")", ")", "{", "updateAccounts", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "addOnDeletingAccount", "(", "long", "accountId", ")", "{", "mOnDeletingAccounts", ".", "add", "(", "accountId", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isOnDeletingAccountView", "(", "long", "accountId", ")", "{", "return", "mOnDeletingAccounts", ".", "contains", "(", "accountId", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testTimeZoneToVTimezone", "(", ")", "throws", "IOException", "{", "SimpleIcsWriter", "writer", "=", "new", "SimpleIcsWriter", "(", ")", ";", "int", "rule", "=", "0", ";", "int", "nodst", "=", "0", ";", "int", "norule", "=", "0", ";", "ArrayList", "<", "String", ">", "norulelist", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "for", "(", "String", "tzs", ":", "TimeZone", ".", "getAvailableIDs", "(", ")", ")", "{", "TimeZone", "tz", "=", "TimeZone", ".", "getTimeZone", "(", "tzs", ")", ";", "writer", "=", "new", "SimpleIcsWriter", "(", ")", ";", "CalendarUtilities", ".", "timeZoneToVTimezone", "(", "tz", ",", "writer", ")", ";", "String", "vc", "=", "writer", ".", "toString", "(", ")", ";", "boolean", "hasRule", "=", "vc", ".", "indexOf", "(", "\"", "<STR_LIT>", "\"", ")", ">", "0", ";", "if", "(", "hasRule", ")", "{", "rule", "+", "+", ";", "}", "else", "if", "(", "tz", ".", "useDaylightTime", "(", ")", ")", "{", "norule", "+", "+", ";", "norulelist", ".", "add", "(", "tz", ".", "getID", "(", ")", ")", ";", "}", "else", "{", "nodst", "+", "+", ";", "}", "}", "assertTrue", "(", "norule", "<", "rule", "/", "<NUM_LIT:10>", ")", ";", "Log", ".", "d", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "rule", "+", "\"", "<STR_LIT>", "\"", "+", "nodst", "+", "\"", "<STR_LIT>", "\"", "+", "norule", ")", ";", "for", "(", "String", "nr", ":", "norulelist", ")", "{", "Log", ".", "d", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "nr", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "try", "{", "return", "new", "String", "(", "getBytes", "(", ")", ",", "\"", "<STR_LIT:UTF-8>", "\"", ")", ";", "}", "catch", "(", "UnsupportedEncodingException", "wonthappen", ")", "{", "}", "return", "null", ";", "}", "</s>"]
["<s>", "static", "public", "int", "getTrueTransitionMinute", "(", "GregorianCalendar", "calendar", ")", "{", "int", "minute", "=", "calendar", ".", "get", "(", "Calendar", ".", "MINUTE", ")", ";", "if", "(", "minute", "=", "=", "<NUM_LIT>", ")", "{", "minute", "=", "0", ";", "}", "return", "minute", ";", "}", "</s>"]
["<s>", "static", "public", "int", "getTrueTransitionHour", "(", "GregorianCalendar", "calendar", ")", "{", "int", "hour", "=", "calendar", ".", "get", "(", "Calendar", ".", "HOUR_OF_DAY", ")", ";", "hour", "+", "+", ";", "if", "(", "hour", "=", "=", "<NUM_LIT:24>", ")", "{", "hour", "=", "0", ";", "}", "return", "hour", ";", "}", "</s>"]
["<s>", "static", "public", "String", "transitionMillisToVCalendarTime", "(", "long", "millis", ",", "TimeZone", "tz", ",", "boolean", "dst", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "GregorianCalendar", "cal", "=", "new", "GregorianCalendar", "(", "tz", ")", ";", "cal", ".", "setTimeInMillis", "(", "millis", ")", ";", "sb", ".", "append", "(", "cal", ".", "get", "(", "Calendar", ".", "YEAR", ")", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "cal", ".", "get", "(", "Calendar", ".", "MONTH", ")", "+", "1", ")", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "cal", ".", "get", "(", "Calendar", ".", "DAY_OF_MONTH", ")", ")", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT>", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "getTrueTransitionHour", "(", "cal", ")", ")", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "getTrueTransitionMinute", "(", "cal", ")", ")", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "0", ")", ")", ";", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "addElement", "(", "long", "id", ",", "long", "mailboxKey", ",", "long", "accountKey", ",", "String", "displayName", ",", "String", "subject", ",", "long", "timestamp", ",", "int", "flagRead", ",", "int", "flagFavorite", ",", "int", "flagAttachment", ",", "int", "flags", ")", "{", "HashMap", "<", "String", ",", "Object", ">", "emap", "=", "new", "HashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "emap", ".", "put", "(", "EmailContent", ".", "RECORD_ID", ",", "id", ")", ";", "emap", ".", "put", "(", "MessageColumns", ".", "MAILBOX_KEY", ",", "mailboxKey", ")", ";", "emap", ".", "put", "(", "MessageColumns", ".", "ACCOUNT_KEY", ",", "accountKey", ")", ";", "emap", ".", "put", "(", "MessageColumns", ".", "DISPLAY_NAME", ",", "displayName", ")", ";", "emap", ".", "put", "(", "MessageColumns", ".", "SUBJECT", ",", "subject", ")", ";", "emap", ".", "put", "(", "MessageColumns", ".", "TIMESTAMP", ",", "timestamp", ")", ";", "emap", ".", "put", "(", "MessageColumns", ".", "FLAG_READ", ",", "flagRead", ")", ";", "emap", ".", "put", "(", "MessageColumns", ".", "FLAG_FAVORITE", ",", "flagFavorite", ")", ";", "emap", ".", "put", "(", "MessageColumns", ".", "FLAG_ATTACHMENT", ",", "flagAttachment", ")", ";", "emap", ".", "put", "(", "MessageColumns", ".", "FLAGS", ",", "flags", ")", ";", "mRowsMap", ".", "put", "(", "id", ",", "emap", ")", ";", "mIDarray", ".", "add", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testB", "(", ")", "{", "assertNull", "(", "b", "(", "null", ")", ")", ";", "MoreAsserts", ".", "assertEquals", "(", "new", "byte", "[", "]", "{", "}", ",", "b", "(", ")", ")", ";", "MoreAsserts", ".", "assertEquals", "(", "new", "byte", "[", "]", "{", "1", ",", "<NUM_LIT:2>", ",", "(", "byte", ")", "<NUM_LIT>", "}", ",", "b", "(", "1", ",", "<NUM_LIT:2>", ",", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "byte", "[", "]", "b", "(", "int", ".", ".", ".", "array", ")", "{", "return", "TestUtils", ".", "b", "(", "array", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "replaceBareLfWithCrlf", "(", "String", "str", ")", "{", "return", "str", ".", "replace", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ".", "replace", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testReplaceBareLfWithCrlf", "(", ")", "{", "assertEquals", "(", "\"", "\"", ",", "Utility", ".", "replaceBareLfWithCrlf", "(", "\"", "\"", ")", ")", ";", "assertEquals", "(", "\"", "\"", ",", "Utility", ".", "replaceBareLfWithCrlf", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "Utility", ".", "replaceBareLfWithCrlf", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "Utility", ".", "replaceBareLfWithCrlf", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "Utility", ".", "replaceBareLfWithCrlf", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:A>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:B>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:C>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:D>", "\"", ",", "Utility", ".", "replaceBareLfWithCrlf", "(", "\"", "<STR_LIT:A>", "<STR_LIT>", "<STR_LIT:B>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:C>", "<STR_LIT>", "<STR_LIT:D>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "static", "long", "getMillisAtTimeZoneDateTransition", "(", "TimeZone", "timeZone", ",", "TimeZoneDate", "tzd", ")", "{", "GregorianCalendar", "testCalendar", "=", "new", "GregorianCalendar", "(", "timeZone", ")", ";", "testCalendar", ".", "set", "(", "GregorianCalendar", ".", "YEAR", ",", "sCurrentYear", ")", ";", "testCalendar", ".", "set", "(", "GregorianCalendar", ".", "MONTH", ",", "tzd", ".", "month", ")", ";", "testCalendar", ".", "set", "(", "GregorianCalendar", ".", "DAY_OF_WEEK", ",", "tzd", ".", "dayOfWeek", ")", ";", "testCalendar", ".", "set", "(", "GregorianCalendar", ".", "DAY_OF_WEEK_IN_MONTH", ",", "tzd", ".", "day", ")", ";", "testCalendar", ".", "set", "(", "GregorianCalendar", ".", "HOUR_OF_DAY", ",", "tzd", ".", "hour", ")", ";", "testCalendar", ".", "set", "(", "GregorianCalendar", ".", "MINUTE", ",", "tzd", ".", "minute", ")", ";", "testCalendar", ".", "set", "(", "GregorianCalendar", ".", "SECOND", ",", "0", ")", ";", "return", "testCalendar", ".", "getTimeInMillis", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onCreate", "(", "Bundle", "savedInstanceState", ")", "{", "super", ".", "onCreate", "(", "savedInstanceState", ")", ";", "new", "AsyncTask", "<", "Void", ",", "Void", ",", "Void", ">", "(", ")", "{", "@", "Override", "protected", "Void", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "openInbox", "(", ")", ";", "return", "null", ";", "}", "@", "Override", "protected", "void", "onPostExecute", "(", "Void", "result", ")", "{", "finish", "(", ")", ";", "}", "}", ".", "execute", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Void", "doInBackground", "(", "Void", ".", ".", ".", "params", ")", "{", "openInbox", "(", ")", ";", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onPostExecute", "(", "Void", "result", ")", "{", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "openInbox", "(", ")", "{", "if", "(", "UpgradeAccounts", ".", "doBulkUpgradeIfNecessary", "(", "this", ")", ")", "{", "return", ";", "}", "Uri", "uri", "=", "getIntent", "(", ")", ".", "getData", "(", ")", ";", "if", "(", "uri", "=", "=", "null", "|", "|", "!", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "uri", ".", "getScheme", "(", ")", ")", "|", "|", "!", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "uri", ".", "getAuthority", "(", ")", ")", ")", "{", "return", ";", "}", "String", "uuid", "=", "uri", ".", "getPath", "(", ")", ";", "if", "(", "uuid", ".", "length", "(", ")", ">", "0", ")", "{", "uuid", "=", "uuid", ".", "substring", "(", "1", ")", ";", "}", "if", "(", "TextUtils", ".", "isEmpty", "(", "uuid", ")", ")", "{", "return", ";", "}", "MessageList", ".", "actionOpenAccountInboxUuid", "(", "this", ",", "uuid", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionOpenAccountInboxUuid", "(", "Context", "context", ",", "String", "accountUuid", ")", "{", "Intent", "i", "=", "createIntent", "(", "context", ",", "-", "1", ",", "-", "1", ",", "Mailbox", ".", "TYPE_INBOX", ")", ";", "i", ".", "setData", "(", "Account", ".", "getShortcutSafeUriFromUuid", "(", "accountUuid", ")", ")", ";", "context", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "static", "boolean", "doBulkUpgradeIfNecessary", "(", "Context", "context", ")", "{", "if", "(", "bulkUpgradesRequired", "(", "context", ",", "Preferences", ".", "getPreferences", "(", "context", ")", ")", ")", "{", "UpgradeAccounts", ".", "actionStart", "(", "context", ")", ";", "return", "true", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "static", "Uri", "getShortcutSafeUriFromUuid", "(", "String", "uuid", ")", "{", "return", "CONTENT_URI", ".", "buildUpon", "(", ")", ".", "appendEncodedPath", "(", "uuid", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onAccountChanged", "(", ")", "{", "maybeStartSyncManagerThread", "(", ")", ";", "Context", "context", "=", "getContext", "(", ")", ";", "AccountList", "currentAccounts", "=", "new", "AccountList", "(", ")", ";", "Cursor", "c", "=", "getContentResolver", "(", ")", ".", "query", "(", "Account", ".", "CONTENT_URI", ",", "Account", ".", "CONTENT_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "collectEasAccounts", "(", "c", ",", "currentAccounts", ")", ";", "synchronized", "(", "sAccountList", ")", "{", "for", "(", "Account", "account", ":", "sAccountList", ")", "{", "if", "(", "(", "account", ".", "mFlags", "&", "Account", ".", "FLAGS_INCOMPLETE", ")", "!", "=", "0", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "continue", ";", "}", "else", "if", "(", "!", "currentAccounts", ".", "contains", "(", "account", ".", "mId", ")", ")", "{", "stopAccountSyncs", "(", "account", ".", "mId", ",", "true", ")", ";", "android", ".", "accounts", ".", "Account", "acct", "=", "new", "android", ".", "accounts", ".", "Account", "(", "account", ".", "mEmailAddress", ",", "Email", ".", "EXCHANGE_ACCOUNT_MANAGER_TYPE", ")", ";", "AccountManager", ".", "get", "(", "SyncManager", ".", "this", ")", ".", "removeAccount", "(", "acct", ",", "null", ",", "null", ")", ";", "mSyncableEasMailboxSelector", "=", "null", ";", "mEasAccountSelector", "=", "null", ";", "}", "else", "{", "Account", "updatedAccount", "=", "Account", ".", "restoreAccountWithId", "(", "context", ",", "account", ".", "mId", ")", ";", "if", "(", "account", ".", "mSyncInterval", "!", "=", "updatedAccount", ".", "mSyncInterval", "|", "|", "account", ".", "mSyncLookback", "!", "=", "updatedAccount", ".", "mSyncLookback", ")", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "MailboxColumns", ".", "SYNC_INTERVAL", ",", "updatedAccount", ".", "mSyncInterval", ")", ";", "getContentResolver", "(", ")", ".", "update", "(", "Mailbox", ".", "CONTENT_URI", ",", "cv", ",", "WHERE_IN_ACCOUNT_AND_PUSHABLE", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "account", ".", "mId", ")", "}", ")", ";", "log", "(", "\"", "<STR_LIT>", "\"", "+", "account", ".", "mDisplayName", "+", "\"", "<STR_LIT>", "\"", ")", ";", "stopAccountSyncs", "(", "account", ".", "mId", ",", "true", ")", ";", "}", "if", "(", "onSecurityHold", "(", "account", ")", "&", "&", "!", "onSecurityHold", "(", "updatedAccount", ")", ")", "{", "releaseSyncHolds", "(", "SyncManager", ".", "this", ",", "AbstractSyncService", ".", "EXIT_SECURITY_FAILURE", ",", "account", ")", ";", "}", "account", ".", "mSyncInterval", "=", "updatedAccount", ".", "mSyncInterval", ";", "account", ".", "mSyncLookback", "=", "updatedAccount", ".", "mSyncLookback", ";", "account", ".", "mFlags", "=", "updatedAccount", ".", "mFlags", ";", "}", "}", "for", "(", "Account", "account", ":", "currentAccounts", ")", "{", "if", "(", "!", "sAccountList", ".", "contains", "(", "account", ".", "mId", ")", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", "+", "account", ".", "mDisplayName", ")", ";", "addAccountMailbox", "(", "account", ".", "mId", ")", ";", "HostAuth", "ha", "=", "HostAuth", ".", "restoreHostAuthWithId", "(", "getContext", "(", ")", ",", "account", ".", "mHostAuthKeyRecv", ")", ";", "account", ".", "mHostAuthRecv", "=", "ha", ";", "sAccountList", ".", "add", "(", "account", ")", ";", "mSyncableEasMailboxSelector", "=", "null", ";", "mEasAccountSelector", "=", "null", ";", "}", "}", "sAccountList", ".", "clear", "(", ")", ";", "sAccountList", ".", "addAll", "(", "currentAccounts", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "kick", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "static", "public", "EmailContent", ".", "Message", "createMessageForEntity", "(", "Context", "context", ",", "Entity", "entity", ",", "int", "messageFlag", ",", "String", "uid", ",", "Account", "account", ",", "boolean", "requireAddressees", ")", "{", "ContentValues", "entityValues", "=", "entity", ".", "getEntityValues", "(", ")", ";", "ArrayList", "<", "NamedContentValues", ">", "subValues", "=", "entity", ".", "getSubValues", "(", ")", ";", "boolean", "isException", "=", "entityValues", ".", "containsKey", "(", "Events", ".", "ORIGINAL_EVENT", ")", ";", "EmailContent", ".", "Message", "msg", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "msg", ".", "mFlags", "=", "messageFlag", ";", "msg", ".", "mTimeStamp", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "String", "method", ";", "if", "(", "(", "messageFlag", "&", "EmailContent", ".", "Message", ".", "FLAG_OUTGOING_MEETING_REQUEST_MASK", ")", "!", "=", "0", ")", "{", "method", "=", "\"", "<STR_LIT>", "\"", ";", "}", "else", "{", "method", "=", "\"", "<STR_LIT>", "\"", ";", "}", "try", "{", "SimpleIcsWriter", "ics", "=", "new", "SimpleIcsWriter", "(", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "method", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2.0>", "\"", ")", ";", "TimeZone", "vCalendarTimeZone", "=", "sGmtTimeZone", ";", "String", "vCalendarTimeZoneSuffix", "=", "\"", "\"", ";", "if", "(", "method", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", "&", "&", "entityValues", ".", "containsKey", "(", "Events", ".", "RRULE", ")", ")", "{", "vCalendarTimeZone", "=", "TimeZone", ".", "getDefault", "(", ")", ";", "timeZoneToVTimezone", "(", "vCalendarTimeZone", ",", "ics", ")", ";", "vCalendarTimeZoneSuffix", "=", "\"", "<STR_LIT>", "\"", "+", "vCalendarTimeZone", ".", "getID", "(", ")", ";", "}", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "uid", "=", "=", "null", ")", "{", "uid", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "_SYNC_DATA", ")", ";", "}", "if", "(", "uid", "!", "=", "null", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "uid", ")", ";", "}", "if", "(", "entityValues", ".", "containsKey", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "entityValues", ".", "getAsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "else", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "millisToEasDateTime", "(", "System", ".", "currentTimeMillis", "(", ")", ")", ")", ";", "}", "long", "startTime", "=", "entityValues", ".", "getAsLong", "(", "Events", ".", "DTSTART", ")", ";", "if", "(", "startTime", "!", "=", "0", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", "+", "vCalendarTimeZoneSuffix", ",", "millisToEasDateTime", "(", "startTime", ",", "vCalendarTimeZone", ")", ")", ";", "}", "if", "(", "isException", ")", "{", "long", "originalTime", "=", "entityValues", ".", "getAsLong", "(", "Events", ".", "ORIGINAL_INSTANCE_TIME", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", "+", "vCalendarTimeZoneSuffix", ",", "millisToEasDateTime", "(", "originalTime", ",", "vCalendarTimeZone", ")", ")", ";", "}", "if", "(", "!", "entityValues", ".", "containsKey", "(", "Events", ".", "DURATION", ")", ")", "{", "if", "(", "entityValues", ".", "containsKey", "(", "Events", ".", "DTEND", ")", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", "+", "vCalendarTimeZoneSuffix", ",", "millisToEasDateTime", "(", "entityValues", ".", "getAsLong", "(", "Events", ".", "DTEND", ")", ",", "vCalendarTimeZone", ")", ")", ";", "}", "}", "else", "{", "long", "durationMillis", "=", "HOURS", ";", "Duration", "duration", "=", "new", "Duration", "(", ")", ";", "try", "{", "duration", ".", "parse", "(", "entityValues", ".", "getAsString", "(", "Events", ".", "DURATION", ")", ")", ";", "}", "catch", "(", "ParseException", "e", ")", "{", "}", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", "+", "vCalendarTimeZoneSuffix", ",", "millisToEasDateTime", "(", "startTime", "+", "durationMillis", ",", "vCalendarTimeZone", ")", ")", ";", "}", "String", "location", "=", "null", ";", "if", "(", "entityValues", ".", "containsKey", "(", "Events", ".", "EVENT_LOCATION", ")", ")", "{", "location", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "EVENT_LOCATION", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "location", ")", ";", "}", "String", "sequence", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "_SYNC_VERSION", ")", ";", "if", "(", "sequence", "=", "=", "null", ")", "{", "sequence", "=", "\"", "<STR_LIT:0>", "\"", ";", "}", "int", "titleId", "=", "0", ";", "switch", "(", "messageFlag", ")", "{", "case", "Message", ".", "FLAG_OUTGOING_MEETING_INVITE", ":", "if", "(", "sequence", ".", "equals", "(", "\"", "<STR_LIT:0>", "\"", ")", ")", "{", "titleId", "=", "R", ".", "string", ".", "meeting_invitation", ";", "}", "else", "{", "titleId", "=", "R", ".", "string", ".", "meeting_updated", ";", "}", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_ACCEPT", ":", "titleId", "=", "R", ".", "string", ".", "meeting_accepted", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_DECLINE", ":", "titleId", "=", "R", ".", "string", ".", "meeting_declined", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_TENTATIVE", ":", "titleId", "=", "R", ".", "string", ".", "meeting_tentative", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_CANCEL", ":", "titleId", "=", "R", ".", "string", ".", "meeting_canceled", ";", "break", ";", "}", "Resources", "resources", "=", "context", ".", "getResources", "(", ")", ";", "String", "title", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "TITLE", ")", ";", "if", "(", "title", "=", "=", "null", ")", "{", "title", "=", "\"", "\"", ";", "}", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "title", ")", ";", "if", "(", "titleId", "!", "=", "0", ")", "{", "msg", ".", "mSubject", "=", "resources", ".", "getString", "(", "titleId", ",", "title", ")", ";", "}", "if", "(", "method", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "if", "(", "entityValues", ".", "containsKey", "(", "Events", ".", "ALL_DAY", ")", ")", "{", "Integer", "ade", "=", "entityValues", ".", "getAsInteger", "(", "Events", ".", "ALL_DAY", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "ade", "=", "=", "0", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", ")", ";", "}", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "if", "(", "isException", ")", "{", "Date", "date", "=", "new", "Date", "(", "entityValues", ".", "getAsLong", "(", "Events", ".", "ORIGINAL_INSTANCE_TIME", ")", ")", ";", "String", "dateString", "=", "DateFormat", ".", "getDateInstance", "(", ")", ".", "format", "(", "date", ")", ";", "if", "(", "titleId", "=", "=", "R", ".", "string", ".", "meeting_canceled", ")", "{", "sb", ".", "append", "(", "resources", ".", "getString", "(", "R", ".", "string", ".", "exception_cancel", ",", "dateString", ")", ")", ";", "}", "else", "{", "sb", ".", "append", "(", "resources", ".", "getString", "(", "R", ".", "string", ".", "exception_updated", ",", "dateString", ")", ")", ";", "}", "sb", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "String", "text", "=", "CalendarUtilities", ".", "buildMessageTextFromEntityValues", "(", "context", ",", "entityValues", ",", "sb", ")", ";", "if", "(", "text", ".", "length", "(", ")", ">", "0", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "text", ")", ";", "}", "msg", ".", "mText", "=", "text", ";", "String", "rrule", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "RRULE", ")", ";", "if", "(", "rrule", "!", "=", "null", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "rrule", ")", ";", "}", "for", "(", "NamedContentValues", "ncv", ":", "subValues", ")", "{", "Uri", "ncvUri", "=", "ncv", ".", "uri", ";", "if", "(", "ncvUri", ".", "equals", "(", "Reminders", ".", "CONTENT_URI", ")", ")", "{", "}", "}", "}", "String", "organizerName", "=", "null", ";", "String", "organizerEmail", "=", "null", ";", "ArrayList", "<", "Address", ">", "toList", "=", "new", "ArrayList", "<", "Address", ">", "(", ")", ";", "for", "(", "NamedContentValues", "ncv", ":", "subValues", ")", "{", "Uri", "ncvUri", "=", "ncv", ".", "uri", ";", "ContentValues", "ncvValues", "=", "ncv", ".", "values", ";", "if", "(", "ncvUri", ".", "equals", "(", "Attendees", ".", "CONTENT_URI", ")", ")", "{", "Integer", "relationship", "=", "ncvValues", ".", "getAsInteger", "(", "Attendees", ".", "ATTENDEE_RELATIONSHIP", ")", ";", "if", "(", "relationship", "!", "=", "null", "&", "&", "ncvValues", ".", "containsKey", "(", "Attendees", ".", "ATTENDEE_EMAIL", ")", ")", "{", "if", "(", "relationship", "=", "=", "Attendees", ".", "RELATIONSHIP_ORGANIZER", ")", "{", "organizerName", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_NAME", ")", ";", "organizerEmail", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_EMAIL", ")", ";", "continue", ";", "}", "String", "attendeeEmail", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_EMAIL", ")", ";", "String", "attendeeName", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_NAME", ")", ";", "if", "(", "attendeeEmail", "=", "=", "null", ")", "continue", ";", "if", "(", "(", "messageFlag", "&", "Message", ".", "FLAG_OUTGOING_MEETING_REQUEST_MASK", ")", "!", "=", "0", ")", "{", "String", "icalTag", "=", "ICALENDAR_ATTENDEE_INVITE", ";", "if", "(", "(", "messageFlag", "&", "Message", ".", "FLAG_OUTGOING_MEETING_CANCEL", ")", "!", "=", "0", ")", "{", "icalTag", "=", "ICALENDAR_ATTENDEE_CANCEL", ";", "}", "if", "(", "attendeeName", "!", "=", "null", ")", "{", "icalTag", "+", "=", "\"", "<STR_LIT>", "\"", "+", "SimpleIcsWriter", ".", "quoteParamValue", "(", "attendeeName", ")", ";", "}", "ics", ".", "writeTag", "(", "icalTag", ",", "\"", "<STR_LIT>", "\"", "+", "attendeeEmail", ")", ";", "toList", ".", "add", "(", "attendeeName", "=", "=", "null", "?", "new", "Address", "(", "attendeeEmail", ")", ":", "new", "Address", "(", "attendeeEmail", ",", "attendeeName", ")", ")", ";", "}", "else", "if", "(", "attendeeEmail", ".", "equalsIgnoreCase", "(", "account", ".", "mEmailAddress", ")", ")", "{", "String", "icalTag", "=", "null", ";", "switch", "(", "messageFlag", ")", "{", "case", "Message", ".", "FLAG_OUTGOING_MEETING_ACCEPT", ":", "icalTag", "=", "ICALENDAR_ATTENDEE_ACCEPT", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_DECLINE", ":", "icalTag", "=", "ICALENDAR_ATTENDEE_DECLINE", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_TENTATIVE", ":", "icalTag", "=", "ICALENDAR_ATTENDEE_TENTATIVE", ";", "break", ";", "}", "if", "(", "icalTag", "!", "=", "null", ")", "{", "if", "(", "attendeeName", "!", "=", "null", ")", "{", "icalTag", "+", "=", "\"", "<STR_LIT>", "\"", "+", "SimpleIcsWriter", ".", "quoteParamValue", "(", "attendeeName", ")", ";", "}", "ics", ".", "writeTag", "(", "icalTag", ",", "\"", "<STR_LIT>", "\"", "+", "attendeeEmail", ")", ";", "}", "}", "}", "}", "}", "if", "(", "organizerEmail", "!", "=", "null", ")", "{", "String", "icalTag", "=", "\"", "<STR_LIT>", "\"", ";", "if", "(", "organizerName", "!", "=", "null", ")", "{", "icalTag", "+", "=", "\"", "<STR_LIT>", "\"", "+", "SimpleIcsWriter", ".", "quoteParamValue", "(", "organizerName", ")", ";", "}", "ics", ".", "writeTag", "(", "icalTag", ",", "\"", "<STR_LIT>", "\"", "+", "organizerEmail", ")", ";", "if", "(", "method", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "toList", ".", "add", "(", "organizerName", "=", "=", "null", "?", "new", "Address", "(", "organizerEmail", ")", ":", "new", "Address", "(", "organizerEmail", ",", "organizerName", ")", ")", ";", "}", "}", "if", "(", "toList", ".", "isEmpty", "(", ")", "&", "&", "requireAddressees", ")", "return", "null", ";", "Address", "[", "]", "toArray", "=", "new", "Address", "[", "toList", ".", "size", "(", ")", "]", ";", "int", "i", "=", "0", ";", "for", "(", "Address", "address", ":", "toList", ")", "{", "toArray", "[", "i", "+", "+", "]", "=", "address", ";", "}", "msg", ".", "mTo", "=", "Address", ".", "pack", "(", "toArray", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "(", "messageFlag", "=", "=", "Message", ".", "FLAG_OUTGOING_MEETING_CANCEL", ")", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:5>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "sequence", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Attachment", "att", "=", "new", "Attachment", "(", ")", ";", "att", ".", "mContentBytes", "=", "ics", ".", "getBytes", "(", ")", ";", "att", ".", "mMimeType", "=", "\"", "<STR_LIT>", "\"", "+", "method", ";", "att", ".", "mFileName", "=", "\"", "<STR_LIT>", "\"", ";", "att", ".", "mSize", "=", "att", ".", "mContentBytes", ".", "length", ";", "att", ".", "mFlags", "=", "Attachment", ".", "FLAG_ICS_ALTERNATIVE_PART", ";", "msg", ".", "mAttachments", "=", "new", "ArrayList", "<", "Attachment", ">", "(", ")", ";", "msg", ".", "mAttachments", ".", "add", "(", "att", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "Log", ".", "w", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "null", ";", "}", "return", "msg", ";", "}", "</s>"]
["<s>", "static", "public", "EmailContent", ".", "Message", "createMessageForEventId", "(", "Context", "context", ",", "long", "eventId", ",", "int", "messageFlag", ",", "String", "uid", ",", "Account", "account", ",", "boolean", "requireAddressees", ")", "throws", "RemoteException", "{", "ContentResolver", "cr", "=", "context", ".", "getContentResolver", "(", ")", ";", "EntityIterator", "eventIterator", "=", "EventsEntity", ".", "newEntityIterator", "(", "cr", ".", "query", "(", "ContentUris", ".", "withAppendedId", "(", "Events", ".", "CONTENT_URI", ".", "buildUpon", "(", ")", ".", "appendQueryParameter", "(", "android", ".", "provider", ".", "Calendar", ".", "CALLER_IS_SYNCADAPTER", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ",", "eventId", ")", ",", "null", ",", "null", ",", "null", ",", "null", ")", ",", "cr", ")", ";", "try", "{", "while", "(", "eventIterator", ".", "hasNext", "(", ")", ")", "{", "Entity", "entity", "=", "eventIterator", ".", "next", "(", ")", ";", "return", "createMessageForEntity", "(", "context", ",", "entity", ",", "messageFlag", ",", "uid", ",", "account", ",", "requireAddressees", ")", ";", "}", "}", "finally", "{", "eventIterator", ".", "close", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "private", "void", "logSyncHolds", "(", ")", "{", "if", "(", "Eas", ".", "USER_LOG", "&", "&", "!", "mSyncErrorMap", ".", "isEmpty", "(", ")", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", ")", ";", "long", "time", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "synchronized", "(", "sSyncLock", ")", "{", "for", "(", "long", "mailboxId", ":", "mSyncErrorMap", ".", "keySet", "(", ")", ")", "{", "Mailbox", "m", "=", "Mailbox", ".", "restoreMailboxWithId", "(", "this", ",", "mailboxId", ")", ";", "if", "(", "m", "=", "=", "null", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", "+", "mailboxId", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "SyncError", "error", "=", "mSyncErrorMap", ".", "get", "(", "mailboxId", ")", ";", "log", "(", "\"", "<STR_LIT>", "\"", "+", "m", ".", "mDisplayName", "+", "\"", "<STR_LIT>", "\"", "+", "error", ".", "reason", "+", "\"", "<STR_LIT>", "\"", "+", "error", ".", "fatal", ")", ";", "if", "(", "error", ".", "holdEndTime", ">", "0", ")", "{", "log", "(", "\"", "<STR_LIT>", "\"", "+", "(", "(", "error", ".", "holdEndTime", "-", "time", ")", "/", "<NUM_LIT:1000>", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "}", "}", "}", "</s>"]
["<s>", "static", "public", "String", "millisToEasDateTime", "(", "long", "millis", ",", "TimeZone", "tz", ",", "boolean", "withTime", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "GregorianCalendar", "cal", "=", "new", "GregorianCalendar", "(", "tz", ")", ";", "cal", ".", "setTimeInMillis", "(", "millis", ")", ";", "sb", ".", "append", "(", "cal", ".", "get", "(", "Calendar", ".", "YEAR", ")", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "cal", ".", "get", "(", "Calendar", ".", "MONTH", ")", "+", "1", ")", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "cal", ".", "get", "(", "Calendar", ".", "DAY_OF_MONTH", ")", ")", ")", ";", "if", "(", "withTime", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT>", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "cal", ".", "get", "(", "Calendar", ".", "HOUR_OF_DAY", ")", ")", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "cal", ".", "get", "(", "Calendar", ".", "MINUTE", ")", ")", ")", ";", "sb", ".", "append", "(", "formatTwo", "(", "cal", ".", "get", "(", "Calendar", ".", "SECOND", ")", ")", ")", ";", "if", "(", "tz", "=", "=", "sGmtTimeZone", ")", "{", "sb", ".", "append", "(", "<CHAR_LIT:Z>", ")", ";", "}", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testCreateMessageForEntity_Invite_AllDay", "(", ")", "throws", "IOException", "{", "String", "title", "=", "\"", "<STR_LIT>", "\"", ";", "Entity", "entity", "=", "setupTestEventEntity", "(", "ORGANIZER", ",", "ATTENDEE", ",", "title", ")", ";", "entity", ".", "getEntityValues", "(", ")", ".", "put", "(", "Events", ".", "ALL_DAY", ",", "1", ")", ";", "Account", "account", "=", "new", "Account", "(", ")", ";", "account", ".", "mEmailAddress", "=", "ORGANIZER", ";", "String", "uid", "=", "\"", "<STR_LIT>", "\"", ";", "Message", "msg", "=", "CalendarUtilities", ".", "createMessageForEntity", "(", "mContext", ",", "entity", ",", "Message", ".", "FLAG_OUTGOING_MEETING_INVITE", ",", "uid", ",", "account", ")", ";", "assertNotNull", "(", "msg", ")", ";", "assertEquals", "(", "Address", ".", "pack", "(", "new", "Address", "[", "]", "{", "new", "Address", "(", "ATTENDEE", ")", "}", ")", ",", "msg", ".", "mTo", ")", ";", "String", "accept", "=", "getContext", "(", ")", ".", "getResources", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "meeting_invitation", ",", "title", ")", ";", "assertEquals", "(", "accept", ",", "msg", ".", "mSubject", ")", ";", "assertNotNull", "(", "msg", ".", "mAttachments", ")", ";", "assertEquals", "(", "1", ",", "msg", ".", "mAttachments", ".", "size", "(", ")", ")", ";", "Attachment", "att", "=", "msg", ".", "mAttachments", ".", "get", "(", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "att", ".", "mFileName", ")", ";", "assertEquals", "(", "Attachment", ".", "FLAG_ICS_ALTERNATIVE_PART", ",", "att", ".", "mFlags", "&", "Attachment", ".", "FLAG_ICS_ALTERNATIVE_PART", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "att", ".", "mMimeType", ")", ";", "assertNotNull", "(", "att", ".", "mContentBytes", ")", ";", "assertEquals", "(", "att", ".", "mSize", ",", "att", ".", "mContentBytes", ".", "length", ")", ";", "BlockHash", "vcalendar", "=", "parseIcsContent", "(", "att", ".", "mContentBytes", ")", ";", "assertNotNull", "(", "vcalendar", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vcalendar", ".", "name", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vcalendar", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "1", ",", "vcalendar", ".", "blocks", ".", "size", "(", ")", ")", ";", "BlockHash", "vevent", "=", "vcalendar", ".", "blocks", ".", "get", "(", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "name", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:0>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "uid", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", "+", "ATTENDEE", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SmallTest", "public", "void", "testFieldIsolation", "(", ")", "{", "PolicySet", "p", "=", "new", "PolicySet", "(", "PolicySet", ".", "PASSWORD_LENGTH_MAX", ",", "0", ",", "0", ",", "0", ",", "false", ")", ";", "assertEquals", "(", "PolicySet", ".", "PASSWORD_LENGTH_MAX", ",", "p", ".", "mMinPasswordLength", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mPasswordMode", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mMaxPasswordFails", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mMaxScreenLockTime", ")", ";", "assertFalse", "(", "p", ".", "mRequireRemoteWipe", ")", ";", "p", "=", "new", "PolicySet", "(", "0", ",", "PolicySet", ".", "PASSWORD_MODE_STRONG", ",", "0", ",", "0", ",", "false", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mMinPasswordLength", ")", ";", "assertEquals", "(", "PolicySet", ".", "PASSWORD_MODE_STRONG", ",", "p", ".", "mPasswordMode", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mMaxPasswordFails", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mMaxScreenLockTime", ")", ";", "assertFalse", "(", "p", ".", "mRequireRemoteWipe", ")", ";", "p", "=", "new", "PolicySet", "(", "0", ",", "0", ",", "PolicySet", ".", "PASSWORD_MAX_FAILS_MAX", ",", "0", ",", "false", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mMinPasswordLength", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mPasswordMode", ")", ";", "assertEquals", "(", "PolicySet", ".", "PASSWORD_MAX_FAILS_MAX", ",", "p", ".", "mMaxPasswordFails", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mMaxScreenLockTime", ")", ";", "assertFalse", "(", "p", ".", "mRequireRemoteWipe", ")", ";", "p", "=", "new", "PolicySet", "(", "0", ",", "0", ",", "0", ",", "PolicySet", ".", "SCREEN_LOCK_TIME_MAX", ",", "false", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mMinPasswordLength", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mPasswordMode", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mMaxPasswordFails", ")", ";", "assertEquals", "(", "PolicySet", ".", "SCREEN_LOCK_TIME_MAX", ",", "p", ".", "mMaxScreenLockTime", ")", ";", "assertFalse", "(", "p", ".", "mRequireRemoteWipe", ")", ";", "p", "=", "new", "PolicySet", "(", "0", ",", "0", ",", "0", ",", "0", ",", "true", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mMinPasswordLength", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mPasswordMode", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mMaxPasswordFails", ")", ";", "assertEquals", "(", "0", ",", "p", ".", "mMaxScreenLockTime", ")", ";", "assertTrue", "(", "p", ".", "mRequireRemoteWipe", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setTlsAllowed", "(", "boolean", "tlsAllowed", ")", "{", "mTlsAllowed", "=", "tlsAllowed", ";", "}", "</s>"]
["<s>", "public", "boolean", "getTlsAllowed", "(", ")", "{", "return", "mTlsAllowed", ";", "}", "</s>"]
["<s>", "public", "void", "setSslAllowed", "(", "boolean", "sslAllowed", ")", "{", "mSslAllowed", "=", "sslAllowed", ";", "}", "</s>"]
["<s>", "public", "boolean", "getSslAllowed", "(", ")", "{", "return", "mSslAllowed", ";", "}", "</s>"]
["<s>", "public", "boolean", "getTlsReopened", "(", ")", "{", "return", "mTlsReopened", ";", "}", "</s>"]
["<s>", "public", "void", "testTlsLogin", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockDash", "=", "new", "MockTransport", "(", ")", ";", "mockDash", ".", "setSecurity", "(", "Transport", ".", "CONNECTION_SECURITY_TLS", ",", "false", ")", ";", "mockDash", ".", "setTlsAllowed", "(", "true", ")", ";", "mSender", ".", "setTransport", "(", "mockDash", ")", ";", "mockDash", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockDash", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockDash", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockDash", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockDash", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockDash", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockDash", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockDash", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockDash", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mSender", ".", "open", "(", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "mockDash", ".", "getTlsReopened", "(", ")", ")", ";", "MockTransport", "mockSpace", "=", "new", "MockTransport", "(", ")", ";", "mockSpace", ".", "setSecurity", "(", "Transport", ".", "CONNECTION_SECURITY_TLS", ",", "false", ")", ";", "mockSpace", ".", "setTlsAllowed", "(", "true", ")", ";", "mSender", ".", "setTransport", "(", "mockSpace", ")", ";", "mockSpace", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockSpace", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockSpace", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockSpace", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockSpace", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockSpace", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockSpace", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockSpace", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockSpace", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mSender", ".", "open", "(", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "mockSpace", ".", "getTlsReopened", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testTlsRequiredNotSupported", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "new", "MockTransport", "(", ")", ";", "mockTransport", ".", "setSecurity", "(", "Transport", ".", "CONNECTION_SECURITY_TLS", ",", "false", ")", ";", "mSender", ".", "setTransport", "(", "mockTransport", ")", ";", "mockTransport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockTransport", ".", "expect", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "setupOpen", "(", "mockTransport", ",", "\"", "\"", ")", ";", "try", "{", "mSender", ".", "open", "(", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "MessagingException", "me", ")", "{", "}", "}", "</s>"]
["<s>", "protected", "HttpResponse", "executePostWithTimeout", "(", "HttpClient", "client", ",", "HttpPost", "method", ",", "int", "timeout", ")", "throws", "IOException", "{", "return", "executePostWithTimeout", "(", "client", ",", "method", ",", "timeout", ",", "false", ")", ";", "}", "</s>"]
["<s>", "protected", "HttpResponse", "executePostWithTimeout", "(", "HttpClient", "client", ",", "HttpPost", "method", ",", "int", "timeout", ",", "boolean", "isPingCommand", ")", "throws", "IOException", "{", "synchronized", "(", "getSynchronizer", "(", ")", ")", "{", "mPendingPost", "=", "method", ";", "long", "alarmTime", "=", "timeout", "+", "(", "<NUM_LIT:10>", "*", "SECONDS", ")", ";", "if", "(", "isPingCommand", ")", "{", "SyncManager", ".", "runAsleep", "(", "mMailboxId", ",", "alarmTime", ")", ";", "}", "else", "{", "SyncManager", ".", "setWatchdogAlarm", "(", "mMailboxId", ",", "alarmTime", ")", ";", "}", "}", "try", "{", "return", "client", ".", "execute", "(", "method", ")", ";", "}", "finally", "{", "synchronized", "(", "getSynchronizer", "(", ")", ")", "{", "if", "(", "isPingCommand", ")", "{", "SyncManager", ".", "runAwake", "(", "mMailboxId", ")", ";", "}", "else", "{", "SyncManager", ".", "clearWatchdogAlarm", "(", "mMailboxId", ")", ";", "}", "mPendingPost", "=", "null", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "void", "actionSelectAccountType", "(", "Activity", "fromActivity", ",", "Account", "account", ",", "boolean", "makeDefault", ",", "boolean", "easFlowMode", ",", "boolean", "allowAutoDiscover", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSetupAccountType", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "i", ".", "putExtra", "(", "EXTRA_MAKE_DEFAULT", ",", "makeDefault", ")", ";", "i", ".", "putExtra", "(", "EXTRA_EAS_FLOW", ",", "easFlowMode", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ALLOW_AUTODISCOVER", ",", "allowAutoDiscover", ")", ";", "fromActivity", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "actionIncomingSettings", "(", "Activity", "fromActivity", ",", "Account", "account", ",", "boolean", "makeDefault", ",", "boolean", "easFlowMode", ",", "boolean", "allowAutoDiscover", ")", "{", "Intent", "i", "=", "new", "Intent", "(", "fromActivity", ",", "AccountSetupExchange", ".", "class", ")", ";", "i", ".", "putExtra", "(", "EXTRA_ACCOUNT", ",", "account", ")", ";", "i", ".", "putExtra", "(", "EXTRA_MAKE_DEFAULT", ",", "makeDefault", ")", ";", "i", ".", "putExtra", "(", "EXTRA_EAS_FLOW", ",", "easFlowMode", ")", ";", "if", "(", "!", "allowAutoDiscover", ")", "{", "i", ".", "putExtra", "(", "EXTRA_DISABLE_AUTO_DISCOVER", ",", "true", ")", ";", "}", "fromActivity", ".", "startActivity", "(", "i", ")", ";", "}", "</s>"]
["<s>", "public", "final", "void", "setFlagDirectlyForTest", "(", "Flag", "flag", ",", "boolean", "set", ")", "throws", "MessagingException", "{", "if", "(", "set", ")", "{", "getFlagSet", "(", ")", ".", "add", "(", "flag", ")", ";", "}", "else", "{", "getFlagSet", "(", ")", ".", "remove", "(", "flag", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testAppendMessages", "(", ")", "throws", "Exception", "{", "MockTransport", "mock", "=", "openAndInjectMockTransport", "(", ")", ";", "setupOpenFolder", "(", "mock", ")", ";", "mFolder", ".", "open", "(", "OpenMode", ".", "READ_WRITE", ",", "null", ")", ";", "ImapMessage", "message", "=", "(", "ImapMessage", ")", "mFolder", ".", "createMessage", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "message", ".", "setFrom", "(", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "message", ".", "setRecipient", "(", "RecipientType", ".", "TO", ",", "new", "Address", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "message", ".", "setMessageId", "(", "\"", "<STR_LIT>", "\"", ")", ";", "message", ".", "setFlagDirectlyForTest", "(", "Flag", ".", "SEEN", ",", "true", ")", ";", "message", ".", "setBody", "(", "new", "TextBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "mock", ".", "expect", "(", "getNextTag", "(", "false", ")", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:\\\">", "<STR_LIT:\\\\>", "<STR_LIT:(>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:}>", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", "}", ")", ";", "mock", ".", "expectLiterally", "(", "\"", "<STR_LIT>", "\"", ",", "NO_REPLY", ")", ";", "mock", ".", "expectLiterally", "(", "\"", "<STR_LIT>", "\"", ",", "NO_REPLY", ")", ";", "mock", ".", "expectLiterally", "(", "\"", "<STR_LIT>", "\"", ",", "NO_REPLY", ")", ";", "mock", ".", "expectLiterally", "(", "\"", "<STR_LIT>", "\"", ",", "NO_REPLY", ")", ";", "mock", ".", "expectLiterally", "(", "\"", "<STR_LIT>", "\"", ",", "NO_REPLY", ")", ";", "mock", ".", "expectLiterally", "(", "\"", "<STR_LIT>", "\"", ",", "NO_REPLY", ")", ";", "mock", ".", "expectLiterally", "(", "\"", "\"", ",", "NO_REPLY", ")", ";", "mock", ".", "expectLiterally", "(", "\"", "<STR_LIT>", "\"", ",", "NO_REPLY", ")", ";", "mock", ".", "expectLiterally", "(", "\"", "\"", ",", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "getNextTag", "(", "true", ")", "+", "\"", "<STR_LIT>", "\"", "}", ")", ";", "mFolder", ".", "appendMessages", "(", "new", "Message", "[", "]", "{", "message", "}", ")", ";", "mock", ".", "close", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "message", ".", "getUid", "(", ")", ")", ";", "assertEquals", "(", "<NUM_LIT:7>", ",", "mFolder", ".", "getMessageCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "expectLiterally", "(", "String", "literal", ",", "String", "[", "]", "responses", ")", "{", "expect", "(", "\"", "<STR_LIT>", "\"", "+", "Pattern", ".", "quote", "(", "literal", ")", "+", "\"", "<STR_LIT:$>", "\"", ",", "responses", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "cancelTaskInterrupt", "(", "AsyncTask", "<", "?", ",", "?", ",", "?", ">", "task", ")", "{", "cancelTask", "(", "task", ",", "true", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkMimeVersion", "(", "org", ".", "apache", ".", "james", ".", "mime4j", ".", "message", ".", "Message", "mimeMessage", ")", "{", "Header", "header", "=", "mimeMessage", ".", "getHeader", "(", ")", ";", "Field", "contentType", "=", "header", ".", "getField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertTrue", "(", "contentType", ".", "getBody", "(", ")", ".", "equals", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "addOrganizerToAttendees", "(", "CalendarOperations", "ops", ",", "long", "eventId", ",", "String", "organizerName", ",", "String", "organizerEmail", ")", "{", "if", "(", "organizerName", "!", "=", "null", "|", "|", "organizerEmail", "!", "=", "null", ")", "{", "ContentValues", "attendeeCv", "=", "new", "ContentValues", "(", ")", ";", "if", "(", "organizerName", "!", "=", "null", ")", "{", "attendeeCv", ".", "put", "(", "Attendees", ".", "ATTENDEE_NAME", ",", "organizerName", ")", ";", "}", "if", "(", "organizerEmail", "!", "=", "null", ")", "{", "attendeeCv", ".", "put", "(", "Attendees", ".", "ATTENDEE_EMAIL", ",", "organizerEmail", ")", ";", "}", "attendeeCv", ".", "put", "(", "Attendees", ".", "ATTENDEE_RELATIONSHIP", ",", "Attendees", ".", "RELATIONSHIP_ORGANIZER", ")", ";", "attendeeCv", ".", "put", "(", "Attendees", ".", "ATTENDEE_TYPE", ",", "Attendees", ".", "TYPE_REQUIRED", ")", ";", "if", "(", "eventId", "<", "0", ")", "{", "ops", ".", "newAttendee", "(", "attendeeCv", ")", ";", "}", "else", "{", "ops", ".", "updatedAttendee", "(", "attendeeCv", ",", "eventId", ")", ";", "}", "}", "}", "</s>"]
["<s>", "static", "public", "GregorianCalendar", "getAllDayCalendar", "(", "long", "time", ",", "TimeZone", "timeZone", ")", "{", "GregorianCalendar", "calendar", "=", "new", "GregorianCalendar", "(", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT:GMT>", "\"", ")", ")", ";", "calendar", ".", "setTimeInMillis", "(", "time", ")", ";", "GregorianCalendar", "allDayCalendar", "=", "new", "GregorianCalendar", "(", "timeZone", ")", ";", "allDayCalendar", ".", "set", "(", "calendar", ".", "get", "(", "GregorianCalendar", ".", "YEAR", ")", ",", "calendar", ".", "get", "(", "GregorianCalendar", ".", "MONTH", ")", ",", "calendar", ".", "get", "(", "GregorianCalendar", ".", "DATE", ")", ",", "0", ",", "0", ",", "0", ")", ";", "return", "allDayCalendar", ";", "}", "</s>"]
["<s>", "private", "void", "sendDeclinedEmail", "(", "Entity", "entity", ",", "String", "clientId", ")", "{", "Message", "msg", "=", "CalendarUtilities", ".", "createMessageForEntity", "(", "mContext", ",", "entity", ",", "Message", ".", "FLAG_OUTGOING_MEETING_DECLINE", ",", "clientId", ",", "mAccount", ")", ";", "if", "(", "msg", "!", "=", "null", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "msg", ".", "mTo", ")", ";", "mOutgoingMailList", ".", "add", "(", "msg", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testRetrVariants", "(", ")", "throws", "MessagingException", "{", "MockTransport", "mockTransport", "=", "openAndInjectMockTransport", "(", ")", ";", "openFolderWithMessage", "(", "mockTransport", ")", ";", "setupUidlSequence", "(", "mockTransport", ",", "<NUM_LIT:2>", ")", ";", "Message", "[", "]", "messages", "=", "mFolder", ".", "getMessages", "(", "1", ",", "<NUM_LIT:2>", ",", "null", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "messages", ".", "length", ")", ";", "setupListSequence", "(", "mockTransport", ",", "<NUM_LIT:2>", ")", ";", "FetchProfile", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "FLAGS", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "ENVELOPE", ")", ";", "mFolder", ".", "fetch", "(", "messages", ",", "fp", ",", "null", ")", ";", "for", "(", "Message", "message", ":", "messages", ")", "{", "message", ".", "getRecipients", "(", "RecipientType", ".", "TO", ")", ";", "message", ".", "getRecipients", "(", "RecipientType", ".", "CC", ")", ";", "message", ".", "getRecipients", "(", "RecipientType", ".", "BCC", ")", ";", "}", "Message", "[", "]", "singleMessage", "=", "new", "Message", "[", "]", "{", "messages", "[", "0", "]", "}", ";", "setupSingleMessageTop", "(", "mockTransport", ",", "1", ",", "true", ",", "true", ")", ";", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "BODY_SANE", ")", ";", "mFolder", ".", "fetch", "(", "singleMessage", ",", "fp", ",", "null", ")", ";", "checkFetchedMessage", "(", "singleMessage", "[", "0", "]", ",", "1", ",", "false", ")", ";", "singleMessage", "[", "0", "]", "=", "messages", "[", "1", "]", ";", "setupSingleMessageTop", "(", "mockTransport", ",", "<NUM_LIT:2>", ",", "true", ",", "false", ")", ";", "fp", "=", "new", "FetchProfile", "(", ")", ";", "fp", ".", "add", "(", "FetchProfile", ".", "Item", ".", "BODY_SANE", ")", ";", "mFolder", ".", "fetch", "(", "singleMessage", ",", "fp", ",", "null", ")", ";", "checkFetchedMessage", "(", "singleMessage", "[", "0", "]", ",", "<NUM_LIT:2>", ",", "false", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "setupSingleMessageTop", "(", "MockTransport", "transport", ",", "int", "msgNum", ",", "boolean", "topTry", ",", "boolean", "topSupported", ")", "{", "String", "msgNumString", "=", "Integer", ".", "toString", "(", "msgNum", ")", ";", "String", "topCommand", "=", "\"", "<STR_LIT>", "\"", "+", "msgNumString", "+", "\"", "<STR_LIT>", "\"", ";", "String", "retrCommand", "=", "\"", "<STR_LIT>", "\"", "+", "msgNumString", ";", "if", "(", "topTry", ")", "{", "if", "(", "topSupported", ")", "{", "transport", ".", "expect", "(", "topCommand", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "transport", ".", "expect", "(", "topCommand", ",", "\"", "<STR_LIT>", "\"", ")", ";", "transport", ".", "expect", "(", "retrCommand", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "else", "{", "transport", ".", "expect", "(", "retrCommand", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "transport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "transport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "transport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "transport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "transport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "transport", ".", "expect", "(", "null", ",", "\"", "\"", ")", ";", "transport", ".", "expect", "(", "null", ",", "\"", "<STR_LIT:.>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "isSecurityHold", "(", "long", "accountId", ")", "{", "Cursor", "c", "=", "MessageList", ".", "this", ".", "getContentResolver", "(", ")", ".", "query", "(", "ContentUris", ".", "withAppendedId", "(", "Account", ".", "CONTENT_URI", ",", "accountId", ")", ",", "ACCOUNT_INFO_PROJECTION", ",", "null", ",", "null", ",", "null", ")", ";", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "int", "flags", "=", "c", ".", "getInt", "(", "ACCOUNT_INFO_COLUMN_FLAGS", ")", ";", "if", "(", "(", "flags", "&", "Account", ".", "FLAGS_SECURITY_HOLD", ")", "!", "=", "0", ")", "{", "return", "true", ";", "}", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "onActivityResult", "(", "int", "requestCode", ",", "int", "resultCode", ",", "Intent", "data", ")", "{", "switch", "(", "requestCode", ")", "{", "case", "REQUEST_SECURITY", ":", "onAccounts", "(", ")", ";", "}", "super", ".", "onActivityResult", "(", "requestCode", ",", "resultCode", ",", "data", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "run", "(", ")", "{", "SecurityPolicy", ".", "getInstance", "(", "AccountSecurity", ".", "this", ")", ".", "policiesRequired", "(", "accountId", ")", ";", "}", "</s>"]
["<s>", "static", "private", "void", "reloadFolderListFailed", "(", "long", "accountId", ")", "{", "try", "{", "callback", "(", ")", ".", "syncMailboxListStatus", "(", "accountId", ",", "EmailServiceStatus", ".", "ACCOUNT_UNINITIALIZED", ",", "0", ")", ";", "}", "catch", "(", "RemoteException", "e1", ")", "{", "}", "}", "</s>"]
["<s>", "static", "private", "void", "addAttendeeToMessage", "(", "SimpleIcsWriter", "ics", ",", "ArrayList", "<", "Address", ">", "toList", ",", "String", "attendeeName", ",", "String", "attendeeEmail", ",", "int", "messageFlag", ",", "Account", "account", ")", "{", "if", "(", "(", "messageFlag", "&", "Message", ".", "FLAG_OUTGOING_MEETING_REQUEST_MASK", ")", "!", "=", "0", ")", "{", "String", "icalTag", "=", "ICALENDAR_ATTENDEE_INVITE", ";", "if", "(", "(", "messageFlag", "&", "Message", ".", "FLAG_OUTGOING_MEETING_CANCEL", ")", "!", "=", "0", ")", "{", "icalTag", "=", "ICALENDAR_ATTENDEE_CANCEL", ";", "}", "if", "(", "attendeeName", "!", "=", "null", ")", "{", "icalTag", "+", "=", "\"", "<STR_LIT>", "\"", "+", "SimpleIcsWriter", ".", "quoteParamValue", "(", "attendeeName", ")", ";", "}", "ics", ".", "writeTag", "(", "icalTag", ",", "\"", "<STR_LIT>", "\"", "+", "attendeeEmail", ")", ";", "toList", ".", "add", "(", "attendeeName", "=", "=", "null", "?", "new", "Address", "(", "attendeeEmail", ")", ":", "new", "Address", "(", "attendeeEmail", ",", "attendeeName", ")", ")", ";", "}", "else", "if", "(", "attendeeEmail", ".", "equalsIgnoreCase", "(", "account", ".", "mEmailAddress", ")", ")", "{", "String", "icalTag", "=", "null", ";", "switch", "(", "messageFlag", ")", "{", "case", "Message", ".", "FLAG_OUTGOING_MEETING_ACCEPT", ":", "icalTag", "=", "ICALENDAR_ATTENDEE_ACCEPT", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_DECLINE", ":", "icalTag", "=", "ICALENDAR_ATTENDEE_DECLINE", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_TENTATIVE", ":", "icalTag", "=", "ICALENDAR_ATTENDEE_TENTATIVE", ";", "break", ";", "}", "if", "(", "icalTag", "!", "=", "null", ")", "{", "if", "(", "attendeeName", "!", "=", "null", ")", "{", "icalTag", "+", "=", "\"", "<STR_LIT>", "\"", "+", "SimpleIcsWriter", ".", "quoteParamValue", "(", "attendeeName", ")", ";", "}", "ics", ".", "writeTag", "(", "icalTag", ",", "\"", "<STR_LIT>", "\"", "+", "attendeeEmail", ")", ";", "}", "}", "}", "</s>"]
["<s>", "static", "public", "EmailContent", ".", "Message", "createMessageForEntity", "(", "Context", "context", ",", "Entity", "entity", ",", "int", "messageFlag", ",", "String", "uid", ",", "Account", "account", ",", "String", "specifiedAttendee", ")", "{", "ContentValues", "entityValues", "=", "entity", ".", "getEntityValues", "(", ")", ";", "ArrayList", "<", "NamedContentValues", ">", "subValues", "=", "entity", ".", "getSubValues", "(", ")", ";", "boolean", "isException", "=", "entityValues", ".", "containsKey", "(", "Events", ".", "ORIGINAL_EVENT", ")", ";", "boolean", "isReply", "=", "false", ";", "EmailContent", ".", "Message", "msg", "=", "new", "EmailContent", ".", "Message", "(", ")", ";", "msg", ".", "mFlags", "=", "messageFlag", ";", "msg", ".", "mTimeStamp", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "String", "method", ";", "if", "(", "(", "messageFlag", "&", "EmailContent", ".", "Message", ".", "FLAG_OUTGOING_MEETING_INVITE", ")", "!", "=", "0", ")", "{", "method", "=", "\"", "<STR_LIT>", "\"", ";", "}", "else", "if", "(", "(", "messageFlag", "&", "EmailContent", ".", "Message", ".", "FLAG_OUTGOING_MEETING_CANCEL", ")", "!", "=", "0", ")", "{", "method", "=", "\"", "<STR_LIT>", "\"", ";", "}", "else", "{", "method", "=", "\"", "<STR_LIT>", "\"", ";", "isReply", "=", "true", ";", "}", "try", "{", "SimpleIcsWriter", "ics", "=", "new", "SimpleIcsWriter", "(", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "method", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2.0>", "\"", ")", ";", "TimeZone", "vCalendarTimeZone", "=", "sGmtTimeZone", ";", "String", "vCalendarDateSuffix", "=", "\"", "\"", ";", "boolean", "allDayEvent", "=", "false", ";", "if", "(", "entityValues", ".", "containsKey", "(", "Events", ".", "ALL_DAY", ")", ")", "{", "Integer", "ade", "=", "entityValues", ".", "getAsInteger", "(", "Events", ".", "ALL_DAY", ")", ";", "allDayEvent", "=", "(", "ade", "!", "=", "null", ")", "&", "&", "(", "ade", "=", "=", "1", ")", ";", "if", "(", "allDayEvent", ")", "{", "vCalendarDateSuffix", "=", "\"", "<STR_LIT>", "\"", ";", "}", "}", "if", "(", "!", "isReply", "&", "&", "entityValues", ".", "containsKey", "(", "Events", ".", "RRULE", ")", "&", "&", "!", "allDayEvent", ")", "{", "vCalendarTimeZone", "=", "TimeZone", ".", "getDefault", "(", ")", ";", "timeZoneToVTimezone", "(", "vCalendarTimeZone", ",", "ics", ")", ";", "vCalendarDateSuffix", "=", "\"", "<STR_LIT>", "\"", "+", "vCalendarTimeZone", ".", "getID", "(", ")", ";", "}", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "uid", "=", "=", "null", ")", "{", "uid", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "_SYNC_DATA", ")", ";", "}", "if", "(", "uid", "!", "=", "null", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "uid", ")", ";", "}", "if", "(", "entityValues", ".", "containsKey", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "entityValues", ".", "getAsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "else", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "millisToEasDateTime", "(", "System", ".", "currentTimeMillis", "(", ")", ")", ")", ";", "}", "long", "startTime", "=", "entityValues", ".", "getAsLong", "(", "Events", ".", "DTSTART", ")", ";", "if", "(", "startTime", "!", "=", "0", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", "+", "vCalendarDateSuffix", ",", "millisToEasDateTime", "(", "startTime", ",", "vCalendarTimeZone", ",", "!", "allDayEvent", ")", ")", ";", "}", "if", "(", "isException", ")", "{", "long", "originalTime", "=", "entityValues", ".", "getAsLong", "(", "Events", ".", "ORIGINAL_INSTANCE_TIME", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", "+", "vCalendarDateSuffix", ",", "millisToEasDateTime", "(", "originalTime", ",", "vCalendarTimeZone", ",", "!", "allDayEvent", ")", ")", ";", "}", "if", "(", "!", "entityValues", ".", "containsKey", "(", "Events", ".", "DURATION", ")", ")", "{", "if", "(", "entityValues", ".", "containsKey", "(", "Events", ".", "DTEND", ")", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", "+", "vCalendarDateSuffix", ",", "millisToEasDateTime", "(", "entityValues", ".", "getAsLong", "(", "Events", ".", "DTEND", ")", ",", "vCalendarTimeZone", ",", "!", "allDayEvent", ")", ")", ";", "}", "}", "else", "{", "long", "durationMillis", "=", "HOURS", ";", "Duration", "duration", "=", "new", "Duration", "(", ")", ";", "try", "{", "duration", ".", "parse", "(", "entityValues", ".", "getAsString", "(", "Events", ".", "DURATION", ")", ")", ";", "}", "catch", "(", "ParseException", "e", ")", "{", "}", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", "+", "vCalendarDateSuffix", ",", "millisToEasDateTime", "(", "startTime", "+", "durationMillis", ",", "vCalendarTimeZone", ",", "!", "allDayEvent", ")", ")", ";", "}", "String", "location", "=", "null", ";", "if", "(", "entityValues", ".", "containsKey", "(", "Events", ".", "EVENT_LOCATION", ")", ")", "{", "location", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "EVENT_LOCATION", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "location", ")", ";", "}", "String", "sequence", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "_SYNC_VERSION", ")", ";", "if", "(", "sequence", "=", "=", "null", ")", "{", "sequence", "=", "\"", "<STR_LIT:0>", "\"", ";", "}", "int", "titleId", "=", "0", ";", "switch", "(", "messageFlag", ")", "{", "case", "Message", ".", "FLAG_OUTGOING_MEETING_INVITE", ":", "if", "(", "!", "sequence", ".", "equals", "(", "\"", "<STR_LIT:0>", "\"", ")", ")", "{", "titleId", "=", "R", ".", "string", ".", "meeting_updated", ";", "}", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_ACCEPT", ":", "titleId", "=", "R", ".", "string", ".", "meeting_accepted", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_DECLINE", ":", "titleId", "=", "R", ".", "string", ".", "meeting_declined", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_TENTATIVE", ":", "titleId", "=", "R", ".", "string", ".", "meeting_tentative", ";", "break", ";", "case", "Message", ".", "FLAG_OUTGOING_MEETING_CANCEL", ":", "titleId", "=", "R", ".", "string", ".", "meeting_canceled", ";", "break", ";", "}", "Resources", "resources", "=", "context", ".", "getResources", "(", ")", ";", "String", "title", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "TITLE", ")", ";", "if", "(", "title", "=", "=", "null", ")", "{", "title", "=", "\"", "\"", ";", "}", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "title", ")", ";", "if", "(", "titleId", "=", "=", "0", ")", "{", "msg", ".", "mSubject", "=", "title", ";", "}", "else", "{", "msg", ".", "mSubject", "=", "resources", ".", "getString", "(", "titleId", ",", "title", ")", ";", "}", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "if", "(", "isException", "&", "&", "!", "isReply", ")", "{", "Date", "date", "=", "new", "Date", "(", "entityValues", ".", "getAsLong", "(", "Events", ".", "ORIGINAL_INSTANCE_TIME", ")", ")", ";", "String", "dateString", "=", "DateFormat", ".", "getDateInstance", "(", ")", ".", "format", "(", "date", ")", ";", "if", "(", "titleId", "=", "=", "R", ".", "string", ".", "meeting_canceled", ")", "{", "sb", ".", "append", "(", "resources", ".", "getString", "(", "R", ".", "string", ".", "exception_cancel", ",", "dateString", ")", ")", ";", "}", "else", "{", "sb", ".", "append", "(", "resources", ".", "getString", "(", "R", ".", "string", ".", "exception_updated", ",", "dateString", ")", ")", ";", "}", "sb", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "String", "text", "=", "CalendarUtilities", ".", "buildMessageTextFromEntityValues", "(", "context", ",", "entityValues", ",", "sb", ")", ";", "if", "(", "text", ".", "length", "(", ")", ">", "0", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "text", ")", ";", "}", "msg", ".", "mText", "=", "text", ";", "if", "(", "!", "isReply", ")", "{", "if", "(", "entityValues", ".", "containsKey", "(", "Events", ".", "ALL_DAY", ")", ")", "{", "Integer", "ade", "=", "entityValues", ".", "getAsInteger", "(", "Events", ".", "ALL_DAY", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "ade", "=", "=", "0", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", ")", ";", "}", "String", "rrule", "=", "entityValues", ".", "getAsString", "(", "Events", ".", "RRULE", ")", ";", "if", "(", "rrule", "!", "=", "null", ")", "{", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "rrule", ")", ";", "}", "}", "String", "organizerName", "=", "null", ";", "String", "organizerEmail", "=", "null", ";", "ArrayList", "<", "Address", ">", "toList", "=", "new", "ArrayList", "<", "Address", ">", "(", ")", ";", "for", "(", "NamedContentValues", "ncv", ":", "subValues", ")", "{", "Uri", "ncvUri", "=", "ncv", ".", "uri", ";", "ContentValues", "ncvValues", "=", "ncv", ".", "values", ";", "if", "(", "ncvUri", ".", "equals", "(", "Attendees", ".", "CONTENT_URI", ")", ")", "{", "Integer", "relationship", "=", "ncvValues", ".", "getAsInteger", "(", "Attendees", ".", "ATTENDEE_RELATIONSHIP", ")", ";", "if", "(", "relationship", "!", "=", "null", "&", "&", "ncvValues", ".", "containsKey", "(", "Attendees", ".", "ATTENDEE_EMAIL", ")", ")", "{", "if", "(", "relationship", "=", "=", "Attendees", ".", "RELATIONSHIP_ORGANIZER", ")", "{", "organizerName", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_NAME", ")", ";", "organizerEmail", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_EMAIL", ")", ";", "continue", ";", "}", "String", "attendeeEmail", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_EMAIL", ")", ";", "String", "attendeeName", "=", "ncvValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_NAME", ")", ";", "if", "(", "attendeeEmail", "=", "=", "null", ")", "continue", ";", "if", "(", "(", "specifiedAttendee", "!", "=", "null", ")", "&", "&", "!", "attendeeEmail", ".", "equalsIgnoreCase", "(", "specifiedAttendee", ")", ")", "{", "continue", ";", "}", "addAttendeeToMessage", "(", "ics", ",", "toList", ",", "attendeeName", ",", "attendeeEmail", ",", "messageFlag", ",", "account", ")", ";", "}", "}", "}", "if", "(", "toList", ".", "isEmpty", "(", ")", "&", "&", "(", "specifiedAttendee", "!", "=", "null", ")", ")", "{", "addAttendeeToMessage", "(", "ics", ",", "toList", ",", "null", ",", "specifiedAttendee", ",", "messageFlag", ",", "account", ")", ";", "}", "if", "(", "organizerEmail", "!", "=", "null", ")", "{", "String", "icalTag", "=", "\"", "<STR_LIT>", "\"", ";", "if", "(", "organizerName", "!", "=", "null", ")", "{", "icalTag", "+", "=", "\"", "<STR_LIT>", "\"", "+", "SimpleIcsWriter", ".", "quoteParamValue", "(", "organizerName", ")", ";", "}", "ics", ".", "writeTag", "(", "icalTag", ",", "\"", "<STR_LIT>", "\"", "+", "organizerEmail", ")", ";", "if", "(", "isReply", ")", "{", "toList", ".", "add", "(", "organizerName", "=", "=", "null", "?", "new", "Address", "(", "organizerEmail", ")", ":", "new", "Address", "(", "organizerEmail", ",", "organizerName", ")", ")", ";", "}", "}", "if", "(", "toList", ".", "isEmpty", "(", ")", ")", "return", "null", ";", "Address", "[", "]", "toArray", "=", "new", "Address", "[", "toList", ".", "size", "(", ")", "]", ";", "int", "i", "=", "0", ";", "for", "(", "Address", "address", ":", "toList", ")", "{", "toArray", "[", "i", "+", "+", "]", "=", "address", ";", "}", "msg", ".", "mTo", "=", "Address", ".", "pack", "(", "toArray", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "(", "messageFlag", "=", "=", "Message", ".", "FLAG_OUTGOING_MEETING_CANCEL", ")", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:5>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "sequence", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "ics", ".", "writeTag", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Attachment", "att", "=", "new", "Attachment", "(", ")", ";", "att", ".", "mContentBytes", "=", "ics", ".", "getBytes", "(", ")", ";", "att", ".", "mMimeType", "=", "\"", "<STR_LIT>", "\"", "+", "method", ";", "att", ".", "mFileName", "=", "\"", "<STR_LIT>", "\"", ";", "att", ".", "mSize", "=", "att", ".", "mContentBytes", ".", "length", ";", "att", ".", "mFlags", "=", "Attachment", ".", "FLAG_ICS_ALTERNATIVE_PART", ";", "msg", ".", "mAttachments", "=", "new", "ArrayList", "<", "Attachment", ">", "(", ")", ";", "msg", ".", "mAttachments", ".", "add", "(", "att", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "Log", ".", "w", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "null", ";", "}", "return", "msg", ";", "}", "</s>"]
["<s>", "static", "public", "EmailContent", ".", "Message", "createMessageForEventId", "(", "Context", "context", ",", "long", "eventId", ",", "int", "messageFlag", ",", "String", "uid", ",", "Account", "account", ",", "String", "specifiedAttendee", ")", "throws", "RemoteException", "{", "ContentResolver", "cr", "=", "context", ".", "getContentResolver", "(", ")", ";", "EntityIterator", "eventIterator", "=", "EventsEntity", ".", "newEntityIterator", "(", "cr", ".", "query", "(", "ContentUris", ".", "withAppendedId", "(", "Events", ".", "CONTENT_URI", ".", "buildUpon", "(", ")", ".", "appendQueryParameter", "(", "android", ".", "provider", ".", "Calendar", ".", "CALLER_IS_SYNCADAPTER", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ",", "eventId", ")", ",", "null", ",", "null", ",", "null", ",", "null", ")", ",", "cr", ")", ";", "try", "{", "while", "(", "eventIterator", ".", "hasNext", "(", ")", ")", "{", "Entity", "entity", "=", "eventIterator", ".", "next", "(", ")", ";", "return", "createMessageForEntity", "(", "context", ",", "entity", ",", "messageFlag", ",", "uid", ",", "account", ",", "specifiedAttendee", ")", ";", "}", "}", "finally", "{", "eventIterator", ".", "close", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "File", "getFileStreamPath", "(", "String", "name", ")", "{", "isGetFileStreamPathCalled", "=", "true", ";", "return", "super", ".", "getFileStreamPath", "(", "name", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetDeviceId", "(", ")", "throws", "Exception", "{", "final", "MyContext", "context", "=", "new", "MyContext", "(", "getContext", "(", ")", ")", ";", "final", "String", "id", "=", "SyncManager", ".", "getDeviceId", "(", "context", ")", ";", "assertTrue", "(", "id", ".", "matches", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "context", ".", "isGetFileStreamPathCalled", "=", "false", ";", "final", "String", "cachedId", "=", "SyncManager", ".", "getDeviceId", "(", "context", ")", ";", "assertEquals", "(", "id", ",", "cachedId", ")", ";", "assertFalse", "(", "context", ".", "isGetFileStreamPathCalled", ")", ";", "}", "</s>"]
["<s>", "public", "static", "synchronized", "void", "setNotifyUiAccountsChanged", "(", "boolean", "setFlag", ")", "{", "sAccountsChangedNotification", "=", "setFlag", ";", "}", "</s>"]
["<s>", "public", "static", "synchronized", "boolean", "getNotifyUiAccountsChanged", "(", ")", "{", "return", "sAccountsChangedNotification", ";", "}", "</s>"]
["<s>", "static", "int", "getColorIndexFromAccountId", "(", "long", "accountId", ")", "{", "return", "Math", ".", "abs", "(", "(", "int", ")", "(", "accountId", "-", "1", ")", "%", "ACCOUNT_COLOR_CHIP_RES_IDS", ".", "length", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetColorIndexFromAccountId", "(", ")", "{", "assertEquals", "(", "0", ",", "Email", ".", "getColorIndexFromAccountId", "(", "1", ")", ")", ";", "assertEquals", "(", "1", ",", "Email", ".", "getColorIndexFromAccountId", "(", "<NUM_LIT:2>", ")", ")", ";", "assertTrue", "(", "Email", ".", "getColorIndexFromAccountId", "(", "-", "<NUM_LIT:5>", ")", ">", "=", "0", ")", ";", "for", "(", "int", "i", "=", "-", "<NUM_LIT:100>", ";", "i", "<", "<NUM_LIT:100>", ";", "i", "+", "+", ")", "{", "Email", ".", "getAccountColorResourceId", "(", "i", ")", ";", "Email", ".", "getAccountColor", "(", "i", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "getConsistentDeviceId", "(", "Context", "context", ")", "{", "final", "String", "deviceId", ";", "try", "{", "TelephonyManager", "tm", "=", "(", "TelephonyManager", ")", "context", ".", "getSystemService", "(", "Context", ".", "TELEPHONY_SERVICE", ")", ";", "if", "(", "tm", "=", "=", "null", ")", "{", "return", "null", ";", "}", "deviceId", "=", "tm", ".", "getDeviceId", "(", ")", ";", "if", "(", "deviceId", "=", "=", "null", ")", "{", "return", "null", ";", "}", "}", "catch", "(", "Exception", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "e", ".", "getMessage", "(", ")", ")", ";", "return", "null", ";", "}", "final", "MessageDigest", "sha", ";", "try", "{", "sha", "=", "MessageDigest", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "NoSuchAlgorithmException", "impossible", ")", "{", "return", "null", ";", "}", "sha", ".", "update", "(", "Utility", ".", "toUtf8", "(", "deviceId", ")", ")", ";", "final", "int", "hash", "=", "getSmallHashFromSha1", "(", "sha", ".", "digest", "(", ")", ")", ";", "return", "Integer", ".", "toString", "(", "hash", ")", ";", "}", "</s>"]
["<s>", "static", "int", "getSmallHashFromSha1", "(", "byte", "[", "]", "sha1", ")", "{", "final", "int", "offset", "=", "sha1", "[", "<NUM_LIT>", "]", "&", "<NUM_LIT>", ";", "return", "(", "(", "sha1", "[", "offset", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:24>", ")", "|", "(", "(", "sha1", "[", "offset", "+", "1", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:16>", ")", "|", "(", "(", "sha1", "[", "offset", "+", "<NUM_LIT:2>", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:8>", ")", "|", "(", "(", "sha1", "[", "offset", "+", "<NUM_LIT:3>", "]", "&", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "static", "private", "String", "getDeviceIdInternal", "(", "Context", "context", ")", "throws", "IOException", "{", "if", "(", "INSTANCE", "=", "=", "null", "&", "&", "context", "=", "=", "null", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "if", "(", "context", "=", "=", "null", ")", "{", "context", "=", "INSTANCE", ";", "}", "try", "{", "File", "f", "=", "context", ".", "getFileStreamPath", "(", "\"", "<STR_LIT:Name>", "\"", ")", ";", "BufferedReader", "rdr", "=", "null", ";", "String", "id", ";", "if", "(", "f", ".", "exists", "(", ")", "&", "&", "f", ".", "canRead", "(", ")", ")", "{", "rdr", "=", "new", "BufferedReader", "(", "new", "FileReader", "(", "f", ")", ",", "<NUM_LIT>", ")", ";", "id", "=", "rdr", ".", "readLine", "(", ")", ";", "rdr", ".", "close", "(", ")", ";", "return", "id", ";", "}", "else", "if", "(", "f", ".", "createNewFile", "(", ")", ")", "{", "BufferedWriter", "w", "=", "new", "BufferedWriter", "(", "new", "FileWriter", "(", "f", ")", ",", "<NUM_LIT>", ")", ";", "final", "String", "consistentDeviceId", "=", "Utility", ".", "getConsistentDeviceId", "(", "context", ")", ";", "if", "(", "consistentDeviceId", "!", "=", "null", ")", "{", "id", "=", "\"", "<STR_LIT>", "\"", "+", "consistentDeviceId", ";", "}", "else", "{", "id", "=", "\"", "<STR_LIT>", "\"", "+", "System", ".", "currentTimeMillis", "(", ")", ";", "}", "w", ".", "write", "(", "id", ")", ";", "w", ".", "close", "(", ")", ";", "return", "id", ";", "}", "}", "catch", "(", "IOException", "e", ")", "{", "}", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetConsistentDeviceId", "(", ")", "{", "TelephonyManager", "tm", "=", "(", "TelephonyManager", ")", "getContext", "(", ")", ".", "getSystemService", "(", "Context", ".", "TELEPHONY_SERVICE", ")", ";", "if", "(", "tm", "=", "=", "null", ")", "{", "Log", ".", "w", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "final", "String", "deviceId", "=", "Utility", ".", "getConsistentDeviceId", "(", "getContext", "(", ")", ")", ";", "assertNotNull", "(", "deviceId", ")", ";", "final", "String", "deviceId2", "=", "Utility", ".", "getConsistentDeviceId", "(", "getContext", "(", ")", ")", ";", "assertEquals", "(", "deviceId", ",", "deviceId2", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetSmallSha1", "(", ")", "{", "byte", "[", "]", "sha1", "=", "new", "byte", "[", "<NUM_LIT:20>", "]", ";", "assertEquals", "(", "0", ",", "Utility", ".", "getSmallHashFromSha1", "(", "sha1", ")", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "sha1", ".", "length", ";", "i", "+", "+", ")", "{", "sha1", "[", "i", "]", "=", "(", "byte", ")", "<NUM_LIT>", ";", "}", "assertEquals", "(", "Integer", ".", "MAX_VALUE", ",", "Utility", ".", "getSmallHashFromSha1", "(", "sha1", ")", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:16>", ";", "i", "+", "+", ")", "{", "sha1", "[", "<NUM_LIT>", "]", "=", "(", "byte", ")", "i", ";", "Utility", ".", "getSmallHashFromSha1", "(", "sha1", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "runAccountReconciler", "(", ")", "{", "final", "SyncManager", "syncManager", "=", "this", ";", "new", "Thread", "(", ")", "{", "@", "Override", "public", "void", "run", "(", ")", "{", "android", ".", "accounts", ".", "Account", "[", "]", "accountMgrList", "=", "AccountManager", ".", "get", "(", "syncManager", ")", ".", "getAccountsByType", "(", "Email", ".", "EXCHANGE_ACCOUNT_MANAGER_TYPE", ")", ";", "synchronized", "(", "sAccountList", ")", "{", "if", "(", "mAccountObserver", "!", "=", "null", ")", "{", "mAccountObserver", ".", "onAccountChanged", "(", ")", ";", "}", "reconcileAccountsWithAccountManager", "(", "syncManager", ",", "sAccountList", ",", "accountMgrList", ",", "false", ",", "mResolver", ")", ";", "}", "}", "}", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "static", "public", "String", "getUidFromGlobalObjId", "(", "String", "globalObjId", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "try", "{", "byte", "[", "]", "idBytes", "=", "Base64", ".", "decode", "(", "globalObjId", ",", "Base64", ".", "DEFAULT", ")", ";", "String", "idString", "=", "new", "String", "(", "idBytes", ")", ";", "int", "index", "=", "idString", ".", "indexOf", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "index", ">", "0", ")", "{", "return", "idString", ".", "substring", "(", "index", "+", "<NUM_LIT:12>", ",", "idString", ".", "length", "(", ")", "-", "1", ")", ";", "}", "else", "{", "for", "(", "byte", "b", ":", "idBytes", ")", "{", "Utility", ".", "byteToHex", "(", "sb", ",", "b", ")", ";", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "}", "catch", "(", "RuntimeException", "e", ")", "{", "return", "globalObjId", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testGetUidFromGlobalObjId", "(", ")", "{", "String", "globalObjId", "=", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "String", "uid", "=", "CalendarUtilities", ".", "getUidFromGlobalObjId", "(", "globalObjId", ")", ";", "assertEquals", "(", "uid", ",", "\"", "<STR_LIT>", "\"", ")", ";", "globalObjId", "=", "\"", "<STR_LIT>", "\"", ";", "uid", "=", "CalendarUtilities", ".", "getUidFromGlobalObjId", "(", "globalObjId", ")", ";", "assertEquals", "(", "uid", ",", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "static", "public", "int", "selfAttendeeStatusFromBusyStatus", "(", "int", "busyStatus", ")", "{", "int", "selfAttendeeStatus", ";", "switch", "(", "busyStatus", ")", "{", "case", "BUSY_STATUS_BUSY", ":", "selfAttendeeStatus", "=", "Attendees", ".", "ATTENDEE_STATUS_ACCEPTED", ";", "break", ";", "case", "BUSY_STATUS_TENTATIVE", ":", "selfAttendeeStatus", "=", "Attendees", ".", "ATTENDEE_STATUS_TENTATIVE", ";", "break", ";", "case", "BUSY_STATUS_FREE", ":", "case", "BUSY_STATUS_OOF", ":", "default", ":", "selfAttendeeStatus", "=", "Attendees", ".", "ATTENDEE_STATUS_NONE", ";", "}", "return", "selfAttendeeStatus", ";", "}", "</s>"]
["<s>", "static", "public", "int", "busyStatusFromSelfAttendeeStatus", "(", "int", "selfAttendeeStatus", ")", "{", "int", "busyStatus", ";", "switch", "(", "selfAttendeeStatus", ")", "{", "case", "Attendees", ".", "ATTENDEE_STATUS_DECLINED", ":", "case", "Attendees", ".", "ATTENDEE_STATUS_NONE", ":", "case", "Attendees", ".", "ATTENDEE_STATUS_INVITED", ":", "busyStatus", "=", "BUSY_STATUS_FREE", ";", "break", ";", "case", "Attendees", ".", "ATTENDEE_STATUS_TENTATIVE", ":", "busyStatus", "=", "BUSY_STATUS_TENTATIVE", ";", "break", ";", "case", "Attendees", ".", "ATTENDEE_STATUS_ACCEPTED", ":", "default", ":", "busyStatus", "=", "BUSY_STATUS_BUSY", ";", "break", ";", "}", "return", "busyStatus", ";", "}", "</s>"]
["<s>", "public", "void", "testSelfAttendeeStatusFromBusyStatus", "(", ")", "{", "assertEquals", "(", "Attendees", ".", "ATTENDEE_STATUS_ACCEPTED", ",", "CalendarUtilities", ".", "selfAttendeeStatusFromBusyStatus", "(", "CalendarUtilities", ".", "BUSY_STATUS_BUSY", ")", ")", ";", "assertEquals", "(", "Attendees", ".", "ATTENDEE_STATUS_TENTATIVE", ",", "CalendarUtilities", ".", "selfAttendeeStatusFromBusyStatus", "(", "CalendarUtilities", ".", "BUSY_STATUS_TENTATIVE", ")", ")", ";", "assertEquals", "(", "Attendees", ".", "ATTENDEE_STATUS_NONE", ",", "CalendarUtilities", ".", "selfAttendeeStatusFromBusyStatus", "(", "CalendarUtilities", ".", "BUSY_STATUS_FREE", ")", ")", ";", "assertEquals", "(", "Attendees", ".", "ATTENDEE_STATUS_NONE", ",", "CalendarUtilities", ".", "selfAttendeeStatusFromBusyStatus", "(", "CalendarUtilities", ".", "BUSY_STATUS_OOF", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testBusyStatusFromSelfStatus", "(", ")", "{", "assertEquals", "(", "CalendarUtilities", ".", "BUSY_STATUS_FREE", ",", "CalendarUtilities", ".", "busyStatusFromSelfAttendeeStatus", "(", "Attendees", ".", "ATTENDEE_STATUS_DECLINED", ")", ")", ";", "assertEquals", "(", "CalendarUtilities", ".", "BUSY_STATUS_BUSY", ",", "CalendarUtilities", ".", "busyStatusFromSelfAttendeeStatus", "(", "Attendees", ".", "ATTENDEE_STATUS_NONE", ")", ")", ";", "assertEquals", "(", "CalendarUtilities", ".", "BUSY_STATUS_BUSY", ",", "CalendarUtilities", ".", "busyStatusFromSelfAttendeeStatus", "(", "Attendees", ".", "ATTENDEE_STATUS_INVITED", ")", ")", ";", "assertEquals", "(", "CalendarUtilities", ".", "BUSY_STATUS_TENTATIVE", ",", "CalendarUtilities", ".", "busyStatusFromSelfAttendeeStatus", "(", "Attendees", ".", "ATTENDEE_STATUS_TENTATIVE", ")", ")", ";", "assertEquals", "(", "CalendarUtilities", ".", "BUSY_STATUS_BUSY", ",", "CalendarUtilities", ".", "busyStatusFromSelfAttendeeStatus", "(", "Attendees", ".", "ATTENDEE_STATUS_ACCEPTED", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testImapList", "(", ")", "throws", "MessagingException", "{", "ByteArrayInputStream", "is", "=", "new", "ByteArrayInputStream", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", ")", ")", ";", "ImapResponseParser", "parser", "=", "new", "ImapResponseParser", "(", "is", ",", "new", "DiscourseLogger", "(", "<NUM_LIT:4>", ")", ")", ";", "ImapList", "list1", "=", "parser", ".", "new", "ImapList", "(", ")", ";", "list1", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "list1", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "list1", ".", "add", "(", "<NUM_LIT:20>", ")", ";", "list1", ".", "add", "(", "is", ")", ";", "list1", ".", "add", "(", "new", "Date", "(", ")", ")", ";", "ImapList", "list2", "=", "parser", ".", "new", "ImapList", "(", ")", ";", "list2", ".", "add", "(", "list1", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "list1", ".", "getString", "(", "0", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "list1", ".", "getStringOrNull", "(", "0", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "list1", ".", "getString", "(", "1", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "list1", ".", "getStringOrNull", "(", "1", ")", ")", ";", "assertNull", "(", "list1", ".", "getStringOrNull", "(", "<NUM_LIT:2>", ")", ")", ";", "assertNull", "(", "list1", ".", "getStringOrNull", "(", "<NUM_LIT:3>", ")", ")", ";", "assertNull", "(", "list1", ".", "getStringOrNull", "(", "<NUM_LIT:4>", ")", ")", ";", "assertNull", "(", "list1", ".", "getListOrNull", "(", "<NUM_LIT:2>", ")", ")", ";", "assertNull", "(", "list1", ".", "getListOrNull", "(", "<NUM_LIT:3>", ")", ")", ";", "assertNull", "(", "list1", ".", "getListOrNull", "(", "<NUM_LIT:4>", ")", ")", ";", "assertEquals", "(", "<NUM_LIT:20>", ",", "list1", ".", "getNumber", "(", "<NUM_LIT:2>", ")", ")", ";", "assertNull", "(", "list1", ".", "getStringOrNull", "(", "<NUM_LIT:20>", ")", ")", ";", "assertNotNull", "(", "list1", ".", "getLiteral", "(", "<NUM_LIT:3>", ")", ")", ";", "assertNotNull", "(", "list1", ".", "getDate", "(", "<NUM_LIT:4>", ")", ")", ";", "assertEquals", "(", "list1", ",", "list2", ".", "getList", "(", "0", ")", ")", ";", "assertEquals", "(", "list1", ",", "list2", ".", "getListOrNull", "(", "0", ")", ")", ";", "assertNull", "(", "list2", ".", "getListOrNull", "(", "<NUM_LIT:20>", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "error", "(", "int", "accountNum", ",", "String", "error", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "android", ".", "os", ".", "Message", ".", "obtain", "(", ")", ";", "msg", ".", "what", "=", "MSG_ERROR", ";", "msg", ".", "arg1", "=", "accountNum", ";", "msg", ".", "obj", "=", "error", ";", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "static", "void", "deleteAccountStore", "(", "Context", "context", ",", "Account", "account", ",", "int", "accountNum", ",", "UIHandler", "handler", ")", "{", "try", "{", "Store", "store", "=", "LocalStore", ".", "newInstance", "(", "account", ".", "getLocalStoreUri", "(", ")", ",", "context", ",", "null", ")", ";", "store", ".", "delete", "(", ")", ";", "}", "catch", "(", "MessagingException", "e", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "e", ")", ";", "if", "(", "handler", "!", "=", "null", ")", "{", "handler", ".", "error", "(", "accountNum", ",", "context", ".", "getString", "(", "R", ".", "string", ".", "upgrade_accounts_error", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "exceptionParser", "(", "CalendarOperations", "ops", ",", "ContentValues", "parentCv", ",", "ArrayList", "<", "ContentValues", ">", "attendeeValues", ",", "int", "reminderMins", ",", "int", "busyStatus", ")", "throws", "IOException", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "Events", ".", "CALENDAR_ID", ",", "mCalendarId", ")", ";", "cv", ".", "put", "(", "Events", ".", "_SYNC_ACCOUNT", ",", "mEmailAddress", ")", ";", "cv", ".", "put", "(", "Events", ".", "_SYNC_ACCOUNT_TYPE", ",", "Email", ".", "EXCHANGE_ACCOUNT_MANAGER_TYPE", ")", ";", "cv", ".", "put", "(", "Events", ".", "ORGANIZER", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "ORGANIZER", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "TITLE", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "TITLE", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "DESCRIPTION", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "DESCRIPTION", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "ORIGINAL_ALL_DAY", ",", "parentCv", ".", "getAsInteger", "(", "Events", ".", "ALL_DAY", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "EVENT_LOCATION", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "EVENT_LOCATION", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "VISIBILITY", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "VISIBILITY", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "EVENT_TIMEZONE", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "EVENT_TIMEZONE", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "ORIGINAL_EVENT", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "_SYNC_ID", ")", ")", ";", "String", "exceptionStartTime", "=", "\"", "<STR_LIT>", "\"", ";", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_APPLICATION_DATA", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "CALENDAR_EXCEPTION_START_TIME", ":", "exceptionStartTime", "=", "getValue", "(", ")", ";", "cv", ".", "put", "(", "Events", ".", "ORIGINAL_INSTANCE_TIME", ",", "Utility", ".", "parseDateTimeToMillis", "(", "exceptionStartTime", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_EXCEPTION_IS_DELETED", ":", "if", "(", "getValueInt", "(", ")", "=", "=", "1", ")", "{", "cv", ".", "put", "(", "Events", ".", "STATUS", ",", "Events", ".", "STATUS_CANCELED", ")", ";", "}", "break", ";", "case", "Tags", ".", "CALENDAR_ALL_DAY_EVENT", ":", "cv", ".", "put", "(", "Events", ".", "ALL_DAY", ",", "getValueInt", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "BASE_BODY", ":", "cv", ".", "put", "(", "Events", ".", "DESCRIPTION", ",", "bodyParser", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_BODY", ":", "cv", ".", "put", "(", "Events", ".", "DESCRIPTION", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_START_TIME", ":", "cv", ".", "put", "(", "Events", ".", "DTSTART", ",", "Utility", ".", "parseDateTimeToMillis", "(", "getValue", "(", ")", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_END_TIME", ":", "cv", ".", "put", "(", "Events", ".", "DTEND", ",", "Utility", ".", "parseDateTimeToMillis", "(", "getValue", "(", ")", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_LOCATION", ":", "cv", ".", "put", "(", "Events", ".", "EVENT_LOCATION", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_RECURRENCE", ":", "String", "rrule", "=", "recurrenceParser", "(", "ops", ")", ";", "if", "(", "rrule", "!", "=", "null", ")", "{", "cv", ".", "put", "(", "Events", ".", "RRULE", ",", "rrule", ")", ";", "}", "break", ";", "case", "Tags", ".", "CALENDAR_SUBJECT", ":", "cv", ".", "put", "(", "Events", ".", "TITLE", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_SENSITIVITY", ":", "cv", ".", "put", "(", "Events", ".", "VISIBILITY", ",", "encodeVisibility", "(", "getValueInt", "(", ")", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_BUSY_STATUS", ":", "busyStatus", "=", "getValueInt", "(", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "cv", ".", "put", "(", "Events", ".", "_SYNC_ID", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "_SYNC_ID", ")", "+", "<CHAR_LIT:_>", "+", "exceptionStartTime", ")", ";", "if", "(", "!", "cv", ".", "containsKey", "(", "Events", ".", "DTSTART", ")", ")", "{", "cv", ".", "put", "(", "Events", ".", "DTSTART", ",", "parentCv", ".", "getAsLong", "(", "Events", ".", "DTSTART", ")", ")", ";", "}", "if", "(", "!", "cv", ".", "containsKey", "(", "Events", ".", "DTEND", ")", ")", "{", "cv", ".", "put", "(", "Events", ".", "DTEND", ",", "parentCv", ".", "getAsLong", "(", "Events", ".", "DTEND", ")", ")", ";", "}", "int", "exceptionStart", "=", "ops", ".", "mCount", ";", "ops", ".", "newException", "(", "cv", ")", ";", "if", "(", "attendeeValues", "!", "=", "null", ")", "{", "for", "(", "ContentValues", "attValues", ":", "attendeeValues", ")", "{", "String", "attendeeEmail", "=", "attValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_EMAIL", ")", ";", "if", "(", "mEmailAddress", ".", "equalsIgnoreCase", "(", "attendeeEmail", ")", ")", "{", "attValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_STATUS", ",", "CalendarUtilities", ".", "attendeeStatusFromBusyStatus", "(", "busyStatus", ")", ")", ";", "}", "ops", ".", "newAttendee", "(", "attValues", ",", "exceptionStart", ")", ";", "}", "}", "if", "(", "reminderMins", ">", "0", ")", "{", "ops", ".", "newReminder", "(", "reminderMins", ",", "exceptionStart", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "exceptionsParser", "(", "CalendarOperations", "ops", ",", "ContentValues", "cv", ",", "ArrayList", "<", "ContentValues", ">", "attendeeValues", ",", "int", "reminderMins", ",", "int", "busyStatus", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "CALENDAR_EXCEPTIONS", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "CALENDAR_EXCEPTION", ":", "exceptionParser", "(", "ops", ",", "cv", ",", "attendeeValues", ",", "reminderMins", ",", "busyStatus", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "boolean", "isLikelyNatFailure", "(", "String", "message", ")", "{", "if", "(", "message", "=", "=", "null", ")", "return", "false", ";", "if", "(", "message", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", "|", "|", "message", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "return", "true", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "presetMailboxListCallback", "(", "int", "mailboxType", ",", "long", "accountId", ")", "{", "mWaitForMailboxType", "=", "mailboxType", ";", "mWaitForMailboxAccount", "=", "accountId", ";", "}", "</s>"]
["<s>", "public", "static", "void", "log", "(", "String", "tag", ",", "String", "str", ")", "{", "if", "(", "Eas", ".", "USER_LOG", ")", "{", "Log", ".", "d", "(", "tag", ",", "str", ")", ";", "if", "(", "Eas", ".", "FILE_LOG", ")", "{", "FileLogger", ".", "log", "(", "tag", ",", "str", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "boolean", "isCalendarEnabled", "(", "long", "accountId", ")", "{", "CalendarObserver", "observer", "=", "mCalendarObservers", ".", "get", "(", "accountId", ")", ";", "if", "(", "observer", "!", "=", "null", ")", "{", "return", "(", "observer", ".", "mSyncEvents", "=", "=", "1", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "static", "private", "synchronized", "void", "shutdownConnectionManager", "(", ")", "{", "sClientConnectionManager", ".", "shutdown", "(", ")", ";", "sClientConnectionManager", "=", "null", ";", "}", "</s>"]
["<s>", "public", "void", "testCreateMessageForEntity_Recurring", "(", ")", "throws", "IOException", "{", "String", "title", "=", "\"", "<STR_LIT>", "\"", ";", "Entity", "entity", "=", "setupTestEventEntity", "(", "ORGANIZER", ",", "ATTENDEE", ",", "title", ")", ";", "entity", ".", "getEntityValues", "(", ")", ".", "put", "(", "Events", ".", "RRULE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Account", "account", "=", "new", "Account", "(", ")", ";", "account", ".", "mEmailAddress", "=", "ORGANIZER", ";", "String", "uid", "=", "\"", "<STR_LIT>", "\"", ";", "Message", "msg", "=", "CalendarUtilities", ".", "createMessageForEntity", "(", "mContext", ",", "entity", ",", "Message", ".", "FLAG_OUTGOING_MEETING_INVITE", ",", "uid", ",", "account", ")", ";", "assertNotNull", "(", "msg", ")", ";", "assertEquals", "(", "Address", ".", "pack", "(", "new", "Address", "[", "]", "{", "new", "Address", "(", "ATTENDEE", ")", "}", ")", ",", "msg", ".", "mTo", ")", ";", "assertEquals", "(", "title", ",", "msg", ".", "mSubject", ")", ";", "assertNotNull", "(", "msg", ".", "mAttachments", ")", ";", "assertEquals", "(", "1", ",", "msg", ".", "mAttachments", ".", "size", "(", ")", ")", ";", "Attachment", "att", "=", "msg", ".", "mAttachments", ".", "get", "(", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "att", ".", "mFileName", ")", ";", "assertEquals", "(", "Attachment", ".", "FLAG_ICS_ALTERNATIVE_PART", ",", "att", ".", "mFlags", "&", "Attachment", ".", "FLAG_ICS_ALTERNATIVE_PART", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "att", ".", "mMimeType", ")", ";", "assertNotNull", "(", "att", ".", "mContentBytes", ")", ";", "assertEquals", "(", "att", ".", "mSize", ",", "att", ".", "mContentBytes", ".", "length", ")", ";", "BlockHash", "vcalendar", "=", "parseIcsContent", "(", "att", ".", "mContentBytes", ")", ";", "assertNotNull", "(", "vcalendar", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vcalendar", ".", "name", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vcalendar", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "vcalendar", ".", "blocks", ".", "size", "(", ")", ")", ";", "TimeZone", "timeZone", "=", "TimeZone", ".", "getDefault", "(", ")", ";", "BlockHash", "vtimezone", "=", "vcalendar", ".", "blocks", ".", "get", "(", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vtimezone", ".", "name", ")", ";", "assertEquals", "(", "timeZone", ".", "getID", "(", ")", ",", "vtimezone", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "BlockHash", "vevent", "=", "vcalendar", ".", "blocks", ".", "get", "(", "1", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "name", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:0>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "uid", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", "+", "ATTENDEE", ",", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertNotNull", "(", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", "+", "timeZone", ".", "getID", "(", ")", ")", ")", ";", "assertNotNull", "(", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", "+", "timeZone", ".", "getID", "(", ")", ")", ")", ";", "assertNull", "(", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertNull", "(", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertNull", "(", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertNull", "(", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertNull", "(", "vevent", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "inferMimeType", "(", "String", "fileName", ",", "String", "mimeType", ")", "{", "if", "(", "!", "TextUtils", ".", "isEmpty", "(", "mimeType", ")", "&", "&", "!", "\"", "<STR_LIT>", "\"", ".", "equalsIgnoreCase", "(", "mimeType", ")", ")", "{", "return", "mimeType", ";", "}", "if", "(", "!", "TextUtils", ".", "isEmpty", "(", "fileName", ")", ")", "{", "int", "lastDot", "=", "fileName", ".", "lastIndexOf", "(", "<CHAR_LIT:.>", ")", ";", "String", "extension", "=", "null", ";", "if", "(", "(", "lastDot", ">", "0", ")", "&", "&", "(", "lastDot", "<", "fileName", ".", "length", "(", ")", "-", "1", ")", ")", "{", "extension", "=", "fileName", ".", "substring", "(", "lastDot", "+", "1", ")", ".", "toLowerCase", "(", ")", ";", "}", "if", "(", "!", "TextUtils", ".", "isEmpty", "(", "extension", ")", ")", "{", "mimeType", "=", "MimeTypeMap", ".", "getSingleton", "(", ")", ".", "getMimeTypeFromExtension", "(", "extension", ")", ";", "if", "(", "mimeType", "=", "=", "null", ")", "{", "mimeType", "=", "\"", "<STR_LIT:/>", "\"", "+", "extension", ";", "}", "return", "mimeType", ";", "}", "}", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "public", "void", "testInferMimeType", "(", ")", "{", "final", "String", "DEFAULT", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "FILE_PDF", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "FILE_ABC", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "FILE_NO_EXT", "=", "\"", "<STR_LIT>", "\"", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "AttachmentProvider", ".", "inferMimeType", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "AttachmentProvider", ".", "inferMimeType", "(", "\"", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "AttachmentProvider", ".", "inferMimeType", "(", "FILE_PDF", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "AttachmentProvider", ".", "inferMimeType", "(", "FILE_PDF", ",", "null", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "AttachmentProvider", ".", "inferMimeType", "(", "FILE_PDF", ",", "\"", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "AttachmentProvider", ".", "inferMimeType", "(", "FILE_PDF", ",", "DEFAULT", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "AttachmentProvider", ".", "inferMimeType", "(", "FILE_ABC", ",", "null", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "AttachmentProvider", ".", "inferMimeType", "(", "FILE_ABC", ",", "\"", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "AttachmentProvider", ".", "inferMimeType", "(", "FILE_ABC", ",", "DEFAULT", ")", ")", ";", "assertEquals", "(", "DEFAULT", ",", "AttachmentProvider", ".", "inferMimeType", "(", "FILE_NO_EXT", ",", "null", ")", ")", ";", "assertEquals", "(", "DEFAULT", ",", "AttachmentProvider", ".", "inferMimeType", "(", "FILE_NO_EXT", ",", "\"", "\"", ")", ")", ";", "assertEquals", "(", "DEFAULT", ",", "AttachmentProvider", ".", "inferMimeType", "(", "FILE_NO_EXT", ",", "DEFAULT", ")", ")", ";", "assertEquals", "(", "DEFAULT", ",", "AttachmentProvider", ".", "inferMimeType", "(", "null", ",", "null", ")", ")", ";", "assertEquals", "(", "DEFAULT", ",", "AttachmentProvider", ".", "inferMimeType", "(", "\"", "\"", ",", "\"", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "void", "setTimes", "(", "ContentValues", "cv", ",", "long", "startTime", ",", "long", "endTime", ",", "int", "allDayEvent", ")", "{", "if", "(", "startTime", "<", "0", "|", "|", "endTime", "<", "0", ")", "return", ";", "if", "(", "allDayEvent", "!", "=", "0", ")", "{", "GregorianCalendar", "cal", "=", "new", "GregorianCalendar", "(", "UTC_TIMEZONE", ")", ";", "cal", ".", "setTimeInMillis", "(", "startTime", ")", ";", "cal", ".", "set", "(", "GregorianCalendar", ".", "HOUR_OF_DAY", ",", "0", ")", ";", "cal", ".", "set", "(", "GregorianCalendar", ".", "MINUTE", ",", "0", ")", ";", "cal", ".", "set", "(", "GregorianCalendar", ".", "SECOND", ",", "0", ")", ";", "startTime", "=", "cal", ".", "getTimeInMillis", "(", ")", ";", "cal", ".", "setTimeInMillis", "(", "endTime", ")", ";", "cal", ".", "set", "(", "GregorianCalendar", ".", "HOUR_OF_DAY", ",", "0", ")", ";", "cal", ".", "set", "(", "GregorianCalendar", ".", "MINUTE", ",", "0", ")", ";", "cal", ".", "set", "(", "GregorianCalendar", ".", "SECOND", ",", "0", ")", ";", "endTime", "=", "cal", ".", "getTimeInMillis", "(", ")", ";", "cv", ".", "put", "(", "Events", ".", "EVENT_TIMEZONE", ",", "UTC_TIMEZONE", ".", "getID", "(", ")", ")", ";", "}", "cv", ".", "put", "(", "Events", ".", "DTSTART", ",", "startTime", ")", ";", "if", "(", "cv", ".", "containsKey", "(", "Events", ".", "RRULE", ")", ")", "{", "if", "(", "allDayEvent", "!", "=", "0", ")", "{", "cv", ".", "put", "(", "Events", ".", "DURATION", ",", "\"", "<STR_LIT>", "\"", "+", "(", "(", "endTime", "-", "startTime", ")", "/", "DAYS", ")", "+", "\"", "<STR_LIT:D>", "\"", ")", ";", "}", "else", "{", "cv", ".", "put", "(", "Events", ".", "DURATION", ",", "\"", "<STR_LIT>", "\"", "+", "(", "(", "endTime", "-", "startTime", ")", "/", "MINUTES", ")", "+", "\"", "<STR_LIT:M>", "\"", ")", ";", "}", "}", "else", "{", "cv", ".", "put", "(", "Events", ".", "DTEND", ",", "endTime", ")", ";", "cv", ".", "put", "(", "Events", ".", "LAST_DATE", ",", "endTime", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "testSetTimes", "(", ")", "throws", "IOException", "{", "CalendarSyncAdapter", "adapter", "=", "getTestSyncAdapter", "(", "CalendarSyncAdapter", ".", "class", ")", ";", "EasCalendarSyncParser", "p", "=", "adapter", ".", "new", "EasCalendarSyncParser", "(", "getTestInputStream", "(", ")", ",", "adapter", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "GregorianCalendar", "startCalendar", "=", "new", "GregorianCalendar", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:8>", ",", "<NUM_LIT:30>", ")", ";", "Long", "startTime", "=", "startCalendar", ".", "getTimeInMillis", "(", ")", ";", "GregorianCalendar", "endCalendar", "=", "new", "GregorianCalendar", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:9>", ",", "<NUM_LIT:30>", ")", ";", "Long", "endTime", "=", "endCalendar", ".", "getTimeInMillis", "(", ")", ";", "p", ".", "setTimes", "(", "cv", ",", "startTime", ",", "endTime", ",", "0", ")", ";", "assertNull", "(", "cv", ".", "getAsInteger", "(", "Events", ".", "DURATION", ")", ")", ";", "assertEquals", "(", "startTime", ",", "cv", ".", "getAsLong", "(", "Events", ".", "DTSTART", ")", ")", ";", "assertEquals", "(", "endTime", ",", "cv", ".", "getAsLong", "(", "Events", ".", "DTEND", ")", ")", ";", "assertEquals", "(", "endTime", ",", "cv", ".", "getAsLong", "(", "Events", ".", "LAST_DATE", ")", ")", ";", "assertNull", "(", "cv", ".", "getAsString", "(", "Events", ".", "EVENT_TIMEZONE", ")", ")", ";", "cv", ".", "clear", "(", ")", ";", "cv", ".", "put", "(", "Events", ".", "RRULE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "p", ".", "setTimes", "(", "cv", ",", "startTime", ",", "endTime", ",", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "cv", ".", "getAsString", "(", "Events", ".", "DURATION", ")", ")", ";", "assertEquals", "(", "startTime", ",", "cv", ".", "getAsLong", "(", "Events", ".", "DTSTART", ")", ")", ";", "assertNull", "(", "cv", ".", "getAsLong", "(", "Events", ".", "DTEND", ")", ")", ";", "assertNull", "(", "cv", ".", "getAsLong", "(", "Events", ".", "LAST_DATE", ")", ")", ";", "assertNull", "(", "cv", ".", "getAsString", "(", "Events", ".", "EVENT_TIMEZONE", ")", ")", ";", "cv", ".", "clear", "(", ")", ";", "startCalendar", "=", "new", "GregorianCalendar", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:8>", ",", "<NUM_LIT:30>", ")", ";", "startTime", "=", "startCalendar", ".", "getTimeInMillis", "(", ")", ";", "endCalendar", "=", "new", "GregorianCalendar", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT:11>", ",", "<NUM_LIT:8>", ",", "<NUM_LIT:30>", ")", ";", "endTime", "=", "endCalendar", ".", "getTimeInMillis", "(", ")", ";", "cv", ".", "put", "(", "Events", ".", "RRULE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "p", ".", "setTimes", "(", "cv", ",", "startTime", ",", "endTime", ",", "1", ")", ";", "startCalendar", "=", "new", "GregorianCalendar", "(", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "startCalendar", ".", "set", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT:10>", ",", "0", ",", "0", ",", "0", ")", ";", "startCalendar", ".", "set", "(", "GregorianCalendar", ".", "MILLISECOND", ",", "0", ")", ";", "startTime", "=", "startCalendar", ".", "getTimeInMillis", "(", ")", ";", "assertEquals", "(", "startTime", ",", "cv", ".", "getAsLong", "(", "Events", ".", "DTSTART", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "cv", ".", "getAsString", "(", "Events", ".", "DURATION", ")", ")", ";", "assertNull", "(", "cv", ".", "getAsLong", "(", "Events", ".", "DTEND", ")", ")", ";", "assertNull", "(", "cv", ".", "getAsLong", "(", "Events", ".", "LAST_DATE", ")", ")", ";", "assertNotNull", "(", "cv", ".", "getAsString", "(", "Events", ".", "EVENT_TIMEZONE", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testIsValidEventValues", "(", ")", "throws", "IOException", "{", "CalendarSyncAdapter", "adapter", "=", "getTestSyncAdapter", "(", "CalendarSyncAdapter", ".", "class", ")", ";", "EasCalendarSyncParser", "p", "=", "adapter", ".", "new", "EasCalendarSyncParser", "(", "getTestInputStream", "(", ")", ",", "adapter", ")", ";", "long", "validTime", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "String", "validData", "=", "\"", "<STR_LIT>", "\"", ";", "String", "validDuration", "=", "\"", "<STR_LIT>", "\"", ";", "String", "validRrule", "=", "\"", "<STR_LIT>", "\"", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "Events", ".", "DTSTART", ",", "validTime", ")", ";", "assertFalse", "(", "p", ".", "isValidEventValues", "(", "cv", ",", "false", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "_SYNC_DATA", ",", "validData", ")", ";", "assertFalse", "(", "p", ".", "isValidEventValues", "(", "cv", ",", "false", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "DURATION", ",", "validDuration", ")", ";", "assertTrue", "(", "p", ".", "isValidEventValues", "(", "cv", ",", "false", ")", ")", ";", "cv", ".", "remove", "(", "Events", ".", "DURATION", ")", ";", "cv", ".", "put", "(", "Events", ".", "DTEND", ",", "validTime", ")", ";", "assertTrue", "(", "p", ".", "isValidEventValues", "(", "cv", ",", "false", ")", ")", ";", "cv", ".", "remove", "(", "Events", ".", "DTSTART", ")", ";", "assertFalse", "(", "p", ".", "isValidEventValues", "(", "cv", ",", "false", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "DTSTART", ",", "validTime", ")", ";", "cv", ".", "put", "(", "Events", ".", "RRULE", ",", "validRrule", ")", ";", "assertFalse", "(", "p", ".", "isValidEventValues", "(", "cv", ",", "false", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "DURATION", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertTrue", "(", "p", ".", "isValidEventValues", "(", "cv", ",", "false", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "ALL_DAY", ",", "\"", "<STR_LIT:1>", "\"", ")", ";", "assertFalse", "(", "p", ".", "isValidEventValues", "(", "cv", ",", "false", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "DURATION", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertTrue", "(", "p", ".", "isValidEventValues", "(", "cv", ",", "false", ")", ")", ";", "}", "</s>"]
["<s>", "T", "getTestSyncAdapter", "(", "Class", "<", "T", ">", "klass", ")", "{", "EasSyncService", "service", "=", "getTestService", "(", ")", ";", "Constructor", "<", "T", ">", "c", ";", "try", "{", "c", "=", "klass", ".", "getDeclaredConstructor", "(", "new", "Class", "[", "]", "{", "Mailbox", ".", "class", ",", "EasSyncService", ".", "class", "}", ")", ";", "return", "c", ".", "newInstance", "(", "service", ".", "mMailbox", ",", "service", ")", ";", "}", "catch", "(", "SecurityException", "e", ")", "{", "}", "catch", "(", "NoSuchMethodException", "e", ")", "{", "}", "catch", "(", "IllegalArgumentException", "e", ")", "{", "}", "catch", "(", "InstantiationException", "e", ")", "{", "}", "catch", "(", "IllegalAccessException", "e", ")", "{", "}", "catch", "(", "InvocationTargetException", "e", ")", "{", "}", "return", "null", ";", "}", "</s>"]
["<s>", "private", "void", "logEventColumns", "(", "ContentValues", "cv", ",", "String", "reason", ")", "{", "if", "(", "Eas", ".", "USER_LOG", ")", "{", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", "\"", "<STR_LIT>", "\"", "+", "reason", "+", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "Entry", "<", "String", ",", "Object", ">", "entry", ":", "cv", ".", "valueSet", "(", ")", ")", "{", "sb", ".", "append", "(", "entry", ".", "getKey", "(", ")", ")", ";", "sb", ".", "append", "(", "<CHAR_LIT:/>", ")", ";", "}", "userLog", "(", "TAG", ",", "sb", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "exceptionParser", "(", "CalendarOperations", "ops", ",", "ContentValues", "parentCv", ",", "ArrayList", "<", "ContentValues", ">", "attendeeValues", ",", "int", "reminderMins", ",", "int", "busyStatus", ",", "long", "startTime", ",", "long", "endTime", ")", "throws", "IOException", "{", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "cv", ".", "put", "(", "Events", ".", "CALENDAR_ID", ",", "mCalendarId", ")", ";", "cv", ".", "put", "(", "Events", ".", "_SYNC_ACCOUNT", ",", "mEmailAddress", ")", ";", "cv", ".", "put", "(", "Events", ".", "_SYNC_ACCOUNT_TYPE", ",", "Email", ".", "EXCHANGE_ACCOUNT_MANAGER_TYPE", ")", ";", "cv", ".", "put", "(", "Events", ".", "ORGANIZER", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "ORGANIZER", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "TITLE", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "TITLE", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "DESCRIPTION", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "DESCRIPTION", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "ORIGINAL_ALL_DAY", ",", "parentCv", ".", "getAsInteger", "(", "Events", ".", "ALL_DAY", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "EVENT_LOCATION", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "EVENT_LOCATION", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "VISIBILITY", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "VISIBILITY", ")", ")", ";", "cv", ".", "put", "(", "Events", ".", "EVENT_TIMEZONE", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "EVENT_TIMEZONE", ")", ")", ";", "int", "allDayEvent", "=", "0", ";", "cv", ".", "put", "(", "Events", ".", "ORIGINAL_EVENT", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "_SYNC_ID", ")", ")", ";", "String", "exceptionStartTime", "=", "\"", "<STR_LIT>", "\"", ";", "while", "(", "nextTag", "(", "Tags", ".", "SYNC_APPLICATION_DATA", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "CALENDAR_EXCEPTION_START_TIME", ":", "exceptionStartTime", "=", "getValue", "(", ")", ";", "cv", ".", "put", "(", "Events", ".", "ORIGINAL_INSTANCE_TIME", ",", "Utility", ".", "parseDateTimeToMillis", "(", "exceptionStartTime", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_EXCEPTION_IS_DELETED", ":", "if", "(", "getValueInt", "(", ")", "=", "=", "1", ")", "{", "cv", ".", "put", "(", "Events", ".", "STATUS", ",", "Events", ".", "STATUS_CANCELED", ")", ";", "}", "break", ";", "case", "Tags", ".", "CALENDAR_ALL_DAY_EVENT", ":", "allDayEvent", "=", "getValueInt", "(", ")", ";", "cv", ".", "put", "(", "Events", ".", "ALL_DAY", ",", "allDayEvent", ")", ";", "break", ";", "case", "Tags", ".", "BASE_BODY", ":", "cv", ".", "put", "(", "Events", ".", "DESCRIPTION", ",", "bodyParser", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_BODY", ":", "cv", ".", "put", "(", "Events", ".", "DESCRIPTION", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_START_TIME", ":", "startTime", "=", "Utility", ".", "parseDateTimeToMillis", "(", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_END_TIME", ":", "endTime", "=", "Utility", ".", "parseDateTimeToMillis", "(", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_LOCATION", ":", "cv", ".", "put", "(", "Events", ".", "EVENT_LOCATION", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_RECURRENCE", ":", "String", "rrule", "=", "recurrenceParser", "(", "ops", ")", ";", "if", "(", "rrule", "!", "=", "null", ")", "{", "cv", ".", "put", "(", "Events", ".", "RRULE", ",", "rrule", ")", ";", "}", "break", ";", "case", "Tags", ".", "CALENDAR_SUBJECT", ":", "cv", ".", "put", "(", "Events", ".", "TITLE", ",", "getValue", "(", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_SENSITIVITY", ":", "cv", ".", "put", "(", "Events", ".", "VISIBILITY", ",", "encodeVisibility", "(", "getValueInt", "(", ")", ")", ")", ";", "break", ";", "case", "Tags", ".", "CALENDAR_BUSY_STATUS", ":", "busyStatus", "=", "getValueInt", "(", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "cv", ".", "put", "(", "Events", ".", "_SYNC_ID", ",", "parentCv", ".", "getAsString", "(", "Events", ".", "_SYNC_ID", ")", "+", "<CHAR_LIT:_>", "+", "exceptionStartTime", ")", ";", "setTimeRelatedValues", "(", "cv", ",", "startTime", ",", "endTime", ",", "allDayEvent", ")", ";", "if", "(", "!", "isValidEventValues", "(", "cv", ")", ")", "return", ";", "int", "exceptionStart", "=", "ops", ".", "mCount", ";", "ops", ".", "newException", "(", "cv", ")", ";", "if", "(", "attendeeValues", "!", "=", "null", ")", "{", "for", "(", "ContentValues", "attValues", ":", "attendeeValues", ")", "{", "String", "attendeeEmail", "=", "attValues", ".", "getAsString", "(", "Attendees", ".", "ATTENDEE_EMAIL", ")", ";", "if", "(", "mEmailAddress", ".", "equalsIgnoreCase", "(", "attendeeEmail", ")", ")", "{", "attValues", ".", "put", "(", "Attendees", ".", "ATTENDEE_STATUS", ",", "CalendarUtilities", ".", "attendeeStatusFromBusyStatus", "(", "busyStatus", ")", ")", ";", "}", "ops", ".", "newAttendee", "(", "attValues", ",", "exceptionStart", ")", ";", "}", "}", "if", "(", "reminderMins", ">", "0", ")", "{", "ops", ".", "newReminder", "(", "reminderMins", ",", "exceptionStart", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "exceptionsParser", "(", "CalendarOperations", "ops", ",", "ContentValues", "cv", ",", "ArrayList", "<", "ContentValues", ">", "attendeeValues", ",", "int", "reminderMins", ",", "int", "busyStatus", ",", "long", "startTime", ",", "long", "endTime", ")", "throws", "IOException", "{", "while", "(", "nextTag", "(", "Tags", ".", "CALENDAR_EXCEPTIONS", ")", "!", "=", "END", ")", "{", "switch", "(", "tag", ")", "{", "case", "Tags", ".", "CALENDAR_EXCEPTION", ":", "exceptionParser", "(", "ops", ",", "cv", ",", "attendeeValues", ",", "reminderMins", ",", "busyStatus", ",", "startTime", ",", "endTime", ")", ";", "break", ";", "default", ":", "skipTag", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "testSetTimeRelatedValues_NonRecurring", "(", ")", "throws", "IOException", "{", "CalendarSyncAdapter", "adapter", "=", "getTestSyncAdapter", "(", "CalendarSyncAdapter", ".", "class", ")", ";", "EasCalendarSyncParser", "p", "=", "adapter", ".", "new", "EasCalendarSyncParser", "(", "getTestInputStream", "(", ")", ",", "adapter", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "GregorianCalendar", "startCalendar", "=", "new", "GregorianCalendar", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:8>", ",", "<NUM_LIT:30>", ")", ";", "Long", "startTime", "=", "startCalendar", ".", "getTimeInMillis", "(", ")", ";", "GregorianCalendar", "endCalendar", "=", "new", "GregorianCalendar", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:9>", ",", "<NUM_LIT:30>", ")", ";", "Long", "endTime", "=", "endCalendar", ".", "getTimeInMillis", "(", ")", ";", "p", ".", "setTimeRelatedValues", "(", "cv", ",", "startTime", ",", "endTime", ",", "0", ")", ";", "assertNull", "(", "cv", ".", "getAsInteger", "(", "Events", ".", "DURATION", ")", ")", ";", "assertEquals", "(", "startTime", ",", "cv", ".", "getAsLong", "(", "Events", ".", "DTSTART", ")", ")", ";", "assertEquals", "(", "endTime", ",", "cv", ".", "getAsLong", "(", "Events", ".", "DTEND", ")", ")", ";", "assertEquals", "(", "endTime", ",", "cv", ".", "getAsLong", "(", "Events", ".", "LAST_DATE", ")", ")", ";", "assertNull", "(", "cv", ".", "getAsString", "(", "Events", ".", "EVENT_TIMEZONE", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSetTimeRelatedValues_Recurring", "(", ")", "throws", "IOException", "{", "CalendarSyncAdapter", "adapter", "=", "getTestSyncAdapter", "(", "CalendarSyncAdapter", ".", "class", ")", ";", "EasCalendarSyncParser", "p", "=", "adapter", ".", "new", "EasCalendarSyncParser", "(", "getTestInputStream", "(", ")", ",", "adapter", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "GregorianCalendar", "startCalendar", "=", "new", "GregorianCalendar", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:8>", ",", "<NUM_LIT:30>", ")", ";", "Long", "startTime", "=", "startCalendar", ".", "getTimeInMillis", "(", ")", ";", "GregorianCalendar", "endCalendar", "=", "new", "GregorianCalendar", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:9>", ",", "<NUM_LIT:30>", ")", ";", "Long", "endTime", "=", "endCalendar", ".", "getTimeInMillis", "(", ")", ";", "cv", ".", "put", "(", "Events", ".", "RRULE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "p", ".", "setTimeRelatedValues", "(", "cv", ",", "startTime", ",", "endTime", ",", "0", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "cv", ".", "getAsString", "(", "Events", ".", "DURATION", ")", ")", ";", "assertEquals", "(", "startTime", ",", "cv", ".", "getAsLong", "(", "Events", ".", "DTSTART", ")", ")", ";", "assertNull", "(", "cv", ".", "getAsLong", "(", "Events", ".", "DTEND", ")", ")", ";", "assertNull", "(", "cv", ".", "getAsLong", "(", "Events", ".", "LAST_DATE", ")", ")", ";", "assertNull", "(", "cv", ".", "getAsString", "(", "Events", ".", "EVENT_TIMEZONE", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSetTimeRelatedValues_AllDay", "(", ")", "throws", "IOException", "{", "CalendarSyncAdapter", "adapter", "=", "getTestSyncAdapter", "(", "CalendarSyncAdapter", ".", "class", ")", ";", "EasCalendarSyncParser", "p", "=", "adapter", ".", "new", "EasCalendarSyncParser", "(", "getTestInputStream", "(", ")", ",", "adapter", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "GregorianCalendar", "startCalendar", "=", "new", "GregorianCalendar", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:8>", ",", "<NUM_LIT:30>", ")", ";", "Long", "startTime", "=", "startCalendar", ".", "getTimeInMillis", "(", ")", ";", "GregorianCalendar", "endCalendar", "=", "new", "GregorianCalendar", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT:11>", ",", "<NUM_LIT:8>", ",", "<NUM_LIT:30>", ")", ";", "Long", "endTime", "=", "endCalendar", ".", "getTimeInMillis", "(", ")", ";", "cv", ".", "put", "(", "Events", ".", "RRULE", ",", "\"", "<STR_LIT>", "\"", ")", ";", "p", ".", "setTimeRelatedValues", "(", "cv", ",", "startTime", ",", "endTime", ",", "1", ")", ";", "startCalendar", "=", "new", "GregorianCalendar", "(", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "startCalendar", ".", "set", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT:10>", ",", "0", ",", "0", ",", "0", ")", ";", "startCalendar", ".", "set", "(", "GregorianCalendar", ".", "MILLISECOND", ",", "0", ")", ";", "startTime", "=", "startCalendar", ".", "getTimeInMillis", "(", ")", ";", "assertEquals", "(", "startTime", ",", "cv", ".", "getAsLong", "(", "Events", ".", "DTSTART", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "cv", ".", "getAsString", "(", "Events", ".", "DURATION", ")", ")", ";", "assertNull", "(", "cv", ".", "getAsLong", "(", "Events", ".", "DTEND", ")", ")", ";", "assertNull", "(", "cv", ".", "getAsLong", "(", "Events", ".", "LAST_DATE", ")", ")", ";", "assertNotNull", "(", "cv", ".", "getAsString", "(", "Events", ".", "EVENT_TIMEZONE", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testSetTimeRelatedValues_Recurring_AllDay_Exception", "(", ")", "throws", "IOException", "{", "CalendarSyncAdapter", "adapter", "=", "getTestSyncAdapter", "(", "CalendarSyncAdapter", ".", "class", ")", ";", "EasCalendarSyncParser", "p", "=", "adapter", ".", "new", "EasCalendarSyncParser", "(", "getTestInputStream", "(", ")", ",", "adapter", ")", ";", "ContentValues", "cv", "=", "new", "ContentValues", "(", ")", ";", "GregorianCalendar", "startCalendar", "=", "new", "GregorianCalendar", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT>", ",", "<NUM_LIT:8>", ",", "<NUM_LIT:30>", ")", ";", "Long", "startTime", "=", "startCalendar", ".", "getTimeInMillis", "(", ")", ";", "GregorianCalendar", "endCalendar", "=", "new", "GregorianCalendar", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT>", ",", "<NUM_LIT:9>", ",", "<NUM_LIT:30>", ")", ";", "Long", "endTime", "=", "endCalendar", ".", "getTimeInMillis", "(", ")", ";", "cv", ".", "put", "(", "Events", ".", "ORIGINAL_ALL_DAY", ",", "1", ")", ";", "GregorianCalendar", "instanceCalendar", "=", "new", "GregorianCalendar", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT>", ",", "<NUM_LIT:8>", ",", "<NUM_LIT:30>", ")", ";", "cv", ".", "put", "(", "Events", ".", "ORIGINAL_INSTANCE_TIME", ",", "instanceCalendar", ".", "getTimeInMillis", "(", ")", ")", ";", "p", ".", "setTimeRelatedValues", "(", "cv", ",", "startTime", ",", "endTime", ",", "0", ")", ";", "GregorianCalendar", "testCalendar", "=", "new", "GregorianCalendar", "(", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "testCalendar", ".", "set", "(", "<NUM_LIT>", ",", "<NUM_LIT:5>", ",", "<NUM_LIT>", ",", "0", ",", "0", ",", "0", ")", ";", "testCalendar", ".", "set", "(", "GregorianCalendar", ".", "MILLISECOND", ",", "0", ")", ";", "Long", "testTime", "=", "testCalendar", ".", "getTimeInMillis", "(", ")", ";", "assertEquals", "(", "testTime", ",", "cv", ".", "getAsLong", "(", "Events", ".", "ORIGINAL_INSTANCE_TIME", ")", ")", ";", "assertNull", "(", "cv", ".", "getAsString", "(", "Events", ".", "DURATION", ")", ")", ";", "assertEquals", "(", "endTime", ",", "cv", ".", "getAsLong", "(", "Events", ".", "DTEND", ")", ")", ";", "assertEquals", "(", "endTime", ",", "cv", ".", "getAsLong", "(", "Events", ".", "LAST_DATE", ")", ")", ";", "assertNull", "(", "cv", ".", "getAsString", "(", "Events", ".", "EVENT_TIMEZONE", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "updatedExtendedProperty", "(", "String", "name", ",", "String", "value", ",", "long", "id", ")", "{", "Cursor", "c", "=", "mService", ".", "mContentResolver", ".", "query", "(", "ExtendedProperties", ".", "CONTENT_URI", ",", "EXTENDED_PROPERTY_PROJECTION", ",", "EVENT_ID_AND_NAME", ",", "new", "String", "[", "]", "{", "Long", ".", "toString", "(", "id", ")", ",", "name", "}", ",", "null", ")", ";", "long", "extendedPropertyId", "=", "-", "1", ";", "if", "(", "c", "!", "=", "null", ")", "{", "try", "{", "if", "(", "c", ".", "moveToFirst", "(", ")", ")", "{", "extendedPropertyId", "=", "c", ".", "getLong", "(", "EXTENDED_PROPERTY_ID", ")", ";", "}", "}", "finally", "{", "c", ".", "close", "(", ")", ";", "}", "}", "if", "(", "extendedPropertyId", ">", "=", "0", ")", "{", "add", "(", "ContentProviderOperation", ".", "newUpdate", "(", "ContentUris", ".", "withAppendedId", "(", "EXTENDED_PROPERTIES_URI", ",", "extendedPropertyId", ")", ")", ".", "withValue", "(", "ExtendedProperties", ".", "VALUE", ",", "value", ")", ".", "build", "(", ")", ")", ";", "}", "else", "{", "newExtendedProperty", "(", "name", ",", "value", ")", ";", "}", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "private", "void", "cacheAuthAndCmdString", "(", ")", "{", "String", "safeUserName", "=", "URLEncoder", ".", "encode", "(", "mUserName", ")", ";", "String", "cs", "=", "mUserName", "+", "<CHAR_LIT::>", "+", "mPassword", ";", "mAuthString", "=", "\"", "<STR_LIT>", "\"", "+", "Base64", ".", "encodeToString", "(", "cs", ".", "getBytes", "(", ")", ",", "Base64", ".", "NO_WRAP", ")", ";", "mCmdString", "=", "\"", "<STR_LIT>", "\"", "+", "safeUserName", "+", "\"", "<STR_LIT>", "\"", "+", "mDeviceId", "+", "\"", "<STR_LIT>", "\"", "+", "mDeviceType", ";", "}", "</s>"]
["<s>", "public", "boolean", "isLooping", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "public", "boolean", "isLooping", "(", ")", "{", "return", "mLooping", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isLooping", "(", ")", "{", "return", "mIsLooping", ";", "}", "</s>"]
["<s>", "static", "public", "long", "getUtcAllDayCalendarTime", "(", "long", "time", ",", "TimeZone", "localTimeZone", ")", "{", "return", "transposeAllDayTime", "(", "time", ",", "localTimeZone", ",", "UTC_TIMEZONE", ")", ";", "}", "</s>"]
["<s>", "static", "public", "long", "getLocalAllDayCalendarTime", "(", "long", "time", ",", "TimeZone", "localTimeZone", ")", "{", "return", "transposeAllDayTime", "(", "time", ",", "UTC_TIMEZONE", ",", "localTimeZone", ")", ";", "}", "</s>"]
["<s>", "static", "private", "long", "transposeAllDayTime", "(", "long", "time", ",", "TimeZone", "fromTimeZone", ",", "TimeZone", "toTimeZone", ")", "{", "GregorianCalendar", "fromCalendar", "=", "new", "GregorianCalendar", "(", "fromTimeZone", ")", ";", "fromCalendar", ".", "setTimeInMillis", "(", "time", ")", ";", "GregorianCalendar", "toCalendar", "=", "new", "GregorianCalendar", "(", "toTimeZone", ")", ";", "toCalendar", ".", "set", "(", "fromCalendar", ".", "get", "(", "GregorianCalendar", ".", "YEAR", ")", ",", "fromCalendar", ".", "get", "(", "GregorianCalendar", ".", "MONTH", ")", ",", "fromCalendar", ".", "get", "(", "GregorianCalendar", ".", "DATE", ")", ",", "0", ",", "0", ",", "0", ")", ";", "return", "toCalendar", ".", "getTimeInMillis", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetUtcAllDayCalendarTime", "(", ")", "{", "GregorianCalendar", "correctUtc", "=", "new", "GregorianCalendar", "(", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "correctUtc", ".", "set", "(", "<NUM_LIT>", ",", "<NUM_LIT:2>", ",", "<NUM_LIT:10>", ",", "0", ",", "0", ",", "0", ")", ";", "long", "correctUtcTime", "=", "correctUtc", ".", "getTimeInMillis", "(", ")", ";", "TimeZone", "localTimeZone", "=", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ";", "GregorianCalendar", "localCalendar", "=", "new", "GregorianCalendar", "(", "localTimeZone", ")", ";", "localCalendar", ".", "set", "(", "<NUM_LIT>", ",", "<NUM_LIT:2>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ";", "long", "localTimeMillis", "=", "localCalendar", ".", "getTimeInMillis", "(", ")", ";", "long", "convertedUtcTime", "=", "CalendarUtilities", ".", "getUtcAllDayCalendarTime", "(", "localTimeMillis", ",", "localTimeZone", ")", ";", "assertEquals", "(", "convertedUtcTime", "/", "<NUM_LIT:1000>", ",", "correctUtcTime", "/", "<NUM_LIT:1000>", ")", ";", "localTimeZone", "=", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ";", "localCalendar", "=", "new", "GregorianCalendar", "(", "localTimeZone", ")", ";", "localCalendar", ".", "set", "(", "<NUM_LIT>", ",", "<NUM_LIT:2>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ";", "localTimeMillis", "=", "localCalendar", ".", "getTimeInMillis", "(", ")", ";", "convertedUtcTime", "=", "CalendarUtilities", ".", "getUtcAllDayCalendarTime", "(", "localTimeMillis", ",", "localTimeZone", ")", ";", "assertEquals", "(", "convertedUtcTime", "/", "<NUM_LIT:1000>", ",", "correctUtcTime", "/", "<NUM_LIT:1000>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "testGetLocalAllDayCalendarTime", "(", ")", "{", "TimeZone", "utcTimeZone", "=", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ";", "TimeZone", "localTimeZone", "=", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ";", "GregorianCalendar", "correctLocal", "=", "new", "GregorianCalendar", "(", "localTimeZone", ")", ";", "correctLocal", ".", "set", "(", "<NUM_LIT>", ",", "<NUM_LIT:2>", ",", "<NUM_LIT:10>", ",", "0", ",", "0", ",", "0", ")", ";", "long", "correctLocalTime", "=", "correctLocal", ".", "getTimeInMillis", "(", ")", ";", "GregorianCalendar", "utcCalendar", "=", "new", "GregorianCalendar", "(", "utcTimeZone", ")", ";", "utcCalendar", ".", "set", "(", "<NUM_LIT>", ",", "<NUM_LIT:2>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ";", "long", "utcTimeMillis", "=", "utcCalendar", ".", "getTimeInMillis", "(", ")", ";", "long", "convertedLocalTime", "=", "CalendarUtilities", ".", "getLocalAllDayCalendarTime", "(", "utcTimeMillis", ",", "localTimeZone", ")", ";", "assertEquals", "(", "convertedLocalTime", "/", "<NUM_LIT:1000>", ",", "correctLocalTime", "/", "<NUM_LIT:1000>", ")", ";", "localTimeZone", "=", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ";", "correctLocal", "=", "new", "GregorianCalendar", "(", "localTimeZone", ")", ";", "correctLocal", ".", "set", "(", "<NUM_LIT>", ",", "<NUM_LIT:2>", ",", "<NUM_LIT:10>", ",", "0", ",", "0", ",", "0", ")", ";", "correctLocalTime", "=", "correctLocal", ".", "getTimeInMillis", "(", ")", ";", "utcCalendar", "=", "new", "GregorianCalendar", "(", "utcTimeZone", ")", ";", "utcCalendar", ".", "set", "(", "<NUM_LIT>", ",", "<NUM_LIT:2>", ",", "<NUM_LIT:10>", ",", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ";", "utcTimeMillis", "=", "utcCalendar", ".", "getTimeInMillis", "(", ")", ";", "convertedLocalTime", "=", "CalendarUtilities", ".", "getLocalAllDayCalendarTime", "(", "utcTimeMillis", ",", "localTimeZone", ")", ";", "assertEquals", "(", "convertedLocalTime", "/", "<NUM_LIT:1000>", ",", "correctLocalTime", "/", "<NUM_LIT:1000>", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "void", "invalidateKeyguardCache", "(", ")", "{", "mKeyguardDisableChecked", "=", "false", ";", "mKeyguardDisablePackageName", "=", "null", ";", "}", "</s>"]
["<s>", "public", "synchronized", "String", "getKeyguardDisablePackage", "(", ")", "{", "if", "(", "!", "mKeyguardDisableChecked", ")", "{", "mKeyguardDisablePackageName", "=", "findKeyguardPermission", "(", ")", ";", "mKeyguardDisableChecked", "=", "true", ";", "}", "return", "mKeyguardDisablePackageName", ";", "}", "</s>"]
["<s>", "private", "String", "findKeyguardPermission", "(", ")", "{", "PackageManager", "pm", "=", "mContext", ".", "getPackageManager", "(", ")", ";", "List", "<", "PackageInfo", ">", "packages", "=", "pm", ".", "getInstalledPackages", "(", "0", ")", ";", "for", "(", "PackageInfo", "info", ":", "packages", ")", "{", "if", "(", "0", "!", "=", "(", "info", ".", "applicationInfo", ".", "flags", "&", "(", "ApplicationInfo", ".", "FLAG_SYSTEM", "|", "ApplicationInfo", ".", "FLAG_UPDATED_SYSTEM_APP", ")", ")", ")", "{", "continue", ";", "}", "int", "permissionResult", "=", "pm", ".", "checkPermission", "(", "android", ".", "Manifest", ".", "permission", ".", "DISABLE_KEYGUARD", ",", "info", ".", "packageName", ")", ";", "if", "(", "permissionResult", "=", "=", "PackageManager", ".", "PERMISSION_GRANTED", ")", "{", "Log", ".", "d", "(", "Email", ".", "LOG_TAG", ",", "\"", "<STR_LIT>", "\"", "+", "info", ".", "packageName", ")", ";", "return", "info", ".", "applicationInfo", ".", "loadLabel", "(", "pm", ")", ".", "toString", "(", ")", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Dialog", "onCreateDialog", "(", "int", "id", ")", "{", "switch", "(", "id", ")", "{", "case", "DIALOG_KEYGUARD_DISABLED", ":", "return", "new", "AlertDialog", ".", "Builder", "(", "this", ")", ".", "setIcon", "(", "android", ".", "R", ".", "drawable", ".", "ic_dialog_alert", ")", ".", "setTitle", "(", "R", ".", "string", ".", "keyguard_disabled_dlg_title", ")", ".", "setMessage", "(", "getString", "(", "R", ".", "string", ".", "keyguard_disabled_dlg_message_fmt", ",", "mKeyguardBlockerName", ")", ")", ".", "setNeutralButton", "(", "R", ".", "string", ".", "okay_action", ",", "new", "DialogInterface", ".", "OnClickListener", "(", ")", "{", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "whichButton", ")", "{", "dismissDialog", "(", "DIALOG_KEYGUARD_DISABLED", ")", ";", "finish", "(", ")", ";", "}", "}", ")", ".", "setCancelable", "(", "false", ")", ".", "create", "(", ")", ";", "}", "return", "super", ".", "onCreateDialog", "(", "id", ")", ";", "}", "</s>"]
["<s>", "public", "void", "onClick", "(", "DialogInterface", "dialog", ",", "int", "whichButton", ")", "{", "dismissDialog", "(", "DIALOG_KEYGUARD_DISABLED", ")", ";", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onPrepareDialog", "(", "int", "id", ",", "Dialog", "dialog", ")", "{", "switch", "(", "id", ")", "{", "case", "DIALOG_KEYGUARD_DISABLED", ":", "AlertDialog", "alert", "=", "(", "AlertDialog", ")", "dialog", ";", "alert", ".", "setMessage", "(", "getString", "(", "R", ".", "string", ".", "keyguard_disabled_dlg_message_fmt", ",", "mKeyguardBlockerName", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onBackPressed", "(", "boolean", "okToProceed", ")", "{", "boolean", "easFlowMode", "=", "getIntent", "(", ")", ".", "getBooleanExtra", "(", "EXTRA_EAS_FLOW", ",", "false", ")", ";", "if", "(", "easFlowMode", ")", "{", "AccountSetupBasics", ".", "actionAccountCreateFinishedEas", "(", "this", ")", ";", "}", "else", "{", "if", "(", "mAccount", "!", "=", "null", ")", "{", "if", "(", "okToProceed", ")", "{", "AccountSetupBasics", ".", "actionAccountCreateFinished", "(", "this", ",", "mAccount", ".", "mId", ")", ";", "}", "else", "{", "AccountFolderList", ".", "actionShowAccounts", "(", "this", ")", ";", "}", "}", "else", "{", "Welcome", ".", "actionStart", "(", "this", ")", ";", "}", "}", "finish", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "verifyHostname", "(", "Socket", "socket", ",", "String", "hostname", ")", "throws", "IOException", "{", "SSLSocket", "ssl", "=", "(", "SSLSocket", ")", "socket", ";", "ssl", ".", "startHandshake", "(", ")", ";", "SSLSession", "session", "=", "ssl", ".", "getSession", "(", ")", ";", "if", "(", "session", "=", "=", "null", ")", "{", "throw", "new", "SSLException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "!", "HOSTNAME_VERIFIER", ".", "verify", "(", "hostname", ",", "session", ")", ")", "{", "throw", "new", "SSLPeerUnverifiedException", "(", "\"", "<STR_LIT>", "\"", "+", "hostname", ")", ";", "}", "}", "</s>"]
["<s>", "void", "resetHeartbeats", "(", "int", "legalHeartbeat", ")", "{", "userLog", "(", "\"", "<STR_LIT>", "\"", "+", "legalHeartbeat", ")", ";", "if", "(", "legalHeartbeat", ">", "mPingHeartbeat", ")", "{", "if", "(", "mPingMinHeartbeat", "<", "legalHeartbeat", ")", "{", "mPingMinHeartbeat", "=", "legalHeartbeat", ";", "}", "if", "(", "mPingForceHeartbeat", "<", "legalHeartbeat", ")", "{", "mPingForceHeartbeat", "=", "legalHeartbeat", ";", "}", "if", "(", "mPingMinHeartbeat", ">", "mPingMaxHeartbeat", ")", "{", "mPingMaxHeartbeat", "=", "legalHeartbeat", ";", "}", "}", "else", "if", "(", "legalHeartbeat", "<", "mPingHeartbeat", ")", "{", "mPingMaxHeartbeat", "=", "legalHeartbeat", ";", "if", "(", "mPingMaxHeartbeat", "<", "mPingMinHeartbeat", ")", "{", "mPingMinHeartbeat", "=", "legalHeartbeat", ";", "}", "}", "mPingHeartbeat", "=", "legalHeartbeat", ";", "mPingHeartbeatDropped", "=", "false", ";", "}", "</s>"]
["<s>", "public", "void", "testResetHeartbeats", "(", ")", "{", "EasSyncService", "svc", "=", "new", "EasSyncService", "(", ")", ";", "svc", ".", "mPingMaxHeartbeat", "=", "<NUM_LIT:1000>", ";", "svc", ".", "mPingMinHeartbeat", "=", "<NUM_LIT>", ";", "svc", ".", "mPingHeartbeat", "=", "<NUM_LIT>", ";", "svc", ".", "mPingForceHeartbeat", "=", "<NUM_LIT:100>", ";", "svc", ".", "mPingHeartbeatDropped", "=", "true", ";", "svc", ".", "resetHeartbeats", "(", "<NUM_LIT>", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "svc", ".", "mPingMinHeartbeat", ")", ";", "assertEquals", "(", "<NUM_LIT:1000>", ",", "svc", ".", "mPingMaxHeartbeat", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "svc", ".", "mPingHeartbeat", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "svc", ".", "mPingForceHeartbeat", ")", ";", "assertFalse", "(", "svc", ".", "mPingHeartbeatDropped", ")", ";", "svc", ".", "mPingMaxHeartbeat", "=", "<NUM_LIT:1000>", ";", "svc", ".", "mPingMinHeartbeat", "=", "<NUM_LIT>", ";", "svc", ".", "mPingHeartbeat", "=", "<NUM_LIT:100>", ";", "svc", ".", "mPingForceHeartbeat", "=", "<NUM_LIT:100>", ";", "svc", ".", "mPingHeartbeatDropped", "=", "true", ";", "svc", ".", "resetHeartbeats", "(", "<NUM_LIT>", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "svc", ".", "mPingMinHeartbeat", ")", ";", "assertEquals", "(", "<NUM_LIT:1000>", ",", "svc", ".", "mPingMaxHeartbeat", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "svc", ".", "mPingHeartbeat", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "svc", ".", "mPingForceHeartbeat", ")", ";", "assertFalse", "(", "svc", ".", "mPingHeartbeatDropped", ")", ";", "svc", ".", "mPingMaxHeartbeat", "=", "<NUM_LIT:1000>", ";", "svc", ".", "mPingMinHeartbeat", "=", "<NUM_LIT>", ";", "svc", ".", "mPingHeartbeat", "=", "<NUM_LIT>", ";", "svc", ".", "mPingForceHeartbeat", "=", "<NUM_LIT:100>", ";", "svc", ".", "mPingHeartbeatDropped", "=", "true", ";", "svc", ".", "resetHeartbeats", "(", "<NUM_LIT>", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "svc", ".", "mPingMinHeartbeat", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "svc", ".", "mPingMaxHeartbeat", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "svc", ".", "mPingHeartbeat", ")", ";", "assertEquals", "(", "<NUM_LIT:100>", ",", "svc", ".", "mPingForceHeartbeat", ")", ";", "assertFalse", "(", "svc", ".", "mPingHeartbeatDropped", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getMinPasswordLength", "(", ")", "{", "return", "mMinPasswordLength", ";", "}", "</s>"]
["<s>", "public", "int", "getPasswordMode", "(", ")", "{", "return", "mPasswordMode", ";", "}", "</s>"]
["<s>", "public", "int", "getMaxPasswordFails", "(", ")", "{", "return", "mMaxPasswordFails", ";", "}", "</s>"]
["<s>", "public", "int", "getMaxScreenLockTime", "(", ")", "{", "return", "mMaxScreenLockTime", ";", "}", "</s>"]
["<s>", "public", "boolean", "isRequireRemoteWipe", "(", ")", "{", "return", "mRequireRemoteWipe", ";", "}", "</s>"]
["<s>", "private", "String", "acknowledgeProvision", "(", "String", "tempKey", ",", "String", "result", ")", "throws", "IOException", "{", "return", "acknowledgeProvisionImpl", "(", "tempKey", ",", "result", ",", "false", ")", ";", "}", "</s>"]
["<s>", "private", "String", "acknowledgeProvisionImpl", "(", "String", "tempKey", ",", "String", "status", ",", "boolean", "remoteWipe", ")", "throws", "IOException", "{", "Serializer", "s", "=", "new", "Serializer", "(", ")", ";", "s", ".", "start", "(", "Tags", ".", "PROVISION_PROVISION", ")", ".", "start", "(", "Tags", ".", "PROVISION_POLICIES", ")", ";", "s", ".", "start", "(", "Tags", ".", "PROVISION_POLICY", ")", ";", "s", ".", "data", "(", "Tags", ".", "PROVISION_POLICY_TYPE", ",", "getPolicyType", "(", ")", ")", ";", "s", ".", "data", "(", "Tags", ".", "PROVISION_POLICY_KEY", ",", "tempKey", ")", ";", "s", ".", "data", "(", "Tags", ".", "PROVISION_STATUS", ",", "status", ")", ";", "s", ".", "end", "(", ")", ".", "end", "(", ")", ";", "if", "(", "remoteWipe", ")", "{", "s", ".", "start", "(", "Tags", ".", "PROVISION_REMOTE_WIPE", ")", ";", "s", ".", "data", "(", "Tags", ".", "PROVISION_STATUS", ",", "PROVISION_STATUS_OK", ")", ";", "s", ".", "end", "(", ")", ";", "}", "s", ".", "end", "(", ")", ".", "done", "(", ")", ";", "HttpResponse", "resp", "=", "sendHttpClientPost", "(", "\"", "<STR_LIT>", "\"", ",", "s", ".", "toByteArray", "(", ")", ")", ";", "int", "code", "=", "resp", ".", "getStatusLine", "(", ")", ".", "getStatusCode", "(", ")", ";", "if", "(", "code", "=", "=", "HttpStatus", ".", "SC_OK", ")", "{", "InputStream", "is", "=", "resp", ".", "getEntity", "(", ")", ".", "getContent", "(", ")", ";", "ProvisionParser", "pp", "=", "new", "ProvisionParser", "(", "is", ",", "this", ")", ";", "if", "(", "pp", ".", "parse", "(", ")", ")", "{", "return", "pp", ".", "getPolicyKey", "(", ")", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "boolean", "hasSupportablePolicySet", "(", ")", "{", "return", "(", "mPolicySet", "!", "=", "null", ")", "&", "&", "mIsSupportable", ";", "}", "</s>"]
["<s>", "public", "void", "testPolicySetConstructor", "(", ")", "{", "try", "{", "new", "PolicySet", "(", "<NUM_LIT:100>", ",", "PolicySet", ".", "PASSWORD_MODE_NONE", ",", "0", ",", "0", ",", "false", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "IllegalArgumentException", "e", ")", "{", "}", "try", "{", "new", "PolicySet", "(", "0", ",", "PolicySet", ".", "PASSWORD_MODE_STRONG", "+", "1", ",", "0", ",", "0", ",", "false", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "IllegalArgumentException", "e", ")", "{", "}", "try", "{", "new", "PolicySet", "(", "0", ",", "PolicySet", ".", "PASSWORD_MODE_NONE", ",", "0", ",", "PolicySet", ".", "SCREEN_LOCK_TIME_MAX", "+", "1", ",", "false", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "IllegalArgumentException", "e", ")", "{", "}", "}", "</s>"]
["<s>", "public", "void", "testAddHeaders", "(", ")", "{", "HttpRequestBase", "method", "=", "new", "HttpPost", "(", ")", ";", "EasSyncService", "svc", "=", "new", "EasSyncService", "(", ")", ";", "svc", ".", "mAuthString", "=", "\"", "<STR_LIT>", "\"", ";", "svc", ".", "mProtocolVersion", "=", "\"", "<STR_LIT>", "\"", ";", "svc", ".", "mDeviceType", "=", "\"", "<STR_LIT>", "\"", ";", "svc", ".", "mAccount", "=", "null", ";", "svc", ".", "setHeaders", "(", "method", ",", "false", ")", ";", "Header", "[", "]", "headers", "=", "method", ".", "getHeaders", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "0", ",", "headers", ".", "length", ")", ";", "method", ".", "removeHeaders", "(", "\"", "<STR_LIT>", "\"", ")", ";", "svc", ".", "setHeaders", "(", "method", ",", "true", ")", ";", "headers", "=", "method", ".", "getHeaders", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "1", ",", "headers", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:0>", "\"", ",", "headers", "[", "0", "]", ".", "getValue", "(", ")", ")", ";", "Account", "account", "=", "new", "Account", "(", ")", ";", "account", ".", "mSecuritySyncKey", "=", "null", ";", "svc", ".", "mAccount", "=", "account", ";", "method", ".", "removeHeaders", "(", "\"", "<STR_LIT>", "\"", ")", ";", "svc", ".", "setHeaders", "(", "method", ",", "true", ")", ";", "headers", "=", "method", ".", "getHeaders", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "1", ",", "headers", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:0>", "\"", ",", "headers", "[", "0", "]", ".", "getValue", "(", ")", ")", ";", "account", ".", "mSecuritySyncKey", "=", "\"", "<STR_LIT>", "\"", ";", "svc", ".", "mAccount", "=", "account", ";", "method", ".", "removeHeaders", "(", "\"", "<STR_LIT>", "\"", ")", ";", "svc", ".", "setHeaders", "(", "method", ",", "true", ")", ";", "headers", "=", "method", ".", "getHeaders", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "1", ",", "headers", ".", "length", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "headers", "[", "0", "]", ".", "getValue", "(", ")", ")", ";", "}", "</s>"]
["<s>", "static", "public", "void", "releaseSecurityHold", "(", "Account", "account", ")", "{", "SyncManager", "syncManager", "=", "INSTANCE", ";", "if", "(", "syncManager", "!", "=", "null", ")", "{", "syncManager", ".", "releaseSyncHolds", "(", "INSTANCE", ",", "AbstractSyncService", ".", "EXIT_SECURITY_FAILURE", ",", "account", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "onSelectAll", "(", ")", "{", "final", "Cursor", "c", "=", "mListAdapter", ".", "getCursor", "(", ")", ";", "c", ".", "moveToPosition", "(", "-", "1", ")", ";", "HashSet", "<", "Long", ">", "mSet", "=", "new", "HashSet", "<", "Long", ">", "(", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "mSet", ".", "add", "(", "(", "long", ")", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_ID", ")", ")", ";", "}", "mListAdapter", ".", "setSelectedSet", "(", "mSet", ")", ";", "mListView", ".", "invalidateViews", "(", ")", ";", "showMultiPanel", "(", "true", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onMarkAllRead", "(", ")", "{", "doDustinMultiSet", "(", "DUSTIN_MULTISET_TYPE_READ", ",", "true", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onUnstarAll", "(", ")", "{", "doDustinMultiSet", "(", "DUSTIN_MULTISET_TYPE_UNFAV", ",", "false", ")", ";", "}", "</s>"]
["<s>", "private", "void", "doDustinMultiSet", "(", "final", "int", "type", ",", "final", "boolean", "allValue", ")", "{", "doDustinMultiSet", "(", "type", ",", "allValue", ",", "null", ")", ";", "}", "</s>"]
["<s>", "private", "void", "doDustinMultiSet", "(", "final", "int", "type", ",", "final", "boolean", "allValue", ",", "final", "Set", "<", "Long", ">", "mSet", ")", "{", "final", "int", "MSG_ACTION", "=", "0", ";", "final", "int", "MSG_UPDATE", "=", "1", ";", "final", "int", "MSG_CLOSE", "=", "<NUM_LIT:2>", ";", "final", "Cursor", "c", "=", "mListAdapter", ".", "getCursor", "(", ")", ";", "final", "ProgressDialog", "doDiag", "=", "this", ".", "markingDialog", ";", "doDiag", ".", "setProgressStyle", "(", "ProgressDialog", ".", "STYLE_HORIZONTAL", ")", ";", "String", "progressMessage", ";", "switch", "(", "type", ")", "{", "case", "DUSTIN_MULTISET_TYPE_UNREAD", ":", "progressMessage", "=", "\"", "<STR_LIT>", "\"", ";", "break", ";", "case", "DUSTIN_MULTISET_TYPE_READ", ":", "progressMessage", "=", "\"", "<STR_LIT>", "\"", ";", "break", ";", "case", "DUSTIN_MULTISET_TYPE_UNFAV", ":", "progressMessage", "=", "\"", "<STR_LIT>", "\"", ";", "break", ";", "case", "DUSTIN_MULTISET_TYPE_FAV", ":", "progressMessage", "=", "\"", "<STR_LIT>", "\"", ";", "break", ";", "default", ":", "progressMessage", "=", "\"", "<STR_LIT>", "\"", ";", "break", ";", "}", "doDiag", ".", "setMessage", "(", "progressMessage", ")", ";", "doDiag", ".", "setProgress", "(", "0", ")", ";", "final", "ProgressDialog", "countDiag", "=", "this", ".", "countingDialog", ";", "if", "(", "mSet", "=", "=", "null", ")", "{", "countDiag", ".", "setMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "countDiag", ".", "show", "(", ")", ";", "}", "final", "Handler", "mHandler", "=", "new", "Handler", "(", ")", "{", "public", "void", "handleMessage", "(", "android", ".", "os", ".", "Message", "msg", ")", "{", "switch", "(", "msg", ".", "getData", "(", ")", ".", "getInt", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "case", "MSG_ACTION", ":", "if", "(", "mSet", "=", "=", "null", ")", "countDiag", ".", "cancel", "(", ")", ";", "doDiag", ".", "setMax", "(", "msg", ".", "getData", "(", ")", ".", "getInt", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "doDiag", ".", "show", "(", ")", ";", "break", ";", "case", "MSG_UPDATE", ":", "doDiag", ".", "setProgress", "(", "msg", ".", "getData", "(", ")", ".", "getInt", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "break", ";", "case", "MSG_CLOSE", ":", "doDiag", ".", "cancel", "(", ")", ";", "break", ";", "}", "}", "}", ";", "new", "Thread", "(", "new", "Runnable", "(", ")", "{", "private", "void", "sendMessage", "(", "int", "what", ",", "int", "extra", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "mHandler", ".", "obtainMessage", "(", ")", ";", "Bundle", "b", "=", "new", "Bundle", "(", ")", ";", "b", ".", "putInt", "(", "\"", "<STR_LIT>", "\"", ",", "extra", ")", ";", "b", ".", "putInt", "(", "\"", "<STR_LIT>", "\"", ",", "what", ")", ";", "msg", ".", "setData", "(", "b", ")", ";", "mHandler", ".", "sendMessage", "(", "msg", ")", ";", "}", "public", "void", "run", "(", ")", "{", "int", "numToMark", "=", "0", ";", "ArrayList", "<", "Long", ">", "idList", "=", "new", "ArrayList", "<", "Long", ">", "(", ")", ";", "if", "(", "mSet", "=", "=", "null", ")", "{", "c", ".", "moveToPosition", "(", "-", "1", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "id", "=", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_ID", ")", ";", "boolean", "read", ";", "switch", "(", "type", ")", "{", "case", "DUSTIN_MULTISET_TYPE_READ", ":", "read", "=", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_READ", ")", "=", "=", "1", ";", "break", ";", "case", "DUSTIN_MULTISET_TYPE_UNREAD", ":", "read", "=", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_READ", ")", "=", "=", "0", ";", "break", ";", "case", "DUSTIN_MULTISET_TYPE_FAV", ":", "read", "=", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_FAVORITE", ")", "=", "=", "0", ";", "break", ";", "case", "DUSTIN_MULTISET_TYPE_UNFAV", ":", "read", "=", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_FAVORITE", ")", "=", "=", "1", ";", "break", ";", "default", ":", "read", "=", "false", ";", "break", ";", "}", "if", "(", "read", "!", "=", "allValue", ")", "{", "idList", ".", "add", "(", "id", ")", ";", "numToMark", "+", "+", ";", "}", "}", "}", "else", "{", "for", "(", "long", "id", ":", "mSet", ")", "{", "idList", ".", "add", "(", "id", ")", ";", "}", "numToMark", "=", "idList", ".", "size", "(", ")", ";", "}", "sendMessage", "(", "MSG_ACTION", ",", "numToMark", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "numToMark", ";", "i", "+", "+", ")", "{", "long", "id", "=", "(", "long", ")", "idList", ".", "get", "(", "i", ")", ";", "if", "(", "type", "=", "=", "DUSTIN_MULTISET_TYPE_READ", "|", "|", "type", "=", "=", "DUSTIN_MULTISET_TYPE_UNREAD", ")", "{", "onSetMessageRead", "(", "id", ",", "allValue", ")", ";", "}", "else", "if", "(", "type", "=", "=", "DUSTIN_MULTISET_TYPE_FAV", "|", "|", "type", "=", "=", "DUSTIN_MULTISET_TYPE_UNFAV", ")", "{", "onSetMessageFavorite", "(", "id", ",", "allValue", ")", ";", "}", "sendMessage", "(", "MSG_UPDATE", ",", "i", "+", "1", ")", ";", "}", "sendMessage", "(", "MSG_CLOSE", ",", "0", ")", ";", "}", "}", ")", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "handleMessage", "(", "android", ".", "os", ".", "Message", "msg", ")", "{", "switch", "(", "msg", ".", "getData", "(", ")", ".", "getInt", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "case", "MSG_ACTION", ":", "if", "(", "mSet", "=", "=", "null", ")", "countDiag", ".", "cancel", "(", ")", ";", "doDiag", ".", "setMax", "(", "msg", ".", "getData", "(", ")", ".", "getInt", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "doDiag", ".", "show", "(", ")", ";", "break", ";", "case", "MSG_UPDATE", ":", "doDiag", ".", "setProgress", "(", "msg", ".", "getData", "(", ")", ".", "getInt", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "break", ";", "case", "MSG_CLOSE", ":", "doDiag", ".", "cancel", "(", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "private", "void", "sendMessage", "(", "int", "what", ",", "int", "extra", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "mHandler", ".", "obtainMessage", "(", ")", ";", "Bundle", "b", "=", "new", "Bundle", "(", ")", ";", "b", ".", "putInt", "(", "\"", "<STR_LIT>", "\"", ",", "extra", ")", ";", "b", ".", "putInt", "(", "\"", "<STR_LIT>", "\"", ",", "what", ")", ";", "msg", ".", "setData", "(", "b", ")", ";", "mHandler", ".", "sendMessage", "(", "msg", ")", ";", "}", "</s>"]
["<s>", "public", "void", "run", "(", ")", "{", "int", "numToMark", "=", "0", ";", "ArrayList", "<", "Long", ">", "idList", "=", "new", "ArrayList", "<", "Long", ">", "(", ")", ";", "if", "(", "mSet", "=", "=", "null", ")", "{", "c", ".", "moveToPosition", "(", "-", "1", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "long", "id", "=", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_ID", ")", ";", "boolean", "read", ";", "switch", "(", "type", ")", "{", "case", "DUSTIN_MULTISET_TYPE_READ", ":", "read", "=", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_READ", ")", "=", "=", "1", ";", "break", ";", "case", "DUSTIN_MULTISET_TYPE_UNREAD", ":", "read", "=", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_READ", ")", "=", "=", "0", ";", "break", ";", "case", "DUSTIN_MULTISET_TYPE_FAV", ":", "read", "=", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_FAVORITE", ")", "=", "=", "0", ";", "break", ";", "case", "DUSTIN_MULTISET_TYPE_UNFAV", ":", "read", "=", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_FAVORITE", ")", "=", "=", "1", ";", "break", ";", "default", ":", "read", "=", "false", ";", "break", ";", "}", "if", "(", "read", "!", "=", "allValue", ")", "{", "idList", ".", "add", "(", "id", ")", ";", "numToMark", "+", "+", ";", "}", "}", "}", "else", "{", "for", "(", "long", "id", ":", "mSet", ")", "{", "idList", ".", "add", "(", "id", ")", ";", "}", "numToMark", "=", "idList", ".", "size", "(", ")", ";", "}", "sendMessage", "(", "MSG_ACTION", ",", "numToMark", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "numToMark", ";", "i", "+", "+", ")", "{", "long", "id", "=", "(", "long", ")", "idList", ".", "get", "(", "i", ")", ";", "if", "(", "type", "=", "=", "DUSTIN_MULTISET_TYPE_READ", "|", "|", "type", "=", "=", "DUSTIN_MULTISET_TYPE_UNREAD", ")", "{", "onSetMessageRead", "(", "id", ",", "allValue", ")", ";", "}", "else", "if", "(", "type", "=", "=", "DUSTIN_MULTISET_TYPE_FAV", "|", "|", "type", "=", "=", "DUSTIN_MULTISET_TYPE_UNFAV", ")", "{", "onSetMessageFavorite", "(", "id", ",", "allValue", ")", ";", "}", "sendMessage", "(", "MSG_UPDATE", ",", "i", "+", "1", ")", ";", "}", "sendMessage", "(", "MSG_CLOSE", ",", "0", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onMultiToggleRead", "(", "Set", "<", "Long", ">", "selectedSet", ",", "final", "boolean", "markRead", ")", "{", "int", "type", "=", "markRead", "?", "DUSTIN_MULTISET_TYPE_READ", ":", "DUSTIN_MULTISET_TYPE_UNREAD", ";", "doDustinMultiSet", "(", "type", ",", "markRead", ",", "selectedSet", ")", ";", "}", "</s>"]
["<s>", "private", "void", "onMultiToggleFavorite", "(", "Set", "<", "Long", ">", "selectedSet", ",", "final", "boolean", "doStar", ")", "{", "int", "type", "=", "doStar", "?", "DUSTIN_MULTISET_TYPE_FAV", ":", "DUSTIN_MULTISET_TYPE_UNFAV", ";", "doDustinMultiSet", "(", "type", ",", "doStar", ",", "selectedSet", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setSelectedSet", "(", "HashSet", "s", ")", "{", "mChecked", "=", "s", ";", "}", "</s>"]
["<s>", "public", "void", "applyAction", "(", "long", "id", ")", "{", "onSetMessageFavorite", "(", "id", ",", "false", ")", ";", "}", "</s>"]
["<s>", "private", "HashSet", "<", "Long", ">", "getApplicableMessages", "(", "int", "toCompare", ",", "int", "expectedValue", ")", "{", "HashSet", "<", "Long", ">", "returnSet", "=", "new", "HashSet", "<", "Long", ">", "(", ")", ";", "Cursor", "c", "=", "mListAdapter", ".", "getCursor", "(", ")", ";", "c", ".", "moveToPosition", "(", "-", "1", ")", ";", "while", "(", "c", ".", "moveToNext", "(", ")", ")", "{", "if", "(", "c", ".", "getInt", "(", "toCompare", ")", "=", "=", "expectedValue", ")", "{", "returnSet", ".", "add", "(", "(", "long", ")", "c", ".", "getInt", "(", "MessageListAdapter", ".", "COLUMN_ID", ")", ")", ";", "}", "}", "return", "returnSet", ";", "}", "</s>"]
["<s>", "private", "void", "applyActionToSet", "(", "String", "progressTitle", ",", "final", "Set", "<", "Long", ">", "mSet", ",", "final", "MultiActionHelper", "helper", ")", "{", "final", "int", "MSG_UPDATE", "=", "0", ";", "final", "int", "MSG_CLOSE", "=", "1", ";", "final", "ProgressDialog", "mDialog", "=", "this", ".", "progressDialog", ";", "mDialog", ".", "setProgressStyle", "(", "ProgressDialog", ".", "STYLE_HORIZONTAL", ")", ";", "mDialog", ".", "setTitle", "(", "progressTitle", ")", ";", "mDialog", ".", "setProgress", "(", "0", ")", ";", "mDialog", ".", "setMax", "(", "mSet", ".", "size", "(", ")", ")", ";", "mDialog", ".", "show", "(", ")", ";", "final", "Handler", "mHandler", "=", "new", "Handler", "(", ")", "{", "public", "void", "handleMessage", "(", "android", ".", "os", ".", "Message", "msg", ")", "{", "switch", "(", "msg", ".", "getData", "(", ")", ".", "getInt", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "case", "MSG_UPDATE", ":", "mDialog", ".", "setProgress", "(", "msg", ".", "getData", "(", ")", ".", "getInt", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "break", ";", "case", "MSG_CLOSE", ":", "mDialog", ".", "cancel", "(", ")", ";", "break", ";", "}", "}", "}", ";", "new", "Thread", "(", "new", "Runnable", "(", ")", "{", "private", "void", "sendMessage", "(", "int", "what", ",", "int", "count", ")", "{", "android", ".", "os", ".", "Message", "msg", "=", "mHandler", ".", "obtainMessage", "(", ")", ";", "Bundle", "b", "=", "new", "Bundle", "(", ")", ";", "b", ".", "putInt", "(", "\"", "<STR_LIT>", "\"", ",", "count", ")", ";", "b", ".", "putInt", "(", "\"", "<STR_LIT>", "\"", ",", "what", ")", ";", "msg", ".", "setData", "(", "b", ")", ";", "mHandler", ".", "sendMessage", "(", "msg", ")", ";", "}", "public", "void", "run", "(", ")", "{", "int", "i", "=", "0", ";", "for", "(", "Long", "id", ":", "mSet", ")", "{", "sendMessage", "(", "MSG_UPDATE", ",", "i", "+", "1", ")", ";", "helper", ".", "applyAction", "(", "id", ")", ";", "i", "+", "+", ";", "}", "sendMessage", "(", "MSG_CLOSE", ",", "0", ")", ";", "}", "}", ")", ".", "start", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setSelectedSet", "(", "HashSet", "<", "Long", ">", "s", ")", "{", "mChecked", "=", "s", ";", "}", "</s>"]
