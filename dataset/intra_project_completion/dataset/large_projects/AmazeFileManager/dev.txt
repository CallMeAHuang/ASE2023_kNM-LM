["<s>", "private", "void", "toastOnParseError", "(", "IOException", "result", ")", "{", "Toast", ".", "makeText", "(", "AppConfig", ".", "getInstance", "(", ")", ".", "getMainActivityContext", "(", ")", ",", "AppConfig", ".", "getInstance", "(", ")", ".", "getResources", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "ssh_pem_key_parse_error", ",", "result", ".", "getLocalizedMessage", "(", ")", ")", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testExtractZipWithSlashPrefixEntry", "(", ")", "throws", "Exception", "{", "Extractor", "extractor", "=", "new", "ZipExtractor", "(", "RuntimeEnvironment", ".", "application", ",", "zipfile3", ".", "getAbsolutePath", "(", ")", ",", "Environment", ".", "getExternalStorageDirectory", "(", ")", ".", "getAbsolutePath", "(", ")", ",", "emptyListener", ")", ";", "extractor", ".", "extractFiles", "(", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", "}", ")", ";", "assertEquals", "(", "0", ",", "extractor", ".", "getInvalidArchiveEntries", "(", ")", ".", "size", "(", ")", ")", ";", "assertTrue", "(", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "exists", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFixEntryName", "(", ")", "throws", "Exception", "{", "Extractor", "extractor", "=", "extractorClass", "(", ")", ".", "getConstructor", "(", "Context", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ",", "Extractor", ".", "OnUpdate", ".", "class", ")", ".", "newInstance", "(", "RuntimeEnvironment", ".", "application", ",", "getArchiveFile", "(", ")", ".", "getAbsolutePath", "(", ")", ",", "Environment", ".", "getExternalStorageDirectory", "(", ")", ".", "getAbsolutePath", "(", ")", ",", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "extractor", ".", "fixEntryName", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "extractor", ".", "fixEntryName", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "extractor", ".", "fixEntryName", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:/>", "\"", ",", "extractor", ".", "fixEntryName", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "extractor", ".", "fixEntryName", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "extractor", ".", "fixEntryName", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "extractor", ".", "fixEntryName", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "extractor", ".", "fixEntryName", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "extractor", ".", "fixEntryName", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "extractor", ".", "fixEntryName", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "extractor", ".", "fixEntryName", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "extractor", ".", "fixEntryName", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "extractor", ".", "fixEntryName", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "extractor", ".", "fixEntryName", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "scanFile", "(", "@", "NonNull", "HybridFile", "hybridFile", ",", "Context", "context", ")", "{", "if", "(", "(", "hybridFile", ".", "isLocal", "(", ")", "|", "|", "hybridFile", ".", "isOtgFile", "(", ")", ")", "&", "&", "hybridFile", ".", "exists", "(", "context", ")", ")", "{", "DocumentFile", "documentFile", "=", "FileUtil", ".", "getDocumentFile", "(", "hybridFile", ".", "getFile", "(", ")", ",", "false", ",", "context", ")", ";", "if", "(", "documentFile", "=", "=", "null", ")", "documentFile", "=", "DocumentFile", ".", "fromFile", "(", "hybridFile", ".", "getFile", "(", ")", ")", ";", "FileUtils", ".", "scanFile", "(", "documentFile", ".", "getUri", "(", ")", ",", "context", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "toast", "(", "Context", "context", ",", "@", "StringRes", "int", "message", ")", "{", "if", "(", "context", "=", "=", "null", ")", "return", ";", "if", "(", "!", "(", "context", "instanceof", "Application", ")", ")", "{", "context", "=", "context", ".", "getApplicationContext", "(", ")", ";", "}", "if", "(", "context", "instanceof", "Application", ")", "{", "final", "Context", "c", "=", "context", ";", "final", "@", "StringRes", "int", "m", "=", "message", ";", "(", "(", "AppConfig", ")", "context", ")", ".", "runInApplicationThread", "(", "(", ")", "-", ">", "{", "Toast", ".", "makeText", "(", "c", ",", "m", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "}", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "isNavigationViewSavedStateMissing", "(", ")", "{", "return", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "M", "&", "&", "Build", ".", "VERSION", ".", "SDK_INT", "<", "=", "Build", ".", "VERSION_CODES", ".", "O_MR1", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testUnencryptedKeyToKeyPair", "(", ")", "throws", "InterruptedException", "{", "CountDownLatch", "waiter", "=", "new", "CountDownLatch", "(", "1", ")", ";", "PemToKeyPairTask", "task", "=", "new", "PemToKeyPairTask", "(", "unencryptedOpenSshKey", ",", "result", "-", ">", "{", "assertNotNull", "(", "result", ")", ";", "assertNotNull", "(", "result", ".", "getPublic", "(", ")", ")", ";", "assertNotNull", "(", "result", ".", "getPrivate", "(", ")", ")", ";", "waiter", ".", "countDown", "(", ")", ";", "}", ")", ";", "task", ".", "execute", "(", ")", ";", "waiter", ".", "await", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEncryptedKeyToKeyPair", "(", ")", "throws", "InterruptedException", ",", "NoSuchFieldException", ",", "IllegalAccessException", "{", "CountDownLatch", "waiter", "=", "new", "CountDownLatch", "(", "1", ")", ";", "PemToKeyPairTask", "task", "=", "new", "PemToKeyPairTask", "(", "encryptedOpenSshKey", ",", "result", "-", ">", "{", "assertNotNull", "(", "result", ")", ";", "assertNotNull", "(", "result", ".", "getPublic", "(", ")", ")", ";", "assertNotNull", "(", "result", ".", "getPrivate", "(", ")", ")", ";", "waiter", ".", "countDown", "(", ")", ";", "}", ")", ";", "Field", "field", "=", "PemToKeyPairTask", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "field", ".", "setAccessible", "(", "true", ")", ";", "field", ".", "set", "(", "task", ",", "new", "PasswordFinder", "(", ")", "{", "@", "Override", "public", "char", "[", "]", "reqPassword", "(", "Resource", "<", "?", ">", "resource", ")", "{", "return", "\"", "<STR_LIT>", "\"", ".", "toCharArray", "(", ")", ";", "}", "@", "Override", "public", "boolean", "shouldRetry", "(", "Resource", "<", "?", ">", "resource", ")", "{", "return", "false", ";", "}", "}", ")", ";", "task", ".", "execute", "(", ")", ";", "waiter", ".", "await", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "scanFile", "(", "@", "NonNull", "Context", "context", ",", "@", "NonNull", "HybridFile", "[", "]", "hybridFiles", ")", "{", "if", "(", "hybridFiles", "[", "0", "]", ".", "exists", "(", "context", ")", "&", "&", "hybridFiles", "[", "0", "]", ".", "isLocal", "(", ")", ")", "{", "String", "[", "]", "paths", "=", "new", "String", "[", "hybridFiles", ".", "length", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "hybridFiles", ".", "length", ";", "i", "+", "+", ")", "{", "HybridFile", "hybridFile", "=", "hybridFiles", "[", "i", "]", ";", "paths", "[", "i", "]", "=", "hybridFile", ".", "getPath", "(", ")", ";", "}", "MediaScannerConnection", ".", "scanFile", "(", "context", ",", "paths", ",", "null", ",", "null", ")", ";", "}", "else", "{", "for", "(", "HybridFile", "hybridFile", ":", "hybridFiles", ")", "{", "scanFile", "(", "hybridFile", ",", "context", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "initiatePurchaseFlow", "(", ")", "{", "Runnable", "purchaseFlowRequest", "=", "(", ")", "-", ">", "{", "SkuDetailsParams", ".", "Builder", "params", "=", "SkuDetailsParams", ".", "newBuilder", "(", ")", ";", "params", ".", "setSkusList", "(", "skuList", ")", ".", "setType", "(", "BillingClient", ".", "SkuType", ".", "INAPP", ")", ";", "billingClient", ".", "querySkuDetailsAsync", "(", "params", ".", "build", "(", ")", ",", "(", "responseCode", ",", "skuDetailsList", ")", "-", ">", "{", "skuDetails", "=", "skuDetailsList", ";", "popProductsList", "(", "responseCode", ",", "skuDetailsList", ")", ";", "}", ")", ";", "}", ";", "executeServiceRequest", "(", "purchaseFlowRequest", ")", ";", "}", "</s>"]
["<s>", "private", "void", "popProductsList", "(", "int", "responseCode", ",", "List", "<", "SkuDetails", ">", "skuDetailsList", ")", "{", "if", "(", "responseCode", "=", "=", "BillingClient", ".", "BillingResponse", ".", "OK", "&", "&", "skuDetailsList", "!", "=", "null", ")", "{", "showPaymentsDialog", "(", "activity", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "executeServiceRequest", "(", "Runnable", "runnable", ")", "{", "if", "(", "isServiceConnected", ")", "{", "runnable", ".", "run", "(", ")", ";", "}", "else", "{", "startServiceConnection", "(", "runnable", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "startServiceConnection", "(", "final", "Runnable", "executeOnSuccess", ")", "{", "billingClient", ".", "startConnection", "(", "new", "BillingClientStateListener", "(", ")", "{", "@", "Override", "public", "void", "onBillingSetupFinished", "(", "@", "BillingClient", ".", "BillingResponse", "int", "billingResponseCode", ")", "{", "Log", ".", "d", "(", "Billing", ".", "this", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ",", "\"", "<STR_LIT>", "\"", "+", "billingResponseCode", ")", ";", "if", "(", "billingResponseCode", "=", "=", "BillingClient", ".", "BillingResponse", ".", "OK", ")", "{", "isServiceConnected", "=", "true", ";", "if", "(", "executeOnSuccess", "!", "=", "null", ")", "{", "executeOnSuccess", ".", "run", "(", ")", ";", "}", "}", "}", "@", "Override", "public", "void", "onBillingServiceDisconnected", "(", ")", "{", "isServiceConnected", "=", "false", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "void", "destroyBillingInstance", "(", ")", "{", "if", "(", "billingClient", "!", "=", "null", "&", "&", "billingClient", ".", "isReady", "(", ")", ")", "{", "billingClient", ".", "endConnection", "(", ")", ";", "billingClient", "=", "null", ";", "}", "}", "</s>"]
["<s>", "private", "void", "showPaymentsDialog", "(", "final", "BasicActivity", "context", ")", "{", "final", "MaterialDialog", ".", "Builder", "builder", "=", "new", "MaterialDialog", ".", "Builder", "(", "context", ")", ";", "builder", ".", "title", "(", "R", ".", "string", ".", "donate", ")", ";", "builder", ".", "adapter", "(", "this", ",", "null", ")", ";", "builder", ".", "theme", "(", "context", ".", "getAppTheme", "(", ")", ".", "getMaterialDialogTheme", "(", ")", ")", ";", "builder", ".", "cancelListener", "(", "dialog", "-", ">", "purchaseProduct", ".", "purchaseCancel", "(", ")", ")", ";", "builder", ".", "show", "(", ")", ";", "}", "</s>"]
["<s>", "private", "CoordinatorLayout", ".", "LayoutParams", "calculateHeaderViewParams", "(", ")", "{", "CoordinatorLayout", ".", "LayoutParams", "layoutParams", "=", "(", "CoordinatorLayout", ".", "LayoutParams", ")", "mAppBarLayout", ".", "getLayoutParams", "(", ")", ";", "float", "vidAspectRatio", "=", "(", "float", ")", "HEADER_WIDTH", "/", "(", "float", ")", "HEADER_HEIGHT", ";", "Log", ".", "d", "(", "TAG", ",", "vidAspectRatio", "+", "\"", "\"", ")", ";", "int", "screenWidth", "=", "getResources", "(", ")", ".", "getDisplayMetrics", "(", ")", ".", "widthPixels", ";", "float", "reqHeightAsPerAspectRatio", "=", "(", "float", ")", "screenWidth", "*", "vidAspectRatio", ";", "Log", ".", "d", "(", "TAG", ",", "reqHeightAsPerAspectRatio", "+", "\"", "\"", ")", ";", "Log", ".", "d", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", "+", "screenWidth", "+", "\"", "<STR_LIT>", "\"", "+", "reqHeightAsPerAspectRatio", ")", ";", "layoutParams", ".", "width", "=", "screenWidth", ";", "layoutParams", ".", "height", "=", "(", "int", ")", "reqHeightAsPerAspectRatio", ";", "return", "layoutParams", ";", "}", "</s>"]
["<s>", "private", "void", "switchIcons", "(", ")", "{", "if", "(", "getAppTheme", "(", ")", ".", "equals", "(", "AppTheme", ".", "DARK", ")", "|", "|", "getAppTheme", "(", ")", ".", "equals", "(", "AppTheme", ".", "BLACK", ")", ")", "{", "mAuthorsDivider", ".", "setBackgroundColor", "(", "Utils", ".", "getColor", "(", "this", ",", "R", ".", "color", ".", "divider_dark_card", ")", ")", ";", "mDeveloper1Divider", ".", "setBackgroundColor", "(", "Utils", ".", "getColor", "(", "this", ",", "R", ".", "color", ".", "divider_dark_card", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testMkdir", "(", ")", "throws", "InterruptedException", "{", "File", "newFolder", "=", "new", "File", "(", "storageRoot", ",", "\"", "<STR_LIT>", "\"", ")", ";", "HybridFile", "newFolderHF", "=", "new", "HybridFile", "(", "OpenMode", ".", "FILE", ",", "newFolder", ".", "getAbsolutePath", "(", ")", ")", ";", "CountDownLatch", "waiter", "=", "new", "CountDownLatch", "(", "1", ")", ";", "Operations", ".", "mkdir", "(", "newFolderHF", ",", "RuntimeEnvironment", ".", "application", ",", "false", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "done", "(", "HybridFile", "hFile", ",", "boolean", "b", ")", "{", "waiter", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter", ".", "await", "(", ")", ";", "assertTrue", "(", "newFolder", ".", "exists", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testMkdirDuplicate", "(", ")", "throws", "InterruptedException", "{", "File", "newFolder", "=", "new", "File", "(", "storageRoot", ",", "\"", "<STR_LIT>", "\"", ")", ";", "HybridFile", "newFolderHF", "=", "new", "HybridFile", "(", "OpenMode", ".", "FILE", ",", "newFolder", ".", "getAbsolutePath", "(", ")", ")", ";", "CountDownLatch", "waiter1", "=", "new", "CountDownLatch", "(", "1", ")", ";", "Operations", ".", "mkdir", "(", "newFolderHF", ",", "RuntimeEnvironment", ".", "application", ",", "false", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "done", "(", "HybridFile", "hFile", ",", "boolean", "b", ")", "{", "waiter1", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter1", ".", "await", "(", ")", ";", "assertTrue", "(", "newFolder", ".", "exists", "(", ")", ")", ";", "CountDownLatch", "waiter2", "=", "new", "CountDownLatch", "(", "1", ")", ";", "AtomicBoolean", "assertFlag", "=", "new", "AtomicBoolean", "(", "false", ")", ";", "Operations", ".", "mkdir", "(", "newFolderHF", ",", "RuntimeEnvironment", ".", "application", ",", "false", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "exists", "(", "HybridFile", "file", ")", "{", "assertFlag", ".", "set", "(", "true", ")", ";", "waiter2", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter2", ".", "await", "(", ")", ";", "assertTrue", "(", "assertFlag", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testMkdirNewFolderSameNameAsCurrentFolder", "(", ")", "throws", "InterruptedException", "{", "File", "newFolder", "=", "new", "File", "(", "storageRoot", ",", "\"", "<STR_LIT>", "\"", ")", ";", "HybridFile", "newFolderHF", "=", "new", "HybridFile", "(", "OpenMode", ".", "FILE", ",", "newFolder", ".", "getAbsolutePath", "(", ")", ")", ";", "CountDownLatch", "waiter1", "=", "new", "CountDownLatch", "(", "1", ")", ";", "Operations", ".", "mkdir", "(", "newFolderHF", ",", "RuntimeEnvironment", ".", "application", ",", "false", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "done", "(", "HybridFile", "hFile", ",", "boolean", "b", ")", "{", "waiter1", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter1", ".", "await", "(", ")", ";", "assertTrue", "(", "newFolder", ".", "exists", "(", ")", ")", ";", "File", "newFolder2", "=", "new", "File", "(", "newFolder", ",", "\"", "<STR_LIT>", "\"", ")", ";", "HybridFile", "newFolder2HF", "=", "new", "HybridFile", "(", "OpenMode", ".", "FILE", ",", "newFolder2", ".", "getAbsolutePath", "(", ")", ")", ";", "CountDownLatch", "waiter2", "=", "new", "CountDownLatch", "(", "1", ")", ";", "Operations", ".", "mkdir", "(", "newFolder2HF", ",", "RuntimeEnvironment", ".", "application", ",", "false", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "done", "(", "HybridFile", "hFile", ",", "boolean", "b", ")", "{", "waiter2", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter2", ".", "await", "(", ")", ";", "assertTrue", "(", "newFolder2", ".", "exists", "(", ")", ")", ";", "CountDownLatch", "waiter3", "=", "new", "CountDownLatch", "(", "1", ")", ";", "AtomicBoolean", "assertFlag", "=", "new", "AtomicBoolean", "(", "false", ")", ";", "Operations", ".", "mkdir", "(", "newFolder2HF", ",", "RuntimeEnvironment", ".", "application", ",", "false", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "exists", "(", "HybridFile", "file", ")", "{", "assertFlag", ".", "set", "(", "true", ")", ";", "waiter3", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter3", ".", "await", "(", ")", ";", "assertTrue", "(", "assertFlag", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRename", "(", ")", "throws", "InterruptedException", "{", "File", "oldFolder", "=", "new", "File", "(", "storageRoot", ",", "\"", "<STR_LIT:1>", "\"", ")", ";", "HybridFile", "oldFolderHF", "=", "new", "HybridFile", "(", "OpenMode", ".", "FILE", ",", "oldFolder", ".", "getAbsolutePath", "(", ")", ")", ";", "File", "newFolder", "=", "new", "File", "(", "storageRoot", ",", "\"", "<STR_LIT:2>", "\"", ")", ";", "HybridFile", "newFolderHF", "=", "new", "HybridFile", "(", "OpenMode", ".", "FILE", ",", "newFolder", ".", "getAbsolutePath", "(", ")", ")", ";", "CountDownLatch", "waiter1", "=", "new", "CountDownLatch", "(", "1", ")", ";", "Operations", ".", "mkdir", "(", "oldFolderHF", ",", "RuntimeEnvironment", ".", "application", ",", "false", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "done", "(", "HybridFile", "hFile", ",", "boolean", "b", ")", "{", "waiter1", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter1", ".", "await", "(", ")", ";", "assertTrue", "(", "oldFolder", ".", "exists", "(", ")", ")", ";", "CountDownLatch", "waiter2", "=", "new", "CountDownLatch", "(", "1", ")", ";", "Operations", ".", "rename", "(", "oldFolderHF", ",", "newFolderHF", ",", "false", ",", "RuntimeEnvironment", ".", "application", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "done", "(", "HybridFile", "hFile", ",", "boolean", "b", ")", "{", "waiter2", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter2", ".", "await", "(", ")", ";", "assertFalse", "(", "oldFolder", ".", "exists", "(", ")", ")", ";", "assertTrue", "(", "newFolder", ".", "exists", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRenameSameName", "(", ")", "throws", "InterruptedException", "{", "File", "folder", "=", "new", "File", "(", "storageRoot", ",", "\"", "<STR_LIT>", "\"", ")", ";", "HybridFile", "folderHF", "=", "new", "HybridFile", "(", "OpenMode", ".", "FILE", ",", "folder", ".", "getAbsolutePath", "(", ")", ")", ";", "CountDownLatch", "waiter1", "=", "new", "CountDownLatch", "(", "1", ")", ";", "Operations", ".", "mkdir", "(", "folderHF", ",", "RuntimeEnvironment", ".", "application", ",", "false", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "done", "(", "HybridFile", "hFile", ",", "boolean", "b", ")", "{", "waiter1", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter1", ".", "await", "(", ")", ";", "assertTrue", "(", "folder", ".", "exists", "(", ")", ")", ";", "CountDownLatch", "waiter2", "=", "new", "CountDownLatch", "(", "1", ")", ";", "AtomicBoolean", "assertFlag", "=", "new", "AtomicBoolean", "(", "false", ")", ";", "Operations", ".", "rename", "(", "folderHF", ",", "folderHF", ",", "false", ",", "RuntimeEnvironment", ".", "application", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "exists", "(", "HybridFile", "file", ")", "{", "assertFlag", ".", "set", "(", "true", ")", ";", "waiter2", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter2", ".", "await", "(", ")", ";", "assertTrue", "(", "folder", ".", "exists", "(", ")", ")", ";", "assertTrue", "(", "assertFlag", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRenameSameName2", "(", ")", "throws", "InterruptedException", "{", "File", "folder", "=", "new", "File", "(", "storageRoot", ",", "\"", "<STR_LIT>", "\"", ")", ";", "HybridFile", "folderHF", "=", "new", "HybridFile", "(", "OpenMode", ".", "FILE", ",", "folder", ".", "getAbsolutePath", "(", ")", ")", ";", "CountDownLatch", "waiter1", "=", "new", "CountDownLatch", "(", "1", ")", ";", "Operations", ".", "mkdir", "(", "folderHF", ",", "RuntimeEnvironment", ".", "application", ",", "false", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "done", "(", "HybridFile", "hFile", ",", "boolean", "b", ")", "{", "waiter1", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter1", ".", "await", "(", ")", ";", "assertTrue", "(", "folder", ".", "exists", "(", ")", ")", ";", "File", "folder2", "=", "new", "File", "(", "storageRoot", ",", "\"", "<STR_LIT:2>", "\"", ")", ";", "HybridFile", "folder2HF", "=", "new", "HybridFile", "(", "OpenMode", ".", "FILE", ",", "folder2", ".", "getAbsolutePath", "(", ")", ")", ";", "CountDownLatch", "waiter2", "=", "new", "CountDownLatch", "(", "1", ")", ";", "Operations", ".", "mkdir", "(", "folder2HF", ",", "RuntimeEnvironment", ".", "application", ",", "false", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "done", "(", "HybridFile", "hFile", ",", "boolean", "b", ")", "{", "waiter2", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter2", ".", "await", "(", ")", ";", "assertTrue", "(", "folder2", ".", "exists", "(", ")", ")", ";", "CountDownLatch", "waiter3", "=", "new", "CountDownLatch", "(", "1", ")", ";", "AtomicBoolean", "assertFlag", "=", "new", "AtomicBoolean", "(", "false", ")", ";", "Operations", ".", "rename", "(", "folderHF", ",", "folder2HF", ",", "false", ",", "RuntimeEnvironment", ".", "application", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "exists", "(", "HybridFile", "file", ")", "{", "assertFlag", ".", "set", "(", "true", ")", ";", "waiter3", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter3", ".", "await", "(", ")", ";", "assertTrue", "(", "folder", ".", "exists", "(", ")", ")", ";", "assertTrue", "(", "assertFlag", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RequiresApi", "(", "api", "=", "Build", ".", "VERSION_CODES", ".", "KITKAT", ")", "private", "void", "updateUsbInformation", "(", ")", "{", "boolean", "isInformationUpdated", "=", "false", ";", "List", "<", "UsbOtgRepresentation", ">", "connectedDevices", "=", "OTGUtil", ".", "getMassStorageDevicesConnected", "(", "this", ")", ";", "if", "(", "!", "connectedDevices", ".", "isEmpty", "(", ")", ")", "{", "if", "(", "SingletonUsbOtg", ".", "getInstance", "(", ")", ".", "getUsbOtgRoot", "(", ")", "!", "=", "null", "&", "&", "OTGUtil", ".", "isUsbUriAccessible", "(", "this", ")", ")", "{", "for", "(", "UsbOtgRepresentation", "device", ":", "connectedDevices", ")", "{", "if", "(", "SingletonUsbOtg", ".", "getInstance", "(", ")", ".", "checkIfRootIsFromDevice", "(", "device", ")", ")", "{", "isInformationUpdated", "=", "true", ";", "break", ";", "}", "}", "if", "(", "!", "isInformationUpdated", ")", "{", "SingletonUsbOtg", ".", "getInstance", "(", ")", ".", "resetUsbOtgRoot", "(", ")", ";", "}", "}", "if", "(", "!", "isInformationUpdated", ")", "{", "SingletonUsbOtg", ".", "getInstance", "(", ")", ".", "setConnectedDevice", "(", "connectedDevices", ".", "get", "(", "0", ")", ")", ";", "isInformationUpdated", "=", "true", ";", "}", "}", "if", "(", "!", "isInformationUpdated", ")", "{", "SingletonUsbOtg", ".", "getInstance", "(", ")", ".", "resetUsbOtgRoot", "(", ")", ";", "drawer", ".", "refreshDrawer", "(", ")", ";", "goToMain", "(", "null", ")", ";", "}", "IntentFilter", "otgFilter", "=", "new", "IntentFilter", "(", ")", ";", "otgFilter", ".", "addAction", "(", "UsbManager", ".", "ACTION_USB_DEVICE_ATTACHED", ")", ";", "otgFilter", ".", "addAction", "(", "UsbManager", ".", "ACTION_USB_DEVICE_DETACHED", ")", ";", "registerReceiver", "(", "mOtgReceiver", ",", "otgFilter", ")", ";", "}", "</s>"]
["<s>", "@", "RequiresApi", "(", "api", "=", "Build", ".", "VERSION_CODES", ".", "KITKAT", ")", "public", "static", "boolean", "isUsbUriAccessible", "(", "Context", "context", ")", "{", "Uri", "rootUriString", "=", "SingletonUsbOtg", ".", "getInstance", "(", ")", ".", "getUsbOtgRoot", "(", ")", ";", "return", "DocumentsContract", ".", "isDocumentUri", "(", "context", ",", "rootUriString", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "Config", "(", "minSdk", "=", "KITKAT", ")", "public", "void", "usbConnectionTest", "(", ")", "{", "ActivityController", "<", "MainActivity", ">", "controller", "=", "Robolectric", ".", "buildActivity", "(", "MainActivity", ".", "class", ")", ".", "create", "(", ")", ";", "addUsbOtgDevice", "(", "controller", ".", "get", "(", ")", ")", ";", "controller", ".", "resume", "(", ")", ".", "get", "(", ")", ";", "Uri", "rootBefore", "=", "Uri", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "SingletonUsbOtg", ".", "getInstance", "(", ")", ".", "setUsbOtgRoot", "(", "rootBefore", ")", ";", "controller", ".", "pause", "(", ")", ".", "resume", "(", ")", ".", "get", "(", ")", ";", "Uri", "rootAfter", "=", "SingletonUsbOtg", ".", "getInstance", "(", ")", ".", "getUsbOtgRoot", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", "+", "rootBefore", "+", "\"", "<STR_LIT>", "\"", "+", "rootAfter", ",", "rootBefore", ",", "rootAfter", ")", ";", "}", "</s>"]
["<s>", "static", "void", "addUsbOtgDevice", "(", "Activity", "activity", ")", "{", "ShadowUsbManager", "sUsbManager", "=", "shadowOf", "(", "(", "UsbManager", ")", "activity", ".", "getSystemService", "(", "USB_SERVICE", ")", ")", ";", "UsbDevice", "device", ";", "try", "{", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "LOLLIPOP", ")", "{", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "M", ")", "{", "device", "=", "callUsbDeviceConstructor", "(", "\"", "<STR_LIT>", "\"", ",", "0", ",", "0", ",", "USB_CLASS_MASS_STORAGE", ",", "0", ",", "0", ",", "null", ",", "null", ",", "\"", "<STR_LIT:2>", "\"", ",", "null", ")", ";", "}", "else", "{", "device", "=", "callUsbDeviceConstructor", "(", "\"", "<STR_LIT>", "\"", ",", "0", ",", "0", ",", "USB_CLASS_MASS_STORAGE", ",", "0", ",", "0", ",", "null", ",", "null", ",", "null", ")", ";", "}", "configureUsbDevice", "(", "device", ")", ";", "}", "else", "{", "device", "=", "callUsbDeviceConstructor", "(", "\"", "<STR_LIT>", "\"", ",", "0", ",", "0", ",", "USB_CLASS_MASS_STORAGE", ",", "0", ",", "0", ",", "configureUsbDevice", "(", ")", ")", ";", "}", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "sUsbManager", ".", "addOrUpdateUsbDevice", "(", "device", ",", "true", ")", ";", "File", "storageDir1", "=", "new", "File", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ShadowEnvironment", ".", "setExternalStorageRemovable", "(", "storageDir1", ",", "true", ")", ";", "ShadowEnvironment", ".", "setExternalStorageState", "(", "storageDir1", ",", "Environment", ".", "MEDIA_MOUNTED", ")", ";", "}", "</s>"]
["<s>", "@", "RequiresApi", "(", "Build", ".", "VERSION_CODES", ".", "LOLLIPOP", ")", "static", "void", "configureUsbDevice", "(", "UsbDevice", "device", ")", "throws", "NoSuchMethodException", ",", "ClassNotFoundException", ",", "InvocationTargetException", ",", "InstantiationException", ",", "IllegalAccessException", "{", "UsbConfiguration", "usbConfiguration", "=", "callUsbConfigurationConstructor", "(", "0", ",", "\"", "\"", ",", "0", ",", "0", ")", ";", "configureUsbConfiguration", "(", "usbConfiguration", ")", ";", "Method", "configureMethod", "=", "device", ".", "getClass", "(", ")", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ",", "Parcelable", "[", "]", ".", "class", ")", ";", "configureMethod", ".", "invoke", "(", "device", ",", "(", "Object", ")", "new", "Parcelable", "[", "]", "{", "usbConfiguration", "}", ")", ";", "}", "</s>"]
["<s>", "@", "RequiresApi", "(", "Build", ".", "VERSION_CODES", ".", "LOLLIPOP", ")", "static", "void", "configureUsbConfiguration", "(", "UsbConfiguration", "usbConfiguration", ")", "throws", "NoSuchMethodException", ",", "ClassNotFoundException", ",", "InvocationTargetException", ",", "InstantiationException", ",", "IllegalAccessException", "{", "UsbInterface", "usbInterface", "=", "callUsbInterfaceConstructor", "(", "<NUM_LIT>", ",", "0", ",", "\"", "\"", ",", "USB_CLASS_MASS_STORAGE", ",", "0", ",", "0", ")", ";", "Method", "configureMethod", "=", "usbConfiguration", ".", "getClass", "(", ")", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ",", "Parcelable", "[", "]", ".", "class", ")", ";", "configureMethod", ".", "invoke", "(", "usbConfiguration", ",", "(", "Object", ")", "new", "Parcelable", "[", "]", "{", "usbInterface", "}", ")", ";", "}", "</s>"]
["<s>", "@", "RequiresApi", "(", "Build", ".", "VERSION_CODES", ".", "KITKAT", ")", "static", "Parcelable", "[", "]", "configureUsbDevice", "(", ")", "throws", "ClassNotFoundException", ",", "NoSuchMethodException", ",", "InvocationTargetException", ",", "InstantiationException", ",", "IllegalAccessException", "{", "UsbInterface", "usbInterface", "=", "(", "UsbInterface", ")", "callUsbInterfaceConstructor", "(", "<NUM_LIT>", ",", "USB_CLASS_MASS_STORAGE", ",", "0", ",", "0", ",", "null", ")", ";", "return", "new", "Parcelable", "[", "]", "{", "usbInterface", "}", ";", "}", "</s>"]
["<s>", "@", "RequiresApi", "(", "Build", ".", "VERSION_CODES", ".", "M", ")", "static", "UsbDevice", "callUsbDeviceConstructor", "(", "@", "NonNull", "String", "name", ",", "int", "vendorId", ",", "int", "productId", ",", "int", "usbClass", ",", "int", "subClass", ",", "int", "protocol", ",", "@", "Nullable", "String", "manufacturerName", ",", "@", "Nullable", "String", "productName", ",", "@", "NonNull", "String", "version", ",", "@", "Nullable", "String", "serialNumber", ")", "throws", "ClassNotFoundException", ",", "NoSuchMethodException", ",", "IllegalAccessException", ",", "InvocationTargetException", ",", "InstantiationException", "{", "Class", "<", "UsbDevice", ">", "clazz", "=", "(", "Class", "<", "UsbDevice", ">", ")", "Class", ".", "forName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Constructor", "<", "UsbDevice", ">", "constructor", "=", "clazz", ".", "getConstructor", "(", "String", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "return", "constructor", ".", "newInstance", "(", "name", ",", "vendorId", ",", "productId", ",", "usbClass", ",", "subClass", ",", "protocol", ",", "manufacturerName", ",", "productName", ",", "version", ",", "serialNumber", ")", ";", "}", "</s>"]
["<s>", "@", "RequiresApi", "(", "Build", ".", "VERSION_CODES", ".", "LOLLIPOP", ")", "static", "UsbDevice", "callUsbDeviceConstructor", "(", "@", "NonNull", "String", "name", ",", "int", "vendorId", ",", "int", "productId", ",", "int", "usbClass", ",", "int", "subClass", ",", "int", "protocol", ",", "@", "Nullable", "String", "manufacturerName", ",", "@", "Nullable", "String", "productName", ",", "@", "Nullable", "String", "serialNumber", ")", "throws", "ClassNotFoundException", ",", "NoSuchMethodException", ",", "IllegalAccessException", ",", "InvocationTargetException", ",", "InstantiationException", "{", "Class", "<", "UsbDevice", ">", "clazz", "=", "(", "Class", "<", "UsbDevice", ">", ")", "Class", ".", "forName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Constructor", "<", "UsbDevice", ">", "constructor", "=", "clazz", ".", "getConstructor", "(", "String", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "return", "constructor", ".", "newInstance", "(", "name", ",", "vendorId", ",", "productId", ",", "usbClass", ",", "subClass", ",", "protocol", ",", "manufacturerName", ",", "productName", ",", "serialNumber", ")", ";", "}", "</s>"]
["<s>", "@", "RequiresApi", "(", "Build", ".", "VERSION_CODES", ".", "KITKAT", ")", "static", "UsbDevice", "callUsbDeviceConstructor", "(", "@", "NonNull", "String", "name", ",", "int", "vendorId", ",", "int", "productId", ",", "int", "usbClass", ",", "int", "subClass", ",", "int", "protocol", ",", "@", "NonNull", "Parcelable", "[", "]", "interfaces", ")", "throws", "ClassNotFoundException", ",", "NoSuchMethodException", ",", "IllegalAccessException", ",", "InvocationTargetException", ",", "InstantiationException", "{", "Class", "<", "UsbDevice", ">", "clazz", "=", "(", "Class", "<", "UsbDevice", ">", ")", "Class", ".", "forName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Constructor", "<", "UsbDevice", ">", "constructor", "=", "clazz", ".", "getConstructor", "(", "String", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "Parcelable", "[", "]", ".", "class", ")", ";", "return", "constructor", ".", "newInstance", "(", "name", ",", "vendorId", ",", "productId", ",", "usbClass", ",", "subClass", ",", "protocol", ",", "interfaces", ")", ";", "}", "</s>"]
["<s>", "@", "RequiresApi", "(", "Build", ".", "VERSION_CODES", ".", "LOLLIPOP", ")", "static", "UsbConfiguration", "callUsbConfigurationConstructor", "(", "int", "id", ",", "@", "Nullable", "String", "name", ",", "int", "attributes", ",", "int", "maxPower", ")", "throws", "ClassNotFoundException", ",", "NoSuchMethodException", ",", "IllegalAccessException", ",", "InvocationTargetException", ",", "InstantiationException", "{", "Class", "<", "UsbConfiguration", ">", "clazz", "=", "(", "Class", "<", "UsbConfiguration", ">", ")", "Class", ".", "forName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Constructor", "<", "UsbConfiguration", ">", "constructor", "=", "clazz", ".", "getConstructor", "(", "int", ".", "class", ",", "String", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ")", ";", "return", "constructor", ".", "newInstance", "(", "id", ",", "name", ",", "attributes", ",", "maxPower", ")", ";", "}", "</s>"]
["<s>", "@", "RequiresApi", "(", "Build", ".", "VERSION_CODES", ".", "LOLLIPOP", ")", "static", "UsbInterface", "callUsbInterfaceConstructor", "(", "int", "id", ",", "int", "alternateSetting", ",", "@", "Nullable", "String", "name", ",", "int", "usbClass", ",", "int", "subClass", ",", "int", "protocol", ")", "throws", "ClassNotFoundException", ",", "NoSuchMethodException", ",", "IllegalAccessException", ",", "InvocationTargetException", ",", "InstantiationException", "{", "Class", "<", "UsbInterface", ">", "clazz", "=", "(", "Class", "<", "UsbInterface", ">", ")", "Class", ".", "forName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Constructor", "<", "UsbInterface", ">", "constructor", "=", "clazz", ".", "getConstructor", "(", "int", ".", "class", ",", "int", ".", "class", ",", "String", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ")", ";", "return", "constructor", ".", "newInstance", "(", "id", ",", "alternateSetting", ",", "name", ",", "usbClass", ",", "subClass", ",", "protocol", ")", ";", "}", "</s>"]
["<s>", "@", "RequiresApi", "(", "Build", ".", "VERSION_CODES", ".", "KITKAT", ")", "static", "UsbInterface", "callUsbInterfaceConstructor", "(", "int", "id", ",", "int", "usbClass", ",", "int", "subClass", ",", "int", "protocol", ",", "@", "Nullable", "Parcelable", "[", "]", "endpoints", ")", "throws", "ClassNotFoundException", ",", "NoSuchMethodException", ",", "IllegalAccessException", ",", "InvocationTargetException", ",", "InstantiationException", "{", "Class", "<", "UsbInterface", ">", "clazz", "=", "(", "Class", "<", "UsbInterface", ">", ")", "Class", ".", "forName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Constructor", "<", "UsbInterface", ">", "constructor", "=", "clazz", ".", "getConstructor", "(", "int", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "int", ".", "class", ",", "Parcelable", "[", "]", ".", "class", ")", ";", "return", "constructor", ".", "newInstance", "(", "id", ",", "usbClass", ",", "subClass", ",", "protocol", ",", "endpoints", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "Config", "(", "minSdk", "=", "KITKAT", ")", "public", "void", "usbConnectionTest", "(", ")", "{", "ActivityController", "<", "MainActivity", ">", "controller", "=", "Robolectric", ".", "buildActivity", "(", "MainActivity", ".", "class", ")", ".", "create", "(", ")", ";", "MainActivity", "activity", "=", "controller", ".", "get", "(", ")", ";", "addUsbOtgDevice", "(", "activity", ")", ";", "activity", "=", "controller", ".", "resume", "(", ")", ".", "get", "(", ")", ";", "boolean", "hasOtgStorage", "=", "false", ";", "ArrayList", "<", "String", ">", "storageDirectories", "=", "activity", ".", "getStorageDirectories", "(", ")", ";", "for", "(", "String", "file", ":", "storageDirectories", ")", "{", "if", "(", "file", ".", "startsWith", "(", "OTGUtil", ".", "PREFIX_OTG", ")", ")", "{", "hasOtgStorage", "=", "true", ";", "break", ";", "}", "}", "assertTrue", "(", "\"", "<STR_LIT>", "\"", "+", "TextUtils", ".", "join", "(", "\"", "<STR_LIT>", "\"", ",", "storageDirectories", ")", "+", "\"", "'", "\"", ",", "hasOtgStorage", ")", ";", "}", "</s>"]
["<s>", "public", "float", "getPercentProgress", "(", ")", "{", "return", "progressPercent", ";", "}", "</s>"]
["<s>", "public", "void", "setPercentProgress", "(", "float", "progress", ")", "{", "progressPercent", "=", "progress", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFormatTimer", "(", ")", "{", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "formatTimer", "(", "<NUM_LIT>", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "formatTimer", "(", "0", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "formatTimer", "(", "<NUM_LIT>", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "formatTimer", "(", "<NUM_LIT>", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "formatTimer", "(", "<NUM_LIT>", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRenameSameName3", "(", ")", "throws", "InterruptedException", "{", "File", "folder", "=", "new", "File", "(", "storageRoot", ",", "\"", "<STR_LIT>", "\"", ")", ";", "HybridFile", "folderHF", "=", "new", "HybridFile", "(", "OpenMode", ".", "FILE", ",", "folder", ".", "getAbsolutePath", "(", ")", ")", ";", "CountDownLatch", "waiter1", "=", "new", "CountDownLatch", "(", "1", ")", ";", "Operations", ".", "mkdir", "(", "folderHF", ",", "RuntimeEnvironment", ".", "application", ",", "false", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "done", "(", "HybridFile", "hFile", ",", "boolean", "b", ")", "{", "waiter1", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter1", ".", "await", "(", ")", ";", "assertTrue", "(", "folder", ".", "exists", "(", ")", ")", ";", "File", "folder2", "=", "new", "File", "(", "folder", ",", "\"", "<STR_LIT:2>", "\"", ")", ";", "HybridFile", "folder2HF", "=", "new", "HybridFile", "(", "OpenMode", ".", "FILE", ",", "folder2", ".", "getAbsolutePath", "(", ")", ")", ";", "CountDownLatch", "waiter2", "=", "new", "CountDownLatch", "(", "1", ")", ";", "Operations", ".", "mkdir", "(", "folder2HF", ",", "RuntimeEnvironment", ".", "application", ",", "false", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "done", "(", "HybridFile", "hFile", ",", "boolean", "b", ")", "{", "waiter2", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter2", ".", "await", "(", ")", ";", "assertTrue", "(", "folder2", ".", "exists", "(", ")", ")", ";", "File", "folder3", "=", "new", "File", "(", "folder", ",", "\"", "<STR_LIT>", "\"", ")", ";", "HybridFile", "folder3HF", "=", "new", "HybridFile", "(", "OpenMode", ".", "FILE", ",", "folder3", ".", "getAbsolutePath", "(", ")", ")", ";", "CountDownLatch", "waiter3", "=", "new", "CountDownLatch", "(", "1", ")", ";", "AtomicBoolean", "assertFlag", "=", "new", "AtomicBoolean", "(", "false", ")", ";", "Operations", ".", "rename", "(", "folder2HF", ",", "folder3HF", ",", "false", ",", "RuntimeEnvironment", ".", "application", ",", "new", "AbstractErrorCallback", "(", ")", "{", "@", "Override", "public", "void", "done", "(", "HybridFile", "file", ",", "boolean", "b", ")", "{", "assertFlag", ".", "set", "(", "true", ")", ";", "waiter3", ".", "countDown", "(", ")", ";", "}", "}", ")", ";", "waiter3", ".", "await", "(", ")", ";", "assertTrue", "(", "folder3", ".", "exists", "(", ")", ")", ";", "assertTrue", "(", "assertFlag", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "IOException", "{", "copyUtil", "=", "new", "GenericCopyUtil", "(", "InstrumentationRegistry", ".", "getTargetContext", "(", ")", ",", "new", "ProgressHandler", "(", ")", ")", ";", "file1", "=", "File", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "file2", "=", "File", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "file1", ".", "deleteOnExit", "(", ")", ";", "file2", ".", "deleteOnExit", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testWithSmallFile", "(", ")", "throws", "IOException", ",", "NoSuchAlgorithmException", "{", "testCopyFile1", "(", "<NUM_LIT>", ")", ";", "testCopyFile2", "(", "<NUM_LIT>", ")", ";", "testCopyFile3", "(", "<NUM_LIT>", ")", ";", "testCopyFile4", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testWithBigFile", "(", ")", "throws", "IOException", ",", "NoSuchAlgorithmException", "{", "testCopyFile1", "(", "<NUM_LIT>", ")", ";", "testCopyFile2", "(", "<NUM_LIT>", ")", ";", "testCopyFile3", "(", "<NUM_LIT>", ")", ";", "testCopyFile4", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "private", "void", "testCopyFile1", "(", "int", "size", ")", "throws", "IOException", ",", "NoSuchAlgorithmException", "{", "byte", "[", "]", "checksum", "=", "DummyFileGenerator", ".", "createFile", "(", "file1", ",", "size", ")", ";", "copyUtil", ".", "doCopy", "(", "new", "FileInputStream", "(", "file1", ")", ".", "getChannel", "(", ")", ",", "new", "FileOutputStream", "(", "file2", ")", ".", "getChannel", "(", ")", ")", ";", "assertEquals", "(", "file1", ".", "length", "(", ")", ",", "file2", ".", "length", "(", ")", ")", ";", "assertSha1Equals", "(", "checksum", ",", "file2", ")", ";", "}", "</s>"]
["<s>", "private", "void", "testCopyFile2", "(", "int", "size", ")", "throws", "IOException", ",", "NoSuchAlgorithmException", "{", "byte", "[", "]", "checksum", "=", "DummyFileGenerator", ".", "createFile", "(", "file1", ",", "size", ")", ";", "copyUtil", ".", "doCopy", "(", "new", "FileInputStream", "(", "file1", ")", ".", "getChannel", "(", ")", ",", "Channels", ".", "newChannel", "(", "new", "FileOutputStream", "(", "file2", ")", ")", ")", ";", "assertEquals", "(", "file1", ".", "length", "(", ")", ",", "file2", ".", "length", "(", ")", ")", ";", "assertSha1Equals", "(", "checksum", ",", "file2", ")", ";", "}", "</s>"]
["<s>", "private", "void", "testCopyFile3", "(", "int", "size", ")", "throws", "IOException", ",", "NoSuchAlgorithmException", "{", "byte", "[", "]", "checksum", "=", "DummyFileGenerator", ".", "createFile", "(", "file1", ",", "size", ")", ";", "copyUtil", ".", "copyFile", "(", "new", "FileInputStream", "(", "file1", ")", ".", "getChannel", "(", ")", ",", "new", "FileOutputStream", "(", "file2", ")", ".", "getChannel", "(", ")", ")", ";", "assertEquals", "(", "file1", ".", "length", "(", ")", ",", "file2", ".", "length", "(", ")", ")", ";", "assertSha1Equals", "(", "checksum", ",", "file2", ")", ";", "}", "</s>"]
["<s>", "private", "void", "testCopyFile4", "(", "int", "size", ")", "throws", "IOException", ",", "NoSuchAlgorithmException", "{", "byte", "[", "]", "checksum", "=", "DummyFileGenerator", ".", "createFile", "(", "file1", ",", "size", ")", ";", "copyUtil", ".", "copyFile", "(", "new", "BufferedInputStream", "(", "new", "FileInputStream", "(", "file1", ")", ")", ",", "new", "BufferedOutputStream", "(", "new", "FileOutputStream", "(", "file2", ")", ")", ")", ";", "assertEquals", "(", "file1", ".", "length", "(", ")", ",", "file2", ".", "length", "(", ")", ")", ";", "assertSha1Equals", "(", "checksum", ",", "file2", ")", ";", "}", "</s>"]
["<s>", "private", "void", "assertSha1Equals", "(", "byte", "[", "]", "expected", ",", "File", "file", ")", "throws", "NoSuchAlgorithmException", ",", "IOException", "{", "MessageDigest", "md", "=", "MessageDigest", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ";", "DigestInputStream", "in", "=", "new", "DigestInputStream", "(", "new", "FileInputStream", "(", "file", ")", ",", "md", ")", ";", "byte", "[", "]", "buffer", "=", "new", "byte", "[", "GenericCopyUtil", ".", "DEFAULT_BUFFER_SIZE", "]", ";", "while", "(", "in", ".", "read", "(", "buffer", ")", ">", "-", "1", ")", "{", "}", "in", ".", "close", "(", ")", ";", "assertArrayEquals", "(", "expected", ",", "md", ".", "digest", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "doCopy", "(", "@", "NonNull", "ReadableByteChannel", "from", ",", "@", "NonNull", "WritableByteChannel", "to", ")", "throws", "IOException", "{", "ByteBuffer", "buffer", "=", "ByteBuffer", ".", "allocateDirect", "(", "DEFAULT_TRANSFER_QUANTUM", ")", ";", "long", "count", ";", "while", "(", "(", "from", ".", "read", "(", "buffer", ")", "!", "=", "-", "1", "|", "|", "buffer", ".", "position", "(", ")", ">", "0", ")", "&", "&", "!", "progressHandler", ".", "getCancelled", "(", ")", ")", "{", "buffer", ".", "flip", "(", ")", ";", "count", "=", "to", ".", "write", "(", "buffer", ")", ";", "ServiceWatcherUtil", ".", "position", "+", "=", "count", ";", "buffer", ".", "compact", "(", ")", ";", "}", "buffer", ".", "flip", "(", ")", ";", "while", "(", "buffer", ".", "hasRemaining", "(", ")", ")", "to", ".", "write", "(", "buffer", ")", ";", "from", ".", "close", "(", ")", ";", "to", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "void", "doCopy", "(", "@", "NonNull", "ReadableByteChannel", "from", ",", "@", "NonNull", "FileChannel", "to", ")", "throws", "IOException", "{", "long", "count", ";", "long", "offset", "=", "0", ";", "while", "(", "(", "count", "=", "to", ".", "transferFrom", "(", "from", ",", "offset", ",", "DEFAULT_TRANSFER_QUANTUM", ")", ")", ">", "0", "&", "&", "!", "progressHandler", ".", "getCancelled", "(", ")", ")", "{", "offset", "+", "=", "count", ";", "ServiceWatcherUtil", ".", "position", "+", "=", "count", ";", "}", "from", ".", "close", "(", ")", ";", "to", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "VisibleForTesting", "(", "otherwise", "=", "VisibleForTesting", ".", "NONE", ")", "@", "RestrictTo", "(", "RestrictTo", ".", "Scope", ".", "TESTS", ")", "public", "static", "byte", "[", "]", "createFile", "(", "@", "NonNull", "File", "destFile", ",", "int", "size", ")", "throws", "IOException", "{", "Random", "rand", "=", "new", "SecureRandom", "(", ")", ";", "MessageDigest", "md", "=", "null", ";", "try", "{", "md", "=", "MessageDigest", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "NoSuchAlgorithmException", "shouldNeverHappen", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "FileOutputStream", "out", "=", "new", "FileOutputStream", "(", "destFile", ")", ";", "DigestOutputStream", "dout", "=", "new", "DigestOutputStream", "(", "out", ",", "md", ")", ";", "int", "count", "=", "0", ";", "for", "(", "int", "i", "=", "size", ";", "i", ">", "=", "0", ";", "i", "-", "=", "DEFAULT_BUFFER_SIZE", ",", "count", "+", "=", "DEFAULT_BUFFER_SIZE", ")", "{", "byte", "[", "]", "bytes", "=", "new", "byte", "[", "i", ">", "DEFAULT_BUFFER_SIZE", "?", "DEFAULT_BUFFER_SIZE", ":", "i", "]", ";", "rand", ".", "nextBytes", "(", "bytes", ")", ";", "dout", ".", "write", "(", "bytes", ")", ";", "}", "dout", ".", "flush", "(", ")", ";", "dout", ".", "close", "(", ")", ";", "return", "md", ".", "digest", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "IOException", "{", "copyUtil", "=", "new", "GenericCopyUtil", "(", "RuntimeEnvironment", ".", "application", ",", "new", "ProgressHandler", "(", ")", ")", ";", "file1", "=", "File", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "file2", "=", "File", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "file1", ".", "deleteOnExit", "(", ")", ";", "file2", ".", "deleteOnExit", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Theory", "public", "void", "testCopyFile1", "(", "int", "size", ")", "throws", "IOException", ",", "NoSuchAlgorithmException", "{", "byte", "[", "]", "checksum", "=", "DummyFileGenerator", ".", "createFile", "(", "file1", ",", "size", ")", ";", "copyUtil", ".", "doCopy", "(", "new", "FileInputStream", "(", "file1", ")", ".", "getChannel", "(", ")", ",", "new", "FileOutputStream", "(", "file2", ")", ".", "getChannel", "(", ")", ")", ";", "assertEquals", "(", "file1", ".", "length", "(", ")", ",", "file2", ".", "length", "(", ")", ")", ";", "assertSha1Equals", "(", "checksum", ",", "file2", ")", ";", "}", "</s>"]
["<s>", "@", "Theory", "public", "void", "testCopyFile2", "(", "int", "size", ")", "throws", "IOException", ",", "NoSuchAlgorithmException", "{", "byte", "[", "]", "checksum", "=", "DummyFileGenerator", ".", "createFile", "(", "file1", ",", "size", ")", ";", "copyUtil", ".", "doCopy", "(", "new", "FileInputStream", "(", "file1", ")", ".", "getChannel", "(", ")", ",", "Channels", ".", "newChannel", "(", "new", "FileOutputStream", "(", "file2", ")", ")", ")", ";", "assertEquals", "(", "file1", ".", "length", "(", ")", ",", "file2", ".", "length", "(", ")", ")", ";", "assertSha1Equals", "(", "checksum", ",", "file2", ")", ";", "}", "</s>"]
["<s>", "@", "Theory", "public", "void", "testCopyFile3", "(", "int", "size", ")", "throws", "IOException", ",", "NoSuchAlgorithmException", "{", "byte", "[", "]", "checksum", "=", "DummyFileGenerator", ".", "createFile", "(", "file1", ",", "size", ")", ";", "copyUtil", ".", "copyFile", "(", "new", "FileInputStream", "(", "file1", ")", ".", "getChannel", "(", ")", ",", "new", "FileOutputStream", "(", "file2", ")", ".", "getChannel", "(", ")", ")", ";", "assertEquals", "(", "file1", ".", "length", "(", ")", ",", "file2", ".", "length", "(", ")", ")", ";", "assertSha1Equals", "(", "checksum", ",", "file2", ")", ";", "}", "</s>"]
["<s>", "@", "Theory", "public", "void", "testCopyFile4", "(", "int", "size", ")", "throws", "IOException", ",", "NoSuchAlgorithmException", "{", "byte", "[", "]", "checksum", "=", "DummyFileGenerator", ".", "createFile", "(", "file1", ",", "size", ")", ";", "copyUtil", ".", "copyFile", "(", "new", "BufferedInputStream", "(", "new", "FileInputStream", "(", "file1", ")", ")", ",", "new", "BufferedOutputStream", "(", "new", "FileOutputStream", "(", "file2", ")", ")", ")", ";", "assertEquals", "(", "file1", ".", "length", "(", ")", ",", "file2", ".", "length", "(", ")", ")", ";", "assertSha1Equals", "(", "checksum", ",", "file2", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCopyFile1", "(", ")", "throws", "IOException", ",", "NoSuchAlgorithmException", "{", "doTestCopyFile1", "(", "<NUM_LIT>", ")", ";", "doTestCopyFile1", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCopyFile2", "(", ")", "throws", "IOException", ",", "NoSuchAlgorithmException", "{", "doTestCopyFile2", "(", "<NUM_LIT>", ")", ";", "doTestCopyFile2", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCopyFile3", "(", ")", "throws", "IOException", ",", "NoSuchAlgorithmException", "{", "doTestCopyFile3", "(", "<NUM_LIT>", ")", ";", "doTestCopyFile3", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "private", "CipherInputStream", "init", "(", ")", "throws", "IOException", "{", "if", "(", "isInitialized", ")", "{", "return", "cipherInputStream", ";", "}", "final", "int", "byte0", "=", "<NUM_LIT>", "&", "coder", ".", "properties", "[", "0", "]", ";", "final", "int", "numCyclesPower", "=", "byte0", "&", "<NUM_LIT>", ";", "final", "int", "byte1", "=", "<NUM_LIT>", "&", "coder", ".", "properties", "[", "1", "]", ";", "final", "int", "ivSize", "=", "(", "(", "byte0", ">", ">", "<NUM_LIT:6>", ")", "&", "1", ")", "+", "(", "byte1", "&", "<NUM_LIT>", ")", ";", "final", "int", "saltSize", "=", "(", "(", "byte0", ">", ">", "<NUM_LIT:7>", ")", "&", "1", ")", "+", "(", "byte1", ">", ">", "<NUM_LIT:4>", ")", ";", "if", "(", "<NUM_LIT:2>", "+", "saltSize", "+", "ivSize", ">", "coder", ".", "properties", ".", "length", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "archiveName", ")", ";", "}", "final", "byte", "[", "]", "salt", "=", "new", "byte", "[", "saltSize", "]", ";", "System", ".", "arraycopy", "(", "coder", ".", "properties", ",", "<NUM_LIT:2>", ",", "salt", ",", "0", ",", "saltSize", ")", ";", "final", "byte", "[", "]", "iv", "=", "new", "byte", "[", "<NUM_LIT:16>", "]", ";", "System", ".", "arraycopy", "(", "coder", ".", "properties", ",", "<NUM_LIT:2>", "+", "saltSize", ",", "iv", ",", "0", ",", "ivSize", ")", ";", "if", "(", "passwordBytes", "=", "=", "null", ")", "{", "throw", "new", "PasswordRequiredException", "(", "archiveName", ")", ";", "}", "final", "byte", "[", "]", "aesKeyBytes", ";", "if", "(", "numCyclesPower", "=", "=", "<NUM_LIT>", ")", "{", "aesKeyBytes", "=", "new", "byte", "[", "<NUM_LIT:32>", "]", ";", "System", ".", "arraycopy", "(", "salt", ",", "0", ",", "aesKeyBytes", ",", "0", ",", "saltSize", ")", ";", "System", ".", "arraycopy", "(", "passwordBytes", ",", "0", ",", "aesKeyBytes", ",", "saltSize", ",", "Math", ".", "min", "(", "passwordBytes", ".", "length", ",", "aesKeyBytes", ".", "length", "-", "saltSize", ")", ")", ";", "}", "else", "{", "final", "MessageDigest", "digest", ";", "try", "{", "digest", "=", "MessageDigest", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "final", "NoSuchAlgorithmException", "noSuchAlgorithmException", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ",", "noSuchAlgorithmException", ")", ";", "}", "final", "byte", "[", "]", "extra", "=", "new", "byte", "[", "<NUM_LIT:8>", "]", ";", "for", "(", "long", "j", "=", "0", ";", "j", "<", "(", "<NUM_LIT>", "<", "<", "numCyclesPower", ")", ";", "j", "+", "+", ")", "{", "digest", ".", "update", "(", "salt", ")", ";", "digest", ".", "update", "(", "passwordBytes", ")", ";", "digest", ".", "update", "(", "extra", ")", ";", "for", "(", "int", "k", "=", "0", ";", "k", "<", "extra", ".", "length", ";", "k", "+", "+", ")", "{", "+", "+", "extra", "[", "k", "]", ";", "if", "(", "extra", "[", "k", "]", "!", "=", "0", ")", "{", "break", ";", "}", "}", "}", "aesKeyBytes", "=", "digest", ".", "digest", "(", ")", ";", "}", "final", "SecretKey", "aesKey", "=", "new", "SecretKeySpec", "(", "aesKeyBytes", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "final", "Cipher", "cipher", "=", "Cipher", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ";", "cipher", ".", "init", "(", "Cipher", ".", "DECRYPT_MODE", ",", "aesKey", ",", "new", "IvParameterSpec", "(", "iv", ")", ")", ";", "cipherInputStream", "=", "new", "CipherInputStream", "(", "in", ",", "cipher", ")", ";", "isInitialized", "=", "true", ";", "return", "cipherInputStream", ";", "}", "catch", "(", "final", "GeneralSecurityException", "generalSecurityException", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "generalSecurityException", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "String", "lengthOf", "(", "final", "long", "[", "]", "a", ")", "{", "return", "a", "=", "=", "null", "?", "\"", "<STR_LIT>", "\"", ":", "String", ".", "valueOf", "(", "a", ".", "length", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "lengthOf", "(", "final", "Object", "[", "]", "a", ")", "{", "return", "a", "=", "=", "null", "?", "\"", "<STR_LIT>", "\"", ":", "String", ".", "valueOf", "(", "a", ".", "length", ")", ";", "}", "</s>"]
["<s>", "private", "int", "read", "(", "int", "len", ")", "throws", "IOException", "{", "buffer", ".", "rewind", "(", ")", ".", "limit", "(", "len", ")", ";", "int", "read", "=", "channel", ".", "read", "(", "buffer", ")", ";", "buffer", ".", "flip", "(", ")", ";", "return", "read", ";", "}", "</s>"]
["<s>", "private", "String", "getContentMethods", "(", "final", "SevenZArchiveEntry", "entry", ")", "{", "final", "StringBuilder", "sb", "=", "new", "StringBuilder", "(", ")", ";", "boolean", "first", "=", "true", ";", "for", "(", "final", "SevenZMethodConfiguration", "m", ":", "entry", ".", "getContentMethods", "(", ")", ")", "{", "if", "(", "!", "first", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "first", "=", "false", ";", "sb", ".", "append", "(", "m", ".", "getMethod", "(", ")", ")", ";", "if", "(", "m", ".", "getOptions", "(", ")", "!", "=", "null", ")", "{", "sb", ".", "append", "(", "\"", "<STR_LIT:(>", "\"", ")", ".", "append", "(", "m", ".", "getOptions", "(", ")", ")", ".", "append", "(", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "}", "return", "sb", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getMessage", "(", ")", "{", "return", "message", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "final", "String", "[", "]", "args", ")", "throws", "Exception", "{", "if", "(", "args", ".", "length", "=", "=", "0", ")", "{", "usage", "(", ")", ";", "return", ";", "}", "final", "Mode", "mode", "=", "grabMode", "(", "args", ")", ";", "System", ".", "out", ".", "println", "(", "mode", ".", "getMessage", "(", ")", "+", "\"", "\"", "+", "args", "[", "0", "]", ")", ";", "final", "File", "f", "=", "new", "File", "(", "args", "[", "0", "]", ")", ";", "if", "(", "!", "f", ".", "isFile", "(", ")", ")", "{", "System", ".", "err", ".", "println", "(", "f", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "try", "(", "final", "SevenZFile", "archive", "=", "new", "SevenZFile", "(", "f", ")", ")", "{", "SevenZArchiveEntry", "ae", ";", "while", "(", "(", "ae", "=", "archive", ".", "getNextEntry", "(", ")", ")", "!", "=", "null", ")", "{", "mode", ".", "takeAction", "(", "archive", ",", "ae", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "static", "void", "usage", "(", ")", "{", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Mode", "grabMode", "(", "final", "String", "[", "]", "args", ")", "{", "if", "(", "args", ".", "length", "<", "<NUM_LIT:2>", ")", "{", "return", "Mode", ".", "LIST", ";", "}", "return", "Enum", ".", "valueOf", "(", "Mode", ".", "class", ",", "args", "[", "1", "]", ".", "toUpperCase", "(", ")", ")", ";", "}", "</s>"]
["<s>", "boolean", "canAcceptOptions", "(", "final", "Object", "opts", ")", "{", "for", "(", "final", "Class", "<", "?", ">", "c", ":", "acceptableOptions", ")", "{", "if", "(", "c", ".", "isInstance", "(", "opts", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "byte", "[", "]", "getOptionsAsProperties", "(", "final", "Object", "options", ")", "throws", "IOException", "{", "return", "NONE", ";", "}", "</s>"]
["<s>", "Object", "getOptionsFromCoder", "(", "final", "Coder", "coder", ",", "final", "InputStream", "in", ")", "throws", "IOException", "{", "return", "null", ";", "}", "</s>"]
["<s>", "OutputStream", "encode", "(", "final", "OutputStream", "out", ",", "final", "Object", "options", ")", "throws", "IOException", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "protected", "static", "int", "numberOptionOrDefault", "(", "final", "Object", "options", ",", "final", "int", "defaultValue", ")", "{", "return", "options", "instanceof", "Number", "?", "(", "(", "Number", ")", "options", ")", ".", "intValue", "(", ")", ":", "defaultValue", ";", "}", "</s>"]
["<s>", "static", "CoderBase", "findByMethod", "(", "final", "SevenZMethod", "method", ")", "{", "return", "CODER_MAP", ".", "get", "(", "method", ")", ";", "}", "</s>"]
["<s>", "static", "InputStream", "addDecoder", "(", "final", "String", "archiveName", ",", "final", "InputStream", "is", ",", "final", "long", "uncompressedLength", ",", "final", "Coder", "coder", ",", "final", "byte", "[", "]", "password", ")", "throws", "IOException", "{", "final", "CoderBase", "cb", "=", "findByMethod", "(", "SevenZMethod", ".", "byId", "(", "coder", ".", "decompressionMethodId", ")", ")", ";", "if", "(", "cb", "=", "=", "null", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "Arrays", ".", "toString", "(", "coder", ".", "decompressionMethodId", ")", "+", "\"", "<STR_LIT>", "\"", "+", "archiveName", ")", ";", "}", "return", "cb", ".", "decode", "(", "archiveName", ",", "is", ",", "uncompressedLength", ",", "coder", ",", "password", ")", ";", "}", "</s>"]
["<s>", "static", "OutputStream", "addEncoder", "(", "final", "OutputStream", "out", ",", "final", "SevenZMethod", "method", ",", "final", "Object", "options", ")", "throws", "IOException", "{", "final", "CoderBase", "cb", "=", "findByMethod", "(", "method", ")", ";", "if", "(", "cb", "=", "=", "null", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "method", ")", ";", "}", "return", "cb", ".", "encode", "(", "out", ",", "options", ")", ";", "}", "</s>"]
["<s>", "private", "int", "getOptionsFromCoder", "(", "final", "Coder", "coder", ")", "{", "if", "(", "coder", ".", "properties", "=", "=", "null", "|", "|", "coder", ".", "properties", ".", "length", "=", "=", "0", ")", "{", "return", "1", ";", "}", "return", "(", "<NUM_LIT>", "&", "coder", ".", "properties", "[", "0", "]", ")", "+", "1", ";", "}", "</s>"]
["<s>", "Iterable", "<", "Coder", ">", "getOrderedCoders", "(", ")", "{", "final", "LinkedList", "<", "Coder", ">", "l", "=", "new", "LinkedList", "<", ">", "(", ")", ";", "int", "current", "=", "(", "int", ")", "packedStreams", "[", "0", "]", ";", "while", "(", "current", "!", "=", "-", "1", ")", "{", "l", ".", "addLast", "(", "coders", "[", "current", "]", ")", ";", "final", "int", "pair", "=", "findBindPairForOutStream", "(", "current", ")", ";", "current", "=", "pair", "!", "=", "-", "1", "?", "(", "int", ")", "bindPairs", "[", "pair", "]", ".", "inIndex", ":", "-", "1", ";", "}", "return", "l", ";", "}", "</s>"]
["<s>", "int", "findBindPairForInStream", "(", "final", "int", "index", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "bindPairs", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "bindPairs", "[", "i", "]", ".", "inIndex", "=", "=", "index", ")", "{", "return", "i", ";", "}", "}", "return", "-", "1", ";", "}", "</s>"]
["<s>", "int", "findBindPairForOutStream", "(", "final", "int", "index", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "bindPairs", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "bindPairs", "[", "i", "]", ".", "outIndex", "=", "=", "index", ")", "{", "return", "i", ";", "}", "}", "return", "-", "1", ";", "}", "</s>"]
["<s>", "long", "getUnpackSize", "(", ")", "{", "if", "(", "totalOutputStreams", "=", "=", "0", ")", "{", "return", "0", ";", "}", "for", "(", "int", "i", "=", "(", "(", "int", ")", "totalOutputStreams", ")", "-", "1", ";", "i", ">", "=", "0", ";", "i", "-", "-", ")", "{", "if", "(", "findBindPairForOutStream", "(", "i", ")", "<", "0", ")", "{", "return", "unpackSizes", "[", "i", "]", ";", "}", "}", "return", "0", ";", "}", "</s>"]
["<s>", "long", "getUnpackSizeForCoder", "(", "final", "Coder", "coder", ")", "{", "if", "(", "coders", "!", "=", "null", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "coders", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "coders", "[", "i", "]", "=", "=", "coder", ")", "{", "return", "unpackSizes", "[", "i", "]", ";", "}", "}", "}", "return", "0", ";", "}", "</s>"]
["<s>", "private", "int", "getDictSize", "(", "final", "Object", "opts", ")", "{", "if", "(", "opts", "instanceof", "LZMA2Options", ")", "{", "return", "(", "(", "LZMA2Options", ")", "opts", ")", ".", "getDictSize", "(", ")", ";", "}", "return", "numberOptionOrDefault", "(", "opts", ")", ";", "}", "</s>"]
["<s>", "private", "int", "getDictionarySize", "(", "final", "Coder", "coder", ")", "throws", "IllegalArgumentException", "{", "final", "int", "dictionarySizeBits", "=", "<NUM_LIT>", "&", "coder", ".", "properties", "[", "0", "]", ";", "if", "(", "(", "dictionarySizeBits", "&", "(", "~", "<NUM_LIT>", ")", ")", "!", "=", "0", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "dictionarySizeBits", ">", "<NUM_LIT>", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "dictionarySizeBits", "=", "=", "<NUM_LIT>", ")", "{", "return", "<NUM_LIT>", ";", "}", "return", "(", "<NUM_LIT:2>", "|", "(", "dictionarySizeBits", "&", "<NUM_LIT>", ")", ")", "<", "<", "(", "dictionarySizeBits", "/", "<NUM_LIT:2>", "+", "<NUM_LIT:11>", ")", ";", "}", "</s>"]
["<s>", "private", "LZMA2Options", "getOptions", "(", "final", "Object", "opts", ")", "throws", "IOException", "{", "if", "(", "opts", "instanceof", "LZMA2Options", ")", "{", "return", "(", "LZMA2Options", ")", "opts", ";", "}", "final", "LZMA2Options", "options", "=", "new", "LZMA2Options", "(", ")", ";", "options", ".", "setDictSize", "(", "numberOptionOrDefault", "(", "opts", ")", ")", ";", "return", "options", ";", "}", "</s>"]
["<s>", "private", "int", "numberOptionOrDefault", "(", "final", "Object", "opts", ")", "{", "return", "numberOptionOrDefault", "(", "opts", ",", "LZMA2Options", ".", "DICT_SIZE_DEFAULT", ")", ";", "}", "</s>"]
["<s>", "private", "int", "getDictionarySize", "(", "final", "Coder", "coder", ")", "throws", "IllegalArgumentException", "{", "return", "(", "int", ")", "ByteUtils", ".", "fromLittleEndian", "(", "coder", ".", "properties", ",", "1", ",", "<NUM_LIT:4>", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setName", "(", "final", "String", "name", ")", "{", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "public", "boolean", "hasStream", "(", ")", "{", "return", "hasStream", ";", "}", "</s>"]
["<s>", "public", "void", "setHasStream", "(", "final", "boolean", "hasStream", ")", "{", "this", ".", "hasStream", "=", "hasStream", ";", "}", "</s>"]
["<s>", "public", "void", "setDirectory", "(", "final", "boolean", "isDirectory", ")", "{", "this", ".", "isDirectory", "=", "isDirectory", ";", "}", "</s>"]
["<s>", "public", "boolean", "isAntiItem", "(", ")", "{", "return", "isAntiItem", ";", "}", "</s>"]
["<s>", "public", "void", "setAntiItem", "(", "final", "boolean", "isAntiItem", ")", "{", "this", ".", "isAntiItem", "=", "isAntiItem", ";", "}", "</s>"]
["<s>", "public", "boolean", "getHasCreationDate", "(", ")", "{", "return", "hasCreationDate", ";", "}", "</s>"]
["<s>", "public", "void", "setHasCreationDate", "(", "final", "boolean", "hasCreationDate", ")", "{", "this", ".", "hasCreationDate", "=", "hasCreationDate", ";", "}", "</s>"]
["<s>", "public", "Date", "getCreationDate", "(", ")", "{", "if", "(", "hasCreationDate", ")", "{", "return", "ntfsTimeToJavaTime", "(", "creationDate", ")", ";", "}", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setCreationDate", "(", "final", "long", "ntfsCreationDate", ")", "{", "this", ".", "creationDate", "=", "ntfsCreationDate", ";", "}", "</s>"]
["<s>", "public", "void", "setCreationDate", "(", "final", "Date", "creationDate", ")", "{", "hasCreationDate", "=", "creationDate", "!", "=", "null", ";", "if", "(", "hasCreationDate", ")", "{", "this", ".", "creationDate", "=", "javaTimeToNtfsTime", "(", "creationDate", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "getHasLastModifiedDate", "(", ")", "{", "return", "hasLastModifiedDate", ";", "}", "</s>"]
["<s>", "public", "void", "setHasLastModifiedDate", "(", "final", "boolean", "hasLastModifiedDate", ")", "{", "this", ".", "hasLastModifiedDate", "=", "hasLastModifiedDate", ";", "}", "</s>"]
["<s>", "public", "void", "setLastModifiedDate", "(", "final", "long", "ntfsLastModifiedDate", ")", "{", "this", ".", "lastModifiedDate", "=", "ntfsLastModifiedDate", ";", "}", "</s>"]
["<s>", "public", "void", "setLastModifiedDate", "(", "final", "Date", "lastModifiedDate", ")", "{", "hasLastModifiedDate", "=", "lastModifiedDate", "!", "=", "null", ";", "if", "(", "hasLastModifiedDate", ")", "{", "this", ".", "lastModifiedDate", "=", "javaTimeToNtfsTime", "(", "lastModifiedDate", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "getHasAccessDate", "(", ")", "{", "return", "hasAccessDate", ";", "}", "</s>"]
["<s>", "public", "void", "setHasAccessDate", "(", "final", "boolean", "hasAcessDate", ")", "{", "this", ".", "hasAccessDate", "=", "hasAcessDate", ";", "}", "</s>"]
["<s>", "public", "Date", "getAccessDate", "(", ")", "{", "if", "(", "hasAccessDate", ")", "{", "return", "ntfsTimeToJavaTime", "(", "accessDate", ")", ";", "}", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setAccessDate", "(", "final", "long", "ntfsAccessDate", ")", "{", "this", ".", "accessDate", "=", "ntfsAccessDate", ";", "}", "</s>"]
["<s>", "public", "void", "setAccessDate", "(", "final", "Date", "accessDate", ")", "{", "hasAccessDate", "=", "accessDate", "!", "=", "null", ";", "if", "(", "hasAccessDate", ")", "{", "this", ".", "accessDate", "=", "javaTimeToNtfsTime", "(", "accessDate", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "getHasWindowsAttributes", "(", ")", "{", "return", "hasWindowsAttributes", ";", "}", "</s>"]
["<s>", "public", "void", "setHasWindowsAttributes", "(", "final", "boolean", "hasWindowsAttributes", ")", "{", "this", ".", "hasWindowsAttributes", "=", "hasWindowsAttributes", ";", "}", "</s>"]
["<s>", "public", "int", "getWindowsAttributes", "(", ")", "{", "return", "windowsAttributes", ";", "}", "</s>"]
["<s>", "public", "void", "setWindowsAttributes", "(", "final", "int", "windowsAttributes", ")", "{", "this", ".", "windowsAttributes", "=", "windowsAttributes", ";", "}", "</s>"]
["<s>", "public", "boolean", "getHasCrc", "(", ")", "{", "return", "hasCrc", ";", "}", "</s>"]
["<s>", "public", "void", "setHasCrc", "(", "final", "boolean", "hasCrc", ")", "{", "this", ".", "hasCrc", "=", "hasCrc", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "int", "getCrc", "(", ")", "{", "return", "(", "int", ")", "crc", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "void", "setCrc", "(", "final", "int", "crc", ")", "{", "this", ".", "crc", "=", "crc", ";", "}", "</s>"]
["<s>", "public", "long", "getCrcValue", "(", ")", "{", "return", "crc", ";", "}", "</s>"]
["<s>", "public", "void", "setCrcValue", "(", "final", "long", "crc", ")", "{", "this", ".", "crc", "=", "crc", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "int", "getCompressedCrc", "(", ")", "{", "return", "(", "int", ")", "compressedCrc", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "void", "setCompressedCrc", "(", "final", "int", "crc", ")", "{", "this", ".", "compressedCrc", "=", "crc", ";", "}", "</s>"]
["<s>", "long", "getCompressedCrcValue", "(", ")", "{", "return", "compressedCrc", ";", "}", "</s>"]
["<s>", "void", "setCompressedCrcValue", "(", "final", "long", "crc", ")", "{", "this", ".", "compressedCrc", "=", "crc", ";", "}", "</s>"]
["<s>", "public", "void", "setSize", "(", "final", "long", "size", ")", "{", "this", ".", "size", "=", "size", ";", "}", "</s>"]
["<s>", "long", "getCompressedSize", "(", ")", "{", "return", "compressedSize", ";", "}", "</s>"]
["<s>", "void", "setCompressedSize", "(", "final", "long", "size", ")", "{", "this", ".", "compressedSize", "=", "size", ";", "}", "</s>"]
["<s>", "public", "void", "setContentMethods", "(", "final", "Iterable", "<", "?", "extends", "SevenZMethodConfiguration", ">", "methods", ")", "{", "if", "(", "methods", "!", "=", "null", ")", "{", "final", "LinkedList", "<", "SevenZMethodConfiguration", ">", "l", "=", "new", "LinkedList", "<", ">", "(", ")", ";", "for", "(", "final", "SevenZMethodConfiguration", "m", ":", "methods", ")", "{", "l", ".", "addLast", "(", "m", ")", ";", "}", "contentMethods", "=", "Collections", ".", "unmodifiableList", "(", "l", ")", ";", "}", "else", "{", "contentMethods", "=", "null", ";", "}", "}", "</s>"]
["<s>", "public", "Iterable", "<", "?", "extends", "SevenZMethodConfiguration", ">", "getContentMethods", "(", ")", "{", "return", "contentMethods", ";", "}", "</s>"]
["<s>", "public", "static", "Date", "ntfsTimeToJavaTime", "(", "final", "long", "ntfsTime", ")", "{", "final", "Calendar", "ntfsEpoch", "=", "Calendar", ".", "getInstance", "(", ")", ";", "ntfsEpoch", ".", "setTimeZone", "(", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "ntfsEpoch", ".", "set", "(", "<NUM_LIT>", ",", "0", ",", "1", ",", "0", ",", "0", ",", "0", ")", ";", "ntfsEpoch", ".", "set", "(", "Calendar", ".", "MILLISECOND", ",", "0", ")", ";", "final", "long", "realTime", "=", "ntfsEpoch", ".", "getTimeInMillis", "(", ")", "+", "(", "ntfsTime", "/", "(", "<NUM_LIT:10>", "*", "<NUM_LIT:1000>", ")", ")", ";", "return", "new", "Date", "(", "realTime", ")", ";", "}", "</s>"]
["<s>", "public", "static", "long", "javaTimeToNtfsTime", "(", "final", "Date", "date", ")", "{", "final", "Calendar", "ntfsEpoch", "=", "Calendar", ".", "getInstance", "(", ")", ";", "ntfsEpoch", ".", "setTimeZone", "(", "TimeZone", ".", "getTimeZone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "ntfsEpoch", ".", "set", "(", "<NUM_LIT>", ",", "0", ",", "1", ",", "0", ",", "0", ",", "0", ")", ";", "ntfsEpoch", ".", "set", "(", "Calendar", ".", "MILLISECOND", ",", "0", ")", ";", "return", "(", "(", "date", ".", "getTime", "(", ")", "-", "ntfsEpoch", ".", "getTimeInMillis", "(", ")", ")", "*", "<NUM_LIT:1000>", "*", "<NUM_LIT:10>", ")", ";", "}", "</s>"]
["<s>", "public", "SevenZArchiveEntry", "getNextEntry", "(", ")", "throws", "IOException", "{", "if", "(", "currentEntryIndex", ">", "=", "archive", ".", "files", ".", "length", "-", "1", ")", "{", "return", "null", ";", "}", "+", "+", "currentEntryIndex", ";", "final", "SevenZArchiveEntry", "entry", "=", "archive", ".", "files", "[", "currentEntryIndex", "]", ";", "buildDecodingStream", "(", ")", ";", "uncompressedBytesReadFromCurrentEntry", "=", "compressedBytesReadFromCurrentEntry", "=", "0", ";", "return", "entry", ";", "}", "</s>"]
["<s>", "public", "Iterable", "<", "SevenZArchiveEntry", ">", "getEntries", "(", ")", "{", "return", "Arrays", ".", "asList", "(", "archive", ".", "files", ")", ";", "}", "</s>"]
["<s>", "private", "Archive", "readHeaders", "(", "final", "byte", "[", "]", "password", ")", "throws", "IOException", "{", "ByteBuffer", "buf", "=", "ByteBuffer", ".", "allocate", "(", "<NUM_LIT:12>", ")", ".", "order", "(", "ByteOrder", ".", "LITTLE_ENDIAN", ")", ";", "readFully", "(", "buf", ")", ";", "final", "byte", "[", "]", "signature", "=", "new", "byte", "[", "<NUM_LIT:6>", "]", ";", "buf", ".", "get", "(", "signature", ")", ";", "if", "(", "!", "Arrays", ".", "equals", "(", "signature", ",", "sevenZSignature", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "final", "byte", "archiveVersionMajor", "=", "buf", ".", "get", "(", ")", ";", "final", "byte", "archiveVersionMinor", "=", "buf", ".", "get", "(", ")", ";", "if", "(", "archiveVersionMajor", "!", "=", "0", ")", "{", "throw", "new", "IOException", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "archiveVersionMajor", ",", "archiveVersionMinor", ")", ")", ";", "}", "final", "long", "startHeaderCrc", "=", "<NUM_LIT>", "&", "buf", ".", "getInt", "(", ")", ";", "final", "StartHeader", "startHeader", "=", "readStartHeader", "(", "startHeaderCrc", ")", ";", "final", "int", "nextHeaderSizeInt", "=", "(", "int", ")", "startHeader", ".", "nextHeaderSize", ";", "if", "(", "nextHeaderSizeInt", "!", "=", "startHeader", ".", "nextHeaderSize", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "startHeader", ".", "nextHeaderSize", ")", ";", "}", "channel", ".", "position", "(", "SIGNATURE_HEADER_SIZE", "+", "startHeader", ".", "nextHeaderOffset", ")", ";", "buf", "=", "ByteBuffer", ".", "allocate", "(", "nextHeaderSizeInt", ")", ".", "order", "(", "ByteOrder", ".", "LITTLE_ENDIAN", ")", ";", "readFully", "(", "buf", ")", ";", "final", "CRC32", "crc", "=", "new", "CRC32", "(", ")", ";", "crc", ".", "update", "(", "buf", ".", "array", "(", ")", ")", ";", "if", "(", "startHeader", ".", "nextHeaderCrc", "!", "=", "crc", ".", "getValue", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "Archive", "archive", "=", "new", "Archive", "(", ")", ";", "int", "nid", "=", "getUnsignedByte", "(", "buf", ")", ";", "if", "(", "nid", "=", "=", "NID", ".", "kEncodedHeader", ")", "{", "buf", "=", "readEncodedHeader", "(", "buf", ",", "archive", ",", "password", ")", ";", "archive", "=", "new", "Archive", "(", ")", ";", "nid", "=", "getUnsignedByte", "(", "buf", ")", ";", "}", "if", "(", "nid", "=", "=", "NID", ".", "kHeader", ")", "{", "readHeader", "(", "buf", ",", "archive", ")", ";", "}", "else", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "archive", ";", "}", "</s>"]
["<s>", "private", "StartHeader", "readStartHeader", "(", "final", "long", "startHeaderCrc", ")", "throws", "IOException", "{", "final", "StartHeader", "startHeader", "=", "new", "StartHeader", "(", ")", ";", "try", "(", "DataInputStream", "dataInputStream", "=", "new", "DataInputStream", "(", "new", "CRC32VerifyingInputStream", "(", "new", "BoundedFileChannelInputStream", "(", "channel", ",", "<NUM_LIT:20>", ")", ",", "<NUM_LIT:20>", ",", "startHeaderCrc", ")", ")", ")", "{", "startHeader", ".", "nextHeaderOffset", "=", "Long", ".", "reverseBytes", "(", "dataInputStream", ".", "readLong", "(", ")", ")", ";", "startHeader", ".", "nextHeaderSize", "=", "Long", ".", "reverseBytes", "(", "dataInputStream", ".", "readLong", "(", ")", ")", ";", "startHeader", ".", "nextHeaderCrc", "=", "<NUM_LIT>", "&", "Integer", ".", "reverseBytes", "(", "dataInputStream", ".", "readInt", "(", ")", ")", ";", "return", "startHeader", ";", "}", "}", "</s>"]
["<s>", "private", "void", "readHeader", "(", "final", "ByteBuffer", "header", ",", "final", "Archive", "archive", ")", "throws", "IOException", "{", "int", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "if", "(", "nid", "=", "=", "NID", ".", "kArchiveProperties", ")", "{", "readArchiveProperties", "(", "header", ")", ";", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "}", "if", "(", "nid", "=", "=", "NID", ".", "kAdditionalStreamsInfo", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "nid", "=", "=", "NID", ".", "kMainStreamsInfo", ")", "{", "readStreamsInfo", "(", "header", ",", "archive", ")", ";", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "}", "if", "(", "nid", "=", "=", "NID", ".", "kFilesInfo", ")", "{", "readFilesInfo", "(", "header", ",", "archive", ")", ";", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "}", "if", "(", "nid", "!", "=", "NID", ".", "kEnd", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "nid", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "readArchiveProperties", "(", "final", "ByteBuffer", "input", ")", "throws", "IOException", "{", "int", "nid", "=", "getUnsignedByte", "(", "input", ")", ";", "while", "(", "nid", "!", "=", "NID", ".", "kEnd", ")", "{", "final", "long", "propertySize", "=", "readUint64", "(", "input", ")", ";", "final", "byte", "[", "]", "property", "=", "new", "byte", "[", "(", "int", ")", "propertySize", "]", ";", "input", ".", "get", "(", "property", ")", ";", "nid", "=", "getUnsignedByte", "(", "input", ")", ";", "}", "}", "</s>"]
["<s>", "private", "ByteBuffer", "readEncodedHeader", "(", "final", "ByteBuffer", "header", ",", "final", "Archive", "archive", ",", "final", "byte", "[", "]", "password", ")", "throws", "IOException", "{", "readStreamsInfo", "(", "header", ",", "archive", ")", ";", "final", "Folder", "folder", "=", "archive", ".", "folders", "[", "0", "]", ";", "final", "int", "firstPackStreamIndex", "=", "0", ";", "final", "long", "folderOffset", "=", "SIGNATURE_HEADER_SIZE", "+", "archive", ".", "packPos", "+", "0", ";", "channel", ".", "position", "(", "folderOffset", ")", ";", "InputStream", "inputStreamStack", "=", "new", "BoundedFileChannelInputStream", "(", "channel", ",", "archive", ".", "packSizes", "[", "firstPackStreamIndex", "]", ")", ";", "for", "(", "final", "Coder", "coder", ":", "folder", ".", "getOrderedCoders", "(", ")", ")", "{", "if", "(", "coder", ".", "numInStreams", "!", "=", "1", "|", "|", "coder", ".", "numOutStreams", "!", "=", "1", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "inputStreamStack", "=", "Coders", ".", "addDecoder", "(", "fileName", ",", "inputStreamStack", ",", "folder", ".", "getUnpackSizeForCoder", "(", "coder", ")", ",", "coder", ",", "password", ")", ";", "}", "if", "(", "folder", ".", "hasCrc", ")", "{", "inputStreamStack", "=", "new", "CRC32VerifyingInputStream", "(", "inputStreamStack", ",", "folder", ".", "getUnpackSize", "(", ")", ",", "folder", ".", "crc", ")", ";", "}", "final", "byte", "[", "]", "nextHeader", "=", "new", "byte", "[", "(", "int", ")", "folder", ".", "getUnpackSize", "(", ")", "]", ";", "try", "(", "DataInputStream", "nextHeaderInputStream", "=", "new", "DataInputStream", "(", "inputStreamStack", ")", ")", "{", "nextHeaderInputStream", ".", "readFully", "(", "nextHeader", ")", ";", "}", "return", "ByteBuffer", ".", "wrap", "(", "nextHeader", ")", ".", "order", "(", "ByteOrder", ".", "LITTLE_ENDIAN", ")", ";", "}", "</s>"]
["<s>", "private", "void", "readStreamsInfo", "(", "final", "ByteBuffer", "header", ",", "final", "Archive", "archive", ")", "throws", "IOException", "{", "int", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "if", "(", "nid", "=", "=", "NID", ".", "kPackInfo", ")", "{", "readPackInfo", "(", "header", ",", "archive", ")", ";", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "}", "if", "(", "nid", "=", "=", "NID", ".", "kUnpackInfo", ")", "{", "readUnpackInfo", "(", "header", ",", "archive", ")", ";", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "}", "else", "{", "archive", ".", "folders", "=", "new", "Folder", "[", "0", "]", ";", "}", "if", "(", "nid", "=", "=", "NID", ".", "kSubStreamsInfo", ")", "{", "readSubStreamsInfo", "(", "header", ",", "archive", ")", ";", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "}", "if", "(", "nid", "!", "=", "NID", ".", "kEnd", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "readPackInfo", "(", "final", "ByteBuffer", "header", ",", "final", "Archive", "archive", ")", "throws", "IOException", "{", "archive", ".", "packPos", "=", "readUint64", "(", "header", ")", ";", "final", "long", "numPackStreams", "=", "readUint64", "(", "header", ")", ";", "int", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "if", "(", "nid", "=", "=", "NID", ".", "kSize", ")", "{", "archive", ".", "packSizes", "=", "new", "long", "[", "(", "int", ")", "numPackStreams", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "archive", ".", "packSizes", ".", "length", ";", "i", "+", "+", ")", "{", "archive", ".", "packSizes", "[", "i", "]", "=", "readUint64", "(", "header", ")", ";", "}", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "}", "if", "(", "nid", "=", "=", "NID", ".", "kCRC", ")", "{", "archive", ".", "packCrcsDefined", "=", "readAllOrBits", "(", "header", ",", "(", "int", ")", "numPackStreams", ")", ";", "archive", ".", "packCrcs", "=", "new", "long", "[", "(", "int", ")", "numPackStreams", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "(", "int", ")", "numPackStreams", ";", "i", "+", "+", ")", "{", "if", "(", "archive", ".", "packCrcsDefined", ".", "get", "(", "i", ")", ")", "{", "archive", ".", "packCrcs", "[", "i", "]", "=", "<NUM_LIT>", "&", "header", ".", "getInt", "(", ")", ";", "}", "}", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "}", "if", "(", "nid", "!", "=", "NID", ".", "kEnd", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "nid", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "readUnpackInfo", "(", "final", "ByteBuffer", "header", ",", "final", "Archive", "archive", ")", "throws", "IOException", "{", "int", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "if", "(", "nid", "!", "=", "NID", ".", "kFolder", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "nid", ")", ";", "}", "final", "long", "numFolders", "=", "readUint64", "(", "header", ")", ";", "final", "Folder", "[", "]", "folders", "=", "new", "Folder", "[", "(", "int", ")", "numFolders", "]", ";", "archive", ".", "folders", "=", "folders", ";", "final", "int", "external", "=", "getUnsignedByte", "(", "header", ")", ";", "if", "(", "external", "!", "=", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "(", "int", ")", "numFolders", ";", "i", "+", "+", ")", "{", "folders", "[", "i", "]", "=", "readFolder", "(", "header", ")", ";", "}", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "if", "(", "nid", "!", "=", "NID", ".", "kCodersUnpackSize", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "nid", ")", ";", "}", "for", "(", "final", "Folder", "folder", ":", "folders", ")", "{", "folder", ".", "unpackSizes", "=", "new", "long", "[", "(", "int", ")", "folder", ".", "totalOutputStreams", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "folder", ".", "totalOutputStreams", ";", "i", "+", "+", ")", "{", "folder", ".", "unpackSizes", "[", "i", "]", "=", "readUint64", "(", "header", ")", ";", "}", "}", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "if", "(", "nid", "=", "=", "NID", ".", "kCRC", ")", "{", "final", "BitSet", "crcsDefined", "=", "readAllOrBits", "(", "header", ",", "(", "int", ")", "numFolders", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "(", "int", ")", "numFolders", ";", "i", "+", "+", ")", "{", "if", "(", "crcsDefined", ".", "get", "(", "i", ")", ")", "{", "folders", "[", "i", "]", ".", "hasCrc", "=", "true", ";", "folders", "[", "i", "]", ".", "crc", "=", "<NUM_LIT>", "&", "header", ".", "getInt", "(", ")", ";", "}", "else", "{", "folders", "[", "i", "]", ".", "hasCrc", "=", "false", ";", "}", "}", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "}", "if", "(", "nid", "!", "=", "NID", ".", "kEnd", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "readSubStreamsInfo", "(", "final", "ByteBuffer", "header", ",", "final", "Archive", "archive", ")", "throws", "IOException", "{", "for", "(", "final", "Folder", "folder", ":", "archive", ".", "folders", ")", "{", "folder", ".", "numUnpackSubStreams", "=", "1", ";", "}", "int", "totalUnpackStreams", "=", "archive", ".", "folders", ".", "length", ";", "int", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "if", "(", "nid", "=", "=", "NID", ".", "kNumUnpackStream", ")", "{", "totalUnpackStreams", "=", "0", ";", "for", "(", "final", "Folder", "folder", ":", "archive", ".", "folders", ")", "{", "final", "long", "numStreams", "=", "readUint64", "(", "header", ")", ";", "folder", ".", "numUnpackSubStreams", "=", "(", "int", ")", "numStreams", ";", "totalUnpackStreams", "+", "=", "numStreams", ";", "}", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "}", "final", "SubStreamsInfo", "subStreamsInfo", "=", "new", "SubStreamsInfo", "(", ")", ";", "subStreamsInfo", ".", "unpackSizes", "=", "new", "long", "[", "totalUnpackStreams", "]", ";", "subStreamsInfo", ".", "hasCrc", "=", "new", "BitSet", "(", "totalUnpackStreams", ")", ";", "subStreamsInfo", ".", "crcs", "=", "new", "long", "[", "totalUnpackStreams", "]", ";", "int", "nextUnpackStream", "=", "0", ";", "for", "(", "final", "Folder", "folder", ":", "archive", ".", "folders", ")", "{", "if", "(", "folder", ".", "numUnpackSubStreams", "=", "=", "0", ")", "{", "continue", ";", "}", "long", "sum", "=", "0", ";", "if", "(", "nid", "=", "=", "NID", ".", "kSize", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "folder", ".", "numUnpackSubStreams", "-", "1", ";", "i", "+", "+", ")", "{", "final", "long", "size", "=", "readUint64", "(", "header", ")", ";", "subStreamsInfo", ".", "unpackSizes", "[", "nextUnpackStream", "+", "+", "]", "=", "size", ";", "sum", "+", "=", "size", ";", "}", "}", "subStreamsInfo", ".", "unpackSizes", "[", "nextUnpackStream", "+", "+", "]", "=", "folder", ".", "getUnpackSize", "(", ")", "-", "sum", ";", "}", "if", "(", "nid", "=", "=", "NID", ".", "kSize", ")", "{", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "}", "int", "numDigests", "=", "0", ";", "for", "(", "final", "Folder", "folder", ":", "archive", ".", "folders", ")", "{", "if", "(", "folder", ".", "numUnpackSubStreams", "!", "=", "1", "|", "|", "!", "folder", ".", "hasCrc", ")", "{", "numDigests", "+", "=", "folder", ".", "numUnpackSubStreams", ";", "}", "}", "if", "(", "nid", "=", "=", "NID", ".", "kCRC", ")", "{", "final", "BitSet", "hasMissingCrc", "=", "readAllOrBits", "(", "header", ",", "numDigests", ")", ";", "final", "long", "[", "]", "missingCrcs", "=", "new", "long", "[", "numDigests", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "numDigests", ";", "i", "+", "+", ")", "{", "if", "(", "hasMissingCrc", ".", "get", "(", "i", ")", ")", "{", "missingCrcs", "[", "i", "]", "=", "<NUM_LIT>", "&", "header", ".", "getInt", "(", ")", ";", "}", "}", "int", "nextCrc", "=", "0", ";", "int", "nextMissingCrc", "=", "0", ";", "for", "(", "final", "Folder", "folder", ":", "archive", ".", "folders", ")", "{", "if", "(", "folder", ".", "numUnpackSubStreams", "=", "=", "1", "&", "&", "folder", ".", "hasCrc", ")", "{", "subStreamsInfo", ".", "hasCrc", ".", "set", "(", "nextCrc", ",", "true", ")", ";", "subStreamsInfo", ".", "crcs", "[", "nextCrc", "]", "=", "folder", ".", "crc", ";", "+", "+", "nextCrc", ";", "}", "else", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "folder", ".", "numUnpackSubStreams", ";", "i", "+", "+", ")", "{", "subStreamsInfo", ".", "hasCrc", ".", "set", "(", "nextCrc", ",", "hasMissingCrc", ".", "get", "(", "nextMissingCrc", ")", ")", ";", "subStreamsInfo", ".", "crcs", "[", "nextCrc", "]", "=", "missingCrcs", "[", "nextMissingCrc", "]", ";", "+", "+", "nextCrc", ";", "+", "+", "nextMissingCrc", ";", "}", "}", "}", "nid", "=", "getUnsignedByte", "(", "header", ")", ";", "}", "if", "(", "nid", "!", "=", "NID", ".", "kEnd", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "archive", ".", "subStreamsInfo", "=", "subStreamsInfo", ";", "}", "</s>"]
["<s>", "private", "Folder", "readFolder", "(", "final", "ByteBuffer", "header", ")", "throws", "IOException", "{", "final", "Folder", "folder", "=", "new", "Folder", "(", ")", ";", "final", "long", "numCoders", "=", "readUint64", "(", "header", ")", ";", "final", "Coder", "[", "]", "coders", "=", "new", "Coder", "[", "(", "int", ")", "numCoders", "]", ";", "long", "totalInStreams", "=", "0", ";", "long", "totalOutStreams", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "coders", ".", "length", ";", "i", "+", "+", ")", "{", "coders", "[", "i", "]", "=", "new", "Coder", "(", ")", ";", "final", "int", "bits", "=", "getUnsignedByte", "(", "header", ")", ";", "final", "int", "idSize", "=", "bits", "&", "<NUM_LIT>", ";", "final", "boolean", "isSimple", "=", "(", "bits", "&", "<NUM_LIT>", ")", "=", "=", "0", ";", "final", "boolean", "hasAttributes", "=", "(", "bits", "&", "<NUM_LIT>", ")", "!", "=", "0", ";", "final", "boolean", "moreAlternativeMethods", "=", "(", "bits", "&", "<NUM_LIT>", ")", "!", "=", "0", ";", "coders", "[", "i", "]", ".", "decompressionMethodId", "=", "new", "byte", "[", "idSize", "]", ";", "header", ".", "get", "(", "coders", "[", "i", "]", ".", "decompressionMethodId", ")", ";", "if", "(", "isSimple", ")", "{", "coders", "[", "i", "]", ".", "numInStreams", "=", "1", ";", "coders", "[", "i", "]", ".", "numOutStreams", "=", "1", ";", "}", "else", "{", "coders", "[", "i", "]", ".", "numInStreams", "=", "readUint64", "(", "header", ")", ";", "coders", "[", "i", "]", ".", "numOutStreams", "=", "readUint64", "(", "header", ")", ";", "}", "totalInStreams", "+", "=", "coders", "[", "i", "]", ".", "numInStreams", ";", "totalOutStreams", "+", "=", "coders", "[", "i", "]", ".", "numOutStreams", ";", "if", "(", "hasAttributes", ")", "{", "final", "long", "propertiesSize", "=", "readUint64", "(", "header", ")", ";", "coders", "[", "i", "]", ".", "properties", "=", "new", "byte", "[", "(", "int", ")", "propertiesSize", "]", ";", "header", ".", "get", "(", "coders", "[", "i", "]", ".", "properties", ")", ";", "}", "while", "(", "moreAlternativeMethods", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "folder", ".", "coders", "=", "coders", ";", "folder", ".", "totalInputStreams", "=", "totalInStreams", ";", "folder", ".", "totalOutputStreams", "=", "totalOutStreams", ";", "if", "(", "totalOutStreams", "=", "=", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "final", "long", "numBindPairs", "=", "totalOutStreams", "-", "1", ";", "final", "BindPair", "[", "]", "bindPairs", "=", "new", "BindPair", "[", "(", "int", ")", "numBindPairs", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "bindPairs", ".", "length", ";", "i", "+", "+", ")", "{", "bindPairs", "[", "i", "]", "=", "new", "BindPair", "(", ")", ";", "bindPairs", "[", "i", "]", ".", "inIndex", "=", "readUint64", "(", "header", ")", ";", "bindPairs", "[", "i", "]", ".", "outIndex", "=", "readUint64", "(", "header", ")", ";", "}", "folder", ".", "bindPairs", "=", "bindPairs", ";", "if", "(", "totalInStreams", "<", "numBindPairs", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "final", "long", "numPackedStreams", "=", "totalInStreams", "-", "numBindPairs", ";", "final", "long", "packedStreams", "[", "]", "=", "new", "long", "[", "(", "int", ")", "numPackedStreams", "]", ";", "if", "(", "numPackedStreams", "=", "=", "1", ")", "{", "int", "i", ";", "for", "(", "i", "=", "0", ";", "i", "<", "(", "int", ")", "totalInStreams", ";", "i", "+", "+", ")", "{", "if", "(", "folder", ".", "findBindPairForInStream", "(", "i", ")", "<", "0", ")", "{", "break", ";", "}", "}", "if", "(", "i", "=", "=", "(", "int", ")", "totalInStreams", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "packedStreams", "[", "0", "]", "=", "i", ";", "}", "else", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "(", "int", ")", "numPackedStreams", ";", "i", "+", "+", ")", "{", "packedStreams", "[", "i", "]", "=", "readUint64", "(", "header", ")", ";", "}", "}", "folder", ".", "packedStreams", "=", "packedStreams", ";", "return", "folder", ";", "}", "</s>"]
["<s>", "private", "BitSet", "readAllOrBits", "(", "final", "ByteBuffer", "header", ",", "final", "int", "size", ")", "throws", "IOException", "{", "final", "int", "areAllDefined", "=", "getUnsignedByte", "(", "header", ")", ";", "final", "BitSet", "bits", ";", "if", "(", "areAllDefined", "!", "=", "0", ")", "{", "bits", "=", "new", "BitSet", "(", "size", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "size", ";", "i", "+", "+", ")", "{", "bits", ".", "set", "(", "i", ",", "true", ")", ";", "}", "}", "else", "{", "bits", "=", "readBits", "(", "header", ",", "size", ")", ";", "}", "return", "bits", ";", "}", "</s>"]
["<s>", "private", "BitSet", "readBits", "(", "final", "ByteBuffer", "header", ",", "final", "int", "size", ")", "throws", "IOException", "{", "final", "BitSet", "bits", "=", "new", "BitSet", "(", "size", ")", ";", "int", "mask", "=", "0", ";", "int", "cache", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "size", ";", "i", "+", "+", ")", "{", "if", "(", "mask", "=", "=", "0", ")", "{", "mask", "=", "<NUM_LIT>", ";", "cache", "=", "getUnsignedByte", "(", "header", ")", ";", "}", "bits", ".", "set", "(", "i", ",", "(", "cache", "&", "mask", ")", "!", "=", "0", ")", ";", "mask", ">", ">", ">", "=", "1", ";", "}", "return", "bits", ";", "}", "</s>"]
["<s>", "private", "void", "readFilesInfo", "(", "final", "ByteBuffer", "header", ",", "final", "Archive", "archive", ")", "throws", "IOException", "{", "final", "long", "numFiles", "=", "readUint64", "(", "header", ")", ";", "final", "SevenZArchiveEntry", "[", "]", "files", "=", "new", "SevenZArchiveEntry", "[", "(", "int", ")", "numFiles", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "length", ";", "i", "+", "+", ")", "{", "files", "[", "i", "]", "=", "new", "SevenZArchiveEntry", "(", ")", ";", "}", "BitSet", "isEmptyStream", "=", "null", ";", "BitSet", "isEmptyFile", "=", "null", ";", "BitSet", "isAnti", "=", "null", ";", "while", "(", "true", ")", "{", "final", "int", "propertyType", "=", "getUnsignedByte", "(", "header", ")", ";", "if", "(", "propertyType", "=", "=", "0", ")", "{", "break", ";", "}", "final", "long", "size", "=", "readUint64", "(", "header", ")", ";", "switch", "(", "propertyType", ")", "{", "case", "NID", ".", "kEmptyStream", ":", "{", "isEmptyStream", "=", "readBits", "(", "header", ",", "files", ".", "length", ")", ";", "break", ";", "}", "case", "NID", ".", "kEmptyFile", ":", "{", "if", "(", "isEmptyStream", "=", "=", "null", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "isEmptyFile", "=", "readBits", "(", "header", ",", "isEmptyStream", ".", "cardinality", "(", ")", ")", ";", "break", ";", "}", "case", "NID", ".", "kAnti", ":", "{", "if", "(", "isEmptyStream", "=", "=", "null", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "isAnti", "=", "readBits", "(", "header", ",", "isEmptyStream", ".", "cardinality", "(", ")", ")", ";", "break", ";", "}", "case", "NID", ".", "kName", ":", "{", "final", "int", "external", "=", "getUnsignedByte", "(", "header", ")", ";", "if", "(", "external", "!", "=", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "(", "(", "size", "-", "1", ")", "&", "1", ")", "!", "=", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "final", "byte", "[", "]", "names", "=", "new", "byte", "[", "(", "int", ")", "(", "size", "-", "1", ")", "]", ";", "header", ".", "get", "(", "names", ")", ";", "int", "nextFile", "=", "0", ";", "int", "nextName", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "names", ".", "length", ";", "i", "+", "=", "<NUM_LIT:2>", ")", "{", "if", "(", "names", "[", "i", "]", "=", "=", "0", "&", "&", "names", "[", "i", "+", "1", "]", "=", "=", "0", ")", "{", "files", "[", "nextFile", "+", "+", "]", ".", "setName", "(", "new", "String", "(", "names", ",", "nextName", ",", "i", "-", "nextName", ",", "CharsetNames", ".", "UTF_16LE", ")", ")", ";", "nextName", "=", "i", "+", "<NUM_LIT:2>", ";", "}", "}", "if", "(", "nextName", "!", "=", "names", ".", "length", "|", "|", "nextFile", "!", "=", "files", ".", "length", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "break", ";", "}", "case", "NID", ".", "kCTime", ":", "{", "final", "BitSet", "timesDefined", "=", "readAllOrBits", "(", "header", ",", "files", ".", "length", ")", ";", "final", "int", "external", "=", "getUnsignedByte", "(", "header", ")", ";", "if", "(", "external", "!", "=", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "length", ";", "i", "+", "+", ")", "{", "files", "[", "i", "]", ".", "setHasCreationDate", "(", "timesDefined", ".", "get", "(", "i", ")", ")", ";", "if", "(", "files", "[", "i", "]", ".", "getHasCreationDate", "(", ")", ")", "{", "files", "[", "i", "]", ".", "setCreationDate", "(", "header", ".", "getLong", "(", ")", ")", ";", "}", "}", "break", ";", "}", "case", "NID", ".", "kATime", ":", "{", "final", "BitSet", "timesDefined", "=", "readAllOrBits", "(", "header", ",", "files", ".", "length", ")", ";", "final", "int", "external", "=", "getUnsignedByte", "(", "header", ")", ";", "if", "(", "external", "!", "=", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "length", ";", "i", "+", "+", ")", "{", "files", "[", "i", "]", ".", "setHasAccessDate", "(", "timesDefined", ".", "get", "(", "i", ")", ")", ";", "if", "(", "files", "[", "i", "]", ".", "getHasAccessDate", "(", ")", ")", "{", "files", "[", "i", "]", ".", "setAccessDate", "(", "header", ".", "getLong", "(", ")", ")", ";", "}", "}", "break", ";", "}", "case", "NID", ".", "kMTime", ":", "{", "final", "BitSet", "timesDefined", "=", "readAllOrBits", "(", "header", ",", "files", ".", "length", ")", ";", "final", "int", "external", "=", "getUnsignedByte", "(", "header", ")", ";", "if", "(", "external", "!", "=", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "length", ";", "i", "+", "+", ")", "{", "files", "[", "i", "]", ".", "setHasLastModifiedDate", "(", "timesDefined", ".", "get", "(", "i", ")", ")", ";", "if", "(", "files", "[", "i", "]", ".", "getHasLastModifiedDate", "(", ")", ")", "{", "files", "[", "i", "]", ".", "setLastModifiedDate", "(", "header", ".", "getLong", "(", ")", ")", ";", "}", "}", "break", ";", "}", "case", "NID", ".", "kWinAttributes", ":", "{", "final", "BitSet", "attributesDefined", "=", "readAllOrBits", "(", "header", ",", "files", ".", "length", ")", ";", "final", "int", "external", "=", "getUnsignedByte", "(", "header", ")", ";", "if", "(", "external", "!", "=", "0", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "length", ";", "i", "+", "+", ")", "{", "files", "[", "i", "]", ".", "setHasWindowsAttributes", "(", "attributesDefined", ".", "get", "(", "i", ")", ")", ";", "if", "(", "files", "[", "i", "]", ".", "getHasWindowsAttributes", "(", ")", ")", "{", "files", "[", "i", "]", ".", "setWindowsAttributes", "(", "header", ".", "getInt", "(", ")", ")", ";", "}", "}", "break", ";", "}", "case", "NID", ".", "kStartPos", ":", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "case", "NID", ".", "kDummy", ":", "{", "if", "(", "skipBytesFully", "(", "header", ",", "size", ")", "<", "size", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "break", ";", "}", "default", ":", "{", "if", "(", "skipBytesFully", "(", "header", ",", "size", ")", "<", "size", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "propertyType", ")", ";", "}", "break", ";", "}", "}", "}", "int", "nonEmptyFileCounter", "=", "0", ";", "int", "emptyFileCounter", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "length", ";", "i", "+", "+", ")", "{", "files", "[", "i", "]", ".", "setHasStream", "(", "isEmptyStream", "=", "=", "null", "|", "|", "!", "isEmptyStream", ".", "get", "(", "i", ")", ")", ";", "if", "(", "files", "[", "i", "]", ".", "hasStream", "(", ")", ")", "{", "files", "[", "i", "]", ".", "setDirectory", "(", "false", ")", ";", "files", "[", "i", "]", ".", "setAntiItem", "(", "false", ")", ";", "files", "[", "i", "]", ".", "setHasCrc", "(", "archive", ".", "subStreamsInfo", ".", "hasCrc", ".", "get", "(", "nonEmptyFileCounter", ")", ")", ";", "files", "[", "i", "]", ".", "setCrcValue", "(", "archive", ".", "subStreamsInfo", ".", "crcs", "[", "nonEmptyFileCounter", "]", ")", ";", "files", "[", "i", "]", ".", "setSize", "(", "archive", ".", "subStreamsInfo", ".", "unpackSizes", "[", "nonEmptyFileCounter", "]", ")", ";", "+", "+", "nonEmptyFileCounter", ";", "}", "else", "{", "files", "[", "i", "]", ".", "setDirectory", "(", "isEmptyFile", "=", "=", "null", "|", "|", "!", "isEmptyFile", ".", "get", "(", "emptyFileCounter", ")", ")", ";", "files", "[", "i", "]", ".", "setAntiItem", "(", "isAnti", "!", "=", "null", "&", "&", "isAnti", ".", "get", "(", "emptyFileCounter", ")", ")", ";", "files", "[", "i", "]", ".", "setHasCrc", "(", "false", ")", ";", "files", "[", "i", "]", ".", "setSize", "(", "0", ")", ";", "+", "+", "emptyFileCounter", ";", "}", "}", "archive", ".", "files", "=", "files", ";", "calculateStreamMap", "(", "archive", ")", ";", "}", "</s>"]
["<s>", "private", "void", "calculateStreamMap", "(", "final", "Archive", "archive", ")", "throws", "IOException", "{", "final", "StreamMap", "streamMap", "=", "new", "StreamMap", "(", ")", ";", "int", "nextFolderPackStreamIndex", "=", "0", ";", "final", "int", "numFolders", "=", "archive", ".", "folders", "!", "=", "null", "?", "archive", ".", "folders", ".", "length", ":", "0", ";", "streamMap", ".", "folderFirstPackStreamIndex", "=", "new", "int", "[", "numFolders", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "numFolders", ";", "i", "+", "+", ")", "{", "streamMap", ".", "folderFirstPackStreamIndex", "[", "i", "]", "=", "nextFolderPackStreamIndex", ";", "nextFolderPackStreamIndex", "+", "=", "archive", ".", "folders", "[", "i", "]", ".", "packedStreams", ".", "length", ";", "}", "long", "nextPackStreamOffset", "=", "0", ";", "final", "int", "numPackSizes", "=", "archive", ".", "packSizes", "!", "=", "null", "?", "archive", ".", "packSizes", ".", "length", ":", "0", ";", "streamMap", ".", "packStreamOffsets", "=", "new", "long", "[", "numPackSizes", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "numPackSizes", ";", "i", "+", "+", ")", "{", "streamMap", ".", "packStreamOffsets", "[", "i", "]", "=", "nextPackStreamOffset", ";", "nextPackStreamOffset", "+", "=", "archive", ".", "packSizes", "[", "i", "]", ";", "}", "streamMap", ".", "folderFirstFileIndex", "=", "new", "int", "[", "numFolders", "]", ";", "streamMap", ".", "fileFolderIndex", "=", "new", "int", "[", "archive", ".", "files", ".", "length", "]", ";", "int", "nextFolderIndex", "=", "0", ";", "int", "nextFolderUnpackStreamIndex", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "archive", ".", "files", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "!", "archive", ".", "files", "[", "i", "]", ".", "hasStream", "(", ")", "&", "&", "nextFolderUnpackStreamIndex", "=", "=", "0", ")", "{", "streamMap", ".", "fileFolderIndex", "[", "i", "]", "=", "-", "1", ";", "continue", ";", "}", "if", "(", "nextFolderUnpackStreamIndex", "=", "=", "0", ")", "{", "for", "(", ";", "nextFolderIndex", "<", "archive", ".", "folders", ".", "length", ";", "+", "+", "nextFolderIndex", ")", "{", "streamMap", ".", "folderFirstFileIndex", "[", "nextFolderIndex", "]", "=", "i", ";", "if", "(", "archive", ".", "folders", "[", "nextFolderIndex", "]", ".", "numUnpackSubStreams", ">", "0", ")", "{", "break", ";", "}", "}", "if", "(", "nextFolderIndex", ">", "=", "archive", ".", "folders", ".", "length", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "streamMap", ".", "fileFolderIndex", "[", "i", "]", "=", "nextFolderIndex", ";", "if", "(", "!", "archive", ".", "files", "[", "i", "]", ".", "hasStream", "(", ")", ")", "{", "continue", ";", "}", "+", "+", "nextFolderUnpackStreamIndex", ";", "if", "(", "nextFolderUnpackStreamIndex", ">", "=", "archive", ".", "folders", "[", "nextFolderIndex", "]", ".", "numUnpackSubStreams", ")", "{", "+", "+", "nextFolderIndex", ";", "nextFolderUnpackStreamIndex", "=", "0", ";", "}", "}", "archive", ".", "streamMap", "=", "streamMap", ";", "}", "</s>"]
["<s>", "private", "void", "buildDecodingStream", "(", ")", "throws", "IOException", "{", "final", "int", "folderIndex", "=", "archive", ".", "streamMap", ".", "fileFolderIndex", "[", "currentEntryIndex", "]", ";", "if", "(", "folderIndex", "<", "0", ")", "{", "deferredBlockStreams", ".", "clear", "(", ")", ";", "return", ";", "}", "final", "SevenZArchiveEntry", "file", "=", "archive", ".", "files", "[", "currentEntryIndex", "]", ";", "if", "(", "currentFolderIndex", "=", "=", "folderIndex", ")", "{", "file", ".", "setContentMethods", "(", "archive", ".", "files", "[", "currentEntryIndex", "-", "1", "]", ".", "getContentMethods", "(", ")", ")", ";", "}", "else", "{", "currentFolderIndex", "=", "folderIndex", ";", "deferredBlockStreams", ".", "clear", "(", ")", ";", "if", "(", "currentFolderInputStream", "!", "=", "null", ")", "{", "currentFolderInputStream", ".", "close", "(", ")", ";", "currentFolderInputStream", "=", "null", ";", "}", "final", "Folder", "folder", "=", "archive", ".", "folders", "[", "folderIndex", "]", ";", "final", "int", "firstPackStreamIndex", "=", "archive", ".", "streamMap", ".", "folderFirstPackStreamIndex", "[", "folderIndex", "]", ";", "final", "long", "folderOffset", "=", "SIGNATURE_HEADER_SIZE", "+", "archive", ".", "packPos", "+", "archive", ".", "streamMap", ".", "packStreamOffsets", "[", "firstPackStreamIndex", "]", ";", "currentFolderInputStream", "=", "buildDecoderStack", "(", "folder", ",", "folderOffset", ",", "firstPackStreamIndex", ",", "file", ")", ";", "}", "InputStream", "fileStream", "=", "new", "BoundedInputStream", "(", "currentFolderInputStream", ",", "file", ".", "getSize", "(", ")", ")", ";", "if", "(", "file", ".", "getHasCrc", "(", ")", ")", "{", "fileStream", "=", "new", "CRC32VerifyingInputStream", "(", "fileStream", ",", "file", ".", "getSize", "(", ")", ",", "file", ".", "getCrcValue", "(", ")", ")", ";", "}", "deferredBlockStreams", ".", "add", "(", "fileStream", ")", ";", "}", "</s>"]
["<s>", "private", "InputStream", "buildDecoderStack", "(", "final", "Folder", "folder", ",", "final", "long", "folderOffset", ",", "final", "int", "firstPackStreamIndex", ",", "final", "SevenZArchiveEntry", "entry", ")", "throws", "IOException", "{", "channel", ".", "position", "(", "folderOffset", ")", ";", "InputStream", "inputStreamStack", "=", "new", "FilterInputStream", "(", "new", "BufferedInputStream", "(", "new", "BoundedFileChannelInputStream", "(", "channel", ",", "archive", ".", "packSizes", "[", "firstPackStreamIndex", "]", ")", ")", ")", "{", "@", "Override", "public", "int", "read", "(", ")", "throws", "IOException", "{", "final", "int", "r", "=", "in", ".", "read", "(", ")", ";", "if", "(", "r", ">", "=", "0", ")", "{", "count", "(", "1", ")", ";", "}", "return", "r", ";", "}", "@", "Override", "public", "int", "read", "(", "final", "byte", "[", "]", "b", ")", "throws", "IOException", "{", "return", "read", "(", "b", ",", "0", ",", "b", ".", "length", ")", ";", "}", "@", "Override", "public", "int", "read", "(", "final", "byte", "[", "]", "b", ",", "final", "int", "off", ",", "final", "int", "len", ")", "throws", "IOException", "{", "final", "int", "r", "=", "in", ".", "read", "(", "b", ",", "off", ",", "len", ")", ";", "if", "(", "r", ">", "=", "0", ")", "{", "count", "(", "r", ")", ";", "}", "return", "r", ";", "}", "private", "void", "count", "(", "int", "c", ")", "{", "compressedBytesReadFromCurrentEntry", "+", "=", "c", ";", "}", "}", ";", "final", "LinkedList", "<", "SevenZMethodConfiguration", ">", "methods", "=", "new", "LinkedList", "<", ">", "(", ")", ";", "for", "(", "final", "Coder", "coder", ":", "folder", ".", "getOrderedCoders", "(", ")", ")", "{", "if", "(", "coder", ".", "numInStreams", "!", "=", "1", "|", "|", "coder", ".", "numOutStreams", "!", "=", "1", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "final", "SevenZMethod", "method", "=", "SevenZMethod", ".", "byId", "(", "coder", ".", "decompressionMethodId", ")", ";", "inputStreamStack", "=", "Coders", ".", "addDecoder", "(", "fileName", ",", "inputStreamStack", ",", "folder", ".", "getUnpackSizeForCoder", "(", "coder", ")", ",", "coder", ",", "password", ")", ";", "methods", ".", "addFirst", "(", "new", "SevenZMethodConfiguration", "(", "method", ",", "Coders", ".", "findByMethod", "(", "method", ")", ".", "getOptionsFromCoder", "(", "coder", ",", "inputStreamStack", ")", ")", ")", ";", "}", "entry", ".", "setContentMethods", "(", "methods", ")", ";", "if", "(", "folder", ".", "hasCrc", ")", "{", "return", "new", "CRC32VerifyingInputStream", "(", "inputStreamStack", ",", "folder", ".", "getUnpackSize", "(", ")", ",", "folder", ".", "crc", ")", ";", "}", "return", "inputStreamStack", ";", "}", "</s>"]
["<s>", "private", "void", "count", "(", "int", "c", ")", "{", "compressedBytesReadFromCurrentEntry", "+", "=", "c", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", ")", "throws", "IOException", "{", "int", "b", "=", "getCurrentStream", "(", ")", ".", "read", "(", ")", ";", "if", "(", "b", ">", "=", "0", ")", "{", "uncompressedBytesReadFromCurrentEntry", "+", "+", ";", "}", "return", "b", ";", "}", "</s>"]
["<s>", "private", "InputStream", "getCurrentStream", "(", ")", "throws", "IOException", "{", "if", "(", "archive", ".", "files", "[", "currentEntryIndex", "]", ".", "getSize", "(", ")", "=", "=", "0", ")", "{", "return", "new", "ByteArrayInputStream", "(", "new", "byte", "[", "0", "]", ")", ";", "}", "if", "(", "deferredBlockStreams", ".", "isEmpty", "(", ")", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "while", "(", "deferredBlockStreams", ".", "size", "(", ")", ">", "1", ")", "{", "try", "(", "final", "InputStream", "stream", "=", "deferredBlockStreams", ".", "remove", "(", "0", ")", ")", "{", "IOUtils", ".", "skip", "(", "stream", ",", "Long", ".", "MAX_VALUE", ")", ";", "}", "compressedBytesReadFromCurrentEntry", "=", "0", ";", "}", "return", "deferredBlockStreams", ".", "get", "(", "0", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "final", "byte", "[", "]", "b", ")", "throws", "IOException", "{", "return", "read", "(", "b", ",", "0", ",", "b", ".", "length", ")", ";", "}", "</s>"]
["<s>", "public", "int", "read", "(", "final", "byte", "[", "]", "b", ",", "final", "int", "off", ",", "final", "int", "len", ")", "throws", "IOException", "{", "int", "cnt", "=", "getCurrentStream", "(", ")", ".", "read", "(", "b", ",", "off", ",", "len", ")", ";", "if", "(", "cnt", ">", "0", ")", "{", "uncompressedBytesReadFromCurrentEntry", "+", "=", "cnt", ";", "}", "return", "cnt", ";", "}", "</s>"]
["<s>", "public", "InputStreamStatistics", "getStatisticsForCurrentEntry", "(", ")", "{", "return", "new", "InputStreamStatistics", "(", ")", "{", "@", "Override", "public", "long", "getCompressedCount", "(", ")", "{", "return", "compressedBytesReadFromCurrentEntry", ";", "}", "@", "Override", "public", "long", "getUncompressedCount", "(", ")", "{", "return", "uncompressedBytesReadFromCurrentEntry", ";", "}", "}", ";", "}", "</s>"]
["<s>", "private", "static", "long", "readUint64", "(", "final", "ByteBuffer", "in", ")", "throws", "IOException", "{", "final", "long", "firstByte", "=", "getUnsignedByte", "(", "in", ")", ";", "int", "mask", "=", "<NUM_LIT>", ";", "long", "value", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "<NUM_LIT:8>", ";", "i", "+", "+", ")", "{", "if", "(", "(", "firstByte", "&", "mask", ")", "=", "=", "0", ")", "{", "return", "value", "|", "(", "(", "firstByte", "&", "(", "mask", "-", "1", ")", ")", "<", "<", "(", "<NUM_LIT:8>", "*", "i", ")", ")", ";", "}", "final", "long", "nextByte", "=", "getUnsignedByte", "(", "in", ")", ";", "value", "|", "=", "nextByte", "<", "<", "(", "<NUM_LIT:8>", "*", "i", ")", ";", "mask", ">", ">", ">", "=", "1", ";", "}", "return", "value", ";", "}", "</s>"]
["<s>", "private", "static", "int", "getUnsignedByte", "(", "ByteBuffer", "buf", ")", "{", "return", "buf", ".", "get", "(", ")", "&", "<NUM_LIT>", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "matches", "(", "final", "byte", "[", "]", "signature", ",", "final", "int", "length", ")", "{", "if", "(", "length", "<", "sevenZSignature", ".", "length", ")", "{", "return", "false", ";", "}", "for", "(", "int", "i", "=", "0", ";", "i", "<", "sevenZSignature", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "signature", "[", "i", "]", "!", "=", "sevenZSignature", "[", "i", "]", ")", "{", "return", "false", ";", "}", "}", "return", "true", ";", "}", "</s>"]
["<s>", "private", "static", "long", "skipBytesFully", "(", "final", "ByteBuffer", "input", ",", "long", "bytesToSkip", ")", "throws", "IOException", "{", "if", "(", "bytesToSkip", "<", "1", ")", "{", "return", "0", ";", "}", "int", "current", "=", "input", ".", "position", "(", ")", ";", "int", "maxSkip", "=", "input", ".", "remaining", "(", ")", ";", "if", "(", "maxSkip", "<", "bytesToSkip", ")", "{", "bytesToSkip", "=", "maxSkip", ";", "}", "input", ".", "position", "(", "current", "+", "(", "int", ")", "bytesToSkip", ")", ";", "return", "bytesToSkip", ";", "}", "</s>"]
["<s>", "private", "void", "readFully", "(", "ByteBuffer", "buf", ")", "throws", "IOException", "{", "buf", ".", "rewind", "(", ")", ";", "IOUtils", ".", "readFully", "(", "channel", ",", "buf", ")", ";", "buf", ".", "flip", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "byte", "[", "]", "utf16Decode", "(", "char", "[", "]", "chars", ")", "throws", "IOException", "{", "if", "(", "chars", "=", "=", "null", ")", "{", "return", "null", ";", "}", "ByteBuffer", "encoded", "=", "PASSWORD_ENCODER", ".", "encode", "(", "CharBuffer", ".", "wrap", "(", "chars", ")", ")", ";", "if", "(", "encoded", ".", "hasArray", "(", ")", ")", "{", "return", "encoded", ".", "array", "(", ")", ";", "}", "byte", "[", "]", "e", "=", "new", "byte", "[", "encoded", ".", "remaining", "(", ")", "]", ";", "encoded", ".", "get", "(", "e", ")", ";", "return", "e", ";", "}", "</s>"]
["<s>", "byte", "[", "]", "getId", "(", ")", "{", "final", "byte", "[", "]", "copy", "=", "new", "byte", "[", "id", ".", "length", "]", ";", "System", ".", "arraycopy", "(", "id", ",", "0", ",", "copy", ",", "0", ",", "id", ".", "length", ")", ";", "return", "copy", ";", "}", "</s>"]
["<s>", "static", "SevenZMethod", "byId", "(", "final", "byte", "[", "]", "id", ")", "{", "for", "(", "final", "SevenZMethod", "m", ":", "SevenZMethod", ".", "class", ".", "getEnumConstants", "(", ")", ")", "{", "if", "(", "Arrays", ".", "equals", "(", "m", ".", "id", ",", "id", ")", ")", "{", "return", "m", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "SevenZMethod", "getMethod", "(", ")", "{", "return", "method", ";", "}", "</s>"]
["<s>", "public", "Object", "getOptions", "(", ")", "{", "return", "options", ";", "}", "</s>"]
["<s>", "public", "void", "setContentCompression", "(", "final", "SevenZMethod", "method", ")", "{", "setContentMethods", "(", "Collections", ".", "singletonList", "(", "new", "SevenZMethodConfiguration", "(", "method", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "void", "setContentMethods", "(", "final", "Iterable", "<", "?", "extends", "SevenZMethodConfiguration", ">", "methods", ")", "{", "this", ".", "contentMethods", "=", "reverse", "(", "methods", ")", ";", "}", "</s>"]
["<s>", "public", "SevenZArchiveEntry", "createArchiveEntry", "(", "final", "File", "inputFile", ",", "final", "String", "entryName", ")", "throws", "IOException", "{", "final", "SevenZArchiveEntry", "entry", "=", "new", "SevenZArchiveEntry", "(", ")", ";", "entry", ".", "setDirectory", "(", "inputFile", ".", "isDirectory", "(", ")", ")", ";", "entry", ".", "setName", "(", "entryName", ")", ";", "entry", ".", "setLastModifiedDate", "(", "new", "Date", "(", "inputFile", ".", "lastModified", "(", ")", ")", ")", ";", "return", "entry", ";", "}", "</s>"]
["<s>", "public", "void", "putArchiveEntry", "(", "final", "ArchiveEntry", "archiveEntry", ")", "throws", "IOException", "{", "final", "SevenZArchiveEntry", "entry", "=", "(", "SevenZArchiveEntry", ")", "archiveEntry", ";", "files", ".", "add", "(", "entry", ")", ";", "}", "</s>"]
["<s>", "public", "void", "closeArchiveEntry", "(", ")", "throws", "IOException", "{", "if", "(", "currentOutputStream", "!", "=", "null", ")", "{", "currentOutputStream", ".", "flush", "(", ")", ";", "currentOutputStream", ".", "close", "(", ")", ";", "}", "final", "SevenZArchiveEntry", "entry", "=", "files", ".", "get", "(", "files", ".", "size", "(", ")", "-", "1", ")", ";", "if", "(", "fileBytesWritten", ">", "0", ")", "{", "entry", ".", "setHasStream", "(", "true", ")", ";", "+", "+", "numNonEmptyStreams", ";", "entry", ".", "setSize", "(", "currentOutputStream", ".", "getBytesWritten", "(", ")", ")", ";", "entry", ".", "setCompressedSize", "(", "fileBytesWritten", ")", ";", "entry", ".", "setCrcValue", "(", "crc32", ".", "getValue", "(", ")", ")", ";", "entry", ".", "setCompressedCrcValue", "(", "compressedCrc32", ".", "getValue", "(", ")", ")", ";", "entry", ".", "setHasCrc", "(", "true", ")", ";", "if", "(", "additionalCountingStreams", "!", "=", "null", ")", "{", "final", "long", "[", "]", "sizes", "=", "new", "long", "[", "additionalCountingStreams", ".", "length", "]", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "additionalCountingStreams", ".", "length", ";", "i", "+", "+", ")", "{", "sizes", "[", "i", "]", "=", "additionalCountingStreams", "[", "i", "]", ".", "getBytesWritten", "(", ")", ";", "}", "additionalSizes", ".", "put", "(", "entry", ",", "sizes", ")", ";", "}", "}", "else", "{", "entry", ".", "setHasStream", "(", "false", ")", ";", "entry", ".", "setSize", "(", "0", ")", ";", "entry", ".", "setCompressedSize", "(", "0", ")", ";", "entry", ".", "setHasCrc", "(", "false", ")", ";", "}", "currentOutputStream", "=", "null", ";", "additionalCountingStreams", "=", "null", ";", "crc32", ".", "reset", "(", ")", ";", "compressedCrc32", ".", "reset", "(", ")", ";", "fileBytesWritten", "=", "0", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "final", "int", "b", ")", "throws", "IOException", "{", "getCurrentOutputStream", "(", ")", ".", "write", "(", "b", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "final", "byte", "[", "]", "b", ")", "throws", "IOException", "{", "write", "(", "b", ",", "0", ",", "b", ".", "length", ")", ";", "}", "</s>"]
["<s>", "public", "void", "write", "(", "final", "byte", "[", "]", "b", ",", "final", "int", "off", ",", "final", "int", "len", ")", "throws", "IOException", "{", "if", "(", "len", ">", "0", ")", "{", "getCurrentOutputStream", "(", ")", ".", "write", "(", "b", ",", "off", ",", "len", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "finish", "(", ")", "throws", "IOException", "{", "if", "(", "finished", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "finished", "=", "true", ";", "final", "long", "headerPosition", "=", "channel", ".", "position", "(", ")", ";", "final", "ByteArrayOutputStream", "headerBaos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "final", "DataOutputStream", "header", "=", "new", "DataOutputStream", "(", "headerBaos", ")", ";", "writeHeader", "(", "header", ")", ";", "header", ".", "flush", "(", ")", ";", "final", "byte", "[", "]", "headerBytes", "=", "headerBaos", ".", "toByteArray", "(", ")", ";", "channel", ".", "write", "(", "ByteBuffer", ".", "wrap", "(", "headerBytes", ")", ")", ";", "final", "CRC32", "crc32", "=", "new", "CRC32", "(", ")", ";", "crc32", ".", "update", "(", "headerBytes", ")", ";", "ByteBuffer", "bb", "=", "ByteBuffer", ".", "allocate", "(", "SevenZFile", ".", "sevenZSignature", ".", "length", "+", "<NUM_LIT:2>", "+", "<NUM_LIT:4>", "+", "<NUM_LIT:8>", "+", "<NUM_LIT:8>", "+", "<NUM_LIT:4>", ")", ".", "order", "(", "ByteOrder", ".", "LITTLE_ENDIAN", ")", ";", "channel", ".", "position", "(", "0", ")", ";", "bb", ".", "put", "(", "SevenZFile", ".", "sevenZSignature", ")", ";", "bb", ".", "put", "(", "(", "byte", ")", "0", ")", ".", "put", "(", "(", "byte", ")", "<NUM_LIT:2>", ")", ";", "bb", ".", "putInt", "(", "0", ")", ";", "bb", ".", "putLong", "(", "headerPosition", "-", "SevenZFile", ".", "SIGNATURE_HEADER_SIZE", ")", ".", "putLong", "(", "<NUM_LIT>", "&", "headerBytes", ".", "length", ")", ".", "putInt", "(", "(", "int", ")", "crc32", ".", "getValue", "(", ")", ")", ";", "crc32", ".", "reset", "(", ")", ";", "crc32", ".", "update", "(", "bb", ".", "array", "(", ")", ",", "SevenZFile", ".", "sevenZSignature", ".", "length", "+", "<NUM_LIT:6>", ",", "<NUM_LIT:20>", ")", ";", "bb", ".", "putInt", "(", "SevenZFile", ".", "sevenZSignature", ".", "length", "+", "<NUM_LIT:2>", ",", "(", "int", ")", "crc32", ".", "getValue", "(", ")", ")", ";", "bb", ".", "flip", "(", ")", ";", "channel", ".", "write", "(", "bb", ")", ";", "}", "</s>"]
["<s>", "private", "OutputStream", "getCurrentOutputStream", "(", ")", "throws", "IOException", "{", "if", "(", "currentOutputStream", "=", "=", "null", ")", "{", "currentOutputStream", "=", "setupFileOutputStream", "(", ")", ";", "}", "return", "currentOutputStream", ";", "}", "</s>"]
["<s>", "private", "CountingOutputStream", "setupFileOutputStream", "(", ")", "throws", "IOException", "{", "if", "(", "files", ".", "isEmpty", "(", ")", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "OutputStream", "out", "=", "new", "OutputStreamWrapper", "(", ")", ";", "final", "ArrayList", "<", "CountingOutputStream", ">", "moreStreams", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "boolean", "first", "=", "true", ";", "for", "(", "final", "SevenZMethodConfiguration", "m", ":", "getContentMethods", "(", "files", ".", "get", "(", "files", ".", "size", "(", ")", "-", "1", ")", ")", ")", "{", "if", "(", "!", "first", ")", "{", "final", "CountingOutputStream", "cos", "=", "new", "CountingOutputStream", "(", "out", ")", ";", "moreStreams", ".", "add", "(", "cos", ")", ";", "out", "=", "cos", ";", "}", "out", "=", "Coders", ".", "addEncoder", "(", "out", ",", "m", ".", "getMethod", "(", ")", ",", "m", ".", "getOptions", "(", ")", ")", ";", "first", "=", "false", ";", "}", "if", "(", "!", "moreStreams", ".", "isEmpty", "(", ")", ")", "{", "additionalCountingStreams", "=", "moreStreams", ".", "toArray", "(", "new", "CountingOutputStream", "[", "moreStreams", ".", "size", "(", ")", "]", ")", ";", "}", "return", "new", "CountingOutputStream", "(", "out", ")", "{", "@", "Override", "public", "void", "write", "(", "final", "int", "b", ")", "throws", "IOException", "{", "super", ".", "write", "(", "b", ")", ";", "crc32", ".", "update", "(", "b", ")", ";", "}", "@", "Override", "public", "void", "write", "(", "final", "byte", "[", "]", "b", ")", "throws", "IOException", "{", "super", ".", "write", "(", "b", ")", ";", "crc32", ".", "update", "(", "b", ")", ";", "}", "@", "Override", "public", "void", "write", "(", "final", "byte", "[", "]", "b", ",", "final", "int", "off", ",", "final", "int", "len", ")", "throws", "IOException", "{", "super", ".", "write", "(", "b", ",", "off", ",", "len", ")", ";", "crc32", ".", "update", "(", "b", ",", "off", ",", "len", ")", ";", "}", "}", ";", "}", "</s>"]
["<s>", "private", "Iterable", "<", "?", "extends", "SevenZMethodConfiguration", ">", "getContentMethods", "(", "final", "SevenZArchiveEntry", "entry", ")", "{", "final", "Iterable", "<", "?", "extends", "SevenZMethodConfiguration", ">", "ms", "=", "entry", ".", "getContentMethods", "(", ")", ";", "return", "ms", "=", "=", "null", "?", "contentMethods", ":", "ms", ";", "}", "</s>"]
["<s>", "private", "void", "writeHeader", "(", "final", "DataOutput", "header", ")", "throws", "IOException", "{", "header", ".", "write", "(", "NID", ".", "kHeader", ")", ";", "header", ".", "write", "(", "NID", ".", "kMainStreamsInfo", ")", ";", "writeStreamsInfo", "(", "header", ")", ";", "writeFilesInfo", "(", "header", ")", ";", "header", ".", "write", "(", "NID", ".", "kEnd", ")", ";", "}", "</s>"]
["<s>", "private", "void", "writeStreamsInfo", "(", "final", "DataOutput", "header", ")", "throws", "IOException", "{", "if", "(", "numNonEmptyStreams", ">", "0", ")", "{", "writePackInfo", "(", "header", ")", ";", "writeUnpackInfo", "(", "header", ")", ";", "}", "writeSubStreamsInfo", "(", "header", ")", ";", "header", ".", "write", "(", "NID", ".", "kEnd", ")", ";", "}", "</s>"]
["<s>", "private", "void", "writePackInfo", "(", "final", "DataOutput", "header", ")", "throws", "IOException", "{", "header", ".", "write", "(", "NID", ".", "kPackInfo", ")", ";", "writeUint64", "(", "header", ",", "0", ")", ";", "writeUint64", "(", "header", ",", "<NUM_LIT>", "&", "numNonEmptyStreams", ")", ";", "header", ".", "write", "(", "NID", ".", "kSize", ")", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "if", "(", "entry", ".", "hasStream", "(", ")", ")", "{", "writeUint64", "(", "header", ",", "entry", ".", "getCompressedSize", "(", ")", ")", ";", "}", "}", "header", ".", "write", "(", "NID", ".", "kCRC", ")", ";", "header", ".", "write", "(", "1", ")", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "if", "(", "entry", ".", "hasStream", "(", ")", ")", "{", "header", ".", "writeInt", "(", "Integer", ".", "reverseBytes", "(", "(", "int", ")", "entry", ".", "getCompressedCrcValue", "(", ")", ")", ")", ";", "}", "}", "header", ".", "write", "(", "NID", ".", "kEnd", ")", ";", "}", "</s>"]
["<s>", "private", "void", "writeUnpackInfo", "(", "final", "DataOutput", "header", ")", "throws", "IOException", "{", "header", ".", "write", "(", "NID", ".", "kUnpackInfo", ")", ";", "header", ".", "write", "(", "NID", ".", "kFolder", ")", ";", "writeUint64", "(", "header", ",", "numNonEmptyStreams", ")", ";", "header", ".", "write", "(", "0", ")", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "if", "(", "entry", ".", "hasStream", "(", ")", ")", "{", "writeFolder", "(", "header", ",", "entry", ")", ";", "}", "}", "header", ".", "write", "(", "NID", ".", "kCodersUnpackSize", ")", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "if", "(", "entry", ".", "hasStream", "(", ")", ")", "{", "final", "long", "[", "]", "moreSizes", "=", "additionalSizes", ".", "get", "(", "entry", ")", ";", "if", "(", "moreSizes", "!", "=", "null", ")", "{", "for", "(", "final", "long", "s", ":", "moreSizes", ")", "{", "writeUint64", "(", "header", ",", "s", ")", ";", "}", "}", "writeUint64", "(", "header", ",", "entry", ".", "getSize", "(", ")", ")", ";", "}", "}", "header", ".", "write", "(", "NID", ".", "kCRC", ")", ";", "header", ".", "write", "(", "1", ")", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "if", "(", "entry", ".", "hasStream", "(", ")", ")", "{", "header", ".", "writeInt", "(", "Integer", ".", "reverseBytes", "(", "(", "int", ")", "entry", ".", "getCrcValue", "(", ")", ")", ")", ";", "}", "}", "header", ".", "write", "(", "NID", ".", "kEnd", ")", ";", "}", "</s>"]
["<s>", "private", "void", "writeFolder", "(", "final", "DataOutput", "header", ",", "final", "SevenZArchiveEntry", "entry", ")", "throws", "IOException", "{", "final", "ByteArrayOutputStream", "bos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "int", "numCoders", "=", "0", ";", "for", "(", "final", "SevenZMethodConfiguration", "m", ":", "getContentMethods", "(", "entry", ")", ")", "{", "numCoders", "+", "+", ";", "writeSingleCodec", "(", "m", ",", "bos", ")", ";", "}", "writeUint64", "(", "header", ",", "numCoders", ")", ";", "header", ".", "write", "(", "bos", ".", "toByteArray", "(", ")", ")", ";", "for", "(", "long", "i", "=", "0", ";", "i", "<", "numCoders", "-", "1", ";", "i", "+", "+", ")", "{", "writeUint64", "(", "header", ",", "i", "+", "1", ")", ";", "writeUint64", "(", "header", ",", "i", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "writeSingleCodec", "(", "final", "SevenZMethodConfiguration", "m", ",", "final", "OutputStream", "bos", ")", "throws", "IOException", "{", "final", "byte", "[", "]", "id", "=", "m", ".", "getMethod", "(", ")", ".", "getId", "(", ")", ";", "final", "byte", "[", "]", "properties", "=", "Coders", ".", "findByMethod", "(", "m", ".", "getMethod", "(", ")", ")", ".", "getOptionsAsProperties", "(", "m", ".", "getOptions", "(", ")", ")", ";", "int", "codecFlags", "=", "id", ".", "length", ";", "if", "(", "properties", ".", "length", ">", "0", ")", "{", "codecFlags", "|", "=", "<NUM_LIT>", ";", "}", "bos", ".", "write", "(", "codecFlags", ")", ";", "bos", ".", "write", "(", "id", ")", ";", "if", "(", "properties", ".", "length", ">", "0", ")", "{", "bos", ".", "write", "(", "properties", ".", "length", ")", ";", "bos", ".", "write", "(", "properties", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "writeSubStreamsInfo", "(", "final", "DataOutput", "header", ")", "throws", "IOException", "{", "header", ".", "write", "(", "NID", ".", "kSubStreamsInfo", ")", ";", "header", ".", "write", "(", "NID", ".", "kEnd", ")", ";", "}", "</s>"]
["<s>", "private", "void", "writeFilesInfo", "(", "final", "DataOutput", "header", ")", "throws", "IOException", "{", "header", ".", "write", "(", "NID", ".", "kFilesInfo", ")", ";", "writeUint64", "(", "header", ",", "files", ".", "size", "(", ")", ")", ";", "writeFileEmptyStreams", "(", "header", ")", ";", "writeFileEmptyFiles", "(", "header", ")", ";", "writeFileAntiItems", "(", "header", ")", ";", "writeFileNames", "(", "header", ")", ";", "writeFileCTimes", "(", "header", ")", ";", "writeFileATimes", "(", "header", ")", ";", "writeFileMTimes", "(", "header", ")", ";", "writeFileWindowsAttributes", "(", "header", ")", ";", "header", ".", "write", "(", "NID", ".", "kEnd", ")", ";", "}", "</s>"]
["<s>", "private", "void", "writeFileEmptyStreams", "(", "final", "DataOutput", "header", ")", "throws", "IOException", "{", "boolean", "hasEmptyStreams", "=", "false", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "if", "(", "!", "entry", ".", "hasStream", "(", ")", ")", "{", "hasEmptyStreams", "=", "true", ";", "break", ";", "}", "}", "if", "(", "hasEmptyStreams", ")", "{", "header", ".", "write", "(", "NID", ".", "kEmptyStream", ")", ";", "final", "BitSet", "emptyStreams", "=", "new", "BitSet", "(", "files", ".", "size", "(", ")", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "emptyStreams", ".", "set", "(", "i", ",", "!", "files", ".", "get", "(", "i", ")", ".", "hasStream", "(", ")", ")", ";", "}", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "final", "DataOutputStream", "out", "=", "new", "DataOutputStream", "(", "baos", ")", ";", "writeBits", "(", "out", ",", "emptyStreams", ",", "files", ".", "size", "(", ")", ")", ";", "out", ".", "flush", "(", ")", ";", "final", "byte", "[", "]", "contents", "=", "baos", ".", "toByteArray", "(", ")", ";", "writeUint64", "(", "header", ",", "contents", ".", "length", ")", ";", "header", ".", "write", "(", "contents", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "writeFileEmptyFiles", "(", "final", "DataOutput", "header", ")", "throws", "IOException", "{", "boolean", "hasEmptyFiles", "=", "false", ";", "int", "emptyStreamCounter", "=", "0", ";", "final", "BitSet", "emptyFiles", "=", "new", "BitSet", "(", "0", ")", ";", "for", "(", "final", "SevenZArchiveEntry", "file1", ":", "files", ")", "{", "if", "(", "!", "file1", ".", "hasStream", "(", ")", ")", "{", "final", "boolean", "isDir", "=", "file1", ".", "isDirectory", "(", ")", ";", "emptyFiles", ".", "set", "(", "emptyStreamCounter", "+", "+", ",", "!", "isDir", ")", ";", "hasEmptyFiles", "|", "=", "!", "isDir", ";", "}", "}", "if", "(", "hasEmptyFiles", ")", "{", "header", ".", "write", "(", "NID", ".", "kEmptyFile", ")", ";", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "final", "DataOutputStream", "out", "=", "new", "DataOutputStream", "(", "baos", ")", ";", "writeBits", "(", "out", ",", "emptyFiles", ",", "emptyStreamCounter", ")", ";", "out", ".", "flush", "(", ")", ";", "final", "byte", "[", "]", "contents", "=", "baos", ".", "toByteArray", "(", ")", ";", "writeUint64", "(", "header", ",", "contents", ".", "length", ")", ";", "header", ".", "write", "(", "contents", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "writeFileAntiItems", "(", "final", "DataOutput", "header", ")", "throws", "IOException", "{", "boolean", "hasAntiItems", "=", "false", ";", "final", "BitSet", "antiItems", "=", "new", "BitSet", "(", "0", ")", ";", "int", "antiItemCounter", "=", "0", ";", "for", "(", "final", "SevenZArchiveEntry", "file1", ":", "files", ")", "{", "if", "(", "!", "file1", ".", "hasStream", "(", ")", ")", "{", "final", "boolean", "isAnti", "=", "file1", ".", "isAntiItem", "(", ")", ";", "antiItems", ".", "set", "(", "antiItemCounter", "+", "+", ",", "isAnti", ")", ";", "hasAntiItems", "|", "=", "isAnti", ";", "}", "}", "if", "(", "hasAntiItems", ")", "{", "header", ".", "write", "(", "NID", ".", "kAnti", ")", ";", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "final", "DataOutputStream", "out", "=", "new", "DataOutputStream", "(", "baos", ")", ";", "writeBits", "(", "out", ",", "antiItems", ",", "antiItemCounter", ")", ";", "out", ".", "flush", "(", ")", ";", "final", "byte", "[", "]", "contents", "=", "baos", ".", "toByteArray", "(", ")", ";", "writeUint64", "(", "header", ",", "contents", ".", "length", ")", ";", "header", ".", "write", "(", "contents", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "writeFileNames", "(", "final", "DataOutput", "header", ")", "throws", "IOException", "{", "header", ".", "write", "(", "NID", ".", "kName", ")", ";", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "final", "DataOutputStream", "out", "=", "new", "DataOutputStream", "(", "baos", ")", ";", "out", ".", "write", "(", "0", ")", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "out", ".", "write", "(", "entry", ".", "getName", "(", ")", ".", "getBytes", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "out", ".", "writeShort", "(", "0", ")", ";", "}", "out", ".", "flush", "(", ")", ";", "final", "byte", "[", "]", "contents", "=", "baos", ".", "toByteArray", "(", ")", ";", "writeUint64", "(", "header", ",", "contents", ".", "length", ")", ";", "header", ".", "write", "(", "contents", ")", ";", "}", "</s>"]
["<s>", "private", "void", "writeFileCTimes", "(", "final", "DataOutput", "header", ")", "throws", "IOException", "{", "int", "numCreationDates", "=", "0", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "if", "(", "entry", ".", "getHasCreationDate", "(", ")", ")", "{", "+", "+", "numCreationDates", ";", "}", "}", "if", "(", "numCreationDates", ">", "0", ")", "{", "header", ".", "write", "(", "NID", ".", "kCTime", ")", ";", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "final", "DataOutputStream", "out", "=", "new", "DataOutputStream", "(", "baos", ")", ";", "if", "(", "numCreationDates", "!", "=", "files", ".", "size", "(", ")", ")", "{", "out", ".", "write", "(", "0", ")", ";", "final", "BitSet", "cTimes", "=", "new", "BitSet", "(", "files", ".", "size", "(", ")", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "cTimes", ".", "set", "(", "i", ",", "files", ".", "get", "(", "i", ")", ".", "getHasCreationDate", "(", ")", ")", ";", "}", "writeBits", "(", "out", ",", "cTimes", ",", "files", ".", "size", "(", ")", ")", ";", "}", "else", "{", "out", ".", "write", "(", "1", ")", ";", "}", "out", ".", "write", "(", "0", ")", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "if", "(", "entry", ".", "getHasCreationDate", "(", ")", ")", "{", "out", ".", "writeLong", "(", "Long", ".", "reverseBytes", "(", "SevenZArchiveEntry", ".", "javaTimeToNtfsTime", "(", "entry", ".", "getCreationDate", "(", ")", ")", ")", ")", ";", "}", "}", "out", ".", "flush", "(", ")", ";", "final", "byte", "[", "]", "contents", "=", "baos", ".", "toByteArray", "(", ")", ";", "writeUint64", "(", "header", ",", "contents", ".", "length", ")", ";", "header", ".", "write", "(", "contents", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "writeFileATimes", "(", "final", "DataOutput", "header", ")", "throws", "IOException", "{", "int", "numAccessDates", "=", "0", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "if", "(", "entry", ".", "getHasAccessDate", "(", ")", ")", "{", "+", "+", "numAccessDates", ";", "}", "}", "if", "(", "numAccessDates", ">", "0", ")", "{", "header", ".", "write", "(", "NID", ".", "kATime", ")", ";", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "final", "DataOutputStream", "out", "=", "new", "DataOutputStream", "(", "baos", ")", ";", "if", "(", "numAccessDates", "!", "=", "files", ".", "size", "(", ")", ")", "{", "out", ".", "write", "(", "0", ")", ";", "final", "BitSet", "aTimes", "=", "new", "BitSet", "(", "files", ".", "size", "(", ")", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "aTimes", ".", "set", "(", "i", ",", "files", ".", "get", "(", "i", ")", ".", "getHasAccessDate", "(", ")", ")", ";", "}", "writeBits", "(", "out", ",", "aTimes", ",", "files", ".", "size", "(", ")", ")", ";", "}", "else", "{", "out", ".", "write", "(", "1", ")", ";", "}", "out", ".", "write", "(", "0", ")", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "if", "(", "entry", ".", "getHasAccessDate", "(", ")", ")", "{", "out", ".", "writeLong", "(", "Long", ".", "reverseBytes", "(", "SevenZArchiveEntry", ".", "javaTimeToNtfsTime", "(", "entry", ".", "getAccessDate", "(", ")", ")", ")", ")", ";", "}", "}", "out", ".", "flush", "(", ")", ";", "final", "byte", "[", "]", "contents", "=", "baos", ".", "toByteArray", "(", ")", ";", "writeUint64", "(", "header", ",", "contents", ".", "length", ")", ";", "header", ".", "write", "(", "contents", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "writeFileMTimes", "(", "final", "DataOutput", "header", ")", "throws", "IOException", "{", "int", "numLastModifiedDates", "=", "0", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "if", "(", "entry", ".", "getHasLastModifiedDate", "(", ")", ")", "{", "+", "+", "numLastModifiedDates", ";", "}", "}", "if", "(", "numLastModifiedDates", ">", "0", ")", "{", "header", ".", "write", "(", "NID", ".", "kMTime", ")", ";", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "final", "DataOutputStream", "out", "=", "new", "DataOutputStream", "(", "baos", ")", ";", "if", "(", "numLastModifiedDates", "!", "=", "files", ".", "size", "(", ")", ")", "{", "out", ".", "write", "(", "0", ")", ";", "final", "BitSet", "mTimes", "=", "new", "BitSet", "(", "files", ".", "size", "(", ")", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "mTimes", ".", "set", "(", "i", ",", "files", ".", "get", "(", "i", ")", ".", "getHasLastModifiedDate", "(", ")", ")", ";", "}", "writeBits", "(", "out", ",", "mTimes", ",", "files", ".", "size", "(", ")", ")", ";", "}", "else", "{", "out", ".", "write", "(", "1", ")", ";", "}", "out", ".", "write", "(", "0", ")", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "if", "(", "entry", ".", "getHasLastModifiedDate", "(", ")", ")", "{", "out", ".", "writeLong", "(", "Long", ".", "reverseBytes", "(", "SevenZArchiveEntry", ".", "javaTimeToNtfsTime", "(", "entry", ".", "getLastModifiedDate", "(", ")", ")", ")", ")", ";", "}", "}", "out", ".", "flush", "(", ")", ";", "final", "byte", "[", "]", "contents", "=", "baos", ".", "toByteArray", "(", ")", ";", "writeUint64", "(", "header", ",", "contents", ".", "length", ")", ";", "header", ".", "write", "(", "contents", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "writeFileWindowsAttributes", "(", "final", "DataOutput", "header", ")", "throws", "IOException", "{", "int", "numWindowsAttributes", "=", "0", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "if", "(", "entry", ".", "getHasWindowsAttributes", "(", ")", ")", "{", "+", "+", "numWindowsAttributes", ";", "}", "}", "if", "(", "numWindowsAttributes", ">", "0", ")", "{", "header", ".", "write", "(", "NID", ".", "kWinAttributes", ")", ";", "final", "ByteArrayOutputStream", "baos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "final", "DataOutputStream", "out", "=", "new", "DataOutputStream", "(", "baos", ")", ";", "if", "(", "numWindowsAttributes", "!", "=", "files", ".", "size", "(", ")", ")", "{", "out", ".", "write", "(", "0", ")", ";", "final", "BitSet", "attributes", "=", "new", "BitSet", "(", "files", ".", "size", "(", ")", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "files", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "attributes", ".", "set", "(", "i", ",", "files", ".", "get", "(", "i", ")", ".", "getHasWindowsAttributes", "(", ")", ")", ";", "}", "writeBits", "(", "out", ",", "attributes", ",", "files", ".", "size", "(", ")", ")", ";", "}", "else", "{", "out", ".", "write", "(", "1", ")", ";", "}", "out", ".", "write", "(", "0", ")", ";", "for", "(", "final", "SevenZArchiveEntry", "entry", ":", "files", ")", "{", "if", "(", "entry", ".", "getHasWindowsAttributes", "(", ")", ")", "{", "out", ".", "writeInt", "(", "Integer", ".", "reverseBytes", "(", "entry", ".", "getWindowsAttributes", "(", ")", ")", ")", ";", "}", "}", "out", ".", "flush", "(", ")", ";", "final", "byte", "[", "]", "contents", "=", "baos", ".", "toByteArray", "(", ")", ";", "writeUint64", "(", "header", ",", "contents", ".", "length", ")", ";", "header", ".", "write", "(", "contents", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "writeUint64", "(", "final", "DataOutput", "header", ",", "long", "value", ")", "throws", "IOException", "{", "int", "firstByte", "=", "0", ";", "int", "mask", "=", "<NUM_LIT>", ";", "int", "i", ";", "for", "(", "i", "=", "0", ";", "i", "<", "<NUM_LIT:8>", ";", "i", "+", "+", ")", "{", "if", "(", "value", "<", "(", "(", "<NUM_LIT>", "<", "<", "(", "<NUM_LIT:7>", "*", "(", "i", "+", "1", ")", ")", ")", ")", ")", "{", "firstByte", "|", "=", "(", "value", ">", ">", ">", "(", "<NUM_LIT:8>", "*", "i", ")", ")", ";", "break", ";", "}", "firstByte", "|", "=", "mask", ";", "mask", ">", ">", ">", "=", "1", ";", "}", "header", ".", "write", "(", "firstByte", ")", ";", "for", "(", ";", "i", ">", "0", ";", "i", "-", "-", ")", "{", "header", ".", "write", "(", "(", "int", ")", "(", "<NUM_LIT>", "&", "value", ")", ")", ";", "value", ">", ">", ">", "=", "<NUM_LIT:8>", ";", "}", "}", "</s>"]
["<s>", "private", "void", "writeBits", "(", "final", "DataOutput", "header", ",", "final", "BitSet", "bits", ",", "final", "int", "length", ")", "throws", "IOException", "{", "int", "cache", "=", "0", ";", "int", "shift", "=", "<NUM_LIT:7>", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "length", ";", "i", "+", "+", ")", "{", "cache", "|", "=", "(", "(", "bits", ".", "get", "(", "i", ")", "?", "1", ":", "0", ")", "<", "<", "shift", ")", ";", "if", "(", "-", "-", "shift", "<", "0", ")", "{", "header", ".", "write", "(", "cache", ")", ";", "shift", "=", "<NUM_LIT:7>", ";", "cache", "=", "0", ";", "}", "}", "if", "(", "shift", "!", "=", "<NUM_LIT:7>", ")", "{", "header", ".", "write", "(", "cache", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "<", "T", ">", "Iterable", "<", "T", ">", "reverse", "(", "final", "Iterable", "<", "T", ">", "i", ")", "{", "final", "LinkedList", "<", "T", ">", "l", "=", "new", "LinkedList", "<", ">", "(", ")", ";", "for", "(", "final", "T", "t", ":", "i", ")", "{", "l", ".", "addFirst", "(", "t", ")", ";", "}", "return", "l", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "IOException", "{", "ShadowEnvironment", ".", "setExternalStorageState", "(", "Environment", ".", "MEDIA_MOUNTED", ")", ";", "TestArchives", ".", "init", "(", "RuntimeEnvironment", ".", "application", ")", ";", "copyArchiveToStorage", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRoot", "(", ")", "{", "CompressedHelperTask", "task", "=", "createTask", "(", "\"", "\"", ")", ";", "ArrayList", "<", "CompressedObjectParcelable", ">", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "1", ",", "result", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "result", ".", "get", "(", "0", ")", ".", "name", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSublevels", "(", ")", "{", "CompressedHelperTask", "task", "=", "createTask", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ArrayList", "<", "CompressedObjectParcelable", ">", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "<NUM_LIT:5>", ",", "result", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:1>", "\"", ",", "result", ".", "get", "(", "0", ")", ".", "name", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:2>", "\"", ",", "result", ".", "get", "(", "1", ")", ".", "name", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:3>", "\"", ",", "result", ".", "get", "(", "<NUM_LIT:2>", ")", ".", "name", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:4>", "\"", ",", "result", ".", "get", "(", "<NUM_LIT:3>", ")", ".", "name", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "result", ".", "get", "(", "<NUM_LIT:4>", ")", ".", "name", ")", ";", "task", "=", "createTask", "(", "\"", "<STR_LIT>", "\"", ")", ";", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "1", ",", "result", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "result", ".", "get", "(", "0", ")", ".", "name", ")", ";", "task", "=", "createTask", "(", "\"", "<STR_LIT>", "\"", ")", ";", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "1", ",", "result", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "result", ".", "get", "(", "0", ")", ".", "name", ")", ";", "task", "=", "createTask", "(", "\"", "<STR_LIT>", "\"", ")", ";", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "1", ",", "result", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:6>", "\"", ",", "result", ".", "get", "(", "0", ")", ".", "name", ")", ";", "task", "=", "createTask", "(", "\"", "<STR_LIT>", "\"", ")", ";", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "1", ",", "result", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:5>", "\"", ",", "result", ".", "get", "(", "0", ")", ".", "name", ")", ";", "task", "=", "createTask", "(", "\"", "<STR_LIT>", "\"", ")", ";", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "1", ",", "result", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "result", ".", "get", "(", "0", ")", ".", "name", ")", ";", "task", "=", "createTask", "(", "\"", "<STR_LIT>", "\"", ")", ";", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "1", ",", "result", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "result", ".", "get", "(", "0", ")", ".", "name", ")", ";", "task", "=", "createTask", "(", "\"", "<STR_LIT>", "\"", ")", ";", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "1", ",", "result", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "result", ".", "get", "(", "0", ")", ".", "name", ")", ";", "task", "=", "createTask", "(", "\"", "<STR_LIT>", "\"", ")", ";", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "1", ",", "result", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "result", ".", "get", "(", "0", ")", ".", "name", ")", ";", "}", "</s>"]
["<s>", "protected", "CompressedHelperTask", "createTask", "(", "String", "relativePath", ")", "{", "return", "new", "SevenZipHelperTask", "(", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", "+", "getArchiveType", "(", ")", ")", ".", "getAbsolutePath", "(", ")", ",", "relativePath", ",", "false", ",", "(", "data", ")", "-", ">", "{", "}", ")", ";", "}", "</s>"]
["<s>", "protected", "String", "getArchiveType", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "protected", "CompressedHelperTask", "createTask", "(", "String", "relativePath", ")", "{", "return", "new", "ZipHelperTask", "(", "RuntimeEnvironment", ".", "application", ",", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", "+", "getArchiveType", "(", ")", ")", ".", "getAbsolutePath", "(", ")", ",", "relativePath", ",", "false", ",", "(", "data", ")", "-", ">", "{", "}", ")", ";", "}", "</s>"]
["<s>", "protected", "String", "getArchiveType", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "protected", "CompressedHelperTask", "createTask", "(", "String", "relativePath", ")", "{", "return", "new", "SevenZipHelperTask", "(", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "getAbsolutePath", "(", ")", ",", "relativePath", ",", "false", ",", "(", "data", ")", "-", ">", "{", "}", ")", ";", "}", "</s>"]
["<s>", "protected", "CompressedHelperTask", "createTask", "(", "String", "relativePath", ")", "{", "return", "new", "ZipHelperTask", "(", "RuntimeEnvironment", ".", "application", ",", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "getAbsolutePath", "(", ")", ",", "relativePath", ",", "false", ",", "(", "data", ")", "-", ">", "{", "}", ")", ";", "}", "</s>"]
["<s>", "protected", "CompressedHelperTask", "createTask", "(", "String", "relativePath", ")", "{", "return", "new", "SevenZipHelperTask", "(", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "getAbsolutePath", "(", ")", ",", "relativePath", ",", "false", ",", "(", "data", ")", "-", ">", "{", "}", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "showPasswordDialog", "(", "@", "NonNull", "Context", "c", ",", "@", "NonNull", "final", "MainActivity", "main", ",", "@", "NonNull", "AppTheme", "appTheme", ",", "@", "StringRes", "int", "titleText", ",", "@", "StringRes", "int", "promptText", ",", "@", "NonNull", "MaterialDialog", ".", "SingleButtonCallback", "positiveCallback", ",", "@", "Nullable", "MaterialDialog", ".", "SingleButtonCallback", "negativeCallback", ")", "{", "int", "accentColor", "=", "main", ".", "getAccent", "(", ")", ";", "MaterialDialog", ".", "Builder", "builder", "=", "new", "MaterialDialog", ".", "Builder", "(", "c", ")", ";", "View", "dialogLayout", "=", "View", ".", "inflate", "(", "main", ",", "R", ".", "layout", ".", "dialog_singleedittext", ",", "null", ")", ";", "WarnableTextInputLayout", "wilTextfield", "=", "dialogLayout", ".", "findViewById", "(", "R", ".", "id", ".", "singleedittext_warnabletextinputlayout", ")", ";", "EditText", "textfield", "=", "dialogLayout", ".", "findViewById", "(", "R", ".", "id", ".", "singleedittext_input", ")", ";", "textfield", ".", "setHint", "(", "promptText", ")", ";", "textfield", ".", "setInputType", "(", "InputType", ".", "TYPE_CLASS_TEXT", "|", "InputType", ".", "TYPE_TEXT_VARIATION_PASSWORD", ")", ";", "builder", ".", "customView", "(", "dialogLayout", ",", "false", ")", ".", "theme", "(", "appTheme", ".", "getMaterialDialogTheme", "(", ")", ")", ".", "autoDismiss", "(", "false", ")", ".", "title", "(", "titleText", ")", ".", "positiveText", "(", "R", ".", "string", ".", "ok", ")", ".", "positiveColor", "(", "accentColor", ")", ".", "onPositive", "(", "positiveCallback", ")", ".", "negativeText", "(", "R", ".", "string", ".", "cancel", ")", ".", "negativeColor", "(", "accentColor", ")", ";", "if", "(", "negativeCallback", "!", "=", "null", ")", "builder", ".", "onNegative", "(", "negativeCallback", ")", ";", "else", "builder", ".", "onNegative", "(", "(", "dialog", ",", "which", ")", "-", ">", "dialog", ".", "cancel", "(", ")", ")", ";", "MaterialDialog", "dialog", "=", "builder", ".", "show", "(", ")", ";", "new", "WarnableTextInputValidator", "(", "AppConfig", ".", "getInstance", "(", ")", ".", "getMainActivityContext", "(", ")", ",", "textfield", ",", "wilTextfield", ",", "dialog", ".", "getActionButton", "(", "DialogAction", ".", "POSITIVE", ")", ",", "(", "text", ")", "-", ">", "{", "if", "(", "text", ".", "length", "(", ")", "<", "1", ")", "{", "return", "new", "WarnableTextInputValidator", ".", "ReturnState", "(", "WarnableTextInputValidator", ".", "ReturnState", ".", "STATE_ERROR", ",", "R", ".", "string", ".", "field_empty", ")", ";", "}", "return", "new", "WarnableTextInputValidator", ".", "ReturnState", "(", ")", ";", "}", ")", ";", "}", "</s>"]
["<s>", "public", "static", "ArchivePasswordCache", "getInstance", "(", ")", "{", "return", "ArchivePasswordCacheHolder", ".", "INSTANCE", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IOException", ".", "class", ")", "public", "void", "testExtractFilesWithoutPassword", "(", ")", "throws", "Exception", "{", "ArchivePasswordCache", ".", "getInstance", "(", ")", ".", "clear", "(", ")", ";", "try", "{", "doTestExtractFiles", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "assertExceptionIsExpected", "(", "e", ")", ";", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IOException", ".", "class", ")", "public", "void", "testExtractFilesWithWrongPassword", "(", ")", "throws", "Exception", "{", "ArchivePasswordCache", ".", "getInstance", "(", ")", ".", "clear", "(", ")", ";", "ArchivePasswordCache", ".", "getInstance", "(", ")", ".", "put", "(", "getArchiveFile", "(", ")", ".", "getAbsolutePath", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "doTestExtractFiles", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "assertExceptionIsExpected", "(", "e", ")", ";", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IOException", ".", "class", ")", "public", "void", "testExtractFilesWithRepeatedWrongPassword", "(", ")", "throws", "Exception", "{", "ArchivePasswordCache", ".", "getInstance", "(", ")", ".", "clear", "(", ")", ";", "ArchivePasswordCache", ".", "getInstance", "(", ")", ".", "put", "(", "getArchiveFile", "(", ")", ".", "getAbsolutePath", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "doTestExtractFiles", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "assertExceptionIsExpected", "(", "e", ")", ";", "throw", "e", ";", "}", "ArchivePasswordCache", ".", "getInstance", "(", ")", ".", "put", "(", "getArchiveFile", "(", ")", ".", "getAbsolutePath", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "doTestExtractFiles", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "assertExceptionIsExpected", "(", "e", ")", ";", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "protected", "void", "assertExceptionIsExpected", "(", "IOException", "e", ")", "throws", "IOException", "{", "for", "(", "Class", "<", "?", "extends", "Throwable", ">", "c", ":", "expectedRootExceptionClass", "(", ")", ")", "{", "if", "(", "e", ".", "getCause", "(", ")", "!", "=", "null", "?", "(", "c", ".", "isAssignableFrom", "(", "e", ".", "getCause", "(", ")", ".", "getClass", "(", ")", ")", ")", ":", "c", ".", "isAssignableFrom", "(", "e", ".", "getClass", "(", ")", ")", ")", "return", ";", "}", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "throw", "e", ";", "}", "</s>"]
["<s>", "protected", "void", "doTestExtractFiles", "(", ")", "throws", "Exception", "{", "CountDownLatch", "latch", "=", "new", "CountDownLatch", "(", "1", ")", ";", "Extractor", "extractor", "=", "extractorClass", "(", ")", ".", "getConstructor", "(", "Context", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ",", "Extractor", ".", "OnUpdate", ".", "class", ")", ".", "newInstance", "(", "RuntimeEnvironment", ".", "application", ",", "getArchiveFile", "(", ")", ".", "getAbsolutePath", "(", ")", ",", "Environment", ".", "getExternalStorageDirectory", "(", ")", ".", "getAbsolutePath", "(", ")", ",", "new", "Extractor", ".", "OnUpdate", "(", ")", "{", "@", "Override", "public", "void", "onStart", "(", "long", "totalBytes", ",", "String", "firstEntryName", ")", "{", "}", "@", "Override", "public", "void", "onUpdate", "(", "String", "entryPath", ")", "{", "}", "@", "Override", "public", "void", "onFinish", "(", ")", "{", "latch", ".", "countDown", "(", ")", ";", "try", "{", "verifyExtractedArchiveContents", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "e", ".", "printStackTrace", "(", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "@", "Override", "public", "boolean", "isCancelled", "(", ")", "{", "return", "false", ";", "}", "}", ")", ";", "extractor", ".", "extractEverything", "(", ")", ";", "latch", ".", "await", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isHidden", "(", ")", "{", "return", "name", ".", "startsWith", "(", "\"", "<STR_LIT:.>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "changePermissions", "(", "String", "filePath", ",", "int", "updatedPermissions", ",", "boolean", "isDirectory", ",", "OnOperationPerform", "onOperationPerform", ")", "throws", "ShellNotRunningException", "{", "String", "mountPoint", "=", "mountFileSystemRW", "(", "filePath", ")", ";", "String", "options", "=", "isDirectory", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "\"", ";", "String", "command", "=", "String", ".", "format", "(", "CHMOD_COMMAND", ",", "options", ",", "updatedPermissions", ",", "filePath", ")", ";", "RootHelper", ".", "runShellCommandWithCallback", "(", "command", ",", "(", "commandCode", ",", "exitCode", ",", "output", ")", "-", ">", "{", "if", "(", "exitCode", "<", "0", ")", "{", "onOperationPerform", ".", "callback", "(", "false", ")", ";", "}", "else", "{", "onOperationPerform", ".", "callback", "(", "true", ")", ";", "}", "}", ")", ";", "if", "(", "mountPoint", "!", "=", "null", ")", "{", "mountFileSystemRO", "(", "mountPoint", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "String", "getDate", "(", "@", "NonNull", "Context", "c", ",", "long", "f", ")", "{", "return", "String", ".", "format", "(", "DATE_TIME_FORMAT", ",", "DateUtils", ".", "formatDateTime", "(", "c", ",", "f", ",", "DateUtils", ".", "FORMAT_SHOW_DATE", ")", ",", "DateUtils", ".", "formatDateTime", "(", "c", ",", "f", ",", "DateUtils", ".", "FORMAT_SHOW_TIME", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "NotificationCompat", ".", "Builder", "getBuilder", "(", ")", "{", "return", "builder", ";", "}", "</s>"]
["<s>", "private", "void", "acquireWakeLock", "(", ")", "{", "PowerManager", "powerManager", "=", "(", "PowerManager", ")", "getSystemService", "(", "POWER_SERVICE", ")", ";", "wakeLock", "=", "powerManager", ".", "newWakeLock", "(", "PowerManager", ".", "PARTIAL_WAKE_LOCK", ",", "\"", "<STR_LIT>", "\"", ")", ";", "wakeLock", ".", "acquire", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "releaseWakeLock", "(", ")", "{", "wakeLock", ".", "release", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Notification", "buildNotification", "(", ")", "{", "Notification", "notification", ";", "Intent", "notificationIntent", "=", "new", "Intent", "(", "this", ",", "MainActivity", ".", "class", ")", ";", "notificationIntent", ".", "setFlags", "(", "Intent", ".", "FLAG_ACTIVITY_CLEAR_TOP", "|", "Intent", ".", "FLAG_ACTIVITY_SINGLE_TOP", ")", ";", "PendingIntent", "contentIntent", "=", "PendingIntent", ".", "getActivity", "(", "this", ",", "0", ",", "notificationIntent", ",", "0", ")", ";", "CharSequence", "tickerText", "=", "this", ".", "getString", "(", "R", ".", "string", ".", "ftp_notif_starting", ")", ";", "long", "when", "=", "System", ".", "currentTimeMillis", "(", ")", ";", "builder", "=", "new", "NotificationCompat", ".", "Builder", "(", "getApplicationContext", "(", ")", ",", "NotificationConstants", ".", "CHANNEL_FTP_ID", ")", ".", "setContentTitle", "(", "this", ".", "getString", "(", "R", ".", "string", ".", "ftp_notif_starting_title", ")", ")", ".", "setContentText", "(", "this", ".", "getString", "(", "R", ".", "string", ".", "ftp_notif_starting", ")", ")", ".", "setContentIntent", "(", "contentIntent", ")", ".", "setSmallIcon", "(", "R", ".", "drawable", ".", "ic_ftp_light", ")", ".", "setTicker", "(", "tickerText", ")", ".", "setWhen", "(", "when", ")", ".", "setOngoing", "(", "true", ")", ".", "setOnlyAlertOnce", "(", "true", ")", ";", "int", "stopIcon", "=", "android", ".", "R", ".", "drawable", ".", "ic_menu_close_clear_cancel", ";", "CharSequence", "stopText", "=", "this", ".", "getString", "(", "R", ".", "string", ".", "ftp_notif_stop_server", ")", ";", "Intent", "stopIntent", "=", "new", "Intent", "(", "FtpService", ".", "ACTION_STOP_FTPSERVER", ")", ".", "setPackage", "(", "getApplicationContext", "(", ")", ".", "getPackageName", "(", ")", ")", ";", "PendingIntent", "stopPendingIntent", "=", "PendingIntent", ".", "getBroadcast", "(", "getApplicationContext", "(", ")", ",", "0", ",", "stopIntent", ",", "PendingIntent", ".", "FLAG_ONE_SHOT", ")", ";", "builder", ".", "addAction", "(", "stopIcon", ",", "stopText", ",", "stopPendingIntent", ")", ";", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "JELLY_BEAN", "&", "&", "Build", ".", "VERSION", ".", "SDK_INT", "<", "Build", ".", "VERSION_CODES", ".", "O", ")", "{", "notification", "=", "builder", ".", "build", "(", ")", ";", "}", "else", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "O", ")", "{", "String", "channelName", "=", "NotificationConstants", ".", "CHANNEL_FTP_NAME", ";", "NotificationChannel", "chan", "=", "new", "NotificationChannel", "(", "NotificationConstants", ".", "CHANNEL_FTP_ID", ",", "channelName", ",", "NotificationManager", ".", "IMPORTANCE_DEFAULT", ")", ";", "NotificationManager", "manager", "=", "(", "NotificationManager", ")", "getSystemService", "(", "Context", ".", "NOTIFICATION_SERVICE", ")", ";", "manager", ".", "createNotificationChannel", "(", "chan", ")", ";", "notification", "=", "builder", ".", "build", "(", ")", ";", "}", "else", "{", "notification", "=", "builder", ".", "getNotification", "(", ")", ";", "}", "return", "notification", ";", "}", "</s>"]
["<s>", "public", "static", "Notification", "startNotification", "(", "Context", "context", ")", "{", "tickerText", "=", "context", ".", "getString", "(", "R", ".", "string", ".", "ftp_notif_starting", ")", ";", "contentTitle", "=", "context", ".", "getString", "(", "R", ".", "string", ".", "ftp_notif_starting_title", ")", ";", "contentText", "=", "context", ".", "getString", "(", "R", ".", "string", ".", "ftp_notif_starting", ")", ";", "buildNotification", "(", "context", ")", ";", "return", "builder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "showPasswordDialog", "(", "@", "NonNull", "Context", "c", ",", "@", "NonNull", "final", "MainActivity", "main", ",", "@", "NonNull", "AppTheme", "appTheme", ",", "@", "StringRes", "int", "titleText", ",", "@", "StringRes", "int", "promptText", ",", "@", "NonNull", "MaterialDialog", ".", "SingleButtonCallback", "positiveCallback", ",", "@", "Nullable", "MaterialDialog", ".", "SingleButtonCallback", "negativeCallback", ")", "{", "int", "accentColor", "=", "main", ".", "getAccent", "(", ")", ";", "MaterialDialog", ".", "Builder", "builder", "=", "new", "MaterialDialog", ".", "Builder", "(", "c", ")", ";", "View", "dialogLayout", "=", "View", ".", "inflate", "(", "main", ",", "R", ".", "layout", ".", "dialog_singleedittext", ",", "null", ")", ";", "WarnableTextInputLayout", "wilTextfield", "=", "dialogLayout", ".", "findViewById", "(", "R", ".", "id", ".", "singleedittext_warnabletextinputlayout", ")", ";", "EditText", "textfield", "=", "dialogLayout", ".", "findViewById", "(", "R", ".", "id", ".", "singleedittext_input", ")", ";", "textfield", ".", "setHint", "(", "promptText", ")", ";", "textfield", ".", "setInputType", "(", "InputType", ".", "TYPE_CLASS_TEXT", "|", "InputType", ".", "TYPE_TEXT_VARIATION_PASSWORD", ")", ";", "builder", ".", "customView", "(", "dialogLayout", ",", "false", ")", ".", "theme", "(", "appTheme", ".", "getMaterialDialogTheme", "(", ")", ")", ".", "autoDismiss", "(", "false", ")", ".", "canceledOnTouchOutside", "(", "false", ")", ".", "title", "(", "titleText", ")", ".", "positiveText", "(", "R", ".", "string", ".", "ok", ")", ".", "positiveColor", "(", "accentColor", ")", ".", "onPositive", "(", "positiveCallback", ")", ".", "negativeText", "(", "R", ".", "string", ".", "cancel", ")", ".", "negativeColor", "(", "accentColor", ")", ";", "if", "(", "negativeCallback", "!", "=", "null", ")", "builder", ".", "onNegative", "(", "negativeCallback", ")", ";", "else", "builder", ".", "onNegative", "(", "(", "dialog", ",", "which", ")", "-", ">", "dialog", ".", "cancel", "(", ")", ")", ";", "MaterialDialog", "dialog", "=", "builder", ".", "show", "(", ")", ";", "new", "WarnableTextInputValidator", "(", "AppConfig", ".", "getInstance", "(", ")", ".", "getMainActivityContext", "(", ")", ",", "textfield", ",", "wilTextfield", ",", "dialog", ".", "getActionButton", "(", "DialogAction", ".", "POSITIVE", ")", ",", "(", "text", ")", "-", ">", "{", "if", "(", "text", ".", "length", "(", ")", "<", "1", ")", "{", "return", "new", "WarnableTextInputValidator", ".", "ReturnState", "(", "WarnableTextInputValidator", ".", "ReturnState", ".", "STATE_ERROR", ",", "R", ".", "string", ".", "field_empty", ")", ";", "}", "return", "new", "WarnableTextInputValidator", ".", "ReturnState", "(", ")", ";", "}", ")", ";", "}", "</s>"]
["<s>", "private", "void", "archiveCorruptOrUnsupportedToast", "(", ")", "{", "Toast", ".", "makeText", "(", "getActivity", "(", ")", ",", "getActivity", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "archive_unsupported_or_corrupt", ",", "compressedFile", ".", "getAbsolutePath", "(", ")", ")", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "getActivity", "(", ")", ".", "getSupportFragmentManager", "(", ")", ".", "beginTransaction", "(", ")", ".", "remove", "(", "this", ")", ".", "commit", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Subscribe", "public", "void", "onFtpReceiverActions", "(", "FtpService", ".", "FtpReceiverActions", "signal", ")", "{", "updateTileState", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Subscribe", "(", "threadMode", "=", "ThreadMode", ".", "MAIN_ORDERED", ")", "public", "void", "onFtpReceiveActions", "(", "FtpService", ".", "FtpReceiverActions", "signal", ")", "{", "updateSpans", "(", ")", ";", "switch", "(", "signal", ")", "{", "case", "STARTED", ":", "case", "STARTED_FROM_TILE", ":", "if", "(", "getSecurePreference", "(", ")", ")", "{", "statusText", ".", "setText", "(", "spannedStatusSecure", ")", ";", "}", "else", "{", "statusText", ".", "setText", "(", "spannedStatusConnected", ")", ";", "}", "url", ".", "setText", "(", "spannedStatusUrl", ")", ";", "ftpBtn", ".", "setText", "(", "getResources", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "stop_ftp", ")", ".", "toUpperCase", "(", ")", ")", ";", "FtpNotification", ".", "updateNotification", "(", "getContext", "(", ")", ",", "STARTED_FROM_TILE", ".", "equals", "(", "signal", ")", ")", ";", "break", ";", "case", "FAILED_TO_START", ":", "statusText", ".", "setText", "(", "spannedStatusNotRunning", ")", ";", "Toast", ".", "makeText", "(", "getContext", "(", ")", ",", "getResources", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "unknown_error", ")", ",", "Toast", ".", "LENGTH_LONG", ")", ".", "show", "(", ")", ";", "ftpBtn", ".", "setText", "(", "getResources", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "start_ftp", ")", ".", "toUpperCase", "(", ")", ")", ";", "url", ".", "setText", "(", "\"", "<STR_LIT>", "\"", ")", ";", "break", ";", "case", "STOPPED", ":", "statusText", ".", "setText", "(", "spannedStatusNotRunning", ")", ";", "url", ".", "setText", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ftpBtn", ".", "setText", "(", "getResources", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "start_ftp", ")", ".", "toUpperCase", "(", ")", ")", ";", "break", ";", "}", "}", "</s>"]
["<s>", "public", "void", "removeConnection", "(", "@", "NonNull", "String", "url", ")", "{", "url", "=", "SshClientUtils", ".", "extractBaseUriFrom", "(", "url", ")", ";", "if", "(", "connections", ".", "containsKey", "(", "url", ")", ")", "{", "SshClientUtils", ".", "tryDisconnect", "(", "connections", ".", "remove", "(", "url", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "isAlive", "(", ")", "{", "return", "handle", ".", "isDone", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "watch", "(", "ServiceStatusCallbacks", "serviceStatusCallbacks", ")", "{", "watcherRepeatingRunnable", "=", "new", "ServiceWatcherRepeatingRunnable", "(", "true", ",", "serviceStatusCallbacks", ",", "progressHandler", ")", ";", "}", "</s>"]
["<s>", "public", "void", "cancel", "(", "boolean", "immediatly", ")", "{", "handle", ".", "cancel", "(", "immediatly", ")", ";", "}", "</s>"]
["<s>", "public", "void", "removeConnection", "(", "@", "NonNull", "String", "url", ",", "@", "NonNull", "Runnable", "callback", ")", "{", "new", "AsyncRemoveConnection", "(", "url", ",", "callback", ")", ".", "execute", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "initFabTitle", "(", "@", "IdRes", "int", "id", ",", "@", "StringRes", "int", "fabTitle", ",", "@", "DrawableRes", "int", "icon", ")", "{", "int", "iconSkin", "=", "getCurrentColorPreference", "(", ")", ".", "iconSkin", ";", "SpeedDialActionItem", ".", "Builder", "builder", "=", "new", "SpeedDialActionItem", ".", "Builder", "(", "id", ",", "icon", ")", ".", "setLabel", "(", "fabTitle", ")", ".", "setFabBackgroundColor", "(", "iconSkin", ")", ";", "switch", "(", "getAppTheme", "(", ")", ".", "getSimpleTheme", "(", ")", ")", "{", "case", "DARK", ":", "builder", ".", "setLabelBackgroundColor", "(", "Utils", ".", "getColor", "(", "this", ",", "R", ".", "color", ".", "holo_dark_background", ")", ")", ".", "setLabelColor", "(", "Utils", ".", "getColor", "(", "this", ",", "R", ".", "color", ".", "text_dark", ")", ")", ";", "break", ";", "case", "BLACK", ":", "builder", ".", "setLabelBackgroundColor", "(", "Color", ".", "BLACK", ")", ".", "setLabelColor", "(", "Utils", ".", "getColor", "(", "this", ",", "R", ".", "color", ".", "text_dark", ")", ")", ";", "break", ";", "}", "floatingActionButton", ".", "addActionItem", "(", "builder", ".", "create", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "initFabTitle", "(", "@", "IdRes", "int", "id", ",", "@", "StringRes", "int", "fabTitle", ",", "@", "DrawableRes", "int", "icon", ")", "{", "int", "iconSkin", "=", "getCurrentColorPreference", "(", ")", ".", "iconSkin", ";", "SpeedDialActionItem", ".", "Builder", "builder", "=", "new", "SpeedDialActionItem", ".", "Builder", "(", "id", ",", "icon", ")", ".", "setLabel", "(", "fabTitle", ")", ".", "setFabBackgroundColor", "(", "iconSkin", ")", ";", "switch", "(", "getAppTheme", "(", ")", ".", "getSimpleTheme", "(", ")", ")", "{", "case", "LIGHT", ":", "fabBgView", ".", "setBackgroundResource", "(", "R", ".", "drawable", ".", "fab_shadow_light", ")", ";", "break", ";", "case", "DARK", ":", "builder", ".", "setLabelBackgroundColor", "(", "Utils", ".", "getColor", "(", "this", ",", "R", ".", "color", ".", "holo_dark_background", ")", ")", ".", "setLabelColor", "(", "Utils", ".", "getColor", "(", "this", ",", "R", ".", "color", ".", "text_dark", ")", ")", ";", "fabBgView", ".", "setBackgroundResource", "(", "R", ".", "drawable", ".", "fab_shadow_dark", ")", ";", "break", ";", "case", "BLACK", ":", "builder", ".", "setLabelBackgroundColor", "(", "Color", ".", "BLACK", ")", ".", "setLabelColor", "(", "Utils", ".", "getColor", "(", "this", ",", "R", ".", "color", ".", "text_dark", ")", ")", ";", "fabBgView", ".", "setBackgroundResource", "(", "R", ".", "drawable", ".", "fab_shadow_black", ")", ";", "break", ";", "}", "floatingActionButton", ".", "addActionItem", "(", "builder", ".", "create", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "init", "(", ")", "{", "Properties", "props", "=", "new", "Properties", "(", ")", ";", "props", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "props", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "props", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "props", ".", "setProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:-1>", "\"", ")", ";", "try", "{", "SingletonContext", ".", "init", "(", "props", ")", ";", "initialized", "=", "true", ";", "}", "catch", "(", "CIFSException", "e", ")", "{", "android", ".", "util", ".", "Log", ".", "e", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "synchronized", "static", "void", "initialize", "(", "@", "NonNull", "Context", "context", ")", "{", "android", ".", "util", ".", "Log", ".", "d", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "INSTANCE", "=", "=", "null", ")", "{", "INSTANCE", "=", "Room", ".", "databaseBuilder", "(", "context", ",", "ExplorerDatabase", ".", "class", ",", "DATABASE_NAME", ")", ".", "addMigrations", "(", "MIGRATION_6_7", ")", ".", "allowMainThreadQueries", "(", ")", ".", "build", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "final", "ExplorerDatabase", "getInstance", "(", ")", "{", "return", "INSTANCE", ";", "}", "</s>"]
["<s>", "public", "void", "close", "(", ")", "{", "database", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "static", "void", "initialize", "(", "@", "NonNull", "Context", "context", ")", "{", "android", ".", "util", ".", "Log", ".", "d", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "INSTANCE", "=", "=", "null", ")", "{", "INSTANCE", "=", "Room", ".", "databaseBuilder", "(", "context", ",", "UtilitiesDatabase", ".", "class", ",", "DATABASE_NAME", ")", ".", "allowMainThreadQueries", "(", ")", ".", "addMigrations", "(", "MIGRATION_1_2", ",", "MIGRATION_2_3", ",", "MIGRATION_3_4", ")", ".", "build", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "final", "UtilitiesDatabase", "getInstance", "(", ")", "{", "return", "INSTANCE", ";", "}", "</s>"]
["<s>", "@", "TypeConverter", "public", "static", "StringWrapper", "toPassword", "(", "String", "encryptedStringEntryInDb", ")", "{", "try", "{", "return", "new", "StringWrapper", "(", "CryptUtil", ".", "decryptPassword", "(", "AppConfig", ".", "getInstance", "(", ")", ",", "encryptedStringEntryInDb", ")", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "android", ".", "util", ".", "Log", ".", "e", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "return", "null", ";", "}", "}", "</s>"]
["<s>", "@", "TypeConverter", "public", "static", "String", "fromPassword", "(", "StringWrapper", "unencryptedPasswordString", ")", "{", "try", "{", "return", "CryptUtil", ".", "encryptPassword", "(", "AppConfig", ".", "getInstance", "(", ")", ",", "unencryptedPasswordString", ".", "value", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "android", ".", "util", ".", "Log", ".", "e", "(", "TAG", ",", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "return", "null", ";", "}", "}", "</s>"]
["<s>", "@", "TypeConverter", "public", "static", "int", "fromOpenMode", "(", "OpenMode", "from", ")", "{", "return", "from", ".", "ordinal", "(", ")", ";", "}", "</s>"]
["<s>", "@", "TypeConverter", "public", "static", "OpenMode", "fromDatabaseValue", "(", "int", "from", ")", "{", "return", "OpenMode", ".", "getOpenMode", "(", "from", ")", ";", "}", "</s>"]
["<s>", "public", "StorageDirectoryParcelable", "createFromParcel", "(", "Parcel", "in", ")", "{", "return", "new", "StorageDirectoryParcelable", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "StorageDirectoryParcelable", "[", "]", "newArray", "(", "int", "size", ")", "{", "return", "new", "StorageDirectoryParcelable", "[", "size", "]", ";", "}", "</s>"]
["<s>", "@", "TargetApi", "(", "Build", ".", "VERSION_CODES", ".", "N", ")", "public", "static", "File", "getVolumeDirectory", "(", "StorageVolume", "volume", ")", "{", "try", "{", "Field", "f", "=", "StorageVolume", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "f", ".", "setAccessible", "(", "true", ")", ";", "return", "(", "File", ")", "f", ".", "get", "(", "volume", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "TargetApi", "(", "Build", ".", "VERSION_CODES", ".", "N", ")", "public", "synchronized", "ArrayList", "<", "StorageDirectoryParcelable", ">", "getStorageDirectoriesNew", "(", ")", "{", "ArrayList", "<", "StorageDirectoryParcelable", ">", "volumes", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "StorageManager", "sm", "=", "getSystemService", "(", "StorageManager", ".", "class", ")", ";", "for", "(", "StorageVolume", "volume", ":", "sm", ".", "getStorageVolumes", "(", ")", ")", "{", "Log", ".", "i", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "+", "volume", "+", "\"", "\"", ")", ";", "if", "(", "!", "volume", ".", "getState", "(", ")", ".", "equalsIgnoreCase", "(", "Environment", ".", "MEDIA_MOUNTED", ")", "&", "&", "!", "volume", ".", "getState", "(", ")", ".", "equalsIgnoreCase", "(", "Environment", ".", "MEDIA_MOUNTED_READ_ONLY", ")", ")", "{", "continue", ";", "}", "File", "path", "=", "Utils", ".", "getVolumeDirectory", "(", "volume", ")", ";", "String", "name", "=", "volume", ".", "getDescription", "(", "this", ")", ";", "int", "icon", "=", "R", ".", "drawable", ".", "ic_sd_storage_white_24dp", ";", "if", "(", "!", "volume", ".", "isRemovable", "(", ")", ")", "{", "icon", "=", "R", ".", "drawable", ".", "ic_phone_android_white_24dp", ";", "}", "else", "{", "icon", "=", "R", ".", "drawable", ".", "ic_sd_storage_white_24dp", ";", "}", "volumes", ".", "add", "(", "new", "StorageDirectoryParcelable", "(", "path", ".", "getPath", "(", ")", ",", "name", ",", "icon", ")", ")", ";", "}", "return", "volumes", ";", "}", "</s>"]
["<s>", "public", "synchronized", "ArrayList", "<", "StorageDirectoryParcelable", ">", "getStorageDirectoriesLegacy", "(", ")", "{", "List", "<", "String", ">", "rv", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "final", "String", "rawExternalStorage", "=", "System", ".", "getenv", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "String", "rawSecondaryStoragesStr", "=", "System", ".", "getenv", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "String", "rawEmulatedStorageTarget", "=", "System", ".", "getenv", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "TextUtils", ".", "isEmpty", "(", "rawEmulatedStorageTarget", ")", ")", "{", "if", "(", "TextUtils", ".", "isEmpty", "(", "rawExternalStorage", ")", ")", "{", "if", "(", "new", "File", "(", "DEFAULT_FALLBACK_STORAGE_PATH", ")", ".", "exists", "(", ")", ")", "{", "rv", ".", "add", "(", "DEFAULT_FALLBACK_STORAGE_PATH", ")", ";", "}", "else", "{", "rv", ".", "add", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ".", "getAbsolutePath", "(", ")", ")", ";", "}", "}", "else", "{", "rv", ".", "add", "(", "rawExternalStorage", ")", ";", "}", "}", "else", "{", "final", "String", "rawUserId", ";", "if", "(", "SDK_INT", "<", "Build", ".", "VERSION_CODES", ".", "JELLY_BEAN_MR1", ")", "{", "rawUserId", "=", "\"", "\"", ";", "}", "else", "{", "final", "String", "path", "=", "Environment", ".", "getExternalStorageDirectory", "(", ")", ".", "getAbsolutePath", "(", ")", ";", "final", "String", "[", "]", "folders", "=", "DIR_SEPARATOR", ".", "split", "(", "path", ")", ";", "final", "String", "lastFolder", "=", "folders", "[", "folders", ".", "length", "-", "1", "]", ";", "boolean", "isDigit", "=", "false", ";", "try", "{", "Integer", ".", "valueOf", "(", "lastFolder", ")", ";", "isDigit", "=", "true", ";", "}", "catch", "(", "NumberFormatException", "ignored", ")", "{", "}", "rawUserId", "=", "isDigit", "?", "lastFolder", ":", "\"", "\"", ";", "}", "if", "(", "TextUtils", ".", "isEmpty", "(", "rawUserId", ")", ")", "{", "rv", ".", "add", "(", "rawEmulatedStorageTarget", ")", ";", "}", "else", "{", "rv", ".", "add", "(", "rawEmulatedStorageTarget", "+", "File", ".", "separator", "+", "rawUserId", ")", ";", "}", "}", "if", "(", "!", "TextUtils", ".", "isEmpty", "(", "rawSecondaryStoragesStr", ")", ")", "{", "final", "String", "[", "]", "rawSecondaryStorages", "=", "rawSecondaryStoragesStr", ".", "split", "(", "File", ".", "pathSeparator", ")", ";", "Collections", ".", "addAll", "(", "rv", ",", "rawSecondaryStorages", ")", ";", "}", "if", "(", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "M", "&", "&", "checkStoragePermission", "(", ")", ")", "rv", ".", "clear", "(", ")", ";", "if", "(", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "KITKAT", ")", "{", "String", "strings", "[", "]", "=", "FileUtil", ".", "getExtSdCardPathsForActivity", "(", "this", ")", ";", "for", "(", "String", "s", ":", "strings", ")", "{", "File", "f", "=", "new", "File", "(", "s", ")", ";", "if", "(", "!", "rv", ".", "contains", "(", "s", ")", "&", "&", "FileUtils", ".", "canListFiles", "(", "f", ")", ")", "rv", ".", "add", "(", "s", ")", ";", "}", "}", "File", "usb", "=", "getUsbDrive", "(", ")", ";", "if", "(", "usb", "!", "=", "null", "&", "&", "!", "rv", ".", "contains", "(", "usb", ".", "getPath", "(", ")", ")", ")", "rv", ".", "add", "(", "usb", ".", "getPath", "(", ")", ")", ";", "if", "(", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "KITKAT", ")", "{", "if", "(", "SingletonUsbOtg", ".", "getInstance", "(", ")", ".", "isDeviceConnected", "(", ")", ")", "{", "rv", ".", "add", "(", "OTGUtil", ".", "PREFIX_OTG", "+", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "}", "ArrayList", "<", "StorageDirectoryParcelable", ">", "volumes", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "for", "(", "String", "file", ":", "rv", ")", "{", "File", "f", "=", "new", "File", "(", "file", ")", ";", "String", "name", ";", "@", "DrawableRes", "int", "icon", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "file", ")", "|", "|", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "file", ")", "|", "|", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "file", ")", ")", "{", "name", "=", "getResources", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "internalstorage", ")", ";", "icon", "=", "R", ".", "drawable", ".", "ic_phone_android_white_24dp", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "file", ")", ")", "{", "name", "=", "getResources", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "extstorage", ")", ";", "icon", "=", "R", ".", "drawable", ".", "ic_sd_storage_white_24dp", ";", "}", "else", "if", "(", "\"", "<STR_LIT:/>", "\"", ".", "equals", "(", "file", ")", ")", "{", "name", "=", "getResources", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "root_directory", ")", ";", "icon", "=", "R", ".", "drawable", ".", "ic_drawer_root_white", ";", "}", "else", "{", "name", "=", "f", ".", "getName", "(", ")", ";", "icon", "=", "R", ".", "drawable", ".", "ic_sd_storage_white_24dp", ";", "}", "volumes", ".", "add", "(", "new", "StorageDirectoryParcelable", "(", "file", ",", "name", ",", "icon", ")", ")", ";", "}", "return", "volumes", ";", "}", "</s>"]
["<s>", "public", "static", "String", "getDeviceDescriptionLegacy", "(", "Context", "context", ",", "File", "file", ")", "{", "String", "path", "=", "file", ".", "getPath", "(", ")", ";", "switch", "(", "path", ")", "{", "case", "\"", "<STR_LIT>", "\"", ":", "case", "\"", "<STR_LIT>", "\"", ":", "case", "\"", "<STR_LIT>", "\"", ":", "return", "context", ".", "getString", "(", "R", ".", "string", ".", "storage_internal", ")", ";", "case", "\"", "<STR_LIT>", "\"", ":", "case", "\"", "<STR_LIT>", "\"", ":", "return", "context", ".", "getString", "(", "R", ".", "string", ".", "storage_sd_card", ")", ";", "case", "\"", "<STR_LIT:/>", "\"", ":", "return", "context", ".", "getString", "(", "R", ".", "string", ".", "root_directory", ")", ";", "default", ":", "return", "file", ".", "getName", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testIsFileNameValid", "(", ")", "{", "assertTrue", "(", "Operations", ".", "isFileNameValid", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "Operations", ".", "isFileNameValid", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "Operations", ".", "isFileNameValid", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "Operations", ".", "isFileNameValid", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "Operations", ".", "isFileNameValid", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "Operations", ".", "isFileNameValid", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "Operations", ".", "isFileNameValid", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "openWithInternal", "(", "final", "Uri", "uri", ",", "final", "Context", "c", ",", "final", "boolean", "useNewStack", ")", "{", "MaterialDialog", ".", "Builder", "a", "=", "new", "MaterialDialog", ".", "Builder", "(", "c", ")", ";", "a", ".", "title", "(", "c", ".", "getString", "(", "R", ".", "string", ".", "open_as", ")", ")", ";", "String", "[", "]", "items", "=", "new", "String", "[", "]", "{", "c", ".", "getString", "(", "R", ".", "string", ".", "text", ")", ",", "c", ".", "getString", "(", "R", ".", "string", ".", "image", ")", ",", "c", ".", "getString", "(", "R", ".", "string", ".", "video", ")", ",", "c", ".", "getString", "(", "R", ".", "string", ".", "audio", ")", ",", "c", ".", "getString", "(", "R", ".", "string", ".", "database", ")", ",", "c", ".", "getString", "(", "R", ".", "string", ".", "other", ")", "}", ";", "a", ".", "items", "(", "items", ")", ".", "itemsCallback", "(", "(", "materialDialog", ",", "view", ",", "i", ",", "charSequence", ")", "-", ">", "{", "Intent", "intent", "=", "new", "Intent", "(", ")", ";", "intent", ".", "setAction", "(", "Intent", ".", "ACTION_VIEW", ")", ";", "intent", ".", "addFlags", "(", "Intent", ".", "FLAG_GRANT_READ_URI_PERMISSION", ")", ";", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "LOLLIPOP", ")", "{", "intent", ".", "addFlags", "(", "Intent", ".", "FLAG_ACTIVITY_RETAIN_IN_RECENTS", ")", ";", "}", "switch", "(", "i", ")", "{", "case", "0", ":", "if", "(", "useNewStack", ")", "applyNewDocFlag", "(", "intent", ")", ";", "intent", ".", "setDataAndType", "(", "uri", ",", "\"", "<STR_LIT>", "\"", ")", ";", "break", ";", "case", "1", ":", "intent", ".", "setDataAndType", "(", "uri", ",", "\"", "<STR_LIT>", "\"", ")", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "intent", ".", "setDataAndType", "(", "uri", ",", "\"", "<STR_LIT>", "\"", ")", ";", "break", ";", "case", "<NUM_LIT:3>", ":", "intent", ".", "setDataAndType", "(", "uri", ",", "\"", "<STR_LIT>", "\"", ")", ";", "break", ";", "case", "<NUM_LIT:4>", ":", "intent", "=", "new", "Intent", "(", "c", ",", "DatabaseViewerActivity", ".", "class", ")", ";", "intent", ".", "putExtra", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ".", "getPath", "(", ")", ".", "substring", "(", "uri", ".", "getPath", "(", ")", ".", "indexOf", "(", "FILE_PROVIDER_PREFIX", ")", "-", "1", ",", "FILE_PROVIDER_PREFIX", ".", "length", "(", ")", "+", "1", ")", ")", ";", "break", ";", "case", "<NUM_LIT:5>", ":", "intent", ".", "setDataAndType", "(", "uri", ",", "\"", "<STR_LIT>", "\"", ")", ";", "break", ";", "}", "try", "{", "c", ".", "startActivity", "(", "intent", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "Toast", ".", "makeText", "(", "c", ",", "R", ".", "string", ".", "no_app_found", ",", "Toast", ".", "LENGTH_SHORT", ")", ".", "show", "(", ")", ";", "openWithInternal", "(", "uri", ",", "c", ",", "useNewStack", ")", ";", "}", "}", ")", ";", "a", ".", "build", "(", ")", ".", "show", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "enableScreenRotation", "(", "@", "NonNull", "Activity", "activity", ")", "{", "activity", ".", "setRequestedOrientation", "(", "ActivityInfo", ".", "SCREEN_ORIENTATION_UNSPECIFIED", ")", ";", "}", "</s>"]
["<s>", "default", "<", "T", ">", "T", "nullCheckOrInterrupt", "(", "T", "t", ",", "AsyncTask", "asyncTask", ")", "{", "if", "(", "t", "!", "=", "null", ")", "{", "return", "t", ";", "}", "else", "{", "asyncTask", ".", "cancel", "(", "true", ")", ";", "return", "null", ";", "}", "}", "</s>"]
["<s>", "public", "void", "requestStoragePermission", "(", "@", "NonNull", "final", "OnPermissionGranted", "onPermissionGranted", ",", "boolean", "isInitialStart", ")", "{", "Utils", ".", "disableScreenRotation", "(", "this", ")", ";", "final", "MaterialDialog", "materialDialog", "=", "GeneralDialogCreation", ".", "showBasicDialog", "(", "this", ",", "R", ".", "string", ".", "grant_storage_permission", ",", "R", ".", "string", ".", "grantper", ",", "R", ".", "string", ".", "grant", ",", "R", ".", "string", ".", "cancel", ")", ";", "materialDialog", ".", "getActionButton", "(", "DialogAction", ".", "NEGATIVE", ")", ".", "setOnClickListener", "(", "v", "-", ">", "finish", "(", ")", ")", ";", "materialDialog", ".", "setCancelable", "(", "false", ")", ";", "requestPermission", "(", "Manifest", ".", "permission", ".", "WRITE_EXTERNAL_STORAGE", ",", "STORAGE_PERMISSION", ",", "materialDialog", ",", "onPermissionGranted", ",", "isInitialStart", ")", ";", "}", "</s>"]
["<s>", "@", "RequiresApi", "(", "api", "=", "Build", ".", "VERSION_CODES", ".", "M", ")", "public", "void", "requestInstallApkPermission", "(", "@", "NonNull", "final", "OnPermissionGranted", "onPermissionGranted", ",", "boolean", "isInitialStart", ")", "{", "final", "MaterialDialog", "materialDialog", "=", "GeneralDialogCreation", ".", "showBasicDialog", "(", "this", ",", "R", ".", "string", ".", "grant_apkinstall_permission", ",", "R", ".", "string", ".", "grantper", ",", "R", ".", "string", ".", "grant", ",", "R", ".", "string", ".", "cancel", ")", ";", "materialDialog", ".", "getActionButton", "(", "DialogAction", ".", "NEGATIVE", ")", ".", "setOnClickListener", "(", "v", "-", ">", "materialDialog", ".", "dismiss", "(", ")", ")", ";", "materialDialog", ".", "setCancelable", "(", "false", ")", ";", "requestPermission", "(", "Manifest", ".", "permission", ".", "REQUEST_INSTALL_PACKAGES", ",", "INSTALL_APK_PERMISSION", ",", "materialDialog", ",", "onPermissionGranted", ",", "isInitialStart", ")", ";", "}", "</s>"]
["<s>", "public", "void", "requestPermission", "(", "final", "String", "permission", ",", "final", "int", "code", ",", "@", "NonNull", "final", "MaterialDialog", "rationale", ",", "@", "NonNull", "final", "OnPermissionGranted", "onPermissionGranted", ",", "boolean", "isInitialStart", ")", "{", "permissionCallbacks", "[", "code", "]", "=", "onPermissionGranted", ";", "if", "(", "ActivityCompat", ".", "shouldShowRequestPermissionRationale", "(", "this", ",", "permission", ")", ")", "{", "rationale", ".", "getActionButton", "(", "DialogAction", ".", "POSITIVE", ")", ".", "setOnClickListener", "(", "v", "-", ">", "{", "ActivityCompat", ".", "requestPermissions", "(", "PermissionsActivity", ".", "this", ",", "new", "String", "[", "]", "{", "permission", "}", ",", "code", ")", ";", "rationale", ".", "dismiss", "(", ")", ";", "}", ")", ";", "rationale", ".", "show", "(", ")", ";", "}", "else", "if", "(", "isInitialStart", ")", "{", "ActivityCompat", ".", "requestPermissions", "(", "this", ",", "new", "String", "[", "]", "{", "permission", "}", ",", "code", ")", ";", "}", "else", "{", "Snackbar", ".", "make", "(", "getWindow", "(", ")", ".", "getDecorView", "(", ")", ",", "R", ".", "string", ".", "grantfailed", ",", "BaseTransientBottomBar", ".", "LENGTH_INDEFINITE", ")", ".", "setAction", "(", "R", ".", "string", ".", "grant", ",", "v", "-", ">", "startActivity", "(", "new", "Intent", "(", "android", ".", "provider", ".", "Settings", ".", "ACTION_APPLICATION_DETAILS_SETTINGS", ",", "Uri", ".", "parse", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "getPackageName", "(", ")", ")", ")", ")", ")", ")", ".", "show", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "CryptHandler", "getInstance", "(", ")", "{", "return", "CryptHandlerHolder", ".", "INSTANCE", ";", "}", "</s>"]
["<s>", "public", "static", "SortHandler", "getInstance", "(", ")", "{", "return", "SortHandlerHolder", ".", "INSTANCE", ";", "}", "</s>"]
["<s>", "public", "static", "TabHandler", "getInstance", "(", ")", "{", "return", "TabHandlerHolder", ".", "INSTANCE", ";", "}", "</s>"]
["<s>", "@", "TargetApi", "(", "Build", ".", "VERSION_CODES", ".", "N", ")", "public", "synchronized", "ArrayList", "<", "StorageDirectoryParcelable", ">", "getStorageDirectoriesNew", "(", ")", "{", "ArrayList", "<", "StorageDirectoryParcelable", ">", "volumes", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "StorageManager", "sm", "=", "getSystemService", "(", "StorageManager", ".", "class", ")", ";", "for", "(", "StorageVolume", "volume", ":", "sm", ".", "getStorageVolumes", "(", ")", ")", "{", "if", "(", "!", "volume", ".", "getState", "(", ")", ".", "equalsIgnoreCase", "(", "Environment", ".", "MEDIA_MOUNTED", ")", "&", "&", "!", "volume", ".", "getState", "(", ")", ".", "equalsIgnoreCase", "(", "Environment", ".", "MEDIA_MOUNTED_READ_ONLY", ")", ")", "{", "continue", ";", "}", "File", "path", "=", "Utils", ".", "getVolumeDirectory", "(", "volume", ")", ";", "String", "name", "=", "volume", ".", "getDescription", "(", "this", ")", ";", "int", "icon", ";", "if", "(", "!", "volume", ".", "isRemovable", "(", ")", ")", "{", "icon", "=", "R", ".", "drawable", ".", "ic_phone_android_white_24dp", ";", "}", "else", "{", "if", "(", "name", ".", "toUpperCase", "(", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", "|", "|", "path", ".", "getPath", "(", ")", ".", "toUpperCase", "(", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "icon", "=", "R", ".", "drawable", ".", "ic_usb_white_24dp", ";", "}", "else", "{", "icon", "=", "R", ".", "drawable", ".", "ic_sd_storage_white_24dp", ";", "}", "}", "volumes", ".", "add", "(", "new", "StorageDirectoryParcelable", "(", "path", ".", "getPath", "(", ")", ",", "name", ",", "icon", ")", ")", ";", "}", "return", "volumes", ";", "}", "</s>"]
["<s>", "public", "synchronized", "ArrayList", "<", "StorageDirectoryParcelable", ">", "getStorageDirectoriesLegacy", "(", ")", "{", "List", "<", "String", ">", "rv", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "final", "String", "rawExternalStorage", "=", "System", ".", "getenv", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "String", "rawSecondaryStoragesStr", "=", "System", ".", "getenv", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "String", "rawEmulatedStorageTarget", "=", "System", ".", "getenv", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "TextUtils", ".", "isEmpty", "(", "rawEmulatedStorageTarget", ")", ")", "{", "if", "(", "TextUtils", ".", "isEmpty", "(", "rawExternalStorage", ")", ")", "{", "if", "(", "new", "File", "(", "DEFAULT_FALLBACK_STORAGE_PATH", ")", ".", "exists", "(", ")", ")", "{", "rv", ".", "add", "(", "DEFAULT_FALLBACK_STORAGE_PATH", ")", ";", "}", "else", "{", "rv", ".", "add", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ".", "getAbsolutePath", "(", ")", ")", ";", "}", "}", "else", "{", "rv", ".", "add", "(", "rawExternalStorage", ")", ";", "}", "}", "else", "{", "final", "String", "rawUserId", ";", "if", "(", "SDK_INT", "<", "Build", ".", "VERSION_CODES", ".", "JELLY_BEAN_MR1", ")", "{", "rawUserId", "=", "\"", "\"", ";", "}", "else", "{", "final", "String", "path", "=", "Environment", ".", "getExternalStorageDirectory", "(", ")", ".", "getAbsolutePath", "(", ")", ";", "final", "String", "[", "]", "folders", "=", "DIR_SEPARATOR", ".", "split", "(", "path", ")", ";", "final", "String", "lastFolder", "=", "folders", "[", "folders", ".", "length", "-", "1", "]", ";", "boolean", "isDigit", "=", "false", ";", "try", "{", "Integer", ".", "valueOf", "(", "lastFolder", ")", ";", "isDigit", "=", "true", ";", "}", "catch", "(", "NumberFormatException", "ignored", ")", "{", "}", "rawUserId", "=", "isDigit", "?", "lastFolder", ":", "\"", "\"", ";", "}", "if", "(", "TextUtils", ".", "isEmpty", "(", "rawUserId", ")", ")", "{", "rv", ".", "add", "(", "rawEmulatedStorageTarget", ")", ";", "}", "else", "{", "rv", ".", "add", "(", "rawEmulatedStorageTarget", "+", "File", ".", "separator", "+", "rawUserId", ")", ";", "}", "}", "if", "(", "!", "TextUtils", ".", "isEmpty", "(", "rawSecondaryStoragesStr", ")", ")", "{", "final", "String", "[", "]", "rawSecondaryStorages", "=", "rawSecondaryStoragesStr", ".", "split", "(", "File", ".", "pathSeparator", ")", ";", "Collections", ".", "addAll", "(", "rv", ",", "rawSecondaryStorages", ")", ";", "}", "if", "(", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "M", "&", "&", "checkStoragePermission", "(", ")", ")", "rv", ".", "clear", "(", ")", ";", "if", "(", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "KITKAT", ")", "{", "String", "strings", "[", "]", "=", "FileUtil", ".", "getExtSdCardPathsForActivity", "(", "this", ")", ";", "for", "(", "String", "s", ":", "strings", ")", "{", "File", "f", "=", "new", "File", "(", "s", ")", ";", "if", "(", "!", "rv", ".", "contains", "(", "s", ")", "&", "&", "FileUtils", ".", "canListFiles", "(", "f", ")", ")", "rv", ".", "add", "(", "s", ")", ";", "}", "}", "File", "usb", "=", "getUsbDrive", "(", ")", ";", "if", "(", "usb", "!", "=", "null", "&", "&", "!", "rv", ".", "contains", "(", "usb", ".", "getPath", "(", ")", ")", ")", "rv", ".", "add", "(", "usb", ".", "getPath", "(", ")", ")", ";", "if", "(", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "KITKAT", ")", "{", "if", "(", "SingletonUsbOtg", ".", "getInstance", "(", ")", ".", "isDeviceConnected", "(", ")", ")", "{", "rv", ".", "add", "(", "OTGUtil", ".", "PREFIX_OTG", "+", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "}", "ArrayList", "<", "StorageDirectoryParcelable", ">", "volumes", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "for", "(", "String", "file", ":", "rv", ")", "{", "File", "f", "=", "new", "File", "(", "file", ")", ";", "@", "DrawableRes", "int", "icon", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "file", ")", "|", "|", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "file", ")", "|", "|", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "file", ")", ")", "{", "icon", "=", "R", ".", "drawable", ".", "ic_phone_android_white_24dp", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "file", ")", ")", "{", "icon", "=", "R", ".", "drawable", ".", "ic_sd_storage_white_24dp", ";", "}", "else", "if", "(", "\"", "<STR_LIT:/>", "\"", ".", "equals", "(", "file", ")", ")", "{", "icon", "=", "R", ".", "drawable", ".", "ic_drawer_root_white", ";", "}", "else", "{", "icon", "=", "R", ".", "drawable", ".", "ic_sd_storage_white_24dp", ";", "}", "String", "name", "=", "StorageNaming", ".", "getDeviceDescriptionLegacy", "(", "this", ",", "f", ")", ";", "volumes", ".", "add", "(", "new", "StorageDirectoryParcelable", "(", "file", ",", "name", ",", "icon", ")", ")", ";", "}", "return", "volumes", ";", "}", "</s>"]
["<s>", "public", "ExplorerDatabase", "getExplorerDatabase", "(", ")", "{", "return", "explorerDatabase", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "{", "if", "(", "ss", "!", "=", "null", ")", "ss", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "{", "if", "(", "cs", "!", "=", "null", ")", "cs", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "resumeDecryptOperations", "(", ")", "{", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "JELLY_BEAN_MR2", ")", "{", "(", "getActivity", "(", ")", ")", ".", "registerReceiver", "(", "decryptReceiver", ",", "new", "IntentFilter", "(", "EncryptDecryptUtils", ".", "DECRYPT_BROADCAST", ")", ")", ";", "if", "(", "!", "isEncryptOpen", "&", "&", "!", "Utils", ".", "isNullOrEmpty", "(", "encryptBaseFiles", ")", ")", "{", "new", "DeleteTask", "(", "getActivity", "(", ")", ")", ".", "execute", "(", "encryptBaseFiles", ")", ";", "encryptBaseFiles", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "boolean", "isNullOrEmpty", "(", "final", "Collection", "<", "?", ">", "list", ")", "{", "return", "list", "=", "=", "null", "|", "|", "list", ".", "size", "(", ")", "=", "=", "0", ";", "}", "</s>"]
["<s>", "private", "boolean", "isMoveOperationValid", "(", "HybridFileParcelable", "sourceFile", ",", "HybridFile", "targetFile", ")", "{", "return", "!", "Operations", ".", "isCopyLoopPossible", "(", "sourceFile", ",", "targetFile", ")", "&", "&", "sourceFile", ".", "exists", "(", "context", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "flushAppConfigHandlerThread", "(", ")", "{", "try", "{", "Field", "f", "=", "AppConfig", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "f", ".", "setAccessible", "(", "true", ")", ";", "Handler", "h", "=", "(", "Handler", ")", "f", ".", "get", "(", "null", ")", ";", "Scheduler", "scheduler", "=", "shadowOf", "(", "h", ".", "getLooper", "(", ")", ")", ".", "getScheduler", "(", ")", ";", "scheduler", ".", "advanceToNextPostedRunnable", "(", ")", ";", "}", "catch", "(", "NoSuchFieldException", "|", "IllegalAccessException", "e", ")", "{", "throw", "new", "AssertionError", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "{", "if", "(", "utilitiesDatabase", ".", "isOpen", "(", ")", ")", "utilitiesDatabase", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "public", "UtilitiesDatabase", "getUtilitiesDatabase", "(", ")", "{", "return", "utilitiesDatabase", ";", "}", "</s>"]
["<s>", "public", "void", "refactorDrawerStorages", "(", "boolean", "addTab", ")", "{", "Tab", "tab1", "=", "tabHandler", ".", "findTab", "(", "1", ")", ";", "Tab", "tab2", "=", "tabHandler", ".", "findTab", "(", "<NUM_LIT:2>", ")", ";", "Tab", "[", "]", "tabs", "=", "tabHandler", ".", "getAllTabs", "(", ")", ";", "String", "firstTabPath", "=", "mainActivity", ".", "getDrawer", "(", ")", ".", "getFirstPath", "(", ")", ";", "String", "secondTabPath", "=", "mainActivity", ".", "getDrawer", "(", ")", ".", "getSecondPath", "(", ")", ";", "if", "(", "tabs", "=", "=", "null", "|", "|", "tabs", ".", "length", "<", "1", "|", "|", "tab1", "=", "=", "null", "|", "|", "tab2", "=", "=", "null", ")", "{", "String", "currentFirstTab", "=", "Utils", ".", "isNullOrEmpty", "(", "firstTabPath", ")", "?", "\"", "<STR_LIT:/>", "\"", ":", "firstTabPath", ";", "String", "currentSecondTab", "=", "Utils", ".", "isNullOrEmpty", "(", "secondTabPath", ")", "?", "firstTabPath", ":", "secondTabPath", ";", "if", "(", "addTab", ")", "{", "addNewTab", "(", "1", ",", "currentSecondTab", ")", ";", "addNewTab", "(", "<NUM_LIT:2>", ",", "currentFirstTab", ")", ";", "}", "tabHandler", ".", "addTab", "(", "new", "Tab", "(", "1", ",", "currentSecondTab", ",", "currentSecondTab", ")", ")", ";", "tabHandler", ".", "addTab", "(", "new", "Tab", "(", "<NUM_LIT:2>", ",", "currentFirstTab", ",", "currentFirstTab", ")", ")", ";", "if", "(", "currentFirstTab", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", "{", "sharedPrefs", ".", "edit", "(", ")", ".", "putBoolean", "(", "PreferencesConstants", ".", "PREFERENCE_ROOTMODE", ",", "true", ")", ".", "apply", "(", ")", ";", "}", "}", "else", "{", "if", "(", "path", "!", "=", "null", "&", "&", "path", ".", "length", "(", ")", "!", "=", "0", ")", "{", "if", "(", "MainActivity", ".", "currentTab", "=", "=", "0", ")", "{", "addTab", "(", "tab1", ",", "path", ")", ";", "addTab", "(", "tab2", ",", "\"", "\"", ")", ";", "}", "if", "(", "MainActivity", ".", "currentTab", "=", "=", "1", ")", "{", "addTab", "(", "tab1", ",", "\"", "\"", ")", ";", "addTab", "(", "tab2", ",", "path", ")", ";", "}", "}", "else", "{", "addTab", "(", "tab1", ",", "\"", "\"", ")", ";", "addTab", "(", "tab2", ",", "\"", "\"", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "boolean", "isNullOrEmpty", "(", "final", "String", "string", ")", "{", "return", "string", "=", "=", "null", "|", "|", "string", ".", "length", "(", ")", "=", "=", "0", ";", "}", "</s>"]
["<s>", "public", "void", "clearFabActionItems", "(", ")", "{", "floatingActionButton", ".", "removeActionItemById", "(", "R", ".", "id", ".", "menu_new_folder", ")", ";", "floatingActionButton", ".", "removeActionItemById", "(", "R", ".", "id", ".", "menu_new_file", ")", ";", "floatingActionButton", ".", "removeActionItemById", "(", "R", ".", "id", ".", "menu_new_cloud", ")", ";", "}", "</s>"]
["<s>", "public", "void", "invalidatePasteSnackbar", "(", "boolean", "showSnackbar", ")", "{", "if", "(", "pasteHelper", "!", "=", "null", ")", "{", "pasteHelper", ".", "invalidateSnackbar", "(", "this", ",", "showSnackbar", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "initializeFabActionViews", "(", ")", "{", "initFabTitle", "(", "R", ".", "id", ".", "menu_new_cloud", ",", "R", ".", "string", ".", "cloud_connection", ",", "R", ".", "drawable", ".", "ic_cloud_white_24dp", ")", ";", "initFabTitle", "(", "R", ".", "id", ".", "menu_new_file", ",", "R", ".", "string", ".", "file", ",", "R", ".", "drawable", ".", "ic_insert_drive_file_white_48dp", ")", ";", "initFabTitle", "(", "R", ".", "id", ".", "menu_new_folder", ",", "R", ".", "string", ".", "folder", ",", "R", ".", "drawable", ".", "folder_fab", ")", ";", "floatingActionButton", ".", "setOnActionSelectedListener", "(", "new", "FabActionListener", "(", "this", ")", ")", ";", "}", "</s>"]
["<s>", "public", "int", "getOperation", "(", ")", "{", "return", "this", ".", "operation", ";", "}", "</s>"]
["<s>", "public", "HybridFileParcelable", "[", "]", "getPaths", "(", ")", "{", "return", "paths", ";", "}", "</s>"]
["<s>", "public", "void", "invalidateSnackbar", "(", "MainActivity", "mainActivity", ",", "boolean", "showSnackbar", ")", "{", "this", ".", "mainActivity", "=", "mainActivity", ";", "if", "(", "showSnackbar", ")", "{", "if", "(", "snackbar", "=", "=", "null", ")", "{", "showSnackbar", "(", ")", ";", "}", "else", "{", "snackbar", ".", "show", "(", ")", ";", "}", "Utils", ".", "invalidateFab", "(", "mainActivity", ",", "(", ")", "-", ">", "dismissSnackbar", "(", "true", ")", ",", "true", ")", ";", "}", "else", "{", "dismissSnackbar", "(", "false", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "dismissSnackbar", "(", "boolean", "shouldClearPasteData", ")", "{", "if", "(", "snackbar", "!", "=", "null", ")", "{", "snackbar", ".", "dismiss", "(", ")", ";", "}", "if", "(", "shouldClearPasteData", ")", "{", "mainActivity", ".", "setPaste", "(", "null", ")", ";", "}", "Utils", ".", "invalidateFab", "(", "mainActivity", ",", "null", ",", "false", ")", ";", "}", "</s>"]
["<s>", "private", "void", "showSnackbar", "(", ")", "{", "snackbar", "=", "Snackbar", ".", "make", "(", "mainActivity", ".", "findViewById", "(", "R", ".", "id", ".", "content_frame", ")", ",", "getSnackbarContent", "(", ")", ",", "BaseTransientBottomBar", ".", "LENGTH_INDEFINITE", ")", ".", "setAction", "(", "R", ".", "string", ".", "paste", ",", "v", "-", ">", "{", "String", "path", "=", "mainActivity", ".", "getCurrentMainFragment", "(", ")", ".", "getCurrentPath", "(", ")", ";", "ArrayList", "<", "HybridFileParcelable", ">", "arrayList", "=", "new", "ArrayList", "<", ">", "(", "Arrays", ".", "asList", "(", "paths", ")", ")", ";", "boolean", "move", "=", "operation", "=", "=", "PasteHelper", ".", "OPERATION_CUT", ";", "new", "PrepareCopyTask", "(", "mainActivity", ".", "getCurrentMainFragment", "(", ")", ",", "path", ",", "move", ",", "mainActivity", ",", "mainActivity", ".", "isRootExplorer", "(", ")", ")", ".", "executeOnExecutor", "(", "AsyncTask", ".", "THREAD_POOL_EXECUTOR", ",", "arrayList", ")", ";", "dismissSnackbar", "(", "true", ")", ";", "}", ")", ";", "snackbar", ".", "show", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Spanned", "getSnackbarContent", "(", ")", "{", "String", "operationText", "=", "\"", "<STR_LIT>", "\"", ";", "operationText", "=", "String", ".", "format", "(", "operationText", ",", "operation", "=", "=", "OPERATION_COPY", "?", "mainActivity", ".", "getString", "(", "R", ".", "string", ".", "copy", ")", ":", "mainActivity", ".", "getString", "(", "R", ".", "string", ".", "move", ")", ")", ";", "operationText", "=", "operationText", ".", "concat", "(", "\"", "<STR_LIT>", "\"", ")", ";", "int", "foldersCount", "=", "0", ",", "filesCount", "=", "0", ";", "for", "(", "HybridFileParcelable", "fileParcelable", ":", "paths", ")", "{", "if", "(", "fileParcelable", ".", "isDirectory", "(", "mainActivity", ".", "getApplicationContext", "(", ")", ")", ")", "{", "foldersCount", "+", "+", ";", "}", "else", "{", "filesCount", "+", "+", ";", "}", "}", "operationText", "=", "operationText", ".", "concat", "(", "mainActivity", ".", "getString", "(", "R", ".", "string", ".", "folderfilecount", ",", "foldersCount", ",", "filesCount", ")", ")", ";", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "N", ")", "{", "return", "Html", ".", "fromHtml", "(", "operationText", ",", "Html", ".", "FROM_HTML_MODE_COMPACT", ")", ";", "}", "else", "{", "return", "Html", ".", "fromHtml", "(", "operationText", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "void", "invalidateFab", "(", "MainActivity", "mainActivity", ",", "@", "Nullable", "Runnable", "callback", ",", "boolean", "open", ")", "{", "if", "(", "open", ")", "{", "mainActivity", ".", "clearFabActionItems", "(", ")", ";", "mainActivity", ".", "getFAB", "(", ")", ".", "getMainFab", "(", ")", ".", "setImageResource", "(", "R", ".", "drawable", ".", "ic_close_white_24dp", ")", ";", "mainActivity", ".", "getFAB", "(", ")", ".", "setOnChangeListener", "(", "new", "SpeedDialView", ".", "OnChangeListener", "(", ")", "{", "@", "Override", "public", "boolean", "onMainActionSelected", "(", ")", "{", "if", "(", "callback", "!", "=", "null", ")", "{", "callback", ".", "run", "(", ")", ";", "}", "return", "false", ";", "}", "@", "Override", "public", "void", "onToggleChanged", "(", "boolean", "isOpen", ")", "{", "}", "}", ")", ";", "mainActivity", ".", "getFAB", "(", ")", ".", "setVisibility", "(", "View", ".", "VISIBLE", ")", ";", "}", "else", "{", "UiUtils", ".", "rotateBackward", "(", "mainActivity", ".", "getFAB", "(", ")", ".", "getMainFab", "(", ")", ",", "true", ")", ";", "mainActivity", ".", "getFAB", "(", ")", ".", "getMainFab", "(", ")", ".", "setImageResource", "(", "R", ".", "drawable", ".", "ic_add_white_24dp", ")", ";", "mainActivity", ".", "initializeFabActionViews", "(", ")", ";", "mainActivity", ".", "getFAB", "(", ")", ".", "setOnChangeListener", "(", "null", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "promptUserToEnableWireless", "(", "@", "Nullable", "NetworkInfo", "ni", ")", "{", "if", "(", "ni", "=", "=", "null", "|", "|", "!", "ni", ".", "isConnected", "(", ")", ")", "{", "showSnackbar", "(", "R", ".", "string", ".", "ftp_server_prompt_connect_to_network", ",", "new", "Intent", "(", "ACTION_WIFI_SETTINGS", ")", ")", ";", "}", "else", "{", "if", "(", "ni", ".", "getType", "(", ")", "=", "=", "ConnectivityManager", ".", "TYPE_MOBILE", ")", "{", "showSnackbar", "(", "R", ".", "string", ".", "ftp_server_prompt_open_ap", ",", "new", "Intent", "(", "Settings", ".", "ACTION_WIRELESS_SETTINGS", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "private", "void", "showSnackbar", "(", "@", "StringRes", "int", "message", ",", "@", "NonNull", "Intent", "networkSettingIntent", ")", "{", "snackbar", "=", "Snackbar", ".", "make", "(", "getActivity", "(", ")", ".", "findViewById", "(", "android", ".", "R", ".", "id", ".", "content", ")", ",", "message", ",", "BaseTransientBottomBar", ".", "LENGTH_INDEFINITE", ")", ".", "setAction", "(", "R", ".", "string", ".", "ftp_server_open_settings", ",", "v", "-", ">", "{", "startActivity", "(", "networkSettingIntent", ")", ";", "}", ")", ";", "snackbar", ".", "show", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "dismissSnackbar", "(", ")", "{", "if", "(", "snackbar", "!", "=", "null", ")", "{", "snackbar", ".", "dismiss", "(", ")", ";", "snackbar", "=", "null", ";", "}", "}", "</s>"]
["<s>", "public", "static", "Snackbar", "showThemedSnackbar", "(", "MainActivity", "mainActivity", ",", "CharSequence", "text", ",", "int", "length", ",", "int", "actionTextId", ",", "Runnable", "actionCallback", ")", "{", "Snackbar", "snackbar", "=", "Snackbar", ".", "make", "(", "mainActivity", ".", "findViewById", "(", "R", ".", "id", ".", "content_frame", ")", ",", "text", ",", "length", ")", ".", "setAction", "(", "actionTextId", ",", "v", "-", ">", "actionCallback", ".", "run", "(", ")", ")", ";", "if", "(", "mainActivity", ".", "getAppTheme", "(", ")", ".", "equals", "(", "AppTheme", ".", "LIGHT", ")", ")", "{", "snackbar", ".", "getView", "(", ")", ".", "setBackgroundColor", "(", "mainActivity", ".", "getResources", "(", ")", ".", "getColor", "(", "android", ".", "R", ".", "color", ".", "white", ")", ")", ";", "snackbar", ".", "setTextColor", "(", "mainActivity", ".", "getResources", "(", ")", ".", "getColor", "(", "android", ".", "R", ".", "color", ".", "black", ")", ")", ";", "}", "snackbar", ".", "show", "(", ")", ";", "return", "snackbar", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "Future", "<", "T", ">", "execute", "(", "Callable", "<", "T", ">", "callable", ")", "{", "return", "executorService", ".", "submit", "(", "callable", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "initializeInternalStorage", "(", ")", "{", "Parcel", "parcel", "=", "Parcel", ".", "obtain", "(", ")", ";", "File", "dir", "=", "Environment", ".", "getExternalStorageDirectory", "(", ")", ";", "parcel", ".", "writeString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", "<", "P", ")", "parcel", ".", "writeInt", "(", "0", ")", ";", "parcel", ".", "writeString", "(", "dir", ".", "getAbsolutePath", "(", ")", ")", ";", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "P", ")", "parcel", ".", "writeString", "(", "dir", ".", "getAbsolutePath", "(", ")", ")", ";", "parcel", ".", "writeString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parcel", ".", "writeInt", "(", "1", ")", ";", "parcel", ".", "writeInt", "(", "0", ")", ";", "parcel", ".", "writeInt", "(", "1", ")", ";", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", "<", "P", ")", "parcel", ".", "writeLong", "(", "<NUM_LIT>", "*", "<NUM_LIT>", ")", ";", "parcel", ".", "writeInt", "(", "0", ")", ";", "parcel", ".", "writeLong", "(", "<NUM_LIT>", "*", "<NUM_LIT>", ")", ";", "parcel", ".", "writeParcelable", "(", "UserHandle", ".", "getUserHandleForUid", "(", "0", ")", ",", "0", ")", ";", "parcel", ".", "writeString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parcel", ".", "writeString", "(", "Environment", ".", "MEDIA_MOUNTED", ")", ";", "addVolumeToStorageManager", "(", "parcel", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "initializeExternalStorage", "(", ")", "{", "Parcel", "parcel", "=", "Parcel", ".", "obtain", "(", ")", ";", "File", "dir", "=", "Environment", ".", "getExternalStoragePublicDirectory", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parcel", ".", "writeString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", "<", "P", ")", "parcel", ".", "writeInt", "(", "0", ")", ";", "parcel", ".", "writeString", "(", "dir", ".", "getAbsolutePath", "(", ")", ")", ";", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "P", ")", "parcel", ".", "writeString", "(", "dir", ".", "getAbsolutePath", "(", ")", ")", ";", "parcel", ".", "writeString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parcel", ".", "writeInt", "(", "0", ")", ";", "parcel", ".", "writeInt", "(", "1", ")", ";", "parcel", ".", "writeInt", "(", "0", ")", ";", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", "<", "P", ")", "parcel", ".", "writeLong", "(", "<NUM_LIT>", "*", "<NUM_LIT>", ")", ";", "parcel", ".", "writeInt", "(", "0", ")", ";", "parcel", ".", "writeLong", "(", "<NUM_LIT>", "*", "<NUM_LIT>", ")", ";", "parcel", ".", "writeParcelable", "(", "UserHandle", ".", "getUserHandleForUid", "(", "0", ")", ",", "0", ")", ";", "parcel", ".", "writeString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parcel", ".", "writeString", "(", "Environment", ".", "MEDIA_MOUNTED", ")", ";", "addVolumeToStorageManager", "(", "parcel", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "addVolumeToStorageManager", "(", "@", "NonNull", "Parcel", "parcel", ")", "{", "parcel", ".", "setDataPosition", "(", "0", ")", ";", "ShadowStorageManager", "storageManager", "=", "shadowOf", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ".", "getSystemService", "(", "StorageManager", ".", "class", ")", ")", ";", "StorageVolume", "volume", "=", "StorageVolume", ".", "CREATOR", ".", "createFromParcel", "(", "parcel", ")", ";", "storageManager", ".", "addStorageVolume", "(", "volume", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "N", ")", "TestUtils", ".", "initializeInternalStorage", "(", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "{", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "N", ")", "shadowOf", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ".", "getSystemService", "(", "StorageManager", ".", "class", ")", ")", ".", "resetStorageVolumeList", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSetColorizeIcons", "(", ")", "{", "doTest", "(", "R", ".", "color", ".", "video_item", ",", "Icons", ".", "VIDEO", ")", ";", "doTest", "(", "R", ".", "color", ".", "audio_item", ",", "Icons", ".", "AUDIO", ")", ";", "doTest", "(", "R", ".", "color", ".", "pdf_item", ",", "Icons", ".", "PDF", ")", ";", "doTest", "(", "R", ".", "color", ".", "code_item", ",", "Icons", ".", "CODE", ")", ";", "doTest", "(", "R", ".", "color", ".", "text_item", ",", "Icons", ".", "TEXT", ")", ";", "doTest", "(", "R", ".", "color", ".", "archive_item", ",", "Icons", ".", "COMPRESSED", ")", ";", "doTest", "(", "R", ".", "color", ".", "apk_item", ",", "Icons", ".", "APK", ")", ";", "doTest", "(", "R", ".", "color", ".", "generic_item", ",", "Icons", ".", "NOT_KNOWN", ")", ";", "assertNotNull", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSetColorizeIconsGeneric", "(", ")", "{", "doTestGeneric", "(", "R", ".", "color", ".", "primary_indigo", ",", "Icons", ".", "CERTIFICATE", ")", ";", "doTestGeneric", "(", "R", ".", "color", ".", "primary_indigo", ",", "Icons", ".", "CONTACT", ")", ";", "doTestGeneric", "(", "R", ".", "color", ".", "primary_indigo", ",", "Icons", ".", "EVENTS", ")", ";", "doTestGeneric", "(", "R", ".", "color", ".", "primary_indigo", ",", "Icons", ".", "FONT", ")", ";", "doTestGeneric", "(", "R", ".", "color", ".", "primary_indigo", ",", "Icons", ".", "PRESENTATION", ")", ";", "doTestGeneric", "(", "R", ".", "color", ".", "primary_indigo", ",", "Icons", ".", "SPREADSHEETS", ")", ";", "doTestGeneric", "(", "R", ".", "color", ".", "primary_indigo", ",", "Icons", ".", "DOCUMENTS", ")", ";", "doTestGeneric", "(", "R", ".", "color", ".", "primary_indigo", ",", "Icons", ".", "ENCRYPTED", ")", ";", "doTestGeneric", "(", "R", ".", "color", ".", "primary_indigo", ",", "Icons", ".", "GIF", ")", ";", "assertNotNull", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "void", "doTest", "(", "@", "ColorInt", "int", "expected", ",", "int", "icon", ")", "{", "GradientDrawable", "drawable", "=", "new", "GradientDrawable", "(", ")", ";", "ColorUtils", ".", "colorizeIcons", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "icon", ",", "drawable", ",", "R", ".", "color", ".", "primary_indigo", ")", ";", "doCompare", "(", "ColorStateList", ".", "valueOf", "(", "Utils", ".", "getColor", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "expected", ")", ")", ",", "drawable", ")", ";", "drawable", "=", "null", ";", "}", "</s>"]
["<s>", "private", "void", "doTestGeneric", "(", "@", "ColorInt", "int", "expected", ",", "int", "icon", ")", "{", "GradientDrawable", "drawable", "=", "new", "GradientDrawable", "(", ")", ";", "ColorUtils", ".", "colorizeIcons", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "icon", ",", "drawable", ",", "R", ".", "color", ".", "primary_indigo", ")", ";", "doCompare", "(", "ColorStateList", ".", "valueOf", "(", "expected", ")", ",", "drawable", ")", ";", "drawable", "=", "null", ";", "}", "</s>"]
["<s>", "private", "void", "doCompare", "(", "ColorStateList", "expected", ",", "GradientDrawable", "drawable", ")", "{", "assertEquals", "(", "expected", ",", "drawable", ".", "getColor", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testIsCloudProviderAvailable", "(", ")", "{", "assertFalse", "(", "CloudSheetFragment", ".", "isCloudProviderAvailable", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ")", ")", ";", "PackageInfo", "pi", "=", "new", "PackageInfo", "(", ")", ";", "pi", ".", "packageName", "=", "CloudContract", ".", "APP_PACKAGE_NAME", ";", "shadowOf", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ".", "getPackageManager", "(", ")", ")", ".", "installPackage", "(", "pi", ")", ";", "assertTrue", "(", "CloudSheetFragment", ".", "isCloudProviderAvailable", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "context", "=", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ";", "notificationManager", "=", "(", "NotificationManager", ")", "context", ".", "getSystemService", "(", "Context", ".", "NOTIFICATION_SERVICE", ")", ";", "shadowNotificationManager", "=", "shadowOf", "(", "notificationManager", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "{", "notificationManager", ".", "cancelAll", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "testSetMetadataIllegalType", "(", ")", "{", "NotificationCompat", ".", "Builder", "builder", "=", "new", "NotificationCompat", ".", "Builder", "(", "context", ",", "CHANNEL_NORMAL_ID", ")", ";", "NotificationConstants", ".", "setMetadata", "(", "context", ",", "builder", ",", "-", "1", ")", ";", "NotificationConstants", ".", "setMetadata", "(", "context", ",", "builder", ",", "<NUM_LIT:2>", ")", ";", "NotificationConstants", ".", "setMetadata", "(", "context", ",", "builder", ",", "Integer", ".", "MAX_VALUE", ")", ";", "builder", "=", "new", "NotificationCompat", ".", "Builder", "(", "context", ",", "CHANNEL_FTP_ID", ")", ";", "NotificationConstants", ".", "setMetadata", "(", "context", ",", "builder", ",", "-", "1", ")", ";", "NotificationConstants", ".", "setMetadata", "(", "context", ",", "builder", ",", "<NUM_LIT:2>", ")", ";", "NotificationConstants", ".", "setMetadata", "(", "context", ",", "builder", ",", "Integer", ".", "MAX_VALUE", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "Config", "(", "maxSdk", "=", "N", ")", "public", "void", "testNormalNotification", "(", ")", "{", "NotificationCompat", ".", "Builder", "builder", "=", "new", "NotificationCompat", ".", "Builder", "(", "context", ",", "CHANNEL_NORMAL_ID", ")", ".", "setContentTitle", "(", "context", ".", "getString", "(", "R", ".", "string", ".", "waiting_title", ")", ")", ".", "setContentText", "(", "context", ".", "getString", "(", "R", ".", "string", ".", "waiting_content", ")", ")", ".", "setAutoCancel", "(", "false", ")", ".", "setSmallIcon", "(", "R", ".", "drawable", ".", "ic_all_inclusive_white_36dp", ")", ".", "setProgress", "(", "0", ",", "0", ",", "true", ")", ";", "NotificationConstants", ".", "setMetadata", "(", "context", ",", "builder", ",", "TYPE_NORMAL", ")", ";", "Notification", "result", "=", "builder", ".", "build", "(", ")", ";", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "LOLLIPOP", ")", "{", "assertEquals", "(", "Notification", ".", "CATEGORY_SERVICE", ",", "result", ".", "category", ")", ";", "}", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "JELLY_BEAN", ")", "{", "assertEquals", "(", "Notification", ".", "PRIORITY_MIN", ",", "result", ".", "priority", ")", ";", "}", "else", "{", "assertEquals", "(", "Notification", ".", "PRIORITY_DEFAULT", ",", "result", ".", "priority", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "@", "Config", "(", "maxSdk", "=", "N", ")", "public", "void", "testFtpNotification", "(", ")", "{", "NotificationCompat", ".", "Builder", "builder", "=", "new", "NotificationCompat", ".", "Builder", "(", "context", ",", "CHANNEL_FTP_ID", ")", ".", "setContentTitle", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setContentText", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setSmallIcon", "(", "R", ".", "drawable", ".", "ic_ftp_light", ")", ".", "setTicker", "(", "context", ".", "getString", "(", "R", ".", "string", ".", "ftp_notif_starting", ")", ")", ".", "setOngoing", "(", "true", ")", ".", "setOnlyAlertOnce", "(", "true", ")", ";", "NotificationConstants", ".", "setMetadata", "(", "context", ",", "builder", ",", "TYPE_FTP", ")", ";", "Notification", "result", "=", "builder", ".", "build", "(", ")", ";", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "LOLLIPOP", ")", "{", "assertEquals", "(", "Notification", ".", "CATEGORY_SERVICE", ",", "result", ".", "category", ")", ";", "assertEquals", "(", "Notification", ".", "VISIBILITY_PUBLIC", ",", "result", ".", "visibility", ")", ";", "}", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", ">", "=", "Build", ".", "VERSION_CODES", ".", "JELLY_BEAN", ")", "{", "assertEquals", "(", "Notification", ".", "PRIORITY_MAX", ",", "result", ".", "priority", ")", ";", "}", "else", "{", "assertEquals", "(", "Notification", ".", "PRIORITY_DEFAULT", ",", "result", ".", "priority", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "@", "Config", "(", "minSdk", "=", "O", ")", "public", "void", "testCreateNormalChannel", "(", ")", "{", "NotificationCompat", ".", "Builder", "builder", "=", "new", "NotificationCompat", ".", "Builder", "(", "context", ",", "CHANNEL_NORMAL_ID", ")", ";", "NotificationConstants", ".", "setMetadata", "(", "context", ",", "builder", ",", "TYPE_NORMAL", ")", ";", "List", "<", "Object", ">", "channels", "=", "shadowNotificationManager", ".", "getNotificationChannels", "(", ")", ";", "assertNotNull", "(", "channels", ")", ";", "assertEquals", "(", "1", ",", "channels", ".", "size", "(", ")", ")", ";", "NotificationChannel", "channel", "=", "(", "NotificationChannel", ")", "channels", ".", "get", "(", "0", ")", ";", "assertEquals", "(", "IMPORTANCE_MIN", ",", "channel", ".", "getImportance", "(", ")", ")", ";", "assertEquals", "(", "CHANNEL_NORMAL_ID", ",", "channel", ".", "getId", "(", ")", ")", ";", "assertEquals", "(", "context", ".", "getString", "(", "R", ".", "string", ".", "channel_name_normal", ")", ",", "channel", ".", "getName", "(", ")", ")", ";", "assertEquals", "(", "context", ".", "getString", "(", "R", ".", "string", ".", "channel_description_normal", ")", ",", "channel", ".", "getDescription", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "Config", "(", "minSdk", "=", "O", ")", "public", "void", "testCreateFtpChannel", "(", ")", "{", "NotificationCompat", ".", "Builder", "builder", "=", "new", "NotificationCompat", ".", "Builder", "(", "context", ",", "CHANNEL_FTP_ID", ")", ";", "NotificationConstants", ".", "setMetadata", "(", "context", ",", "builder", ",", "TYPE_FTP", ")", ";", "List", "<", "Object", ">", "channels", "=", "shadowNotificationManager", ".", "getNotificationChannels", "(", ")", ";", "assertNotNull", "(", "channels", ")", ";", "assertEquals", "(", "1", ",", "channels", ".", "size", "(", ")", ")", ";", "NotificationChannel", "channel", "=", "(", "NotificationChannel", ")", "channels", ".", "get", "(", "0", ")", ";", "assertEquals", "(", "IMPORTANCE_HIGH", ",", "channel", ".", "getImportance", "(", ")", ")", ";", "assertEquals", "(", "CHANNEL_FTP_ID", ",", "channel", ".", "getId", "(", ")", ")", ";", "assertEquals", "(", "context", ".", "getString", "(", "R", ".", "string", ".", "channel_name_ftp", ")", ",", "channel", ".", "getName", "(", ")", ")", ";", "assertEquals", "(", "context", ".", "getString", "(", "R", ".", "string", ".", "channel_description_ftp", ")", ",", "channel", ".", "getDescription", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetFastOutSlowInInterpolator", "(", ")", "throws", "NoSuchFieldException", ",", "IllegalAccessException", "{", "Field", "f", "=", "AnimUtils", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "f", ".", "setAccessible", "(", "true", ")", ";", "assertNull", "(", "f", ".", "get", "(", "null", ")", ")", ";", "Interpolator", "result", "=", "AnimUtils", ".", "getFastOutSlowInInterpolator", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ")", ";", "assertNotNull", "(", "result", ")", ";", "assertNotNull", "(", "f", ".", "get", "(", "null", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testMarqueeAfterDelay", "(", ")", "{", "ThemedTextView", "mock", "=", "mock", "(", "ThemedTextView", ".", "class", ")", ";", "doCallRealMethod", "(", ")", ".", "when", "(", "mock", ")", ".", "setSelected", "(", "anyBoolean", "(", ")", ")", ";", "doCallRealMethod", "(", ")", ".", "when", "(", "mock", ")", ".", "isSelected", "(", ")", ";", "mock", ".", "setSelected", "(", "false", ")", ";", "AnimUtils", ".", "marqueeAfterDelay", "(", "<NUM_LIT>", ",", "mock", ")", ";", "shadowOf", "(", "Looper", ".", "myLooper", "(", ")", ")", ".", "getScheduler", "(", ")", ".", "advanceToLastPostedRunnable", "(", ")", ";", "assertTrue", "(", "mock", ".", "isSelected", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetOpenMode", "(", ")", "{", "assertEquals", "(", "UNKNOWN", ",", "OpenMode", ".", "getOpenMode", "(", "0", ")", ")", ";", "assertEquals", "(", "FILE", ",", "OpenMode", ".", "getOpenMode", "(", "1", ")", ")", ";", "assertEquals", "(", "SMB", ",", "OpenMode", ".", "getOpenMode", "(", "<NUM_LIT:2>", ")", ")", ";", "assertEquals", "(", "SFTP", ",", "OpenMode", ".", "getOpenMode", "(", "<NUM_LIT:3>", ")", ")", ";", "assertEquals", "(", "CUSTOM", ",", "OpenMode", ".", "getOpenMode", "(", "<NUM_LIT:4>", ")", ")", ";", "assertEquals", "(", "ROOT", ",", "OpenMode", ".", "getOpenMode", "(", "<NUM_LIT:5>", ")", ")", ";", "assertEquals", "(", "OTG", ",", "OpenMode", ".", "getOpenMode", "(", "<NUM_LIT:6>", ")", ")", ";", "assertEquals", "(", "GDRIVE", ",", "OpenMode", ".", "getOpenMode", "(", "<NUM_LIT:7>", ")", ")", ";", "assertEquals", "(", "DROPBOX", ",", "OpenMode", ".", "getOpenMode", "(", "<NUM_LIT:8>", ")", ")", ";", "assertEquals", "(", "BOX", ",", "OpenMode", ".", "getOpenMode", "(", "<NUM_LIT:9>", ")", ")", ";", "assertEquals", "(", "ONEDRIVE", ",", "OpenMode", ".", "getOpenMode", "(", "<NUM_LIT:10>", ")", ")", ";", "assertThrows", "(", "ArrayIndexOutOfBoundsException", ".", "class", ",", "(", ")", "-", ">", "OpenMode", ".", "getOpenMode", "(", "-", "1", ")", ")", ";", "assertThrows", "(", "ArrayIndexOutOfBoundsException", ".", "class", ",", "(", ")", "-", ">", "OpenMode", ".", "getOpenMode", "(", "MAX_VALUE", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEncryptDecrypt", "(", ")", "throws", "GeneralSecurityException", ",", "IOException", "{", "String", "path", "=", "\"", "<STR_LIT>", "\"", ";", "String", "encrypted", "=", "SmbUtil", ".", "getSmbEncryptedPath", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "path", ")", ";", "assertNotEquals", "(", "path", ",", "encrypted", ")", ";", "assertTrue", "(", "encrypted", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertTrue", "(", "encrypted", ".", "endsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "decrypted", "=", "SmbUtil", ".", "getSmbDecryptedPath", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "encrypted", ")", ";", "assertEquals", "(", "path", ",", "decrypted", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEncryptWithoutCredentials", "(", ")", "throws", "GeneralSecurityException", ",", "IOException", "{", "String", "path", "=", "\"", "<STR_LIT>", "\"", ";", "assertEquals", "(", "path", ",", "SmbUtil", ".", "getSmbEncryptedPath", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "path", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "Ignore", "(", "\"", "<STR_LIT>", "\"", ")", "public", "void", "testEncryptWithoutPassword", "(", ")", "throws", "GeneralSecurityException", ",", "IOException", "{", "String", "path", "=", "\"", "<STR_LIT>", "\"", ";", "assertEquals", "(", "path", ",", "SmbUtil", ".", "getSmbEncryptedPath", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "path", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "prefs", "=", "PreferenceManager", ".", "getDefaultSharedPreferences", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSaveLoadBooleanArray", "(", ")", "{", "Boolean", "[", "]", "value", "=", "new", "Boolean", "[", "]", "{", "true", ",", "false", ",", "true", ",", "false", ",", "true", ",", "true", ",", "false", "}", ";", "TinyDB", ".", "putBooleanArray", "(", "prefs", ",", "\"", "<STR_LIT>", "\"", ",", "value", ")", ";", "Boolean", "[", "]", "result", "=", "TinyDB", ".", "getBooleanArray", "(", "prefs", ",", "\"", "<STR_LIT>", "\"", ",", "new", "Boolean", "[", "]", "{", "false", ",", "false", ",", "false", ",", "false", ",", "false", ",", "false", ",", "false", "}", ")", ";", "assertArrayEquals", "(", "value", ",", "result", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLoadBooleanArrayShouldReturnDefaultValue", "(", ")", "{", "Boolean", "[", "]", "expected", "=", "TinyDB", ".", "getBooleanArray", "(", "prefs", ",", "\"", "<STR_LIT>", "\"", ",", "new", "Boolean", "[", "]", "{", "true", ",", "false", ",", "true", ",", "false", ",", "false", ",", "false", "}", ")", ";", "Boolean", "[", "]", "result", "=", "TinyDB", ".", "getBooleanArray", "(", "prefs", ",", "\"", "<STR_LIT>", "\"", ",", "expected", ")", ";", "assertArrayEquals", "(", "expected", ",", "result", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLoadBooleanArrayShouldReturnDefaultValue2", "(", ")", "{", "assertNull", "(", "TinyDB", ".", "getBooleanArray", "(", "prefs", ",", "\"", "<STR_LIT>", "\"", ",", "null", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDifferenceStrings", "(", ")", "{", "assertNull", "(", "Utils", ".", "differenceStrings", "(", "null", ",", "null", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Utils", ".", "differenceStrings", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Utils", ".", "differenceStrings", "(", "null", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "\"", ",", "Utils", ".", "differenceStrings", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "\"", ",", "Utils", ".", "differenceStrings", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Utils", ".", "differenceStrings", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetUriForBaseFile", "(", ")", "{", "HybridFileParcelable", "file", "=", "new", "HybridFileParcelable", "(", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "OpenMode", "m", ":", "new", "OpenMode", "[", "]", "{", "OpenMode", ".", "FILE", ",", "OpenMode", ".", "ROOT", "}", ")", "{", "file", ".", "setMode", "(", "m", ")", ";", "Uri", "uri", "=", "Utils", ".", "getUriForBaseFile", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "file", ")", ";", "if", "(", "Build", ".", "VERSION", ".", "SDK_INT", "<", "N", ")", "{", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ".", "toString", "(", ")", ")", ";", "}", "else", "{", "assertEquals", "(", "\"", "<STR_LIT>", "\"", "+", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ".", "getPackageName", "(", ")", "+", "\"", "<STR_LIT>", "\"", ",", "uri", ".", "toString", "(", ")", ")", ";", "}", "}", "for", "(", "OpenMode", "m", ":", "new", "OpenMode", "[", "]", "{", "OpenMode", ".", "DROPBOX", ",", "OpenMode", ".", "GDRIVE", ",", "OpenMode", ".", "ONEDRIVE", ",", "OpenMode", ".", "SMB", ",", "OpenMode", ".", "BOX", "}", ")", "{", "file", "=", "new", "HybridFileParcelable", "(", "\"", "<STR_LIT>", "\"", ")", ";", "file", ".", "setMode", "(", "m", ")", ";", "assertNull", "(", "Utils", ".", "getUriForBaseFile", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "file", ")", ")", ";", "assertEquals", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "smb_launch_error", ")", ",", "ShadowToast", ".", "getTextOfLatestToast", "(", ")", ")", ";", "}", "file", ".", "setMode", "(", "OpenMode", ".", "CUSTOM", ")", ";", "assertNull", "(", "Utils", ".", "getUriForBaseFile", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "file", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testIsNullOrEmptyCollection", "(", ")", "{", "assertTrue", "(", "Utils", ".", "isNullOrEmpty", "(", "(", "Collection", "<", "Void", ">", ")", "null", ")", ")", ";", "assertTrue", "(", "Utils", ".", "isNullOrEmpty", "(", "Collections", ".", "EMPTY_SET", ")", ")", ";", "assertFalse", "(", "Utils", ".", "isNullOrEmpty", "(", "Collections", ".", "singletonList", "(", "null", ")", ")", ")", ";", "assertFalse", "(", "Utils", ".", "isNullOrEmpty", "(", "Arrays", ".", "asList", "(", "new", "Object", "(", ")", ")", ")", ")", ";", "Collection", "<", "Object", ">", "l", "=", "new", "ArrayList", "<", "Object", ">", "(", ")", ";", "l", ".", "add", "(", "new", "Object", "(", ")", ")", ";", "assertFalse", "(", "Utils", ".", "isNullOrEmpty", "(", "l", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testIsNullOrEmptyString", "(", ")", "{", "assertTrue", "(", "Utils", ".", "isNullOrEmpty", "(", "(", "String", ")", "null", ")", ")", ";", "assertTrue", "(", "Utils", ".", "isNullOrEmpty", "(", "\"", "\"", ")", ")", ";", "assertFalse", "(", "Utils", ".", "isNullOrEmpty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertFalse", "(", "Utils", ".", "isNullOrEmpty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertFalse", "(", "Utils", ".", "isNullOrEmpty", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "Config", "(", "minSdk", "=", "N", ")", "public", "void", "testGetVolumeDirectory", "(", ")", "throws", "Exception", "{", "StorageVolume", "mock", "=", "mock", "(", "StorageVolume", ".", "class", ")", ";", "Field", "f", "=", "StorageVolume", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "f", ".", "setAccessible", "(", "true", ")", ";", "f", ".", "set", "(", "mock", ",", "new", "File", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "File", "result", "=", "Utils", ".", "getVolumeDirectory", "(", "mock", ")", ";", "assertNotNull", "(", "result", ")", ";", "assertEquals", "(", "new", "File", "(", "\"", "<STR_LIT>", "\"", ")", ",", "result", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "webView", "=", "new", "WebView", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "{", "webView", ".", "destroy", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testOnPreExecute", "(", ")", "{", "DbViewerFragment", "mock", "=", "mock", "(", "DbViewerFragment", ".", "class", ")", ";", "TextView", "loadingText", "=", "new", "TextView", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ")", ";", "mock", ".", "loadingText", "=", "loadingText", ";", "mock", ".", "databaseViewerActivity", "=", "mock", "(", "DatabaseViewerActivity", ".", "class", ")", ";", "mock", ".", "loadingText", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "when", "(", "mock", ".", "databaseViewerActivity", ".", "getAppTheme", "(", ")", ")", ".", "thenReturn", "(", "AppTheme", ".", "DARK", ")", ";", "DbViewerTask", "task", "=", "new", "DbViewerTask", "(", "null", ",", "null", ",", "webView", ",", "mock", ")", ";", "task", ".", "onPreExecute", "(", ")", ";", "assertEquals", "(", "VISIBLE", ",", "mock", ".", "loadingText", ".", "getVisibility", "(", ")", ")", ";", "assertTrue", "(", "task", ".", "htmlInit", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "webView", ".", "getSettings", "(", ")", ".", "getDefaultTextEncodingName", "(", ")", ")", ";", "when", "(", "mock", ".", "databaseViewerActivity", ".", "getAppTheme", "(", ")", ")", ".", "thenReturn", "(", "AppTheme", ".", "BLACK", ")", ";", "task", "=", "new", "DbViewerTask", "(", "null", ",", "null", ",", "webView", ",", "mock", ")", ";", "task", ".", "onPreExecute", "(", ")", ";", "assertEquals", "(", "VISIBLE", ",", "mock", ".", "loadingText", ".", "getVisibility", "(", ")", ")", ";", "assertTrue", "(", "task", ".", "htmlInit", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "webView", ".", "getSettings", "(", ")", ".", "getDefaultTextEncodingName", "(", ")", ")", ";", "when", "(", "mock", ".", "databaseViewerActivity", ".", "getAppTheme", "(", ")", ")", ".", "thenReturn", "(", "AppTheme", ".", "LIGHT", ")", ";", "task", "=", "new", "DbViewerTask", "(", "null", ",", "null", ",", "webView", ",", "mock", ")", ";", "task", ".", "onPreExecute", "(", ")", ";", "assertEquals", "(", "VISIBLE", ",", "mock", ".", "loadingText", ".", "getVisibility", "(", ")", ")", ";", "assertTrue", "(", "task", ".", "htmlInit", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "webView", ".", "getSettings", "(", ")", ".", "getDefaultTextEncodingName", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testExecute", "(", ")", "{", "SQLiteDatabase", "sqLiteDatabase", "=", "SQLiteDatabase", ".", "openDatabase", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "SQLiteDatabase", ".", "OPEN_READONLY", ")", ";", "assertNotNull", "(", "sqLiteDatabase", ")", ";", "DbViewerFragment", "mock", "=", "mock", "(", "DbViewerFragment", ".", "class", ")", ";", "TextView", "loadingText", "=", "new", "TextView", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ")", ";", "mock", ".", "loadingText", "=", "loadingText", ";", "Cursor", "schemaCursor", "=", "sqLiteDatabase", ".", "rawQuery", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "Cursor", "contentCursor", "=", "sqLiteDatabase", ".", "rawQuery", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "DbViewerTask", "task", "=", "new", "DbViewerTask", "(", "schemaCursor", ",", "contentCursor", ",", "webView", ",", "mock", ")", ";", "task", ".", "doInBackground", "(", ")", ";", "assertNotNull", "(", "task", ".", "schemaList", ")", ";", "assertNotNull", "(", "task", ".", "contentList", ")", ";", "assertEquals", "(", "<NUM_LIT:3>", ",", "task", ".", "schemaList", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "<NUM_LIT:4>", ",", "task", ".", "contentList", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "loadingText", ".", "getText", "(", ")", ".", "toString", "(", ")", ")", ";", "sqLiteDatabase", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCompleteTask", "(", ")", "{", "SQLiteDatabase", "sqLiteDatabase", "=", "SQLiteDatabase", ".", "openDatabase", "(", "\"", "<STR_LIT>", "\"", ",", "null", ",", "SQLiteDatabase", ".", "OPEN_READONLY", ")", ";", "assertNotNull", "(", "sqLiteDatabase", ")", ";", "DbViewerFragment", "mock", "=", "mock", "(", "DbViewerFragment", ".", "class", ")", ";", "TextView", "loadingText", "=", "new", "TextView", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ")", ";", "mock", ".", "loadingText", "=", "loadingText", ";", "mock", ".", "databaseViewerActivity", "=", "mock", "(", "DatabaseViewerActivity", ".", "class", ")", ";", "mock", ".", "loadingText", ".", "setVisibility", "(", "View", ".", "GONE", ")", ";", "when", "(", "mock", ".", "databaseViewerActivity", ".", "getAppTheme", "(", ")", ")", ".", "thenReturn", "(", "AppTheme", ".", "DARK", ")", ";", "Cursor", "schemaCursor", "=", "sqLiteDatabase", ".", "rawQuery", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "Cursor", "contentCursor", "=", "sqLiteDatabase", ".", "rawQuery", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "DbViewerTask", "task", "=", "new", "DbViewerTask", "(", "schemaCursor", ",", "contentCursor", ",", "webView", ",", "mock", ")", ";", "task", ".", "onPreExecute", "(", ")", ";", "task", ".", "doInBackground", "(", ")", ";", "task", ".", "onPostExecute", "(", "null", ")", ";", "assertNotNull", "(", "task", ".", "stringBuilder", ".", "toString", "(", ")", ")", ";", "Document", "html", "=", "Jsoup", ".", "parse", "(", "task", ".", "stringBuilder", ".", "toString", "(", ")", ")", ";", "assertNotNull", "(", "html", ")", ";", "Elements", "elements", "=", "html", ".", "getElementsByTag", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "1", ",", "elements", ".", "size", "(", ")", ")", ";", "elements", "=", "elements", ".", "get", "(", "0", ")", ".", "getElementsByTag", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT:5>", ",", "elements", ".", "size", "(", ")", ")", ";", "Elements", "headerRow", "=", "elements", ".", "get", "(", "0", ")", ".", "getElementsByTag", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT:3>", ",", "headerRow", ".", "size", "(", ")", ")", ";", "sqLiteDatabase", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testWriteContentUri", "(", ")", "{", "Uri", "uri", "=", "Uri", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Context", "ctx", "=", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ";", "ContentResolver", "cr", "=", "ctx", ".", "getContentResolver", "(", ")", ";", "ByteArrayOutputStream", "bout", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "shadowOf", "(", "cr", ")", ".", "registerOutputStream", "(", "uri", ",", "bout", ")", ";", "WriteFileAbstraction", "task", "=", "new", "WriteFileAbstraction", "(", "ctx", ",", "cr", ",", "new", "EditableFileAbstraction", "(", "ctx", ",", "uri", ")", ",", "contents", ",", "null", ",", "false", ",", "null", ")", ";", "int", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "NORMAL", ",", "result", ")", ";", "assertEquals", "(", "contents", ",", "new", "String", "(", "bout", ".", "toByteArray", "(", ")", ",", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testWriteFileNonRoot", "(", ")", "throws", "IOException", "{", "File", "file", "=", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Uri", "uri", "=", "Uri", ".", "fromFile", "(", "file", ")", ";", "Context", "ctx", "=", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ";", "ContentResolver", "cr", "=", "ctx", ".", "getContentResolver", "(", ")", ";", "WriteFileAbstraction", "task", "=", "new", "WriteFileAbstraction", "(", "ctx", ",", "cr", ",", "new", "EditableFileAbstraction", "(", "ctx", ",", "uri", ")", ",", "contents", ",", "null", ",", "false", ",", "null", ")", ";", "int", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "NORMAL", ",", "result", ")", ";", "String", "verify", "=", "IoUtils", ".", "readFully", "(", "new", "FileInputStream", "(", "file", ")", ")", ";", "assertEquals", "(", "contents", ",", "verify", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testWriteFileOverwriting", "(", ")", "throws", "IOException", "{", "File", "file", "=", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "IoUtils", ".", "copy", "(", "new", "StringReader", "(", "\"", "<STR_LIT>", "\"", ")", ",", "new", "FileWriter", "(", "file", ")", ",", "<NUM_LIT>", ")", ";", "Uri", "uri", "=", "Uri", ".", "fromFile", "(", "file", ")", ";", "Context", "ctx", "=", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ";", "ContentResolver", "cr", "=", "ctx", ".", "getContentResolver", "(", ")", ";", "WriteFileAbstraction", "task", "=", "new", "WriteFileAbstraction", "(", "ctx", ",", "cr", ",", "new", "EditableFileAbstraction", "(", "ctx", ",", "uri", ")", ",", "contents", ",", "null", ",", "false", ",", "null", ")", ";", "int", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "NORMAL", ",", "result", ")", ";", "String", "verify", "=", "IoUtils", ".", "readFully", "(", "new", "FileInputStream", "(", "file", ")", ")", ";", "assertEquals", "(", "contents", ",", "verify", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "Config", "(", "shadows", "=", "{", "BlockAllOutputStreamsFileUtil", ".", "class", ",", "BypassMountPartitionRootUtils", ".", "class", "}", ")", "public", "void", "testWriteFileRoot", "(", ")", "throws", "IOException", "{", "File", "file", "=", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "File", "cacheFile", "=", "File", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "cacheFile", ".", "deleteOnExit", "(", ")", ";", "Uri", "uri", "=", "Uri", ".", "fromFile", "(", "file", ")", ";", "Context", "ctx", "=", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ";", "ContentResolver", "cr", "=", "ctx", ".", "getContentResolver", "(", ")", ";", "WriteFileAbstraction", "task", "=", "new", "WriteFileAbstraction", "(", "ctx", ",", "cr", ",", "new", "EditableFileAbstraction", "(", "ctx", ",", "uri", ")", ",", "contents", ",", "cacheFile", ",", "true", ",", "null", ")", ";", "int", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "NORMAL", ",", "result", ")", ";", "String", "verify", "=", "IoUtils", ".", "readFully", "(", "new", "FileInputStream", "(", "file", ")", ")", ";", "assertEquals", "(", "contents", ",", "verify", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "Config", "(", "shadows", "=", "{", "BlockAllOutputStreamsFileUtil", ".", "class", "}", ")", "public", "void", "testWriteFileRootNoCacheFile", "(", ")", "{", "File", "file", "=", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Uri", "uri", "=", "Uri", ".", "fromFile", "(", "file", ")", ";", "Context", "ctx", "=", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ";", "ContentResolver", "cr", "=", "ctx", ".", "getContentResolver", "(", ")", ";", "WriteFileAbstraction", "task", "=", "new", "WriteFileAbstraction", "(", "ctx", ",", "cr", ",", "new", "EditableFileAbstraction", "(", "ctx", ",", "uri", ")", ",", "contents", ",", "null", ",", "true", ",", "null", ")", ";", "int", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "EXCEPTION_STREAM_NOT_FOUND", ",", "result", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "Config", "(", "shadows", "=", "{", "BlockAllOutputStreamsFileUtil", ".", "class", "}", ")", "public", "void", "testWriteFileRootCacheFileNotFound", "(", ")", "{", "File", "file", "=", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Uri", "uri", "=", "Uri", ".", "fromFile", "(", "file", ")", ";", "File", "cacheFile", "=", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Context", "ctx", "=", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ";", "ContentResolver", "cr", "=", "ctx", ".", "getContentResolver", "(", ")", ";", "WriteFileAbstraction", "task", "=", "new", "WriteFileAbstraction", "(", "ctx", ",", "cr", ",", "new", "EditableFileAbstraction", "(", "ctx", ",", "uri", ")", ",", "contents", ",", "cacheFile", ",", "true", ",", "null", ")", ";", "int", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "EXCEPTION_STREAM_NOT_FOUND", ",", "result", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "Config", "(", "shadows", "=", "{", "ShellNotRunningRootUtils", ".", "class", "}", ")", "public", "void", "testWriteFileRootShellNotRunning", "(", ")", "throws", "IOException", "{", "File", "file", "=", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Uri", "uri", "=", "Uri", ".", "fromFile", "(", "file", ")", ";", "File", "cacheFile", "=", "File", ".", "createTempFile", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "cacheFile", ".", "deleteOnExit", "(", ")", ";", "Context", "ctx", "=", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ";", "ContentResolver", "cr", "=", "ctx", ".", "getContentResolver", "(", ")", ";", "WriteFileAbstraction", "task", "=", "new", "WriteFileAbstraction", "(", "ctx", ",", "cr", ",", "new", "EditableFileAbstraction", "(", "ctx", ",", "uri", ")", ",", "contents", ",", "cacheFile", ",", "true", ",", "null", ")", ";", "int", "result", "=", "task", ".", "doInBackground", "(", ")", ";", "assertEquals", "(", "EXCEPTION_SHELL_NOT_RUNNING", ",", "result", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "testWriteBogeyUri", "(", ")", "{", "Uri", "uri", "=", "Uri", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Context", "ctx", "=", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ";", "ContentResolver", "cr", "=", "ctx", ".", "getContentResolver", "(", ")", ";", "ByteArrayOutputStream", "bout", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "shadowOf", "(", "cr", ")", ".", "registerOutputStream", "(", "uri", ",", "bout", ")", ";", "WriteFileAbstraction", "task", "=", "new", "WriteFileAbstraction", "(", "ctx", ",", "cr", ",", "new", "EditableFileAbstraction", "(", "ctx", ",", "uri", ")", ",", "contents", ",", "null", ",", "false", ",", "null", ")", ";", "task", ".", "doInBackground", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Implementation", "public", "static", "OutputStream", "getOutputStream", "(", "final", "File", "target", ",", "Context", "context", ")", "throws", "FileNotFoundException", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Implementation", "public", "static", "void", "cat", "(", "String", "sourcePath", ",", "String", "destinationPath", ")", "throws", "ShellNotRunningException", "{", "try", "{", "IoUtils", ".", "copy", "(", "new", "FileInputStream", "(", "sourcePath", ")", ",", "new", "FileOutputStream", "(", "destinationPath", ")", ",", "<NUM_LIT>", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "ShellNotRunningException", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Implementation", "public", "static", "void", "cat", "(", "String", "sourcePath", ",", "String", "destinationPath", ")", "throws", "ShellNotRunningException", "{", "throw", "new", "ShellNotRunningException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "testBogeyUri", "(", ")", "{", "new", "EditableFileAbstraction", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "Uri", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testContentUri", "(", ")", "{", "Uri", "uri", "=", "Uri", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "displayName", "=", "\"", "<STR_LIT>", "\"", ";", "ContentResolver", "cr", "=", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ".", "getContentResolver", "(", ")", ";", "ContentValues", "content", "=", "new", "ContentValues", "(", ")", ";", "content", ".", "put", "(", "OpenableColumns", ".", "DISPLAY_NAME", ",", "displayName", ")", ";", "cr", ".", "insert", "(", "uri", ",", "content", ")", ";", "EditableFileAbstraction", "verify", "=", "new", "EditableFileAbstraction", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "uri", ")", ";", "assertEquals", "(", "CONTENT", ",", "verify", ".", "scheme", ")", ";", "assertEquals", "(", "displayName", ",", "verify", ".", "name", ")", ";", "assertNull", "(", "verify", ".", "hybridFileParcelable", ")", ";", "assertEquals", "(", "uri", ",", "verify", ".", "uri", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNonExistentContentUri", "(", ")", "{", "Uri", "uri", "=", "Uri", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ";", "EditableFileAbstraction", "verify", "=", "new", "EditableFileAbstraction", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "uri", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "verify", ".", "name", ")", ";", "assertNull", "(", "verify", ".", "hybridFileParcelable", ")", ";", "assertEquals", "(", "CONTENT", ",", "verify", ".", "scheme", ")", ";", "assertEquals", "(", "uri", ",", "verify", ".", "uri", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFileUri", "(", ")", "{", "File", "file", "=", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Uri", "uri", "=", "Uri", ".", "fromFile", "(", "file", ")", ";", "EditableFileAbstraction", "verify", "=", "new", "EditableFileAbstraction", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "uri", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "verify", ".", "name", ")", ";", "assertNotNull", "(", "verify", ".", "hybridFileParcelable", ")", ";", "assertEquals", "(", "FILE", ",", "verify", ".", "scheme", ")", ";", "assertNull", "(", "verify", ".", "uri", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "{", "ShadowToast", ".", "reset", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSetVmPolicyOnAppCreateHasNoFlags", "(", ")", "throws", "Exception", "{", "Field", "maskField", "=", "StrictMode", ".", "VmPolicy", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "maskField", ".", "setAccessible", "(", "true", ")", ";", "assertEquals", "(", "0", ",", "maskField", ".", "get", "(", "StrictMode", ".", "getVmPolicy", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testToastWithNullContext", "(", ")", "{", "AppConfig", ".", "toast", "(", "null", ",", "R", ".", "string", ".", "ok", ")", ";", "assertNull", "(", "ShadowToast", ".", "getLatestToast", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testToastWithStringRes", "(", ")", "{", "AppConfig", ".", "toast", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "R", ".", "string", ".", "ok", ")", ";", "await", "(", ")", ".", "atMost", "(", "<NUM_LIT:5>", ",", "TimeUnit", ".", "SECONDS", ")", ".", "until", "(", "(", ")", "-", ">", "ShadowToast", ".", "getLatestToast", "(", ")", "!", "=", "null", ")", ";", "assertEquals", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ".", "getString", "(", "R", ".", "string", ".", "ok", ")", ",", "ShadowToast", ".", "getTextOfLatestToast", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testToastWithString", "(", ")", "{", "AppConfig", ".", "toast", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "await", "(", ")", ".", "atMost", "(", "<NUM_LIT:5>", ",", "TimeUnit", ".", "SECONDS", ")", ".", "until", "(", "(", ")", "-", ">", "ShadowToast", ".", "getLatestToast", "(", ")", "!", "=", "null", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "ShadowToast", ".", "getTextOfLatestToast", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetImageLoader", "(", ")", "throws", "Exception", "{", "Field", "requestQueue", "=", "AppConfig", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Field", "imageLoader", "=", "AppConfig", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "requestQueue", ".", "setAccessible", "(", "true", ")", ";", "imageLoader", ".", "setAccessible", "(", "true", ")", ";", "assertNull", "(", "requestQueue", ".", "get", "(", "AppConfig", ".", "getInstance", "(", ")", ")", ")", ";", "assertNull", "(", "imageLoader", ".", "get", "(", "AppConfig", ".", "getInstance", "(", ")", ")", ")", ";", "assertNotNull", "(", "AppConfig", ".", "getInstance", "(", ")", ".", "getImageLoader", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGlideMemoryCategorySetToHigh", "(", ")", "throws", "Exception", "{", "Field", "memoryCategory", "=", "Glide", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "memoryCategory", ".", "setAccessible", "(", "true", ")", ";", "assertEquals", "(", "MemoryCategory", ".", "HIGH", ",", "memoryCategory", ".", "get", "(", "Glide", ".", "get", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetScreenUtils", "(", ")", "{", "assertNull", "(", "AppConfig", ".", "getInstance", "(", ")", ".", "getScreenUtils", "(", ")", ")", ";", "MainActivity", "mock", "=", "mock", "(", "MainActivity", ".", "class", ")", ";", "AppConfig", ".", "getInstance", "(", ")", ".", "setMainActivityContext", "(", "mock", ")", ";", "assertNotNull", "(", "AppConfig", ".", "getInstance", "(", ")", ".", "getScreenUtils", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testExtractRemotePathFromUri", "(", ")", "{", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "SshClientUtils", ".", "extractRemotePathFrom", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:/>", "\"", ",", "SshClientUtils", ".", "extractRemotePathFrom", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:/>", "\"", ",", "SshClientUtils", ".", "extractRemotePathFrom", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "scenario", "=", "ActivityScenario", ".", "launch", "(", "PreferencesActivity", ".", "class", ")", ";", "scenario", ".", "moveToState", "(", "Lifecycle", ".", "State", ".", "STARTED", ")", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "tearDown", "(", ")", "{", "scenario", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetBooleanWithNoSavedValue", "(", ")", "{", "scenario", ".", "onActivity", "(", "activity", "-", ">", "{", "for", "(", "String", "pref", ":", "DEFAULT_FALSE_PREFS", ")", "{", "assertFalse", "(", "activity", ".", "getBoolean", "(", "pref", ")", ")", ";", "}", "for", "(", "String", "pref", ":", "DEFAULT_TRUE_PREFS", ")", "{", "assertTrue", "(", "activity", ".", "getBoolean", "(", "pref", ")", ")", ";", "}", "assertThrows", "(", "IllegalArgumentException", ".", "class", ",", "(", ")", "-", ">", "activity", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGetBooleanWithSavedValue", "(", ")", "{", "SharedPreferences", "preferences", "=", "PreferenceManager", ".", "getDefaultSharedPreferences", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ")", ";", "scenario", ".", "onActivity", "(", "activity", "-", ">", "{", "for", "(", "String", "pref", ":", "DEFAULT_FALSE_PREFS", ")", "{", "preferences", ".", "edit", "(", ")", ".", "putBoolean", "(", "pref", ",", "true", ")", ".", "commit", "(", ")", ";", "assertTrue", "(", "activity", ".", "getBoolean", "(", "pref", ")", ")", ";", "}", "for", "(", "String", "pref", ":", "DEFAULT_TRUE_PREFS", ")", "{", "preferences", ".", "edit", "(", ")", ".", "putBoolean", "(", "pref", ",", "false", ")", ".", "commit", "(", ")", ";", "assertFalse", "(", "activity", ".", "getBoolean", "(", "pref", ")", ")", ";", "}", "assertThrows", "(", "IllegalArgumentException", ".", "class", ",", "(", ")", "-", ">", "activity", ".", "getBoolean", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "context", "=", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ";", "context", ".", "setTheme", "(", "R", ".", "style", ".", "appCompatBlack", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testValidate", "(", ")", "{", "EditText", "textfield", "=", "new", "AppCompatEditText", "(", "context", ")", ";", "WarnableTextInputLayout", "layout", "=", "new", "WarnableTextInputLayout", "(", "context", ",", "Robolectric", ".", "buildAttributeSet", "(", ")", ".", "build", "(", ")", ")", ";", "Button", "button", "=", "new", "AppCompatButton", "(", "context", ")", ";", "WarnableTextInputValidator", ".", "OnTextValidate", "validator", "=", "text", "-", ">", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "text", ")", ")", "?", "new", "WarnableTextInputValidator", ".", "ReturnState", "(", "WarnableTextInputValidator", ".", "ReturnState", ".", "STATE_NORMAL", ",", "R", ".", "string", ".", "ok", ")", ":", "new", "WarnableTextInputValidator", ".", "ReturnState", "(", "WarnableTextInputValidator", ".", "ReturnState", ".", "STATE_ERROR", ",", "R", ".", "string", ".", "error", ")", ";", "WarnableTextInputValidator", "target", "=", "new", "WarnableTextInputValidator", "(", "ApplicationProvider", ".", "getApplicationContext", "(", ")", ",", "textfield", ",", "layout", ",", "button", ",", "validator", ")", ";", "textfield", ".", "setText", "(", "\"", "\"", ")", ";", "target", ".", "performClick", "(", ")", ";", "assertFalse", "(", "button", ".", "isEnabled", "(", ")", ")", ";", "assertEquals", "(", "context", ".", "getString", "(", "R", ".", "string", ".", "error", ")", ",", "layout", ".", "getError", "(", ")", ")", ";", "textfield", ".", "setText", "(", "\"", "<STR_LIT>", "\"", ")", ";", "target", ".", "performClick", "(", ")", ";", "assertFalse", "(", "button", ".", "isEnabled", "(", ")", ")", ";", "assertEquals", "(", "context", ".", "getString", "(", "R", ".", "string", ".", "error", ")", ",", "layout", ".", "getError", "(", ")", ")", ";", "textfield", ".", "setText", "(", "\"", "<STR_LIT>", "\"", ")", ";", "target", ".", "performClick", "(", ")", ";", "assertTrue", "(", "button", ".", "isEnabled", "(", ")", ")", ";", "assertNull", "(", "layout", ".", "getError", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testListDirsAndBrokenSymlinks", "(", ")", "throws", "Exception", "{", "File", "sysroot", "=", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "sysroot", ".", "mkdir", "(", ")", ";", "Files", ".", "createSymbolicLink", "(", "Paths", ".", "get", "(", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "getAbsolutePath", "(", ")", ")", ",", "Paths", ".", "get", "(", "new", "File", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getAbsolutePath", "(", ")", ")", ")", ";", "for", "(", "String", "s", ":", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "{", "File", "subdir", "=", "new", "File", "(", "sysroot", ",", "s", ")", ";", "subdir", ".", "mkdir", "(", ")", ";", "Files", ".", "createSymbolicLink", "(", "Paths", ".", "get", "(", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "s", ")", ".", "getAbsolutePath", "(", ")", ")", ",", "Paths", ".", "get", "(", "subdir", ".", "getAbsolutePath", "(", ")", ")", ")", ";", "}", "for", "(", "String", "s", ":", "new", "String", "[", "]", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "{", "new", "File", "(", "Environment", ".", "getExternalStorageDirectory", "(", ")", ",", "s", ")", ".", "mkdir", "(", ")", ";", "}", "performVerify", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Implementation", "public", "SmbFile", "[", "]", "listFiles", "(", ")", "{", "return", "new", "SmbFile", "[", "0", "]", ";", "}", "</s>"]
