["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Test", "public", "void", "whenReturnTypeIsResponseNoErrorHandling", "(", ")", "throws", "Throwable", "{", "final", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "new", "LinkedHashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", ")", ";", "headers", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "headers", "(", "headers", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT:/>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "new", "byte", "[", "0", "]", ")", ".", "build", "(", ")", ";", "final", "ExecutorService", "execs", "=", "Executors", ".", "newSingleThreadExecutor", "(", ")", ";", "final", "TestInterfaceAsync", "api", "=", "AsyncFeign", ".", "<", "Void", ">", "asyncBuilder", "(", ")", ".", "client", "(", "new", "AsyncClient", ".", "Default", "<", ">", "(", "(", "request", ",", "options", ")", "-", ">", "response", ",", "execs", ")", ")", ".", "target", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertThat", "(", "unwrap", "(", "api", ".", "response", "(", ")", ")", ".", "headers", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "execs", ".", "shutdown", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "okIfDecodeRootCauseHasNoMessage", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "DecodeException", ".", "class", ")", ";", "final", "TestInterfaceAsync", "api", "=", "newAsyncBuilder", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "unwrap", "(", "api", ".", "post", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodingExceptionGetWrappedInDecode404Mode", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "thrown", ".", "expect", "(", "DecodeException", ".", "class", ")", ";", "thrown", ".", "expectCause", "(", "isA", "(", "NoSuchElementException", ".", "class", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "newAsyncBuilder", "(", ")", ".", "decode404", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "assertEquals", "(", "<NUM_LIT>", ",", "response", ".", "status", "(", ")", ")", ";", "throw", "new", "NoSuchElementException", "(", ")", ";", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "unwrap", "(", "api", ".", "post", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodingDoesNotSwallow404ErrorsInDecode404Mode", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "final", "TestInterfaceAsync", "api", "=", "newAsyncBuilder", "(", ")", ".", "decode404", "(", ")", ".", "errorDecoder", "(", "new", "IllegalArgumentExceptionOn404", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "Void", ">", "cf", "=", "api", ".", "queryMap", "(", "Collections", ".", "<", "String", ",", "Object", ">", "emptyMap", "(", ")", ")", ";", "server", ".", "takeRequest", "(", ")", ";", "unwrap", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "okIfEncodeRootCauseHasNoMessage", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "EncodeException", ".", "class", ")", ";", "final", "TestInterfaceAsync", "api", "=", "newAsyncBuilder", "(", ")", ".", "encoder", "(", "(", "object", ",", "bodyType", ",", "template", ")", "-", ">", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "unwrap", "(", "api", ".", "body", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "equalsHashCodeAndToStringWork", "(", ")", "{", "final", "Target", "<", "TestInterfaceAsync", ">", "t1", "=", "new", "HardCodedTarget", "<", "TestInterfaceAsync", ">", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Target", "<", "TestInterfaceAsync", ">", "t2", "=", "new", "HardCodedTarget", "<", "TestInterfaceAsync", ">", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Target", "<", "OtherTestInterfaceAsync", ">", "t3", "=", "new", "HardCodedTarget", "<", "OtherTestInterfaceAsync", ">", "(", "OtherTestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "TestInterfaceAsync", "i1", "=", "newAsyncBuilder", "(", ")", ".", "target", "(", "t1", ")", ";", "final", "TestInterfaceAsync", "i2", "=", "newAsyncBuilder", "(", ")", ".", "target", "(", "t1", ")", ";", "final", "TestInterfaceAsync", "i3", "=", "newAsyncBuilder", "(", ")", ".", "target", "(", "t2", ")", ";", "final", "OtherTestInterfaceAsync", "i4", "=", "newAsyncBuilder", "(", ")", ".", "target", "(", "t3", ")", ";", "Assertions", ".", "assertThat", "(", "i1", ")", ".", "isEqualTo", "(", "i2", ")", ".", "isNotEqualTo", "(", "i3", ")", ".", "isNotEqualTo", "(", "i4", ")", ";", "Assertions", ".", "assertThat", "(", "i1", ".", "hashCode", "(", ")", ")", ".", "isEqualTo", "(", "i2", ".", "hashCode", "(", ")", ")", ".", "isNotEqualTo", "(", "i3", ".", "hashCode", "(", ")", ")", ".", "isNotEqualTo", "(", "i4", ".", "hashCode", "(", ")", ")", ";", "Assertions", ".", "assertThat", "(", "i1", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "i2", ".", "toString", "(", ")", ")", ".", "isNotEqualTo", "(", "i3", ".", "toString", "(", ")", ")", ".", "isNotEqualTo", "(", "i4", ".", "toString", "(", ")", ")", ";", "Assertions", ".", "assertThat", "(", "t1", ")", ".", "isNotEqualTo", "(", "i1", ")", ";", "Assertions", ".", "assertThat", "(", "t1", ".", "hashCode", "(", ")", ")", ".", "isEqualTo", "(", "i1", ".", "hashCode", "(", ")", ")", ";", "Assertions", ".", "assertThat", "(", "t1", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "i1", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Test", "public", "void", "decodeLogicSupportsByteArray", "(", ")", "throws", "Throwable", "{", "final", "byte", "[", "]", "expectedResponse", "=", "{", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", "}", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "new", "Buffer", "(", ")", ".", "write", "(", "expectedResponse", ")", ")", ")", ";", "final", "OtherTestInterfaceAsync", "api", "=", "newAsyncBuilder", "(", ")", ".", "target", "(", "new", "HardCodedTarget", "<", ">", "(", "OtherTestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ")", ";", "Assertions", ".", "assertThat", "(", "unwrap", "(", "api", ".", "binaryResponseBody", "(", ")", ")", ")", ".", "containsExactly", "(", "expectedResponse", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodeLogicSupportsByteArray", "(", ")", "throws", "Exception", "{", "final", "byte", "[", "]", "expectedRequest", "=", "{", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", "}", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "OtherTestInterfaceAsync", "api", "=", "newAsyncBuilder", "(", ")", ".", "encoder", "(", "new", "Encoder", ".", "Default", "(", ")", ")", ".", "target", "(", "new", "HardCodedTarget", "<", ">", "(", "OtherTestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "binaryRequestBody", "(", "expectedRequest", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "expectedRequest", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodedQueryParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "newAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "encodedQueryParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "responseMapperIsAppliedBeforeDelegate", "(", ")", "throws", "IOException", "{", "final", "ResponseMappingDecoder", "decoder", "=", "new", "ResponseMappingDecoder", "(", "upperCaseResponseMapper", "(", ")", ",", "new", "StringDecoder", "(", ")", ")", ";", "final", "String", "output", "=", "(", "String", ")", "decoder", ".", "decode", "(", "responseWithText", "(", "\"", "<STR_LIT>", "\"", ")", ",", "String", ".", "class", ")", ";", "Assertions", ".", "assertThat", "(", "output", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "TestInterfaceAsyncBuilder", "newAsyncBuilder", "(", ")", "{", "return", "new", "TestInterfaceAsyncBuilder", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithPrivateGetterIgnored", "(", ")", "throws", "Exception", "{", "final", "TestInterfaceAsync", "api", "=", "newAsyncBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "propertyPojo", ".", "setPrivateGetterProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "propertyPojo", ".", "setName", "(", "\"", "<STR_LIT:Name>", "\"", ")", ";", "propertyPojo", ".", "setNumber", "(", "1", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMap_with_child_pojo", "(", ")", "throws", "Exception", "{", "final", "TestInterfaceAsync", "api", "=", "newAsyncBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "FieldQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "ChildPojo", "childPojo", "=", "new", "ChildPojo", "(", ")", ";", "childPojo", ".", "setChildPrivateProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "childPojo", ".", "setParentProtectedProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "childPojo", ".", "setParentPublicProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPropertyInheritence", "(", "childPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithNullValueIgnored", "(", ")", "throws", "Exception", "{", "final", "TestInterfaceAsync", "api", "=", "newAsyncBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "propertyPojo", ".", "setName", "(", "null", ")", ";", "propertyPojo", ".", "setNumber", "(", "1", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithEmptyParams", "(", ")", "throws", "Exception", "{", "final", "TestInterfaceAsync", "api", "=", "newAsyncBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "<", "T", ">", "T", "target", "(", "Target", "<", "T", ">", "target", ")", "{", "return", "delegate", ".", "target", "(", "target", ")", ";", "}", "</s>"]
["<s>", "public", "Method", "[", "]", "getMethods", "(", "Class", "<", "?", ">", "c", ")", "{", "Method", "[", "]", "methods", "=", "c", ".", "getMethods", "(", ")", ";", "Arrays", ".", "sort", "(", "methods", ",", "Comparator", ".", "comparing", "(", "o", "-", ">", "(", "o", ".", "getName", "(", ")", "+", "o", ".", "getGenericReturnType", "(", ")", ".", "getTypeName", "(", ")", ")", ")", ")", ";", "return", "methods", ";", "}", "</s>"]
["<s>", "protected", "boolean", "shouldLogRequestHeader", "(", "String", "header", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "protected", "boolean", "shouldLogResponseHeader", "(", "String", "header", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "boolean", "shouldLogRequestHeader", "(", "String", "header", ")", "{", "return", "!", "header", ".", "toLowerCase", "(", ")", ".", "startsWith", "(", "PREFIX_X", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "boolean", "shouldLogResponseHeader", "(", "String", "header", ")", "{", "return", "!", "header", ".", "toLowerCase", "(", ")", ".", "startsWith", "(", "PREFIX_Y", ")", ";", "}", "</s>"]
["<s>", "protected", "static", "String", "resolveProtocolVersion", "(", "Request", ".", "ProtocolVersion", "protocolVersion", ")", "{", "if", "(", "nonNull", "(", "protocolVersion", ")", ")", "{", "return", "protocolVersion", ".", "toString", "(", ")", ";", "}", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "protocolVersion", ";", "}", "</s>"]
["<s>", "public", "ProtocolVersion", "protocolVersion", "(", ")", "{", "return", "protocolVersion", ";", "}", "</s>"]
["<s>", "public", "Builder", "protocolVersion", "(", "ProtocolVersion", "protocolVersion", ")", "{", "this", ".", "protocolVersion", "=", "protocolVersion", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "static", "<", "T", "extends", "Enum", "<", "?", ">", ">", "T", "enumForName", "(", "Class", "<", "T", ">", "enumClass", ",", "Object", "object", ")", "{", "String", "name", "=", "(", "nonNull", "(", "object", ")", ")", "?", "object", ".", "toString", "(", ")", ":", "null", ";", "for", "(", "T", "enumItem", ":", "enumClass", ".", "getEnumConstants", "(", ")", ")", "{", "if", "(", "enumItem", ".", "name", "(", ")", ".", "equalsIgnoreCase", "(", "name", ")", "|", "|", "enumItem", ".", "toString", "(", ")", ".", "equalsIgnoreCase", "(", "name", ")", ")", "{", "return", "enumItem", ";", "}", "}", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Parameters", "public", "static", "Iterable", "<", "Object", "[", "]", ">", "data", "(", ")", "{", "return", "Arrays", ".", "asList", "(", "new", "Object", "[", "]", "[", "]", "{", "{", "ProtocolVersion", ".", "HTTP_1_0", ",", "ProtocolVersion", ".", "HTTP_1_0", "}", ",", "{", "\"", "<STR_LIT>", "\"", ",", "ProtocolVersion", ".", "HTTP_1_0", "}", ",", "{", "ProtocolVersion", ".", "HTTP_1_1", ",", "ProtocolVersion", ".", "HTTP_1_1", "}", ",", "{", "\"", "<STR_LIT>", "\"", ",", "ProtocolVersion", ".", "HTTP_1_1", "}", ",", "{", "ProtocolVersion", ".", "HTTP_2", ",", "ProtocolVersion", ".", "HTTP_2", "}", ",", "{", "\"", "<STR_LIT>", "\"", ",", "ProtocolVersion", ".", "HTTP_2", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getKnownEnumValue", "(", ")", "{", "assertEquals", "(", "\"", "<STR_LIT>", "\"", "+", "name", ",", "expectedProtocolVersion", ",", "enumForName", "(", "ProtocolVersion", ".", "class", ",", "name", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Parameters", "public", "static", "Iterable", "<", "Object", "[", "]", ">", "data", "(", ")", "{", "return", "Arrays", ".", "asList", "(", "new", "Object", "[", "]", "[", "]", "{", "{", "Request", ".", "HttpMethod", ".", "GET", "}", ",", "{", "\"", "<STR_LIT>", "\"", "}", ",", "{", "null", "}", ",", "{", "\"", "<STR_LIT>", "\"", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "getKnownEnumValue", "(", ")", "{", "assertNull", "(", "\"", "<STR_LIT>", "\"", "+", "name", ",", "enumForName", "(", "ProtocolVersion", ".", "class", ",", "name", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Parameters", "public", "static", "Iterable", "<", "Object", "[", "]", ">", "data", "(", ")", "{", "return", "Arrays", ".", "asList", "(", "new", "Object", "[", "]", "[", "]", "{", "{", "Level", ".", "BASIC", ",", "null", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", ",", "{", "Level", ".", "BASIC", ",", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", ",", "{", "Level", ".", "BASIC", ",", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", ",", "{", "Level", ".", "BASIC", ",", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHttpProtocolVersion", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setStatus", "(", "\"", "<STR_LIT>", "\"", "+", "<NUM_LIT>", ")", ")", ";", "SendsStuff", "api", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "new", "TestProtocolVersionClient", "(", "protocolVersionName", ")", ")", ".", "logger", "(", "logger", ")", ".", "logLevel", "(", "logLevel", ")", ".", "target", "(", "SendsStuff", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "login", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "Response", "convertResponse", "(", "HttpURLConnection", "connection", ",", "Request", "request", ")", "throws", "IOException", "{", "Response", "response", "=", "super", ".", "convertResponse", "(", "connection", ",", "request", ")", ";", "if", "(", "nonNull", "(", "(", "protocolVersionName", ")", ")", ")", "{", "response", "=", "response", ".", "toBuilder", "(", ")", ".", "protocolVersion", "(", "enumForName", "(", "ProtocolVersion", ".", "class", ",", "protocolVersionName", ")", ")", ".", "build", "(", ")", ";", "}", "return", "response", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testMockProtocolVersion", "(", ")", "{", "Remote", "remote", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "new", "MockClient", "(", ")", ".", "ok", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "target", "(", "new", "MockTarget", "<", ">", "(", "Remote", ".", "class", ")", ")", ";", "Response", "response", "=", "remote", ".", "test", "(", ")", ";", "assertNotNull", "(", "response", ".", "protocolVersion", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "response", ".", "protocolVersion", "(", ")", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "boolean", "doesMetricHasCounter", "(", "Metric", "metric", ")", "{", "return", "metric", "instanceof", "Metered", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "long", "getMetricCounter", "(", "Metric", "metric", ")", "{", "return", "(", "(", "Metered", ")", "metric", ")", ".", "getCount", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "boolean", "doesMetricHasCounter", "(", "Meter", "meter", ")", "{", "for", "(", "Measurement", "measurement", ":", "meter", ".", "measure", "(", ")", ")", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "measurement", ".", "getStatistic", "(", ")", ".", "name", "(", ")", ")", ")", "{", "return", "true", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "long", "getMetricCounter", "(", "Meter", "meter", ")", "{", "for", "(", "Measurement", "measurement", ":", "meter", ".", "measure", "(", ")", ")", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "measurement", ".", "getStatistic", "(", ")", ".", "name", "(", ")", ")", ")", "{", "return", "(", "long", ")", "measurement", ".", "getValue", "(", ")", ";", "}", "}", "return", "0", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "reasonPhraseInHeader", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "addHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "setStatus", "(", "\"", "<STR_LIT>", "\"", "+", "<NUM_LIT>", ")", ")", ";", "final", "AbstractClientTest", ".", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "AbstractClientTest", ".", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "Response", "response", "=", "api", ".", "post", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "reason", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "String", "[", "]", "mapping", "(", "String", "[", "]", "firstPriority", ",", "String", "[", "]", "fallback", ")", "{", "return", "firstPriority", ".", "length", ">", "0", "?", "firstPriority", ":", "fallback", ";", "}", "</s>"]
["<s>", "private", "String", "parameterName", "(", "String", "firstPriority", ",", "String", "secondPriority", ",", "Parameter", "parameter", ")", "{", "if", "(", "Util", ".", "isNotBlank", "(", "firstPriority", ")", ")", "{", "return", "firstPriority", ";", "}", "else", "if", "(", "Util", ".", "isNotBlank", "(", "secondPriority", ")", ")", "{", "return", "secondPriority", ";", "}", "else", "{", "if", "(", "parameter", ".", "isNamePresent", "(", ")", ")", "{", "return", "parameter", ".", "getName", "(", ")", ";", "}", "else", "{", "return", "firstPriority", ";", "}", "}", "}", "</s>"]
["<s>", "private", "DeclarativeContract", ".", "ParameterAnnotationProcessor", "<", "PathVariable", ">", "pathVariableParameterAnnotationProcessor", "(", ")", "{", "return", "(", "parameterAnnotation", ",", "data", ",", "paramIndex", ")", "-", ">", "{", "Parameter", "parameter", "=", "data", ".", "method", "(", ")", ".", "getParameters", "(", ")", "[", "paramIndex", "]", ";", "String", "name", "=", "parameterName", "(", "parameterAnnotation", ".", "name", "(", ")", ",", "parameterAnnotation", ".", "value", "(", ")", ",", "parameter", ")", ";", "nameParam", "(", "data", ",", "name", ",", "paramIndex", ")", ";", "}", ";", "}", "</s>"]
["<s>", "private", "DeclarativeContract", ".", "ParameterAnnotationProcessor", "<", "RequestParam", ">", "requestParamParameterAnnotationProcessor", "(", ")", "{", "return", "(", "parameterAnnotation", ",", "data", ",", "paramIndex", ")", "-", ">", "{", "Parameter", "parameter", "=", "data", ".", "method", "(", ")", ".", "getParameters", "(", ")", "[", "paramIndex", "]", ";", "String", "name", "=", "parameterName", "(", "parameterAnnotation", ".", "name", "(", ")", ",", "parameterAnnotation", ".", "value", "(", ")", ",", "parameter", ")", ";", "Collection", "<", "String", ">", "query", "=", "addTemplatedParam", "(", "data", ".", "template", "(", ")", ".", "queries", "(", ")", ".", "get", "(", "name", ")", ",", "name", ")", ";", "data", ".", "template", "(", ")", ".", "query", "(", "name", ",", "query", ")", ";", "nameParam", "(", "data", ",", "name", ",", "paramIndex", ")", ";", "}", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "noPath", "(", ")", "{", "resource", ".", "getStatus", "(", ")", ";", "mockClient", ".", "verifyOne", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testWithName", "(", ")", "{", "resource", ".", "checkWithName", "(", "\"", "<STR_LIT>", "\"", ",", "true", ",", "true", ")", ";", "mockClient", ".", "verifyOne", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerMapUserObject", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "HeaderMapInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "HeaderMapUserObject", ".", "class", ")", ";", "assertThat", "(", "md", ".", "headerMapIndex", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getGrade", "(", ")", "{", "return", "grade", ";", "}", "</s>"]
["<s>", "public", "void", "setGrade", "(", "String", "grade", ")", "{", "this", ".", "grade", "=", "grade", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "HeaderMapUserObject", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "HeaderMapUserObject", "headerMap", "=", "new", "HeaderMapUserObject", "(", ")", ";", "headerMap", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "headerMap", ".", "setGrade", "(", "\"", "<STR_LIT:5>", "\"", ")", ";", "api", ".", "HeaderMapUserObject", "(", "headerMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:1>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT:1>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT:5>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "DeclarativeContract", ".", "ParameterAnnotationProcessor", "<", "RequestHeader", ">", "requestHeaderParameterAnnotationProcessor", "(", ")", "{", "return", "(", "parameterAnnotation", ",", "data", ",", "paramIndex", ")", "-", ">", "{", "Parameter", "parameter", "=", "data", ".", "method", "(", ")", ".", "getParameters", "(", ")", "[", "paramIndex", "]", ";", "checkState", "(", "data", ".", "headerMapIndex", "(", ")", "=", "=", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "Map", ".", "class", ".", "isAssignableFrom", "(", "parameter", ".", "getType", "(", ")", ")", "|", "|", "isUserPojo", "(", "parameter", ".", "getType", "(", ")", ")", ")", "{", "data", ".", "headerMapIndex", "(", "paramIndex", ")", ";", "return", ";", "}", "String", "name", "=", "parameterName", "(", "parameterAnnotation", ".", "name", "(", ")", ",", "parameterAnnotation", ".", "value", "(", ")", ",", "parameter", ")", ";", "Collection", "<", "String", ">", "headers", "=", "addTemplatedParam", "(", "data", ".", "template", "(", ")", ".", "headers", "(", ")", ".", "get", "(", "name", ")", ",", "name", ")", ";", "data", ".", "template", "(", ")", ".", "header", "(", "name", ",", "headers", ")", ";", "nameParam", "(", "data", ",", "name", ",", "paramIndex", ")", ";", "}", ";", "}", "</s>"]
["<s>", "private", "DeclarativeContract", ".", "ParameterAnnotationProcessor", "<", "RequestPart", ">", "requestPartParameterAnnotationProcessor", "(", ")", "{", "return", "(", "parameterAnnotation", ",", "data", ",", "paramIndex", ")", "-", ">", "{", "Parameter", "parameter", "=", "data", ".", "method", "(", ")", ".", "getParameters", "(", ")", "[", "paramIndex", "]", ";", "String", "name", "=", "parameterName", "(", "parameterAnnotation", ".", "name", "(", ")", ",", "parameterAnnotation", ".", "value", "(", ")", ",", "parameter", ")", ";", "data", ".", "template", "(", ")", ".", "methodMetadata", "(", ")", ".", "formParams", "(", ")", ".", "add", "(", "name", ")", ";", "nameParam", "(", "data", ",", "name", ",", "paramIndex", ")", ";", "}", ";", "}", "</s>"]
["<s>", "private", "boolean", "isUserPojo", "(", "Type", "type", ")", "{", "String", "typeName", "=", "type", ".", "toString", "(", ")", ";", "return", "!", "typeName", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRequestPart", "(", ")", "{", "resource", ".", "checkRequestPart", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:6>", "\"", ")", ";", "final", "Request", "request", "=", "mockClient", ".", "verifyOne", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "request", ".", "requestTemplate", "(", ")", ".", "methodMetadata", "(", ")", ".", "formParams", "(", ")", ",", "contains", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRequestHeader", "(", ")", "{", "resource", ".", "checkRequestHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:6>", "\"", ")", ";", "final", "Request", "request", "=", "mockClient", ".", "verifyOne", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "request", ".", "headers", "(", ")", ",", "hasEntry", "(", "\"", "<STR_LIT:1>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "request", ".", "headers", "(", ")", ",", "hasEntry", "(", "\"", "<STR_LIT:1>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:6>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRequestHeaderMap", "(", ")", "{", "Map", "<", "String", ",", "String", ">", "map", "=", "new", "HashMap", "<", ">", "(", ")", ";", "map", ".", "put", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "map", ".", "put", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT:6>", "\"", ")", ";", "resource", ".", "checkRequestHeaderMap", "(", "map", ")", ";", "final", "Request", "request", "=", "mockClient", ".", "verifyOne", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "request", ".", "headers", "(", ")", ",", "hasEntry", "(", "\"", "<STR_LIT:1>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "request", ".", "headers", "(", ")", ",", "hasEntry", "(", "\"", "<STR_LIT:1>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:6>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRequestHeaderPojo", "(", ")", "{", "HeaderMapUserObject", "object", "=", "new", "HeaderMapUserObject", "(", ")", ";", "object", ".", "setName", "(", "\"", "<STR_LIT>", "\"", ")", ";", "object", ".", "setGrade", "(", "\"", "<STR_LIT:6>", "\"", ")", ";", "resource", ".", "checkRequestHeaderPojo", "(", "object", ")", ";", "final", "Request", "request", "=", "mockClient", ".", "verifyOne", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "request", ".", "headers", "(", ")", ",", "hasEntry", "(", "\"", "<STR_LIT:1>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "request", ".", "headers", "(", ")", ",", "hasEntry", "(", "\"", "<STR_LIT:1>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:6>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canExeptCaseInsensitiveHeader", "(", ")", "throws", "Exception", "{", "final", "String", "responseData", "=", "\"", "<STR_LIT>", "\"", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "addHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "setBody", "(", "new", "Buffer", "(", ")", ".", "write", "(", "compress", "(", "responseData", ")", ")", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "String", "result", "=", "api", ".", "get", "(", ")", ";", "assertThat", "(", "result", ")", ".", "isNotNull", "(", ")", ".", "isEqualToIgnoringCase", "(", "responseData", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapWithNull", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapWithEmpty", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "dismiss404", "(", ")", "{", "this", ".", "dismiss404", "=", "true", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "dismiss404", "(", ")", "{", "this", ".", "dismiss404", "=", "true", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "dismiss404", "(", ")", "{", "return", "(", "Builder", ")", "super", ".", "dismiss404", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "nullBodyDecodesToEmpty", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "build", "(", ")", ";", "assertThat", "(", "(", "byte", "[", "]", ")", "new", "JacksonJrDecoder", "(", ")", ".", "decode", "(", "response", ",", "byte", "[", "]", ".", "class", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyBodyDecodesToEmpty", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "new", "byte", "[", "0", "]", ")", ".", "build", "(", ")", ";", "assertThat", "(", "(", "byte", "[", "]", ")", "new", "JacksonJrDecoder", "(", ")", ".", "decode", "(", "response", ",", "byte", "[", "]", ".", "class", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "nullBodyDecodesToEmptyIterator", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "build", "(", ")", ";", "assertThat", "(", "(", "byte", "[", "]", ")", "JacksonIteratorDecoder", ".", "create", "(", ")", ".", "decode", "(", "response", ",", "byte", "[", "]", ".", "class", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyBodyDecodesToEmptyIterator", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "new", "byte", "[", "0", "]", ")", ".", "build", "(", ")", ";", "assertThat", "(", "(", "byte", "[", "]", ")", "JacksonIteratorDecoder", ".", "create", "(", ")", ".", "decode", "(", "response", ",", "byte", "[", "]", ".", "class", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notFoundDecodesToEmpty", "(", ")", "throws", "IOException", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "request", "(", "request", ")", ".", "build", "(", ")", ";", "assertTrue", "(", "(", "(", "JSONObject", ")", "new", "JsonDecoder", "(", ")", ".", "decode", "(", "response", ",", "JSONObject", ".", "class", ")", ")", ".", "isEmpty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "nullBodyDecodesToEmpty", "(", ")", "throws", "IOException", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "request", "(", "request", ")", ".", "build", "(", ")", ";", "assertTrue", "(", "(", "(", "JSONObject", ")", "new", "JsonDecoder", "(", ")", ".", "decode", "(", "response", ",", "JSONObject", ".", "class", ")", ")", ".", "isEmpty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyBodyDecodesToEmpty", "(", ")", "throws", "IOException", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "\"", "\"", ",", "UTF_8", ")", ".", "request", "(", "request", ")", ".", "build", "(", ")", ";", "assertTrue", "(", "(", "(", "JSONObject", ")", "new", "JsonDecoder", "(", ")", ".", "decode", "(", "response", ",", "JSONObject", ".", "class", ")", ")", ".", "isEmpty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "nullBodyDecodesToEmpty", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "<", "String", ",", "Collection", "<", "String", ">", ">", "emptyMap", "(", ")", ")", ".", "build", "(", ")", ";", "assertThat", "(", "(", "byte", "[", "]", ")", "decoder", ".", "decode", "(", "response", ",", "byte", "[", "]", ".", "class", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "String", "expandMap", "(", "Map", "<", "String", ",", "?", ">", "values", ")", "{", "StringBuilder", "result", "=", "new", "StringBuilder", "(", ")", ";", "for", "(", "Entry", "<", "String", ",", "?", ">", "entry", ":", "values", ".", "entrySet", "(", ")", ")", "{", "StringBuilder", "expanded", "=", "new", "StringBuilder", "(", ")", ";", "String", "name", "=", "this", ".", "encode", "(", "entry", ".", "getKey", "(", ")", ")", ";", "String", "value", "=", "this", ".", "encode", "(", "entry", ".", "getValue", "(", ")", ".", "toString", "(", ")", ")", ";", "expanded", ".", "append", "(", "name", ")", ".", "append", "(", "\"", "<STR_LIT:=>", "\"", ")", ";", "if", "(", "!", "value", ".", "isEmpty", "(", ")", ")", "{", "expanded", ".", "append", "(", "value", ")", ";", "}", "if", "(", "result", ".", "length", "(", ")", "!", "=", "0", ")", "{", "result", ".", "append", "(", "this", ".", "separator", ")", ";", "}", "result", ".", "append", "(", "expanded", ")", ";", "}", "return", "result", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "expand", "(", "Object", "variable", ",", "boolean", "encode", ")", "{", "return", "this", ".", "separator", "+", "super", ".", "expand", "(", "variable", ",", "encode", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "expand", "(", "Object", "value", ")", "{", "return", "this", ".", "expand", "(", "value", ",", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getValue", "(", ")", "{", "if", "(", "this", ".", "getPattern", "(", ")", "!", "=", "null", ")", "{", "return", "\"", "<STR_LIT:{>", "\"", "+", "this", ".", "separator", "+", "this", ".", "getName", "(", ")", "+", "\"", "<STR_LIT::>", "\"", "+", "this", ".", "getName", "(", ")", "+", "\"", "<STR_LIT:}>", "\"", ";", "}", "return", "\"", "<STR_LIT:{>", "\"", "+", "this", ".", "separator", "+", "this", ".", "getName", "(", ")", "+", "\"", "<STR_LIT:}>", "\"", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "matrixParametersAreSupported", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "List", "<", "String", ">", "owners", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "owners", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "owners", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "owners", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "matrixParameters", "(", "owners", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "matrixParametersAlsoSupportMaps", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "properties", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "properties", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "properties", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "matrixParametersWithMap", "(", "properties", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathStyleExpansionSupported", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "uriTemplate", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathStyleExpansionEncodesReservedCharacters", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "uriTemplate", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathStyleExpansionSupportedWithLists", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "List", "<", "String", ">", "values", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "values", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "values", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "values", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "String", "expanded", "=", "uriTemplate", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "values", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathStyleExpansionSupportedWithMap", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "Map", "<", "String", ",", "Object", ">", "parameters", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "parameters", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "parameters", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Map", "<", "String", ",", "Object", ">", "values", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "values", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "parameters", ")", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "uriTemplate", ".", "expand", "(", "values", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isStream", "(", "Type", "type", ")", "{", "if", "(", "!", "(", "type", "instanceof", "ParameterizedType", ")", ")", "{", "return", "false", ";", "}", "ParameterizedType", "parameterizedType", "=", "(", "ParameterizedType", ")", "type", ";", "return", "parameterizedType", ".", "getRawType", "(", ")", ".", "equals", "(", "Stream", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "static", "StreamDecoder", "create", "(", "Decoder", "iteratorDecoder", ",", "Decoder", "delegateDecoder", ")", "{", "return", "new", "StreamDecoder", "(", "iteratorDecoder", ",", "delegateDecoder", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "simpleDefaultStreamTest", "(", ")", "{", "MockWebServer", "server", "=", "new", "MockWebServer", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ")", ";", "StreamInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "StreamDecoder", ".", "create", "(", "(", "r", ",", "t", ")", "-", ">", "{", "BufferedReader", "bufferedReader", "=", "new", "BufferedReader", "(", "r", ".", "body", "(", ")", ".", "asReader", "(", "UTF_8", ")", ")", ";", "return", "bufferedReader", ".", "lines", "(", ")", ".", "iterator", "(", ")", ";", "}", ")", ")", ".", "doNotCloseAfterDecode", "(", ")", ".", "target", "(", "StreamInterface", ".", "class", ",", "server", ".", "url", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "toString", "(", ")", ")", ";", "try", "(", "Stream", "<", "String", ">", "stream", "=", "api", ".", "get", "(", ")", ")", "{", "assertThat", "(", "stream", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ")", ".", "isEqualTo", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "simpleDeleteDecoderTest", "(", ")", "{", "MockWebServer", "server", "=", "new", "MockWebServer", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ")", ";", "StreamInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "StreamDecoder", ".", "create", "(", "(", "r", ",", "t", ")", "-", ">", "{", "BufferedReader", "bufferedReader", "=", "new", "BufferedReader", "(", "r", ".", "body", "(", ")", ".", "asReader", "(", "UTF_8", ")", ")", ";", "return", "bufferedReader", ".", "lines", "(", ")", ".", "iterator", "(", ")", ";", "}", ",", "(", "r", ",", "t", ")", "-", ">", "\"", "<STR_LIT>", "\"", ")", ")", ".", "doNotCloseAfterDecode", "(", ")", ".", "target", "(", "StreamInterface", ".", "class", ",", "server", ".", "url", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "toString", "(", ")", ")", ";", "String", "str", "=", "api", ".", "str", "(", ")", ";", "assertThat", "(", "str", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "normalResponseForChildOptionsTest", "(", ")", "{", "final", "MockWebServer", "server", "=", "new", "MockWebServer", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setBodyDelay", "(", "<NUM_LIT:3>", ",", "TimeUnit", ".", "SECONDS", ")", ")", ";", "final", "OptionsInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "options", "(", "new", "ChildOptions", "(", "<NUM_LIT:1000>", ",", "<NUM_LIT:1000>", ")", ")", ".", "target", "(", "OptionsInterface", ".", "class", ",", "server", ".", "url", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "toString", "(", ")", ")", ";", "assertThat", "(", "api", ".", "getChildOptions", "(", "new", "ChildOptions", "(", "<NUM_LIT:1000>", ",", "<NUM_LIT:4>", "*", "<NUM_LIT:1000>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "okhttp3", ".", "OkHttpClient", "getClient", "(", "feign", ".", "Request", ".", "Options", "options", ")", "{", "okhttp3", ".", "OkHttpClient", "requestScoped", ";", "if", "(", "delegate", ".", "connectTimeoutMillis", "(", ")", "!", "=", "options", ".", "connectTimeoutMillis", "(", ")", "|", "|", "delegate", ".", "readTimeoutMillis", "(", ")", "!", "=", "options", ".", "readTimeoutMillis", "(", ")", "|", "|", "delegate", ".", "followRedirects", "(", ")", "!", "=", "options", ".", "isFollowRedirects", "(", ")", ")", "{", "requestScoped", "=", "delegate", ".", "newBuilder", "(", ")", ".", "connectTimeout", "(", "options", ".", "connectTimeoutMillis", "(", ")", ",", "TimeUnit", ".", "MILLISECONDS", ")", ".", "readTimeout", "(", "options", ".", "readTimeoutMillis", "(", ")", ",", "TimeUnit", ".", "MILLISECONDS", ")", ".", "followRedirects", "(", "options", ".", "isFollowRedirects", "(", ")", ")", ".", "build", "(", ")", ";", "}", "else", "{", "requestScoped", "=", "delegate", ";", "}", "return", "requestScoped", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "CompletableFuture", "<", "feign", ".", "Response", ">", "execute", "(", "feign", ".", "Request", "input", ",", "feign", ".", "Request", ".", "Options", "options", ",", "Optional", "<", "Object", ">", "requestContext", ")", "{", "okhttp3", ".", "OkHttpClient", "requestScoped", "=", "getClient", "(", "options", ")", ";", "Request", "request", "=", "toOkHttpRequest", "(", "input", ")", ";", "CompletableFuture", "<", "feign", ".", "Response", ">", "responseFuture", "=", "new", "CompletableFuture", "<", ">", "(", ")", ";", "requestScoped", ".", "newCall", "(", "request", ")", ".", "enqueue", "(", "new", "Callback", "(", ")", "{", "@", "Override", "public", "void", "onFailure", "(", "Call", "call", ",", "IOException", "e", ")", "{", "responseFuture", ".", "completeExceptionally", "(", "e", ")", ";", "}", "@", "Override", "public", "void", "onResponse", "(", "Call", "call", ",", "okhttp3", ".", "Response", "response", ")", "throws", "IOException", "{", "final", "feign", ".", "Response", "r", "=", "toFeignResponse", "(", "response", ",", "input", ")", ".", "toBuilder", "(", ")", ".", "request", "(", "input", ")", ".", "build", "(", ")", ";", "responseFuture", ".", "complete", "(", "r", ")", ";", "}", "}", ")", ";", "return", "responseFuture", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onFailure", "(", "Call", "call", ",", "IOException", "e", ")", "{", "responseFuture", ".", "completeExceptionally", "(", "e", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "onResponse", "(", "Call", "call", ",", "okhttp3", ".", "Response", "response", ")", "throws", "IOException", "{", "final", "feign", ".", "Response", "r", "=", "toFeignResponse", "(", "response", ",", "input", ")", ".", "toBuilder", "(", ")", ".", "request", "(", "input", ")", ".", "build", "(", ")", ";", "responseFuture", ".", "complete", "(", "r", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "encodedType", ".", "set", "(", "bodyType", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodingExceptionGetWrappedInDismiss404Mode", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "thrown", ".", "expect", "(", "DecodeException", ".", "class", ")", ";", "thrown", ".", "expectCause", "(", "isA", "(", "NoSuchElementException", ".", "class", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "newAsyncBuilder", "(", ")", ".", "dismiss404", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "assertEquals", "(", "<NUM_LIT>", ",", "response", ".", "status", "(", ")", ")", ";", "throw", "new", "NoSuchElementException", "(", ")", ";", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "unwrap", "(", "api", ".", "post", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodingDoesNotSwallow404ErrorsInDismiss404Mode", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "final", "TestInterfaceAsync", "api", "=", "newAsyncBuilder", "(", ")", ".", "dismiss404", "(", ")", ".", "errorDecoder", "(", "new", "IllegalArgumentExceptionOn404", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "Void", ">", "cf", "=", "api", ".", "queryMap", "(", "Collections", ".", "<", "String", ",", "Object", ">", "emptyMap", "(", ")", ")", ";", "server", ".", "takeRequest", "(", ")", ";", "unwrap", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "TestInterfaceAsyncBuilder", "dismiss404", "(", ")", "{", "delegate", ".", "dismiss404", "(", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCompletableFutureOfString", "(", ")", "throws", "Exception", "{", "MethodInfo", "mi", "=", "new", "MethodInfo", "(", "AsyncClient", ".", "class", ",", "AsyncClient", ".", "class", ".", "getMethod", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mi", ".", "configKey", "(", ")", ")", ";", "assertTrue", "(", "mi", ".", "isAsyncReturnType", "(", ")", ")", ";", "assertEquals", "(", "String", ".", "class", ",", "mi", ".", "underlyingReturnType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testGenericCompletableFutureOfString", "(", ")", "throws", "Exception", "{", "MethodInfo", "mi", "=", "new", "MethodInfo", "(", "AsyncClient", ".", "class", ",", "AsyncClient", ".", "class", ".", "getMethod", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mi", ".", "configKey", "(", ")", ")", ";", "assertTrue", "(", "mi", ".", "isAsyncReturnType", "(", ")", ")", ";", "assertEquals", "(", "String", ".", "class", ",", "mi", ".", "underlyingReturnType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testString", "(", ")", "throws", "Exception", "{", "MethodInfo", "mi", "=", "new", "MethodInfo", "(", "SyncClient", ".", "class", ",", "SyncClient", ".", "class", ".", "getMethod", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mi", ".", "configKey", "(", ")", ")", ";", "assertFalse", "(", "mi", ".", "isAsyncReturnType", "(", ")", ")", ";", "assertEquals", "(", "String", ".", "class", ",", "mi", ".", "underlyingReturnType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Type", "[", "]", "getActualTypeArguments", "(", ")", "{", "return", "new", "Type", "[", "]", "{", "String", ".", "class", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Type", "getRawType", "(", ")", "{", "return", "List", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testListOfStrings", "(", ")", "throws", "Exception", "{", "MethodInfo", "mi", "=", "new", "MethodInfo", "(", "SyncClient", ".", "class", ",", "SyncClient", ".", "class", ".", "getMethod", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "mi", ".", "configKey", "(", ")", ")", ";", "assertFalse", "(", "mi", ".", "isAsyncReturnType", "(", ")", ")", ";", "assertTrue", "(", "Types", ".", "equals", "(", "new", "ListOfStrings", "(", ")", ",", "mi", ".", "underlyingReturnType", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "defaultContextSupplier", "(", "AsyncContextSupplier", "<", "C", ">", "supplier", ")", "{", "this", ".", "defaultContextSupplier", "=", "supplier", ";", "return", "this", ";", "}", "</s>"]
["<s>", "private", "Client", "stageExecution", "(", "ThreadLocal", "<", "AsyncInvocation", "<", "C", ">", ">", "activeContext", ",", "AsyncClient", "<", "C", ">", "client", ")", "{", "return", "(", "request", ",", "options", ")", "-", ">", "{", "final", "Response", "result", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "request", "(", "request", ")", ".", "build", "(", ")", ";", "final", "AsyncInvocation", "<", "C", ">", "invocationContext", "=", "activeContext", ".", "get", "(", ")", ";", "invocationContext", ".", "setResponseFuture", "(", "client", ".", "execute", "(", "request", ",", "options", ",", "Optional", ".", "ofNullable", "(", "invocationContext", ".", "context", "(", ")", ")", ")", ")", ";", "return", "result", ";", "}", ";", "}", "</s>"]
["<s>", "private", "Decoder", "stageDecode", "(", "ThreadLocal", "<", "AsyncInvocation", "<", "C", ">", ">", "activeContext", ",", "Logger", "logger", ",", "Level", "logLevel", ",", "AsyncResponseHandler", "responseHandler", ")", "{", "return", "(", "response", ",", "type", ")", "-", ">", "{", "final", "AsyncInvocation", "<", "C", ">", "invocationContext", "=", "activeContext", ".", "get", "(", ")", ";", "final", "CompletableFuture", "<", "Object", ">", "result", "=", "new", "CompletableFuture", "<", ">", "(", ")", ";", "invocationContext", ".", "responseFuture", "(", ")", ".", "whenComplete", "(", "(", "r", ",", "t", ")", "-", ">", "{", "final", "long", "elapsedTime", "=", "elapsedTime", "(", "invocationContext", ".", "startNanos", "(", ")", ")", ";", "if", "(", "t", "!", "=", "null", ")", "{", "if", "(", "logLevel", "!", "=", "Logger", ".", "Level", ".", "NONE", "&", "&", "t", "instanceof", "IOException", ")", "{", "final", "IOException", "e", "=", "(", "IOException", ")", "t", ";", "logger", ".", "logIOException", "(", "invocationContext", ".", "configKey", "(", ")", ",", "logLevel", ",", "e", ",", "elapsedTime", ")", ";", "}", "result", ".", "completeExceptionally", "(", "t", ")", ";", "}", "else", "{", "responseHandler", ".", "handleResponse", "(", "result", ",", "invocationContext", ".", "configKey", "(", ")", ",", "r", ",", "invocationContext", ".", "underlyingType", "(", ")", ",", "elapsedTime", ")", ";", "}", "}", ")", ";", "result", ".", "whenComplete", "(", "(", "r", ",", "t", ")", "-", ">", "{", "if", "(", "result", ".", "isCancelled", "(", ")", ")", "{", "invocationContext", ".", "responseFuture", "(", ")", ".", "cancel", "(", "true", ")", ";", "}", "}", ")", ";", "if", "(", "invocationContext", ".", "isAsyncReturnType", "(", ")", ")", "{", "return", "result", ";", "}", "try", "{", "return", "result", ".", "join", "(", ")", ";", "}", "catch", "(", "final", "CompletionException", "e", ")", "{", "final", "Response", "r", "=", "invocationContext", ".", "responseFuture", "(", ")", ".", "join", "(", ")", ";", "Throwable", "cause", "=", "e", ".", "getCause", "(", ")", ";", "if", "(", "cause", "=", "=", "null", ")", "{", "cause", "=", "e", ";", "}", "throw", "new", "AsyncJoinException", "(", "r", ".", "status", "(", ")", ",", "cause", ".", "getMessage", "(", ")", ",", "r", ".", "request", "(", ")", ",", "cause", ")", ";", "}", "}", ";", "}", "</s>"]
["<s>", "public", "B", "logLevel", "(", "Logger", ".", "Level", "logLevel", ")", "{", "this", ".", "logLevel", "=", "logLevel", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "contract", "(", "Contract", "contract", ")", "{", "this", ".", "contract", "=", "contract", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "retryer", "(", "Retryer", "retryer", ")", "{", "this", ".", "retryer", "=", "retryer", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "logger", "(", "Logger", "logger", ")", "{", "this", ".", "logger", "=", "logger", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "encoder", "(", "Encoder", "encoder", ")", "{", "this", ".", "encoder", "=", "encoder", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "decoder", "(", "Decoder", "decoder", ")", "{", "this", ".", "decoder", "=", "decoder", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "doNotCloseAfterDecode", "(", ")", "{", "this", ".", "closeAfterDecode", "=", "false", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "queryMapEncoder", "(", "QueryMapEncoder", "queryMapEncoder", ")", "{", "this", ".", "queryMapEncoder", "=", "queryMapEncoder", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "mapAndDecode", "(", "ResponseMapper", "mapper", ",", "Decoder", "decoder", ")", "{", "this", ".", "decoder", "=", "new", "ResponseMappingDecoder", "(", "mapper", ",", "decoder", ")", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "dismiss404", "(", ")", "{", "this", ".", "dismiss404", "=", "true", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "B", "decode404", "(", ")", "{", "this", ".", "dismiss404", "=", "true", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "errorDecoder", "(", "ErrorDecoder", "errorDecoder", ")", "{", "this", ".", "errorDecoder", "=", "errorDecoder", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "options", "(", "Options", "options", ")", "{", "this", ".", "options", "=", "options", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "requestInterceptor", "(", "RequestInterceptor", "requestInterceptor", ")", "{", "this", ".", "requestInterceptors", ".", "add", "(", "requestInterceptor", ")", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "requestInterceptors", "(", "Iterable", "<", "RequestInterceptor", ">", "requestInterceptors", ")", "{", "this", ".", "requestInterceptors", ".", "clear", "(", ")", ";", "for", "(", "RequestInterceptor", "requestInterceptor", ":", "requestInterceptors", ")", "{", "this", ".", "requestInterceptors", ".", "add", "(", "requestInterceptor", ")", ";", "}", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "invocationHandlerFactory", "(", "InvocationHandlerFactory", "invocationHandlerFactory", ")", "{", "this", ".", "invocationHandlerFactory", "=", "invocationHandlerFactory", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "exceptionPropagationPolicy", "(", "ExceptionPropagationPolicy", "propagationPolicy", ")", "{", "this", ".", "propagationPolicy", "=", "propagationPolicy", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "public", "B", "addCapability", "(", "Capability", "capability", ")", "{", "this", ".", "capabilities", ".", "add", "(", "capability", ")", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "protected", "B", "enrich", "(", ")", "{", "if", "(", "capabilities", ".", "isEmpty", "(", ")", ")", "{", "return", "thisB", ";", "}", "getFieldsToEnrich", "(", ")", ".", "forEach", "(", "field", "-", ">", "{", "field", ".", "setAccessible", "(", "true", ")", ";", "try", "{", "final", "Object", "originalValue", "=", "field", ".", "get", "(", "thisB", ")", ";", "final", "Object", "enriched", ";", "if", "(", "originalValue", "instanceof", "List", ")", "{", "Type", "ownerType", "=", "(", "(", "ParameterizedType", ")", "field", ".", "getGenericType", "(", ")", ")", ".", "getActualTypeArguments", "(", ")", "[", "0", "]", ";", "enriched", "=", "(", "(", "List", ")", "originalValue", ")", ".", "stream", "(", ")", ".", "map", "(", "value", "-", ">", "Capability", ".", "enrich", "(", "value", ",", "(", "Class", "<", "?", ">", ")", "ownerType", ",", "capabilities", ")", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "}", "else", "{", "enriched", "=", "Capability", ".", "enrich", "(", "originalValue", ",", "field", ".", "getType", "(", ")", ",", "capabilities", ")", ";", "}", "field", ".", "set", "(", "thisB", ",", "enriched", ")", ";", "}", "catch", "(", "IllegalArgumentException", "|", "IllegalAccessException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", "+", "field", ",", "e", ")", ";", "}", "finally", "{", "field", ".", "setAccessible", "(", "false", ")", ";", "}", "}", ")", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "List", "<", "Field", ">", "getFieldsToEnrich", "(", ")", "{", "return", "Util", ".", "allFields", "(", "getClass", "(", ")", ")", ".", "stream", "(", ")", ".", "filter", "(", "field", "-", ">", "!", "field", ".", "isSynthetic", "(", ")", ")", ".", "filter", "(", "field", "-", ">", "!", "Objects", ".", "equals", "(", "field", ".", "getName", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "filter", "(", "field", "-", ">", "!", "Objects", ".", "equals", "(", "field", ".", "getName", "(", ")", ",", "\"", "<STR_LIT:B>", "\"", ")", ")", ".", "filter", "(", "field", "-", ">", "!", "field", ".", "getType", "(", ")", ".", "isPrimitive", "(", ")", ")", ".", "filter", "(", "field", "-", ">", "!", "field", ".", "getType", "(", ")", ".", "isEnum", "(", ")", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "}", "</s>"]
["<s>", "static", "Object", "enrich", "(", "Object", "componentToEnrich", ",", "Class", "<", "?", ">", "capabilityToEnrich", ",", "List", "<", "Capability", ">", "capabilities", ")", "{", "return", "capabilities", ".", "stream", "(", ")", ".", "reduce", "(", "componentToEnrich", ",", "(", "target", ",", "capability", ")", "-", ">", "invoke", "(", "target", ",", "capability", ",", "capabilityToEnrich", ")", ",", "(", "component", ",", "enrichedComponent", ")", "-", ">", "enrichedComponent", ")", ";", "}", "</s>"]
["<s>", "static", "Object", "invoke", "(", "Object", "target", ",", "Capability", "capability", ",", "Class", "<", "?", ">", "capabilityToEnrich", ")", "{", "return", "Arrays", ".", "stream", "(", "capability", ".", "getClass", "(", ")", ".", "getMethods", "(", ")", ")", ".", "filter", "(", "method", "-", ">", "method", ".", "getName", "(", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "filter", "(", "method", "-", ">", "method", ".", "getReturnType", "(", ")", ".", "isAssignableFrom", "(", "capabilityToEnrich", ")", ")", ".", "findFirst", "(", ")", ".", "map", "(", "method", "-", ">", "{", "try", "{", "return", "method", ".", "invoke", "(", "capability", ",", "target", ")", ";", "}", "catch", "(", "IllegalAccessException", "|", "IllegalArgumentException", "|", "InvocationTargetException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", "+", "target", ",", "e", ")", ";", "}", "}", ")", ".", "orElse", "(", "target", ")", ";", "}", "</s>"]
["<s>", "default", "AsyncClient", "<", "Object", ">", "enrich", "(", "AsyncClient", "<", "Object", ">", "client", ")", "{", "return", "client", ";", "}", "</s>"]
["<s>", "default", "ErrorDecoder", "enrich", "(", "ErrorDecoder", "decoder", ")", "{", "return", "decoder", ";", "}", "</s>"]
["<s>", "default", "AsyncResponseHandler", "enrich", "(", "AsyncResponseHandler", "asyncResponseHandler", ")", "{", "return", "asyncResponseHandler", ";", "}", "</s>"]
["<s>", "default", "<", "C", ">", "AsyncContextSupplier", "<", "C", ">", "enrich", "(", "AsyncContextSupplier", "<", "C", ">", "asyncContextSupplier", ")", "{", "return", "asyncContextSupplier", ";", "}", "</s>"]
["<s>", "protected", "void", "setInvocationContext", "(", "AsyncInvocation", "<", "C", ">", "invocationContext", ")", "{", "activeContextHolder", ".", "set", "(", "invocationContext", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "clearInvocationContext", "(", ")", "{", "activeContextHolder", ".", "remove", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "List", "<", "Field", ">", "allFields", "(", "Class", "<", "?", ">", "clazz", ")", "{", "if", "(", "Objects", ".", "equals", "(", "clazz", ",", "Object", ".", "class", ")", ")", "{", "return", "Collections", ".", "emptyList", "(", ")", ";", "}", "List", "<", "Field", ">", "fields", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "fields", ".", "addAll", "(", "Arrays", ".", "asList", "(", "clazz", ".", "getDeclaredFields", "(", ")", ")", ")", ";", "fields", ".", "addAll", "(", "allFields", "(", "clazz", ".", "getSuperclass", "(", ")", ")", ")", ";", "return", "fields", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "avoidDuplicationsBetweenBuilders", "(", ")", "{", "List", "<", "String", ">", "builderA", "=", "getExclusiveMethods", "(", "Feign", ".", "Builder", ".", "class", ")", ";", "List", "<", "String", ">", "builderB", "=", "getExclusiveMethods", "(", "AsyncFeign", ".", "AsyncBuilder", ".", "class", ")", ";", "assertThat", "(", "builderA", ")", ".", "noneMatch", "(", "m", "-", ">", "builderB", ".", "contains", "(", "m", ")", ")", ";", "assertThat", "(", "builderB", ")", ".", "noneMatch", "(", "m", "-", ">", "builderA", ".", "contains", "(", "m", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "avoidDuplicationsBetweenAsyncBuilderAndBaseBuilder", "(", ")", "{", "List", "<", "String", ">", "builderA", "=", "getExclusiveMethods", "(", "BaseBuilder", ".", "class", ")", ";", "List", "<", "String", ">", "builderB", "=", "getExclusiveMethods", "(", "AsyncFeign", ".", "AsyncBuilder", ".", "class", ")", ";", "assertThat", "(", "builderA", ")", ".", "noneMatch", "(", "m", "-", ">", "builderB", ".", "contains", "(", "m", ")", ")", ";", "assertThat", "(", "builderB", ")", ".", "noneMatch", "(", "m", "-", ">", "builderA", ".", "contains", "(", "m", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "avoidDuplicationsBetweenBuilderAndBaseBuilder", "(", ")", "{", "List", "<", "String", ">", "builderA", "=", "getExclusiveMethods", "(", "Feign", ".", "Builder", ".", "class", ")", ";", "List", "<", "String", ">", "builderB", "=", "getExclusiveMethods", "(", "BaseBuilder", ".", "class", ")", ";", "assertThat", "(", "builderA", ")", ".", "noneMatch", "(", "m", "-", ">", "builderB", ".", "contains", "(", "m", ")", ")", ";", "assertThat", "(", "builderB", ")", ".", "noneMatch", "(", "m", "-", ">", "builderA", ".", "contains", "(", "m", ")", ")", ";", "}", "</s>"]
["<s>", "private", "List", "<", "String", ">", "getExclusiveMethods", "(", "Class", "<", "?", ">", "clazz", ")", "{", "return", "Arrays", ".", "stream", "(", "clazz", ".", "getDeclaredMethods", "(", ")", ")", ".", "filter", "(", "m", "-", ">", "!", "Objects", ".", "equals", "(", "m", ".", "getName", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "filter", "(", "m", "-", ">", "!", "Objects", ".", "equals", "(", "m", ".", "getName", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "filter", "(", "m", "-", ">", "!", "m", ".", "isSynthetic", "(", ")", ")", ".", "map", "(", "m", "-", ">", "m", ".", "getName", "(", ")", "+", "\"", "<STR_LIT:#>", "\"", "+", "Arrays", ".", "toString", "(", "m", ".", "getParameterTypes", "(", ")", ")", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "checkEnrichTouchesAllAsyncBuilderFields", "(", ")", "throws", "IllegalArgumentException", ",", "IllegalAccessException", "{", "test", "(", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "requestInterceptor", "(", "template", "-", ">", "{", "}", ")", ",", "<NUM_LIT:12>", ")", ";", "}", "</s>"]
["<s>", "private", "void", "test", "(", "BaseBuilder", "<", "?", ">", "builder", ",", "int", "expectedFieldsCount", ")", "throws", "IllegalArgumentException", ",", "IllegalAccessException", "{", "Capability", "mockingCapability", "=", "Mockito", ".", "mock", "(", "Capability", ".", "class", ",", "RETURNS_MOCKS", ")", ";", "BaseBuilder", "<", "?", ">", "enriched", "=", "builder", ".", "addCapability", "(", "mockingCapability", ")", ".", "enrich", "(", ")", ";", "List", "<", "Field", ">", "fields", "=", "enriched", ".", "getFieldsToEnrich", "(", ")", ";", "assertThat", "(", "fields", ")", ".", "hasSize", "(", "expectedFieldsCount", ")", ";", "for", "(", "Field", "field", ":", "fields", ")", "{", "field", ".", "setAccessible", "(", "true", ")", ";", "Object", "mockedValue", "=", "field", ".", "get", "(", "enriched", ")", ";", "if", "(", "mockedValue", "instanceof", "List", ")", "{", "mockedValue", "=", "(", "(", "List", "<", "Object", ">", ")", "mockedValue", ")", ".", "get", "(", "0", ")", ";", "}", "assertTrue", "(", "\"", "<STR_LIT>", "\"", "+", "field", ",", "Mockito", ".", "mockingDetails", "(", "mockedValue", ")", ".", "isMock", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "checkEnrichTouchesAllBuilderFields", "(", ")", "throws", "IllegalArgumentException", ",", "IllegalAccessException", "{", "test", "(", "Feign", ".", "builder", "(", ")", ".", "requestInterceptor", "(", "template", "-", ">", "{", "}", ")", ",", "<NUM_LIT:11>", ")", ";", "}", "</s>"]
["<s>", "protected", "Timer", ".", "Context", "createTimer", "(", "RequestTemplate", "template", ")", "{", "return", "metricRegistry", ".", "timer", "(", "MetricRegistry", ".", "name", "(", "metricName", ".", "metricName", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ")", ",", "\"", "<STR_LIT>", "\"", ",", "template", ".", "methodMetadata", "(", ")", ".", "template", "(", ")", ".", "path", "(", ")", ")", ",", "metricSuppliers", ".", "timers", "(", ")", ")", ".", "time", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "recordSuccess", "(", "RequestTemplate", "template", ",", "Response", "response", ")", "{", "metricRegistry", ".", "meter", "(", "MetricRegistry", ".", "name", "(", "httpResponseCode", "(", "template", ")", ",", "\"", "<STR_LIT>", "\"", ",", "response", ".", "status", "(", ")", "/", "<NUM_LIT:100>", "+", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "valueOf", "(", "response", ".", "status", "(", ")", ")", ",", "\"", "<STR_LIT>", "\"", ",", "template", ".", "methodMetadata", "(", ")", ".", "template", "(", ")", ".", "path", "(", ")", ")", ",", "metricSuppliers", ".", "meters", "(", ")", ")", ".", "mark", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "recordFailure", "(", "RequestTemplate", "template", ",", "FeignException", "e", ")", "{", "metricRegistry", ".", "meter", "(", "MetricRegistry", ".", "name", "(", "httpResponseCode", "(", "template", ")", ",", "\"", "<STR_LIT>", "\"", ",", "e", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "e", ".", "status", "(", ")", "/", "<NUM_LIT:100>", "+", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "valueOf", "(", "e", ".", "status", "(", ")", ")", ",", "\"", "<STR_LIT>", "\"", ",", "template", ".", "methodMetadata", "(", ")", ".", "template", "(", ")", ".", "path", "(", ")", ")", ",", "metricSuppliers", ".", "meters", "(", ")", ")", ".", "mark", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "recordFailure", "(", "RequestTemplate", "template", ",", "Exception", "e", ")", "{", "metricRegistry", ".", "meter", "(", "MetricRegistry", ".", "name", "(", "httpResponseCode", "(", "template", ")", ",", "\"", "<STR_LIT>", "\"", ",", "e", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "template", ".", "methodMetadata", "(", ")", ".", "template", "(", ")", ".", "path", "(", ")", ")", ",", "metricSuppliers", ".", "meters", "(", ")", ")", ".", "mark", "(", ")", ";", "}", "</s>"]
["<s>", "private", "String", "httpResponseCode", "(", "RequestTemplate", "template", ")", "{", "return", "metricName", ".", "metricName", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "CompletableFuture", "<", "Response", ">", "execute", "(", "Request", "request", ",", "Options", "options", ",", "Optional", "<", "Object", ">", "requestContext", ")", "{", "final", "RequestTemplate", "template", "=", "request", ".", "requestTemplate", "(", ")", ";", "final", "Timer", ".", "Context", "timer", "=", "createTimer", "(", "template", ")", ";", "return", "asyncClient", ".", "execute", "(", "request", ",", "options", ",", "requestContext", ")", ".", "whenComplete", "(", "(", "response", ",", "th", ")", "-", ">", "{", "if", "(", "th", "=", "=", "null", ")", "{", "recordSuccess", "(", "template", ",", "response", ")", ";", "}", "else", "if", "(", "th", "instanceof", "FeignException", ")", "{", "FeignException", "e", "=", "(", "FeignException", ")", "th", ";", "recordFailure", "(", "template", ",", "e", ")", ";", "}", "else", "if", "(", "th", "instanceof", "Exception", ")", "{", "Exception", "e", "=", "(", "Exception", ")", "th", ";", "recordFailure", "(", "template", ",", "e", ")", ";", "}", "}", ")", ".", "whenComplete", "(", "(", "response", ",", "th", ")", "-", ">", "timer", ".", "close", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncClient", "<", "Object", ">", "enrich", "(", "AsyncClient", "<", "Object", ">", "client", ")", "{", "return", "new", "MeteredAsyncClient", "(", "client", ",", "metricRegistry", ",", "metricSuppliers", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "boolean", "isAsyncClientMetric", "(", "String", "metricId", ")", "{", "return", "metricId", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "protected", "Timer", ".", "Context", "createTimer", "(", "RequestTemplate", "template", ")", "{", "return", "metricRegistry", ".", "timer", "(", "metricName", ".", "metricName", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "template", ".", "methodMetadata", "(", ")", ".", "template", "(", ")", ".", "path", "(", ")", ")", ",", "metricSuppliers", ".", "timers", "(", ")", ")", ".", "time", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "recordSuccess", "(", "RequestTemplate", "template", ",", "Response", "response", ")", "{", "metricRegistry", ".", "counter", "(", "httpResponseCode", "(", "template", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "String", ".", "valueOf", "(", "response", ".", "status", "(", ")", ")", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "response", ".", "status", "(", ")", "/", "<NUM_LIT:100>", "+", "\"", "<STR_LIT>", "\"", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "template", ".", "methodMetadata", "(", ")", ".", "template", "(", ")", ".", "path", "(", ")", ")", ")", ".", "inc", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "recordFailure", "(", "RequestTemplate", "template", ",", "FeignException", "e", ")", "{", "metricRegistry", ".", "counter", "(", "httpResponseCode", "(", "template", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "e", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "String", ".", "valueOf", "(", "e", ".", "status", "(", ")", ")", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "e", ".", "status", "(", ")", "/", "<NUM_LIT:100>", "+", "\"", "<STR_LIT>", "\"", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "template", ".", "methodMetadata", "(", ")", ".", "template", "(", ")", ".", "path", "(", ")", ")", ")", ".", "inc", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "recordFailure", "(", "RequestTemplate", "template", ",", "Exception", "e", ")", "{", "metricRegistry", ".", "counter", "(", "httpResponseCode", "(", "template", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "e", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "template", ".", "methodMetadata", "(", ")", ".", "template", "(", ")", ".", "path", "(", ")", ")", ")", ".", "inc", "(", ")", ";", "}", "</s>"]
["<s>", "private", "MetricName", "httpResponseCode", "(", "RequestTemplate", "template", ")", "{", "return", "metricName", ".", "metricName", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "boolean", "isAsyncClientMetric", "(", "MetricName", "metricId", ")", "{", "return", "metricId", ".", "getKey", "(", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "countResponseCode", "(", "Request", "request", ",", "Response", "response", ",", "Options", "options", ",", "int", "responseStatus", ",", "Exception", "e", ")", "{", "final", "Tag", "[", "]", "extraTags", "=", "extraTags", "(", "request", ",", "response", ",", "options", ",", "e", ")", ";", "final", "RequestTemplate", "template", "=", "request", ".", "requestTemplate", "(", ")", ";", "final", "Tags", "allTags", "=", "metricTagResolver", ".", "tag", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ",", "e", ",", "Tag", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "String", ".", "valueOf", "(", "responseStatus", ")", ")", ",", "Tag", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "responseStatus", "/", "<NUM_LIT:100>", "+", "\"", "<STR_LIT>", "\"", ")", ",", "Tag", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "template", ".", "methodMetadata", "(", ")", ".", "template", "(", ")", ".", "path", "(", ")", ")", ")", ".", "and", "(", "extraTags", ")", ";", "meterRegistry", ".", "counter", "(", "metricName", ".", "name", "(", "\"", "<STR_LIT>", "\"", ")", ",", "allTags", ")", ".", "increment", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "Timer", "createTimer", "(", "Request", "request", ",", "Response", "response", ",", "Options", "options", ",", "Exception", "e", ")", "{", "final", "RequestTemplate", "template", "=", "request", ".", "requestTemplate", "(", ")", ";", "final", "Tags", "allTags", "=", "metricTagResolver", ".", "tag", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ",", "e", ",", "Tag", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "template", ".", "methodMetadata", "(", ")", ".", "template", "(", ")", ".", "path", "(", ")", ")", ")", ".", "and", "(", "extraTags", "(", "request", ",", "response", ",", "options", ",", "e", ")", ")", ";", "return", "meterRegistry", ".", "timer", "(", "metricName", ".", "name", "(", "e", ")", ",", "allTags", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "CompletableFuture", "<", "Response", ">", "execute", "(", "Request", "request", ",", "Options", "options", ",", "Optional", "<", "Object", ">", "requestContext", ")", "{", "final", "Timer", ".", "Sample", "sample", "=", "Timer", ".", "start", "(", "meterRegistry", ")", ";", "return", "client", ".", "execute", "(", "request", ",", "options", ",", "requestContext", ")", ".", "whenComplete", "(", "(", "response", ",", "th", ")", "-", ">", "{", "Timer", "timer", ";", "if", "(", "th", "=", "=", "null", ")", "{", "countResponseCode", "(", "request", ",", "response", ",", "options", ",", "response", ".", "status", "(", ")", ",", "null", ")", ";", "timer", "=", "createTimer", "(", "request", ",", "response", ",", "options", ",", "null", ")", ";", "}", "else", "if", "(", "th", "instanceof", "FeignException", ")", "{", "FeignException", "e", "=", "(", "FeignException", ")", "th", ";", "timer", "=", "createTimer", "(", "request", ",", "response", ",", "options", ",", "e", ")", ";", "countResponseCode", "(", "request", ",", "response", ",", "options", ",", "e", ".", "status", "(", ")", ",", "e", ")", ";", "}", "else", "if", "(", "th", "instanceof", "Exception", ")", "{", "Exception", "e", "=", "(", "Exception", ")", "th", ";", "timer", "=", "createTimer", "(", "request", ",", "response", ",", "options", ",", "e", ")", ";", "}", "else", "{", "timer", "=", "createTimer", "(", "request", ",", "response", ",", "options", ",", "null", ")", ";", "}", "sample", ".", "stop", "(", "timer", ")", ";", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncClient", "<", "Object", ">", "enrich", "(", "AsyncClient", "<", "Object", ">", "client", ")", "{", "return", "new", "MeteredAsyncClient", "(", "client", ",", "meterRegistry", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "final", "void", "addAsyncMetricsCapability", "(", ")", "{", "final", "CompletableSource", "source", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "client", "(", "new", "MockClient", "(", ")", ".", "ok", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "addCapability", "(", "createMetricCapability", "(", ")", ")", ".", "target", "(", "new", "MockTarget", "<", ">", "(", "CompletableSource", ".", "class", ")", ")", ";", "source", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "join", "(", ")", ";", "assertMetricsCapability", "(", "true", ")", ";", "}", "</s>"]
["<s>", "private", "void", "assertMetricsCapability", "(", "boolean", "asyncClient", ")", "{", "Map", "<", "METRIC_ID", ",", "METRIC", ">", "metrics", "=", "getFeignMetrics", "(", ")", ";", "assertThat", "(", "metrics", ",", "aMapWithSize", "(", "<NUM_LIT:7>", ")", ")", ";", "metrics", ".", "keySet", "(", ")", ".", "forEach", "(", "metricId", "-", ">", "assertThat", "(", "\"", "<STR_LIT>", "\"", "+", "metricId", ",", "doesMetricIdIncludeClient", "(", "metricId", ")", ")", ")", ";", "metrics", ".", "keySet", "(", ")", ".", "forEach", "(", "metricId", "-", ">", "assertThat", "(", "\"", "<STR_LIT>", "\"", "+", "metricId", ",", "doesMetricIncludeVerb", "(", "metricId", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "metrics", ".", "keySet", "(", ")", ".", "forEach", "(", "metricId", "-", ">", "assertThat", "(", "\"", "<STR_LIT>", "\"", "+", "metricId", ",", "doesMetricIncludeHost", "(", "metricId", ")", ")", ")", ";", "final", "Map", "<", "METRIC_ID", ",", "METRIC", ">", "clientMetrics", ";", "if", "(", "asyncClient", ")", "{", "clientMetrics", "=", "getFeignMetrics", "(", ")", ".", "entrySet", "(", ")", ".", "stream", "(", ")", ".", "filter", "(", "entry", "-", ">", "isAsyncClientMetric", "(", "entry", ".", "getKey", "(", ")", ")", ")", ".", "collect", "(", "Collectors", ".", "toMap", "(", "Map", ".", "Entry", ":", ":", "getKey", ",", "Map", ".", "Entry", ":", ":", "getValue", ")", ")", ";", "}", "else", "{", "clientMetrics", "=", "getFeignMetrics", "(", ")", ".", "entrySet", "(", ")", ".", "stream", "(", ")", ".", "filter", "(", "entry", "-", ">", "isClientMetric", "(", "entry", ".", "getKey", "(", ")", ")", ")", ".", "collect", "(", "Collectors", ".", "toMap", "(", "Map", ".", "Entry", ":", ":", "getKey", ",", "Map", ".", "Entry", ":", ":", "getValue", ")", ")", ";", "}", "assertThat", "(", "clientMetrics", ",", "aMapWithSize", "(", "<NUM_LIT:2>", ")", ")", ";", "clientMetrics", ".", "values", "(", ")", ".", "stream", "(", ")", ".", "filter", "(", "this", ":", ":", "doesMetricHasCounter", ")", ".", "forEach", "(", "metric", "-", ">", "assertEquals", "(", "1", ",", "getMetricCounter", "(", "metric", ")", ")", ")", ";", "final", "Map", "<", "METRIC_ID", ",", "METRIC", ">", "decoderMetrics", "=", "getFeignMetrics", "(", ")", ".", "entrySet", "(", ")", ".", "stream", "(", ")", ".", "filter", "(", "entry", "-", ">", "isDecoderMetric", "(", "entry", ".", "getKey", "(", ")", ")", ")", ".", "collect", "(", "Collectors", ".", "toMap", "(", "Map", ".", "Entry", ":", ":", "getKey", ",", "Map", ".", "Entry", ":", ":", "getValue", ")", ")", ";", "assertThat", "(", "decoderMetrics", ",", "aMapWithSize", "(", "<NUM_LIT:2>", ")", ")", ";", "decoderMetrics", ".", "values", "(", ")", ".", "stream", "(", ")", ".", "filter", "(", "this", ":", ":", "doesMetricHasCounter", ")", ".", "forEach", "(", "metric", "-", ">", "assertEquals", "(", "1", ",", "getMetricCounter", "(", "metric", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "boolean", "isAsyncClientMetric", "(", "Id", "metricId", ")", "{", "return", "metricId", ".", "getName", "(", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "CompletableFuture", "<", "Response", ">", "execute", "(", "Request", "request", ",", "Request", ".", "Options", "options", ",", "Optional", "<", "Object", ">", "requestContext", ")", "{", "RequestKey", "requestKey", "=", "RequestKey", ".", "create", "(", "request", ")", ";", "Response", ".", "Builder", "responseBuilder", ";", "if", "(", "sequential", ")", "{", "responseBuilder", "=", "executeSequential", "(", "requestKey", ")", ";", "}", "else", "{", "responseBuilder", "=", "executeAny", "(", "request", ",", "requestKey", ")", ";", "}", "responseBuilder", ".", "protocolVersion", "(", "ProtocolVersion", ".", "MOCK", ")", ";", "return", "CompletableFuture", ".", "completedFuture", "(", "responseBuilder", ".", "request", "(", "request", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "B", "responseInterceptor", "(", "ResponseInterceptor", "responseInterceptor", ")", "{", "this", ".", "responseInterceptor", "=", "responseInterceptor", ";", "return", "thisB", ";", "}", "</s>"]
["<s>", "default", "ResponseInterceptor", "enrich", "(", "ResponseInterceptor", "responseInterceptor", ")", "{", "return", "responseInterceptor", ";", "}", "</s>"]
["<s>", "public", "Object", "proceed", "(", ")", "{", "try", "{", "return", "decoder", ".", "decode", "(", "response", ",", "returnType", ")", ";", "}", "catch", "(", "final", "FeignException", "e", ")", "{", "throw", "e", ";", "}", "catch", "(", "final", "RuntimeException", "e", ")", "{", "throw", "new", "DecodeException", "(", "response", ".", "status", "(", ")", ",", "e", ".", "getMessage", "(", ")", ",", "response", ".", "request", "(", ")", ",", "e", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "errorReading", "(", "response", ".", "request", "(", ")", ",", "response", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Decoder", "decoder", "(", ")", "{", "return", "decoder", ";", "}", "</s>"]
["<s>", "public", "Type", "returnType", "(", ")", "{", "return", "returnType", ";", "}", "</s>"]
["<s>", "public", "Response", "response", "(", ")", "{", "return", "response", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "MethodMetadata", "parseAndValidateMetadata", "(", "Class", "<", "?", ">", "targetType", ",", "Method", "method", ")", "{", "return", "super", ".", "parseAndValidateMetadata", "(", "targetType", ",", "method", ")", ";", "}", "</s>"]
["<s>", "private", "void", "handleProducesAnnotation", "(", "Produces", "produces", ",", "MethodMetadata", "data", ")", "{", "final", "String", "[", "]", "serverProduces", "=", "removeValues", "(", "produces", ".", "value", "(", ")", ",", "mediaType", "-", ">", "emptyToNull", "(", "mediaType", ")", "=", "=", "null", ",", "String", ".", "class", ")", ";", "checkState", "(", "serverProduces", ".", "length", ">", "0", ",", "\"", "<STR_LIT>", "\"", ",", "data", ".", "configKey", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "header", "(", "ACCEPT", ",", "Collections", ".", "emptyList", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "header", "(", "ACCEPT", ",", "serverProduces", ")", ";", "}", "</s>"]
["<s>", "private", "void", "handleConsumesAnnotation", "(", "Consumes", "consumes", ",", "MethodMetadata", "data", ")", "{", "final", "String", "[", "]", "serverConsumes", "=", "removeValues", "(", "consumes", ".", "value", "(", ")", ",", "mediaType", "-", ">", "emptyToNull", "(", "mediaType", ")", "=", "=", "null", ",", "String", ".", "class", ")", ";", "checkState", "(", "serverConsumes", ".", "length", ">", "0", ",", "\"", "<STR_LIT>", "\"", ",", "data", ".", "configKey", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "header", "(", "CONTENT_TYPE", ",", "serverConsumes", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "JakartaContract", "createContract", "(", ")", "{", "return", "new", "JakartaContract", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "MethodMetadata", "parseAndValidateMetadata", "(", "Class", "<", "?", ">", "targetType", ",", "String", "method", ",", "Class", "<", "?", ">", ".", ".", ".", "parameterTypes", ")", "throws", "NoSuchMethodException", "{", "return", "contract", ".", "parseAndValidateMetadata", "(", "targetType", ",", "targetType", ".", "getMethod", "(", "method", ",", "parameterTypes", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "methodsClass", "(", ")", "{", "return", "Methods", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "customMethodClass", "(", ")", "{", "return", "CustomMethod", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "withQueryParamsInPathClass", "(", ")", "{", "return", "WithQueryParamsInPath", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "producesAndConsumesClass", "(", ")", "{", "return", "ProducesAndConsumes", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "bodyParamsClass", "(", ")", "{", "return", "BodyParams", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "emptyPathOnTypeClass", "(", ")", "{", "return", "EmptyPathOnType", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "pathOnTypeClass", "(", ")", "{", "return", "PathOnType", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "complexPathOnTypeClass", "(", ")", "{", "return", "ComplexPathOnType", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "withURIParamClass", "(", ")", "{", "return", "WithURIParam", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "withPathAndQueryParamsClass", "(", ")", "{", "return", "WithPathAndQueryParams", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "formParamsClass", "(", ")", "{", "return", "FormParams", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "headerParamsClass", "(", ")", "{", "return", "HeaderParams", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "pathsWithoutAnySlashesClass", "(", ")", "{", "return", "PathsWithoutAnySlashes", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "pathsWithSomeSlashesClass", "(", ")", "{", "return", "PathsWithSomeSlashes", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "pathsWithSomeOtherSlashesClass", "(", ")", "{", "return", "PathsWithSomeOtherSlashes", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "classRootPathClass", "(", ")", "{", "return", "ClassRootPath", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "classPathWithTrailingSlashClass", "(", ")", "{", "return", "ClassPathWithTrailingSlash", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "methodWithFirstPathThenGetWithoutLeadingSlashClass", "(", ")", "{", "return", "MethodWithFirstPathThenGetWithoutLeadingSlash", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Class", "<", "?", ">", "mixedAnnotationsClass", "(", ")", "{", "return", "MixedAnnotations", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "httpMethods", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "methodsClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "methodsClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "methodsClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "methodsClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customMethodWithoutPath", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "customMethodClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasUrl", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryParamsInPathExtract", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "withQueryParamsInPathClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "withQueryParamsInPathClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "withQueryParamsInPathClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "withQueryParamsInPathClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "withQueryParamsInPathClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "new", "ArrayList", "<", ">", "(", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "producesAddsAcceptHeader", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "producesAndConsumesClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "producesMultipleAddsAcceptHeader", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "producesAndConsumesClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "producesNada", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "producesAndConsumesClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "producesEmpty", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "producesAndConsumesClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "consumesAddsContentTypeHeader", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "producesAndConsumesClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "consumesMultipleAddsContentTypeHeader", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "producesAndConsumesClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "consumesNada", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "producesAndConsumesClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "consumesEmpty", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "producesAndConsumesClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "producesAndConsumesOnClassAddsHeader", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "producesAndConsumesClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "bodyParamIsGeneric", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "bodyParamsClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "List", ".", "class", ")", ";", "assertThat", "(", "md", ".", "bodyIndex", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "md", ".", "bodyType", "(", ")", ")", ".", "isEqualTo", "(", "JAXRSContractTestSupport", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getGenericType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "tooManyBodies", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "bodyParamsClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "List", ".", "class", ",", "List", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyPathOnType", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "emptyPathOnTypeClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyPathOnTypeSpecific", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "emptyPathOnTypeClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsePathMethod", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "pathOnTypeClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "pathOnTypeClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyPathOnMethod", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "pathOnTypeClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyPathParam", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "pathOnTypeClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathParamWithSpaces", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "pathOnTypeClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "regexPathOnMethodOrType", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "pathOnTypeClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "pathOnTypeClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "complexPathOnTypeClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "withPathAndURIParams", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "withURIParamClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "URI", ".", "class", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ",", "entry", "(", "<NUM_LIT:2>", ",", "asList", "(", "\"", "<STR_LIT:2>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "urlIndex", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathAndQueryParams", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "withPathAndQueryParamsClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "int", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "1", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "<NUM_LIT:2>", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyQueryParam", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "withPathAndQueryParamsClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "formParamsParseIntoIndexToName", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "formParamsClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "formParams", "(", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "1", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "<NUM_LIT:2>", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "formParamsDoesNotSetBodyType", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "formParamsClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "bodyType", "(", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyFormParam", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "formParamsClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerParamsParseIntoIndexToName", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "headerParamsClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyHeaderParam", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "headerParamsClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathsWithoutSlashesParseCorrectly", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "pathsWithoutAnySlashesClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathsWithSomeSlashesParseCorrectly", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "pathsWithSomeSlashesClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathsWithSomeOtherSlashesParseCorrectly", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "pathsWithSomeOtherSlashesClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "classWithRootPathParsesCorrectly", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "classRootPathClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "classPathWithTrailingSlashParsesCorrectly", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "classPathWithTrailingSlashClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "methodPathWithoutLeadingSlashParsesCorrectly", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "methodWithFirstPathThenGetWithoutLeadingSlashClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "producesWithHeaderParamContainAllHeaders", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "mixedAnnotationsClass", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncBuilder", "<", "C", ">", "mapAndDecode", "(", "ResponseMapper", "mapper", ",", "Decoder", "decoder", ")", "{", "return", "super", ".", "mapAndDecode", "(", "mapper", ",", "decoder", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncBuilder", "<", "C", ">", "decoder", "(", "Decoder", "decoder", ")", "{", "return", "super", ".", "decoder", "(", "decoder", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Deprecated", "public", "AsyncBuilder", "<", "C", ">", "decode404", "(", ")", "{", "return", "super", ".", "decode404", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncBuilder", "<", "C", ">", "dismiss404", "(", ")", "{", "return", "super", ".", "dismiss404", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncBuilder", "<", "C", ">", "errorDecoder", "(", "ErrorDecoder", "errorDecoder", ")", "{", "return", "super", ".", "errorDecoder", "(", "errorDecoder", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncBuilder", "<", "C", ">", "doNotCloseAfterDecode", "(", ")", "{", "return", "super", ".", "doNotCloseAfterDecode", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncBuilder", "<", "C", ">", "logLevel", "(", "Level", "logLevel", ")", "{", "return", "super", ".", "logLevel", "(", "logLevel", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncBuilder", "<", "C", ">", "contract", "(", "Contract", "contract", ")", "{", "return", "super", ".", "contract", "(", "contract", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncBuilder", "<", "C", ">", "logger", "(", "Logger", "logger", ")", "{", "return", "super", ".", "logger", "(", "logger", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncBuilder", "<", "C", ">", "encoder", "(", "Encoder", "encoder", ")", "{", "return", "super", ".", "encoder", "(", "encoder", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncBuilder", "<", "C", ">", "queryMapEncoder", "(", "QueryMapEncoder", "queryMapEncoder", ")", "{", "return", "super", ".", "queryMapEncoder", "(", "queryMapEncoder", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncBuilder", "<", "C", ">", "options", "(", "Options", "options", ")", "{", "return", "super", ".", "options", "(", "options", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncBuilder", "<", "C", ">", "requestInterceptor", "(", "RequestInterceptor", "requestInterceptor", ")", "{", "return", "super", ".", "requestInterceptor", "(", "requestInterceptor", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncBuilder", "<", "C", ">", "requestInterceptors", "(", "Iterable", "<", "RequestInterceptor", ">", "requestInterceptors", ")", "{", "return", "super", ".", "requestInterceptors", "(", "requestInterceptors", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "AsyncBuilder", "<", "C", ">", "invocationHandlerFactory", "(", "InvocationHandlerFactory", "invocationHandlerFactory", ")", "{", "return", "super", ".", "invocationHandlerFactory", "(", "invocationHandlerFactory", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "logLevel", "(", "Logger", ".", "Level", "logLevel", ")", "{", "return", "super", ".", "logLevel", "(", "logLevel", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "contract", "(", "Contract", "contract", ")", "{", "return", "super", ".", "contract", "(", "contract", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "retryer", "(", "Retryer", "retryer", ")", "{", "return", "super", ".", "retryer", "(", "retryer", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "logger", "(", "Logger", "logger", ")", "{", "return", "super", ".", "logger", "(", "logger", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "encoder", "(", "Encoder", "encoder", ")", "{", "return", "super", ".", "encoder", "(", "encoder", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "decoder", "(", "Decoder", "decoder", ")", "{", "return", "super", ".", "decoder", "(", "decoder", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "queryMapEncoder", "(", "QueryMapEncoder", "queryMapEncoder", ")", "{", "return", "super", ".", "queryMapEncoder", "(", "queryMapEncoder", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "mapAndDecode", "(", "ResponseMapper", "mapper", ",", "Decoder", "decoder", ")", "{", "return", "super", ".", "mapAndDecode", "(", "mapper", ",", "decoder", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "@", "Override", "public", "Builder", "decode404", "(", ")", "{", "return", "super", ".", "decode404", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "errorDecoder", "(", "ErrorDecoder", "errorDecoder", ")", "{", "return", "super", ".", "errorDecoder", "(", "errorDecoder", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "options", "(", "Options", "options", ")", "{", "return", "super", ".", "options", "(", "options", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "requestInterceptor", "(", "RequestInterceptor", "requestInterceptor", ")", "{", "return", "super", ".", "requestInterceptor", "(", "requestInterceptor", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "requestInterceptors", "(", "Iterable", "<", "RequestInterceptor", ">", "requestInterceptors", ")", "{", "return", "super", ".", "requestInterceptors", "(", "requestInterceptors", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "invocationHandlerFactory", "(", "InvocationHandlerFactory", "invocationHandlerFactory", ")", "{", "return", "super", ".", "invocationHandlerFactory", "(", "invocationHandlerFactory", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "doNotCloseAfterDecode", "(", ")", "{", "return", "super", ".", "doNotCloseAfterDecode", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "exceptionPropagationPolicy", "(", "ExceptionPropagationPolicy", "propagationPolicy", ")", "{", "return", "super", ".", "exceptionPropagationPolicy", "(", "propagationPolicy", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "addCapability", "(", "Capability", "capability", ")", "{", "return", "super", ".", "addCapability", "(", "capability", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canExceptCaseInsensitiveHeader", "(", ")", "throws", "Exception", "{", "final", "String", "responseData", "=", "\"", "<STR_LIT>", "\"", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "addHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "setBody", "(", "new", "Buffer", "(", ")", ".", "write", "(", "compress", "(", "responseData", ")", ")", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "String", "result", "=", "api", ".", "get", "(", ")", ";", "assertThat", "(", "result", ")", ".", "isNotNull", "(", ")", ".", "isEqualToIgnoringCase", "(", "responseData", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "canSupportGzip", "(", ")", "throws", "Exception", "{", "assumeFalse", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "canSupportDeflate", "(", ")", "throws", "Exception", "{", "assumeFalse", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "canExceptCaseInsensitiveHeader", "(", ")", "throws", "Exception", "{", "assumeFalse", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "canSupportGzip", "(", ")", "throws", "Exception", "{", "assumeFalse", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "canSupportDeflate", "(", ")", "throws", "Exception", "{", "assumeFalse", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "canExceptCaseInsensitiveHeader", "(", ")", "throws", "Exception", "{", "assumeFalse", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "canSupportGzip", "(", ")", "throws", "Exception", "{", "assumeFalse", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "canSupportDeflate", "(", ")", "throws", "Exception", "{", "assumeFalse", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "canExceptCaseInsensitiveHeader", "(", ")", "throws", "Exception", "{", "assumeFalse", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testContentTypeHeaderGetsAddedOnce", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "postWithContentType", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "UTF_8", ")", ")", ")", ";", "MockWebServerAssertions", ".", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT:3>", "\"", ")", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "runMain", "(", ")", "throws", "Exception", "{", "final", "String", "jar", "=", "Arrays", ".", "stream", "(", "new", "File", "(", "\"", "<STR_LIT>", "\"", ")", ".", "listFiles", "(", ")", ")", ".", "filter", "(", "file", "-", ">", "file", ".", "getName", "(", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", "&", "&", "file", ".", "getName", "(", ")", ".", "endsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "findFirst", "(", ")", ".", "map", "(", "File", ":", ":", "getAbsolutePath", ")", ".", "get", "(", ")", ";", "final", "String", "line", "=", "\"", "<STR_LIT>", "\"", "+", "jar", ";", "final", "CommandLine", "cmdLine", "=", "CommandLine", ".", "parse", "(", "line", ")", ";", "final", "int", "exitValue", "=", "new", "DefaultExecutor", "(", ")", ".", "execute", "(", "cmdLine", ")", ";", "assertThat", "(", "exitValue", ",", "CoreMatchers", ".", "equalTo", "(", "0", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "<", "C", ">", "CoroutineBuilder", "<", "C", ">", "coBuilder", "(", ")", "{", "return", "new", "CoroutineBuilder", "<", ">", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "invoke", "(", "Object", "proxy", ",", "Method", "method", ",", "Object", "[", "]", "args", ")", "throws", "Throwable", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", "&", "&", "method", ".", "getParameterCount", "(", ")", "=", "=", "1", ")", "{", "try", "{", "final", "Object", "otherHandler", "=", "args", ".", "length", ">", "0", "&", "&", "args", "[", "0", "]", "!", "=", "null", "?", "Proxy", ".", "getInvocationHandler", "(", "args", "[", "0", "]", ")", ":", "null", ";", "return", "equals", "(", "otherHandler", ")", ";", "}", "catch", "(", "final", "IllegalArgumentException", "e", ")", "{", "return", "false", ";", "}", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", "&", "&", "method", ".", "getParameterCount", "(", ")", "=", "=", "0", ")", "{", "return", "hashCode", "(", ")", ";", "}", "else", "if", "(", "\"", "<STR_LIT:String>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", "&", "&", "method", ".", "getParameterCount", "(", ")", "=", "=", "0", ")", "{", "return", "toString", "(", ")", ";", "}", "final", "MethodInfo", "methodInfo", "=", "methodInfoLookup", ".", "computeIfAbsent", "(", "method", ",", "m", "-", ">", "KotlinMethodInfo", ".", "createInstance", "(", "type", ",", "m", ")", ")", ";", "setInvocationContext", "(", "new", "AsyncInvocation", "<", ">", "(", "context", ",", "methodInfo", ")", ")", ";", "try", "{", "if", "(", "MethodKt", ".", "isSuspend", "(", "method", ")", ")", "{", "CompletableFuture", "<", "?", ">", "result", "=", "(", "CompletableFuture", "<", "?", ">", ")", "method", ".", "invoke", "(", "instance", ",", "args", ")", ";", "Continuation", "<", "Object", ">", "continuation", "=", "(", "Continuation", "<", "Object", ">", ")", "args", "[", "args", ".", "length", "-", "1", "]", ";", "return", "FutureKt", ".", "await", "(", "result", ",", "continuation", ")", ";", "}", "return", "method", ".", "invoke", "(", "instance", ",", "args", ")", ";", "}", "catch", "(", "final", "InvocationTargetException", "e", ")", "{", "Throwable", "cause", "=", "e", ".", "getCause", "(", ")", ";", "if", "(", "cause", "instanceof", "AsyncJoinException", ")", "{", "cause", "=", "cause", ".", "getCause", "(", ")", ";", "}", "throw", "cause", ";", "}", "finally", "{", "clearInvocationContext", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "obj", "instanceof", "CoroutineFeignInvocationHandler", ")", "{", "final", "CoroutineFeignInvocationHandler", "<", "?", ">", "other", "=", "(", "CoroutineFeignInvocationHandler", "<", "?", ">", ")", "obj", ";", "return", "instance", ".", "equals", "(", "other", ".", "instance", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "CoroutineBuilder", "<", "C", ">", "defaultContextSupplier", "(", "Supplier", "<", "C", ">", "supplier", ")", "{", "this", ".", "defaultContextSupplier", "=", "supplier", ":", ":", "get", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "CoroutineBuilder", "<", "C", ">", "client", "(", "AsyncClient", "<", "C", ">", "client", ")", "{", "this", ".", "client", "=", "client", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "CoroutineBuilder", "<", "C", ">", "defaultContextSupplier", "(", "AsyncContextSupplier", "<", "C", ">", "supplier", ")", "{", "this", ".", "defaultContextSupplier", "=", "supplier", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "CoroutineFeign", "<", "C", ">", "build", "(", ")", "{", "super", ".", "enrich", "(", ")", ";", "ThreadLocal", "<", "AsyncInvocation", "<", "C", ">", ">", "activeContextHolder", "=", "new", "ThreadLocal", "<", ">", "(", ")", ";", "AsyncResponseHandler", "responseHandler", "=", "(", "AsyncResponseHandler", ")", "Capability", ".", "enrich", "(", "new", "AsyncResponseHandler", "(", "logLevel", ",", "logger", ",", "decoder", ",", "errorDecoder", ",", "dismiss404", ",", "closeAfterDecode", ",", "responseInterceptor", ")", ",", "AsyncResponseHandler", ".", "class", ",", "capabilities", ")", ";", "return", "new", "CoroutineFeign", "<", ">", "(", "Feign", ".", "builder", "(", ")", ".", "logLevel", "(", "logLevel", ")", ".", "client", "(", "stageExecution", "(", "activeContextHolder", ",", "client", ")", ")", ".", "decoder", "(", "stageDecode", "(", "activeContextHolder", ",", "logger", ",", "logLevel", ",", "responseHandler", ")", ")", ".", "forceDecoding", "(", ")", ".", "contract", "(", "contract", ")", ".", "logger", "(", "logger", ")", ".", "encoder", "(", "encoder", ")", ".", "queryMapEncoder", "(", "queryMapEncoder", ")", ".", "options", "(", "options", ")", ".", "requestInterceptors", "(", "requestInterceptors", ")", ".", "responseInterceptor", "(", "responseInterceptor", ")", ".", "invocationHandlerFactory", "(", "invocationHandlerFactory", ")", ".", "build", "(", ")", ",", "defaultContextSupplier", ",", "activeContextHolder", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "<", "T", ">", "T", "wrap", "(", "Class", "<", "T", ">", "type", ",", "T", "instance", ",", "C", "context", ")", "{", "if", "(", "!", "type", ".", "isInterface", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "type", ")", ";", "}", "for", "(", "final", "Method", "m", ":", "type", ".", "getMethods", "(", ")", ")", "{", "final", "Class", "<", "?", ">", "retType", "=", "m", ".", "getReturnType", "(", ")", ";", "if", "(", "!", "CompletableFuture", ".", "class", ".", "isAssignableFrom", "(", "retType", ")", ")", "{", "continue", ";", "}", "if", "(", "retType", "!", "=", "CompletableFuture", ".", "class", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "getFullMethodName", "(", "type", ",", "retType", ",", "m", ")", ")", ";", "}", "final", "Type", "genRetType", "=", "m", ".", "getGenericReturnType", "(", ")", ";", "if", "(", "!", "ParameterizedType", ".", "class", ".", "isInstance", "(", "genRetType", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "getFullMethodName", "(", "type", ",", "genRetType", ",", "m", ")", ")", ";", "}", "if", "(", "WildcardType", ".", "class", ".", "isInstance", "(", "ParameterizedType", ".", "class", ".", "cast", "(", "genRetType", ")", ".", "getActualTypeArguments", "(", ")", "[", "0", "]", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "getFullMethodName", "(", "type", ",", "genRetType", ",", "m", ")", ")", ";", "}", "}", "return", "type", ".", "cast", "(", "Proxy", ".", "newProxyInstance", "(", "type", ".", "getClassLoader", "(", ")", ",", "new", "Class", "<", "?", ">", "[", "]", "{", "type", "}", ",", "new", "CoroutineFeignInvocationHandler", "<", ">", "(", "type", ",", "instance", ",", "context", ")", ")", ")", ";", "}", "</s>"]
["<s>", "static", "KotlinMethodInfo", "createInstance", "(", "Class", "<", "?", ">", "targetType", ",", "Method", "method", ")", "{", "String", "configKey", "=", "Feign", ".", "configKey", "(", "targetType", ",", "method", ")", ";", "final", "Type", "type", "=", "Types", ".", "resolve", "(", "targetType", ",", "targetType", ",", "method", ".", "getGenericReturnType", "(", ")", ")", ";", "Type", "underlyingReturnType", ";", "boolean", "asyncReturnType", ";", "if", "(", "MethodKt", ".", "isSuspend", "(", "method", ")", ")", "{", "asyncReturnType", "=", "true", ";", "underlyingReturnType", "=", "MethodKt", ".", "getKotlinMethodReturnType", "(", "method", ")", ";", "if", "(", "underlyingReturnType", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "configKey", ")", ")", ";", "}", "}", "else", "if", "(", "type", "instanceof", "ParameterizedType", "&", "&", "Types", ".", "getRawType", "(", "type", ")", ".", "isAssignableFrom", "(", "CompletableFuture", ".", "class", ")", ")", "{", "asyncReturnType", "=", "true", ";", "underlyingReturnType", "=", "(", "(", "ParameterizedType", ")", "type", ")", ".", "getActualTypeArguments", "(", ")", "[", "0", "]", ";", "}", "else", "{", "asyncReturnType", "=", "false", ";", "underlyingReturnType", "=", "type", ";", "}", "return", "new", "KotlinMethodInfo", "(", "configKey", ",", "underlyingReturnType", ",", "asyncReturnType", ")", ";", "}", "</s>"]
["<s>", "public", "static", "<", "C", ">", "AsyncBuilder", "<", "C", ">", "builder", "(", ")", "{", "return", "new", "AsyncBuilder", "<", ">", "(", ")", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "methodInfoResolver", "(", "MethodInfoResolver", "methodInfoResolver", ")", "{", "this", ".", "methodInfoResolver", "=", "methodInfoResolver", ";", "return", "this", ";", "}", "</s>"]
["<s>", "default", "MethodInfoResolver", "enrich", "(", "MethodInfoResolver", "methodInfoResolver", ")", "{", "return", "methodInfoResolver", ";", "}", "</s>"]
["<s>", "public", "static", "<", "C", ">", "CoroutineBuilder", "<", "C", ">", "builder", "(", ")", "{", "return", "new", "CoroutineBuilder", "<", ">", "(", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "newInstance", "(", "Target", "<", "T", ">", "target", ")", "{", "T", "instance", "=", "feign", ".", "newInstance", "(", "target", ")", ";", "return", "wrap", "(", "target", ".", "type", "(", ")", ",", "instance", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "newInstance", "(", "Target", "<", "T", ">", "target", ",", "C", "context", ")", "{", "T", "instance", "=", "feign", ".", "newInstance", "(", "target", ",", "context", ")", ";", "return", "wrap", "(", "target", ".", "type", "(", ")", ",", "instance", ")", ";", "}", "</s>"]
["<s>", "private", "<", "T", ">", "T", "wrap", "(", "Class", "<", "T", ">", "type", ",", "T", "instance", ")", "{", "return", "type", ".", "cast", "(", "Proxy", ".", "newProxyInstance", "(", "type", ".", "getClassLoader", "(", ")", ",", "new", "Class", "<", "?", ">", "[", "]", "{", "type", "}", ",", "new", "CoroutineFeignInvocationHandler", "<", ">", "(", "instance", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "CoroutineBuilder", "<", "C", ">", "methodInfoResolver", "(", "MethodInfoResolver", "methodInfoResolver", ")", "{", "this", ".", "methodInfoResolver", "=", "methodInfoResolver", ";", "return", "this", ";", "}", "</s>"]
