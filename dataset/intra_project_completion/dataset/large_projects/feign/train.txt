["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "query", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "mixedParams", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "nameFilter", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "typeFilter", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "customMethod", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "void", "bodyParam", "(", "List", "<", "String", ">", "body", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Body", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", "void", "form", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "user", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "password", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "void", "headers", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "token", ")", ";", "</s>"]
["<s>", "@", "Benchmark", "@", "Warmup", "(", "iterations", "=", "<NUM_LIT:5>", ",", "time", "=", "1", ")", "@", "Measurement", "(", "iterations", "=", "<NUM_LIT:10>", ",", "time", "=", "1", ")", "@", "Fork", "(", "<NUM_LIT:3>", ")", "@", "BenchmarkMode", "(", "Mode", ".", "AverageTime", ")", "@", "OutputTimeUnit", "(", "TimeUnit", ".", "NANOSECONDS", ")", "public", "void", "decode", "(", ")", "throws", "Exception", "{", "fetch", "(", "decoder", ".", "decode", "(", "response", ",", "type", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "private", "void", "fetch", "(", "Object", "o", ")", "{", "Iterator", "<", "Car", ">", "cars", ";", "if", "(", "o", "instanceof", "Collection", ")", "{", "cars", "=", "(", "(", "Collection", "<", "Car", ">", ")", "o", ")", ".", "iterator", "(", ")", ";", "}", "else", "if", "(", "o", "instanceof", "Stream", ")", "{", "cars", "=", "(", "(", "Stream", "<", "Car", ">", ")", "o", ")", ".", "iterator", "(", ")", ";", "}", "else", "{", "cars", "=", "(", "Iterator", "<", "Car", ">", ")", "o", ";", "}", "while", "(", "cars", ".", "hasNext", "(", ")", ")", "{", "cars", ".", "next", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Setup", "(", "Level", ".", "Invocation", ")", "public", "void", "buildResponse", "(", ")", "{", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT:/>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "carsJson", "(", "Integer", ".", "parseInt", "(", "size", ")", ")", ",", "Util", ".", "UTF_8", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Setup", "(", "Level", ".", "Trial", ")", "public", "void", "buildDecoder", "(", ")", "{", "switch", "(", "api", ")", "{", "case", "\"", "<STR_LIT>", "\"", ":", "decoder", "=", "new", "JacksonDecoder", "(", ")", ";", "type", "=", "new", "TypeReference", "<", "List", "<", "Car", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ";", "break", ";", "case", "\"", "<STR_LIT>", "\"", ":", "decoder", "=", "JacksonIteratorDecoder", ".", "create", "(", ")", ";", "type", "=", "new", "TypeReference", "<", "Iterator", "<", "Car", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ";", "break", ";", "case", "\"", "<STR_LIT>", "\"", ":", "decoder", "=", "StreamDecoder", ".", "create", "(", "JacksonIteratorDecoder", ".", "create", "(", ")", ")", ";", "type", "=", "new", "TypeReference", "<", "Stream", "<", "Car", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ";", "break", ";", "default", ":", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", "+", "api", ")", ";", "}", "}", "</s>"]
["<s>", "private", "String", "carsJson", "(", "int", "count", ")", "{", "String", "car", "=", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT:4>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ";", "StringBuilder", "builder", "=", "new", "StringBuilder", "(", "\"", "<STR_LIT:[>", "\"", ")", ";", "builder", ".", "append", "(", "car", ")", ";", "for", "(", "int", "i", "=", "1", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "builder", ".", "append", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ".", "append", "(", "car", ")", ";", "}", "return", "builder", ".", "append", "(", "\"", "<STR_LIT:]>", "\"", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Setup", "public", "void", "setup", "(", ")", "{", "feignContract", "=", "new", "Contract", ".", "Default", "(", ")", ";", "cachedContact", "=", "new", "Contract", "(", ")", "{", "private", "final", "List", "<", "MethodMetadata", ">", "cached", "=", "new", "Default", "(", ")", ".", "parseAndValidateMetadata", "(", "FeignTestInterface", ".", "class", ")", ";", "public", "List", "<", "MethodMetadata", ">", "parseAndValidateMetadata", "(", "Class", "<", "?", ">", "declaring", ")", "{", "return", "cached", ";", "}", "}", ";", "fakeClient", "=", "new", "Client", "(", ")", "{", "public", "Response", "execute", "(", "Request", "request", ",", "Request", ".", "Options", "options", ")", "throws", "IOException", "{", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "new", "LinkedHashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", ")", ";", "return", "Response", ".", "builder", "(", ")", ".", "body", "(", "(", "byte", "[", "]", ")", "null", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "headers", "(", "headers", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "request", ")", ".", "build", "(", ")", ";", "}", "}", ";", "cachedFakeFeign", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "fakeClient", ")", ".", "build", "(", ")", ";", "cachedFakeApi", "=", "cachedFakeFeign", ".", "newInstance", "(", "new", "HardCodedTarget", "<", "FeignTestInterface", ">", "(", "FeignTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "List", "<", "MethodMetadata", ">", "parseAndValidateMetadata", "(", "Class", "<", "?", ">", "declaring", ")", "{", "return", "cached", ";", "}", "</s>"]
["<s>", "public", "Response", "execute", "(", "Request", "request", ",", "Request", ".", "Options", "options", ")", "throws", "IOException", "{", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "new", "LinkedHashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", ")", ";", "return", "Response", ".", "builder", "(", ")", ".", "body", "(", "(", "byte", "[", "]", ")", "null", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "headers", "(", "headers", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "request", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Benchmark", "public", "List", "<", "MethodMetadata", ">", "parseFeignContract", "(", ")", "{", "return", "feignContract", ".", "parseAndValidateMetadata", "(", "FeignTestInterface", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Benchmark", "public", "Response", "buildAndQuery_fake", "(", ")", "{", "return", "Feign", ".", "builder", "(", ")", ".", "client", "(", "fakeClient", ")", ".", "target", "(", "FeignTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Benchmark", "public", "Response", "buildAndQuery_fake_cachedContract", "(", ")", "{", "return", "Feign", ".", "builder", "(", ")", ".", "contract", "(", "cachedContact", ")", ".", "client", "(", "fakeClient", ")", ".", "target", "(", "FeignTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Benchmark", "public", "Response", "buildAndQuery_fake_cachedFeign", "(", ")", "{", "return", "cachedFakeFeign", ".", "newInstance", "(", "new", "HardCodedTarget", "<", "FeignTestInterface", ">", "(", "FeignTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "query", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Benchmark", "public", "Response", "buildAndQuery_fake_cachedApi", "(", ")", "{", "return", "cachedFakeApi", ".", "query", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Setup", "public", "void", "setup", "(", ")", "{", "server", "=", "HttpServer", ".", "newServer", "(", "SERVER_PORT", ")", ".", "start", "(", "(", "request", ",", "response", ")", "-", ">", "null", ")", ";", "client", "=", "new", "OkHttpClient", "(", ")", ";", "client", ".", "retryOnConnectionFailure", "(", ")", ";", "okFeign", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "new", "feign", ".", "okhttp", ".", "OkHttpClient", "(", "client", ")", ")", ".", "logLevel", "(", "Level", ".", "NONE", ")", ".", "logger", "(", "new", "Logger", ".", "ErrorLogger", "(", ")", ")", ".", "retryer", "(", "new", "Retryer", ".", "Default", "(", ")", ")", ".", "target", "(", "FeignTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "SERVER_PORT", ")", ";", "queryRequest", "=", "new", "Request", ".", "Builder", "(", ")", ".", "url", "(", "\"", "<STR_LIT>", "\"", "+", "SERVER_PORT", "+", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "TearDown", "public", "void", "tearDown", "(", ")", "throws", "InterruptedException", "{", "server", ".", "shutdown", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Benchmark", "public", "okhttp3", ".", "Response", "query_baseCaseUsingOkHttp", "(", ")", "throws", "IOException", "{", "okhttp3", ".", "Response", "result", "=", "client", ".", "newCall", "(", "queryRequest", ")", ".", "execute", "(", ")", ";", "result", ".", "body", "(", ")", ".", "close", "(", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Benchmark", "public", "boolean", "query_feignUsingOkHttp", "(", ")", "{", "try", "(", "Response", "ignored", "=", "okFeign", ".", "query", "(", ")", ")", "{", "return", "true", ";", "}", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "{", "\"", "<STR_LIT>", "\"", "}", ")", "String", "patch", "(", "String", "var1", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "{", "\"", "<STR_LIT>", "\"", "}", ")", "String", "patch", "(", ")", ";", "</s>"]
["<s>", "@", "Override", "@", "Test", "public", "void", "testPatch", "(", ")", "throws", "Exception", "{", "final", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Assertions", ".", "assertThat", "(", "api", ".", "patch", "(", "\"", "\"", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Test", "public", "void", "noResponseBodyForPatch", "(", ")", "{", "final", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Assertions", ".", "assertThat", "(", "api", ".", "patch", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Test", "public", "void", "reasonPhraseIsOptional", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "addHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "setStatus", "(", "\"", "<STR_LIT>", "\"", "+", "<NUM_LIT>", ")", ")", ";", "final", "AbstractClientTest", ".", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "AbstractClientTest", ".", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "Response", "response", "=", "api", ".", "post", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "reason", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "Test", "public", "void", "testVeryLongResponseNullLength", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "Feign", ".", "Builder", "newBuilder", "(", ")", "{", "return", "Feign", ".", "builder", "(", ")", ".", "client", "(", "new", "Http2Client", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Http2Client", "(", ")", "{", "this", "(", "HttpClient", ".", "newBuilder", "(", ")", ".", "followRedirects", "(", "Redirect", ".", "ALWAYS", ")", ".", "version", "(", "Version", ".", "HTTP_2", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Http2Client", "(", "HttpClient", "client", ")", "{", "this", ".", "client", "=", "Util", ".", "checkNotNull", "(", "client", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "execute", "(", "Request", "request", ",", "Options", "options", ")", "throws", "IOException", "{", "final", "HttpRequest", "httpRequest", "=", "newRequestBuilder", "(", "request", ")", ".", "build", "(", ")", ";", "HttpResponse", "<", "byte", "[", "]", ">", "httpResponse", ";", "try", "{", "httpResponse", "=", "client", ".", "send", "(", "httpRequest", ",", "BodyHandlers", ".", "ofByteArray", "(", ")", ")", ";", "}", "catch", "(", "final", "InterruptedException", "e", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "request", ".", "url", "(", ")", ",", "e", ")", ";", "}", "final", "OptionalLong", "length", "=", "httpResponse", ".", "headers", "(", ")", ".", "firstValueAsLong", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "body", "(", "new", "ByteArrayInputStream", "(", "httpResponse", ".", "body", "(", ")", ")", ",", "length", ".", "isPresent", "(", ")", "?", "(", "int", ")", "length", ".", "getAsLong", "(", ")", ":", "null", ")", ".", "reason", "(", "httpResponse", ".", "headers", "(", ")", ".", "firstValue", "(", "\"", "<STR_LIT>", "\"", ")", ".", "orElse", "(", "\"", "<STR_LIT:OK>", "\"", ")", ")", ".", "request", "(", "request", ")", ".", "status", "(", "httpResponse", ".", "statusCode", "(", ")", ")", ".", "headers", "(", "castMapCollectType", "(", "httpResponse", ".", "headers", "(", ")", ".", "map", "(", ")", ")", ")", ".", "build", "(", ")", ";", "return", "response", ";", "}", "</s>"]
["<s>", "private", "Builder", "newRequestBuilder", "(", "Request", "request", ")", "throws", "IOException", "{", "URI", "uri", ";", "try", "{", "uri", "=", "new", "URI", "(", "request", ".", "url", "(", ")", ")", ";", "}", "catch", "(", "final", "URISyntaxException", "e", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "request", ".", "url", "(", ")", ",", "e", ")", ";", "}", "final", "BodyPublisher", "body", ";", "final", "byte", "[", "]", "data", "=", "request", ".", "body", "(", ")", ";", "if", "(", "data", "=", "=", "null", ")", "{", "body", "=", "BodyPublishers", ".", "noBody", "(", ")", ";", "}", "else", "{", "body", "=", "BodyPublishers", ".", "ofByteArray", "(", "data", ")", ";", "}", "final", "Builder", "requestBuilder", "=", "HttpRequest", ".", "newBuilder", "(", ")", ".", "uri", "(", "uri", ")", ".", "version", "(", "Version", ".", "HTTP_2", ")", ";", "final", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "filterRestrictedHeaders", "(", "request", ".", "headers", "(", ")", ")", ";", "if", "(", "!", "headers", ".", "isEmpty", "(", ")", ")", "{", "requestBuilder", ".", "headers", "(", "asString", "(", "headers", ")", ")", ";", "}", "switch", "(", "request", ".", "httpMethod", "(", ")", ")", "{", "case", "GET", ":", "return", "requestBuilder", ".", "GET", "(", ")", ";", "case", "POST", ":", "return", "requestBuilder", ".", "POST", "(", "body", ")", ";", "case", "PUT", ":", "return", "requestBuilder", ".", "PUT", "(", "body", ")", ";", "case", "DELETE", ":", "return", "requestBuilder", ".", "DELETE", "(", ")", ";", "default", ":", "return", "requestBuilder", ".", "method", "(", "request", ".", "httpMethod", "(", ")", ".", "toString", "(", ")", ",", "body", ")", ";", "}", "}", "</s>"]
["<s>", "private", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "filterRestrictedHeaders", "(", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ")", "{", "final", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "filteredHeaders", "=", "headers", ".", "keySet", "(", ")", ".", "stream", "(", ")", ".", "filter", "(", "headerName", "-", ">", "!", "DISALLOWED_HEADERS_SET", ".", "contains", "(", "headerName", ")", ")", ".", "collect", "(", "Collectors", ".", "toMap", "(", "Function", ".", "identity", "(", ")", ",", "headers", ":", ":", "get", ")", ")", ";", "filteredHeaders", ".", "computeIfAbsent", "(", "\"", "<STR_LIT>", "\"", ",", "key", "-", ">", "List", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "return", "filteredHeaders", ";", "}", "</s>"]
["<s>", "private", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "castMapCollectType", "(", "Map", "<", "String", ",", "List", "<", "String", ">", ">", "map", ")", "{", "final", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "result", "=", "new", "HashMap", "<", ">", "(", ")", ";", "map", ".", "forEach", "(", "(", "key", ",", "value", ")", "-", ">", "result", ".", "put", "(", "key", ",", "new", "HashSet", "<", ">", "(", "value", ")", ")", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "private", "String", "[", "]", "asString", "(", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ")", "{", "return", "headers", ".", "entrySet", "(", ")", ".", "stream", "(", ")", ".", "flatMap", "(", "entry", "-", ">", "entry", ".", "getValue", "(", ")", ".", "stream", "(", ")", ".", "map", "(", "value", "-", ">", "Arrays", ".", "asList", "(", "entry", ".", "getKey", "(", ")", ",", "value", ")", ")", ".", "flatMap", "(", "List", ":", ":", "stream", ")", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ".", "toArray", "(", "new", "String", "[", "0", "]", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "newBuilder", "(", ")", "{", "return", "Feign", ".", "builder", "(", ")", ".", "client", "(", "new", "ApacheHttpClient", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryParamsAreRespectedWhenBodyIsEmpty", "(", ")", "throws", "InterruptedException", "{", "final", "HttpClient", "httpClient", "=", "HttpClientBuilder", ".", "create", "(", ")", ".", "build", "(", ")", ";", "final", "JaxRsTestInterface", "testInterface", "=", "Feign", ".", "builder", "(", ")", ".", "contract", "(", "new", "JAXRSContract", "(", ")", ")", ".", "client", "(", "new", "ApacheHttpClient", "(", "httpClient", ")", ")", ".", "target", "(", "JaxRsTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "testInterface", ".", "withBody", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "RecordedRequest", "request1", "=", "server", ".", "takeRequest", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "request1", ".", "getPath", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "request1", ".", "getBody", "(", ")", ".", "readString", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "testInterface", ".", "withoutBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "RecordedRequest", "request2", "=", "server", ".", "takeRequest", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "request2", ".", "getPath", "(", ")", ")", ";", "assertEquals", "(", "\"", "\"", ",", "request2", ".", "getBody", "(", ")", ".", "readString", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "@", "PUT", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "withBody", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "foo", ",", "String", "bar", ")", ";", "</s>"]
["<s>", "@", "PUT", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "withoutBody", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "foo", ")", ";", "</s>"]
["<s>", "public", "ApacheHttpClient", "(", ")", "{", "this", "(", "HttpClientBuilder", ".", "create", "(", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "ApacheHttpClient", "(", "HttpClient", "client", ")", "{", "this", ".", "client", "=", "client", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "execute", "(", "Request", "request", ",", "Request", ".", "Options", "options", ")", "throws", "IOException", "{", "HttpUriRequest", "httpUriRequest", ";", "try", "{", "httpUriRequest", "=", "toHttpUriRequest", "(", "request", ",", "options", ")", ";", "}", "catch", "(", "URISyntaxException", "e", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "request", ".", "url", "(", ")", "+", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "HttpResponse", "httpResponse", "=", "client", ".", "execute", "(", "httpUriRequest", ")", ";", "return", "toFeignResponse", "(", "httpResponse", ",", "request", ")", ";", "}", "</s>"]
["<s>", "HttpUriRequest", "toHttpUriRequest", "(", "Request", "request", ",", "Request", ".", "Options", "options", ")", "throws", "URISyntaxException", "{", "RequestBuilder", "requestBuilder", "=", "RequestBuilder", ".", "create", "(", "request", ".", "httpMethod", "(", ")", ".", "name", "(", ")", ")", ";", "RequestConfig", "requestConfig", "=", "(", "client", "instanceof", "Configurable", "?", "RequestConfig", ".", "copy", "(", "(", "(", "Configurable", ")", "client", ")", ".", "getConfig", "(", ")", ")", ":", "RequestConfig", ".", "custom", "(", ")", ")", ".", "setConnectTimeout", "(", "options", ".", "connectTimeoutMillis", "(", ")", ")", ".", "setSocketTimeout", "(", "options", ".", "readTimeoutMillis", "(", ")", ")", ".", "build", "(", ")", ";", "requestBuilder", ".", "setConfig", "(", "requestConfig", ")", ";", "URI", "uri", "=", "new", "URIBuilder", "(", "request", ".", "url", "(", ")", ")", ".", "build", "(", ")", ";", "requestBuilder", ".", "setUri", "(", "uri", ".", "getScheme", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "uri", ".", "getAuthority", "(", ")", "+", "uri", ".", "getRawPath", "(", ")", ")", ";", "List", "<", "NameValuePair", ">", "queryParams", "=", "URLEncodedUtils", ".", "parse", "(", "uri", ",", "requestBuilder", ".", "getCharset", "(", ")", ")", ";", "for", "(", "NameValuePair", "queryParam", ":", "queryParams", ")", "{", "requestBuilder", ".", "addParameter", "(", "queryParam", ")", ";", "}", "boolean", "hasAcceptHeader", "=", "false", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "Collection", "<", "String", ">", ">", "headerEntry", ":", "request", ".", "headers", "(", ")", ".", "entrySet", "(", ")", ")", "{", "String", "headerName", "=", "headerEntry", ".", "getKey", "(", ")", ";", "if", "(", "headerName", ".", "equalsIgnoreCase", "(", "ACCEPT_HEADER_NAME", ")", ")", "{", "hasAcceptHeader", "=", "true", ";", "}", "if", "(", "headerName", ".", "equalsIgnoreCase", "(", "Util", ".", "CONTENT_LENGTH", ")", ")", "{", "continue", ";", "}", "for", "(", "String", "headerValue", ":", "headerEntry", ".", "getValue", "(", ")", ")", "{", "requestBuilder", ".", "addHeader", "(", "headerName", ",", "headerValue", ")", ";", "}", "}", "if", "(", "!", "hasAcceptHeader", ")", "{", "requestBuilder", ".", "addHeader", "(", "ACCEPT_HEADER_NAME", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "request", ".", "body", "(", ")", "!", "=", "null", ")", "{", "HttpEntity", "entity", "=", "null", ";", "if", "(", "request", ".", "charset", "(", ")", "!", "=", "null", ")", "{", "ContentType", "contentType", "=", "getContentType", "(", "request", ")", ";", "String", "content", "=", "new", "String", "(", "request", ".", "body", "(", ")", ",", "request", ".", "charset", "(", ")", ")", ";", "entity", "=", "new", "StringEntity", "(", "content", ",", "contentType", ")", ";", "}", "else", "{", "entity", "=", "new", "ByteArrayEntity", "(", "request", ".", "body", "(", ")", ")", ";", "}", "requestBuilder", ".", "setEntity", "(", "entity", ")", ";", "}", "else", "{", "requestBuilder", ".", "setEntity", "(", "new", "ByteArrayEntity", "(", "new", "byte", "[", "0", "]", ")", ")", ";", "}", "return", "requestBuilder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "ContentType", "getContentType", "(", "Request", "request", ")", "{", "ContentType", "contentType", "=", "null", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "Collection", "<", "String", ">", ">", "entry", ":", "request", ".", "headers", "(", ")", ".", "entrySet", "(", ")", ")", "if", "(", "entry", ".", "getKey", "(", ")", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT:Content-Type>", "\"", ")", ")", "{", "Collection", "<", "String", ">", "values", "=", "entry", ".", "getValue", "(", ")", ";", "if", "(", "values", "!", "=", "null", "&", "&", "!", "values", ".", "isEmpty", "(", ")", ")", "{", "contentType", "=", "ContentType", ".", "parse", "(", "values", ".", "iterator", "(", ")", ".", "next", "(", ")", ")", ";", "if", "(", "contentType", ".", "getCharset", "(", ")", "=", "=", "null", ")", "{", "contentType", "=", "contentType", ".", "withCharset", "(", "request", ".", "charset", "(", ")", ")", ";", "}", "break", ";", "}", "}", "return", "contentType", ";", "}", "</s>"]
["<s>", "Response", "toFeignResponse", "(", "HttpResponse", "httpResponse", ",", "Request", "request", ")", "throws", "IOException", "{", "StatusLine", "statusLine", "=", "httpResponse", ".", "getStatusLine", "(", ")", ";", "int", "statusCode", "=", "statusLine", ".", "getStatusCode", "(", ")", ";", "String", "reason", "=", "statusLine", ".", "getReasonPhrase", "(", ")", ";", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "new", "HashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", ")", ";", "for", "(", "Header", "header", ":", "httpResponse", ".", "getAllHeaders", "(", ")", ")", "{", "String", "name", "=", "header", ".", "getName", "(", ")", ";", "String", "value", "=", "header", ".", "getValue", "(", ")", ";", "Collection", "<", "String", ">", "headerValues", "=", "headers", ".", "get", "(", "name", ")", ";", "if", "(", "headerValues", "=", "=", "null", ")", "{", "headerValues", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "headers", ".", "put", "(", "name", ",", "headerValues", ")", ";", "}", "headerValues", ".", "add", "(", "value", ")", ";", "}", "return", "Response", ".", "builder", "(", ")", ".", "status", "(", "statusCode", ")", ".", "reason", "(", "reason", ")", ".", "headers", "(", "headers", ")", ".", "request", "(", "request", ")", ".", "body", "(", "toFeignBody", "(", "httpResponse", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "Response", ".", "Body", "toFeignBody", "(", "HttpResponse", "httpResponse", ")", "{", "final", "HttpEntity", "entity", "=", "httpResponse", ".", "getEntity", "(", ")", ";", "if", "(", "entity", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "new", "Response", ".", "Body", "(", ")", "{", "@", "Override", "public", "Integer", "length", "(", ")", "{", "return", "entity", ".", "getContentLength", "(", ")", ">", "=", "0", "&", "&", "entity", ".", "getContentLength", "(", ")", "<", "=", "Integer", ".", "MAX_VALUE", "?", "(", "int", ")", "entity", ".", "getContentLength", "(", ")", ":", "null", ";", "}", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "entity", ".", "isRepeatable", "(", ")", ";", "}", "@", "Override", "public", "InputStream", "asInputStream", "(", ")", "throws", "IOException", "{", "return", "entity", ".", "getContent", "(", ")", ";", "}", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Reader", "asReader", "(", ")", "throws", "IOException", "{", "return", "new", "InputStreamReader", "(", "asInputStream", "(", ")", ",", "UTF_8", ")", ";", "}", "@", "Override", "public", "Reader", "asReader", "(", "Charset", "charset", ")", "throws", "IOException", "{", "Util", ".", "checkNotNull", "(", "charset", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "new", "InputStreamReader", "(", "asInputStream", "(", ")", ",", "charset", ")", ";", "}", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "EntityUtils", ".", "consume", "(", "entity", ")", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Integer", "length", "(", ")", "{", "return", "entity", ".", "getContentLength", "(", ")", ">", "=", "0", "&", "&", "entity", ".", "getContentLength", "(", ")", "<", "=", "Integer", ".", "MAX_VALUE", "?", "(", "int", ")", "entity", ".", "getContentLength", "(", ")", ":", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "entity", ".", "isRepeatable", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "asInputStream", "(", ")", "throws", "IOException", "{", "return", "entity", ".", "getContent", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Reader", "asReader", "(", ")", "throws", "IOException", "{", "return", "new", "InputStreamReader", "(", "asInputStream", "(", ")", ",", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Reader", "asReader", "(", "Charset", "charset", ")", "throws", "IOException", "{", "Util", ".", "checkNotNull", "(", "charset", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "new", "InputStreamReader", "(", "asInputStream", "(", ")", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "EntityUtils", ".", "consume", "(", "entity", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "throws", "IOException", "{", "mockClient", "=", "new", "MockClient", "(", ")", ".", "noContent", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "noContent", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "noContent", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "noContent", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "ok", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:{}>", "\"", ")", ";", "resource", "=", "Feign", ".", "builder", "(", ")", ".", "contract", "(", "new", "SpringContract", "(", ")", ")", ".", "encoder", "(", "new", "JacksonEncoder", "(", ")", ")", ".", "decoder", "(", "new", "JacksonDecoder", "(", ")", ")", ".", "client", "(", "mockClient", ")", ".", "target", "(", "new", "MockTarget", "<", ">", "(", "HealthResource", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "requestParam", "(", ")", "{", "resource", ".", "check", "(", "\"", "<STR_LIT:1>", "\"", ",", "true", ")", ";", "mockClient", ".", "verifyOne", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "requestTwoParams", "(", ")", "{", "resource", ".", "check", "(", "\"", "<STR_LIT:1>", "\"", ",", "true", ",", "true", ")", ";", "mockClient", ".", "verifyOne", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "inheritance", "(", ")", "{", "final", "Data", "data", "=", "resource", ".", "getData", "(", "new", "Data", "(", ")", ")", ";", "assertThat", "(", "data", ",", "notNullValue", "(", ")", ")", ";", "final", "Request", "request", "=", "mockClient", ".", "verifyOne", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "request", ".", "headers", "(", ")", ",", "hasEntry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "composedAnnotation", "(", ")", "{", "resource", ".", "check", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "mockClient", ".", "verifyOne", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notAHttpMethod", "(", ")", "{", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "resource", ".", "missingResourceExceptionHandler", "(", ")", ";", "}", "</s>"]
["<s>", "@", "RequestMapping", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "method", "=", "RequestMethod", ".", "GET", ")", "public", "@", "ResponseBody", "DTO", "getData", "(", "@", "RequestBody", "DTO", "input", ")", ";", "</s>"]
["<s>", "@", "RequestMapping", "(", "method", "=", "RequestMethod", ".", "GET", ")", "public", "@", "ResponseBody", "String", "getStatus", "(", ")", ";", "</s>"]
["<s>", "@", "RequestMapping", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "method", "=", "RequestMethod", ".", "GET", ")", "public", "void", "check", "(", "@", "PathVariable", "(", "\"", "<STR_LIT>", "\"", ")", "String", "campaignId", ",", "@", "RequestParam", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "defaultValue", "=", "\"", "<STR_LIT>", "\"", ")", "boolean", "deepCheck", ")", ";", "</s>"]
["<s>", "@", "RequestMapping", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "method", "=", "RequestMethod", ".", "GET", ")", "public", "void", "check", "(", "@", "PathVariable", "(", "\"", "<STR_LIT>", "\"", ")", "String", "campaignId", ",", "@", "RequestParam", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "defaultValue", "=", "\"", "<STR_LIT>", "\"", ")", "boolean", "deepCheck", ",", "@", "RequestParam", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "defaultValue", "=", "\"", "<STR_LIT>", "\"", ")", "boolean", "dryRun", ")", ";", "</s>"]
["<s>", "@", "GetMapping", "(", "value", "=", "\"", "<STR_LIT>", "\"", ")", "public", "void", "check", "(", "@", "PathVariable", "(", "\"", "<STR_LIT>", "\"", ")", "String", "campaignId", ")", ";", "</s>"]
["<s>", "@", "ResponseStatus", "(", "value", "=", "HttpStatus", ".", "NOT_FOUND", ",", "reason", "=", "\"", "<STR_LIT>", "\"", ")", "@", "ExceptionHandler", "(", "MissingResourceException", ".", "class", ")", "void", "missingResourceExceptionHandler", "(", ")", ";", "</s>"]
["<s>", "public", "String", "getContent", "(", ")", "{", "return", "content", ";", "}", "</s>"]
["<s>", "public", "void", "setContent", "(", "String", "content", ")", "{", "this", ".", "content", "=", "content", ";", "}", "</s>"]
["<s>", "public", "SpringContract", "(", ")", "{", "registerClassAnnotation", "(", "RequestMapping", ".", "class", ",", "(", "requestMapping", ",", "data", ")", "-", ">", "{", "appendMappings", "(", "data", ",", "requestMapping", ".", "value", "(", ")", ")", ";", "if", "(", "requestMapping", ".", "method", "(", ")", ".", "length", "=", "=", "1", ")", "data", ".", "template", "(", ")", ".", "method", "(", "Request", ".", "HttpMethod", ".", "valueOf", "(", "requestMapping", ".", "method", "(", ")", "[", "0", "]", ".", "name", "(", ")", ")", ")", ";", "handleProducesAnnotation", "(", "data", ",", "requestMapping", ".", "produces", "(", ")", ")", ";", "handleConsumesAnnotation", "(", "data", ",", "requestMapping", ".", "consumes", "(", ")", ")", ";", "}", ")", ";", "registerMethodAnnotation", "(", "RequestMapping", ".", "class", ",", "(", "requestMapping", ",", "data", ")", "-", ">", "{", "String", "[", "]", "mappings", "=", "requestMapping", ".", "value", "(", ")", ";", "appendMappings", "(", "data", ",", "mappings", ")", ";", "if", "(", "requestMapping", ".", "method", "(", ")", ".", "length", "=", "=", "1", ")", "data", ".", "template", "(", ")", ".", "method", "(", "Request", ".", "HttpMethod", ".", "valueOf", "(", "requestMapping", ".", "method", "(", ")", "[", "0", "]", ".", "name", "(", ")", ")", ")", ";", "}", ")", ";", "registerMethodAnnotation", "(", "GetMapping", ".", "class", ",", "(", "mapping", ",", "data", ")", "-", ">", "{", "appendMappings", "(", "data", ",", "mapping", ".", "value", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "method", "(", "Request", ".", "HttpMethod", ".", "GET", ")", ";", "handleProducesAnnotation", "(", "data", ",", "mapping", ".", "produces", "(", ")", ")", ";", "handleConsumesAnnotation", "(", "data", ",", "mapping", ".", "consumes", "(", ")", ")", ";", "}", ")", ";", "registerMethodAnnotation", "(", "PostMapping", ".", "class", ",", "(", "mapping", ",", "data", ")", "-", ">", "{", "appendMappings", "(", "data", ",", "mapping", ".", "value", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "method", "(", "Request", ".", "HttpMethod", ".", "POST", ")", ";", "handleProducesAnnotation", "(", "data", ",", "mapping", ".", "produces", "(", ")", ")", ";", "handleConsumesAnnotation", "(", "data", ",", "mapping", ".", "consumes", "(", ")", ")", ";", "}", ")", ";", "registerMethodAnnotation", "(", "PutMapping", ".", "class", ",", "(", "mapping", ",", "data", ")", "-", ">", "{", "appendMappings", "(", "data", ",", "mapping", ".", "value", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "method", "(", "Request", ".", "HttpMethod", ".", "PUT", ")", ";", "handleProducesAnnotation", "(", "data", ",", "mapping", ".", "produces", "(", ")", ")", ";", "handleConsumesAnnotation", "(", "data", ",", "mapping", ".", "consumes", "(", ")", ")", ";", "}", ")", ";", "registerMethodAnnotation", "(", "DeleteMapping", ".", "class", ",", "(", "mapping", ",", "data", ")", "-", ">", "{", "appendMappings", "(", "data", ",", "mapping", ".", "value", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "method", "(", "Request", ".", "HttpMethod", ".", "DELETE", ")", ";", "handleProducesAnnotation", "(", "data", ",", "mapping", ".", "produces", "(", ")", ")", ";", "handleConsumesAnnotation", "(", "data", ",", "mapping", ".", "consumes", "(", ")", ")", ";", "}", ")", ";", "registerMethodAnnotation", "(", "PatchMapping", ".", "class", ",", "(", "mapping", ",", "data", ")", "-", ">", "{", "appendMappings", "(", "data", ",", "mapping", ".", "value", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "method", "(", "Request", ".", "HttpMethod", ".", "PATCH", ")", ";", "handleProducesAnnotation", "(", "data", ",", "mapping", ".", "produces", "(", ")", ")", ";", "handleConsumesAnnotation", "(", "data", ",", "mapping", ".", "consumes", "(", ")", ")", ";", "}", ")", ";", "registerMethodAnnotation", "(", "ResponseBody", ".", "class", ",", "(", "body", ",", "data", ")", "-", ">", "{", "handleConsumesAnnotation", "(", "data", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", ")", ";", "registerMethodAnnotation", "(", "ExceptionHandler", ".", "class", ",", "(", "ann", ",", "data", ")", "-", ">", "{", "data", ".", "ignoreMethod", "(", ")", ";", "}", ")", ";", "registerParameterAnnotation", "(", "PathVariable", ".", "class", ",", "(", "parameterAnnotation", ",", "data", ",", "paramIndex", ")", "-", ">", "{", "String", "name", "=", "PathVariable", ".", "class", ".", "cast", "(", "parameterAnnotation", ")", ".", "value", "(", ")", ";", "nameParam", "(", "data", ",", "name", ",", "paramIndex", ")", ";", "}", ")", ";", "registerParameterAnnotation", "(", "RequestBody", ".", "class", ",", "(", "body", ",", "data", ",", "paramIndex", ")", "-", ">", "{", "handleProducesAnnotation", "(", "data", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", ")", ";", "registerParameterAnnotation", "(", "RequestParam", ".", "class", ",", "(", "parameterAnnotation", ",", "data", ",", "paramIndex", ")", "-", ">", "{", "String", "name", "=", "RequestParam", ".", "class", ".", "cast", "(", "parameterAnnotation", ")", ".", "value", "(", ")", ";", "Collection", "<", "String", ">", "query", "=", "addTemplatedParam", "(", "data", ".", "template", "(", ")", ".", "queries", "(", ")", ".", "get", "(", "name", ")", ",", "name", ")", ";", "data", ".", "template", "(", ")", ".", "query", "(", "name", ",", "query", ")", ";", "nameParam", "(", "data", ",", "name", ",", "paramIndex", ")", ";", "}", ")", ";", "}", "</s>"]
["<s>", "private", "void", "appendMappings", "(", "MethodMetadata", "data", ",", "String", "[", "]", "mappings", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "mappings", ".", "length", ";", "i", "+", "+", ")", "{", "String", "methodAnnotationValue", "=", "mappings", "[", "i", "]", ";", "if", "(", "!", "methodAnnotationValue", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", "&", "&", "!", "data", ".", "template", "(", ")", ".", "url", "(", ")", ".", "endsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", "{", "methodAnnotationValue", "=", "\"", "<STR_LIT:/>", "\"", "+", "methodAnnotationValue", ";", "}", "if", "(", "data", ".", "template", "(", ")", ".", "url", "(", ")", ".", "endsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", "&", "&", "methodAnnotationValue", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", "{", "methodAnnotationValue", "=", "methodAnnotationValue", ".", "substring", "(", "1", ")", ";", "}", "data", ".", "template", "(", ")", ".", "uri", "(", "data", ".", "template", "(", ")", ".", "url", "(", ")", "+", "methodAnnotationValue", ")", ";", "}", "}", "</s>"]
["<s>", "private", "void", "handleProducesAnnotation", "(", "MethodMetadata", "data", ",", "String", ".", ".", ".", "produces", ")", "{", "if", "(", "produces", ".", "length", "=", "=", "0", ")", "return", ";", "data", ".", "template", "(", ")", ".", "removeHeader", "(", "ACCEPT", ")", ";", "data", ".", "template", "(", ")", ".", "header", "(", "ACCEPT", ",", "produces", "[", "0", "]", ")", ";", "}", "</s>"]
["<s>", "private", "void", "handleConsumesAnnotation", "(", "MethodMetadata", "data", ",", "String", ".", ".", ".", "consumes", ")", "{", "if", "(", "consumes", ".", "length", "=", "=", "0", ")", "return", ";", "data", ".", "template", "(", ")", ".", "removeHeader", "(", "CONTENT_TYPE", ")", ";", "data", ".", "template", "(", ")", ".", "header", "(", "CONTENT_TYPE", ",", "consumes", "[", "0", "]", ")", ";", "}", "</s>"]
["<s>", "protected", "Collection", "<", "String", ">", "addTemplatedParam", "(", "Collection", "<", "String", ">", "possiblyNull", ",", "String", "name", ")", "{", "if", "(", "possiblyNull", "=", "=", "null", ")", "{", "possiblyNull", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "}", "possiblyNull", ".", "add", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "name", ")", ")", ";", "return", "possiblyNull", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodesMapObjectNumericalValuesAsInteger", "(", ")", "{", "Map", "<", "String", ",", "Object", ">", "map", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "map", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "new", "GsonEncoder", "(", ")", ".", "encode", "(", "map", ",", "map", ".", "getClass", "(", ")", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "\"", "+", "\"", "<STR_LIT:{>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodesMapObjectNumericalValuesAsInteger", "(", ")", "throws", "Exception", "{", "Map", "<", "String", ",", "Object", ">", "map", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "map", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "assertEquals", "(", "new", "GsonDecoder", "(", ")", ".", "decode", "(", "response", ",", "new", "TypeToken", "<", "Map", "<", "String", ",", "Object", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ",", "map", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodesFormParams", "(", ")", "{", "Map", "<", "String", ",", "Object", ">", "form", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "form", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "form", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:3>", ")", ")", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "new", "GsonEncoder", "(", ")", ".", "encode", "(", "form", ",", "new", "TypeToken", "<", "Map", "<", "String", ",", "?", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "\"", "+", "\"", "<STR_LIT:{>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "Zone", "(", ")", "{", "}", "</s>"]
["<s>", "Zone", "(", "String", "name", ")", "{", "this", "(", "name", ",", "null", ")", ";", "}", "</s>"]
["<s>", "Zone", "(", "String", "name", ",", "String", "id", ")", "{", "put", "(", "\"", "<STR_LIT>", "\"", ",", "name", ")", ";", "if", "(", "id", "!", "=", "null", ")", "{", "put", "(", "\"", "<STR_LIT>", "\"", ",", "id", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodes", "(", ")", "throws", "Exception", "{", "List", "<", "Zone", ">", "zones", "=", "new", "LinkedList", "<", "Zone", ">", "(", ")", ";", "zones", ".", "add", "(", "new", "Zone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "zones", ".", "add", "(", "new", "Zone", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "zonesJson", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "assertEquals", "(", "zones", ",", "new", "GsonDecoder", "(", ")", ".", "decode", "(", "response", ",", "new", "TypeToken", "<", "List", "<", "Zone", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "nullBodyDecodesToNull", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "build", "(", ")", ";", "assertNull", "(", "new", "GsonDecoder", "(", ")", ".", "decode", "(", "response", ",", "String", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyBodyDecodesToNull", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "new", "byte", "[", "0", "]", ")", ".", "build", "(", ")", ";", "assertNull", "(", "new", "GsonDecoder", "(", ")", ".", "decode", "(", "response", ",", "String", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "write", "(", "JsonWriter", "out", ",", "Zone", "value", ")", "throws", "IOException", "{", "out", ".", "beginObject", "(", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "Object", ">", "entry", ":", "value", ".", "entrySet", "(", ")", ")", "{", "out", ".", "name", "(", "entry", ".", "getKey", "(", ")", ")", ".", "value", "(", "entry", ".", "getValue", "(", ")", ".", "toString", "(", ")", ".", "toUpperCase", "(", ")", ")", ";", "}", "out", ".", "endObject", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Zone", "read", "(", "JsonReader", "in", ")", "throws", "IOException", "{", "in", ".", "beginObject", "(", ")", ";", "Zone", "zone", "=", "new", "Zone", "(", ")", ";", "while", "(", "in", ".", "hasNext", "(", ")", ")", "{", "zone", ".", "put", "(", "in", ".", "nextName", "(", ")", ",", "in", ".", "nextString", "(", ")", ".", "toUpperCase", "(", ")", ")", ";", "}", "in", ".", "endObject", "(", ")", ";", "return", "zone", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customDecoder", "(", ")", "throws", "Exception", "{", "GsonDecoder", "decoder", "=", "new", "GsonDecoder", "(", "Collections", ".", "singletonList", "(", "upperZone", ")", ")", ";", "List", "<", "Zone", ">", "zones", "=", "new", "LinkedList", "<", ">", "(", ")", ";", "zones", ".", "add", "(", "new", "Zone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "zones", ".", "add", "(", "new", "Zone", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "zonesJson", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "assertEquals", "(", "zones", ",", "decoder", ".", "decode", "(", "response", ",", "new", "TypeToken", "<", "List", "<", "Zone", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customEncoder", "(", ")", "{", "GsonEncoder", "encoder", "=", "new", "GsonEncoder", "(", "Collections", ".", "singletonList", "(", "upperZone", ")", ")", ";", "List", "<", "Zone", ">", "zones", "=", "new", "LinkedList", "<", ">", "(", ")", ";", "zones", ".", "add", "(", "new", "Zone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "zones", ".", "add", "(", "new", "Zone", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "zones", ",", "new", "TypeToken", "<", "List", "<", "Zone", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "\"", "+", "\"", "<STR_LIT:[>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:]>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notFoundDecodesToNull", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "build", "(", ")", ";", "assertThat", "(", "(", "byte", "[", "]", ")", "new", "GsonDecoder", "(", ")", ".", "decode", "(", "response", ",", "byte", "[", "]", ".", "class", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", ".", ".", ".", "args", ")", "{", "GitHub", "github", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "new", "GsonDecoder", "(", ")", ")", ".", "target", "(", "GitHub", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "List", "<", "Contributor", ">", "contributors", "=", "github", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "Contributor", "contributor", ":", "contributors", ")", "{", "System", ".", "out", ".", "println", "(", "contributor", ".", "login", "+", "\"", "<STR_LIT>", "\"", "+", "contributor", ".", "contributions", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "Contributor", ">", "contributors", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "public", "GsonDecoder", "(", "Iterable", "<", "TypeAdapter", "<", "?", ">", ">", "adapters", ")", "{", "this", "(", "GsonFactory", ".", "create", "(", "adapters", ")", ")", ";", "}", "</s>"]
["<s>", "public", "GsonDecoder", "(", ")", "{", "this", "(", "Collections", ".", "<", "TypeAdapter", "<", "?", ">", ">", "emptyList", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "GsonDecoder", "(", "Gson", "gson", ")", "{", "this", ".", "gson", "=", "gson", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "if", "(", "response", ".", "body", "(", ")", "=", "=", "null", ")", "return", "null", ";", "Reader", "reader", "=", "response", ".", "body", "(", ")", ".", "asReader", "(", "UTF_8", ")", ";", "try", "{", "return", "gson", ".", "fromJson", "(", "reader", ",", "type", ")", ";", "}", "catch", "(", "JsonIOException", "e", ")", "{", "if", "(", "e", ".", "getCause", "(", ")", "!", "=", "null", "&", "&", "e", ".", "getCause", "(", ")", "instanceof", "IOException", ")", "{", "throw", "IOException", ".", "class", ".", "cast", "(", "e", ".", "getCause", "(", ")", ")", ";", "}", "throw", "e", ";", "}", "finally", "{", "ensureClosed", "(", "reader", ")", ";", "}", "}", "</s>"]
["<s>", "private", "GsonFactory", "(", ")", "{", "}", "</s>"]
["<s>", "static", "Gson", "create", "(", "Iterable", "<", "TypeAdapter", "<", "?", ">", ">", "adapters", ")", "{", "GsonBuilder", "builder", "=", "new", "GsonBuilder", "(", ")", ".", "setPrettyPrinting", "(", ")", ";", "builder", ".", "registerTypeAdapter", "(", "new", "TypeToken", "<", "Map", "<", "String", ",", "Object", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ",", "new", "DoubleToIntMapTypeAdapter", "(", ")", ")", ";", "for", "(", "TypeAdapter", "<", "?", ">", "adapter", ":", "adapters", ")", "{", "Type", "type", "=", "resolveLastTypeParameter", "(", "adapter", ".", "getClass", "(", ")", ",", "TypeAdapter", ".", "class", ")", ";", "builder", ".", "registerTypeAdapter", "(", "type", ",", "adapter", ")", ";", "}", "return", "builder", ".", "create", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "write", "(", "JsonWriter", "out", ",", "Map", "<", "String", ",", "Object", ">", "value", ")", "throws", "IOException", "{", "delegate", ".", "write", "(", "out", ",", "value", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Map", "<", "String", ",", "Object", ">", "read", "(", "JsonReader", "in", ")", "throws", "IOException", "{", "Map", "<", "String", ",", "Object", ">", "map", "=", "delegate", ".", "read", "(", "in", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "Object", ">", "entry", ":", "map", ".", "entrySet", "(", ")", ")", "{", "if", "(", "entry", ".", "getValue", "(", ")", "instanceof", "Double", ")", "{", "entry", ".", "setValue", "(", "Double", ".", "class", ".", "cast", "(", "entry", ".", "getValue", "(", ")", ")", ".", "intValue", "(", ")", ")", ";", "}", "}", "return", "map", ";", "}", "</s>"]
["<s>", "public", "GsonEncoder", "(", "Iterable", "<", "TypeAdapter", "<", "?", ">", ">", "adapters", ")", "{", "this", "(", "GsonFactory", ".", "create", "(", "adapters", ")", ")", ";", "}", "</s>"]
["<s>", "public", "GsonEncoder", "(", ")", "{", "this", "(", "Collections", ".", "<", "TypeAdapter", "<", "?", ">", ">", "emptyList", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "GsonEncoder", "(", "Gson", "gson", ")", "{", "this", ".", "gson", "=", "gson", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "template", ".", "body", "(", "gson", ".", "toJson", "(", "object", ",", "bodyType", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "newBuilder", "(", ")", "{", "return", "Feign", ".", "builder", "(", ")", ".", "client", "(", "new", "GoogleHttpClient", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "noResponseBodyForPatch", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "testPatch", "(", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "parsesUnauthorizedResponseBody", "(", ")", "{", "}", "</s>"]
["<s>", "public", "GoogleHttpClient", "(", ")", "{", "this", "(", "new", "NetHttpTransport", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "GoogleHttpClient", "(", "final", "HttpTransport", "transport", ")", "{", "this", ".", "transport", "=", "transport", ";", "this", ".", "requestFactory", "=", "transport", ".", "createRequestFactory", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "final", "Response", "execute", "(", "final", "Request", "inputRequest", ",", "final", "Request", ".", "Options", "options", ")", "throws", "IOException", "{", "final", "HttpRequest", "request", "=", "convertRequest", "(", "inputRequest", ",", "options", ")", ";", "final", "HttpResponse", "response", "=", "request", ".", "execute", "(", ")", ";", "return", "convertResponse", "(", "inputRequest", ",", "response", ")", ";", "}", "</s>"]
["<s>", "private", "final", "HttpRequest", "convertRequest", "(", "final", "Request", "inputRequest", ",", "final", "Request", ".", "Options", "options", ")", "throws", "IOException", "{", "HttpContent", "content", "=", "null", ";", "if", "(", "inputRequest", ".", "length", "(", ")", ">", "0", ")", "{", "final", "Collection", "<", "String", ">", "contentTypeValues", "=", "inputRequest", ".", "headers", "(", ")", ".", "get", "(", "\"", "<STR_LIT:Content-Type>", "\"", ")", ";", "String", "contentType", "=", "null", ";", "if", "(", "contentTypeValues", "!", "=", "null", "&", "&", "contentTypeValues", ".", "size", "(", ")", ">", "0", ")", "{", "contentType", "=", "contentTypeValues", ".", "iterator", "(", ")", ".", "next", "(", ")", ";", "}", "else", "{", "contentType", "=", "\"", "<STR_LIT>", "\"", ";", "}", "content", "=", "new", "ByteArrayContent", "(", "contentType", ",", "inputRequest", ".", "body", "(", ")", ")", ";", "}", "final", "HttpRequest", "request", "=", "requestFactory", ".", "buildRequest", "(", "inputRequest", ".", "httpMethod", "(", ")", ".", "name", "(", ")", ",", "new", "GenericUrl", "(", "inputRequest", ".", "url", "(", ")", ")", ",", "content", ")", ";", "final", "HttpHeaders", "headers", "=", "new", "HttpHeaders", "(", ")", ";", "for", "(", "final", "Map", ".", "Entry", "<", "String", ",", "Collection", "<", "String", ">", ">", "header", ":", "inputRequest", ".", "headers", "(", ")", ".", "entrySet", "(", ")", ")", "{", "headers", ".", "set", "(", "header", ".", "getKey", "(", ")", ",", "header", ".", "getValue", "(", ")", ")", ";", "}", "if", "(", "inputRequest", ".", "headers", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", "=", "=", "null", ")", "{", "headers", ".", "setAccept", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "request", ".", "setHeaders", "(", "headers", ")", ";", "request", ".", "setReadTimeout", "(", "options", ".", "readTimeoutMillis", "(", ")", ")", ".", "setConnectTimeout", "(", "options", ".", "connectTimeoutMillis", "(", ")", ")", ".", "setFollowRedirects", "(", "options", ".", "isFollowRedirects", "(", ")", ")", ".", "setThrowExceptionOnExecuteError", "(", "false", ")", ";", "return", "request", ";", "}", "</s>"]
["<s>", "private", "final", "Response", "convertResponse", "(", "final", "Request", "inputRequest", ",", "final", "HttpResponse", "inputResponse", ")", "throws", "IOException", "{", "final", "HttpHeaders", "headers", "=", "inputResponse", ".", "getHeaders", "(", ")", ";", "Integer", "contentLength", "=", "null", ";", "if", "(", "headers", ".", "getContentLength", "(", ")", "!", "=", "null", "&", "&", "headers", ".", "getContentLength", "(", ")", "<", "=", "Integer", ".", "MAX_VALUE", ")", "{", "contentLength", "=", "inputResponse", ".", "getHeaders", "(", ")", ".", "getContentLength", "(", ")", ".", "intValue", "(", ")", ";", "}", "return", "Response", ".", "builder", "(", ")", ".", "body", "(", "inputResponse", ".", "getContent", "(", ")", ",", "contentLength", ")", ".", "status", "(", "inputResponse", ".", "getStatusCode", "(", ")", ")", ".", "reason", "(", "inputResponse", ".", "getStatusMessage", "(", ")", ")", ".", "headers", "(", "toMap", "(", "inputResponse", ".", "getHeaders", "(", ")", ")", ")", ".", "request", "(", "inputRequest", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "final", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "toMap", "(", "final", "HttpHeaders", "headers", ")", "{", "final", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "map", "=", "new", "HashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", ")", ";", "for", "(", "final", "String", "header", ":", "headers", ".", "keySet", "(", ")", ")", "{", "map", ".", "put", "(", "header", ",", "headers", ".", "getHeaderStringValues", "(", "header", ")", ")", ";", "}", "return", "map", ";", "}", "</s>"]
["<s>", "public", "Integer", "getNumber", "(", ")", "{", "return", "number", ";", "}", "</s>"]
["<s>", "public", "void", "setNumber", "(", "Integer", "number", ")", "{", "this", ".", "number", "=", "number", ";", "}", "</s>"]
["<s>", "public", "void", "setPrivateGetterProperty", "(", "String", "privateGetterProperty", ")", "{", "this", ".", "privateGetterProperty", "=", "privateGetterProperty", ";", "}", "</s>"]
["<s>", "private", "String", "getPrivateGetterProperty", "(", ")", "{", "return", "privateGetterProperty", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "void", "setName", "(", "String", "name", ")", "{", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canCreateWithRequestAndResponse", "(", ")", "{", "Request", "request", "=", "Request", ".", "create", "(", "Request", ".", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ",", "StandardCharsets", ".", "UTF_8", ",", "null", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "body", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ".", "request", "(", "request", ")", ".", "build", "(", ")", ";", "FeignException", "exception", "=", "FeignException", ".", "errorReading", "(", "request", ",", "response", ",", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "exception", ".", "responseBody", "(", ")", ")", ".", "isNotEmpty", "(", ")", ";", "assertThat", "(", "exception", ".", "hasRequest", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "exception", ".", "request", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canCreateWithRequestOnly", "(", ")", "{", "Request", "request", "=", "Request", ".", "create", "(", "Request", ".", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ",", "StandardCharsets", ".", "UTF_8", ",", "null", ")", ";", "FeignException", "exception", "=", "FeignException", ".", "errorExecuting", "(", "request", ",", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "exception", ".", "responseBody", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "exception", ".", "content", "(", ")", ")", ".", "isNullOrEmpty", "(", ")", ";", "assertThat", "(", "exception", ".", "hasRequest", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "exception", ".", "request", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "NullPointerException", ".", "class", ")", "public", "void", "nullRequestShouldThrowNPEwThrowable", "(", ")", "{", "new", "Derived", "(", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ",", "null", ",", "new", "Throwable", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "NullPointerException", ".", "class", ")", "public", "void", "nullRequestShouldThrowNPEwThrowableAndBytes", "(", ")", "{", "new", "Derived", "(", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ",", "null", ",", "new", "Throwable", "(", ")", ",", "new", "byte", "[", "1", "]", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "NullPointerException", ".", "class", ")", "public", "void", "nullRequestShouldThrowNPE", "(", ")", "{", "new", "Derived", "(", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "NullPointerException", ".", "class", ")", "public", "void", "nullRequestShouldThrowNPEwBytes", "(", ")", "{", "new", "Derived", "(", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ",", "null", ",", "new", "byte", "[", "1", "]", ")", ";", "}", "</s>"]
["<s>", "public", "Derived", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ",", "Throwable", "cause", ")", "{", "super", "(", "status", ",", "message", ",", "request", ",", "cause", ")", ";", "}", "</s>"]
["<s>", "public", "Derived", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ",", "Throwable", "cause", ",", "byte", "[", "]", "content", ")", "{", "super", "(", "status", ",", "message", ",", "request", ",", "cause", ",", "content", ")", ";", "}", "</s>"]
["<s>", "public", "Derived", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ")", "{", "super", "(", "status", ",", "message", ",", "request", ")", ";", "}", "</s>"]
["<s>", "public", "Derived", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "content", ")", "{", "super", "(", "status", ",", "message", ",", "request", ",", "content", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEncodesObject_visibleFields", "(", ")", "{", "Map", "<", "String", ",", "Object", ">", "expected", "=", "new", "HashMap", "<", ">", "(", ")", ";", "expected", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "expected", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "expected", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "VisibleFieldsObject", "object", "=", "new", "VisibleFieldsObject", "(", ")", ";", "object", ".", "foo", "=", "\"", "<STR_LIT>", "\"", ";", "object", ".", "bar", "=", "\"", "<STR_LIT>", "\"", ";", "object", ".", "baz", "=", "\"", "<STR_LIT>", "\"", ";", "Map", "<", "String", ",", "Object", ">", "encodedMap", "=", "encoder", ".", "encode", "(", "object", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expected", ",", "encodedMap", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEncodesObject_visibleFields_emptyObject", "(", ")", "{", "VisibleFieldsObject", "object", "=", "new", "VisibleFieldsObject", "(", ")", ";", "Map", "<", "String", ",", "Object", ">", "encodedMap", "=", "encoder", ".", "encode", "(", "object", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", "+", "encodedMap", ",", "encodedMap", ".", "isEmpty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEncodesObject_nonVisibleFields", "(", ")", "{", "Map", "<", "String", ",", "Object", ">", "expected", "=", "new", "HashMap", "<", ">", "(", ")", ";", "expected", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "expected", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "QueryMapEncoderObject", "object", "=", "new", "QueryMapEncoderObject", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Map", "<", "String", ",", "Object", ">", "encodedMap", "=", "encoder", ".", "encode", "(", "object", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expected", ",", "encodedMap", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEncodesObject_nonVisibleFields_emptyObject", "(", ")", "{", "QueryMapEncoderObject", "object", "=", "new", "QueryMapEncoderObject", "(", "null", ",", "null", ")", ";", "Map", "<", "String", ",", "Object", ">", "encodedMap", "=", "encoder", ".", "encode", "(", "object", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "encodedMap", ".", "isEmpty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "get", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "path", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "query", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "baseCaseQueryParamsArePercentEncoded", "(", ")", "throws", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "String", "baseUrl", "=", "server", ".", "url", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ";", "Feign", ".", "builder", "(", ")", ".", "target", "(", "TestQuery", ".", "class", ",", "baseUrl", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "targetCanCreateCustomRequest", "(", ")", "throws", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "String", "baseUrl", "=", "server", ".", "url", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ";", "Target", "<", "TestQuery", ">", "custom", "=", "new", "HardCodedTarget", "<", "TestQuery", ">", "(", "TestQuery", ".", "class", ",", "baseUrl", ")", "{", "@", "Override", "public", "Request", "apply", "(", "RequestTemplate", "input", ")", "{", "Request", "urlEncoded", "=", "super", ".", "apply", "(", "input", ")", ";", "return", "Request", ".", "create", "(", "urlEncoded", ".", "httpMethod", "(", ")", ",", "urlEncoded", ".", "url", "(", ")", ".", "replace", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:/>", "\"", ")", ",", "urlEncoded", ".", "headers", "(", ")", ",", "urlEncoded", ".", "body", "(", ")", ",", "urlEncoded", ".", "charset", "(", ")", ")", ";", "}", "}", ";", "Feign", ".", "builder", "(", ")", ".", "target", "(", "custom", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Request", "apply", "(", "RequestTemplate", "input", ")", "{", "Request", "urlEncoded", "=", "super", ".", "apply", "(", "input", ")", ";", "return", "Request", ".", "create", "(", "urlEncoded", ".", "httpMethod", "(", ")", ",", "urlEncoded", ".", "url", "(", ")", ".", "replace", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:/>", "\"", ")", ",", "urlEncoded", ".", "headers", "(", ")", ",", "urlEncoded", ".", "body", "(", ")", ",", "urlEncoded", ".", "charset", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT:GET>", "\"", ")", "Response", "get", "(", "URI", "uri", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyTarget", "(", ")", "throws", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "UriTarget", "uriTarget", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "Target", ".", "EmptyTarget", ".", "create", "(", "UriTarget", ".", "class", ")", ")", ";", "String", "host", "=", "server", ".", "getHostName", "(", ")", ";", "int", "port", "=", "server", ".", "getPort", "(", ")", ";", "uriTarget", ".", "get", "(", "URI", ".", "create", "(", "\"", "<STR_LIT>", "\"", "+", "host", "+", "\"", "<STR_LIT::>", "\"", "+", "port", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hardCodedTargetWithURI", "(", ")", "throws", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "String", "host", "=", "server", ".", "getHostName", "(", ")", ";", "int", "port", "=", "server", ".", "getPort", "(", ")", ";", "String", "base", "=", "\"", "<STR_LIT>", "\"", "+", "host", "+", "\"", "<STR_LIT::>", "\"", "+", "port", ";", "UriTarget", "uriTarget", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "UriTarget", ".", "class", ",", "base", ")", ";", "uriTarget", ".", "get", "(", "URI", ".", "create", "(", "\"", "<STR_LIT>", "\"", "+", "host", "+", "\"", "<STR_LIT::>", "\"", "+", "port", "+", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "<", "K", ",", "V", ">", "Map", "<", "K", ",", "V", ">", "mapOf", "(", "K", "key", ",", "V", "val", ")", "{", "Map", "<", "K", ",", "V", ">", "result", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "result", ".", "put", "(", "key", ",", "val", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "private", "static", "<", "K", ",", "V", ">", "Map", "<", "K", ",", "V", ">", "mapOf", "(", "K", "k1", ",", "V", "v1", ",", "K", "k2", ",", "V", "v2", ")", "{", "Map", "<", "K", ",", "V", ">", "result", "=", "mapOf", "(", "k1", ",", "v1", ")", ";", "result", ".", "put", "(", "k2", ",", "v2", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "private", "static", "<", "K", ",", "V", ">", "Map", "<", "K", ",", "V", ">", "mapOf", "(", "K", "k1", ",", "V", "v1", ",", "K", "k2", ",", "V", "v2", ",", "K", "k3", ",", "V", "v3", ")", "{", "Map", "<", "K", ",", "V", ">", "result", "=", "mapOf", "(", "k1", ",", "v1", ",", "k2", ",", "v2", ")", ";", "result", ".", "put", "(", "k3", ",", "v3", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "private", "static", "String", "expand", "(", "String", "template", ",", "Map", "<", "String", ",", "Object", ">", "variables", ")", "{", "RequestTemplate", "requestTemplate", "=", "new", "RequestTemplate", "(", ")", ";", "requestTemplate", ".", "uri", "(", "template", ")", ";", "return", "requestTemplate", ".", "resolve", "(", "variables", ")", ".", "url", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandUrlEncoded", "(", ")", "{", "for", "(", "String", "val", ":", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", "{", "assertThat", "(", "expand", "(", "\"", "<STR_LIT>", "\"", ",", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "val", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", "+", "UriUtils", ".", "encode", "(", "val", ",", "Util", ".", "UTF_8", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandMultipleParams", "(", ")", "{", "assertThat", "(", "expand", "(", "\"", "<STR_LIT>", "\"", ",", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandParamKeyHyphen", "(", ")", "{", "assertThat", "(", "expand", "(", "\"", "<STR_LIT>", "\"", ",", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandMissingParamProceeds", "(", ")", "{", "assertThat", "(", "expand", "(", "\"", "<STR_LIT>", "\"", ",", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveTemplateWithParameterizedPathSkipsEncodingSlash", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveTemplateWithBinaryBody", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ".", "body", "(", "new", "byte", "[", "]", "{", "<NUM_LIT:7>", ",", "<NUM_LIT:3>", ",", "-", "<NUM_LIT:3>", ",", "-", "<NUM_LIT:7>", "}", ",", "null", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canInsertAbsoluteHref", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "template", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "template", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveTemplateWithRelativeUriWithQuery", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "template", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveTemplateWithBaseAndParameterizedQuery", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveTemplateWithBaseAndParameterizedIterableQuery", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveTemplateWithMixedCollectionFormatsByQuery", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "collectionFormat", "(", "CollectionFormat", ".", "EXPLODED", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", "\"", "<STR_LIT:[]>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "CollectionFormat", ".", "CSV", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "\"", "<STR_LIT:[]>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ")", ")", ")", ";", "assertThat", "(", "template", ".", "url", "(", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveTemplateWithHeaderSubstitutions", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveTemplateWithHeaderSubstitutionsNotAtStart", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveTemplateWithHeaderWithEscapedCurlyBrace", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveTemplateWithHeaderIncludingSpecialCharacters", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveTemplateWithHeaderEmptyResult", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasNoHeader", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveTemplateWithMixedRequestLineParams", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "insertHasQueryParams", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "template", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "template", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveTemplateWithBodyTemplateSetsBodyAndContentLength", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "POST", ")", ".", "bodyTemplate", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "Util", ".", "UTF_8", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "String", ".", "valueOf", "(", "template", ".", "body", "(", ")", ".", "length", ")", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveTemplateWithBodyTemplateDoesNotDoubleDecode", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "POST", ")", ".", "bodyTemplate", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ",", "Util", ".", "UTF_8", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "skipUnresolvedQueries", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "allQueriesUnresolvable", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", "\"", "<STR_LIT:2>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasQueries", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "spaceEncodingInUrlParam", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "template", ".", "request", "(", ")", ".", "url", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "useCaseInsensitiveHeaderFieldNames", "(", ")", "{", "final", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "final", "String", "value", "=", "\"", "<STR_LIT:1>", "\"", ";", "template", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "value", ")", ";", "final", "String", "value2", "=", "\"", "<STR_LIT:2>", "\"", ";", "template", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "value2", ")", ";", "final", "Collection", "<", "String", ">", "test", "=", "template", ".", "headers", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "String", "assertionMessage", "=", "\"", "<STR_LIT>", "\"", ";", "assertNotNull", "(", "assertionMessage", ",", "test", ")", ";", "assertTrue", "(", "assertionMessage", ",", "test", ".", "contains", "(", "value", ")", ")", ";", "assertTrue", "(", "assertionMessage", ",", "test", ".", "contains", "(", "value2", ")", ")", ";", "assertEquals", "(", "1", ",", "template", ".", "headers", "(", ")", ".", "size", "(", ")", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "template", ".", "headers", "(", ")", ".", "get", "(", "\"", "<STR_LIT:T>", "\"", ")", ".", "size", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodeSlashTest", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ".", "decodeSlash", "(", "false", ")", ";", "template", "=", "template", ".", "resolve", "(", "mapOf", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:/>", "\"", ")", ")", ";", "assertThat", "(", "template", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Test", "public", "void", "uriStuffedIntoMethod", "(", ")", "{", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "new", "RequestTemplate", "(", ")", ".", "method", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodedQueryClearedOnNull", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "template", ".", "query", "(", "\"", "<STR_LIT:[]>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "template", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT:[]>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "template", ".", "query", "(", "\"", "<STR_LIT:[]>", "\"", ",", "(", "String", "[", "]", ")", "null", ")", ";", "assertThat", "(", "template", ".", "queries", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodedQuery", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "query", "(", "\"", "<STR_LIT:[]>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "template", ".", "queryLine", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "template", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT:[]>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodedQueryWithUnsafeCharactersMixedWithUnencoded", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "query", "(", "\"", "<STR_LIT:[]>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "query", "(", "\"", "<STR_LIT:[]>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "template", ".", "queryLine", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "queries", "=", "template", ".", "queries", "(", ")", ";", "assertThat", "(", "queries", ")", ".", "containsKey", "(", "\"", "<STR_LIT:[]>", "\"", ")", ";", "assertThat", "(", "queries", ".", "get", "(", "\"", "<STR_LIT:[]>", "\"", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Test", "public", "void", "shouldRetrieveHeadersWithoutNull", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "header", "(", "\"", "<STR_LIT:1>", "\"", ",", "(", "String", ")", "null", ")", ".", "header", "(", "\"", "<STR_LIT:2>", "\"", ",", "Collections", ".", "emptyList", "(", ")", ")", ".", "header", "(", "\"", "<STR_LIT:3>", "\"", ",", "(", "Collection", ")", "null", ")", ".", "header", "(", "\"", "<STR_LIT:4>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "header", "(", "\"", "<STR_LIT:5>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "header", "(", "\"", "<STR_LIT:6>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "template", ".", "headers", "(", ")", ")", ".", "hasSize", "(", "<NUM_LIT:4>", ")", ";", "assertThat", "(", "template", ".", "headers", "(", ")", ".", "keySet", "(", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT:4>", "\"", ",", "\"", "<STR_LIT:5>", "\"", ",", "\"", "<STR_LIT:6>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Test", "(", "expected", "=", "UnsupportedOperationException", ".", "class", ")", "public", "void", "shouldNotInsertHeadersImmutableMap", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "header", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "template", ".", "headers", "(", ")", ")", ".", "hasSize", "(", "1", ")", ";", "assertThat", "(", "template", ".", "headers", "(", ")", ".", "keySet", "(", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT:1>", "\"", ")", ";", "template", ".", "headers", "(", ")", ".", "put", "(", "\"", "<STR_LIT:2>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "fragmentShouldNotBeEncodedInUri", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queries", "(", "mapOf", "(", "\"", "<STR_LIT:1>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ")", ";", "assertThat", "(", "template", ".", "url", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "fragmentShouldNotBeEncodedInTarget", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", ")", ".", "queries", "(", "mapOf", "(", "\"", "<STR_LIT:1>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ")", ";", "assertThat", "(", "template", ".", "url", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "slashShouldNotBeAppendedForMatrixParams", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ",", "true", ")", ";", "assertThat", "(", "template", ".", "url", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodedReservedPreserveSlash", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "template", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "template", ".", "method", "(", "HttpMethod", ".", "GET", ")", ";", "template", "=", "template", ".", "resolve", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "template", ".", "url", "(", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodedReservedEncodeSlash", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "template", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ";", "template", ".", "decodeSlash", "(", "false", ")", ";", "template", ".", "method", "(", "HttpMethod", ".", "GET", ")", ";", "template", "=", "template", ".", "resolve", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "template", ".", "url", "(", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "iterableQueryParams", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "queryParams", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postTemplateParamsResolve", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "login", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "responseCoercesToStringBody", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "response", "(", ")", ";", "assertTrue", "(", "response", ".", "body", "(", ")", ".", "isRepeatable", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "response", ".", "body", "(", ")", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postFormParams", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "form", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postBodyParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "body", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "bodyTypeCorrespondsWithParameterType", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "AtomicReference", "<", "Type", ">", "encodedType", "=", "new", "AtomicReference", "<", ">", "(", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "encoder", "(", "new", "Encoder", ".", "Default", "(", ")", "{", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "encodedType", ".", "set", "(", "bodyType", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "body", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "server", ".", "takeRequest", "(", ")", ";", "assertThat", "(", "encodedType", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "new", "TypeToken", "<", "List", "<", "String", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "encodedType", ".", "set", "(", "bodyType", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postGZIPEncodedBodyParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "gzipBody", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasNoHeaderNamed", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasGzippedBody", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postDeflateEncodedBodyParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "deflateBody", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasNoHeaderNamed", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasDeflatedBody", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "singleInterceptor", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "requestInterceptor", "(", "new", "ForwardedForInterceptor", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "multipleInterceptor", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "requestInterceptor", "(", "new", "ForwardedForInterceptor", "(", ")", ")", ".", "requestInterceptor", "(", "new", "UserAgentInterceptor", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customExpander", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "expand", "(", "new", "Date", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customExpanderListParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "expandList", "(", "Arrays", ".", "asList", "(", "new", "Date", "(", "<NUM_LIT>", ")", ",", "new", "Date", "(", "<NUM_LIT>", ")", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customExpanderNullParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "expandList", "(", "Arrays", ".", "asList", "(", "new", "Date", "(", "<NUM_LIT>", ")", ",", "null", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerMap", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "headerMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "headerMap", "(", "headerMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerMapWithHeaderAnnotations", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "headerMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "headerMapWithHeaderAnnotations", "(", "headerMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "headerMapWithHeaderAnnotations", "(", "headerMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMap", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapIterableValuesExpanded", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "new", "ArrayList", "<", "String", ">", "(", ")", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapWithQueryParams", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapWithQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapWithQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "api", ".", "queryMapWithQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapValueStartingWithBrace", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapEncoded", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapEncoded", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoWithFullParams", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CustomPojo", "customPojo", "=", "new", "CustomPojo", "(", "\"", "<STR_LIT:Name>", "\"", ",", "<NUM_LIT:3>", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPojo", "(", "customPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoWithPartialParams", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CustomPojo", "customPojo", "=", "new", "CustomPojo", "(", "\"", "<STR_LIT:Name>", "\"", ",", "null", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPojo", "(", "customPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoWithEmptyParams", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CustomPojo", "customPojo", "=", "new", "CustomPojo", "(", "null", ",", "null", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPojo", "(", "customPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configKeyFormatsAsExpected", "(", ")", "throws", "Exception", "{", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Feign", ".", "configKey", "(", "TestInterface", ".", "class", ",", "TestInterface", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Feign", ".", "configKey", "(", "TestInterface", ".", "class", ",", "TestInterface", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "URI", ".", "class", ",", "String", ".", "class", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configKeyUsesChildType", "(", ")", "throws", "Exception", "{", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Feign", ".", "configKey", "(", "List", ".", "class", ",", "Iterable", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canOverrideErrorDecoder", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "errorDecoder", "(", "new", "IllegalArgumentExceptionOn400", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "retriesLostConnectionBeforeRead", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setSocketPolicy", "(", "SocketPolicy", ".", "DISCONNECT_AT_START", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "server", ".", "getRequestCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "overrideTypeSpecificDecoder", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "decoder", "(", "new", "Decoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertEquals", "(", "api", ".", "post", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesntRetryAfterResponseIsSent", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "FeignException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "decoder", "(", "new", "Decoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsFeignExceptionIncludingBody", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterface", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "try", "{", "api", ".", "body", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT:/>", "\"", ")", ";", "assertThat", "(", "e", ".", "contentUTF8", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsFeignExceptionWithoutBody", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterface", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "try", "{", "api", ".", "noContent", "(", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT:/>", "\"", ")", ";", "assertThat", "(", "e", ".", "contentUTF8", "(", ")", ")", ".", "isEqualTo", "(", "\"", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "whenReturnTypeIsResponseNoErrorHandling", "(", ")", "{", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "headers", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "headers", "(", "headers", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT:/>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "new", "byte", "[", "0", "]", ")", ".", "build", "(", ")", ";", "ExecutorService", "execs", "=", "Executors", ".", "newSingleThreadExecutor", "(", ")", ";", "TestInterface", "api", "=", "AsyncFeign", ".", "<", "Void", ">", "asyncBuilder", "(", ")", ".", "client", "(", "new", "AsyncClient", ".", "Default", "<", ">", "(", "(", "request", ",", "options", ")", "-", ">", "response", ",", "execs", ")", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertEquals", "(", "api", ".", "response", "(", ")", ".", "headers", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "execs", ".", "shutdown", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "continueOrPropagate", "(", "RetryableException", "e", ")", "{", "if", "(", "tripped", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "tripped", "=", "true", ";", "return", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Retryer", "clone", "(", ")", "{", "return", "new", "MockRetryer", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "okIfDecodeRootCauseHasNoMessage", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "DecodeException", ".", "class", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "decoder", "(", "new", "Decoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodingExceptionGetWrappedInDecode404Mode", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "thrown", ".", "expect", "(", "DecodeException", ".", "class", ")", ";", "thrown", ".", "expectCause", "(", "isA", "(", "NoSuchElementException", ".", "class", ")", ")", ";", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "decode404", "(", ")", ".", "decoder", "(", "new", "Decoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "assertEquals", "(", "<NUM_LIT>", ",", "response", ".", "status", "(", ")", ")", ";", "throw", "new", "NoSuchElementException", "(", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "assertEquals", "(", "<NUM_LIT>", ",", "response", ".", "status", "(", ")", ")", ";", "throw", "new", "NoSuchElementException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodingDoesNotSwallow404ErrorsInDecode404Mode", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "decode404", "(", ")", ".", "errorDecoder", "(", "new", "IllegalArgumentExceptionOn404", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "queryMap", "(", "Collections", ".", "<", "String", ",", "Object", ">", "emptyMap", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "okIfEncodeRootCauseHasNoMessage", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "EncodeException", ".", "class", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "encoder", "(", "new", "Encoder", "(", ")", "{", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "body", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "equalsHashCodeAndToStringWork", "(", ")", "{", "Target", "<", "TestInterface", ">", "t1", "=", "new", "HardCodedTarget", "<", "TestInterface", ">", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Target", "<", "TestInterface", ">", "t2", "=", "new", "HardCodedTarget", "<", "TestInterface", ">", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Target", "<", "OtherTestInterface", ">", "t3", "=", "new", "HardCodedTarget", "<", "OtherTestInterface", ">", "(", "OtherTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "TestInterface", "i1", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "t1", ")", ";", "TestInterface", "i2", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "t1", ")", ";", "TestInterface", "i3", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "t2", ")", ";", "OtherTestInterface", "i4", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "t3", ")", ";", "assertThat", "(", "i1", ")", ".", "isEqualTo", "(", "i2", ")", ".", "isNotEqualTo", "(", "i3", ")", ".", "isNotEqualTo", "(", "i4", ")", ";", "assertThat", "(", "i1", ".", "hashCode", "(", ")", ")", ".", "isEqualTo", "(", "i2", ".", "hashCode", "(", ")", ")", ".", "isNotEqualTo", "(", "i3", ".", "hashCode", "(", ")", ")", ".", "isNotEqualTo", "(", "i4", ".", "hashCode", "(", ")", ")", ";", "assertThat", "(", "i1", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "i2", ".", "toString", "(", ")", ")", ".", "isNotEqualTo", "(", "i3", ".", "toString", "(", ")", ")", ".", "isNotEqualTo", "(", "i4", ".", "toString", "(", ")", ")", ";", "assertThat", "(", "t1", ")", ".", "isNotEqualTo", "(", "i1", ")", ";", "assertThat", "(", "t1", ".", "hashCode", "(", ")", ")", ".", "isEqualTo", "(", "i1", ".", "hashCode", "(", ")", ")", ";", "assertThat", "(", "t1", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "i1", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodeLogicSupportsByteArray", "(", ")", "throws", "Exception", "{", "byte", "[", "]", "expectedResponse", "=", "{", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", "}", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "new", "Buffer", "(", ")", ".", "write", "(", "expectedResponse", ")", ")", ")", ";", "OtherTestInterface", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "OtherTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertThat", "(", "api", ".", "binaryResponseBody", "(", ")", ")", ".", "containsExactly", "(", "expectedResponse", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodeLogicSupportsByteArray", "(", ")", "throws", "Exception", "{", "byte", "[", "]", "expectedRequest", "=", "{", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", "}", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "OtherTestInterface", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "OtherTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "binaryRequestBody", "(", "expectedRequest", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "expectedRequest", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodedQueryParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "encodedQueryParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "responseMapperIsAppliedBeforeDelegate", "(", ")", "throws", "IOException", "{", "ResponseMappingDecoder", "decoder", "=", "new", "ResponseMappingDecoder", "(", "upperCaseResponseMapper", "(", ")", ",", "new", "StringDecoder", "(", ")", ")", ";", "String", "output", "=", "(", "String", ")", "decoder", ".", "decode", "(", "responseWithText", "(", "\"", "<STR_LIT>", "\"", ")", ",", "String", ".", "class", ")", ";", "assertThat", "(", "output", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "ResponseMapper", "upperCaseResponseMapper", "(", ")", "{", "return", "new", "ResponseMapper", "(", ")", "{", "@", "Override", "public", "Response", "map", "(", "Response", "response", ",", "Type", "type", ")", "{", "try", "{", "return", "response", ".", "toBuilder", "(", ")", ".", "body", "(", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "UTF_8", ")", ")", ".", "toUpperCase", "(", ")", ".", "getBytes", "(", ")", ")", ".", "build", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "map", "(", "Response", "response", ",", "Type", "type", ")", "{", "try", "{", "return", "response", ".", "toBuilder", "(", ")", ".", "body", "(", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "UTF_8", ")", ")", ".", "toUpperCase", "(", ")", ".", "getBytes", "(", ")", ")", ".", "build", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "Response", "responseWithText", "(", "String", "text", ")", "{", "return", "Response", ".", "builder", "(", ")", ".", "body", "(", "text", ",", "Util", ".", "UTF_8", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "new", "HashMap", "<", ">", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapAndDecodeExecutesMapFunction", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterface", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "mapAndDecode", "(", "upperCaseResponseMapper", "(", ")", ",", "new", "StringDecoder", "(", ")", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertEquals", "(", "api", ".", "post", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithPrivateGetterIgnored", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "propertyPojo", ".", "setPrivateGetterProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "propertyPojo", ".", "setName", "(", "\"", "<STR_LIT:Name>", "\"", ")", ";", "propertyPojo", ".", "setNumber", "(", "1", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMap_with_child_pojo", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "FieldQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "ChildPojo", "childPojo", "=", "new", "ChildPojo", "(", ")", ";", "childPojo", ".", "setChildPrivateProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "childPojo", ".", "setParentProtectedProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "childPojo", ".", "setParentPublicProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPropertyInheritence", "(", "childPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithNullValueIgnored", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "propertyPojo", ".", "setName", "(", "null", ")", ";", "propertyPojo", ".", "setNumber", "(", "1", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithEmptyParams", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "response", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "post", "(", ")", "throws", "TestInterfaceException", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Body", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", "void", "login", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "user", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "password", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "body", "(", "List", "<", "String", ">", "contents", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "body", "(", "String", "content", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "noContent", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "void", "gzipBody", "(", "List", "<", "String", ">", "contents", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "void", "deflateBody", "(", "List", "<", "String", ">", "contents", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "form", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "user", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "password", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "uriParam", "(", "@", "Param", "(", "\"", "<STR_LIT:1>", "\"", ")", "String", "one", ",", "URI", "endpoint", ",", "@", "Param", "(", "\"", "<STR_LIT:2>", "\"", ")", "String", "two", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "queryParams", "(", "@", "Param", "(", "\"", "<STR_LIT:1>", "\"", ")", "String", "one", ",", "@", "Param", "(", "\"", "<STR_LIT:2>", "\"", ")", "Iterable", "<", "String", ">", "twos", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "expand", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "expander", "=", "DateToMillis", ".", "class", ")", "Date", "date", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "expandList", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "expander", "=", "DateToMillis", ".", "class", ")", "List", "<", "Date", ">", "dates", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "expandArray", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "expander", "=", "DateToMillis", ".", "class", ")", "Date", "[", "]", "dates", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "headerMap", "(", "@", "HeaderMap", "Map", "<", "String", ",", "Object", ">", "headerMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "void", "headerMapWithHeaderAnnotations", "(", "@", "HeaderMap", "Map", "<", "String", ",", "Object", ">", "headerMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMap", "(", "@", "QueryMap", "Map", "<", "String", ",", "Object", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMapEncoded", "(", "@", "QueryMap", "(", "encoded", "=", "true", ")", "Map", "<", "String", ",", "Object", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMapWithQueryParams", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ",", "@", "QueryMap", "Map", "<", "String", ",", "Object", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "encodedQueryParam", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ")", "String", "trim", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMapPojo", "(", "@", "QueryMap", "CustomPojo", "object", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMapPropertyPojo", "(", "@", "QueryMap", "PropertyPojo", "object", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMapPropertyInheritence", "(", "@", "QueryMap", "ChildPojo", "object", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "String", "expand", "(", "Object", "value", ")", "{", "return", "String", ".", "valueOf", "(", "(", "(", "Date", ")", "value", ")", ".", "getTime", "(", ")", ")", ";", "}", "</s>"]
["<s>", "TestInterfaceException", "(", "String", "message", ")", "{", "super", "(", "message", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "post", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "byte", "[", "]", "binaryResponseBody", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "binaryRequestBody", "(", "byte", "[", "]", "contents", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "RequestTemplate", "template", ")", "{", "template", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "RequestTemplate", "template", ")", "{", "template", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "if", "(", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", ")", "{", "return", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "super", ".", "decode", "(", "methodKey", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "if", "(", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", ")", "{", "return", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "super", ".", "decode", "(", "methodKey", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "if", "(", "object", "instanceof", "Map", ")", "{", "template", ".", "body", "(", "new", "Gson", "(", ")", ".", "toJson", "(", "object", ")", ")", ";", "}", "else", "{", "template", ".", "body", "(", "object", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "TestInterfaceBuilder", "requestInterceptor", "(", "RequestInterceptor", "requestInterceptor", ")", "{", "delegate", ".", "requestInterceptor", "(", "requestInterceptor", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceBuilder", "encoder", "(", "Encoder", "encoder", ")", "{", "delegate", ".", "encoder", "(", "encoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceBuilder", "decoder", "(", "Decoder", "decoder", ")", "{", "delegate", ".", "decoder", "(", "decoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceBuilder", "errorDecoder", "(", "ErrorDecoder", "errorDecoder", ")", "{", "delegate", ".", "errorDecoder", "(", "errorDecoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceBuilder", "decode404", "(", ")", "{", "delegate", ".", "decode404", "(", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceBuilder", "queryMapEndcoder", "(", "QueryMapEncoder", "queryMapEncoder", ")", "{", "delegate", ".", "queryMapEncoder", "(", "queryMapEncoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterface", "target", "(", "String", "url", ")", "{", "return", "delegate", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "removesEmptyStrings", "(", ")", "{", "String", "[", "]", "values", "=", "new", "String", "[", "]", "{", "\"", "\"", ",", "null", "}", ";", "assertThat", "(", "removeValues", "(", "values", ",", "(", "value", ")", "-", ">", "emptyToNull", "(", "value", ")", "=", "=", "null", ",", "String", ".", "class", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "removesEvenNumbers", "(", ")", "{", "Integer", "[", "]", "values", "=", "new", "Integer", "[", "]", "{", "<NUM_LIT>", ",", "<NUM_LIT>", "}", ";", "assertThat", "(", "removeValues", "(", "values", ",", "(", "number", ")", "-", ">", "number", "%", "<NUM_LIT:2>", "=", "=", "0", ",", "Integer", ".", "class", ")", ")", ".", "containsExactly", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyValueOf", "(", ")", "throws", "Exception", "{", "assertEquals", "(", "false", ",", "Util", ".", "emptyValueOf", "(", "boolean", ".", "class", ")", ")", ";", "assertEquals", "(", "false", ",", "Util", ".", "emptyValueOf", "(", "Boolean", ".", "class", ")", ")", ";", "assertThat", "(", "(", "byte", "[", "]", ")", "Util", ".", "emptyValueOf", "(", "byte", "[", "]", ".", "class", ")", ")", ".", "isEmpty", "(", ")", ";", "assertEquals", "(", "Collections", ".", "emptyList", "(", ")", ",", "Util", ".", "emptyValueOf", "(", "Collection", ".", "class", ")", ")", ";", "assertThat", "(", "(", "Iterator", "<", "?", ">", ")", "Util", ".", "emptyValueOf", "(", "Iterator", ".", "class", ")", ")", ".", "isEmpty", "(", ")", ";", "assertEquals", "(", "Collections", ".", "emptyList", "(", ")", ",", "Util", ".", "emptyValueOf", "(", "List", ".", "class", ")", ")", ";", "assertEquals", "(", "Collections", ".", "emptyMap", "(", ")", ",", "Util", ".", "emptyValueOf", "(", "Map", ".", "class", ")", ")", ";", "assertEquals", "(", "Collections", ".", "emptySet", "(", ")", ",", "Util", ".", "emptyValueOf", "(", "Set", ".", "class", ")", ")", ";", "assertEquals", "(", "Optional", ".", "empty", "(", ")", ",", "Util", ".", "emptyValueOf", "(", "Optional", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyValueOf_considersRawType", "(", ")", "throws", "Exception", "{", "Type", "listStringType", "=", "LastTypeParameter", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getGenericType", "(", ")", ";", "assertThat", "(", "(", "List", "<", "?", ">", ")", "Util", ".", "emptyValueOf", "(", "listStringType", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyValueOf_nullForUndefined", "(", ")", "throws", "Exception", "{", "assertThat", "(", "Util", ".", "emptyValueOf", "(", "Number", ".", "class", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "Util", ".", "emptyValueOf", "(", "Parameterized", ".", "class", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveLastTypeParameterWhenNotSubtype", "(", ")", "throws", "Exception", "{", "Type", "context", "=", "LastTypeParameter", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getGenericType", "(", ")", ";", "Type", "listStringType", "=", "LastTypeParameter", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getGenericType", "(", ")", ";", "Type", "last", "=", "resolveLastTypeParameter", "(", "context", ",", "Parameterized", ".", "class", ")", ";", "assertEquals", "(", "listStringType", ",", "last", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "lastTypeFromInstance", "(", ")", "throws", "Exception", "{", "Parameterized", "<", "?", ">", "instance", "=", "new", "ParameterizedSubtype", "(", ")", ";", "Type", "last", "=", "resolveLastTypeParameter", "(", "instance", ".", "getClass", "(", ")", ",", "Parameterized", ".", "class", ")", ";", "assertEquals", "(", "String", ".", "class", ",", "last", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "lastTypeFromAnonymous", "(", ")", "throws", "Exception", "{", "Parameterized", "<", "?", ">", "instance", "=", "new", "Parameterized", "<", "Reader", ">", "(", ")", "{", "}", ";", "Type", "last", "=", "resolveLastTypeParameter", "(", "instance", ".", "getClass", "(", ")", ",", "Parameterized", ".", "class", ")", ";", "assertEquals", "(", "Reader", ".", "class", ",", "last", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveLastTypeParameterWhenWildcard", "(", ")", "throws", "Exception", "{", "Type", "context", "=", "LastTypeParameter", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getGenericType", "(", ")", ";", "Type", "listStringType", "=", "LastTypeParameter", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getGenericType", "(", ")", ";", "Type", "last", "=", "resolveLastTypeParameter", "(", "context", ",", "Parameterized", ".", "class", ")", ";", "assertEquals", "(", "listStringType", ",", "last", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolveLastTypeParameterWhenParameterizedSubtype", "(", ")", "throws", "Exception", "{", "Type", "context", "=", "LastTypeParameter", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getGenericType", "(", ")", ";", "Type", "listStringType", "=", "LastTypeParameter", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getGenericType", "(", ")", ";", "Type", "last", "=", "resolveLastTypeParameter", "(", "context", ",", "ParameterizedDecoder", ".", "class", ")", ";", "assertEquals", "(", "listStringType", ",", "last", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "unboundWildcardIsObject", "(", ")", "throws", "Exception", "{", "Type", "context", "=", "LastTypeParameter", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getGenericType", "(", ")", ";", "Type", "last", "=", "resolveLastTypeParameter", "(", "context", ",", "ParameterizedDecoder", ".", "class", ")", ";", "assertEquals", "(", "Object", ".", "class", ",", "last", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "checkArgumentInputFalseNotNullNullOutputIllegalArgumentException", "(", ")", "{", "final", "boolean", "expression", "=", "false", ";", "final", "String", "errorMessageTemplate", "=", "\"", "\"", ";", "final", "Object", "[", "]", "errorMessageArgs", "=", "null", ";", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "Util", ".", "checkArgument", "(", "expression", ",", "errorMessageTemplate", ",", "errorMessageArgs", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "checkNotNullInputNullNotNullNullOutputNullPointerException", "(", ")", "{", "final", "Object", "reference", "=", "null", ";", "final", "String", "errorMessageTemplate", "=", "\"", "\"", ";", "final", "Object", "[", "]", "errorMessageArgs", "=", "null", ";", "thrown", ".", "expect", "(", "NullPointerException", ".", "class", ")", ";", "Util", ".", "checkNotNull", "(", "reference", ",", "errorMessageTemplate", ",", "errorMessageArgs", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "checkNotNullInputZeroNotNull0OutputZero", "(", ")", "{", "final", "Object", "reference", "=", "0", ";", "final", "String", "errorMessageTemplate", "=", "\"", "\"", ";", "final", "Object", "[", "]", "errorMessageArgs", "=", "{", "}", ";", "final", "Object", "retval", "=", "Util", ".", "checkNotNull", "(", "reference", ",", "errorMessageTemplate", ",", "errorMessageArgs", ")", ";", "Assert", ".", "assertEquals", "(", "new", "Integer", "(", "0", ")", ",", "retval", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "checkStateInputFalseNotNullNullOutputIllegalStateException", "(", ")", "{", "final", "boolean", "expression", "=", "false", ";", "final", "String", "errorMessageTemplate", "=", "\"", "\"", ";", "final", "Object", "[", "]", "errorMessageArgs", "=", "null", ";", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "Util", ".", "checkState", "(", "expression", ",", "errorMessageTemplate", ",", "errorMessageArgs", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyToNullInputNotNullOutputNotNull", "(", ")", "{", "final", "String", "string", "=", "\"", "<STR_LIT>", "\"", ";", "final", "String", "retval", "=", "Util", ".", "emptyToNull", "(", "string", ")", ";", "Assert", ".", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "retval", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyToNullInputNullOutputNull", "(", ")", "{", "final", "String", "string", "=", "null", ";", "final", "String", "retval", "=", "Util", ".", "emptyToNull", "(", "string", ")", ";", "Assert", ".", "assertNull", "(", "retval", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isBlankInputNotNullOutputFalse", "(", ")", "{", "final", "String", "value", "=", "\"", "<STR_LIT>", "\"", ";", "final", "boolean", "retval", "=", "Util", ".", "isBlank", "(", "value", ")", ";", "Assert", ".", "assertEquals", "(", "false", ",", "retval", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isBlankInputNullOutputTrue", "(", ")", "{", "final", "String", "value", "=", "null", ";", "final", "boolean", "retval", "=", "Util", ".", "isBlank", "(", "value", ")", ";", "Assert", ".", "assertEquals", "(", "true", ",", "retval", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isNotBlankInputNotNullOutputFalse", "(", ")", "{", "final", "String", "value", "=", "\"", "\"", ";", "final", "boolean", "retval", "=", "Util", ".", "isNotBlank", "(", "value", ")", ";", "Assert", ".", "assertEquals", "(", "false", ",", "retval", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "isNotBlankInputNotNullOutputTrue", "(", ")", "{", "final", "String", "value", "=", "\"", "<STR_LIT>", "\"", ";", "final", "boolean", "retval", "=", "Util", ".", "isNotBlank", "(", "value", ")", ";", "Assert", ".", "assertEquals", "(", "true", ",", "retval", ")", ";", "}", "</s>"]
["<s>", "QueryMapEncoderObject", "(", "String", "foo", ",", "String", "bar", ")", "{", "this", ".", "foo", "=", "foo", ";", "this", ".", "bar", "=", "bar", ";", "}", "</s>"]
["<s>", "CaseExpander", "(", ")", "{", "this", "(", "false", ")", ";", "}", "</s>"]
["<s>", "CaseExpander", "(", "boolean", "lowercase", ")", "{", "this", ".", "lowercase", "=", "lowercase", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "expand", "(", "Object", "value", ")", "{", "return", "lowercase", "?", "value", ".", "toString", "(", ")", ".", "toLowerCase", "(", ")", ":", "value", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "get", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "expander", "=", "CaseExpander", ".", "class", ")", "String", "query", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "baseCaseExpanderNewInstance", "(", ")", "throws", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "String", "baseUrl", "=", "server", ".", "url", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ";", "Feign", ".", "builder", "(", ")", ".", "target", "(", "TestExpander", ".", "class", ",", "baseUrl", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Bean", "CaseExpander", "lowercaseExpander", "(", ")", "{", "return", "new", "CaseExpander", "(", "true", ")", ";", "}", "</s>"]
["<s>", "@", "Bean", "Contract", "contract", "(", "BeanFactory", "beanFactory", ")", "{", "return", "new", "ContractWithRuntimeInjection", "(", "beanFactory", ")", ";", "}", "</s>"]
["<s>", "ContractWithRuntimeInjection", "(", "BeanFactory", "beanFactory", ")", "{", "this", ".", "beanFactory", "=", "beanFactory", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "List", "<", "MethodMetadata", ">", "parseAndValidateMetadata", "(", "Class", "<", "?", ">", "targetType", ")", "{", "List", "<", "MethodMetadata", ">", "result", "=", "new", "Contract", ".", "Default", "(", ")", ".", "parseAndValidateMetadata", "(", "targetType", ")", ";", "for", "(", "MethodMetadata", "md", ":", "result", ")", "{", "Map", "<", "Integer", ",", "Param", ".", "Expander", ">", "indexToExpander", "=", "new", "LinkedHashMap", "<", "Integer", ",", "Param", ".", "Expander", ">", "(", ")", ";", "for", "(", "Map", ".", "Entry", "<", "Integer", ",", "Class", "<", "?", "extends", "Param", ".", "Expander", ">", ">", "entry", ":", "md", ".", "indexToExpanderClass", "(", ")", ".", "entrySet", "(", ")", ")", "{", "indexToExpander", ".", "put", "(", "entry", ".", "getKey", "(", ")", ",", "beanFactory", ".", "getBean", "(", "entry", ".", "getValue", "(", ")", ")", ")", ";", "}", "md", ".", "indexToExpander", "(", "indexToExpander", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "contractWithRuntimeInjection", "(", ")", "throws", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "String", "baseUrl", "=", "server", ".", "url", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ";", "ApplicationContext", "context", "=", "new", "AnnotationConfigApplicationContext", "(", "FeignConfiguration", ".", "class", ")", ";", "Feign", ".", "builder", "(", ")", ".", "contract", "(", "context", ".", "getBean", "(", "Contract", ".", "class", ")", ")", ".", "target", "(", "TestExpander", ".", "class", ",", "baseUrl", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "CustomPojo", "(", "String", "name", ",", "Integer", "number", ")", "{", "this", ".", "name", "=", "name", ";", "this", ".", "number", "=", "number", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "httpMethods", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "Methods", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "Methods", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "Methods", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "Methods", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "bodyParamIsGeneric", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "BodyParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "List", ".", "class", ")", ";", "assertThat", "(", "md", ".", "bodyIndex", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "md", ".", "bodyType", "(", ")", ")", ".", "isEqualTo", "(", "new", "TypeToken", "<", "List", "<", "String", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "bodyParamWithPathParam", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "BodyParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "int", ".", "class", ",", "List", ".", "class", ")", ";", "assertThat", "(", "md", ".", "bodyIndex", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsOnly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "tooManyBodies", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "BodyParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "List", ".", "class", ",", "List", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customMethodWithoutPath", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "CustomMethod", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasUrl", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryParamsInPathExtract", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "WithQueryParamsInPath", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "WithQueryParamsInPath", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "WithQueryParamsInPath", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "WithQueryParamsInPath", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "WithQueryParamsInPath", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "new", "ArrayList", "<", ">", "(", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "WithQueryParamsInPath", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "new", "ArrayList", "<", ">", "(", ")", ")", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "WithQueryParamsInPath", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "new", "ArrayList", "<", ">", "(", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "new", "ArrayList", "<", ">", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "bodyWithoutParameters", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "BodyWithoutParameters", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headersOnMethodAddsContentTypeHeader", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "BodyWithoutParameters", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "String", ".", "valueOf", "(", "md", ".", "template", "(", ")", ".", "body", "(", ")", ".", "length", ")", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headersOnTypeAddsContentTypeHeader", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "HeadersOnType", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "String", ".", "valueOf", "(", "md", ".", "template", "(", ")", ".", "body", "(", ")", ".", "length", ")", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headersContainsWhitespaces", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "HeadersContainsWhitespaces", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "String", ".", "valueOf", "(", "md", ".", "template", "(", ")", ".", "body", "(", ")", ".", "length", ")", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "withPathAndURIParam", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "WithURIParam", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "URI", ".", "class", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ",", "entry", "(", "<NUM_LIT:2>", ",", "asList", "(", "\"", "<STR_LIT:2>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "urlIndex", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathAndQueryParams", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "WithPathAndQueryParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "int", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "1", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "<NUM_LIT:2>", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "bodyWithTemplate", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "FormParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasBodyTemplate", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "formParamsParseIntoIndexToName", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "FormParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "formParams", "(", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "1", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "<NUM_LIT:2>", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "formParamAndBodyParams", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "FormParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "Fail", ".", "failBecauseExceptionWasNotThrown", "(", "IllegalStateException", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "bodyParamsAndformParam", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "FormParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "Fail", ".", "failBecauseExceptionWasNotThrown", "(", "IllegalStateException", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "formParamParseIntoFormParams", "(", ")", "throws", "Exception", "{", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "FormParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "formParams", "(", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "1", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "<NUM_LIT:2>", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "formParamsDoesNotSetBodyType", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "FormParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "bodyType", "(", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerParamsParseIntoIndexToName", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "HeaderParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "formParams", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerParamsParseIntoIndexToNameNotAtStart", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "HeaderParamsNotAtStart", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "formParams", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customExpander", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "CustomExpander", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "Date", ".", "class", ")", ";", "assertThat", "(", "md", ".", "indexToExpanderClass", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "DateToMillis", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMap", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "QueryMapTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "Map", ".", "class", ")", ";", "assertThat", "(", "md", ".", "queryMapIndex", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapEncodedDefault", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "QueryMapTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "Map", ".", "class", ")", ";", "assertThat", "(", "md", ".", "queryMapEncoded", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapEncodedTrue", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "QueryMapTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "Map", ".", "class", ")", ";", "assertThat", "(", "md", ".", "queryMapEncoded", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapEncodedFalse", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "QueryMapTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "Map", ".", "class", ")", ";", "assertThat", "(", "md", ".", "queryMapEncoded", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapMapSubclass", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "QueryMapTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "SortedMap", ".", "class", ")", ";", "assertThat", "(", "md", ".", "queryMapIndex", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "onlyOneQueryMapAnnotationPermitted", "(", ")", "throws", "Exception", "{", "try", "{", "parseAndValidateMetadata", "(", "QueryMapTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "Map", ".", "class", ",", "Map", ".", "class", ")", ";", "Fail", ".", "failBecauseExceptionWasNotThrown", "(", "IllegalStateException", ".", "class", ")", ";", "}", "catch", "(", "final", "IllegalStateException", "ex", ")", "{", "assertThat", "(", "ex", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapKeysMustBeStrings", "(", ")", "throws", "Exception", "{", "try", "{", "parseAndValidateMetadata", "(", "QueryMapTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "Map", ".", "class", ")", ";", "Fail", ".", "failBecauseExceptionWasNotThrown", "(", "IllegalStateException", ".", "class", ")", ";", "}", "catch", "(", "final", "IllegalStateException", "ex", ")", "{", "assertThat", "(", "ex", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoObject", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "QueryMapTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "Object", ".", "class", ")", ";", "assertThat", "(", "md", ".", "queryMapIndex", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoObjectEncoded", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "QueryMapTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "Object", ".", "class", ")", ";", "assertThat", "(", "md", ".", "queryMapIndex", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "md", ".", "queryMapEncoded", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoObjectNotEncoded", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "QueryMapTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "Object", ".", "class", ")", ";", "assertThat", "(", "md", ".", "queryMapIndex", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "md", ".", "queryMapEncoded", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "slashAreEncodedWhenNeeded", "(", ")", "throws", "Exception", "{", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "SlashNeedToBeEncoded", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ".", "decodeSlash", "(", ")", ")", ".", "isFalse", "(", ")", ";", "md", "=", "parseAndValidateMetadata", "(", "SlashNeedToBeEncoded", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ".", "decodeSlash", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "onlyOneHeaderMapAnnotationPermitted", "(", ")", "throws", "Exception", "{", "try", "{", "parseAndValidateMetadata", "(", "HeaderMapInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "Map", ".", "class", ",", "Map", ".", "class", ")", ";", "Fail", ".", "failBecauseExceptionWasNotThrown", "(", "IllegalStateException", ".", "class", ")", ";", "}", "catch", "(", "final", "IllegalStateException", "ex", ")", "{", "assertThat", "(", "ex", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerMapSubclass", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "HeaderMapInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "SubClassHeaders", ".", "class", ")", ";", "assertThat", "(", "md", ".", "headerMapIndex", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "post", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "put", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "get", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "delete", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT:POST>", "\"", ")", "Response", "post", "(", "List", "<", "String", ">", "body", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "post", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "List", "<", "String", ">", "body", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT:POST>", "\"", ")", "Response", "tooMany", "(", "List", "<", "String", ">", "body", ",", "List", "<", "String", ">", "body2", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "patch", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "none", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "one", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "two", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "three", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "twoAndOneEmpty", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "oneEmpty", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "twoEmpty", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Body", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "post", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Body", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "post", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Body", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "post", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "uriParam", "(", "@", "Param", "(", "\"", "<STR_LIT:1>", "\"", ")", "String", "one", ",", "URI", "endpoint", ",", "@", "Param", "(", "\"", "<STR_LIT:2>", "\"", ")", "String", "two", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "recordsByNameAndType", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "nameFilter", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "typeFilter", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Body", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", "void", "login", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "user", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "password", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "loginNoBodyTemplate", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "user", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "password", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "formParamAndBodyParams", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ",", "String", "body", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "bodyParamsAndformParam", "(", "String", "body", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "multipleHeaderMap", "(", "@", "HeaderMap", "Map", "<", "String", ",", "String", ">", "headers", ",", "@", "HeaderMap", "Map", "<", "String", ",", "String", ">", "queries", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "headerMapSubClass", "(", "@", "HeaderMap", "SubClassHeaders", "httpHeaders", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "void", "logout", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "token", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "void", "logout", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "token", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "date", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "expander", "=", "DateToMillis", ".", "class", ")", "Date", "date", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "String", "expand", "(", "Object", "value", ")", "{", "return", "String", ".", "valueOf", "(", "(", "(", "Date", ")", "value", ")", ".", "getTime", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMap", "(", "@", "QueryMap", "Map", "<", "String", ",", "String", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMapMapSubclass", "(", "@", "QueryMap", "SortedMap", "<", "String", ",", "String", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMapEncoded", "(", "@", "QueryMap", "(", "encoded", "=", "true", ")", "Map", "<", "String", ",", "String", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMapNotEncoded", "(", "@", "QueryMap", "(", "encoded", "=", "false", ")", "Map", "<", "String", ",", "String", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "pojoObject", "(", "@", "QueryMap", "Object", "object", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "pojoObjectEncoded", "(", "@", "QueryMap", "(", "encoded", "=", "true", ")", "Object", "object", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "pojoObjectNotEncoded", "(", "@", "QueryMap", "(", "encoded", "=", "false", ")", "Object", "object", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "multipleQueryMap", "(", "@", "QueryMap", "Map", "<", "String", ",", "String", ">", "mapOne", ",", "@", "QueryMap", "Map", "<", "String", ",", "String", ">", "mapTwo", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "nonStringKeyQueryMap", "(", "@", "QueryMap", "Map", "<", "Integer", ",", "String", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "decodeSlash", "=", "false", ")", "String", "getQueues", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "vhost", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "value", "=", "\"", "<STR_LIT>", "\"", ")", "String", "getZone", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "vhost", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "M", "get", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "key", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "simpleParameterizedBaseApi", "(", ")", "throws", "Exception", "{", "final", "List", "<", "MethodMetadata", ">", "md", "=", "contract", ".", "parseAndValidateMetadata", "(", "SimpleParameterizedApi", ".", "class", ")", ";", "assertThat", "(", "md", ")", ".", "hasSize", "(", "1", ")", ";", "assertThat", "(", "md", ".", "get", "(", "0", ")", ".", "configKey", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "get", "(", "0", ")", ".", "returnType", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "get", "(", "0", ")", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parameterizedApiUnsupported", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "contract", ".", "parseAndValidateMetadata", "(", "SimpleParameterizedBaseApi", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "get", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "key", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "overrideBaseApiUnsupported", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "contract", ".", "parseAndValidateMetadata", "(", "OverrideParameterizedApi", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "onlySingleLevelInheritanceSupported", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "contract", ".", "parseAndValidateMetadata", "(", "GrandChild", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Entity", "<", "K", ",", "M", ">", "get", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "K", "key", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Entities", "<", "K", ",", "M", ">", "getAll", "(", "Keys", "<", "K", ">", "keys", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "parameterizedBaseApi", "(", ")", "throws", "Exception", "{", "final", "List", "<", "MethodMetadata", ">", "md", "=", "contract", ".", "parseAndValidateMetadata", "(", "ParameterizedApi", ".", "class", ")", ";", "final", "Map", "<", "String", ",", "MethodMetadata", ">", "byConfigKey", "=", "new", "LinkedHashMap", "<", "String", ",", "MethodMetadata", ">", "(", ")", ";", "for", "(", "final", "MethodMetadata", "m", ":", "md", ")", "{", "byConfigKey", ".", "put", "(", "m", ".", "configKey", "(", ")", ",", "m", ")", ";", "}", "assertThat", "(", "byConfigKey", ")", ".", "containsOnlyKeys", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "byConfigKey", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "returnType", "(", ")", ")", ".", "isEqualTo", "(", "new", "TypeToken", "<", "Entity", "<", "String", ",", "Long", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "assertThat", "(", "byConfigKey", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "byConfigKey", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "returnType", "(", ")", ")", ".", "isEqualTo", "(", "new", "TypeToken", "<", "Entities", "<", "String", ",", "Long", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "assertThat", "(", "byConfigKey", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "bodyType", "(", ")", ")", ".", "isEqualTo", "(", "new", "TypeToken", "<", "Keys", "<", "String", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "assertThat", "(", "byConfigKey", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "String", "getZone", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "vhost", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "authHdr", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "parameterizedHeaderExpandApi", "(", ")", "throws", "Exception", "{", "final", "List", "<", "MethodMetadata", ">", "md", "=", "contract", ".", "parseAndValidateMetadata", "(", "ParameterizedHeaderExpandApi", ".", "class", ")", ";", "assertThat", "(", "md", ")", ".", "hasSize", "(", "1", ")", ";", "assertThat", "(", "md", ".", "get", "(", "0", ")", ".", "configKey", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "get", "(", "0", ")", ".", "returnType", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "get", "(", "0", ")", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "get", "(", "0", ")", ".", "formParams", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parameterizedHeaderNotStartingWithCurlyBraceExpandApi", "(", ")", "throws", "Exception", "{", "final", "List", "<", "MethodMetadata", ">", "md", "=", "contract", ".", "parseAndValidateMetadata", "(", "ParameterizedHeaderNotStartingWithCurlyBraceExpandApi", ".", "class", ")", ";", "assertThat", "(", "md", ")", ".", "hasSize", "(", "1", ")", ";", "assertThat", "(", "md", ".", "get", "(", "0", ")", ".", "configKey", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "get", "(", "0", ")", ".", "returnType", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "get", "(", "0", ")", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "get", "(", "0", ")", ".", "formParams", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "String", "getZone", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "vhost", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "authHdr", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "String", "getZoneAccept", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "vhost", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "authHdr", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "getZone", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "vhost", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "authHdr", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "parameterizedHeaderExpandApiBaseClass", "(", ")", "throws", "Exception", "{", "final", "List", "<", "MethodMetadata", ">", "mds", "=", "contract", ".", "parseAndValidateMetadata", "(", "ParameterizedHeaderExpandInheritedApi", ".", "class", ")", ";", "final", "Map", "<", "String", ",", "MethodMetadata", ">", "byConfigKey", "=", "new", "LinkedHashMap", "<", "String", ",", "MethodMetadata", ">", "(", ")", ";", "for", "(", "final", "MethodMetadata", "m", ":", "mds", ")", "{", "byConfigKey", ".", "put", "(", "m", ".", "configKey", "(", ")", ",", "m", ")", ";", "}", "assertThat", "(", "byConfigKey", ")", ".", "containsOnlyKeys", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "MethodMetadata", "md", "=", "byConfigKey", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "returnType", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "formParams", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "md", "=", "byConfigKey", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "returnType", "(", ")", ")", ".", "isEqualTo", "(", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "formParams", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "private", "MethodMetadata", "parseAndValidateMetadata", "(", "Class", "<", "?", ">", "targetType", ",", "String", "method", ",", "Class", "<", "?", ">", ".", ".", ".", "parameterTypes", ")", "throws", "NoSuchMethodException", "{", "return", "contract", ".", "parseAndValidateMetadata", "(", "targetType", ",", "targetType", ".", "getMethod", "(", "method", ",", "parameterTypes", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "updateSharing", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "long", "queryParam", ",", "String", "bodyParam", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "missingMethod", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "contract", ".", "parseAndValidateMetadata", "(", "MissingMethod", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "get", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "key", ")", ";", "</s>"]
["<s>", "static", "String", "staticMethod", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "staticMethodsOnInterfaceIgnored", "(", ")", "throws", "Exception", "{", "final", "List", "<", "MethodMetadata", ">", "mds", "=", "contract", ".", "parseAndValidateMetadata", "(", "StaticMethodOnInterface", ".", "class", ")", ";", "assertThat", "(", "mds", ")", ".", "hasSize", "(", "1", ")", ";", "final", "MethodMetadata", "md", "=", "mds", ".", "get", "(", "0", ")", ";", "assertThat", "(", "md", ".", "configKey", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "get", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "key", ")", ";", "</s>"]
["<s>", "default", "String", "defaultGet", "(", "String", "key", ")", "{", "return", "get", "(", "key", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultMethodsOnInterfaceIgnored", "(", ")", "throws", "Exception", "{", "final", "List", "<", "MethodMetadata", ">", "mds", "=", "contract", ".", "parseAndValidateMetadata", "(", "DefaultMethodOnInterface", ".", "class", ")", ";", "assertThat", "(", "mds", ")", ".", "hasSize", "(", "1", ")", ";", "final", "MethodMetadata", "md", "=", "mds", ".", "get", "(", "0", ")", ";", "assertThat", "(", "md", ".", "configKey", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "paramIsASubstringOfAQuery", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "body", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "paramIsASubstringOfAQuery", "(", ")", "throws", "Exception", "{", "final", "List", "<", "MethodMetadata", ">", "mds", "=", "contract", ".", "parseAndValidateMetadata", "(", "SubstringQuery", ".", "class", ")", ";", "assertThat", "(", "mds", ".", "get", "(", "0", ")", ".", "template", "(", ")", ".", "queries", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "mds", ".", "get", "(", "0", ")", ".", "formParams", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "errorMessageOnMixedContracts", "(", ")", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "contract", ".", "parseAndValidateMetadata", "(", "MixedAnnotations", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "findAllClientsByUid2", "(", "@", "Category", "(", "value", "=", "String", ".", "class", ")", "String", "uid", ",", "Integer", "limit", ",", "@", "SuppressWarnings", "(", "{", "\"", "<STR_LIT>", "\"", "}", ")", "Integer", "offset", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "iterableQueryParams", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "queryParams", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postTemplateParamsResolve", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "login", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "responseCoercesToStringBody", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "response", "(", ")", ";", "assertTrue", "(", "response", ".", "body", "(", ")", ".", "isRepeatable", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "response", ".", "body", "(", ")", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postFormParams", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "form", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postBodyParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "body", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "bodyTypeCorrespondsWithParameterType", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "AtomicReference", "<", "Type", ">", "encodedType", "=", "new", "AtomicReference", "<", ">", "(", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "encoder", "(", "new", "Encoder", ".", "Default", "(", ")", "{", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "encodedType", ".", "set", "(", "bodyType", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "body", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "server", ".", "takeRequest", "(", ")", ";", "assertThat", "(", "encodedType", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "new", "TypeToken", "<", "List", "<", "String", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "encodedType", ".", "set", "(", "bodyType", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postGZIPEncodedBodyParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "gzipBody", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasNoHeaderNamed", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasGzippedBody", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postDeflateEncodedBodyParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "deflateBody", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasNoHeaderNamed", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasDeflatedBody", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "singleInterceptor", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "requestInterceptor", "(", "new", "ForwardedForInterceptor", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "multipleInterceptor", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "requestInterceptor", "(", "new", "ForwardedForInterceptor", "(", ")", ")", ".", "requestInterceptor", "(", "new", "UserAgentInterceptor", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customExpander", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "expand", "(", "new", "Date", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customExpanderListParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "expandList", "(", "Arrays", ".", "asList", "(", "new", "Date", "(", "<NUM_LIT>", ")", ",", "new", "Date", "(", "<NUM_LIT>", ")", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customExpanderNullParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "expandList", "(", "Arrays", ".", "asList", "(", "new", "Date", "(", "<NUM_LIT>", ")", ",", "null", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerMap", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "headerMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "headerMap", "(", "headerMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerMapWithHeaderAnnotations", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "headerMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "headerMapWithHeaderAnnotations", "(", "headerMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "headerMapWithHeaderAnnotations", "(", "headerMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMap", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapIterableValuesExpanded", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "new", "ArrayList", "<", "String", ">", "(", ")", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapWithQueryParams", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapWithQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapWithQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "api", ".", "queryMapWithQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapValueStartingWithBrace", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapEncoded", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapEncoded", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoWithFullParams", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CustomPojo", "customPojo", "=", "new", "CustomPojo", "(", "\"", "<STR_LIT:Name>", "\"", ",", "<NUM_LIT:3>", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPojo", "(", "customPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoWithPartialParams", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CustomPojo", "customPojo", "=", "new", "CustomPojo", "(", "\"", "<STR_LIT:Name>", "\"", ",", "null", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPojo", "(", "customPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoWithEmptyParams", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CustomPojo", "customPojo", "=", "new", "CustomPojo", "(", "null", ",", "null", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPojo", "(", "customPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configKeyFormatsAsExpected", "(", ")", "throws", "Exception", "{", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Feign", ".", "configKey", "(", "TestInterface", ".", "class", ",", "TestInterface", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Feign", ".", "configKey", "(", "TestInterface", ".", "class", ",", "TestInterface", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "URI", ".", "class", ",", "String", ".", "class", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configKeyUsesChildType", "(", ")", "throws", "Exception", "{", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Feign", ".", "configKey", "(", "List", ".", "class", ",", "Iterable", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canOverrideErrorDecoder", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "errorDecoder", "(", "new", "IllegalArgumentExceptionOn400", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "retriesLostConnectionBeforeRead", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setSocketPolicy", "(", "SocketPolicy", ".", "DISCONNECT_AT_START", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "server", ".", "getRequestCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "overrideTypeSpecificDecoder", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "decoder", "(", "new", "Decoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertEquals", "(", "api", ".", "post", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "retryableExceptionInDecoder", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "decoder", "(", "new", "StringDecoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "String", "string", "=", "super", ".", "decode", "(", "response", ",", "type", ")", ".", "toString", "(", ")", ";", "if", "(", "\"", "<STR_LIT:!>", "\"", ".", "equals", "(", "string", ")", ")", "{", "throw", "new", "RetryableException", "(", "response", ".", "status", "(", ")", ",", "string", ",", "HttpMethod", ".", "POST", ",", "null", ",", "response", ".", "request", "(", ")", ")", ";", "}", "return", "string", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertEquals", "(", "api", ".", "post", "(", ")", ",", "\"", "<STR_LIT:!>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "server", ".", "getRequestCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "String", "string", "=", "super", ".", "decode", "(", "response", ",", "type", ")", ".", "toString", "(", ")", ";", "if", "(", "\"", "<STR_LIT:!>", "\"", ".", "equals", "(", "string", ")", ")", "{", "throw", "new", "RetryableException", "(", "response", ".", "status", "(", ")", ",", "string", ",", "HttpMethod", ".", "POST", ",", "null", ",", "response", ".", "request", "(", ")", ")", ";", "}", "return", "string", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesntRetryAfterResponseIsSent", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "FeignException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "decoder", "(", "new", "Decoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsFeignExceptionIncludingBody", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "try", "{", "api", ".", "body", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT:/>", "\"", ")", ";", "assertThat", "(", "e", ".", "contentUTF8", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsFeignExceptionWithoutBody", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "try", "{", "api", ".", "noContent", "(", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT:/>", "\"", ")", ";", "assertThat", "(", "e", ".", "contentUTF8", "(", ")", ")", ".", "isEqualTo", "(", "\"", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "ensureRetryerClonesItself", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "MockRetryer", "retryer", "=", "new", "MockRetryer", "(", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "retryer", "(", "retryer", ")", ".", "errorDecoder", "(", "new", "ErrorDecoder", "(", ")", "{", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "return", "new", "RetryableException", "(", "response", ".", "status", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "HttpMethod", ".", "POST", ",", "null", ",", "response", ".", "request", "(", ")", ")", ";", "}", "}", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "api", ".", "post", "(", ")", ";", "assertEquals", "(", "<NUM_LIT:4>", ",", "server", ".", "getRequestCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "return", "new", "RetryableException", "(", "response", ".", "status", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "HttpMethod", ".", "POST", ",", "null", ",", "response", ".", "request", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsOriginalExceptionAfterFailedRetries", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "String", "message", "=", "\"", "<STR_LIT>", "\"", ";", "thrown", ".", "expect", "(", "TestInterfaceException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "message", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "exceptionPropagationPolicy", "(", "UNWRAP", ")", ".", "retryer", "(", "new", "Retryer", ".", "Default", "(", "1", ",", "1", ",", "<NUM_LIT:2>", ")", ")", ".", "errorDecoder", "(", "new", "ErrorDecoder", "(", ")", "{", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "return", "new", "RetryableException", "(", "response", ".", "status", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "HttpMethod", ".", "POST", ",", "new", "TestInterfaceException", "(", "message", ")", ",", "null", ",", "response", ".", "request", "(", ")", ")", ";", "}", "}", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "return", "new", "RetryableException", "(", "response", ".", "status", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "HttpMethod", ".", "POST", ",", "new", "TestInterfaceException", "(", "message", ")", ",", "null", ",", "response", ".", "request", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsRetryableExceptionIfNoUnderlyingCause", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "message", "=", "\"", "<STR_LIT>", "\"", ";", "thrown", ".", "expect", "(", "RetryableException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "message", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "exceptionPropagationPolicy", "(", "UNWRAP", ")", ".", "retryer", "(", "new", "Retryer", ".", "Default", "(", "1", ",", "1", ",", "<NUM_LIT:2>", ")", ")", ".", "errorDecoder", "(", "new", "ErrorDecoder", "(", ")", "{", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "return", "new", "RetryableException", "(", "response", ".", "status", "(", ")", ",", "message", ",", "HttpMethod", ".", "POST", ",", "null", ",", "response", ".", "request", "(", ")", ")", ";", "}", "}", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "return", "new", "RetryableException", "(", "response", ".", "status", "(", ")", ",", "message", ",", "HttpMethod", ".", "POST", ",", "null", ",", "response", ".", "request", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "whenReturnTypeIsResponseNoErrorHandling", "(", ")", "{", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "headers", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "headers", "(", "headers", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT:/>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "new", "byte", "[", "0", "]", ")", ".", "build", "(", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "(", "request", ",", "options", ")", "-", ">", "response", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertEquals", "(", "api", ".", "response", "(", ")", ".", "headers", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "continueOrPropagate", "(", "RetryableException", "e", ")", "{", "if", "(", "tripped", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "tripped", "=", "true", ";", "return", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Retryer", "clone", "(", ")", "{", "return", "new", "MockRetryer", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "okIfDecodeRootCauseHasNoMessage", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "DecodeException", ".", "class", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "decoder", "(", "new", "Decoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodingExceptionGetWrappedInDecode404Mode", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "thrown", ".", "expect", "(", "DecodeException", ".", "class", ")", ";", "thrown", ".", "expectCause", "(", "isA", "(", "NoSuchElementException", ".", "class", ")", ")", ";", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "decode404", "(", ")", ".", "decoder", "(", "new", "Decoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "assertEquals", "(", "<NUM_LIT>", ",", "response", ".", "status", "(", ")", ")", ";", "throw", "new", "NoSuchElementException", "(", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "assertEquals", "(", "<NUM_LIT>", ",", "response", ".", "status", "(", ")", ")", ";", "throw", "new", "NoSuchElementException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodingDoesNotSwallow404ErrorsInDecode404Mode", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "decode404", "(", ")", ".", "errorDecoder", "(", "new", "IllegalArgumentExceptionOn404", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "queryMap", "(", "Collections", ".", "<", "String", ",", "Object", ">", "emptyMap", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "okIfEncodeRootCauseHasNoMessage", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "EncodeException", ".", "class", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "encoder", "(", "new", "Encoder", "(", ")", "{", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "body", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "equalsHashCodeAndToStringWork", "(", ")", "{", "Target", "<", "TestInterface", ">", "t1", "=", "new", "HardCodedTarget", "<", "TestInterface", ">", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Target", "<", "TestInterface", ">", "t2", "=", "new", "HardCodedTarget", "<", "TestInterface", ">", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Target", "<", "OtherTestInterface", ">", "t3", "=", "new", "HardCodedTarget", "<", "OtherTestInterface", ">", "(", "OtherTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "TestInterface", "i1", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "t1", ")", ";", "TestInterface", "i2", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "t1", ")", ";", "TestInterface", "i3", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "t2", ")", ";", "OtherTestInterface", "i4", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "t3", ")", ";", "assertThat", "(", "i1", ")", ".", "isEqualTo", "(", "i2", ")", ".", "isNotEqualTo", "(", "i3", ")", ".", "isNotEqualTo", "(", "i4", ")", ";", "assertThat", "(", "i1", ".", "hashCode", "(", ")", ")", ".", "isEqualTo", "(", "i2", ".", "hashCode", "(", ")", ")", ".", "isNotEqualTo", "(", "i3", ".", "hashCode", "(", ")", ")", ".", "isNotEqualTo", "(", "i4", ".", "hashCode", "(", ")", ")", ";", "assertThat", "(", "i1", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "i2", ".", "toString", "(", ")", ")", ".", "isNotEqualTo", "(", "i3", ".", "toString", "(", ")", ")", ".", "isNotEqualTo", "(", "i4", ".", "toString", "(", ")", ")", ";", "assertThat", "(", "t1", ")", ".", "isNotEqualTo", "(", "i1", ")", ";", "assertThat", "(", "t1", ".", "hashCode", "(", ")", ")", ".", "isEqualTo", "(", "i1", ".", "hashCode", "(", ")", ")", ";", "assertThat", "(", "t1", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "i1", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodeLogicSupportsByteArray", "(", ")", "throws", "Exception", "{", "byte", "[", "]", "expectedResponse", "=", "{", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", "}", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "new", "Buffer", "(", ")", ".", "write", "(", "expectedResponse", ")", ")", ")", ";", "OtherTestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "OtherTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertThat", "(", "api", ".", "binaryResponseBody", "(", ")", ")", ".", "containsExactly", "(", "expectedResponse", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodeLogicSupportsByteArray", "(", ")", "throws", "Exception", "{", "byte", "[", "]", "expectedRequest", "=", "{", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", "}", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "OtherTestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "OtherTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "binaryRequestBody", "(", "expectedRequest", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "expectedRequest", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodedQueryParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "encodedQueryParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "responseMapperIsAppliedBeforeDelegate", "(", ")", "throws", "IOException", "{", "ResponseMappingDecoder", "decoder", "=", "new", "ResponseMappingDecoder", "(", "upperCaseResponseMapper", "(", ")", ",", "new", "StringDecoder", "(", ")", ")", ";", "String", "output", "=", "(", "String", ")", "decoder", ".", "decode", "(", "responseWithText", "(", "\"", "<STR_LIT>", "\"", ")", ",", "String", ".", "class", ")", ";", "assertThat", "(", "output", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "ResponseMapper", "upperCaseResponseMapper", "(", ")", "{", "return", "new", "ResponseMapper", "(", ")", "{", "@", "Override", "public", "Response", "map", "(", "Response", "response", ",", "Type", "type", ")", "{", "try", "{", "return", "response", ".", "toBuilder", "(", ")", ".", "body", "(", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "UTF_8", ")", ")", ".", "toUpperCase", "(", ")", ".", "getBytes", "(", ")", ")", ".", "build", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "map", "(", "Response", "response", ",", "Type", "type", ")", "{", "try", "{", "return", "response", ".", "toBuilder", "(", ")", ".", "body", "(", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "UTF_8", ")", ")", ".", "toUpperCase", "(", ")", ".", "getBytes", "(", ")", ")", ".", "build", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "Response", "responseWithText", "(", "String", "text", ")", "{", "return", "Response", ".", "builder", "(", ")", ".", "body", "(", "text", ",", "Util", ".", "UTF_8", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "new", "HashMap", "<", ">", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapAndDecodeExecutesMapFunction", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterface", "api", "=", "new", "Feign", ".", "Builder", "(", ")", ".", "mapAndDecode", "(", "upperCaseResponseMapper", "(", ")", ",", "new", "StringDecoder", "(", ")", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertEquals", "(", "api", ".", "post", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithPrivateGetterIgnored", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "propertyPojo", ".", "setPrivateGetterProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "propertyPojo", ".", "setName", "(", "\"", "<STR_LIT:Name>", "\"", ")", ";", "propertyPojo", ".", "setNumber", "(", "1", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMap_with_child_pojo", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "FieldQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "ChildPojo", "childPojo", "=", "new", "ChildPojo", "(", ")", ";", "childPojo", ".", "setChildPrivateProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "childPojo", ".", "setParentProtectedProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "childPojo", ".", "setParentPublicProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPropertyInheritence", "(", "childPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithNullValueIgnored", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "propertyPojo", ".", "setName", "(", "null", ")", ";", "propertyPojo", ".", "setNumber", "(", "1", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithEmptyParams", "(", ")", "throws", "Exception", "{", "TestInterface", "api", "=", "new", "TestInterfaceBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "response", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "post", "(", ")", "throws", "TestInterfaceException", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Body", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", "void", "login", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "user", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "password", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "body", "(", "List", "<", "String", ">", "contents", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "body", "(", "String", "content", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "noContent", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "void", "gzipBody", "(", "List", "<", "String", ">", "contents", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "void", "deflateBody", "(", "List", "<", "String", ">", "contents", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "form", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "user", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "password", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "uriParam", "(", "@", "Param", "(", "\"", "<STR_LIT:1>", "\"", ")", "String", "one", ",", "URI", "endpoint", ",", "@", "Param", "(", "\"", "<STR_LIT:2>", "\"", ")", "String", "two", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "queryParams", "(", "@", "Param", "(", "\"", "<STR_LIT:1>", "\"", ")", "String", "one", ",", "@", "Param", "(", "\"", "<STR_LIT:2>", "\"", ")", "Iterable", "<", "String", ">", "twos", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "expand", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "expander", "=", "DateToMillis", ".", "class", ")", "Date", "date", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "expandList", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "expander", "=", "DateToMillis", ".", "class", ")", "List", "<", "Date", ">", "dates", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "expandArray", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "expander", "=", "DateToMillis", ".", "class", ")", "Date", "[", "]", "dates", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "headerMap", "(", "@", "HeaderMap", "Map", "<", "String", ",", "Object", ">", "headerMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "void", "headerMapWithHeaderAnnotations", "(", "@", "HeaderMap", "Map", "<", "String", ",", "Object", ">", "headerMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMap", "(", "@", "QueryMap", "Map", "<", "String", ",", "Object", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMapEncoded", "(", "@", "QueryMap", "(", "encoded", "=", "true", ")", "Map", "<", "String", ",", "Object", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMapWithQueryParams", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ",", "@", "QueryMap", "Map", "<", "String", ",", "Object", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "encodedQueryParam", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ")", "String", "trim", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMapPojo", "(", "@", "QueryMap", "CustomPojo", "object", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMapPropertyPojo", "(", "@", "QueryMap", "PropertyPojo", "object", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "queryMapPropertyInheritence", "(", "@", "QueryMap", "ChildPojo", "object", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "String", "expand", "(", "Object", "value", ")", "{", "return", "String", ".", "valueOf", "(", "(", "(", "Date", ")", "value", ")", ".", "getTime", "(", ")", ")", ";", "}", "</s>"]
["<s>", "TestInterfaceException", "(", "String", "message", ")", "{", "super", "(", "message", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "post", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "byte", "[", "]", "binaryResponseBody", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "binaryRequestBody", "(", "byte", "[", "]", "contents", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "RequestTemplate", "template", ")", "{", "template", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "RequestTemplate", "template", ")", "{", "template", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "if", "(", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", ")", "{", "return", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "super", ".", "decode", "(", "methodKey", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "if", "(", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", ")", "{", "return", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "super", ".", "decode", "(", "methodKey", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "if", "(", "object", "instanceof", "Map", ")", "{", "template", ".", "body", "(", "new", "Gson", "(", ")", ".", "toJson", "(", "object", ")", ")", ";", "}", "else", "{", "template", ".", "body", "(", "object", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "TestInterfaceBuilder", "requestInterceptor", "(", "RequestInterceptor", "requestInterceptor", ")", "{", "delegate", ".", "requestInterceptor", "(", "requestInterceptor", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceBuilder", "encoder", "(", "Encoder", "encoder", ")", "{", "delegate", ".", "encoder", "(", "encoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceBuilder", "decoder", "(", "Decoder", "decoder", ")", "{", "delegate", ".", "decoder", "(", "decoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceBuilder", "errorDecoder", "(", "ErrorDecoder", "errorDecoder", ")", "{", "delegate", ".", "errorDecoder", "(", "errorDecoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceBuilder", "decode404", "(", ")", "{", "delegate", ".", "decode404", "(", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceBuilder", "queryMapEndcoder", "(", "QueryMapEncoder", "queryMapEncoder", ")", "{", "delegate", ".", "queryMapEncoder", "(", "queryMapEncoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterface", "target", "(", "String", "url", ")", "{", "return", "delegate", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaults", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "Response", "response", "=", "api", ".", "codecPost", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDecode404", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "decode404", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "assertThat", "(", "api", ".", "getQueues", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "api", ".", "decodedLazyPost", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "api", ".", "optionalContent", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "api", ".", "streamPost", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "api", ".", "decodedPost", "(", ")", ")", ".", "isNull", "(", ")", ";", "try", "{", "api", ".", "decodedPost", "(", ")", ";", "failBecauseExceptionWasNotThrown", "(", "FeignException", ".", "class", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDecode204", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "assertThat", "(", "api", ".", "getQueues", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "api", ".", "decodedLazyPost", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "api", ".", "optionalContent", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "api", ".", "streamPost", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "api", ".", "decodedPost", "(", ")", ")", ".", "isNull", "(", ")", ";", "try", "{", "api", ".", "decodedPost", "(", ")", ";", "failBecauseExceptionWasNotThrown", "(", "FeignException", ".", "class", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNoFollowRedirect", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "addHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:/>", "\"", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "TestInterface", "noFollowApi", "=", "Feign", ".", "builder", "(", ")", ".", "options", "(", "new", "Request", ".", "Options", "(", "<NUM_LIT:100>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "<NUM_LIT>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "false", ")", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "Response", "response", "=", "noFollowApi", ".", "defaultMethodPassthrough", "(", ")", ";", "assertThat", "(", "response", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "headers", "(", ")", ".", "getOrDefault", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ")", ".", "isNotNull", "(", ")", ".", "isEqualTo", "(", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "addHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:/>", "\"", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "TestInterface", "defaultApi", "=", "Feign", ".", "builder", "(", ")", ".", "options", "(", "new", "Request", ".", "Options", "(", "<NUM_LIT:100>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "<NUM_LIT>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "true", ")", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "assertThat", "(", "defaultApi", ".", "defaultMethodPassthrough", "(", ")", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testUrlPathConcatUrlTrailingSlash", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT:/>", "\"", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "api", ".", "codecPost", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testUrlPathConcatNoPathOnRequestLine", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT:/>", "\"", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "api", ".", "getNoPath", "(", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHttpNotFoundError", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT:/>", "\"", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "try", "{", "api", ".", "getBodyAsString", "(", ")", ";", "failBecauseExceptionWasNotThrown", "(", "FeignException", ".", "class", ")", ";", "}", "catch", "(", "FeignException", ".", "NotFound", "e", ")", "{", "assertThat", "(", "e", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testUrlPathConcatNoInitialSlashOnPath", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT:/>", "\"", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "api", ".", "getNoInitialSlashOnSlash", "(", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testUrlPathConcatNoInitialSlashOnPathNoTrailingSlashOnUrl", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "api", ".", "getNoInitialSlashOnSlash", "(", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testOverrideEncoder", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "Encoder", "encoder", "=", "(", "object", ",", "bodyType", ",", "template", ")", "-", ">", "template", ".", "body", "(", "object", ".", "toString", "(", ")", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "encoder", "(", "encoder", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "api", ".", "encodedPost", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testOverrideDecoder", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "Decoder", "decoder", "=", "(", "response", ",", "type", ")", "-", ">", "\"", "<STR_LIT>", "\"", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "decoder", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "api", ".", "decodedPost", "(", ")", ")", ";", "assertEquals", "(", "1", ",", "server", ".", "getRequestCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testOverrideQueryMapEncoder", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "QueryMapEncoder", "customMapEncoder", "=", "ignored", "-", ">", "{", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "HashMap", "<", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT:1>", "\"", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT:2>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ")", ";", "return", "queryMap", ";", "}", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "queryMapEncoder", "(", "customMapEncoder", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "api", ".", "queryMapEncoded", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "1", ",", "server", ".", "getRequestCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProvideRequestInterceptors", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "RequestInterceptor", "requestInterceptor", "=", "template", "-", ">", "template", ".", "header", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "requestInterceptor", "(", "requestInterceptor", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "Response", "response", "=", "api", ".", "codecPost", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "MapEntry", ".", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testProvideInvocationHandlerFactory", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "final", "AtomicInteger", "callCount", "=", "new", "AtomicInteger", "(", ")", ";", "InvocationHandlerFactory", "factory", "=", "new", "InvocationHandlerFactory", "(", ")", "{", "private", "final", "InvocationHandlerFactory", "delegate", "=", "new", "Default", "(", ")", ";", "@", "Override", "public", "InvocationHandler", "create", "(", "Target", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ")", "{", "callCount", ".", "incrementAndGet", "(", ")", ";", "return", "delegate", ".", "create", "(", "target", ",", "dispatch", ")", ";", "}", "}", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "invocationHandlerFactory", "(", "factory", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "Response", "response", "=", "api", ".", "codecPost", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ")", ")", ";", "assertEquals", "(", "1", ",", "callCount", ".", "get", "(", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InvocationHandler", "create", "(", "Target", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ")", "{", "callCount", ".", "incrementAndGet", "(", ")", ";", "return", "delegate", ".", "create", "(", "target", ",", "dispatch", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testSlashIsEncodedInPathParams", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "api", ".", "getQueues", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testBasicDefaultMethod", "(", ")", "{", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "String", "result", "=", "api", ".", "independentDefaultMethod", "(", ")", ";", "assertThat", "(", "result", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultCallingProxiedMethod", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "Response", "response", "=", "api", ".", "defaultMethodPassthrough", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDoNotCloseAfterDecode", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "Decoder", "decoder", "=", "(", "response", ",", "type", ")", "-", ">", "new", "Iterator", "<", "Object", ">", "(", ")", "{", "private", "boolean", "called", "=", "false", ";", "@", "Override", "public", "boolean", "hasNext", "(", ")", "{", "return", "!", "called", ";", "}", "@", "Override", "public", "Object", "next", "(", ")", "{", "try", "{", "return", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "fail", "(", "e", ".", "getMessage", "(", ")", ")", ";", "return", "null", ";", "}", "finally", "{", "Util", ".", "ensureClosed", "(", "response", ")", ";", "called", "=", "true", ";", "}", "}", "}", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "decoder", ")", ".", "doNotCloseAfterDecode", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "Iterator", "<", "String", ">", "iterator", "=", "api", ".", "decodedLazyPost", "(", ")", ";", "assertTrue", "(", "iterator", ".", "hasNext", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:!>", "\"", ",", "iterator", ".", "next", "(", ")", ")", ";", "assertFalse", "(", "iterator", ".", "hasNext", "(", ")", ")", ";", "assertEquals", "(", "1", ",", "server", ".", "getRequestCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "hasNext", "(", ")", "{", "return", "!", "called", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "next", "(", ")", "{", "try", "{", "return", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "fail", "(", "e", ".", "getMessage", "(", ")", ")", ";", "return", "null", ";", "}", "finally", "{", "Util", ".", "ensureClosed", "(", "response", ")", ";", "called", "=", "true", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDoNotCloseAfterDecodeDecoderFailure", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "Decoder", "angryDecoder", "=", "(", "response", ",", "type", ")", "-", ">", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", ";", "final", "AtomicBoolean", "closed", "=", "new", "AtomicBoolean", "(", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "new", "Client", "(", ")", "{", "Client", "client", "=", "new", "Client", ".", "Default", "(", "null", ",", "null", ")", ";", "@", "Override", "public", "Response", "execute", "(", "Request", "request", ",", "Request", ".", "Options", "options", ")", "throws", "IOException", "{", "final", "Response", "original", "=", "client", ".", "execute", "(", "request", ",", "options", ")", ";", "return", "Response", ".", "builder", "(", ")", ".", "status", "(", "original", ".", "status", "(", ")", ")", ".", "headers", "(", "original", ".", "headers", "(", ")", ")", ".", "reason", "(", "original", ".", "reason", "(", ")", ")", ".", "request", "(", "original", ".", "request", "(", ")", ")", ".", "body", "(", "new", "Response", ".", "Body", "(", ")", "{", "@", "Override", "public", "Integer", "length", "(", ")", "{", "return", "original", ".", "body", "(", ")", ".", "length", "(", ")", ";", "}", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "original", ".", "body", "(", ")", ".", "isRepeatable", "(", ")", ";", "}", "@", "Override", "public", "InputStream", "asInputStream", "(", ")", "throws", "IOException", "{", "return", "original", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ";", "}", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Reader", "asReader", "(", ")", "throws", "IOException", "{", "return", "original", ".", "body", "(", ")", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ";", "}", "@", "Override", "public", "Reader", "asReader", "(", "Charset", "charset", ")", "throws", "IOException", "{", "return", "original", ".", "body", "(", ")", ".", "asReader", "(", "charset", ")", ";", "}", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "closed", ".", "set", "(", "true", ")", ";", "original", ".", "body", "(", ")", ".", "close", "(", ")", ";", "}", "}", ")", ".", "build", "(", ")", ";", "}", "}", ")", ".", "decoder", "(", "angryDecoder", ")", ".", "doNotCloseAfterDecode", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "try", "{", "api", ".", "decodedLazyPost", "(", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "FeignException", "expected", ")", "{", "}", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "closed", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "execute", "(", "Request", "request", ",", "Request", ".", "Options", "options", ")", "throws", "IOException", "{", "final", "Response", "original", "=", "client", ".", "execute", "(", "request", ",", "options", ")", ";", "return", "Response", ".", "builder", "(", ")", ".", "status", "(", "original", ".", "status", "(", ")", ")", ".", "headers", "(", "original", ".", "headers", "(", ")", ")", ".", "reason", "(", "original", ".", "reason", "(", ")", ")", ".", "request", "(", "original", ".", "request", "(", ")", ")", ".", "body", "(", "new", "Response", ".", "Body", "(", ")", "{", "@", "Override", "public", "Integer", "length", "(", ")", "{", "return", "original", ".", "body", "(", ")", ".", "length", "(", ")", ";", "}", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "original", ".", "body", "(", ")", ".", "isRepeatable", "(", ")", ";", "}", "@", "Override", "public", "InputStream", "asInputStream", "(", ")", "throws", "IOException", "{", "return", "original", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ";", "}", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Reader", "asReader", "(", ")", "throws", "IOException", "{", "return", "original", ".", "body", "(", ")", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ";", "}", "@", "Override", "public", "Reader", "asReader", "(", "Charset", "charset", ")", "throws", "IOException", "{", "return", "original", ".", "body", "(", ")", ".", "asReader", "(", "charset", ")", ";", "}", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "closed", ".", "set", "(", "true", ")", ";", "original", ".", "body", "(", ")", ".", "close", "(", ")", ";", "}", "}", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Integer", "length", "(", ")", "{", "return", "original", ".", "body", "(", ")", ".", "length", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "original", ".", "body", "(", ")", ".", "isRepeatable", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "asInputStream", "(", ")", "throws", "IOException", "{", "return", "original", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Reader", "asReader", "(", ")", "throws", "IOException", "{", "return", "original", ".", "body", "(", ")", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Reader", "asReader", "(", "Charset", "charset", ")", "throws", "IOException", "{", "return", "original", ".", "body", "(", ")", ".", "asReader", "(", "charset", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "closed", ".", "set", "(", "true", ")", ";", "original", ".", "body", "(", ")", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT:GET>", "\"", ")", "Response", "getNoPath", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "getNoInitialSlashOnSlash", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "getBodyAsString", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "value", "=", "\"", "<STR_LIT>", "\"", ")", "String", "queryMapEncoded", "(", "@", "QueryMap", "Object", "object", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "codecPost", "(", "String", "data", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "encodedPost", "(", "List", "<", "String", ">", "data", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "decodedPost", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Iterator", "<", "String", ">", "decodedLazyPost", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "optionalContent", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Stream", "<", "String", ">", "streamPost", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "decodeSlash", "=", "false", ")", "byte", "[", "]", "getQueues", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "vhost", ")", ";", "</s>"]
["<s>", "default", "String", "independentDefaultMethod", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "default", "Response", "defaultMethodPassthrough", "(", ")", "{", "return", "getNoPath", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "java", ".", "util", ".", "logging", ".", "Logger", "getInnerLogger", "(", "Logger", ".", "JavaLogger", "logger", ")", "throws", "Exception", "{", "Field", "inner", "=", "logger", ".", "getClass", "(", ")", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "inner", ".", "setAccessible", "(", "true", ")", ";", "return", "(", "java", ".", "util", ".", "logging", ".", "Logger", ")", "inner", ".", "get", "(", "logger", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Test", "public", "void", "testAppendSeveralFilesToOneJavaLogger", "(", ")", "throws", "Exception", "{", "Logger", ".", "JavaLogger", "logger", "=", "new", "Logger", ".", "JavaLogger", "(", ")", ".", "appendToFile", "(", "tmp", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getAbsolutePath", "(", ")", ")", ".", "appendToFile", "(", "tmp", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getAbsolutePath", "(", ")", ")", ";", "java", ".", "util", ".", "logging", ".", "Logger", "inner", "=", "getInnerLogger", "(", "logger", ")", ";", "assert", "(", "inner", ".", "getHandlers", "(", ")", ".", "length", "=", "=", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testJavaLoggerInstantationWithLoggerName", "(", ")", "throws", "Exception", "{", "Logger", ".", "JavaLogger", "l1", "=", "new", "Logger", ".", "JavaLogger", "(", "\"", "<STR_LIT>", "\"", ")", ".", "appendToFile", "(", "tmp", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getAbsolutePath", "(", ")", ")", ";", "Logger", ".", "JavaLogger", "l2", "=", "new", "Logger", ".", "JavaLogger", "(", "\"", "<STR_LIT>", "\"", ")", ".", "appendToFile", "(", "tmp", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getAbsolutePath", "(", ")", ")", ";", "java", ".", "util", ".", "logging", ".", "Logger", "logger1", "=", "getInnerLogger", "(", "l1", ")", ";", "assert", "(", "logger1", ".", "getHandlers", "(", ")", ".", "length", "=", "=", "1", ")", ";", "java", ".", "util", ".", "logging", ".", "Logger", "logger2", "=", "getInnerLogger", "(", "l2", ")", ";", "assert", "(", "logger2", ".", "getHandlers", "(", ")", ".", "length", "=", "=", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testJavaLoggerInstantationWithClazz", "(", ")", "throws", "Exception", "{", "Logger", ".", "JavaLogger", "l1", "=", "new", "Logger", ".", "JavaLogger", "(", "String", ".", "class", ")", ".", "appendToFile", "(", "tmp", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getAbsolutePath", "(", ")", ")", ";", "Logger", ".", "JavaLogger", "l2", "=", "new", "Logger", ".", "JavaLogger", "(", "Integer", ".", "class", ")", ".", "appendToFile", "(", "tmp", ".", "newFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getAbsolutePath", "(", ")", ")", ";", "java", ".", "util", ".", "logging", ".", "Logger", "logger1", "=", "getInnerLogger", "(", "l1", ")", ";", "assert", "(", "logger1", ".", "getHandlers", "(", ")", ".", "length", "=", "=", "1", ")", ";", "java", ".", "util", ".", "logging", ".", "Logger", "logger2", "=", "getInnerLogger", "(", "l2", ")", ";", "assert", "(", "logger2", ".", "getHandlers", "(", ")", ".", "length", "=", "=", "1", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getParentPublicProperty", "(", ")", "{", "return", "parentPublicProperty", ";", "}", "</s>"]
["<s>", "public", "void", "setParentPublicProperty", "(", "String", "parentPublicProperty", ")", "{", "this", ".", "parentPublicProperty", "=", "parentPublicProperty", ";", "}", "</s>"]
["<s>", "public", "String", "getParentProtectedProperty", "(", ")", "{", "return", "parentProtectedProperty", ";", "}", "</s>"]
["<s>", "public", "void", "setParentProtectedProperty", "(", "String", "parentProtectedProperty", ")", "{", "this", ".", "parentProtectedProperty", "=", "parentProtectedProperty", ";", "}", "</s>"]
["<s>", "public", "String", "getChildPrivateProperty", "(", ")", "{", "return", "childPrivateProperty", ";", "}", "</s>"]
["<s>", "public", "void", "setChildPrivateProperty", "(", "String", "childPrivateProperty", ")", "{", "this", ".", "childPrivateProperty", "=", "childPrivateProperty", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "iterableQueryParams", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "queryParams", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postTemplateParamsResolve", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "login", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "responseCoercesToStringBody", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "unwrap", "(", "api", ".", "response", "(", ")", ")", ";", "assertTrue", "(", "response", ".", "body", "(", ")", ".", "isRepeatable", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "response", ".", "body", "(", ")", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postFormParams", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "form", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postBodyParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "body", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "bodyTypeCorrespondsWithParameterType", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "AtomicReference", "<", "Type", ">", "encodedType", "=", "new", "AtomicReference", "<", "Type", ">", "(", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "encoder", "(", "new", "Encoder", ".", "Default", "(", ")", "{", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "encodedType", ".", "set", "(", "bodyType", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "body", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "server", ".", "takeRequest", "(", ")", ";", "assertThat", "(", "encodedType", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "new", "TypeToken", "<", "List", "<", "String", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "encodedType", ".", "set", "(", "bodyType", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postGZIPEncodedBodyParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "gzipBody", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasNoHeaderNamed", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasGzippedBody", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postDeflateEncodedBodyParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "deflateBody", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasNoHeaderNamed", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasDeflatedBody", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "singleInterceptor", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "requestInterceptor", "(", "new", "ForwardedForInterceptor", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "post", "(", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "multipleInterceptor", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "requestInterceptor", "(", "new", "ForwardedForInterceptor", "(", ")", ")", ".", "requestInterceptor", "(", "new", "UserAgentInterceptor", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "post", "(", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customExpander", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "expand", "(", "new", "Date", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customExpanderListParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "expandList", "(", "Arrays", ".", "asList", "(", "new", "Date", "(", "<NUM_LIT>", ")", ",", "new", "Date", "(", "<NUM_LIT>", ")", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customExpanderNullParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "expandList", "(", "Arrays", ".", "asList", "(", "new", "Date", "(", "<NUM_LIT>", ")", ",", "null", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerMap", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "headerMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "headerMap", "(", "headerMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerMapWithHeaderAnnotations", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "headerMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "headerMapWithHeaderAnnotations", "(", "headerMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "headerMapWithHeaderAnnotations", "(", "headerMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMap", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapIterableValuesExpanded", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "new", "ArrayList", "<", "String", ">", "(", ")", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapWithQueryParams", "(", ")", "throws", "Exception", "{", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapWithQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapWithQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "api", ".", "queryMapWithQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapValueStartingWithBrace", "(", ")", "throws", "Exception", "{", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapEncoded", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapEncoded", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoWithFullParams", "(", ")", "throws", "Exception", "{", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CustomPojo", "customPojo", "=", "new", "CustomPojo", "(", "\"", "<STR_LIT:Name>", "\"", ",", "<NUM_LIT:3>", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPojo", "(", "customPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoWithPartialParams", "(", ")", "throws", "Exception", "{", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CustomPojo", "customPojo", "=", "new", "CustomPojo", "(", "\"", "<STR_LIT:Name>", "\"", ",", "null", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPojo", "(", "customPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoWithEmptyParams", "(", ")", "throws", "Exception", "{", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CustomPojo", "customPojo", "=", "new", "CustomPojo", "(", "null", ",", "null", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPojo", "(", "customPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configKeyFormatsAsExpected", "(", ")", "throws", "Exception", "{", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Feign", ".", "configKey", "(", "TestInterfaceAsync", ".", "class", ",", "TestInterfaceAsync", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Feign", ".", "configKey", "(", "TestInterfaceAsync", ".", "class", ",", "TestInterfaceAsync", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "URI", ".", "class", ",", "String", ".", "class", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configKeyUsesChildType", "(", ")", "throws", "Exception", "{", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Feign", ".", "configKey", "(", "List", ".", "class", ",", "Iterable", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "<", "T", ">", "T", "unwrap", "(", "CompletableFuture", "<", "T", ">", "cf", ")", "throws", "Throwable", "{", "try", "{", "return", "cf", ".", "get", "(", "1", ",", "TimeUnit", ".", "SECONDS", ")", ";", "}", "catch", "(", "ExecutionException", "e", ")", "{", "throw", "e", ".", "getCause", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canOverrideErrorDecoder", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "errorDecoder", "(", "new", "IllegalArgumentExceptionOn400", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "unwrap", "(", "api", ".", "post", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "overrideTypeSpecificDecoder", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "decoder", "(", "new", "Decoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "unwrap", "(", "api", ".", "post", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesntRetryAfterResponseIsSent", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "FeignException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "decoder", "(", "new", "Decoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "post", "(", ")", ";", "server", ".", "takeRequest", "(", ")", ";", "unwrap", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsFeignExceptionIncludingBody", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterfaceAsync", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", ")", ".", "target", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "body", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "takeRequest", "(", ")", ";", "try", "{", "unwrap", "(", "cf", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT:/>", "\"", ")", ";", "assertThat", "(", "e", ".", "contentUTF8", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "fail", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsFeignExceptionWithoutBody", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterfaceAsync", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", ")", ".", "target", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "try", "{", "api", ".", "noContent", "(", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT:/>", "\"", ")", ";", "assertThat", "(", "e", ".", "contentUTF8", "(", ")", ")", ".", "isEqualTo", "(", "\"", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Test", "public", "void", "whenReturnTypeIsResponseNoErrorHandling", "(", ")", "throws", "Throwable", "{", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "new", "LinkedHashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", ")", ";", "headers", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "headers", "(", "headers", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT:/>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "new", "byte", "[", "0", "]", ")", ".", "build", "(", ")", ";", "ExecutorService", "execs", "=", "Executors", ".", "newSingleThreadExecutor", "(", ")", ";", "TestInterfaceAsync", "api", "=", "AsyncFeign", ".", "<", "Void", ">", "asyncBuilder", "(", ")", ".", "client", "(", "new", "AsyncClient", ".", "Default", "<", ">", "(", "(", "request", ",", "options", ")", "-", ">", "response", ",", "execs", ")", ")", ".", "target", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertEquals", "(", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "unwrap", "(", "api", ".", "response", "(", ")", ")", ".", "headers", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "execs", ".", "shutdown", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "okIfDecodeRootCauseHasNoMessage", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "DecodeException", ".", "class", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "decoder", "(", "new", "Decoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "unwrap", "(", "api", ".", "post", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodingExceptionGetWrappedInDecode404Mode", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "thrown", ".", "expect", "(", "DecodeException", ".", "class", ")", ";", "thrown", ".", "expectCause", "(", "isA", "(", "NoSuchElementException", ".", "class", ")", ")", ";", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "decode404", "(", ")", ".", "decoder", "(", "new", "Decoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "assertEquals", "(", "<NUM_LIT>", ",", "response", ".", "status", "(", ")", ")", ";", "throw", "new", "NoSuchElementException", "(", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "unwrap", "(", "api", ".", "post", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "assertEquals", "(", "<NUM_LIT>", ",", "response", ".", "status", "(", ")", ")", ";", "throw", "new", "NoSuchElementException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodingDoesNotSwallow404ErrorsInDecode404Mode", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "decode404", "(", ")", ".", "errorDecoder", "(", "new", "IllegalArgumentExceptionOn404", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "Void", ">", "cf", "=", "api", ".", "queryMap", "(", "Collections", ".", "<", "String", ",", "Object", ">", "emptyMap", "(", ")", ")", ";", "server", ".", "takeRequest", "(", ")", ";", "unwrap", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "okIfEncodeRootCauseHasNoMessage", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "EncodeException", ".", "class", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "encoder", "(", "new", "Encoder", "(", ")", "{", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "unwrap", "(", "api", ".", "body", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "equalsHashCodeAndToStringWork", "(", ")", "{", "Target", "<", "TestInterfaceAsync", ">", "t1", "=", "new", "HardCodedTarget", "<", "TestInterfaceAsync", ">", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Target", "<", "TestInterfaceAsync", ">", "t2", "=", "new", "HardCodedTarget", "<", "TestInterfaceAsync", ">", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Target", "<", "OtherTestInterfaceAsync", ">", "t3", "=", "new", "HardCodedTarget", "<", "OtherTestInterfaceAsync", ">", "(", "OtherTestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "TestInterfaceAsync", "i1", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "t1", ")", ";", "TestInterfaceAsync", "i2", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "t1", ")", ";", "TestInterfaceAsync", "i3", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "t2", ")", ";", "OtherTestInterfaceAsync", "i4", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "t3", ")", ";", "assertThat", "(", "i1", ")", ".", "isEqualTo", "(", "i2", ")", ".", "isNotEqualTo", "(", "i3", ")", ".", "isNotEqualTo", "(", "i4", ")", ";", "assertThat", "(", "i1", ".", "hashCode", "(", ")", ")", ".", "isEqualTo", "(", "i2", ".", "hashCode", "(", ")", ")", ".", "isNotEqualTo", "(", "i3", ".", "hashCode", "(", ")", ")", ".", "isNotEqualTo", "(", "i4", ".", "hashCode", "(", ")", ")", ";", "assertThat", "(", "i1", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "i2", ".", "toString", "(", ")", ")", ".", "isNotEqualTo", "(", "i3", ".", "toString", "(", ")", ")", ".", "isNotEqualTo", "(", "i4", ".", "toString", "(", ")", ")", ";", "assertThat", "(", "t1", ")", ".", "isNotEqualTo", "(", "i1", ")", ";", "assertThat", "(", "t1", ".", "hashCode", "(", ")", ")", ".", "isEqualTo", "(", "i1", ".", "hashCode", "(", ")", ")", ";", "assertThat", "(", "t1", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "i1", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Test", "public", "void", "decodeLogicSupportsByteArray", "(", ")", "throws", "Throwable", "{", "byte", "[", "]", "expectedResponse", "=", "{", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", "}", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "new", "Buffer", "(", ")", ".", "write", "(", "expectedResponse", ")", ")", ")", ";", "OtherTestInterfaceAsync", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "OtherTestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertThat", "(", "unwrap", "(", "api", ".", "binaryResponseBody", "(", ")", ")", ")", ".", "containsExactly", "(", "expectedResponse", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodeLogicSupportsByteArray", "(", ")", "throws", "Exception", "{", "byte", "[", "]", "expectedRequest", "=", "{", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", "}", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "OtherTestInterfaceAsync", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "OtherTestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "binaryRequestBody", "(", "expectedRequest", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "expectedRequest", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodedQueryParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "encodedQueryParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkCFCompletedSoon", "(", "CompletableFuture", "<", "?", ">", "cf", ")", "{", "try", "{", "unwrap", "(", "cf", ")", ";", "}", "catch", "(", "RuntimeException", "e", ")", "{", "throw", "e", ";", "}", "catch", "(", "Throwable", "t", ")", "{", "throw", "new", "RuntimeException", "(", "t", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "responseMapperIsAppliedBeforeDelegate", "(", ")", "throws", "IOException", "{", "ResponseMappingDecoder", "decoder", "=", "new", "ResponseMappingDecoder", "(", "upperCaseResponseMapper", "(", ")", ",", "new", "StringDecoder", "(", ")", ")", ";", "String", "output", "=", "(", "String", ")", "decoder", ".", "decode", "(", "responseWithText", "(", "\"", "<STR_LIT>", "\"", ")", ",", "String", ".", "class", ")", ";", "assertThat", "(", "output", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "ResponseMapper", "upperCaseResponseMapper", "(", ")", "{", "return", "new", "ResponseMapper", "(", ")", "{", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Response", "map", "(", "Response", "response", ",", "Type", "type", ")", "{", "try", "{", "return", "response", ".", "toBuilder", "(", ")", ".", "body", "(", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", ")", ")", ".", "toUpperCase", "(", ")", ".", "getBytes", "(", ")", ")", ".", "build", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "}", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Response", "map", "(", "Response", "response", ",", "Type", "type", ")", "{", "try", "{", "return", "response", ".", "toBuilder", "(", ")", ".", "body", "(", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", ")", ")", ".", "toUpperCase", "(", ")", ".", "getBytes", "(", ")", ")", ".", "build", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "private", "Response", "responseWithText", "(", "String", "text", ")", "{", "return", "Response", ".", "builder", "(", ")", ".", "body", "(", "text", ",", "Util", ".", "UTF_8", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "new", "HashMap", "<", ">", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapAndDecodeExecutesMapFunction", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "TestInterfaceAsync", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "mapAndDecode", "(", "upperCaseResponseMapper", "(", ")", ",", "new", "StringDecoder", "(", ")", ")", ".", "target", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "unwrap", "(", "api", ".", "post", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithPrivateGetterIgnored", "(", ")", "throws", "Exception", "{", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "propertyPojo", ".", "setPrivateGetterProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "propertyPojo", ".", "setName", "(", "\"", "<STR_LIT:Name>", "\"", ")", ";", "propertyPojo", ".", "setNumber", "(", "1", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMap_with_child_pojo", "(", ")", "throws", "Exception", "{", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "FieldQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "ChildPojo", "childPojo", "=", "new", "ChildPojo", "(", ")", ";", "childPojo", ".", "setChildPrivateProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "childPojo", ".", "setParentProtectedProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "childPojo", ".", "setParentPublicProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPropertyInheritence", "(", "childPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithNullValueIgnored", "(", ")", "throws", "Exception", "{", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "propertyPojo", ".", "setName", "(", "null", ")", ";", "propertyPojo", ".", "setNumber", "(", "1", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithEmptyParams", "(", ")", "throws", "Exception", "{", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Response", ">", "response", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "String", ">", "post", "(", ")", "throws", "TestInterfaceException", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Body", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "login", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "user", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "password", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "body", "(", "List", "<", "String", ">", "contents", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "String", ">", "body", "(", "String", "content", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "String", ">", "noContent", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "gzipBody", "(", "List", "<", "String", ">", "contents", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "deflateBody", "(", "List", "<", "String", ">", "contents", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "form", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "user", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "password", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Response", ">", "uriParam", "(", "@", "Param", "(", "\"", "<STR_LIT:1>", "\"", ")", "String", "one", ",", "URI", "endpoint", ",", "@", "Param", "(", "\"", "<STR_LIT:2>", "\"", ")", "String", "two", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Response", ">", "queryParams", "(", "@", "Param", "(", "\"", "<STR_LIT:1>", "\"", ")", "String", "one", ",", "@", "Param", "(", "\"", "<STR_LIT:2>", "\"", ")", "Iterable", "<", "String", ">", "twos", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "expand", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "expander", "=", "DateToMillis", ".", "class", ")", "Date", "date", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "expandList", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "expander", "=", "DateToMillis", ".", "class", ")", "List", "<", "Date", ">", "dates", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "expandArray", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "expander", "=", "DateToMillis", ".", "class", ")", "Date", "[", "]", "dates", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "headerMap", "(", "@", "HeaderMap", "Map", "<", "String", ",", "Object", ">", "headerMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "headerMapWithHeaderAnnotations", "(", "@", "HeaderMap", "Map", "<", "String", ",", "Object", ">", "headerMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "queryMap", "(", "@", "QueryMap", "Map", "<", "String", ",", "Object", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "queryMapEncoded", "(", "@", "QueryMap", "(", "encoded", "=", "true", ")", "Map", "<", "String", ",", "Object", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "queryMapWithQueryParams", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ",", "@", "QueryMap", "Map", "<", "String", ",", "Object", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "encodedQueryParam", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "encoded", "=", "true", ")", "String", "trim", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "queryMapPojo", "(", "@", "QueryMap", "CustomPojo", "object", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "queryMapPropertyPojo", "(", "@", "QueryMap", "PropertyPojo", "object", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "queryMapPropertyInheritence", "(", "@", "QueryMap", "ChildPojo", "object", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "String", "expand", "(", "Object", "value", ")", "{", "return", "String", ".", "valueOf", "(", "(", "(", "Date", ")", "value", ")", ".", "getTime", "(", ")", ")", ";", "}", "</s>"]
["<s>", "TestInterfaceException", "(", "String", "message", ")", "{", "super", "(", "message", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "String", ">", "post", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "byte", "[", "]", ">", "binaryResponseBody", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "binaryRequestBody", "(", "byte", "[", "]", "contents", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "RequestTemplate", "template", ")", "{", "template", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "RequestTemplate", "template", ")", "{", "template", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "if", "(", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", ")", "{", "return", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "super", ".", "decode", "(", "methodKey", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "if", "(", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", ")", "{", "return", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "super", ".", "decode", "(", "methodKey", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "if", "(", "object", "instanceof", "Map", ")", "{", "template", ".", "body", "(", "new", "Gson", "(", ")", ".", "toJson", "(", "object", ")", ")", ";", "}", "else", "{", "template", ".", "body", "(", "object", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "TestInterfaceAsyncBuilder", "requestInterceptor", "(", "RequestInterceptor", "requestInterceptor", ")", "{", "delegate", ".", "requestInterceptor", "(", "requestInterceptor", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceAsyncBuilder", "encoder", "(", "Encoder", "encoder", ")", "{", "delegate", ".", "encoder", "(", "encoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceAsyncBuilder", "decoder", "(", "Decoder", "decoder", ")", "{", "delegate", ".", "decoder", "(", "decoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceAsyncBuilder", "errorDecoder", "(", "ErrorDecoder", "errorDecoder", ")", "{", "delegate", ".", "errorDecoder", "(", "errorDecoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceAsyncBuilder", "decode404", "(", ")", "{", "delegate", ".", "decode404", "(", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceAsyncBuilder", "queryMapEndcoder", "(", "QueryMapEncoder", "queryMapEncoder", ")", "{", "delegate", ".", "queryMapEncoder", "(", "queryMapEncoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceAsync", "target", "(", "String", "url", ")", "{", "return", "delegate", ".", "target", "(", "TestInterfaceAsync", ".", "class", ",", "url", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNonInterface", "(", ")", "{", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "NonInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testExtendedCFReturnType", "(", ")", "{", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "ExtendedCFApi", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLowerWildReturnType", "(", ")", "{", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "LowerWildApi", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testUpperWildReturnType", "(", ")", "{", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "UpperWildApi", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testrWildReturnType", "(", ")", "{", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "WildApi", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "abstract", "CompletableFuture", "<", "Void", ">", "x", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "x", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "ExtendedCF", "<", "Void", ">", "x", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "?", "extends", "Object", ">", "x", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "?", "super", "Object", ">", "x", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "?", ">", "x", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Entity", "<", "K", ",", "M", ">", "get", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "K", "key", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Entities", "<", "K", ",", "M", ">", "getAll", "(", "Keys", "<", "K", ">", "keys", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "resolvesParameterizedResult", "(", ")", "throws", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "baseUrl", "=", "server", ".", "url", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ";", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "new", "Decoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "{", "assertThat", "(", "type", ")", ".", "isEqualTo", "(", "new", "TypeToken", "<", "Entity", "<", "String", ",", "Long", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "return", "null", ";", "}", "}", ")", ".", "target", "(", "MyApi", ".", "class", ",", "baseUrl", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "{", "assertThat", "(", "type", ")", ".", "isEqualTo", "(", "new", "TypeToken", "<", "Entity", "<", "String", ",", "Long", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resolvesBodyParameter", "(", ")", "throws", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "String", "baseUrl", "=", "server", ".", "url", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ";", "Feign", ".", "builder", "(", ")", ".", "encoder", "(", "new", "Encoder", "(", ")", "{", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "assertThat", "(", "bodyType", ")", ".", "isEqualTo", "(", "new", "TypeToken", "<", "Keys", "<", "String", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "}", "}", ")", ".", "decoder", "(", "new", "Decoder", "(", ")", "{", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "{", "assertThat", "(", "type", ")", ".", "isEqualTo", "(", "new", "TypeToken", "<", "Entities", "<", "String", ",", "Long", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "return", "null", ";", "}", "}", ")", ".", "target", "(", "MyApi", ".", "class", ",", "baseUrl", ")", ".", "getAll", "(", "new", "Keys", "<", "String", ">", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "assertThat", "(", "bodyType", ")", ".", "isEqualTo", "(", "new", "TypeToken", "<", "Keys", "<", "String", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "{", "assertThat", "(", "type", ")", ".", "isEqualTo", "(", "new", "TypeToken", "<", "Entities", "<", "String", ",", "Long", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "only5TriesAllowedAndExponentialBackoff", "(", ")", "throws", "Exception", "{", "RetryableException", "e", "=", "new", "RetryableException", "(", "-", "1", ",", "null", ",", "null", ",", "null", ",", "REQUEST", ")", ";", "Default", "retryer", "=", "new", "Retryer", ".", "Default", "(", ")", ";", "assertEquals", "(", "1", ",", "retryer", ".", "attempt", ")", ";", "assertEquals", "(", "0", ",", "retryer", ".", "sleptForMillis", ")", ";", "retryer", ".", "continueOrPropagate", "(", "e", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "retryer", ".", "attempt", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "retryer", ".", "sleptForMillis", ")", ";", "retryer", ".", "continueOrPropagate", "(", "e", ")", ";", "assertEquals", "(", "<NUM_LIT:3>", ",", "retryer", ".", "attempt", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "retryer", ".", "sleptForMillis", ")", ";", "retryer", ".", "continueOrPropagate", "(", "e", ")", ";", "assertEquals", "(", "<NUM_LIT:4>", ",", "retryer", ".", "attempt", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "retryer", ".", "sleptForMillis", ")", ";", "retryer", ".", "continueOrPropagate", "(", "e", ")", ";", "assertEquals", "(", "<NUM_LIT:5>", ",", "retryer", ".", "attempt", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "retryer", ".", "sleptForMillis", ")", ";", "thrown", ".", "expect", "(", "RetryableException", ".", "class", ")", ";", "retryer", ".", "continueOrPropagate", "(", "e", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "considersRetryAfterButNotMoreThanMaxPeriod", "(", ")", "{", "Default", "retryer", "=", "new", "Retryer", ".", "Default", "(", ")", "{", "protected", "long", "currentTimeMillis", "(", ")", "{", "return", "0", ";", "}", "}", ";", "retryer", ".", "continueOrPropagate", "(", "new", "RetryableException", "(", "-", "1", ",", "null", ",", "null", ",", "new", "Date", "(", "<NUM_LIT>", ")", ",", "REQUEST", ")", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "retryer", ".", "attempt", ")", ";", "assertEquals", "(", "<NUM_LIT:1000>", ",", "retryer", ".", "sleptForMillis", ")", ";", "}", "</s>"]
["<s>", "protected", "long", "currentTimeMillis", "(", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "RetryableException", ".", "class", ")", "public", "void", "neverRetryAlwaysPropagates", "(", ")", "{", "Retryer", ".", "NEVER_RETRY", ".", "continueOrPropagate", "(", "new", "RetryableException", "(", "-", "1", ",", "null", ",", "null", ",", "new", "Date", "(", "<NUM_LIT>", ")", ",", "REQUEST", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultRetryerFailsOnInterruptedException", "(", ")", "{", "Default", "retryer", "=", "new", "Retryer", ".", "Default", "(", ")", ";", "Thread", ".", "currentThread", "(", ")", ".", "interrupt", "(", ")", ";", "RetryableException", "expected", "=", "new", "RetryableException", "(", "-", "1", ",", "null", ",", "null", ",", "new", "Date", "(", "System", ".", "currentTimeMillis", "(", ")", "+", "<NUM_LIT>", ")", ",", "REQUEST", ")", ";", "try", "{", "retryer", ".", "continueOrPropagate", "(", "expected", ")", ";", "Thread", ".", "interrupted", "(", ")", ";", "Assert", ".", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "RetryableException", "e", ")", "{", "Assert", ".", "assertTrue", "(", "\"", "<STR_LIT>", "\"", ",", "Thread", ".", "interrupted", "(", ")", ")", ";", "Assert", ".", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "retryer", ".", "attempt", ")", ";", "Assert", ".", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expected", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "reasonPhraseIsOptional", "(", ")", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "headers", "(", "Collections", ".", "<", "String", ",", "Collection", "<", "String", ">", ">", "emptyMap", "(", ")", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "new", "byte", "[", "0", "]", ")", ".", "build", "(", ")", ";", "assertThat", "(", "response", ".", "reason", "(", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "response", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canAccessHeadersCaseInsensitively", "(", ")", "{", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headersMap", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "List", "<", "String", ">", "valueList", "=", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ";", "headersMap", ".", "put", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "valueList", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "headers", "(", "headersMap", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "new", "byte", "[", "0", "]", ")", ".", "build", "(", ")", ";", "assertThat", "(", "response", ".", "headers", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "valueList", ")", ";", "assertThat", "(", "response", ".", "headers", "(", ")", ".", "get", "(", "\"", "<STR_LIT:Content-Type>", "\"", ")", ")", ".", "isEqualTo", "(", "valueList", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerValuesWithSameNameOnlyVaryingInCaseAreMerged", "(", ")", "{", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headersMap", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "headersMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "headersMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "headers", "(", "headersMap", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "new", "byte", "[", "0", "]", ")", ".", "build", "(", ")", ";", "List", "<", "String", ">", "expectedHeaderValue", "=", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "headers", "(", ")", ")", ".", "containsOnly", "(", "entry", "(", "(", "\"", "<STR_LIT>", "\"", ")", ",", "expectedHeaderValue", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headersAreOptional", "(", ")", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "new", "byte", "[", "0", "]", ")", ".", "build", "(", ")", ";", "assertThat", "(", "response", ".", "headers", "(", ")", ")", ".", "isNotNull", "(", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "support1xxStatusCodes", "(", ")", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "(", "Response", ".", "Body", ")", "null", ")", ".", "build", "(", ")", ";", "assertThat", "(", "response", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "statusCodesOfAnyValueAreAllowed", "(", ")", "{", "Lists", ".", "list", "(", "<NUM_LIT>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ".", "forEach", "(", "statusCode", "-", ">", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "statusCode", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "(", "Response", ".", "Body", ")", "null", ")", ".", "build", "(", ")", ";", "assertThat", "(", "response", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "statusCode", ")", ";", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "client", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "final", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "(", "request", ",", "options", ")", "-", ">", "{", "assertNotNull", "(", "request", ".", "requestTemplate", "(", ")", ")", ";", "assertNotNull", "(", "request", ".", "requestTemplate", "(", ")", ".", "methodMetadata", "(", ")", ")", ";", "assertNotNull", "(", "request", ".", "requestTemplate", "(", ")", ".", "feignTarget", "(", ")", ")", ";", "return", "new", "Client", ".", "Default", "(", "null", ",", "null", ")", ".", "execute", "(", "request", ",", "options", ")", ";", "}", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "final", "Response", "response", "=", "api", ".", "codecPost", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encoder", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "final", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "encoder", "(", "(", "object", ",", "bodyType", ",", "template", ")", "-", ">", "{", "assertNotNull", "(", "template", ")", ";", "assertNotNull", "(", "template", ".", "methodMetadata", "(", ")", ")", ";", "assertNotNull", "(", "template", ".", "feignTarget", "(", ")", ")", ";", "new", "Encoder", ".", "Default", "(", ")", ".", "encode", "(", "object", ",", "bodyType", ",", "template", ")", ";", "}", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "final", "Response", "response", "=", "api", ".", "codecPost", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decoder", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "String", "url", "=", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ";", "final", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "final", "RequestTemplate", "template", "=", "response", ".", "request", "(", ")", ".", "requestTemplate", "(", ")", ";", "assertNotNull", "(", "template", ")", ";", "assertNotNull", "(", "template", ".", "methodMetadata", "(", ")", ")", ";", "assertNotNull", "(", "template", ".", "feignTarget", "(", ")", ")", ";", "return", "new", "Decoder", ".", "Default", "(", ")", ".", "decode", "(", "response", ",", "type", ")", ";", "}", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "url", ")", ";", "final", "Response", "response", "=", "api", ".", "codecPost", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Body", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", "String", "login", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "user", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "password", ")", ";", "</s>"]
["<s>", "public", "LogLevelEmitsTest", "(", "Level", "logLevel", ",", "List", "<", "String", ">", "expectedMessages", ")", "{", "this", ".", "logLevel", "=", "logLevel", ";", "logger", ".", "expectMessages", "(", "expectedMessages", ")", ";", "}", "</s>"]
["<s>", "@", "Parameters", "public", "static", "Iterable", "<", "Object", "[", "]", ">", "data", "(", ")", "{", "return", "Arrays", ".", "asList", "(", "new", "Object", "[", "]", "[", "]", "{", "{", "Level", ".", "NONE", ",", "Collections", ".", "emptyList", "(", ")", "}", ",", "{", "Level", ".", "BASIC", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", ",", "{", "Level", ".", "HEADERS", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", ",", "{", "Level", ".", "FULL", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:\\\\>", "<STR_LIT:}>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "levelEmits", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "SendsStuff", "api", "=", "Feign", ".", "builder", "(", ")", ".", "logger", "(", "logger", ")", ".", "logLevel", "(", "logLevel", ")", ".", "target", "(", "SendsStuff", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "login", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "ReasonPhraseOptional", "(", "Level", "logLevel", ",", "List", "<", "String", ">", "expectedMessages", ")", "{", "this", ".", "logLevel", "=", "logLevel", ";", "logger", ".", "expectMessages", "(", "expectedMessages", ")", ";", "}", "</s>"]
["<s>", "@", "Parameters", "public", "static", "Iterable", "<", "Object", "[", "]", ">", "data", "(", ")", "{", "return", "Arrays", ".", "asList", "(", "new", "Object", "[", "]", "[", "]", "{", "{", "Level", ".", "BASIC", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", ",", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "reasonPhraseOptional", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setStatus", "(", "\"", "<STR_LIT>", "\"", "+", "<NUM_LIT>", ")", ")", ";", "SendsStuff", "api", "=", "Feign", ".", "builder", "(", ")", ".", "logger", "(", "logger", ")", ".", "logLevel", "(", "logLevel", ")", ".", "target", "(", "SendsStuff", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "login", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "ReadTimeoutEmitsTest", "(", "Level", "logLevel", ",", "List", "<", "String", ">", "expectedMessages", ")", "{", "this", ".", "logLevel", "=", "logLevel", ";", "logger", ".", "expectMessages", "(", "expectedMessages", ")", ";", "}", "</s>"]
["<s>", "@", "Parameters", "public", "static", "Iterable", "<", "Object", "[", "]", ">", "data", "(", ")", "{", "return", "Arrays", ".", "asList", "(", "new", "Object", "[", "]", "[", "]", "{", "{", "Level", ".", "NONE", ",", "Collections", ".", "emptyList", "(", ")", "}", ",", "{", "Level", ".", "BASIC", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", ",", "{", "Level", ".", "HEADERS", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", ",", "{", "Level", ".", "FULL", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:\\\\>", "<STR_LIT:}>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "levelEmitsOnReadTimeout", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "throttleBody", "(", "1", ",", "1", ",", "TimeUnit", ".", "SECONDS", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "FeignException", ".", "class", ")", ";", "SendsStuff", "api", "=", "Feign", ".", "builder", "(", ")", ".", "logger", "(", "logger", ")", ".", "logLevel", "(", "logLevel", ")", ".", "options", "(", "new", "Request", ".", "Options", "(", "<NUM_LIT:10>", "*", "<NUM_LIT:1000>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "<NUM_LIT>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "true", ")", ")", ".", "retryer", "(", "new", "Retryer", "(", ")", "{", "@", "Override", "public", "void", "continueOrPropagate", "(", "RetryableException", "e", ")", "{", "throw", "e", ";", "}", "@", "Override", "public", "Retryer", "clone", "(", ")", "{", "return", "this", ";", "}", "}", ")", ".", "target", "(", "SendsStuff", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "login", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "continueOrPropagate", "(", "RetryableException", "e", ")", "{", "throw", "e", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Retryer", "clone", "(", ")", "{", "return", "this", ";", "}", "</s>"]
["<s>", "public", "UnknownHostEmitsTest", "(", "Level", "logLevel", ",", "List", "<", "String", ">", "expectedMessages", ")", "{", "this", ".", "logLevel", "=", "logLevel", ";", "logger", ".", "expectMessages", "(", "expectedMessages", ")", ";", "}", "</s>"]
["<s>", "@", "Parameters", "public", "static", "Iterable", "<", "Object", "[", "]", ">", "data", "(", ")", "{", "return", "Arrays", ".", "asList", "(", "new", "Object", "[", "]", "[", "]", "{", "{", "Level", ".", "NONE", ",", "Collections", ".", "emptyList", "(", ")", "}", ",", "{", "Level", ".", "BASIC", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", ",", "{", "Level", ".", "HEADERS", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", ",", "{", "Level", ".", "FULL", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:\\\\>", "<STR_LIT:}>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "unknownHostEmits", "(", ")", "{", "SendsStuff", "api", "=", "Feign", ".", "builder", "(", ")", ".", "logger", "(", "logger", ")", ".", "logLevel", "(", "logLevel", ")", ".", "retryer", "(", "new", "Retryer", "(", ")", "{", "@", "Override", "public", "void", "continueOrPropagate", "(", "RetryableException", "e", ")", "{", "throw", "e", ";", "}", "@", "Override", "public", "Retryer", "clone", "(", ")", "{", "return", "this", ";", "}", "}", ")", ".", "target", "(", "SendsStuff", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "thrown", ".", "expect", "(", "FeignException", ".", "class", ")", ";", "api", ".", "login", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "continueOrPropagate", "(", "RetryableException", "e", ")", "{", "throw", "e", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Retryer", "clone", "(", ")", "{", "return", "this", ";", "}", "</s>"]
["<s>", "public", "FormatCharacterTest", "(", "Level", "logLevel", ",", "List", "<", "String", ">", "expectedMessages", ")", "{", "this", ".", "logLevel", "=", "logLevel", ";", "logger", ".", "expectMessages", "(", "expectedMessages", ")", ";", "}", "</s>"]
["<s>", "@", "Parameters", "public", "static", "Iterable", "<", "Object", "[", "]", ">", "data", "(", ")", "{", "return", "Arrays", ".", "asList", "(", "new", "Object", "[", "]", "[", "]", "{", "{", "Level", ".", "NONE", ",", "Collections", ".", "emptyList", "(", ")", "}", ",", "{", "Level", ".", "BASIC", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", ",", "{", "Level", ".", "HEADERS", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", ",", "{", "Level", ".", "FULL", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:\\\\>", "<STR_LIT:}>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "formatCharacterEmits", "(", ")", "{", "SendsStuff", "api", "=", "Feign", ".", "builder", "(", ")", ".", "logger", "(", "logger", ")", ".", "logLevel", "(", "logLevel", ")", ".", "retryer", "(", "new", "Retryer", "(", ")", "{", "@", "Override", "public", "void", "continueOrPropagate", "(", "RetryableException", "e", ")", "{", "throw", "e", ";", "}", "@", "Override", "public", "Retryer", "clone", "(", ")", "{", "return", "this", ";", "}", "}", ")", ".", "target", "(", "SendsStuff", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "thrown", ".", "expect", "(", "FeignException", ".", "class", ")", ";", "api", ".", "login", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "continueOrPropagate", "(", "RetryableException", "e", ")", "{", "throw", "e", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Retryer", "clone", "(", ")", "{", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RetryEmitsTest", "(", "Level", "logLevel", ",", "List", "<", "String", ">", "expectedMessages", ")", "{", "this", ".", "logLevel", "=", "logLevel", ";", "logger", ".", "expectMessages", "(", "expectedMessages", ")", ";", "}", "</s>"]
["<s>", "@", "Parameters", "public", "static", "Iterable", "<", "Object", "[", "]", ">", "data", "(", ")", "{", "return", "Arrays", ".", "asList", "(", "new", "Object", "[", "]", "[", "]", "{", "{", "Level", ".", "NONE", ",", "Collections", ".", "emptyList", "(", ")", "}", ",", "{", "Level", ".", "BASIC", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:)>", "\"", ")", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "retryEmits", "(", ")", "{", "thrown", ".", "expect", "(", "FeignException", ".", "class", ")", ";", "SendsStuff", "api", "=", "Feign", ".", "builder", "(", ")", ".", "logger", "(", "logger", ")", ".", "logLevel", "(", "logLevel", ")", ".", "retryer", "(", "new", "Retryer", "(", ")", "{", "boolean", "retried", ";", "@", "Override", "public", "void", "continueOrPropagate", "(", "RetryableException", "e", ")", "{", "if", "(", "!", "retried", ")", "{", "retried", "=", "true", ";", "return", ";", "}", "throw", "e", ";", "}", "@", "Override", "public", "Retryer", "clone", "(", ")", "{", "return", "this", ";", "}", "}", ")", ".", "target", "(", "SendsStuff", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "login", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "continueOrPropagate", "(", "RetryableException", "e", ")", "{", "if", "(", "!", "retried", ")", "{", "retried", "=", "true", ";", "return", ";", "}", "throw", "e", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Retryer", "clone", "(", ")", "{", "return", "this", ";", "}", "</s>"]
["<s>", "void", "expectMessages", "(", "List", "<", "String", ">", "expectedMessages", ")", "{", "this", ".", "expectedMessages", ".", "addAll", "(", "expectedMessages", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "log", "(", "String", "configKey", ",", "String", "format", ",", "Object", ".", ".", ".", "args", ")", "{", "messages", ".", "add", "(", "methodTag", "(", "configKey", ")", "+", "String", ".", "format", "(", "format", ",", "args", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Statement", "apply", "(", "final", "Statement", "base", ",", "Description", "description", ")", "{", "return", "new", "Statement", "(", ")", "{", "@", "Override", "public", "void", "evaluate", "(", ")", "throws", "Throwable", "{", "base", ".", "evaluate", "(", ")", ";", "SoftAssertions", "softly", "=", "new", "SoftAssertions", "(", ")", ";", "softly", ".", "assertThat", "(", "messages", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "expectedMessages", ".", "size", "(", ")", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "messages", ".", "size", "(", ")", "&", "&", "i", "<", "expectedMessages", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "softly", ".", "assertThat", "(", "messages", ".", "get", "(", "i", ")", ")", ".", "matches", "(", "expectedMessages", ".", "get", "(", "i", ")", ")", ";", "}", "softly", ".", "assertAll", "(", ")", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "evaluate", "(", ")", "throws", "Throwable", "{", "base", ".", "evaluate", "(", ")", ";", "SoftAssertions", "softly", "=", "new", "SoftAssertions", "(", ")", ";", "softly", ".", "assertThat", "(", "messages", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "expectedMessages", ".", "size", "(", ")", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "messages", ".", "size", "(", ")", "&", "&", "i", "<", "expectedMessages", ".", "size", "(", ")", ";", "i", "+", "+", ")", "{", "softly", ".", "assertThat", "(", "messages", ".", "get", "(", "i", ")", ")", ".", "matches", "(", "expectedMessages", ".", "get", "(", "i", ")", ")", ";", "}", "softly", ".", "assertAll", "(", ")", ";", "}", "</s>"]
["<s>", "public", "AClient", "(", "Client", "client", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "execute", "(", "Request", "request", ",", "Options", "options", ")", "throws", "IOException", "{", "return", "null", ";", "}", "</s>"]
["<s>", "public", "BClient", "(", "Client", "client", ")", "{", "if", "(", "!", "(", "client", "instanceof", "AClient", ")", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "execute", "(", "Request", "request", ",", "Options", "options", ")", "throws", "IOException", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "enrichClient", "(", ")", "{", "Client", "enriched", "=", "Capability", ".", "enrich", "(", "new", "Client", ".", "Default", "(", "null", ",", "null", ")", ",", "Arrays", ".", "asList", "(", "new", "Capability", "(", ")", "{", "@", "Override", "public", "Client", "enrich", "(", "Client", "client", ")", "{", "return", "new", "AClient", "(", "client", ")", ";", "}", "}", ",", "new", "Capability", "(", ")", "{", "@", "Override", "public", "Client", "enrich", "(", "Client", "client", ")", "{", "return", "new", "BClient", "(", "client", ")", ";", "}", "}", ")", ")", ";", "assertThat", "(", "enriched", ",", "CoreMatchers", ".", "instanceOf", "(", "BClient", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Client", "enrich", "(", "Client", "client", ")", "{", "return", "new", "AClient", "(", "client", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Client", "enrich", "(", "Client", "client", ")", "{", "return", "new", "BClient", "(", "client", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "get", "(", "Request", ".", "Options", "options", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "get", "(", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "socketTimeoutTest", "(", ")", "{", "final", "MockWebServer", "server", "=", "new", "MockWebServer", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setBodyDelay", "(", "<NUM_LIT:3>", ",", "TimeUnit", ".", "SECONDS", ")", ")", ";", "final", "OptionsInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "options", "(", "new", "Request", ".", "Options", "(", "<NUM_LIT:1000>", ",", "<NUM_LIT:1000>", ")", ")", ".", "target", "(", "OptionsInterface", ".", "class", ",", "server", ".", "url", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "toString", "(", ")", ")", ";", "thrown", ".", "expect", "(", "FeignException", ".", "class", ")", ";", "thrown", ".", "expectCause", "(", "CoreMatchers", ".", "isA", "(", "SocketTimeoutException", ".", "class", ")", ")", ";", "api", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "normalResponseTest", "(", ")", "{", "final", "MockWebServer", "server", "=", "new", "MockWebServer", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setBodyDelay", "(", "<NUM_LIT:3>", ",", "TimeUnit", ".", "SECONDS", ")", ")", ";", "final", "OptionsInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "options", "(", "new", "Request", ".", "Options", "(", "<NUM_LIT:1000>", ",", "<NUM_LIT:1000>", ")", ")", ".", "target", "(", "OptionsInterface", ".", "class", ",", "server", ".", "url", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "toString", "(", ")", ")", ";", "assertThat", "(", "api", ".", "get", "(", "new", "Request", ".", "Options", "(", "<NUM_LIT:1000>", ",", "<NUM_LIT:4>", "*", "<NUM_LIT:1000>", ")", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "whenNameNotSupplied", "(", ")", "{", "assertThat", "(", "EmptyTarget", ".", "create", "(", "UriInterface", ".", "class", ")", ")", ".", "isEqualTo", "(", "EmptyTarget", ".", "create", "(", "UriInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "toString_withoutName", "(", ")", "{", "assertThat", "(", "EmptyTarget", ".", "create", "(", "UriInterface", ".", "class", ")", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "toString_withName", "(", ")", "{", "assertThat", "(", "EmptyTarget", ".", "create", "(", "UriInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mustApplyToAbsoluteUrl", "(", ")", "{", "thrown", ".", "expect", "(", "UnsupportedOperationException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "EmptyTarget", ".", "create", "(", "UriInterface", ".", "class", ")", ".", "apply", "(", "new", "RequestTemplate", "(", ")", ".", "method", "(", "HttpMethod", ".", "GET", ")", ".", "uri", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "get", "(", "URI", "endpoint", ")", ";", "</s>"]
["<s>", "public", "static", "RequestTemplateAssert", "assertThat", "(", "RequestTemplate", "actual", ")", "{", "return", "new", "RequestTemplateAssert", "(", "actual", ")", ";", "}", "</s>"]
["<s>", "public", "RecordedRequestAssert", "(", "RecordedRequest", "actual", ")", "{", "super", "(", "actual", ",", "RecordedRequestAssert", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "RecordedRequestAssert", "hasMethod", "(", "String", "expected", ")", "{", "isNotNull", "(", ")", ";", "objects", ".", "assertEqual", "(", "info", ",", "actual", ".", "getMethod", "(", ")", ",", "expected", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RecordedRequestAssert", "hasPath", "(", "String", "expected", ")", "{", "isNotNull", "(", ")", ";", "objects", ".", "assertEqual", "(", "info", ",", "actual", ".", "getPath", "(", ")", ",", "expected", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RecordedRequestAssert", "hasQueryParams", "(", "String", ".", ".", ".", "expectedParams", ")", "{", "return", "hasQueryParams", "(", "Arrays", ".", "asList", "(", "expectedParams", ")", ")", ";", "}", "</s>"]
["<s>", "public", "RecordedRequestAssert", "hasQueryParams", "(", "Collection", "<", "String", ">", "expectedParams", ")", "{", "isNotNull", "(", ")", ";", "Collection", "<", "String", ">", "actualQueryParams", "=", "getQueryParams", "(", ")", ";", "objects", ".", "assertEqual", "(", "info", ",", "expectedParams", ".", "size", "(", ")", ",", "actualQueryParams", ".", "size", "(", ")", ")", ";", "for", "(", "String", "expectedParam", ":", "expectedParams", ")", "{", "objects", ".", "assertIsIn", "(", "info", ",", "expectedParam", ",", "actualQueryParams", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "private", "Collection", "<", "String", ">", "getQueryParams", "(", ")", "{", "String", "path", "=", "actual", ".", "getPath", "(", ")", ";", "int", "queryStart", "=", "path", ".", "indexOf", "(", "\"", "<STR_LIT:?>", "\"", ")", "+", "1", ";", "String", "[", "]", "queryParams", "=", "actual", ".", "getPath", "(", ")", ".", "substring", "(", "queryStart", ")", ".", "split", "(", "\"", "<STR_LIT:&>", "\"", ")", ";", "return", "Arrays", ".", "asList", "(", "queryParams", ")", ";", "}", "</s>"]
["<s>", "public", "RecordedRequestAssert", "hasOneOfPath", "(", "String", ".", ".", ".", "expected", ")", "{", "isNotNull", "(", ")", ";", "objects", ".", "assertIsIn", "(", "info", ",", "actual", ".", "getPath", "(", ")", ",", "expected", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RecordedRequestAssert", "hasBody", "(", "String", "utf8Expected", ")", "{", "isNotNull", "(", ")", ";", "objects", ".", "assertEqual", "(", "info", ",", "actual", ".", "getBody", "(", ")", ".", "readUtf8", "(", ")", ",", "utf8Expected", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RecordedRequestAssert", "hasGzippedBody", "(", "byte", "[", "]", "expectedUncompressed", ")", "{", "isNotNull", "(", ")", ";", "byte", "[", "]", "compressedBody", "=", "actual", ".", "getBody", "(", ")", ".", "readByteArray", "(", ")", ";", "byte", "[", "]", "uncompressedBody", ";", "try", "{", "uncompressedBody", "=", "Util", ".", "toByteArray", "(", "new", "GZIPInputStream", "(", "new", "ByteArrayInputStream", "(", "compressedBody", ")", ")", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "arrays", ".", "assertContains", "(", "info", ",", "uncompressedBody", ",", "expectedUncompressed", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RecordedRequestAssert", "hasDeflatedBody", "(", "byte", "[", "]", "expectedUncompressed", ")", "{", "isNotNull", "(", ")", ";", "byte", "[", "]", "compressedBody", "=", "actual", ".", "getBody", "(", ")", ".", "readByteArray", "(", ")", ";", "byte", "[", "]", "uncompressedBody", ";", "try", "{", "uncompressedBody", "=", "Util", ".", "toByteArray", "(", "new", "InflaterInputStream", "(", "new", "ByteArrayInputStream", "(", "compressedBody", ")", ")", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "arrays", ".", "assertContains", "(", "info", ",", "uncompressedBody", ",", "expectedUncompressed", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RecordedRequestAssert", "hasBody", "(", "byte", "[", "]", "expected", ")", "{", "isNotNull", "(", ")", ";", "arrays", ".", "assertContains", "(", "info", ",", "actual", ".", "getBody", "(", ")", ".", "readByteArray", "(", ")", ",", "expected", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "RecordedRequestAssert", "hasHeaders", "(", "String", ".", ".", ".", "headerLines", ")", "{", "isNotNull", "(", ")", ";", "Headers", ".", "Builder", "builder", "=", "new", "Headers", ".", "Builder", "(", ")", ";", "for", "(", "String", "next", ":", "headerLines", ")", "{", "builder", ".", "add", "(", "next", ")", ";", "}", "List", "<", "MapEntry", ">", "expected", "=", "new", "ArrayList", "<", "MapEntry", ">", "(", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "List", "<", "String", ">", ">", "next", ":", "builder", ".", "build", "(", ")", ".", "toMultimap", "(", ")", ".", "entrySet", "(", ")", ")", "{", "expected", ".", "add", "(", "entry", "(", "next", ".", "getKey", "(", ")", ",", "next", ".", "getValue", "(", ")", ")", ")", ";", "}", "hasHeaders", "(", "expected", ".", "toArray", "(", "new", "MapEntry", "[", "expected", ".", "size", "(", ")", "]", ")", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RecordedRequestAssert", "hasHeaders", "(", "MapEntry", ".", ".", ".", "expected", ")", "{", "isNotNull", "(", ")", ";", "maps", ".", "assertContains", "(", "info", ",", "actual", ".", "getHeaders", "(", ")", ".", "toMultimap", "(", ")", ",", "expected", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RecordedRequestAssert", "hasNoHeaderNamed", "(", "final", "String", ".", ".", ".", "names", ")", "{", "isNotNull", "(", ")", ";", "Set", "<", "String", ">", "found", "=", "new", "LinkedHashSet", "<", "String", ">", "(", ")", ";", "for", "(", "String", "header", ":", "actual", ".", "getHeaders", "(", ")", ".", "names", "(", ")", ")", "{", "for", "(", "String", "name", ":", "names", ")", "{", "if", "(", "header", ".", "equalsIgnoreCase", "(", "name", ")", ")", "{", "found", ".", "add", "(", "header", ")", ";", "}", "}", "}", "if", "(", "found", ".", "isEmpty", "(", ")", ")", "{", "return", "this", ";", "}", "throw", "failures", ".", "failure", "(", "info", ",", "shouldNotContain", "(", "actual", ".", "getHeaders", "(", ")", ",", "names", ",", "found", ")", ")", ";", "}", "</s>"]
["<s>", "public", "RequestTemplateAssert", "(", "RequestTemplate", "actual", ")", "{", "super", "(", "actual", ",", "RequestTemplateAssert", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "RequestTemplateAssert", "hasMethod", "(", "String", "expected", ")", "{", "isNotNull", "(", ")", ";", "objects", ".", "assertEqual", "(", "info", ",", "actual", ".", "method", "(", ")", ",", "expected", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplateAssert", "hasUrl", "(", "String", "expected", ")", "{", "isNotNull", "(", ")", ";", "objects", ".", "assertEqual", "(", "info", ",", "actual", ".", "url", "(", ")", ",", "expected", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplateAssert", "hasPath", "(", "String", "expected", ")", "{", "isNotNull", "(", ")", ";", "objects", ".", "assertEqual", "(", "info", ",", "actual", ".", "path", "(", ")", ",", "expected", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplateAssert", "hasBody", "(", "String", "utf8Expected", ")", "{", "isNotNull", "(", ")", ";", "if", "(", "actual", ".", "bodyTemplate", "(", ")", "!", "=", "null", ")", "{", "failWithMessage", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ",", "actual", ".", "bodyTemplate", "(", ")", ")", ";", "}", "objects", ".", "assertEqual", "(", "info", ",", "new", "String", "(", "actual", ".", "body", "(", ")", ",", "UTF_8", ")", ",", "utf8Expected", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplateAssert", "hasBody", "(", "byte", "[", "]", "expected", ")", "{", "isNotNull", "(", ")", ";", "if", "(", "actual", ".", "bodyTemplate", "(", ")", "!", "=", "null", ")", "{", "failWithMessage", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ",", "actual", ".", "bodyTemplate", "(", ")", ")", ";", "}", "arrays", ".", "assertContains", "(", "info", ",", "actual", ".", "body", "(", ")", ",", "expected", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplateAssert", "hasBodyTemplate", "(", "String", "expected", ")", "{", "isNotNull", "(", ")", ";", "if", "(", "actual", ".", "body", "(", ")", "!", "=", "null", ")", "{", "failWithMessage", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ",", "actual", ".", "bodyTemplate", "(", ")", ")", ";", "}", "objects", ".", "assertEqual", "(", "info", ",", "actual", ".", "bodyTemplate", "(", ")", ",", "expected", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplateAssert", "hasQueries", "(", "MapEntry", ".", ".", ".", "entries", ")", "{", "isNotNull", "(", ")", ";", "maps", ".", "assertContainsExactly", "(", "info", ",", "actual", ".", "queries", "(", ")", ",", "entries", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplateAssert", "hasHeaders", "(", "MapEntry", ".", ".", ".", "entries", ")", "{", "isNotNull", "(", ")", ";", "maps", ".", "assertContainsOnly", "(", "info", ",", "actual", ".", "headers", "(", ")", ",", "entries", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplateAssert", "hasNoHeader", "(", "final", "String", "encoded", ")", "{", "objects", ".", "assertNull", "(", "info", ",", "actual", ".", "headers", "(", ")", ".", "get", "(", "encoded", ")", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplateAssert", "noRequestBody", "(", ")", "{", "isNotNull", "(", ")", ";", "if", "(", "actual", ".", "body", "(", ")", "!", "=", "null", ")", "{", "if", "(", "actual", ".", "bodyTemplate", "(", ")", "!", "=", "null", ")", "{", "failWithMessage", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ",", "actual", ".", "bodyTemplate", "(", ")", ")", ";", "}", "if", "(", "actual", ".", "body", "(", ")", "!", "=", "null", ")", "{", "failWithMessage", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ",", "new", "String", "(", "actual", ".", "body", "(", ")", ",", "actual", ".", "requestCharset", "(", ")", ")", ")", ";", "}", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "static", "RecordedRequestAssert", "assertThat", "(", "RecordedRequest", "actual", ")", "{", "return", "new", "RecordedRequestAssert", "(", "actual", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addsAuthorizationHeader", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "BasicAuthRequestInterceptor", "interceptor", "=", "new", "BasicAuthRequestInterceptor", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "interceptor", ".", "apply", "(", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "addsAuthorizationHeader_longUserAndPassword", "(", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "BasicAuthRequestInterceptor", "interceptor", "=", "new", "BasicAuthRequestInterceptor", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "interceptor", ".", "apply", "(", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDecodesToString", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "knownResponse", "(", ")", ";", "Object", "decodedObject", "=", "decoder", ".", "decode", "(", "response", ",", "String", ".", "class", ")", ";", "assertEquals", "(", "String", ".", "class", ",", "decodedObject", ".", "getClass", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "decodedObject", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDecodesToByteArray", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "knownResponse", "(", ")", ";", "Object", "decodedObject", "=", "decoder", ".", "decode", "(", "response", ",", "byte", "[", "]", ".", "class", ")", ";", "assertEquals", "(", "byte", "[", "]", ".", "class", ",", "decodedObject", ".", "getClass", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "new", "String", "(", "(", "byte", "[", "]", ")", "decodedObject", ",", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDecodesNullBodyToNull", "(", ")", "throws", "Exception", "{", "assertNull", "(", "decoder", ".", "decode", "(", "nullBodyResponse", "(", ")", ",", "Document", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRefusesToDecodeOtherTypes", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "DecodeException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "decoder", ".", "decode", "(", "knownResponse", "(", ")", ",", "Document", ".", "class", ")", ";", "}", "</s>"]
["<s>", "private", "Response", "knownResponse", "(", ")", "{", "String", "content", "=", "\"", "<STR_LIT>", "\"", ";", "InputStream", "inputStream", "=", "new", "ByteArrayInputStream", "(", "content", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "new", "HashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", ")", ";", "headers", ".", "put", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "Collections", ".", "singleton", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "return", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "headers", "(", "headers", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "inputStream", ",", "content", ".", "length", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Response", "nullBodyResponse", "(", ")", "{", "return", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "headers", "(", "Collections", ".", "<", "String", ",", "Collection", "<", "String", ">", ">", "emptyMap", "(", ")", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "long", "currentTimeMillis", "(", ")", "{", "try", "{", "return", "RFC822_FORMAT", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getTime", "(", ")", ";", "}", "catch", "(", "ParseException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "malformDateFailsGracefully", "(", ")", "{", "assertFalse", "(", "decoder", ".", "apply", "(", "\"", "<STR_LIT>", "\"", ")", "!", "=", "null", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rfc822Parses", "(", ")", "throws", "ParseException", "{", "assertEquals", "(", "RFC822_FORMAT", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ",", "decoder", ".", "apply", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "relativeSecondsParses", "(", ")", "throws", "ParseException", "{", "assertEquals", "(", "RFC822_FORMAT", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ",", "decoder", ".", "apply", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "relativeSecondsParseDecimalIntegers", "(", ")", "throws", "ParseException", "{", "assertEquals", "(", "RFC822_FORMAT", ".", "parse", "(", "\"", "<STR_LIT>", "\"", ")", ",", "decoder", ".", "apply", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEncodesStrings", "(", ")", "throws", "Exception", "{", "String", "content", "=", "\"", "<STR_LIT>", "\"", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "content", ",", "String", ".", "class", ",", "template", ")", ";", "assertEquals", "(", "content", ",", "new", "String", "(", "template", ".", "body", "(", ")", ",", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testEncodesByteArray", "(", ")", "throws", "Exception", "{", "byte", "[", "]", "content", "=", "{", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", "}", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "content", ",", "byte", "[", "]", ".", "class", ",", "template", ")", ";", "assertTrue", "(", "Arrays", ".", "equals", "(", "content", ",", "template", ".", "body", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRefusesToEncodeOtherTypes", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "EncodeException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "encoder", ".", "encode", "(", "new", "Date", "(", ")", ",", "Date", ".", "class", ",", "new", "RequestTemplate", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Parameterized", ".", "Parameters", "(", "name", "=", "\"", "<STR_LIT>", "\"", ")", "public", "static", "Object", "[", "]", "[", "]", "errorCodes", "(", ")", "{", "return", "new", "Object", "[", "]", "[", "]", "{", "{", "<NUM_LIT>", ",", "FeignException", ".", "BadRequest", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "Unauthorized", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "Forbidden", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "NotFound", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "MethodNotAllowed", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "NotAcceptable", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "Conflict", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "TooManyRequests", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "UnprocessableEntity", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "FeignClientException", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "InternalServerError", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "NotImplemented", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "BadGateway", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "ServiceUnavailable", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "GatewayTimeout", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "FeignServerException", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "{", "<NUM_LIT>", ",", "FeignException", ".", "class", ",", "\"", "<STR_LIT>", "\"", "}", ",", "}", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testExceptionIsHttpSpecific", "(", ")", "throws", "Throwable", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "httpStatus", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "headers", ")", ".", "body", "(", "\"", "<STR_LIT>", "\"", ",", "Util", ".", "UTF_8", ")", ".", "build", "(", ")", ";", "Exception", "exception", "=", "errorDecoder", ".", "decode", "(", "\"", "<STR_LIT>", "\"", ",", "response", ")", ";", "assertThat", "(", "exception", ")", ".", "isInstanceOf", "(", "expectedExceptionClass", ")", ";", "assertThat", "(", "(", "(", "FeignException", ")", "exception", ")", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "httpStatus", ")", ";", "assertThat", "(", "exception", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "expectedMessage", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsFeignException", "(", ")", "throws", "Throwable", "{", "thrown", ".", "expect", "(", "FeignException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "headers", ")", ".", "build", "(", ")", ";", "throw", "errorDecoder", ".", "decode", "(", "\"", "<STR_LIT>", "\"", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsFeignExceptionIncludingBody", "(", ")", "throws", "Throwable", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "headers", ")", ".", "body", "(", "\"", "<STR_LIT>", "\"", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "try", "{", "throw", "errorDecoder", ".", "decode", "(", "\"", "<STR_LIT>", "\"", ",", "response", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "e", ".", "contentUTF8", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsFeignExceptionIncludingLongBody", "(", ")", "throws", "Throwable", "{", "String", "actualBody", "=", "repeatString", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "headers", ")", ".", "body", "(", "actualBody", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "String", "expectedBody", "=", "repeatString", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:16>", ")", "+", "\"", "<STR_LIT>", "\"", ";", "try", "{", "throw", "errorDecoder", ".", "decode", "(", "\"", "<STR_LIT>", "\"", ",", "response", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", "+", "expectedBody", "+", "\"", "<STR_LIT:]>", "\"", ")", ";", "assertThat", "(", "e", ".", "contentUTF8", "(", ")", ")", ".", "isEqualTo", "(", "actualBody", ")", ";", "}", "}", "</s>"]
["<s>", "private", "String", "repeatString", "(", "String", "string", ",", "int", "times", ")", "{", "StringBuilder", "result", "=", "new", "StringBuilder", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "times", ";", "i", "+", "+", ")", "{", "result", ".", "append", "(", "string", ")", ";", "}", "return", "result", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFeignExceptionIncludesStatus", "(", ")", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "headers", ")", ".", "build", "(", ")", ";", "Exception", "exception", "=", "errorDecoder", ".", "decode", "(", "\"", "<STR_LIT>", "\"", ",", "response", ")", ";", "assertThat", "(", "exception", ")", ".", "isInstanceOf", "(", "FeignException", ".", "class", ")", ";", "assertThat", "(", "(", "(", "FeignException", ")", "exception", ")", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "retryAfterHeaderThrowsRetryableException", "(", ")", "throws", "Throwable", "{", "thrown", ".", "expect", "(", "FeignException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "headers", ".", "put", "(", "RETRY_AFTER", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "headers", ")", ".", "build", "(", ")", ";", "throw", "errorDecoder", ".", "decode", "(", "\"", "<STR_LIT>", "\"", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Stream", "<", "String", ">", "get", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Stream", "<", "Car", ">", "getCars", "(", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "simpleStreamTest", "(", ")", "{", "MockWebServer", "server", "=", "new", "MockWebServer", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ")", ";", "StreamInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "StreamDecoder", ".", "create", "(", "(", "response", ",", "type", ")", "-", ">", "new", "BufferedReader", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "UTF_8", ")", ")", ".", "lines", "(", ")", ".", "iterator", "(", ")", ")", ")", ".", "doNotCloseAfterDecode", "(", ")", ".", "target", "(", "StreamInterface", ".", "class", ",", "server", ".", "url", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "toString", "(", ")", ")", ";", "try", "(", "Stream", "<", "String", ">", "stream", "=", "api", ".", "get", "(", ")", ")", "{", "assertThat", "(", "stream", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ")", ".", "isEqualTo", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldCloseIteratorWhenStreamClosed", "(", ")", "throws", "IOException", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "\"", "\"", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "TestCloseableIterator", "it", "=", "new", "TestCloseableIterator", "(", ")", ";", "StreamDecoder", "decoder", "=", "new", "StreamDecoder", "(", "(", "r", ",", "t", ")", "-", ">", "it", ")", ";", "try", "(", "Stream", "<", "?", ">", "stream", "=", "(", "Stream", ")", "decoder", ".", "decode", "(", "response", ",", "new", "TypeReference", "<", "Stream", "<", "String", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ")", "{", "assertThat", "(", "stream", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ")", ".", "hasSize", "(", "1", ")", ";", "assertThat", "(", "it", ".", "called", ")", ".", "isTrue", "(", ")", ";", "}", "finally", "{", "assertThat", "(", "it", ".", "closed", ")", ".", "isTrue", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "{", "this", ".", "closed", "=", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "hasNext", "(", ")", "{", "return", "!", "called", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "next", "(", ")", "{", "called", "=", "true", ";", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "templateToQueryString", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "assertThat", "(", "template", ".", "toString", "(", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandCollectionWithBlanks", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandSingleValue", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandMultipleValues", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "emptyMap", "(", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "unresolvedQuery", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "emptyMap", "(", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isNullOrEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "unresolvedMultiValueQueryTemplates", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "emptyMap", "(", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isNullOrEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "explicitNullValuesAreRemoved", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isNullOrEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyParameterRemains", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT:=>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "collectionFormat", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ",", "CollectionFormat", ".", "CSV", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "emptyMap", "(", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandName", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandPureParameter", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyList", "(", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandPureParameterWithSlash", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyList", "(", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandNameUnresolved", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandSingleValueWithComma", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandSingleValueWithPipe", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandSingleValueWithSpace", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandSingleValueWithTab", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandSingleValueWithJson", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:10>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandCollectionValueWithBrackets", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT:[]>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ",", "CollectionFormat", ".", "CSV", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT:[]>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ")", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expandCollectionValueWithDollar", "(", ")", "{", "QueryTemplate", "template", "=", "QueryTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "Util", ".", "UTF_8", ",", "CollectionFormat", ".", "CSV", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:1>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ")", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "bodyTemplatesSupportJsonOnlyWhenEncoded", "(", ")", "{", "String", "bodyTemplate", "=", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ";", "BodyTemplate", "template", "=", "BodyTemplate", ".", "create", "(", "bodyTemplate", ")", ";", "String", "expanded", "=", "template", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyRelativeTemplate", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT:/>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "assertThat", "(", "uriTemplate", ".", "expand", "(", "Collections", ".", "emptyMap", "(", ")", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "nullTemplate", "(", ")", "{", "UriTemplate", ".", "create", "(", "null", ",", "Util", ".", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyTemplate", "(", ")", "{", "UriTemplate", ".", "create", "(", "\"", "\"", ",", "Util", ".", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "simpleTemplate", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "List", "<", "String", ">", "uriTemplateVariables", "=", "uriTemplate", ".", "getVariables", "(", ")", ";", "assertThat", "(", "uriTemplateVariables", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasSize", "(", "1", ")", ";", "Map", "<", "String", ",", "Object", ">", "variables", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "String", "expandedTemplate", "=", "uriTemplate", ".", "expand", "(", "variables", ")", ";", "assertThat", "(", "expandedTemplate", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "URI", ".", "create", "(", "expandedTemplate", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "simpleTemplateMultipleExpressions", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "List", "<", "String", ">", "uriTemplateVariables", "=", "uriTemplate", ".", "getVariables", "(", ")", ";", "assertThat", "(", "uriTemplateVariables", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "hasSize", "(", "<NUM_LIT:2>", ")", ";", "Map", "<", "String", ",", "Object", ">", "variables", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "String", "expandedTemplate", "=", "uriTemplate", ".", "expand", "(", "variables", ")", ";", "assertThat", "(", "expandedTemplate", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "URI", ".", "create", "(", "expandedTemplate", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "simpleTemplateMultipleSequentialExpressions", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "List", "<", "String", ">", "uriTemplateVariables", "=", "uriTemplate", ".", "getVariables", "(", ")", ";", "assertThat", "(", "uriTemplateVariables", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "hasSize", "(", "<NUM_LIT:3>", ")", ";", "Map", "<", "String", ",", "Object", ">", "variables", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "String", "expandedTemplate", "=", "uriTemplate", ".", "expand", "(", "variables", ")", ";", "assertThat", "(", "expandedTemplate", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "URI", ".", "create", "(", "expandedTemplate", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "simpleTemplateUnresolvedVariablesAreRemoved", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "assertThat", "(", "uriTemplate", ".", "getVariables", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "hasSize", "(", "<NUM_LIT:2>", ")", ";", "Map", "<", "String", ",", "Object", ">", "variables", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "String", "expandedTemplate", "=", "uriTemplate", ".", "expand", "(", "variables", ")", ";", "assertThat", "(", "expandedTemplate", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "URI", ".", "create", "(", "expandedTemplate", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "missingVariablesOnPathAreRemoved", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "assertThat", "(", "uriTemplate", ".", "getVariables", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "hasSize", "(", "<NUM_LIT:2>", ")", ";", "Map", "<", "String", ",", "Object", ">", "variables", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "String", "expandedTemplate", "=", "uriTemplate", ".", "expand", "(", "variables", ")", ";", "assertThat", "(", "expandedTemplate", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "URI", ".", "create", "(", "expandedTemplate", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "simpleTemplateWithRegularExpressions", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "assertThat", "(", "uriTemplate", ".", "getVariables", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "hasSize", "(", "<NUM_LIT:2>", ")", ";", "Map", "<", "String", ",", "Object", ">", "variables", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT>", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "String", "expandedTemplate", "=", "uriTemplate", ".", "expand", "(", "variables", ")", ";", "assertThat", "(", "expandedTemplate", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "URI", ".", "create", "(", "expandedTemplate", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "simpleTemplateWithRegularExpressionsValidation", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "assertThat", "(", "uriTemplate", ".", "getVariables", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "hasSize", "(", "<NUM_LIT:2>", ")", ";", "Map", "<", "String", ",", "Object", ">", "variables", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "uriTemplate", ".", "expand", "(", "variables", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "nestedExpressionsAreLiterals", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "assertThat", "(", "uriTemplate", ".", "getVariables", "(", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasSize", "(", "1", ")", ";", "Map", "<", "String", ",", "Object", ">", "variables", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "String", "expandedTemplate", "=", "uriTemplate", ".", "expand", "(", "variables", ")", ";", "assertThat", "(", "expandedTemplate", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "URI", ".", "create", "(", "expandedTemplate", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "literalTemplate", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "String", "expandedTemplate", "=", "uriTemplate", ".", "expand", "(", "Collections", ".", "emptyMap", "(", ")", ")", ";", "assertThat", "(", "expandedTemplate", ")", ".", "isEqualToIgnoringCase", "(", "template", ")", ";", "assertThat", "(", "URI", ".", "create", "(", "expandedTemplate", ")", ")", ".", "isNotNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "rejectEmptyExpressions", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testToString", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "assertThat", "(", "uriTemplate", ".", "toString", "(", ")", ")", ".", "isEqualToIgnoringCase", "(", "template", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodeVariables", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "Map", "<", "String", ",", "Object", ">", "variables", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "String", "expandedTemplate", "=", "uriTemplate", ".", "expand", "(", "variables", ")", ";", "assertThat", "(", "expandedTemplate", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodeLiterals", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "String", "expandedTemplate", "=", "uriTemplate", ".", "expand", "(", "Collections", ".", "emptyMap", "(", ")", ")", ";", "assertThat", "(", "expandedTemplate", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "ensurePlusIsSupportedOnPath", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "uriTemplate", ".", "expand", "(", "Collections", ".", "emptyMap", "(", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "ensurePlusInEncodedAs2BOnQuery", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "Map", "<", "String", ",", "Object", ">", "parameters", "=", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "String", "expanded", "=", "uriTemplate", ".", "expand", "(", "parameters", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "incompleteTemplateIsALiteral", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "assertThat", "(", "uriTemplate", ".", "expand", "(", "Collections", ".", "emptyMap", "(", ")", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "substituteNullMap", "(", ")", "{", "UriTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Util", ".", "UTF_8", ")", ".", "expand", "(", "null", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "skipAlreadyEncodedLiteral", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "String", "expandedTemplate", "=", "uriTemplate", ".", "expand", "(", "Collections", ".", "emptyMap", "(", ")", ")", ";", "assertThat", "(", "expandedTemplate", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "skipAlreadyEncodedVariable", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "String", "encodedVariable", "=", "UriUtils", ".", "encode", "(", "\"", "<STR_LIT>", "\"", ",", "Util", ".", "UTF_8", ")", ";", "Map", "<", "String", ",", "Object", ">", "variables", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "encodedVariable", ")", ";", "assertThat", "(", "uriTemplate", ".", "expand", "(", "variables", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", "+", "encodedVariable", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "skipSlashes", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "false", ",", "Util", ".", "UTF_8", ")", ";", "Map", "<", "String", ",", "Object", ">", "variables", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "String", "encoded", "=", "uriTemplate", ".", "expand", "(", "variables", ")", ";", "assertThat", "(", "encoded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodeSlashes", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "Map", "<", "String", ",", "Object", ">", "variables", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "variables", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "String", "encoded", "=", "uriTemplate", ".", "expand", "(", "variables", ")", ";", "assertThat", "(", "encoded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testLiteralTemplateWithQueryString", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "uriTemplate", ".", "expand", "(", "Collections", ".", "emptyMap", "(", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodeReserved", "(", ")", "{", "String", "template", "=", "\"", "<STR_LIT>", "\"", ";", "UriTemplate", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "String", "expanded", "=", "uriTemplate", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "expanded", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pctEncode", "(", ")", "{", "String", "queryParameterValue", "=", "\"", "<STR_LIT>", "\"", ";", "assertThat", "(", "UriUtils", ".", "encode", "(", "queryParameterValue", ",", "UTF_8", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pctEncodeWithReservedCharacters", "(", ")", "{", "String", "withReserved", "=", "\"", "<STR_LIT>", "\"", ";", "String", "encoded", "=", "UriUtils", ".", "encode", "(", "withReserved", ",", "UTF_8", ",", "true", ")", ";", "assertThat", "(", "encoded", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "it_should_throw_exception_when_name_is_null", "(", ")", "{", "HeaderTemplate", ".", "create", "(", "null", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "exception", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "it_should_throw_exception_when_name_is_empty", "(", ")", "{", "HeaderTemplate", ".", "create", "(", "\"", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "exception", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "(", "expected", "=", "IllegalArgumentException", ".", "class", ")", "public", "void", "it_should_throw_exception_when_value_is_null", "(", ")", "{", "HeaderTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "exception", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "it_should_return_name", "(", ")", "{", "HeaderTemplate", "headerTemplate", "=", "HeaderTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "headerTemplate", ".", "getName", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "it_should_return_expanded", "(", ")", "{", "HeaderTemplate", "headerTemplate", "=", "HeaderTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "headerTemplate", ".", "expand", "(", "Collections", ".", "emptyMap", "(", ")", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "headerTemplate", ".", "expand", "(", "Collections", ".", "singletonMap", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "create_should_preserve_order", "(", ")", "{", "HeaderTemplate", "headerTemplateWithFirstOrdering", "=", "HeaderTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "new", "ArrayList", "<", ">", "(", "headerTemplateWithFirstOrdering", ".", "getValues", "(", ")", ")", ",", "equalTo", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "HeaderTemplate", "headerTemplateWithSecondOrdering", "=", "HeaderTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "new", "ArrayList", "<", ">", "(", "headerTemplateWithSecondOrdering", ".", "getValues", "(", ")", ")", ",", "equalTo", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "append_should_preserve_order", "(", ")", "{", "HeaderTemplate", "headerTemplateWithFirstOrdering", "=", "HeaderTemplate", ".", "append", "(", "HeaderTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyList", "(", ")", ")", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "new", "ArrayList", "<", ">", "(", "headerTemplateWithFirstOrdering", ".", "getValues", "(", ")", ")", ",", "equalTo", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "HeaderTemplate", "headerTemplateWithSecondOrdering", "=", "HeaderTemplate", ".", "append", "(", "HeaderTemplate", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyList", "(", ")", ")", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "new", "ArrayList", "<", ">", "(", "headerTemplateWithSecondOrdering", ".", "getValues", "(", ")", ")", ",", "equalTo", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", ".", ".", ".", "args", ")", "{", "GitHub", "github", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "new", "GsonDecoder", "(", ")", ")", ".", "logger", "(", "new", "Logger", ".", "ErrorLogger", "(", ")", ")", ".", "logLevel", "(", "Logger", ".", "Level", ".", "BASIC", ")", ".", "target", "(", "GitHub", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "List", "<", "Contributor", ">", "contributors", "=", "github", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "Contributor", "contributor", ":", "contributors", ")", "{", "System", ".", "out", ".", "println", "(", "contributor", ".", "login", "+", "\"", "<STR_LIT>", "\"", "+", "contributor", ".", "contributions", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "Contributor", ">", "contributors", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "if", "(", "void", ".", "class", "=", "=", "type", "|", "|", "response", ".", "body", "(", ")", "=", "=", "null", ")", "{", "return", "null", ";", "}", "Reader", "reader", "=", "response", ".", "body", "(", ")", ".", "asReader", "(", "UTF_8", ")", ";", "try", "{", "return", "gson", ".", "fromJson", "(", "reader", ",", "type", ")", ";", "}", "catch", "(", "JsonIOException", "e", ")", "{", "if", "(", "e", ".", "getCause", "(", ")", "!", "=", "null", "&", "&", "e", ".", "getCause", "(", ")", "instanceof", "IOException", ")", "{", "throw", "IOException", ".", "class", ".", "cast", "(", "e", ".", "getCause", "(", ")", ")", ";", "}", "throw", "e", ";", "}", "finally", "{", "ensureClosed", "(", "reader", ")", ";", "}", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Optional", "<", "String", ">", "getAsOptional", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "get", "(", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "simple404OptionalTest", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "final", "MockWebServer", "server", "=", "new", "MockWebServer", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "OptionalInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "decode404", "(", ")", ".", "decoder", "(", "new", "OptionalDecoder", "(", "new", "Decoder", ".", "Default", "(", ")", ")", ")", ".", "target", "(", "OptionalInterface", ".", "class", ",", "server", ".", "url", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "toString", "(", ")", ")", ";", "assertThat", "(", "api", ".", "getAsOptional", "(", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "assertThat", "(", "api", ".", "getAsOptional", "(", ")", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "simple204OptionalTest", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "final", "MockWebServer", "server", "=", "new", "MockWebServer", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "OptionalInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "new", "OptionalDecoder", "(", "new", "Decoder", ".", "Default", "(", ")", ")", ")", ".", "target", "(", "OptionalInterface", ".", "class", ",", "server", ".", "url", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "toString", "(", ")", ")", ";", "assertThat", "(", "api", ".", "getAsOptional", "(", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "test200WithOptionalString", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "final", "MockWebServer", "server", "=", "new", "MockWebServer", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "OptionalInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "new", "OptionalDecoder", "(", "new", "Decoder", ".", "Default", "(", ")", ")", ")", ".", "target", "(", "OptionalInterface", ".", "class", ",", "server", ".", "url", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "toString", "(", ")", ")", ";", "Optional", "<", "String", ">", "response", "=", "api", ".", "getAsOptional", "(", ")", ";", "assertThat", "(", "response", ".", "isPresent", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "response", ")", ".", "isEqualTo", "(", "Optional", ".", "of", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "test200WhenResponseBodyIsNull", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "final", "MockWebServer", "server", "=", "new", "MockWebServer", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "OptionalInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "new", "OptionalDecoder", "(", "(", "(", "response", ",", "type", ")", "-", ">", "null", ")", ")", ")", ".", "target", "(", "OptionalInterface", ".", "class", ",", "server", ".", "url", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "toString", "(", ")", ")", ";", "assertThat", "(", "api", ".", "getAsOptional", "(", ")", ".", "isPresent", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "test200WhenDecodingNoOptional", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "final", "MockWebServer", "server", "=", "new", "MockWebServer", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "OptionalInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "new", "OptionalDecoder", "(", "new", "Decoder", ".", "Default", "(", ")", ")", ")", ".", "target", "(", "OptionalInterface", ".", "class", ",", "server", ".", "url", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "toString", "(", ")", ")", ";", "assertThat", "(", "api", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultEncoder_normalClassWithValues", "(", ")", "{", "Map", "<", "String", ",", "Object", ">", "expected", "=", "new", "HashMap", "<", ">", "(", ")", ";", "expected", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "expected", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "expected", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "NormalObject", "normalObject", "=", "new", "NormalObject", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Map", "<", "String", ",", "Object", ">", "encodedMap", "=", "encoder", ".", "encode", "(", "normalObject", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expected", ",", "encodedMap", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultEncoder_normalClassWithOutValues", "(", ")", "{", "NormalObject", "normalObject", "=", "new", "NormalObject", "(", "null", ",", "null", ")", ";", "Map", "<", "String", ",", "Object", ">", "encodedMap", "=", "encoder", ".", "encode", "(", "normalObject", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", "+", "encodedMap", ",", "encodedMap", ".", "isEmpty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultEncoder_haveSuperClass", "(", ")", "{", "Map", "<", "String", ",", "Object", ">", "expected", "=", "new", "HashMap", "<", ">", "(", ")", ";", "expected", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "expected", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:10>", ")", ";", "expected", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:String>", "\"", ")", ";", "SubClass", "subClass", "=", "new", "SubClass", "(", ")", ";", "subClass", ".", "setPage", "(", "1", ")", ";", "subClass", ".", "setSize", "(", "<NUM_LIT:10>", ")", ";", "subClass", ".", "setQuery", "(", "\"", "<STR_LIT:String>", "\"", ")", ";", "Map", "<", "String", ",", "Object", ">", "encodedMap", "=", "encoder", ".", "encode", "(", "subClass", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expected", ",", "encodedMap", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultEncoder_withOverriddenParamName", "(", ")", "{", "HashSet", "<", "Object", ">", "expectedNames", "=", "new", "HashSet", "<", ">", "(", ")", ";", "expectedNames", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "expectedNames", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "NormalObjectWithOverriddenParamName", "normalObject", "=", "new", "NormalObjectWithOverriddenParamName", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Map", "<", "String", ",", "Object", ">", "encodedMap", "=", "encoder", ".", "encode", "(", "normalObject", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expectedNames", ",", "encodedMap", ".", "keySet", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "NormalObjectWithOverriddenParamName", "(", "String", "foo", ",", "String", "bar", ")", "{", "this", ".", "foo", "=", "foo", ";", "this", ".", "bar", "=", "bar", ";", "}", "</s>"]
["<s>", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "public", "String", "getFoo", "(", ")", "{", "return", "foo", ";", "}", "</s>"]
["<s>", "public", "String", "getBar", "(", ")", "{", "return", "bar", ";", "}", "</s>"]
["<s>", "private", "NormalObject", "(", "String", "foo", ",", "String", "bar", ")", "{", "this", ".", "foo", "=", "foo", ";", "this", ".", "bar", "=", "bar", ";", "}", "</s>"]
["<s>", "public", "String", "getFoo", "(", ")", "{", "return", "foo", ";", "}", "</s>"]
["<s>", "public", "String", "getBar", "(", ")", "{", "return", "bar", ";", "}", "</s>"]
["<s>", "public", "String", "getFooAppendBar", "(", ")", "{", "if", "(", "foo", "!", "=", "null", "&", "&", "bar", "!", "=", "null", ")", "{", "return", "foo", "+", "bar", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "int", "getPage", "(", ")", "{", "return", "page", ";", "}", "</s>"]
["<s>", "public", "void", "setPage", "(", "int", "page", ")", "{", "this", ".", "page", "=", "page", ";", "}", "</s>"]
["<s>", "public", "int", "getSize", "(", ")", "{", "return", "size", ";", "}", "</s>"]
["<s>", "public", "void", "setSize", "(", "int", "size", ")", "{", "this", ".", "size", "=", "size", ";", "}", "</s>"]
["<s>", "public", "String", "getQuery", "(", ")", "{", "return", "query", ";", "}", "</s>"]
["<s>", "public", "void", "setQuery", "(", "String", "query", ")", "{", "this", ".", "query", "=", "query", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultEncoder_normalClassWithValues", "(", ")", "{", "final", "Map", "<", "String", ",", "Object", ">", "expected", "=", "new", "HashMap", "<", ">", "(", ")", ";", "expected", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "expected", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "NormalObject", "normalObject", "=", "new", "NormalObject", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Map", "<", "String", ",", "Object", ">", "encodedMap", "=", "encoder", ".", "encode", "(", "normalObject", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expected", ",", "encodedMap", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultEncoder_normalClassWithOutValues", "(", ")", "{", "final", "NormalObject", "normalObject", "=", "new", "NormalObject", "(", "null", ",", "null", ")", ";", "final", "Map", "<", "String", ",", "Object", ">", "encodedMap", "=", "encoder", ".", "encode", "(", "normalObject", ")", ";", "assertTrue", "(", "\"", "<STR_LIT>", "\"", "+", "encodedMap", ",", "encodedMap", ".", "isEmpty", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultEncoder_withOverriddenParamName", "(", ")", "{", "HashSet", "<", "Object", ">", "expectedNames", "=", "new", "HashSet", "<", ">", "(", ")", ";", "expectedNames", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "expectedNames", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "NormalObjectWithOverriddenParamName", "normalObject", "=", "new", "NormalObjectWithOverriddenParamName", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Map", "<", "String", ",", "Object", ">", "encodedMap", "=", "encoder", ".", "encode", "(", "normalObject", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "expectedNames", ",", "encodedMap", ".", "keySet", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "NormalObject", "(", "String", "foo", ",", "String", "bar", ")", "{", "this", ".", "foo", "=", "foo", ";", "this", ".", "bar", "=", "bar", ";", "}", "</s>"]
["<s>", "private", "NormalObjectWithOverriddenParamName", "(", "String", "foo", ",", "String", "bar", ")", "{", "this", ".", "foo", "=", "foo", ";", "this", ".", "bar", "=", "bar", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "verify", "(", "String", "s", ",", "SSLSession", "sslSession", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "newBuilder", "(", ")", "{", "return", "Feign", ".", "builder", "(", ")", ".", "client", "(", "new", "Client", ".", "Default", "(", "TrustingSSLSocketFactory", ".", "get", "(", ")", ",", "null", ",", "false", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "retriesFailedHandshake", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server", ".", "useHttps", "(", "TrustingSSLSocketFactory", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ",", "false", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setSocketPolicy", "(", "SocketPolicy", ".", "FAIL_HANDSHAKE", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "server", ".", "getRequestCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canOverrideSSLSocketFactory", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server", ".", "useHttps", "(", "TrustingSSLSocketFactory", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ",", "false", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "Override", "public", "void", "testPatch", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "RetryableException", ".", "class", ")", ";", "thrown", ".", "expectCause", "(", "isA", "(", "ProtocolException", ".", "class", ")", ")", ";", "super", ".", "testPatch", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "@", "Override", "public", "void", "noResponseBodyForPatch", "(", ")", "{", "thrown", ".", "expect", "(", "RetryableException", ".", "class", ")", ";", "thrown", ".", "expectCause", "(", "isA", "(", "ProtocolException", ".", "class", ")", ")", ";", "super", ".", "noResponseBodyForPatch", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canOverrideHostnameVerifier", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server", ".", "useHttps", "(", "TrustingSSLSocketFactory", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ",", "false", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "disableHostnameVerification", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canCreateWithImplicitOrNoCredentials", "(", ")", "throws", "Exception", "{", "Proxied", "proxied", "=", "new", "Proxied", "(", "TrustingSSLSocketFactory", ".", "get", "(", ")", ",", "null", ",", "new", "Proxy", "(", "Type", ".", "HTTP", ",", "proxyAddress", ")", ")", ";", "assertThat", "(", "proxied", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "proxied", ".", "getCredentials", "(", ")", ")", ".", "isNullOrEmpty", "(", ")", ";", "HttpURLConnection", "connection", "=", "proxied", ".", "getConnection", "(", "new", "URL", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "connection", ")", ".", "isNotNull", "(", ")", ".", "isInstanceOf", "(", "HttpURLConnection", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canCreateWithExplicitCredentials", "(", ")", "throws", "Exception", "{", "Proxied", "proxied", "=", "new", "Proxied", "(", "TrustingSSLSocketFactory", ".", "get", "(", ")", ",", "null", ",", "new", "Proxy", "(", "Type", ".", "HTTP", ",", "proxyAddress", ")", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "proxied", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "proxied", ".", "getCredentials", "(", ")", ")", ".", "isNotBlank", "(", ")", ";", "HttpURLConnection", "connection", "=", "proxied", ".", "getConnection", "(", "new", "URL", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "connection", ")", ".", "isNotNull", "(", ")", ".", "isInstanceOf", "(", "HttpURLConnection", ".", "class", ")", ";", "}", "</s>"]
["<s>", "private", "TrustingSSLSocketFactory", "(", "String", "serverAlias", ")", "{", "try", "{", "SSLContext", "sc", "=", "SSLContext", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ";", "sc", ".", "init", "(", "new", "KeyManager", "[", "]", "{", "this", "}", ",", "new", "TrustManager", "[", "]", "{", "this", "}", ",", "new", "SecureRandom", "(", ")", ")", ";", "this", ".", "delegate", "=", "sc", ".", "getSocketFactory", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "this", ".", "serverAlias", "=", "serverAlias", ";", "if", "(", "serverAlias", ".", "isEmpty", "(", ")", ")", "{", "this", ".", "privateKey", "=", "null", ";", "this", ".", "certificateChain", "=", "null", ";", "}", "else", "{", "try", "{", "KeyStore", "keyStore", "=", "loadKeyStore", "(", "TrustingSSLSocketFactory", ".", "class", ".", "getResourceAsStream", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "this", ".", "privateKey", "=", "(", "PrivateKey", ")", "keyStore", ".", "getKey", "(", "serverAlias", ",", "KEYSTORE_PASSWORD", ")", ";", "Certificate", "[", "]", "rawChain", "=", "keyStore", ".", "getCertificateChain", "(", "serverAlias", ")", ";", "this", ".", "certificateChain", "=", "Arrays", ".", "copyOf", "(", "rawChain", ",", "rawChain", ".", "length", ",", "X509Certificate", "[", "]", ".", "class", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "static", "SSLSocketFactory", "get", "(", ")", "{", "return", "get", "(", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "synchronized", "static", "SSLSocketFactory", "get", "(", "String", "serverAlias", ")", "{", "if", "(", "!", "sslSocketFactories", ".", "containsKey", "(", "serverAlias", ")", ")", "{", "sslSocketFactories", ".", "put", "(", "serverAlias", ",", "new", "TrustingSSLSocketFactory", "(", "serverAlias", ")", ")", ";", "}", "return", "sslSocketFactories", ".", "get", "(", "serverAlias", ")", ";", "}", "</s>"]
["<s>", "static", "Socket", "setEnabledCipherSuites", "(", "Socket", "socket", ")", "{", "SSLSocket", ".", "class", ".", "cast", "(", "socket", ")", ".", "setEnabledCipherSuites", "(", "ENABLED_CIPHER_SUITES", ")", ";", "return", "socket", ";", "}", "</s>"]
["<s>", "private", "static", "KeyStore", "loadKeyStore", "(", "InputStream", "inputStream", ")", "throws", "IOException", "{", "try", "{", "KeyStore", "keyStore", "=", "KeyStore", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ";", "keyStore", ".", "load", "(", "inputStream", ",", "KEYSTORE_PASSWORD", ")", ";", "return", "keyStore", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "finally", "{", "inputStream", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "[", "]", "getDefaultCipherSuites", "(", ")", "{", "return", "ENABLED_CIPHER_SUITES", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "[", "]", "getSupportedCipherSuites", "(", ")", "{", "return", "ENABLED_CIPHER_SUITES", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Socket", "createSocket", "(", "Socket", "s", ",", "String", "host", ",", "int", "port", ",", "boolean", "autoClose", ")", "throws", "IOException", "{", "return", "setEnabledCipherSuites", "(", "delegate", ".", "createSocket", "(", "s", ",", "host", ",", "port", ",", "autoClose", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Socket", "createSocket", "(", "String", "host", ",", "int", "port", ")", "throws", "IOException", "{", "return", "setEnabledCipherSuites", "(", "delegate", ".", "createSocket", "(", "host", ",", "port", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Socket", "createSocket", "(", "InetAddress", "host", ",", "int", "port", ")", "throws", "IOException", "{", "return", "setEnabledCipherSuites", "(", "delegate", ".", "createSocket", "(", "host", ",", "port", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Socket", "createSocket", "(", "String", "host", ",", "int", "port", ",", "InetAddress", "localHost", ",", "int", "localPort", ")", "throws", "IOException", "{", "return", "setEnabledCipherSuites", "(", "delegate", ".", "createSocket", "(", "host", ",", "port", ",", "localHost", ",", "localPort", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Socket", "createSocket", "(", "InetAddress", "address", ",", "int", "port", ",", "InetAddress", "localAddress", ",", "int", "localPort", ")", "throws", "IOException", "{", "return", "setEnabledCipherSuites", "(", "delegate", ".", "createSocket", "(", "address", ",", "port", ",", "localAddress", ",", "localPort", ")", ")", ";", "}", "</s>"]
["<s>", "public", "X509Certificate", "[", "]", "getAcceptedIssuers", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "public", "void", "checkClientTrusted", "(", "X509Certificate", "[", "]", "certs", ",", "String", "authType", ")", "{", "}", "</s>"]
["<s>", "public", "void", "checkServerTrusted", "(", "X509Certificate", "[", "]", "certs", ",", "String", "authType", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "[", "]", "getClientAliases", "(", "String", "keyType", ",", "Principal", "[", "]", "issuers", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "chooseClientAlias", "(", "String", "[", "]", "keyType", ",", "Principal", "[", "]", "issuers", ",", "Socket", "socket", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "[", "]", "getServerAliases", "(", "String", "keyType", ",", "Principal", "[", "]", "issuers", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "chooseServerAlias", "(", "String", "keyType", ",", "Principal", "[", "]", "issuers", ",", "Socket", "socket", ")", "{", "return", "serverAlias", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "X509Certificate", "[", "]", "getCertificateChain", "(", "String", "alias", ")", "{", "return", "certificateChain", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "PrivateKey", "getPrivateKey", "(", "String", "alias", ")", "{", "return", "privateKey", ";", "}", "</s>"]
["<s>", "public", "abstract", "Builder", "newBuilder", "(", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "testPatch", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "api", ".", "patch", "(", "\"", "\"", ")", ")", ";", "MockWebServerAssertions", ".", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT:0>", "\"", ")", ")", ")", ".", "hasNoHeaderNamed", "(", "\"", "<STR_LIT:Content-Type>", "\"", ")", ".", "hasMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesRequestAndResponse", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "post", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "reason", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:OK>", "\"", ")", ";", "assertThat", "(", "response", ".", "headers", "(", ")", ")", ".", "containsEntry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT:3>", "\"", ")", ")", ".", "containsEntry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ")", ".", "hasSameContentAs", "(", "new", "ByteArrayInputStream", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "UTF_8", ")", ")", ")", ";", "RecordedRequest", "recordedRequest", "=", "server", ".", "takeRequest", "(", ")", ";", "assertThat", "(", "recordedRequest", ".", "getMethod", "(", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "assertThat", "(", "recordedRequest", ".", "getHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "recordedRequest", ".", "getHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "recordedRequest", ".", "getHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT:3>", "\"", ")", ";", "assertThat", "(", "recordedRequest", ".", "getBody", "(", ")", ".", "readUtf8", "(", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "reasonPhraseIsOptional", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setStatus", "(", "\"", "<STR_LIT>", "\"", "+", "<NUM_LIT>", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "post", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "reason", "(", ")", ")", ".", "isNullOrEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesErrorResponse", "(", ")", "{", "thrown", ".", "expect", "(", "FeignException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesErrorResponseBody", "(", ")", "{", "String", "expectedResponseBody", "=", "\"", "<STR_LIT>", "\"", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "try", "{", "api", ".", "get", "(", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "contentUTF8", "(", ")", ")", ".", "isEqualTo", "(", "expectedResponseBody", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesUnauthorizedResponseBody", "(", ")", "{", "String", "expectedResponseBody", "=", "\"", "<STR_LIT>", "\"", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "try", "{", "api", ".", "postForString", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "contentUTF8", "(", ")", ")", ".", "isEqualTo", "(", "expectedResponseBody", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "safeRebuffering", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "logger", "(", "new", "Logger", "(", ")", "{", "@", "Override", "protected", "void", "log", "(", "String", "configKey", ",", "String", "format", ",", "Object", ".", ".", ".", "args", ")", "{", "}", "}", ")", ".", "logLevel", "(", "Logger", ".", "Level", ".", "FULL", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "log", "(", "String", "configKey", ",", "String", "format", ",", "Object", ".", ".", ".", "args", ")", "{", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "safeRebuffering_noContent", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "logger", "(", "new", "Logger", "(", ")", "{", "@", "Override", "protected", "void", "log", "(", "String", "configKey", ",", "String", "format", ",", "Object", ".", ".", ".", "args", ")", "{", "}", "}", ")", ".", "logLevel", "(", "Logger", ".", "Level", ".", "FULL", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "log", "(", "String", "configKey", ",", "String", "format", ",", "Object", ".", ".", ".", "args", ")", "{", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "noResponseBodyForPost", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "noPostBody", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "noResponseBodyForPut", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "noPutBody", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "noResponseBodyForPatch", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "noPatchBody", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesResponseMissingLength", "(", ")", "throws", "IOException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setChunkedBody", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "post", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "reason", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:OK>", "\"", ")", ";", "assertThat", "(", "response", ".", "body", "(", ")", ".", "length", "(", ")", ")", ".", "isNull", "(", ")", ";", "assertThat", "(", "response", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ")", ".", "hasSameContentAs", "(", "new", "ByteArrayInputStream", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "UTF_8", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postWithSpacesInPath", "(", ")", "throws", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "post", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "MockWebServerAssertions", ".", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:POST>", "\"", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testVeryLongResponseNullLength", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addHeader", "(", "\"", "<STR_LIT>", "\"", ",", "Long", ".", "MAX_VALUE", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "post", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "body", "(", ")", ".", "length", "(", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testResponseLength", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Integer", "expected", "=", "<NUM_LIT:4>", ";", "Response", "response", "=", "api", ".", "post", "(", "\"", "\"", ")", ";", "Integer", "actual", "=", "response", ".", "body", "(", ")", ".", "length", "(", ")", ";", "assertEquals", "(", "expected", ",", "actual", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testContentTypeWithCharset", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "postWithContentType", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "UTF_8", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testContentTypeWithoutCharset", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "postWithContentType", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "UTF_8", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testContentTypeDefaultsToRequestCharset", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "postWithContentType", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "String", "body", "=", "server", ".", "takeRequest", "(", ")", ".", "getBody", "(", ")", ".", "readUtf8", "(", ")", ";", "assertThat", "(", "body", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultCollectionFormat", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "get", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "reason", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:OK>", "\"", ")", ";", "MockWebServerAssertions", ".", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:GET>", "\"", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHeadersWithNullParams", "(", ")", "throws", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "getWithHeaders", "(", "null", ")", ";", "assertThat", "(", "response", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "reason", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:OK>", "\"", ")", ";", "MockWebServerAssertions", ".", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:GET>", "\"", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasNoHeaderNamed", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHeadersWithNotEmptyParams", "(", ")", "throws", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "getWithHeaders", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "reason", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:OK>", "\"", ")", ";", "MockWebServerAssertions", ".", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:GET>", "\"", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testAlternativeCollectionFormat", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "getCSV", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "reason", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:OK>", "\"", ")", ";", "MockWebServerAssertions", ".", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:GET>", "\"", ")", ".", "hasOneOfPath", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "Response", "post", "(", "String", "body", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "post", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "to", ",", "String", "body", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "String", "postForString", "(", "String", "body", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "String", "get", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "get", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "String", ">", "multiFoo", ")", ";", "</s>"]
["<s>", "@", "Headers", "(", "{", "\"", "<STR_LIT>", "\"", "}", ")", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "getWithHeaders", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "authorization", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "collectionFormat", "=", "CollectionFormat", ".", "CSV", ")", "Response", "getCSV", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "String", ">", "multiFoo", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "String", "patch", "(", "String", "body", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT:POST>", "\"", ")", "String", "noPostBody", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "noPutBody", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "noPatchBody", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "Response", "postWithContentType", "(", "String", "body", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "contentType", ")", ";", "</s>"]
["<s>", "List", "<", "MethodMetadata", ">", "parseAndValidateMetadata", "(", "Class", "<", "?", ">", "targetType", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "List", "<", "MethodMetadata", ">", "parseAndValidateMetadata", "(", "Class", "<", "?", ">", "targetType", ")", "{", "checkState", "(", "targetType", ".", "getTypeParameters", "(", ")", ".", "length", "=", "=", "0", ",", "\"", "<STR_LIT>", "\"", ",", "targetType", ".", "getSimpleName", "(", ")", ")", ";", "checkState", "(", "targetType", ".", "getInterfaces", "(", ")", ".", "length", "<", "=", "1", ",", "\"", "<STR_LIT>", "\"", ",", "targetType", ".", "getSimpleName", "(", ")", ")", ";", "if", "(", "targetType", ".", "getInterfaces", "(", ")", ".", "length", "=", "=", "1", ")", "{", "checkState", "(", "targetType", ".", "getInterfaces", "(", ")", "[", "0", "]", ".", "getInterfaces", "(", ")", ".", "length", "=", "=", "0", ",", "\"", "<STR_LIT>", "\"", ",", "targetType", ".", "getSimpleName", "(", ")", ")", ";", "}", "final", "Map", "<", "String", ",", "MethodMetadata", ">", "result", "=", "new", "LinkedHashMap", "<", "String", ",", "MethodMetadata", ">", "(", ")", ";", "for", "(", "final", "Method", "method", ":", "targetType", ".", "getMethods", "(", ")", ")", "{", "if", "(", "method", ".", "getDeclaringClass", "(", ")", "=", "=", "Object", ".", "class", "|", "|", "(", "method", ".", "getModifiers", "(", ")", "&", "Modifier", ".", "STATIC", ")", "!", "=", "0", "|", "|", "Util", ".", "isDefault", "(", "method", ")", ")", "{", "continue", ";", "}", "final", "MethodMetadata", "metadata", "=", "parseAndValidateMetadata", "(", "targetType", ",", "method", ")", ";", "checkState", "(", "!", "result", ".", "containsKey", "(", "metadata", ".", "configKey", "(", ")", ")", ",", "\"", "<STR_LIT>", "\"", ",", "metadata", ".", "configKey", "(", ")", ")", ";", "result", ".", "put", "(", "metadata", ".", "configKey", "(", ")", ",", "metadata", ")", ";", "}", "return", "new", "ArrayList", "<", ">", "(", "result", ".", "values", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "MethodMetadata", "parseAndValidateMetadata", "(", "Method", "method", ")", "{", "return", "parseAndValidateMetadata", "(", "method", ".", "getDeclaringClass", "(", ")", ",", "method", ")", ";", "}", "</s>"]
["<s>", "protected", "MethodMetadata", "parseAndValidateMetadata", "(", "Class", "<", "?", ">", "targetType", ",", "Method", "method", ")", "{", "final", "MethodMetadata", "data", "=", "new", "MethodMetadata", "(", ")", ";", "data", ".", "targetType", "(", "targetType", ")", ";", "data", ".", "method", "(", "method", ")", ";", "data", ".", "returnType", "(", "Types", ".", "resolve", "(", "targetType", ",", "targetType", ",", "method", ".", "getGenericReturnType", "(", ")", ")", ")", ";", "data", ".", "configKey", "(", "Feign", ".", "configKey", "(", "targetType", ",", "method", ")", ")", ";", "if", "(", "targetType", ".", "getInterfaces", "(", ")", ".", "length", "=", "=", "1", ")", "{", "processAnnotationOnClass", "(", "data", ",", "targetType", ".", "getInterfaces", "(", ")", "[", "0", "]", ")", ";", "}", "processAnnotationOnClass", "(", "data", ",", "targetType", ")", ";", "for", "(", "final", "Annotation", "methodAnnotation", ":", "method", ".", "getAnnotations", "(", ")", ")", "{", "processAnnotationOnMethod", "(", "data", ",", "methodAnnotation", ",", "method", ")", ";", "}", "if", "(", "data", ".", "isIgnored", "(", ")", ")", "{", "return", "data", ";", "}", "checkState", "(", "data", ".", "template", "(", ")", ".", "method", "(", ")", "!", "=", "null", ",", "\"", "<STR_LIT>", "\"", ",", "data", ".", "configKey", "(", ")", ",", "data", ".", "warnings", "(", ")", ")", ";", "final", "Class", "<", "?", ">", "[", "]", "parameterTypes", "=", "method", ".", "getParameterTypes", "(", ")", ";", "final", "Type", "[", "]", "genericParameterTypes", "=", "method", ".", "getGenericParameterTypes", "(", ")", ";", "final", "Annotation", "[", "]", "[", "]", "parameterAnnotations", "=", "method", ".", "getParameterAnnotations", "(", ")", ";", "final", "int", "count", "=", "parameterAnnotations", ".", "length", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "count", ";", "i", "+", "+", ")", "{", "boolean", "isHttpAnnotation", "=", "false", ";", "if", "(", "parameterAnnotations", "[", "i", "]", "!", "=", "null", ")", "{", "isHttpAnnotation", "=", "processAnnotationsOnParameter", "(", "data", ",", "parameterAnnotations", "[", "i", "]", ",", "i", ")", ";", "}", "if", "(", "isHttpAnnotation", ")", "{", "data", ".", "ignoreParamater", "(", "i", ")", ";", "}", "if", "(", "parameterTypes", "[", "i", "]", "=", "=", "URI", ".", "class", ")", "{", "data", ".", "urlIndex", "(", "i", ")", ";", "}", "else", "if", "(", "!", "isHttpAnnotation", "&", "&", "parameterTypes", "[", "i", "]", "!", "=", "Request", ".", "Options", ".", "class", ")", "{", "if", "(", "data", ".", "isAlreadyProcessed", "(", "i", ")", ")", "{", "checkState", "(", "data", ".", "formParams", "(", ")", ".", "isEmpty", "(", ")", "|", "|", "data", ".", "bodyIndex", "(", ")", "=", "=", "null", ",", "\"", "<STR_LIT>", "\"", ",", "data", ".", "warnings", "(", ")", ")", ";", "}", "else", "{", "checkState", "(", "data", ".", "formParams", "(", ")", ".", "isEmpty", "(", ")", ",", "\"", "<STR_LIT>", "\"", ",", "data", ".", "warnings", "(", ")", ")", ";", "checkState", "(", "data", ".", "bodyIndex", "(", ")", "=", "=", "null", ",", "\"", "<STR_LIT>", "\"", ",", "method", ",", "data", ".", "warnings", "(", ")", ")", ";", "data", ".", "bodyIndex", "(", "i", ")", ";", "data", ".", "bodyType", "(", "Types", ".", "resolve", "(", "targetType", ",", "targetType", ",", "genericParameterTypes", "[", "i", "]", ")", ")", ";", "}", "}", "}", "if", "(", "data", ".", "headerMapIndex", "(", ")", "!", "=", "null", ")", "{", "checkMapString", "(", "\"", "<STR_LIT>", "\"", ",", "parameterTypes", "[", "data", ".", "headerMapIndex", "(", ")", "]", ",", "genericParameterTypes", "[", "data", ".", "headerMapIndex", "(", ")", "]", ")", ";", "}", "if", "(", "data", ".", "queryMapIndex", "(", ")", "!", "=", "null", ")", "{", "if", "(", "Map", ".", "class", ".", "isAssignableFrom", "(", "parameterTypes", "[", "data", ".", "queryMapIndex", "(", ")", "]", ")", ")", "{", "checkMapKeys", "(", "\"", "<STR_LIT>", "\"", ",", "genericParameterTypes", "[", "data", ".", "queryMapIndex", "(", ")", "]", ")", ";", "}", "}", "return", "data", ";", "}", "</s>"]
["<s>", "private", "static", "void", "checkMapString", "(", "String", "name", ",", "Class", "<", "?", ">", "type", ",", "Type", "genericType", ")", "{", "checkState", "(", "Map", ".", "class", ".", "isAssignableFrom", "(", "type", ")", ",", "\"", "<STR_LIT>", "\"", ",", "name", ",", "type", ")", ";", "checkMapKeys", "(", "name", ",", "genericType", ")", ";", "}", "</s>"]
["<s>", "private", "static", "void", "checkMapKeys", "(", "String", "name", ",", "Type", "genericType", ")", "{", "Class", "<", "?", ">", "keyClass", "=", "null", ";", "if", "(", "ParameterizedType", ".", "class", ".", "isAssignableFrom", "(", "genericType", ".", "getClass", "(", ")", ")", ")", "{", "final", "Type", "[", "]", "parameterTypes", "=", "(", "(", "ParameterizedType", ")", "genericType", ")", ".", "getActualTypeArguments", "(", ")", ";", "keyClass", "=", "(", "Class", "<", "?", ">", ")", "parameterTypes", "[", "0", "]", ";", "}", "else", "if", "(", "genericType", "instanceof", "Class", "<", "?", ">", ")", "{", "final", "Type", "[", "]", "interfaces", "=", "(", "(", "Class", ")", "genericType", ")", ".", "getGenericInterfaces", "(", ")", ";", "if", "(", "interfaces", "!", "=", "null", ")", "{", "for", "(", "final", "Type", "extended", ":", "interfaces", ")", "{", "if", "(", "ParameterizedType", ".", "class", ".", "isAssignableFrom", "(", "extended", ".", "getClass", "(", ")", ")", ")", "{", "final", "Type", "[", "]", "parameterTypes", "=", "(", "(", "ParameterizedType", ")", "extended", ")", ".", "getActualTypeArguments", "(", ")", ";", "keyClass", "=", "(", "Class", "<", "?", ">", ")", "parameterTypes", "[", "0", "]", ";", "break", ";", "}", "}", "}", "}", "if", "(", "keyClass", "!", "=", "null", ")", "{", "checkState", "(", "String", ".", "class", ".", "equals", "(", "keyClass", ")", ",", "\"", "<STR_LIT>", "\"", ",", "name", ",", "keyClass", ".", "getSimpleName", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "abstract", "void", "processAnnotationOnClass", "(", "MethodMetadata", "data", ",", "Class", "<", "?", ">", "clz", ")", ";", "</s>"]
["<s>", "protected", "abstract", "void", "processAnnotationOnMethod", "(", "MethodMetadata", "data", ",", "Annotation", "annotation", ",", "Method", "method", ")", ";", "</s>"]
["<s>", "protected", "abstract", "boolean", "processAnnotationsOnParameter", "(", "MethodMetadata", "data", ",", "Annotation", "[", "]", "annotations", ",", "int", "paramIndex", ")", ";", "</s>"]
["<s>", "protected", "void", "nameParam", "(", "MethodMetadata", "data", ",", "String", "name", ",", "int", "i", ")", "{", "final", "Collection", "<", "String", ">", "names", "=", "data", ".", "indexToName", "(", ")", ".", "containsKey", "(", "i", ")", "?", "data", ".", "indexToName", "(", ")", ".", "get", "(", "i", ")", ":", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "names", ".", "add", "(", "name", ")", ";", "data", ".", "indexToName", "(", ")", ".", "put", "(", "i", ",", "names", ")", ";", "}", "</s>"]
["<s>", "public", "Default", "(", ")", "{", "super", ".", "registerClassAnnotation", "(", "Headers", ".", "class", ",", "(", "header", ",", "data", ")", "-", ">", "{", "final", "String", "[", "]", "headersOnType", "=", "header", ".", "value", "(", ")", ";", "checkState", "(", "headersOnType", ".", "length", ">", "0", ",", "\"", "<STR_LIT>", "\"", ",", "data", ".", "configKey", "(", ")", ")", ";", "final", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "toMap", "(", "headersOnType", ")", ";", "headers", ".", "putAll", "(", "data", ".", "template", "(", ")", ".", "headers", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "headers", "(", "null", ")", ";", "data", ".", "template", "(", ")", ".", "headers", "(", "headers", ")", ";", "}", ")", ";", "super", ".", "registerMethodAnnotation", "(", "RequestLine", ".", "class", ",", "(", "ann", ",", "data", ")", "-", ">", "{", "final", "String", "requestLine", "=", "ann", ".", "value", "(", ")", ";", "checkState", "(", "emptyToNull", "(", "requestLine", ")", "!", "=", "null", ",", "\"", "<STR_LIT>", "\"", ",", "data", ".", "configKey", "(", ")", ")", ";", "final", "Matcher", "requestLineMatcher", "=", "REQUEST_LINE_PATTERN", ".", "matcher", "(", "requestLine", ")", ";", "if", "(", "!", "requestLineMatcher", ".", "find", "(", ")", ")", "{", "throw", "new", "IllegalStateException", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "data", ".", "configKey", "(", ")", ")", ")", ";", "}", "else", "{", "data", ".", "template", "(", ")", ".", "method", "(", "HttpMethod", ".", "valueOf", "(", "requestLineMatcher", ".", "group", "(", "1", ")", ")", ")", ";", "data", ".", "template", "(", ")", ".", "uri", "(", "requestLineMatcher", ".", "group", "(", "<NUM_LIT:2>", ")", ")", ";", "}", "data", ".", "template", "(", ")", ".", "decodeSlash", "(", "ann", ".", "decodeSlash", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "collectionFormat", "(", "ann", ".", "collectionFormat", "(", ")", ")", ";", "}", ")", ";", "super", ".", "registerMethodAnnotation", "(", "Body", ".", "class", ",", "(", "ann", ",", "data", ")", "-", ">", "{", "final", "String", "body", "=", "ann", ".", "value", "(", ")", ";", "checkState", "(", "emptyToNull", "(", "body", ")", "!", "=", "null", ",", "\"", "<STR_LIT>", "\"", ",", "data", ".", "configKey", "(", ")", ")", ";", "if", "(", "body", ".", "indexOf", "(", "<CHAR_LIT>", ")", "=", "=", "-", "1", ")", "{", "data", ".", "template", "(", ")", ".", "body", "(", "body", ")", ";", "}", "else", "{", "data", ".", "template", "(", ")", ".", "bodyTemplate", "(", "body", ")", ";", "}", "}", ")", ";", "super", ".", "registerMethodAnnotation", "(", "Headers", ".", "class", ",", "(", "header", ",", "data", ")", "-", ">", "{", "final", "String", "[", "]", "headersOnMethod", "=", "header", ".", "value", "(", ")", ";", "checkState", "(", "headersOnMethod", ".", "length", ">", "0", ",", "\"", "<STR_LIT>", "\"", ",", "data", ".", "configKey", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "headers", "(", "toMap", "(", "headersOnMethod", ")", ")", ";", "}", ")", ";", "super", ".", "registerParameterAnnotation", "(", "Param", ".", "class", ",", "(", "paramAnnotation", ",", "data", ",", "paramIndex", ")", "-", ">", "{", "final", "String", "name", "=", "paramAnnotation", ".", "value", "(", ")", ";", "checkState", "(", "emptyToNull", "(", "name", ")", "!", "=", "null", ",", "\"", "<STR_LIT>", "\"", ",", "paramIndex", ")", ";", "nameParam", "(", "data", ",", "name", ",", "paramIndex", ")", ";", "final", "Class", "<", "?", "extends", "Param", ".", "Expander", ">", "expander", "=", "paramAnnotation", ".", "expander", "(", ")", ";", "if", "(", "expander", "!", "=", "Param", ".", "ToStringExpander", ".", "class", ")", "{", "data", ".", "indexToExpanderClass", "(", ")", ".", "put", "(", "paramIndex", ",", "expander", ")", ";", "}", "if", "(", "!", "data", ".", "template", "(", ")", ".", "hasRequestVariable", "(", "name", ")", ")", "{", "data", ".", "formParams", "(", ")", ".", "add", "(", "name", ")", ";", "}", "}", ")", ";", "super", ".", "registerParameterAnnotation", "(", "QueryMap", ".", "class", ",", "(", "queryMap", ",", "data", ",", "paramIndex", ")", "-", ">", "{", "checkState", "(", "data", ".", "queryMapIndex", "(", ")", "=", "=", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "data", ".", "queryMapIndex", "(", "paramIndex", ")", ";", "data", ".", "queryMapEncoded", "(", "queryMap", ".", "encoded", "(", ")", ")", ";", "}", ")", ";", "super", ".", "registerParameterAnnotation", "(", "HeaderMap", ".", "class", ",", "(", "queryMap", ",", "data", ",", "paramIndex", ")", "-", ">", "{", "checkState", "(", "data", ".", "headerMapIndex", "(", ")", "=", "=", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "data", ".", "headerMapIndex", "(", "paramIndex", ")", ";", "}", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "toMap", "(", "String", "[", "]", "input", ")", "{", "final", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "result", "=", "new", "LinkedHashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", "input", ".", "length", ")", ";", "for", "(", "final", "String", "header", ":", "input", ")", "{", "final", "int", "colon", "=", "header", ".", "indexOf", "(", "<CHAR_LIT::>", ")", ";", "final", "String", "name", "=", "header", ".", "substring", "(", "0", ",", "colon", ")", ";", "if", "(", "!", "result", ".", "containsKey", "(", "name", ")", ")", "{", "result", ".", "put", "(", "name", ",", "new", "ArrayList", "<", "String", ">", "(", "1", ")", ")", ";", "}", "result", ".", "get", "(", "name", ")", ".", "add", "(", "header", ".", "substring", "(", "colon", "+", "1", ")", ".", "trim", "(", ")", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "MethodInfo", "(", "String", "configKey", ",", "Type", "underlyingReturnType", ",", "boolean", "asyncReturnType", ")", "{", "this", ".", "configKey", "=", "configKey", ";", "this", ".", "underlyingReturnType", "=", "underlyingReturnType", ";", "this", ".", "asyncReturnType", "=", "asyncReturnType", ";", "}", "</s>"]
["<s>", "MethodInfo", "(", "Class", "<", "?", ">", "targetType", ",", "Method", "method", ")", "{", "this", ".", "configKey", "=", "Feign", ".", "configKey", "(", "targetType", ",", "method", ")", ";", "final", "Type", "type", "=", "method", ".", "getGenericReturnType", "(", ")", ";", "if", "(", "method", ".", "getReturnType", "(", ")", "!", "=", "CompletableFuture", ".", "class", ")", "{", "this", ".", "asyncReturnType", "=", "false", ";", "this", ".", "underlyingReturnType", "=", "type", ";", "}", "else", "{", "this", ".", "asyncReturnType", "=", "true", ";", "this", ".", "underlyingReturnType", "=", "(", "(", "ParameterizedType", ")", "type", ")", ".", "getActualTypeArguments", "(", ")", "[", "0", "]", ";", "}", "}", "</s>"]
["<s>", "String", "configKey", "(", ")", "{", "return", "configKey", ";", "}", "</s>"]
["<s>", "Type", "underlyingReturnType", "(", ")", "{", "return", "underlyingReturnType", ";", "}", "</s>"]
["<s>", "boolean", "isAsyncReturnType", "(", ")", "{", "return", "asyncReturnType", ";", "}", "</s>"]
["<s>", "AsyncInvocation", "(", "C", "context", ",", "MethodInfo", "methodInfo", ")", "{", "super", "(", ")", ";", "this", ".", "context", "=", "context", ";", "this", ".", "methodInfo", "=", "methodInfo", ";", "this", ".", "startNanos", "=", "System", ".", "nanoTime", "(", ")", ";", "}", "</s>"]
["<s>", "C", "context", "(", ")", "{", "return", "context", ";", "}", "</s>"]
["<s>", "String", "configKey", "(", ")", "{", "return", "methodInfo", ".", "configKey", "(", ")", ";", "}", "</s>"]
["<s>", "long", "startNanos", "(", ")", "{", "return", "startNanos", ";", "}", "</s>"]
["<s>", "Type", "underlyingType", "(", ")", "{", "return", "methodInfo", ".", "underlyingReturnType", "(", ")", ";", "}", "</s>"]
["<s>", "boolean", "isAsyncReturnType", "(", ")", "{", "return", "methodInfo", ".", "isAsyncReturnType", "(", ")", ";", "}", "</s>"]
["<s>", "void", "setResponseFuture", "(", "CompletableFuture", "<", "Response", ">", "responseFuture", ")", "{", "this", ".", "responseFuture", "=", "responseFuture", ";", "}", "</s>"]
["<s>", "CompletableFuture", "<", "Response", ">", "responseFuture", "(", ")", "{", "return", "responseFuture", ";", "}", "</s>"]
["<s>", "Response", "execute", "(", "Request", "request", ",", "Options", "options", ")", "throws", "IOException", ";", "</s>"]
["<s>", "public", "Default", "(", "SSLSocketFactory", "sslContextFactory", ",", "HostnameVerifier", "hostnameVerifier", ")", "{", "this", ".", "sslContextFactory", "=", "sslContextFactory", ";", "this", ".", "hostnameVerifier", "=", "hostnameVerifier", ";", "this", ".", "disableRequestBuffering", "=", "true", ";", "}", "</s>"]
["<s>", "public", "Default", "(", "SSLSocketFactory", "sslContextFactory", ",", "HostnameVerifier", "hostnameVerifier", ",", "boolean", "disableRequestBuffering", ")", "{", "super", "(", ")", ";", "this", ".", "sslContextFactory", "=", "sslContextFactory", ";", "this", ".", "hostnameVerifier", "=", "hostnameVerifier", ";", "this", ".", "disableRequestBuffering", "=", "disableRequestBuffering", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "execute", "(", "Request", "request", ",", "Options", "options", ")", "throws", "IOException", "{", "HttpURLConnection", "connection", "=", "convertAndSend", "(", "request", ",", "options", ")", ";", "return", "convertResponse", "(", "connection", ",", "request", ")", ";", "}", "</s>"]
["<s>", "Response", "convertResponse", "(", "HttpURLConnection", "connection", ",", "Request", "request", ")", "throws", "IOException", "{", "int", "status", "=", "connection", ".", "getResponseCode", "(", ")", ";", "String", "reason", "=", "connection", ".", "getResponseMessage", "(", ")", ";", "if", "(", "status", "<", "0", ")", "{", "throw", "new", "IOException", "(", "format", "(", "\"", "<STR_LIT>", "\"", ",", "status", ",", "connection", ".", "getRequestMethod", "(", ")", ",", "connection", ".", "getURL", "(", ")", ")", ")", ";", "}", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "List", "<", "String", ">", ">", "field", ":", "connection", ".", "getHeaderFields", "(", ")", ".", "entrySet", "(", ")", ")", "{", "if", "(", "field", ".", "getKey", "(", ")", "!", "=", "null", ")", "{", "headers", ".", "put", "(", "field", ".", "getKey", "(", ")", ",", "field", ".", "getValue", "(", ")", ")", ";", "}", "}", "Integer", "length", "=", "connection", ".", "getContentLength", "(", ")", ";", "if", "(", "length", "=", "=", "-", "1", ")", "{", "length", "=", "null", ";", "}", "InputStream", "stream", ";", "if", "(", "status", ">", "=", "<NUM_LIT>", ")", "{", "stream", "=", "connection", ".", "getErrorStream", "(", ")", ";", "}", "else", "{", "stream", "=", "connection", ".", "getInputStream", "(", ")", ";", "}", "return", "Response", ".", "builder", "(", ")", ".", "status", "(", "status", ")", ".", "reason", "(", "reason", ")", ".", "headers", "(", "headers", ")", ".", "request", "(", "request", ")", ".", "body", "(", "stream", ",", "length", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "HttpURLConnection", "getConnection", "(", "final", "URL", "url", ")", "throws", "IOException", "{", "return", "(", "HttpURLConnection", ")", "url", ".", "openConnection", "(", ")", ";", "}", "</s>"]
["<s>", "HttpURLConnection", "convertAndSend", "(", "Request", "request", ",", "Options", "options", ")", "throws", "IOException", "{", "final", "URL", "url", "=", "new", "URL", "(", "request", ".", "url", "(", ")", ")", ";", "final", "HttpURLConnection", "connection", "=", "this", ".", "getConnection", "(", "url", ")", ";", "if", "(", "connection", "instanceof", "HttpsURLConnection", ")", "{", "HttpsURLConnection", "sslCon", "=", "(", "HttpsURLConnection", ")", "connection", ";", "if", "(", "sslContextFactory", "!", "=", "null", ")", "{", "sslCon", ".", "setSSLSocketFactory", "(", "sslContextFactory", ")", ";", "}", "if", "(", "hostnameVerifier", "!", "=", "null", ")", "{", "sslCon", ".", "setHostnameVerifier", "(", "hostnameVerifier", ")", ";", "}", "}", "connection", ".", "setConnectTimeout", "(", "options", ".", "connectTimeoutMillis", "(", ")", ")", ";", "connection", ".", "setReadTimeout", "(", "options", ".", "readTimeoutMillis", "(", ")", ")", ";", "connection", ".", "setAllowUserInteraction", "(", "false", ")", ";", "connection", ".", "setInstanceFollowRedirects", "(", "options", ".", "isFollowRedirects", "(", ")", ")", ";", "connection", ".", "setRequestMethod", "(", "request", ".", "httpMethod", "(", ")", ".", "name", "(", ")", ")", ";", "Collection", "<", "String", ">", "contentEncodingValues", "=", "request", ".", "headers", "(", ")", ".", "get", "(", "CONTENT_ENCODING", ")", ";", "boolean", "gzipEncodedRequest", "=", "contentEncodingValues", "!", "=", "null", "&", "&", "contentEncodingValues", ".", "contains", "(", "ENCODING_GZIP", ")", ";", "boolean", "deflateEncodedRequest", "=", "contentEncodingValues", "!", "=", "null", "&", "&", "contentEncodingValues", ".", "contains", "(", "ENCODING_DEFLATE", ")", ";", "boolean", "hasAcceptHeader", "=", "false", ";", "Integer", "contentLength", "=", "null", ";", "for", "(", "String", "field", ":", "request", ".", "headers", "(", ")", ".", "keySet", "(", ")", ")", "{", "if", "(", "field", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "hasAcceptHeader", "=", "true", ";", "}", "for", "(", "String", "value", ":", "request", ".", "headers", "(", ")", ".", "get", "(", "field", ")", ")", "{", "if", "(", "field", ".", "equals", "(", "CONTENT_LENGTH", ")", ")", "{", "if", "(", "!", "gzipEncodedRequest", "&", "&", "!", "deflateEncodedRequest", ")", "{", "contentLength", "=", "Integer", ".", "valueOf", "(", "value", ")", ";", "connection", ".", "addRequestProperty", "(", "field", ",", "value", ")", ";", "}", "}", "else", "{", "connection", ".", "addRequestProperty", "(", "field", ",", "value", ")", ";", "}", "}", "}", "if", "(", "!", "hasAcceptHeader", ")", "{", "connection", ".", "addRequestProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "request", ".", "body", "(", ")", "!", "=", "null", ")", "{", "if", "(", "disableRequestBuffering", ")", "{", "if", "(", "contentLength", "!", "=", "null", ")", "{", "connection", ".", "setFixedLengthStreamingMode", "(", "contentLength", ")", ";", "}", "else", "{", "connection", ".", "setChunkedStreamingMode", "(", "<NUM_LIT>", ")", ";", "}", "}", "connection", ".", "setDoOutput", "(", "true", ")", ";", "OutputStream", "out", "=", "connection", ".", "getOutputStream", "(", ")", ";", "if", "(", "gzipEncodedRequest", ")", "{", "out", "=", "new", "GZIPOutputStream", "(", "out", ")", ";", "}", "else", "if", "(", "deflateEncodedRequest", ")", "{", "out", "=", "new", "DeflaterOutputStream", "(", "out", ")", ";", "}", "try", "{", "out", ".", "write", "(", "request", ".", "body", "(", ")", ")", ";", "}", "finally", "{", "try", "{", "out", ".", "close", "(", ")", ";", "}", "catch", "(", "IOException", "suppressed", ")", "{", "}", "}", "}", "return", "connection", ";", "}", "</s>"]
["<s>", "public", "Proxied", "(", "SSLSocketFactory", "sslContextFactory", ",", "HostnameVerifier", "hostnameVerifier", ",", "Proxy", "proxy", ")", "{", "super", "(", "sslContextFactory", ",", "hostnameVerifier", ")", ";", "checkNotNull", "(", "proxy", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "proxy", "=", "proxy", ";", "}", "</s>"]
["<s>", "public", "Proxied", "(", "SSLSocketFactory", "sslContextFactory", ",", "HostnameVerifier", "hostnameVerifier", ",", "Proxy", "proxy", ",", "String", "proxyUser", ",", "String", "proxyPassword", ")", "{", "this", "(", "sslContextFactory", ",", "hostnameVerifier", ",", "proxy", ")", ";", "checkArgument", "(", "isNotBlank", "(", "proxyUser", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "checkArgument", "(", "isNotBlank", "(", "proxyPassword", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "credentials", "=", "basic", "(", "proxyUser", ",", "proxyPassword", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "HttpURLConnection", "getConnection", "(", "URL", "url", ")", "throws", "IOException", "{", "HttpURLConnection", "connection", "=", "(", "HttpURLConnection", ")", "url", ".", "openConnection", "(", "this", ".", "proxy", ")", ";", "if", "(", "isNotBlank", "(", "this", ".", "credentials", ")", ")", "{", "connection", ".", "addRequestProperty", "(", "PROXY_AUTHORIZATION", ",", "this", ".", "credentials", ")", ";", "}", "return", "connection", ";", "}", "</s>"]
["<s>", "public", "String", "getCredentials", "(", ")", "{", "return", "this", ".", "credentials", ";", "}", "</s>"]
["<s>", "private", "String", "basic", "(", "String", "username", ",", "String", "password", ")", "{", "String", "token", "=", "username", "+", "\"", "<STR_LIT::>", "\"", "+", "password", ";", "byte", "[", "]", "bytes", "=", "token", ".", "getBytes", "(", "StandardCharsets", ".", "ISO_8859_1", ")", ";", "String", "encoded", "=", "Base64", ".", "getEncoder", "(", ")", ".", "encodeToString", "(", "bytes", ")", ";", "return", "\"", "<STR_LIT>", "\"", "+", "encoded", ";", "}", "</s>"]
["<s>", "ReflectiveFeign", "(", "ParseHandlersByName", "targetToHandlersByName", ",", "InvocationHandlerFactory", "factory", ",", "QueryMapEncoder", "queryMapEncoder", ")", "{", "this", ".", "targetToHandlersByName", "=", "targetToHandlersByName", ";", "this", ".", "factory", "=", "factory", ";", "this", ".", "queryMapEncoder", "=", "queryMapEncoder", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "<", "T", ">", "T", "newInstance", "(", "Target", "<", "T", ">", "target", ")", "{", "Map", "<", "String", ",", "MethodHandler", ">", "nameToHandler", "=", "targetToHandlersByName", ".", "apply", "(", "target", ")", ";", "Map", "<", "Method", ",", "MethodHandler", ">", "methodToHandler", "=", "new", "LinkedHashMap", "<", "Method", ",", "MethodHandler", ">", "(", ")", ";", "List", "<", "DefaultMethodHandler", ">", "defaultMethodHandlers", "=", "new", "LinkedList", "<", "DefaultMethodHandler", ">", "(", ")", ";", "for", "(", "Method", "method", ":", "target", ".", "type", "(", ")", ".", "getMethods", "(", ")", ")", "{", "if", "(", "method", ".", "getDeclaringClass", "(", ")", "=", "=", "Object", ".", "class", ")", "{", "continue", ";", "}", "else", "if", "(", "Util", ".", "isDefault", "(", "method", ")", ")", "{", "DefaultMethodHandler", "handler", "=", "new", "DefaultMethodHandler", "(", "method", ")", ";", "defaultMethodHandlers", ".", "add", "(", "handler", ")", ";", "methodToHandler", ".", "put", "(", "method", ",", "handler", ")", ";", "}", "else", "{", "methodToHandler", ".", "put", "(", "method", ",", "nameToHandler", ".", "get", "(", "Feign", ".", "configKey", "(", "target", ".", "type", "(", ")", ",", "method", ")", ")", ")", ";", "}", "}", "InvocationHandler", "handler", "=", "factory", ".", "create", "(", "target", ",", "methodToHandler", ")", ";", "T", "proxy", "=", "(", "T", ")", "Proxy", ".", "newProxyInstance", "(", "target", ".", "type", "(", ")", ".", "getClassLoader", "(", ")", ",", "new", "Class", "<", "?", ">", "[", "]", "{", "target", ".", "type", "(", ")", "}", ",", "handler", ")", ";", "for", "(", "DefaultMethodHandler", "defaultMethodHandler", ":", "defaultMethodHandlers", ")", "{", "defaultMethodHandler", ".", "bindTo", "(", "proxy", ")", ";", "}", "return", "proxy", ";", "}", "</s>"]
["<s>", "FeignInvocationHandler", "(", "Target", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ")", "{", "this", ".", "target", "=", "checkNotNull", "(", "target", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "dispatch", "=", "checkNotNull", "(", "dispatch", ",", "\"", "<STR_LIT>", "\"", ",", "target", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "invoke", "(", "Object", "proxy", ",", "Method", "method", ",", "Object", "[", "]", "args", ")", "throws", "Throwable", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", ")", "{", "try", "{", "Object", "otherHandler", "=", "args", ".", "length", ">", "0", "&", "&", "args", "[", "0", "]", "!", "=", "null", "?", "Proxy", ".", "getInvocationHandler", "(", "args", "[", "0", "]", ")", ":", "null", ";", "return", "equals", "(", "otherHandler", ")", ";", "}", "catch", "(", "IllegalArgumentException", "e", ")", "{", "return", "false", ";", "}", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", ")", "{", "return", "hashCode", "(", ")", ";", "}", "else", "if", "(", "\"", "<STR_LIT:String>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", ")", "{", "return", "toString", "(", ")", ";", "}", "return", "dispatch", ".", "get", "(", "method", ")", ".", "invoke", "(", "args", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "obj", "instanceof", "FeignInvocationHandler", ")", "{", "FeignInvocationHandler", "other", "=", "(", "FeignInvocationHandler", ")", "obj", ";", "return", "target", ".", "equals", "(", "other", ".", "target", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "target", ".", "hashCode", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "target", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "ParseHandlersByName", "(", "Contract", "contract", ",", "Options", "options", ",", "Encoder", "encoder", ",", "Decoder", "decoder", ",", "QueryMapEncoder", "queryMapEncoder", ",", "ErrorDecoder", "errorDecoder", ",", "SynchronousMethodHandler", ".", "Factory", "factory", ")", "{", "this", ".", "contract", "=", "contract", ";", "this", ".", "options", "=", "options", ";", "this", ".", "factory", "=", "factory", ";", "this", ".", "errorDecoder", "=", "errorDecoder", ";", "this", ".", "queryMapEncoder", "=", "queryMapEncoder", ";", "this", ".", "encoder", "=", "checkNotNull", "(", "encoder", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "decoder", "=", "checkNotNull", "(", "decoder", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "Map", "<", "String", ",", "MethodHandler", ">", "apply", "(", "Target", "target", ")", "{", "List", "<", "MethodMetadata", ">", "metadata", "=", "contract", ".", "parseAndValidateMetadata", "(", "target", ".", "type", "(", ")", ")", ";", "Map", "<", "String", ",", "MethodHandler", ">", "result", "=", "new", "LinkedHashMap", "<", "String", ",", "MethodHandler", ">", "(", ")", ";", "for", "(", "MethodMetadata", "md", ":", "metadata", ")", "{", "BuildTemplateByResolvingArgs", "buildTemplate", ";", "if", "(", "!", "md", ".", "formParams", "(", ")", ".", "isEmpty", "(", ")", "&", "&", "md", ".", "template", "(", ")", ".", "bodyTemplate", "(", ")", "=", "=", "null", ")", "{", "buildTemplate", "=", "new", "BuildFormEncodedTemplateFromArgs", "(", "md", ",", "encoder", ",", "queryMapEncoder", ",", "target", ")", ";", "}", "else", "if", "(", "md", ".", "bodyIndex", "(", ")", "!", "=", "null", ")", "{", "buildTemplate", "=", "new", "BuildEncodedTemplateFromArgs", "(", "md", ",", "encoder", ",", "queryMapEncoder", ",", "target", ")", ";", "}", "else", "{", "buildTemplate", "=", "new", "BuildTemplateByResolvingArgs", "(", "md", ",", "queryMapEncoder", ",", "target", ")", ";", "}", "if", "(", "md", ".", "isIgnored", "(", ")", ")", "{", "result", ".", "put", "(", "md", ".", "configKey", "(", ")", ",", "args", "-", ">", "{", "throw", "new", "IllegalStateException", "(", "md", ".", "configKey", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", ")", ";", "}", "else", "{", "result", ".", "put", "(", "md", ".", "configKey", "(", ")", ",", "factory", ".", "create", "(", "target", ",", "md", ",", "buildTemplate", ",", "options", ",", "decoder", ",", "errorDecoder", ")", ")", ";", "}", "}", "return", "result", ";", "}", "</s>"]
["<s>", "private", "BuildTemplateByResolvingArgs", "(", "MethodMetadata", "metadata", ",", "QueryMapEncoder", "queryMapEncoder", ",", "Target", "target", ")", "{", "this", ".", "metadata", "=", "metadata", ";", "this", ".", "target", "=", "target", ";", "this", ".", "queryMapEncoder", "=", "queryMapEncoder", ";", "if", "(", "metadata", ".", "indexToExpander", "(", ")", "!", "=", "null", ")", "{", "indexToExpander", ".", "putAll", "(", "metadata", ".", "indexToExpander", "(", ")", ")", ";", "return", ";", "}", "if", "(", "metadata", ".", "indexToExpanderClass", "(", ")", ".", "isEmpty", "(", ")", ")", "{", "return", ";", "}", "for", "(", "Entry", "<", "Integer", ",", "Class", "<", "?", "extends", "Expander", ">", ">", "indexToExpanderClass", ":", "metadata", ".", "indexToExpanderClass", "(", ")", ".", "entrySet", "(", ")", ")", "{", "try", "{", "indexToExpander", ".", "put", "(", "indexToExpanderClass", ".", "getKey", "(", ")", ",", "indexToExpanderClass", ".", "getValue", "(", ")", ".", "newInstance", "(", ")", ")", ";", "}", "catch", "(", "InstantiationException", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "e", ")", ";", "}", "catch", "(", "IllegalAccessException", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "e", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "RequestTemplate", "create", "(", "Object", "[", "]", "argv", ")", "{", "RequestTemplate", "mutable", "=", "RequestTemplate", ".", "from", "(", "metadata", ".", "template", "(", ")", ")", ";", "mutable", ".", "feignTarget", "(", "target", ")", ";", "if", "(", "metadata", ".", "urlIndex", "(", ")", "!", "=", "null", ")", "{", "int", "urlIndex", "=", "metadata", ".", "urlIndex", "(", ")", ";", "checkArgument", "(", "argv", "[", "urlIndex", "]", "!", "=", "null", ",", "\"", "<STR_LIT>", "\"", ",", "urlIndex", ")", ";", "mutable", ".", "target", "(", "String", ".", "valueOf", "(", "argv", "[", "urlIndex", "]", ")", ")", ";", "}", "Map", "<", "String", ",", "Object", ">", "varBuilder", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "for", "(", "Entry", "<", "Integer", ",", "Collection", "<", "String", ">", ">", "entry", ":", "metadata", ".", "indexToName", "(", ")", ".", "entrySet", "(", ")", ")", "{", "int", "i", "=", "entry", ".", "getKey", "(", ")", ";", "Object", "value", "=", "argv", "[", "entry", ".", "getKey", "(", ")", "]", ";", "if", "(", "value", "!", "=", "null", ")", "{", "if", "(", "indexToExpander", ".", "containsKey", "(", "i", ")", ")", "{", "value", "=", "expandElements", "(", "indexToExpander", ".", "get", "(", "i", ")", ",", "value", ")", ";", "}", "for", "(", "String", "name", ":", "entry", ".", "getValue", "(", ")", ")", "{", "varBuilder", ".", "put", "(", "name", ",", "value", ")", ";", "}", "}", "}", "RequestTemplate", "template", "=", "resolve", "(", "argv", ",", "mutable", ",", "varBuilder", ")", ";", "if", "(", "metadata", ".", "queryMapIndex", "(", ")", "!", "=", "null", ")", "{", "Object", "value", "=", "argv", "[", "metadata", ".", "queryMapIndex", "(", ")", "]", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "toQueryMap", "(", "value", ")", ";", "template", "=", "addQueryMapQueryParameters", "(", "queryMap", ",", "template", ")", ";", "}", "if", "(", "metadata", ".", "headerMapIndex", "(", ")", "!", "=", "null", ")", "{", "template", "=", "addHeaderMapHeaders", "(", "(", "Map", "<", "String", ",", "Object", ">", ")", "argv", "[", "metadata", ".", "headerMapIndex", "(", ")", "]", ",", "template", ")", ";", "}", "return", "template", ";", "}", "</s>"]
["<s>", "private", "Map", "<", "String", ",", "Object", ">", "toQueryMap", "(", "Object", "value", ")", "{", "if", "(", "value", "instanceof", "Map", ")", "{", "return", "(", "Map", "<", "String", ",", "Object", ">", ")", "value", ";", "}", "try", "{", "return", "queryMapEncoder", ".", "encode", "(", "value", ")", ";", "}", "catch", "(", "EncodeException", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "Object", "expandElements", "(", "Expander", "expander", ",", "Object", "value", ")", "{", "if", "(", "value", "instanceof", "Iterable", ")", "{", "return", "expandIterable", "(", "expander", ",", "(", "Iterable", ")", "value", ")", ";", "}", "return", "expander", ".", "expand", "(", "value", ")", ";", "}", "</s>"]
["<s>", "private", "List", "<", "String", ">", "expandIterable", "(", "Expander", "expander", ",", "Iterable", "value", ")", "{", "List", "<", "String", ">", "values", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "for", "(", "Object", "element", ":", "value", ")", "{", "if", "(", "element", "!", "=", "null", ")", "{", "values", ".", "add", "(", "expander", ".", "expand", "(", "element", ")", ")", ";", "}", "}", "return", "values", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "private", "RequestTemplate", "addHeaderMapHeaders", "(", "Map", "<", "String", ",", "Object", ">", "headerMap", ",", "RequestTemplate", "mutable", ")", "{", "for", "(", "Entry", "<", "String", ",", "Object", ">", "currEntry", ":", "headerMap", ".", "entrySet", "(", ")", ")", "{", "Collection", "<", "String", ">", "values", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "Object", "currValue", "=", "currEntry", ".", "getValue", "(", ")", ";", "if", "(", "currValue", "instanceof", "Iterable", "<", "?", ">", ")", "{", "Iterator", "<", "?", ">", "iter", "=", "(", "(", "Iterable", "<", "?", ">", ")", "currValue", ")", ".", "iterator", "(", ")", ";", "while", "(", "iter", ".", "hasNext", "(", ")", ")", "{", "Object", "nextObject", "=", "iter", ".", "next", "(", ")", ";", "values", ".", "add", "(", "nextObject", "=", "=", "null", "?", "null", ":", "nextObject", ".", "toString", "(", ")", ")", ";", "}", "}", "else", "{", "values", ".", "add", "(", "currValue", "=", "=", "null", "?", "null", ":", "currValue", ".", "toString", "(", ")", ")", ";", "}", "mutable", ".", "header", "(", "currEntry", ".", "getKey", "(", ")", ",", "values", ")", ";", "}", "return", "mutable", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "private", "RequestTemplate", "addQueryMapQueryParameters", "(", "Map", "<", "String", ",", "Object", ">", "queryMap", ",", "RequestTemplate", "mutable", ")", "{", "for", "(", "Entry", "<", "String", ",", "Object", ">", "currEntry", ":", "queryMap", ".", "entrySet", "(", ")", ")", "{", "Collection", "<", "String", ">", "values", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "boolean", "encoded", "=", "metadata", ".", "queryMapEncoded", "(", ")", ";", "Object", "currValue", "=", "currEntry", ".", "getValue", "(", ")", ";", "if", "(", "currValue", "instanceof", "Iterable", "<", "?", ">", ")", "{", "Iterator", "<", "?", ">", "iter", "=", "(", "(", "Iterable", "<", "?", ">", ")", "currValue", ")", ".", "iterator", "(", ")", ";", "while", "(", "iter", ".", "hasNext", "(", ")", ")", "{", "Object", "nextObject", "=", "iter", ".", "next", "(", ")", ";", "values", ".", "add", "(", "nextObject", "=", "=", "null", "?", "null", ":", "encoded", "?", "nextObject", ".", "toString", "(", ")", ":", "UriUtils", ".", "encode", "(", "nextObject", ".", "toString", "(", ")", ")", ")", ";", "}", "}", "else", "{", "values", ".", "add", "(", "currValue", "=", "=", "null", "?", "null", ":", "encoded", "?", "currValue", ".", "toString", "(", ")", ":", "UriUtils", ".", "encode", "(", "currValue", ".", "toString", "(", ")", ")", ")", ";", "}", "mutable", ".", "query", "(", "encoded", "?", "currEntry", ".", "getKey", "(", ")", ":", "UriUtils", ".", "encode", "(", "currEntry", ".", "getKey", "(", ")", ")", ",", "values", ")", ";", "}", "return", "mutable", ";", "}", "</s>"]
["<s>", "protected", "RequestTemplate", "resolve", "(", "Object", "[", "]", "argv", ",", "RequestTemplate", "mutable", ",", "Map", "<", "String", ",", "Object", ">", "variables", ")", "{", "return", "mutable", ".", "resolve", "(", "variables", ")", ";", "}", "</s>"]
["<s>", "private", "BuildFormEncodedTemplateFromArgs", "(", "MethodMetadata", "metadata", ",", "Encoder", "encoder", ",", "QueryMapEncoder", "queryMapEncoder", ",", "Target", "target", ")", "{", "super", "(", "metadata", ",", "queryMapEncoder", ",", "target", ")", ";", "this", ".", "encoder", "=", "encoder", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "RequestTemplate", "resolve", "(", "Object", "[", "]", "argv", ",", "RequestTemplate", "mutable", ",", "Map", "<", "String", ",", "Object", ">", "variables", ")", "{", "Map", "<", "String", ",", "Object", ">", "formVariables", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "for", "(", "Entry", "<", "String", ",", "Object", ">", "entry", ":", "variables", ".", "entrySet", "(", ")", ")", "{", "if", "(", "metadata", ".", "formParams", "(", ")", ".", "contains", "(", "entry", ".", "getKey", "(", ")", ")", ")", "{", "formVariables", ".", "put", "(", "entry", ".", "getKey", "(", ")", ",", "entry", ".", "getValue", "(", ")", ")", ";", "}", "}", "try", "{", "encoder", ".", "encode", "(", "formVariables", ",", "Encoder", ".", "MAP_STRING_WILDCARD", ",", "mutable", ")", ";", "}", "catch", "(", "EncodeException", "e", ")", "{", "throw", "e", ";", "}", "catch", "(", "RuntimeException", "e", ")", "{", "throw", "new", "EncodeException", "(", "e", ".", "getMessage", "(", ")", ",", "e", ")", ";", "}", "return", "super", ".", "resolve", "(", "argv", ",", "mutable", ",", "variables", ")", ";", "}", "</s>"]
["<s>", "private", "BuildEncodedTemplateFromArgs", "(", "MethodMetadata", "metadata", ",", "Encoder", "encoder", ",", "QueryMapEncoder", "queryMapEncoder", ",", "Target", "target", ")", "{", "super", "(", "metadata", ",", "queryMapEncoder", ",", "target", ")", ";", "this", ".", "encoder", "=", "encoder", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "RequestTemplate", "resolve", "(", "Object", "[", "]", "argv", ",", "RequestTemplate", "mutable", ",", "Map", "<", "String", ",", "Object", ">", "variables", ")", "{", "Object", "body", "=", "argv", "[", "metadata", ".", "bodyIndex", "(", ")", "]", ";", "checkArgument", "(", "body", "!", "=", "null", ",", "\"", "<STR_LIT>", "\"", ",", "metadata", ".", "bodyIndex", "(", ")", ")", ";", "try", "{", "encoder", ".", "encode", "(", "body", ",", "metadata", ".", "bodyType", "(", ")", ",", "mutable", ")", ";", "}", "catch", "(", "EncodeException", "e", ")", "{", "throw", "e", ";", "}", "catch", "(", "RuntimeException", "e", ")", "{", "throw", "new", "EncodeException", "(", "e", ".", "getMessage", "(", ")", ",", "e", ")", ";", "}", "return", "super", ".", "resolve", "(", "argv", ",", "mutable", ",", "variables", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "final", "List", "<", "MethodMetadata", ">", "parseAndValidateMetadata", "(", "Class", "<", "?", ">", "targetType", ")", "{", "return", "super", ".", "parseAndValidateMetadata", "(", "targetType", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "final", "void", "processAnnotationOnClass", "(", "MethodMetadata", "data", ",", "Class", "<", "?", ">", "targetType", ")", "{", "final", "List", "<", "GuardedAnnotationProcessor", ">", "processors", "=", "Arrays", ".", "stream", "(", "targetType", ".", "getAnnotations", "(", ")", ")", ".", "flatMap", "(", "annotation", "-", ">", "classAnnotationProcessors", ".", "stream", "(", ")", ".", "filter", "(", "processor", "-", ">", "processor", ".", "test", "(", "annotation", ")", ")", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "if", "(", "!", "processors", ".", "isEmpty", "(", ")", ")", "{", "Arrays", ".", "stream", "(", "targetType", ".", "getAnnotations", "(", ")", ")", ".", "forEach", "(", "annotation", "-", ">", "processors", ".", "stream", "(", ")", ".", "filter", "(", "processor", "-", ">", "processor", ".", "test", "(", "annotation", ")", ")", ".", "forEach", "(", "processor", "-", ">", "processor", ".", "process", "(", "annotation", ",", "data", ")", ")", ")", ";", "}", "else", "{", "if", "(", "targetType", ".", "getAnnotations", "(", ")", ".", "length", "=", "=", "0", ")", "{", "data", ".", "addWarning", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "targetType", ".", "getSimpleName", "(", ")", ",", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ")", ")", ";", "}", "else", "{", "data", ".", "addWarning", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "targetType", ".", "getSimpleName", "(", ")", ",", "Arrays", ".", "stream", "(", "targetType", ".", "getAnnotations", "(", ")", ")", ".", "map", "(", "annotation", "-", ">", "annotation", ".", "annotationType", "(", ")", ".", "getSimpleName", "(", ")", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ",", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "final", "void", "processAnnotationOnMethod", "(", "MethodMetadata", "data", ",", "Annotation", "annotation", ",", "Method", "method", ")", "{", "List", "<", "GuardedAnnotationProcessor", ">", "processors", "=", "methodAnnotationProcessors", ".", "stream", "(", ")", ".", "filter", "(", "processor", "-", ">", "processor", ".", "test", "(", "annotation", ")", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "if", "(", "!", "processors", ".", "isEmpty", "(", ")", ")", "{", "processors", ".", "forEach", "(", "processor", "-", ">", "processor", ".", "process", "(", "annotation", ",", "data", ")", ")", ";", "}", "else", "{", "data", ".", "addWarning", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "method", ".", "getName", "(", ")", ",", "annotation", ".", "annotationType", "(", ")", ".", "getSimpleName", "(", ")", ",", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "final", "boolean", "processAnnotationsOnParameter", "(", "MethodMetadata", "data", ",", "Annotation", "[", "]", "annotations", ",", "int", "paramIndex", ")", "{", "List", "<", "Annotation", ">", "matchingAnnotations", "=", "Arrays", ".", "stream", "(", "annotations", ")", ".", "filter", "(", "annotation", "-", ">", "parameterAnnotationProcessors", ".", "containsKey", "(", "annotation", ".", "annotationType", "(", ")", ")", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "if", "(", "!", "matchingAnnotations", ".", "isEmpty", "(", ")", ")", "{", "matchingAnnotations", ".", "forEach", "(", "annotation", "-", ">", "parameterAnnotationProcessors", ".", "getOrDefault", "(", "annotation", ".", "annotationType", "(", ")", ",", "ParameterAnnotationProcessor", ".", "DO_NOTHING", ")", ".", "process", "(", "annotation", ",", "data", ",", "paramIndex", ")", ")", ";", "}", "else", "{", "final", "Parameter", "parameter", "=", "data", ".", "method", "(", ")", ".", "getParameters", "(", ")", "[", "paramIndex", "]", ";", "String", "parameterName", "=", "parameter", ".", "isNamePresent", "(", ")", "?", "parameter", ".", "getName", "(", ")", ":", "parameter", ".", "getType", "(", ")", ".", "getSimpleName", "(", ")", ";", "if", "(", "annotations", ".", "length", "=", "=", "0", ")", "{", "data", ".", "addWarning", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "parameterName", ",", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ")", ")", ";", "}", "else", "{", "data", ".", "addWarning", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "parameterName", ",", "Arrays", ".", "stream", "(", "annotations", ")", ".", "map", "(", "annotation", "-", ">", "annotation", ".", "annotationType", "(", ")", ".", "getSimpleName", "(", ")", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ",", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ")", ")", ";", "}", "}", "return", "false", ";", "}", "</s>"]
["<s>", "protected", "<", "E", "extends", "Annotation", ">", "void", "registerClassAnnotation", "(", "Class", "<", "E", ">", "annotationType", ",", "DeclarativeContract", ".", "AnnotationProcessor", "<", "E", ">", "processor", ")", "{", "registerClassAnnotation", "(", "annotation", "-", ">", "annotation", ".", "annotationType", "(", ")", ".", "equals", "(", "annotationType", ")", ",", "processor", ")", ";", "}", "</s>"]
["<s>", "protected", "<", "E", "extends", "Annotation", ">", "void", "registerClassAnnotation", "(", "Predicate", "<", "E", ">", "predicate", ",", "DeclarativeContract", ".", "AnnotationProcessor", "<", "E", ">", "processor", ")", "{", "this", ".", "classAnnotationProcessors", ".", "add", "(", "new", "GuardedAnnotationProcessor", "(", "predicate", ",", "processor", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "<", "E", "extends", "Annotation", ">", "void", "registerMethodAnnotation", "(", "Class", "<", "E", ">", "annotationType", ",", "DeclarativeContract", ".", "AnnotationProcessor", "<", "E", ">", "processor", ")", "{", "registerMethodAnnotation", "(", "annotation", "-", ">", "annotation", ".", "annotationType", "(", ")", ".", "equals", "(", "annotationType", ")", ",", "processor", ")", ";", "}", "</s>"]
["<s>", "protected", "<", "E", "extends", "Annotation", ">", "void", "registerMethodAnnotation", "(", "Predicate", "<", "E", ">", "predicate", ",", "DeclarativeContract", ".", "AnnotationProcessor", "<", "E", ">", "processor", ")", "{", "this", ".", "methodAnnotationProcessors", ".", "add", "(", "new", "GuardedAnnotationProcessor", "(", "predicate", ",", "processor", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "<", "E", "extends", "Annotation", ">", "void", "registerParameterAnnotation", "(", "Class", "<", "E", ">", "annotation", ",", "DeclarativeContract", ".", "ParameterAnnotationProcessor", "<", "E", ">", "processor", ")", "{", "this", ".", "parameterAnnotationProcessors", ".", "put", "(", "(", "Class", ")", "annotation", ",", "(", "DeclarativeContract", ".", "ParameterAnnotationProcessor", ")", "processor", ")", ";", "}", "</s>"]
["<s>", "void", "process", "(", "E", "annotation", ",", "MethodMetadata", "metadata", ")", ";", "</s>"]
["<s>", "void", "process", "(", "E", "annotation", ",", "MethodMetadata", "metadata", ",", "int", "paramIndex", ")", ";", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "private", "GuardedAnnotationProcessor", "(", "Predicate", "predicate", ",", "DeclarativeContract", ".", "AnnotationProcessor", "processor", ")", "{", "this", ".", "predicate", "=", "predicate", ";", "this", ".", "processor", "=", "processor", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "process", "(", "Annotation", "annotation", ",", "MethodMetadata", "metadata", ")", "{", "processor", ".", "process", "(", "annotation", ",", "metadata", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "test", "(", "Annotation", "t", ")", "{", "return", "predicate", ".", "test", "(", "t", ")", ";", "}", "</s>"]
["<s>", "private", "Util", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "void", "checkArgument", "(", "boolean", "expression", ",", "String", "errorMessageTemplate", ",", "Object", ".", ".", ".", "errorMessageArgs", ")", "{", "if", "(", "!", "expression", ")", "{", "throw", "new", "IllegalArgumentException", "(", "format", "(", "errorMessageTemplate", ",", "errorMessageArgs", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "<", "T", ">", "T", "checkNotNull", "(", "T", "reference", ",", "String", "errorMessageTemplate", ",", "Object", ".", ".", ".", "errorMessageArgs", ")", "{", "if", "(", "reference", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", "format", "(", "errorMessageTemplate", ",", "errorMessageArgs", ")", ")", ";", "}", "return", "reference", ";", "}", "</s>"]
["<s>", "public", "static", "void", "checkState", "(", "boolean", "expression", ",", "String", "errorMessageTemplate", ",", "Object", ".", ".", ".", "errorMessageArgs", ")", "{", "if", "(", "!", "expression", ")", "{", "throw", "new", "IllegalStateException", "(", "format", "(", "errorMessageTemplate", ",", "errorMessageArgs", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "boolean", "isDefault", "(", "Method", "method", ")", "{", "final", "int", "SYNTHETIC", "=", "<NUM_LIT>", ";", "return", "(", "(", "method", ".", "getModifiers", "(", ")", "&", "(", "Modifier", ".", "ABSTRACT", "|", "Modifier", ".", "PUBLIC", "|", "Modifier", ".", "STATIC", "|", "SYNTHETIC", ")", ")", "=", "=", "Modifier", ".", "PUBLIC", ")", "&", "&", "method", ".", "getDeclaringClass", "(", ")", ".", "isInterface", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "emptyToNull", "(", "String", "string", ")", "{", "return", "string", "=", "=", "null", "|", "|", "string", ".", "isEmpty", "(", ")", "?", "null", ":", "string", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "static", "<", "T", ">", "T", "[", "]", "removeValues", "(", "T", "[", "]", "values", ",", "Predicate", "<", "T", ">", "shouldRemove", ",", "Class", "<", "T", ">", "type", ")", "{", "Collection", "<", "T", ">", "collection", "=", "new", "ArrayList", "<", ">", "(", "values", ".", "length", ")", ";", "for", "(", "T", "value", ":", "values", ")", "{", "if", "(", "shouldRemove", ".", "negate", "(", ")", ".", "test", "(", "value", ")", ")", "{", "collection", ".", "add", "(", "value", ")", ";", "}", "}", "T", "[", "]", "array", "=", "(", "T", "[", "]", ")", "Array", ".", "newInstance", "(", "type", ",", "collection", ".", "size", "(", ")", ")", ";", "return", "collection", ".", "toArray", "(", "array", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "static", "<", "T", ">", "T", "[", "]", "toArray", "(", "Iterable", "<", "?", "extends", "T", ">", "iterable", ",", "Class", "<", "T", ">", "type", ")", "{", "Collection", "<", "T", ">", "collection", ";", "if", "(", "iterable", "instanceof", "Collection", ")", "{", "collection", "=", "(", "Collection", "<", "T", ">", ")", "iterable", ";", "}", "else", "{", "collection", "=", "new", "ArrayList", "<", "T", ">", "(", ")", ";", "for", "(", "T", "element", ":", "iterable", ")", "{", "collection", ".", "add", "(", "element", ")", ";", "}", "}", "T", "[", "]", "array", "=", "(", "T", "[", "]", ")", "Array", ".", "newInstance", "(", "type", ",", "collection", ".", "size", "(", ")", ")", ";", "return", "collection", ".", "toArray", "(", "array", ")", ";", "}", "</s>"]
["<s>", "public", "static", "<", "T", ">", "Collection", "<", "T", ">", "valuesOrEmpty", "(", "Map", "<", "String", ",", "Collection", "<", "T", ">", ">", "map", ",", "String", "key", ")", "{", "Collection", "<", "T", ">", "values", "=", "map", ".", "get", "(", "key", ")", ";", "return", "values", "!", "=", "null", "?", "values", ":", "Collections", ".", "emptyList", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "ensureClosed", "(", "Closeable", "closeable", ")", "{", "if", "(", "closeable", "!", "=", "null", ")", "{", "try", "{", "closeable", ".", "close", "(", ")", ";", "}", "catch", "(", "IOException", "ignored", ")", "{", "}", "}", "}", "</s>"]
["<s>", "public", "static", "Type", "resolveLastTypeParameter", "(", "Type", "genericContext", ",", "Class", "<", "?", ">", "supertype", ")", "throws", "IllegalStateException", "{", "Type", "resolvedSuperType", "=", "Types", ".", "getSupertype", "(", "genericContext", ",", "Types", ".", "getRawType", "(", "genericContext", ")", ",", "supertype", ")", ";", "checkState", "(", "resolvedSuperType", "instanceof", "ParameterizedType", ",", "\"", "<STR_LIT>", "\"", ",", "genericContext", ",", "supertype", ")", ";", "Type", "[", "]", "types", "=", "ParameterizedType", ".", "class", ".", "cast", "(", "resolvedSuperType", ")", ".", "getActualTypeArguments", "(", ")", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "types", ".", "length", ";", "i", "+", "+", ")", "{", "Type", "type", "=", "types", "[", "i", "]", ";", "if", "(", "type", "instanceof", "WildcardType", ")", "{", "types", "[", "i", "]", "=", "(", "(", "WildcardType", ")", "type", ")", ".", "getUpperBounds", "(", ")", "[", "0", "]", ";", "}", "}", "return", "types", "[", "types", ".", "length", "-", "1", "]", ";", "}", "</s>"]
["<s>", "public", "static", "Object", "emptyValueOf", "(", "Type", "type", ")", "{", "return", "EMPTIES", ".", "getOrDefault", "(", "Types", ".", "getRawType", "(", "type", ")", ",", "(", ")", "-", ">", "null", ")", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "toString", "(", "Reader", "reader", ")", "throws", "IOException", "{", "if", "(", "reader", "=", "=", "null", ")", "{", "return", "null", ";", "}", "try", "{", "StringBuilder", "to", "=", "new", "StringBuilder", "(", ")", ";", "CharBuffer", "charBuf", "=", "CharBuffer", ".", "allocate", "(", "BUF_SIZE", ")", ";", "Buffer", "buf", "=", "charBuf", ";", "while", "(", "reader", ".", "read", "(", "charBuf", ")", "!", "=", "-", "1", ")", "{", "buf", ".", "flip", "(", ")", ";", "to", ".", "append", "(", "charBuf", ")", ";", "buf", ".", "clear", "(", ")", ";", "}", "return", "to", ".", "toString", "(", ")", ";", "}", "finally", "{", "ensureClosed", "(", "reader", ")", ";", "}", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "toByteArray", "(", "InputStream", "in", ")", "throws", "IOException", "{", "checkNotNull", "(", "in", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "ByteArrayOutputStream", "out", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "copy", "(", "in", ",", "out", ")", ";", "return", "out", ".", "toByteArray", "(", ")", ";", "}", "finally", "{", "ensureClosed", "(", "in", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "long", "copy", "(", "InputStream", "from", ",", "OutputStream", "to", ")", "throws", "IOException", "{", "checkNotNull", "(", "from", ",", "\"", "<STR_LIT>", "\"", ")", ";", "checkNotNull", "(", "to", ",", "\"", "<STR_LIT>", "\"", ")", ";", "byte", "[", "]", "buf", "=", "new", "byte", "[", "BUF_SIZE", "]", ";", "long", "total", "=", "0", ";", "while", "(", "true", ")", "{", "int", "r", "=", "from", ".", "read", "(", "buf", ")", ";", "if", "(", "r", "=", "=", "-", "1", ")", "{", "break", ";", "}", "to", ".", "write", "(", "buf", ",", "0", ",", "r", ")", ";", "total", "+", "=", "r", ";", "}", "return", "total", ";", "}", "</s>"]
["<s>", "public", "static", "String", "decodeOrDefault", "(", "byte", "[", "]", "data", ",", "Charset", "charset", ",", "String", "defaultValue", ")", "{", "if", "(", "data", "=", "=", "null", ")", "{", "return", "defaultValue", ";", "}", "checkNotNull", "(", "charset", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "return", "charset", ".", "newDecoder", "(", ")", ".", "decode", "(", "ByteBuffer", ".", "wrap", "(", "data", ")", ")", ".", "toString", "(", ")", ";", "}", "catch", "(", "CharacterCodingException", "ex", ")", "{", "return", "defaultValue", ";", "}", "}", "</s>"]
["<s>", "public", "static", "boolean", "isNotBlank", "(", "String", "value", ")", "{", "return", "value", "!", "=", "null", "&", "&", "!", "value", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isBlank", "(", "String", "value", ")", "{", "return", "value", "=", "=", "null", "|", "|", "value", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "void", "continueOrPropagate", "(", "RetryableException", "e", ")", ";", "</s>"]
["<s>", "Retryer", "clone", "(", ")", ";", "</s>"]
["<s>", "public", "Default", "(", ")", "{", "this", "(", "<NUM_LIT:100>", ",", "SECONDS", ".", "toMillis", "(", "1", ")", ",", "<NUM_LIT:5>", ")", ";", "}", "</s>"]
["<s>", "public", "Default", "(", "long", "period", ",", "long", "maxPeriod", ",", "int", "maxAttempts", ")", "{", "this", ".", "period", "=", "period", ";", "this", ".", "maxPeriod", "=", "maxPeriod", ";", "this", ".", "maxAttempts", "=", "maxAttempts", ";", "this", ".", "attempt", "=", "1", ";", "}", "</s>"]
["<s>", "protected", "long", "currentTimeMillis", "(", ")", "{", "return", "System", ".", "currentTimeMillis", "(", ")", ";", "}", "</s>"]
["<s>", "public", "void", "continueOrPropagate", "(", "RetryableException", "e", ")", "{", "if", "(", "attempt", "+", "+", ">", "=", "maxAttempts", ")", "{", "throw", "e", ";", "}", "long", "interval", ";", "if", "(", "e", ".", "retryAfter", "(", ")", "!", "=", "null", ")", "{", "interval", "=", "e", ".", "retryAfter", "(", ")", ".", "getTime", "(", ")", "-", "currentTimeMillis", "(", ")", ";", "if", "(", "interval", ">", "maxPeriod", ")", "{", "interval", "=", "maxPeriod", ";", "}", "if", "(", "interval", "<", "0", ")", "{", "return", ";", "}", "}", "else", "{", "interval", "=", "nextMaxInterval", "(", ")", ";", "}", "try", "{", "Thread", ".", "sleep", "(", "interval", ")", ";", "}", "catch", "(", "InterruptedException", "ignored", ")", "{", "Thread", ".", "currentThread", "(", ")", ".", "interrupt", "(", ")", ";", "throw", "e", ";", "}", "sleptForMillis", "+", "=", "interval", ";", "}", "</s>"]
["<s>", "long", "nextMaxInterval", "(", ")", "{", "long", "interval", "=", "(", "long", ")", "(", "period", "*", "Math", ".", "pow", "(", "<NUM_LIT>", ",", "attempt", "-", "1", ")", ")", ";", "return", "interval", ">", "maxPeriod", "?", "maxPeriod", ":", "interval", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Retryer", "clone", "(", ")", "{", "return", "new", "Default", "(", "period", ",", "maxPeriod", ",", "maxAttempts", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "continueOrPropagate", "(", "RetryableException", "e", ")", "{", "throw", "e", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Retryer", "clone", "(", ")", "{", "return", "this", ";", "}", "</s>"]
["<s>", "private", "Response", "(", "Builder", "builder", ")", "{", "checkState", "(", "builder", ".", "request", "!", "=", "null", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "status", "=", "builder", ".", "status", ";", "this", ".", "request", "=", "builder", ".", "request", ";", "this", ".", "reason", "=", "builder", ".", "reason", ";", "this", ".", "headers", "=", "(", "builder", ".", "headers", "!", "=", "null", ")", "?", "Collections", ".", "unmodifiableMap", "(", "caseInsensitiveCopyOf", "(", "builder", ".", "headers", ")", ")", ":", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "this", ".", "body", "=", "builder", ".", "body", ";", "}", "</s>"]
["<s>", "public", "Builder", "toBuilder", "(", ")", "{", "return", "new", "Builder", "(", "this", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Builder", "builder", "(", ")", "{", "return", "new", "Builder", "(", ")", ";", "}", "</s>"]
["<s>", "Builder", "(", ")", "{", "}", "</s>"]
["<s>", "Builder", "(", "Response", "source", ")", "{", "this", ".", "status", "=", "source", ".", "status", ";", "this", ".", "reason", "=", "source", ".", "reason", ";", "this", ".", "headers", "=", "source", ".", "headers", ";", "this", ".", "body", "=", "source", ".", "body", ";", "this", ".", "request", "=", "source", ".", "request", ";", "}", "</s>"]
["<s>", "public", "Builder", "status", "(", "int", "status", ")", "{", "this", ".", "status", "=", "status", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "reason", "(", "String", "reason", ")", "{", "this", ".", "reason", "=", "reason", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "headers", "(", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ")", "{", "this", ".", "headers", "=", "headers", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "body", "(", "Body", "body", ")", "{", "this", ".", "body", "=", "body", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "body", "(", "InputStream", "inputStream", ",", "Integer", "length", ")", "{", "this", ".", "body", "=", "InputStreamBody", ".", "orNull", "(", "inputStream", ",", "length", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "body", "(", "byte", "[", "]", "data", ")", "{", "this", ".", "body", "=", "ByteArrayBody", ".", "orNull", "(", "data", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "body", "(", "String", "text", ",", "Charset", "charset", ")", "{", "this", ".", "body", "=", "ByteArrayBody", ".", "orNull", "(", "text", ",", "charset", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "request", "(", "Request", "request", ")", "{", "checkNotNull", "(", "request", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "request", "=", "request", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Experimental", "public", "Builder", "requestTemplate", "(", "RequestTemplate", "requestTemplate", ")", "{", "this", ".", "requestTemplate", "=", "requestTemplate", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Response", "build", "(", ")", "{", "return", "new", "Response", "(", "this", ")", ";", "}", "</s>"]
["<s>", "public", "int", "status", "(", ")", "{", "return", "status", ";", "}", "</s>"]
["<s>", "public", "String", "reason", "(", ")", "{", "return", "reason", ";", "}", "</s>"]
["<s>", "public", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "(", ")", "{", "return", "headers", ";", "}", "</s>"]
["<s>", "public", "Body", "body", "(", ")", "{", "return", "body", ";", "}", "</s>"]
["<s>", "public", "Request", "request", "(", ")", "{", "return", "request", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "StringBuilder", "builder", "=", "new", "StringBuilder", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "status", ")", ";", "if", "(", "reason", "!", "=", "null", ")", "builder", ".", "append", "(", "<CHAR_LIT>", ")", ".", "append", "(", "reason", ")", ";", "builder", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "for", "(", "String", "field", ":", "headers", ".", "keySet", "(", ")", ")", "{", "for", "(", "String", "value", ":", "valuesOrEmpty", "(", "headers", ",", "field", ")", ")", "{", "builder", ".", "append", "(", "field", ")", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "value", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "}", "}", "if", "(", "body", "!", "=", "null", ")", "builder", ".", "append", "(", "<STR_LIT:\\n>", ")", ".", "append", "(", "body", ")", ";", "return", "builder", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "{", "Util", ".", "ensureClosed", "(", "body", ")", ";", "}", "</s>"]
["<s>", "Integer", "length", "(", ")", ";", "</s>"]
["<s>", "boolean", "isRepeatable", "(", ")", ";", "</s>"]
["<s>", "InputStream", "asInputStream", "(", ")", "throws", "IOException", ";", "</s>"]
["<s>", "@", "Deprecated", "default", "Reader", "asReader", "(", ")", "throws", "IOException", "{", "return", "asReader", "(", "StandardCharsets", ".", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "Reader", "asReader", "(", "Charset", "charset", ")", "throws", "IOException", ";", "</s>"]
["<s>", "private", "InputStreamBody", "(", "InputStream", "inputStream", ",", "Integer", "length", ")", "{", "this", ".", "inputStream", "=", "inputStream", ";", "this", ".", "length", "=", "length", ";", "}", "</s>"]
["<s>", "private", "static", "Body", "orNull", "(", "InputStream", "inputStream", ",", "Integer", "length", ")", "{", "if", "(", "inputStream", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "new", "InputStreamBody", "(", "inputStream", ",", "length", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Integer", "length", "(", ")", "{", "return", "length", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "asInputStream", "(", ")", "{", "return", "inputStream", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Reader", "asReader", "(", ")", "{", "return", "new", "InputStreamReader", "(", "inputStream", ",", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Reader", "asReader", "(", "Charset", "charset", ")", "throws", "IOException", "{", "checkNotNull", "(", "charset", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "new", "InputStreamReader", "(", "inputStream", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "inputStream", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "try", "{", "return", "new", "String", "(", "toByteArray", "(", "inputStream", ")", ",", "UTF_8", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "return", "super", ".", "toString", "(", ")", ";", "}", "}", "</s>"]
["<s>", "public", "ByteArrayBody", "(", "byte", "[", "]", "data", ")", "{", "this", ".", "data", "=", "data", ";", "}", "</s>"]
["<s>", "private", "static", "Body", "orNull", "(", "byte", "[", "]", "data", ")", "{", "if", "(", "data", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "new", "ByteArrayBody", "(", "data", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Body", "orNull", "(", "String", "text", ",", "Charset", "charset", ")", "{", "if", "(", "text", "=", "=", "null", ")", "{", "return", "null", ";", "}", "checkNotNull", "(", "charset", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "new", "ByteArrayBody", "(", "text", ".", "getBytes", "(", "charset", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Integer", "length", "(", ")", "{", "return", "data", ".", "length", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "true", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "asInputStream", "(", ")", "throws", "IOException", "{", "return", "new", "ByteArrayInputStream", "(", "data", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Reader", "asReader", "(", ")", "throws", "IOException", "{", "return", "new", "InputStreamReader", "(", "asInputStream", "(", ")", ",", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Reader", "asReader", "(", "Charset", "charset", ")", "throws", "IOException", "{", "checkNotNull", "(", "charset", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "new", "InputStreamReader", "(", "asInputStream", "(", ")", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "decodeOrDefault", "(", "data", ",", "UTF_8", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "caseInsensitiveCopyOf", "(", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ")", "{", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "result", "=", "new", "TreeMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", "String", ".", "CASE_INSENSITIVE_ORDER", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "Collection", "<", "String", ">", ">", "entry", ":", "headers", ".", "entrySet", "(", ")", ")", "{", "String", "headerName", "=", "entry", ".", "getKey", "(", ")", ";", "if", "(", "!", "result", ".", "containsKey", "(", "headerName", ")", ")", "{", "result", ".", "put", "(", "headerName", ".", "toLowerCase", "(", "Locale", ".", "ROOT", ")", ",", "new", "LinkedList", "<", "String", ">", "(", ")", ")", ";", "}", "result", ".", "get", "(", "headerName", ")", ".", "addAll", "(", "entry", ".", "getValue", "(", ")", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "Response", "map", "(", "Response", "response", ",", "Type", "type", ")", ";", "</s>"]
["<s>", "private", "SynchronousMethodHandler", "(", "Target", "<", "?", ">", "target", ",", "Client", "client", ",", "Retryer", "retryer", ",", "List", "<", "RequestInterceptor", ">", "requestInterceptors", ",", "Logger", "logger", ",", "Logger", ".", "Level", "logLevel", ",", "MethodMetadata", "metadata", ",", "RequestTemplate", ".", "Factory", "buildTemplateFromArgs", ",", "Options", "options", ",", "Decoder", "decoder", ",", "ErrorDecoder", "errorDecoder", ",", "boolean", "decode404", ",", "boolean", "closeAfterDecode", ",", "ExceptionPropagationPolicy", "propagationPolicy", ",", "boolean", "forceDecoding", ")", "{", "this", ".", "target", "=", "checkNotNull", "(", "target", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "client", "=", "checkNotNull", "(", "client", ",", "\"", "<STR_LIT>", "\"", ",", "target", ")", ";", "this", ".", "retryer", "=", "checkNotNull", "(", "retryer", ",", "\"", "<STR_LIT>", "\"", ",", "target", ")", ";", "this", ".", "requestInterceptors", "=", "checkNotNull", "(", "requestInterceptors", ",", "\"", "<STR_LIT>", "\"", ",", "target", ")", ";", "this", ".", "logger", "=", "checkNotNull", "(", "logger", ",", "\"", "<STR_LIT>", "\"", ",", "target", ")", ";", "this", ".", "logLevel", "=", "checkNotNull", "(", "logLevel", ",", "\"", "<STR_LIT>", "\"", ",", "target", ")", ";", "this", ".", "metadata", "=", "checkNotNull", "(", "metadata", ",", "\"", "<STR_LIT>", "\"", ",", "target", ")", ";", "this", ".", "buildTemplateFromArgs", "=", "checkNotNull", "(", "buildTemplateFromArgs", ",", "\"", "<STR_LIT>", "\"", ",", "target", ")", ";", "this", ".", "options", "=", "checkNotNull", "(", "options", ",", "\"", "<STR_LIT>", "\"", ",", "target", ")", ";", "this", ".", "propagationPolicy", "=", "propagationPolicy", ";", "if", "(", "forceDecoding", ")", "{", "this", ".", "decoder", "=", "decoder", ";", "this", ".", "asyncResponseHandler", "=", "null", ";", "}", "else", "{", "this", ".", "decoder", "=", "null", ";", "this", ".", "asyncResponseHandler", "=", "new", "AsyncResponseHandler", "(", "logLevel", ",", "logger", ",", "decoder", ",", "errorDecoder", ",", "decode404", ",", "closeAfterDecode", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "invoke", "(", "Object", "[", "]", "argv", ")", "throws", "Throwable", "{", "RequestTemplate", "template", "=", "buildTemplateFromArgs", ".", "create", "(", "argv", ")", ";", "Options", "options", "=", "findOptions", "(", "argv", ")", ";", "Retryer", "retryer", "=", "this", ".", "retryer", ".", "clone", "(", ")", ";", "while", "(", "true", ")", "{", "try", "{", "return", "executeAndDecode", "(", "template", ",", "options", ")", ";", "}", "catch", "(", "RetryableException", "e", ")", "{", "try", "{", "retryer", ".", "continueOrPropagate", "(", "e", ")", ";", "}", "catch", "(", "RetryableException", "th", ")", "{", "Throwable", "cause", "=", "th", ".", "getCause", "(", ")", ";", "if", "(", "propagationPolicy", "=", "=", "UNWRAP", "&", "&", "cause", "!", "=", "null", ")", "{", "throw", "cause", ";", "}", "else", "{", "throw", "th", ";", "}", "}", "if", "(", "logLevel", "!", "=", "Logger", ".", "Level", ".", "NONE", ")", "{", "logger", ".", "logRetry", "(", "metadata", ".", "configKey", "(", ")", ",", "logLevel", ")", ";", "}", "continue", ";", "}", "}", "}", "</s>"]
["<s>", "Object", "executeAndDecode", "(", "RequestTemplate", "template", ",", "Options", "options", ")", "throws", "Throwable", "{", "Request", "request", "=", "targetRequest", "(", "template", ")", ";", "if", "(", "logLevel", "!", "=", "Logger", ".", "Level", ".", "NONE", ")", "{", "logger", ".", "logRequest", "(", "metadata", ".", "configKey", "(", ")", ",", "logLevel", ",", "request", ")", ";", "}", "Response", "response", ";", "long", "start", "=", "System", ".", "nanoTime", "(", ")", ";", "try", "{", "response", "=", "client", ".", "execute", "(", "request", ",", "options", ")", ";", "response", "=", "response", ".", "toBuilder", "(", ")", ".", "request", "(", "request", ")", ".", "requestTemplate", "(", "template", ")", ".", "build", "(", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "if", "(", "logLevel", "!", "=", "Logger", ".", "Level", ".", "NONE", ")", "{", "logger", ".", "logIOException", "(", "metadata", ".", "configKey", "(", ")", ",", "logLevel", ",", "e", ",", "elapsedTime", "(", "start", ")", ")", ";", "}", "throw", "errorExecuting", "(", "request", ",", "e", ")", ";", "}", "long", "elapsedTime", "=", "TimeUnit", ".", "NANOSECONDS", ".", "toMillis", "(", "System", ".", "nanoTime", "(", ")", "-", "start", ")", ";", "if", "(", "decoder", "!", "=", "null", ")", "return", "decoder", ".", "decode", "(", "response", ",", "metadata", ".", "returnType", "(", ")", ")", ";", "CompletableFuture", "<", "Object", ">", "resultFuture", "=", "new", "CompletableFuture", "<", ">", "(", ")", ";", "asyncResponseHandler", ".", "handleResponse", "(", "resultFuture", ",", "metadata", ".", "configKey", "(", ")", ",", "response", ",", "metadata", ".", "returnType", "(", ")", ",", "elapsedTime", ")", ";", "try", "{", "if", "(", "!", "resultFuture", ".", "isDone", "(", ")", ")", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "resultFuture", ".", "join", "(", ")", ";", "}", "catch", "(", "CompletionException", "e", ")", "{", "Throwable", "cause", "=", "e", ".", "getCause", "(", ")", ";", "if", "(", "cause", "!", "=", "null", ")", "throw", "cause", ";", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "long", "elapsedTime", "(", "long", "start", ")", "{", "return", "TimeUnit", ".", "NANOSECONDS", ".", "toMillis", "(", "System", ".", "nanoTime", "(", ")", "-", "start", ")", ";", "}", "</s>"]
["<s>", "Request", "targetRequest", "(", "RequestTemplate", "template", ")", "{", "for", "(", "RequestInterceptor", "interceptor", ":", "requestInterceptors", ")", "{", "interceptor", ".", "apply", "(", "template", ")", ";", "}", "return", "target", ".", "apply", "(", "template", ")", ";", "}", "</s>"]
["<s>", "Options", "findOptions", "(", "Object", "[", "]", "argv", ")", "{", "if", "(", "argv", "=", "=", "null", "|", "|", "argv", ".", "length", "=", "=", "0", ")", "{", "return", "this", ".", "options", ";", "}", "return", "Stream", ".", "of", "(", "argv", ")", ".", "filter", "(", "Options", ".", "class", ":", ":", "isInstance", ")", ".", "map", "(", "Options", ".", "class", ":", ":", "cast", ")", ".", "findFirst", "(", ")", ".", "orElse", "(", "this", ".", "options", ")", ";", "}", "</s>"]
["<s>", "Factory", "(", "Client", "client", ",", "Retryer", "retryer", ",", "List", "<", "RequestInterceptor", ">", "requestInterceptors", ",", "Logger", "logger", ",", "Logger", ".", "Level", "logLevel", ",", "boolean", "decode404", ",", "boolean", "closeAfterDecode", ",", "ExceptionPropagationPolicy", "propagationPolicy", ",", "boolean", "forceDecoding", ")", "{", "this", ".", "client", "=", "checkNotNull", "(", "client", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "retryer", "=", "checkNotNull", "(", "retryer", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "requestInterceptors", "=", "checkNotNull", "(", "requestInterceptors", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "logger", "=", "checkNotNull", "(", "logger", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "logLevel", "=", "checkNotNull", "(", "logLevel", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "decode404", "=", "decode404", ";", "this", ".", "closeAfterDecode", "=", "closeAfterDecode", ";", "this", ".", "propagationPolicy", "=", "propagationPolicy", ";", "this", ".", "forceDecoding", "=", "forceDecoding", ";", "}", "</s>"]
["<s>", "public", "MethodHandler", "create", "(", "Target", "<", "?", ">", "target", ",", "MethodMetadata", "md", ",", "RequestTemplate", ".", "Factory", "buildTemplateFromArgs", ",", "Options", "options", ",", "Decoder", "decoder", ",", "ErrorDecoder", "errorDecoder", ")", "{", "return", "new", "SynchronousMethodHandler", "(", "target", ",", "client", ",", "retryer", ",", "requestInterceptors", ",", "logger", ",", "logLevel", ",", "md", ",", "buildTemplateFromArgs", ",", "options", ",", "decoder", ",", "errorDecoder", ",", "decode404", ",", "closeAfterDecode", ",", "propagationPolicy", ",", "forceDecoding", ")", ";", "}", "</s>"]
["<s>", "protected", "static", "String", "methodTag", "(", "String", "configKey", ")", "{", "return", "new", "StringBuilder", "(", ")", ".", "append", "(", "<CHAR_LIT:[>", ")", ".", "append", "(", "configKey", ".", "substring", "(", "0", ",", "configKey", ".", "indexOf", "(", "<CHAR_LIT:(>", ")", ")", ")", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "abstract", "void", "log", "(", "String", "configKey", ",", "String", "format", ",", "Object", ".", ".", ".", "args", ")", ";", "</s>"]
["<s>", "protected", "void", "logRequest", "(", "String", "configKey", ",", "Level", "logLevel", ",", "Request", "request", ")", "{", "log", "(", "configKey", ",", "\"", "<STR_LIT>", "\"", ",", "request", ".", "httpMethod", "(", ")", ".", "name", "(", ")", ",", "request", ".", "url", "(", ")", ")", ";", "if", "(", "logLevel", ".", "ordinal", "(", ")", ">", "=", "Level", ".", "HEADERS", ".", "ordinal", "(", ")", ")", "{", "for", "(", "String", "field", ":", "request", ".", "headers", "(", ")", ".", "keySet", "(", ")", ")", "{", "for", "(", "String", "value", ":", "valuesOrEmpty", "(", "request", ".", "headers", "(", ")", ",", "field", ")", ")", "{", "log", "(", "configKey", ",", "\"", "<STR_LIT>", "\"", ",", "field", ",", "value", ")", ";", "}", "}", "int", "bodyLength", "=", "0", ";", "if", "(", "request", ".", "body", "(", ")", "!", "=", "null", ")", "{", "bodyLength", "=", "request", ".", "length", "(", ")", ";", "if", "(", "logLevel", ".", "ordinal", "(", ")", ">", "=", "Level", ".", "FULL", ".", "ordinal", "(", ")", ")", "{", "String", "bodyText", "=", "request", ".", "charset", "(", ")", "!", "=", "null", "?", "new", "String", "(", "request", ".", "body", "(", ")", ",", "request", ".", "charset", "(", ")", ")", ":", "null", ";", "log", "(", "configKey", ",", "\"", "\"", ")", ";", "log", "(", "configKey", ",", "\"", "<STR_LIT:%s>", "\"", ",", "bodyText", "!", "=", "null", "?", "bodyText", ":", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "log", "(", "configKey", ",", "\"", "<STR_LIT>", "\"", ",", "bodyLength", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "void", "logRetry", "(", "String", "configKey", ",", "Level", "logLevel", ")", "{", "log", "(", "configKey", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "protected", "Response", "logAndRebufferResponse", "(", "String", "configKey", ",", "Level", "logLevel", ",", "Response", "response", ",", "long", "elapsedTime", ")", "throws", "IOException", "{", "String", "reason", "=", "response", ".", "reason", "(", ")", "!", "=", "null", "&", "&", "logLevel", ".", "compareTo", "(", "Level", ".", "NONE", ")", ">", "0", "?", "\"", "\"", "+", "response", ".", "reason", "(", ")", ":", "\"", "\"", ";", "int", "status", "=", "response", ".", "status", "(", ")", ";", "log", "(", "configKey", ",", "\"", "<STR_LIT>", "\"", ",", "status", ",", "reason", ",", "elapsedTime", ")", ";", "if", "(", "logLevel", ".", "ordinal", "(", ")", ">", "=", "Level", ".", "HEADERS", ".", "ordinal", "(", ")", ")", "{", "for", "(", "String", "field", ":", "response", ".", "headers", "(", ")", ".", "keySet", "(", ")", ")", "{", "for", "(", "String", "value", ":", "valuesOrEmpty", "(", "response", ".", "headers", "(", ")", ",", "field", ")", ")", "{", "log", "(", "configKey", ",", "\"", "<STR_LIT>", "\"", ",", "field", ",", "value", ")", ";", "}", "}", "int", "bodyLength", "=", "0", ";", "if", "(", "response", ".", "body", "(", ")", "!", "=", "null", "&", "&", "!", "(", "status", "=", "=", "<NUM_LIT>", "|", "|", "status", "=", "=", "<NUM_LIT>", ")", ")", "{", "if", "(", "logLevel", ".", "ordinal", "(", ")", ">", "=", "Level", ".", "FULL", ".", "ordinal", "(", ")", ")", "{", "log", "(", "configKey", ",", "\"", "\"", ")", ";", "}", "byte", "[", "]", "bodyData", "=", "Util", ".", "toByteArray", "(", "response", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ")", ";", "bodyLength", "=", "bodyData", ".", "length", ";", "if", "(", "logLevel", ".", "ordinal", "(", ")", ">", "=", "Level", ".", "FULL", ".", "ordinal", "(", ")", "&", "&", "bodyLength", ">", "0", ")", "{", "log", "(", "configKey", ",", "\"", "<STR_LIT:%s>", "\"", ",", "decodeOrDefault", "(", "bodyData", ",", "UTF_8", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "log", "(", "configKey", ",", "\"", "<STR_LIT>", "\"", ",", "bodyLength", ")", ";", "return", "response", ".", "toBuilder", "(", ")", ".", "body", "(", "bodyData", ")", ".", "build", "(", ")", ";", "}", "else", "{", "log", "(", "configKey", ",", "\"", "<STR_LIT>", "\"", ",", "bodyLength", ")", ";", "}", "}", "return", "response", ";", "}", "</s>"]
["<s>", "protected", "IOException", "logIOException", "(", "String", "configKey", ",", "Level", "logLevel", ",", "IOException", "ioe", ",", "long", "elapsedTime", ")", "{", "log", "(", "configKey", ",", "\"", "<STR_LIT>", "\"", ",", "ioe", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ",", "ioe", ".", "getMessage", "(", ")", ",", "elapsedTime", ")", ";", "if", "(", "logLevel", ".", "ordinal", "(", ")", ">", "=", "Level", ".", "FULL", ".", "ordinal", "(", ")", ")", "{", "StringWriter", "sw", "=", "new", "StringWriter", "(", ")", ";", "ioe", ".", "printStackTrace", "(", "new", "PrintWriter", "(", "sw", ")", ")", ";", "log", "(", "configKey", ",", "\"", "<STR_LIT:%s>", "\"", ",", "sw", ".", "toString", "(", ")", ")", ";", "log", "(", "configKey", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "ioe", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "log", "(", "String", "configKey", ",", "String", "format", ",", "Object", ".", ".", ".", "args", ")", "{", "System", ".", "err", ".", "printf", "(", "methodTag", "(", "configKey", ")", "+", "format", "+", "\"", "<STR_LIT>", "\"", ",", "args", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "JavaLogger", "(", ")", "{", "logger", "=", "java", ".", "util", ".", "logging", ".", "Logger", ".", "getLogger", "(", "Logger", ".", "class", ".", "getName", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "JavaLogger", "(", "String", "loggerName", ")", "{", "logger", "=", "java", ".", "util", ".", "logging", ".", "Logger", ".", "getLogger", "(", "loggerName", ")", ";", "}", "</s>"]
["<s>", "public", "JavaLogger", "(", "Class", "<", "?", ">", "clazz", ")", "{", "logger", "=", "java", ".", "util", ".", "logging", ".", "Logger", ".", "getLogger", "(", "clazz", ".", "getName", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "logRequest", "(", "String", "configKey", ",", "Level", "logLevel", ",", "Request", "request", ")", "{", "if", "(", "logger", ".", "isLoggable", "(", "java", ".", "util", ".", "logging", ".", "Level", ".", "FINE", ")", ")", "{", "super", ".", "logRequest", "(", "configKey", ",", "logLevel", ",", "request", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "Response", "logAndRebufferResponse", "(", "String", "configKey", ",", "Level", "logLevel", ",", "Response", "response", ",", "long", "elapsedTime", ")", "throws", "IOException", "{", "if", "(", "logger", ".", "isLoggable", "(", "java", ".", "util", ".", "logging", ".", "Level", ".", "FINE", ")", ")", "{", "return", "super", ".", "logAndRebufferResponse", "(", "configKey", ",", "logLevel", ",", "response", ",", "elapsedTime", ")", ";", "}", "return", "response", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "log", "(", "String", "configKey", ",", "String", "format", ",", "Object", ".", ".", ".", "args", ")", "{", "if", "(", "logger", ".", "isLoggable", "(", "java", ".", "util", ".", "logging", ".", "Level", ".", "FINE", ")", ")", "{", "logger", ".", "fine", "(", "String", ".", "format", "(", "methodTag", "(", "configKey", ")", "+", "format", ",", "args", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "JavaLogger", "appendToFile", "(", "String", "logfile", ")", "{", "logger", ".", "setLevel", "(", "java", ".", "util", ".", "logging", ".", "Level", ".", "FINE", ")", ";", "try", "{", "FileHandler", "handler", "=", "new", "FileHandler", "(", "logfile", ",", "true", ")", ";", "handler", ".", "setFormatter", "(", "new", "SimpleFormatter", "(", ")", "{", "@", "Override", "public", "String", "format", "(", "LogRecord", "record", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "record", ".", "getMessage", "(", ")", ")", ";", "}", "}", ")", ";", "logger", ".", "addHandler", "(", "handler", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "format", "(", "LogRecord", "record", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "record", ".", "getMessage", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "logRequest", "(", "String", "configKey", ",", "Level", "logLevel", ",", "Request", "request", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "protected", "Response", "logAndRebufferResponse", "(", "String", "configKey", ",", "Level", "logLevel", ",", "Response", "response", ",", "long", "elapsedTime", ")", "throws", "IOException", "{", "return", "response", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "log", "(", "String", "configKey", ",", "String", "format", ",", "Object", ".", ".", ".", "args", ")", "{", "}", "</s>"]
["<s>", "public", "RetryableException", "(", "int", "status", ",", "String", "message", ",", "HttpMethod", "httpMethod", ",", "Throwable", "cause", ",", "Date", "retryAfter", ",", "Request", "request", ")", "{", "super", "(", "status", ",", "message", ",", "request", ",", "cause", ")", ";", "this", ".", "httpMethod", "=", "httpMethod", ";", "this", ".", "retryAfter", "=", "retryAfter", "!", "=", "null", "?", "retryAfter", ".", "getTime", "(", ")", ":", "null", ";", "}", "</s>"]
["<s>", "public", "RetryableException", "(", "int", "status", ",", "String", "message", ",", "HttpMethod", "httpMethod", ",", "Date", "retryAfter", ",", "Request", "request", ")", "{", "super", "(", "status", ",", "message", ",", "request", ")", ";", "this", ".", "httpMethod", "=", "httpMethod", ";", "this", ".", "retryAfter", "=", "retryAfter", "!", "=", "null", "?", "retryAfter", ".", "getTime", "(", ")", ":", "null", ";", "}", "</s>"]
["<s>", "public", "Date", "retryAfter", "(", ")", "{", "return", "retryAfter", "!", "=", "null", "?", "new", "Date", "(", "retryAfter", ")", ":", "null", ";", "}", "</s>"]
["<s>", "public", "HttpMethod", "method", "(", ")", "{", "return", "this", ".", "httpMethod", ";", "}", "</s>"]
["<s>", "MethodMetadata", "(", ")", "{", "template", ".", "methodMetadata", "(", "this", ")", ";", "}", "</s>"]
["<s>", "public", "String", "configKey", "(", ")", "{", "return", "configKey", ";", "}", "</s>"]
["<s>", "public", "MethodMetadata", "configKey", "(", "String", "configKey", ")", "{", "this", ".", "configKey", "=", "configKey", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Type", "returnType", "(", ")", "{", "return", "returnType", ";", "}", "</s>"]
["<s>", "public", "MethodMetadata", "returnType", "(", "Type", "returnType", ")", "{", "this", ".", "returnType", "=", "returnType", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Integer", "urlIndex", "(", ")", "{", "return", "urlIndex", ";", "}", "</s>"]
["<s>", "public", "MethodMetadata", "urlIndex", "(", "Integer", "urlIndex", ")", "{", "this", ".", "urlIndex", "=", "urlIndex", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Integer", "bodyIndex", "(", ")", "{", "return", "bodyIndex", ";", "}", "</s>"]
["<s>", "public", "MethodMetadata", "bodyIndex", "(", "Integer", "bodyIndex", ")", "{", "this", ".", "bodyIndex", "=", "bodyIndex", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Integer", "headerMapIndex", "(", ")", "{", "return", "headerMapIndex", ";", "}", "</s>"]
["<s>", "public", "MethodMetadata", "headerMapIndex", "(", "Integer", "headerMapIndex", ")", "{", "this", ".", "headerMapIndex", "=", "headerMapIndex", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Integer", "queryMapIndex", "(", ")", "{", "return", "queryMapIndex", ";", "}", "</s>"]
["<s>", "public", "MethodMetadata", "queryMapIndex", "(", "Integer", "queryMapIndex", ")", "{", "this", ".", "queryMapIndex", "=", "queryMapIndex", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "boolean", "queryMapEncoded", "(", ")", "{", "return", "queryMapEncoded", ";", "}", "</s>"]
["<s>", "public", "MethodMetadata", "queryMapEncoded", "(", "boolean", "queryMapEncoded", ")", "{", "this", ".", "queryMapEncoded", "=", "queryMapEncoded", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Type", "bodyType", "(", ")", "{", "return", "bodyType", ";", "}", "</s>"]
["<s>", "public", "MethodMetadata", "bodyType", "(", "Type", "bodyType", ")", "{", "this", ".", "bodyType", "=", "bodyType", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "template", "(", ")", "{", "return", "template", ";", "}", "</s>"]
["<s>", "public", "List", "<", "String", ">", "formParams", "(", ")", "{", "return", "formParams", ";", "}", "</s>"]
["<s>", "public", "Map", "<", "Integer", ",", "Collection", "<", "String", ">", ">", "indexToName", "(", ")", "{", "return", "indexToName", ";", "}", "</s>"]
["<s>", "public", "Map", "<", "Integer", ",", "Boolean", ">", "indexToEncoded", "(", ")", "{", "return", "indexToEncoded", ";", "}", "</s>"]
["<s>", "public", "Map", "<", "Integer", ",", "Class", "<", "?", "extends", "Expander", ">", ">", "indexToExpanderClass", "(", ")", "{", "return", "indexToExpanderClass", ";", "}", "</s>"]
["<s>", "public", "MethodMetadata", "indexToExpander", "(", "Map", "<", "Integer", ",", "Expander", ">", "indexToExpander", ")", "{", "this", ".", "indexToExpander", "=", "indexToExpander", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Map", "<", "Integer", ",", "Expander", ">", "indexToExpander", "(", ")", "{", "return", "indexToExpander", ";", "}", "</s>"]
["<s>", "public", "MethodMetadata", "ignoreParamater", "(", "int", "i", ")", "{", "this", ".", "parameterToIgnore", ".", "set", "(", "i", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "BitSet", "parameterToIgnore", "(", ")", "{", "return", "parameterToIgnore", ";", "}", "</s>"]
["<s>", "public", "MethodMetadata", "parameterToIgnore", "(", "BitSet", "parameterToIgnore", ")", "{", "this", ".", "parameterToIgnore", "=", "parameterToIgnore", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "boolean", "shouldIgnoreParamater", "(", "int", "i", ")", "{", "return", "parameterToIgnore", ".", "get", "(", "i", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isAlreadyProcessed", "(", "Integer", "index", ")", "{", "return", "index", ".", "equals", "(", "urlIndex", ")", "|", "|", "index", ".", "equals", "(", "bodyIndex", ")", "|", "|", "index", ".", "equals", "(", "headerMapIndex", ")", "|", "|", "index", ".", "equals", "(", "queryMapIndex", ")", "|", "|", "indexToName", ".", "containsKey", "(", "index", ")", "|", "|", "indexToExpanderClass", ".", "containsKey", "(", "index", ")", "|", "|", "indexToEncoded", ".", "containsKey", "(", "index", ")", "|", "|", "(", "indexToExpander", "!", "=", "null", "&", "&", "indexToExpander", ".", "containsKey", "(", "index", ")", ")", "|", "|", "parameterToIgnore", ".", "get", "(", "index", ")", ";", "}", "</s>"]
["<s>", "public", "void", "ignoreMethod", "(", ")", "{", "this", ".", "ignored", "=", "true", ";", "}", "</s>"]
["<s>", "public", "boolean", "isIgnored", "(", ")", "{", "return", "ignored", ";", "}", "</s>"]
["<s>", "@", "Experimental", "public", "MethodMetadata", "targetType", "(", "Class", "<", "?", ">", "targetType", ")", "{", "this", ".", "targetType", "=", "targetType", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Experimental", "public", "Class", "<", "?", ">", "targetType", "(", ")", "{", "return", "targetType", ";", "}", "</s>"]
["<s>", "@", "Experimental", "public", "MethodMetadata", "method", "(", "Method", "method", ")", "{", "this", ".", "method", "=", "method", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Experimental", "public", "Method", "method", "(", ")", "{", "return", "method", ";", "}", "</s>"]
["<s>", "public", "void", "addWarning", "(", "String", "warning", ")", "{", "warnings", ".", "add", "(", "warning", ")", ";", "}", "</s>"]
["<s>", "public", "String", "warnings", "(", ")", "{", "return", "warnings", ".", "stream", "(", ")", ".", "collect", "(", "Collectors", ".", "joining", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "InvocationHandler", "create", "(", "Target", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ")", ";", "</s>"]
["<s>", "Object", "invoke", "(", "Object", "[", "]", "argv", ")", "throws", "Throwable", ";", "</s>"]
["<s>", "@", "Override", "public", "InvocationHandler", "create", "(", "Target", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ")", "{", "return", "new", "ReflectiveFeign", ".", "FeignInvocationHandler", "(", "target", ",", "dispatch", ")", ";", "}", "</s>"]
["<s>", "protected", "FeignException", "(", "int", "status", ",", "String", "message", ",", "Throwable", "cause", ")", "{", "super", "(", "message", ",", "cause", ")", ";", "this", ".", "status", "=", "status", ";", "this", ".", "request", "=", "null", ";", "}", "</s>"]
["<s>", "protected", "FeignException", "(", "int", "status", ",", "String", "message", ",", "Throwable", "cause", ",", "byte", "[", "]", "responseBody", ")", "{", "super", "(", "message", ",", "cause", ")", ";", "this", ".", "status", "=", "status", ";", "this", ".", "responseBody", "=", "responseBody", ";", "this", ".", "request", "=", "null", ";", "}", "</s>"]
["<s>", "protected", "FeignException", "(", "int", "status", ",", "String", "message", ")", "{", "super", "(", "message", ")", ";", "this", ".", "status", "=", "status", ";", "this", ".", "request", "=", "null", ";", "}", "</s>"]
["<s>", "protected", "FeignException", "(", "int", "status", ",", "String", "message", ",", "byte", "[", "]", "responseBody", ")", "{", "super", "(", "message", ")", ";", "this", ".", "status", "=", "status", ";", "this", ".", "responseBody", "=", "responseBody", ";", "this", ".", "request", "=", "null", ";", "}", "</s>"]
["<s>", "protected", "FeignException", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ",", "Throwable", "cause", ")", "{", "super", "(", "message", ",", "cause", ")", ";", "this", ".", "status", "=", "status", ";", "this", ".", "request", "=", "checkRequestNotNull", "(", "request", ")", ";", "}", "</s>"]
["<s>", "protected", "FeignException", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ",", "Throwable", "cause", ",", "byte", "[", "]", "responseBody", ")", "{", "super", "(", "message", ",", "cause", ")", ";", "this", ".", "status", "=", "status", ";", "this", ".", "responseBody", "=", "responseBody", ";", "this", ".", "request", "=", "checkRequestNotNull", "(", "request", ")", ";", "}", "</s>"]
["<s>", "protected", "FeignException", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ")", "{", "super", "(", "message", ")", ";", "this", ".", "status", "=", "status", ";", "this", ".", "request", "=", "checkRequestNotNull", "(", "request", ")", ";", "}", "</s>"]
["<s>", "protected", "FeignException", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "responseBody", ")", "{", "super", "(", "message", ")", ";", "this", ".", "status", "=", "status", ";", "this", ".", "responseBody", "=", "responseBody", ";", "this", ".", "request", "=", "checkRequestNotNull", "(", "request", ")", ";", "}", "</s>"]
["<s>", "private", "Request", "checkRequestNotNull", "(", "Request", "request", ")", "{", "return", "checkNotNull", "(", "request", ",", "EXCEPTION_MESSAGE_TEMPLATE_NULL_REQUEST", ")", ";", "}", "</s>"]
["<s>", "public", "int", "status", "(", ")", "{", "return", "this", ".", "status", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "byte", "[", "]", "content", "(", ")", "{", "return", "this", ".", "responseBody", ";", "}", "</s>"]
["<s>", "public", "Optional", "<", "ByteBuffer", ">", "responseBody", "(", ")", "{", "if", "(", "this", ".", "responseBody", "=", "=", "null", ")", "{", "return", "Optional", ".", "empty", "(", ")", ";", "}", "return", "Optional", ".", "of", "(", "ByteBuffer", ".", "wrap", "(", "this", ".", "responseBody", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Request", "request", "(", ")", "{", "return", "this", ".", "request", ";", "}", "</s>"]
["<s>", "public", "boolean", "hasRequest", "(", ")", "{", "return", "(", "this", ".", "request", "!", "=", "null", ")", ";", "}", "</s>"]
["<s>", "public", "String", "contentUTF8", "(", ")", "{", "if", "(", "responseBody", "!", "=", "null", ")", "{", "return", "new", "String", "(", "responseBody", ",", "UTF_8", ")", ";", "}", "else", "{", "return", "\"", "\"", ";", "}", "}", "</s>"]
["<s>", "static", "FeignException", "errorReading", "(", "Request", "request", ",", "Response", "response", ",", "IOException", "cause", ")", "{", "return", "new", "FeignException", "(", "response", ".", "status", "(", ")", ",", "format", "(", "\"", "<STR_LIT>", "\"", ",", "cause", ".", "getMessage", "(", ")", ",", "request", ".", "httpMethod", "(", ")", ",", "request", ".", "url", "(", ")", ")", ",", "request", ",", "cause", ",", "request", ".", "body", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "FeignException", "errorStatus", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "byte", "[", "]", "body", "=", "{", "}", ";", "try", "{", "if", "(", "response", ".", "body", "(", ")", "!", "=", "null", ")", "{", "body", "=", "Util", ".", "toByteArray", "(", "response", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ")", ";", "}", "}", "catch", "(", "IOException", "ignored", ")", "{", "}", "String", "message", "=", "new", "FeignExceptionMessageBuilder", "(", ")", ".", "withResponse", "(", "response", ")", ".", "withMethodKey", "(", "methodKey", ")", ".", "withBody", "(", "body", ")", ".", "build", "(", ")", ";", "return", "errorStatus", "(", "response", ".", "status", "(", ")", ",", "message", ",", "response", ".", "request", "(", ")", ",", "body", ")", ";", "}", "</s>"]
["<s>", "private", "static", "FeignException", "errorStatus", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "if", "(", "isClientError", "(", "status", ")", ")", "{", "return", "clientErrorStatus", "(", "status", ",", "message", ",", "request", ",", "body", ")", ";", "}", "if", "(", "isServerError", "(", "status", ")", ")", "{", "return", "serverErrorStatus", "(", "status", ",", "message", ",", "request", ",", "body", ")", ";", "}", "return", "new", "FeignException", "(", "status", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "isClientError", "(", "int", "status", ")", "{", "return", "status", ">", "=", "<NUM_LIT>", "&", "&", "status", "<", "<NUM_LIT>", ";", "}", "</s>"]
["<s>", "private", "static", "FeignClientException", "clientErrorStatus", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "switch", "(", "status", ")", "{", "case", "<NUM_LIT>", ":", "return", "new", "BadRequest", "(", "message", ",", "request", ",", "body", ")", ";", "case", "<NUM_LIT>", ":", "return", "new", "Unauthorized", "(", "message", ",", "request", ",", "body", ")", ";", "case", "<NUM_LIT>", ":", "return", "new", "Forbidden", "(", "message", ",", "request", ",", "body", ")", ";", "case", "<NUM_LIT>", ":", "return", "new", "NotFound", "(", "message", ",", "request", ",", "body", ")", ";", "case", "<NUM_LIT>", ":", "return", "new", "MethodNotAllowed", "(", "message", ",", "request", ",", "body", ")", ";", "case", "<NUM_LIT>", ":", "return", "new", "NotAcceptable", "(", "message", ",", "request", ",", "body", ")", ";", "case", "<NUM_LIT>", ":", "return", "new", "Conflict", "(", "message", ",", "request", ",", "body", ")", ";", "case", "<NUM_LIT>", ":", "return", "new", "Gone", "(", "message", ",", "request", ",", "body", ")", ";", "case", "<NUM_LIT>", ":", "return", "new", "UnsupportedMediaType", "(", "message", ",", "request", ",", "body", ")", ";", "case", "<NUM_LIT>", ":", "return", "new", "TooManyRequests", "(", "message", ",", "request", ",", "body", ")", ";", "case", "<NUM_LIT>", ":", "return", "new", "UnprocessableEntity", "(", "message", ",", "request", ",", "body", ")", ";", "default", ":", "return", "new", "FeignClientException", "(", "status", ",", "message", ",", "request", ",", "body", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "boolean", "isServerError", "(", "int", "status", ")", "{", "return", "status", ">", "=", "<NUM_LIT>", "&", "&", "status", "<", "=", "<NUM_LIT>", ";", "}", "</s>"]
["<s>", "private", "static", "FeignServerException", "serverErrorStatus", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "switch", "(", "status", ")", "{", "case", "<NUM_LIT>", ":", "return", "new", "InternalServerError", "(", "message", ",", "request", ",", "body", ")", ";", "case", "<NUM_LIT>", ":", "return", "new", "NotImplemented", "(", "message", ",", "request", ",", "body", ")", ";", "case", "<NUM_LIT>", ":", "return", "new", "BadGateway", "(", "message", ",", "request", ",", "body", ")", ";", "case", "<NUM_LIT>", ":", "return", "new", "ServiceUnavailable", "(", "message", ",", "request", ",", "body", ")", ";", "case", "<NUM_LIT>", ":", "return", "new", "GatewayTimeout", "(", "message", ",", "request", ",", "body", ")", ";", "default", ":", "return", "new", "FeignServerException", "(", "status", ",", "message", ",", "request", ",", "body", ")", ";", "}", "}", "</s>"]
["<s>", "static", "FeignException", "errorExecuting", "(", "Request", "request", ",", "IOException", "cause", ")", "{", "return", "new", "RetryableException", "(", "-", "1", ",", "format", "(", "\"", "<STR_LIT>", "\"", ",", "cause", ".", "getMessage", "(", ")", ",", "request", ".", "httpMethod", "(", ")", ",", "request", ".", "url", "(", ")", ")", ",", "request", ".", "httpMethod", "(", ")", ",", "cause", ",", "null", ",", "request", ")", ";", "}", "</s>"]
["<s>", "public", "FeignClientException", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "status", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "BadRequest", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "Unauthorized", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "Forbidden", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "NotFound", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "MethodNotAllowed", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "NotAcceptable", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "Conflict", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "Gone", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "UnsupportedMediaType", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "TooManyRequests", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "UnprocessableEntity", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "FeignServerException", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "status", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "InternalServerError", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "NotImplemented", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "BadGateway", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "ServiceUnavailable", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "GatewayTimeout", "(", "String", "message", ",", "Request", "request", ",", "byte", "[", "]", "body", ")", "{", "super", "(", "<NUM_LIT>", ",", "message", ",", "request", ",", "body", ")", ";", "}", "</s>"]
["<s>", "public", "FeignExceptionMessageBuilder", "withResponse", "(", "Response", "response", ")", "{", "this", ".", "response", "=", "response", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "FeignExceptionMessageBuilder", "withBody", "(", "byte", "[", "]", "body", ")", "{", "this", ".", "body", "=", "body", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "FeignExceptionMessageBuilder", "withMethodKey", "(", "String", "methodKey", ")", "{", "this", ".", "methodKey", "=", "methodKey", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "String", "build", "(", ")", "{", "StringBuilder", "result", "=", "new", "StringBuilder", "(", ")", ";", "if", "(", "response", ".", "reason", "(", ")", "!", "=", "null", ")", "{", "result", ".", "append", "(", "format", "(", "\"", "<STR_LIT>", "\"", ",", "response", ".", "status", "(", ")", ",", "response", ".", "reason", "(", ")", ")", ")", ";", "}", "else", "{", "result", ".", "append", "(", "format", "(", "\"", "<STR_LIT>", "\"", ",", "response", ".", "status", "(", ")", ")", ")", ";", "}", "result", ".", "append", "(", "format", "(", "\"", "<STR_LIT>", "\"", ",", "response", ".", "request", "(", ")", ".", "httpMethod", "(", ")", ",", "response", ".", "request", "(", ")", ".", "url", "(", ")", ",", "methodKey", ")", ")", ";", "result", ".", "append", "(", "format", "(", "\"", "<STR_LIT>", "\"", ",", "getBodyAsString", "(", "body", ",", "response", ".", "headers", "(", ")", ")", ")", ")", ";", "return", "result", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "getBodyAsString", "(", "byte", "[", "]", "body", ",", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ")", "{", "Charset", "charset", "=", "getResponseCharset", "(", "headers", ")", ";", "if", "(", "charset", "=", "=", "null", ")", "{", "charset", "=", "Util", ".", "UTF_8", ";", "}", "return", "getResponseBody", "(", "body", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "getResponseBody", "(", "byte", "[", "]", "body", ",", "Charset", "charset", ")", "{", "if", "(", "body", ".", "length", "<", "MAX_BODY_BYTES_LENGTH", ")", "{", "return", "new", "String", "(", "body", ",", "charset", ")", ";", "}", "return", "getResponseBodyPreview", "(", "body", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "getResponseBodyPreview", "(", "byte", "[", "]", "body", ",", "Charset", "charset", ")", "{", "try", "{", "Reader", "reader", "=", "new", "InputStreamReader", "(", "new", "ByteArrayInputStream", "(", "body", ")", ",", "charset", ")", ";", "CharBuffer", "result", "=", "CharBuffer", ".", "allocate", "(", "MAX_BODY_CHARS_LENGTH", ")", ";", "reader", ".", "read", "(", "result", ")", ";", "reader", ".", "close", "(", ")", ";", "(", "(", "Buffer", ")", "result", ")", ".", "flip", "(", ")", ";", "return", "result", ".", "toString", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "body", ".", "length", "+", "\"", "<STR_LIT>", "\"", ";", "}", "catch", "(", "IOException", "e", ")", "{", "return", "e", ".", "toString", "(", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "}", "</s>"]
["<s>", "private", "static", "Charset", "getResponseCharset", "(", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ")", "{", "Collection", "<", "String", ">", "strings", "=", "headers", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "if", "(", "strings", "=", "=", "null", "|", "|", "strings", ".", "size", "(", ")", "=", "=", "0", ")", "{", "return", "null", ";", "}", "Pattern", "pattern", "=", "Pattern", ".", "compile", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ";", "Matcher", "matcher", "=", "pattern", ".", "matcher", "(", "strings", ".", "iterator", "(", ")", ".", "next", "(", ")", ")", ";", "if", "(", "!", "matcher", ".", "lookingAt", "(", ")", ")", "{", "return", "null", ";", "}", "String", "group", "=", "matcher", ".", "group", "(", "1", ")", ";", "if", "(", "!", "Charset", ".", "isSupported", "(", "group", ")", ")", "{", "return", "null", ";", "}", "return", "Charset", ".", "forName", "(", "group", ")", ";", "}", "</s>"]
["<s>", "AsyncResponseHandler", "(", "Level", "logLevel", ",", "Logger", "logger", ",", "Decoder", "decoder", ",", "ErrorDecoder", "errorDecoder", ",", "boolean", "decode404", ",", "boolean", "closeAfterDecode", ")", "{", "super", "(", ")", ";", "this", ".", "logLevel", "=", "logLevel", ";", "this", ".", "logger", "=", "logger", ";", "this", ".", "decoder", "=", "decoder", ";", "this", ".", "errorDecoder", "=", "errorDecoder", ";", "this", ".", "decode404", "=", "decode404", ";", "this", ".", "closeAfterDecode", "=", "closeAfterDecode", ";", "}", "</s>"]
["<s>", "boolean", "isVoidType", "(", "Type", "returnType", ")", "{", "return", "Void", ".", "class", "=", "=", "returnType", "|", "|", "void", ".", "class", "=", "=", "returnType", ";", "}", "</s>"]
["<s>", "void", "handleResponse", "(", "CompletableFuture", "<", "Object", ">", "resultFuture", ",", "String", "configKey", ",", "Response", "response", ",", "Type", "returnType", ",", "long", "elapsedTime", ")", "{", "boolean", "shouldClose", "=", "true", ";", "try", "{", "if", "(", "logLevel", "!", "=", "Level", ".", "NONE", ")", "{", "response", "=", "logger", ".", "logAndRebufferResponse", "(", "configKey", ",", "logLevel", ",", "response", ",", "elapsedTime", ")", ";", "}", "if", "(", "Response", ".", "class", "=", "=", "returnType", ")", "{", "if", "(", "response", ".", "body", "(", ")", "=", "=", "null", ")", "{", "resultFuture", ".", "complete", "(", "response", ")", ";", "}", "else", "if", "(", "response", ".", "body", "(", ")", ".", "length", "(", ")", "=", "=", "null", "|", "|", "response", ".", "body", "(", ")", ".", "length", "(", ")", ">", "MAX_RESPONSE_BUFFER_SIZE", ")", "{", "shouldClose", "=", "false", ";", "resultFuture", ".", "complete", "(", "response", ")", ";", "}", "else", "{", "final", "byte", "[", "]", "bodyData", "=", "Util", ".", "toByteArray", "(", "response", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ")", ";", "resultFuture", ".", "complete", "(", "response", ".", "toBuilder", "(", ")", ".", "body", "(", "bodyData", ")", ".", "build", "(", ")", ")", ";", "}", "}", "else", "if", "(", "response", ".", "status", "(", ")", ">", "=", "<NUM_LIT>", "&", "&", "response", ".", "status", "(", ")", "<", "<NUM_LIT>", ")", "{", "if", "(", "isVoidType", "(", "returnType", ")", ")", "{", "resultFuture", ".", "complete", "(", "null", ")", ";", "}", "else", "{", "final", "Object", "result", "=", "decode", "(", "response", ",", "returnType", ")", ";", "shouldClose", "=", "closeAfterDecode", ";", "resultFuture", ".", "complete", "(", "result", ")", ";", "}", "}", "else", "if", "(", "decode404", "&", "&", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", "&", "&", "!", "isVoidType", "(", "returnType", ")", ")", "{", "final", "Object", "result", "=", "decode", "(", "response", ",", "returnType", ")", ";", "shouldClose", "=", "closeAfterDecode", ";", "resultFuture", ".", "complete", "(", "result", ")", ";", "}", "else", "{", "resultFuture", ".", "completeExceptionally", "(", "errorDecoder", ".", "decode", "(", "configKey", ",", "response", ")", ")", ";", "}", "}", "catch", "(", "final", "IOException", "e", ")", "{", "if", "(", "logLevel", "!", "=", "Level", ".", "NONE", ")", "{", "logger", ".", "logIOException", "(", "configKey", ",", "logLevel", ",", "e", ",", "elapsedTime", ")", ";", "}", "resultFuture", ".", "completeExceptionally", "(", "errorReading", "(", "response", ".", "request", "(", ")", ",", "response", ",", "e", ")", ")", ";", "}", "catch", "(", "final", "Exception", "e", ")", "{", "resultFuture", ".", "completeExceptionally", "(", "e", ")", ";", "}", "finally", "{", "if", "(", "shouldClose", ")", "{", "ensureClosed", "(", "response", ".", "body", "(", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "try", "{", "return", "decoder", ".", "decode", "(", "response", ",", "type", ")", ";", "}", "catch", "(", "final", "FeignException", "e", ")", "{", "throw", "e", ";", "}", "catch", "(", "final", "RuntimeException", "e", ")", "{", "throw", "new", "DecodeException", "(", "response", ".", "status", "(", ")", ",", "e", ".", "getMessage", "(", ")", ",", "response", ".", "request", "(", ")", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "DefaultMethodHandler", "(", "Method", "defaultMethod", ")", "{", "try", "{", "Class", "<", "?", ">", "declaringClass", "=", "defaultMethod", ".", "getDeclaringClass", "(", ")", ";", "Field", "field", "=", "Lookup", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "field", ".", "setAccessible", "(", "true", ")", ";", "Lookup", "lookup", "=", "(", "Lookup", ")", "field", ".", "get", "(", "null", ")", ";", "this", ".", "unboundHandle", "=", "lookup", ".", "unreflectSpecial", "(", "defaultMethod", ",", "declaringClass", ")", ";", "}", "catch", "(", "NoSuchFieldException", "ex", ")", "{", "throw", "new", "IllegalStateException", "(", "ex", ")", ";", "}", "catch", "(", "IllegalAccessException", "ex", ")", "{", "throw", "new", "IllegalStateException", "(", "ex", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "bindTo", "(", "Object", "proxy", ")", "{", "if", "(", "handle", "!", "=", "null", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "handle", "=", "unboundHandle", ".", "bindTo", "(", "proxy", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "invoke", "(", "Object", "[", "]", "argv", ")", "throws", "Throwable", "{", "if", "(", "handle", "=", "=", "null", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "handle", ".", "invokeWithArguments", "(", "argv", ")", ";", "}", "</s>"]
["<s>", "static", "<", "E", ">", "E", "enrich", "(", "E", "componentToEnrich", ",", "List", "<", "Capability", ">", "capabilities", ")", "{", "return", "capabilities", ".", "stream", "(", ")", ".", "reduce", "(", "componentToEnrich", ",", "(", "component", ",", "capability", ")", "-", ">", "invoke", "(", "component", ",", "capability", ")", ",", "(", "component", ",", "enrichedComponent", ")", "-", ">", "enrichedComponent", ")", ";", "}", "</s>"]
["<s>", "static", "<", "E", ">", "E", "invoke", "(", "E", "target", ",", "Capability", "capability", ")", "{", "return", "Arrays", ".", "stream", "(", "capability", ".", "getClass", "(", ")", ".", "getMethods", "(", ")", ")", ".", "filter", "(", "method", "-", ">", "method", ".", "getName", "(", ")", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "filter", "(", "method", "-", ">", "method", ".", "getReturnType", "(", ")", ".", "isInstance", "(", "target", ")", ")", ".", "findFirst", "(", ")", ".", "map", "(", "method", "-", ">", "{", "try", "{", "return", "(", "E", ")", "method", ".", "invoke", "(", "capability", ",", "target", ")", ";", "}", "catch", "(", "IllegalAccessException", "|", "IllegalArgumentException", "|", "InvocationTargetException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", "+", "target", ",", "e", ")", ";", "}", "}", ")", ".", "orElse", "(", "target", ")", ";", "}", "</s>"]
["<s>", "default", "Client", "enrich", "(", "Client", "client", ")", "{", "return", "client", ";", "}", "</s>"]
["<s>", "default", "Retryer", "enrich", "(", "Retryer", "retryer", ")", "{", "return", "retryer", ";", "}", "</s>"]
["<s>", "default", "RequestInterceptor", "enrich", "(", "RequestInterceptor", "requestInterceptor", ")", "{", "return", "requestInterceptor", ";", "}", "</s>"]
["<s>", "default", "Logger", "enrich", "(", "Logger", "logger", ")", "{", "return", "logger", ";", "}", "</s>"]
["<s>", "default", "Level", "enrich", "(", "Level", "level", ")", "{", "return", "level", ";", "}", "</s>"]
["<s>", "default", "Contract", "enrich", "(", "Contract", "contract", ")", "{", "return", "contract", ";", "}", "</s>"]
["<s>", "default", "Options", "enrich", "(", "Options", "options", ")", "{", "return", "options", ";", "}", "</s>"]
["<s>", "default", "Encoder", "enrich", "(", "Encoder", "encoder", ")", "{", "return", "encoder", ";", "}", "</s>"]
["<s>", "default", "Decoder", "enrich", "(", "Decoder", "decoder", ")", "{", "return", "decoder", ";", "}", "</s>"]
["<s>", "default", "InvocationHandlerFactory", "enrich", "(", "InvocationHandlerFactory", "invocationHandlerFactory", ")", "{", "return", "invocationHandlerFactory", ";", "}", "</s>"]
["<s>", "default", "QueryMapEncoder", "enrich", "(", "QueryMapEncoder", "queryMapEncoder", ")", "{", "return", "queryMapEncoder", ";", "}", "</s>"]
["<s>", "AsyncFeignInvocationHandler", "(", "Class", "<", "T", ">", "type", ",", "T", "instance", ",", "C", "context", ")", "{", "this", ".", "type", "=", "type", ";", "this", ".", "instance", "=", "instance", ";", "this", ".", "context", "=", "context", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "invoke", "(", "Object", "proxy", ",", "Method", "method", ",", "Object", "[", "]", "args", ")", "throws", "Throwable", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", "&", "&", "method", ".", "getParameterCount", "(", ")", "=", "=", "1", ")", "{", "try", "{", "final", "Object", "otherHandler", "=", "args", ".", "length", ">", "0", "&", "&", "args", "[", "0", "]", "!", "=", "null", "?", "Proxy", ".", "getInvocationHandler", "(", "args", "[", "0", "]", ")", ":", "null", ";", "return", "equals", "(", "otherHandler", ")", ";", "}", "catch", "(", "final", "IllegalArgumentException", "e", ")", "{", "return", "false", ";", "}", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", "&", "&", "method", ".", "getParameterCount", "(", ")", "=", "=", "0", ")", "{", "return", "hashCode", "(", ")", ";", "}", "else", "if", "(", "\"", "<STR_LIT:String>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", "&", "&", "method", ".", "getParameterCount", "(", ")", "=", "=", "0", ")", "{", "return", "toString", "(", ")", ";", "}", "final", "MethodInfo", "methodInfo", "=", "methodInfoLookup", ".", "computeIfAbsent", "(", "method", ",", "m", "-", ">", "new", "MethodInfo", "(", "type", ",", "m", ")", ")", ";", "setInvocationContext", "(", "new", "AsyncInvocation", "<", "C", ">", "(", "context", ",", "methodInfo", ")", ")", ";", "try", "{", "return", "method", ".", "invoke", "(", "instance", ",", "args", ")", ";", "}", "catch", "(", "final", "InvocationTargetException", "e", ")", "{", "Throwable", "cause", "=", "e", ".", "getCause", "(", ")", ";", "if", "(", "cause", "instanceof", "AsyncJoinException", ")", "{", "cause", "=", "cause", ".", "getCause", "(", ")", ";", "}", "throw", "cause", ";", "}", "finally", "{", "clearInvocationContext", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "obj", "instanceof", "AsyncFeignInvocationHandler", ")", "{", "final", "AsyncFeignInvocationHandler", "<", "?", ">", "other", "=", "(", "AsyncFeignInvocationHandler", "<", "?", ">", ")", "obj", ";", "return", "instance", ".", "equals", "(", "other", ".", "instance", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "instance", ".", "hashCode", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "instance", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "ReflectiveAsyncFeign", "(", "AsyncBuilder", "<", "C", ">", "asyncBuilder", ")", "{", "super", "(", "asyncBuilder", ")", ";", "}", "</s>"]
["<s>", "private", "String", "getFullMethodName", "(", "Class", "<", "?", ">", "type", ",", "Type", "retType", ",", "Method", "m", ")", "{", "return", "retType", ".", "getTypeName", "(", ")", "+", "\"", "\"", "+", "type", ".", "toGenericString", "(", ")", "+", "\"", "<STR_LIT:.>", "\"", "+", "m", ".", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "<", "T", ">", "T", "wrap", "(", "Class", "<", "T", ">", "type", ",", "T", "instance", ",", "C", "context", ")", "{", "if", "(", "!", "type", ".", "isInterface", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "type", ")", ";", "}", "for", "(", "final", "Method", "m", ":", "type", ".", "getMethods", "(", ")", ")", "{", "final", "Class", "<", "?", ">", "retType", "=", "m", ".", "getReturnType", "(", ")", ";", "if", "(", "!", "CompletableFuture", ".", "class", ".", "isAssignableFrom", "(", "retType", ")", ")", "{", "continue", ";", "}", "if", "(", "retType", "!", "=", "CompletableFuture", ".", "class", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "getFullMethodName", "(", "type", ",", "retType", ",", "m", ")", ")", ";", "}", "final", "Type", "genRetType", "=", "m", ".", "getGenericReturnType", "(", ")", ";", "if", "(", "!", "ParameterizedType", ".", "class", ".", "isInstance", "(", "genRetType", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "getFullMethodName", "(", "type", ",", "genRetType", ",", "m", ")", ")", ";", "}", "if", "(", "WildcardType", ".", "class", ".", "isInstance", "(", "ParameterizedType", ".", "class", ".", "cast", "(", "genRetType", ")", ".", "getActualTypeArguments", "(", ")", "[", "0", "]", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "getFullMethodName", "(", "type", ",", "genRetType", ",", "m", ")", ")", ";", "}", "}", "return", "type", ".", "cast", "(", "Proxy", ".", "newProxyInstance", "(", "type", ".", "getClassLoader", "(", ")", ",", "new", "Class", "<", "?", ">", "[", "]", "{", "type", "}", ",", "new", "AsyncFeignInvocationHandler", "<", ">", "(", "type", ",", "instance", ",", "context", ")", ")", ")", ";", "}", "</s>"]
["<s>", "CollectionFormat", "(", "String", "separator", ")", "{", "this", ".", "separator", "=", "separator", ";", "}", "</s>"]
["<s>", "public", "CharSequence", "join", "(", "String", "field", ",", "Collection", "<", "String", ">", "values", ",", "Charset", "charset", ")", "{", "StringBuilder", "builder", "=", "new", "StringBuilder", "(", ")", ";", "int", "valueCount", "=", "0", ";", "for", "(", "String", "value", ":", "values", ")", "{", "if", "(", "separator", "=", "=", "null", ")", "{", "builder", ".", "append", "(", "valueCount", "+", "+", "=", "=", "0", "?", "\"", "\"", ":", "\"", "<STR_LIT:&>", "\"", ")", ";", "builder", ".", "append", "(", "UriUtils", ".", "encode", "(", "field", ",", "charset", ")", ")", ";", "if", "(", "value", "!", "=", "null", ")", "{", "builder", ".", "append", "(", "<CHAR_LIT:=>", ")", ";", "builder", ".", "append", "(", "value", ")", ";", "}", "}", "else", "{", "if", "(", "builder", ".", "length", "(", ")", "=", "=", "0", ")", "{", "builder", ".", "append", "(", "UriUtils", ".", "encode", "(", "field", ",", "charset", ")", ")", ";", "}", "if", "(", "value", "=", "=", "null", ")", "{", "continue", ";", "}", "builder", ".", "append", "(", "valueCount", "+", "+", "=", "=", "0", "?", "\"", "<STR_LIT:=>", "\"", ":", "UriUtils", ".", "encode", "(", "separator", ",", "charset", ")", ")", ";", "builder", ".", "append", "(", "value", ")", ";", "}", "}", "return", "builder", ";", "}", "</s>"]
["<s>", "private", "Types", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "Class", "<", "?", ">", "getRawType", "(", "Type", "type", ")", "{", "if", "(", "type", "instanceof", "Class", "<", "?", ">", ")", "{", "return", "(", "Class", "<", "?", ">", ")", "type", ";", "}", "else", "if", "(", "type", "instanceof", "ParameterizedType", ")", "{", "ParameterizedType", "parameterizedType", "=", "(", "ParameterizedType", ")", "type", ";", "Type", "rawType", "=", "parameterizedType", ".", "getRawType", "(", ")", ";", "if", "(", "!", "(", "rawType", "instanceof", "Class", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", ")", ";", "}", "return", "(", "Class", "<", "?", ">", ")", "rawType", ";", "}", "else", "if", "(", "type", "instanceof", "GenericArrayType", ")", "{", "Type", "componentType", "=", "(", "(", "GenericArrayType", ")", "type", ")", ".", "getGenericComponentType", "(", ")", ";", "return", "Array", ".", "newInstance", "(", "getRawType", "(", "componentType", ")", ",", "0", ")", ".", "getClass", "(", ")", ";", "}", "else", "if", "(", "type", "instanceof", "TypeVariable", ")", "{", "return", "Object", ".", "class", ";", "}", "else", "if", "(", "type", "instanceof", "WildcardType", ")", "{", "return", "getRawType", "(", "(", "(", "WildcardType", ")", "type", ")", ".", "getUpperBounds", "(", ")", "[", "0", "]", ")", ";", "}", "else", "{", "String", "className", "=", "type", "=", "=", "null", "?", "\"", "<STR_LIT>", "\"", ":", "type", ".", "getClass", "(", ")", ".", "getName", "(", ")", ";", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "type", "+", "\"", "<STR_LIT>", "\"", "+", "className", ")", ";", "}", "}", "</s>"]
["<s>", "static", "boolean", "equals", "(", "Type", "a", ",", "Type", "b", ")", "{", "if", "(", "a", "=", "=", "b", ")", "{", "return", "true", ";", "}", "else", "if", "(", "a", "instanceof", "Class", ")", "{", "return", "a", ".", "equals", "(", "b", ")", ";", "}", "else", "if", "(", "a", "instanceof", "ParameterizedType", ")", "{", "if", "(", "!", "(", "b", "instanceof", "ParameterizedType", ")", ")", "{", "return", "false", ";", "}", "ParameterizedType", "pa", "=", "(", "ParameterizedType", ")", "a", ";", "ParameterizedType", "pb", "=", "(", "ParameterizedType", ")", "b", ";", "return", "equal", "(", "pa", ".", "getOwnerType", "(", ")", ",", "pb", ".", "getOwnerType", "(", ")", ")", "&", "&", "pa", ".", "getRawType", "(", ")", ".", "equals", "(", "pb", ".", "getRawType", "(", ")", ")", "&", "&", "Arrays", ".", "equals", "(", "pa", ".", "getActualTypeArguments", "(", ")", ",", "pb", ".", "getActualTypeArguments", "(", ")", ")", ";", "}", "else", "if", "(", "a", "instanceof", "GenericArrayType", ")", "{", "if", "(", "!", "(", "b", "instanceof", "GenericArrayType", ")", ")", "{", "return", "false", ";", "}", "GenericArrayType", "ga", "=", "(", "GenericArrayType", ")", "a", ";", "GenericArrayType", "gb", "=", "(", "GenericArrayType", ")", "b", ";", "return", "equals", "(", "ga", ".", "getGenericComponentType", "(", ")", ",", "gb", ".", "getGenericComponentType", "(", ")", ")", ";", "}", "else", "if", "(", "a", "instanceof", "WildcardType", ")", "{", "if", "(", "!", "(", "b", "instanceof", "WildcardType", ")", ")", "{", "return", "false", ";", "}", "WildcardType", "wa", "=", "(", "WildcardType", ")", "a", ";", "WildcardType", "wb", "=", "(", "WildcardType", ")", "b", ";", "return", "Arrays", ".", "equals", "(", "wa", ".", "getUpperBounds", "(", ")", ",", "wb", ".", "getUpperBounds", "(", ")", ")", "&", "&", "Arrays", ".", "equals", "(", "wa", ".", "getLowerBounds", "(", ")", ",", "wb", ".", "getLowerBounds", "(", ")", ")", ";", "}", "else", "if", "(", "a", "instanceof", "TypeVariable", ")", "{", "if", "(", "!", "(", "b", "instanceof", "TypeVariable", ")", ")", "{", "return", "false", ";", "}", "TypeVariable", "<", "?", ">", "va", "=", "(", "TypeVariable", "<", "?", ">", ")", "a", ";", "TypeVariable", "<", "?", ">", "vb", "=", "(", "TypeVariable", "<", "?", ">", ")", "b", ";", "return", "va", ".", "getGenericDeclaration", "(", ")", "=", "=", "vb", ".", "getGenericDeclaration", "(", ")", "&", "&", "va", ".", "getName", "(", ")", ".", "equals", "(", "vb", ".", "getName", "(", ")", ")", ";", "}", "else", "{", "return", "false", ";", "}", "}", "</s>"]
["<s>", "static", "Type", "getGenericSupertype", "(", "Type", "context", ",", "Class", "<", "?", ">", "rawType", ",", "Class", "<", "?", ">", "toResolve", ")", "{", "if", "(", "toResolve", "=", "=", "rawType", ")", "{", "return", "context", ";", "}", "if", "(", "toResolve", ".", "isInterface", "(", ")", ")", "{", "Class", "<", "?", ">", "[", "]", "interfaces", "=", "rawType", ".", "getInterfaces", "(", ")", ";", "for", "(", "int", "i", "=", "0", ",", "length", "=", "interfaces", ".", "length", ";", "i", "<", "length", ";", "i", "+", "+", ")", "{", "if", "(", "interfaces", "[", "i", "]", "=", "=", "toResolve", ")", "{", "return", "rawType", ".", "getGenericInterfaces", "(", ")", "[", "i", "]", ";", "}", "else", "if", "(", "toResolve", ".", "isAssignableFrom", "(", "interfaces", "[", "i", "]", ")", ")", "{", "return", "getGenericSupertype", "(", "rawType", ".", "getGenericInterfaces", "(", ")", "[", "i", "]", ",", "interfaces", "[", "i", "]", ",", "toResolve", ")", ";", "}", "}", "}", "if", "(", "!", "rawType", ".", "isInterface", "(", ")", ")", "{", "while", "(", "rawType", "!", "=", "Object", ".", "class", ")", "{", "Class", "<", "?", ">", "rawSupertype", "=", "rawType", ".", "getSuperclass", "(", ")", ";", "if", "(", "rawSupertype", "=", "=", "toResolve", ")", "{", "return", "rawType", ".", "getGenericSuperclass", "(", ")", ";", "}", "else", "if", "(", "toResolve", ".", "isAssignableFrom", "(", "rawSupertype", ")", ")", "{", "return", "getGenericSupertype", "(", "rawType", ".", "getGenericSuperclass", "(", ")", ",", "rawSupertype", ",", "toResolve", ")", ";", "}", "rawType", "=", "rawSupertype", ";", "}", "}", "return", "toResolve", ";", "}", "</s>"]
["<s>", "private", "static", "int", "indexOf", "(", "Object", "[", "]", "array", ",", "Object", "toFind", ")", "{", "for", "(", "int", "i", "=", "0", ";", "i", "<", "array", ".", "length", ";", "i", "+", "+", ")", "{", "if", "(", "toFind", ".", "equals", "(", "array", "[", "i", "]", ")", ")", "{", "return", "i", ";", "}", "}", "throw", "new", "NoSuchElementException", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "equal", "(", "Object", "a", ",", "Object", "b", ")", "{", "return", "a", "=", "=", "b", "|", "|", "(", "a", "!", "=", "null", "&", "&", "a", ".", "equals", "(", "b", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "int", "hashCodeOrZero", "(", "Object", "o", ")", "{", "return", "o", "!", "=", "null", "?", "o", ".", "hashCode", "(", ")", ":", "0", ";", "}", "</s>"]
["<s>", "static", "String", "typeToString", "(", "Type", "type", ")", "{", "return", "type", "instanceof", "Class", "?", "(", "(", "Class", "<", "?", ">", ")", "type", ")", ".", "getName", "(", ")", ":", "type", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "static", "Type", "getSupertype", "(", "Type", "context", ",", "Class", "<", "?", ">", "contextRawType", ",", "Class", "<", "?", ">", "supertype", ")", "{", "if", "(", "!", "supertype", ".", "isAssignableFrom", "(", "contextRawType", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", ")", ";", "}", "return", "resolve", "(", "context", ",", "contextRawType", ",", "getGenericSupertype", "(", "context", ",", "contextRawType", ",", "supertype", ")", ")", ";", "}", "</s>"]
["<s>", "static", "Type", "resolve", "(", "Type", "context", ",", "Class", "<", "?", ">", "contextRawType", ",", "Type", "toResolve", ")", "{", "while", "(", "true", ")", "{", "if", "(", "toResolve", "instanceof", "TypeVariable", ")", "{", "TypeVariable", "<", "?", ">", "typeVariable", "=", "(", "TypeVariable", "<", "?", ">", ")", "toResolve", ";", "toResolve", "=", "resolveTypeVariable", "(", "context", ",", "contextRawType", ",", "typeVariable", ")", ";", "if", "(", "toResolve", "=", "=", "typeVariable", ")", "{", "return", "toResolve", ";", "}", "}", "else", "if", "(", "toResolve", "instanceof", "Class", "&", "&", "(", "(", "Class", "<", "?", ">", ")", "toResolve", ")", ".", "isArray", "(", ")", ")", "{", "Class", "<", "?", ">", "original", "=", "(", "Class", "<", "?", ">", ")", "toResolve", ";", "Type", "componentType", "=", "original", ".", "getComponentType", "(", ")", ";", "Type", "newComponentType", "=", "resolve", "(", "context", ",", "contextRawType", ",", "componentType", ")", ";", "return", "componentType", "=", "=", "newComponentType", "?", "original", ":", "new", "GenericArrayTypeImpl", "(", "newComponentType", ")", ";", "}", "else", "if", "(", "toResolve", "instanceof", "GenericArrayType", ")", "{", "GenericArrayType", "original", "=", "(", "GenericArrayType", ")", "toResolve", ";", "Type", "componentType", "=", "original", ".", "getGenericComponentType", "(", ")", ";", "Type", "newComponentType", "=", "resolve", "(", "context", ",", "contextRawType", ",", "componentType", ")", ";", "return", "componentType", "=", "=", "newComponentType", "?", "original", ":", "new", "GenericArrayTypeImpl", "(", "newComponentType", ")", ";", "}", "else", "if", "(", "toResolve", "instanceof", "ParameterizedType", ")", "{", "ParameterizedType", "original", "=", "(", "ParameterizedType", ")", "toResolve", ";", "Type", "ownerType", "=", "original", ".", "getOwnerType", "(", ")", ";", "Type", "newOwnerType", "=", "resolve", "(", "context", ",", "contextRawType", ",", "ownerType", ")", ";", "boolean", "changed", "=", "newOwnerType", "!", "=", "ownerType", ";", "Type", "[", "]", "args", "=", "original", ".", "getActualTypeArguments", "(", ")", ";", "for", "(", "int", "t", "=", "0", ",", "length", "=", "args", ".", "length", ";", "t", "<", "length", ";", "t", "+", "+", ")", "{", "Type", "resolvedTypeArgument", "=", "resolve", "(", "context", ",", "contextRawType", ",", "args", "[", "t", "]", ")", ";", "if", "(", "resolvedTypeArgument", "!", "=", "args", "[", "t", "]", ")", "{", "if", "(", "!", "changed", ")", "{", "args", "=", "args", ".", "clone", "(", ")", ";", "changed", "=", "true", ";", "}", "args", "[", "t", "]", "=", "resolvedTypeArgument", ";", "}", "}", "return", "changed", "?", "new", "ParameterizedTypeImpl", "(", "newOwnerType", ",", "original", ".", "getRawType", "(", ")", ",", "args", ")", ":", "original", ";", "}", "else", "if", "(", "toResolve", "instanceof", "WildcardType", ")", "{", "WildcardType", "original", "=", "(", "WildcardType", ")", "toResolve", ";", "Type", "[", "]", "originalLowerBound", "=", "original", ".", "getLowerBounds", "(", ")", ";", "Type", "[", "]", "originalUpperBound", "=", "original", ".", "getUpperBounds", "(", ")", ";", "if", "(", "originalLowerBound", ".", "length", "=", "=", "1", ")", "{", "Type", "lowerBound", "=", "resolve", "(", "context", ",", "contextRawType", ",", "originalLowerBound", "[", "0", "]", ")", ";", "if", "(", "lowerBound", "!", "=", "originalLowerBound", "[", "0", "]", ")", "{", "return", "new", "WildcardTypeImpl", "(", "new", "Type", "[", "]", "{", "Object", ".", "class", "}", ",", "new", "Type", "[", "]", "{", "lowerBound", "}", ")", ";", "}", "}", "else", "if", "(", "originalUpperBound", ".", "length", "=", "=", "1", ")", "{", "Type", "upperBound", "=", "resolve", "(", "context", ",", "contextRawType", ",", "originalUpperBound", "[", "0", "]", ")", ";", "if", "(", "upperBound", "!", "=", "originalUpperBound", "[", "0", "]", ")", "{", "return", "new", "WildcardTypeImpl", "(", "new", "Type", "[", "]", "{", "upperBound", "}", ",", "EMPTY_TYPE_ARRAY", ")", ";", "}", "}", "return", "original", ";", "}", "else", "{", "return", "toResolve", ";", "}", "}", "}", "</s>"]
["<s>", "private", "static", "Type", "resolveTypeVariable", "(", "Type", "context", ",", "Class", "<", "?", ">", "contextRawType", ",", "TypeVariable", "<", "?", ">", "unknown", ")", "{", "Class", "<", "?", ">", "declaredByRaw", "=", "declaringClassOf", "(", "unknown", ")", ";", "if", "(", "declaredByRaw", "=", "=", "null", ")", "{", "return", "unknown", ";", "}", "Type", "declaredBy", "=", "getGenericSupertype", "(", "context", ",", "contextRawType", ",", "declaredByRaw", ")", ";", "if", "(", "declaredBy", "instanceof", "ParameterizedType", ")", "{", "int", "index", "=", "indexOf", "(", "declaredByRaw", ".", "getTypeParameters", "(", ")", ",", "unknown", ")", ";", "return", "(", "(", "ParameterizedType", ")", "declaredBy", ")", ".", "getActualTypeArguments", "(", ")", "[", "index", "]", ";", "}", "return", "unknown", ";", "}", "</s>"]
["<s>", "private", "static", "Class", "<", "?", ">", "declaringClassOf", "(", "TypeVariable", "<", "?", ">", "typeVariable", ")", "{", "GenericDeclaration", "genericDeclaration", "=", "typeVariable", ".", "getGenericDeclaration", "(", ")", ";", "return", "genericDeclaration", "instanceof", "Class", "?", "(", "Class", "<", "?", ">", ")", "genericDeclaration", ":", "null", ";", "}", "</s>"]
["<s>", "private", "static", "void", "checkNotPrimitive", "(", "Type", "type", ")", "{", "if", "(", "type", "instanceof", "Class", "<", "?", ">", "&", "&", "(", "(", "Class", "<", "?", ">", ")", "type", ")", ".", "isPrimitive", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", ")", ";", "}", "}", "</s>"]
["<s>", "ParameterizedTypeImpl", "(", "Type", "ownerType", ",", "Type", "rawType", ",", "Type", ".", ".", ".", "typeArguments", ")", "{", "if", "(", "rawType", "instanceof", "Class", "<", "?", ">", "&", "&", "(", "ownerType", "=", "=", "null", ")", "!", "=", "(", "(", "(", "Class", "<", "?", ">", ")", "rawType", ")", ".", "getEnclosingClass", "(", ")", "=", "=", "null", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", ")", ";", "}", "this", ".", "ownerType", "=", "ownerType", ";", "this", ".", "rawType", "=", "rawType", ";", "this", ".", "typeArguments", "=", "typeArguments", ".", "clone", "(", ")", ";", "for", "(", "Type", "typeArgument", ":", "this", ".", "typeArguments", ")", "{", "if", "(", "typeArgument", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", ")", ";", "}", "checkNotPrimitive", "(", "typeArgument", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Type", "[", "]", "getActualTypeArguments", "(", ")", "{", "return", "typeArguments", ".", "clone", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Type", "getRawType", "(", ")", "{", "return", "rawType", ";", "}", "</s>"]
["<s>", "public", "Type", "getOwnerType", "(", ")", "{", "return", "ownerType", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "other", ")", "{", "return", "other", "instanceof", "ParameterizedType", "&", "&", "Types", ".", "equals", "(", "this", ",", "(", "ParameterizedType", ")", "other", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "Arrays", ".", "hashCode", "(", "typeArguments", ")", "^", "rawType", ".", "hashCode", "(", ")", "^", "hashCodeOrZero", "(", "ownerType", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "StringBuilder", "result", "=", "new", "StringBuilder", "(", "<NUM_LIT:30>", "*", "(", "typeArguments", ".", "length", "+", "1", ")", ")", ";", "result", ".", "append", "(", "typeToString", "(", "rawType", ")", ")", ";", "if", "(", "typeArguments", ".", "length", "=", "=", "0", ")", "{", "return", "result", ".", "toString", "(", ")", ";", "}", "result", ".", "append", "(", "\"", "<STR_LIT:<>", "\"", ")", ".", "append", "(", "typeToString", "(", "typeArguments", "[", "0", "]", ")", ")", ";", "for", "(", "int", "i", "=", "1", ";", "i", "<", "typeArguments", ".", "length", ";", "i", "+", "+", ")", "{", "result", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "typeToString", "(", "typeArguments", "[", "i", "]", ")", ")", ";", "}", "return", "result", ".", "append", "(", "\"", "<STR_LIT:>>", "\"", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "GenericArrayTypeImpl", "(", "Type", "componentType", ")", "{", "this", ".", "componentType", "=", "componentType", ";", "}", "</s>"]
["<s>", "public", "Type", "getGenericComponentType", "(", ")", "{", "return", "componentType", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "o", ")", "{", "return", "o", "instanceof", "GenericArrayType", "&", "&", "Types", ".", "equals", "(", "this", ",", "(", "GenericArrayType", ")", "o", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "componentType", ".", "hashCode", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "typeToString", "(", "componentType", ")", "+", "\"", "<STR_LIT:[]>", "\"", ";", "}", "</s>"]
["<s>", "WildcardTypeImpl", "(", "Type", "[", "]", "upperBounds", ",", "Type", "[", "]", "lowerBounds", ")", "{", "if", "(", "lowerBounds", ".", "length", ">", "1", ")", "{", "throw", "new", "IllegalArgumentException", "(", ")", ";", "}", "if", "(", "upperBounds", ".", "length", "!", "=", "1", ")", "{", "throw", "new", "IllegalArgumentException", "(", ")", ";", "}", "if", "(", "lowerBounds", ".", "length", "=", "=", "1", ")", "{", "if", "(", "lowerBounds", "[", "0", "]", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", ")", ";", "}", "checkNotPrimitive", "(", "lowerBounds", "[", "0", "]", ")", ";", "if", "(", "upperBounds", "[", "0", "]", "!", "=", "Object", ".", "class", ")", "{", "throw", "new", "IllegalArgumentException", "(", ")", ";", "}", "this", ".", "lowerBound", "=", "lowerBounds", "[", "0", "]", ";", "this", ".", "upperBound", "=", "Object", ".", "class", ";", "}", "else", "{", "if", "(", "upperBounds", "[", "0", "]", "=", "=", "null", ")", "{", "throw", "new", "NullPointerException", "(", ")", ";", "}", "checkNotPrimitive", "(", "upperBounds", "[", "0", "]", ")", ";", "this", ".", "lowerBound", "=", "null", ";", "this", ".", "upperBound", "=", "upperBounds", "[", "0", "]", ";", "}", "}", "</s>"]
["<s>", "public", "Type", "[", "]", "getUpperBounds", "(", ")", "{", "return", "new", "Type", "[", "]", "{", "upperBound", "}", ";", "}", "</s>"]
["<s>", "public", "Type", "[", "]", "getLowerBounds", "(", ")", "{", "return", "lowerBound", "!", "=", "null", "?", "new", "Type", "[", "]", "{", "lowerBound", "}", ":", "EMPTY_TYPE_ARRAY", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "other", ")", "{", "return", "other", "instanceof", "WildcardType", "&", "&", "Types", ".", "equals", "(", "this", ",", "(", "WildcardType", ")", "other", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "(", "lowerBound", "!", "=", "null", "?", "<NUM_LIT:31>", "+", "lowerBound", ".", "hashCode", "(", ")", ":", "1", ")", "^", "(", "<NUM_LIT:31>", "+", "upperBound", ".", "hashCode", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "if", "(", "lowerBound", "!", "=", "null", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "typeToString", "(", "lowerBound", ")", ";", "}", "if", "(", "upperBound", "=", "=", "Object", ".", "class", ")", "{", "return", "\"", "<STR_LIT:?>", "\"", ";", "}", "return", "\"", "<STR_LIT>", "\"", "+", "typeToString", "(", "upperBound", ")", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "(", ")", "{", "super", "(", ")", ";", "}", "</s>"]
["<s>", "private", "RequestTemplate", "(", "String", "target", ",", "String", "fragment", ",", "UriTemplate", "uriTemplate", ",", "BodyTemplate", "bodyTemplate", ",", "HttpMethod", "method", ",", "Charset", "charset", ",", "Request", ".", "Body", "body", ",", "boolean", "decodeSlash", ",", "CollectionFormat", "collectionFormat", ",", "MethodMetadata", "methodMetadata", ",", "Target", "<", "?", ">", "feignTarget", ")", "{", "this", ".", "target", "=", "target", ";", "this", ".", "fragment", "=", "fragment", ";", "this", ".", "uriTemplate", "=", "uriTemplate", ";", "this", ".", "bodyTemplate", "=", "bodyTemplate", ";", "this", ".", "method", "=", "method", ";", "this", ".", "charset", "=", "charset", ";", "this", ".", "body", "=", "body", ";", "this", ".", "decodeSlash", "=", "decodeSlash", ";", "this", ".", "collectionFormat", "=", "(", "collectionFormat", "!", "=", "null", ")", "?", "collectionFormat", ":", "CollectionFormat", ".", "EXPLODED", ";", "this", ".", "methodMetadata", "=", "methodMetadata", ";", "this", ".", "feignTarget", "=", "feignTarget", ";", "}", "</s>"]
["<s>", "public", "static", "RequestTemplate", "from", "(", "RequestTemplate", "requestTemplate", ")", "{", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", "requestTemplate", ".", "target", ",", "requestTemplate", ".", "fragment", ",", "requestTemplate", ".", "uriTemplate", ",", "requestTemplate", ".", "bodyTemplate", ",", "requestTemplate", ".", "method", ",", "requestTemplate", ".", "charset", ",", "requestTemplate", ".", "body", ",", "requestTemplate", ".", "decodeSlash", ",", "requestTemplate", ".", "collectionFormat", ",", "requestTemplate", ".", "methodMetadata", ",", "requestTemplate", ".", "feignTarget", ")", ";", "if", "(", "!", "requestTemplate", ".", "queries", "(", ")", ".", "isEmpty", "(", ")", ")", "{", "template", ".", "queries", ".", "putAll", "(", "requestTemplate", ".", "queries", ")", ";", "}", "if", "(", "!", "requestTemplate", ".", "headers", "(", ")", ".", "isEmpty", "(", ")", ")", "{", "template", ".", "headers", ".", "putAll", "(", "requestTemplate", ".", "headers", ")", ";", "}", "return", "template", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "RequestTemplate", "(", "RequestTemplate", "toCopy", ")", "{", "checkNotNull", "(", "toCopy", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "target", "=", "toCopy", ".", "target", ";", "this", ".", "fragment", "=", "toCopy", ".", "fragment", ";", "this", ".", "method", "=", "toCopy", ".", "method", ";", "this", ".", "queries", ".", "putAll", "(", "toCopy", ".", "queries", ")", ";", "this", ".", "headers", ".", "putAll", "(", "toCopy", ".", "headers", ")", ";", "this", ".", "charset", "=", "toCopy", ".", "charset", ";", "this", ".", "body", "=", "toCopy", ".", "body", ";", "this", ".", "decodeSlash", "=", "toCopy", ".", "decodeSlash", ";", "this", ".", "collectionFormat", "=", "(", "toCopy", ".", "collectionFormat", "!", "=", "null", ")", "?", "toCopy", ".", "collectionFormat", ":", "CollectionFormat", ".", "EXPLODED", ";", "this", ".", "uriTemplate", "=", "toCopy", ".", "uriTemplate", ";", "this", ".", "bodyTemplate", "=", "toCopy", ".", "bodyTemplate", ";", "this", ".", "resolved", "=", "false", ";", "this", ".", "methodMetadata", "=", "toCopy", ".", "methodMetadata", ";", "this", ".", "target", "=", "toCopy", ".", "target", ";", "this", ".", "feignTarget", "=", "toCopy", ".", "feignTarget", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "resolve", "(", "Map", "<", "String", ",", "?", ">", "variables", ")", "{", "StringBuilder", "uri", "=", "new", "StringBuilder", "(", ")", ";", "RequestTemplate", "resolved", "=", "RequestTemplate", ".", "from", "(", "this", ")", ";", "if", "(", "this", ".", "uriTemplate", "=", "=", "null", ")", "{", "this", ".", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "\"", "\"", ",", "!", "this", ".", "decodeSlash", ",", "this", ".", "charset", ")", ";", "}", "String", "expanded", "=", "this", ".", "uriTemplate", ".", "expand", "(", "variables", ")", ";", "if", "(", "expanded", "!", "=", "null", ")", "{", "uri", ".", "append", "(", "expanded", ")", ";", "}", "if", "(", "!", "this", ".", "queries", ".", "isEmpty", "(", ")", ")", "{", "resolved", ".", "queries", "(", "Collections", ".", "emptyMap", "(", ")", ")", ";", "StringBuilder", "query", "=", "new", "StringBuilder", "(", ")", ";", "Iterator", "<", "QueryTemplate", ">", "queryTemplates", "=", "this", ".", "queries", ".", "values", "(", ")", ".", "iterator", "(", ")", ";", "while", "(", "queryTemplates", ".", "hasNext", "(", ")", ")", "{", "QueryTemplate", "queryTemplate", "=", "queryTemplates", ".", "next", "(", ")", ";", "String", "queryExpanded", "=", "queryTemplate", ".", "expand", "(", "variables", ")", ";", "if", "(", "Util", ".", "isNotBlank", "(", "queryExpanded", ")", ")", "{", "query", ".", "append", "(", "queryExpanded", ")", ";", "if", "(", "queryTemplates", ".", "hasNext", "(", ")", ")", "{", "query", ".", "append", "(", "\"", "<STR_LIT:&>", "\"", ")", ";", "}", "}", "}", "String", "queryString", "=", "query", ".", "toString", "(", ")", ";", "if", "(", "!", "queryString", ".", "isEmpty", "(", ")", ")", "{", "Matcher", "queryMatcher", "=", "QUERY_STRING_PATTERN", ".", "matcher", "(", "uri", ")", ";", "if", "(", "queryMatcher", ".", "find", "(", ")", ")", "{", "uri", ".", "append", "(", "\"", "<STR_LIT:&>", "\"", ")", ";", "}", "else", "{", "uri", ".", "append", "(", "\"", "<STR_LIT:?>", "\"", ")", ";", "}", "uri", ".", "append", "(", "queryString", ")", ";", "}", "}", "resolved", ".", "uri", "(", "uri", ".", "toString", "(", ")", ")", ";", "if", "(", "!", "this", ".", "headers", ".", "isEmpty", "(", ")", ")", "{", "resolved", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ";", "for", "(", "HeaderTemplate", "headerTemplate", ":", "this", ".", "headers", ".", "values", "(", ")", ")", "{", "String", "header", "=", "headerTemplate", ".", "expand", "(", "variables", ")", ";", "if", "(", "!", "header", ".", "isEmpty", "(", ")", ")", "{", "String", "headerValues", "=", "header", ".", "substring", "(", "header", ".", "indexOf", "(", "\"", "\"", ")", "+", "1", ")", ";", "if", "(", "!", "headerValues", ".", "isEmpty", "(", ")", ")", "{", "resolved", ".", "header", "(", "headerTemplate", ".", "getName", "(", ")", ",", "headerValues", ")", ";", "}", "}", "}", "}", "if", "(", "this", ".", "bodyTemplate", "!", "=", "null", ")", "{", "resolved", ".", "body", "(", "this", ".", "bodyTemplate", ".", "expand", "(", "variables", ")", ")", ";", "}", "resolved", ".", "resolved", "=", "true", ";", "return", "resolved", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Deprecated", "RequestTemplate", "resolve", "(", "Map", "<", "String", ",", "?", ">", "unencoded", ",", "Map", "<", "String", ",", "Boolean", ">", "alreadyEncoded", ")", "{", "return", "this", ".", "resolve", "(", "unencoded", ")", ";", "}", "</s>"]
["<s>", "public", "Request", "request", "(", ")", "{", "if", "(", "!", "this", ".", "resolved", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "Request", ".", "create", "(", "this", ".", "method", ",", "this", ".", "url", "(", ")", ",", "this", ".", "headers", "(", ")", ",", "this", ".", "body", ",", "this", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "RequestTemplate", "method", "(", "String", "method", ")", "{", "checkNotNull", "(", "method", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "this", ".", "method", "=", "HttpMethod", ".", "valueOf", "(", "method", ")", ";", "}", "catch", "(", "IllegalArgumentException", "iae", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "method", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "method", "(", "HttpMethod", "method", ")", "{", "checkNotNull", "(", "method", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "method", "=", "method", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "String", "method", "(", ")", "{", "return", "(", "method", "!", "=", "null", ")", "?", "method", ".", "name", "(", ")", ":", "null", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "decodeSlash", "(", "boolean", "decodeSlash", ")", "{", "this", ".", "decodeSlash", "=", "decodeSlash", ";", "this", ".", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "this", ".", "uriTemplate", ".", "toString", "(", ")", ",", "!", "this", ".", "decodeSlash", ",", "this", ".", "charset", ")", ";", "if", "(", "!", "this", ".", "queries", ".", "isEmpty", "(", ")", ")", "{", "this", ".", "queries", ".", "replaceAll", "(", "(", "key", ",", "queryTemplate", ")", "-", ">", "QueryTemplate", ".", "create", "(", "queryTemplate", ".", "getName", "(", ")", ",", "queryTemplate", ".", "getValues", "(", ")", ",", "charset", ",", "collectionFormat", ",", "decodeSlash", ")", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "boolean", "decodeSlash", "(", ")", "{", "return", "decodeSlash", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "collectionFormat", "(", "CollectionFormat", "collectionFormat", ")", "{", "this", ".", "collectionFormat", "=", "collectionFormat", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "CollectionFormat", "collectionFormat", "(", ")", "{", "return", "collectionFormat", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "RequestTemplate", "append", "(", "CharSequence", "value", ")", "{", "if", "(", "this", ".", "uriTemplate", "!", "=", "null", ")", "{", "return", "this", ".", "uri", "(", "value", ".", "toString", "(", ")", ",", "true", ")", ";", "}", "return", "this", ".", "uri", "(", "value", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Deprecated", "public", "RequestTemplate", "insert", "(", "int", "pos", ",", "CharSequence", "value", ")", "{", "return", "target", "(", "value", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "uri", "(", "String", "uri", ")", "{", "return", "this", ".", "uri", "(", "uri", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "uri", "(", "String", "uri", ",", "boolean", "append", ")", "{", "if", "(", "UriUtils", ".", "isAbsolute", "(", "uri", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "uri", "=", "=", "null", ")", "{", "uri", "=", "\"", "<STR_LIT:/>", "\"", ";", "}", "else", "if", "(", "(", "!", "uri", ".", "isEmpty", "(", ")", "&", "&", "!", "uri", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", "&", "&", "!", "uri", ".", "startsWith", "(", "\"", "<STR_LIT:{>", "\"", ")", "&", "&", "!", "uri", ".", "startsWith", "(", "\"", "<STR_LIT:?>", "\"", ")", "&", "&", "!", "uri", ".", "startsWith", "(", "\"", "<STR_LIT:;>", "\"", ")", ")", ")", "{", "uri", "=", "\"", "<STR_LIT:/>", "\"", "+", "uri", ";", "}", "Matcher", "queryMatcher", "=", "QUERY_STRING_PATTERN", ".", "matcher", "(", "uri", ")", ";", "if", "(", "queryMatcher", ".", "find", "(", ")", ")", "{", "String", "queryString", "=", "uri", ".", "substring", "(", "queryMatcher", ".", "start", "(", ")", "+", "1", ")", ";", "this", ".", "extractQueryTemplates", "(", "queryString", ",", "append", ")", ";", "uri", "=", "uri", ".", "substring", "(", "0", ",", "queryMatcher", ".", "start", "(", ")", ")", ";", "}", "int", "fragmentIndex", "=", "uri", ".", "indexOf", "(", "<CHAR_LIT>", ")", ";", "if", "(", "fragmentIndex", ">", "-", "1", ")", "{", "fragment", "=", "uri", ".", "substring", "(", "fragmentIndex", ")", ";", "uri", "=", "uri", ".", "substring", "(", "0", ",", "fragmentIndex", ")", ";", "}", "if", "(", "append", "&", "&", "this", ".", "uriTemplate", "!", "=", "null", ")", "{", "this", ".", "uriTemplate", "=", "UriTemplate", ".", "append", "(", "this", ".", "uriTemplate", ",", "uri", ")", ";", "}", "else", "{", "this", ".", "uriTemplate", "=", "UriTemplate", ".", "create", "(", "uri", ",", "!", "this", ".", "decodeSlash", ",", "this", ".", "charset", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "target", "(", "String", "target", ")", "{", "if", "(", "Util", ".", "isBlank", "(", "target", ")", ")", "{", "return", "this", ";", "}", "if", "(", "!", "UriUtils", ".", "isAbsolute", "(", "target", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "target", ".", "endsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", "{", "target", "=", "target", ".", "substring", "(", "0", ",", "target", ".", "length", "(", ")", "-", "1", ")", ";", "}", "try", "{", "URI", "targetUri", "=", "URI", ".", "create", "(", "target", ")", ";", "if", "(", "Util", ".", "isNotBlank", "(", "targetUri", ".", "getRawQuery", "(", ")", ")", ")", "{", "this", ".", "extractQueryTemplates", "(", "targetUri", ".", "getRawQuery", "(", ")", ",", "true", ")", ";", "}", "this", ".", "target", "=", "targetUri", ".", "getScheme", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "targetUri", ".", "getAuthority", "(", ")", "+", "targetUri", ".", "getPath", "(", ")", ";", "if", "(", "targetUri", ".", "getFragment", "(", ")", "!", "=", "null", ")", "{", "this", ".", "fragment", "=", "\"", "<STR_LIT:#>", "\"", "+", "targetUri", ".", "getFragment", "(", ")", ";", "}", "}", "catch", "(", "IllegalArgumentException", "iae", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ",", "iae", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "String", "url", "(", ")", "{", "StringBuilder", "url", "=", "new", "StringBuilder", "(", "this", ".", "path", "(", ")", ")", ";", "if", "(", "!", "this", ".", "queries", ".", "isEmpty", "(", ")", ")", "{", "url", ".", "append", "(", "this", ".", "queryLine", "(", ")", ")", ";", "}", "if", "(", "fragment", "!", "=", "null", ")", "{", "url", ".", "append", "(", "fragment", ")", ";", "}", "return", "url", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "path", "(", ")", "{", "StringBuilder", "path", "=", "new", "StringBuilder", "(", ")", ";", "if", "(", "this", ".", "target", "!", "=", "null", ")", "{", "path", ".", "append", "(", "this", ".", "target", ")", ";", "}", "if", "(", "this", ".", "uriTemplate", "!", "=", "null", ")", "{", "path", ".", "append", "(", "this", ".", "uriTemplate", ".", "toString", "(", ")", ")", ";", "}", "if", "(", "path", ".", "length", "(", ")", "=", "=", "0", ")", "{", "path", ".", "append", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "return", "path", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "List", "<", "String", ">", "variables", "(", ")", "{", "List", "<", "String", ">", "variables", "=", "new", "ArrayList", "<", ">", "(", "this", ".", "uriTemplate", ".", "getVariables", "(", ")", ")", ";", "for", "(", "QueryTemplate", "queryTemplate", ":", "this", ".", "queries", ".", "values", "(", ")", ")", "{", "variables", ".", "addAll", "(", "queryTemplate", ".", "getVariables", "(", ")", ")", ";", "}", "for", "(", "HeaderTemplate", "headerTemplate", ":", "this", ".", "headers", ".", "values", "(", ")", ")", "{", "variables", ".", "addAll", "(", "headerTemplate", ".", "getVariables", "(", ")", ")", ";", "}", "if", "(", "this", ".", "bodyTemplate", "!", "=", "null", ")", "{", "variables", ".", "addAll", "(", "this", ".", "bodyTemplate", ".", "getVariables", "(", ")", ")", ";", "}", "return", "variables", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "query", "(", "String", "name", ",", "String", ".", ".", ".", "values", ")", "{", "if", "(", "values", "=", "=", "null", ")", "{", "return", "query", "(", "name", ",", "Collections", ".", "emptyList", "(", ")", ")", ";", "}", "return", "query", "(", "name", ",", "Arrays", ".", "asList", "(", "values", ")", ")", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "query", "(", "String", "name", ",", "Iterable", "<", "String", ">", "values", ")", "{", "return", "appendQuery", "(", "name", ",", "values", ",", "this", ".", "collectionFormat", ")", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "query", "(", "String", "name", ",", "Iterable", "<", "String", ">", "values", ",", "CollectionFormat", "collectionFormat", ")", "{", "return", "appendQuery", "(", "name", ",", "values", ",", "collectionFormat", ")", ";", "}", "</s>"]
["<s>", "private", "RequestTemplate", "appendQuery", "(", "String", "name", ",", "Iterable", "<", "String", ">", "values", ",", "CollectionFormat", "collectionFormat", ")", "{", "if", "(", "!", "values", ".", "iterator", "(", ")", ".", "hasNext", "(", ")", ")", "{", "this", ".", "queries", ".", "remove", "(", "name", ")", ";", "return", "this", ";", "}", "this", ".", "queries", ".", "compute", "(", "name", ",", "(", "key", ",", "queryTemplate", ")", "-", ">", "{", "if", "(", "queryTemplate", "=", "=", "null", ")", "{", "return", "QueryTemplate", ".", "create", "(", "name", ",", "values", ",", "this", ".", "charset", ",", "collectionFormat", ",", "this", ".", "decodeSlash", ")", ";", "}", "else", "{", "return", "QueryTemplate", ".", "append", "(", "queryTemplate", ",", "values", ",", "collectionFormat", ",", "this", ".", "decodeSlash", ")", ";", "}", "}", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "RequestTemplate", "queries", "(", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "queries", ")", "{", "if", "(", "queries", "=", "=", "null", "|", "|", "queries", ".", "isEmpty", "(", ")", ")", "{", "this", ".", "queries", ".", "clear", "(", ")", ";", "}", "else", "{", "queries", ".", "forEach", "(", "this", ":", ":", "query", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "queries", "(", ")", "{", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "queryMap", "=", "new", "LinkedHashMap", "<", ">", "(", ")", ";", "this", ".", "queries", ".", "forEach", "(", "(", "key", ",", "queryTemplate", ")", "-", ">", "{", "List", "<", "String", ">", "values", "=", "new", "ArrayList", "<", ">", "(", "queryTemplate", ".", "getValues", "(", ")", ")", ";", "queryMap", ".", "put", "(", "key", ",", "Collections", ".", "unmodifiableList", "(", "values", ")", ")", ";", "}", ")", ";", "return", "Collections", ".", "unmodifiableMap", "(", "queryMap", ")", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "header", "(", "String", "name", ",", "String", ".", ".", ".", "values", ")", "{", "return", "header", "(", "name", ",", "Arrays", ".", "asList", "(", "values", ")", ")", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "header", "(", "String", "name", ",", "Iterable", "<", "String", ">", "values", ")", "{", "if", "(", "name", "=", "=", "null", "|", "|", "name", ".", "isEmpty", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "values", "=", "=", "null", ")", "{", "values", "=", "Collections", ".", "emptyList", "(", ")", ";", "}", "return", "appendHeader", "(", "name", ",", "values", ")", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "removeHeader", "(", "String", "name", ")", "{", "if", "(", "name", "=", "=", "null", "|", "|", "name", ".", "isEmpty", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "headers", ".", "remove", "(", "name", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "private", "RequestTemplate", "appendHeader", "(", "String", "name", ",", "Iterable", "<", "String", ">", "values", ")", "{", "if", "(", "!", "values", ".", "iterator", "(", ")", ".", "hasNext", "(", ")", ")", "{", "this", ".", "headers", ".", "remove", "(", "name", ")", ";", "return", "this", ";", "}", "this", ".", "headers", ".", "compute", "(", "name", ",", "(", "headerName", ",", "headerTemplate", ")", "-", ">", "{", "if", "(", "headerTemplate", "=", "=", "null", ")", "{", "return", "HeaderTemplate", ".", "create", "(", "headerName", ",", "values", ")", ";", "}", "else", "{", "return", "HeaderTemplate", ".", "append", "(", "headerTemplate", ",", "values", ")", ";", "}", "}", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "headers", "(", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ")", "{", "if", "(", "headers", "!", "=", "null", "&", "&", "!", "headers", ".", "isEmpty", "(", ")", ")", "{", "headers", ".", "forEach", "(", "this", ":", ":", "header", ")", ";", "}", "else", "{", "this", ".", "headers", ".", "clear", "(", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "(", ")", "{", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headerMap", "=", "new", "TreeMap", "<", ">", "(", "String", ".", "CASE_INSENSITIVE_ORDER", ")", ";", "this", ".", "headers", ".", "forEach", "(", "(", "key", ",", "headerTemplate", ")", "-", ">", "{", "List", "<", "String", ">", "values", "=", "new", "ArrayList", "<", ">", "(", "headerTemplate", ".", "getValues", "(", ")", ")", ";", "if", "(", "!", "values", ".", "isEmpty", "(", ")", ")", "{", "headerMap", ".", "put", "(", "key", ",", "Collections", ".", "unmodifiableList", "(", "values", ")", ")", ";", "}", "}", ")", ";", "return", "Collections", ".", "unmodifiableMap", "(", "headerMap", ")", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "body", "(", "byte", "[", "]", "data", ",", "Charset", "charset", ")", "{", "this", ".", "body", "(", "Request", ".", "Body", ".", "create", "(", "data", ",", "charset", ")", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "body", "(", "String", "bodyText", ")", "{", "this", ".", "body", "(", "Request", ".", "Body", ".", "create", "(", "bodyText", ".", "getBytes", "(", "this", ".", "charset", ")", ",", "this", ".", "charset", ")", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "RequestTemplate", "body", "(", "Request", ".", "Body", "body", ")", "{", "this", ".", "body", "=", "body", ";", "this", ".", "bodyTemplate", "=", "null", ";", "header", "(", "CONTENT_LENGTH", ")", ";", "if", "(", "body", ".", "length", "(", ")", ">", "0", ")", "{", "header", "(", "CONTENT_LENGTH", ",", "String", ".", "valueOf", "(", "body", ".", "length", "(", ")", ")", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Charset", "requestCharset", "(", ")", "{", "if", "(", "this", ".", "body", "!", "=", "null", ")", "{", "return", "this", ".", "body", ".", "getEncoding", "(", ")", ".", "orElse", "(", "this", ".", "charset", ")", ";", "}", "return", "this", ".", "charset", ";", "}", "</s>"]
["<s>", "public", "byte", "[", "]", "body", "(", ")", "{", "return", "body", ".", "asBytes", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "Request", ".", "Body", "requestBody", "(", ")", "{", "return", "this", ".", "body", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "bodyTemplate", "(", "String", "bodyTemplate", ")", "{", "this", ".", "bodyTemplate", "=", "BodyTemplate", ".", "create", "(", "bodyTemplate", ",", "this", ".", "charset", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestTemplate", "bodyTemplate", "(", "String", "bodyTemplate", ",", "Charset", "charset", ")", "{", "this", ".", "bodyTemplate", "=", "BodyTemplate", ".", "create", "(", "bodyTemplate", ",", "charset", ")", ";", "this", ".", "charset", "=", "charset", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "String", "bodyTemplate", "(", ")", "{", "if", "(", "this", ".", "bodyTemplate", "!", "=", "null", ")", "{", "return", "this", ".", "bodyTemplate", ".", "toString", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "request", "(", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "hasRequestVariable", "(", "String", "variable", ")", "{", "return", "this", ".", "getRequestVariables", "(", ")", ".", "contains", "(", "variable", ")", ";", "}", "</s>"]
["<s>", "public", "Collection", "<", "String", ">", "getRequestVariables", "(", ")", "{", "final", "Collection", "<", "String", ">", "variables", "=", "new", "LinkedHashSet", "<", ">", "(", "this", ".", "uriTemplate", ".", "getVariables", "(", ")", ")", ";", "this", ".", "queries", ".", "values", "(", ")", ".", "forEach", "(", "queryTemplate", "-", ">", "variables", ".", "addAll", "(", "queryTemplate", ".", "getVariables", "(", ")", ")", ")", ";", "this", ".", "headers", ".", "values", "(", ")", ".", "forEach", "(", "headerTemplate", "-", ">", "variables", ".", "addAll", "(", "headerTemplate", ".", "getVariables", "(", ")", ")", ")", ";", "return", "variables", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "public", "boolean", "resolved", "(", ")", "{", "return", "this", ".", "resolved", ";", "}", "</s>"]
["<s>", "public", "String", "queryLine", "(", ")", "{", "StringBuilder", "queryString", "=", "new", "StringBuilder", "(", ")", ";", "if", "(", "!", "this", ".", "queries", ".", "isEmpty", "(", ")", ")", "{", "Iterator", "<", "QueryTemplate", ">", "iterator", "=", "this", ".", "queries", ".", "values", "(", ")", ".", "iterator", "(", ")", ";", "while", "(", "iterator", ".", "hasNext", "(", ")", ")", "{", "QueryTemplate", "queryTemplate", "=", "iterator", ".", "next", "(", ")", ";", "String", "query", "=", "queryTemplate", ".", "toString", "(", ")", ";", "if", "(", "query", "!", "=", "null", "&", "&", "!", "query", ".", "isEmpty", "(", ")", ")", "{", "queryString", ".", "append", "(", "query", ")", ";", "if", "(", "iterator", ".", "hasNext", "(", ")", ")", "{", "queryString", ".", "append", "(", "\"", "<STR_LIT:&>", "\"", ")", ";", "}", "}", "}", "}", "String", "result", "=", "queryString", ".", "toString", "(", ")", ";", "if", "(", "result", ".", "endsWith", "(", "\"", "<STR_LIT:&>", "\"", ")", ")", "{", "result", "=", "result", ".", "substring", "(", "0", ",", "result", ".", "length", "(", ")", "-", "1", ")", ";", "}", "if", "(", "!", "result", ".", "isEmpty", "(", ")", ")", "{", "result", "=", "\"", "<STR_LIT:?>", "\"", "+", "result", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "private", "void", "extractQueryTemplates", "(", "String", "queryString", ",", "boolean", "append", ")", "{", "Map", "<", "String", ",", "List", "<", "String", ">", ">", "queryParameters", "=", "Arrays", ".", "stream", "(", "queryString", ".", "split", "(", "\"", "<STR_LIT:&>", "\"", ")", ")", ".", "map", "(", "this", ":", ":", "splitQueryParameter", ")", ".", "collect", "(", "Collectors", ".", "groupingBy", "(", "SimpleImmutableEntry", ":", ":", "getKey", ",", "LinkedHashMap", ":", ":", "new", ",", "Collectors", ".", "mapping", "(", "Entry", ":", ":", "getValue", ",", "Collectors", ".", "toList", "(", ")", ")", ")", ")", ";", "if", "(", "!", "append", ")", "{", "this", ".", "queries", ".", "clear", "(", ")", ";", "}", "queryParameters", ".", "forEach", "(", "this", ":", ":", "query", ")", ";", "}", "</s>"]
["<s>", "private", "SimpleImmutableEntry", "<", "String", ",", "String", ">", "splitQueryParameter", "(", "String", "pair", ")", "{", "int", "eq", "=", "pair", ".", "indexOf", "(", "\"", "<STR_LIT:=>", "\"", ")", ";", "final", "String", "name", "=", "(", "eq", ">", "0", ")", "?", "pair", ".", "substring", "(", "0", ",", "eq", ")", ":", "pair", ";", "final", "String", "value", "=", "(", "eq", ">", "0", "&", "&", "eq", "<", "pair", ".", "length", "(", ")", ")", "?", "pair", ".", "substring", "(", "eq", "+", "1", ")", ":", "null", ";", "return", "new", "SimpleImmutableEntry", "<", ">", "(", "name", ",", "value", ")", ";", "}", "</s>"]
["<s>", "@", "Experimental", "public", "RequestTemplate", "methodMetadata", "(", "MethodMetadata", "methodMetadata", ")", "{", "this", ".", "methodMetadata", "=", "methodMetadata", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Experimental", "public", "RequestTemplate", "feignTarget", "(", "Target", "<", "?", ">", "feignTarget", ")", "{", "this", ".", "feignTarget", "=", "feignTarget", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Experimental", "public", "MethodMetadata", "methodMetadata", "(", ")", "{", "return", "methodMetadata", ";", "}", "</s>"]
["<s>", "@", "Experimental", "public", "Target", "<", "?", ">", "feignTarget", "(", ")", "{", "return", "feignTarget", ";", "}", "</s>"]
["<s>", "RequestTemplate", "create", "(", "Object", "[", "]", "argv", ")", ";", "</s>"]
["<s>", "String", "expand", "(", "Object", "value", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "String", "expand", "(", "Object", "value", ")", "{", "return", "value", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "Map", "<", "String", ",", "Object", ">", "encode", "(", "Object", "object", ")", ";", "</s>"]
["<s>", "Class", "<", "T", ">", "type", "(", ")", ";", "</s>"]
["<s>", "String", "name", "(", ")", ";", "</s>"]
["<s>", "String", "url", "(", ")", ";", "</s>"]
["<s>", "public", "Request", "apply", "(", "RequestTemplate", "input", ")", ";", "</s>"]
["<s>", "public", "HardCodedTarget", "(", "Class", "<", "T", ">", "type", ",", "String", "url", ")", "{", "this", "(", "type", ",", "url", ",", "url", ")", ";", "}", "</s>"]
["<s>", "public", "HardCodedTarget", "(", "Class", "<", "T", ">", "type", ",", "String", "name", ",", "String", "url", ")", "{", "this", ".", "type", "=", "checkNotNull", "(", "type", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "name", "=", "checkNotNull", "(", "emptyToNull", "(", "name", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "url", "=", "checkNotNull", "(", "emptyToNull", "(", "url", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Class", "<", "T", ">", "type", "(", ")", "{", "return", "type", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "name", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "url", "(", ")", "{", "return", "url", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Request", "apply", "(", "RequestTemplate", "input", ")", "{", "if", "(", "input", ".", "url", "(", ")", ".", "indexOf", "(", "\"", "<STR_LIT>", "\"", ")", "!", "=", "0", ")", "{", "input", ".", "target", "(", "url", "(", ")", ")", ";", "}", "return", "input", ".", "request", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "obj", "instanceof", "HardCodedTarget", ")", "{", "HardCodedTarget", "<", "?", ">", "other", "=", "(", "HardCodedTarget", ")", "obj", ";", "return", "type", ".", "equals", "(", "other", ".", "type", ")", "&", "&", "name", ".", "equals", "(", "other", ".", "name", ")", "&", "&", "url", ".", "equals", "(", "other", ".", "url", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "int", "result", "=", "<NUM_LIT>", ";", "result", "=", "<NUM_LIT:31>", "*", "result", "+", "type", ".", "hashCode", "(", ")", ";", "result", "=", "<NUM_LIT:31>", "*", "result", "+", "name", ".", "hashCode", "(", ")", ";", "result", "=", "<NUM_LIT:31>", "*", "result", "+", "url", ".", "hashCode", "(", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "if", "(", "name", ".", "equals", "(", "url", ")", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "type", ".", "getSimpleName", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "url", "+", "\"", "<STR_LIT:)>", "\"", ";", "}", "return", "\"", "<STR_LIT>", "\"", "+", "type", ".", "getSimpleName", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "name", "+", "\"", "<STR_LIT>", "\"", "+", "url", "+", "\"", "<STR_LIT:)>", "\"", ";", "}", "</s>"]
["<s>", "EmptyTarget", "(", "Class", "<", "T", ">", "type", ",", "String", "name", ")", "{", "this", ".", "type", "=", "checkNotNull", "(", "type", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "name", "=", "checkNotNull", "(", "emptyToNull", "(", "name", ")", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "static", "<", "T", ">", "EmptyTarget", "<", "T", ">", "create", "(", "Class", "<", "T", ">", "type", ")", "{", "return", "new", "EmptyTarget", "<", "T", ">", "(", "type", ",", "\"", "<STR_LIT::>", "\"", "+", "type", ".", "getSimpleName", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "<", "T", ">", "EmptyTarget", "<", "T", ">", "create", "(", "Class", "<", "T", ">", "type", ",", "String", "name", ")", "{", "return", "new", "EmptyTarget", "<", "T", ">", "(", "type", ",", "name", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Class", "<", "T", ">", "type", "(", ")", "{", "return", "type", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "name", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "url", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Request", "apply", "(", "RequestTemplate", "input", ")", "{", "if", "(", "input", ".", "url", "(", ")", ".", "indexOf", "(", "\"", "<STR_LIT>", "\"", ")", "!", "=", "0", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "input", ".", "request", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "obj", "instanceof", "EmptyTarget", ")", "{", "EmptyTarget", "<", "?", ">", "other", "=", "(", "EmptyTarget", ")", "obj", ";", "return", "type", ".", "equals", "(", "other", ".", "type", ")", "&", "&", "name", ".", "equals", "(", "other", ".", "name", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "int", "result", "=", "<NUM_LIT>", ";", "result", "=", "<NUM_LIT:31>", "*", "result", "+", "type", ".", "hashCode", "(", ")", ";", "result", "=", "<NUM_LIT:31>", "*", "result", "+", "name", ".", "hashCode", "(", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "if", "(", "name", ".", "equals", "(", "\"", "<STR_LIT::>", "\"", "+", "type", ".", "getSimpleName", "(", ")", ")", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "type", ".", "getSimpleName", "(", ")", "+", "\"", "<STR_LIT:)>", "\"", ";", "}", "return", "\"", "<STR_LIT>", "\"", "+", "type", ".", "getSimpleName", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "name", "+", "\"", "<STR_LIT:)>", "\"", ";", "}", "</s>"]
["<s>", "void", "apply", "(", "RequestTemplate", "template", ")", ";", "</s>"]
["<s>", "public", "static", "<", "C", ">", "AsyncBuilder", "<", "C", ">", "asyncBuilder", "(", ")", "{", "return", "new", "AsyncBuilder", "<", ">", "(", ")", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "(", ")", "{", "super", "(", ")", ";", "this", ".", "builder", "=", "Feign", ".", "builder", "(", ")", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "defaultContextSupplier", "(", "Supplier", "<", "C", ">", "supplier", ")", "{", "this", ".", "defaultContextSupplier", "=", "supplier", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "client", "(", "AsyncClient", "<", "C", ">", "client", ")", "{", "this", ".", "client", "=", "client", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "mapAndDecode", "(", "ResponseMapper", "mapper", ",", "Decoder", "decoder", ")", "{", "this", ".", "decoder", "=", "(", "response", ",", "type", ")", "-", ">", "decoder", ".", "decode", "(", "mapper", ".", "map", "(", "response", ",", "type", ")", ",", "type", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "decoder", "(", "Decoder", "decoder", ")", "{", "this", ".", "decoder", "=", "decoder", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "decode404", "(", ")", "{", "this", ".", "decode404", "=", "true", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "errorDecoder", "(", "ErrorDecoder", "errorDecoder", ")", "{", "this", ".", "errorDecoder", "=", "errorDecoder", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "doNotCloseAfterDecode", "(", ")", "{", "this", ".", "closeAfterDecode", "=", "false", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "target", "(", "Class", "<", "T", ">", "apiType", ",", "String", "url", ")", "{", "return", "target", "(", "new", "HardCodedTarget", "<", ">", "(", "apiType", ",", "url", ")", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "target", "(", "Class", "<", "T", ">", "apiType", ",", "String", "url", ",", "C", "context", ")", "{", "return", "target", "(", "new", "HardCodedTarget", "<", ">", "(", "apiType", ",", "url", ")", ",", "context", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "target", "(", "Target", "<", "T", ">", "target", ")", "{", "return", "build", "(", ")", ".", "newInstance", "(", "target", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "target", "(", "Target", "<", "T", ">", "target", ",", "C", "context", ")", "{", "return", "build", "(", ")", ".", "newInstance", "(", "target", ",", "context", ")", ";", "}", "</s>"]
["<s>", "private", "AsyncBuilder", "<", "C", ">", "lazyInits", "(", ")", "{", "if", "(", "client", "=", "=", "null", ")", "{", "client", "=", "new", "AsyncClient", ".", "Default", "<", ">", "(", "new", "Client", ".", "Default", "(", "null", ",", "null", ")", ",", "LazyInitializedExecutorService", ".", "instance", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncFeign", "<", "C", ">", "build", "(", ")", "{", "return", "new", "ReflectiveAsyncFeign", "<", ">", "(", "lazyInits", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "logLevel", "(", "Logger", ".", "Level", "logLevel", ")", "{", "builder", ".", "logLevel", "(", "logLevel", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "contract", "(", "Contract", "contract", ")", "{", "builder", ".", "contract", "(", "contract", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "logger", "(", "Logger", "logger", ")", "{", "builder", ".", "logger", "(", "logger", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "encoder", "(", "Encoder", "encoder", ")", "{", "builder", ".", "encoder", "(", "encoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "queryMapEncoder", "(", "QueryMapEncoder", "queryMapEncoder", ")", "{", "builder", ".", "queryMapEncoder", "(", "queryMapEncoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "options", "(", "Options", "options", ")", "{", "builder", ".", "options", "(", "options", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "requestInterceptor", "(", "RequestInterceptor", "requestInterceptor", ")", "{", "builder", ".", "requestInterceptor", "(", "requestInterceptor", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "requestInterceptors", "(", "Iterable", "<", "RequestInterceptor", ">", "requestInterceptors", ")", "{", "builder", ".", "requestInterceptors", "(", "requestInterceptors", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "AsyncBuilder", "<", "C", ">", "invocationHandlerFactory", "(", "InvocationHandlerFactory", "invocationHandlerFactory", ")", "{", "builder", ".", "invocationHandlerFactory", "(", "invocationHandlerFactory", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "protected", "AsyncFeign", "(", "AsyncBuilder", "<", "C", ">", "asyncBuilder", ")", "{", "this", ".", "activeContext", "=", "new", "ThreadLocal", "<", ">", "(", ")", ";", "this", ".", "defaultContextSupplier", "=", "asyncBuilder", ".", "defaultContextSupplier", ";", "this", ".", "client", "=", "asyncBuilder", ".", "client", ";", "this", ".", "logLevel", "=", "asyncBuilder", ".", "logLevel", ";", "this", ".", "logger", "=", "asyncBuilder", ".", "logger", ";", "this", ".", "responseHandler", "=", "new", "AsyncResponseHandler", "(", "asyncBuilder", ".", "logLevel", ",", "asyncBuilder", ".", "logger", ",", "asyncBuilder", ".", "decoder", ",", "asyncBuilder", ".", "errorDecoder", ",", "asyncBuilder", ".", "decode404", ",", "asyncBuilder", ".", "closeAfterDecode", ")", ";", "asyncBuilder", ".", "builder", ".", "client", "(", "this", ":", ":", "stageExecution", ")", ";", "asyncBuilder", ".", "builder", ".", "decoder", "(", "this", ":", ":", "stageDecode", ")", ";", "asyncBuilder", ".", "builder", ".", "forceDecoding", "(", ")", ";", "this", ".", "feign", "=", "asyncBuilder", ".", "builder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Response", "stageExecution", "(", "Request", "request", ",", "Options", "options", ")", "{", "final", "Response", "result", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "request", "(", "request", ")", ".", "build", "(", ")", ";", "final", "AsyncInvocation", "<", "C", ">", "invocationContext", "=", "activeContext", ".", "get", "(", ")", ";", "invocationContext", ".", "setResponseFuture", "(", "client", ".", "execute", "(", "request", ",", "options", ",", "Optional", ".", "ofNullable", "(", "invocationContext", ".", "context", "(", ")", ")", ")", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "long", "elapsedTime", "(", "long", "start", ")", "{", "return", "TimeUnit", ".", "NANOSECONDS", ".", "toMillis", "(", "System", ".", "nanoTime", "(", ")", "-", "start", ")", ";", "}", "</s>"]
["<s>", "private", "Object", "stageDecode", "(", "Response", "response", ",", "Type", "type", ")", "{", "final", "AsyncInvocation", "<", "C", ">", "invocationContext", "=", "activeContext", ".", "get", "(", ")", ";", "final", "CompletableFuture", "<", "Object", ">", "result", "=", "new", "CompletableFuture", "<", ">", "(", ")", ";", "invocationContext", ".", "responseFuture", "(", ")", ".", "whenComplete", "(", "(", "r", ",", "t", ")", "-", ">", "{", "final", "long", "elapsedTime", "=", "elapsedTime", "(", "invocationContext", ".", "startNanos", "(", ")", ")", ";", "if", "(", "t", "!", "=", "null", ")", "{", "if", "(", "logLevel", "!", "=", "Logger", ".", "Level", ".", "NONE", "&", "&", "t", "instanceof", "IOException", ")", "{", "final", "IOException", "e", "=", "(", "IOException", ")", "t", ";", "logger", ".", "logIOException", "(", "invocationContext", ".", "configKey", "(", ")", ",", "logLevel", ",", "e", ",", "elapsedTime", ")", ";", "}", "result", ".", "completeExceptionally", "(", "t", ")", ";", "}", "else", "{", "responseHandler", ".", "handleResponse", "(", "result", ",", "invocationContext", ".", "configKey", "(", ")", ",", "r", ",", "invocationContext", ".", "underlyingType", "(", ")", ",", "elapsedTime", ")", ";", "}", "}", ")", ";", "result", ".", "whenComplete", "(", "(", "r", ",", "t", ")", "-", ">", "{", "if", "(", "result", ".", "isCancelled", "(", ")", ")", "{", "invocationContext", ".", "responseFuture", "(", ")", ".", "cancel", "(", "true", ")", ";", "}", "}", ")", ";", "if", "(", "invocationContext", ".", "isAsyncReturnType", "(", ")", ")", "{", "return", "result", ";", "}", "try", "{", "return", "result", ".", "join", "(", ")", ";", "}", "catch", "(", "final", "CompletionException", "e", ")", "{", "final", "Response", "r", "=", "invocationContext", ".", "responseFuture", "(", ")", ".", "join", "(", ")", ";", "Throwable", "cause", "=", "e", ".", "getCause", "(", ")", ";", "if", "(", "cause", "=", "=", "null", ")", "{", "cause", "=", "e", ";", "}", "throw", "new", "AsyncJoinException", "(", "r", ".", "status", "(", ")", ",", "cause", ".", "getMessage", "(", ")", ",", "r", ".", "request", "(", ")", ",", "cause", ")", ";", "}", "}", "</s>"]
["<s>", "protected", "void", "setInvocationContext", "(", "AsyncInvocation", "<", "C", ">", "invocationContext", ")", "{", "activeContext", ".", "set", "(", "invocationContext", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "clearInvocationContext", "(", ")", "{", "activeContext", ".", "remove", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "<", "T", ">", "T", "newInstance", "(", "Target", "<", "T", ">", "target", ")", "{", "return", "newInstance", "(", "target", ",", "defaultContextSupplier", ".", "get", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "newInstance", "(", "Target", "<", "T", ">", "target", ",", "C", "context", ")", "{", "return", "wrap", "(", "target", ".", "type", "(", ")", ",", "feign", ".", "newInstance", "(", "target", ")", ",", "context", ")", ";", "}", "</s>"]
["<s>", "protected", "abstract", "<", "T", ">", "T", "wrap", "(", "Class", "<", "T", ">", "type", ",", "T", "instance", ",", "C", "context", ")", ";", "</s>"]
["<s>", "CompletableFuture", "<", "Response", ">", "execute", "(", "Request", "request", ",", "Options", "options", ",", "Optional", "<", "C", ">", "requestContext", ")", ";", "</s>"]
["<s>", "public", "Default", "(", "Client", "client", ",", "ExecutorService", "executorService", ")", "{", "this", ".", "client", "=", "client", ";", "this", ".", "executorService", "=", "executorService", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "CompletableFuture", "<", "Response", ">", "execute", "(", "Request", "request", ",", "Options", "options", ",", "Optional", "<", "C", ">", "requestContext", ")", "{", "final", "CompletableFuture", "<", "Response", ">", "result", "=", "new", "CompletableFuture", "<", ">", "(", ")", ";", "final", "Future", "<", "?", ">", "future", "=", "executorService", ".", "submit", "(", "(", ")", "-", ">", "{", "try", "{", "result", ".", "complete", "(", "client", ".", "execute", "(", "request", ",", "options", ")", ")", ";", "}", "catch", "(", "final", "Exception", "e", ")", "{", "result", ".", "completeExceptionally", "(", "e", ")", ";", "}", "}", ")", ";", "result", ".", "whenComplete", "(", "(", "response", ",", "throwable", ")", "-", ">", "{", "if", "(", "result", ".", "isCancelled", "(", ")", ")", "{", "future", ".", "cancel", "(", "true", ")", ";", "}", "}", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "public", "Pseudo", "(", "Client", "client", ")", "{", "this", ".", "client", "=", "client", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "CompletableFuture", "<", "Response", ">", "execute", "(", "Request", "request", ",", "Options", "options", ",", "Optional", "<", "C", ">", "requestContext", ")", "{", "final", "CompletableFuture", "<", "Response", ">", "result", "=", "new", "CompletableFuture", "<", ">", "(", ")", ";", "try", "{", "result", ".", "complete", "(", "client", ".", "execute", "(", "request", ",", "options", ")", ")", ";", "}", "catch", "(", "final", "Exception", "e", ")", "{", "result", ".", "completeExceptionally", "(", "e", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "public", "static", "Builder", "builder", "(", ")", "{", "return", "new", "Builder", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "configKey", "(", "Class", "targetType", ",", "Method", "method", ")", "{", "StringBuilder", "builder", "=", "new", "StringBuilder", "(", ")", ";", "builder", ".", "append", "(", "targetType", ".", "getSimpleName", "(", ")", ")", ";", "builder", ".", "append", "(", "<CHAR_LIT>", ")", ".", "append", "(", "method", ".", "getName", "(", ")", ")", ".", "append", "(", "<CHAR_LIT:(>", ")", ";", "for", "(", "Type", "param", ":", "method", ".", "getGenericParameterTypes", "(", ")", ")", "{", "param", "=", "Types", ".", "resolve", "(", "targetType", ",", "targetType", ",", "param", ")", ";", "builder", ".", "append", "(", "Types", ".", "getRawType", "(", "param", ")", ".", "getSimpleName", "(", ")", ")", ".", "append", "(", "<CHAR_LIT:U+002C>", ")", ";", "}", "if", "(", "method", ".", "getParameterTypes", "(", ")", ".", "length", ">", "0", ")", "{", "builder", ".", "deleteCharAt", "(", "builder", ".", "length", "(", ")", "-", "1", ")", ";", "}", "return", "builder", ".", "append", "(", "<CHAR_LIT:)>", ")", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "static", "String", "configKey", "(", "Method", "method", ")", "{", "return", "configKey", "(", "method", ".", "getDeclaringClass", "(", ")", ",", "method", ")", ";", "}", "</s>"]
["<s>", "public", "abstract", "<", "T", ">", "T", "newInstance", "(", "Target", "<", "T", ">", "target", ")", ";", "</s>"]
["<s>", "public", "Builder", "logLevel", "(", "Logger", ".", "Level", "logLevel", ")", "{", "this", ".", "logLevel", "=", "logLevel", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "contract", "(", "Contract", "contract", ")", "{", "this", ".", "contract", "=", "contract", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "client", "(", "Client", "client", ")", "{", "this", ".", "client", "=", "client", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "retryer", "(", "Retryer", "retryer", ")", "{", "this", ".", "retryer", "=", "retryer", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "logger", "(", "Logger", "logger", ")", "{", "this", ".", "logger", "=", "logger", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "encoder", "(", "Encoder", "encoder", ")", "{", "this", ".", "encoder", "=", "encoder", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "decoder", "(", "Decoder", "decoder", ")", "{", "this", ".", "decoder", "=", "decoder", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "queryMapEncoder", "(", "QueryMapEncoder", "queryMapEncoder", ")", "{", "this", ".", "queryMapEncoder", "=", "queryMapEncoder", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "mapAndDecode", "(", "ResponseMapper", "mapper", ",", "Decoder", "decoder", ")", "{", "this", ".", "decoder", "=", "new", "ResponseMappingDecoder", "(", "mapper", ",", "decoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "decode404", "(", ")", "{", "this", ".", "decode404", "=", "true", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "errorDecoder", "(", "ErrorDecoder", "errorDecoder", ")", "{", "this", ".", "errorDecoder", "=", "errorDecoder", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "options", "(", "Options", "options", ")", "{", "this", ".", "options", "=", "options", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "requestInterceptor", "(", "RequestInterceptor", "requestInterceptor", ")", "{", "this", ".", "requestInterceptors", ".", "add", "(", "requestInterceptor", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "requestInterceptors", "(", "Iterable", "<", "RequestInterceptor", ">", "requestInterceptors", ")", "{", "this", ".", "requestInterceptors", ".", "clear", "(", ")", ";", "for", "(", "RequestInterceptor", "requestInterceptor", ":", "requestInterceptors", ")", "{", "this", ".", "requestInterceptors", ".", "add", "(", "requestInterceptor", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "invocationHandlerFactory", "(", "InvocationHandlerFactory", "invocationHandlerFactory", ")", "{", "this", ".", "invocationHandlerFactory", "=", "invocationHandlerFactory", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "doNotCloseAfterDecode", "(", ")", "{", "this", ".", "closeAfterDecode", "=", "false", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "exceptionPropagationPolicy", "(", "ExceptionPropagationPolicy", "propagationPolicy", ")", "{", "this", ".", "propagationPolicy", "=", "propagationPolicy", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "addCapability", "(", "Capability", "capability", ")", "{", "this", ".", "capabilities", ".", "add", "(", "capability", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "Builder", "forceDecoding", "(", ")", "{", "this", ".", "forceDecoding", "=", "true", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "target", "(", "Class", "<", "T", ">", "apiType", ",", "String", "url", ")", "{", "return", "target", "(", "new", "HardCodedTarget", "<", "T", ">", "(", "apiType", ",", "url", ")", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "target", "(", "Target", "<", "T", ">", "target", ")", "{", "return", "build", "(", ")", ".", "newInstance", "(", "target", ")", ";", "}", "</s>"]
["<s>", "public", "Feign", "build", "(", ")", "{", "Client", "client", "=", "Capability", ".", "enrich", "(", "this", ".", "client", ",", "capabilities", ")", ";", "Retryer", "retryer", "=", "Capability", ".", "enrich", "(", "this", ".", "retryer", ",", "capabilities", ")", ";", "List", "<", "RequestInterceptor", ">", "requestInterceptors", "=", "this", ".", "requestInterceptors", ".", "stream", "(", ")", ".", "map", "(", "ri", "-", ">", "Capability", ".", "enrich", "(", "ri", ",", "capabilities", ")", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "Logger", "logger", "=", "Capability", ".", "enrich", "(", "this", ".", "logger", ",", "capabilities", ")", ";", "Contract", "contract", "=", "Capability", ".", "enrich", "(", "this", ".", "contract", ",", "capabilities", ")", ";", "Options", "options", "=", "Capability", ".", "enrich", "(", "this", ".", "options", ",", "capabilities", ")", ";", "Encoder", "encoder", "=", "Capability", ".", "enrich", "(", "this", ".", "encoder", ",", "capabilities", ")", ";", "Decoder", "decoder", "=", "Capability", ".", "enrich", "(", "this", ".", "decoder", ",", "capabilities", ")", ";", "InvocationHandlerFactory", "invocationHandlerFactory", "=", "Capability", ".", "enrich", "(", "this", ".", "invocationHandlerFactory", ",", "capabilities", ")", ";", "QueryMapEncoder", "queryMapEncoder", "=", "Capability", ".", "enrich", "(", "this", ".", "queryMapEncoder", ",", "capabilities", ")", ";", "SynchronousMethodHandler", ".", "Factory", "synchronousMethodHandlerFactory", "=", "new", "SynchronousMethodHandler", ".", "Factory", "(", "client", ",", "retryer", ",", "requestInterceptors", ",", "logger", ",", "logLevel", ",", "decode404", ",", "closeAfterDecode", ",", "propagationPolicy", ",", "forceDecoding", ")", ";", "ParseHandlersByName", "handlersByName", "=", "new", "ParseHandlersByName", "(", "contract", ",", "options", ",", "encoder", ",", "decoder", ",", "queryMapEncoder", ",", "errorDecoder", ",", "synchronousMethodHandlerFactory", ")", ";", "return", "new", "ReflectiveFeign", "(", "handlersByName", ",", "invocationHandlerFactory", ",", "queryMapEncoder", ")", ";", "}", "</s>"]
["<s>", "public", "ResponseMappingDecoder", "(", "ResponseMapper", "mapper", ",", "Decoder", "decoder", ")", "{", "this", ".", "mapper", "=", "mapper", ";", "this", ".", "delegate", "=", "decoder", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "return", "delegate", ".", "decode", "(", "mapper", ".", "map", "(", "response", ",", "type", ")", ",", "type", ")", ";", "}", "</s>"]
["<s>", "public", "AsyncJoinException", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ",", "Throwable", "cause", ")", "{", "super", "(", "status", ",", "message", ",", "request", ",", "checkNotNull", "(", "cause", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "static", "Request", "create", "(", "String", "method", ",", "String", "url", ",", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ",", "byte", "[", "]", "body", ",", "Charset", "charset", ")", "{", "checkNotNull", "(", "method", ",", "\"", "<STR_LIT>", "\"", ",", "method", ")", ";", "final", "HttpMethod", "httpMethod", "=", "HttpMethod", ".", "valueOf", "(", "method", ".", "toUpperCase", "(", ")", ")", ";", "return", "create", "(", "httpMethod", ",", "url", ",", "headers", ",", "body", ",", "charset", ",", "null", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "static", "Request", "create", "(", "HttpMethod", "httpMethod", ",", "String", "url", ",", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ",", "byte", "[", "]", "body", ",", "Charset", "charset", ")", "{", "return", "create", "(", "httpMethod", ",", "url", ",", "headers", ",", "Body", ".", "create", "(", "body", ",", "charset", ")", ",", "null", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Request", "create", "(", "HttpMethod", "httpMethod", ",", "String", "url", ",", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ",", "byte", "[", "]", "body", ",", "Charset", "charset", ",", "RequestTemplate", "requestTemplate", ")", "{", "return", "create", "(", "httpMethod", ",", "url", ",", "headers", ",", "Body", ".", "create", "(", "body", ",", "charset", ")", ",", "requestTemplate", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Request", "create", "(", "HttpMethod", "httpMethod", ",", "String", "url", ",", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ",", "Body", "body", ",", "RequestTemplate", "requestTemplate", ")", "{", "return", "new", "Request", "(", "httpMethod", ",", "url", ",", "headers", ",", "body", ",", "requestTemplate", ")", ";", "}", "</s>"]
["<s>", "Request", "(", "HttpMethod", "method", ",", "String", "url", ",", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ",", "Body", "body", ",", "RequestTemplate", "requestTemplate", ")", "{", "this", ".", "httpMethod", "=", "checkNotNull", "(", "method", ",", "\"", "<STR_LIT>", "\"", ",", "method", ".", "name", "(", ")", ")", ";", "this", ".", "url", "=", "checkNotNull", "(", "url", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "headers", "=", "checkNotNull", "(", "headers", ",", "\"", "<STR_LIT>", "\"", ",", "method", ",", "url", ")", ";", "this", ".", "body", "=", "body", ";", "this", ".", "requestTemplate", "=", "requestTemplate", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "String", "method", "(", ")", "{", "return", "httpMethod", ".", "name", "(", ")", ";", "}", "</s>"]
["<s>", "public", "HttpMethod", "httpMethod", "(", ")", "{", "return", "this", ".", "httpMethod", ";", "}", "</s>"]
["<s>", "public", "String", "url", "(", ")", "{", "return", "url", ";", "}", "</s>"]
["<s>", "public", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "(", ")", "{", "return", "Collections", ".", "unmodifiableMap", "(", "headers", ")", ";", "}", "</s>"]
["<s>", "public", "Charset", "charset", "(", ")", "{", "return", "body", ".", "encoding", ";", "}", "</s>"]
["<s>", "public", "byte", "[", "]", "body", "(", ")", "{", "return", "body", ".", "data", ";", "}", "</s>"]
["<s>", "public", "boolean", "isBinary", "(", ")", "{", "return", "body", ".", "isBinary", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "length", "(", ")", "{", "return", "this", ".", "body", ".", "length", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "final", "StringBuilder", "builder", "=", "new", "StringBuilder", "(", ")", ";", "builder", ".", "append", "(", "httpMethod", ")", ".", "append", "(", "<CHAR_LIT>", ")", ".", "append", "(", "url", ")", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "for", "(", "final", "String", "field", ":", "headers", ".", "keySet", "(", ")", ")", "{", "for", "(", "final", "String", "value", ":", "valuesOrEmpty", "(", "headers", ",", "field", ")", ")", "{", "builder", ".", "append", "(", "field", ")", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "value", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "}", "}", "if", "(", "body", "!", "=", "null", ")", "{", "builder", ".", "append", "(", "<STR_LIT:\\n>", ")", ".", "append", "(", "body", ".", "asString", "(", ")", ")", ";", "}", "return", "builder", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "Options", "(", "int", "connectTimeoutMillis", ",", "int", "readTimeoutMillis", ",", "boolean", "followRedirects", ")", "{", "this", "(", "connectTimeoutMillis", ",", "TimeUnit", ".", "MILLISECONDS", ",", "readTimeoutMillis", ",", "TimeUnit", ".", "MILLISECONDS", ",", "followRedirects", ")", ";", "}", "</s>"]
["<s>", "public", "Options", "(", "long", "connectTimeout", ",", "TimeUnit", "connectTimeoutUnit", ",", "long", "readTimeout", ",", "TimeUnit", "readTimeoutUnit", ",", "boolean", "followRedirects", ")", "{", "super", "(", ")", ";", "this", ".", "connectTimeout", "=", "connectTimeout", ";", "this", ".", "connectTimeoutUnit", "=", "connectTimeoutUnit", ";", "this", ".", "readTimeout", "=", "readTimeout", ";", "this", ".", "readTimeoutUnit", "=", "readTimeoutUnit", ";", "this", ".", "followRedirects", "=", "followRedirects", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "Options", "(", "int", "connectTimeoutMillis", ",", "int", "readTimeoutMillis", ")", "{", "this", "(", "connectTimeoutMillis", ",", "readTimeoutMillis", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "Options", "(", ")", "{", "this", "(", "<NUM_LIT:10>", ",", "TimeUnit", ".", "SECONDS", ",", "<NUM_LIT>", ",", "TimeUnit", ".", "SECONDS", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "int", "connectTimeoutMillis", "(", ")", "{", "return", "(", "int", ")", "connectTimeoutUnit", ".", "toMillis", "(", "connectTimeout", ")", ";", "}", "</s>"]
["<s>", "public", "int", "readTimeoutMillis", "(", ")", "{", "return", "(", "int", ")", "readTimeoutUnit", ".", "toMillis", "(", "readTimeout", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isFollowRedirects", "(", ")", "{", "return", "followRedirects", ";", "}", "</s>"]
["<s>", "public", "long", "connectTimeout", "(", ")", "{", "return", "connectTimeout", ";", "}", "</s>"]
["<s>", "public", "TimeUnit", "connectTimeoutUnit", "(", ")", "{", "return", "connectTimeoutUnit", ";", "}", "</s>"]
["<s>", "public", "long", "readTimeout", "(", ")", "{", "return", "readTimeout", ";", "}", "</s>"]
["<s>", "public", "TimeUnit", "readTimeoutUnit", "(", ")", "{", "return", "readTimeoutUnit", ";", "}", "</s>"]
["<s>", "@", "Experimental", "public", "RequestTemplate", "requestTemplate", "(", ")", "{", "return", "this", ".", "requestTemplate", ";", "}", "</s>"]
["<s>", "private", "Body", "(", ")", "{", "super", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Body", "(", "byte", "[", "]", "data", ")", "{", "this", ".", "data", "=", "data", ";", "}", "</s>"]
["<s>", "private", "Body", "(", "byte", "[", "]", "data", ",", "Charset", "encoding", ")", "{", "this", ".", "data", "=", "data", ";", "this", ".", "encoding", "=", "encoding", ";", "}", "</s>"]
["<s>", "public", "Optional", "<", "Charset", ">", "getEncoding", "(", ")", "{", "return", "Optional", ".", "ofNullable", "(", "this", ".", "encoding", ")", ";", "}", "</s>"]
["<s>", "public", "int", "length", "(", ")", "{", "return", "data", "!", "=", "null", "?", "data", ".", "length", ":", "0", ";", "}", "</s>"]
["<s>", "public", "byte", "[", "]", "asBytes", "(", ")", "{", "return", "data", ";", "}", "</s>"]
["<s>", "public", "String", "asString", "(", ")", "{", "return", "!", "isBinary", "(", ")", "?", "new", "String", "(", "data", ",", "encoding", ")", ":", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "public", "boolean", "isBinary", "(", ")", "{", "return", "encoding", "=", "=", "null", "|", "|", "data", "=", "=", "null", ";", "}", "</s>"]
["<s>", "public", "static", "Body", "create", "(", "String", "data", ")", "{", "return", "new", "Body", "(", "data", ".", "getBytes", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Body", "create", "(", "String", "data", ",", "Charset", "charset", ")", "{", "return", "new", "Body", "(", "data", ".", "getBytes", "(", "charset", ")", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Body", "create", "(", "byte", "[", "]", "data", ")", "{", "return", "new", "Body", "(", "data", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Body", "create", "(", "byte", "[", "]", "data", ",", "Charset", "charset", ")", "{", "return", "new", "Body", "(", "data", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "static", "Body", "encoded", "(", "byte", "[", "]", "data", ",", "Charset", "charset", ")", "{", "return", "create", "(", "data", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Body", "empty", "(", ")", "{", "return", "new", "Body", "(", ")", ";", "}", "</s>"]
["<s>", "public", "BasicAuthRequestInterceptor", "(", "String", "username", ",", "String", "password", ")", "{", "this", "(", "username", ",", "password", ",", "ISO_8859_1", ")", ";", "}", "</s>"]
["<s>", "public", "BasicAuthRequestInterceptor", "(", "String", "username", ",", "String", "password", ",", "Charset", "charset", ")", "{", "checkNotNull", "(", "username", ",", "\"", "<STR_LIT>", "\"", ")", ";", "checkNotNull", "(", "password", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "headerValue", "=", "\"", "<STR_LIT>", "\"", "+", "base64Encode", "(", "(", "username", "+", "\"", "<STR_LIT::>", "\"", "+", "password", ")", ".", "getBytes", "(", "charset", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "base64Encode", "(", "byte", "[", "]", "bytes", ")", "{", "return", "Base64", ".", "encode", "(", "bytes", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "RequestTemplate", "template", ")", "{", "template", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "headerValue", ")", ";", "}", "</s>"]
["<s>", "private", "Base64", "(", ")", "{", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "decode", "(", "byte", "[", "]", "in", ")", "{", "return", "decode", "(", "in", ",", "in", ".", "length", ")", ";", "}", "</s>"]
["<s>", "public", "static", "byte", "[", "]", "decode", "(", "byte", "[", "]", "in", ",", "int", "len", ")", "{", "int", "length", "=", "len", "/", "<NUM_LIT:4>", "*", "<NUM_LIT:3>", ";", "if", "(", "length", "=", "=", "0", ")", "{", "return", "EMPTY_BYTE_ARRAY", ";", "}", "byte", "[", "]", "out", "=", "new", "byte", "[", "length", "]", ";", "int", "pad", "=", "0", ";", "byte", "chr", ";", "for", "(", ";", ";", "len", "-", "-", ")", "{", "chr", "=", "in", "[", "len", "-", "1", "]", ";", "if", "(", "(", "chr", "=", "=", "<STR_LIT:\\n>", ")", "|", "|", "(", "chr", "=", "=", "<STR_LIT>", ")", "|", "|", "(", "chr", "=", "=", "<CHAR_LIT>", ")", "|", "|", "(", "chr", "=", "=", "<STR_LIT:\\t>", ")", ")", "{", "continue", ";", "}", "if", "(", "chr", "=", "=", "<CHAR_LIT:=>", ")", "{", "pad", "+", "+", ";", "}", "else", "{", "break", ";", "}", "}", "int", "outIndex", "=", "0", ";", "int", "inIndex", "=", "0", ";", "int", "bits", "=", "0", ";", "int", "quantum", "=", "0", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "len", ";", "i", "+", "+", ")", "{", "chr", "=", "in", "[", "i", "]", ";", "if", "(", "(", "chr", "=", "=", "<STR_LIT:\\n>", ")", "|", "|", "(", "chr", "=", "=", "<STR_LIT>", ")", "|", "|", "(", "chr", "=", "=", "<CHAR_LIT>", ")", "|", "|", "(", "chr", "=", "=", "<STR_LIT:\\t>", ")", ")", "{", "continue", ";", "}", "if", "(", "(", "chr", ">", "=", "<CHAR_LIT:A>", ")", "&", "&", "(", "chr", "<", "=", "<CHAR_LIT:Z>", ")", ")", "{", "bits", "=", "chr", "-", "<NUM_LIT>", ";", "}", "else", "if", "(", "(", "chr", ">", "=", "<CHAR_LIT:a>", ")", "&", "&", "(", "chr", "<", "=", "<CHAR_LIT>", ")", ")", "{", "bits", "=", "chr", "-", "<NUM_LIT>", ";", "}", "else", "if", "(", "(", "chr", ">", "=", "<CHAR_LIT:0>", ")", "&", "&", "(", "chr", "<", "=", "<CHAR_LIT:9>", ")", ")", "{", "bits", "=", "chr", "+", "<NUM_LIT:4>", ";", "}", "else", "if", "(", "chr", "=", "=", "<CHAR_LIT>", ")", "{", "bits", "=", "<NUM_LIT>", ";", "}", "else", "if", "(", "chr", "=", "=", "<CHAR_LIT:/>", ")", "{", "bits", "=", "<NUM_LIT>", ";", "}", "else", "{", "return", "null", ";", "}", "quantum", "=", "(", "quantum", "<", "<", "<NUM_LIT:6>", ")", "|", "(", "byte", ")", "bits", ";", "if", "(", "inIndex", "%", "<NUM_LIT:4>", "=", "=", "<NUM_LIT:3>", ")", "{", "out", "[", "outIndex", "+", "+", "]", "=", "(", "byte", ")", "(", "quantum", ">", ">", "<NUM_LIT:16>", ")", ";", "out", "[", "outIndex", "+", "+", "]", "=", "(", "byte", ")", "(", "quantum", ">", ">", "<NUM_LIT:8>", ")", ";", "out", "[", "outIndex", "+", "+", "]", "=", "(", "byte", ")", "quantum", ";", "}", "inIndex", "+", "+", ";", "}", "if", "(", "pad", ">", "0", ")", "{", "quantum", "=", "quantum", "<", "<", "(", "<NUM_LIT:6>", "*", "pad", ")", ";", "out", "[", "outIndex", "+", "+", "]", "=", "(", "byte", ")", "(", "quantum", ">", ">", "<NUM_LIT:16>", ")", ";", "if", "(", "pad", "=", "=", "1", ")", "{", "out", "[", "outIndex", "+", "+", "]", "=", "(", "byte", ")", "(", "quantum", ">", ">", "<NUM_LIT:8>", ")", ";", "}", "}", "byte", "[", "]", "result", "=", "new", "byte", "[", "outIndex", "]", ";", "System", ".", "arraycopy", "(", "out", ",", "0", ",", "result", ",", "0", ",", "outIndex", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "public", "static", "String", "encode", "(", "byte", "[", "]", "in", ")", "{", "int", "length", "=", "(", "in", ".", "length", "+", "<NUM_LIT:2>", ")", "*", "<NUM_LIT:4>", "/", "<NUM_LIT:3>", ";", "byte", "[", "]", "out", "=", "new", "byte", "[", "length", "]", ";", "int", "index", "=", "0", ",", "end", "=", "in", ".", "length", "-", "in", ".", "length", "%", "<NUM_LIT:3>", ";", "for", "(", "int", "i", "=", "0", ";", "i", "<", "end", ";", "i", "+", "=", "<NUM_LIT:3>", ")", "{", "out", "[", "index", "+", "+", "]", "=", "MAP", "[", "(", "in", "[", "i", "]", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:2>", "]", ";", "out", "[", "index", "+", "+", "]", "=", "MAP", "[", "(", "(", "in", "[", "i", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:4>", ")", "|", "(", "(", "in", "[", "i", "+", "1", "]", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:4>", ")", "]", ";", "out", "[", "index", "+", "+", "]", "=", "MAP", "[", "(", "(", "in", "[", "i", "+", "1", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:2>", ")", "|", "(", "(", "in", "[", "i", "+", "<NUM_LIT:2>", "]", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:6>", ")", "]", ";", "out", "[", "index", "+", "+", "]", "=", "MAP", "[", "(", "in", "[", "i", "+", "<NUM_LIT:2>", "]", "&", "<NUM_LIT>", ")", "]", ";", "}", "switch", "(", "in", ".", "length", "%", "<NUM_LIT:3>", ")", "{", "case", "1", ":", "out", "[", "index", "+", "+", "]", "=", "MAP", "[", "(", "in", "[", "end", "]", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:2>", "]", ";", "out", "[", "index", "+", "+", "]", "=", "MAP", "[", "(", "in", "[", "end", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:4>", "]", ";", "out", "[", "index", "+", "+", "]", "=", "<CHAR_LIT:=>", ";", "out", "[", "index", "+", "+", "]", "=", "<CHAR_LIT:=>", ";", "break", ";", "case", "<NUM_LIT:2>", ":", "out", "[", "index", "+", "+", "]", "=", "MAP", "[", "(", "in", "[", "end", "]", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:2>", "]", ";", "out", "[", "index", "+", "+", "]", "=", "MAP", "[", "(", "(", "in", "[", "end", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:4>", ")", "|", "(", "(", "in", "[", "end", "+", "1", "]", "&", "<NUM_LIT>", ")", ">", ">", "<NUM_LIT:4>", ")", "]", ";", "out", "[", "index", "+", "+", "]", "=", "MAP", "[", "(", "(", "in", "[", "end", "+", "1", "]", "&", "<NUM_LIT>", ")", "<", "<", "<NUM_LIT:2>", ")", "]", ";", "out", "[", "index", "+", "+", "]", "=", "<CHAR_LIT:=>", ";", "break", ";", "}", "try", "{", "return", "new", "String", "(", "out", ",", "0", ",", "index", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "UnsupportedEncodingException", "e", ")", "{", "throw", "new", "AssertionError", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", ",", "DecodeException", ",", "FeignException", ";", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "if", "(", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", "|", "|", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", ")", "return", "Util", ".", "emptyValueOf", "(", "type", ")", ";", "if", "(", "response", ".", "body", "(", ")", "=", "=", "null", ")", "return", "null", ";", "if", "(", "byte", "[", "]", ".", "class", ".", "equals", "(", "type", ")", ")", "{", "return", "Util", ".", "toByteArray", "(", "response", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ")", ";", "}", "return", "super", ".", "decode", "(", "response", ",", "type", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "Response", ".", "Body", "body", "=", "response", ".", "body", "(", ")", ";", "if", "(", "body", "=", "=", "null", ")", "{", "return", "null", ";", "}", "if", "(", "String", ".", "class", ".", "equals", "(", "type", ")", ")", "{", "return", "Util", ".", "toString", "(", "body", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ")", ";", "}", "throw", "new", "DecodeException", "(", "response", ".", "status", "(", ")", ",", "format", "(", "\"", "<STR_LIT>", "\"", ",", "type", ")", ",", "response", ".", "request", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "EncodeException", "(", "String", "message", ")", "{", "super", "(", "-", "1", ",", "checkNotNull", "(", "message", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "EncodeException", "(", "String", "message", ",", "Throwable", "cause", ")", "{", "super", "(", "-", "1", ",", "message", ",", "checkNotNull", "(", "cause", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "FeignException", "exception", "=", "errorStatus", "(", "methodKey", ",", "response", ")", ";", "Date", "retryAfter", "=", "retryAfterDecoder", ".", "apply", "(", "firstOrNull", "(", "response", ".", "headers", "(", ")", ",", "RETRY_AFTER", ")", ")", ";", "if", "(", "retryAfter", "!", "=", "null", ")", "{", "return", "new", "RetryableException", "(", "response", ".", "status", "(", ")", ",", "exception", ".", "getMessage", "(", ")", ",", "response", ".", "request", "(", ")", ".", "httpMethod", "(", ")", ",", "exception", ",", "retryAfter", ",", "response", ".", "request", "(", ")", ")", ";", "}", "return", "exception", ";", "}", "</s>"]
["<s>", "private", "<", "T", ">", "T", "firstOrNull", "(", "Map", "<", "String", ",", "Collection", "<", "T", ">", ">", "map", ",", "String", "key", ")", "{", "if", "(", "map", ".", "containsKey", "(", "key", ")", "&", "&", "!", "map", ".", "get", "(", "key", ")", ".", "isEmpty", "(", ")", ")", "{", "return", "map", ".", "get", "(", "key", ")", ".", "iterator", "(", ")", ".", "next", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "RetryAfterDecoder", "(", ")", "{", "this", "(", "RFC822_FORMAT", ")", ";", "}", "</s>"]
["<s>", "RetryAfterDecoder", "(", "DateFormat", "rfc822Format", ")", "{", "this", ".", "rfc822Format", "=", "checkNotNull", "(", "rfc822Format", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "protected", "long", "currentTimeMillis", "(", ")", "{", "return", "System", ".", "currentTimeMillis", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Date", "apply", "(", "String", "retryAfter", ")", "{", "if", "(", "retryAfter", "=", "=", "null", ")", "{", "return", "null", ";", "}", "if", "(", "retryAfter", ".", "matches", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ")", ")", "{", "retryAfter", "=", "retryAfter", ".", "replaceAll", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "long", "deltaMillis", "=", "SECONDS", ".", "toMillis", "(", "Long", ".", "parseLong", "(", "retryAfter", ")", ")", ";", "return", "new", "Date", "(", "currentTimeMillis", "(", ")", "+", "deltaMillis", ")", ";", "}", "synchronized", "(", "rfc822Format", ")", "{", "try", "{", "return", "rfc822Format", ".", "parse", "(", "retryAfter", ")", ";", "}", "catch", "(", "ParseException", "ignored", ")", "{", "return", "null", ";", "}", "}", "}", "</s>"]
["<s>", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "throws", "EncodeException", ";", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "if", "(", "bodyType", "=", "=", "String", ".", "class", ")", "{", "template", ".", "body", "(", "object", ".", "toString", "(", ")", ")", ";", "}", "else", "if", "(", "bodyType", "=", "=", "byte", "[", "]", ".", "class", ")", "{", "template", ".", "body", "(", "(", "byte", "[", "]", ")", "object", ",", "null", ")", ";", "}", "else", "if", "(", "object", "!", "=", "null", ")", "{", "throw", "new", "EncodeException", "(", "format", "(", "\"", "<STR_LIT>", "\"", ",", "object", ".", "getClass", "(", ")", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "DecodeException", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ")", "{", "super", "(", "status", ",", "checkNotNull", "(", "message", ",", "\"", "<STR_LIT>", "\"", ")", ",", "request", ")", ";", "}", "</s>"]
["<s>", "public", "DecodeException", "(", "int", "status", ",", "String", "message", ",", "Request", "request", ",", "Throwable", "cause", ")", "{", "super", "(", "status", ",", "message", ",", "request", ",", "checkNotNull", "(", "cause", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "StreamDecoder", "(", "Decoder", "iteratorDecoder", ")", "{", "this", ".", "iteratorDecoder", "=", "iteratorDecoder", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", ",", "FeignException", "{", "if", "(", "!", "(", "type", "instanceof", "ParameterizedType", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "type", ")", ";", "}", "ParameterizedType", "streamType", "=", "(", "ParameterizedType", ")", "type", ";", "if", "(", "!", "Stream", ".", "class", ".", "equals", "(", "streamType", ".", "getRawType", "(", ")", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "type", ")", ";", "}", "Iterator", "<", "?", ">", "iterator", "=", "(", "Iterator", ")", "iteratorDecoder", ".", "decode", "(", "response", ",", "new", "IteratorParameterizedType", "(", "streamType", ")", ")", ";", "return", "StreamSupport", ".", "stream", "(", "Spliterators", ".", "spliteratorUnknownSize", "(", "iterator", ",", "0", ")", ",", "false", ")", ".", "onClose", "(", "(", ")", "-", ">", "{", "if", "(", "iterator", "instanceof", "Closeable", ")", "{", "ensureClosed", "(", "(", "Closeable", ")", "iterator", ")", ";", "}", "else", "{", "ensureClosed", "(", "response", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "public", "static", "StreamDecoder", "create", "(", "Decoder", "iteratorDecoder", ")", "{", "return", "new", "StreamDecoder", "(", "iteratorDecoder", ")", ";", "}", "</s>"]
["<s>", "IteratorParameterizedType", "(", "ParameterizedType", "streamType", ")", "{", "this", ".", "streamType", "=", "streamType", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Type", "[", "]", "getActualTypeArguments", "(", ")", "{", "return", "streamType", ".", "getActualTypeArguments", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Type", "getRawType", "(", ")", "{", "return", "Iterator", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Type", "getOwnerType", "(", ")", "{", "return", "null", ";", "}", "</s>"]
["<s>", "public", "static", "BodyTemplate", "create", "(", "String", "template", ")", "{", "return", "new", "BodyTemplate", "(", "template", ",", "Util", ".", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "public", "static", "BodyTemplate", "create", "(", "String", "template", ",", "Charset", "charset", ")", "{", "return", "new", "BodyTemplate", "(", "template", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "private", "BodyTemplate", "(", "String", "value", ",", "Charset", "charset", ")", "{", "super", "(", "value", ",", "ExpansionOptions", ".", "ALLOW_UNRESOLVED", ",", "EncodingOptions", ".", "NOT_REQUIRED", ",", "false", ",", "charset", ")", ";", "if", "(", "value", ".", "startsWith", "(", "JSON_TOKEN_START_ENCODED", ")", "&", "&", "value", ".", "endsWith", "(", "JSON_TOKEN_END_ENCODED", ")", ")", "{", "this", ".", "json", "=", "true", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "expand", "(", "Map", "<", "String", ",", "?", ">", "variables", ")", "{", "String", "expanded", "=", "super", ".", "expand", "(", "variables", ")", ";", "if", "(", "this", ".", "json", ")", "{", "expanded", "=", "expanded", ".", "replaceAll", "(", "JSON_TOKEN_START_ENCODED", ",", "JSON_TOKEN_START", ")", ";", "expanded", "=", "expanded", ".", "replaceAll", "(", "JSON_TOKEN_END_ENCODED", ",", "JSON_TOKEN_END", ")", ";", "}", "return", "expanded", ";", "}", "</s>"]
["<s>", "public", "static", "QueryTemplate", "create", "(", "String", "name", ",", "Iterable", "<", "String", ">", "values", ",", "Charset", "charset", ")", "{", "return", "create", "(", "name", ",", "values", ",", "charset", ",", "CollectionFormat", ".", "EXPLODED", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "static", "QueryTemplate", "create", "(", "String", "name", ",", "Iterable", "<", "String", ">", "values", ",", "Charset", "charset", ",", "CollectionFormat", "collectionFormat", ")", "{", "return", "create", "(", "name", ",", "values", ",", "charset", ",", "collectionFormat", ",", "true", ")", ";", "}", "</s>"]
["<s>", "public", "static", "QueryTemplate", "create", "(", "String", "name", ",", "Iterable", "<", "String", ">", "values", ",", "Charset", "charset", ",", "CollectionFormat", "collectionFormat", ",", "boolean", "decodeSlash", ")", "{", "if", "(", "Util", ".", "isBlank", "(", "name", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "values", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "Collection", "<", "String", ">", "remaining", "=", "StreamSupport", ".", "stream", "(", "values", ".", "spliterator", "(", ")", ",", "false", ")", ".", "filter", "(", "Util", ":", ":", "isNotBlank", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "return", "new", "QueryTemplate", "(", "name", ",", "remaining", ",", "charset", ",", "collectionFormat", ",", "decodeSlash", ")", ";", "}", "</s>"]
["<s>", "public", "static", "QueryTemplate", "append", "(", "QueryTemplate", "queryTemplate", ",", "Iterable", "<", "String", ">", "values", ",", "CollectionFormat", "collectionFormat", ",", "boolean", "decodeSlash", ")", "{", "List", "<", "String", ">", "queryValues", "=", "new", "ArrayList", "<", ">", "(", "queryTemplate", ".", "getValues", "(", ")", ")", ";", "queryValues", ".", "addAll", "(", "StreamSupport", ".", "stream", "(", "values", ".", "spliterator", "(", ")", ",", "false", ")", ".", "filter", "(", "Util", ":", ":", "isNotBlank", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ")", ";", "return", "create", "(", "queryTemplate", ".", "getName", "(", ")", ",", "queryValues", ",", "StandardCharsets", ".", "UTF_8", ",", "collectionFormat", ",", "decodeSlash", ")", ";", "}", "</s>"]
["<s>", "private", "QueryTemplate", "(", "String", "name", ",", "Iterable", "<", "String", ">", "values", ",", "Charset", "charset", ",", "CollectionFormat", "collectionFormat", ",", "boolean", "decodeSlash", ")", "{", "this", ".", "values", "=", "new", "CopyOnWriteArrayList", "<", ">", "(", ")", ";", "this", ".", "name", "=", "new", "Template", "(", "name", ",", "ExpansionOptions", ".", "ALLOW_UNRESOLVED", ",", "EncodingOptions", ".", "REQUIRED", ",", "!", "decodeSlash", ",", "charset", ")", ";", "this", ".", "collectionFormat", "=", "collectionFormat", ";", "for", "(", "String", "value", ":", "values", ")", "{", "if", "(", "value", ".", "isEmpty", "(", ")", ")", "{", "continue", ";", "}", "this", ".", "values", ".", "add", "(", "new", "Template", "(", "value", ",", "ExpansionOptions", ".", "REQUIRED", ",", "EncodingOptions", ".", "REQUIRED", ",", "!", "decodeSlash", ",", "charset", ")", ")", ";", "}", "if", "(", "this", ".", "values", ".", "isEmpty", "(", ")", ")", "{", "this", ".", "pure", "=", "true", ";", "}", "}", "</s>"]
["<s>", "public", "List", "<", "String", ">", "getValues", "(", ")", "{", "return", "Collections", ".", "unmodifiableList", "(", "this", ".", "values", ".", "stream", "(", ")", ".", "map", "(", "Template", ":", ":", "toString", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "List", "<", "String", ">", "getVariables", "(", ")", "{", "List", "<", "String", ">", "variables", "=", "new", "ArrayList", "<", ">", "(", "this", ".", "name", ".", "getVariables", "(", ")", ")", ";", "for", "(", "Template", "template", ":", "this", ".", "values", ")", "{", "variables", ".", "addAll", "(", "template", ".", "getVariables", "(", ")", ")", ";", "}", "return", "Collections", ".", "unmodifiableList", "(", "variables", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "this", ".", "queryString", "(", "this", ".", "name", ".", "toString", "(", ")", ",", "this", ".", "getValues", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "String", "expand", "(", "Map", "<", "String", ",", "?", ">", "variables", ")", "{", "String", "name", "=", "this", ".", "name", ".", "expand", "(", "variables", ")", ";", "if", "(", "this", ".", "pure", ")", "{", "return", "name", ";", "}", "List", "<", "String", ">", "expanded", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "for", "(", "Template", "template", ":", "this", ".", "values", ")", "{", "String", "result", "=", "template", ".", "expand", "(", "variables", ")", ";", "if", "(", "result", "=", "=", "null", ")", "{", "continue", ";", "}", "if", "(", "result", ".", "contains", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ")", "{", "expanded", ".", "addAll", "(", "Arrays", ".", "asList", "(", "result", ".", "split", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ")", ")", ";", "}", "else", "{", "expanded", ".", "add", "(", "result", ")", ";", "}", "}", "return", "this", ".", "queryString", "(", "name", ",", "Collections", ".", "unmodifiableList", "(", "expanded", ")", ")", ";", "}", "</s>"]
["<s>", "private", "String", "queryString", "(", "String", "name", ",", "List", "<", "String", ">", "values", ")", "{", "if", "(", "this", ".", "pure", ")", "{", "return", "name", ";", "}", "if", "(", "!", "values", ".", "isEmpty", "(", ")", ")", "{", "return", "this", ".", "collectionFormat", ".", "join", "(", "name", ",", "values", ",", "StandardCharsets", ".", "UTF_8", ")", ".", "toString", "(", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "Expression", "(", "String", "name", ",", "String", "pattern", ")", "{", "this", ".", "name", "=", "name", ";", "Optional", ".", "ofNullable", "(", "pattern", ")", ".", "ifPresent", "(", "s", "-", ">", "this", ".", "pattern", "=", "Pattern", ".", "compile", "(", "s", ")", ")", ";", "}", "</s>"]
["<s>", "abstract", "String", "expand", "(", "Object", "variable", ",", "boolean", "encode", ")", ";", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "this", ".", "name", ";", "}", "</s>"]
["<s>", "Pattern", "getPattern", "(", ")", "{", "return", "pattern", ";", "}", "</s>"]
["<s>", "boolean", "matches", "(", "String", "value", ")", "{", "if", "(", "pattern", "=", "=", "null", ")", "{", "return", "true", ";", "}", "return", "pattern", ".", "matcher", "(", "value", ")", ".", "matches", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getValue", "(", ")", "{", "if", "(", "this", ".", "pattern", "!", "=", "null", ")", "{", "return", "\"", "<STR_LIT:{>", "\"", "+", "this", ".", "name", "+", "\"", "<STR_LIT::>", "\"", "+", "this", ".", "pattern", "+", "\"", "<STR_LIT:}>", "\"", ";", "}", "return", "\"", "<STR_LIT:{>", "\"", "+", "this", ".", "name", "+", "\"", "<STR_LIT:}>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "this", ".", "getValue", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "boolean", "isEncoded", "(", "String", "value", ",", "Charset", "charset", ")", "{", "for", "(", "byte", "b", ":", "value", ".", "getBytes", "(", "charset", ")", ")", "{", "if", "(", "!", "isUnreserved", "(", "(", "char", ")", "b", ")", "&", "&", "b", "!", "=", "<CHAR_LIT>", ")", "{", "return", "false", ";", "}", "}", "return", "PCT_ENCODED_PATTERN", ".", "matcher", "(", "value", ")", ".", "find", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "encode", "(", "String", "value", ")", "{", "return", "encodeChunk", "(", "value", ",", "Util", ".", "UTF_8", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "encode", "(", "String", "value", ",", "Charset", "charset", ")", "{", "return", "encodeChunk", "(", "value", ",", "charset", ",", "false", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "encode", "(", "String", "value", ",", "boolean", "allowReservedCharacters", ")", "{", "return", "encodeInternal", "(", "value", ",", "Util", ".", "UTF_8", ",", "allowReservedCharacters", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "encode", "(", "String", "value", ",", "Charset", "charset", ",", "boolean", "allowReservedCharacters", ")", "{", "return", "encodeInternal", "(", "value", ",", "charset", ",", "allowReservedCharacters", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "decode", "(", "String", "value", ",", "Charset", "charset", ")", "{", "try", "{", "return", "URLDecoder", ".", "decode", "(", "value", ",", "charset", ".", "name", "(", ")", ")", ";", "}", "catch", "(", "UnsupportedEncodingException", "uee", ")", "{", "return", "value", ";", "}", "}", "</s>"]
["<s>", "public", "static", "boolean", "isAbsolute", "(", "String", "uri", ")", "{", "return", "uri", "!", "=", "null", "&", "&", "!", "uri", ".", "isEmpty", "(", ")", "&", "&", "uri", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "static", "String", "encodeInternal", "(", "String", "value", ",", "Charset", "charset", ",", "boolean", "allowReservedCharacters", ")", "{", "Matcher", "matcher", "=", "PCT_ENCODED_PATTERN", ".", "matcher", "(", "value", ")", ";", "if", "(", "!", "matcher", ".", "find", "(", ")", ")", "{", "return", "encodeChunk", "(", "value", ",", "charset", ",", "true", ")", ";", "}", "int", "length", "=", "value", ".", "length", "(", ")", ";", "StringBuilder", "encoded", "=", "new", "StringBuilder", "(", "length", "+", "<NUM_LIT:8>", ")", ";", "int", "index", "=", "0", ";", "do", "{", "String", "before", "=", "value", ".", "substring", "(", "index", ",", "matcher", ".", "start", "(", ")", ")", ";", "encoded", ".", "append", "(", "encodeChunk", "(", "before", ",", "charset", ",", "allowReservedCharacters", ")", ")", ";", "encoded", ".", "append", "(", "matcher", ".", "group", "(", ")", ")", ";", "index", "=", "matcher", ".", "end", "(", ")", ";", "}", "while", "(", "matcher", ".", "find", "(", ")", ")", ";", "String", "tail", "=", "value", ".", "substring", "(", "index", ",", "length", ")", ";", "encoded", ".", "append", "(", "encodeChunk", "(", "tail", ",", "charset", ",", "allowReservedCharacters", ")", ")", ";", "return", "encoded", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "encodeChunk", "(", "String", "value", ",", "Charset", "charset", ",", "boolean", "allowReserved", ")", "{", "if", "(", "isEncoded", "(", "value", ",", "charset", ")", ")", "{", "return", "value", ";", "}", "byte", "[", "]", "data", "=", "value", ".", "getBytes", "(", "charset", ")", ";", "try", "(", "ByteArrayOutputStream", "bos", "=", "new", "ByteArrayOutputStream", "(", ")", ")", "{", "for", "(", "byte", "b", ":", "data", ")", "{", "if", "(", "isUnreserved", "(", "(", "char", ")", "b", ")", ")", "{", "bos", ".", "write", "(", "b", ")", ";", "}", "else", "if", "(", "isReserved", "(", "(", "char", ")", "b", ")", "&", "&", "allowReserved", ")", "{", "bos", ".", "write", "(", "b", ")", ";", "}", "else", "{", "pctEncode", "(", "b", ",", "bos", ")", ";", "}", "}", "return", "new", "String", "(", "bos", ".", "toByteArray", "(", ")", ",", "charset", ")", ";", "}", "catch", "(", "IOException", "ioe", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", "+", "ioe", ".", "getMessage", "(", ")", ",", "ioe", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "void", "pctEncode", "(", "byte", "data", ",", "ByteArrayOutputStream", "bos", ")", "{", "bos", ".", "write", "(", "<CHAR_LIT>", ")", ";", "char", "hex1", "=", "Character", ".", "toUpperCase", "(", "Character", ".", "forDigit", "(", "(", "data", ">", ">", "<NUM_LIT:4>", ")", "&", "<NUM_LIT>", ",", "<NUM_LIT:16>", ")", ")", ";", "char", "hex2", "=", "Character", ".", "toUpperCase", "(", "Character", ".", "forDigit", "(", "data", "&", "<NUM_LIT>", ",", "<NUM_LIT:16>", ")", ")", ";", "bos", ".", "write", "(", "hex1", ")", ";", "bos", ".", "write", "(", "hex2", ")", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "isAlpha", "(", "int", "c", ")", "{", "return", "(", "c", ">", "=", "<CHAR_LIT:a>", "&", "&", "c", "<", "=", "<CHAR_LIT>", "|", "|", "c", ">", "=", "<CHAR_LIT:A>", "&", "&", "c", "<", "=", "<CHAR_LIT:Z>", ")", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "isDigit", "(", "int", "c", ")", "{", "return", "(", "c", ">", "=", "<CHAR_LIT:0>", "&", "&", "c", "<", "=", "<CHAR_LIT:9>", ")", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "isGenericDelimiter", "(", "int", "c", ")", "{", "return", "(", "c", "=", "=", "<CHAR_LIT::>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT:/>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT:[>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT:]>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT>", ")", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "isSubDelimiter", "(", "int", "c", ")", "{", "return", "(", "c", "=", "=", "<CHAR_LIT>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT>", ")", "|", "|", "(", "c", "=", "=", "<STR_LIT>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT:(>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT:)>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT:U+002C>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT:;>", ")", "|", "|", "(", "c", "=", "=", "<CHAR_LIT:=>", ")", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "isUnreserved", "(", "int", "c", ")", "{", "return", "isAlpha", "(", "c", ")", "|", "|", "isDigit", "(", "c", ")", "|", "|", "c", "=", "=", "<CHAR_LIT:->", "|", "|", "c", "=", "=", "<CHAR_LIT:.>", "|", "|", "c", "=", "=", "<CHAR_LIT:_>", "|", "|", "c", "=", "=", "<CHAR_LIT>", ";", "}", "</s>"]
["<s>", "private", "static", "boolean", "isReserved", "(", "int", "c", ")", "{", "return", "isGenericDelimiter", "(", "c", ")", "|", "|", "isSubDelimiter", "(", "c", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "isPchar", "(", "int", "c", ")", "{", "return", "isUnreserved", "(", "c", ")", "|", "|", "isSubDelimiter", "(", "c", ")", "|", "|", "c", "=", "=", "<CHAR_LIT::>", "|", "|", "c", "=", "=", "<CHAR_LIT>", ";", "}", "</s>"]
["<s>", "public", "static", "HeaderTemplate", "create", "(", "String", "name", ",", "Iterable", "<", "String", ">", "values", ")", "{", "if", "(", "name", "=", "=", "null", "|", "|", "name", ".", "isEmpty", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "values", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "StringBuilder", "template", "=", "new", "StringBuilder", "(", ")", ";", "template", ".", "append", "(", "name", ")", ".", "append", "(", "\"", "\"", ")", ";", "Iterator", "<", "String", ">", "iterator", "=", "values", ".", "iterator", "(", ")", ";", "while", "(", "iterator", ".", "hasNext", "(", ")", ")", "{", "template", ".", "append", "(", "iterator", ".", "next", "(", ")", ")", ";", "if", "(", "iterator", ".", "hasNext", "(", ")", ")", "{", "template", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "return", "new", "HeaderTemplate", "(", "template", ".", "toString", "(", ")", ",", "name", ",", "values", ",", "Util", ".", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "public", "static", "HeaderTemplate", "append", "(", "HeaderTemplate", "headerTemplate", ",", "Iterable", "<", "String", ">", "values", ")", "{", "LinkedHashSet", "<", "String", ">", "headerValues", "=", "new", "LinkedHashSet", "<", ">", "(", "headerTemplate", ".", "getValues", "(", ")", ")", ";", "headerValues", ".", "addAll", "(", "StreamSupport", ".", "stream", "(", "values", ".", "spliterator", "(", ")", ",", "false", ")", ".", "filter", "(", "Util", ":", ":", "isNotBlank", ")", ".", "collect", "(", "Collectors", ".", "toCollection", "(", "LinkedHashSet", ":", ":", "new", ")", ")", ")", ";", "return", "create", "(", "headerTemplate", ".", "getName", "(", ")", ",", "headerValues", ")", ";", "}", "</s>"]
["<s>", "private", "HeaderTemplate", "(", "String", "template", ",", "String", "name", ",", "Iterable", "<", "String", ">", "values", ",", "Charset", "charset", ")", "{", "super", "(", "template", ",", "ExpansionOptions", ".", "REQUIRED", ",", "EncodingOptions", ".", "NOT_REQUIRED", ",", "false", ",", "charset", ")", ";", "this", ".", "values", "=", "StreamSupport", ".", "stream", "(", "values", ".", "spliterator", "(", ")", ",", "false", ")", ".", "filter", "(", "Util", ":", ":", "isNotBlank", ")", ".", "collect", "(", "Collectors", ".", "toCollection", "(", "LinkedHashSet", ":", ":", "new", ")", ")", ";", "this", ".", "name", "=", "name", ";", "}", "</s>"]
["<s>", "public", "Collection", "<", "String", ">", "getValues", "(", ")", "{", "return", "Collections", ".", "unmodifiableCollection", "(", "values", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getName", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "public", "static", "Literal", "create", "(", "String", "value", ")", "{", "return", "new", "Literal", "(", "value", ")", ";", "}", "</s>"]
["<s>", "Literal", "(", "String", "value", ")", "{", "if", "(", "value", "=", "=", "null", "|", "|", "value", ".", "isEmpty", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "value", "=", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getValue", "(", ")", "{", "return", "this", ".", "value", ";", "}", "</s>"]
["<s>", "public", "static", "UriTemplate", "create", "(", "String", "template", ",", "Charset", "charset", ")", "{", "return", "new", "UriTemplate", "(", "template", ",", "true", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "public", "static", "UriTemplate", "create", "(", "String", "template", ",", "boolean", "encodeSlash", ",", "Charset", "charset", ")", "{", "return", "new", "UriTemplate", "(", "template", ",", "encodeSlash", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "public", "static", "UriTemplate", "append", "(", "UriTemplate", "uriTemplate", ",", "String", "fragment", ")", "{", "return", "new", "UriTemplate", "(", "uriTemplate", ".", "toString", "(", ")", "+", "fragment", ",", "uriTemplate", ".", "encodeSlash", "(", ")", ",", "uriTemplate", ".", "getCharset", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "UriTemplate", "(", "String", "template", ",", "boolean", "encodeSlash", ",", "Charset", "charset", ")", "{", "super", "(", "template", ",", "ExpansionOptions", ".", "REQUIRED", ",", "EncodingOptions", ".", "REQUIRED", ",", "encodeSlash", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "String", "getValue", "(", ")", ";", "</s>"]
["<s>", "Template", "(", "String", "value", ",", "ExpansionOptions", "allowUnresolved", ",", "EncodingOptions", "encode", ",", "boolean", "encodeSlash", ",", "Charset", "charset", ")", "{", "if", "(", "value", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "this", ".", "template", "=", "value", ";", "this", ".", "allowUnresolved", "=", "ExpansionOptions", ".", "ALLOW_UNRESOLVED", "=", "=", "allowUnresolved", ";", "this", ".", "encode", "=", "encode", ";", "this", ".", "encodeSlash", "=", "encodeSlash", ";", "this", ".", "charset", "=", "charset", ";", "this", ".", "parseTemplate", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "expand", "(", "Map", "<", "String", ",", "?", ">", "variables", ")", "{", "if", "(", "variables", "=", "=", "null", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "StringBuilder", "resolved", "=", "null", ";", "for", "(", "TemplateChunk", "chunk", ":", "this", ".", "templateChunks", ")", "{", "String", "expanded", ";", "if", "(", "chunk", "instanceof", "Expression", ")", "{", "expanded", "=", "this", ".", "resolveExpression", "(", "(", "Expression", ")", "chunk", ",", "variables", ")", ";", "}", "else", "{", "expanded", "=", "chunk", ".", "getValue", "(", ")", ";", "}", "if", "(", "expanded", "=", "=", "null", ")", "{", "continue", ";", "}", "if", "(", "resolved", "=", "=", "null", ")", "{", "resolved", "=", "new", "StringBuilder", "(", ")", ";", "}", "resolved", ".", "append", "(", "expanded", ")", ";", "}", "if", "(", "resolved", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "resolved", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "String", "resolveExpression", "(", "Expression", "expression", ",", "Map", "<", "String", ",", "?", ">", "variables", ")", "{", "String", "resolved", "=", "null", ";", "Object", "value", "=", "variables", ".", "get", "(", "expression", ".", "getName", "(", ")", ")", ";", "if", "(", "value", "!", "=", "null", ")", "{", "String", "expanded", "=", "expression", ".", "expand", "(", "value", ",", "this", ".", "encode", ".", "isEncodingRequired", "(", ")", ")", ";", "if", "(", "expanded", "!", "=", "null", ")", "{", "if", "(", "!", "this", ".", "encodeSlash", ")", "{", "logger", ".", "fine", "(", "\"", "<STR_LIT>", "\"", ")", ";", "expanded", "=", "expanded", ".", "replaceAll", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "resolved", "=", "expanded", ";", "}", "}", "else", "{", "if", "(", "this", ".", "allowUnresolved", ")", "{", "resolved", "=", "encodeLiteral", "(", "expression", ".", "toString", "(", ")", ")", ";", "}", "}", "return", "resolved", ";", "}", "</s>"]
["<s>", "private", "String", "encodeLiteral", "(", "String", "value", ")", "{", "return", "this", ".", "encodeLiteral", "(", ")", "?", "UriUtils", ".", "encode", "(", "value", ",", "this", ".", "charset", ",", "true", ")", ":", "value", ";", "}", "</s>"]
["<s>", "public", "List", "<", "String", ">", "getVariables", "(", ")", "{", "return", "this", ".", "templateChunks", ".", "stream", "(", ")", ".", "filter", "(", "templateChunk", "-", ">", "Expression", ".", "class", ".", "isAssignableFrom", "(", "templateChunk", ".", "getClass", "(", ")", ")", ")", ".", "map", "(", "templateChunk", "-", ">", "(", "(", "Expression", ")", "templateChunk", ")", ".", "getName", "(", ")", ")", ".", "filter", "(", "Objects", ":", ":", "nonNull", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "List", "<", "String", ">", "getLiterals", "(", ")", "{", "return", "this", ".", "templateChunks", ".", "stream", "(", ")", ".", "filter", "(", "templateChunk", "-", ">", "Literal", ".", "class", ".", "isAssignableFrom", "(", "templateChunk", ".", "getClass", "(", ")", ")", ")", ".", "map", "(", "TemplateChunk", ":", ":", "toString", ")", ".", "filter", "(", "Objects", ":", ":", "nonNull", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "isLiteral", "(", ")", "{", "return", "this", ".", "getVariables", "(", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "parseTemplate", "(", ")", "{", "this", ".", "parseFragment", "(", "this", ".", "template", ")", ";", "}", "</s>"]
["<s>", "private", "void", "parseFragment", "(", "String", "fragment", ")", "{", "ChunkTokenizer", "tokenizer", "=", "new", "ChunkTokenizer", "(", "fragment", ")", ";", "while", "(", "tokenizer", ".", "hasNext", "(", ")", ")", "{", "String", "chunk", "=", "tokenizer", ".", "next", "(", ")", ";", "if", "(", "chunk", ".", "startsWith", "(", "\"", "<STR_LIT:{>", "\"", ")", ")", "{", "Expression", "expression", "=", "Expressions", ".", "create", "(", "chunk", ")", ";", "if", "(", "expression", "=", "=", "null", ")", "{", "this", ".", "templateChunks", ".", "add", "(", "Literal", ".", "create", "(", "this", ".", "encodeLiteral", "(", "chunk", ")", ")", ")", ";", "}", "else", "{", "this", ".", "templateChunks", ".", "add", "(", "expression", ")", ";", "}", "}", "else", "{", "this", ".", "templateChunks", ".", "add", "(", "Literal", ".", "create", "(", "this", ".", "encodeLiteral", "(", "chunk", ")", ")", ")", ";", "}", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "this", ".", "templateChunks", ".", "stream", "(", ")", ".", "map", "(", "TemplateChunk", ":", ":", "getValue", ")", ".", "collect", "(", "Collectors", ".", "joining", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "encodeLiteral", "(", ")", "{", "return", "encode", ".", "isEncodingRequired", "(", ")", ";", "}", "</s>"]
["<s>", "boolean", "encodeSlash", "(", ")", "{", "return", "encodeSlash", ";", "}", "</s>"]
["<s>", "public", "Charset", "getCharset", "(", ")", "{", "return", "this", ".", "charset", ";", "}", "</s>"]
["<s>", "ChunkTokenizer", "(", "String", "template", ")", "{", "boolean", "outside", "=", "true", ";", "int", "level", "=", "0", ";", "int", "lastIndex", "=", "0", ";", "int", "idx", ";", "for", "(", "idx", "=", "0", ";", "idx", "<", "template", ".", "length", "(", ")", ";", "idx", "+", "+", ")", "{", "if", "(", "template", ".", "charAt", "(", "idx", ")", "=", "=", "<CHAR_LIT>", ")", "{", "if", "(", "outside", ")", "{", "if", "(", "lastIndex", "<", "idx", ")", "{", "tokens", ".", "add", "(", "template", ".", "substring", "(", "lastIndex", ",", "idx", ")", ")", ";", "}", "lastIndex", "=", "idx", ";", "outside", "=", "false", ";", "}", "else", "{", "level", "+", "+", ";", "}", "}", "else", "if", "(", "template", ".", "charAt", "(", "idx", ")", "=", "=", "<CHAR_LIT:}>", "&", "&", "!", "outside", ")", "{", "if", "(", "level", ">", "0", ")", "{", "level", "-", "-", ";", "}", "else", "{", "if", "(", "lastIndex", "<", "idx", ")", "{", "tokens", ".", "add", "(", "template", ".", "substring", "(", "lastIndex", ",", "idx", "+", "1", ")", ")", ";", "}", "lastIndex", "=", "idx", "+", "1", ";", "outside", "=", "true", ";", "}", "}", "}", "if", "(", "lastIndex", "<", "idx", ")", "{", "tokens", ".", "add", "(", "template", ".", "substring", "(", "lastIndex", ",", "idx", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "boolean", "hasNext", "(", ")", "{", "return", "this", ".", "tokens", ".", "size", "(", ")", ">", "this", ".", "index", ";", "}", "</s>"]
["<s>", "public", "String", "next", "(", ")", "{", "if", "(", "hasNext", "(", ")", ")", "{", "return", "this", ".", "tokens", ".", "get", "(", "this", ".", "index", "+", "+", ")", ";", "}", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "EncodingOptions", "(", "boolean", "shouldEncode", ")", "{", "this", ".", "shouldEncode", "=", "shouldEncode", ";", "}", "</s>"]
["<s>", "public", "boolean", "isEncodingRequired", "(", ")", "{", "return", "this", ".", "shouldEncode", ";", "}", "</s>"]
["<s>", "public", "static", "Expression", "create", "(", "final", "String", "value", ")", "{", "final", "String", "expression", "=", "stripBraces", "(", "value", ")", ";", "if", "(", "expression", "=", "=", "null", "|", "|", "expression", ".", "isEmpty", "(", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "Optional", "<", "Entry", "<", "Pattern", ",", "Class", "<", "?", "extends", "Expression", ">", ">", ">", "matchedExpressionEntry", "=", "expressions", ".", "entrySet", "(", ")", ".", "stream", "(", ")", ".", "filter", "(", "entry", "-", ">", "entry", ".", "getKey", "(", ")", ".", "matcher", "(", "expression", ")", ".", "matches", "(", ")", ")", ".", "findFirst", "(", ")", ";", "if", "(", "!", "matchedExpressionEntry", ".", "isPresent", "(", ")", ")", "{", "return", "null", ";", "}", "Entry", "<", "Pattern", ",", "Class", "<", "?", "extends", "Expression", ">", ">", "matchedExpression", "=", "matchedExpressionEntry", ".", "get", "(", ")", ";", "Pattern", "expressionPattern", "=", "matchedExpression", ".", "getKey", "(", ")", ";", "String", "variableName", "=", "null", ";", "String", "variablePattern", "=", "null", ";", "Matcher", "matcher", "=", "expressionPattern", ".", "matcher", "(", "expression", ")", ";", "if", "(", "matcher", ".", "matches", "(", ")", ")", "{", "variableName", "=", "matcher", ".", "group", "(", "<NUM_LIT:2>", ")", ".", "trim", "(", ")", ";", "if", "(", "variableName", ".", "contains", "(", "\"", "<STR_LIT::>", "\"", ")", ")", "{", "String", "[", "]", "parts", "=", "variableName", ".", "split", "(", "\"", "<STR_LIT::>", "\"", ")", ";", "variableName", "=", "parts", "[", "0", "]", ";", "variablePattern", "=", "parts", "[", "1", "]", ";", "}", "if", "(", "variableName", ".", "contains", "(", "\"", "<STR_LIT:{>", "\"", ")", ")", "{", "return", "null", ";", "}", "}", "return", "new", "SimpleExpression", "(", "variableName", ",", "variablePattern", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "stripBraces", "(", "String", "expression", ")", "{", "if", "(", "expression", "=", "=", "null", ")", "{", "return", "null", ";", "}", "if", "(", "expression", ".", "startsWith", "(", "\"", "<STR_LIT:{>", "\"", ")", "&", "&", "expression", ".", "endsWith", "(", "\"", "<STR_LIT:}>", "\"", ")", ")", "{", "return", "expression", ".", "substring", "(", "1", ",", "expression", ".", "length", "(", ")", "-", "1", ")", ";", "}", "return", "expression", ";", "}", "</s>"]
["<s>", "SimpleExpression", "(", "String", "expression", ",", "String", "pattern", ")", "{", "super", "(", "expression", ",", "pattern", ")", ";", "}", "</s>"]
["<s>", "String", "encode", "(", "Object", "value", ")", "{", "return", "UriUtils", ".", "encode", "(", "value", ".", "toString", "(", ")", ",", "Util", ".", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "String", "expand", "(", "Object", "variable", ",", "boolean", "encode", ")", "{", "StringBuilder", "expanded", "=", "new", "StringBuilder", "(", ")", ";", "if", "(", "Iterable", ".", "class", ".", "isAssignableFrom", "(", "variable", ".", "getClass", "(", ")", ")", ")", "{", "expanded", ".", "append", "(", "this", ".", "expandIterable", "(", "(", "Iterable", "<", "?", ">", ")", "variable", ")", ")", ";", "}", "else", "{", "expanded", ".", "append", "(", "(", "encode", ")", "?", "encode", "(", "variable", ")", ":", "variable", ")", ";", "}", "String", "result", "=", "expanded", ".", "toString", "(", ")", ";", "if", "(", "!", "this", ".", "matches", "(", "result", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "expanded", "+", "\"", "<STR_LIT>", "\"", "+", "this", ".", "getPattern", "(", ")", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "private", "String", "expandIterable", "(", "Iterable", "<", "?", ">", "values", ")", "{", "StringBuilder", "result", "=", "new", "StringBuilder", "(", ")", ";", "for", "(", "Object", "value", ":", "values", ")", "{", "if", "(", "value", "=", "=", "null", ")", "{", "continue", ";", "}", "String", "expanded", "=", "this", ".", "encode", "(", "value", ")", ";", "if", "(", "expanded", ".", "isEmpty", "(", ")", ")", "{", "result", ".", "append", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "}", "else", "{", "if", "(", "result", ".", "length", "(", ")", "!", "=", "0", ")", "{", "if", "(", "!", "result", ".", "toString", "(", ")", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ")", "{", "result", ".", "append", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ";", "}", "}", "result", ".", "append", "(", "expanded", ")", ";", "}", "}", "if", "(", "result", ".", "length", "(", ")", "=", "=", "0", ")", "{", "return", "null", ";", "}", "return", "result", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "public", "OptionalDecoder", "(", "Decoder", "delegate", ")", "{", "Objects", ".", "requireNonNull", "(", "delegate", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "delegate", "=", "delegate", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "if", "(", "!", "isOptional", "(", "type", ")", ")", "{", "return", "delegate", ".", "decode", "(", "response", ",", "type", ")", ";", "}", "if", "(", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", "|", "|", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", ")", "{", "return", "Optional", ".", "empty", "(", ")", ";", "}", "Type", "enclosedType", "=", "Util", ".", "resolveLastTypeParameter", "(", "type", ",", "Optional", ".", "class", ")", ";", "return", "Optional", ".", "ofNullable", "(", "delegate", ".", "decode", "(", "response", ",", "enclosedType", ")", ")", ";", "}", "</s>"]
["<s>", "static", "boolean", "isOptional", "(", "Type", "type", ")", "{", "if", "(", "!", "(", "type", "instanceof", "ParameterizedType", ")", ")", "{", "return", "false", ";", "}", "ParameterizedType", "parameterizedType", "=", "(", "ParameterizedType", ")", "type", ";", "return", "parameterizedType", ".", "getRawType", "(", ")", ".", "equals", "(", "Optional", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Map", "<", "String", ",", "Object", ">", "encode", "(", "Object", "object", ")", "throws", "EncodeException", "{", "try", "{", "ObjectParamMetadata", "metadata", "=", "getMetadata", "(", "object", ".", "getClass", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "propertyNameToValue", "=", "new", "HashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "for", "(", "PropertyDescriptor", "pd", ":", "metadata", ".", "objectProperties", ")", "{", "Method", "method", "=", "pd", ".", "getReadMethod", "(", ")", ";", "Object", "value", "=", "method", ".", "invoke", "(", "object", ")", ";", "if", "(", "value", "!", "=", "null", "&", "&", "value", "!", "=", "object", ")", "{", "Param", "alias", "=", "method", ".", "getAnnotation", "(", "Param", ".", "class", ")", ";", "String", "name", "=", "alias", "!", "=", "null", "?", "alias", ".", "value", "(", ")", ":", "pd", ".", "getName", "(", ")", ";", "propertyNameToValue", ".", "put", "(", "name", ",", "value", ")", ";", "}", "}", "return", "propertyNameToValue", ";", "}", "catch", "(", "IllegalAccessException", "|", "IntrospectionException", "|", "InvocationTargetException", "e", ")", "{", "throw", "new", "EncodeException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "ObjectParamMetadata", "getMetadata", "(", "Class", "<", "?", ">", "objectType", ")", "throws", "IntrospectionException", "{", "ObjectParamMetadata", "metadata", "=", "classToMetadata", ".", "get", "(", "objectType", ")", ";", "if", "(", "metadata", "=", "=", "null", ")", "{", "metadata", "=", "ObjectParamMetadata", ".", "parseObjectType", "(", "objectType", ")", ";", "classToMetadata", ".", "put", "(", "objectType", ",", "metadata", ")", ";", "}", "return", "metadata", ";", "}", "</s>"]
["<s>", "private", "ObjectParamMetadata", "(", "List", "<", "PropertyDescriptor", ">", "objectProperties", ")", "{", "this", ".", "objectProperties", "=", "Collections", ".", "unmodifiableList", "(", "objectProperties", ")", ";", "}", "</s>"]
["<s>", "private", "static", "ObjectParamMetadata", "parseObjectType", "(", "Class", "<", "?", ">", "type", ")", "throws", "IntrospectionException", "{", "List", "<", "PropertyDescriptor", ">", "properties", "=", "new", "ArrayList", "<", "PropertyDescriptor", ">", "(", ")", ";", "for", "(", "PropertyDescriptor", "pd", ":", "Introspector", ".", "getBeanInfo", "(", "type", ")", ".", "getPropertyDescriptors", "(", ")", ")", "{", "boolean", "isGetterMethod", "=", "pd", ".", "getReadMethod", "(", ")", "!", "=", "null", "&", "&", "!", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "pd", ".", "getName", "(", ")", ")", ";", "if", "(", "isGetterMethod", ")", "{", "properties", ".", "add", "(", "pd", ")", ";", "}", "}", "return", "new", "ObjectParamMetadata", "(", "properties", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Map", "<", "String", ",", "Object", ">", "encode", "(", "Object", "object", ")", "throws", "EncodeException", "{", "try", "{", "ObjectParamMetadata", "metadata", "=", "getMetadata", "(", "object", ".", "getClass", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "fieldNameToValue", "=", "new", "HashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "for", "(", "Field", "field", ":", "metadata", ".", "objectFields", ")", "{", "Object", "value", "=", "field", ".", "get", "(", "object", ")", ";", "if", "(", "value", "!", "=", "null", "&", "&", "value", "!", "=", "object", ")", "{", "Param", "alias", "=", "field", ".", "getAnnotation", "(", "Param", ".", "class", ")", ";", "String", "name", "=", "alias", "!", "=", "null", "?", "alias", ".", "value", "(", ")", ":", "field", ".", "getName", "(", ")", ";", "fieldNameToValue", ".", "put", "(", "name", ",", "value", ")", ";", "}", "}", "return", "fieldNameToValue", ";", "}", "catch", "(", "IllegalAccessException", "e", ")", "{", "throw", "new", "EncodeException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "ObjectParamMetadata", "getMetadata", "(", "Class", "<", "?", ">", "objectType", ")", "{", "ObjectParamMetadata", "metadata", "=", "classToMetadata", ".", "get", "(", "objectType", ")", ";", "if", "(", "metadata", "=", "=", "null", ")", "{", "metadata", "=", "ObjectParamMetadata", ".", "parseObjectType", "(", "objectType", ")", ";", "classToMetadata", ".", "put", "(", "objectType", ",", "metadata", ")", ";", "}", "return", "metadata", ";", "}", "</s>"]
["<s>", "private", "ObjectParamMetadata", "(", "List", "<", "Field", ">", "objectFields", ")", "{", "this", ".", "objectFields", "=", "Collections", ".", "unmodifiableList", "(", "objectFields", ")", ";", "}", "</s>"]
["<s>", "private", "static", "ObjectParamMetadata", "parseObjectType", "(", "Class", "<", "?", ">", "type", ")", "{", "List", "<", "Field", ">", "allFields", "=", "new", "ArrayList", "(", ")", ";", "for", "(", "Class", "currentClass", "=", "type", ";", "currentClass", "!", "=", "null", ";", "currentClass", "=", "currentClass", ".", "getSuperclass", "(", ")", ")", "{", "Collections", ".", "addAll", "(", "allFields", ",", "currentClass", ".", "getDeclaredFields", "(", ")", ")", ";", "}", "return", "new", "ObjectParamMetadata", "(", "allFields", ".", "stream", "(", ")", ".", "filter", "(", "field", "-", ">", "!", "field", ".", "isSynthetic", "(", ")", ")", ".", "peek", "(", "field", "-", ">", "field", ".", "setAccessible", "(", "true", ")", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "test", "(", ")", "throws", "Exception", "{", "final", "Compilation", "compilation", "=", "javac", "(", ")", ".", "withProcessors", "(", "new", "GenerateTestStubAPT", "(", ")", ")", ".", "compile", "(", "JavaFileObjects", ".", "forResource", "(", "new", "File", "(", "main", ",", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ".", "toURL", "(", ")", ")", ")", ";", "assertThat", "(", "compilation", ")", ".", "succeeded", "(", ")", ";", "assertThat", "(", "compilation", ")", ".", "generatedSourceFile", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasSourceEquivalentTo", "(", "JavaFileObjects", ".", "forResource", "(", "new", "File", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toURI", "(", ")", ".", "toURL", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "int", "repos", "(", ")", "{", "return", "repos", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "contributors", "(", ")", "{", "return", "contributors", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "createIssue", "(", ")", "{", "return", "createIssue", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "public", "GitHubStub", "(", ")", "{", "this", ".", "invokations", "=", "new", "GitHubInvokations", "(", ")", ";", "this", ".", "answers", "=", "new", "GitHubAnwsers", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Experimental", "public", "GitHubStub", "withRepos", "(", "java", ".", "util", ".", "List", "<", "example", ".", "github", ".", "GitHubExample", ".", "GitHub", ".", "Repository", ">", "repos", ")", "{", "answers", ".", "reposDefault", "=", "repos", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "java", ".", "util", ".", "List", "<", "example", ".", "github", ".", "GitHubExample", ".", "GitHub", ".", "Repository", ">", "repos", "(", "java", ".", "lang", ".", "String", "owner", ")", "{", "invokations", ".", "repos", ".", "incrementAndGet", "(", ")", ";", "return", "answers", ".", "reposDefault", ";", "}", "</s>"]
["<s>", "@", "Experimental", "public", "GitHubStub", "withContributors", "(", "java", ".", "util", ".", "List", "<", "example", ".", "github", ".", "GitHubExample", ".", "GitHub", ".", "Contributor", ">", "contributors", ")", "{", "answers", ".", "contributorsDefault", "=", "contributors", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "java", ".", "util", ".", "List", "<", "example", ".", "github", ".", "GitHubExample", ".", "GitHub", ".", "Contributor", ">", "contributors", "(", "java", ".", "lang", ".", "String", "owner", ",", "java", ".", "lang", ".", "String", "repo", ")", "{", "invokations", ".", "contributors", ".", "incrementAndGet", "(", ")", ";", "return", "answers", ".", "contributorsDefault", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "createIssue", "(", "example", ".", "github", ".", "GitHubExample", ".", "GitHub", ".", "Issue", "issue", ",", "java", ".", "lang", ".", "String", "owner", ",", "java", ".", "lang", ".", "String", "repo", ")", "{", "invokations", ".", "createIssue", ".", "incrementAndGet", "(", ")", ";", "}", "</s>"]
["<s>", "public", "MethodDefinition", "(", "String", "name", ",", "String", "returnType", ",", "boolean", "isVoid", ",", "List", "<", "ArgumentDefinition", ">", "args", ")", "{", "super", "(", ")", ";", "this", ".", "name", "=", "name", ";", "this", ".", "uname", "=", "TO_UPPER_CASE", ".", "convert", "(", "name", ")", ";", "this", ".", "returnType", "=", "returnType", ";", "this", ".", "isVoid", "=", "isVoid", ";", "this", ".", "args", "=", "args", ";", "}", "</s>"]
["<s>", "public", "ClientDefinition", "(", "String", "jpackage", ",", "String", "className", ",", "String", "fullQualifiedName", ")", "{", "super", "(", ")", ";", "this", ".", "jpackage", "=", "jpackage", ";", "this", ".", "className", "=", "className", ";", "this", ".", "fullQualifiedName", "=", "fullQualifiedName", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "process", "(", "Set", "<", "?", "extends", "TypeElement", ">", "annotations", ",", "RoundEnvironment", "roundEnv", ")", "{", "System", ".", "out", ".", "println", "(", "annotations", ")", ";", "System", ".", "out", ".", "println", "(", "roundEnv", ")", ";", "final", "Map", "<", "TypeElement", ",", "List", "<", "ExecutableElement", ">", ">", "clientsToGenerate", "=", "annotations", ".", "stream", "(", ")", ".", "map", "(", "roundEnv", ":", ":", "getElementsAnnotatedWith", ")", ".", "flatMap", "(", "Set", ":", ":", "stream", ")", ".", "map", "(", "ExecutableElement", ".", "class", ":", ":", "cast", ")", ".", "collect", "(", "Collectors", ".", "toMap", "(", "annotatedMethod", "-", ">", "TypeElement", ".", "class", ".", "cast", "(", "annotatedMethod", ".", "getEnclosingElement", "(", ")", ")", ",", "ImmutableList", ":", ":", "of", ",", "(", "list1", ",", "list2", ")", "-", ">", "ImmutableList", ".", "<", "ExecutableElement", ">", "builder", "(", ")", ".", "addAll", "(", "list1", ")", ".", "addAll", "(", "list2", ")", ".", "build", "(", ")", ")", ")", ";", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", "+", "clientsToGenerate", ".", "size", "(", ")", ")", ";", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", "+", "clientsToGenerate", ")", ";", "final", "Handlebars", "handlebars", "=", "new", "Handlebars", "(", ")", ";", "final", "URLTemplateSource", "source", "=", "new", "URLTemplateSource", "(", "\"", "<STR_LIT>", "\"", ",", "getClass", "(", ")", ".", "getResource", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Template", "template", ";", "try", "{", "template", "=", "handlebars", ".", "with", "(", "EscapingStrategy", ".", "JS", ")", ".", "compile", "(", "source", ")", ";", "}", "catch", "(", "final", "IOException", "e", ")", "{", "throw", "new", "IOError", "(", "e", ")", ";", "}", "clientsToGenerate", ".", "forEach", "(", "(", "type", ",", "executables", ")", "-", ">", "{", "try", "{", "final", "String", "jPackage", "=", "readPackage", "(", "type", ")", ";", "final", "String", "className", "=", "type", ".", "getSimpleName", "(", ")", ".", "toString", "(", ")", ";", "final", "JavaFileObject", "builderFile", "=", "processingEnv", ".", "getFiler", "(", ")", ".", "createSourceFile", "(", "jPackage", "+", "\"", "<STR_LIT:.>", "\"", "+", "className", "+", "\"", "<STR_LIT>", "\"", ")", ";", "final", "ClientDefinition", "client", "=", "new", "ClientDefinition", "(", "jPackage", ",", "className", ",", "type", ".", "toString", "(", ")", ")", ";", "final", "List", "<", "MethodDefinition", ">", "methods", "=", "executables", ".", "stream", "(", ")", ".", "map", "(", "method", "-", ">", "{", "final", "String", "methodName", "=", "method", ".", "getSimpleName", "(", ")", ".", "toString", "(", ")", ";", "final", "List", "<", "ArgumentDefinition", ">", "args", "=", "method", ".", "getParameters", "(", ")", ".", "stream", "(", ")", ".", "map", "(", "var", "-", ">", "new", "ArgumentDefinition", "(", "var", ".", "getSimpleName", "(", ")", ".", "toString", "(", ")", ",", "var", ".", "asType", "(", ")", ".", "toString", "(", ")", ")", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "return", "new", "MethodDefinition", "(", "methodName", ",", "method", ".", "getReturnType", "(", ")", ".", "toString", "(", ")", ",", "method", ".", "getReturnType", "(", ")", ".", "getKind", "(", ")", "=", "=", "TypeKind", ".", "VOID", ",", "args", ")", ";", "}", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "final", "Context", "context", "=", "Context", ".", "newBuilder", "(", "template", ")", ".", "combine", "(", "\"", "<STR_LIT>", "\"", ",", "client", ")", ".", "combine", "(", "\"", "<STR_LIT>", "\"", ",", "methods", ")", ".", "resolver", "(", "JavaBeanValueResolver", ".", "INSTANCE", ",", "MapValueResolver", ".", "INSTANCE", ",", "FieldValueResolver", ".", "INSTANCE", ")", ".", "build", "(", ")", ";", "final", "String", "stubSource", "=", "template", ".", "apply", "(", "context", ")", ";", "System", ".", "out", ".", "println", "(", "stubSource", ")", ";", "builderFile", ".", "openWriter", "(", ")", ".", "append", "(", "stubSource", ")", ".", "close", "(", ")", ";", "}", "catch", "(", "final", "Exception", "e", ")", "{", "e", ".", "printStackTrace", "(", ")", ";", "processingEnv", ".", "getMessager", "(", ")", ".", "printMessage", "(", "Kind", ".", "ERROR", ",", "\"", "<STR_LIT>", "\"", "+", "type", ")", ";", "}", "}", ")", ";", "return", "true", ";", "}", "</s>"]
["<s>", "private", "Type", "toJavaType", "(", "TypeMirror", "type", ")", "{", "outType", "(", "type", ".", "getClass", "(", ")", ")", ";", "if", "(", "type", "instanceof", "WildcardType", ")", "{", "}", "return", "Object", ".", "class", ";", "}", "</s>"]
["<s>", "private", "void", "outType", "(", "Class", "<", "?", ">", "class1", ")", "{", "if", "(", "Object", ".", "class", ".", "equals", "(", "class1", ")", "|", "|", "class1", "=", "=", "null", ")", "{", "return", ";", "}", "System", ".", "out", ".", "println", "(", "class1", ")", ";", "outType", "(", "class1", ".", "getSuperclass", "(", ")", ")", ";", "Arrays", ".", "stream", "(", "class1", ".", "getInterfaces", "(", ")", ")", ".", "forEach", "(", "this", ":", ":", "outType", ")", ";", "}", "</s>"]
["<s>", "private", "String", "readPackage", "(", "Element", "type", ")", "{", "if", "(", "type", ".", "getKind", "(", ")", "=", "=", "ElementKind", ".", "PACKAGE", ")", "{", "return", "type", ".", "toString", "(", ")", ";", "}", "if", "(", "type", ".", "getKind", "(", ")", "=", "=", "ElementKind", ".", "CLASS", "|", "|", "type", ".", "getKind", "(", ")", "=", "=", "ElementKind", ".", "INTERFACE", ")", "{", "return", "readPackage", "(", "type", ".", "getEnclosingElement", "(", ")", ")", ";", "}", "return", "null", ";", "}", "</s>"]
["<s>", "public", "ArgumentDefinition", "(", "String", "name", ",", "String", "type", ")", "{", "super", "(", ")", ";", "this", ".", "name", "=", "name", ";", "this", ".", "type", "=", "type", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "SAXDecoder", ".", "ContentHandlerWithResult", "<", "NetworkStatus", ">", "create", "(", ")", "{", "return", "new", "NetworkStatusHandler", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesConfiguredTypes", "(", ")", "throws", "ParseException", ",", "IOException", "{", "assertEquals", "(", "NetworkStatus", ".", "FAILED", ",", "decoder", ".", "decode", "(", "statusFailedResponse", "(", ")", ",", "NetworkStatus", ".", "class", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "decoder", ".", "decode", "(", "statusFailedResponse", "(", ")", ",", "String", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "niceErrorOnUnconfiguredType", "(", ")", "throws", "ParseException", ",", "IOException", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "decoder", ".", "decode", "(", "statusFailedResponse", "(", ")", ",", "int", ".", "class", ")", ";", "}", "</s>"]
["<s>", "private", "Response", "statusFailedResponse", "(", ")", "{", "return", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "<", "String", ",", "Collection", "<", "String", ">", ">", "emptyMap", "(", ")", ")", ".", "body", "(", "statusFailed", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "nullBodyDecodesToNull", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "<", "String", ",", "Collection", "<", "String", ">", ">", "emptyMap", "(", ")", ")", ".", "build", "(", ")", ";", "assertNull", "(", "decoder", ".", "decode", "(", "response", ",", "String", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notFoundDecodesToNull", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "<", "String", ",", "Collection", "<", "String", ">", ">", "emptyMap", "(", ")", ")", ".", "build", "(", ")", ";", "assertThat", "(", "(", "byte", "[", "]", ")", "decoder", ".", "decode", "(", "response", ",", "byte", "[", "]", ".", "class", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "result", "(", ")", "{", "return", "status", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "endElement", "(", "String", "uri", ",", "String", "name", ",", "String", "qName", ")", "{", "if", "(", "qName", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "this", ".", "status", "=", "currentText", ".", "toString", "(", ")", ".", "trim", "(", ")", ";", "}", "currentText", "=", "new", "StringBuilder", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "characters", "(", "char", "ch", "[", "]", ",", "int", "start", ",", "int", "length", ")", "{", "currentText", ".", "append", "(", "ch", ",", "start", ",", "length", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "NetworkStatus", "result", "(", ")", "{", "return", "status", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "endElement", "(", "String", "uri", ",", "String", "name", ",", "String", "qName", ")", "{", "if", "(", "qName", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "this", ".", "status", "=", "NetworkStatus", ".", "valueOf", "(", "currentText", ".", "toString", "(", ")", ".", "trim", "(", ")", ".", "toUpperCase", "(", ")", ")", ";", "}", "currentText", "=", "new", "StringBuilder", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "characters", "(", "char", "ch", "[", "]", ",", "int", "start", ",", "int", "length", ")", "{", "currentText", ".", "append", "(", "ch", ",", "start", ",", "length", ")", ";", "}", "</s>"]
["<s>", "public", "AWSSignatureVersion4", "(", "String", "accessKey", ",", "String", "secretKey", ")", "{", "this", ".", "accessKey", "=", "accessKey", ";", "this", ".", "secretKey", "=", "secretKey", ";", "}", "</s>"]
["<s>", "static", "byte", "[", "]", "hmacSHA256", "(", "String", "data", ",", "byte", "[", "]", "key", ")", "{", "try", "{", "String", "algorithm", "=", "\"", "<STR_LIT>", "\"", ";", "Mac", "mac", "=", "Mac", ".", "getInstance", "(", "algorithm", ")", ";", "mac", ".", "init", "(", "new", "SecretKeySpec", "(", "key", ",", "algorithm", ")", ")", ";", "return", "mac", ".", "doFinal", "(", "data", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "String", "canonicalString", "(", "RequestTemplate", "input", ",", "String", "host", ")", "{", "StringBuilder", "canonicalRequest", "=", "new", "StringBuilder", "(", ")", ";", "canonicalRequest", ".", "append", "(", "input", ".", "method", "(", ")", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "canonicalRequest", ".", "append", "(", "URI", ".", "create", "(", "input", ".", "url", "(", ")", ")", ".", "getPath", "(", ")", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "canonicalRequest", ".", "append", "(", "input", ".", "queryLine", "(", ")", ".", "substring", "(", "1", ")", ")", ";", "canonicalRequest", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "canonicalRequest", ".", "append", "(", "\"", "<STR_LIT::>", "\"", ")", ".", "append", "(", "host", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "canonicalRequest", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "canonicalRequest", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "byte", "[", "]", "data", "=", "input", ".", "body", "(", ")", ";", "String", "bodyText", "=", "(", "data", "!", "=", "null", ")", "?", "new", "String", "(", "data", ",", "input", ".", "requestCharset", "(", ")", ")", ":", "null", ";", "if", "(", "bodyText", "!", "=", "null", ")", "{", "canonicalRequest", ".", "append", "(", "hex", "(", "sha256", "(", "bodyText", ")", ")", ")", ";", "}", "else", "{", "canonicalRequest", ".", "append", "(", "EMPTY_STRING_HASH", ")", ";", "}", "return", "canonicalRequest", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "toSign", "(", "String", "timestamp", ",", "String", "credentialScope", ",", "String", "canonicalRequest", ")", "{", "StringBuilder", "toSign", "=", "new", "StringBuilder", "(", ")", ";", "toSign", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "toSign", ".", "append", "(", "timestamp", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "toSign", ".", "append", "(", "credentialScope", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "toSign", ".", "append", "(", "hex", "(", "sha256", "(", "canonicalRequest", ")", ")", ")", ";", "return", "toSign", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "hex", "(", "byte", "[", "]", "data", ")", "{", "StringBuilder", "result", "=", "new", "StringBuilder", "(", "data", ".", "length", "*", "<NUM_LIT:2>", ")", ";", "for", "(", "byte", "b", ":", "data", ")", "{", "result", ".", "append", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "b", "&", "<NUM_LIT>", ")", ")", ";", "}", "return", "result", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "static", "byte", "[", "]", "sha256", "(", "String", "data", ")", "{", "try", "{", "MessageDigest", "digest", "=", "MessageDigest", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "digest", ".", "digest", "(", "data", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Request", "apply", "(", "RequestTemplate", "input", ")", "{", "if", "(", "!", "input", ".", "headers", "(", ")", ".", "isEmpty", "(", ")", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "input", ".", "body", "(", ")", "!", "=", "null", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "String", "host", "=", "URI", ".", "create", "(", "input", ".", "url", "(", ")", ")", ".", "getHost", "(", ")", ";", "String", "timestamp", ";", "synchronized", "(", "iso8601", ")", "{", "timestamp", "=", "iso8601", ".", "format", "(", "new", "Date", "(", ")", ")", ";", "}", "String", "credentialScope", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ".", "substring", "(", "0", ",", "<NUM_LIT:8>", ")", ",", "region", ",", "service", ",", "\"", "<STR_LIT>", "\"", ")", ";", "input", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "input", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "accessKey", "+", "\"", "<STR_LIT:/>", "\"", "+", "credentialScope", ")", ";", "input", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ";", "input", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "input", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "host", ")", ";", "String", "canonicalString", "=", "canonicalString", "(", "input", ",", "host", ")", ";", "String", "toSign", "=", "toSign", "(", "timestamp", ",", "credentialScope", ",", "canonicalString", ")", ";", "byte", "[", "]", "signatureKey", "=", "signatureKey", "(", "secretKey", ",", "timestamp", ")", ";", "String", "signature", "=", "hex", "(", "hmacSHA256", "(", "toSign", ",", "signatureKey", ")", ")", ";", "input", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "signature", ")", ";", "return", "input", ".", "request", "(", ")", ";", "}", "</s>"]
["<s>", "byte", "[", "]", "signatureKey", "(", "String", "secretKey", ",", "String", "timestamp", ")", "{", "byte", "[", "]", "kSecret", "=", "(", "\"", "<STR_LIT>", "\"", "+", "secretKey", ")", ".", "getBytes", "(", "UTF_8", ")", ";", "byte", "[", "]", "kDate", "=", "hmacSHA256", "(", "timestamp", ".", "substring", "(", "0", ",", "<NUM_LIT:8>", ")", ",", "kSecret", ")", ";", "byte", "[", "]", "kRegion", "=", "hmacSHA256", "(", "region", ",", "kDate", ")", ";", "byte", "[", "]", "kService", "=", "hmacSHA256", "(", "service", ",", "kRegion", ")", ";", "byte", "[", "]", "kSigning", "=", "hmacSHA256", "(", "\"", "<STR_LIT>", "\"", ",", "kService", ")", ";", "return", "kSigning", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", ".", ".", ".", "args", ")", "{", "IAM", "iam", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "SAXDecoder", ".", "builder", "(", ")", ".", "registerContentHandler", "(", "UserIdHandler", ".", "class", ")", ".", "build", "(", ")", ")", ".", "target", "(", "new", "IAMTarget", "(", "args", "[", "0", "]", ",", "args", "[", "1", "]", ")", ")", ";", "System", ".", "out", ".", "println", "(", "iam", ".", "userId", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Long", "userId", "(", ")", ";", "</s>"]
["<s>", "private", "IAMTarget", "(", "String", "accessKey", ",", "String", "secretKey", ")", "{", "super", "(", "accessKey", ",", "secretKey", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Class", "<", "IAM", ">", "type", "(", ")", "{", "return", "IAM", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "name", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "url", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Request", "apply", "(", "RequestTemplate", "in", ")", "{", "in", ".", "target", "(", "url", "(", ")", ")", ";", "return", "super", ".", "apply", "(", "in", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Long", "result", "(", ")", "{", "return", "userId", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "endElement", "(", "String", "uri", ",", "String", "name", ",", "String", "qName", ")", "{", "if", "(", "qName", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "this", ".", "userId", "=", "Long", ".", "parseLong", "(", "currentText", ".", "toString", "(", ")", ".", "trim", "(", ")", ")", ";", "}", "currentText", "=", "new", "StringBuilder", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "characters", "(", "char", "ch", "[", "]", ",", "int", "start", ",", "int", "length", ")", "{", "currentText", ".", "append", "(", "ch", ",", "start", ",", "length", ")", ";", "}", "</s>"]
["<s>", "private", "SAXDecoder", "(", "Map", "<", "Type", ",", "ContentHandlerWithResult", ".", "Factory", "<", "?", ">", ">", "handlerFactories", ")", "{", "this", ".", "handlerFactories", "=", "handlerFactories", ";", "}", "</s>"]
["<s>", "public", "static", "Builder", "builder", "(", ")", "{", "return", "new", "Builder", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", ",", "DecodeException", "{", "if", "(", "response", ".", "body", "(", ")", "=", "=", "null", ")", "return", "null", ";", "ContentHandlerWithResult", ".", "Factory", "<", "?", ">", "handlerFactory", "=", "handlerFactories", ".", "get", "(", "type", ")", ";", "checkState", "(", "handlerFactory", "!", "=", "null", ",", "\"", "<STR_LIT>", "\"", ",", "type", ",", "handlerFactories", ".", "keySet", "(", ")", ")", ";", "ContentHandlerWithResult", "<", "?", ">", "handler", "=", "handlerFactory", ".", "create", "(", ")", ";", "try", "{", "XMLReader", "xmlReader", "=", "XMLReaderFactory", ".", "createXMLReader", "(", ")", ";", "xmlReader", ".", "setFeature", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "xmlReader", ".", "setFeature", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "xmlReader", ".", "setFeature", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "xmlReader", ".", "setFeature", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "xmlReader", ".", "setFeature", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "xmlReader", ".", "setFeature", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "xmlReader", ".", "setContentHandler", "(", "handler", ")", ";", "InputStream", "inputStream", "=", "response", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ";", "try", "{", "xmlReader", ".", "parse", "(", "new", "InputSource", "(", "inputStream", ")", ")", ";", "}", "finally", "{", "ensureClosed", "(", "inputStream", ")", ";", "}", "return", "handler", ".", "result", "(", ")", ";", "}", "catch", "(", "SAXException", "e", ")", "{", "throw", "new", "DecodeException", "(", "response", ".", "status", "(", ")", ",", "e", ".", "getMessage", "(", ")", ",", "response", ".", "request", "(", ")", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "T", "result", "(", ")", ";", "</s>"]
["<s>", "ContentHandlerWithResult", "<", "T", ">", "create", "(", ")", ";", "</s>"]
["<s>", "public", "<", "T", "extends", "ContentHandlerWithResult", "<", "?", ">", ">", "Builder", "registerContentHandler", "(", "Class", "<", "T", ">", "handlerClass", ")", "{", "Type", "type", "=", "resolveLastTypeParameter", "(", "checkNotNull", "(", "handlerClass", ",", "\"", "<STR_LIT>", "\"", ")", ",", "ContentHandlerWithResult", ".", "class", ")", ";", "return", "registerContentHandler", "(", "type", ",", "new", "NewInstanceContentHandlerWithResultFactory", "(", "handlerClass", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Builder", "registerContentHandler", "(", "Type", "type", ",", "ContentHandlerWithResult", ".", "Factory", "<", "?", ">", "handler", ")", "{", "this", ".", "handlerFactories", ".", "put", "(", "checkNotNull", "(", "type", ",", "\"", "<STR_LIT>", "\"", ")", ",", "checkNotNull", "(", "handler", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "SAXDecoder", "build", "(", ")", "{", "return", "new", "SAXDecoder", "(", "handlerFactories", ")", ";", "}", "</s>"]
["<s>", "private", "NewInstanceContentHandlerWithResultFactory", "(", "Class", "<", "ContentHandlerWithResult", "<", "T", ">", ">", "clazz", ")", "{", "try", "{", "this", ".", "ctor", "=", "clazz", ".", "getDeclaredConstructor", "(", ")", ";", "ctor", ".", "setAccessible", "(", "true", ")", ";", "}", "catch", "(", "NoSuchMethodException", "e", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "clazz", "+", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "ContentHandlerWithResult", "<", "T", ">", "create", "(", ")", "{", "try", "{", "return", "ctor", ".", "newInstance", "(", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "ctor", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "useFeignLoggerByDefault", "(", ")", "throws", "Exception", "{", "slf4j", ".", "logLevel", "(", "\"", "<STR_LIT>", "\"", ")", ";", "slf4j", ".", "expectMessages", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", ")", ";", "logger", "=", "new", "Slf4jLogger", "(", ")", ";", "logger", ".", "log", "(", "CONFIG_KEY", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "useLoggerByNameIfRequested", "(", ")", "throws", "Exception", "{", "slf4j", ".", "logLevel", "(", "\"", "<STR_LIT>", "\"", ")", ";", "slf4j", ".", "expectMessages", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", ")", ";", "logger", "=", "new", "Slf4jLogger", "(", "\"", "<STR_LIT>", "\"", ")", ";", "logger", ".", "log", "(", "CONFIG_KEY", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "useLoggerByClassIfRequested", "(", ")", "throws", "Exception", "{", "slf4j", ".", "logLevel", "(", "\"", "<STR_LIT>", "\"", ")", ";", "slf4j", ".", "expectMessages", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", ")", ";", "logger", "=", "new", "Slf4jLogger", "(", "Feign", ".", "class", ")", ";", "logger", ".", "log", "(", "CONFIG_KEY", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "useSpecifiedLoggerIfRequested", "(", ")", "throws", "Exception", "{", "slf4j", ".", "logLevel", "(", "\"", "<STR_LIT>", "\"", ")", ";", "slf4j", ".", "expectMessages", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", ")", ";", "logger", "=", "new", "Slf4jLogger", "(", "LoggerFactory", ".", "getLogger", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "logger", ".", "log", "(", "CONFIG_KEY", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "logOnlyIfDebugEnabled", "(", ")", "throws", "Exception", "{", "slf4j", ".", "logLevel", "(", "\"", "<STR_LIT>", "\"", ")", ";", "logger", "=", "new", "Slf4jLogger", "(", ")", ";", "logger", ".", "log", "(", "CONFIG_KEY", ",", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "\"", "<STR_LIT>", "\"", ")", ";", "logger", ".", "logRequest", "(", "CONFIG_KEY", ",", "Logger", ".", "Level", ".", "BASIC", ",", "REQUEST", ")", ";", "logger", ".", "logAndRebufferResponse", "(", "CONFIG_KEY", ",", "Logger", ".", "Level", ".", "BASIC", ",", "RESPONSE", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "logRequestsAndResponses", "(", ")", "throws", "Exception", "{", "slf4j", ".", "logLevel", "(", "\"", "<STR_LIT>", "\"", ")", ";", "slf4j", ".", "expectMessages", "(", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", ")", ";", "logger", "=", "new", "Slf4jLogger", "(", ")", ";", "logger", ".", "log", "(", "CONFIG_KEY", ",", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ",", "\"", "<STR_LIT>", "\"", ")", ";", "logger", ".", "logRequest", "(", "CONFIG_KEY", ",", "Logger", ".", "Level", ".", "BASIC", ",", "REQUEST", ")", ";", "logger", ".", "logAndRebufferResponse", "(", "CONFIG_KEY", ",", "Logger", ".", "Level", ".", "BASIC", ",", "RESPONSE", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "RecordingSimpleLogger", "logLevel", "(", "String", "logLevel", ")", "throws", "Exception", "{", "System", ".", "setProperty", "(", "SHOW_THREAD_NAME_KEY", ",", "\"", "<STR_LIT>", "\"", ")", ";", "System", ".", "setProperty", "(", "DEFAULT_LOG_LEVEL_KEY", ",", "logLevel", ")", ";", "Field", "field", "=", "SimpleLogger", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "field", ".", "setAccessible", "(", "true", ")", ";", "field", ".", "set", "(", "null", ",", "false", ")", ";", "Method", "method", "=", "SimpleLoggerFactory", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "method", ".", "setAccessible", "(", "true", ")", ";", "method", ".", "invoke", "(", "LoggerFactory", ".", "getILoggerFactory", "(", ")", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "RecordingSimpleLogger", "expectMessages", "(", "String", "expectedMessages", ")", "{", "this", ".", "expectedMessages", "=", "expectedMessages", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Statement", "apply", "(", "final", "Statement", "base", ",", "Description", "description", ")", "{", "return", "new", "Statement", "(", ")", "{", "@", "Override", "public", "void", "evaluate", "(", ")", "throws", "Throwable", "{", "ByteArrayOutputStream", "buff", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "PrintStream", "stderr", "=", "System", ".", "err", ";", "try", "{", "System", ".", "setErr", "(", "new", "PrintStream", "(", "buff", ")", ")", ";", "base", ".", "evaluate", "(", ")", ";", "assertEquals", "(", "expectedMessages", ",", "buff", ".", "toString", "(", ")", ")", ";", "}", "finally", "{", "System", ".", "setErr", "(", "stderr", ")", ";", "}", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "evaluate", "(", ")", "throws", "Throwable", "{", "ByteArrayOutputStream", "buff", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "PrintStream", "stderr", "=", "System", ".", "err", ";", "try", "{", "System", ".", "setErr", "(", "new", "PrintStream", "(", "buff", ")", ")", ";", "base", ".", "evaluate", "(", ")", ";", "assertEquals", "(", "expectedMessages", ",", "buff", ".", "toString", "(", ")", ")", ";", "}", "finally", "{", "System", ".", "setErr", "(", "stderr", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Slf4jLogger", "(", ")", "{", "this", "(", "feign", ".", "Logger", ".", "class", ")", ";", "}", "</s>"]
["<s>", "public", "Slf4jLogger", "(", "Class", "<", "?", ">", "clazz", ")", "{", "this", "(", "LoggerFactory", ".", "getLogger", "(", "clazz", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Slf4jLogger", "(", "String", "name", ")", "{", "this", "(", "LoggerFactory", ".", "getLogger", "(", "name", ")", ")", ";", "}", "</s>"]
["<s>", "Slf4jLogger", "(", "Logger", "logger", ")", "{", "this", ".", "logger", "=", "logger", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "logRequest", "(", "String", "configKey", ",", "Level", "logLevel", ",", "Request", "request", ")", "{", "if", "(", "logger", ".", "isDebugEnabled", "(", ")", ")", "{", "super", ".", "logRequest", "(", "configKey", ",", "logLevel", ",", "request", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "Response", "logAndRebufferResponse", "(", "String", "configKey", ",", "Level", "logLevel", ",", "Response", "response", ",", "long", "elapsedTime", ")", "throws", "IOException", "{", "if", "(", "logger", ".", "isDebugEnabled", "(", ")", ")", "{", "return", "super", ".", "logAndRebufferResponse", "(", "configKey", ",", "logLevel", ",", "response", ",", "elapsedTime", ")", ";", "}", "return", "response", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "log", "(", "String", "configKey", ",", "String", "format", ",", "Object", ".", ".", ".", "args", ")", "{", "if", "(", "logger", ".", "isDebugEnabled", "(", ")", ")", "{", "logger", ".", "debug", "(", "String", ".", "format", "(", "methodTag", "(", "configKey", ")", "+", "format", ",", "args", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "get", "(", "String", "body", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "addMetricsCapability", "(", ")", "{", "SimpleMeterRegistry", "registry", "=", "new", "SimpleMeterRegistry", "(", "SimpleConfig", ".", "DEFAULT", ",", "new", "MockClock", "(", ")", ")", ";", "final", "SimpleSource", "source", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "new", "MockClient", "(", ")", ".", "ok", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "addCapability", "(", "new", "MicrometerCapability", "(", "registry", ")", ")", ".", "target", "(", "new", "MockTarget", "<", ">", "(", "MicrometerCapabilityTest", ".", "SimpleSource", ".", "class", ")", ")", ";", "source", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "List", "<", "Meter", ">", "metrics", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "registry", ".", "forEachMeter", "(", "metrics", ":", ":", "add", ")", ";", "metrics", ".", "removeIf", "(", "meter", "-", ">", "!", "meter", ".", "getId", "(", ")", ".", "getName", "(", ")", ".", "startsWith", "(", "\"", "<STR_LIT:.>", "\"", ")", ")", ";", "metrics", ".", "forEach", "(", "meter", "-", ">", "assertThat", "(", "\"", "<STR_LIT>", "\"", "+", "meter", ".", "getId", "(", ")", ",", "meter", ".", "getId", "(", ")", ".", "getTag", "(", "\"", "<STR_LIT>", "\"", ")", ",", "equalTo", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "metrics", ".", "forEach", "(", "meter", "-", ">", "assertThat", "(", "\"", "<STR_LIT>", "\"", "+", "meter", ".", "getId", "(", ")", ",", "meter", ".", "getId", "(", ")", ".", "getTag", "(", "\"", "<STR_LIT>", "\"", ")", ",", "equalTo", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "metrics", ".", "forEach", "(", "meter", "-", ">", "assertThat", "(", "\"", "<STR_LIT>", "\"", "+", "meter", ".", "getId", "(", ")", ",", "meter", ".", "getId", "(", ")", ".", "getTag", "(", "\"", "<STR_LIT>", "\"", ")", ",", "equalTo", "(", "\"", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MeteredDecoder", "(", "Decoder", "decoder", ",", "MeterRegistry", "meterRegistry", ")", "{", "this", ".", "decoder", "=", "decoder", ";", "this", ".", "meterRegistry", "=", "meterRegistry", ";", "this", ".", "metricName", "=", "new", "FeignMetricName", "(", "Decoder", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", ",", "DecodeException", ",", "FeignException", "{", "final", "RequestTemplate", "template", "=", "response", ".", "request", "(", ")", ".", "requestTemplate", "(", ")", ";", "final", "Optional", "<", "MeteredBody", ">", "body", "=", "Optional", ".", "ofNullable", "(", "response", ".", "body", "(", ")", ")", ".", "map", "(", "MeteredBody", ":", ":", "new", ")", ";", "Response", "meteredResponse", "=", "body", ".", "map", "(", "b", "-", ">", "response", ".", "toBuilder", "(", ")", ".", "body", "(", "b", ")", ".", "build", "(", ")", ")", ".", "orElse", "(", "response", ")", ";", "Object", "decoded", ";", "try", "{", "decoded", "=", "meterRegistry", ".", "timer", "(", "metricName", ".", "name", "(", ")", ",", "metricName", ".", "tag", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ")", ")", ".", "recordCallable", "(", "(", ")", "-", ">", "decoder", ".", "decode", "(", "meteredResponse", ",", "type", ")", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "e", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "IOException", "(", "e", ")", ";", "}", "body", ".", "ifPresent", "(", "b", "-", ">", "meterRegistry", ".", "summary", "(", "metricName", ".", "name", "(", "\"", "<STR_LIT>", "\"", ")", ",", "metricName", ".", "tag", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ")", ")", ".", "record", "(", "b", ".", "count", "(", ")", ")", ")", ";", "return", "decoded", ";", "}", "</s>"]
["<s>", "public", "MeteredBody", "(", "Body", "body", ")", "{", "this", ".", "delegate", "=", "body", ";", "count", "=", "(", ")", "-", ">", "0", "L", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "delegate", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Integer", "length", "(", ")", "{", "return", "delegate", ".", "length", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "delegate", ".", "isRepeatable", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "asInputStream", "(", ")", "throws", "IOException", "{", "final", "CountingInputStream", "input", "=", "new", "CountingInputStream", "(", "delegate", ".", "asInputStream", "(", ")", ")", ";", "count", "=", "input", ":", ":", "getCount", ";", "return", "input", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Reader", "asReader", "(", ")", "throws", "IOException", "{", "return", "new", "InputStreamReader", "(", "asInputStream", "(", ")", ",", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "public", "long", "count", "(", ")", "{", "return", "count", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Reader", "asReader", "(", "Charset", "charset", ")", "throws", "IOException", "{", "return", "new", "InputStreamReader", "(", "asInputStream", "(", ")", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "public", "MeteredClient", "(", "Client", "client", ",", "MeterRegistry", "meterRegistry", ")", "{", "this", ".", "client", "=", "client", ";", "this", ".", "meterRegistry", "=", "meterRegistry", ";", "this", ".", "metricName", "=", "new", "FeignMetricName", "(", "Client", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "execute", "(", "Request", "request", ",", "Options", "options", ")", "throws", "IOException", "{", "final", "RequestTemplate", "template", "=", "request", ".", "requestTemplate", "(", ")", ";", "try", "{", "return", "meterRegistry", ".", "timer", "(", "metricName", ".", "name", "(", ")", ",", "metricName", ".", "tag", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ")", ")", ".", "recordCallable", "(", "(", ")", "-", ">", "client", ".", "execute", "(", "request", ",", "options", ")", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "e", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "IOException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "FeignMetricName", "(", "Class", "<", "?", ">", "meteredComponent", ")", "{", "this", ".", "meteredComponent", "=", "meteredComponent", ";", "}", "</s>"]
["<s>", "public", "String", "name", "(", "String", "suffix", ")", "{", "return", "name", "(", ")", "+", "\"", "<STR_LIT:.>", "\"", "+", "suffix", ";", "}", "</s>"]
["<s>", "public", "String", "name", "(", ")", "{", "return", "meteredComponent", ".", "getName", "(", ")", ";", "}", "</s>"]
["<s>", "public", "List", "<", "Tag", ">", "tag", "(", "MethodMetadata", "methodMetadata", ",", "Target", "<", "?", ">", "target", ",", "Tag", ".", ".", ".", "tags", ")", "{", "return", "tag", "(", "methodMetadata", ".", "targetType", "(", ")", ",", "methodMetadata", ".", "method", "(", ")", ",", "target", ".", "url", "(", ")", ",", "tags", ")", ";", "}", "</s>"]
["<s>", "public", "List", "<", "Tag", ">", "tag", "(", "Class", "<", "?", ">", "targetType", ",", "Method", "method", ",", "String", "url", ",", "Tag", ".", ".", ".", "extraTags", ")", "{", "List", "<", "Tag", ">", "tags", "=", "new", "ArrayList", "<", ">", "(", ")", ";", "tags", ".", "add", "(", "Tag", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "targetType", ".", "getName", "(", ")", ")", ")", ";", "tags", ".", "add", "(", "Tag", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "method", ".", "getName", "(", ")", ")", ")", ";", "tags", ".", "add", "(", "Tag", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "extractHost", "(", "url", ")", ")", ")", ";", "tags", ".", "addAll", "(", "Arrays", ".", "asList", "(", "extraTags", ")", ")", ";", "return", "tags", ";", "}", "</s>"]
["<s>", "private", "String", "extractHost", "(", "final", "String", "targetUrl", ")", "{", "try", "{", "String", "host", "=", "new", "URI", "(", "targetUrl", ")", ".", "getHost", "(", ")", ";", "if", "(", "host", "!", "=", "null", ")", "return", "host", ";", "}", "catch", "(", "final", "URISyntaxException", "e", ")", "{", "}", "return", "targetUrl", ".", "length", "(", ")", "<", "=", "<NUM_LIT:20>", "?", "targetUrl", ":", "targetUrl", ".", "substring", "(", "0", ",", "<NUM_LIT:20>", ")", ";", "}", "</s>"]
["<s>", "public", "MicrometerCapability", "(", ")", "{", "this", "(", "new", "SimpleMeterRegistry", "(", "SimpleConfig", ".", "DEFAULT", ",", "Clock", ".", "SYSTEM", ")", ")", ";", "Metrics", ".", "addRegistry", "(", "meterRegistry", ")", ";", "}", "</s>"]
["<s>", "public", "MicrometerCapability", "(", "MeterRegistry", "meterRegistry", ")", "{", "this", ".", "meterRegistry", "=", "meterRegistry", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Client", "enrich", "(", "Client", "client", ")", "{", "return", "new", "MeteredClient", "(", "client", ",", "meterRegistry", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Encoder", "enrich", "(", "Encoder", "encoder", ")", "{", "return", "new", "MeteredEncoder", "(", "encoder", ",", "meterRegistry", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Decoder", "enrich", "(", "Decoder", "decoder", ")", "{", "return", "new", "MeteredDecoder", "(", "decoder", ",", "meterRegistry", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InvocationHandlerFactory", "enrich", "(", "InvocationHandlerFactory", "invocationHandlerFactory", ")", "{", "return", "new", "MeteredInvocationHandleFactory", "(", "invocationHandlerFactory", ",", "meterRegistry", ")", ";", "}", "</s>"]
["<s>", "public", "MeteredEncoder", "(", "Encoder", "encoder", ",", "MeterRegistry", "meterRegistry", ")", "{", "this", ".", "encoder", "=", "encoder", ";", "this", ".", "meterRegistry", "=", "meterRegistry", ";", "this", ".", "metricName", "=", "new", "FeignMetricName", "(", "Encoder", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "throws", "EncodeException", "{", "meterRegistry", ".", "timer", "(", "metricName", ".", "name", "(", ")", ",", "metricName", ".", "tag", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ")", ")", ".", "record", "(", "(", ")", "-", ">", "encoder", ".", "encode", "(", "object", ",", "bodyType", ",", "template", ")", ")", ";", "if", "(", "template", ".", "body", "(", ")", "!", "=", "null", ")", "{", "meterRegistry", ".", "summary", "(", "metricName", ".", "name", "(", "\"", "<STR_LIT>", "\"", ")", ",", "metricName", ".", "tag", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ")", ")", ".", "record", "(", "template", ".", "body", "(", ")", ".", "length", ")", ";", "}", "}", "</s>"]
["<s>", "public", "CountingInputStream", "(", "InputStream", "in", ")", "{", "super", "(", "Util", ".", "checkNotNull", "(", "in", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "long", "getCount", "(", ")", "{", "return", "count", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", ")", "throws", "IOException", "{", "final", "int", "result", "=", "in", ".", "read", "(", ")", ";", "if", "(", "result", "!", "=", "-", "1", ")", "{", "count", "+", "+", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", "byte", "[", "]", "b", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "final", "int", "result", "=", "in", ".", "read", "(", "b", ",", "off", ",", "len", ")", ";", "if", "(", "result", "!", "=", "-", "1", ")", "{", "count", "+", "=", "result", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "skip", "(", "long", "n", ")", "throws", "IOException", "{", "final", "long", "result", "=", "in", ".", "skip", "(", "n", ")", ";", "count", "+", "=", "result", ";", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "synchronized", "void", "mark", "(", "int", "readlimit", ")", "{", "in", ".", "mark", "(", "readlimit", ")", ";", "mark", "=", "count", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "synchronized", "void", "reset", "(", ")", "throws", "IOException", "{", "if", "(", "!", "in", ".", "markSupported", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "mark", "=", "=", "-", "1", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "in", ".", "reset", "(", ")", ";", "count", "=", "mark", ";", "}", "</s>"]
["<s>", "public", "MeteredInvocationHandleFactory", "(", "InvocationHandlerFactory", "invocationHandler", ",", "MeterRegistry", "meterRegistry", ")", "{", "this", ".", "invocationHandler", "=", "invocationHandler", ";", "this", ".", "meterRegistry", "=", "meterRegistry", ";", "this", ".", "metricName", "=", "new", "FeignMetricName", "(", "Feign", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InvocationHandler", "create", "(", "Target", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ")", "{", "final", "Class", "clientClass", "=", "target", ".", "type", "(", ")", ";", "final", "InvocationHandler", "invocationHandle", "=", "invocationHandler", ".", "create", "(", "target", ",", "dispatch", ")", ";", "return", "(", "proxy", ",", "method", ",", "args", ")", "-", ">", "{", "if", "(", "JAVA_OBJECT_METHODS", ".", "contains", "(", "method", ".", "getName", "(", ")", ")", "|", "|", "Util", ".", "isDefault", "(", "method", ")", ")", "{", "return", "invocationHandle", ".", "invoke", "(", "proxy", ",", "method", ",", "args", ")", ";", "}", "try", "{", "return", "meterRegistry", ".", "timer", "(", "metricName", ".", "name", "(", ")", ",", "metricName", ".", "tag", "(", "clientClass", ",", "method", ",", "target", ".", "url", "(", ")", ")", ")", ".", "recordCallable", "(", "(", ")", "-", ">", "{", "try", "{", "return", "invocationHandle", ".", "invoke", "(", "proxy", ",", "method", ",", "args", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "e", ";", "}", "catch", "(", "Throwable", "e", ")", "{", "throw", "new", "Exception", "(", "e", ")", ";", "}", "}", ")", ";", "}", "catch", "(", "final", "FeignException", "e", ")", "{", "meterRegistry", ".", "counter", "(", "metricName", ".", "name", "(", "\"", "<STR_LIT>", "\"", ")", ",", "metricName", ".", "tag", "(", "clientClass", ",", "method", ",", "target", ".", "url", "(", ")", ",", "Tag", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "String", ".", "valueOf", "(", "e", ".", "status", "(", ")", ")", ")", ",", "Tag", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "e", ".", "status", "(", ")", "/", "<NUM_LIT:100>", "+", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "increment", "(", ")", ";", "throw", "e", ";", "}", "catch", "(", "final", "Throwable", "e", ")", "{", "meterRegistry", ".", "counter", "(", "metricName", ".", "name", "(", "\"", "<STR_LIT>", "\"", ")", ",", "metricName", ".", "tag", "(", "clientClass", ",", "method", ",", "target", ".", "url", "(", ")", ",", "Tag", ".", "of", "(", "\"", "<STR_LIT>", "\"", ",", "e", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ")", ")", ")", ".", "increment", "(", ")", ";", "throw", "e", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "throws", "NoSuchMethodException", "{", "method", "=", "TestReactorService", ".", "class", ".", "getMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Test", "public", "void", "invokeOnSubscribeReactor", "(", ")", "throws", "Throwable", "{", "given", "(", "this", ".", "methodHandler", ".", "invoke", "(", "any", "(", ")", ")", ")", ".", "willReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "ReactorInvocationHandler", "handler", "=", "new", "ReactorInvocationHandler", "(", "this", ".", "target", ",", "Collections", ".", "singletonMap", "(", "method", ",", "this", ".", "methodHandler", ")", ",", "Schedulers", ".", "elastic", "(", ")", ")", ";", "Object", "result", "=", "handler", ".", "invoke", "(", "method", ",", "this", ".", "methodHandler", ",", "new", "Object", "[", "]", "{", "}", ")", ";", "assertThat", "(", "result", ")", ".", "isInstanceOf", "(", "Mono", ".", "class", ")", ";", "verifyZeroInteractions", "(", "this", ".", "methodHandler", ")", ";", "StepVerifier", ".", "create", "(", "(", "Mono", ")", "result", ")", ".", "expectNext", "(", "\"", "<STR_LIT>", "\"", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "verify", "(", "this", ".", "methodHandler", ",", "times", "(", "1", ")", ")", ".", "invoke", "(", "any", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invokeOnSubscribeEmptyReactor", "(", ")", "throws", "Throwable", "{", "given", "(", "this", ".", "methodHandler", ".", "invoke", "(", "any", "(", ")", ")", ")", ".", "willReturn", "(", "null", ")", ";", "ReactorInvocationHandler", "handler", "=", "new", "ReactorInvocationHandler", "(", "this", ".", "target", ",", "Collections", ".", "singletonMap", "(", "method", ",", "this", ".", "methodHandler", ")", ",", "Schedulers", ".", "elastic", "(", ")", ")", ";", "Object", "result", "=", "handler", ".", "invoke", "(", "method", ",", "this", ".", "methodHandler", ",", "new", "Object", "[", "]", "{", "}", ")", ";", "assertThat", "(", "result", ")", ".", "isInstanceOf", "(", "Mono", ".", "class", ")", ";", "verifyZeroInteractions", "(", "this", ".", "methodHandler", ")", ";", "StepVerifier", ".", "create", "(", "(", "Mono", ")", "result", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "verify", "(", "this", ".", "methodHandler", ",", "times", "(", "1", ")", ")", ".", "invoke", "(", "any", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invokeFailureReactor", "(", ")", "throws", "Throwable", "{", "given", "(", "this", ".", "methodHandler", ".", "invoke", "(", "any", "(", ")", ")", ")", ".", "willThrow", "(", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "ReactorInvocationHandler", "handler", "=", "new", "ReactorInvocationHandler", "(", "this", ".", "target", ",", "Collections", ".", "singletonMap", "(", "this", ".", "method", ",", "this", ".", "methodHandler", ")", ",", "Schedulers", ".", "elastic", "(", ")", ")", ";", "Object", "result", "=", "handler", ".", "invoke", "(", "this", ".", "method", ",", "this", ".", "methodHandler", ",", "new", "Object", "[", "]", "{", "}", ")", ";", "assertThat", "(", "result", ")", ".", "isInstanceOf", "(", "Mono", ".", "class", ")", ";", "verifyZeroInteractions", "(", "this", ".", "methodHandler", ")", ";", "StepVerifier", ".", "create", "(", "(", "Mono", ")", "result", ")", ".", "expectError", "(", "IOException", ".", "class", ")", ".", "verify", "(", ")", ";", "verify", "(", "this", ".", "methodHandler", ",", "times", "(", "1", ")", ")", ".", "invoke", "(", "any", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Test", "public", "void", "invokeOnSubscribeRxJava", "(", ")", "throws", "Throwable", "{", "given", "(", "this", ".", "methodHandler", ".", "invoke", "(", "any", "(", ")", ")", ")", ".", "willReturn", "(", "\"", "<STR_LIT>", "\"", ")", ";", "RxJavaInvocationHandler", "handler", "=", "new", "RxJavaInvocationHandler", "(", "this", ".", "target", ",", "Collections", ".", "singletonMap", "(", "this", ".", "method", ",", "this", ".", "methodHandler", ")", ",", "io", ".", "reactivex", ".", "schedulers", ".", "Schedulers", ".", "trampoline", "(", ")", ")", ";", "Object", "result", "=", "handler", ".", "invoke", "(", "this", ".", "method", ",", "this", ".", "methodHandler", ",", "new", "Object", "[", "]", "{", "}", ")", ";", "assertThat", "(", "result", ")", ".", "isInstanceOf", "(", "Flowable", ".", "class", ")", ";", "verifyZeroInteractions", "(", "this", ".", "methodHandler", ")", ";", "StepVerifier", ".", "create", "(", "(", "Flowable", ")", "result", ")", ".", "expectNext", "(", "\"", "<STR_LIT>", "\"", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "verify", "(", "this", ".", "methodHandler", ",", "times", "(", "1", ")", ")", ".", "invoke", "(", "any", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invokeOnSubscribeEmptyRxJava", "(", ")", "throws", "Throwable", "{", "given", "(", "this", ".", "methodHandler", ".", "invoke", "(", "any", "(", ")", ")", ")", ".", "willReturn", "(", "null", ")", ";", "RxJavaInvocationHandler", "handler", "=", "new", "RxJavaInvocationHandler", "(", "this", ".", "target", ",", "Collections", ".", "singletonMap", "(", "this", ".", "method", ",", "this", ".", "methodHandler", ")", ",", "io", ".", "reactivex", ".", "schedulers", ".", "Schedulers", ".", "trampoline", "(", ")", ")", ";", "Object", "result", "=", "handler", ".", "invoke", "(", "this", ".", "method", ",", "this", ".", "methodHandler", ",", "new", "Object", "[", "]", "{", "}", ")", ";", "assertThat", "(", "result", ")", ".", "isInstanceOf", "(", "Flowable", ".", "class", ")", ";", "verifyZeroInteractions", "(", "this", ".", "methodHandler", ")", ";", "StepVerifier", ".", "create", "(", "(", "Flowable", ")", "result", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "verify", "(", "this", ".", "methodHandler", ",", "times", "(", "1", ")", ")", ".", "invoke", "(", "any", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invokeFailureRxJava", "(", ")", "throws", "Throwable", "{", "given", "(", "this", ".", "methodHandler", ".", "invoke", "(", "any", "(", ")", ")", ")", ".", "willThrow", "(", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "RxJavaInvocationHandler", "handler", "=", "new", "RxJavaInvocationHandler", "(", "this", ".", "target", ",", "Collections", ".", "singletonMap", "(", "this", ".", "method", ",", "this", ".", "methodHandler", ")", ",", "io", ".", "reactivex", ".", "schedulers", ".", "Schedulers", ".", "trampoline", "(", ")", ")", ";", "Object", "result", "=", "handler", ".", "invoke", "(", "this", ".", "method", ",", "this", ".", "methodHandler", ",", "new", "Object", "[", "]", "{", "}", ")", ";", "assertThat", "(", "result", ")", ".", "isInstanceOf", "(", "Flowable", ".", "class", ")", ";", "verifyZeroInteractions", "(", "this", ".", "methodHandler", ")", ";", "StepVerifier", ".", "create", "(", "(", "Flowable", ")", "result", ")", ".", "expectError", "(", "IOException", ".", "class", ")", ".", "verify", "(", ")", ";", "verify", "(", "this", ".", "methodHandler", ",", "times", "(", "1", ")", ")", ".", "invoke", "(", "any", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Mono", "<", "String", ">", "version", "(", ")", ";", "</s>"]
["<s>", "private", "String", "getServerUrl", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "this", ".", "webServer", ".", "getPort", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDefaultMethodsNotProxied", "(", ")", "{", "TestReactorService", "service", "=", "ReactorFeign", ".", "builder", "(", ")", ".", "target", "(", "TestReactorService", ".", "class", ",", "this", ".", "getServerUrl", "(", ")", ")", ";", "assertThat", "(", "service", ")", ".", "isEqualTo", "(", "service", ")", ";", "assertThat", "(", "service", ".", "toString", "(", ")", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "service", ".", "hashCode", "(", ")", ")", ".", "isNotZero", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testReactorTargetFull", "(", ")", "throws", "Exception", "{", "this", ".", "webServer", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ")", ";", "this", ".", "webServer", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "TestReactorService", "service", "=", "ReactorFeign", ".", "builder", "(", ")", ".", "encoder", "(", "new", "JacksonEncoder", "(", ")", ")", ".", "decoder", "(", "new", "JacksonDecoder", "(", ")", ")", ".", "logger", "(", "new", "ConsoleLogger", "(", ")", ")", ".", "decode404", "(", ")", ".", "options", "(", "new", "Options", "(", ")", ")", ".", "logLevel", "(", "Level", ".", "FULL", ")", ".", "target", "(", "TestReactorService", ".", "class", ",", "this", ".", "getServerUrl", "(", ")", ")", ";", "assertThat", "(", "service", ")", ".", "isNotNull", "(", ")", ";", "StepVerifier", ".", "create", "(", "service", ".", "version", "(", ")", ")", ".", "expectNext", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "assertThat", "(", "webServer", ".", "takeRequest", "(", ")", ".", "getPath", "(", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "StepVerifier", ".", "create", "(", "service", ".", "user", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "assertNext", "(", "user", "-", ">", "assertThat", "(", "user", ")", ".", "hasFieldOrPropertyWithValue", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "assertThat", "(", "webServer", ".", "takeRequest", "(", ")", ".", "getPath", "(", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRxJavaTarget", "(", ")", "throws", "Exception", "{", "this", ".", "webServer", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ")", ";", "this", ".", "webServer", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ";", "TestReactiveXService", "service", "=", "RxJavaFeign", ".", "builder", "(", ")", ".", "encoder", "(", "new", "JacksonEncoder", "(", ")", ")", ".", "decoder", "(", "new", "JacksonDecoder", "(", ")", ")", ".", "logger", "(", "new", "ConsoleLogger", "(", ")", ")", ".", "logLevel", "(", "Level", ".", "FULL", ")", ".", "target", "(", "TestReactiveXService", ".", "class", ",", "this", ".", "getServerUrl", "(", ")", ")", ";", "assertThat", "(", "service", ")", ".", "isNotNull", "(", ")", ";", "StepVerifier", ".", "create", "(", "service", ".", "version", "(", ")", ")", ".", "expectNext", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "assertThat", "(", "webServer", ".", "takeRequest", "(", ")", ".", "getPath", "(", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "StepVerifier", ".", "create", "(", "service", ".", "user", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "assertNext", "(", "user", "-", ">", "assertThat", "(", "user", ")", ".", "hasFieldOrPropertyWithValue", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "assertThat", "(", "webServer", ".", "takeRequest", "(", ")", ".", "getPath", "(", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "invocationFactoryIsNotSupported", "(", ")", "{", "this", ".", "thrown", ".", "expect", "(", "UnsupportedOperationException", ".", "class", ")", ";", "ReactorFeign", ".", "builder", "(", ")", ".", "invocationHandlerFactory", "(", "(", "target", ",", "dispatch", ")", "-", ">", "null", ")", ".", "target", "(", "TestReactiveXService", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doNotCloseUnsupported", "(", ")", "{", "this", ".", "thrown", ".", "expect", "(", "UnsupportedOperationException", ".", "class", ")", ";", "ReactorFeign", ".", "builder", "(", ")", ".", "doNotCloseAfterDecode", "(", ")", ".", "target", "(", "TestReactiveXService", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRequestInterceptor", "(", ")", "{", "this", ".", "webServer", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ")", ";", "RequestInterceptor", "mockInterceptor", "=", "mock", "(", "RequestInterceptor", ".", "class", ")", ";", "TestReactorService", "service", "=", "ReactorFeign", ".", "builder", "(", ")", ".", "requestInterceptor", "(", "mockInterceptor", ")", ".", "target", "(", "TestReactorService", ".", "class", ",", "this", ".", "getServerUrl", "(", ")", ")", ";", "StepVerifier", ".", "create", "(", "service", ".", "version", "(", ")", ")", ".", "expectNext", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "verify", "(", "mockInterceptor", ",", "times", "(", "1", ")", ")", ".", "apply", "(", "any", "(", "RequestTemplate", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRequestInterceptors", "(", ")", "{", "this", ".", "webServer", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ")", ";", "RequestInterceptor", "mockInterceptor", "=", "mock", "(", "RequestInterceptor", ".", "class", ")", ";", "TestReactorService", "service", "=", "ReactorFeign", ".", "builder", "(", ")", ".", "requestInterceptors", "(", "Arrays", ".", "asList", "(", "mockInterceptor", ",", "mockInterceptor", ")", ")", ".", "target", "(", "TestReactorService", ".", "class", ",", "this", ".", "getServerUrl", "(", ")", ")", ";", "StepVerifier", ".", "create", "(", "service", ".", "version", "(", ")", ")", ".", "expectNext", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "verify", "(", "mockInterceptor", ",", "times", "(", "<NUM_LIT:2>", ")", ")", ".", "apply", "(", "any", "(", "RequestTemplate", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testResponseMappers", "(", ")", "throws", "Exception", "{", "this", ".", "webServer", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ")", ";", "ResponseMapper", "responseMapper", "=", "mock", "(", "ResponseMapper", ".", "class", ")", ";", "Decoder", "decoder", "=", "mock", "(", "Decoder", ".", "class", ")", ";", "given", "(", "responseMapper", ".", "map", "(", "any", "(", "Response", ".", "class", ")", ",", "any", "(", "Type", ".", "class", ")", ")", ")", ".", "willAnswer", "(", "AdditionalAnswers", ".", "returnsFirstArg", "(", ")", ")", ";", "given", "(", "decoder", ".", "decode", "(", "any", "(", "Response", ".", "class", ")", ",", "any", "(", "Type", ".", "class", ")", ")", ")", ".", "willReturn", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ";", "TestReactorService", "service", "=", "ReactorFeign", ".", "builder", "(", ")", ".", "mapAndDecode", "(", "responseMapper", ",", "decoder", ")", ".", "target", "(", "TestReactorService", ".", "class", ",", "this", ".", "getServerUrl", "(", ")", ")", ";", "StepVerifier", ".", "create", "(", "service", ".", "version", "(", ")", ")", ".", "expectNext", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "verify", "(", "responseMapper", ",", "times", "(", "1", ")", ")", ".", "map", "(", "any", "(", "Response", ".", "class", ")", ",", "any", "(", "Type", ".", "class", ")", ")", ";", "verify", "(", "decoder", ",", "times", "(", "1", ")", ")", ".", "decode", "(", "any", "(", "Response", ".", "class", ")", ",", "any", "(", "Type", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testQueryMapEncoders", "(", ")", "{", "this", ".", "webServer", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "QueryMapEncoder", "encoder", "=", "mock", "(", "QueryMapEncoder", ".", "class", ")", ";", "given", "(", "encoder", ".", "encode", "(", "any", "(", "Object", ".", "class", ")", ")", ")", ".", "willReturn", "(", "Collections", ".", "emptyMap", "(", ")", ")", ";", "TestReactiveXService", "service", "=", "RxJavaFeign", ".", "builder", "(", ")", ".", "queryMapEncoder", "(", "encoder", ")", ".", "target", "(", "TestReactiveXService", ".", "class", ",", "this", ".", "getServerUrl", "(", ")", ")", ";", "StepVerifier", ".", "create", "(", "service", ".", "search", "(", "new", "SearchQuery", "(", ")", ")", ")", ".", "expectNext", "(", "\"", "<STR_LIT>", "\"", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "verify", "(", "encoder", ",", "times", "(", "1", ")", ")", ".", "encode", "(", "any", "(", "Object", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "{", "\"", "<STR_LIT>", "\"", "}", ")", "@", "Test", "public", "void", "testErrorDecoder", "(", ")", "{", "this", ".", "webServer", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "ErrorDecoder", "errorDecoder", "=", "mock", "(", "ErrorDecoder", ".", "class", ")", ";", "given", "(", "errorDecoder", ".", "decode", "(", "anyString", "(", ")", ",", "any", "(", "Response", ".", "class", ")", ")", ")", ".", "willReturn", "(", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "TestReactiveXService", "service", "=", "RxJavaFeign", ".", "builder", "(", ")", ".", "errorDecoder", "(", "errorDecoder", ")", ".", "target", "(", "TestReactiveXService", ".", "class", ",", "this", ".", "getServerUrl", "(", ")", ")", ";", "StepVerifier", ".", "create", "(", "service", ".", "search", "(", "new", "SearchQuery", "(", ")", ")", ")", ".", "expectErrorSatisfies", "(", "ex", "-", ">", "assertThat", "(", "ex", ")", ".", "isInstanceOf", "(", "IllegalStateException", ".", "class", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "verify", "(", ")", ";", "verify", "(", "errorDecoder", ",", "times", "(", "1", ")", ")", ".", "decode", "(", "anyString", "(", ")", ",", "any", "(", "Response", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRetryer", "(", ")", "{", "this", ".", "webServer", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ".", "setResponseCode", "(", "-", "1", ")", ")", ";", "this", ".", "webServer", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ")", ";", "Retryer", "retryer", "=", "new", "Retryer", ".", "Default", "(", ")", ";", "Retryer", "spy", "=", "spy", "(", "retryer", ")", ";", "when", "(", "spy", ".", "clone", "(", ")", ")", ".", "thenReturn", "(", "spy", ")", ";", "TestReactorService", "service", "=", "ReactorFeign", ".", "builder", "(", ")", ".", "retryer", "(", "spy", ")", ".", "target", "(", "TestReactorService", ".", "class", ",", "this", ".", "getServerUrl", "(", ")", ")", ";", "StepVerifier", ".", "create", "(", "service", ".", "version", "(", ")", ")", ".", "expectNext", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "verify", "(", "spy", ",", "times", "(", "1", ")", ")", ".", "continueOrPropagate", "(", "any", "(", "RetryableException", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testClient", "(", ")", "throws", "Exception", "{", "Client", "client", "=", "mock", "(", "Client", ".", "class", ")", ";", "given", "(", "client", ".", "execute", "(", "any", "(", "Request", ".", "class", ")", ",", "any", "(", "Options", ".", "class", ")", ")", ")", ".", "willAnswer", "(", "(", "Answer", "<", "Response", ">", ")", "invocation", "-", ">", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "\"", "<STR_LIT:1.0>", "\"", ",", "Charset", ".", "defaultCharset", "(", ")", ")", ".", "request", "(", "(", "Request", ")", "invocation", ".", "getArguments", "(", ")", "[", "0", "]", ")", ".", "build", "(", ")", ")", ";", "TestReactorService", "service", "=", "ReactorFeign", ".", "builder", "(", ")", ".", "client", "(", "client", ")", ".", "target", "(", "TestReactorService", ".", "class", ",", "this", ".", "getServerUrl", "(", ")", ")", ";", "StepVerifier", ".", "create", "(", "service", ".", "version", "(", ")", ")", ".", "expectNext", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "verify", "(", "client", ",", "times", "(", "1", ")", ")", ".", "execute", "(", "any", "(", "Request", ".", "class", ")", ",", "any", "(", "Options", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testDifferentContract", "(", ")", "throws", "Exception", "{", "this", ".", "webServer", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ")", ";", "TestJaxRSReactorService", "service", "=", "ReactorFeign", ".", "builder", "(", ")", ".", "contract", "(", "new", "JAXRSContract", "(", ")", ")", ".", "target", "(", "TestJaxRSReactorService", ".", "class", ",", "this", ".", "getServerUrl", "(", ")", ")", ";", "StepVerifier", ".", "create", "(", "service", ".", "version", "(", ")", ")", ".", "expectNext", "(", "\"", "<STR_LIT:1.0>", "\"", ")", ".", "expectComplete", "(", ")", ".", "verify", "(", ")", ";", "assertThat", "(", "webServer", ".", "takeRequest", "(", ")", ".", "getPath", "(", ")", ")", ".", "isEqualToIgnoringCase", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Mono", "<", "String", ">", "version", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Flux", "<", "User", ">", "user", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "username", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Flowable", "<", "String", ">", "version", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Flowable", "<", "User", ">", "user", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "username", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Flowable", "<", "String", ">", "search", "(", "@", "QueryMap", "SearchQuery", "query", ")", ";", "</s>"]
["<s>", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "GET", "Mono", "<", "String", ">", "version", "(", ")", ";", "</s>"]
["<s>", "public", "User", "(", ")", "{", "super", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "getUsername", "(", ")", "{", "return", "username", ";", "}", "</s>"]
["<s>", "SearchQuery", "(", ")", "{", "super", "(", ")", ";", "}", "</s>"]
["<s>", "public", "String", "query", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "void", "log", "(", "String", "configKey", ",", "String", "format", ",", "Object", ".", ".", ".", "args", ")", "{", "System", ".", "out", ".", "println", "(", "String", ".", "format", "(", "methodTag", "(", "configKey", ")", "+", "format", ",", "args", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "onlyReactiveReturnTypesSupported", "(", ")", "{", "this", ".", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "Contract", "contract", "=", "new", "ReactiveDelegatingContract", "(", "new", "Contract", ".", "Default", "(", ")", ")", ";", "contract", ".", "parseAndValidateMetadata", "(", "TestSynchronousService", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "reactorTypes", "(", ")", "{", "Contract", "contract", "=", "new", "ReactiveDelegatingContract", "(", "new", "Contract", ".", "Default", "(", ")", ")", ";", "contract", ".", "parseAndValidateMetadata", "(", "TestReactorService", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "reactivexTypes", "(", ")", "{", "Contract", "contract", "=", "new", "ReactiveDelegatingContract", "(", "new", "Contract", ".", "Default", "(", ")", ")", ";", "contract", ".", "parseAndValidateMetadata", "(", "TestReactiveXService", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "streamsAreNotSupported", "(", ")", "{", "this", ".", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "Contract", "contract", "=", "new", "ReactiveDelegatingContract", "(", "new", "Contract", ".", "Default", "(", ")", ")", ";", "contract", ".", "parseAndValidateMetadata", "(", "StreamsService", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "version", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Flowable", "<", "String", ">", "version", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Mono", "<", "String", ">", "version", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Flux", "<", "String", ">", "user", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "username", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Mono", "<", "Stream", "<", "String", ">", ">", "version", "(", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "Builder", "contract", "(", "Contract", "contract", ")", "{", "this", ".", "contract", "=", "contract", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Feign", "build", "(", ")", "{", "if", "(", "!", "(", "this", ".", "contract", "instanceof", "ReactiveDelegatingContract", ")", ")", "{", "super", ".", "contract", "(", "new", "ReactiveDelegatingContract", "(", "this", ".", "contract", ")", ")", ";", "}", "else", "{", "super", ".", "contract", "(", "this", ".", "contract", ")", ";", "}", "return", "super", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Feign", ".", "Builder", "doNotCloseAfterDecode", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Builder", "builder", "(", ")", "{", "return", "new", "Builder", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Feign", "build", "(", ")", "{", "super", ".", "invocationHandlerFactory", "(", "new", "RxJavaInvocationHandlerFactory", "(", "scheduler", ")", ")", ";", "return", "super", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "invocationHandlerFactory", "(", "InvocationHandlerFactory", "invocationHandlerFactory", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "Builder", "scheduleOn", "(", "Scheduler", "scheduler", ")", "{", "this", ".", "scheduler", "=", "scheduler", ";", "return", "this", ";", "}", "</s>"]
["<s>", "private", "RxJavaInvocationHandlerFactory", "(", "Scheduler", "scheduler", ")", "{", "this", ".", "scheduler", "=", "scheduler", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InvocationHandler", "create", "(", "Target", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ")", "{", "return", "new", "RxJavaInvocationHandler", "(", "target", ",", "dispatch", ",", "scheduler", ")", ";", "}", "</s>"]
["<s>", "ReactiveDelegatingContract", "(", "Contract", "delegate", ")", "{", "this", ".", "delegate", "=", "delegate", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "List", "<", "MethodMetadata", ">", "parseAndValidateMetadata", "(", "Class", "<", "?", ">", "targetType", ")", "{", "List", "<", "MethodMetadata", ">", "methodsMetadata", "=", "this", ".", "delegate", ".", "parseAndValidateMetadata", "(", "targetType", ")", ";", "for", "(", "final", "MethodMetadata", "metadata", ":", "methodsMetadata", ")", "{", "final", "Type", "type", "=", "metadata", ".", "returnType", "(", ")", ";", "if", "(", "!", "isReactive", "(", "type", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "metadata", ".", "configKey", "(", ")", ",", "targetType", ".", "getSimpleName", "(", ")", ")", ")", ";", "}", "Type", "[", "]", "actualTypes", "=", "(", "(", "ParameterizedType", ")", "type", ")", ".", "getActualTypeArguments", "(", ")", ";", "if", "(", "actualTypes", ".", "length", ">", "1", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "Class", "<", "?", ">", "actual", "=", "Types", ".", "getRawType", "(", "actualTypes", "[", "0", "]", ")", ";", "if", "(", "Stream", ".", "class", ".", "isAssignableFrom", "(", "actual", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "metadata", ".", "returnType", "(", "actualTypes", "[", "0", "]", ")", ";", "}", "}", "return", "methodsMetadata", ";", "}", "</s>"]
["<s>", "private", "boolean", "isReactive", "(", "Type", "type", ")", "{", "if", "(", "!", "ParameterizedType", ".", "class", ".", "isAssignableFrom", "(", "type", ".", "getClass", "(", ")", ")", ")", "{", "return", "false", ";", "}", "ParameterizedType", "parameterizedType", "=", "(", "ParameterizedType", ")", "type", ";", "Class", "<", "?", ">", "raw", "=", "(", "Class", "<", "?", ">", ")", "parameterizedType", ".", "getRawType", "(", ")", ";", "return", "Publisher", ".", "class", ".", "isAssignableFrom", "(", "raw", ")", ";", "}", "</s>"]
["<s>", "public", "ReactiveInvocationHandler", "(", "Target", "<", "?", ">", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ")", "{", "this", ".", "target", "=", "target", ";", "this", ".", "dispatch", "=", "dispatch", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "invoke", "(", "Object", "proxy", ",", "Method", "method", ",", "Object", "[", "]", "args", ")", "throws", "Throwable", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", ")", "{", "try", "{", "Object", "otherHandler", "=", "args", ".", "length", ">", "0", "&", "&", "args", "[", "0", "]", "!", "=", "null", "?", "Proxy", ".", "getInvocationHandler", "(", "args", "[", "0", "]", ")", ":", "null", ";", "return", "equals", "(", "otherHandler", ")", ";", "}", "catch", "(", "IllegalArgumentException", "e", ")", "{", "return", "false", ";", "}", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", ")", "{", "return", "hashCode", "(", ")", ";", "}", "else", "if", "(", "\"", "<STR_LIT:String>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", ")", "{", "return", "toString", "(", ")", ";", "}", "return", "this", ".", "invoke", "(", "method", ",", "this", ".", "dispatch", ".", "get", "(", "method", ")", ",", "args", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "this", ".", "target", ".", "hashCode", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "obj", "=", "=", "null", ")", "{", "return", "false", ";", "}", "if", "(", "obj", "=", "=", "this", ")", "{", "return", "true", ";", "}", "if", "(", "ReactiveInvocationHandler", ".", "class", ".", "isAssignableFrom", "(", "obj", ".", "getClass", "(", ")", ")", ")", "{", "return", "this", ".", "target", ".", "equals", "(", "obj", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "this", ".", "target", ".", "toString", "(", ")", "+", "\"", "<STR_LIT:]>", "\"", ";", "}", "</s>"]
["<s>", "protected", "abstract", "Publisher", "invoke", "(", "Method", "method", ",", "MethodHandler", "methodHandler", ",", "Object", "[", "]", "arguments", ")", ";", "</s>"]
["<s>", "Publisher", "<", "?", ">", "invokeMethod", "(", "MethodHandler", "methodHandler", ",", "Object", "[", "]", "arguments", ")", "{", "return", "subscriber", "-", ">", "subscriber", ".", "onSubscribe", "(", "new", "Subscription", "(", ")", "{", "private", "final", "AtomicBoolean", "isTerminated", "=", "new", "AtomicBoolean", "(", "false", ")", ";", "@", "Override", "public", "void", "request", "(", "long", "n", ")", "{", "if", "(", "n", "<", "=", "0", "&", "&", "!", "terminated", "(", ")", ")", "{", "subscriber", ".", "onError", "(", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "if", "(", "!", "isTerminated", "(", ")", ")", "{", "try", "{", "Object", "result", "=", "methodHandler", ".", "invoke", "(", "arguments", ")", ";", "if", "(", "null", "!", "=", "result", ")", "{", "subscriber", ".", "onNext", "(", "result", ")", ";", "}", "}", "catch", "(", "Throwable", "th", ")", "{", "if", "(", "!", "terminated", "(", ")", ")", "{", "subscriber", ".", "onError", "(", "th", ")", ";", "}", "}", "}", "if", "(", "!", "terminated", "(", ")", ")", "{", "subscriber", ".", "onComplete", "(", ")", ";", "}", "}", "@", "Override", "public", "void", "cancel", "(", ")", "{", "isTerminated", ".", "set", "(", "true", ")", ";", "}", "private", "boolean", "isTerminated", "(", ")", "{", "return", "isTerminated", ".", "get", "(", ")", ";", "}", "private", "boolean", "terminated", "(", ")", "{", "return", "isTerminated", ".", "getAndSet", "(", "true", ")", ";", "}", "}", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "request", "(", "long", "n", ")", "{", "if", "(", "n", "<", "=", "0", "&", "&", "!", "terminated", "(", ")", ")", "{", "subscriber", ".", "onError", "(", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "if", "(", "!", "isTerminated", "(", ")", ")", "{", "try", "{", "Object", "result", "=", "methodHandler", ".", "invoke", "(", "arguments", ")", ";", "if", "(", "null", "!", "=", "result", ")", "{", "subscriber", ".", "onNext", "(", "result", ")", ";", "}", "}", "catch", "(", "Throwable", "th", ")", "{", "if", "(", "!", "terminated", "(", ")", ")", "{", "subscriber", ".", "onError", "(", "th", ")", ";", "}", "}", "}", "if", "(", "!", "terminated", "(", ")", ")", "{", "subscriber", ".", "onComplete", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "cancel", "(", ")", "{", "isTerminated", ".", "set", "(", "true", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "isTerminated", "(", ")", "{", "return", "isTerminated", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "terminated", "(", ")", "{", "return", "isTerminated", ".", "getAndSet", "(", "true", ")", ";", "}", "</s>"]
["<s>", "RxJavaInvocationHandler", "(", "Target", "<", "?", ">", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ",", "Scheduler", "scheduler", ")", "{", "super", "(", "target", ",", "dispatch", ")", ";", "this", ".", "scheduler", "=", "scheduler", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Publisher", "invoke", "(", "Method", "method", ",", "MethodHandler", "methodHandler", ",", "Object", "[", "]", "arguments", ")", "{", "return", "Flowable", ".", "fromPublisher", "(", "this", ".", "invokeMethod", "(", "methodHandler", ",", "arguments", ")", ")", ".", "observeOn", "(", "scheduler", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Builder", "builder", "(", ")", "{", "return", "new", "Builder", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Feign", "build", "(", ")", "{", "super", ".", "invocationHandlerFactory", "(", "new", "ReactorInvocationHandlerFactory", "(", "scheduler", ")", ")", ";", "return", "super", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "invocationHandlerFactory", "(", "InvocationHandlerFactory", "invocationHandlerFactory", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "Builder", "scheduleOn", "(", "Scheduler", "scheduler", ")", "{", "this", ".", "scheduler", "=", "scheduler", ";", "return", "this", ";", "}", "</s>"]
["<s>", "private", "ReactorInvocationHandlerFactory", "(", "Scheduler", "scheduler", ")", "{", "this", ".", "scheduler", "=", "scheduler", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InvocationHandler", "create", "(", "Target", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ")", "{", "return", "new", "ReactorInvocationHandler", "(", "target", ",", "dispatch", ",", "scheduler", ")", ";", "}", "</s>"]
["<s>", "ReactorInvocationHandler", "(", "Target", "<", "?", ">", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ",", "Scheduler", "scheduler", ")", "{", "super", "(", "target", ",", "dispatch", ")", ";", "this", ".", "scheduler", "=", "scheduler", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Publisher", "invoke", "(", "Method", "method", ",", "MethodHandler", "methodHandler", ",", "Object", "[", "]", "arguments", ")", "{", "Publisher", "<", "?", ">", "invocation", "=", "this", ".", "invokeMethod", "(", "methodHandler", ",", "arguments", ")", ";", "if", "(", "Flux", ".", "class", ".", "isAssignableFrom", "(", "method", ".", "getReturnType", "(", ")", ")", ")", "{", "return", "Flux", ".", "from", "(", "invocation", ")", ".", "subscribeOn", "(", "scheduler", ")", ";", "}", "else", "if", "(", "Mono", ".", "class", ".", "isAssignableFrom", "(", "method", ".", "getReturnType", "(", ")", ")", ")", "{", "return", "Mono", ".", "from", "(", "invocation", ")", ".", "subscribeOn", "(", "scheduler", ")", ";", "}", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "method", ".", "getReturnType", "(", ")", ".", "getName", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setUp", "(", ")", "{", "RequestHeaders", "headers", "=", "RequestHeaders", ".", "builder", "(", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "requestKey", "=", "RequestKey", ".", "builder", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "headers", "(", "headers", ")", ".", "charset", "(", "StandardCharsets", ".", "UTF_16", ")", ".", "body", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "builder", "(", ")", "throws", "Exception", "{", "assertThat", "(", "requestKey", ".", "getMethod", "(", ")", ",", "equalTo", "(", "HttpMethod", ".", "GET", ")", ")", ";", "assertThat", "(", "requestKey", ".", "getUrl", "(", ")", ",", "equalTo", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "requestKey", ".", "getHeaders", "(", ")", ".", "size", "(", ")", ",", "is", "(", "1", ")", ")", ";", "assertThat", "(", "requestKey", ".", "getHeaders", "(", ")", ".", "fetch", "(", "\"", "<STR_LIT>", "\"", ")", ",", "equalTo", "(", "(", "Collection", "<", "String", ">", ")", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "requestKey", ".", "getCharset", "(", ")", ",", "equalTo", "(", "StandardCharsets", ".", "UTF_16", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Test", "public", "void", "create", "(", ")", "throws", "Exception", "{", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "map", "=", "new", "HashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", ")", ";", "map", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Request", "request", "=", "Request", ".", "create", "(", "Request", ".", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "map", ",", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ",", "StandardCharsets", ".", "UTF_16", ")", ";", "requestKey", "=", "RequestKey", ".", "create", "(", "request", ")", ";", "assertThat", "(", "requestKey", ".", "getMethod", "(", ")", ",", "equalTo", "(", "HttpMethod", ".", "GET", ")", ")", ";", "assertThat", "(", "requestKey", ".", "getUrl", "(", ")", ",", "equalTo", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "requestKey", ".", "getHeaders", "(", ")", ".", "size", "(", ")", ",", "is", "(", "1", ")", ")", ";", "assertThat", "(", "requestKey", ".", "getHeaders", "(", ")", ".", "fetch", "(", "\"", "<STR_LIT>", "\"", ")", ",", "equalTo", "(", "(", "Collection", "<", "String", ">", ")", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "requestKey", ".", "getCharset", "(", ")", ",", "equalTo", "(", "StandardCharsets", ".", "UTF_16", ")", ")", ";", "assertThat", "(", "requestKey", ".", "getBody", "(", ")", ",", "equalTo", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "checkHashes", "(", ")", "{", "RequestKey", "requestKey1", "=", "RequestKey", ".", "builder", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "RequestKey", "requestKey2", "=", "RequestKey", ".", "builder", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "assertThat", "(", "requestKey1", ".", "hashCode", "(", ")", ",", "not", "(", "equalTo", "(", "requestKey2", ".", "hashCode", "(", ")", ")", ")", ")", ";", "assertThat", "(", "requestKey1", ",", "not", "(", "equalTo", "(", "requestKey2", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "equalObject", "(", ")", "{", "assertThat", "(", "requestKey", ",", "not", "(", "equalTo", "(", "new", "Object", "(", ")", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "equalNull", "(", ")", "{", "assertThat", "(", "requestKey", ",", "not", "(", "equalTo", "(", "null", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "equalPost", "(", ")", "{", "RequestKey", "requestKey1", "=", "RequestKey", ".", "builder", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "RequestKey", "requestKey2", "=", "RequestKey", ".", "builder", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "assertThat", "(", "requestKey1", ".", "hashCode", "(", ")", ",", "not", "(", "equalTo", "(", "requestKey2", ".", "hashCode", "(", ")", ")", ")", ")", ";", "assertThat", "(", "requestKey1", ",", "not", "(", "equalTo", "(", "requestKey2", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "equalSelf", "(", ")", "{", "assertThat", "(", "requestKey", ".", "hashCode", "(", ")", ",", "equalTo", "(", "requestKey", ".", "hashCode", "(", ")", ")", ")", ";", "assertThat", "(", "requestKey", ",", "equalTo", "(", "requestKey", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "equalMinimum", "(", ")", "{", "RequestKey", "requestKey2", "=", "RequestKey", ".", "builder", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "assertThat", "(", "requestKey", ".", "hashCode", "(", ")", ",", "equalTo", "(", "requestKey2", ".", "hashCode", "(", ")", ")", ")", ";", "assertThat", "(", "requestKey", ",", "equalTo", "(", "requestKey2", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "equalExtra", "(", ")", "{", "RequestHeaders", "headers", "=", "RequestHeaders", ".", "builder", "(", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "RequestKey", "requestKey2", "=", "RequestKey", ".", "builder", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "headers", "(", "headers", ")", ".", "charset", "(", "StandardCharsets", ".", "ISO_8859_1", ")", ".", "build", "(", ")", ";", "assertThat", "(", "requestKey", ".", "hashCode", "(", ")", ",", "equalTo", "(", "requestKey2", ".", "hashCode", "(", ")", ")", ")", ";", "assertThat", "(", "requestKey", ",", "equalTo", "(", "requestKey2", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "equalsExtended", "(", ")", "{", "RequestKey", "requestKey2", "=", "RequestKey", ".", "builder", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "assertThat", "(", "requestKey", ".", "hashCode", "(", ")", ",", "equalTo", "(", "requestKey2", ".", "hashCode", "(", ")", ")", ")", ";", "assertThat", "(", "requestKey", ".", "equalsExtended", "(", "requestKey2", ")", ",", "equalTo", "(", "true", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "equalsExtendedExtra", "(", ")", "{", "RequestHeaders", "headers", "=", "RequestHeaders", ".", "builder", "(", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "RequestKey", "requestKey2", "=", "RequestKey", ".", "builder", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "headers", "(", "headers", ")", ".", "charset", "(", "StandardCharsets", ".", "ISO_8859_1", ")", ".", "build", "(", ")", ";", "assertThat", "(", "requestKey", ".", "hashCode", "(", ")", ",", "equalTo", "(", "requestKey2", ".", "hashCode", "(", ")", ")", ")", ";", "assertThat", "(", "requestKey", ".", "equalsExtended", "(", "requestKey2", ")", ",", "equalTo", "(", "false", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testToString", "(", ")", "throws", "Exception", "{", "assertThat", "(", "requestKey", ".", "toString", "(", ")", ",", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "requestKey", ".", "toString", "(", ")", ",", "both", "(", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "and", "(", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testToStringSimple", "(", ")", "throws", "Exception", "{", "requestKey", "=", "RequestKey", ".", "builder", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "assertThat", "(", "requestKey", ".", "toString", "(", ")", ",", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "requestKey", ".", "toString", "(", ")", ",", "both", "(", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "and", "(", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "{", "target", "=", "new", "MockTarget", "<", ">", "(", "MockTargetTest", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "test", "(", ")", "{", "assertThat", "(", "target", ".", "name", "(", ")", ",", "equalTo", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldCreateEmptyRequestHeaders", "(", ")", "{", "RequestHeaders", "headers", "=", "RequestHeaders", ".", "builder", "(", ")", ".", "build", "(", ")", ";", "assertThat", "(", "headers", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldReturnZeroSizeForUnknownKey", "(", ")", "{", "RequestHeaders", "headers", "=", "RequestHeaders", ".", "builder", "(", ")", ".", "build", "(", ")", ";", "assertThat", "(", "headers", ".", "sizeOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldCreateRequestHeadersFromSingleValue", "(", ")", "{", "RequestHeaders", "headers", "=", "RequestHeaders", ".", "builder", "(", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ")", ".", "build", "(", ")", ";", "assertThat", "(", "headers", ".", "fetch", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "headers", ".", "sizeOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "assertThat", "(", "headers", ".", "fetch", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "contains", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "assertThat", "(", "headers", ".", "sizeOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldCreateRequestHeadersFromSingleValueAndCollection", "(", ")", "{", "RequestHeaders", "headers", "=", "RequestHeaders", ".", "builder", "(", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:3>", "\"", ",", "\"", "<STR_LIT:4>", "\"", ")", ")", ".", "build", "(", ")", ";", "assertThat", "(", "headers", ".", "fetch", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "contains", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:3>", "\"", ",", "\"", "<STR_LIT:4>", "\"", ")", ";", "assertThat", "(", "headers", ".", "sizeOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT:3>", ")", ";", "assertThat", "(", "headers", ".", "fetch", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "contains", "(", "\"", "<STR_LIT:2>", "\"", ")", ";", "assertThat", "(", "headers", ".", "sizeOf", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldCreateRequestHeadersFromHeadersMap", "(", ")", "{", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "map", "=", "new", "HashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", ")", ";", "map", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ")", ")", ";", "RequestHeaders", "headers", "=", "RequestHeaders", ".", "of", "(", "map", ")", ";", "assertThat", "(", "headers", ".", "size", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldPrintHeaders", "(", ")", "{", "RequestHeaders", "headers", "=", "RequestHeaders", ".", "builder", "(", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:2>", "\"", ")", ".", "add", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT:3>", "\"", ",", "\"", "<STR_LIT:4>", "\"", ")", ")", ".", "build", "(", ")", ";", "assertThat", "(", "headers", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "Contributor", ">", "contributors", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "Contributor", ">", "contributors", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "clientId", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "Contributor", ">", "patchContributors", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Body", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", "Contributor", "create", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "login", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "type", ")", ";", "</s>"]
["<s>", "public", "AssertionDecoder", "(", "Decoder", "delegate", ")", "{", "this", ".", "delegate", "=", "delegate", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", ",", "DecodeException", ",", "FeignException", "{", "assertThat", "(", "response", ".", "request", "(", ")", ",", "notNullValue", "(", ")", ")", ";", "return", "delegate", ".", "decode", "(", "response", ",", "type", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "throws", "IOException", "{", "try", "(", "InputStream", "input", "=", "getClass", "(", ")", ".", "getResourceAsStream", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "byte", "[", "]", "data", "=", "toByteArray", "(", "input", ")", ";", "mockClient", "=", "new", "MockClient", "(", ")", ";", "github", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "new", "AssertionDecoder", "(", "new", "GsonDecoder", "(", ")", ")", ")", ".", "client", "(", "mockClient", ".", "ok", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "data", ")", ".", "ok", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "ok", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "new", "ByteArrayInputStream", "(", "data", ")", ")", ".", "ok", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ".", "noContent", "(", "HttpMethod", ".", "PATCH", ",", "\"", "<STR_LIT>", "\"", ")", ".", "add", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "HttpsURLConnection", ".", "HTTP_NOT_FOUND", ")", ".", "add", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "HttpsURLConnection", ".", "HTTP_INTERNAL_ERROR", ",", "new", "ByteArrayInputStream", "(", "data", ")", ")", ".", "add", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "HttpsURLConnection", ".", "HTTP_INTERNAL_ERROR", ",", "\"", "\"", ")", ".", "add", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "HttpsURLConnection", ".", "HTTP_INTERNAL_ERROR", ",", "data", ")", ")", ".", "target", "(", "new", "MockTarget", "<", ">", "(", "GitHub", ".", "class", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hitMock", "(", ")", "{", "List", "<", "Contributor", ">", "contributors", "=", "github", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "contributors", ",", "hasSize", "(", "<NUM_LIT:30>", ")", ")", ";", "mockClient", ".", "verifyStatus", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "missMock", "(", ")", "{", "try", "{", "github", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "Matchers", ".", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "missHttpMethod", "(", ")", "{", "try", "{", "github", ".", "patchContributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "Matchers", ".", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "paramsEncoding", "(", ")", "{", "List", "<", "Contributor", ">", "contributors", "=", "github", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "contributors", ",", "hasSize", "(", "<NUM_LIT:30>", ")", ")", ";", "mockClient", ".", "verifyStatus", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "verifyInvocation", "(", ")", "{", "Contributor", "contribution", "=", "github", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "contribution", ",", "notNullValue", "(", ")", ")", ";", "assertThat", "(", "contribution", ".", "login", ",", "equalTo", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "contribution", ".", "contributions", ",", "equalTo", "(", "0", ")", ")", ";", "List", "<", "Request", ">", "results", "=", "mockClient", ".", "verifyTimes", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "assertThat", "(", "results", ",", "hasSize", "(", "1", ")", ")", ";", "byte", "[", "]", "body", "=", "mockClient", ".", "verifyOne", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ")", ".", "body", "(", ")", ";", "assertThat", "(", "body", ",", "notNullValue", "(", ")", ")", ";", "String", "message", "=", "new", "String", "(", "body", ")", ";", "assertThat", "(", "message", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "message", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "mockClient", ".", "verifyStatus", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "verifyNone", "(", ")", "{", "github", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockClient", ".", "verifyTimes", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "try", "{", "mockClient", ".", "verifyTimes", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ",", "0", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "VerificationAssertionError", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "containsString", "(", "\"", "<STR_LIT:POST>", "\"", ")", ")", ";", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "try", "{", "mockClient", ".", "verifyTimes", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:3>", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "VerificationAssertionError", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "containsString", "(", "\"", "<STR_LIT:POST>", "\"", ")", ")", ";", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "containsString", "(", "\"", "<CHAR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "containsString", "(", "\"", "<CHAR_LIT:1>", "\"", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "verifyNotInvoked", "(", ")", "{", "mockClient", ".", "verifyNever", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ")", ";", "List", "<", "Request", ">", "results", "=", "mockClient", ".", "verifyTimes", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ",", "0", ")", ";", "assertThat", "(", "results", ",", "hasSize", "(", "0", ")", ")", ";", "try", "{", "mockClient", ".", "verifyOne", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "VerificationAssertionError", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "containsString", "(", "\"", "<STR_LIT:POST>", "\"", ")", ")", ";", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "verifyNegative", "(", ")", "{", "try", "{", "mockClient", ".", "verifyTimes", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ",", "-", "1", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "IllegalArgumentException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "verifyMultipleRequests", "(", ")", "{", "mockClient", ".", "verifyNever", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ")", ";", "github", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Request", "result", "=", "mockClient", ".", "verifyOne", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "result", ",", "notNullValue", "(", ")", ")", ";", "github", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "List", "<", "Request", ">", "results", "=", "mockClient", ".", "verifyTimes", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:2>", ")", ";", "assertThat", "(", "results", ",", "hasSize", "(", "<NUM_LIT:2>", ")", ")", ";", "github", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "results", "=", "mockClient", ".", "verifyTimes", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ",", "<NUM_LIT:3>", ")", ";", "assertThat", "(", "results", ",", "hasSize", "(", "<NUM_LIT:3>", ")", ")", ";", "mockClient", ".", "verifyStatus", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "resetRequests", "(", ")", "{", "mockClient", ".", "verifyNever", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ")", ";", "github", ".", "create", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "Request", "result", "=", "mockClient", ".", "verifyOne", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "result", ",", "notNullValue", "(", ")", ")", ";", "mockClient", ".", "resetRequests", "(", ")", ";", "mockClient", ".", "verifyNever", "(", "HttpMethod", ".", "POST", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Headers", "(", "{", "\"", "<STR_LIT>", "\"", "}", ")", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "Contributor", ">", "contributors", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "Contributor", ">", "contributors", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "clientId", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "Contributor", ">", "patchContributors", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Body", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", "Contributor", "create", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "login", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "type", ")", ";", "</s>"]
["<s>", "public", "AssertionDecoder", "(", "Decoder", "delegate", ")", "{", "this", ".", "delegate", "=", "delegate", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", ",", "DecodeException", ",", "FeignException", "{", "assertThat", "(", "response", ".", "request", "(", ")", ",", "notNullValue", "(", ")", ")", ";", "return", "delegate", ".", "decode", "(", "response", ",", "type", ")", ";", "}", "</s>"]
["<s>", "@", "Before", "public", "void", "setup", "(", ")", "throws", "IOException", "{", "try", "(", "InputStream", "input", "=", "getClass", "(", ")", ".", "getResourceAsStream", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "byte", "[", "]", "data", "=", "toByteArray", "(", "input", ")", ";", "RequestHeaders", "headers", "=", "RequestHeaders", ".", "builder", "(", ")", ".", "add", "(", "\"", "<STR_LIT:Name>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "mockClientSequential", "=", "new", "MockClient", "(", "true", ")", ";", "githubSequential", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "new", "AssertionDecoder", "(", "new", "GsonDecoder", "(", ")", ")", ")", ".", "client", "(", "mockClientSequential", ".", "add", "(", "RequestKey", ".", "builder", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ")", ".", "headers", "(", "headers", ")", ".", "build", "(", ")", ",", "HttpsURLConnection", ".", "HTTP_OK", ",", "data", ")", ".", "add", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "HttpsURLConnection", ".", "HTTP_NOT_FOUND", ")", ".", "add", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "HttpsURLConnection", ".", "HTTP_INTERNAL_ERROR", ",", "new", "ByteArrayInputStream", "(", "data", ")", ")", ".", "add", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Response", ".", "builder", "(", ")", ".", "status", "(", "HttpsURLConnection", ".", "HTTP_OK", ")", ".", "headers", "(", "RequestHeaders", ".", "EMPTY", ")", ".", "body", "(", "data", ")", ")", ")", ".", "target", "(", "new", "MockTarget", "<", ">", "(", "GitHub", ".", "class", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sequentialRequests", "(", ")", "throws", "Exception", "{", "githubSequential", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "githubSequential", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "status", "(", ")", ",", "equalTo", "(", "HttpsURLConnection", ".", "HTTP_NOT_FOUND", ")", ")", ";", "}", "try", "{", "githubSequential", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "status", "(", ")", ",", "equalTo", "(", "HttpsURLConnection", ".", "HTTP_INTERNAL_ERROR", ")", ")", ";", "}", "githubSequential", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "mockClientSequential", ".", "verifyStatus", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sequentialRequestsCalledTooLess", "(", ")", "throws", "Exception", "{", "githubSequential", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "mockClientSequential", ".", "verifyStatus", "(", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "VerificationAssertionError", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sequentialRequestsCalledTooMany", "(", ")", "throws", "Exception", "{", "sequentialRequests", "(", ")", ";", "try", "{", "githubSequential", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "VerificationAssertionError", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "containsString", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "sequentialRequestsInWrongOrder", "(", ")", "throws", "Exception", "{", "try", "{", "githubSequential", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "fail", "(", ")", ";", "}", "catch", "(", "VerificationAssertionError", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ",", "startsWith", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ")", ";", "}", "}", "</s>"]
["<s>", "public", "VerificationAssertionError", "(", "String", "message", ",", "Object", ".", ".", ".", "arguments", ")", "{", "super", "(", "String", ".", "format", "(", "message", ",", "arguments", ")", ")", ";", "}", "</s>"]
["<s>", "public", "RequestResponse", "(", "RequestKey", "requestKey", ",", "Response", ".", "Builder", "responseBuilder", ")", "{", "this", ".", "requestKey", "=", "requestKey", ";", "this", ".", "responseBuilder", "=", "responseBuilder", ";", "}", "</s>"]
["<s>", "public", "MockClient", "(", ")", "{", "}", "</s>"]
["<s>", "public", "MockClient", "(", "boolean", "sequential", ")", "{", "this", ".", "sequential", "=", "sequential", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "synchronized", "Response", "execute", "(", "Request", "request", ",", "Request", ".", "Options", "options", ")", "throws", "IOException", "{", "RequestKey", "requestKey", "=", "RequestKey", ".", "create", "(", "request", ")", ";", "Response", ".", "Builder", "responseBuilder", ";", "if", "(", "sequential", ")", "{", "responseBuilder", "=", "executeSequential", "(", "requestKey", ")", ";", "}", "else", "{", "responseBuilder", "=", "executeAny", "(", "request", ",", "requestKey", ")", ";", "}", "return", "responseBuilder", ".", "request", "(", "request", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Response", ".", "Builder", "executeSequential", "(", "RequestKey", "requestKey", ")", "{", "Response", ".", "Builder", "responseBuilder", ";", "if", "(", "responseIterator", "=", "=", "null", ")", "{", "responseIterator", "=", "responses", ".", "iterator", "(", ")", ";", "}", "if", "(", "!", "responseIterator", ".", "hasNext", "(", ")", ")", "{", "throw", "new", "VerificationAssertionError", "(", "\"", "<STR_LIT>", "\"", ",", "requestKey", ")", ";", "}", "RequestResponse", "expectedRequestResponse", "=", "responseIterator", ".", "next", "(", ")", ";", "if", "(", "!", "expectedRequestResponse", ".", "requestKey", ".", "equalsExtended", "(", "requestKey", ")", ")", "{", "throw", "new", "VerificationAssertionError", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT:%s>", "\"", ",", "expectedRequestResponse", ".", "requestKey", ",", "requestKey", ")", ";", "}", "responseBuilder", "=", "expectedRequestResponse", ".", "responseBuilder", ";", "return", "responseBuilder", ";", "}", "</s>"]
["<s>", "private", "Response", ".", "Builder", "executeAny", "(", "Request", "request", ",", "RequestKey", "requestKey", ")", "{", "Response", ".", "Builder", "responseBuilder", ";", "if", "(", "requests", ".", "containsKey", "(", "requestKey", ")", ")", "{", "requests", ".", "get", "(", "requestKey", ")", ".", "add", "(", "request", ")", ";", "}", "else", "{", "requests", ".", "put", "(", "requestKey", ",", "new", "ArrayList", "<", "Request", ">", "(", "Arrays", ".", "asList", "(", "request", ")", ")", ")", ";", "}", "responseBuilder", "=", "getResponseBuilder", "(", "request", ",", "requestKey", ")", ";", "return", "responseBuilder", ";", "}", "</s>"]
["<s>", "private", "Response", ".", "Builder", "getResponseBuilder", "(", "Request", "request", ",", "RequestKey", "requestKey", ")", "{", "Response", ".", "Builder", "responseBuilder", "=", "null", ";", "for", "(", "RequestResponse", "requestResponse", ":", "responses", ")", "{", "if", "(", "requestResponse", ".", "requestKey", ".", "equalsExtended", "(", "requestKey", ")", ")", "{", "responseBuilder", "=", "requestResponse", ".", "responseBuilder", ";", "}", "}", "if", "(", "responseBuilder", "=", "=", "null", ")", "{", "responseBuilder", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "HttpURLConnection", ".", "HTTP_NOT_FOUND", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "headers", "(", "request", ".", "headers", "(", ")", ")", ";", "}", "return", "responseBuilder", ";", "}", "</s>"]
["<s>", "public", "MockClient", "ok", "(", "HttpMethod", "method", ",", "String", "url", ",", "InputStream", "responseBody", ")", "throws", "IOException", "{", "return", "ok", "(", "RequestKey", ".", "builder", "(", "method", ",", "url", ")", ".", "build", "(", ")", ",", "responseBody", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "ok", "(", "HttpMethod", "method", ",", "String", "url", ",", "String", "responseBody", ")", "{", "return", "ok", "(", "RequestKey", ".", "builder", "(", "method", ",", "url", ")", ".", "build", "(", ")", ",", "responseBody", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "ok", "(", "HttpMethod", "method", ",", "String", "url", ",", "byte", "[", "]", "responseBody", ")", "{", "return", "ok", "(", "RequestKey", ".", "builder", "(", "method", ",", "url", ")", ".", "build", "(", ")", ",", "responseBody", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "ok", "(", "HttpMethod", "method", ",", "String", "url", ")", "{", "return", "ok", "(", "RequestKey", ".", "builder", "(", "method", ",", "url", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "ok", "(", "RequestKey", "requestKey", ",", "InputStream", "responseBody", ")", "throws", "IOException", "{", "return", "ok", "(", "requestKey", ",", "Util", ".", "toByteArray", "(", "responseBody", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "ok", "(", "RequestKey", "requestKey", ",", "String", "responseBody", ")", "{", "return", "ok", "(", "requestKey", ",", "responseBody", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "ok", "(", "RequestKey", "requestKey", ",", "byte", "[", "]", "responseBody", ")", "{", "return", "add", "(", "requestKey", ",", "HttpURLConnection", ".", "HTTP_OK", ",", "responseBody", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "ok", "(", "RequestKey", "requestKey", ")", "{", "return", "ok", "(", "requestKey", ",", "(", "byte", "[", "]", ")", "null", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "add", "(", "HttpMethod", "method", ",", "String", "url", ",", "int", "status", ",", "InputStream", "responseBody", ")", "throws", "IOException", "{", "return", "add", "(", "RequestKey", ".", "builder", "(", "method", ",", "url", ")", ".", "build", "(", ")", ",", "status", ",", "responseBody", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "add", "(", "HttpMethod", "method", ",", "String", "url", ",", "int", "status", ",", "String", "responseBody", ")", "{", "return", "add", "(", "RequestKey", ".", "builder", "(", "method", ",", "url", ")", ".", "build", "(", ")", ",", "status", ",", "responseBody", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "add", "(", "HttpMethod", "method", ",", "String", "url", ",", "int", "status", ",", "byte", "[", "]", "responseBody", ")", "{", "return", "add", "(", "RequestKey", ".", "builder", "(", "method", ",", "url", ")", ".", "build", "(", ")", ",", "status", ",", "responseBody", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "add", "(", "HttpMethod", "method", ",", "String", "url", ",", "int", "status", ")", "{", "return", "add", "(", "RequestKey", ".", "builder", "(", "method", ",", "url", ")", ".", "build", "(", ")", ",", "status", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "add", "(", "HttpMethod", "method", ",", "String", "url", ",", "Response", ".", "Builder", "response", ")", "{", "return", "add", "(", "RequestKey", ".", "builder", "(", "method", ",", "url", ")", ".", "build", "(", ")", ",", "response", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "add", "(", "RequestKey", "requestKey", ",", "int", "status", ",", "InputStream", "responseBody", ")", "throws", "IOException", "{", "return", "add", "(", "requestKey", ",", "status", ",", "Util", ".", "toByteArray", "(", "responseBody", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "add", "(", "RequestKey", "requestKey", ",", "int", "status", ",", "String", "responseBody", ")", "{", "return", "add", "(", "requestKey", ",", "status", ",", "responseBody", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "add", "(", "RequestKey", "requestKey", ",", "int", "status", ",", "byte", "[", "]", "responseBody", ")", "{", "return", "add", "(", "requestKey", ",", "Response", ".", "builder", "(", ")", ".", "status", "(", "status", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "headers", "(", "RequestHeaders", ".", "EMPTY", ")", ".", "body", "(", "responseBody", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "add", "(", "RequestKey", "requestKey", ",", "int", "status", ")", "{", "return", "add", "(", "requestKey", ",", "status", ",", "(", "byte", "[", "]", ")", "null", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "add", "(", "RequestKey", "requestKey", ",", "Response", ".", "Builder", "response", ")", "{", "responses", ".", "add", "(", "new", "RequestResponse", "(", "requestKey", ",", "response", ")", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "MockClient", "add", "(", "HttpMethod", "method", ",", "String", "url", ",", "Response", "response", ")", "{", "return", "this", ".", "add", "(", "method", ",", "url", ",", "response", ".", "toBuilder", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MockClient", "noContent", "(", "HttpMethod", "method", ",", "String", "url", ")", "{", "return", "add", "(", "method", ",", "url", ",", "HttpURLConnection", ".", "HTTP_NO_CONTENT", ")", ";", "}", "</s>"]
["<s>", "public", "Request", "verifyOne", "(", "HttpMethod", "method", ",", "String", "url", ")", "{", "return", "verifyTimes", "(", "method", ",", "url", ",", "1", ")", ".", "get", "(", "0", ")", ";", "}", "</s>"]
["<s>", "public", "List", "<", "Request", ">", "verifyTimes", "(", "final", "HttpMethod", "method", ",", "final", "String", "url", ",", "final", "int", "times", ")", "{", "if", "(", "times", "<", "0", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "times", "=", "=", "0", ")", "{", "verifyNever", "(", "method", ",", "url", ")", ";", "return", "Collections", ".", "emptyList", "(", ")", ";", "}", "RequestKey", "requestKey", "=", "RequestKey", ".", "builder", "(", "method", ",", "url", ")", ".", "build", "(", ")", ";", "if", "(", "!", "requests", ".", "containsKey", "(", "requestKey", ")", ")", "{", "throw", "new", "VerificationAssertionError", "(", "\"", "<STR_LIT>", "\"", ",", "requestKey", ",", "requests", ".", "keySet", "(", ")", ")", ";", "}", "List", "<", "Request", ">", "result", "=", "requests", ".", "get", "(", "requestKey", ")", ";", "if", "(", "result", ".", "size", "(", ")", "!", "=", "times", ")", "{", "throw", "new", "VerificationAssertionError", "(", "\"", "<STR_LIT>", "\"", ",", "requestKey", ",", "times", ",", "result", ".", "size", "(", ")", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "public", "void", "verifyNever", "(", "HttpMethod", "method", ",", "String", "url", ")", "{", "RequestKey", "requestKey", "=", "RequestKey", ".", "builder", "(", "method", ",", "url", ")", ".", "build", "(", ")", ";", "if", "(", "requests", ".", "containsKey", "(", "requestKey", ")", ")", "{", "throw", "new", "VerificationAssertionError", "(", "\"", "<STR_LIT>", "\"", ",", "requestKey", ")", ";", "}", "}", "</s>"]
["<s>", "public", "void", "verifyStatus", "(", ")", "{", "if", "(", "sequential", ")", "{", "boolean", "unopenedIterator", "=", "responseIterator", "=", "=", "null", "&", "&", "!", "responses", ".", "isEmpty", "(", ")", ";", "if", "(", "unopenedIterator", "|", "|", "responseIterator", ".", "hasNext", "(", ")", ")", "{", "throw", "new", "VerificationAssertionError", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "void", "resetRequests", "(", ")", "{", "requests", ".", "clear", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Builder", "(", "HttpMethod", "method", ",", "String", "url", ")", "{", "this", ".", "method", "=", "method", ";", "this", ".", "url", "=", "url", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "Builder", "headers", "(", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ")", "{", "this", ".", "headers", "=", "RequestHeaders", ".", "of", "(", "headers", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "headers", "(", "RequestHeaders", "headers", ")", "{", "this", ".", "headers", "=", "headers", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "charset", "(", "Charset", "charset", ")", "{", "this", ".", "charset", "=", "charset", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "body", "(", "String", "body", ")", "{", "return", "body", "(", "body", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Builder", "body", "(", "byte", "[", "]", "body", ")", "{", "this", ".", "body", "=", "body", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestKey", "build", "(", ")", "{", "return", "new", "RequestKey", "(", "this", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Builder", "builder", "(", "HttpMethod", "method", ",", "String", "url", ")", "{", "return", "new", "Builder", "(", "method", ",", "url", ")", ";", "}", "</s>"]
["<s>", "public", "static", "RequestKey", "create", "(", "Request", "request", ")", "{", "return", "new", "RequestKey", "(", "request", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "buildUrl", "(", "Request", "request", ")", "{", "try", "{", "return", "URLDecoder", ".", "decode", "(", "request", ".", "url", "(", ")", ",", "Util", ".", "UTF_8", ".", "name", "(", ")", ")", ";", "}", "catch", "(", "final", "UnsupportedEncodingException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "RequestKey", "(", "Builder", "builder", ")", "{", "this", ".", "method", "=", "builder", ".", "method", ";", "this", ".", "url", "=", "builder", ".", "url", ";", "this", ".", "headers", "=", "builder", ".", "headers", ";", "this", ".", "charset", "=", "builder", ".", "charset", ";", "this", ".", "body", "=", "builder", ".", "body", ";", "}", "</s>"]
["<s>", "private", "RequestKey", "(", "Request", "request", ")", "{", "this", ".", "method", "=", "HttpMethod", ".", "valueOf", "(", "request", ".", "httpMethod", "(", ")", ".", "name", "(", ")", ")", ";", "this", ".", "url", "=", "buildUrl", "(", "request", ")", ";", "this", ".", "headers", "=", "RequestHeaders", ".", "of", "(", "request", ".", "headers", "(", ")", ")", ";", "this", ".", "charset", "=", "request", ".", "charset", "(", ")", ";", "this", ".", "body", "=", "request", ".", "body", "(", ")", ";", "}", "</s>"]
["<s>", "public", "HttpMethod", "getMethod", "(", ")", "{", "return", "method", ";", "}", "</s>"]
["<s>", "public", "String", "getUrl", "(", ")", "{", "return", "url", ";", "}", "</s>"]
["<s>", "public", "RequestHeaders", "getHeaders", "(", ")", "{", "return", "headers", ";", "}", "</s>"]
["<s>", "public", "Charset", "getCharset", "(", ")", "{", "return", "charset", ";", "}", "</s>"]
["<s>", "public", "byte", "[", "]", "getBody", "(", ")", "{", "return", "body", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "final", "int", "prime", "=", "<NUM_LIT:31>", ";", "int", "result", "=", "1", ";", "result", "=", "prime", "*", "result", "+", "(", "(", "method", "=", "=", "null", ")", "?", "0", ":", "method", ".", "hashCode", "(", ")", ")", ";", "result", "=", "prime", "*", "result", "+", "(", "(", "url", "=", "=", "null", ")", "?", "0", ":", "url", ".", "hashCode", "(", ")", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "this", "=", "=", "obj", ")", "{", "return", "true", ";", "}", "if", "(", "obj", "=", "=", "null", ")", "{", "return", "false", ";", "}", "if", "(", "getClass", "(", ")", "!", "=", "obj", ".", "getClass", "(", ")", ")", "{", "return", "false", ";", "}", "final", "RequestKey", "other", "=", "(", "RequestKey", ")", "obj", ";", "if", "(", "method", "!", "=", "other", ".", "method", ")", "{", "return", "false", ";", "}", "if", "(", "url", "=", "=", "null", ")", "{", "return", "other", ".", "url", "=", "=", "null", ";", "}", "else", "return", "url", ".", "equals", "(", "other", ".", "url", ")", ";", "}", "</s>"]
["<s>", "public", "boolean", "equalsExtended", "(", "Object", "obj", ")", "{", "if", "(", "equals", "(", "obj", ")", ")", "{", "RequestKey", "other", "=", "(", "RequestKey", ")", "obj", ";", "boolean", "headersEqual", "=", "other", ".", "headers", "=", "=", "null", "|", "|", "headers", "=", "=", "null", "|", "|", "headers", ".", "equals", "(", "other", ".", "headers", ")", ";", "boolean", "charsetEqual", "=", "other", ".", "charset", "=", "=", "null", "|", "|", "charset", "=", "=", "null", "|", "|", "charset", ".", "equals", "(", "other", ".", "charset", ")", ";", "boolean", "bodyEqual", "=", "other", ".", "body", "=", "=", "null", "|", "|", "body", "=", "=", "null", "|", "|", "Arrays", ".", "equals", "(", "other", ".", "body", ",", "body", ")", ";", "return", "headersEqual", "&", "&", "charsetEqual", "&", "&", "bodyEqual", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "method", ",", "url", ",", "headers", "=", "=", "null", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", "+", "headers", ",", "charset", "=", "=", "null", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", "+", "charset", ")", ";", "}", "</s>"]
["<s>", "private", "Builder", "(", ")", "{", "}", "</s>"]
["<s>", "public", "Builder", "add", "(", "String", "key", ",", "Collection", "<", "String", ">", "values", ")", "{", "if", "(", "!", "headers", ".", "containsKey", "(", "key", ")", ")", "{", "headers", ".", "put", "(", "key", ",", "values", ")", ";", "}", "else", "{", "Collection", "<", "String", ">", "previousValues", "=", "headers", ".", "get", "(", "key", ")", ";", "previousValues", ".", "addAll", "(", "values", ")", ";", "headers", ".", "put", "(", "key", ",", "previousValues", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "add", "(", "String", "key", ",", "String", "value", ")", "{", "if", "(", "!", "headers", ".", "containsKey", "(", "key", ")", ")", "{", "headers", ".", "put", "(", "key", ",", "new", "ArrayList", "<", "String", ">", "(", "Arrays", ".", "asList", "(", "value", ")", ")", ")", ";", "}", "else", "{", "final", "Collection", "<", "String", ">", "values", "=", "headers", ".", "get", "(", "key", ")", ";", "values", ".", "add", "(", "value", ")", ";", "headers", ".", "put", "(", "key", ",", "values", ")", ";", "}", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RequestHeaders", "build", "(", ")", "{", "return", "new", "RequestHeaders", "(", "this", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Builder", "builder", "(", ")", "{", "return", "new", "Builder", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "RequestHeaders", "of", "(", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ")", "{", "return", "new", "RequestHeaders", "(", "headers", ")", ";", "}", "</s>"]
["<s>", "private", "RequestHeaders", "(", "Builder", "builder", ")", "{", "this", ".", "headers", "=", "builder", ".", "headers", ";", "}", "</s>"]
["<s>", "private", "RequestHeaders", "(", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ")", "{", "this", ".", "headers", "=", "headers", ";", "}", "</s>"]
["<s>", "public", "int", "size", "(", ")", "{", "return", "headers", ".", "size", "(", ")", ";", "}", "</s>"]
["<s>", "public", "int", "sizeOf", "(", "String", "key", ")", "{", "if", "(", "!", "headers", ".", "containsKey", "(", "key", ")", ")", "{", "return", "0", ";", "}", "return", "headers", ".", "get", "(", "key", ")", ".", "size", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Collection", "<", "String", ">", "fetch", "(", "String", "key", ")", "{", "return", "headers", ".", "get", "(", "key", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "this", "=", "=", "obj", ")", "{", "return", "true", ";", "}", "if", "(", "obj", "=", "=", "null", ")", "{", "return", "false", ";", "}", "if", "(", "getClass", "(", ")", "!", "=", "obj", ".", "getClass", "(", ")", ")", "{", "return", "false", ";", "}", "final", "RequestHeaders", "other", "=", "(", "RequestHeaders", ")", "obj", ";", "return", "this", ".", "headers", ".", "equals", "(", "other", ".", "headers", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "StringBuilder", "builder", "=", "new", "StringBuilder", "(", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "Collection", "<", "String", ">", ">", "entry", ":", "headers", ".", "entrySet", "(", ")", ")", "{", "builder", ".", "append", "(", "entry", ")", ".", "append", "(", "<CHAR_LIT:U+002C>", ")", ".", "append", "(", "<CHAR_LIT>", ")", ";", "}", "if", "(", "builder", ".", "length", "(", ")", ">", "0", ")", "{", "return", "builder", ".", "substring", "(", "0", ",", "builder", ".", "length", "(", ")", "-", "<NUM_LIT:2>", ")", ";", "}", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "public", "MockTarget", "(", "Class", "<", "E", ">", "type", ")", "{", "this", ".", "type", "=", "type", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Class", "<", "E", ">", "type", "(", ")", "{", "return", "type", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "name", "(", ")", "{", "return", "type", ".", "getSimpleName", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "url", "(", ")", "{", "return", "\"", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Request", "apply", "(", "RequestTemplate", "input", ")", "{", "input", ".", "target", "(", "url", "(", ")", ")", ";", "return", "input", ".", "request", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "soapDecoderThrowsSOAPFaultException", "(", ")", "throws", "IOException", "{", "thrown", ".", "expect", "(", "SOAPFaultException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "getResourceBytes", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "build", "(", ")", ";", "new", "SOAPDecoder", ".", "Builder", "(", ")", ".", "withSOAPProtocol", "(", "SOAPConstants", ".", "SOAP_1_2_PROTOCOL", ")", ".", "withJAXBContextFactory", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ".", "build", "(", ")", ".", "decode", "(", "response", ",", "Object", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "errorDecoderReturnsSOAPFaultException", "(", ")", "throws", "IOException", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "getResourceBytes", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "build", "(", ")", ";", "Exception", "error", "=", "new", "SOAPErrorDecoder", "(", ")", ".", "decode", "(", "\"", "<STR_LIT>", "\"", ",", "response", ")", ";", "Assertions", ".", "assertThat", "(", "error", ")", ".", "isInstanceOf", "(", "SOAPFaultException", ".", "class", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "errorDecoderReturnsFeignExceptionOn503Status", "(", ")", "throws", "IOException", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "\"", "<STR_LIT>", "\"", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "Exception", "error", "=", "new", "SOAPErrorDecoder", "(", ")", ".", "decode", "(", "\"", "<STR_LIT>", "\"", ",", "response", ")", ";", "Assertions", ".", "assertThat", "(", "error", ")", ".", "isInstanceOf", "(", "FeignException", ".", "class", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "errorDecoderReturnsFeignExceptionOnEmptyFault", "(", ")", "throws", "IOException", "{", "String", "responseBody", "=", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "responseBody", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "Exception", "error", "=", "new", "SOAPErrorDecoder", "(", ")", ".", "decode", "(", "\"", "<STR_LIT>", "\"", ",", "response", ")", ";", "Assertions", ".", "assertThat", "(", "error", ")", ".", "isInstanceOf", "(", "FeignException", ".", "class", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", "+", "responseBody", "+", "\"", "<STR_LIT:]>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "static", "byte", "[", "]", "getResourceBytes", "(", "String", "resourcePath", ")", "throws", "IOException", "{", "InputStream", "resourceAsStream", "=", "SOAPFaultDecoderTest", ".", "class", ".", "getResourceAsStream", "(", "resourcePath", ")", ";", "byte", "[", "]", "bytes", "=", "new", "byte", "[", "resourceAsStream", ".", "available", "(", ")", "]", ";", "new", "DataInputStream", "(", "resourceAsStream", ")", ".", "readFully", "(", "bytes", ")", ";", "return", "bytes", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodesSoap", "(", ")", "{", "Encoder", "encoder", "=", "new", "SOAPEncoder", ".", "Builder", "(", ")", ".", "withJAXBContextFactory", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ".", "build", "(", ")", ";", "GetPrice", "mock", "=", "new", "GetPrice", "(", ")", ";", "mock", ".", "item", "=", "new", "Item", "(", ")", ";", "mock", ".", "item", ".", "value", "=", "\"", "<STR_LIT>", "\"", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "mock", ",", "GetPrice", ".", "class", ",", "template", ")", ";", "String", "soapEnvelop", "=", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "soapEnvelop", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesntEncodeParameterizedTypes", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "UnsupportedOperationException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "class", "ParameterizedHolder", "{", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "Map", "<", "String", ",", "?", ">", "field", ";", "}", "Type", "parameterized", "=", "ParameterizedHolder", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getGenericType", "(", ")", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "new", "SOAPEncoder", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ".", "encode", "(", "Collections", ".", "emptyMap", "(", ")", ",", "parameterized", ",", "template", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodesSoapWithCustomJAXBMarshallerEncoding", "(", ")", "{", "JAXBContextFactory", "jaxbContextFactory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "withMarshallerJAXBEncoding", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "Encoder", "encoder", "=", "new", "SOAPEncoder", ".", "Builder", "(", ")", ".", "withJAXBContextFactory", "(", "jaxbContextFactory", ")", ".", "withCharsetEncoding", "(", "StandardCharsets", ".", "UTF_16", ")", ".", "build", "(", ")", ";", "GetPrice", "mock", "=", "new", "GetPrice", "(", ")", ";", "mock", ".", "item", "=", "new", "Item", "(", ")", ";", "mock", ".", "item", ".", "value", "=", "\"", "<STR_LIT>", "\"", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "mock", ",", "GetPrice", ".", "class", ",", "template", ")", ";", "String", "soapEnvelop", "=", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "byte", "[", "]", "utf16Bytes", "=", "soapEnvelop", ".", "getBytes", "(", "StandardCharsets", ".", "UTF_16LE", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "utf16Bytes", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodesSoapWithCustomJAXBSchemaLocation", "(", ")", "{", "JAXBContextFactory", "jaxbContextFactory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "withMarshallerSchemaLocation", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "Encoder", "encoder", "=", "new", "SOAPEncoder", "(", "jaxbContextFactory", ")", ";", "GetPrice", "mock", "=", "new", "GetPrice", "(", ")", ";", "mock", ".", "item", "=", "new", "Item", "(", ")", ";", "mock", ".", "item", ".", "value", "=", "\"", "<STR_LIT>", "\"", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "mock", ",", "GetPrice", ".", "class", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodesSoapWithCustomJAXBNoSchemaLocation", "(", ")", "{", "JAXBContextFactory", "jaxbContextFactory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "withMarshallerNoNamespaceSchemaLocation", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "Encoder", "encoder", "=", "new", "SOAPEncoder", "(", "jaxbContextFactory", ")", ";", "GetPrice", "mock", "=", "new", "GetPrice", "(", ")", ";", "mock", ".", "item", "=", "new", "Item", "(", ")", ";", "mock", ".", "item", ".", "value", "=", "\"", "<STR_LIT>", "\"", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "mock", ",", "GetPrice", ".", "class", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodesSoapWithCustomJAXBFormattedOuput", "(", ")", "{", "Encoder", "encoder", "=", "new", "SOAPEncoder", ".", "Builder", "(", ")", ".", "withFormattedOutput", "(", "true", ")", ".", "withJAXBContextFactory", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ".", "build", "(", ")", ";", "GetPrice", "mock", "=", "new", "GetPrice", "(", ")", ";", "mock", ".", "item", "=", "new", "Item", "(", ")", ";", "mock", ".", "item", ".", "value", "=", "\"", "<STR_LIT>", "\"", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "mock", ",", "GetPrice", ".", "class", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodesSoap", "(", ")", "throws", "Exception", "{", "GetPrice", "mock", "=", "new", "GetPrice", "(", ")", ";", "mock", ".", "item", "=", "new", "Item", "(", ")", ";", "mock", ".", "item", ".", "value", "=", "\"", "<STR_LIT>", "\"", ";", "String", "mockSoapEnvelop", "=", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "mockSoapEnvelop", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "SOAPDecoder", "decoder", "=", "new", "SOAPDecoder", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ";", "assertEquals", "(", "mock", ",", "decoder", ".", "decode", "(", "response", ",", "GetPrice", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodesSoapWithSchemaOnEnvelope", "(", ")", "throws", "Exception", "{", "GetPrice", "mock", "=", "new", "GetPrice", "(", ")", ";", "mock", ".", "item", "=", "new", "Item", "(", ")", ";", "mock", ".", "item", ".", "value", "=", "\"", "<STR_LIT>", "\"", ";", "String", "mockSoapEnvelop", "=", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "mockSoapEnvelop", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "SOAPDecoder", "decoder", "=", "new", "SOAPDecoder", ".", "Builder", "(", ")", ".", "withJAXBContextFactory", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ".", "useFirstChild", "(", ")", ".", "build", "(", ")", ";", "assertEquals", "(", "mock", ",", "decoder", ".", "decode", "(", "response", ",", "GetPrice", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodesSoap1_2Protocol", "(", ")", "throws", "Exception", "{", "GetPrice", "mock", "=", "new", "GetPrice", "(", ")", ";", "mock", ".", "item", "=", "new", "Item", "(", ")", ";", "mock", ".", "item", ".", "value", "=", "\"", "<STR_LIT>", "\"", ";", "String", "mockSoapEnvelop", "=", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "mockSoapEnvelop", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "SOAPDecoder", "decoder", "=", "new", "SOAPDecoder", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ";", "assertEquals", "(", "mock", ",", "decoder", ".", "decode", "(", "response", ",", "GetPrice", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesntDecodeParameterizedTypes", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "feign", ".", "codec", ".", "DecodeException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "class", "ParameterizedHolder", "{", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "Map", "<", "String", ",", "?", ">", "field", ";", "}", "Type", "parameterized", "=", "ParameterizedHolder", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getGenericType", "(", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "new", "SOAPDecoder", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ".", "decode", "(", "response", ",", "parameterized", ")", ";", "}", "</s>"]
["<s>", "public", "void", "set", "(", "T", "t", ")", "{", "this", ".", "t", "=", "t", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodeAnnotatedParameterizedTypes", "(", ")", "throws", "Exception", "{", "JAXBContextFactory", "jaxbContextFactory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "withMarshallerFormattedOutput", "(", "true", ")", ".", "build", "(", ")", ";", "Encoder", "encoder", "=", "new", "SOAPEncoder", "(", "jaxbContextFactory", ")", ";", "Box", "<", "String", ">", "boxStr", "=", "new", "Box", "<", ">", "(", ")", ";", "boxStr", ".", "set", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Box", "<", "Box", "<", "String", ">", ">", "boxBoxStr", "=", "new", "Box", "<", ">", "(", ")", ";", "boxBoxStr", ".", "set", "(", "boxStr", ")", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "boxBoxStr", ",", "Box", ".", "class", ",", "template", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "template", ".", "body", "(", ")", ")", ".", "build", "(", ")", ";", "new", "SOAPDecoder", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ".", "decode", "(", "response", ",", "Box", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notFoundDecodesToNull", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "build", "(", ")", ";", "assertThat", "(", "(", "byte", "[", "]", ")", "new", "JAXBDecoder", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ".", "decode", "(", "response", ",", "byte", "[", "]", ".", "class", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "obj", "instanceof", "GetPrice", ")", "{", "GetPrice", "getPrice", "=", "(", "GetPrice", ")", "obj", ";", "return", "item", ".", "value", ".", "equals", "(", "getPrice", ".", "item", ".", "value", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "item", ".", "value", "!", "=", "null", "?", "item", ".", "value", ".", "hashCode", "(", ")", ":", "0", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "obj", "instanceof", "Item", ")", "{", "Item", "item", "=", "(", "Item", ")", "obj", ";", "return", "value", ".", "equals", "(", "item", ".", "value", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "value", "!", "=", "null", "?", "value", ".", "hashCode", "(", ")", ":", "0", ";", "}", "</s>"]
["<s>", "private", "SOAPEncoder", "(", "Builder", "builder", ")", "{", "this", ".", "jaxbContextFactory", "=", "builder", ".", "jaxbContextFactory", ";", "this", ".", "writeXmlDeclaration", "=", "builder", ".", "writeXmlDeclaration", ";", "this", ".", "charsetEncoding", "=", "builder", ".", "charsetEncoding", ";", "this", ".", "soapProtocol", "=", "builder", ".", "soapProtocol", ";", "this", ".", "formattedOutput", "=", "builder", ".", "formattedOutput", ";", "}", "</s>"]
["<s>", "public", "SOAPEncoder", "(", "JAXBContextFactory", "jaxbContextFactory", ")", "{", "this", ".", "jaxbContextFactory", "=", "jaxbContextFactory", ";", "this", ".", "writeXmlDeclaration", "=", "true", ";", "this", ".", "formattedOutput", "=", "false", ";", "this", ".", "charsetEncoding", "=", "StandardCharsets", ".", "UTF_8", ";", "this", ".", "soapProtocol", "=", "DEFAULT_SOAP_PROTOCOL", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "if", "(", "!", "(", "bodyType", "instanceof", "Class", ")", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", "+", "bodyType", ")", ";", "}", "try", "{", "Document", "document", "=", "DocumentBuilderFactory", ".", "newInstance", "(", ")", ".", "newDocumentBuilder", "(", ")", ".", "newDocument", "(", ")", ";", "Marshaller", "marshaller", "=", "jaxbContextFactory", ".", "createMarshaller", "(", "(", "Class", "<", "?", ">", ")", "bodyType", ")", ";", "marshaller", ".", "marshal", "(", "object", ",", "document", ")", ";", "SOAPMessage", "soapMessage", "=", "MessageFactory", ".", "newInstance", "(", "soapProtocol", ")", ".", "createMessage", "(", ")", ";", "soapMessage", ".", "setProperty", "(", "SOAPMessage", ".", "WRITE_XML_DECLARATION", ",", "Boolean", ".", "toString", "(", "writeXmlDeclaration", ")", ")", ";", "soapMessage", ".", "setProperty", "(", "SOAPMessage", ".", "CHARACTER_SET_ENCODING", ",", "charsetEncoding", ".", "displayName", "(", ")", ")", ";", "soapMessage", ".", "getSOAPBody", "(", ")", ".", "addDocument", "(", "document", ")", ";", "ByteArrayOutputStream", "bos", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "if", "(", "formattedOutput", ")", "{", "Transformer", "t", "=", "TransformerFactory", ".", "newInstance", "(", ")", ".", "newTransformer", "(", ")", ";", "t", ".", "setOutputProperty", "(", "OutputKeys", ".", "INDENT", ",", "\"", "<STR_LIT>", "\"", ")", ";", "t", ".", "setOutputProperty", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT:4>", "\"", ")", ";", "t", ".", "transform", "(", "new", "DOMSource", "(", "soapMessage", ".", "getSOAPPart", "(", ")", ")", ",", "new", "StreamResult", "(", "bos", ")", ")", ";", "}", "else", "{", "soapMessage", ".", "writeTo", "(", "bos", ")", ";", "}", "template", ".", "body", "(", "new", "String", "(", "bos", ".", "toByteArray", "(", ")", ")", ")", ";", "}", "catch", "(", "SOAPException", "|", "JAXBException", "|", "ParserConfigurationException", "|", "IOException", "|", "TransformerFactoryConfigurationError", "|", "TransformerException", "e", ")", "{", "throw", "new", "EncodeException", "(", "e", ".", "toString", "(", ")", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Builder", "withJAXBContextFactory", "(", "JAXBContextFactory", "jaxbContextFactory", ")", "{", "this", ".", "jaxbContextFactory", "=", "jaxbContextFactory", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "withFormattedOutput", "(", "boolean", "formattedOutput", ")", "{", "this", ".", "formattedOutput", "=", "formattedOutput", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "withWriteXmlDeclaration", "(", "boolean", "writeXmlDeclaration", ")", "{", "this", ".", "writeXmlDeclaration", "=", "writeXmlDeclaration", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "withCharsetEncoding", "(", "Charset", "charsetEncoding", ")", "{", "this", ".", "charsetEncoding", "=", "charsetEncoding", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "withSOAPProtocol", "(", "String", "soapProtocol", ")", "{", "this", ".", "soapProtocol", "=", "soapProtocol", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "SOAPEncoder", "build", "(", ")", "{", "if", "(", "jaxbContextFactory", "=", "=", "null", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "new", "SOAPEncoder", "(", "this", ")", ";", "}", "</s>"]
["<s>", "public", "SOAPErrorDecoder", "(", ")", "{", "this", ".", "soapProtocol", "=", "SOAPConstants", ".", "DEFAULT_SOAP_PROTOCOL", ";", "}", "</s>"]
["<s>", "public", "SOAPErrorDecoder", "(", "String", "soapProtocol", ")", "{", "this", ".", "soapProtocol", "=", "soapProtocol", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "if", "(", "response", ".", "body", "(", ")", "=", "=", "null", "|", "|", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", ")", "return", "defaultErrorDecoder", "(", "methodKey", ",", "response", ")", ";", "SOAPMessage", "message", ";", "try", "{", "message", "=", "MessageFactory", ".", "newInstance", "(", "soapProtocol", ")", ".", "createMessage", "(", "null", ",", "response", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ")", ";", "if", "(", "message", ".", "getSOAPBody", "(", ")", "!", "=", "null", "&", "&", "message", ".", "getSOAPBody", "(", ")", ".", "hasFault", "(", ")", ")", "{", "return", "new", "SOAPFaultException", "(", "message", ".", "getSOAPBody", "(", ")", ".", "getFault", "(", ")", ")", ";", "}", "}", "catch", "(", "SOAPException", "|", "IOException", "e", ")", "{", "}", "return", "defaultErrorDecoder", "(", "methodKey", ",", "response", ")", ";", "}", "</s>"]
["<s>", "private", "Exception", "defaultErrorDecoder", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "return", "new", "ErrorDecoder", ".", "Default", "(", ")", ".", "decode", "(", "methodKey", ",", "response", ")", ";", "}", "</s>"]
["<s>", "public", "SOAPDecoder", "(", "JAXBContextFactory", "jaxbContextFactory", ")", "{", "this", ".", "jaxbContextFactory", "=", "jaxbContextFactory", ";", "this", ".", "soapProtocol", "=", "SOAPConstants", ".", "DEFAULT_SOAP_PROTOCOL", ";", "this", ".", "useFirstChild", "=", "false", ";", "}", "</s>"]
["<s>", "private", "SOAPDecoder", "(", "Builder", "builder", ")", "{", "this", ".", "soapProtocol", "=", "builder", ".", "soapProtocol", ";", "this", ".", "jaxbContextFactory", "=", "builder", ".", "jaxbContextFactory", ";", "this", ".", "useFirstChild", "=", "builder", ".", "useFirstChild", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "if", "(", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", ")", "return", "Util", ".", "emptyValueOf", "(", "type", ")", ";", "if", "(", "response", ".", "body", "(", ")", "=", "=", "null", ")", "return", "null", ";", "while", "(", "type", "instanceof", "ParameterizedType", ")", "{", "ParameterizedType", "ptype", "=", "(", "ParameterizedType", ")", "type", ";", "type", "=", "ptype", ".", "getRawType", "(", ")", ";", "}", "if", "(", "!", "(", "type", "instanceof", "Class", ")", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", "+", "type", ")", ";", "}", "try", "{", "SOAPMessage", "message", "=", "MessageFactory", ".", "newInstance", "(", "soapProtocol", ")", ".", "createMessage", "(", "null", ",", "response", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ")", ";", "if", "(", "message", ".", "getSOAPBody", "(", ")", "!", "=", "null", ")", "{", "if", "(", "message", ".", "getSOAPBody", "(", ")", ".", "hasFault", "(", ")", ")", "{", "throw", "new", "SOAPFaultException", "(", "message", ".", "getSOAPBody", "(", ")", ".", "getFault", "(", ")", ")", ";", "}", "Unmarshaller", "unmarshaller", "=", "jaxbContextFactory", ".", "createUnmarshaller", "(", "(", "Class", "<", "?", ">", ")", "type", ")", ";", "if", "(", "this", ".", "useFirstChild", ")", "{", "return", "unmarshaller", ".", "unmarshal", "(", "message", ".", "getSOAPBody", "(", ")", ".", "getFirstChild", "(", ")", ")", ";", "}", "else", "{", "return", "unmarshaller", ".", "unmarshal", "(", "message", ".", "getSOAPBody", "(", ")", ".", "extractContentAsDocument", "(", ")", ")", ";", "}", "}", "}", "catch", "(", "SOAPException", "|", "JAXBException", "e", ")", "{", "throw", "new", "DecodeException", "(", "response", ".", "status", "(", ")", ",", "e", ".", "toString", "(", ")", ",", "response", ".", "request", "(", ")", ",", "e", ")", ";", "}", "finally", "{", "if", "(", "response", ".", "body", "(", ")", "!", "=", "null", ")", "{", "response", ".", "body", "(", ")", ".", "close", "(", ")", ";", "}", "}", "return", "Util", ".", "emptyValueOf", "(", "type", ")", ";", "}", "</s>"]
["<s>", "public", "Builder", "withJAXBContextFactory", "(", "JAXBContextFactory", "jaxbContextFactory", ")", "{", "this", ".", "jaxbContextFactory", "=", "jaxbContextFactory", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "withSOAPProtocol", "(", "String", "soapProtocol", ")", "{", "this", ".", "soapProtocol", "=", "soapProtocol", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "useFirstChild", "(", ")", "{", "this", ".", "useFirstChild", "=", "true", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "SOAPDecoder", "build", "(", ")", "{", "if", "(", "jaxbContextFactory", "=", "=", "null", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "new", "SOAPDecoder", "(", "this", ")", ";", "}", "</s>"]
["<s>", "static", "String", "hostAndPort", "(", "URL", "url", ")", "{", "return", "\"", "<STR_LIT::>", "\"", "+", "url", ".", "getPort", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "loadBalancingDefaultPolicyRoundRobin", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "String", "name", "=", "\"", "<STR_LIT>", "\"", ";", "String", "serverListKey", "=", "name", "+", "\"", "<STR_LIT>", "\"", ";", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "server2", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "serverListKey", ",", "hostAndPort", "(", "server1", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", "+", "\"", "<STR_LIT:U+002C>", "\"", "+", "hostAndPort", "(", "server2", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", ")", ";", "try", "{", "LoadBalancingTarget", "<", "TestInterface", ">", "target", "=", "LoadBalancingTarget", ".", "create", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "name", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "target", ")", ";", "api", ".", "post", "(", ")", ";", "api", ".", "post", "(", ")", ";", "assertEquals", "(", "1", ",", "server1", ".", "getRequestCount", "(", ")", ")", ";", "assertEquals", "(", "1", ",", "server2", ".", "getRequestCount", "(", ")", ")", ";", "}", "finally", "{", "getConfigInstance", "(", ")", ".", "clearProperty", "(", "serverListKey", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "loadBalancingTargetPath", "(", ")", "throws", "InterruptedException", "{", "String", "name", "=", "\"", "<STR_LIT>", "\"", ";", "String", "serverListKey", "=", "name", "+", "\"", "<STR_LIT>", "\"", ";", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "serverListKey", ",", "hostAndPort", "(", "server1", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", ")", ";", "try", "{", "LoadBalancingTarget", "<", "TestInterface", ">", "target", "=", "LoadBalancingTarget", ".", "create", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "name", "+", "\"", "<STR_LIT>", "\"", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "target", "(", "target", ")", ";", "api", ".", "get", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "target", ".", "url", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "server1", ".", "takeRequest", "(", ")", ".", "getPath", "(", ")", ")", ";", "}", "finally", "{", "getConfigInstance", "(", ")", ".", "clearProperty", "(", "serverListKey", ")", ";", "}", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "post", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "get", "(", ")", ";", "</s>"]
["<s>", "@", "BeforeClass", "public", "static", "void", "disableSunRetry", "(", ")", "throws", "Exception", "{", "oldRetryConfig", "=", "System", ".", "setProperty", "(", "SUN_RETRY_PROPERTY", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "AfterClass", "public", "static", "void", "resetSunRetry", "(", ")", "throws", "Exception", "{", "if", "(", "oldRetryConfig", "=", "=", "null", ")", "{", "System", ".", "clearProperty", "(", "SUN_RETRY_PROPERTY", ")", ";", "}", "else", "{", "System", ".", "setProperty", "(", "SUN_RETRY_PROPERTY", ",", "oldRetryConfig", ")", ";", "}", "}", "</s>"]
["<s>", "static", "String", "hostAndPort", "(", "URL", "url", ")", "{", "return", "\"", "<STR_LIT::>", "\"", "+", "url", ".", "getPort", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "loadBalancingDefaultPolicyRoundRobin", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "server2", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "serverListKey", "(", ")", ",", "hostAndPort", "(", "server1", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", "+", "\"", "<STR_LIT:U+002C>", "\"", "+", "hostAndPort", "(", "server2", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "RibbonClient", ".", "create", "(", ")", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "client", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "api", ".", "post", "(", ")", ";", "assertEquals", "(", "1", ",", "server1", ".", "getRequestCount", "(", ")", ")", ";", "assertEquals", "(", "1", ",", "server2", ".", "getRequestCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "ioExceptionRetry", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setSocketPolicy", "(", "SocketPolicy", ".", "DISCONNECT_AT_START", ")", ")", ";", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "serverListKey", "(", ")", ",", "hostAndPort", "(", "server1", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "RibbonClient", ".", "create", "(", ")", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "client", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "assertEquals", "(", "<NUM_LIT:2>", ",", "server1", ".", "getRequestCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "ioExceptionFailsAfterTooManyFailures", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setSocketPolicy", "(", "SocketPolicy", ".", "DISCONNECT_AT_START", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "serverListKey", "(", ")", ",", "hostAndPort", "(", "server1", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "RibbonClient", ".", "create", "(", ")", ")", ".", "retryer", "(", "Retryer", ".", "NEVER_RETRY", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "client", "(", ")", ")", ";", "try", "{", "api", ".", "post", "(", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "RetryableException", "ignored", ")", "{", "}", "assertThat", "(", "server1", ".", "getRequestCount", "(", ")", ")", ".", "isGreaterThanOrEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "ribbonRetryConfigurationOnSameServer", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setSocketPolicy", "(", "SocketPolicy", ".", "DISCONNECT_AT_START", ")", ")", ";", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setSocketPolicy", "(", "SocketPolicy", ".", "DISCONNECT_AT_START", ")", ")", ";", "server2", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setSocketPolicy", "(", "SocketPolicy", ".", "DISCONNECT_AT_START", ")", ")", ";", "server2", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setSocketPolicy", "(", "SocketPolicy", ".", "DISCONNECT_AT_START", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "serverListKey", "(", ")", ",", "hostAndPort", "(", "server1", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", "+", "\"", "<STR_LIT:U+002C>", "\"", "+", "hostAndPort", "(", "server2", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "client", "(", ")", "+", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "RibbonClient", ".", "create", "(", ")", ")", ".", "retryer", "(", "Retryer", ".", "NEVER_RETRY", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "client", "(", ")", ")", ";", "try", "{", "api", ".", "post", "(", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "RetryableException", "ignored", ")", "{", "}", "assertTrue", "(", "server1", ".", "getRequestCount", "(", ")", ">", "=", "<NUM_LIT:2>", "|", "|", "server2", ".", "getRequestCount", "(", ")", ">", "=", "<NUM_LIT:2>", ")", ";", "assertThat", "(", "server1", ".", "getRequestCount", "(", ")", "+", "server2", ".", "getRequestCount", "(", ")", ")", ".", "isGreaterThanOrEqualTo", "(", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "ribbonRetryConfigurationOnMultipleServers", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setSocketPolicy", "(", "SocketPolicy", ".", "DISCONNECT_AT_START", ")", ")", ";", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setSocketPolicy", "(", "SocketPolicy", ".", "DISCONNECT_AT_START", ")", ")", ";", "server2", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setSocketPolicy", "(", "SocketPolicy", ".", "DISCONNECT_AT_START", ")", ")", ";", "server2", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setSocketPolicy", "(", "SocketPolicy", ".", "DISCONNECT_AT_START", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "serverListKey", "(", ")", ",", "hostAndPort", "(", "server1", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", "+", "\"", "<STR_LIT:U+002C>", "\"", "+", "hostAndPort", "(", "server2", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "client", "(", ")", "+", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "RibbonClient", ".", "create", "(", ")", ")", ".", "retryer", "(", "Retryer", ".", "NEVER_RETRY", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "client", "(", ")", ")", ";", "try", "{", "api", ".", "post", "(", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "RetryableException", "ignored", ")", "{", "}", "assertThat", "(", "server1", ".", "getRequestCount", "(", ")", ")", ".", "isGreaterThanOrEqualTo", "(", "1", ")", ";", "assertThat", "(", "server1", ".", "getRequestCount", "(", ")", ")", ".", "isGreaterThanOrEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "urlEncodeQueryStringParameters", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "String", "queryStringValue", "=", "\"", "<STR_LIT>", "\"", ";", "String", "expectedQueryStringValue", "=", "\"", "<STR_LIT>", "\"", ";", "String", "expectedRequestLine", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "expectedQueryStringValue", ")", ";", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "serverListKey", "(", ")", ",", "hostAndPort", "(", "server1", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "RibbonClient", ".", "create", "(", ")", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "client", "(", ")", ")", ";", "api", ".", "getWithQueryParameters", "(", "queryStringValue", ")", ";", "final", "String", "recordedRequestLine", "=", "server1", ".", "takeRequest", "(", ")", ".", "getRequestLine", "(", ")", ";", "assertEquals", "(", "recordedRequestLine", ",", "expectedRequestLine", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testHTTPSViaRibbon", "(", ")", "{", "Client", "trustSSLSockets", "=", "new", "Client", ".", "Default", "(", "TrustingSSLSocketFactory", ".", "get", "(", ")", ",", "null", ")", ";", "server1", ".", "useHttps", "(", "TrustingSSLSocketFactory", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ",", "false", ")", ";", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "serverListKey", "(", ")", ",", "hostAndPort", "(", "server1", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "RibbonClient", ".", "builder", "(", ")", ".", "delegate", "(", "trustSSLSockets", ")", ".", "build", "(", ")", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "client", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "assertEquals", "(", "1", ",", "server1", ".", "getRequestCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "ioExceptionRetryWithBuilder", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setSocketPolicy", "(", "SocketPolicy", ".", "DISCONNECT_AT_START", ")", ")", ";", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "serverListKey", "(", ")", ",", "hostAndPort", "(", "server1", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "RibbonClient", ".", "create", "(", ")", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "client", "(", ")", ")", ";", "api", ".", "post", "(", ")", ";", "assertEquals", "(", "server1", ".", "getRequestCount", "(", ")", ",", "<NUM_LIT:2>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "ribbonRetryOnStatusCodes", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "server2", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "serverListKey", "(", ")", ",", "hostAndPort", "(", "server1", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", "+", "\"", "<STR_LIT:U+002C>", "\"", "+", "hostAndPort", "(", "server2", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "client", "(", ")", "+", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "client", "(", ")", "+", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "RibbonClient", ".", "create", "(", ")", ")", ".", "retryer", "(", "Retryer", ".", "NEVER_RETRY", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "client", "(", ")", ")", ";", "try", "{", "api", ".", "post", "(", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "Exception", "ignored", ")", "{", "}", "assertEquals", "(", "1", ",", "server1", ".", "getRequestCount", "(", ")", ")", ";", "assertEquals", "(", "1", ",", "server2", ".", "getRequestCount", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFeignOptionsFollowRedirect", "(", ")", "{", "String", "expectedLocation", "=", "server2", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ".", "toString", "(", ")", ";", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "expectedLocation", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "serverListKey", "(", ")", ",", "hostAndPort", "(", "server1", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", ")", ";", "Request", ".", "Options", "options", "=", "new", "Request", ".", "Options", "(", "<NUM_LIT:1000>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "<NUM_LIT:1000>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "false", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "options", "(", "options", ")", ".", "client", "(", "RibbonClient", ".", "create", "(", ")", ")", ".", "retryer", "(", "Retryer", ".", "NEVER_RETRY", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "client", "(", ")", ")", ";", "try", "{", "Response", "response", "=", "api", ".", "get", "(", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "response", ".", "status", "(", ")", ")", ";", "Collection", "<", "String", ">", "location", "=", "response", ".", "headers", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertNotNull", "(", "location", ")", ";", "assertFalse", "(", "location", ".", "isEmpty", "(", ")", ")", ";", "assertEquals", "(", "expectedLocation", ",", "location", ".", "iterator", "(", ")", ".", "next", "(", ")", ")", ";", "}", "catch", "(", "Exception", "ignored", ")", "{", "ignored", ".", "printStackTrace", "(", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFeignOptionsNoFollowRedirect", "(", ")", "{", "server1", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setHeader", "(", "\"", "<STR_LIT>", "\"", ",", "server2", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ".", "toString", "(", ")", ")", ")", ";", "server2", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT:Hello>", "\"", ")", ")", ";", "getConfigInstance", "(", ")", ".", "setProperty", "(", "serverListKey", "(", ")", ",", "hostAndPort", "(", "server1", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", "+", "\"", "<STR_LIT:U+002C>", "\"", "+", "hostAndPort", "(", "server2", ".", "url", "(", "\"", "\"", ")", ".", "url", "(", ")", ")", ")", ";", "Request", ".", "Options", "options", "=", "new", "Request", ".", "Options", "(", "<NUM_LIT:1000>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "<NUM_LIT:1000>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "true", ")", ";", "TestInterface", "api", "=", "Feign", ".", "builder", "(", ")", ".", "options", "(", "options", ")", ".", "client", "(", "RibbonClient", ".", "create", "(", ")", ")", ".", "retryer", "(", "Retryer", ".", "NEVER_RETRY", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "client", "(", ")", ")", ";", "try", "{", "Response", "response", "=", "api", ".", "get", "(", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "response", ".", "status", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:Hello>", "\"", ",", "response", ".", "body", "(", ")", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "Exception", "ignored", ")", "{", "ignored", ".", "printStackTrace", "(", ")", ";", "fail", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFeignOptionsClientConfig", "(", ")", "{", "Request", ".", "Options", "options", "=", "new", "Request", ".", "Options", "(", "<NUM_LIT>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "<NUM_LIT>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "true", ")", ";", "IClientConfig", "config", "=", "new", "RibbonClient", ".", "FeignOptionsClientConfig", "(", "options", ")", ";", "assertThat", "(", "config", ".", "get", "(", "CommonClientConfigKey", ".", "ConnectTimeout", ")", ",", "equalTo", "(", "options", ".", "connectTimeoutMillis", "(", ")", ")", ")", ";", "assertThat", "(", "config", ".", "get", "(", "CommonClientConfigKey", ".", "ReadTimeout", ")", ",", "equalTo", "(", "options", ".", "readTimeoutMillis", "(", ")", ")", ")", ";", "assertThat", "(", "config", ".", "get", "(", "CommonClientConfigKey", ".", "FollowRedirects", ")", ",", "equalTo", "(", "options", ".", "isFollowRedirects", "(", ")", ")", ")", ";", "assertEquals", "(", "<NUM_LIT:3>", ",", "config", ".", "getProperties", "(", ")", ".", "size", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCleanUrlWithMatchingHostAndPart", "(", ")", "throws", "IOException", "{", "URI", "uri", "=", "RibbonClient", ".", "cleanUrl", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCleanUrl", "(", ")", "throws", "IOException", "{", "URI", "uri", "=", "RibbonClient", ".", "cleanUrl", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "uri", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "String", "client", "(", ")", "{", "return", "testName", ".", "getMethodName", "(", ")", ";", "}", "</s>"]
["<s>", "private", "String", "serverListKey", "(", ")", "{", "return", "client", "(", ")", "+", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "After", "public", "void", "clearServerList", "(", ")", "{", "getConfigInstance", "(", ")", ".", "clearProperty", "(", "serverListKey", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "post", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "getWithQueryParameters", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "a", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "get", "(", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "propagatesNestedIOE", "(", ")", "throws", "IOException", "{", "thrown", ".", "expect", "(", "IOException", ".", "class", ")", ";", "RibbonClient", ".", "propagateFirstIOException", "(", "new", "ClientException", "(", "new", "IOException", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "propagatesFirstNestedIOE", "(", ")", "throws", "IOException", "{", "thrown", ".", "expect", "(", "IOException", ".", "class", ")", ";", "thrown", ".", "expectCause", "(", "isA", "(", "IOException", ".", "class", ")", ")", ";", "RibbonClient", ".", "propagateFirstIOException", "(", "new", "ClientException", "(", "new", "IOException", "(", "new", "IOException", "(", ")", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "propagatesDoubleNestedIOE", "(", ")", "throws", "IOException", "{", "thrown", ".", "expect", "(", "ConnectException", ".", "class", ")", ";", "RibbonClient", ".", "propagateFirstIOException", "(", "new", "ClientException", "(", "new", "RuntimeException", "(", "new", "ConnectException", "(", ")", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesntPropagateWhenNotIOE", "(", ")", "throws", "IOException", "{", "RibbonClient", ".", "propagateFirstIOException", "(", "new", "ClientException", "(", "new", "RuntimeException", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testParseCodes", "(", ")", "{", "assertThat", "(", "LBClient", ".", "parseStatusCodes", "(", "\"", "\"", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "LBClient", ".", "parseStatusCodes", "(", "null", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "LBClient", ".", "parseStatusCodes", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "contains", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "LBClient", ".", "parseStatusCodes", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "contains", "(", "<NUM_LIT>", ",", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testRibbonRequest", "(", ")", "throws", "URISyntaxException", "{", "String", "urlWithEncodedJson", "=", "\"", "<STR_LIT>", "\"", ";", "HttpMethod", "method", "=", "HttpMethod", ".", "GET", ";", "URI", "uri", "=", "new", "URI", "(", "urlWithEncodedJson", ")", ";", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "new", "LinkedHashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", ")", ";", "Request", "requestOrigin", "=", "Request", ".", "create", "(", "method", ",", "uri", ".", "toASCIIString", "(", ")", ",", "headers", ",", "null", ",", "Charset", ".", "forName", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "RibbonRequest", "ribbonRequest", "=", "new", "RibbonRequest", "(", "null", ",", "requestOrigin", ",", "uri", ")", ";", "Request", "requestRecreate", "=", "ribbonRequest", ".", "toRequest", "(", ")", ";", "assertThat", "(", "requestOrigin", ".", "toString", "(", ")", ")", ".", "contains", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "method", ",", "urlWithEncodedJson", ")", ")", ";", "assertThat", "(", "requestRecreate", ".", "toString", "(", ")", ")", ".", "contains", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ",", "method", ",", "urlWithEncodedJson", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testCreateLBClient", "(", ")", "{", "LBClientFactory", ".", "Default", "lbClientFactory", "=", "new", "LBClientFactory", ".", "Default", "(", ")", ";", "LBClient", "client", "=", "lbClientFactory", ".", "create", "(", "\"", "<STR_LIT:Name>", "\"", ")", ";", "assertEquals", "(", "\"", "<STR_LIT:Name>", "\"", ",", "client", ".", "getClientName", "(", ")", ")", ";", "assertEquals", "(", "ClientFactory", ".", "getNamedLoadBalancer", "(", "\"", "<STR_LIT:Name>", "\"", ")", ",", "client", ".", "getLoadBalancer", "(", ")", ")", ";", "}", "</s>"]
["<s>", "LBClient", "create", "(", "String", "clientName", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "LBClient", "create", "(", "String", "clientName", ")", "{", "IClientConfig", "config", "=", "ClientFactory", ".", "getNamedConfig", "(", "clientName", ",", "DisableAutoRetriesByDefaultClientConfig", ".", "class", ")", ";", "ILoadBalancer", "lb", "=", "ClientFactory", ".", "getNamedLoadBalancer", "(", "clientName", ")", ";", "return", "LBClient", ".", "create", "(", "lb", ",", "config", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "getDefaultMaxAutoRetriesNextServer", "(", ")", "{", "return", "0", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "loadDefaultValues", "(", ")", "{", "super", ".", "loadDefaultValues", "(", ")", ";", "putDefaultStringProperty", "(", "LBClientFactory", ".", "RetryableStatusCodes", ",", "\"", "\"", ")", ";", "}", "</s>"]
["<s>", "public", "static", "LBClient", "create", "(", "ILoadBalancer", "lb", ",", "IClientConfig", "clientConfig", ")", "{", "return", "new", "LBClient", "(", "lb", ",", "clientConfig", ")", ";", "}", "</s>"]
["<s>", "static", "Set", "<", "Integer", ">", "parseStatusCodes", "(", "String", "statusCodesString", ")", "{", "if", "(", "statusCodesString", "=", "=", "null", "|", "|", "statusCodesString", ".", "isEmpty", "(", ")", ")", "{", "return", "Collections", ".", "emptySet", "(", ")", ";", "}", "Set", "<", "Integer", ">", "codes", "=", "new", "LinkedHashSet", "<", "Integer", ">", "(", ")", ";", "for", "(", "String", "codeString", ":", "statusCodesString", ".", "split", "(", "\"", "<STR_LIT:U+002C>", "\"", ")", ")", "{", "codes", ".", "add", "(", "Integer", ".", "parseInt", "(", "codeString", ")", ")", ";", "}", "return", "codes", ";", "}", "</s>"]
["<s>", "LBClient", "(", "ILoadBalancer", "lb", ",", "IClientConfig", "clientConfig", ")", "{", "super", "(", "lb", ",", "clientConfig", ")", ";", "this", ".", "clientConfig", "=", "clientConfig", ";", "connectTimeout", "=", "clientConfig", ".", "get", "(", "CommonClientConfigKey", ".", "ConnectTimeout", ")", ";", "readTimeout", "=", "clientConfig", ".", "get", "(", "CommonClientConfigKey", ".", "ReadTimeout", ")", ";", "retryableStatusCodes", "=", "parseStatusCodes", "(", "clientConfig", ".", "get", "(", "LBClientFactory", ".", "RetryableStatusCodes", ")", ")", ";", "followRedirects", "=", "clientConfig", ".", "get", "(", "CommonClientConfigKey", ".", "FollowRedirects", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "RibbonResponse", "execute", "(", "RibbonRequest", "request", ",", "IClientConfig", "configOverride", ")", "throws", "IOException", ",", "ClientException", "{", "Request", ".", "Options", "options", ";", "if", "(", "configOverride", "!", "=", "null", ")", "{", "options", "=", "new", "Request", ".", "Options", "(", "configOverride", ".", "get", "(", "CommonClientConfigKey", ".", "ConnectTimeout", ",", "connectTimeout", ")", ",", "TimeUnit", ".", "MILLISECONDS", ",", "(", "configOverride", ".", "get", "(", "CommonClientConfigKey", ".", "ReadTimeout", ",", "readTimeout", ")", ")", ",", "TimeUnit", ".", "MILLISECONDS", ",", "configOverride", ".", "get", "(", "CommonClientConfigKey", ".", "FollowRedirects", ",", "followRedirects", ")", ")", ";", "}", "else", "{", "options", "=", "new", "Request", ".", "Options", "(", "connectTimeout", ",", "TimeUnit", ".", "MILLISECONDS", ",", "readTimeout", ",", "TimeUnit", ".", "MILLISECONDS", ",", "true", ")", ";", "}", "Response", "response", "=", "request", ".", "client", "(", ")", ".", "execute", "(", "request", ".", "toRequest", "(", ")", ",", "options", ")", ";", "if", "(", "retryableStatusCodes", ".", "contains", "(", "response", ".", "status", "(", ")", ")", ")", "{", "response", ".", "close", "(", ")", ";", "throw", "new", "ClientException", "(", "ClientException", ".", "ErrorType", ".", "SERVER_THROTTLED", ")", ";", "}", "return", "new", "RibbonResponse", "(", "request", ".", "getUri", "(", ")", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "RequestSpecificRetryHandler", "getRequestSpecificRetryHandler", "(", "RibbonRequest", "request", ",", "IClientConfig", "requestConfig", ")", "{", "if", "(", "clientConfig", ".", "get", "(", "CommonClientConfigKey", ".", "OkToRetryOnAllOperations", ",", "false", ")", ")", "{", "return", "new", "RequestSpecificRetryHandler", "(", "true", ",", "true", ",", "this", ".", "getRetryHandler", "(", ")", ",", "requestConfig", ")", ";", "}", "if", "(", "request", ".", "toRequest", "(", ")", ".", "httpMethod", "(", ")", "!", "=", "HttpMethod", ".", "GET", ")", "{", "return", "new", "RequestSpecificRetryHandler", "(", "true", ",", "false", ",", "this", ".", "getRetryHandler", "(", ")", ",", "requestConfig", ")", ";", "}", "else", "{", "return", "new", "RequestSpecificRetryHandler", "(", "true", ",", "true", ",", "this", ".", "getRetryHandler", "(", ")", ",", "requestConfig", ")", ";", "}", "}", "</s>"]
["<s>", "RibbonRequest", "(", "Client", "client", ",", "Request", "request", ",", "URI", "uri", ")", "{", "this", ".", "client", "=", "client", ";", "this", ".", "request", "=", "request", ";", "setUri", "(", "uri", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "Request", "toRequest", "(", ")", "{", "final", "byte", "[", "]", "body", "=", "request", ".", "body", "(", ")", ";", "final", "int", "bodyLength", "=", "body", "!", "=", "null", "?", "body", ".", "length", ":", "0", ";", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "new", "LinkedHashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", ")", ";", "headers", ".", "putAll", "(", "request", ".", "headers", "(", ")", ")", ";", "headers", ".", "put", "(", "Util", ".", "CONTENT_LENGTH", ",", "Collections", ".", "singletonList", "(", "String", ".", "valueOf", "(", "bodyLength", ")", ")", ")", ";", "return", "Request", ".", "create", "(", "request", ".", "httpMethod", "(", ")", ",", "getUri", "(", ")", ".", "toASCIIString", "(", ")", ",", "headers", ",", "body", ",", "request", ".", "charset", "(", ")", ")", ";", "}", "</s>"]
["<s>", "Client", "client", "(", ")", "{", "return", "client", ";", "}", "</s>"]
["<s>", "public", "Object", "clone", "(", ")", "{", "return", "new", "RibbonRequest", "(", "client", ",", "request", ",", "getUri", "(", ")", ")", ";", "}", "</s>"]
["<s>", "RibbonResponse", "(", "URI", "uri", ",", "Response", "response", ")", "{", "this", ".", "uri", "=", "uri", ";", "this", ".", "response", "=", "response", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "getPayload", "(", ")", "throws", "ClientException", "{", "return", "response", ".", "body", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "hasPayload", "(", ")", "{", "return", "response", ".", "body", "(", ")", "!", "=", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isSuccess", "(", ")", "{", "return", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "URI", "getRequestedURI", "(", ")", "{", "return", "uri", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "getHeaders", "(", ")", "{", "return", "response", ".", "headers", "(", ")", ";", "}", "</s>"]
["<s>", "Response", "toResponse", "(", ")", "{", "return", "response", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "if", "(", "response", "!", "=", "null", "&", "&", "response", ".", "body", "(", ")", "!", "=", "null", ")", "{", "response", ".", "body", "(", ")", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Deprecated", "protected", "LoadBalancingTarget", "(", "Class", "<", "T", ">", "type", ",", "String", "scheme", ",", "String", "name", ")", "{", "this", ".", "type", "=", "checkNotNull", "(", "type", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "scheme", "=", "checkNotNull", "(", "scheme", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "name", "=", "checkNotNull", "(", "name", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "path", "=", "\"", "\"", ";", "this", ".", "lb", "=", "AbstractLoadBalancer", ".", "class", ".", "cast", "(", "getNamedLoadBalancer", "(", "name", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "LoadBalancingTarget", "(", "Class", "<", "T", ">", "type", ",", "String", "scheme", ",", "String", "name", ",", "String", "path", ")", "{", "this", ".", "type", "=", "checkNotNull", "(", "type", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "scheme", "=", "checkNotNull", "(", "scheme", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "name", "=", "checkNotNull", "(", "name", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "path", "=", "checkNotNull", "(", "path", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "lb", "=", "AbstractLoadBalancer", ".", "class", ".", "cast", "(", "getNamedLoadBalancer", "(", "name", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "<", "T", ">", "LoadBalancingTarget", "<", "T", ">", "create", "(", "Class", "<", "T", ">", "type", ",", "String", "url", ")", "{", "URI", "asUri", "=", "URI", ".", "create", "(", "url", ")", ";", "return", "new", "LoadBalancingTarget", "<", "T", ">", "(", "type", ",", "asUri", ".", "getScheme", "(", ")", ",", "asUri", ".", "getHost", "(", ")", ",", "asUri", ".", "getPath", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Class", "<", "T", ">", "type", "(", ")", "{", "return", "type", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "name", "(", ")", "{", "return", "name", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "url", "(", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "scheme", ",", "path", ")", ";", "}", "</s>"]
["<s>", "public", "AbstractLoadBalancer", "lb", "(", ")", "{", "return", "lb", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Request", "apply", "(", "RequestTemplate", "input", ")", "{", "Server", "currentServer", "=", "lb", ".", "chooseServer", "(", "null", ")", ";", "String", "url", "=", "format", "(", "\"", "<STR_LIT>", "\"", ",", "scheme", ",", "currentServer", ".", "getHostPort", "(", ")", ",", "path", ")", ";", "input", ".", "target", "(", "url", ")", ";", "try", "{", "return", "input", ".", "request", "(", ")", ";", "}", "finally", "{", "lb", ".", "getLoadBalancerStats", "(", ")", ".", "incrementNumRequests", "(", "currentServer", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "obj", "instanceof", "LoadBalancingTarget", ")", "{", "LoadBalancingTarget", "<", "?", ">", "other", "=", "(", "LoadBalancingTarget", "<", "?", ">", ")", "obj", ";", "return", "type", ".", "equals", "(", "other", ".", "type", ")", "&", "&", "name", ".", "equals", "(", "other", ".", "name", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "int", "result", "=", "<NUM_LIT>", ";", "result", "=", "<NUM_LIT:31>", "*", "result", "+", "type", ".", "hashCode", "(", ")", ";", "result", "=", "<NUM_LIT:31>", "*", "result", "+", "name", ".", "hashCode", "(", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", "+", "type", ".", "getSimpleName", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "name", "+", "\"", "<STR_LIT>", "\"", "+", "path", "+", "\"", "<STR_LIT:)>", "\"", ";", "}", "</s>"]
["<s>", "public", "static", "RibbonClient", "create", "(", ")", "{", "return", "builder", "(", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "public", "static", "Builder", "builder", "(", ")", "{", "return", "new", "Builder", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "RibbonClient", "(", ")", "{", "this", "(", "new", "Client", ".", "Default", "(", "null", ",", "null", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Deprecated", "public", "RibbonClient", "(", "Client", "delegate", ")", "{", "this", "(", "delegate", ",", "new", "LBClientFactory", ".", "Default", "(", ")", ")", ";", "}", "</s>"]
["<s>", "RibbonClient", "(", "Client", "delegate", ",", "LBClientFactory", "lbClientFactory", ")", "{", "this", ".", "delegate", "=", "delegate", ";", "this", ".", "lbClientFactory", "=", "lbClientFactory", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "execute", "(", "Request", "request", ",", "Request", ".", "Options", "options", ")", "throws", "IOException", "{", "try", "{", "URI", "asUri", "=", "URI", ".", "create", "(", "request", ".", "url", "(", ")", ")", ";", "String", "clientName", "=", "asUri", ".", "getHost", "(", ")", ";", "URI", "uriWithoutHost", "=", "cleanUrl", "(", "request", ".", "url", "(", ")", ",", "clientName", ")", ";", "LBClient", ".", "RibbonRequest", "ribbonRequest", "=", "new", "LBClient", ".", "RibbonRequest", "(", "delegate", ",", "request", ",", "uriWithoutHost", ")", ";", "return", "lbClient", "(", "clientName", ")", ".", "executeWithLoadBalancer", "(", "ribbonRequest", ",", "new", "FeignOptionsClientConfig", "(", "options", ")", ")", ".", "toResponse", "(", ")", ";", "}", "catch", "(", "ClientException", "e", ")", "{", "propagateFirstIOException", "(", "e", ")", ";", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "static", "void", "propagateFirstIOException", "(", "Throwable", "throwable", ")", "throws", "IOException", "{", "while", "(", "throwable", "!", "=", "null", ")", "{", "if", "(", "throwable", "instanceof", "IOException", ")", "{", "throw", "(", "IOException", ")", "throwable", ";", "}", "throwable", "=", "throwable", ".", "getCause", "(", ")", ";", "}", "}", "</s>"]
["<s>", "static", "URI", "cleanUrl", "(", "String", "originalUrl", ",", "String", "host", ")", "{", "return", "URI", ".", "create", "(", "originalUrl", ".", "replaceFirst", "(", "host", ",", "\"", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "private", "LBClient", "lbClient", "(", "String", "clientName", ")", "{", "return", "lbClientFactory", ".", "create", "(", "clientName", ")", ";", "}", "</s>"]
["<s>", "public", "FeignOptionsClientConfig", "(", "Request", ".", "Options", "options", ")", "{", "setProperty", "(", "CommonClientConfigKey", ".", "ConnectTimeout", ",", "options", ".", "connectTimeoutMillis", "(", ")", ")", ";", "setProperty", "(", "CommonClientConfigKey", ".", "ReadTimeout", ",", "options", ".", "readTimeoutMillis", "(", ")", ")", ";", "setProperty", "(", "CommonClientConfigKey", ".", "FollowRedirects", ",", "options", ".", "isFollowRedirects", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "loadProperties", "(", "String", "clientName", ")", "{", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "loadDefaultValues", "(", ")", "{", "}", "</s>"]
["<s>", "Builder", "(", ")", "{", "}", "</s>"]
["<s>", "public", "Builder", "delegate", "(", "Client", "delegate", ")", "{", "this", ".", "delegate", "=", "delegate", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "lbClientFactory", "(", "LBClientFactory", "lbClientFactory", ")", "{", "this", ".", "lbClientFactory", "=", "lbClientFactory", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "RibbonClient", "build", "(", ")", "{", "return", "new", "RibbonClient", "(", "delegate", "!", "=", "null", "?", "delegate", ":", "new", "Client", ".", "Default", "(", "null", ",", "null", ")", ",", "lbClientFactory", "!", "=", "null", "?", "lbClientFactory", ":", "new", "LBClientFactory", ".", "Default", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodesXml", "(", ")", "throws", "Exception", "{", "MockObject", "mock", "=", "new", "MockObject", "(", ")", ";", "mock", ".", "value", "=", "\"", "<STR_LIT:Test>", "\"", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "new", "JAXBEncoder", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ".", "encode", "(", "mock", ",", "MockObject", ".", "class", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesntEncodeParameterizedTypes", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "UnsupportedOperationException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "class", "ParameterizedHolder", "{", "Map", "<", "String", ",", "?", ">", "field", ";", "}", "Type", "parameterized", "=", "ParameterizedHolder", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getGenericType", "(", ")", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "new", "JAXBEncoder", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ".", "encode", "(", "Collections", ".", "emptyMap", "(", ")", ",", "parameterized", ",", "template", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodesXmlWithCustomJAXBEncoding", "(", ")", "throws", "Exception", "{", "JAXBContextFactory", "jaxbContextFactory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "withMarshallerJAXBEncoding", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "Encoder", "encoder", "=", "new", "JAXBEncoder", "(", "jaxbContextFactory", ")", ";", "MockObject", "mock", "=", "new", "MockObject", "(", ")", ";", "mock", ".", "value", "=", "\"", "<STR_LIT:Test>", "\"", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "mock", ",", "MockObject", ".", "class", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "\"", "<STR_LIT:=>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodesXmlWithCustomJAXBSchemaLocation", "(", ")", "throws", "Exception", "{", "JAXBContextFactory", "jaxbContextFactory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "withMarshallerSchemaLocation", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "Encoder", "encoder", "=", "new", "JAXBEncoder", "(", "jaxbContextFactory", ")", ";", "MockObject", "mock", "=", "new", "MockObject", "(", ")", ";", "mock", ".", "value", "=", "\"", "<STR_LIT:Test>", "\"", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "mock", ",", "MockObject", ".", "class", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "\"", "+", "\"", "<STR_LIT:=>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodesXmlWithCustomJAXBNoNamespaceSchemaLocation", "(", ")", "throws", "Exception", "{", "JAXBContextFactory", "jaxbContextFactory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "withMarshallerNoNamespaceSchemaLocation", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "Encoder", "encoder", "=", "new", "JAXBEncoder", "(", "jaxbContextFactory", ")", ";", "MockObject", "mock", "=", "new", "MockObject", "(", ")", ";", "mock", ".", "value", "=", "\"", "<STR_LIT:Test>", "\"", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "mock", ",", "MockObject", ".", "class", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "\"", "+", "\"", "<STR_LIT:=>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:>>", "\"", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodesXmlWithCustomJAXBFormattedOutput", "(", ")", "{", "JAXBContextFactory", "jaxbContextFactory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "withMarshallerFormattedOutput", "(", "true", ")", ".", "build", "(", ")", ";", "Encoder", "encoder", "=", "new", "JAXBEncoder", "(", "jaxbContextFactory", ")", ";", "MockObject", "mock", "=", "new", "MockObject", "(", ")", ";", "mock", ".", "value", "=", "\"", "<STR_LIT:Test>", "\"", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "mock", ",", "MockObject", ".", "class", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "new", "StringBuilder", "(", ")", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "\"", "<STR_LIT>", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodesXml", "(", ")", "throws", "Exception", "{", "MockObject", "mock", "=", "new", "MockObject", "(", ")", ";", "mock", ".", "value", "=", "\"", "<STR_LIT:Test>", "\"", ";", "String", "mockXml", "=", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:1.0>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:UTF-8>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "\"", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "mockXml", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "JAXBDecoder", "decoder", "=", "new", "JAXBDecoder", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ";", "assertEquals", "(", "mock", ",", "decoder", ".", "decode", "(", "response", ",", "MockObject", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesntDecodeParameterizedTypes", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "feign", ".", "codec", ".", "DecodeException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", "+", "\"", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "<STR_LIT>", "\"", ")", ";", "class", "ParameterizedHolder", "{", "Map", "<", "String", ",", "?", ">", "field", ";", "}", "Type", "parameterized", "=", "ParameterizedHolder", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getGenericType", "(", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "<", "String", ",", "Collection", "<", "String", ">", ">", "emptyMap", "(", ")", ")", ".", "body", "(", "\"", "<STR_LIT>", "\"", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "new", "JAXBDecoder", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ".", "decode", "(", "response", ",", "parameterized", ")", ";", "}", "</s>"]
["<s>", "public", "void", "set", "(", "T", "t", ")", "{", "this", ".", "t", "=", "t", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodeAnnotatedParameterizedTypes", "(", ")", "throws", "Exception", "{", "JAXBContextFactory", "jaxbContextFactory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "withMarshallerFormattedOutput", "(", "true", ")", ".", "build", "(", ")", ";", "Encoder", "encoder", "=", "new", "JAXBEncoder", "(", "jaxbContextFactory", ")", ";", "Box", "<", "String", ">", "boxStr", "=", "new", "Box", "<", ">", "(", ")", ";", "boxStr", ".", "set", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Box", "<", "Box", "<", "String", ">", ">", "boxBoxStr", "=", "new", "Box", "<", ">", "(", ")", ";", "boxBoxStr", ".", "set", "(", "boxStr", ")", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "boxBoxStr", ",", "Box", ".", "class", ",", "template", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "<", "String", ",", "Collection", "<", "String", ">", ">", "emptyMap", "(", ")", ")", ".", "body", "(", "template", ".", "body", "(", ")", ")", ".", "build", "(", ")", ";", "new", "JAXBDecoder", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ".", "decode", "(", "response", ",", "Box", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notFoundDecodesToNull", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "<", "String", ",", "Collection", "<", "String", ">", ">", "emptyMap", "(", ")", ")", ".", "build", "(", ")", ";", "assertThat", "(", "(", "byte", "[", "]", ")", "new", "JAXBDecoder", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ".", "decode", "(", "response", ",", "byte", "[", "]", ".", "class", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "obj", "instanceof", "MockObject", ")", "{", "MockObject", "other", "=", "(", "MockObject", ")", "obj", ";", "return", "value", ".", "equals", "(", "other", ".", "value", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "value", "!", "=", "null", "?", "value", ".", "hashCode", "(", ")", ":", "0", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "buildsMarshallerWithJAXBEncodingProperty", "(", ")", "throws", "Exception", "{", "JAXBContextFactory", "factory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "withMarshallerJAXBEncoding", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "Marshaller", "marshaller", "=", "factory", ".", "createMarshaller", "(", "Object", ".", "class", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "marshaller", ".", "getProperty", "(", "Marshaller", ".", "JAXB_ENCODING", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "buildsMarshallerWithSchemaLocationProperty", "(", ")", "throws", "Exception", "{", "JAXBContextFactory", "factory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "withMarshallerSchemaLocation", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "Marshaller", "marshaller", "=", "factory", ".", "createMarshaller", "(", "Object", ".", "class", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "marshaller", ".", "getProperty", "(", "Marshaller", ".", "JAXB_SCHEMA_LOCATION", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "buildsMarshallerWithNoNamespaceSchemaLocationProperty", "(", ")", "throws", "Exception", "{", "JAXBContextFactory", "factory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "withMarshallerNoNamespaceSchemaLocation", "(", "\"", "<STR_LIT>", "\"", ")", ".", "build", "(", ")", ";", "Marshaller", "marshaller", "=", "factory", ".", "createMarshaller", "(", "Object", ".", "class", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "marshaller", ".", "getProperty", "(", "Marshaller", ".", "JAXB_NO_NAMESPACE_SCHEMA_LOCATION", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "buildsMarshallerWithFormattedOutputProperty", "(", ")", "throws", "Exception", "{", "JAXBContextFactory", "factory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "withMarshallerFormattedOutput", "(", "true", ")", ".", "build", "(", ")", ";", "Marshaller", "marshaller", "=", "factory", ".", "createMarshaller", "(", "Object", ".", "class", ")", ";", "assertTrue", "(", "(", "Boolean", ")", "marshaller", ".", "getProperty", "(", "Marshaller", ".", "JAXB_FORMATTED_OUTPUT", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "buildsMarshallerWithFragmentProperty", "(", ")", "throws", "Exception", "{", "JAXBContextFactory", "factory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "withMarshallerFragment", "(", "true", ")", ".", "build", "(", ")", ";", "Marshaller", "marshaller", "=", "factory", ".", "createMarshaller", "(", "Object", ".", "class", ")", ";", "assertTrue", "(", "(", "Boolean", ")", "marshaller", ".", "getProperty", "(", "Marshaller", ".", "JAXB_FRAGMENT", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testPreloadCache", "(", ")", "throws", "Exception", "{", "List", "<", "Class", "<", "?", ">", ">", "classes", "=", "Arrays", ".", "asList", "(", "String", ".", "class", ",", "Integer", ".", "class", ")", ";", "JAXBContextFactory", "factory", "=", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", "classes", ")", ";", "Field", "f", "=", "factory", ".", "getClass", "(", ")", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ";", "f", ".", "setAccessible", "(", "true", ")", ";", "Map", "internalCache", "=", "(", "Map", ")", "f", ".", "get", "(", "factory", ")", ";", "assertFalse", "(", "internalCache", ".", "isEmpty", "(", ")", ")", ";", "assertTrue", "(", "internalCache", ".", "size", "(", ")", "=", "=", "classes", ".", "size", "(", ")", ")", ";", "assertNotNull", "(", "internalCache", ".", "get", "(", "String", ".", "class", ")", ")", ";", "assertNotNull", "(", "internalCache", ".", "get", "(", "Integer", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "public", "AWSSignatureVersion4", "(", "String", "accessKey", ",", "String", "secretKey", ")", "{", "this", ".", "accessKey", "=", "accessKey", ";", "this", ".", "secretKey", "=", "secretKey", ";", "}", "</s>"]
["<s>", "static", "byte", "[", "]", "hmacSHA256", "(", "String", "data", ",", "byte", "[", "]", "key", ")", "{", "try", "{", "String", "algorithm", "=", "\"", "<STR_LIT>", "\"", ";", "Mac", "mac", "=", "Mac", ".", "getInstance", "(", "algorithm", ")", ";", "mac", ".", "init", "(", "new", "SecretKeySpec", "(", "key", ",", "algorithm", ")", ")", ";", "return", "mac", ".", "doFinal", "(", "data", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "static", "String", "canonicalString", "(", "RequestTemplate", "input", ",", "String", "host", ")", "{", "StringBuilder", "canonicalRequest", "=", "new", "StringBuilder", "(", ")", ";", "canonicalRequest", ".", "append", "(", "input", ".", "method", "(", ")", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "canonicalRequest", ".", "append", "(", "URI", ".", "create", "(", "input", ".", "url", "(", ")", ")", ".", "getPath", "(", ")", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "canonicalRequest", ".", "append", "(", "input", ".", "queryLine", "(", ")", ".", "substring", "(", "1", ")", ")", ";", "canonicalRequest", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "canonicalRequest", ".", "append", "(", "\"", "<STR_LIT::>", "\"", ")", ".", "append", "(", "host", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "canonicalRequest", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "canonicalRequest", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "byte", "[", "]", "data", "=", "input", ".", "body", "(", ")", ";", "String", "bodyText", "=", "(", "data", "!", "=", "null", ")", "?", "new", "String", "(", "data", ",", "input", ".", "requestCharset", "(", ")", ")", ":", "null", ";", "if", "(", "bodyText", "!", "=", "null", ")", "{", "canonicalRequest", ".", "append", "(", "hex", "(", "sha256", "(", "bodyText", ")", ")", ")", ";", "}", "else", "{", "canonicalRequest", ".", "append", "(", "EMPTY_STRING_HASH", ")", ";", "}", "return", "canonicalRequest", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "toSign", "(", "String", "timestamp", ",", "String", "credentialScope", ",", "String", "canonicalRequest", ")", "{", "StringBuilder", "toSign", "=", "new", "StringBuilder", "(", ")", ";", "toSign", ".", "append", "(", "\"", "<STR_LIT>", "\"", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "toSign", ".", "append", "(", "timestamp", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "toSign", ".", "append", "(", "credentialScope", ")", ".", "append", "(", "<STR_LIT:\\n>", ")", ";", "toSign", ".", "append", "(", "hex", "(", "sha256", "(", "canonicalRequest", ")", ")", ")", ";", "return", "toSign", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "String", "hex", "(", "byte", "[", "]", "data", ")", "{", "StringBuilder", "result", "=", "new", "StringBuilder", "(", "data", ".", "length", "*", "<NUM_LIT:2>", ")", ";", "for", "(", "byte", "b", ":", "data", ")", "{", "result", ".", "append", "(", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "b", "&", "<NUM_LIT>", ")", ")", ";", "}", "return", "result", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "static", "byte", "[", "]", "sha256", "(", "String", "data", ")", "{", "try", "{", "MessageDigest", "digest", "=", "MessageDigest", ".", "getInstance", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "digest", ".", "digest", "(", "data", ".", "getBytes", "(", "UTF_8", ")", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "Request", "apply", "(", "RequestTemplate", "input", ")", "{", "if", "(", "!", "input", ".", "headers", "(", ")", ".", "isEmpty", "(", ")", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "input", ".", "body", "(", ")", "!", "=", "null", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "String", "host", "=", "URI", ".", "create", "(", "input", ".", "url", "(", ")", ")", ".", "getHost", "(", ")", ";", "String", "timestamp", ";", "synchronized", "(", "iso8601", ")", "{", "timestamp", "=", "iso8601", ".", "format", "(", "new", "Date", "(", ")", ")", ";", "}", "String", "credentialScope", "=", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ".", "substring", "(", "0", ",", "<NUM_LIT:8>", ")", ",", "region", ",", "service", ",", "\"", "<STR_LIT>", "\"", ")", ";", "input", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "input", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "accessKey", "+", "\"", "<STR_LIT:/>", "\"", "+", "credentialScope", ")", ";", "input", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "timestamp", ")", ";", "input", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "input", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "host", ")", ";", "String", "canonicalString", "=", "canonicalString", "(", "input", ",", "host", ")", ";", "String", "toSign", "=", "toSign", "(", "timestamp", ",", "credentialScope", ",", "canonicalString", ")", ";", "byte", "[", "]", "signatureKey", "=", "signatureKey", "(", "secretKey", ",", "timestamp", ")", ";", "String", "signature", "=", "hex", "(", "hmacSHA256", "(", "toSign", ",", "signatureKey", ")", ")", ";", "input", ".", "query", "(", "\"", "<STR_LIT>", "\"", ",", "signature", ")", ";", "return", "input", ".", "request", "(", ")", ";", "}", "</s>"]
["<s>", "byte", "[", "]", "signatureKey", "(", "String", "secretKey", ",", "String", "timestamp", ")", "{", "byte", "[", "]", "kSecret", "=", "(", "\"", "<STR_LIT>", "\"", "+", "secretKey", ")", ".", "getBytes", "(", "UTF_8", ")", ";", "byte", "[", "]", "kDate", "=", "hmacSHA256", "(", "timestamp", ".", "substring", "(", "0", ",", "<NUM_LIT:8>", ")", ",", "kSecret", ")", ";", "byte", "[", "]", "kRegion", "=", "hmacSHA256", "(", "region", ",", "kDate", ")", ";", "byte", "[", "]", "kService", "=", "hmacSHA256", "(", "service", ",", "kRegion", ")", ";", "byte", "[", "]", "kSigning", "=", "hmacSHA256", "(", "\"", "<STR_LIT>", "\"", ",", "kService", ")", ";", "return", "kSigning", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", ".", ".", ".", "args", ")", "{", "IAM", "iam", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "new", "JAXBDecoder", "(", "new", "JAXBContextFactory", ".", "Builder", "(", ")", ".", "build", "(", ")", ")", ")", ".", "target", "(", "new", "IAMTarget", "(", "args", "[", "0", "]", ",", "args", "[", "1", "]", ")", ")", ";", "GetUserResponse", "response", "=", "iam", ".", "userResponse", "(", ")", ";", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", "+", "response", ".", "result", ".", "user", ".", "id", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "GetUserResponse", "userResponse", "(", ")", ";", "</s>"]
["<s>", "private", "IAMTarget", "(", "String", "accessKey", ",", "String", "secretKey", ")", "{", "super", "(", "accessKey", ",", "secretKey", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Class", "<", "IAM", ">", "type", "(", ")", "{", "return", "IAM", ".", "class", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "name", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "url", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Request", "apply", "(", "RequestTemplate", "in", ")", "{", "in", ".", "target", "(", "url", "(", ")", ")", ";", "return", "super", ".", "apply", "(", "in", ")", ";", "}", "</s>"]
["<s>", "public", "JAXBEncoder", "(", "JAXBContextFactory", "jaxbContextFactory", ")", "{", "this", ".", "jaxbContextFactory", "=", "jaxbContextFactory", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "if", "(", "!", "(", "bodyType", "instanceof", "Class", ")", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", "+", "bodyType", ")", ";", "}", "try", "{", "Marshaller", "marshaller", "=", "jaxbContextFactory", ".", "createMarshaller", "(", "(", "Class", "<", "?", ">", ")", "bodyType", ")", ";", "StringWriter", "stringWriter", "=", "new", "StringWriter", "(", ")", ";", "marshaller", ".", "marshal", "(", "object", ",", "stringWriter", ")", ";", "template", ".", "body", "(", "stringWriter", ".", "toString", "(", ")", ")", ";", "}", "catch", "(", "JAXBException", "e", ")", "{", "throw", "new", "EncodeException", "(", "e", ".", "toString", "(", ")", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "private", "JAXBContextFactory", "(", "Map", "<", "String", ",", "Object", ">", "properties", ")", "{", "this", ".", "properties", "=", "properties", ";", "}", "</s>"]
["<s>", "public", "Unmarshaller", "createUnmarshaller", "(", "Class", "<", "?", ">", "clazz", ")", "throws", "JAXBException", "{", "return", "getContext", "(", "clazz", ")", ".", "createUnmarshaller", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Marshaller", "createMarshaller", "(", "Class", "<", "?", ">", "clazz", ")", "throws", "JAXBException", "{", "Marshaller", "marshaller", "=", "getContext", "(", "clazz", ")", ".", "createMarshaller", "(", ")", ";", "setMarshallerProperties", "(", "marshaller", ")", ";", "return", "marshaller", ";", "}", "</s>"]
["<s>", "private", "void", "setMarshallerProperties", "(", "Marshaller", "marshaller", ")", "throws", "PropertyException", "{", "for", "(", "Entry", "<", "String", ",", "Object", ">", "en", ":", "properties", ".", "entrySet", "(", ")", ")", "{", "marshaller", ".", "setProperty", "(", "en", ".", "getKey", "(", ")", ",", "en", ".", "getValue", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "JAXBContext", "getContext", "(", "Class", "<", "?", ">", "clazz", ")", "throws", "JAXBException", "{", "JAXBContext", "jaxbContext", "=", "this", ".", "jaxbContexts", ".", "get", "(", "clazz", ")", ";", "if", "(", "jaxbContext", "=", "=", "null", ")", "{", "jaxbContext", "=", "JAXBContext", ".", "newInstance", "(", "clazz", ")", ";", "this", ".", "jaxbContexts", ".", "putIfAbsent", "(", "clazz", ",", "jaxbContext", ")", ";", "}", "return", "jaxbContext", ";", "}", "</s>"]
["<s>", "private", "void", "preloadContextCache", "(", "List", "<", "Class", "<", "?", ">", ">", "classes", ")", "throws", "JAXBException", "{", "if", "(", "classes", "!", "=", "null", "&", "&", "!", "classes", ".", "isEmpty", "(", ")", ")", "{", "for", "(", "Class", "<", "?", ">", "clazz", ":", "classes", ")", "{", "getContext", "(", "clazz", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "Builder", "withMarshallerJAXBEncoding", "(", "String", "value", ")", "{", "properties", ".", "put", "(", "Marshaller", ".", "JAXB_ENCODING", ",", "value", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "withMarshallerSchemaLocation", "(", "String", "value", ")", "{", "properties", ".", "put", "(", "Marshaller", ".", "JAXB_SCHEMA_LOCATION", ",", "value", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "withMarshallerNoNamespaceSchemaLocation", "(", "String", "value", ")", "{", "properties", ".", "put", "(", "Marshaller", ".", "JAXB_NO_NAMESPACE_SCHEMA_LOCATION", ",", "value", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "withMarshallerFormattedOutput", "(", "Boolean", "value", ")", "{", "properties", ".", "put", "(", "Marshaller", ".", "JAXB_FORMATTED_OUTPUT", ",", "value", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "withMarshallerFragment", "(", "Boolean", "value", ")", "{", "properties", ".", "put", "(", "Marshaller", ".", "JAXB_FRAGMENT", ",", "value", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "withProperty", "(", "String", "key", ",", "Object", "value", ")", "{", "properties", ".", "put", "(", "key", ",", "value", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JAXBContextFactory", "build", "(", ")", "{", "return", "new", "JAXBContextFactory", "(", "properties", ")", ";", "}", "</s>"]
["<s>", "public", "JAXBContextFactory", "build", "(", "List", "<", "Class", "<", "?", ">", ">", "classes", ")", "throws", "JAXBException", "{", "JAXBContextFactory", "factory", "=", "new", "JAXBContextFactory", "(", "properties", ")", ";", "factory", ".", "preloadContextCache", "(", "classes", ")", ";", "return", "factory", ";", "}", "</s>"]
["<s>", "public", "JAXBDecoder", "(", "JAXBContextFactory", "jaxbContextFactory", ")", "{", "this", ".", "jaxbContextFactory", "=", "jaxbContextFactory", ";", "this", ".", "namespaceAware", "=", "true", ";", "}", "</s>"]
["<s>", "private", "JAXBDecoder", "(", "Builder", "builder", ")", "{", "this", ".", "jaxbContextFactory", "=", "builder", ".", "jaxbContextFactory", ";", "this", ".", "namespaceAware", "=", "builder", ".", "namespaceAware", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "if", "(", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", ")", "return", "Util", ".", "emptyValueOf", "(", "type", ")", ";", "if", "(", "response", ".", "body", "(", ")", "=", "=", "null", ")", "return", "null", ";", "while", "(", "type", "instanceof", "ParameterizedType", ")", "{", "ParameterizedType", "ptype", "=", "(", "ParameterizedType", ")", "type", ";", "type", "=", "ptype", ".", "getRawType", "(", ")", ";", "}", "if", "(", "!", "(", "type", "instanceof", "Class", ")", ")", "{", "throw", "new", "UnsupportedOperationException", "(", "\"", "<STR_LIT>", "\"", "+", "type", ")", ";", "}", "try", "{", "SAXParserFactory", "saxParserFactory", "=", "SAXParserFactory", ".", "newInstance", "(", ")", ";", "saxParserFactory", ".", "setFeature", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "saxParserFactory", ".", "setFeature", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "saxParserFactory", ".", "setFeature", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "saxParserFactory", ".", "setFeature", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "saxParserFactory", ".", "setNamespaceAware", "(", "namespaceAware", ")", ";", "return", "jaxbContextFactory", ".", "createUnmarshaller", "(", "(", "Class", "<", "?", ">", ")", "type", ")", ".", "unmarshal", "(", "new", "SAXSource", "(", "saxParserFactory", ".", "newSAXParser", "(", ")", ".", "getXMLReader", "(", ")", ",", "new", "InputSource", "(", "response", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ")", ")", ")", ";", "}", "catch", "(", "JAXBException", "|", "ParserConfigurationException", "|", "SAXException", "e", ")", "{", "throw", "new", "DecodeException", "(", "response", ".", "status", "(", ")", ",", "e", ".", "toString", "(", ")", ",", "response", ".", "request", "(", ")", ",", "e", ")", ";", "}", "finally", "{", "if", "(", "response", ".", "body", "(", ")", "!", "=", "null", ")", "{", "response", ".", "body", "(", ")", ".", "close", "(", ")", ";", "}", "}", "}", "</s>"]
["<s>", "public", "Builder", "withNamespaceAware", "(", "boolean", "namespaceAware", ")", "{", "this", ".", "namespaceAware", "=", "namespaceAware", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "Builder", "withJAXBContextFactory", "(", "JAXBContextFactory", "jaxbContextFactory", ")", "{", "this", ".", "jaxbContextFactory", "=", "jaxbContextFactory", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "JAXBDecoder", "build", "(", ")", "{", "if", "(", "jaxbContextFactory", "=", "=", "null", ")", "{", "throw", "new", "IllegalStateException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "new", "JAXBDecoder", "(", "this", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "iterableQueryParams", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "queryParams", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postTemplateParamsResolve", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "login", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "responseCoercesToStringBody", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "Response", "response", "=", "unwrap", "(", "api", ".", "response", "(", ")", ")", ";", "assertTrue", "(", "response", ".", "body", "(", ")", ".", "isRepeatable", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "response", ".", "body", "(", ")", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postFormParams", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "form", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "postBodyParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "body", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "bodyTypeCorrespondsWithParameterType", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "AtomicReference", "<", "Type", ">", "encodedType", "=", "new", "AtomicReference", "<", "Type", ">", "(", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "encoder", "(", "new", "Encoder", ".", "Default", "(", ")", "{", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "encodedType", ".", "set", "(", "bodyType", ")", ";", "}", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "body", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "server", ".", "takeRequest", "(", ")", ";", "assertThat", "(", "encodedType", ".", "get", "(", ")", ")", ".", "isEqualTo", "(", "new", "TypeToken", "<", "List", "<", "String", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "encodedType", ".", "set", "(", "bodyType", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "singleInterceptor", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "requestInterceptor", "(", "new", "ForwardedForInterceptor", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "post", "(", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "multipleInterceptor", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "requestInterceptor", "(", "new", "ForwardedForInterceptor", "(", ")", ")", ".", "requestInterceptor", "(", "new", "UserAgentInterceptor", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "post", "(", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customExpander", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "expand", "(", "new", "Date", "(", "<NUM_LIT>", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customExpanderListParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "expandList", "(", "Arrays", ".", "asList", "(", "new", "Date", "(", "<NUM_LIT>", ")", ",", "new", "Date", "(", "<NUM_LIT>", ")", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customExpanderNullParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "expandList", "(", "Arrays", ".", "asList", "(", "new", "Date", "(", "<NUM_LIT>", ")", ",", "null", ")", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerMap", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "Map", "<", "String", ",", "Object", ">", "headerMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "headerMap", "(", "headerMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerMapWithHeaderAnnotations", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "Map", "<", "String", ",", "Object", ">", "headerMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "headerMapWithHeaderAnnotations", "(", "headerMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "headerMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "headerMapWithHeaderAnnotations", "(", "headerMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMap", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapIterableValuesExpanded", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "new", "ArrayList", "<", "String", ">", "(", ")", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "\"", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapWithQueryParams", "(", ")", "throws", "Exception", "{", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapWithQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapWithQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ";", "api", ".", "queryMapWithQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapValueStartingWithBrace", "(", ")", "throws", "Exception", "{", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "Map", "<", "String", ",", "Object", ">", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMap", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapEncoded", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "queryMap", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "queryMap", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "api", ".", "queryMapEncoded", "(", "queryMap", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoWithFullParams", "(", ")", "throws", "Exception", "{", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CustomPojo", "customPojo", "=", "new", "CustomPojo", "(", "\"", "<STR_LIT:Name>", "\"", ",", "<NUM_LIT:3>", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPojo", "(", "customPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoWithPartialParams", "(", ")", "throws", "Exception", "{", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CustomPojo", "customPojo", "=", "new", "CustomPojo", "(", "\"", "<STR_LIT:Name>", "\"", ",", "null", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPojo", "(", "customPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMapPojoWithEmptyParams", "(", ")", "throws", "Exception", "{", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CustomPojo", "customPojo", "=", "new", "CustomPojo", "(", "null", ",", "null", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "api", ".", "queryMapPojo", "(", "customPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configKeyFormatsAsExpected", "(", ")", "throws", "Exception", "{", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Feign", ".", "configKey", "(", "TestInterfaceAsync", ".", "class", ",", "TestInterfaceAsync", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Feign", ".", "configKey", "(", "TestInterfaceAsync", ".", "class", ",", "TestInterfaceAsync", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "URI", ".", "class", ",", "String", ".", "class", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "configKeyUsesChildType", "(", ")", "throws", "Exception", "{", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Feign", ".", "configKey", "(", "List", ".", "class", ",", "Iterable", ".", "class", ".", "getDeclaredMethod", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "<", "T", ">", "T", "unwrap", "(", "CompletableFuture", "<", "T", ">", "cf", ")", "throws", "Throwable", "{", "try", "{", "return", "cf", ".", "get", "(", "1", ",", "TimeUnit", ".", "SECONDS", ")", ";", "}", "catch", "(", "final", "ExecutionException", "e", ")", "{", "throw", "e", ".", "getCause", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "canOverrideErrorDecoder", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "errorDecoder", "(", "new", "IllegalArgumentExceptionOn400", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "unwrap", "(", "api", ".", "post", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "overrideTypeSpecificDecoder", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "\"", "<STR_LIT>", "\"", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "unwrap", "(", "api", ".", "post", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "doesntRetryAfterResponseIsSent", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "FeignException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "post", "(", ")", ";", "server", ".", "takeRequest", "(", ")", ";", "unwrap", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsFeignExceptionIncludingBody", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", ")", ".", "target", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "body", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "takeRequest", "(", ")", ";", "try", "{", "unwrap", "(", "cf", ")", ";", "}", "catch", "(", "final", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT:/>", "\"", ")", ";", "assertThat", "(", "e", ".", "contentUTF8", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", ";", "}", "fail", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "throwsFeignExceptionWithoutBody", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", ")", ".", "target", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "try", "{", "api", ".", "noContent", "(", ")", ";", "}", "catch", "(", "final", "FeignException", "e", ")", "{", "assertThat", "(", "e", ".", "getMessage", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT:/>", "\"", ")", ";", "assertThat", "(", "e", ".", "contentUTF8", "(", ")", ")", ".", "isEqualTo", "(", "\"", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Test", "public", "void", "whenReturnTypeIsResponseNoErrorHandling", "(", ")", "throws", "Throwable", "{", "final", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "new", "LinkedHashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", ")", ";", "headers", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "headers", "(", "headers", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT:/>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "body", "(", "new", "byte", "[", "0", "]", ")", ".", "build", "(", ")", ";", "final", "ExecutorService", "execs", "=", "Executors", ".", "newSingleThreadExecutor", "(", ")", ";", "final", "TestInterfaceAsync", "api", "=", "AsyncFeign", ".", "<", "Void", ">", "asyncBuilder", "(", ")", ".", "client", "(", "new", "AsyncClient", ".", "Default", "<", ">", "(", "(", "request", ",", "options", ")", "-", ">", "response", ",", "execs", ")", ")", ".", "target", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertEquals", "(", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ",", "unwrap", "(", "api", ".", "response", "(", ")", ")", ".", "headers", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "execs", ".", "shutdown", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "okIfDecodeRootCauseHasNoMessage", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "DecodeException", ".", "class", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "unwrap", "(", "api", ".", "post", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodingExceptionGetWrappedInDecode404Mode", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "thrown", ".", "expect", "(", "DecodeException", ".", "class", ")", ";", "thrown", ".", "expectCause", "(", "isA", "(", "NoSuchElementException", ".", "class", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "decode404", "(", ")", ".", "decoder", "(", "(", "response", ",", "type", ")", "-", ">", "{", "assertEquals", "(", "<NUM_LIT>", ",", "response", ".", "status", "(", ")", ")", ";", "throw", "new", "NoSuchElementException", "(", ")", ";", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "unwrap", "(", "api", ".", "post", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodingDoesNotSwallow404ErrorsInDecode404Mode", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "thrown", ".", "expect", "(", "IllegalArgumentException", ".", "class", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "decode404", "(", ")", ".", "errorDecoder", "(", "new", "IllegalArgumentExceptionOn404", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "Void", ">", "cf", "=", "api", ".", "queryMap", "(", "Collections", ".", "<", "String", ",", "Object", ">", "emptyMap", "(", ")", ")", ";", "server", ".", "takeRequest", "(", ")", ";", "unwrap", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "okIfEncodeRootCauseHasNoMessage", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "thrown", ".", "expect", "(", "EncodeException", ".", "class", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "encoder", "(", "(", "object", ",", "bodyType", ",", "template", ")", "-", ">", "{", "throw", "new", "RuntimeException", "(", ")", ";", "}", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "unwrap", "(", "api", ".", "body", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "equalsHashCodeAndToStringWork", "(", ")", "{", "final", "Target", "<", "TestInterfaceAsync", ">", "t1", "=", "new", "HardCodedTarget", "<", "TestInterfaceAsync", ">", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Target", "<", "TestInterfaceAsync", ">", "t2", "=", "new", "HardCodedTarget", "<", "TestInterfaceAsync", ">", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Target", "<", "OtherTestInterfaceAsync", ">", "t3", "=", "new", "HardCodedTarget", "<", "OtherTestInterfaceAsync", ">", "(", "OtherTestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "TestInterfaceAsync", "i1", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "t1", ")", ";", "final", "TestInterfaceAsync", "i2", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "t1", ")", ";", "final", "TestInterfaceAsync", "i3", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "t2", ")", ";", "final", "OtherTestInterfaceAsync", "i4", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "t3", ")", ";", "assertThat", "(", "i1", ")", ".", "isEqualTo", "(", "i2", ")", ".", "isNotEqualTo", "(", "i3", ")", ".", "isNotEqualTo", "(", "i4", ")", ";", "assertThat", "(", "i1", ".", "hashCode", "(", ")", ")", ".", "isEqualTo", "(", "i2", ".", "hashCode", "(", ")", ")", ".", "isNotEqualTo", "(", "i3", ".", "hashCode", "(", ")", ")", ".", "isNotEqualTo", "(", "i4", ".", "hashCode", "(", ")", ")", ";", "assertThat", "(", "i1", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "i2", ".", "toString", "(", ")", ")", ".", "isNotEqualTo", "(", "i3", ".", "toString", "(", ")", ")", ".", "isNotEqualTo", "(", "i4", ".", "toString", "(", ")", ")", ";", "assertThat", "(", "t1", ")", ".", "isNotEqualTo", "(", "i1", ")", ";", "assertThat", "(", "t1", ".", "hashCode", "(", ")", ")", ".", "isEqualTo", "(", "i1", ".", "hashCode", "(", ")", ")", ";", "assertThat", "(", "t1", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "i1", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Test", "public", "void", "decodeLogicSupportsByteArray", "(", ")", "throws", "Throwable", "{", "final", "byte", "[", "]", "expectedResponse", "=", "{", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", "}", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "new", "Buffer", "(", ")", ".", "write", "(", "expectedResponse", ")", ")", ")", ";", "final", "OtherTestInterfaceAsync", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "OtherTestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertThat", "(", "unwrap", "(", "api", ".", "binaryResponseBody", "(", ")", ")", ")", ".", "containsExactly", "(", "expectedResponse", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodeLogicSupportsByteArray", "(", ")", "throws", "Exception", "{", "final", "byte", "[", "]", "expectedRequest", "=", "{", "<NUM_LIT:12>", ",", "<NUM_LIT>", ",", "<NUM_LIT>", "}", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "OtherTestInterfaceAsync", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "target", "(", "OtherTestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "binaryRequestBody", "(", "expectedRequest", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasBody", "(", "expectedRequest", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodedQueryParam", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "encodedQueryParam", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "private", "void", "checkCFCompletedSoon", "(", "CompletableFuture", "<", "?", ">", "cf", ")", "{", "try", "{", "unwrap", "(", "cf", ")", ";", "}", "catch", "(", "final", "RuntimeException", "e", ")", "{", "throw", "e", ";", "}", "catch", "(", "final", "Throwable", "t", ")", "{", "throw", "new", "RuntimeException", "(", "t", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "responseMapperIsAppliedBeforeDelegate", "(", ")", "throws", "IOException", "{", "final", "ResponseMappingDecoder", "decoder", "=", "new", "ResponseMappingDecoder", "(", "upperCaseResponseMapper", "(", ")", ",", "new", "StringDecoder", "(", ")", ")", ";", "final", "String", "output", "=", "(", "String", ")", "decoder", ".", "decode", "(", "responseWithText", "(", "\"", "<STR_LIT>", "\"", ")", ",", "String", ".", "class", ")", ";", "assertThat", "(", "output", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "private", "ResponseMapper", "upperCaseResponseMapper", "(", ")", "{", "return", "new", "ResponseMapper", "(", ")", "{", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Response", "map", "(", "Response", "response", ",", "Type", "type", ")", "{", "try", "{", "return", "response", ".", "toBuilder", "(", ")", ".", "body", "(", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", ")", ")", ".", "toUpperCase", "(", ")", ".", "getBytes", "(", ")", ")", ".", "build", "(", ")", ";", "}", "catch", "(", "final", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "}", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Response", "map", "(", "Response", "response", ",", "Type", "type", ")", "{", "try", "{", "return", "response", ".", "toBuilder", "(", ")", ".", "body", "(", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", ")", ")", ".", "toUpperCase", "(", ")", ".", "getBytes", "(", ")", ")", ".", "build", "(", ")", ";", "}", "catch", "(", "final", "IOException", "e", ")", "{", "throw", "new", "RuntimeException", "(", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "private", "Response", "responseWithText", "(", "String", "text", ")", "{", "return", "Response", ".", "builder", "(", ")", ".", "body", "(", "text", ",", "Util", ".", "UTF_8", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "new", "HashMap", "<", ">", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "mapAndDecodeExecutesMapFunction", "(", ")", "throws", "Throwable", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:!>", "\"", ")", ")", ";", "final", "TestInterfaceAsync", "api", "=", "AsyncFeign", ".", "asyncBuilder", "(", ")", ".", "mapAndDecode", "(", "upperCaseResponseMapper", "(", ")", ",", "new", "StringDecoder", "(", ")", ")", ".", "target", "(", "TestInterfaceAsync", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "unwrap", "(", "api", ".", "post", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithPrivateGetterIgnored", "(", ")", "throws", "Exception", "{", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "propertyPojo", ".", "setPrivateGetterProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "propertyPojo", ".", "setName", "(", "\"", "<STR_LIT:Name>", "\"", ")", ";", "propertyPojo", ".", "setNumber", "(", "1", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryMap_with_child_pojo", "(", ")", "throws", "Exception", "{", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "FieldQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "ChildPojo", "childPojo", "=", "new", "ChildPojo", "(", ")", ";", "childPojo", ".", "setChildPrivateProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "childPojo", ".", "setParentProtectedProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "childPojo", ".", "setParentPublicProperty", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPropertyInheritence", "(", "childPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithNullValueIgnored", "(", ")", "throws", "Exception", "{", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "propertyPojo", ".", "setName", "(", "null", ")", ";", "propertyPojo", ".", "setNumber", "(", "1", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "beanQueryMapEncoderWithEmptyParams", "(", ")", "throws", "Exception", "{", "final", "TestInterfaceAsync", "api", "=", "new", "TestInterfaceAsyncBuilder", "(", ")", ".", "queryMapEndcoder", "(", "new", "BeanQueryMapEncoder", "(", ")", ")", ".", "target", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "PropertyPojo", ".", "ChildPojoClass", "propertyPojo", "=", "new", "PropertyPojo", ".", "ChildPojoClass", "(", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "CompletableFuture", "<", "?", ">", "cf", "=", "api", ".", "queryMapPropertyPojo", "(", "propertyPojo", ")", ";", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasQueryParams", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "checkCFCompletedSoon", "(", "cf", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Response", ">", "response", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "String", ">", "post", "(", ")", "throws", "TestInterfaceException", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Body", "(", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "login", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "user", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "password", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "body", "(", "List", "<", "String", ">", "contents", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "String", ">", "body", "(", "String", "content", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "String", ">", "noContent", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "gzipBody", "(", "List", "<", "String", ">", "contents", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "deflateBody", "(", "List", "<", "String", ">", "contents", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "form", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "user", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "password", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Response", ">", "uriParam", "(", "@", "Param", "(", "\"", "<STR_LIT:1>", "\"", ")", "String", "one", ",", "URI", "endpoint", ",", "@", "Param", "(", "\"", "<STR_LIT:2>", "\"", ")", "String", "two", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Response", ">", "queryParams", "(", "@", "Param", "(", "\"", "<STR_LIT:1>", "\"", ")", "String", "one", ",", "@", "Param", "(", "\"", "<STR_LIT:2>", "\"", ")", "Iterable", "<", "String", ">", "twos", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "expand", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "expander", "=", "DateToMillis", ".", "class", ")", "Date", "date", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "expandList", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "expander", "=", "DateToMillis", ".", "class", ")", "List", "<", "Date", ">", "dates", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "expandArray", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "expander", "=", "DateToMillis", ".", "class", ")", "Date", "[", "]", "dates", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "headerMap", "(", "@", "HeaderMap", "Map", "<", "String", ",", "Object", ">", "headerMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "headerMapWithHeaderAnnotations", "(", "@", "HeaderMap", "Map", "<", "String", ",", "Object", ">", "headerMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "queryMap", "(", "@", "QueryMap", "Map", "<", "String", ",", "Object", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "queryMapEncoded", "(", "@", "QueryMap", "(", "encoded", "=", "true", ")", "Map", "<", "String", ",", "Object", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "queryMapWithQueryParams", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "name", ",", "@", "QueryMap", "Map", "<", "String", ",", "Object", ">", "queryMap", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "encodedQueryParam", "(", "@", "Param", "(", "value", "=", "\"", "<STR_LIT>", "\"", ",", "encoded", "=", "true", ")", "String", "trim", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "queryMapPojo", "(", "@", "QueryMap", "CustomPojo", "object", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "queryMapPropertyPojo", "(", "@", "QueryMap", "PropertyPojo", "object", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "queryMapPropertyInheritence", "(", "@", "QueryMap", "ChildPojo", "object", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "String", "expand", "(", "Object", "value", ")", "{", "return", "String", ".", "valueOf", "(", "(", "(", "Date", ")", "value", ")", ".", "getTime", "(", ")", ")", ";", "}", "</s>"]
["<s>", "TestInterfaceException", "(", "String", "message", ")", "{", "super", "(", "message", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "String", ">", "post", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "byte", "[", "]", ">", "binaryResponseBody", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "Void", ">", "binaryRequestBody", "(", "byte", "[", "]", "contents", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "RequestTemplate", "template", ")", "{", "template", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "apply", "(", "RequestTemplate", "template", ")", "{", "template", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "if", "(", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", ")", "{", "return", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "super", ".", "decode", "(", "methodKey", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "if", "(", "response", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", ")", "{", "return", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "return", "super", ".", "decode", "(", "methodKey", ",", "response", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "if", "(", "object", "instanceof", "Map", ")", "{", "template", ".", "body", "(", "new", "Gson", "(", ")", ".", "toJson", "(", "object", ")", ")", ";", "}", "else", "{", "template", ".", "body", "(", "object", ".", "toString", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "TestInterfaceAsyncBuilder", "requestInterceptor", "(", "RequestInterceptor", "requestInterceptor", ")", "{", "delegate", ".", "requestInterceptor", "(", "requestInterceptor", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceAsyncBuilder", "encoder", "(", "Encoder", "encoder", ")", "{", "delegate", ".", "encoder", "(", "encoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceAsyncBuilder", "decoder", "(", "Decoder", "decoder", ")", "{", "delegate", ".", "decoder", "(", "decoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceAsyncBuilder", "errorDecoder", "(", "ErrorDecoder", "errorDecoder", ")", "{", "delegate", ".", "errorDecoder", "(", "errorDecoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceAsyncBuilder", "decode404", "(", ")", "{", "delegate", ".", "decode404", "(", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceAsyncBuilder", "queryMapEndcoder", "(", "QueryMapEncoder", "queryMapEncoder", ")", "{", "delegate", ".", "queryMapEncoder", "(", "queryMapEncoder", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "TestInterfaceAsync", "target", "(", "String", "url", ")", "{", "return", "delegate", ".", "target", "(", "TestInterfaceAsync", ".", "class", ",", "url", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "abstract", "CompletableFuture", "<", "Void", ">", "x", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "x", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "ExtendedCF", "<", "Void", ">", "x", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "?", "extends", "Object", ">", "x", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "?", "super", "Object", ">", "x", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "?", ">", "x", "(", ")", ";", "</s>"]
["<s>", "CustomPojo", "(", "String", "name", ",", "Integer", "number", ")", "{", "this", ".", "name", "=", "name", ";", "this", ".", "number", "=", "number", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "newBuilder", "(", ")", "{", "return", "Feign", ".", "builder", "(", ")", ".", "client", "(", "new", "ApacheHttp5Client", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryParamsAreRespectedWhenBodyIsEmpty", "(", ")", "throws", "InterruptedException", "{", "final", "HttpClient", "httpClient", "=", "HttpClientBuilder", ".", "create", "(", ")", ".", "build", "(", ")", ";", "final", "JaxRsTestInterface", "testInterface", "=", "Feign", ".", "builder", "(", ")", ".", "contract", "(", "new", "JAXRSContract", "(", ")", ")", ".", "client", "(", "new", "ApacheHttp5Client", "(", "httpClient", ")", ")", ".", "target", "(", "JaxRsTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "testInterface", ".", "withBody", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "RecordedRequest", "request1", "=", "server", ".", "takeRequest", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "request1", ".", "getPath", "(", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "request1", ".", "getBody", "(", ")", ".", "readString", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "testInterface", ".", "withoutBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "RecordedRequest", "request2", "=", "server", ".", "takeRequest", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "request2", ".", "getPath", "(", ")", ")", ";", "assertEquals", "(", "\"", "\"", ",", "request2", ".", "getBody", "(", ")", ".", "readString", "(", "StandardCharsets", ".", "UTF_8", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "testVeryLongResponseNullLength", "(", ")", "{", "assumeTrue", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "testContentTypeDefaultsToRequestCharset", "(", ")", "throws", "Exception", "{", "assumeTrue", "(", "\"", "<STR_LIT>", "\"", ",", "false", ")", ";", "}", "</s>"]
["<s>", "@", "PUT", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "String", "withBody", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "foo", ",", "String", "bar", ")", ";", "</s>"]
["<s>", "@", "PUT", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "String", "withoutBody", "(", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "foo", ")", ";", "</s>"]
["<s>", "public", "AsyncApacheHttp5Client", "(", ")", "{", "this", "(", "createStartedClient", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "static", "CloseableHttpAsyncClient", "createStartedClient", "(", ")", "{", "final", "CloseableHttpAsyncClient", "client", "=", "HttpAsyncClients", ".", "custom", "(", ")", ".", "build", "(", ")", ";", "client", ".", "start", "(", ")", ";", "return", "client", ";", "}", "</s>"]
["<s>", "public", "AsyncApacheHttp5Client", "(", "CloseableHttpAsyncClient", "client", ")", "{", "this", ".", "client", "=", "client", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "CompletableFuture", "<", "Response", ">", "execute", "(", "Request", "request", ",", "Options", "options", ",", "Optional", "<", "HttpClientContext", ">", "requestContext", ")", "{", "final", "SimpleHttpRequest", "httpUriRequest", "=", "toClassicHttpRequest", "(", "request", ",", "options", ")", ";", "final", "CompletableFuture", "<", "Response", ">", "result", "=", "new", "CompletableFuture", "<", ">", "(", ")", ";", "final", "FutureCallback", "<", "SimpleHttpResponse", ">", "callback", "=", "new", "FutureCallback", "<", "SimpleHttpResponse", ">", "(", ")", "{", "@", "Override", "public", "void", "completed", "(", "SimpleHttpResponse", "httpResponse", ")", "{", "result", ".", "complete", "(", "toFeignResponse", "(", "httpResponse", ",", "request", ")", ")", ";", "}", "@", "Override", "public", "void", "failed", "(", "Exception", "ex", ")", "{", "result", ".", "completeExceptionally", "(", "ex", ")", ";", "}", "@", "Override", "public", "void", "cancelled", "(", ")", "{", "result", ".", "cancel", "(", "false", ")", ";", "}", "}", ";", "client", ".", "execute", "(", "httpUriRequest", ",", "configureTimeouts", "(", "options", ",", "requestContext", ".", "orElseGet", "(", "HttpClientContext", ":", ":", "new", ")", ")", ",", "callback", ")", ";", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "completed", "(", "SimpleHttpResponse", "httpResponse", ")", "{", "result", ".", "complete", "(", "toFeignResponse", "(", "httpResponse", ",", "request", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "failed", "(", "Exception", "ex", ")", "{", "result", ".", "completeExceptionally", "(", "ex", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "cancelled", "(", ")", "{", "result", ".", "cancel", "(", "false", ")", ";", "}", "</s>"]
["<s>", "protected", "HttpClientContext", "configureTimeouts", "(", "Request", ".", "Options", "options", ",", "HttpClientContext", "context", ")", "{", "final", "RequestConfig", "requestConfig", "=", "(", "client", "instanceof", "Configurable", "?", "RequestConfig", ".", "copy", "(", "(", "(", "Configurable", ")", "client", ")", ".", "getConfig", "(", ")", ")", ":", "RequestConfig", ".", "custom", "(", ")", ")", ".", "setConnectTimeout", "(", "options", ".", "connectTimeout", "(", ")", ",", "options", ".", "connectTimeoutUnit", "(", ")", ")", ".", "setResponseTimeout", "(", "options", ".", "readTimeout", "(", ")", ",", "options", ".", "readTimeoutUnit", "(", ")", ")", ".", "build", "(", ")", ";", "context", ".", "setRequestConfig", "(", "requestConfig", ")", ";", "return", "context", ";", "}", "</s>"]
["<s>", "SimpleHttpRequest", "toClassicHttpRequest", "(", "Request", "request", ",", "Request", ".", "Options", "options", ")", "{", "final", "SimpleHttpRequest", "httpRequest", "=", "new", "SimpleHttpRequest", "(", "request", ".", "httpMethod", "(", ")", ".", "name", "(", ")", ",", "request", ".", "url", "(", ")", ")", ";", "boolean", "hasAcceptHeader", "=", "false", ";", "for", "(", "final", "Map", ".", "Entry", "<", "String", ",", "Collection", "<", "String", ">", ">", "headerEntry", ":", "request", ".", "headers", "(", ")", ".", "entrySet", "(", ")", ")", "{", "final", "String", "headerName", "=", "headerEntry", ".", "getKey", "(", ")", ";", "if", "(", "headerName", ".", "equalsIgnoreCase", "(", "ACCEPT_HEADER_NAME", ")", ")", "{", "hasAcceptHeader", "=", "true", ";", "}", "if", "(", "headerName", ".", "equalsIgnoreCase", "(", "Util", ".", "CONTENT_LENGTH", ")", ")", "{", "continue", ";", "}", "for", "(", "final", "String", "headerValue", ":", "headerEntry", ".", "getValue", "(", ")", ")", "{", "httpRequest", ".", "addHeader", "(", "headerName", ",", "headerValue", ")", ";", "}", "}", "if", "(", "!", "hasAcceptHeader", ")", "{", "httpRequest", ".", "addHeader", "(", "ACCEPT_HEADER_NAME", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "final", "byte", "[", "]", "data", "=", "request", ".", "body", "(", ")", ";", "if", "(", "data", "!", "=", "null", ")", "{", "httpRequest", ".", "setBodyBytes", "(", "data", ",", "getContentType", "(", "request", ")", ")", ";", "}", "return", "httpRequest", ";", "}", "</s>"]
["<s>", "private", "ContentType", "getContentType", "(", "Request", "request", ")", "{", "ContentType", "contentType", "=", "null", ";", "for", "(", "final", "Map", ".", "Entry", "<", "String", ",", "Collection", "<", "String", ">", ">", "entry", ":", "request", ".", "headers", "(", ")", ".", "entrySet", "(", ")", ")", "{", "if", "(", "entry", ".", "getKey", "(", ")", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT:Content-Type>", "\"", ")", ")", "{", "final", "Collection", "<", "String", ">", "values", "=", "entry", ".", "getValue", "(", ")", ";", "if", "(", "values", "!", "=", "null", "&", "&", "!", "values", ".", "isEmpty", "(", ")", ")", "{", "contentType", "=", "ContentType", ".", "parse", "(", "values", ".", "iterator", "(", ")", ".", "next", "(", ")", ")", ";", "if", "(", "contentType", ".", "getCharset", "(", ")", "=", "=", "null", ")", "{", "contentType", "=", "contentType", ".", "withCharset", "(", "request", ".", "charset", "(", ")", ")", ";", "}", "break", ";", "}", "}", "}", "return", "contentType", ";", "}", "</s>"]
["<s>", "Response", "toFeignResponse", "(", "SimpleHttpResponse", "httpResponse", ",", "Request", "request", ")", "{", "final", "int", "statusCode", "=", "httpResponse", ".", "getCode", "(", ")", ";", "final", "String", "reason", "=", "httpResponse", ".", "getReasonPhrase", "(", ")", ";", "final", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "new", "HashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", ")", ";", "for", "(", "final", "Header", "header", ":", "httpResponse", ".", "getHeaders", "(", ")", ")", "{", "final", "String", "name", "=", "header", ".", "getName", "(", ")", ";", "final", "String", "value", "=", "header", ".", "getValue", "(", ")", ";", "Collection", "<", "String", ">", "headerValues", "=", "headers", ".", "get", "(", "name", ")", ";", "if", "(", "headerValues", "=", "=", "null", ")", "{", "headerValues", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "headers", ".", "put", "(", "name", ",", "headerValues", ")", ";", "}", "headerValues", ".", "add", "(", "value", ")", ";", "}", "return", "Response", ".", "builder", "(", ")", ".", "status", "(", "statusCode", ")", ".", "reason", "(", "reason", ")", ".", "headers", "(", "headers", ")", ".", "request", "(", "request", ")", ".", "body", "(", "httpResponse", ".", "getBodyBytes", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "Exception", "{", "client", ".", "close", "(", "CloseMode", ".", "GRACEFUL", ")", ";", "}", "</s>"]
["<s>", "public", "ApacheHttp5Client", "(", ")", "{", "this", "(", "HttpClientBuilder", ".", "create", "(", ")", ".", "build", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "ApacheHttp5Client", "(", "HttpClient", "client", ")", "{", "this", ".", "client", "=", "client", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "execute", "(", "Request", "request", ",", "Request", ".", "Options", "options", ")", "throws", "IOException", "{", "ClassicHttpRequest", "httpUriRequest", ";", "try", "{", "httpUriRequest", "=", "toClassicHttpRequest", "(", "request", ",", "options", ")", ";", "}", "catch", "(", "final", "URISyntaxException", "e", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", "+", "request", ".", "url", "(", ")", "+", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "final", "HttpHost", "target", "=", "HttpHost", ".", "create", "(", "URI", ".", "create", "(", "request", ".", "url", "(", ")", ")", ")", ";", "final", "HttpClientContext", "context", "=", "configureTimeouts", "(", "options", ")", ";", "final", "ClassicHttpResponse", "httpResponse", "=", "(", "ClassicHttpResponse", ")", "client", ".", "execute", "(", "target", ",", "httpUriRequest", ",", "context", ")", ";", "return", "toFeignResponse", "(", "httpResponse", ",", "request", ")", ";", "}", "</s>"]
["<s>", "protected", "HttpClientContext", "configureTimeouts", "(", "Request", ".", "Options", "options", ")", "{", "final", "HttpClientContext", "context", "=", "new", "HttpClientContext", "(", ")", ";", "final", "RequestConfig", "requestConfig", "=", "(", "client", "instanceof", "Configurable", "?", "RequestConfig", ".", "copy", "(", "(", "(", "Configurable", ")", "client", ")", ".", "getConfig", "(", ")", ")", ":", "RequestConfig", ".", "custom", "(", ")", ")", ".", "setConnectTimeout", "(", "options", ".", "connectTimeout", "(", ")", ",", "options", ".", "connectTimeoutUnit", "(", ")", ")", ".", "setResponseTimeout", "(", "options", ".", "readTimeout", "(", ")", ",", "options", ".", "readTimeoutUnit", "(", ")", ")", ".", "build", "(", ")", ";", "context", ".", "setRequestConfig", "(", "requestConfig", ")", ";", "return", "context", ";", "}", "</s>"]
["<s>", "ClassicHttpRequest", "toClassicHttpRequest", "(", "Request", "request", ",", "Request", ".", "Options", "options", ")", "throws", "URISyntaxException", "{", "final", "ClassicRequestBuilder", "requestBuilder", "=", "ClassicRequestBuilder", ".", "create", "(", "request", ".", "httpMethod", "(", ")", ".", "name", "(", ")", ")", ";", "final", "URI", "uri", "=", "new", "URIBuilder", "(", "request", ".", "url", "(", ")", ")", ".", "build", "(", ")", ";", "requestBuilder", ".", "setUri", "(", "uri", ".", "getScheme", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "uri", ".", "getAuthority", "(", ")", "+", "uri", ".", "getRawPath", "(", ")", ")", ";", "final", "List", "<", "NameValuePair", ">", "queryParams", "=", "URLEncodedUtils", ".", "parse", "(", "uri", ",", "requestBuilder", ".", "getCharset", "(", ")", ")", ";", "for", "(", "final", "NameValuePair", "queryParam", ":", "queryParams", ")", "{", "requestBuilder", ".", "addParameter", "(", "queryParam", ")", ";", "}", "boolean", "hasAcceptHeader", "=", "false", ";", "for", "(", "final", "Map", ".", "Entry", "<", "String", ",", "Collection", "<", "String", ">", ">", "headerEntry", ":", "request", ".", "headers", "(", ")", ".", "entrySet", "(", ")", ")", "{", "final", "String", "headerName", "=", "headerEntry", ".", "getKey", "(", ")", ";", "if", "(", "headerName", ".", "equalsIgnoreCase", "(", "ACCEPT_HEADER_NAME", ")", ")", "{", "hasAcceptHeader", "=", "true", ";", "}", "if", "(", "headerName", ".", "equalsIgnoreCase", "(", "Util", ".", "CONTENT_LENGTH", ")", ")", "{", "continue", ";", "}", "for", "(", "final", "String", "headerValue", ":", "headerEntry", ".", "getValue", "(", ")", ")", "{", "requestBuilder", ".", "addHeader", "(", "headerName", ",", "headerValue", ")", ";", "}", "}", "if", "(", "!", "hasAcceptHeader", ")", "{", "requestBuilder", ".", "addHeader", "(", "ACCEPT_HEADER_NAME", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "byte", "[", "]", "data", "=", "request", ".", "body", "(", ")", ";", "if", "(", "data", "!", "=", "null", ")", "{", "HttpEntity", "entity", ";", "if", "(", "request", ".", "isBinary", "(", ")", ")", "{", "entity", "=", "new", "ByteArrayEntity", "(", "data", ",", "null", ")", ";", "}", "else", "{", "final", "ContentType", "contentType", "=", "getContentType", "(", "request", ")", ";", "entity", "=", "new", "StringEntity", "(", "new", "String", "(", "data", ")", ",", "contentType", ")", ";", "}", "requestBuilder", ".", "setEntity", "(", "entity", ")", ";", "}", "else", "{", "requestBuilder", ".", "setEntity", "(", "new", "ByteArrayEntity", "(", "new", "byte", "[", "0", "]", ",", "null", ")", ")", ";", "}", "return", "requestBuilder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "ContentType", "getContentType", "(", "Request", "request", ")", "{", "ContentType", "contentType", "=", "null", ";", "for", "(", "final", "Map", ".", "Entry", "<", "String", ",", "Collection", "<", "String", ">", ">", "entry", ":", "request", ".", "headers", "(", ")", ".", "entrySet", "(", ")", ")", "{", "if", "(", "entry", ".", "getKey", "(", ")", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT:Content-Type>", "\"", ")", ")", "{", "final", "Collection", "<", "String", ">", "values", "=", "entry", ".", "getValue", "(", ")", ";", "if", "(", "values", "!", "=", "null", "&", "&", "!", "values", ".", "isEmpty", "(", ")", ")", "{", "contentType", "=", "ContentType", ".", "parse", "(", "values", ".", "iterator", "(", ")", ".", "next", "(", ")", ")", ";", "if", "(", "contentType", ".", "getCharset", "(", ")", "=", "=", "null", ")", "{", "contentType", "=", "contentType", ".", "withCharset", "(", "request", ".", "charset", "(", ")", ")", ";", "}", "break", ";", "}", "}", "}", "return", "contentType", ";", "}", "</s>"]
["<s>", "Response", "toFeignResponse", "(", "ClassicHttpResponse", "httpResponse", ",", "Request", "request", ")", "throws", "IOException", "{", "final", "int", "statusCode", "=", "httpResponse", ".", "getCode", "(", ")", ";", "final", "String", "reason", "=", "httpResponse", ".", "getReasonPhrase", "(", ")", ";", "final", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", "=", "new", "HashMap", "<", "String", ",", "Collection", "<", "String", ">", ">", "(", ")", ";", "for", "(", "final", "Header", "header", ":", "httpResponse", ".", "getHeaders", "(", ")", ")", "{", "final", "String", "name", "=", "header", ".", "getName", "(", ")", ";", "final", "String", "value", "=", "header", ".", "getValue", "(", ")", ";", "Collection", "<", "String", ">", "headerValues", "=", "headers", ".", "get", "(", "name", ")", ";", "if", "(", "headerValues", "=", "=", "null", ")", "{", "headerValues", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "headers", ".", "put", "(", "name", ",", "headerValues", ")", ";", "}", "headerValues", ".", "add", "(", "value", ")", ";", "}", "return", "Response", ".", "builder", "(", ")", ".", "status", "(", "statusCode", ")", ".", "reason", "(", "reason", ")", ".", "headers", "(", "headers", ")", ".", "request", "(", "request", ")", ".", "body", "(", "toFeignBody", "(", "httpResponse", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "Response", ".", "Body", "toFeignBody", "(", "ClassicHttpResponse", "httpResponse", ")", "{", "final", "HttpEntity", "entity", "=", "httpResponse", ".", "getEntity", "(", ")", ";", "if", "(", "entity", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "new", "Response", ".", "Body", "(", ")", "{", "@", "Override", "public", "Integer", "length", "(", ")", "{", "return", "entity", ".", "getContentLength", "(", ")", ">", "=", "0", "&", "&", "entity", ".", "getContentLength", "(", ")", "<", "=", "Integer", ".", "MAX_VALUE", "?", "(", "int", ")", "entity", ".", "getContentLength", "(", ")", ":", "null", ";", "}", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "entity", ".", "isRepeatable", "(", ")", ";", "}", "@", "Override", "public", "InputStream", "asInputStream", "(", ")", "throws", "IOException", "{", "return", "entity", ".", "getContent", "(", ")", ";", "}", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Reader", "asReader", "(", ")", "throws", "IOException", "{", "return", "new", "InputStreamReader", "(", "asInputStream", "(", ")", ",", "UTF_8", ")", ";", "}", "@", "Override", "public", "Reader", "asReader", "(", "Charset", "charset", ")", "throws", "IOException", "{", "Util", ".", "checkNotNull", "(", "charset", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "new", "InputStreamReader", "(", "asInputStream", "(", ")", ",", "charset", ")", ";", "}", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "EntityUtils", ".", "consume", "(", "entity", ")", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Integer", "length", "(", ")", "{", "return", "entity", ".", "getContentLength", "(", ")", ">", "=", "0", "&", "&", "entity", ".", "getContentLength", "(", ")", "<", "=", "Integer", ".", "MAX_VALUE", "?", "(", "int", ")", "entity", ".", "getContentLength", "(", ")", ":", "null", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "entity", ".", "isRepeatable", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "asInputStream", "(", ")", "throws", "IOException", "{", "return", "entity", ".", "getContent", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Reader", "asReader", "(", ")", "throws", "IOException", "{", "return", "new", "InputStreamReader", "(", "asInputStream", "(", ")", ",", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Reader", "asReader", "(", "Charset", "charset", ")", "throws", "IOException", "{", "Util", ".", "checkNotNull", "(", "charset", ",", "\"", "<STR_LIT>", "\"", ")", ";", "return", "new", "InputStreamReader", "(", "asInputStream", "(", ")", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "EntityUtils", ".", "consume", "(", "entity", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "JAXRSContract", "createContract", "(", ")", "{", "return", "new", "JAXRS2Contract", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "injectJaxrsInternals", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "methodMetadata", "=", "parseAndValidateMetadata", "(", "JaxrsInternals", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "AsyncResponse", ".", "class", ",", "UriInfo", ".", "class", ")", ";", "assertThat", "(", "methodMetadata", ".", "template", "(", ")", ")", ".", "noRequestBody", "(", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "void", "inject", "(", "@", "Suspended", "AsyncResponse", "ar", ",", "@", "Context", "UriInfo", "info", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "Builder", "newBuilder", "(", ")", "{", "return", "Feign", ".", "builder", "(", ")", ".", "client", "(", "new", "JAXRSClient", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "testPatch", "(", ")", "throws", "Exception", "{", "try", "{", "super", ".", "testPatch", "(", ")", ";", "}", "catch", "(", "final", "ProcessingException", "e", ")", "{", "Assume", ".", "assumeNoException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "noResponseBodyForPut", "(", ")", "{", "try", "{", "super", ".", "noResponseBodyForPut", "(", ")", ";", "}", "catch", "(", "final", "IllegalStateException", "e", ")", "{", "Assume", ".", "assumeNoException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "noResponseBodyForPatch", "(", ")", "{", "try", "{", "super", ".", "noResponseBodyForPatch", "(", ")", ";", "}", "catch", "(", "final", "IllegalStateException", "e", ")", "{", "Assume", ".", "assumeNoException", "(", "\"", "<STR_LIT>", "\"", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "reasonPhraseIsOptional", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setStatus", "(", "\"", "<STR_LIT>", "\"", "+", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "Response", "response", "=", "api", ".", "post", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsesRequestAndResponse", "(", ")", "throws", "IOException", ",", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ".", "addHeader", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "Response", "response", "=", "api", ".", "post", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "response", ".", "status", "(", ")", ")", ".", "isEqualTo", "(", "<NUM_LIT>", ")", ";", "assertThat", "(", "response", ".", "reason", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT:OK>", "\"", ")", ";", "assertThat", "(", "response", ".", "headers", "(", ")", ")", ".", "containsEntry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT:3>", "\"", ")", ")", ".", "containsEntry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "response", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ")", ".", "hasSameContentAs", "(", "new", "ByteArrayInputStream", "(", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "UTF_8", ")", ")", ")", ";", "MockWebServerAssertions", ".", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:POST>", "\"", ")", ".", "hasPath", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasBody", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testContentTypeWithoutCharset2", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "JaxRSClientTestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "JaxRSClientTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "Response", "response", "=", "api", ".", "getWithContentType", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "UTF_8", ")", ")", ")", ";", "MockWebServerAssertions", ".", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "MapEntry", ".", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "MapEntry", ".", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "Response", "getWithContentType", "(", ")", ";", "</s>"]
["<s>", "public", "JAXRSClient", "(", ")", "{", "this", "(", "ClientBuilder", ".", "newBuilder", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "JAXRSClient", "(", "ClientBuilder", "clientBuilder", ")", "{", "this", ".", "clientBuilder", "=", "clientBuilder", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "feign", ".", "Response", "execute", "(", "feign", ".", "Request", "request", ",", "Options", "options", ")", "throws", "IOException", "{", "final", "Response", "response", "=", "clientBuilder", ".", "connectTimeout", "(", "options", ".", "connectTimeoutMillis", "(", ")", ",", "TimeUnit", ".", "MILLISECONDS", ")", ".", "readTimeout", "(", "options", ".", "readTimeoutMillis", "(", ")", ",", "TimeUnit", ".", "MILLISECONDS", ")", ".", "build", "(", ")", ".", "target", "(", "request", ".", "url", "(", ")", ")", ".", "request", "(", ")", ".", "headers", "(", "toMultivaluedMap", "(", "request", ".", "headers", "(", ")", ")", ")", ".", "method", "(", "request", ".", "httpMethod", "(", ")", ".", "name", "(", ")", ",", "createRequestEntity", "(", "request", ")", ")", ";", "return", "feign", ".", "Response", ".", "builder", "(", ")", ".", "request", "(", "request", ")", ".", "body", "(", "response", ".", "readEntity", "(", "InputStream", ".", "class", ")", ",", "integerHeader", "(", "response", ",", "HttpHeaders", ".", "CONTENT_LENGTH", ")", ")", ".", "headers", "(", "toMap", "(", "response", ".", "getStringHeaders", "(", ")", ")", ")", ".", "status", "(", "response", ".", "getStatus", "(", ")", ")", ".", "reason", "(", "response", ".", "getStatusInfo", "(", ")", ".", "getReasonPhrase", "(", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "Entity", "<", "byte", "[", "]", ">", "createRequestEntity", "(", "feign", ".", "Request", "request", ")", "{", "if", "(", "request", ".", "body", "(", ")", "=", "=", "null", ")", "{", "return", "null", ";", "}", "return", "Entity", ".", "entity", "(", "request", ".", "body", "(", ")", ",", "new", "Variant", "(", "mediaType", "(", "request", ".", "headers", "(", ")", ")", ",", "locale", "(", "request", ".", "headers", "(", ")", ")", ",", "encoding", "(", "request", ".", "charset", "(", ")", ")", ")", ")", ";", "}", "</s>"]
["<s>", "private", "Integer", "integerHeader", "(", "Response", "response", ",", "String", "header", ")", "{", "final", "MultivaluedMap", "<", "String", ",", "String", ">", "headers", "=", "response", ".", "getStringHeaders", "(", ")", ";", "if", "(", "!", "headers", ".", "containsKey", "(", "header", ")", ")", "{", "return", "null", ";", "}", "try", "{", "return", "new", "Integer", "(", "headers", ".", "getFirst", "(", "header", ")", ")", ";", "}", "catch", "(", "final", "NumberFormatException", "e", ")", "{", "return", "null", ";", "}", "}", "</s>"]
["<s>", "private", "String", "encoding", "(", "Charset", "charset", ")", "{", "if", "(", "charset", "=", "=", "null", ")", "return", "null", ";", "return", "charset", ".", "name", "(", ")", ";", "}", "</s>"]
["<s>", "private", "String", "locale", "(", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ")", "{", "if", "(", "!", "headers", ".", "containsKey", "(", "HttpHeaders", ".", "CONTENT_LANGUAGE", ")", ")", "return", "null", ";", "return", "headers", ".", "get", "(", "HttpHeaders", ".", "CONTENT_LANGUAGE", ")", ".", "iterator", "(", ")", ".", "next", "(", ")", ";", "}", "</s>"]
["<s>", "private", "MediaType", "mediaType", "(", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ")", "{", "if", "(", "!", "headers", ".", "containsKey", "(", "HttpHeaders", ".", "CONTENT_TYPE", ")", ")", "return", "null", ";", "return", "MediaType", ".", "valueOf", "(", "headers", ".", "get", "(", "HttpHeaders", ".", "CONTENT_TYPE", ")", ".", "iterator", "(", ")", ".", "next", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "MultivaluedMap", "<", "String", ",", "Object", ">", "toMultivaluedMap", "(", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "headers", ")", "{", "final", "MultivaluedHashMap", "<", "String", ",", "Object", ">", "mvHeaders", "=", "new", "MultivaluedHashMap", "<", ">", "(", ")", ";", "headers", ".", "forEach", "(", "(", "key", ",", "value1", ")", "-", ">", "value1", ".", "forEach", "(", "value", "-", ">", "mvHeaders", ".", "add", "(", "key", ",", "value", ")", ")", ")", ";", "return", "mvHeaders", ";", "}", "</s>"]
["<s>", "private", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "toMap", "(", "MultivaluedMap", "<", "String", ",", "String", ">", "headers", ")", "{", "return", "headers", ".", "entrySet", "(", ")", ".", "stream", "(", ")", ".", "collect", "(", "Collectors", ".", "toMap", "(", "Entry", ":", ":", "getKey", ",", "Entry", ":", ":", "getValue", ")", ")", ";", "}", "</s>"]
["<s>", "public", "JAXRS2Contract", "(", ")", "{", "super", ".", "registerParameterAnnotation", "(", "Suspended", ".", "class", ",", "(", "ann", ",", "data", ",", "i", ")", "-", ">", "data", ".", "ignoreParamater", "(", "i", ")", ")", ";", "super", ".", "registerParameterAnnotation", "(", "Context", ".", "class", ",", "(", "ann", ",", "data", ",", "i", ")", "-", ">", "data", ".", "ignoreParamater", "(", "i", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "invoke", "(", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "customSetter", "(", ")", "{", "thrown", ".", "expect", "(", "HystrixRuntimeException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "SetterFactory", "commandKeyIsRequestLine", "=", "(", "target", ",", "method", ")", "-", ">", "{", "String", "groupKey", "=", "target", ".", "name", "(", ")", ";", "String", "commandKey", "=", "method", ".", "getAnnotation", "(", "RequestLine", ".", "class", ")", ".", "value", "(", ")", ";", "return", "HystrixCommand", ".", "Setter", ".", "withGroupKey", "(", "HystrixCommandGroupKey", ".", "Factory", ".", "asKey", "(", "groupKey", ")", ")", ".", "andCommandKey", "(", "HystrixCommandKey", ".", "Factory", ".", "asKey", "(", "commandKey", ")", ")", ";", "}", ";", "TestInterface", "api", "=", "HystrixFeign", ".", "builder", "(", ")", ".", "setterFactory", "(", "commandKeyIsRequestLine", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "invoke", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultMethodReturningHystrixCommand", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "HystrixCommand", "<", "String", ">", "command", "=", "api", ".", "defaultMethodReturningCommand", "(", ")", ";", "assertThat", "(", "command", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "command", ".", "execute", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hystrixCommand", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "HystrixCommand", "<", "String", ">", "command", "=", "api", ".", "command", "(", ")", ";", "assertThat", "(", "command", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "command", ".", "execute", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hystrixCommandFallback", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "HystrixCommand", "<", "String", ">", "command", "=", "api", ".", "command", "(", ")", ";", "assertThat", "(", "command", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "command", ".", "execute", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hystrixCommandInt", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "HystrixCommand", "<", "Integer", ">", "command", "=", "api", ".", "intCommand", "(", ")", ";", "assertThat", "(", "command", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "command", ".", "execute", "(", ")", ")", ".", "isEqualTo", "(", "new", "Integer", "(", "1", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hystrixCommandIntFallback", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "HystrixCommand", "<", "Integer", ">", "command", "=", "api", ".", "intCommand", "(", ")", ";", "assertThat", "(", "command", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "command", ".", "execute", "(", ")", ")", ".", "isEqualTo", "(", "new", "Integer", "(", "0", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hystrixCommandList", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:[>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:]>", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "HystrixCommand", "<", "List", "<", "String", ">", ">", "command", "=", "api", ".", "listCommand", "(", ")", ";", "assertThat", "(", "command", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "command", ".", "execute", "(", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hystrixCommandListFallback", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "HystrixCommand", "<", "List", "<", "String", ">", ">", "command", "=", "api", ".", "listCommand", "(", ")", ";", "assertThat", "(", "command", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "command", ".", "execute", "(", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "String", ">", "contributors", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "HystrixCommand", "<", "List", "<", "String", ">", ">", "contributorsHystrixCommand", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "fallbacksApplyOnError", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "GitHub", "fallback", "=", "(", "owner", ",", "repo", ")", "-", ">", "{", "if", "(", "owner", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", "&", "&", "repo", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "return", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "else", "{", "return", "Collections", ".", "emptyList", "(", ")", ";", "}", "}", ";", "final", "GitHub", "api", "=", "target", "(", "GitHub", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ",", "fallback", ")", ";", "final", "List", "<", "String", ">", "result", "=", "api", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "result", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "errorInFallbackHasExpectedBehavior", "(", ")", "{", "thrown", ".", "expect", "(", "HystrixRuntimeException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "thrown", ".", "expectCause", "(", "isA", "(", "FeignException", ".", "class", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "GitHub", "fallback", "=", "(", "owner", ",", "repo", ")", "-", ">", "{", "throw", "new", "RuntimeException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", ";", "final", "GitHub", "api", "=", "target", "(", "GitHub", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ",", "fallback", ")", ";", "api", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "protected", "<", "E", ">", "E", "target", "(", "Class", "<", "E", ">", "api", ",", "String", "url", ")", "{", "return", "HystrixFeign", ".", "builder", "(", ")", ".", "target", "(", "api", ",", "url", ")", ";", "}", "</s>"]
["<s>", "protected", "<", "E", ">", "E", "target", "(", "Target", "<", "E", ">", "api", ")", "{", "return", "HystrixFeign", ".", "builder", "(", ")", ".", "target", "(", "api", ")", ";", "}", "</s>"]
["<s>", "protected", "<", "E", ">", "E", "target", "(", "Class", "<", "E", ">", "api", ",", "String", "url", ",", "E", "fallback", ")", "{", "return", "HystrixFeign", ".", "builder", "(", ")", ".", "target", "(", "api", ",", "url", ",", "fallback", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hystrixRuntimeExceptionPropagatesOnException", "(", ")", "{", "thrown", ".", "expect", "(", "HystrixRuntimeException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "thrown", ".", "expectCause", "(", "isA", "(", "FeignException", ".", "class", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "GitHub", "api", "=", "target", "(", "GitHub", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "api", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxObservable", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Observable", "<", "String", ">", "observable", "=", "api", ".", "observable", "(", ")", ";", "assertThat", "(", "observable", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "String", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "String", ">", "(", ")", ";", "observable", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "Assertions", ".", "assertThat", "(", "testSubscriber", ".", "getOnNextEvents", "(", ")", ".", "get", "(", "0", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxObservableFallback", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Observable", "<", "String", ">", "observable", "=", "api", ".", "observable", "(", ")", ";", "assertThat", "(", "observable", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "String", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "String", ">", "(", ")", ";", "observable", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "Assertions", ".", "assertThat", "(", "testSubscriber", ".", "getOnNextEvents", "(", ")", ".", "get", "(", "0", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxObservableInt", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Observable", "<", "Integer", ">", "observable", "=", "api", ".", "intObservable", "(", ")", ";", "assertThat", "(", "observable", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "Integer", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "Integer", ">", "(", ")", ";", "observable", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "Assertions", ".", "assertThat", "(", "testSubscriber", ".", "getOnNextEvents", "(", ")", ".", "get", "(", "0", ")", ")", ".", "isEqualTo", "(", "new", "Integer", "(", "1", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxObservableIntFallback", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Observable", "<", "Integer", ">", "observable", "=", "api", ".", "intObservable", "(", ")", ";", "assertThat", "(", "observable", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "Integer", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "Integer", ">", "(", ")", ";", "observable", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "Assertions", ".", "assertThat", "(", "testSubscriber", ".", "getOnNextEvents", "(", ")", ".", "get", "(", "0", ")", ")", ".", "isEqualTo", "(", "new", "Integer", "(", "0", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxObservableList", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:[>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:]>", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Observable", "<", "List", "<", "String", ">", ">", "observable", "=", "api", ".", "listObservable", "(", ")", ";", "assertThat", "(", "observable", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "List", "<", "String", ">", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "List", "<", "String", ">", ">", "(", ")", ";", "observable", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "assertThat", "(", "testSubscriber", ".", "getOnNextEvents", "(", ")", ".", "get", "(", "0", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxObservableListFall", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Observable", "<", "List", "<", "String", ">", ">", "observable", "=", "api", ".", "listObservable", "(", ")", ";", "assertThat", "(", "observable", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "List", "<", "String", ">", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "List", "<", "String", ">", ">", "(", ")", ";", "observable", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "assertThat", "(", "testSubscriber", ".", "getOnNextEvents", "(", ")", ".", "get", "(", "0", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxObservableListFall_noFallback", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "targetWithoutFallback", "(", ")", ";", "final", "Observable", "<", "List", "<", "String", ">", ">", "observable", "=", "api", ".", "listObservable", "(", ")", ";", "assertThat", "(", "observable", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "List", "<", "String", ">", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "List", "<", "String", ">", ">", "(", ")", ";", "observable", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "assertThat", "(", "testSubscriber", ".", "getOnNextEvents", "(", ")", ")", ".", "isEmpty", "(", ")", ";", "assertThat", "(", "testSubscriber", ".", "getOnErrorEvents", "(", ")", ".", "get", "(", "0", ")", ")", ".", "isInstanceOf", "(", "HystrixRuntimeException", ".", "class", ")", ".", "hasMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxSingle", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Single", "<", "String", ">", "single", "=", "api", ".", "single", "(", ")", ";", "assertThat", "(", "single", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "String", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "String", ">", "(", ")", ";", "single", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "Assertions", ".", "assertThat", "(", "testSubscriber", ".", "getOnNextEvents", "(", ")", ".", "get", "(", "0", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxSingleFallback", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Single", "<", "String", ">", "single", "=", "api", ".", "single", "(", ")", ";", "assertThat", "(", "single", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "String", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "String", ">", "(", ")", ";", "single", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "Assertions", ".", "assertThat", "(", "testSubscriber", ".", "getOnNextEvents", "(", ")", ".", "get", "(", "0", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxSingleInt", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Single", "<", "Integer", ">", "single", "=", "api", ".", "intSingle", "(", ")", ";", "assertThat", "(", "single", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "Integer", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "Integer", ">", "(", ")", ";", "single", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "Assertions", ".", "assertThat", "(", "testSubscriber", ".", "getOnNextEvents", "(", ")", ".", "get", "(", "0", ")", ")", ".", "isEqualTo", "(", "new", "Integer", "(", "1", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxSingleIntFallback", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Single", "<", "Integer", ">", "single", "=", "api", ".", "intSingle", "(", ")", ";", "assertThat", "(", "single", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "Integer", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "Integer", ">", "(", ")", ";", "single", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "Assertions", ".", "assertThat", "(", "testSubscriber", ".", "getOnNextEvents", "(", ")", ".", "get", "(", "0", ")", ")", ".", "isEqualTo", "(", "new", "Integer", "(", "0", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxSingleList", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:[>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:]>", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Single", "<", "List", "<", "String", ">", ">", "single", "=", "api", ".", "listSingle", "(", ")", ";", "assertThat", "(", "single", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "List", "<", "String", ">", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "List", "<", "String", ">", ">", "(", ")", ";", "single", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "assertThat", "(", "testSubscriber", ".", "getOnNextEvents", "(", ")", ".", "get", "(", "0", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxSingleListFallback", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Single", "<", "List", "<", "String", ">", ">", "single", "=", "api", ".", "listSingle", "(", ")", ";", "assertThat", "(", "single", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "List", "<", "String", ">", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "List", "<", "String", ">", ">", "(", ")", ";", "single", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "assertThat", "(", "testSubscriber", ".", "getOnNextEvents", "(", ")", ".", "get", "(", "0", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "completableFutureEmptyBody", "(", ")", "throws", "InterruptedException", ",", "ExecutionException", ",", "TimeoutException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "CompletableFuture", "<", "String", ">", "completable", "=", "api", ".", "completableFuture", "(", ")", ";", "assertThat", "(", "completable", ")", ".", "isNotNull", "(", ")", ";", "completable", ".", "get", "(", "<NUM_LIT:5>", ",", "TimeUnit", ".", "SECONDS", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "completableFutureWithBody", "(", ")", "throws", "InterruptedException", ",", "ExecutionException", ",", "TimeoutException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "CompletableFuture", "<", "String", ">", "completable", "=", "api", ".", "completableFuture", "(", ")", ";", "assertThat", "(", "completable", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "completable", ".", "get", "(", "<NUM_LIT:5>", ",", "TimeUnit", ".", "SECONDS", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "completableFutureFailWithoutFallback", "(", ")", "throws", "TimeoutException", ",", "InterruptedException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "CompletableFuture", "<", "String", ">", "completable", "=", "api", ".", "completableFuture", "(", ")", ";", "assertThat", "(", "completable", ")", ".", "isNotNull", "(", ")", ";", "try", "{", "completable", ".", "get", "(", "<NUM_LIT:5>", ",", "TimeUnit", ".", "SECONDS", ")", ";", "}", "catch", "(", "final", "ExecutionException", "e", ")", "{", "assertThat", "(", "e", ")", ".", "hasCauseInstanceOf", "(", "HystrixRuntimeException", ".", "class", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "completableFutureFallback", "(", ")", "throws", "InterruptedException", ",", "ExecutionException", ",", "TimeoutException", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "CompletableFuture", "<", "String", ">", "completable", "=", "api", ".", "completableFuture", "(", ")", ";", "assertThat", "(", "completable", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "completable", ".", "get", "(", "<NUM_LIT:5>", ",", "TimeUnit", ".", "SECONDS", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxCompletableEmptyBody", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Completable", "completable", "=", "api", ".", "completable", "(", ")", ";", "assertThat", "(", "completable", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "String", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "String", ">", "(", ")", ";", "completable", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "testSubscriber", ".", "assertCompleted", "(", ")", ";", "testSubscriber", ".", "assertNoErrors", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxCompletableWithBody", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Completable", "completable", "=", "api", ".", "completable", "(", ")", ";", "assertThat", "(", "completable", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "String", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "String", ">", "(", ")", ";", "completable", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "testSubscriber", ".", "assertCompleted", "(", ")", ";", "testSubscriber", ".", "assertNoErrors", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxCompletableFailWithoutFallback", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "final", "Completable", "completable", "=", "api", ".", "completable", "(", ")", ";", "assertThat", "(", "completable", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "String", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "String", ">", "(", ")", ";", "completable", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "testSubscriber", ".", "assertError", "(", "HystrixRuntimeException", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "rxCompletableFallback", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "Completable", "completable", "=", "api", ".", "completable", "(", ")", ";", "assertThat", "(", "completable", ")", ".", "isNotNull", "(", ")", ";", "assertThat", "(", "server", ".", "getRequestCount", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "final", "TestSubscriber", "<", "String", ">", "testSubscriber", "=", "new", "TestSubscriber", "<", "String", ">", "(", ")", ";", "completable", ".", "subscribe", "(", "testSubscriber", ")", ";", "testSubscriber", ".", "awaitTerminalEvent", "(", ")", ";", "testSubscriber", ".", "assertCompleted", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "plainString", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "String", "string", "=", "api", ".", "get", "(", ")", ";", "assertThat", "(", "string", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "plainStringFallback", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "String", "string", "=", "api", ".", "get", "(", ")", ";", "assertThat", "(", "string", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "plainList", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:[>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:]>", "\"", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "List", "<", "String", ">", "list", "=", "api", ".", "getList", "(", ")", ";", "assertThat", "(", "list", ")", ".", "isNotNull", "(", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "plainListFallback", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "final", "TestInterface", "api", "=", "target", "(", ")", ";", "final", "List", "<", "String", ">", "list", "=", "api", ".", "getList", "(", ")", ";", "assertThat", "(", "list", ")", ".", "isNotNull", "(", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "equalsHashCodeAndToStringWork", "(", ")", "{", "final", "Target", "<", "TestInterface", ">", "t1", "=", "new", "HardCodedTarget", "<", "TestInterface", ">", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Target", "<", "TestInterface", ">", "t2", "=", "new", "HardCodedTarget", "<", "TestInterface", ">", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "Target", "<", "OtherTestInterface", ">", "t3", "=", "new", "HardCodedTarget", "<", "OtherTestInterface", ">", "(", "OtherTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "final", "TestInterface", "i1", "=", "target", "(", "t1", ")", ";", "final", "TestInterface", "i2", "=", "target", "(", "t1", ")", ";", "final", "TestInterface", "i3", "=", "target", "(", "t2", ")", ";", "final", "OtherTestInterface", "i4", "=", "target", "(", "t3", ")", ";", "assertThat", "(", "i1", ")", ".", "isEqualTo", "(", "i2", ")", ".", "isNotEqualTo", "(", "i3", ")", ".", "isNotEqualTo", "(", "i4", ")", ";", "assertThat", "(", "i1", ".", "hashCode", "(", ")", ")", ".", "isEqualTo", "(", "i2", ".", "hashCode", "(", ")", ")", ".", "isNotEqualTo", "(", "i3", ".", "hashCode", "(", ")", ")", ".", "isNotEqualTo", "(", "i4", ".", "hashCode", "(", ")", ")", ";", "assertThat", "(", "i1", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "i2", ".", "toString", "(", ")", ")", ".", "isNotEqualTo", "(", "i3", ".", "toString", "(", ")", ")", ".", "isNotEqualTo", "(", "i4", ".", "toString", "(", ")", ")", ";", "assertThat", "(", "t1", ")", ".", "isNotEqualTo", "(", "i1", ")", ";", "assertThat", "(", "t1", ".", "hashCode", "(", ")", ")", ".", "isEqualTo", "(", "i1", ".", "hashCode", "(", ")", ")", ";", "assertThat", "(", "t1", ".", "toString", "(", ")", ")", ".", "isEqualTo", "(", "i1", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "TestInterface", "target", "(", ")", "{", "return", "HystrixFeign", ".", "builder", "(", ")", ".", "decoder", "(", "new", "GsonDecoder", "(", ")", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ",", "new", "FallbackTestInterface", "(", ")", ")", ";", "}", "</s>"]
["<s>", "protected", "TestInterface", "targetWithoutFallback", "(", ")", "{", "return", "HystrixFeign", ".", "builder", "(", ")", ".", "decoder", "(", "new", "GsonDecoder", "(", ")", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "HystrixCommand", "<", "List", "<", "String", ">", ">", "listCommand", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "HystrixCommand", "<", "List", "<", "String", ">", ">", "listCommand", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "HystrixCommand", "<", "String", ">", "command", "(", ")", ";", "</s>"]
["<s>", "default", "HystrixCommand", "<", "String", ">", "defaultMethodReturningCommand", "(", ")", "{", "return", "command", "(", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "HystrixCommand", "<", "Integer", ">", "intCommand", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "Observable", "<", "List", "<", "String", ">", ">", "listObservable", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "Observable", "<", "String", ">", "observable", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "Single", "<", "Integer", ">", "intSingle", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "Single", "<", "List", "<", "String", ">", ">", "listSingle", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "Single", "<", "String", ">", "single", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "Observable", "<", "Integer", ">", "intObservable", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "String", "get", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "String", ">", "getList", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Completable", "completable", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "CompletableFuture", "<", "String", ">", "completableFuture", "(", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "HystrixCommand", "<", "String", ">", "command", "(", ")", "{", "return", "new", "HystrixCommand", "<", "String", ">", "(", "HystrixCommandGroupKey", ".", "Factory", ".", "asKey", "(", "\"", "<STR_LIT:Test>", "\"", ")", ")", "{", "@", "Override", "protected", "String", "run", "(", ")", "throws", "Exception", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "run", "(", ")", "throws", "Exception", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "HystrixCommand", "<", "List", "<", "String", ">", ">", "listCommand", "(", ")", "{", "return", "new", "HystrixCommand", "<", "List", "<", "String", ">", ">", "(", "HystrixCommandGroupKey", ".", "Factory", ".", "asKey", "(", "\"", "<STR_LIT:Test>", "\"", ")", ")", "{", "@", "Override", "protected", "List", "<", "String", ">", "run", "(", ")", "throws", "Exception", "{", "final", "List", "<", "String", ">", "fallbackResult", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "fallbackResult", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "fallbackResult", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "List", "<", "String", ">", "run", "(", ")", "throws", "Exception", "{", "final", "List", "<", "String", ">", "fallbackResult", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "fallbackResult", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "fallbackResult", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "HystrixCommand", "<", "Integer", ">", "intCommand", "(", ")", "{", "return", "new", "HystrixCommand", "<", "Integer", ">", "(", "HystrixCommandGroupKey", ".", "Factory", ".", "asKey", "(", "\"", "<STR_LIT:Test>", "\"", ")", ")", "{", "@", "Override", "protected", "Integer", "run", "(", ")", "throws", "Exception", "{", "return", "0", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Integer", "run", "(", ")", "throws", "Exception", "{", "return", "0", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Observable", "<", "List", "<", "String", ">", ">", "listObservable", "(", ")", "{", "final", "List", "<", "String", ">", "fallbackResult", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "fallbackResult", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "Observable", ".", "just", "(", "fallbackResult", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Observable", "<", "String", ">", "observable", "(", ")", "{", "return", "Observable", ".", "just", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Single", "<", "Integer", ">", "intSingle", "(", ")", "{", "return", "Single", ".", "just", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Single", "<", "List", "<", "String", ">", ">", "listSingle", "(", ")", "{", "final", "List", "<", "String", ">", "fallbackResult", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "fallbackResult", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "Single", ".", "just", "(", "fallbackResult", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Single", "<", "String", ">", "single", "(", ")", "{", "return", "Single", ".", "just", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Observable", "<", "Integer", ">", "intObservable", "(", ")", "{", "return", "Observable", ".", "just", "(", "0", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "get", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "List", "<", "String", ">", "getList", "(", ")", "{", "final", "List", "<", "String", ">", "fallbackResult", "=", "new", "ArrayList", "<", "String", ">", "(", ")", ";", "fallbackResult", ".", "add", "(", "\"", "<STR_LIT>", "\"", ")", ";", "return", "fallbackResult", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Completable", "completable", "(", ")", "{", "return", "Completable", ".", "complete", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "CompletableFuture", "<", "String", ">", "completableFuture", "(", ")", "{", "return", "CompletableFuture", ".", "completedFuture", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "<", "E", ">", "E", "target", "(", "Class", "<", "E", ">", "api", ",", "String", "url", ")", "{", "return", "Feign", ".", "builder", "(", ")", ".", "addCapability", "(", "new", "HystrixCapability", "(", ")", ")", ".", "target", "(", "api", ",", "url", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "<", "E", ">", "E", "target", "(", "Target", "<", "E", ">", "api", ")", "{", "return", "Feign", ".", "builder", "(", ")", ".", "addCapability", "(", "new", "HystrixCapability", "(", ")", ")", ".", "target", "(", "api", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "<", "E", ">", "E", "target", "(", "Class", "<", "E", ">", "api", ",", "String", "url", ",", "E", "fallback", ")", "{", "return", "Feign", ".", "builder", "(", ")", ".", "addCapability", "(", "new", "HystrixCapability", "(", ")", ".", "fallback", "(", "api", ",", "fallback", ")", ")", ".", "target", "(", "api", ",", "url", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "TestInterface", "target", "(", ")", "{", "return", "Feign", ".", "builder", "(", ")", ".", "addCapability", "(", "new", "HystrixCapability", "(", ")", ".", "fallback", "(", "TestInterface", ".", "class", ",", "new", "FallbackTestInterface", "(", ")", ")", ")", ".", "decoder", "(", "new", "GsonDecoder", "(", ")", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "TestInterface", "targetWithoutFallback", "(", ")", "{", "return", "Feign", ".", "builder", "(", ")", ".", "addCapability", "(", "new", "HystrixCapability", "(", ")", ")", ".", "decoder", "(", "new", "GsonDecoder", "(", ")", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "invoke", "(", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "fallbackFactory_example_lambda", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "TestInterface", "api", "=", "target", "(", "cause", "-", ">", "(", ")", "-", ">", "{", "assertThat", "(", "cause", ")", ".", "isInstanceOf", "(", "FeignException", ".", "class", ")", ";", "return", "(", "(", "FeignException", ")", "cause", ")", ".", "status", "(", ")", "=", "=", "<NUM_LIT>", "?", "\"", "<STR_LIT>", "\"", ":", "\"", "<STR_LIT>", "\"", ";", "}", ")", ";", "assertThat", "(", "api", ".", "invoke", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "api", ".", "invoke", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "FallbackApiWithCtor", "(", "Throwable", "cause", ")", "{", "this", ".", "cause", "=", "cause", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "invoke", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "fallbackFactory_example_ctor", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "TestInterface", "api", "=", "target", "(", "FallbackApiWithCtor", ":", ":", "new", ")", ";", "assertThat", "(", "api", ".", "invoke", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "api", "=", "target", "(", "throwable", "-", ">", "new", "FallbackApiWithCtor", "(", "throwable", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "api", "=", "target", "(", "new", "FallbackFactory", "<", "TestInterface", ">", "(", ")", "{", "@", "Override", "public", "TestInterface", "create", "(", "Throwable", "cause", ")", "{", "return", "new", "FallbackApiWithCtor", "(", "cause", ")", ";", "}", "}", ")", ";", "assertThat", "(", "api", ".", "invoke", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "TestInterface", "create", "(", "Throwable", "cause", ")", "{", "return", "new", "FallbackApiWithCtor", "(", "cause", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "FallbackApiRetro", "create", "(", "Throwable", "cause", ")", "{", "return", "new", "FallbackApiRetro", "(", "cause", ")", ";", "}", "</s>"]
["<s>", "public", "FallbackApiRetro", "(", ")", "{", "this", "(", "null", ")", ";", "}", "</s>"]
["<s>", "FallbackApiRetro", "(", "Throwable", "cause", ")", "{", "this", ".", "cause", "=", "cause", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "invoke", "(", ")", "{", "return", "cause", "!", "=", "null", "?", "cause", ".", "getMessage", "(", ")", ":", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "fallbackFactory_example_retro", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "TestInterface", "api", "=", "target", "(", "new", "FallbackApiRetro", "(", ")", ")", ";", "assertThat", "(", "api", ".", "invoke", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultFallbackFactory_delegates", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "TestInterface", "api", "=", "target", "(", "new", "FallbackFactory", ".", "Default", "<", ">", "(", "(", ")", "-", ">", "\"", "<STR_LIT>", "\"", ")", ")", ";", "assertThat", "(", "api", ".", "invoke", "(", ")", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultFallbackFactory_doesntLogByDefault", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "Logger", "logger", "=", "new", "Logger", "(", "\"", "\"", ",", "null", ")", "{", "@", "Override", "public", "void", "log", "(", "Level", "level", ",", "String", "msg", ",", "Throwable", "thrown", ")", "{", "throw", "new", "AssertionError", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "}", ";", "target", "(", "new", "FallbackFactory", ".", "Default", "<", ">", "(", "(", ")", "-", ">", "\"", "<STR_LIT>", "\"", ",", "logger", ")", ")", ".", "invoke", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "log", "(", "Level", "level", ",", "String", "msg", ",", "Throwable", "thrown", ")", "{", "throw", "new", "AssertionError", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "defaultFallbackFactory_logsAtFineLevel", "(", ")", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ")", ";", "AtomicBoolean", "logged", "=", "new", "AtomicBoolean", "(", ")", ";", "Logger", "logger", "=", "new", "Logger", "(", "\"", "\"", ",", "null", ")", "{", "@", "Override", "public", "void", "log", "(", "Level", "level", ",", "String", "msg", ",", "Throwable", "thrown", ")", "{", "logged", ".", "set", "(", "true", ")", ";", "assertThat", "(", "msg", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "thrown", ")", ".", "isInstanceOf", "(", "FeignException", ".", "class", ")", ";", "}", "}", ";", "logger", ".", "setLevel", "(", "Level", ".", "FINE", ")", ";", "target", "(", "new", "FallbackFactory", ".", "Default", "<", ">", "(", "(", ")", "-", ">", "\"", "<STR_LIT>", "\"", ",", "logger", ")", ")", ".", "invoke", "(", ")", ";", "assertThat", "(", "logged", ".", "get", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "log", "(", "Level", "level", ",", "String", "msg", ",", "Throwable", "thrown", ")", "{", "logged", ".", "set", "(", "true", ")", ";", "assertThat", "(", "msg", ")", ".", "isEqualTo", "(", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "thrown", ")", ".", "isInstanceOf", "(", "FeignException", ".", "class", ")", ";", "}", "</s>"]
["<s>", "TestInterface", "target", "(", "FallbackFactory", "<", "?", "extends", "TestInterface", ">", "factory", ")", "{", "return", "HystrixFeign", ".", "builder", "(", ")", ".", "target", "(", "TestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ",", "factory", ")", ";", "}", "</s>"]
["<s>", "ObservableCompletableFuture", "(", "final", "HystrixCommand", "<", "T", ">", "command", ")", "{", "this", ".", "sub", "=", "command", ".", "toObservable", "(", ")", ".", "single", "(", ")", ".", "subscribe", "(", "ObservableCompletableFuture", ".", "this", ":", ":", "complete", ",", "ObservableCompletableFuture", ".", "this", ":", ":", "completeExceptionally", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "cancel", "(", "final", "boolean", "b", ")", "{", "sub", ".", "unsubscribe", "(", ")", ";", "return", "super", ".", "cancel", "(", "b", ")", ";", "}", "</s>"]
["<s>", "public", "HystrixCapability", "setterFactory", "(", "SetterFactory", "setterFactory", ")", "{", "this", ".", "setterFactory", "=", "setterFactory", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Contract", "enrich", "(", "Contract", "contract", ")", "{", "return", "new", "HystrixDelegatingContract", "(", "contract", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InvocationHandlerFactory", "enrich", "(", "InvocationHandlerFactory", "invocationHandlerFactory", ")", "{", "return", "(", "target", ",", "dispatch", ")", "-", ">", "new", "HystrixInvocationHandler", "(", "target", ",", "dispatch", ",", "setterFactory", ",", "fallbacks", ".", "containsKey", "(", "target", ".", "type", "(", ")", ")", "?", "new", "FallbackFactory", ".", "Default", "<", ">", "(", "fallbacks", ".", "get", "(", "target", ".", "type", "(", ")", ")", ")", ":", "null", ")", ";", "}", "</s>"]
["<s>", "public", "<", "E", ">", "Capability", "fallback", "(", "Class", "<", "E", ">", "api", ",", "E", "fallback", ")", "{", "fallbacks", ".", "put", "(", "api", ",", "fallback", ")", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "static", "Builder", "builder", "(", ")", "{", "return", "new", "Builder", "(", ")", ";", "}", "</s>"]
["<s>", "public", "Builder", "setterFactory", "(", "SetterFactory", "setterFactory", ")", "{", "this", ".", "setterFactory", "=", "setterFactory", ";", "return", "this", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "target", "(", "Target", "<", "T", ">", "target", ",", "T", "fallback", ")", "{", "return", "build", "(", "fallback", "!", "=", "null", "?", "new", "FallbackFactory", ".", "Default", "<", "T", ">", "(", "fallback", ")", ":", "null", ")", ".", "newInstance", "(", "target", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "target", "(", "Target", "<", "T", ">", "target", ",", "FallbackFactory", "<", "?", "extends", "T", ">", "fallbackFactory", ")", "{", "return", "build", "(", "fallbackFactory", ")", ".", "newInstance", "(", "target", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "target", "(", "Class", "<", "T", ">", "apiType", ",", "String", "url", ",", "T", "fallback", ")", "{", "return", "target", "(", "new", "Target", ".", "HardCodedTarget", "<", "T", ">", "(", "apiType", ",", "url", ")", ",", "fallback", ")", ";", "}", "</s>"]
["<s>", "public", "<", "T", ">", "T", "target", "(", "Class", "<", "T", ">", "apiType", ",", "String", "url", ",", "FallbackFactory", "<", "?", "extends", "T", ">", "fallbackFactory", ")", "{", "return", "target", "(", "new", "Target", ".", "HardCodedTarget", "<", "T", ">", "(", "apiType", ",", "url", ")", ",", "fallbackFactory", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Feign", ".", "Builder", "invocationHandlerFactory", "(", "InvocationHandlerFactory", "invocationHandlerFactory", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "contract", "(", "Contract", "contract", ")", "{", "this", ".", "contract", "=", "contract", ";", "return", "this", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Feign", "build", "(", ")", "{", "return", "build", "(", "null", ")", ";", "}", "</s>"]
["<s>", "Feign", "build", "(", "final", "FallbackFactory", "<", "?", ">", "nullableFallbackFactory", ")", "{", "super", ".", "invocationHandlerFactory", "(", "new", "InvocationHandlerFactory", "(", ")", "{", "@", "Override", "public", "InvocationHandler", "create", "(", "Target", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ")", "{", "return", "new", "HystrixInvocationHandler", "(", "target", ",", "dispatch", ",", "setterFactory", ",", "nullableFallbackFactory", ")", ";", "}", "}", ")", ";", "super", ".", "contract", "(", "new", "HystrixDelegatingContract", "(", "contract", ")", ")", ";", "return", "super", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InvocationHandler", "create", "(", "Target", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ")", "{", "return", "new", "HystrixInvocationHandler", "(", "target", ",", "dispatch", ",", "setterFactory", ",", "nullableFallbackFactory", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "logLevel", "(", "Logger", ".", "Level", "logLevel", ")", "{", "return", "(", "Builder", ")", "super", ".", "logLevel", "(", "logLevel", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "client", "(", "Client", "client", ")", "{", "return", "(", "Builder", ")", "super", ".", "client", "(", "client", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "retryer", "(", "Retryer", "retryer", ")", "{", "return", "(", "Builder", ")", "super", ".", "retryer", "(", "retryer", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "logger", "(", "Logger", "logger", ")", "{", "return", "(", "Builder", ")", "super", ".", "logger", "(", "logger", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "encoder", "(", "Encoder", "encoder", ")", "{", "return", "(", "Builder", ")", "super", ".", "encoder", "(", "encoder", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "decoder", "(", "Decoder", "decoder", ")", "{", "return", "(", "Builder", ")", "super", ".", "decoder", "(", "decoder", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "mapAndDecode", "(", "ResponseMapper", "mapper", ",", "Decoder", "decoder", ")", "{", "return", "(", "Builder", ")", "super", ".", "mapAndDecode", "(", "mapper", ",", "decoder", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "decode404", "(", ")", "{", "return", "(", "Builder", ")", "super", ".", "decode404", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "errorDecoder", "(", "ErrorDecoder", "errorDecoder", ")", "{", "return", "(", "Builder", ")", "super", ".", "errorDecoder", "(", "errorDecoder", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "options", "(", "Request", ".", "Options", "options", ")", "{", "return", "(", "Builder", ")", "super", ".", "options", "(", "options", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "requestInterceptor", "(", "RequestInterceptor", "requestInterceptor", ")", "{", "return", "(", "Builder", ")", "super", ".", "requestInterceptor", "(", "requestInterceptor", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "requestInterceptors", "(", "Iterable", "<", "RequestInterceptor", ">", "requestInterceptors", ")", "{", "return", "(", "Builder", ")", "super", ".", "requestInterceptors", "(", "requestInterceptors", ")", ";", "}", "</s>"]
["<s>", "HystrixCommand", ".", "Setter", "create", "(", "Target", "<", "?", ">", "target", ",", "Method", "method", ")", ";", "</s>"]
["<s>", "@", "Override", "public", "HystrixCommand", ".", "Setter", "create", "(", "Target", "<", "?", ">", "target", ",", "Method", "method", ")", "{", "String", "groupKey", "=", "target", ".", "name", "(", ")", ";", "String", "commandKey", "=", "Feign", ".", "configKey", "(", "target", ".", "type", "(", ")", ",", "method", ")", ";", "return", "HystrixCommand", ".", "Setter", ".", "withGroupKey", "(", "HystrixCommandGroupKey", ".", "Factory", ".", "asKey", "(", "groupKey", ")", ")", ".", "andCommandKey", "(", "HystrixCommandKey", ".", "Factory", ".", "asKey", "(", "commandKey", ")", ")", ";", "}", "</s>"]
["<s>", "public", "HystrixDelegatingContract", "(", "Contract", "delegate", ")", "{", "this", ".", "delegate", "=", "delegate", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "List", "<", "MethodMetadata", ">", "parseAndValidateMetadata", "(", "Class", "<", "?", ">", "targetType", ")", "{", "List", "<", "MethodMetadata", ">", "metadatas", "=", "this", ".", "delegate", ".", "parseAndValidateMetadata", "(", "targetType", ")", ";", "for", "(", "MethodMetadata", "metadata", ":", "metadatas", ")", "{", "Type", "type", "=", "metadata", ".", "returnType", "(", ")", ";", "if", "(", "type", "instanceof", "ParameterizedType", "&", "&", "(", "(", "ParameterizedType", ")", "type", ")", ".", "getRawType", "(", ")", ".", "equals", "(", "HystrixCommand", ".", "class", ")", ")", "{", "Type", "actualType", "=", "resolveLastTypeParameter", "(", "type", ",", "HystrixCommand", ".", "class", ")", ";", "metadata", ".", "returnType", "(", "actualType", ")", ";", "}", "else", "if", "(", "type", "instanceof", "ParameterizedType", "&", "&", "(", "(", "ParameterizedType", ")", "type", ")", ".", "getRawType", "(", ")", ".", "equals", "(", "Observable", ".", "class", ")", ")", "{", "Type", "actualType", "=", "resolveLastTypeParameter", "(", "type", ",", "Observable", ".", "class", ")", ";", "metadata", ".", "returnType", "(", "actualType", ")", ";", "}", "else", "if", "(", "type", "instanceof", "ParameterizedType", "&", "&", "(", "(", "ParameterizedType", ")", "type", ")", ".", "getRawType", "(", ")", ".", "equals", "(", "Single", ".", "class", ")", ")", "{", "Type", "actualType", "=", "resolveLastTypeParameter", "(", "type", ",", "Single", ".", "class", ")", ";", "metadata", ".", "returnType", "(", "actualType", ")", ";", "}", "else", "if", "(", "type", "instanceof", "ParameterizedType", "&", "&", "(", "(", "ParameterizedType", ")", "type", ")", ".", "getRawType", "(", ")", ".", "equals", "(", "Completable", ".", "class", ")", ")", "{", "metadata", ".", "returnType", "(", "void", ".", "class", ")", ";", "}", "else", "if", "(", "type", "instanceof", "ParameterizedType", "&", "&", "(", "(", "ParameterizedType", ")", "type", ")", ".", "getRawType", "(", ")", ".", "equals", "(", "CompletableFuture", ".", "class", ")", ")", "{", "metadata", ".", "returnType", "(", "resolveLastTypeParameter", "(", "type", ",", "CompletableFuture", ".", "class", ")", ")", ";", "}", "}", "return", "metadatas", ";", "}", "</s>"]
["<s>", "HystrixInvocationHandler", "(", "Target", "<", "?", ">", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ",", "SetterFactory", "setterFactory", ",", "FallbackFactory", "<", "?", ">", "fallbackFactory", ")", "{", "this", ".", "target", "=", "checkNotNull", "(", "target", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "dispatch", "=", "checkNotNull", "(", "dispatch", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "fallbackFactory", "=", "fallbackFactory", ";", "this", ".", "fallbackMethodMap", "=", "toFallbackMethod", "(", "dispatch", ")", ";", "this", ".", "setterMethodMap", "=", "toSetters", "(", "setterFactory", ",", "target", ",", "dispatch", ".", "keySet", "(", ")", ")", ";", "}", "</s>"]
["<s>", "static", "Map", "<", "Method", ",", "Method", ">", "toFallbackMethod", "(", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ")", "{", "Map", "<", "Method", ",", "Method", ">", "result", "=", "new", "LinkedHashMap", "<", "Method", ",", "Method", ">", "(", ")", ";", "for", "(", "Method", "method", ":", "dispatch", ".", "keySet", "(", ")", ")", "{", "method", ".", "setAccessible", "(", "true", ")", ";", "result", ".", "put", "(", "method", ",", "method", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "static", "Map", "<", "Method", ",", "Setter", ">", "toSetters", "(", "SetterFactory", "setterFactory", ",", "Target", "<", "?", ">", "target", ",", "Set", "<", "Method", ">", "methods", ")", "{", "Map", "<", "Method", ",", "Setter", ">", "result", "=", "new", "LinkedHashMap", "<", "Method", ",", "Setter", ">", "(", ")", ";", "for", "(", "Method", "method", ":", "methods", ")", "{", "method", ".", "setAccessible", "(", "true", ")", ";", "result", ".", "put", "(", "method", ",", "setterFactory", ".", "create", "(", "target", ",", "method", ")", ")", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "invoke", "(", "final", "Object", "proxy", ",", "final", "Method", "method", ",", "final", "Object", "[", "]", "args", ")", "throws", "Throwable", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", ")", "{", "try", "{", "Object", "otherHandler", "=", "args", ".", "length", ">", "0", "&", "&", "args", "[", "0", "]", "!", "=", "null", "?", "Proxy", ".", "getInvocationHandler", "(", "args", "[", "0", "]", ")", ":", "null", ";", "return", "equals", "(", "otherHandler", ")", ";", "}", "catch", "(", "IllegalArgumentException", "e", ")", "{", "return", "false", ";", "}", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", ")", "{", "return", "hashCode", "(", ")", ";", "}", "else", "if", "(", "\"", "<STR_LIT:String>", "\"", ".", "equals", "(", "method", ".", "getName", "(", ")", ")", ")", "{", "return", "toString", "(", ")", ";", "}", "HystrixCommand", "<", "Object", ">", "hystrixCommand", "=", "new", "HystrixCommand", "<", "Object", ">", "(", "setterMethodMap", ".", "get", "(", "method", ")", ")", "{", "@", "Override", "protected", "Object", "run", "(", ")", "throws", "Exception", "{", "try", "{", "return", "HystrixInvocationHandler", ".", "this", ".", "dispatch", ".", "get", "(", "method", ")", ".", "invoke", "(", "args", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "e", ";", "}", "catch", "(", "Throwable", "t", ")", "{", "throw", "(", "Error", ")", "t", ";", "}", "}", "@", "Override", "protected", "Object", "getFallback", "(", ")", "{", "if", "(", "fallbackFactory", "=", "=", "null", ")", "{", "return", "super", ".", "getFallback", "(", ")", ";", "}", "try", "{", "Object", "fallback", "=", "fallbackFactory", ".", "create", "(", "getExecutionException", "(", ")", ")", ";", "Object", "result", "=", "fallbackMethodMap", ".", "get", "(", "method", ")", ".", "invoke", "(", "fallback", ",", "args", ")", ";", "if", "(", "isReturnsHystrixCommand", "(", "method", ")", ")", "{", "return", "(", "(", "HystrixCommand", ")", "result", ")", ".", "execute", "(", ")", ";", "}", "else", "if", "(", "isReturnsObservable", "(", "method", ")", ")", "{", "return", "(", "(", "Observable", ")", "result", ")", ".", "toBlocking", "(", ")", ".", "first", "(", ")", ";", "}", "else", "if", "(", "isReturnsSingle", "(", "method", ")", ")", "{", "return", "(", "(", "Single", ")", "result", ")", ".", "toObservable", "(", ")", ".", "toBlocking", "(", ")", ".", "first", "(", ")", ";", "}", "else", "if", "(", "isReturnsCompletable", "(", "method", ")", ")", "{", "(", "(", "Completable", ")", "result", ")", ".", "await", "(", ")", ";", "return", "null", ";", "}", "else", "if", "(", "isReturnsCompletableFuture", "(", "method", ")", ")", "{", "return", "(", "(", "Future", ")", "result", ")", ".", "get", "(", ")", ";", "}", "else", "{", "return", "result", ";", "}", "}", "catch", "(", "IllegalAccessException", "e", ")", "{", "throw", "new", "AssertionError", "(", "e", ")", ";", "}", "catch", "(", "InvocationTargetException", "|", "ExecutionException", "e", ")", "{", "throw", "new", "AssertionError", "(", "e", ".", "getCause", "(", ")", ")", ";", "}", "catch", "(", "InterruptedException", "e", ")", "{", "Thread", ".", "currentThread", "(", ")", ".", "interrupt", "(", ")", ";", "throw", "new", "AssertionError", "(", "e", ".", "getCause", "(", ")", ")", ";", "}", "}", "}", ";", "if", "(", "Util", ".", "isDefault", "(", "method", ")", ")", "{", "return", "hystrixCommand", ".", "execute", "(", ")", ";", "}", "else", "if", "(", "isReturnsHystrixCommand", "(", "method", ")", ")", "{", "return", "hystrixCommand", ";", "}", "else", "if", "(", "isReturnsObservable", "(", "method", ")", ")", "{", "return", "hystrixCommand", ".", "toObservable", "(", ")", ";", "}", "else", "if", "(", "isReturnsSingle", "(", "method", ")", ")", "{", "return", "hystrixCommand", ".", "toObservable", "(", ")", ".", "toSingle", "(", ")", ";", "}", "else", "if", "(", "isReturnsCompletable", "(", "method", ")", ")", "{", "return", "hystrixCommand", ".", "toObservable", "(", ")", ".", "toCompletable", "(", ")", ";", "}", "else", "if", "(", "isReturnsCompletableFuture", "(", "method", ")", ")", "{", "return", "new", "ObservableCompletableFuture", "<", ">", "(", "hystrixCommand", ")", ";", "}", "return", "hystrixCommand", ".", "execute", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Object", "run", "(", ")", "throws", "Exception", "{", "try", "{", "return", "HystrixInvocationHandler", ".", "this", ".", "dispatch", ".", "get", "(", "method", ")", ".", "invoke", "(", "args", ")", ";", "}", "catch", "(", "Exception", "e", ")", "{", "throw", "e", ";", "}", "catch", "(", "Throwable", "t", ")", "{", "throw", "(", "Error", ")", "t", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "protected", "Object", "getFallback", "(", ")", "{", "if", "(", "fallbackFactory", "=", "=", "null", ")", "{", "return", "super", ".", "getFallback", "(", ")", ";", "}", "try", "{", "Object", "fallback", "=", "fallbackFactory", ".", "create", "(", "getExecutionException", "(", ")", ")", ";", "Object", "result", "=", "fallbackMethodMap", ".", "get", "(", "method", ")", ".", "invoke", "(", "fallback", ",", "args", ")", ";", "if", "(", "isReturnsHystrixCommand", "(", "method", ")", ")", "{", "return", "(", "(", "HystrixCommand", ")", "result", ")", ".", "execute", "(", ")", ";", "}", "else", "if", "(", "isReturnsObservable", "(", "method", ")", ")", "{", "return", "(", "(", "Observable", ")", "result", ")", ".", "toBlocking", "(", ")", ".", "first", "(", ")", ";", "}", "else", "if", "(", "isReturnsSingle", "(", "method", ")", ")", "{", "return", "(", "(", "Single", ")", "result", ")", ".", "toObservable", "(", ")", ".", "toBlocking", "(", ")", ".", "first", "(", ")", ";", "}", "else", "if", "(", "isReturnsCompletable", "(", "method", ")", ")", "{", "(", "(", "Completable", ")", "result", ")", ".", "await", "(", ")", ";", "return", "null", ";", "}", "else", "if", "(", "isReturnsCompletableFuture", "(", "method", ")", ")", "{", "return", "(", "(", "Future", ")", "result", ")", ".", "get", "(", ")", ";", "}", "else", "{", "return", "result", ";", "}", "}", "catch", "(", "IllegalAccessException", "e", ")", "{", "throw", "new", "AssertionError", "(", "e", ")", ";", "}", "catch", "(", "InvocationTargetException", "|", "ExecutionException", "e", ")", "{", "throw", "new", "AssertionError", "(", "e", ".", "getCause", "(", ")", ")", ";", "}", "catch", "(", "InterruptedException", "e", ")", "{", "Thread", ".", "currentThread", "(", ")", ".", "interrupt", "(", ")", ";", "throw", "new", "AssertionError", "(", "e", ".", "getCause", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "private", "boolean", "isReturnsCompletable", "(", "Method", "method", ")", "{", "return", "Completable", ".", "class", ".", "isAssignableFrom", "(", "method", ".", "getReturnType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "isReturnsHystrixCommand", "(", "Method", "method", ")", "{", "return", "HystrixCommand", ".", "class", ".", "isAssignableFrom", "(", "method", ".", "getReturnType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "isReturnsObservable", "(", "Method", "method", ")", "{", "return", "Observable", ".", "class", ".", "isAssignableFrom", "(", "method", ".", "getReturnType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "isReturnsCompletableFuture", "(", "Method", "method", ")", "{", "return", "CompletableFuture", ".", "class", ".", "isAssignableFrom", "(", "method", ".", "getReturnType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "private", "boolean", "isReturnsSingle", "(", "Method", "method", ")", "{", "return", "Single", ".", "class", ".", "isAssignableFrom", "(", "method", ".", "getReturnType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "obj", "instanceof", "HystrixInvocationHandler", ")", "{", "HystrixInvocationHandler", "other", "=", "(", "HystrixInvocationHandler", ")", "obj", ";", "return", "target", ".", "equals", "(", "other", ".", "target", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "target", ".", "hashCode", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "target", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "T", "create", "(", "Throwable", "cause", ")", ";", "</s>"]
["<s>", "public", "Default", "(", "T", "constant", ")", "{", "this", "(", "constant", ",", "Logger", ".", "getLogger", "(", "Default", ".", "class", ".", "getName", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "Default", "(", "T", "constant", ",", "Logger", "logger", ")", "{", "this", ".", "constant", "=", "checkNotNull", "(", "constant", ",", "\"", "<STR_LIT>", "\"", ")", ";", "this", ".", "logger", "=", "checkNotNull", "(", "logger", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "T", "create", "(", "Throwable", "cause", ")", "{", "if", "(", "logger", ".", "isLoggable", "(", "Level", ".", "FINE", ")", ")", "{", "logger", ".", "log", "(", "Level", ".", "FINE", ",", "\"", "<STR_LIT>", "\"", "+", "cause", ".", "getMessage", "(", ")", ",", "cause", ")", ";", "}", "return", "constant", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "toString", "(", ")", "{", "return", "constant", ".", "toString", "(", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "String", "get", "(", "String", "body", ")", ";", "</s>"]
["<s>", "@", "Test", "public", "void", "addMetricsCapability", "(", ")", "{", "final", "MetricRegistry", "registry", "=", "SharedMetricRegistries", ".", "getOrCreate", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "SimpleSource", "source", "=", "Feign", ".", "builder", "(", ")", ".", "client", "(", "new", "MockClient", "(", ")", ".", "ok", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "addCapability", "(", "new", "Metrics5Capability", "(", "registry", ")", ")", ".", "target", "(", "new", "MockTarget", "<", ">", "(", "Metrics5CapabilityTest", ".", "SimpleSource", ".", "class", ")", ")", ";", "source", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "registry", ".", "getMetrics", "(", ")", ",", "aMapWithSize", "(", "<NUM_LIT:6>", ")", ")", ";", "registry", ".", "getMetrics", "(", ")", ".", "keySet", "(", ")", ".", "forEach", "(", "metricName", "-", ">", "assertThat", "(", "\"", "<STR_LIT>", "\"", "+", "metricName", ",", "metricName", ".", "getTags", "(", ")", ",", "hasEntry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "registry", ".", "getMetrics", "(", ")", ".", "keySet", "(", ")", ".", "forEach", "(", "metricName", "-", ">", "assertThat", "(", "\"", "<STR_LIT>", "\"", "+", "metricName", ",", "metricName", ".", "getTags", "(", ")", ",", "hasEntry", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "registry", ".", "getMetrics", "(", ")", ".", "keySet", "(", ")", ".", "forEach", "(", "metricName", "-", ">", "assertThat", "(", "\"", "<STR_LIT>", "\"", "+", "metricName", ",", "metricName", ".", "getTags", "(", ")", ",", "hasEntry", "(", "\"", "<STR_LIT>", "\"", ",", "null", ")", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MeteredDecoder", "(", "Decoder", "decoder", ",", "MetricRegistry", "metricRegistry", ",", "MetricSuppliers", "metricSuppliers", ")", "{", "this", ".", "decoder", "=", "decoder", ";", "this", ".", "metricRegistry", "=", "metricRegistry", ";", "this", ".", "metricSuppliers", "=", "metricSuppliers", ";", "this", ".", "metricName", "=", "new", "FeignMetricName", "(", "Decoder", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", ",", "DecodeException", ",", "FeignException", "{", "final", "RequestTemplate", "template", "=", "response", ".", "request", "(", ")", ".", "requestTemplate", "(", ")", ";", "final", "MeteredBody", "body", "=", "response", ".", "body", "(", ")", "=", "=", "null", "?", "null", ":", "new", "MeteredBody", "(", "response", ".", "body", "(", ")", ")", ";", "response", "=", "response", ".", "toBuilder", "(", ")", ".", "body", "(", "body", ")", ".", "build", "(", ")", ";", "final", "Object", "decoded", ";", "try", "(", "final", "Context", "classTimer", "=", "metricRegistry", ".", "timer", "(", "metricName", ".", "metricName", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ")", ",", "metricSuppliers", ".", "timers", "(", ")", ")", ".", "time", "(", ")", ")", "{", "decoded", "=", "decoder", ".", "decode", "(", "response", ",", "type", ")", ";", "}", "if", "(", "body", "!", "=", "null", ")", "{", "metricRegistry", ".", "histogram", "(", "metricName", ".", "metricName", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ",", "metricSuppliers", ".", "histograms", "(", ")", ")", ".", "update", "(", "body", ".", "count", "(", ")", ")", ";", "}", "return", "decoded", ";", "}", "</s>"]
["<s>", "public", "MetricSupplier", "<", "Timer", ">", "timers", "(", ")", "{", "return", "(", ")", "-", ">", "new", "Timer", "(", "new", "SlidingTimeWindowArrayReservoir", "(", "1", ",", "TimeUnit", ".", "MINUTES", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MetricSupplier", "<", "Meter", ">", "meters", "(", ")", "{", "return", "(", ")", "-", ">", "new", "Meter", "(", ")", ";", "}", "</s>"]
["<s>", "public", "MetricSupplier", "<", "Histogram", ">", "histograms", "(", ")", "{", "return", "(", ")", "-", ">", "new", "Histogram", "(", "new", "SlidingTimeWindowArrayReservoir", "(", "1", ",", "TimeUnit", ".", "MINUTES", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MeteredBody", "(", "Body", "body", ")", "{", "this", ".", "delegate", "=", "body", ";", "count", "=", "(", ")", "-", ">", "0", "L", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "delegate", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Integer", "length", "(", ")", "{", "return", "delegate", ".", "length", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "delegate", ".", "isRepeatable", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "asInputStream", "(", ")", "throws", "IOException", "{", "final", "CountingInputStream", "input", "=", "new", "CountingInputStream", "(", "delegate", ".", "asInputStream", "(", ")", ")", ";", "count", "=", "input", ":", ":", "getCount", ";", "return", "input", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Reader", "asReader", "(", ")", "throws", "IOException", "{", "return", "new", "InputStreamReader", "(", "asInputStream", "(", ")", ",", "UTF_8", ")", ";", "}", "</s>"]
["<s>", "public", "long", "count", "(", ")", "{", "return", "count", ".", "get", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Reader", "asReader", "(", "Charset", "charset", ")", "throws", "IOException", "{", "return", "new", "InputStreamReader", "(", "asInputStream", "(", ")", ",", "charset", ")", ";", "}", "</s>"]
["<s>", "public", "MeteredClient", "(", "Client", "client", ",", "MetricRegistry", "metricRegistry", ",", "MetricSuppliers", "metricSuppliers", ")", "{", "this", ".", "client", "=", "client", ";", "this", ".", "metricRegistry", "=", "metricRegistry", ";", "this", ".", "metricSuppliers", "=", "metricSuppliers", ";", "this", ".", "metricName", "=", "new", "FeignMetricName", "(", "Client", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Response", "execute", "(", "Request", "request", ",", "Options", "options", ")", "throws", "IOException", "{", "final", "RequestTemplate", "template", "=", "request", ".", "requestTemplate", "(", ")", ";", "try", "(", "final", "Context", "classTimer", "=", "metricRegistry", ".", "timer", "(", "metricName", ".", "metricName", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ")", ",", "metricSuppliers", ".", "timers", "(", ")", ")", ".", "time", "(", ")", ")", "{", "return", "client", ".", "execute", "(", "request", ",", "options", ")", ";", "}", "}", "</s>"]
["<s>", "public", "FeignMetricName", "(", "Class", "<", "?", ">", "meteredComponent", ")", "{", "this", ".", "meteredComponent", "=", "meteredComponent", ";", "}", "</s>"]
["<s>", "public", "MetricName", "metricName", "(", "MethodMetadata", "methodMetadata", ",", "Target", "<", "?", ">", "target", ",", "String", "suffix", ")", "{", "return", "metricName", "(", "methodMetadata", ",", "target", ")", ".", "resolve", "(", "suffix", ")", ";", "}", "</s>"]
["<s>", "public", "MetricName", "metricName", "(", "MethodMetadata", "methodMetadata", ",", "Target", "<", "?", ">", "target", ")", "{", "return", "metricName", "(", "methodMetadata", ".", "targetType", "(", ")", ",", "methodMetadata", ".", "method", "(", ")", ",", "target", ".", "url", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "MetricName", "metricName", "(", "Class", "<", "?", ">", "targetType", ",", "Method", "method", ",", "String", "url", ")", "{", "return", "MetricRegistry", ".", "name", "(", "meteredComponent", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "targetType", ".", "getName", "(", ")", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "method", ".", "getName", "(", ")", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "extractHost", "(", "url", ")", ")", ";", "}", "</s>"]
["<s>", "private", "String", "extractHost", "(", "final", "String", "targetUrl", ")", "{", "try", "{", "return", "new", "URI", "(", "targetUrl", ")", ".", "getHost", "(", ")", ";", "}", "catch", "(", "final", "URISyntaxException", "e", ")", "{", "return", "targetUrl", ".", "length", "(", ")", "<", "=", "<NUM_LIT:20>", "?", "targetUrl", ":", "targetUrl", ".", "substring", "(", "0", ",", "<NUM_LIT:20>", ")", ";", "}", "}", "</s>"]
["<s>", "public", "MeteredEncoder", "(", "Encoder", "encoder", ",", "MetricRegistry", "metricRegistry", ",", "MetricSuppliers", "metricSuppliers", ")", "{", "this", ".", "encoder", "=", "encoder", ";", "this", ".", "metricRegistry", "=", "metricRegistry", ";", "this", ".", "metricSuppliers", "=", "metricSuppliers", ";", "this", ".", "metricName", "=", "new", "FeignMetricName", "(", "Encoder", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "throws", "EncodeException", "{", "try", "(", "final", "Context", "classTimer", "=", "metricRegistry", ".", "timer", "(", "metricName", ".", "metricName", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ")", ",", "metricSuppliers", ".", "timers", "(", ")", ")", ".", "time", "(", ")", ")", "{", "encoder", ".", "encode", "(", "object", ",", "bodyType", ",", "template", ")", ";", "}", "if", "(", "template", ".", "body", "(", ")", "!", "=", "null", ")", "{", "metricRegistry", ".", "histogram", "(", "metricName", ".", "metricName", "(", "template", ".", "methodMetadata", "(", ")", ",", "template", ".", "feignTarget", "(", ")", ",", "\"", "<STR_LIT>", "\"", ")", ",", "metricSuppliers", ".", "histograms", "(", ")", ")", ".", "update", "(", "template", ".", "body", "(", ")", ".", "length", ")", ";", "}", "}", "</s>"]
["<s>", "public", "CountingInputStream", "(", "InputStream", "in", ")", "{", "super", "(", "Util", ".", "checkNotNull", "(", "in", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "public", "long", "getCount", "(", ")", "{", "return", "count", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", ")", "throws", "IOException", "{", "final", "int", "result", "=", "in", ".", "read", "(", ")", ";", "if", "(", "result", "!", "=", "-", "1", ")", "{", "count", "+", "+", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "read", "(", "byte", "[", "]", "b", ",", "int", "off", ",", "int", "len", ")", "throws", "IOException", "{", "final", "int", "result", "=", "in", ".", "read", "(", "b", ",", "off", ",", "len", ")", ";", "if", "(", "result", "!", "=", "-", "1", ")", "{", "count", "+", "=", "result", ";", "}", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "long", "skip", "(", "long", "n", ")", "throws", "IOException", "{", "final", "long", "result", "=", "in", ".", "skip", "(", "n", ")", ";", "count", "+", "=", "result", ";", "return", "result", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "synchronized", "void", "mark", "(", "int", "readlimit", ")", "{", "in", ".", "mark", "(", "readlimit", ")", ";", "mark", "=", "count", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "synchronized", "void", "reset", "(", ")", "throws", "IOException", "{", "if", "(", "!", "in", ".", "markSupported", "(", ")", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "if", "(", "mark", "=", "=", "-", "1", ")", "{", "throw", "new", "IOException", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "in", ".", "reset", "(", ")", ";", "count", "=", "mark", ";", "}", "</s>"]
["<s>", "public", "MeteredInvocationHandleFactory", "(", "InvocationHandlerFactory", "invocationHandler", ",", "MetricRegistry", "metricRegistry", ",", "MetricSuppliers", "metricSuppliers", ")", "{", "this", ".", "invocationHandler", "=", "invocationHandler", ";", "this", ".", "metricRegistry", "=", "metricRegistry", ";", "this", ".", "metricSuppliers", "=", "metricSuppliers", ";", "this", ".", "metricName", "=", "new", "FeignMetricName", "(", "Feign", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InvocationHandler", "create", "(", "Target", "target", ",", "Map", "<", "Method", ",", "MethodHandler", ">", "dispatch", ")", "{", "final", "Class", "clientClass", "=", "target", ".", "type", "(", ")", ";", "final", "InvocationHandler", "invocationHandle", "=", "invocationHandler", ".", "create", "(", "target", ",", "dispatch", ")", ";", "return", "(", "proxy", ",", "method", ",", "args", ")", "-", ">", "{", "if", "(", "JAVA_OBJECT_METHODS", ".", "contains", "(", "method", ".", "getName", "(", ")", ")", "|", "|", "Util", ".", "isDefault", "(", "method", ")", ")", "{", "LOG", ".", "trace", "(", "\"", "<STR_LIT>", "\"", ",", "method", ")", ";", "return", "invocationHandle", ".", "invoke", "(", "proxy", ",", "method", ",", "args", ")", ";", "}", "try", "(", "final", "Context", "classTimer", "=", "metricRegistry", ".", "timer", "(", "metricName", ".", "metricName", "(", "clientClass", ",", "method", ",", "target", ".", "url", "(", ")", ")", ",", "metricSuppliers", ".", "timers", "(", ")", ")", ".", "time", "(", ")", ")", "{", "return", "invocationHandle", ".", "invoke", "(", "proxy", ",", "method", ",", "args", ")", ";", "}", "catch", "(", "final", "FeignException", "e", ")", "{", "metricRegistry", ".", "meter", "(", "metricName", ".", "metricName", "(", "clientClass", ",", "method", ",", "target", ".", "url", "(", ")", ")", ".", "resolve", "(", "\"", "<STR_LIT>", "\"", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "String", ".", "valueOf", "(", "e", ".", "status", "(", ")", ")", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "e", ".", "status", "(", ")", "/", "<NUM_LIT:100>", "+", "\"", "<STR_LIT>", "\"", ")", ",", "metricSuppliers", ".", "meters", "(", ")", ")", ".", "mark", "(", ")", ";", "throw", "e", ";", "}", "catch", "(", "final", "Throwable", "e", ")", "{", "metricRegistry", ".", "meter", "(", "metricName", ".", "metricName", "(", "clientClass", ",", "method", ",", "target", ".", "url", "(", ")", ")", ".", "resolve", "(", "\"", "<STR_LIT>", "\"", ")", ".", "tagged", "(", "\"", "<STR_LIT>", "\"", ",", "e", ".", "getClass", "(", ")", ".", "getSimpleName", "(", ")", ")", ",", "metricSuppliers", ".", "meters", "(", ")", ")", ".", "mark", "(", ")", ";", "throw", "e", ";", "}", "}", ";", "}", "</s>"]
["<s>", "public", "Metrics5Capability", "(", ")", "{", "this", "(", "SharedMetricRegistries", ".", "getOrCreate", "(", "\"", "<STR_LIT>", "\"", ")", ",", "new", "MetricSuppliers", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Metrics5Capability", "(", "MetricRegistry", "metricRegistry", ")", "{", "this", "(", "metricRegistry", ",", "new", "MetricSuppliers", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "Metrics5Capability", "(", "MetricRegistry", "metricRegistry", ",", "MetricSuppliers", "metricSuppliers", ")", "{", "this", ".", "metricRegistry", "=", "metricRegistry", ";", "this", ".", "metricSuppliers", "=", "metricSuppliers", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Client", "enrich", "(", "Client", "client", ")", "{", "return", "new", "MeteredClient", "(", "client", ",", "metricRegistry", ",", "metricSuppliers", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Encoder", "enrich", "(", "Encoder", "encoder", ")", "{", "return", "new", "MeteredEncoder", "(", "encoder", ",", "metricRegistry", ",", "metricSuppliers", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Decoder", "enrich", "(", "Decoder", "decoder", ")", "{", "return", "new", "MeteredDecoder", "(", "decoder", ",", "metricRegistry", ",", "metricSuppliers", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InvocationHandlerFactory", "enrich", "(", "InvocationHandlerFactory", "invocationHandlerFactory", ")", "{", "return", "new", "MeteredInvocationHandleFactory", "(", "invocationHandlerFactory", ",", "metricRegistry", ",", "metricSuppliers", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Builder", "newBuilder", "(", ")", "{", "return", "Feign", ".", "builder", "(", ")", ".", "client", "(", "new", "OkHttpClient", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testContentTypeWithoutCharset", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "OkHttpClientTestInterface", "api", "=", "newBuilder", "(", ")", ".", "target", "(", "OkHttpClientTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "getWithContentType", "(", ")", ";", "assertEquals", "(", "\"", "<STR_LIT>", "\"", ",", "Util", ".", "toString", "(", "response", ".", "body", "(", ")", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ")", ")", ";", "MockWebServerAssertions", ".", "assertThat", "(", "server", ".", "takeRequest", "(", ")", ")", ".", "hasHeaders", "(", "MapEntry", ".", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "MapEntry", ".", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testNoFollowRedirect", "(", ")", "throws", "Exception", "{", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "addHeader", "(", "\"", "<STR_LIT>", "\"", ",", "server", ".", "url", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "\"", "<STR_LIT:Hello>", "\"", ")", ")", ";", "OkHttpClientTestInterface", "api", "=", "newBuilder", "(", ")", ".", "options", "(", "new", "Request", ".", "Options", "(", "<NUM_LIT>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "<NUM_LIT>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "false", ")", ")", ".", "target", "(", "OkHttpClientTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "get", "(", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "response", ".", "status", "(", ")", ")", ";", "assertEquals", "(", "server", ".", "url", "(", "\"", "<STR_LIT>", "\"", ")", ".", "toString", "(", ")", ",", "response", ".", "headers", "(", ")", ".", "get", "(", "\"", "<STR_LIT>", "\"", ")", ".", "iterator", "(", ")", ".", "next", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "testFollowRedirect", "(", ")", "throws", "Exception", "{", "String", "expectedBody", "=", "\"", "<STR_LIT:Hello>", "\"", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setResponseCode", "(", "<NUM_LIT>", ")", ".", "addHeader", "(", "\"", "<STR_LIT>", "\"", ",", "server", ".", "url", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "server", ".", "enqueue", "(", "new", "MockResponse", "(", ")", ".", "setBody", "(", "expectedBody", ")", ")", ";", "OkHttpClientTestInterface", "api", "=", "newBuilder", "(", ")", ".", "options", "(", "new", "Request", ".", "Options", "(", "<NUM_LIT>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "<NUM_LIT>", ",", "TimeUnit", ".", "MILLISECONDS", ",", "true", ")", ")", ".", "target", "(", "OkHttpClientTestInterface", ".", "class", ",", "\"", "<STR_LIT>", "\"", "+", "server", ".", "getPort", "(", ")", ")", ";", "Response", "response", "=", "api", ".", "get", "(", ")", ";", "assertEquals", "(", "<NUM_LIT>", ",", "response", ".", "status", "(", ")", ")", ";", "assertEquals", "(", "expectedBody", ",", "response", ".", "body", "(", ")", ".", "toString", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Headers", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "Response", "getWithContentType", "(", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "get", "(", ")", ";", "</s>"]
["<s>", "public", "OkHttpClient", "(", ")", "{", "this", "(", "new", "okhttp3", ".", "OkHttpClient", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "OkHttpClient", "(", "okhttp3", ".", "OkHttpClient", "delegate", ")", "{", "this", ".", "delegate", "=", "delegate", ";", "}", "</s>"]
["<s>", "static", "Request", "toOkHttpRequest", "(", "feign", ".", "Request", "input", ")", "{", "Request", ".", "Builder", "requestBuilder", "=", "new", "Request", ".", "Builder", "(", ")", ";", "requestBuilder", ".", "url", "(", "input", ".", "url", "(", ")", ")", ";", "MediaType", "mediaType", "=", "null", ";", "boolean", "hasAcceptHeader", "=", "false", ";", "for", "(", "String", "field", ":", "input", ".", "headers", "(", ")", ".", "keySet", "(", ")", ")", "{", "if", "(", "field", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "hasAcceptHeader", "=", "true", ";", "}", "for", "(", "String", "value", ":", "input", ".", "headers", "(", ")", ".", "get", "(", "field", ")", ")", "{", "requestBuilder", ".", "addHeader", "(", "field", ",", "value", ")", ";", "if", "(", "field", ".", "equalsIgnoreCase", "(", "\"", "<STR_LIT:Content-Type>", "\"", ")", ")", "{", "mediaType", "=", "MediaType", ".", "parse", "(", "value", ")", ";", "if", "(", "input", ".", "charset", "(", ")", "!", "=", "null", ")", "{", "mediaType", ".", "charset", "(", "input", ".", "charset", "(", ")", ")", ";", "}", "}", "}", "}", "if", "(", "!", "hasAcceptHeader", ")", "{", "requestBuilder", ".", "addHeader", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "byte", "[", "]", "inputBody", "=", "input", ".", "body", "(", ")", ";", "boolean", "isMethodWithBody", "=", "HttpMethod", ".", "POST", "=", "=", "input", ".", "httpMethod", "(", ")", "|", "|", "HttpMethod", ".", "PUT", "=", "=", "input", ".", "httpMethod", "(", ")", "|", "|", "HttpMethod", ".", "PATCH", "=", "=", "input", ".", "httpMethod", "(", ")", ";", "if", "(", "isMethodWithBody", ")", "{", "requestBuilder", ".", "removeHeader", "(", "\"", "<STR_LIT:Content-Type>", "\"", ")", ";", "if", "(", "inputBody", "=", "=", "null", ")", "{", "inputBody", "=", "new", "byte", "[", "0", "]", ";", "}", "}", "RequestBody", "body", "=", "inputBody", "!", "=", "null", "?", "RequestBody", ".", "create", "(", "mediaType", ",", "inputBody", ")", ":", "null", ";", "requestBuilder", ".", "method", "(", "input", ".", "httpMethod", "(", ")", ".", "name", "(", ")", ",", "body", ")", ";", "return", "requestBuilder", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "feign", ".", "Response", "toFeignResponse", "(", "Response", "response", ",", "feign", ".", "Request", "request", ")", "throws", "IOException", "{", "return", "feign", ".", "Response", ".", "builder", "(", ")", ".", "status", "(", "response", ".", "code", "(", ")", ")", ".", "reason", "(", "response", ".", "message", "(", ")", ")", ".", "request", "(", "request", ")", ".", "headers", "(", "toMap", "(", "response", ".", "headers", "(", ")", ")", ")", ".", "body", "(", "toBody", "(", "response", ".", "body", "(", ")", ")", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "Map", "<", "String", ",", "Collection", "<", "String", ">", ">", "toMap", "(", "Headers", "headers", ")", "{", "return", "(", "Map", ")", "headers", ".", "toMultimap", "(", ")", ";", "}", "</s>"]
["<s>", "private", "static", "feign", ".", "Response", ".", "Body", "toBody", "(", "final", "ResponseBody", "input", ")", "throws", "IOException", "{", "if", "(", "input", "=", "=", "null", "|", "|", "input", ".", "contentLength", "(", ")", "=", "=", "0", ")", "{", "if", "(", "input", "!", "=", "null", ")", "{", "input", ".", "close", "(", ")", ";", "}", "return", "null", ";", "}", "final", "Integer", "length", "=", "input", ".", "contentLength", "(", ")", ">", "=", "0", "&", "&", "input", ".", "contentLength", "(", ")", "<", "=", "Integer", ".", "MAX_VALUE", "?", "(", "int", ")", "input", ".", "contentLength", "(", ")", ":", "null", ";", "return", "new", "feign", ".", "Response", ".", "Body", "(", ")", "{", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "input", ".", "close", "(", ")", ";", "}", "@", "Override", "public", "Integer", "length", "(", ")", "{", "return", "length", ";", "}", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "false", ";", "}", "@", "Override", "public", "InputStream", "asInputStream", "(", ")", "throws", "IOException", "{", "return", "input", ".", "byteStream", "(", ")", ";", "}", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Reader", "asReader", "(", ")", "throws", "IOException", "{", "return", "input", ".", "charStream", "(", ")", ";", "}", "@", "Override", "public", "Reader", "asReader", "(", "Charset", "charset", ")", "throws", "IOException", "{", "return", "asReader", "(", ")", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "input", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Integer", "length", "(", ")", "{", "return", "length", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "isRepeatable", "(", ")", "{", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "InputStream", "asInputStream", "(", ")", "throws", "IOException", "{", "return", "input", ".", "byteStream", "(", ")", ";", "}", "</s>"]
["<s>", "@", "SuppressWarnings", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Override", "public", "Reader", "asReader", "(", ")", "throws", "IOException", "{", "return", "input", ".", "charStream", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Reader", "asReader", "(", "Charset", "charset", ")", "throws", "IOException", "{", "return", "asReader", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "feign", ".", "Response", "execute", "(", "feign", ".", "Request", "input", ",", "feign", ".", "Request", ".", "Options", "options", ")", "throws", "IOException", "{", "okhttp3", ".", "OkHttpClient", "requestScoped", ";", "if", "(", "delegate", ".", "connectTimeoutMillis", "(", ")", "!", "=", "options", ".", "connectTimeoutMillis", "(", ")", "|", "|", "delegate", ".", "readTimeoutMillis", "(", ")", "!", "=", "options", ".", "readTimeoutMillis", "(", ")", "|", "|", "delegate", ".", "followRedirects", "(", ")", "!", "=", "options", ".", "isFollowRedirects", "(", ")", ")", "{", "requestScoped", "=", "delegate", ".", "newBuilder", "(", ")", ".", "connectTimeout", "(", "options", ".", "connectTimeoutMillis", "(", ")", ",", "TimeUnit", ".", "MILLISECONDS", ")", ".", "readTimeout", "(", "options", ".", "readTimeoutMillis", "(", ")", ",", "TimeUnit", ".", "MILLISECONDS", ")", ".", "followRedirects", "(", "options", ".", "isFollowRedirects", "(", ")", ")", ".", "build", "(", ")", ";", "}", "else", "{", "requestScoped", "=", "delegate", ";", "}", "Request", "request", "=", "toOkHttpRequest", "(", "input", ")", ";", "Response", "response", "=", "requestScoped", ".", "newCall", "(", "request", ")", ".", "execute", "(", ")", ";", "return", "toFeignResponse", "(", "response", ",", "input", ")", ".", "toBuilder", "(", ")", ".", "request", "(", "input", ")", ".", "build", "(", ")", ";", "}", "</s>"]
["<s>", "protected", "JAXRSContract", "createContract", "(", ")", "{", "return", "new", "JAXRSContract", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "httpMethods", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "Methods", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:POST>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "Methods", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "Methods", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT:GET>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "Methods", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customMethodWithoutPath", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "CustomMethod", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasMethod", "(", "\"", "<STR_LIT>", "\"", ")", ".", "hasUrl", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "queryParamsInPathExtract", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "WithQueryParamsInPath", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "WithQueryParamsInPath", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "WithQueryParamsInPath", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "WithQueryParamsInPath", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "WithQueryParamsInPath", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasPath", "(", "\"", "<STR_LIT:/>", "\"", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "new", "ArrayList", "<", ">", "(", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "producesAddsAcceptHeader", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "ProducesAndConsumes", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "producesMultipleAddsAcceptHeader", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "ProducesAndConsumes", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "producesNada", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "ProducesAndConsumes", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "producesEmpty", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "ProducesAndConsumes", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "consumesAddsContentTypeHeader", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "ProducesAndConsumes", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "consumesMultipleAddsContentTypeHeader", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "ProducesAndConsumes", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "consumesNada", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "ProducesAndConsumes", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "consumesEmpty", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "ProducesAndConsumes", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "producesAndConsumesOnClassAddsHeader", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "ProducesAndConsumes", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT:Content-Type>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "bodyParamIsGeneric", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "BodyParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "List", ".", "class", ")", ";", "assertThat", "(", "md", ".", "bodyIndex", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "md", ".", "bodyType", "(", ")", ")", ".", "isEqualTo", "(", "JAXRSContractTest", ".", "class", ".", "getDeclaredField", "(", "\"", "<STR_LIT>", "\"", ")", ".", "getGenericType", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "tooManyBodies", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "BodyParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "List", ".", "class", ",", "List", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyPathOnType", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "EmptyPathOnType", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT:/>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyPathOnTypeSpecific", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "EmptyPathOnType", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "parsePathMethod", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "PathOnType", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "PathOnType", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyPathOnMethod", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "PathOnType", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyPathParam", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "PathOnType", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathParamWithSpaces", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "PathOnType", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "regexPathOnMethodOrType", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "PathOnType", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "PathOnType", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "parseAndValidateMetadata", "(", "ComplexPathOnType", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "withPathAndURIParams", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "WithURIParam", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "URI", ".", "class", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT:1>", "\"", ")", ")", ",", "entry", "(", "<NUM_LIT:2>", ",", "asList", "(", "\"", "<STR_LIT:2>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "urlIndex", "(", ")", ")", ".", "isEqualTo", "(", "1", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathAndQueryParams", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "WithPathAndQueryParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "int", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "1", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "<NUM_LIT:2>", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyQueryParam", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "WithPathAndQueryParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "formParamsParseIntoIndexToName", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "FormParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "formParams", "(", ")", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "1", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "<NUM_LIT:2>", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "formParamsDoesNotSetBodyType", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "FormParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "bodyType", "(", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyFormParam", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "FormParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "headerParamsParseIntoIndexToName", "(", ")", "throws", "Exception", "{", "final", "MethodMetadata", "md", "=", "parseAndValidateMetadata", "(", "HeaderParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "assertThat", "(", "md", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "assertThat", "(", "md", ".", "indexToName", "(", ")", ")", ".", "containsExactly", "(", "entry", "(", "0", ",", "asList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyHeaderParam", "(", ")", "throws", "Exception", "{", "thrown", ".", "expect", "(", "IllegalStateException", ".", "class", ")", ";", "thrown", ".", "expectMessage", "(", "\"", "<STR_LIT>", "\"", ")", ";", "parseAndValidateMetadata", "(", "HeaderParams", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathsWithoutSlashesParseCorrectly", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "PathsWithoutAnySlashes", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathsWithSomeSlashesParseCorrectly", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "PathsWithSomeSlashes", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "pathsWithSomeOtherSlashesParseCorrectly", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "PathsWithSomeOtherSlashes", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "classWithRootPathParsesCorrectly", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "ClassRootPath", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "classPathWithTrailingSlashParsesCorrectly", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "ClassPathWithTrailingSlash", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "methodPathWithoutLeadingSlashParsesCorrectly", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "MethodWithFirstPathThenGetWithoutLeadingSlash", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ".", "template", "(", ")", ")", ".", "hasUrl", "(", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "producesWithHeaderParamContainAllHeaders", "(", ")", "throws", "Exception", "{", "assertThat", "(", "parseAndValidateMetadata", "(", "MixedAnnotations", ".", "class", ",", "\"", "<STR_LIT>", "\"", ",", "String", ".", "class", ",", "String", ".", "class", ",", "String", ".", "class", ")", ".", "template", "(", ")", ")", ".", "hasHeaders", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ")", ".", "hasQueries", "(", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ",", "entry", "(", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "singletonList", "(", "\"", "<STR_LIT>", "\"", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "POST", "void", "post", "(", ")", ";", "</s>"]
["<s>", "@", "PUT", "void", "put", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "void", "get", "(", ")", ";", "</s>"]
["<s>", "@", "DELETE", "void", "delete", "(", ")", ";", "</s>"]
["<s>", "@", "PATCH", "Response", "patch", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT:/>", "\"", ")", "Response", "none", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "one", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "two", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "three", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "empty", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Produces", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "produces", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Produces", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "Response", "producesMultiple", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Produces", "(", "{", "}", ")", "Response", "producesNada", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Produces", "(", "{", "\"", "\"", "}", ")", "Response", "producesEmpty", "(", ")", ";", "</s>"]
["<s>", "@", "POST", "@", "Consumes", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "consumes", "(", ")", ";", "</s>"]
["<s>", "@", "POST", "@", "Consumes", "(", "{", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", "}", ")", "Response", "consumesMultiple", "(", ")", ";", "</s>"]
["<s>", "@", "POST", "@", "Consumes", "(", "{", "}", ")", "Response", "consumesNada", "(", ")", ";", "</s>"]
["<s>", "@", "POST", "@", "Consumes", "(", "{", "\"", "\"", "}", ")", "Response", "consumesEmpty", "(", ")", ";", "</s>"]
["<s>", "@", "POST", "Response", "producesAndConsumes", "(", ")", ";", "</s>"]
["<s>", "@", "POST", "Response", "post", "(", "List", "<", "String", ">", "body", ")", ";", "</s>"]
["<s>", "@", "POST", "Response", "tooMany", "(", "List", "<", "String", ">", "body", ",", "List", "<", "String", ">", "body2", ")", ";", "</s>"]
["<s>", "@", "GET", "Response", "base", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "get", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "Response", "base", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "get", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "\"", ")", "Response", "emptyPath", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "emptyPathParam", "(", "@", "PathParam", "(", "\"", "\"", ")", "String", "empty", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "pathParamWithSpaces", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "path", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "pathParamWithRegex", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "path", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "pathParamWithMultipleRegex", "(", "@", "PathParam", "(", "\"", "<STR_LIT:1>", "\"", ")", "String", "param1", ",", "@", "PathParam", "(", "\"", "<STR_LIT:2>", "\"", ")", "String", "param2", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "pathParamWithMultipleRegex", "(", "@", "PathParam", "(", "\"", "<STR_LIT:1>", "\"", ")", "String", "param1", ",", "@", "PathParam", "(", "\"", "<STR_LIT:2>", "\"", ")", "String", "param2", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "uriParam", "(", "@", "PathParam", "(", "\"", "<STR_LIT:1>", "\"", ")", "String", "one", ",", "URI", "endpoint", ",", "@", "PathParam", "(", "\"", "<STR_LIT:2>", "\"", ")", "String", "two", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "recordsByNameAndType", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "int", "id", ",", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "nameFilter", ",", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "typeFilter", ")", ";", "</s>"]
["<s>", "@", "GET", "Response", "empty", "(", "@", "QueryParam", "(", "\"", "\"", ")", "String", "empty", ")", ";", "</s>"]
["<s>", "@", "POST", "void", "login", "(", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "customer", ",", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "user", ",", "@", "FormParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "password", ")", ";", "</s>"]
["<s>", "@", "GET", "Response", "emptyFormParam", "(", "@", "FormParam", "(", "\"", "\"", ")", "String", "empty", ")", ";", "</s>"]
["<s>", "@", "POST", "void", "logout", "(", "@", "HeaderParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "token", ")", ";", "</s>"]
["<s>", "@", "GET", "Response", "emptyHeaderParam", "(", "@", "HeaderParam", "(", "\"", "\"", ")", "String", "empty", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "get", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "get", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "get", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "get", "(", ")", ";", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "get", "(", ")", ";", "</s>"]
["<s>", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "GET", "Response", "get", "(", ")", ";", "</s>"]
["<s>", "protected", "MethodMetadata", "parseAndValidateMetadata", "(", "Class", "<", "?", ">", "targetType", ",", "String", "method", ",", "Class", "<", "?", ">", ".", ".", ".", "parameterTypes", ")", "throws", "NoSuchMethodException", "{", "return", "contract", ".", "parseAndValidateMetadata", "(", "targetType", ",", "targetType", ".", "getMethod", "(", "method", ",", "parameterTypes", ")", ")", ";", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "@", "Produces", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "getWithHeaders", "(", "@", "HeaderParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "accept", ",", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "multiple", ",", "@", "QueryParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "another", ")", ";", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", ".", ".", ".", "args", ")", "throws", "InterruptedException", "{", "GitHub", "github", "=", "Feign", ".", "builder", "(", ")", ".", "contract", "(", "new", "JAXRSContract", "(", ")", ")", ".", "target", "(", "GitHub", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "List", "<", "Contributor", ">", "contributors", "=", "github", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "Contributor", "contributor", ":", "contributors", ")", "{", "System", ".", "out", ".", "println", "(", "contributor", ".", "login", "+", "\"", "<STR_LIT>", "\"", "+", "contributor", ".", "contributions", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "GET", "@", "Path", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "Contributor", ">", "contributors", "(", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "PathParam", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "@", "Override", "protected", "MethodMetadata", "parseAndValidateMetadata", "(", "Class", "<", "?", ">", "targetType", ",", "Method", "method", ")", "{", "return", "super", ".", "parseAndValidateMetadata", "(", "targetType", ",", "method", ")", ";", "}", "</s>"]
["<s>", "public", "JAXRSContract", "(", ")", "{", "super", ".", "registerClassAnnotation", "(", "Path", ".", "class", ",", "(", "path", ",", "data", ")", "-", ">", "{", "if", "(", "path", "!", "=", "null", "&", "&", "!", "path", ".", "value", "(", ")", ".", "isEmpty", "(", ")", ")", "{", "String", "pathValue", "=", "path", ".", "value", "(", ")", ";", "if", "(", "!", "pathValue", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", "{", "pathValue", "=", "\"", "<STR_LIT:/>", "\"", "+", "pathValue", ";", "}", "if", "(", "pathValue", ".", "endsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", "{", "pathValue", "=", "pathValue", ".", "substring", "(", "0", ",", "pathValue", ".", "length", "(", ")", "-", "1", ")", ";", "}", "pathValue", "=", "pathValue", ".", "replaceAll", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:{>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:}>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:}>", "\"", ")", ";", "data", ".", "template", "(", ")", ".", "uri", "(", "pathValue", ")", ";", "}", "}", ")", ";", "super", ".", "registerClassAnnotation", "(", "Consumes", ".", "class", ",", "this", ":", ":", "handleConsumesAnnotation", ")", ";", "super", ".", "registerClassAnnotation", "(", "Produces", ".", "class", ",", "this", ":", ":", "handleProducesAnnotation", ")", ";", "registerMethodAnnotation", "(", "methodAnnotation", "-", ">", "{", "Class", "<", "?", "extends", "Annotation", ">", "annotationType", "=", "methodAnnotation", ".", "annotationType", "(", ")", ";", "HttpMethod", "http", "=", "annotationType", ".", "getAnnotation", "(", "HttpMethod", ".", "class", ")", ";", "return", "http", "!", "=", "null", ";", "}", ",", "(", "methodAnnotation", ",", "data", ")", "-", ">", "{", "Class", "<", "?", "extends", "Annotation", ">", "annotationType", "=", "methodAnnotation", ".", "annotationType", "(", ")", ";", "HttpMethod", "http", "=", "annotationType", ".", "getAnnotation", "(", "HttpMethod", ".", "class", ")", ";", "checkState", "(", "data", ".", "template", "(", ")", ".", "method", "(", ")", "=", "=", "null", ",", "\"", "<STR_LIT>", "\"", ",", "data", ".", "configKey", "(", ")", ",", "data", ".", "template", "(", ")", ".", "method", "(", ")", ",", "http", ".", "value", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "method", "(", "Request", ".", "HttpMethod", ".", "valueOf", "(", "http", ".", "value", "(", ")", ")", ")", ";", "}", ")", ";", "super", ".", "registerMethodAnnotation", "(", "Path", ".", "class", ",", "(", "path", ",", "data", ")", "-", ">", "{", "final", "String", "pathValue", "=", "emptyToNull", "(", "path", ".", "value", "(", ")", ")", ";", "if", "(", "pathValue", "=", "=", "null", ")", "{", "return", ";", "}", "String", "methodAnnotationValue", "=", "path", ".", "value", "(", ")", ";", "if", "(", "!", "methodAnnotationValue", ".", "startsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", "&", "&", "!", "data", ".", "template", "(", ")", ".", "url", "(", ")", ".", "endsWith", "(", "\"", "<STR_LIT:/>", "\"", ")", ")", "{", "methodAnnotationValue", "=", "\"", "<STR_LIT:/>", "\"", "+", "methodAnnotationValue", ";", "}", "methodAnnotationValue", "=", "methodAnnotationValue", ".", "replaceAll", "(", "\"", "<STR_LIT:\\\\>", "<STR_LIT:{>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:}>", "\"", ",", "\"", "<STR_LIT:\\\\>", "<STR_LIT>", "<STR_LIT:\\\\>", "<STR_LIT:}>", "\"", ")", ";", "data", ".", "template", "(", ")", ".", "uri", "(", "methodAnnotationValue", ",", "true", ")", ";", "}", ")", ";", "super", ".", "registerMethodAnnotation", "(", "Consumes", ".", "class", ",", "this", ":", ":", "handleConsumesAnnotation", ")", ";", "super", ".", "registerMethodAnnotation", "(", "Produces", ".", "class", ",", "this", ":", ":", "handleProducesAnnotation", ")", ";", "registerParamAnnotations", "(", ")", ";", "}", "</s>"]
["<s>", "private", "void", "handleProducesAnnotation", "(", "Produces", "produces", ",", "MethodMetadata", "data", ")", "{", "final", "String", "[", "]", "serverProduces", "=", "removeValues", "(", "produces", ".", "value", "(", ")", ",", "(", "mediaType", ")", "-", ">", "emptyToNull", "(", "mediaType", ")", "=", "=", "null", ",", "String", ".", "class", ")", ";", "checkState", "(", "serverProduces", ".", "length", ">", "0", ",", "\"", "<STR_LIT>", "\"", ",", "data", ".", "configKey", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "header", "(", "ACCEPT", ",", "Collections", ".", "emptyList", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "header", "(", "ACCEPT", ",", "serverProduces", ")", ";", "}", "</s>"]
["<s>", "private", "void", "handleConsumesAnnotation", "(", "Consumes", "consumes", ",", "MethodMetadata", "data", ")", "{", "final", "String", "[", "]", "serverConsumes", "=", "removeValues", "(", "consumes", ".", "value", "(", ")", ",", "(", "mediaType", ")", "-", ">", "emptyToNull", "(", "mediaType", ")", "=", "=", "null", ",", "String", ".", "class", ")", ";", "checkState", "(", "serverConsumes", ".", "length", ">", "0", ",", "\"", "<STR_LIT>", "\"", ",", "data", ".", "configKey", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "header", "(", "CONTENT_TYPE", ",", "Collections", ".", "emptyList", "(", ")", ")", ";", "data", ".", "template", "(", ")", ".", "header", "(", "CONTENT_TYPE", ",", "serverConsumes", "[", "0", "]", ")", ";", "}", "</s>"]
["<s>", "protected", "void", "registerParamAnnotations", "(", ")", "{", "{", "registerParameterAnnotation", "(", "PathParam", ".", "class", ",", "(", "param", ",", "data", ",", "paramIndex", ")", "-", ">", "{", "final", "String", "name", "=", "param", ".", "value", "(", ")", ";", "checkState", "(", "emptyToNull", "(", "name", ")", "!", "=", "null", ",", "\"", "<STR_LIT>", "\"", ",", "paramIndex", ")", ";", "nameParam", "(", "data", ",", "name", ",", "paramIndex", ")", ";", "}", ")", ";", "registerParameterAnnotation", "(", "QueryParam", ".", "class", ",", "(", "param", ",", "data", ",", "paramIndex", ")", "-", ">", "{", "final", "String", "name", "=", "param", ".", "value", "(", ")", ";", "checkState", "(", "emptyToNull", "(", "name", ")", "!", "=", "null", ",", "\"", "<STR_LIT>", "\"", ",", "paramIndex", ")", ";", "final", "String", "query", "=", "addTemplatedParam", "(", "name", ")", ";", "data", ".", "template", "(", ")", ".", "query", "(", "name", ",", "query", ")", ";", "nameParam", "(", "data", ",", "name", ",", "paramIndex", ")", ";", "}", ")", ";", "registerParameterAnnotation", "(", "HeaderParam", ".", "class", ",", "(", "param", ",", "data", ",", "paramIndex", ")", "-", ">", "{", "final", "String", "name", "=", "param", ".", "value", "(", ")", ";", "checkState", "(", "emptyToNull", "(", "name", ")", "!", "=", "null", ",", "\"", "<STR_LIT>", "\"", ",", "paramIndex", ")", ";", "final", "String", "header", "=", "addTemplatedParam", "(", "name", ")", ";", "data", ".", "template", "(", ")", ".", "header", "(", "name", ",", "header", ")", ";", "nameParam", "(", "data", ",", "name", ",", "paramIndex", ")", ";", "}", ")", ";", "registerParameterAnnotation", "(", "FormParam", ".", "class", ",", "(", "param", ",", "data", ",", "paramIndex", ")", "-", ">", "{", "final", "String", "name", "=", "param", ".", "value", "(", ")", ";", "checkState", "(", "emptyToNull", "(", "name", ")", "!", "=", "null", ",", "\"", "<STR_LIT>", "\"", ",", "paramIndex", ")", ";", "data", ".", "formParams", "(", ")", ".", "add", "(", "name", ")", ";", "nameParam", "(", "data", ",", "name", ",", "paramIndex", ")", ";", "}", ")", ";", "}", "}", "</s>"]
["<s>", "private", "String", "addTemplatedParam", "(", "String", "name", ")", "{", "return", "String", ".", "format", "(", "\"", "<STR_LIT>", "\"", ",", "name", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "runMain", "(", ")", "throws", "Exception", "{", "final", "String", "jar", "=", "Arrays", ".", "stream", "(", "new", "File", "(", "\"", "<STR_LIT>", "\"", ")", ".", "listFiles", "(", ")", ")", ".", "filter", "(", "file", "-", ">", "file", ".", "getName", "(", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", "&", "&", "file", ".", "getName", "(", ")", ".", "endsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "findFirst", "(", ")", ".", "map", "(", "File", ":", ":", "getAbsolutePath", ")", ".", "get", "(", ")", ";", "final", "String", "line", "=", "\"", "<STR_LIT>", "\"", "+", "jar", ";", "final", "CommandLine", "cmdLine", "=", "CommandLine", ".", "parse", "(", "line", ")", ";", "final", "int", "exitValue", "=", "new", "DefaultExecutor", "(", ")", ".", "execute", "(", "cmdLine", ")", ";", "assertThat", "(", "exitValue", ",", "CoreMatchers", ".", "equalTo", "(", "0", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "String", "query", "(", ")", "{", "return", "\"", "<STR_LIT>", "\"", ";", "}", "</s>"]
["<s>", "@", "Override", "protected", "Page", "build", "(", "JsonReader", "reader", ")", "throws", "IOException", "{", "Page", "page", "=", "new", "Page", "(", ")", ";", "while", "(", "reader", ".", "hasNext", "(", ")", ")", "{", "String", "key", "=", "reader", ".", "nextName", "(", ")", ";", "if", "(", "key", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "page", ".", "id", "=", "reader", ".", "nextLong", "(", ")", ";", "}", "else", "if", "(", "key", ".", "equals", "(", "\"", "<STR_LIT>", "\"", ")", ")", "{", "page", ".", "title", "=", "reader", ".", "nextString", "(", ")", ";", "}", "else", "{", "reader", ".", "skipValue", "(", ")", ";", "}", "}", "return", "page", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", ".", ".", ".", "args", ")", "throws", "InterruptedException", "{", "Gson", "gson", "=", "new", "GsonBuilder", "(", ")", ".", "registerTypeAdapter", "(", "new", "TypeToken", "<", "Response", "<", "Page", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ",", "pagesAdapter", ")", ".", "create", "(", ")", ";", "Wikipedia", "wikipedia", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "new", "GsonDecoder", "(", "gson", ")", ")", ".", "logger", "(", "new", "Logger", ".", "ErrorLogger", "(", ")", ")", ".", "logLevel", "(", "Logger", ".", "Level", ".", "BASIC", ")", ".", "target", "(", "Wikipedia", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Iterator", "<", "Page", ">", "pages", "=", "lazySearch", "(", "wikipedia", ",", "\"", "<STR_LIT>", "\"", ")", ";", "while", "(", "pages", ".", "hasNext", "(", ")", ")", "{", "System", ".", "out", ".", "println", "(", "pages", ".", "next", "(", ")", ".", "title", ")", ";", "}", "}", "</s>"]
["<s>", "static", "Iterator", "<", "Page", ">", "lazySearch", "(", "final", "Wikipedia", "wikipedia", ",", "final", "String", "query", ")", "{", "final", "Response", "<", "Page", ">", "first", "=", "wikipedia", ".", "search", "(", "query", ")", ";", "if", "(", "first", ".", "nextOffset", "=", "=", "null", ")", "{", "return", "first", ".", "iterator", "(", ")", ";", "}", "return", "new", "Iterator", "<", "Page", ">", "(", ")", "{", "Iterator", "<", "Page", ">", "current", "=", "first", ".", "iterator", "(", ")", ";", "Long", "nextOffset", "=", "first", ".", "nextOffset", ";", "@", "Override", "public", "boolean", "hasNext", "(", ")", "{", "while", "(", "!", "current", ".", "hasNext", "(", ")", "&", "&", "nextOffset", "!", "=", "null", ")", "{", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", "+", "nextOffset", ")", ";", "Response", "<", "Page", ">", "nextPage", "=", "wikipedia", ".", "resumeSearch", "(", "query", ",", "nextOffset", ")", ";", "current", "=", "nextPage", ".", "iterator", "(", ")", ";", "nextOffset", "=", "nextPage", ".", "nextOffset", ";", "}", "return", "current", ".", "hasNext", "(", ")", ";", "}", "@", "Override", "public", "Page", "next", "(", ")", "{", "return", "current", ".", "next", "(", ")", ";", "}", "@", "Override", "public", "void", "remove", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "}", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "hasNext", "(", ")", "{", "while", "(", "!", "current", ".", "hasNext", "(", ")", "&", "&", "nextOffset", "!", "=", "null", ")", "{", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", "+", "nextOffset", ")", ";", "Response", "<", "Page", ">", "nextPage", "=", "wikipedia", ".", "resumeSearch", "(", "query", ",", "nextOffset", ")", ";", "current", "=", "nextPage", ".", "iterator", "(", ")", ";", "nextOffset", "=", "nextPage", ".", "nextOffset", ";", "}", "return", "current", ".", "hasNext", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Page", "next", "(", ")", "{", "return", "current", ".", "next", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "remove", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "<", "Page", ">", "search", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "search", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Response", "<", "Page", ">", "resumeSearch", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "search", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "long", "offset", ")", ";", "</s>"]
["<s>", "protected", "abstract", "String", "query", "(", ")", ";", "</s>"]
["<s>", "protected", "abstract", "X", "build", "(", "JsonReader", "reader", ")", "throws", "IOException", ";", "</s>"]
["<s>", "@", "Override", "public", "WikipediaExample", ".", "Response", "<", "X", ">", "read", "(", "JsonReader", "reader", ")", "throws", "IOException", "{", "WikipediaExample", ".", "Response", "<", "X", ">", "pages", "=", "new", "WikipediaExample", ".", "Response", "<", "X", ">", "(", ")", ";", "reader", ".", "beginObject", "(", ")", ";", "while", "(", "reader", ".", "hasNext", "(", ")", ")", "{", "String", "nextName", "=", "reader", ".", "nextName", "(", ")", ";", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "nextName", ")", ")", "{", "reader", ".", "beginObject", "(", ")", ";", "while", "(", "reader", ".", "hasNext", "(", ")", ")", "{", "if", "(", "query", "(", ")", ".", "equals", "(", "reader", ".", "nextName", "(", ")", ")", ")", "{", "reader", ".", "beginObject", "(", ")", ";", "while", "(", "reader", ".", "hasNext", "(", ")", ")", "{", "reader", ".", "nextName", "(", ")", ";", "reader", ".", "beginObject", "(", ")", ";", "pages", ".", "add", "(", "build", "(", "reader", ")", ")", ";", "reader", ".", "endObject", "(", ")", ";", "}", "reader", ".", "endObject", "(", ")", ";", "}", "else", "{", "reader", ".", "skipValue", "(", ")", ";", "}", "}", "reader", ".", "endObject", "(", ")", ";", "}", "else", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "nextName", ")", ")", "{", "reader", ".", "beginObject", "(", ")", ";", "while", "(", "reader", ".", "hasNext", "(", ")", ")", "{", "if", "(", "\"", "<STR_LIT>", "\"", ".", "equals", "(", "reader", ".", "nextName", "(", ")", ")", ")", "{", "pages", ".", "nextOffset", "=", "reader", ".", "nextLong", "(", ")", ";", "}", "else", "{", "reader", ".", "skipValue", "(", ")", ";", "}", "}", "reader", ".", "endObject", "(", ")", ";", "}", "else", "{", "reader", ".", "skipValue", "(", ")", ";", "}", "}", "reader", ".", "endObject", "(", ")", ";", "return", "pages", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "write", "(", "JsonWriter", "out", ",", "WikipediaExample", ".", "Response", "<", "X", ">", "response", ")", "throws", "IOException", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodeTest", "(", ")", "{", "JacksonJaxbJsonEncoder", "encoder", "=", "new", "JacksonJaxbJsonEncoder", "(", ")", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "new", "MockObject", "(", "\"", "<STR_LIT:Test>", "\"", ")", ",", "MockObject", ".", "class", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT:Test>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodeTest", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "\"", "<STR_LIT:{>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT:Test>", "<STR_LIT:\\\">", "<STR_LIT:}>", "\"", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "JacksonJaxbJsonDecoder", "decoder", "=", "new", "JacksonJaxbJsonDecoder", "(", ")", ";", "assertThat", "(", "decoder", ".", "decode", "(", "response", ",", "MockObject", ".", "class", ")", ")", ".", "isEqualTo", "(", "new", "MockObject", "(", "\"", "<STR_LIT:Test>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notFoundDecodesToNull", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "build", "(", ")", ";", "assertThat", "(", "(", "byte", "[", "]", ")", "new", "JacksonJaxbJsonDecoder", "(", ")", ".", "decode", "(", "response", ",", "byte", "[", "]", ".", "class", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "MockObject", "(", ")", "{", "}", "</s>"]
["<s>", "MockObject", "(", "String", "value", ")", "{", "this", ".", "value", "=", "value", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "equals", "(", "Object", "obj", ")", "{", "if", "(", "obj", "instanceof", "MockObject", ")", "{", "MockObject", "other", "=", "(", "MockObject", ")", "obj", ";", "return", "value", ".", "equals", "(", "other", ".", "value", ")", ";", "}", "return", "false", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "int", "hashCode", "(", ")", "{", "return", "value", "!", "=", "null", "?", "value", ".", "hashCode", "(", ")", ":", "0", ";", "}", "</s>"]
["<s>", "public", "JacksonJaxbJsonEncoder", "(", ")", "{", "this", ".", "jacksonJaxbJsonProvider", "=", "new", "JacksonJaxbJsonProvider", "(", ")", ";", "}", "</s>"]
["<s>", "public", "JacksonJaxbJsonEncoder", "(", "ObjectMapper", "objectMapper", ")", "{", "this", ".", "jacksonJaxbJsonProvider", "=", "new", "JacksonJaxbJsonProvider", "(", "objectMapper", ",", "DEFAULT_ANNOTATIONS", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "throws", "EncodeException", "{", "ByteArrayOutputStream", "outputStream", "=", "new", "ByteArrayOutputStream", "(", ")", ";", "try", "{", "jacksonJaxbJsonProvider", ".", "writeTo", "(", "object", ",", "bodyType", ".", "getClass", "(", ")", ",", "null", ",", "null", ",", "APPLICATION_JSON_TYPE", ",", "null", ",", "outputStream", ")", ";", "template", ".", "body", "(", "outputStream", ".", "toByteArray", "(", ")", ",", "Charset", ".", "defaultCharset", "(", ")", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "EncodeException", "(", "e", ".", "getMessage", "(", ")", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "public", "JacksonJaxbJsonDecoder", "(", ")", "{", "this", ".", "jacksonJaxbJsonProvider", "=", "new", "JacksonJaxbJsonProvider", "(", ")", ";", "}", "</s>"]
["<s>", "public", "JacksonJaxbJsonDecoder", "(", "ObjectMapper", "objectMapper", ")", "{", "this", ".", "jacksonJaxbJsonProvider", "=", "new", "JacksonJaxbJsonProvider", "(", "objectMapper", ",", "DEFAULT_ANNOTATIONS", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", ",", "FeignException", "{", "if", "(", "response", ".", "body", "(", ")", "=", "=", "null", ")", "return", "null", ";", "return", "jacksonJaxbJsonProvider", ".", "readFrom", "(", "Object", ".", "class", ",", "type", ",", "null", ",", "APPLICATION_JSON_TYPE", ",", "null", ",", "response", ".", "body", "(", ")", ".", "asInputStream", "(", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "runMain", "(", ")", "throws", "Exception", "{", "final", "String", "jar", "=", "Arrays", ".", "stream", "(", "new", "File", "(", "\"", "<STR_LIT>", "\"", ")", ".", "listFiles", "(", ")", ")", ".", "filter", "(", "file", "-", ">", "file", ".", "getName", "(", ")", ".", "startsWith", "(", "\"", "<STR_LIT>", "\"", ")", "&", "&", "file", ".", "getName", "(", ")", ".", "endsWith", "(", "\"", "<STR_LIT>", "\"", ")", ")", ".", "findFirst", "(", ")", ".", "map", "(", "File", ":", ":", "getAbsolutePath", ")", ".", "get", "(", ")", ";", "final", "String", "line", "=", "\"", "<STR_LIT>", "\"", "+", "jar", ";", "final", "CommandLine", "cmdLine", "=", "CommandLine", ".", "parse", "(", "line", ")", ";", "final", "int", "exitValue", "=", "new", "DefaultExecutor", "(", ")", ".", "execute", "(", "cmdLine", ")", ";", "assertThat", "(", "exitValue", ",", "CoreMatchers", ".", "equalTo", "(", "0", ")", ")", ";", "}", "</s>"]
["<s>", "Issue", "(", ")", "{", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "Repository", ">", "repos", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "Contributor", ">", "contributors", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "void", "createIssue", "(", "Issue", "issue", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "default", "List", "<", "String", ">", "contributors", "(", "String", "owner", ")", "{", "return", "repos", "(", "owner", ")", ".", "stream", "(", ")", ".", "flatMap", "(", "repo", "-", ">", "contributors", "(", "owner", ",", "repo", ".", "name", ")", ".", "stream", "(", ")", ")", ".", "map", "(", "c", "-", ">", "c", ".", "login", ")", ".", "distinct", "(", ")", ".", "collect", "(", "Collectors", ".", "toList", "(", ")", ")", ";", "}", "</s>"]
["<s>", "static", "GitHub", "connect", "(", ")", "{", "final", "Decoder", "decoder", "=", "new", "GsonDecoder", "(", ")", ";", "final", "Encoder", "encoder", "=", "new", "GsonEncoder", "(", ")", ";", "return", "Feign", ".", "builder", "(", ")", ".", "encoder", "(", "encoder", ")", ".", "decoder", "(", "decoder", ")", ".", "errorDecoder", "(", "new", "GitHubErrorDecoder", "(", "decoder", ")", ")", ".", "logger", "(", "new", "Logger", ".", "ErrorLogger", "(", ")", ")", ".", "logLevel", "(", "Logger", ".", "Level", ".", "BASIC", ")", ".", "requestInterceptor", "(", "template", "-", ">", "{", "template", ".", "header", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", ")", ".", "target", "(", "GitHub", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "String", "getMessage", "(", ")", "{", "return", "message", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", ".", ".", ".", "args", ")", "{", "final", "GitHub", "github", "=", "GitHub", ".", "connect", "(", ")", ";", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "final", "List", "<", "String", ">", "contributors", "=", "github", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "final", "String", "contributor", ":", "contributors", ")", "{", "System", ".", "out", ".", "println", "(", "contributor", ")", ";", "}", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "github", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "final", "GitHubClientError", "e", ")", "{", "System", ".", "out", ".", "println", "(", "e", ".", "getMessage", "(", ")", ")", ";", "}", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "final", "GitHub", ".", "Issue", "issue", "=", "new", "GitHub", ".", "Issue", "(", ")", ";", "issue", ".", "title", "=", "\"", "<STR_LIT>", "\"", ";", "issue", ".", "body", "=", "\"", "<STR_LIT>", "\"", ";", "github", ".", "createIssue", "(", "issue", ",", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "}", "catch", "(", "final", "GitHubClientError", "e", ")", "{", "System", ".", "out", ".", "println", "(", "e", ".", "getMessage", "(", ")", ")", ";", "}", "}", "</s>"]
["<s>", "GitHubErrorDecoder", "(", "Decoder", "decoder", ")", "{", "this", ".", "decoder", "=", "decoder", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Exception", "decode", "(", "String", "methodKey", ",", "Response", "response", ")", "{", "try", "{", "response", "=", "response", ".", "toBuilder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "build", "(", ")", ";", "return", "(", "Exception", ")", "decoder", ".", "decode", "(", "response", ",", "GitHubClientError", ".", "class", ")", ";", "}", "catch", "(", "final", "IOException", "fallbackToDefault", ")", "{", "return", "defaultDecoder", ".", "decode", "(", "methodKey", ",", "response", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodesMapObjectNumericalValuesAsInteger", "(", ")", "{", "Map", "<", "String", ",", "Object", ">", "map", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "map", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "new", "JacksonEncoder", "(", ")", ".", "encode", "(", "map", ",", "map", ".", "getClass", "(", ")", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "\"", "+", "\"", "<STR_LIT:{>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "encodesFormParams", "(", ")", "{", "Map", "<", "String", ",", "Object", ">", "form", "=", "new", "LinkedHashMap", "<", "String", ",", "Object", ">", "(", ")", ";", "form", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "1", ")", ";", "form", ".", "put", "(", "\"", "<STR_LIT>", "\"", ",", "Arrays", ".", "asList", "(", "<NUM_LIT:2>", ",", "<NUM_LIT:3>", ")", ")", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "new", "JacksonEncoder", "(", ")", ".", "encode", "(", "form", ",", "new", "TypeReference", "<", "Map", "<", "String", ",", "?", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "\"", "+", "\"", "<STR_LIT:{>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT:}>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodes", "(", ")", "throws", "Exception", "{", "List", "<", "Zone", ">", "zones", "=", "new", "LinkedList", "<", ">", "(", ")", ";", "zones", ".", "add", "(", "new", "Zone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "zones", ".", "add", "(", "new", "Zone", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "zonesJson", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "assertEquals", "(", "zones", ",", "new", "JacksonDecoder", "(", ")", ".", "decode", "(", "response", ",", "new", "TypeReference", "<", "List", "<", "Zone", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "nullBodyDecodesToNull", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "build", "(", ")", ";", "assertNull", "(", "new", "JacksonDecoder", "(", ")", ".", "decode", "(", "response", ",", "String", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyBodyDecodesToNull", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "new", "byte", "[", "0", "]", ")", ".", "build", "(", ")", ";", "assertNull", "(", "new", "JacksonDecoder", "(", ")", ".", "decode", "(", "response", ",", "String", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customDecoder", "(", ")", "throws", "Exception", "{", "JacksonDecoder", "decoder", "=", "new", "JacksonDecoder", "(", "Arrays", ".", "asList", "(", "new", "SimpleModule", "(", ")", ".", "addDeserializer", "(", "Zone", ".", "class", ",", "new", "ZoneDeserializer", "(", ")", ")", ")", ")", ";", "List", "<", "Zone", ">", "zones", "=", "new", "LinkedList", "<", "Zone", ">", "(", ")", ";", "zones", ".", "add", "(", "new", "Zone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "zones", ".", "add", "(", "new", "Zone", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "zonesJson", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "assertEquals", "(", "zones", ",", "decoder", ".", "decode", "(", "response", ",", "new", "TypeReference", "<", "List", "<", "Zone", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "customEncoder", "(", ")", "{", "JacksonEncoder", "encoder", "=", "new", "JacksonEncoder", "(", "Arrays", ".", "asList", "(", "new", "SimpleModule", "(", ")", ".", "addSerializer", "(", "Zone", ".", "class", ",", "new", "ZoneSerializer", "(", ")", ")", ")", ")", ";", "List", "<", "Zone", ">", "zones", "=", "new", "LinkedList", "<", "Zone", ">", "(", ")", ";", "zones", ".", "add", "(", "new", "Zone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "zones", ".", "add", "(", "new", "Zone", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "RequestTemplate", "template", "=", "new", "RequestTemplate", "(", ")", ";", "encoder", ".", "encode", "(", "zones", ",", "new", "TypeReference", "<", "List", "<", "Zone", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ",", "template", ")", ";", "assertThat", "(", "template", ")", ".", "hasBody", "(", "\"", "\"", "+", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:U+002C>", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "\"", "+", "System", ".", "lineSeparator", "(", ")", "+", "\"", "<STR_LIT>", "\"", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "decodesIterator", "(", ")", "throws", "Exception", "{", "List", "<", "Zone", ">", "zones", "=", "new", "LinkedList", "<", "Zone", ">", "(", ")", ";", "zones", ".", "add", "(", "new", "Zone", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "zones", ".", "add", "(", "new", "Zone", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ")", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "zonesJson", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "Object", "decoded", "=", "JacksonIteratorDecoder", ".", "create", "(", ")", ".", "decode", "(", "response", ",", "new", "TypeReference", "<", "Iterator", "<", "Zone", ">", ">", "(", ")", "{", "}", ".", "getType", "(", ")", ")", ";", "assertTrue", "(", "Iterator", ".", "class", ".", "isAssignableFrom", "(", "decoded", ".", "getClass", "(", ")", ")", ")", ";", "assertTrue", "(", "Closeable", ".", "class", ".", "isAssignableFrom", "(", "decoded", ".", "getClass", "(", ")", ")", ")", ";", "assertEquals", "(", "zones", ",", "asList", "(", "(", "Iterator", "<", "?", ">", ")", "decoded", ")", ")", ";", "}", "</s>"]
["<s>", "private", "<", "T", ">", "List", "<", "T", ">", "asList", "(", "Iterator", "<", "T", ">", "iter", ")", "{", "final", "List", "<", "T", ">", "copy", "=", "new", "ArrayList", "<", "T", ">", "(", ")", ";", "while", "(", "iter", ".", "hasNext", "(", ")", ")", "copy", ".", "add", "(", "iter", ".", "next", "(", ")", ")", ";", "return", "copy", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "nullBodyDecodesToNullIterator", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "build", "(", ")", ";", "assertNull", "(", "JacksonIteratorDecoder", ".", "create", "(", ")", ".", "decode", "(", "response", ",", "Iterator", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyBodyDecodesToNullIterator", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "new", "byte", "[", "0", "]", ")", ".", "build", "(", ")", ";", "assertNull", "(", "JacksonIteratorDecoder", ".", "create", "(", ")", ".", "decode", "(", "response", ",", "Iterator", ".", "class", ")", ")", ";", "}", "</s>"]
["<s>", "Zone", "(", ")", "{", "}", "</s>"]
["<s>", "Zone", "(", "String", "name", ")", "{", "this", "(", "name", ",", "null", ")", ";", "}", "</s>"]
["<s>", "Zone", "(", "String", "name", ",", "String", "id", ")", "{", "put", "(", "\"", "<STR_LIT>", "\"", ",", "name", ")", ";", "if", "(", "id", "!", "=", "null", ")", "{", "put", "(", "\"", "<STR_LIT>", "\"", ",", "id", ")", ";", "}", "}", "</s>"]
["<s>", "public", "ZoneDeserializer", "(", ")", "{", "super", "(", "Zone", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Zone", "deserialize", "(", "JsonParser", "jp", ",", "DeserializationContext", "ctxt", ")", "throws", "IOException", "{", "Zone", "zone", "=", "new", "Zone", "(", ")", ";", "jp", ".", "nextToken", "(", ")", ";", "while", "(", "jp", ".", "nextToken", "(", ")", "!", "=", "JsonToken", ".", "END_OBJECT", ")", "{", "String", "name", "=", "jp", ".", "getCurrentName", "(", ")", ";", "String", "value", "=", "jp", ".", "getValueAsString", "(", ")", ";", "if", "(", "value", "!", "=", "null", ")", "{", "zone", ".", "put", "(", "name", ",", "value", ".", "toUpperCase", "(", ")", ")", ";", "}", "}", "return", "zone", ";", "}", "</s>"]
["<s>", "public", "ZoneSerializer", "(", ")", "{", "super", "(", "Zone", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "serialize", "(", "Zone", "value", ",", "JsonGenerator", "jgen", ",", "SerializerProvider", "provider", ")", "throws", "IOException", "{", "jgen", ".", "writeStartObject", "(", ")", ";", "for", "(", "Map", ".", "Entry", "<", "String", ",", "Object", ">", "entry", ":", "value", ".", "entrySet", "(", ")", ")", "{", "jgen", ".", "writeFieldName", "(", "entry", ".", "getKey", "(", ")", ")", ";", "jgen", ".", "writeString", "(", "entry", ".", "getValue", "(", ")", ".", "toString", "(", ")", ".", "toUpperCase", "(", ")", ")", ";", "}", "jgen", ".", "writeEndObject", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notFoundDecodesToNull", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "build", "(", ")", ";", "assertThat", "(", "(", "byte", "[", "]", ")", "new", "JacksonDecoder", "(", ")", ".", "decode", "(", "response", ",", "byte", "[", "]", ".", "class", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "notFoundDecodesToNullIterator", "(", ")", "throws", "Exception", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "build", "(", ")", ";", "assertThat", "(", "(", "byte", "[", "]", ")", "JacksonIteratorDecoder", ".", "create", "(", ")", ".", "decode", "(", "response", ",", "byte", "[", "]", ".", "class", ")", ")", ".", "isNull", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldDecodePrimitiveArrays", "(", ")", "throws", "IOException", "{", "assertThat", "(", "iterator", "(", "Integer", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ")", ".", "containsExactly", "(", "0", ",", "1", ",", "<NUM_LIT:2>", ",", "<NUM_LIT:3>", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldNotSkipElementsOnHasNext", "(", ")", "throws", "IOException", "{", "JacksonIterator", "<", "Integer", ">", "iterator", "=", "iterator", "(", "Integer", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "iterator", ".", "hasNext", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "iterator", ".", "hasNext", "(", ")", ")", ".", "isTrue", "(", ")", ";", "assertThat", "(", "iterator", ".", "next", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "iterator", ".", "hasNext", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "hasNextIsNotMandatory", "(", ")", "throws", "IOException", "{", "JacksonIterator", "<", "Integer", ">", "iterator", "=", "iterator", "(", "Integer", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "iterator", ".", "next", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThat", "(", "iterator", ".", "hasNext", "(", ")", ")", ".", "isFalse", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "expectExceptionOnNoElements", "(", ")", "throws", "IOException", "{", "JacksonIterator", "<", "Integer", ">", "iterator", "=", "iterator", "(", "Integer", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "assertThat", "(", "iterator", ".", "next", "(", ")", ")", ".", "isEqualTo", "(", "0", ")", ";", "assertThatThrownBy", "(", "(", ")", "-", ">", "iterator", ".", "next", "(", ")", ")", ".", "hasMessage", "(", "null", ")", ".", "isInstanceOf", "(", "NoSuchElementException", ".", "class", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "shouldDecodeObjects", "(", ")", "throws", "IOException", "{", "assertThat", "(", "iterator", "(", "User", ".", "class", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "\"", ")", ")", ".", "containsExactly", "(", "new", "User", "(", "\"", "<STR_LIT>", "\"", ")", ",", "new", "User", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "malformedObjectThrowsDecodeException", "(", ")", "throws", "IOException", "{", "thrown", ".", "expect", "(", "DecodeException", ".", "class", ")", ";", "thrown", ".", "expectCause", "(", "isA", "(", "IOException", ".", "class", ")", ")", ";", "assertThat", "(", "iterator", "(", "User", ".", "class", ",", "\"", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT::>", "<STR_LIT:\\\">", "<STR_LIT:...>", "\"", ")", ")", ".", "containsOnly", "(", "new", "User", "(", "\"", "<STR_LIT>", "\"", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "emptyBodyDecodesToEmptyIterator", "(", ")", "throws", "IOException", "{", "assertThat", "(", "iterator", "(", "String", ".", "class", ",", "\"", "\"", ")", ")", ".", "isEmpty", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "unmodifiable", "(", ")", "throws", "IOException", "{", "thrown", ".", "expect", "(", "UnsupportedOperationException", ".", "class", ")", ";", "JacksonIterator", "<", "String", ">", "it", "=", "iterator", "(", "String", ".", "class", ",", "\"", "<STR_LIT:[>", "<STR_LIT:\\\">", "<STR_LIT>", "<STR_LIT:\\\">", "<STR_LIT:]>", "\"", ")", ";", "assertThat", "(", "it", ")", ".", "containsExactly", "(", "\"", "<STR_LIT>", "\"", ")", ";", "it", ".", "remove", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "responseIsClosedAfterIteration", "(", ")", "throws", "IOException", "{", "final", "AtomicBoolean", "closed", "=", "new", "AtomicBoolean", "(", ")", ";", "byte", "[", "]", "jsonBytes", "=", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "UTF_8", ")", ";", "InputStream", "inputStream", "=", "new", "ByteArrayInputStream", "(", "jsonBytes", ")", "{", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "closed", ".", "set", "(", "true", ")", ";", "super", ".", "close", "(", ")", ";", "}", "}", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "inputStream", ",", "jsonBytes", ".", "length", ")", ".", "build", "(", ")", ";", "assertThat", "(", "iterator", "(", "Boolean", ".", "class", ",", "response", ")", ")", ".", "hasSize", "(", "<NUM_LIT:2>", ")", ";", "assertThat", "(", "closed", ".", "get", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "closed", ".", "set", "(", "true", ")", ";", "super", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Test", "public", "void", "responseIsClosedOnParseError", "(", ")", "throws", "IOException", "{", "final", "AtomicBoolean", "closed", "=", "new", "AtomicBoolean", "(", ")", ";", "byte", "[", "]", "jsonBytes", "=", "\"", "<STR_LIT>", "\"", ".", "getBytes", "(", "UTF_8", ")", ";", "InputStream", "inputStream", "=", "new", "ByteArrayInputStream", "(", "jsonBytes", ")", "{", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "closed", ".", "set", "(", "true", ")", ";", "super", ".", "close", "(", ")", ";", "}", "}", ";", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "inputStream", ",", "jsonBytes", ".", "length", ")", ".", "build", "(", ")", ";", "try", "{", "thrown", ".", "expect", "(", "DecodeException", ".", "class", ")", ";", "assertThat", "(", "iterator", "(", "Boolean", ".", "class", ",", "response", ")", ")", ".", "hasSize", "(", "1", ")", ";", "}", "finally", "{", "assertThat", "(", "closed", ".", "get", "(", ")", ")", ".", "isTrue", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "closed", ".", "set", "(", "true", ")", ";", "super", ".", "close", "(", ")", ";", "}", "</s>"]
["<s>", "User", "(", ")", "{", "}", "</s>"]
["<s>", "User", "(", "String", "login", ")", "{", "put", "(", "\"", "<STR_LIT>", "\"", ",", "login", ")", ";", "}", "</s>"]
["<s>", "<", "T", ">", "JacksonIterator", "<", "T", ">", "iterator", "(", "Class", "<", "T", ">", "type", ",", "String", "json", ")", "throws", "IOException", "{", "Response", "response", "=", "Response", ".", "builder", "(", ")", ".", "status", "(", "<NUM_LIT>", ")", ".", "reason", "(", "\"", "<STR_LIT:OK>", "\"", ")", ".", "request", "(", "Request", ".", "create", "(", "HttpMethod", ".", "GET", ",", "\"", "<STR_LIT>", "\"", ",", "Collections", ".", "emptyMap", "(", ")", ",", "null", ",", "Util", ".", "UTF_8", ")", ")", ".", "headers", "(", "Collections", ".", "emptyMap", "(", ")", ")", ".", "body", "(", "json", ",", "UTF_8", ")", ".", "build", "(", ")", ";", "return", "iterator", "(", "type", ",", "response", ")", ";", "}", "</s>"]
["<s>", "<", "T", ">", "JacksonIterator", "<", "T", ">", "iterator", "(", "Class", "<", "T", ">", "type", ",", "Response", "response", ")", "throws", "IOException", "{", "return", "new", "JacksonIterator", "<", "T", ">", "(", "type", ".", "getGenericSuperclass", "(", ")", ",", "new", "ObjectMapper", "(", ")", ",", "response", ",", "response", ".", "body", "(", ")", ".", "asReader", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", ".", ".", ".", "args", ")", "{", "GitHub", "github", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "new", "JacksonDecoder", "(", ")", ")", ".", "target", "(", "GitHub", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "List", "<", "Contributor", ">", "contributors", "=", "github", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "for", "(", "Contributor", "contributor", ":", "contributors", ")", "{", "System", ".", "out", ".", "println", "(", "contributor", ".", "login", "+", "\"", "<STR_LIT>", "\"", "+", "contributor", ".", "contributions", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "List", "<", "Contributor", ">", "contributors", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "void", "setLogin", "(", "String", "login", ")", "{", "this", ".", "login", "=", "login", ";", "}", "</s>"]
["<s>", "void", "setContributions", "(", "int", "contributions", ")", "{", "this", ".", "contributions", "=", "contributions", ";", "}", "</s>"]
["<s>", "public", "static", "void", "main", "(", "String", ".", ".", ".", "args", ")", "throws", "IOException", "{", "GitHub", "github", "=", "Feign", ".", "builder", "(", ")", ".", "decoder", "(", "JacksonIteratorDecoder", ".", "create", "(", ")", ")", ".", "doNotCloseAfterDecode", "(", ")", ".", "target", "(", "GitHub", ".", "class", ",", "\"", "<STR_LIT>", "\"", ")", ";", "System", ".", "out", ".", "println", "(", "\"", "<STR_LIT>", "\"", ")", ";", "Iterator", "<", "Contributor", ">", "contributors", "=", "github", ".", "contributors", "(", "\"", "<STR_LIT>", "\"", ",", "\"", "<STR_LIT>", "\"", ")", ";", "try", "{", "while", "(", "contributors", ".", "hasNext", "(", ")", ")", "{", "Contributor", "contributor", "=", "contributors", ".", "next", "(", ")", ";", "System", ".", "out", ".", "println", "(", "contributor", ".", "login", "+", "\"", "<STR_LIT>", "\"", "+", "contributor", ".", "contributions", "+", "\"", "<STR_LIT:)>", "\"", ")", ";", "}", "}", "finally", "{", "(", "(", "Closeable", ")", "contributors", ")", ".", "close", "(", ")", ";", "}", "}", "</s>"]
["<s>", "@", "RequestLine", "(", "\"", "<STR_LIT>", "\"", ")", "Iterator", "<", "Contributor", ">", "contributors", "(", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "owner", ",", "@", "Param", "(", "\"", "<STR_LIT>", "\"", ")", "String", "repo", ")", ";", "</s>"]
["<s>", "void", "setLogin", "(", "String", "login", ")", "{", "this", ".", "login", "=", "login", ";", "}", "</s>"]
["<s>", "void", "setContributions", "(", "int", "contributions", ")", "{", "this", ".", "contributions", "=", "contributions", ";", "}", "</s>"]
["<s>", "JacksonIteratorDecoder", "(", "ObjectMapper", "mapper", ")", "{", "this", ".", "mapper", "=", "mapper", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "if", "(", "response", ".", "body", "(", ")", "=", "=", "null", ")", "return", "null", ";", "Reader", "reader", "=", "response", ".", "body", "(", ")", ".", "asReader", "(", "UTF_8", ")", ";", "if", "(", "!", "reader", ".", "markSupported", "(", ")", ")", "{", "reader", "=", "new", "BufferedReader", "(", "reader", ",", "1", ")", ";", "}", "try", "{", "reader", ".", "mark", "(", "1", ")", ";", "if", "(", "reader", ".", "read", "(", ")", "=", "=", "-", "1", ")", "{", "return", "null", ";", "}", "reader", ".", "reset", "(", ")", ";", "return", "new", "JacksonIterator", "<", "Object", ">", "(", "actualIteratorTypeArgument", "(", "type", ")", ",", "mapper", ",", "response", ",", "reader", ")", ";", "}", "catch", "(", "RuntimeJsonMappingException", "e", ")", "{", "if", "(", "e", ".", "getCause", "(", ")", "!", "=", "null", "&", "&", "e", ".", "getCause", "(", ")", "instanceof", "IOException", ")", "{", "throw", "IOException", ".", "class", ".", "cast", "(", "e", ".", "getCause", "(", ")", ")", ";", "}", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "private", "static", "Type", "actualIteratorTypeArgument", "(", "Type", "type", ")", "{", "if", "(", "!", "(", "type", "instanceof", "ParameterizedType", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "type", ".", "toString", "(", ")", ")", ";", "}", "ParameterizedType", "parameterizedType", "=", "(", "ParameterizedType", ")", "type", ";", "if", "(", "!", "Iterator", ".", "class", ".", "equals", "(", "parameterizedType", ".", "getRawType", "(", ")", ")", ")", "{", "throw", "new", "IllegalArgumentException", "(", "\"", "<STR_LIT>", "\"", "+", "parameterizedType", ".", "getRawType", "(", ")", ".", "toString", "(", ")", ")", ";", "}", "return", "(", "(", "ParameterizedType", ")", "type", ")", ".", "getActualTypeArguments", "(", ")", "[", "0", "]", ";", "}", "</s>"]
["<s>", "public", "static", "JacksonIteratorDecoder", "create", "(", ")", "{", "return", "create", "(", "Collections", ".", "<", "Module", ">", "emptyList", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "JacksonIteratorDecoder", "create", "(", "Iterable", "<", "Module", ">", "modules", ")", "{", "return", "new", "JacksonIteratorDecoder", "(", "new", "ObjectMapper", "(", ")", ".", "configure", "(", "DeserializationFeature", ".", "FAIL_ON_UNKNOWN_PROPERTIES", ",", "false", ")", ".", "registerModules", "(", "modules", ")", ")", ";", "}", "</s>"]
["<s>", "public", "static", "JacksonIteratorDecoder", "create", "(", "ObjectMapper", "objectMapper", ")", "{", "return", "new", "JacksonIteratorDecoder", "(", "objectMapper", ")", ";", "}", "</s>"]
["<s>", "JacksonIterator", "(", "Type", "type", ",", "ObjectMapper", "mapper", ",", "Response", "response", ",", "Reader", "reader", ")", "throws", "IOException", "{", "this", ".", "response", "=", "response", ";", "this", ".", "parser", "=", "mapper", ".", "getFactory", "(", ")", ".", "createParser", "(", "reader", ")", ";", "this", ".", "objectReader", "=", "mapper", ".", "reader", "(", ")", ".", "forType", "(", "mapper", ".", "constructType", "(", "type", ")", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "boolean", "hasNext", "(", ")", "{", "if", "(", "current", "=", "=", "null", ")", "{", "current", "=", "readNext", "(", ")", ";", "}", "return", "current", "!", "=", "null", ";", "}", "</s>"]
["<s>", "private", "T", "readNext", "(", ")", "{", "try", "{", "JsonToken", "jsonToken", "=", "parser", ".", "nextToken", "(", ")", ";", "if", "(", "jsonToken", "=", "=", "null", ")", "{", "return", "null", ";", "}", "if", "(", "jsonToken", "=", "=", "JsonToken", ".", "START_ARRAY", ")", "{", "jsonToken", "=", "parser", ".", "nextToken", "(", ")", ";", "}", "if", "(", "jsonToken", "=", "=", "JsonToken", ".", "END_ARRAY", ")", "{", "ensureClosed", "(", "this", ")", ";", "return", "null", ";", "}", "return", "objectReader", ".", "readValue", "(", "parser", ")", ";", "}", "catch", "(", "IOException", "e", ")", "{", "throw", "new", "DecodeException", "(", "response", ".", "status", "(", ")", ",", "e", ".", "getMessage", "(", ")", ",", "response", ".", "request", "(", ")", ",", "e", ")", ";", "}", "}", "</s>"]
["<s>", "@", "Override", "public", "T", "next", "(", ")", "{", "if", "(", "current", "!", "=", "null", ")", "{", "T", "tmp", "=", "current", ";", "current", "=", "null", ";", "return", "tmp", ";", "}", "T", "next", "=", "readNext", "(", ")", ";", "if", "(", "next", "=", "=", "null", ")", "{", "throw", "new", "NoSuchElementException", "(", ")", ";", "}", "return", "next", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "remove", "(", ")", "{", "throw", "new", "UnsupportedOperationException", "(", ")", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "close", "(", ")", "throws", "IOException", "{", "ensureClosed", "(", "this", ".", "response", ")", ";", "}", "</s>"]
["<s>", "public", "JacksonDecoder", "(", ")", "{", "this", "(", "Collections", ".", "<", "Module", ">", "emptyList", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "JacksonDecoder", "(", "Iterable", "<", "Module", ">", "modules", ")", "{", "this", "(", "new", "ObjectMapper", "(", ")", ".", "configure", "(", "DeserializationFeature", ".", "FAIL_ON_UNKNOWN_PROPERTIES", ",", "false", ")", ".", "registerModules", "(", "modules", ")", ")", ";", "}", "</s>"]
["<s>", "public", "JacksonDecoder", "(", "ObjectMapper", "mapper", ")", "{", "this", ".", "mapper", "=", "mapper", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "Object", "decode", "(", "Response", "response", ",", "Type", "type", ")", "throws", "IOException", "{", "if", "(", "response", ".", "body", "(", ")", "=", "=", "null", ")", "return", "null", ";", "Reader", "reader", "=", "response", ".", "body", "(", ")", ".", "asReader", "(", "Util", ".", "UTF_8", ")", ";", "if", "(", "!", "reader", ".", "markSupported", "(", ")", ")", "{", "reader", "=", "new", "BufferedReader", "(", "reader", ",", "1", ")", ";", "}", "try", "{", "reader", ".", "mark", "(", "1", ")", ";", "if", "(", "reader", ".", "read", "(", ")", "=", "=", "-", "1", ")", "{", "return", "null", ";", "}", "reader", ".", "reset", "(", ")", ";", "return", "mapper", ".", "readValue", "(", "reader", ",", "mapper", ".", "constructType", "(", "type", ")", ")", ";", "}", "catch", "(", "RuntimeJsonMappingException", "e", ")", "{", "if", "(", "e", ".", "getCause", "(", ")", "!", "=", "null", "&", "&", "e", ".", "getCause", "(", ")", "instanceof", "IOException", ")", "{", "throw", "IOException", ".", "class", ".", "cast", "(", "e", ".", "getCause", "(", ")", ")", ";", "}", "throw", "e", ";", "}", "}", "</s>"]
["<s>", "public", "JacksonEncoder", "(", ")", "{", "this", "(", "Collections", ".", "<", "Module", ">", "emptyList", "(", ")", ")", ";", "}", "</s>"]
["<s>", "public", "JacksonEncoder", "(", "Iterable", "<", "Module", ">", "modules", ")", "{", "this", "(", "new", "ObjectMapper", "(", ")", ".", "setSerializationInclusion", "(", "JsonInclude", ".", "Include", ".", "NON_NULL", ")", ".", "configure", "(", "SerializationFeature", ".", "INDENT_OUTPUT", ",", "true", ")", ".", "registerModules", "(", "modules", ")", ")", ";", "}", "</s>"]
["<s>", "public", "JacksonEncoder", "(", "ObjectMapper", "mapper", ")", "{", "this", ".", "mapper", "=", "mapper", ";", "}", "</s>"]
["<s>", "@", "Override", "public", "void", "encode", "(", "Object", "object", ",", "Type", "bodyType", ",", "RequestTemplate", "template", ")", "{", "try", "{", "JavaType", "javaType", "=", "mapper", ".", "getTypeFactory", "(", ")", ".", "constructType", "(", "bodyType", ")", ";", "template", ".", "body", "(", "mapper", ".", "writerFor", "(", "javaType", ")", ".", "writeValueAsBytes", "(", "object", ")", ",", "Util", ".", "UTF_8", ")", ";", "}", "catch", "(", "JsonProcessingException", "e", ")", "{", "throw", "new", "EncodeException", "(", "e", ".", "getMessage", "(", ")", ",", "e", ")", ";", "}", "}", "</s>"]
